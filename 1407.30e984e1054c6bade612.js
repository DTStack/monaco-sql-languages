"use strict";(self.webpackChunkmonaco_sql_languages=self.webpackChunkmonaco_sql_languages||[]).push([[1407],{71407:(e,n,o)=>{o.r(n),o.d(n,{setupLanguageMode:()=>d});var s=o(44647),t=o(15671),i=o(43144),r=o(68619),a=o(93412),u=function(){function e(n,o,s){var i=this;(0,t.Z)(this,e),this._languageId=n,this._worker=o,this._disposables=[],this._listener=Object.create(null);var u=function(e){var n=e.getModeId();n===i._languageId&&(i._listener[e.uri.toString()]=e.onDidChangeContent((0,r.Ds)((function(){i._doValidate(e.uri,n)}),600)),i._doValidate(e.uri,n))},d=function(e){a.j6.setModelMarkers(e,i._languageId,[]);var n=e.uri.toString(),o=i._listener[n];o&&(o.dispose(),delete i._listener[n])};this._disposables.push(a.j6.onDidCreateModel(u)),this._disposables.push(a.j6.onWillDisposeModel(d)),this._disposables.push(a.j6.onDidChangeModelLanguage((function(e){d(e.model),u(e.model)}))),s.onDidChange((function(e){a.j6.getModels().forEach((function(e){e.getModeId()===i._languageId&&(d(e),u(e))}))})),this._disposables.push({dispose:function(){for(var e in i._listener)i._listener[e].dispose()}}),a.j6.getModels().forEach(u)}return(0,i.Z)(e,[{key:"dispose",value:function(){this._disposables.forEach((function(e){return e&&e.dispose()})),this._disposables=[]}},{key:"_doValidate",value:function(e,n){this._worker(e).then((function(n){var o;return n.doValidation((null===(o=a.j6.getModel(e))||void 0===o?void 0:o.getValue())||"")})).then((function(o){var s=o.map((function(e){return o="number"==typeof(n=e).code?String(n.code):n.code,{severity:(n.severity,a.ZL.Error),startLineNumber:n.startLine,startColumn:n.startCol,endLineNumber:n.endLine,endColumn:n.endCol,message:n.message,code:o,source:n.source};var n,o})),t=a.j6.getModel(e);t&&t.getModeId()===n&&a.j6.setModelMarkers(t,n,s)})).then(void 0,(function(e){console.error(e)}))}}]),e}();function d(e){var n=[],o=[],t=new s.X(e);n.push(t);var i,r;return i=e.languageId,r=e.modeConfiguration,c(o),r.diagnostics&&o.push(new u(i,(function(){return t.getLanguageServiceWorker.apply(t,arguments)}),e)),n.push(l(o)),l(n)}function l(e){return{dispose:function(){return c(e)}}}function c(e){for(;e.length;){var n;null===(n=e.pop())||void 0===n||n.dispose()}}}}]);
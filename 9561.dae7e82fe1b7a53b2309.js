"use strict";(self.webpackChunkmonaco_sql_languages=self.webpackChunkmonaco_sql_languages||[]).push([[9561],{79561:(e,n,o)=>{o.r(n),o.d(n,{setupLanguageMode:()=>l});var s=o(88350),t=o(15671),i=o(43144),r=o(4942),a=o(79360),u=o(48785),d=function(){function e(n,o,s){var i=this;(0,t.Z)(this,e),this._languageId=n,this._worker=o,(0,r.Z)(this,"_disposables",[]),(0,r.Z)(this,"_listener",Object.create(null));var d=function(e){var n=e.getModeId();n===i._languageId&&(i._listener[e.uri.toString()]=e.onDidChangeContent((0,a.Ds)((function(){i._doValidate(e.uri,n)}),600)),i._doValidate(e.uri,n))},l=function(e){u.j6.setModelMarkers(e,i._languageId,[]);var n=e.uri.toString(),o=i._listener[n];o&&(o.dispose(),delete i._listener[n])};this._disposables.push(u.j6.onDidCreateModel(d)),this._disposables.push(u.j6.onWillDisposeModel(l)),this._disposables.push(u.j6.onDidChangeModelLanguage((function(e){l(e.model),d(e.model)}))),s.onDidChange((function(e){u.j6.getModels().forEach((function(e){e.getModeId()===i._languageId&&(l(e),d(e))}))})),this._disposables.push({dispose:function(){for(var e in i._listener)i._listener[e].dispose()}}),u.j6.getModels().forEach(d)}return(0,i.Z)(e,[{key:"dispose",value:function(){this._disposables.forEach((function(e){return e&&e.dispose()})),this._disposables=[]}},{key:"_doValidate",value:function(e,n){this._worker(e).then((function(n){var o;return n.doValidation((null===(o=u.j6.getModel(e))||void 0===o?void 0:o.getValue())||"")})).then((function(o){var s=o.map((function(e){return o="number"==typeof(n=e).code?String(n.code):n.code,{severity:(n.severity,u.ZL.Error),startLineNumber:n.startLine,startColumn:n.startCol,endLineNumber:n.endLine,endColumn:n.endCol,message:n.message,code:o,source:n.source};var n,o})),t=u.j6.getModel(e);t&&t.getModeId()===n&&u.j6.setModelMarkers(t,n,s)})).then(void 0,(function(e){console.error(e)}))}}]),e}();function l(e){var n=[],o=[],t=new s.X(e);n.push(t);var i,r;return i=e.languageId,r=e.modeConfiguration,g(o),r.diagnostics&&o.push(new d(i,(function(){return t.getLanguageServiceWorker.apply(t,arguments)}),e)),n.push(c(o)),c(n)}function c(e){return{dispose:function(){return g(e)}}}function g(e){for(;e.length;){var n;null===(n=e.pop())||void 0===n||n.dispose()}}}}]);
//# sourceMappingURL=9561.dae7e82fe1b7a53b2309.js.map
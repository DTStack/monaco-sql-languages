var u=Object.defineProperty;var g=(o,i,t)=>i in o?u(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var c=(o,i,t)=>(g(o,typeof i!="symbol"?i+"":i,t),t);import{B as x,I as h,s as n,f as p,J as d}from"./index-09b6a538.js";class C extends x{constructor(){super("explorer");c(this,"state");this.state=new h}get(t){return this.getAll().find(n(t))}getAll(){return this.getState().data}getActive(){return this.getState().active}setActive(t){this.dispatch(e=>{e.active=t})}toggleActive(t){this.dispatch(e=>{const a=e.active.findIndex(s=>s===t);a===-1?e.active.push(t):e.active.splice(a,1)})}update(t,e){typeof t=="object"?this.dispatch(a=>{const s=a.data.find(n(t.id));s&&Object.assign(s,t)}):this.dispatch(a=>{const s=a.data.find(n(t));s&&Object.assign(s,e==null?void 0:e(s))})}add(t){this.dispatch(e=>{e.data.push(...p(t))})}addToolbar(t,e){this.dispatch(a=>{var l,r;const s=a.data.findIndex(n(t));s!==-1&&((l=a.data[s]).toolbar??(l.toolbar=[]),(r=a.data[s].toolbar)==null||r.push(...p(e)))})}remove(t){this.dispatch(e=>{const a=e.data.findIndex(n(t));a!==-1&&e.data.splice(a,1)})}removeToolbar(t,e){this.dispatch(a=>{var l,r;const s=a.data.findIndex(n(t));s!==-1&&(typeof e=="function"?a.data[s].toolbar=(l=a.data[s].toolbar)==null?void 0:l.filter(e):a.data[s].toolbar=(r=a.data[s].toolbar)==null?void 0:r.filter(b=>!e.includes(b.id)))})}togglePanel(t,e){this.update(t,a=>({hidden:typeof e=="boolean"?e:!a.hidden}))}reset(){this.setState(new h)}onPanelToolbarClick(t){this.subscribe(d.onPanelToolbarClick,t)}onCollapseChange(t){this.subscribe(d.onCollapseChange,t)}onContextMenu(t){this.subscribe(d.onContextMenu,t)}}export{C as ExplorerService};

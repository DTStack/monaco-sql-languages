var w=Object.defineProperty;var P=(n,t,e)=>t in n?w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>(P(n,typeof t!="symbol"?t+"":t,e),e);import{B as F,s as u,f as S,L as h,i as D,e as r}from"./index-09b6a538.js";class d{constructor(t=[]){this.data=t}}var G=Object.defineProperty,I=Object.getOwnPropertyDescriptor,K=(n,t,e,i)=>{for(var o=i>1?void 0:i?I(t,e):t,s=n.length-1,c;s>=0;s--)(c=n[s])&&(o=(i?c(t,e,o):c(o))||o);return i&&o&&G(t,e,o),o},a=(n,t)=>(e,i)=>t(e,i,n);let f=class extends F{constructor(t,e,i,o,s,c,m,p,y,b,x,g,v,B,A,T,_,E,C,j,M,O,k){super("extension");l(this,"state");l(this,"_predicate",()=>!0);l(this,"getContext",()=>({locale:this.locale,builtin:this.builtin,contextMenu:this.contextMenu,auxiliaryBar:this.auxiliaryBar,layout:this.layout,statusBar:this.statusBar,menuBar:this.menuBar,activityBar:this.activityBar,sidebar:this.sidebar,explorer:this.explorer,folderTree:this.folderTree,keyboardFocus:this.keyboardFocus,panel:this.panel,output:this.output,editor:this.editor,colorTheme:this.colorTheme,action:this.action,editorTree:this.editorTree,notification:this.notification,search:this.search,settings:this.settings}));this.locale=t,this.builtin=e,this.contextMenu=i,this.auxiliaryBar=o,this.layout=s,this.statusBar=c,this.menuBar=m,this.activityBar=p,this.sidebar=y,this.explorer=b,this.folderTree=x,this.keyboardFocus=g,this.panel=v,this.output=B,this.editor=A,this.colorTheme=T,this.action=_,this.editorTree=E,this.notification=C,this.search=j,this.settings=M,this.monaco=O,this.module=k,this.state=new d}isExtension(t){return t?typeof t=="object"&&["activate","id","name"].every(e=>e in t):!1}get(t){return this.getAll().find(u(t))}getAll(){return this.getState().data}inactive(t){this._predicate=t}add(t){this.dispatch(e=>{e.data.push(...S(t))})}load(t){const e=this.getAll();Array.isArray(e)&&e.filter(this._predicate).forEach(i=>{this.isExtension(i)&&i.contributes&&this.loadContributes(i.contributes,t)})}activate(){const t=this.getAll();if(!Array.isArray(t))return;const e=this.getContext();t.filter(this._predicate).forEach(i=>{this.isExtension(i)&&i.activate(e,this.monaco)})}loadContributes(t,e){Object.keys(t).forEach(o=>{switch(o){case h.Themes:{const s=t[o];if(!Array.isArray(s))return;this.colorTheme.add(s);break}case h.Languages:{const s=t[o];if(!Array.isArray(s))return;this.locale.add(s);break}case h.Commands:{const s=t[o];if(!Array.isArray(s))return;s.forEach(c=>this.action.registerAction(c));break}case h.Modules:{const s=t[o];if(!s)return;Object.keys(s).forEach(c=>{this.module.update(c,s[c])});break}case h.Grammar:{const s=t[o];this.colorTheme._activeGrammar(s,e);break}}})}dispose(t){var o;const e=this.getContext(),i=this.get(t);i&&((o=i.dispose)==null||o.call(i,e),this.dispatch(s=>{const c=s.data.findIndex(u(t));c!==-1&&s.data.splice(c,1)}))}disposeAll(){this.getAll().forEach(e=>{var o;const i=this.getContext();(o=e.dispose)==null||o.call(e,i)}),this.reset()}reset(){this.setState(new d)}};f=K([D(),a(0,r("locale")),a(1,r("builtin")),a(2,r("contextMenu")),a(3,r("auxiliaryBar")),a(4,r("layout")),a(5,r("statusBar")),a(6,r("menuBar")),a(7,r("activityBar")),a(8,r("sidebar")),a(9,r("explorer")),a(10,r("folderTree")),a(11,r("keyboardFocus")),a(12,r("panel")),a(13,r("output")),a(14,r("editor")),a(15,r("colorTheme")),a(16,r("action")),a(17,r("editorTree")),a(18,r("notification")),a(19,r("search")),a(20,r("settings")),a(21,r("monaco")),a(22,r("module"))],f);export{f as ExtensionService};

var Dve=Object.defineProperty;var Tve=(i,e,t)=>e in i?Dve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var hv=(i,e,t)=>(Tve(i,typeof e!="symbol"?e+"":e,t),t);function Hre(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Ive(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var $re={exports:{}},D5={},zre={exports:{}},Ki={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO=Symbol.for("react.element"),kve=Symbol.for("react.portal"),Nve=Symbol.for("react.fragment"),Ave=Symbol.for("react.strict_mode"),Ove=Symbol.for("react.profiler"),Rve=Symbol.for("react.provider"),Mve=Symbol.for("react.context"),Pve=Symbol.for("react.forward_ref"),Fve=Symbol.for("react.suspense"),Bve=Symbol.for("react.memo"),Wve=Symbol.for("react.lazy"),DZ=Symbol.iterator;function Vve(i){return i===null||typeof i!="object"?null:(i=DZ&&i[DZ]||i["@@iterator"],typeof i=="function"?i:null)}var Ure={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jre=Object.assign,Kre={};function TS(i,e,t){this.props=i,this.context=e,this.refs=Kre,this.updater=t||Ure}TS.prototype.isReactComponent={};TS.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};TS.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Gre(){}Gre.prototype=TS.prototype;function xj(i,e,t){this.props=i,this.context=e,this.refs=Kre,this.updater=t||Ure}var Dj=xj.prototype=new Gre;Dj.constructor=xj;jre(Dj,TS.prototype);Dj.isPureReactComponent=!0;var TZ=Array.isArray,qre=Object.prototype.hasOwnProperty,Tj={current:null},Yre={key:!0,ref:!0,__self:!0,__source:!0};function Zre(i,e,t){var n,r={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)qre.call(e,n)&&!Yre.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];r.children=u}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:jO,type:i,key:o,ref:s,props:r,_owner:Tj.current}}function Hve(i,e){return{$$typeof:jO,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function Ij(i){return typeof i=="object"&&i!==null&&i.$$typeof===jO}function $ve(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var IZ=/\/+/g;function x7(i,e){return typeof i=="object"&&i!==null&&i.key!=null?$ve(""+i.key):e.toString(36)}function TP(i,e,t,n,r){var o=typeof i;(o==="undefined"||o==="boolean")&&(i=null);var s=!1;if(i===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(i.$$typeof){case jO:case kve:s=!0}}if(s)return s=i,r=r(s),i=n===""?"."+x7(s,0):n,TZ(r)?(t="",i!=null&&(t=i.replace(IZ,"$&/")+"/"),TP(r,e,t,"",function(d){return d})):r!=null&&(Ij(r)&&(r=Hve(r,t+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(IZ,"$&/")+"/")+i)),e.push(r)),1;if(s=0,n=n===""?".":n+":",TZ(i))for(var a=0;a<i.length;a++){o=i[a];var u=n+x7(o,a);s+=TP(o,e,t,u,r)}else if(u=Vve(i),typeof u=="function")for(i=u.call(i),a=0;!(o=i.next()).done;)o=o.value,u=n+x7(o,a++),s+=TP(o,e,t,u,r);else if(o==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function qR(i,e,t){if(i==null)return i;var n=[],r=0;return TP(i,n,"","",function(o){return e.call(t,o,r++)}),n}function zve(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var kl={current:null},IP={transition:null},Uve={ReactCurrentDispatcher:kl,ReactCurrentBatchConfig:IP,ReactCurrentOwner:Tj};function Xre(){throw Error("act(...) is not supported in production builds of React.")}Ki.Children={map:qR,forEach:function(i,e,t){qR(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return qR(i,function(){e++}),e},toArray:function(i){return qR(i,function(e){return e})||[]},only:function(i){if(!Ij(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Ki.Component=TS;Ki.Fragment=Nve;Ki.Profiler=Ove;Ki.PureComponent=xj;Ki.StrictMode=Ave;Ki.Suspense=Fve;Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uve;Ki.act=Xre;Ki.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=jre({},i.props),r=i.key,o=i.ref,s=i._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Tj.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(u in e)qre.call(e,u)&&!Yre.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:jO,type:i.type,key:r,ref:o,props:n,_owner:s}};Ki.createContext=function(i){return i={$$typeof:Mve,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Rve,_context:i},i.Consumer=i};Ki.createElement=Zre;Ki.createFactory=function(i){var e=Zre.bind(null,i);return e.type=i,e};Ki.createRef=function(){return{current:null}};Ki.forwardRef=function(i){return{$$typeof:Pve,render:i}};Ki.isValidElement=Ij;Ki.lazy=function(i){return{$$typeof:Wve,_payload:{_status:-1,_result:i},_init:zve}};Ki.memo=function(i,e){return{$$typeof:Bve,type:i,compare:e===void 0?null:e}};Ki.startTransition=function(i){var e=IP.transition;IP.transition={};try{i()}finally{IP.transition=e}};Ki.unstable_act=Xre;Ki.useCallback=function(i,e){return kl.current.useCallback(i,e)};Ki.useContext=function(i){return kl.current.useContext(i)};Ki.useDebugValue=function(){};Ki.useDeferredValue=function(i){return kl.current.useDeferredValue(i)};Ki.useEffect=function(i,e){return kl.current.useEffect(i,e)};Ki.useId=function(){return kl.current.useId()};Ki.useImperativeHandle=function(i,e,t){return kl.current.useImperativeHandle(i,e,t)};Ki.useInsertionEffect=function(i,e){return kl.current.useInsertionEffect(i,e)};Ki.useLayoutEffect=function(i,e){return kl.current.useLayoutEffect(i,e)};Ki.useMemo=function(i,e){return kl.current.useMemo(i,e)};Ki.useReducer=function(i,e,t){return kl.current.useReducer(i,e,t)};Ki.useRef=function(i){return kl.current.useRef(i)};Ki.useState=function(i){return kl.current.useState(i)};Ki.useSyncExternalStore=function(i,e,t){return kl.current.useSyncExternalStore(i,e,t)};Ki.useTransition=function(){return kl.current.useTransition()};Ki.version="18.3.1";zre.exports=Ki;var he=zre.exports;const re=Wp(he),jve=Hre({__proto__:null,default:re},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kve=he,Gve=Symbol.for("react.element"),qve=Symbol.for("react.fragment"),Yve=Object.prototype.hasOwnProperty,Zve=Kve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xve={key:!0,ref:!0,__self:!0,__source:!0};function Qre(i,e,t){var n,r={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)Yve.call(e,n)&&!Xve.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Gve,type:i,key:o,ref:s,props:r,_owner:Zve.current}}D5.Fragment=qve;D5.jsx=Qre;D5.jsxs=Qre;$re.exports=D5;var Mc=$re.exports,HW={},Jre={exports:{}},mc={},eoe={exports:{}},toe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(G,z){var k=G.length;G.push(z);e:for(;0<k;){var K=k-1>>>1,fe=G[K];if(0<r(fe,z))G[K]=z,G[k]=fe,k=K;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var z=G[0],k=G.pop();if(k!==z){G[0]=k;e:for(var K=0,fe=G.length,ne=fe>>>1;K<ne;){var be=2*(K+1)-1,De=G[be],Ve=be+1,rt=G[Ve];if(0>r(De,k))Ve<fe&&0>r(rt,De)?(G[K]=rt,G[Ve]=k,K=Ve):(G[K]=De,G[be]=k,K=be);else if(Ve<fe&&0>r(rt,k))G[K]=rt,G[Ve]=k,K=Ve;else break e}}return z}function r(G,z){var k=G.sortIndex-z.sortIndex;return k!==0?k:G.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();i.unstable_now=function(){return s.now()-a}}var u=[],d=[],h=1,f=null,p=3,m=!1,v=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(G){for(var z=t(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=G)n(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(d)}}function A(G){if(b=!1,L(G),!v)if(t(u)!==null)v=!0,j(N);else{var z=t(d);z!==null&&U(A,z.startTime-G)}}function N(G,z){v=!1,b&&(b=!1,S(R),R=-1),m=!0;var k=p;try{for(L(z),f=t(u);f!==null&&(!(f.expirationTime>z)||G&&!$());){var K=f.callback;if(typeof K=="function"){f.callback=null,p=f.priorityLevel;var fe=K(f.expirationTime<=z);z=i.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(u)&&n(u),L(z)}else n(u);f=t(u)}if(f!==null)var ne=!0;else{var be=t(d);be!==null&&U(A,be.startTime-z),ne=!1}return ne}finally{f=null,p=k,m=!1}}var H=!1,M=null,R=-1,q=5,X=-1;function $(){return!(i.unstable_now()-X<q)}function I(){if(M!==null){var G=i.unstable_now();X=G;var z=!0;try{z=M(!0,G)}finally{z?O():(H=!1,M=null)}}else H=!1}var O;if(typeof w=="function")O=function(){w(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=I,O=function(){W.postMessage(null)}}else O=function(){E(I,0)};function j(G){M=G,H||(H=!0,O())}function U(G,z){R=E(function(){G(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){v||m||(v=!0,j(N))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(G){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var k=p;p=z;try{return G()}finally{p=k}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var k=p;p=G;try{return z()}finally{p=k}},i.unstable_scheduleCallback=function(G,z,k){var K=i.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?K+k:K):k=K,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=k+fe,G={id:h++,callback:z,priorityLevel:G,startTime:k,expirationTime:fe,sortIndex:-1},k>K?(G.sortIndex=k,e(d,G),t(u)===null&&G===t(d)&&(b?(S(R),R=-1):b=!0,U(A,k-K))):(G.sortIndex=fe,e(u,G),v||m||(v=!0,j(N))),G},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(G){var z=p;return function(){var k=p;p=z;try{return G.apply(this,arguments)}finally{p=k}}}})(toe);eoe.exports=toe;var Qve=eoe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jve=he,lc=Qve;function Et(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var noe=new Set,Q2={};function hC(i,e){Nw(i,e),Nw(i+"Capture",e)}function Nw(i,e){for(Q2[i]=e,i=0;i<e.length;i++)noe.add(e[i])}var Lp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$W=Object.prototype.hasOwnProperty,e0e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kZ={},NZ={};function t0e(i){return $W.call(NZ,i)?!0:$W.call(kZ,i)?!1:e0e.test(i)?NZ[i]=!0:(kZ[i]=!0,!1)}function n0e(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function i0e(i,e,t,n){if(e===null||typeof e>"u"||n0e(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nl(i,e,t,n,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Aa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Aa[i]=new Nl(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Aa[e]=new Nl(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Aa[i]=new Nl(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Aa[i]=new Nl(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Aa[i]=new Nl(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Aa[i]=new Nl(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Aa[i]=new Nl(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Aa[i]=new Nl(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Aa[i]=new Nl(i,5,!1,i.toLowerCase(),null,!1,!1)});var kj=/[\-:]([a-z])/g;function Nj(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(kj,Nj);Aa[e]=new Nl(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(kj,Nj);Aa[e]=new Nl(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(kj,Nj);Aa[e]=new Nl(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Aa[i]=new Nl(i,1,!1,i.toLowerCase(),null,!1,!1)});Aa.xlinkHref=new Nl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Aa[i]=new Nl(i,1,!1,i.toLowerCase(),null,!0,!0)});function Aj(i,e,t,n){var r=Aa.hasOwnProperty(e)?Aa[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(i0e(e,t,r,n)&&(t=null),n||r===null?t0e(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Vp=Jve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,YR=Symbol.for("react.element"),Cy=Symbol.for("react.portal"),yy=Symbol.for("react.fragment"),Oj=Symbol.for("react.strict_mode"),zW=Symbol.for("react.profiler"),ioe=Symbol.for("react.provider"),roe=Symbol.for("react.context"),Rj=Symbol.for("react.forward_ref"),UW=Symbol.for("react.suspense"),jW=Symbol.for("react.suspense_list"),Mj=Symbol.for("react.memo"),xv=Symbol.for("react.lazy"),ooe=Symbol.for("react.offscreen"),AZ=Symbol.iterator;function gN(i){return i===null||typeof i!="object"?null:(i=AZ&&i[AZ]||i["@@iterator"],typeof i=="function"?i:null)}var zo=Object.assign,D7;function zN(i){if(D7===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D7=e&&e[1]||""}return`
`+D7+i}var T7=!1;function I7(i,e){if(!i||T7)return"";T7=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(i,[],e)}else{try{e.call()}catch(d){n=d}i.call(e.prototype)}else{try{throw Error()}catch(d){n=d}i()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),o=n.stack.split(`
`),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||r[s]!==o[a]){var u=`
`+r[s].replace(" at new "," at ");return i.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",i.displayName)),u}while(1<=s&&0<=a);break}}}finally{T7=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?zN(i):""}function r0e(i){switch(i.tag){case 5:return zN(i.type);case 16:return zN("Lazy");case 13:return zN("Suspense");case 19:return zN("SuspenseList");case 0:case 2:case 15:return i=I7(i.type,!1),i;case 11:return i=I7(i.type.render,!1),i;case 1:return i=I7(i.type,!0),i;default:return""}}function KW(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case yy:return"Fragment";case Cy:return"Portal";case zW:return"Profiler";case Oj:return"StrictMode";case UW:return"Suspense";case jW:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case roe:return(i.displayName||"Context")+".Consumer";case ioe:return(i._context.displayName||"Context")+".Provider";case Rj:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Mj:return e=i.displayName||null,e!==null?e:KW(i.type)||"Memo";case xv:e=i._payload,i=i._init;try{return KW(i(e))}catch{}}return null}function o0e(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KW(e);case 8:return e===Oj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function f0(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function soe(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s0e(i){var e=soe(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,o=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function ZR(i){i._valueTracker||(i._valueTracker=s0e(i))}function aoe(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=soe(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function M4(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function GW(i,e){var t=e.checked;return zo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function OZ(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=f0(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function loe(i,e){e=e.checked,e!=null&&Aj(i,"checked",e,!1)}function qW(i,e){loe(i,e);var t=f0(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?YW(i,e.type,t):e.hasOwnProperty("defaultValue")&&YW(i,e.type,f0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function RZ(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function YW(i,e,t){(e!=="number"||M4(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var UN=Array.isArray;function Yy(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+f0(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function ZW(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Et(91));return zo({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function MZ(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Et(92));if(UN(t)){if(1<t.length)throw Error(Et(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:f0(t)}}function uoe(i,e){var t=f0(e.value),n=f0(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function PZ(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function coe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XW(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?coe(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var XR,doe=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(XR=XR||document.createElement("div"),XR.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=XR.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function J2(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var f2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a0e=["Webkit","ms","Moz","O"];Object.keys(f2).forEach(function(i){a0e.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),f2[e]=f2[i]})});function hoe(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||f2.hasOwnProperty(i)&&f2[i]?(""+e).trim():e+"px"}function foe(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=hoe(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var l0e=zo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QW(i,e){if(e){if(l0e[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Et(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Et(62))}}function JW(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eV=null;function Pj(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var tV=null,Zy=null,Xy=null;function FZ(i){if(i=qO(i)){if(typeof tV!="function")throw Error(Et(280));var e=i.stateNode;e&&(e=A5(e),tV(i.stateNode,i.type,e))}}function goe(i){Zy?Xy?Xy.push(i):Xy=[i]:Zy=i}function poe(){if(Zy){var i=Zy,e=Xy;if(Xy=Zy=null,FZ(i),e)for(i=0;i<e.length;i++)FZ(e[i])}}function moe(i,e){return i(e)}function _oe(){}var k7=!1;function voe(i,e,t){if(k7)return i(e,t);k7=!0;try{return moe(i,e,t)}finally{k7=!1,(Zy!==null||Xy!==null)&&(_oe(),poe())}}function eA(i,e){var t=i.stateNode;if(t===null)return null;var n=A5(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Et(231,e,typeof t));return t}var nV=!1;if(Lp)try{var pN={};Object.defineProperty(pN,"passive",{get:function(){nV=!0}}),window.addEventListener("test",pN,pN),window.removeEventListener("test",pN,pN)}catch{nV=!1}function u0e(i,e,t,n,r,o,s,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var g2=!1,P4=null,F4=!1,iV=null,c0e={onError:function(i){g2=!0,P4=i}};function d0e(i,e,t,n,r,o,s,a,u){g2=!1,P4=null,u0e.apply(c0e,arguments)}function h0e(i,e,t,n,r,o,s,a,u){if(d0e.apply(this,arguments),g2){if(g2){var d=P4;g2=!1,P4=null}else throw Error(Et(198));F4||(F4=!0,iV=d)}}function fC(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function boe(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function BZ(i){if(fC(i)!==i)throw Error(Et(188))}function f0e(i){var e=i.alternate;if(!e){if(e=fC(i),e===null)throw Error(Et(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var o=r.alternate;if(o===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===t)return BZ(r),i;if(o===n)return BZ(r),e;o=o.sibling}throw Error(Et(188))}if(t.return!==n.return)t=r,n=o;else{for(var s=!1,a=r.child;a;){if(a===t){s=!0,t=r,n=o;break}if(a===n){s=!0,n=r,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,n=r;break}if(a===n){s=!0,n=o,t=r;break}a=a.sibling}if(!s)throw Error(Et(189))}}if(t.alternate!==n)throw Error(Et(190))}if(t.tag!==3)throw Error(Et(188));return t.stateNode.current===t?i:e}function Coe(i){return i=f0e(i),i!==null?yoe(i):null}function yoe(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=yoe(i);if(e!==null)return e;i=i.sibling}return null}var woe=lc.unstable_scheduleCallback,WZ=lc.unstable_cancelCallback,g0e=lc.unstable_shouldYield,p0e=lc.unstable_requestPaint,as=lc.unstable_now,m0e=lc.unstable_getCurrentPriorityLevel,Fj=lc.unstable_ImmediatePriority,Soe=lc.unstable_UserBlockingPriority,B4=lc.unstable_NormalPriority,_0e=lc.unstable_LowPriority,Eoe=lc.unstable_IdlePriority,T5=null,Zf=null;function v0e(i){if(Zf&&typeof Zf.onCommitFiberRoot=="function")try{Zf.onCommitFiberRoot(T5,i,void 0,(i.current.flags&128)===128)}catch{}}var $h=Math.clz32?Math.clz32:y0e,b0e=Math.log,C0e=Math.LN2;function y0e(i){return i>>>=0,i===0?32:31-(b0e(i)/C0e|0)|0}var QR=64,JR=4194304;function jN(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function W4(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,o=i.pingedLanes,s=t&268435455;if(s!==0){var a=s&~r;a!==0?n=jN(a):(o&=s,o!==0&&(n=jN(o)))}else s=t&~r,s!==0?n=jN(s):o!==0&&(n=jN(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-$h(e),r=1<<t,n|=i[t],e&=~r;return n}function w0e(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S0e(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,o=i.pendingLanes;0<o;){var s=31-$h(o),a=1<<s,u=r[s];u===-1?(!(a&t)||a&n)&&(r[s]=w0e(a,e)):u<=e&&(i.expiredLanes|=a),o&=~a}}function rV(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Loe(){var i=QR;return QR<<=1,!(QR&4194240)&&(QR=64),i}function N7(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function KO(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-$h(e),i[e]=t}function E0e(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-$h(t),o=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~o}}function Bj(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-$h(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var Vr=0;function xoe(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Doe,Wj,Toe,Ioe,koe,oV=!1,eM=[],Gv=null,qv=null,Yv=null,tA=new Map,nA=new Map,Nv=[],L0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VZ(i,e){switch(i){case"focusin":case"focusout":Gv=null;break;case"dragenter":case"dragleave":qv=null;break;case"mouseover":case"mouseout":Yv=null;break;case"pointerover":case"pointerout":tA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nA.delete(e.pointerId)}}function mN(i,e,t,n,r,o){return i===null||i.nativeEvent!==o?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},e!==null&&(e=qO(e),e!==null&&Wj(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function x0e(i,e,t,n,r){switch(e){case"focusin":return Gv=mN(Gv,i,e,t,n,r),!0;case"dragenter":return qv=mN(qv,i,e,t,n,r),!0;case"mouseover":return Yv=mN(Yv,i,e,t,n,r),!0;case"pointerover":var o=r.pointerId;return tA.set(o,mN(tA.get(o)||null,i,e,t,n,r)),!0;case"gotpointercapture":return o=r.pointerId,nA.set(o,mN(nA.get(o)||null,i,e,t,n,r)),!0}return!1}function Noe(i){var e=Nb(i.target);if(e!==null){var t=fC(e);if(t!==null){if(e=t.tag,e===13){if(e=boe(t),e!==null){i.blockedOn=e,koe(i.priority,function(){Toe(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kP(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=sV(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);eV=n,t.target.dispatchEvent(n),eV=null}else return e=qO(t),e!==null&&Wj(e),i.blockedOn=t,!1;e.shift()}return!0}function HZ(i,e,t){kP(i)&&t.delete(e)}function D0e(){oV=!1,Gv!==null&&kP(Gv)&&(Gv=null),qv!==null&&kP(qv)&&(qv=null),Yv!==null&&kP(Yv)&&(Yv=null),tA.forEach(HZ),nA.forEach(HZ)}function _N(i,e){i.blockedOn===e&&(i.blockedOn=null,oV||(oV=!0,lc.unstable_scheduleCallback(lc.unstable_NormalPriority,D0e)))}function iA(i){function e(r){return _N(r,i)}if(0<eM.length){_N(eM[0],i);for(var t=1;t<eM.length;t++){var n=eM[t];n.blockedOn===i&&(n.blockedOn=null)}}for(Gv!==null&&_N(Gv,i),qv!==null&&_N(qv,i),Yv!==null&&_N(Yv,i),tA.forEach(e),nA.forEach(e),t=0;t<Nv.length;t++)n=Nv[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Nv.length&&(t=Nv[0],t.blockedOn===null);)Noe(t),t.blockedOn===null&&Nv.shift()}var Qy=Vp.ReactCurrentBatchConfig,V4=!0;function T0e(i,e,t,n){var r=Vr,o=Qy.transition;Qy.transition=null;try{Vr=1,Vj(i,e,t,n)}finally{Vr=r,Qy.transition=o}}function I0e(i,e,t,n){var r=Vr,o=Qy.transition;Qy.transition=null;try{Vr=4,Vj(i,e,t,n)}finally{Vr=r,Qy.transition=o}}function Vj(i,e,t,n){if(V4){var r=sV(i,e,t,n);if(r===null)H7(i,e,n,H4,t),VZ(i,n);else if(x0e(r,i,e,t,n))n.stopPropagation();else if(VZ(i,n),e&4&&-1<L0e.indexOf(i)){for(;r!==null;){var o=qO(r);if(o!==null&&Doe(o),o=sV(i,e,t,n),o===null&&H7(i,e,n,H4,t),o===r)break;r=o}r!==null&&n.stopPropagation()}else H7(i,e,n,null,t)}}var H4=null;function sV(i,e,t,n){if(H4=null,i=Pj(n),i=Nb(i),i!==null)if(e=fC(i),e===null)i=null;else if(t=e.tag,t===13){if(i=boe(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return H4=i,null}function Aoe(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m0e()){case Fj:return 1;case Soe:return 4;case B4:case _0e:return 16;case Eoe:return 536870912;default:return 16}default:return 16}}var Pv=null,Hj=null,NP=null;function Ooe(){if(NP)return NP;var i,e=Hj,t=e.length,n,r="value"in Pv?Pv.value:Pv.textContent,o=r.length;for(i=0;i<t&&e[i]===r[i];i++);var s=t-i;for(n=1;n<=s&&e[t-n]===r[o-n];n++);return NP=r.slice(i,1<n?1-n:void 0)}function AP(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function tM(){return!0}function $Z(){return!1}function _c(i){function e(t,n,r,o,s){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tM:$Z,this.isPropagationStopped=$Z,this}return zo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tM)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tM)},persist:function(){},isPersistent:tM}),e}var IS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$j=_c(IS),GO=zo({},IS,{view:0,detail:0}),k0e=_c(GO),A7,O7,vN,I5=zo({},GO,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zj,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vN&&(vN&&i.type==="mousemove"?(A7=i.screenX-vN.screenX,O7=i.screenY-vN.screenY):O7=A7=0,vN=i),A7)},movementY:function(i){return"movementY"in i?i.movementY:O7}}),zZ=_c(I5),N0e=zo({},I5,{dataTransfer:0}),A0e=_c(N0e),O0e=zo({},GO,{relatedTarget:0}),R7=_c(O0e),R0e=zo({},IS,{animationName:0,elapsedTime:0,pseudoElement:0}),M0e=_c(R0e),P0e=zo({},IS,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),F0e=_c(P0e),B0e=zo({},IS,{data:0}),UZ=_c(B0e),W0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $0e(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=H0e[i])?!!e[i]:!1}function zj(){return $0e}var z0e=zo({},GO,{key:function(i){if(i.key){var e=W0e[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=AP(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?V0e[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zj,charCode:function(i){return i.type==="keypress"?AP(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?AP(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),U0e=_c(z0e),j0e=zo({},I5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jZ=_c(j0e),K0e=zo({},GO,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zj}),G0e=_c(K0e),q0e=zo({},IS,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y0e=_c(q0e),Z0e=zo({},I5,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X0e=_c(Z0e),Q0e=[9,13,27,32],Uj=Lp&&"CompositionEvent"in window,p2=null;Lp&&"documentMode"in document&&(p2=document.documentMode);var J0e=Lp&&"TextEvent"in window&&!p2,Roe=Lp&&(!Uj||p2&&8<p2&&11>=p2),KZ=String.fromCharCode(32),GZ=!1;function Moe(i,e){switch(i){case"keyup":return Q0e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Poe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var wy=!1;function ebe(i,e){switch(i){case"compositionend":return Poe(e);case"keypress":return e.which!==32?null:(GZ=!0,KZ);case"textInput":return i=e.data,i===KZ&&GZ?null:i;default:return null}}function tbe(i,e){if(wy)return i==="compositionend"||!Uj&&Moe(i,e)?(i=Ooe(),NP=Hj=Pv=null,wy=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Roe&&e.locale!=="ko"?null:e.data;default:return null}}var nbe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qZ(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!nbe[i.type]:e==="textarea"}function Foe(i,e,t,n){goe(n),e=$4(e,"onChange"),0<e.length&&(t=new $j("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var m2=null,rA=null;function ibe(i){qoe(i,0)}function k5(i){var e=Ly(i);if(aoe(e))return i}function rbe(i,e){if(i==="change")return e}var Boe=!1;if(Lp){var M7;if(Lp){var P7="oninput"in document;if(!P7){var YZ=document.createElement("div");YZ.setAttribute("oninput","return;"),P7=typeof YZ.oninput=="function"}M7=P7}else M7=!1;Boe=M7&&(!document.documentMode||9<document.documentMode)}function ZZ(){m2&&(m2.detachEvent("onpropertychange",Woe),rA=m2=null)}function Woe(i){if(i.propertyName==="value"&&k5(rA)){var e=[];Foe(e,rA,i,Pj(i)),voe(ibe,e)}}function obe(i,e,t){i==="focusin"?(ZZ(),m2=e,rA=t,m2.attachEvent("onpropertychange",Woe)):i==="focusout"&&ZZ()}function sbe(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return k5(rA)}function abe(i,e){if(i==="click")return k5(e)}function lbe(i,e){if(i==="input"||i==="change")return k5(e)}function ube(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Jh=typeof Object.is=="function"?Object.is:ube;function oA(i,e){if(Jh(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!$W.call(e,r)||!Jh(i[r],e[r]))return!1}return!0}function XZ(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function QZ(i,e){var t=XZ(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=XZ(t)}}function Voe(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Voe(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Hoe(){for(var i=window,e=M4();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=M4(i.document)}return e}function jj(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function cbe(i){var e=Hoe(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Voe(t.ownerDocument.documentElement,t)){if(n!==null&&jj(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,o=Math.min(n.start,r);n=n.end===void 0?o:Math.min(n.end,r),!i.extend&&o>n&&(r=n,n=o,o=r),r=QZ(t,o);var s=QZ(t,n);r&&s&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==s.node||i.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),o>n?(i.addRange(e),i.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var dbe=Lp&&"documentMode"in document&&11>=document.documentMode,Sy=null,aV=null,_2=null,lV=!1;function JZ(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lV||Sy==null||Sy!==M4(n)||(n=Sy,"selectionStart"in n&&jj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_2&&oA(_2,n)||(_2=n,n=$4(aV,"onSelect"),0<n.length&&(e=new $j("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Sy)))}function nM(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Ey={animationend:nM("Animation","AnimationEnd"),animationiteration:nM("Animation","AnimationIteration"),animationstart:nM("Animation","AnimationStart"),transitionend:nM("Transition","TransitionEnd")},F7={},$oe={};Lp&&($oe=document.createElement("div").style,"AnimationEvent"in window||(delete Ey.animationend.animation,delete Ey.animationiteration.animation,delete Ey.animationstart.animation),"TransitionEvent"in window||delete Ey.transitionend.transition);function N5(i){if(F7[i])return F7[i];if(!Ey[i])return i;var e=Ey[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in $oe)return F7[i]=e[t];return i}var zoe=N5("animationend"),Uoe=N5("animationiteration"),joe=N5("animationstart"),Koe=N5("transitionend"),Goe=new Map,eX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function F0(i,e){Goe.set(i,e),hC(e,[i])}for(var B7=0;B7<eX.length;B7++){var W7=eX[B7],hbe=W7.toLowerCase(),fbe=W7[0].toUpperCase()+W7.slice(1);F0(hbe,"on"+fbe)}F0(zoe,"onAnimationEnd");F0(Uoe,"onAnimationIteration");F0(joe,"onAnimationStart");F0("dblclick","onDoubleClick");F0("focusin","onFocus");F0("focusout","onBlur");F0(Koe,"onTransitionEnd");Nw("onMouseEnter",["mouseout","mouseover"]);Nw("onMouseLeave",["mouseout","mouseover"]);Nw("onPointerEnter",["pointerout","pointerover"]);Nw("onPointerLeave",["pointerout","pointerover"]);hC("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hC("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hC("onBeforeInput",["compositionend","keypress","textInput","paste"]);hC("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hC("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hC("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var KN="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gbe=new Set("cancel close invalid load scroll toggle".split(" ").concat(KN));function tX(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,h0e(n,e,void 0,i),i.currentTarget=null}function qoe(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==o&&r.isPropagationStopped())break e;tX(r,a,d),o=u}else for(s=0;s<n.length;s++){if(a=n[s],u=a.instance,d=a.currentTarget,a=a.listener,u!==o&&r.isPropagationStopped())break e;tX(r,a,d),o=u}}}if(F4)throw i=iV,F4=!1,iV=null,i}function _o(i,e){var t=e[fV];t===void 0&&(t=e[fV]=new Set);var n=i+"__bubble";t.has(n)||(Yoe(e,i,2,!1),t.add(n))}function V7(i,e,t){var n=0;e&&(n|=4),Yoe(t,i,n,e)}var iM="_reactListening"+Math.random().toString(36).slice(2);function sA(i){if(!i[iM]){i[iM]=!0,noe.forEach(function(t){t!=="selectionchange"&&(gbe.has(t)||V7(t,!1,i),V7(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[iM]||(e[iM]=!0,V7("selectionchange",!1,e))}}function Yoe(i,e,t,n){switch(Aoe(e)){case 1:var r=T0e;break;case 4:r=I0e;break;default:r=Vj}t=r.bind(null,e,t,i),r=void 0,!nV||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function H7(i,e,t,n,r){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;a!==null;){if(s=Nb(a),s===null)return;if(u=s.tag,u===5||u===6){n=o=s;continue e}a=a.parentNode}}n=n.return}voe(function(){var d=o,h=Pj(t),f=[];e:{var p=Goe.get(i);if(p!==void 0){var m=$j,v=i;switch(i){case"keypress":if(AP(t)===0)break e;case"keydown":case"keyup":m=U0e;break;case"focusin":v="focus",m=R7;break;case"focusout":v="blur",m=R7;break;case"beforeblur":case"afterblur":m=R7;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zZ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=A0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=G0e;break;case zoe:case Uoe:case joe:m=M0e;break;case Koe:m=Y0e;break;case"scroll":m=k0e;break;case"wheel":m=X0e;break;case"copy":case"cut":case"paste":m=F0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=jZ}var b=(e&4)!==0,E=!b&&i==="scroll",S=b?p!==null?p+"Capture":null:p;b=[];for(var w=d,L;w!==null;){L=w;var A=L.stateNode;if(L.tag===5&&A!==null&&(L=A,S!==null&&(A=eA(w,S),A!=null&&b.push(aA(w,A,L)))),E)break;w=w.return}0<b.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=i==="mouseover"||i==="pointerover",m=i==="mouseout"||i==="pointerout",p&&t!==eV&&(v=t.relatedTarget||t.fromElement)&&(Nb(v)||v[xp]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=d,v=v?Nb(v):null,v!==null&&(E=fC(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(b=zZ,A="onMouseLeave",S="onMouseEnter",w="mouse",(i==="pointerout"||i==="pointerover")&&(b=jZ,A="onPointerLeave",S="onPointerEnter",w="pointer"),E=m==null?p:Ly(m),L=v==null?p:Ly(v),p=new b(A,w+"leave",m,t,h),p.target=E,p.relatedTarget=L,A=null,Nb(h)===d&&(b=new b(S,w+"enter",v,t,h),b.target=L,b.relatedTarget=E,A=b),E=A,m&&v)t:{for(b=m,S=v,w=0,L=b;L;L=$C(L))w++;for(L=0,A=S;A;A=$C(A))L++;for(;0<w-L;)b=$C(b),w--;for(;0<L-w;)S=$C(S),L--;for(;w--;){if(b===S||S!==null&&b===S.alternate)break t;b=$C(b),S=$C(S)}b=null}else b=null;m!==null&&nX(f,p,m,b,!1),v!==null&&E!==null&&nX(f,E,v,b,!0)}}e:{if(p=d?Ly(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=rbe;else if(qZ(p))if(Boe)N=lbe;else{N=sbe;var H=obe}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=abe);if(N&&(N=N(i,d))){Foe(f,N,t,h);break e}H&&H(i,p,d),i==="focusout"&&(H=p._wrapperState)&&H.controlled&&p.type==="number"&&YW(p,"number",p.value)}switch(H=d?Ly(d):window,i){case"focusin":(qZ(H)||H.contentEditable==="true")&&(Sy=H,aV=d,_2=null);break;case"focusout":_2=aV=Sy=null;break;case"mousedown":lV=!0;break;case"contextmenu":case"mouseup":case"dragend":lV=!1,JZ(f,t,h);break;case"selectionchange":if(dbe)break;case"keydown":case"keyup":JZ(f,t,h)}var M;if(Uj)e:{switch(i){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else wy?Moe(i,t)&&(R="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Roe&&t.locale!=="ko"&&(wy||R!=="onCompositionStart"?R==="onCompositionEnd"&&wy&&(M=Ooe()):(Pv=h,Hj="value"in Pv?Pv.value:Pv.textContent,wy=!0)),H=$4(d,R),0<H.length&&(R=new UZ(R,i,null,t,h),f.push({event:R,listeners:H}),M?R.data=M:(M=Poe(t),M!==null&&(R.data=M)))),(M=J0e?ebe(i,t):tbe(i,t))&&(d=$4(d,"onBeforeInput"),0<d.length&&(h=new UZ("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=M))}qoe(f,e)})}function aA(i,e,t){return{instance:i,listener:e,currentTarget:t}}function $4(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=eA(i,t),o!=null&&n.unshift(aA(i,o,r)),o=eA(i,e),o!=null&&n.push(aA(i,o,r))),i=i.return}return n}function $C(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function nX(i,e,t,n,r){for(var o=e._reactName,s=[];t!==null&&t!==n;){var a=t,u=a.alternate,d=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&d!==null&&(a=d,r?(u=eA(t,o),u!=null&&s.unshift(aA(t,u,a))):r||(u=eA(t,o),u!=null&&s.push(aA(t,u,a)))),t=t.return}s.length!==0&&i.push({event:e,listeners:s})}var pbe=/\r\n?/g,mbe=/\u0000|\uFFFD/g;function iX(i){return(typeof i=="string"?i:""+i).replace(pbe,`
`).replace(mbe,"")}function rM(i,e,t){if(e=iX(e),iX(i)!==e&&t)throw Error(Et(425))}function z4(){}var uV=null,cV=null;function dV(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hV=typeof setTimeout=="function"?setTimeout:void 0,_be=typeof clearTimeout=="function"?clearTimeout:void 0,rX=typeof Promise=="function"?Promise:void 0,vbe=typeof queueMicrotask=="function"?queueMicrotask:typeof rX<"u"?function(i){return rX.resolve(null).then(i).catch(bbe)}:hV;function bbe(i){setTimeout(function(){throw i})}function $7(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),iA(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);iA(e)}function Zv(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function oX(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var kS=Math.random().toString(36).slice(2),Of="__reactFiber$"+kS,lA="__reactProps$"+kS,xp="__reactContainer$"+kS,fV="__reactEvents$"+kS,Cbe="__reactListeners$"+kS,ybe="__reactHandles$"+kS;function Nb(i){var e=i[Of];if(e)return e;for(var t=i.parentNode;t;){if(e=t[xp]||t[Of]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=oX(i);i!==null;){if(t=i[Of])return t;i=oX(i)}return e}i=t,t=i.parentNode}return null}function qO(i){return i=i[Of]||i[xp],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ly(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Et(33))}function A5(i){return i[lA]||null}var gV=[],xy=-1;function B0(i){return{current:i}}function So(i){0>xy||(i.current=gV[xy],gV[xy]=null,xy--)}function ho(i,e){xy++,gV[xy]=i.current,i.current=e}var g0={},Za=B0(g0),Ou=B0(!1),h1=g0;function Aw(i,e){var t=i.type.contextTypes;if(!t)return g0;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in t)r[o]=e[o];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Ru(i){return i=i.childContextTypes,i!=null}function U4(){So(Ou),So(Za)}function sX(i,e,t){if(Za.current!==g0)throw Error(Et(168));ho(Za,e),ho(Ou,t)}function Zoe(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Et(108,o0e(i)||"Unknown",r));return zo({},t,n)}function j4(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||g0,h1=Za.current,ho(Za,i),ho(Ou,Ou.current),!0}function aX(i,e,t){var n=i.stateNode;if(!n)throw Error(Et(169));t?(i=Zoe(i,e,h1),n.__reactInternalMemoizedMergedChildContext=i,So(Ou),So(Za),ho(Za,i)):So(Ou),ho(Ou,t)}var Zg=null,O5=!1,z7=!1;function Xoe(i){Zg===null?Zg=[i]:Zg.push(i)}function wbe(i){O5=!0,Xoe(i)}function W0(){if(!z7&&Zg!==null){z7=!0;var i=0,e=Vr;try{var t=Zg;for(Vr=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Zg=null,O5=!1}catch(r){throw Zg!==null&&(Zg=Zg.slice(i+1)),woe(Fj,W0),r}finally{Vr=e,z7=!1}}return null}var Dy=[],Ty=0,K4=null,G4=0,Pc=[],Fc=0,f1=null,ap=1,lp="";function ub(i,e){Dy[Ty++]=G4,Dy[Ty++]=K4,K4=i,G4=e}function Qoe(i,e,t){Pc[Fc++]=ap,Pc[Fc++]=lp,Pc[Fc++]=f1,f1=i;var n=ap;i=lp;var r=32-$h(n)-1;n&=~(1<<r),t+=1;var o=32-$h(e)+r;if(30<o){var s=r-r%5;o=(n&(1<<s)-1).toString(32),n>>=s,r-=s,ap=1<<32-$h(e)+r|t<<r|n,lp=o+i}else ap=1<<o|t<<r|n,lp=i}function Kj(i){i.return!==null&&(ub(i,1),Qoe(i,1,0))}function Gj(i){for(;i===K4;)K4=Dy[--Ty],Dy[Ty]=null,G4=Dy[--Ty],Dy[Ty]=null;for(;i===f1;)f1=Pc[--Fc],Pc[Fc]=null,lp=Pc[--Fc],Pc[Fc]=null,ap=Pc[--Fc],Pc[Fc]=null}var nc=null,Qu=null,xo=!1,Ih=null;function Joe(i,e){var t=jc(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function lX(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,nc=i,Qu=Zv(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,nc=i,Qu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=f1!==null?{id:ap,overflow:lp}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=jc(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,nc=i,Qu=null,!0):!1;default:return!1}}function pV(i){return(i.mode&1)!==0&&(i.flags&128)===0}function mV(i){if(xo){var e=Qu;if(e){var t=e;if(!lX(i,e)){if(pV(i))throw Error(Et(418));e=Zv(t.nextSibling);var n=nc;e&&lX(i,e)?Joe(n,t):(i.flags=i.flags&-4097|2,xo=!1,nc=i)}}else{if(pV(i))throw Error(Et(418));i.flags=i.flags&-4097|2,xo=!1,nc=i}}}function uX(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;nc=i}function oM(i){if(i!==nc)return!1;if(!xo)return uX(i),xo=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!dV(i.type,i.memoizedProps)),e&&(e=Qu)){if(pV(i))throw ese(),Error(Et(418));for(;e;)Joe(i,e),e=Zv(e.nextSibling)}if(uX(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Et(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Qu=Zv(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Qu=null}}else Qu=nc?Zv(i.stateNode.nextSibling):null;return!0}function ese(){for(var i=Qu;i;)i=Zv(i.nextSibling)}function Ow(){Qu=nc=null,xo=!1}function qj(i){Ih===null?Ih=[i]:Ih.push(i)}var Sbe=Vp.ReactCurrentBatchConfig;function bN(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Et(309));var n=t.stateNode}if(!n)throw Error(Et(147,i));var r=n,o=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=r.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof i!="string")throw Error(Et(284));if(!t._owner)throw Error(Et(290,i))}return i}function sM(i,e){throw i=Object.prototype.toString.call(e),Error(Et(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function cX(i){var e=i._init;return e(i._payload)}function tse(i){function e(S,w){if(i){var L=S.deletions;L===null?(S.deletions=[w],S.flags|=16):L.push(w)}}function t(S,w){if(!i)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function n(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function r(S,w){return S=e0(S,w),S.index=0,S.sibling=null,S}function o(S,w,L){return S.index=L,i?(L=S.alternate,L!==null?(L=L.index,L<w?(S.flags|=2,w):L):(S.flags|=2,w)):(S.flags|=1048576,w)}function s(S){return i&&S.alternate===null&&(S.flags|=2),S}function a(S,w,L,A){return w===null||w.tag!==6?(w=Z7(L,S.mode,A),w.return=S,w):(w=r(w,L),w.return=S,w)}function u(S,w,L,A){var N=L.type;return N===yy?h(S,w,L.props.children,A,L.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&cX(N)===w.type)?(A=r(w,L.props),A.ref=bN(S,w,L),A.return=S,A):(A=WP(L.type,L.key,L.props,null,S.mode,A),A.ref=bN(S,w,L),A.return=S,A)}function d(S,w,L,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==L.containerInfo||w.stateNode.implementation!==L.implementation?(w=X7(L,S.mode,A),w.return=S,w):(w=r(w,L.children||[]),w.return=S,w)}function h(S,w,L,A,N){return w===null||w.tag!==7?(w=Kb(L,S.mode,A,N),w.return=S,w):(w=r(w,L),w.return=S,w)}function f(S,w,L){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Z7(""+w,S.mode,L),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case YR:return L=WP(w.type,w.key,w.props,null,S.mode,L),L.ref=bN(S,null,w),L.return=S,L;case Cy:return w=X7(w,S.mode,L),w.return=S,w;case xv:var A=w._init;return f(S,A(w._payload),L)}if(UN(w)||gN(w))return w=Kb(w,S.mode,L,null),w.return=S,w;sM(S,w)}return null}function p(S,w,L,A){var N=w!==null?w.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return N!==null?null:a(S,w,""+L,A);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case YR:return L.key===N?u(S,w,L,A):null;case Cy:return L.key===N?d(S,w,L,A):null;case xv:return N=L._init,p(S,w,N(L._payload),A)}if(UN(L)||gN(L))return N!==null?null:h(S,w,L,A,null);sM(S,L)}return null}function m(S,w,L,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(L)||null,a(w,S,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case YR:return S=S.get(A.key===null?L:A.key)||null,u(w,S,A,N);case Cy:return S=S.get(A.key===null?L:A.key)||null,d(w,S,A,N);case xv:var H=A._init;return m(S,w,L,H(A._payload),N)}if(UN(A)||gN(A))return S=S.get(L)||null,h(w,S,A,N,null);sM(w,A)}return null}function v(S,w,L,A){for(var N=null,H=null,M=w,R=w=0,q=null;M!==null&&R<L.length;R++){M.index>R?(q=M,M=null):q=M.sibling;var X=p(S,M,L[R],A);if(X===null){M===null&&(M=q);break}i&&M&&X.alternate===null&&e(S,M),w=o(X,w,R),H===null?N=X:H.sibling=X,H=X,M=q}if(R===L.length)return t(S,M),xo&&ub(S,R),N;if(M===null){for(;R<L.length;R++)M=f(S,L[R],A),M!==null&&(w=o(M,w,R),H===null?N=M:H.sibling=M,H=M);return xo&&ub(S,R),N}for(M=n(S,M);R<L.length;R++)q=m(M,S,R,L[R],A),q!==null&&(i&&q.alternate!==null&&M.delete(q.key===null?R:q.key),w=o(q,w,R),H===null?N=q:H.sibling=q,H=q);return i&&M.forEach(function($){return e(S,$)}),xo&&ub(S,R),N}function b(S,w,L,A){var N=gN(L);if(typeof N!="function")throw Error(Et(150));if(L=N.call(L),L==null)throw Error(Et(151));for(var H=N=null,M=w,R=w=0,q=null,X=L.next();M!==null&&!X.done;R++,X=L.next()){M.index>R?(q=M,M=null):q=M.sibling;var $=p(S,M,X.value,A);if($===null){M===null&&(M=q);break}i&&M&&$.alternate===null&&e(S,M),w=o($,w,R),H===null?N=$:H.sibling=$,H=$,M=q}if(X.done)return t(S,M),xo&&ub(S,R),N;if(M===null){for(;!X.done;R++,X=L.next())X=f(S,X.value,A),X!==null&&(w=o(X,w,R),H===null?N=X:H.sibling=X,H=X);return xo&&ub(S,R),N}for(M=n(S,M);!X.done;R++,X=L.next())X=m(M,S,R,X.value,A),X!==null&&(i&&X.alternate!==null&&M.delete(X.key===null?R:X.key),w=o(X,w,R),H===null?N=X:H.sibling=X,H=X);return i&&M.forEach(function(I){return e(S,I)}),xo&&ub(S,R),N}function E(S,w,L,A){if(typeof L=="object"&&L!==null&&L.type===yy&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case YR:e:{for(var N=L.key,H=w;H!==null;){if(H.key===N){if(N=L.type,N===yy){if(H.tag===7){t(S,H.sibling),w=r(H,L.props.children),w.return=S,S=w;break e}}else if(H.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&cX(N)===H.type){t(S,H.sibling),w=r(H,L.props),w.ref=bN(S,H,L),w.return=S,S=w;break e}t(S,H);break}else e(S,H);H=H.sibling}L.type===yy?(w=Kb(L.props.children,S.mode,A,L.key),w.return=S,S=w):(A=WP(L.type,L.key,L.props,null,S.mode,A),A.ref=bN(S,w,L),A.return=S,S=A)}return s(S);case Cy:e:{for(H=L.key;w!==null;){if(w.key===H)if(w.tag===4&&w.stateNode.containerInfo===L.containerInfo&&w.stateNode.implementation===L.implementation){t(S,w.sibling),w=r(w,L.children||[]),w.return=S,S=w;break e}else{t(S,w);break}else e(S,w);w=w.sibling}w=X7(L,S.mode,A),w.return=S,S=w}return s(S);case xv:return H=L._init,E(S,w,H(L._payload),A)}if(UN(L))return v(S,w,L,A);if(gN(L))return b(S,w,L,A);sM(S,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,w!==null&&w.tag===6?(t(S,w.sibling),w=r(w,L),w.return=S,S=w):(t(S,w),w=Z7(L,S.mode,A),w.return=S,S=w),s(S)):t(S,w)}return E}var Rw=tse(!0),nse=tse(!1),q4=B0(null),Y4=null,Iy=null,Yj=null;function Zj(){Yj=Iy=Y4=null}function Xj(i){var e=q4.current;So(q4),i._currentValue=e}function _V(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Jy(i,e){Y4=i,Yj=Iy=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Iu=!0),i.firstContext=null)}function ed(i){var e=i._currentValue;if(Yj!==i)if(i={context:i,memoizedValue:e,next:null},Iy===null){if(Y4===null)throw Error(Et(308));Iy=i,Y4.dependencies={lanes:0,firstContext:i}}else Iy=Iy.next=i;return e}var Ab=null;function Qj(i){Ab===null?Ab=[i]:Ab.push(i)}function ise(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,Qj(e)):(t.next=r.next,r.next=t),e.interleaved=t,Dp(i,n)}function Dp(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Dv=!1;function Jj(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rse(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function fp(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Xv(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,pr&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Dp(i,t)}return r=n.interleaved,r===null?(e.next=e,Qj(n)):(e.next=r.next,r.next=e),n.interleaved=e,Dp(i,t)}function OP(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Bj(i,t)}}function dX(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?r=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?r=o=e:o=o.next=e}else r=o=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Z4(i,e,t,n){var r=i.updateQueue;Dv=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var h=i.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(o!==null){var f=r.baseState;s=0,h=d=u=null,a=o;do{var p=a.lane,m=a.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=i,b=a;switch(p=e,m=t,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=zo({},f,p);break e;case 2:Dv=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=m,u=f):h=h.next=m,s|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(u=f),r.baseState=u,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);p1|=s,i.lanes=s,i.memoizedState=f}}function hX(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Et(191,r));r.call(n)}}}var YO={},Xf=B0(YO),uA=B0(YO),cA=B0(YO);function Ob(i){if(i===YO)throw Error(Et(174));return i}function eK(i,e){switch(ho(cA,e),ho(uA,i),ho(Xf,YO),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:XW(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=XW(e,i)}So(Xf),ho(Xf,e)}function Mw(){So(Xf),So(uA),So(cA)}function ose(i){Ob(cA.current);var e=Ob(Xf.current),t=XW(e,i.type);e!==t&&(ho(uA,i),ho(Xf,t))}function tK(i){uA.current===i&&(So(Xf),So(uA))}var Wo=B0(0);function X4(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var U7=[];function nK(){for(var i=0;i<U7.length;i++)U7[i]._workInProgressVersionPrimary=null;U7.length=0}var RP=Vp.ReactCurrentDispatcher,j7=Vp.ReactCurrentBatchConfig,g1=0,Ho=null,$s=null,Qs=null,Q4=!1,v2=!1,dA=0,Ebe=0;function Va(){throw Error(Et(321))}function iK(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Jh(i[t],e[t]))return!1;return!0}function rK(i,e,t,n,r,o){if(g1=o,Ho=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,RP.current=i===null||i.memoizedState===null?Tbe:Ibe,i=t(n,r),v2){o=0;do{if(v2=!1,dA=0,25<=o)throw Error(Et(301));o+=1,Qs=$s=null,e.updateQueue=null,RP.current=kbe,i=t(n,r)}while(v2)}if(RP.current=J4,e=$s!==null&&$s.next!==null,g1=0,Qs=$s=Ho=null,Q4=!1,e)throw Error(Et(300));return i}function oK(){var i=dA!==0;return dA=0,i}function wf(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Ho.memoizedState=Qs=i:Qs=Qs.next=i,Qs}function td(){if($s===null){var i=Ho.alternate;i=i!==null?i.memoizedState:null}else i=$s.next;var e=Qs===null?Ho.memoizedState:Qs.next;if(e!==null)Qs=e,$s=i;else{if(i===null)throw Error(Et(310));$s=i,i={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},Qs===null?Ho.memoizedState=Qs=i:Qs=Qs.next=i}return Qs}function hA(i,e){return typeof e=="function"?e(i):e}function K7(i){var e=td(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=i;var n=$s,r=n.baseQueue,o=t.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,t.pending=null}if(r!==null){o=r.next,n=n.baseState;var a=s=null,u=null,d=o;do{var h=d.lane;if((g1&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:i(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=f,s=n):u=u.next=f,Ho.lanes|=h,p1|=h}d=d.next}while(d!==null&&d!==o);u===null?s=n:u.next=a,Jh(n,e.memoizedState)||(Iu=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do o=r.lane,Ho.lanes|=o,p1|=o,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function G7(i){var e=td(),t=e.queue;if(t===null)throw Error(Et(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,o=e.memoizedState;if(r!==null){t.pending=null;var s=r=r.next;do o=i(o,s.action),s=s.next;while(s!==r);Jh(o,e.memoizedState)||(Iu=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function sse(){}function ase(i,e){var t=Ho,n=td(),r=e(),o=!Jh(n.memoizedState,r);if(o&&(n.memoizedState=r,Iu=!0),n=n.queue,sK(cse.bind(null,t,n,i),[i]),n.getSnapshot!==e||o||Qs!==null&&Qs.memoizedState.tag&1){if(t.flags|=2048,fA(9,use.bind(null,t,n,r,e),void 0,null),oa===null)throw Error(Et(349));g1&30||lse(t,e,r)}return r}function lse(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function use(i,e,t,n){e.value=t,e.getSnapshot=n,dse(e)&&hse(i)}function cse(i,e,t){return t(function(){dse(e)&&hse(i)})}function dse(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Jh(i,t)}catch{return!0}}function hse(i){var e=Dp(i,1);e!==null&&zh(e,i,1,-1)}function fX(i){var e=wf();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hA,lastRenderedState:i},e.queue=i,i=i.dispatch=Dbe.bind(null,Ho,i),[e.memoizedState,i]}function fA(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function fse(){return td().memoizedState}function MP(i,e,t,n){var r=wf();Ho.flags|=i,r.memoizedState=fA(1|e,t,void 0,n===void 0?null:n)}function R5(i,e,t,n){var r=td();n=n===void 0?null:n;var o=void 0;if($s!==null){var s=$s.memoizedState;if(o=s.destroy,n!==null&&iK(n,s.deps)){r.memoizedState=fA(e,t,o,n);return}}Ho.flags|=i,r.memoizedState=fA(1|e,t,o,n)}function gX(i,e){return MP(8390656,8,i,e)}function sK(i,e){return R5(2048,8,i,e)}function gse(i,e){return R5(4,2,i,e)}function pse(i,e){return R5(4,4,i,e)}function mse(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function _se(i,e,t){return t=t!=null?t.concat([i]):null,R5(4,4,mse.bind(null,e,i),t)}function aK(){}function vse(i,e){var t=td();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iK(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function bse(i,e){var t=td();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&iK(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function Cse(i,e,t){return g1&21?(Jh(t,e)||(t=Loe(),Ho.lanes|=t,p1|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Iu=!0),i.memoizedState=t)}function Lbe(i,e){var t=Vr;Vr=t!==0&&4>t?t:4,i(!0);var n=j7.transition;j7.transition={};try{i(!1),e()}finally{Vr=t,j7.transition=n}}function yse(){return td().memoizedState}function xbe(i,e,t){var n=Jv(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},wse(i))Sse(e,t);else if(t=ise(i,e,t,n),t!==null){var r=vl();zh(t,i,n,r),Ese(t,e,n)}}function Dbe(i,e,t){var n=Jv(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(wse(i))Sse(e,r);else{var o=i.alternate;if(i.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(r.hasEagerState=!0,r.eagerState=a,Jh(a,s)){var u=e.interleaved;u===null?(r.next=r,Qj(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=ise(i,e,r,n),t!==null&&(r=vl(),zh(t,i,n,r),Ese(t,e,n))}}function wse(i){var e=i.alternate;return i===Ho||e!==null&&e===Ho}function Sse(i,e){v2=Q4=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function Ese(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Bj(i,t)}}var J4={readContext:ed,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useInsertionEffect:Va,useLayoutEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useMutableSource:Va,useSyncExternalStore:Va,useId:Va,unstable_isNewReconciler:!1},Tbe={readContext:ed,useCallback:function(i,e){return wf().memoizedState=[i,e===void 0?null:e],i},useContext:ed,useEffect:gX,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,MP(4194308,4,mse.bind(null,e,i),t)},useLayoutEffect:function(i,e){return MP(4194308,4,i,e)},useInsertionEffect:function(i,e){return MP(4,2,i,e)},useMemo:function(i,e){var t=wf();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=wf();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=xbe.bind(null,Ho,i),[n.memoizedState,i]},useRef:function(i){var e=wf();return i={current:i},e.memoizedState=i},useState:fX,useDebugValue:aK,useDeferredValue:function(i){return wf().memoizedState=i},useTransition:function(){var i=fX(!1),e=i[0];return i=Lbe.bind(null,i[1]),wf().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Ho,r=wf();if(xo){if(t===void 0)throw Error(Et(407));t=t()}else{if(t=e(),oa===null)throw Error(Et(349));g1&30||lse(n,e,t)}r.memoizedState=t;var o={value:t,getSnapshot:e};return r.queue=o,gX(cse.bind(null,n,o,i),[i]),n.flags|=2048,fA(9,use.bind(null,n,o,t,e),void 0,null),t},useId:function(){var i=wf(),e=oa.identifierPrefix;if(xo){var t=lp,n=ap;t=(n&~(1<<32-$h(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=dA++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Ebe++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ibe={readContext:ed,useCallback:vse,useContext:ed,useEffect:sK,useImperativeHandle:_se,useInsertionEffect:gse,useLayoutEffect:pse,useMemo:bse,useReducer:K7,useRef:fse,useState:function(){return K7(hA)},useDebugValue:aK,useDeferredValue:function(i){var e=td();return Cse(e,$s.memoizedState,i)},useTransition:function(){var i=K7(hA)[0],e=td().memoizedState;return[i,e]},useMutableSource:sse,useSyncExternalStore:ase,useId:yse,unstable_isNewReconciler:!1},kbe={readContext:ed,useCallback:vse,useContext:ed,useEffect:sK,useImperativeHandle:_se,useInsertionEffect:gse,useLayoutEffect:pse,useMemo:bse,useReducer:G7,useRef:fse,useState:function(){return G7(hA)},useDebugValue:aK,useDeferredValue:function(i){var e=td();return $s===null?e.memoizedState=i:Cse(e,$s.memoizedState,i)},useTransition:function(){var i=G7(hA)[0],e=td().memoizedState;return[i,e]},useMutableSource:sse,useSyncExternalStore:ase,useId:yse,unstable_isNewReconciler:!1};function bh(i,e){if(i&&i.defaultProps){e=zo({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function vV(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:zo({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var M5={isMounted:function(i){return(i=i._reactInternals)?fC(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=vl(),r=Jv(i),o=fp(n,r);o.payload=e,t!=null&&(o.callback=t),e=Xv(i,o,r),e!==null&&(zh(e,i,r,n),OP(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=vl(),r=Jv(i),o=fp(n,r);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Xv(i,o,r),e!==null&&(zh(e,i,r,n),OP(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=vl(),n=Jv(i),r=fp(t,n);r.tag=2,e!=null&&(r.callback=e),e=Xv(i,r,n),e!==null&&(zh(e,i,n,t),OP(e,i,n))}};function pX(i,e,t,n,r,o,s){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!oA(t,n)||!oA(r,o):!0}function Lse(i,e,t){var n=!1,r=g0,o=e.contextType;return typeof o=="object"&&o!==null?o=ed(o):(r=Ru(e)?h1:Za.current,n=e.contextTypes,o=(n=n!=null)?Aw(i,r):g0),e=new e(t,o),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=M5,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=o),e}function mX(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&M5.enqueueReplaceState(e,e.state,null)}function bV(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},Jj(i);var o=e.contextType;typeof o=="object"&&o!==null?r.context=ed(o):(o=Ru(e)?h1:Za.current,r.context=Aw(i,o)),r.state=i.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(vV(i,e,o,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&M5.enqueueReplaceState(r,r.state,null),Z4(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function Pw(i,e){try{var t="",n=e;do t+=r0e(n),n=n.return;while(n);var r=t}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:i,source:e,stack:r,digest:null}}function q7(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function CV(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Nbe=typeof WeakMap=="function"?WeakMap:Map;function xse(i,e,t){t=fp(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){tF||(tF=!0,kV=n),CV(i,e)},t}function Dse(i,e,t){t=fp(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){CV(i,e)}}var o=i.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){CV(i,e),typeof n!="function"&&(Qv===null?Qv=new Set([this]):Qv.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function _X(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new Nbe;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=jbe.bind(null,i,e,t),e.then(i,i))}function vX(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function bX(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fp(-1,1),e.tag=2,Xv(t,e,1))),t.lanes|=1),i)}var Abe=Vp.ReactCurrentOwner,Iu=!1;function dl(i,e,t,n){e.child=i===null?nse(e,null,t,n):Rw(e,i.child,t,n)}function CX(i,e,t,n,r){t=t.render;var o=e.ref;return Jy(e,r),n=rK(i,e,t,n,o,r),t=oK(),i!==null&&!Iu?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Tp(i,e,r)):(xo&&t&&Kj(e),e.flags|=1,dl(i,e,n,r),e.child)}function yX(i,e,t,n,r){if(i===null){var o=t.type;return typeof o=="function"&&!pK(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Tse(i,e,o,n,r)):(i=WP(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(o=i.child,!(i.lanes&r)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:oA,t(s,n)&&i.ref===e.ref)return Tp(i,e,r)}return e.flags|=1,i=e0(o,n),i.ref=e.ref,i.return=e,e.child=i}function Tse(i,e,t,n,r){if(i!==null){var o=i.memoizedProps;if(oA(o,n)&&i.ref===e.ref)if(Iu=!1,e.pendingProps=n=o,(i.lanes&r)!==0)i.flags&131072&&(Iu=!0);else return e.lanes=i.lanes,Tp(i,e,r)}return yV(i,e,t,n,r)}function Ise(i,e,t){var n=e.pendingProps,r=n.children,o=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ho(Ny,Ku),Ku|=t;else{if(!(t&1073741824))return i=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,ho(Ny,Ku),Ku|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:t,ho(Ny,Ku),Ku|=n}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,ho(Ny,Ku),Ku|=n;return dl(i,e,r,t),e.child}function kse(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function yV(i,e,t,n,r){var o=Ru(t)?h1:Za.current;return o=Aw(e,o),Jy(e,r),t=rK(i,e,t,n,o,r),n=oK(),i!==null&&!Iu?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Tp(i,e,r)):(xo&&n&&Kj(e),e.flags|=1,dl(i,e,t,r),e.child)}function wX(i,e,t,n,r){if(Ru(t)){var o=!0;j4(e)}else o=!1;if(Jy(e,r),e.stateNode===null)PP(i,e),Lse(e,t,n),bV(e,t,n,r),n=!0;else if(i===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,d=t.contextType;typeof d=="object"&&d!==null?d=ed(d):(d=Ru(t)?h1:Za.current,d=Aw(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||u!==d)&&mX(e,s,n,d),Dv=!1;var p=e.memoizedState;s.state=p,Z4(e,n,s,r),u=e.memoizedState,a!==n||p!==u||Ou.current||Dv?(typeof h=="function"&&(vV(e,t,h,n),u=e.memoizedState),(a=Dv||pX(e,t,a,n,p,u,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=d,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,rse(i,e),a=e.memoizedProps,d=e.type===e.elementType?a:bh(e.type,a),s.props=d,f=e.pendingProps,p=s.context,u=t.contextType,typeof u=="object"&&u!==null?u=ed(u):(u=Ru(t)?h1:Za.current,u=Aw(e,u));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||p!==u)&&mX(e,s,n,u),Dv=!1,p=e.memoizedState,s.state=p,Z4(e,n,s,r);var v=e.memoizedState;a!==f||p!==v||Ou.current||Dv?(typeof m=="function"&&(vV(e,t,m,n),v=e.memoizedState),(d=Dv||pX(e,t,d,n,p,v,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=u,n=d):(typeof s.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),n=!1)}return wV(i,e,t,n,o,r)}function wV(i,e,t,n,r,o){kse(i,e);var s=(e.flags&128)!==0;if(!n&&!s)return r&&aX(e,t,!1),Tp(i,e,o);n=e.stateNode,Abe.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&s?(e.child=Rw(e,i.child,null,o),e.child=Rw(e,null,a,o)):dl(i,e,a,o),e.memoizedState=n.state,r&&aX(e,t,!0),e.child}function Nse(i){var e=i.stateNode;e.pendingContext?sX(i,e.pendingContext,e.pendingContext!==e.context):e.context&&sX(i,e.context,!1),eK(i,e.containerInfo)}function SX(i,e,t,n,r){return Ow(),qj(r),e.flags|=256,dl(i,e,t,n),e.child}var SV={dehydrated:null,treeContext:null,retryLane:0};function EV(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ase(i,e,t){var n=e.pendingProps,r=Wo.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=i!==null&&i.memoizedState===null?!1:(r&2)!==0),a?(o=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),ho(Wo,r&1),i===null)return mV(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,i=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=B5(s,n,0,null),i=Kb(i,n,t,null),o.return=e,i.return=e,o.sibling=i,e.child=o,e.child.memoizedState=EV(t),e.memoizedState=SV,i):lK(e,s));if(r=i.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Obe(i,e,s,n,a,r,t);if(o){o=n.fallback,s=e.mode,r=i.child,a=r.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=e0(r,u),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=e0(a,o):(o=Kb(o,s,t,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=i.child.memoizedState,s=s===null?EV(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=i.childLanes&~t,e.memoizedState=SV,n}return o=i.child,i=o.sibling,n=e0(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function lK(i,e){return e=B5({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function aM(i,e,t,n){return n!==null&&qj(n),Rw(e,i.child,null,t),i=lK(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function Obe(i,e,t,n,r,o,s){if(t)return e.flags&256?(e.flags&=-257,n=q7(Error(Et(422))),aM(i,e,s,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(o=n.fallback,r=e.mode,n=B5({mode:"visible",children:n.children},r,0,null),o=Kb(o,r,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Rw(e,i.child,null,s),e.child.memoizedState=EV(s),e.memoizedState=SV,o);if(!(e.mode&1))return aM(i,e,s,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Et(419)),n=q7(o,n,void 0),aM(i,e,s,n)}if(a=(s&i.childLanes)!==0,Iu||a){if(n=oa,n!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Dp(i,r),zh(n,i,r,-1))}return gK(),n=q7(Error(Et(421))),aM(i,e,s,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=Kbe.bind(null,i),r._reactRetry=e,null):(i=o.treeContext,Qu=Zv(r.nextSibling),nc=e,xo=!0,Ih=null,i!==null&&(Pc[Fc++]=ap,Pc[Fc++]=lp,Pc[Fc++]=f1,ap=i.id,lp=i.overflow,f1=e),e=lK(e,n.children),e.flags|=4096,e)}function EX(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),_V(i.return,e,t)}function Y7(i,e,t,n,r){var o=i.memoizedState;o===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=t,o.tailMode=r)}function Ose(i,e,t){var n=e.pendingProps,r=n.revealOrder,o=n.tail;if(dl(i,e,n.children,t),n=Wo.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&EX(i,t,e);else if(i.tag===19)EX(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(ho(Wo,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&X4(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Y7(e,!1,r,t,o);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&X4(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}Y7(e,!0,t,null,o);break;case"together":Y7(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function PP(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Tp(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),p1|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Et(153));if(e.child!==null){for(i=e.child,t=e0(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=e0(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function Rbe(i,e,t){switch(e.tag){case 3:Nse(e),Ow();break;case 5:ose(e);break;case 1:Ru(e.type)&&j4(e);break;case 4:eK(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ho(q4,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ho(Wo,Wo.current&1),e.flags|=128,null):t&e.child.childLanes?Ase(i,e,t):(ho(Wo,Wo.current&1),i=Tp(i,e,t),i!==null?i.sibling:null);ho(Wo,Wo.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return Ose(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ho(Wo,Wo.current),n)break;return null;case 22:case 23:return e.lanes=0,Ise(i,e,t)}return Tp(i,e,t)}var Rse,LV,Mse,Pse;Rse=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};LV=function(){};Mse=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,Ob(Xf.current);var o=null;switch(t){case"input":r=GW(i,r),n=GW(i,n),o=[];break;case"select":r=zo({},r,{value:void 0}),n=zo({},n,{value:void 0}),o=[];break;case"textarea":r=ZW(i,r),n=ZW(i,n),o=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=z4)}QW(t,n);var s;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Q2.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var u=n[d];if(a=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(t||(t={}),t[s]=u[s])}else t||(o||(o=[]),o.push(d,t)),t=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Q2.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_o("scroll",i),o||a===u||(o=[])):(o=o||[]).push(d,u))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Pse=function(i,e,t,n){t!==n&&(e.flags|=4)};function CN(i,e){if(!xo)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Ha(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function Mbe(i,e,t){var n=e.pendingProps;switch(Gj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(e),null;case 1:return Ru(e.type)&&U4(),Ha(e),null;case 3:return n=e.stateNode,Mw(),So(Ou),So(Za),nK(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(oM(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ih!==null&&(OV(Ih),Ih=null))),LV(i,e),Ha(e),null;case 5:tK(e);var r=Ob(cA.current);if(t=e.type,i!==null&&e.stateNode!=null)Mse(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Et(166));return Ha(e),null}if(i=Ob(Xf.current),oM(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[Of]=e,n[lA]=o,i=(e.mode&1)!==0,t){case"dialog":_o("cancel",n),_o("close",n);break;case"iframe":case"object":case"embed":_o("load",n);break;case"video":case"audio":for(r=0;r<KN.length;r++)_o(KN[r],n);break;case"source":_o("error",n);break;case"img":case"image":case"link":_o("error",n),_o("load",n);break;case"details":_o("toggle",n);break;case"input":OZ(n,o),_o("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},_o("invalid",n);break;case"textarea":MZ(n,o),_o("invalid",n)}QW(t,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&rM(n.textContent,a,i),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&rM(n.textContent,a,i),r=["children",""+a]):Q2.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&_o("scroll",n)}switch(t){case"input":ZR(n),RZ(n,o,!0);break;case"textarea":ZR(n),PZ(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=z4)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=coe(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=s.createElement(t,{is:n.is}):(i=s.createElement(t),t==="select"&&(s=i,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):i=s.createElementNS(i,t),i[Of]=e,i[lA]=n,Rse(i,e,!1,!1),e.stateNode=i;e:{switch(s=JW(t,n),t){case"dialog":_o("cancel",i),_o("close",i),r=n;break;case"iframe":case"object":case"embed":_o("load",i),r=n;break;case"video":case"audio":for(r=0;r<KN.length;r++)_o(KN[r],i);r=n;break;case"source":_o("error",i),r=n;break;case"img":case"image":case"link":_o("error",i),_o("load",i),r=n;break;case"details":_o("toggle",i),r=n;break;case"input":OZ(i,n),r=GW(i,n),_o("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=zo({},n,{value:void 0}),_o("invalid",i);break;case"textarea":MZ(i,n),r=ZW(i,n),_o("invalid",i);break;default:r=n}QW(t,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?foe(i,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&doe(i,u)):o==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&J2(i,u):typeof u=="number"&&J2(i,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Q2.hasOwnProperty(o)?u!=null&&o==="onScroll"&&_o("scroll",i):u!=null&&Aj(i,o,u,s))}switch(t){case"input":ZR(i),RZ(i,n,!1);break;case"textarea":ZR(i),PZ(i);break;case"option":n.value!=null&&i.setAttribute("value",""+f0(n.value));break;case"select":i.multiple=!!n.multiple,o=n.value,o!=null?Yy(i,!!n.multiple,o,!1):n.defaultValue!=null&&Yy(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=z4)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ha(e),null;case 6:if(i&&e.stateNode!=null)Pse(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Et(166));if(t=Ob(cA.current),Ob(Xf.current),oM(e)){if(n=e.stateNode,t=e.memoizedProps,n[Of]=e,(o=n.nodeValue!==t)&&(i=nc,i!==null))switch(i.tag){case 3:rM(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&rM(n.nodeValue,t,(i.mode&1)!==0)}o&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Of]=e,e.stateNode=n}return Ha(e),null;case 13:if(So(Wo),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(xo&&Qu!==null&&e.mode&1&&!(e.flags&128))ese(),Ow(),e.flags|=98560,o=!1;else if(o=oM(e),n!==null&&n.dehydrated!==null){if(i===null){if(!o)throw Error(Et(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Et(317));o[Of]=e}else Ow(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ha(e),o=!1}else Ih!==null&&(OV(Ih),Ih=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Wo.current&1?zs===0&&(zs=3):gK())),e.updateQueue!==null&&(e.flags|=4),Ha(e),null);case 4:return Mw(),LV(i,e),i===null&&sA(e.stateNode.containerInfo),Ha(e),null;case 10:return Xj(e.type._context),Ha(e),null;case 17:return Ru(e.type)&&U4(),Ha(e),null;case 19:if(So(Wo),o=e.memoizedState,o===null)return Ha(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)CN(o,!1);else{if(zs!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(s=X4(i),s!==null){for(e.flags|=128,CN(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)o=t,i=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=i,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return ho(Wo,Wo.current&1|2),e.child}i=i.sibling}o.tail!==null&&as()>Fw&&(e.flags|=128,n=!0,CN(o,!1),e.lanes=4194304)}else{if(!n)if(i=X4(s),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),CN(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!xo)return Ha(e),null}else 2*as()-o.renderingStartTime>Fw&&t!==1073741824&&(e.flags|=128,n=!0,CN(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=as(),e.sibling=null,t=Wo.current,ho(Wo,n?t&1|2:t&1),e):(Ha(e),null);case 22:case 23:return fK(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ku&1073741824&&(Ha(e),e.subtreeFlags&6&&(e.flags|=8192)):Ha(e),null;case 24:return null;case 25:return null}throw Error(Et(156,e.tag))}function Pbe(i,e){switch(Gj(e),e.tag){case 1:return Ru(e.type)&&U4(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Mw(),So(Ou),So(Za),nK(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return tK(e),null;case 13:if(So(Wo),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Et(340));Ow()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return So(Wo),null;case 4:return Mw(),null;case 10:return Xj(e.type._context),null;case 22:case 23:return fK(),null;case 24:return null;default:return null}}var lM=!1,Ua=!1,Fbe=typeof WeakSet=="function"?WeakSet:Set,un=null;function ky(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Qo(i,e,n)}else t.current=null}function xV(i,e,t){try{t()}catch(n){Qo(i,e,n)}}var LX=!1;function Bbe(i,e){if(uV=V4,i=Hoe(),jj(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,u=-1,d=0,h=0,f=i,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=s+r),f!==o||n!==0&&f.nodeType!==3||(u=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===i)break t;if(p===t&&++d===r&&(a=s),p===o&&++h===n&&(u=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(cV={focusedElem:i,selectionRange:t},V4=!1,un=e;un!==null;)if(e=un,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,un=i;else for(;un!==null;){e=un;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,E=v.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:bh(e.type,b),E);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Et(163))}}catch(A){Qo(e,e.return,A)}if(i=e.sibling,i!==null){i.return=e.return,un=i;break}un=e.return}return v=LX,LX=!1,v}function b2(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var o=r.destroy;r.destroy=void 0,o!==void 0&&xV(e,t,o)}r=r.next}while(r!==n)}}function P5(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function DV(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Fse(i){var e=i.alternate;e!==null&&(i.alternate=null,Fse(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[lA],delete e[fV],delete e[Cbe],delete e[ybe])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Bse(i){return i.tag===5||i.tag===3||i.tag===4}function xX(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Bse(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function TV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=z4));else if(n!==4&&(i=i.child,i!==null))for(TV(i,e,t),i=i.sibling;i!==null;)TV(i,e,t),i=i.sibling}function IV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(IV(i,e,t),i=i.sibling;i!==null;)IV(i,e,t),i=i.sibling}var xa=null,Sh=!1;function fv(i,e,t){for(t=t.child;t!==null;)Wse(i,e,t),t=t.sibling}function Wse(i,e,t){if(Zf&&typeof Zf.onCommitFiberUnmount=="function")try{Zf.onCommitFiberUnmount(T5,t)}catch{}switch(t.tag){case 5:Ua||ky(t,e);case 6:var n=xa,r=Sh;xa=null,fv(i,e,t),xa=n,Sh=r,xa!==null&&(Sh?(i=xa,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):xa.removeChild(t.stateNode));break;case 18:xa!==null&&(Sh?(i=xa,t=t.stateNode,i.nodeType===8?$7(i.parentNode,t):i.nodeType===1&&$7(i,t),iA(i)):$7(xa,t.stateNode));break;case 4:n=xa,r=Sh,xa=t.stateNode.containerInfo,Sh=!0,fv(i,e,t),xa=n,Sh=r;break;case 0:case 11:case 14:case 15:if(!Ua&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&xV(t,e,s),r=r.next}while(r!==n)}fv(i,e,t);break;case 1:if(!Ua&&(ky(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Qo(t,e,a)}fv(i,e,t);break;case 21:fv(i,e,t);break;case 22:t.mode&1?(Ua=(n=Ua)||t.memoizedState!==null,fv(i,e,t),Ua=n):fv(i,e,t);break;default:fv(i,e,t)}}function DX(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new Fbe),e.forEach(function(n){var r=Gbe.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function ph(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var o=i,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:xa=a.stateNode,Sh=!1;break e;case 3:xa=a.stateNode.containerInfo,Sh=!0;break e;case 4:xa=a.stateNode.containerInfo,Sh=!0;break e}a=a.return}if(xa===null)throw Error(Et(160));Wse(o,s,r),xa=null,Sh=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(d){Qo(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vse(e,i),e=e.sibling}function Vse(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ph(e,i),hf(i),n&4){try{b2(3,i,i.return),P5(3,i)}catch(b){Qo(i,i.return,b)}try{b2(5,i,i.return)}catch(b){Qo(i,i.return,b)}}break;case 1:ph(e,i),hf(i),n&512&&t!==null&&ky(t,t.return);break;case 5:if(ph(e,i),hf(i),n&512&&t!==null&&ky(t,t.return),i.flags&32){var r=i.stateNode;try{J2(r,"")}catch(b){Qo(i,i.return,b)}}if(n&4&&(r=i.stateNode,r!=null)){var o=i.memoizedProps,s=t!==null?t.memoizedProps:o,a=i.type,u=i.updateQueue;if(i.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&loe(r,o),JW(a,s);var d=JW(a,o);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];h==="style"?foe(r,f):h==="dangerouslySetInnerHTML"?doe(r,f):h==="children"?J2(r,f):Aj(r,h,f,d)}switch(a){case"input":qW(r,o);break;case"textarea":uoe(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Yy(r,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Yy(r,!!o.multiple,o.defaultValue,!0):Yy(r,!!o.multiple,o.multiple?[]:"",!1))}r[lA]=o}catch(b){Qo(i,i.return,b)}}break;case 6:if(ph(e,i),hf(i),n&4){if(i.stateNode===null)throw Error(Et(162));r=i.stateNode,o=i.memoizedProps;try{r.nodeValue=o}catch(b){Qo(i,i.return,b)}}break;case 3:if(ph(e,i),hf(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{iA(e.containerInfo)}catch(b){Qo(i,i.return,b)}break;case 4:ph(e,i),hf(i);break;case 13:ph(e,i),hf(i),r=i.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(dK=as())),n&4&&DX(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?(Ua=(d=Ua)||h,ph(e,i),Ua=d):ph(e,i),hf(i),n&8192){if(d=i.memoizedState!==null,(i.stateNode.isHidden=d)&&!h&&i.mode&1)for(un=i,h=i.child;h!==null;){for(f=un=h;un!==null;){switch(p=un,m=p.child,p.tag){case 0:case 11:case 14:case 15:b2(4,p,p.return);break;case 1:ky(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,t=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Qo(n,t,b)}}break;case 5:ky(p,p.return);break;case 22:if(p.memoizedState!==null){IX(f);continue}}m!==null?(m.return=p,un=m):IX(f)}h=h.sibling}e:for(h=null,f=i;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=hoe("display",s))}catch(b){Qo(i,i.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Qo(i,i.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===i)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ph(e,i),hf(i),n&4&&DX(i);break;case 21:break;default:ph(e,i),hf(i)}}function hf(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(Bse(t)){var n=t;break e}t=t.return}throw Error(Et(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(J2(r,""),n.flags&=-33);var o=xX(i);IV(i,o,r);break;case 3:case 4:var s=n.stateNode.containerInfo,a=xX(i);TV(i,a,s);break;default:throw Error(Et(161))}}catch(u){Qo(i,i.return,u)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function Wbe(i,e,t){un=i,Hse(i)}function Hse(i,e,t){for(var n=(i.mode&1)!==0;un!==null;){var r=un,o=r.child;if(r.tag===22&&n){var s=r.memoizedState!==null||lM;if(!s){var a=r.alternate,u=a!==null&&a.memoizedState!==null||Ua;a=lM;var d=Ua;if(lM=s,(Ua=u)&&!d)for(un=r;un!==null;)s=un,u=s.child,s.tag===22&&s.memoizedState!==null?kX(r):u!==null?(u.return=s,un=u):kX(r);for(;o!==null;)un=o,Hse(o),o=o.sibling;un=r,lM=a,Ua=d}TX(i)}else r.subtreeFlags&8772&&o!==null?(o.return=r,un=o):TX(i)}}function TX(i){for(;un!==null;){var e=un;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ua||P5(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ua)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:bh(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&hX(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}hX(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&iA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Et(163))}Ua||e.flags&512&&DV(e)}catch(p){Qo(e,e.return,p)}}if(e===i){un=null;break}if(t=e.sibling,t!==null){t.return=e.return,un=t;break}un=e.return}}function IX(i){for(;un!==null;){var e=un;if(e===i){un=null;break}var t=e.sibling;if(t!==null){t.return=e.return,un=t;break}un=e.return}}function kX(i){for(;un!==null;){var e=un;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{P5(4,e)}catch(u){Qo(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(u){Qo(e,r,u)}}var o=e.return;try{DV(e)}catch(u){Qo(e,o,u)}break;case 5:var s=e.return;try{DV(e)}catch(u){Qo(e,s,u)}}}catch(u){Qo(e,e.return,u)}if(e===i){un=null;break}var a=e.sibling;if(a!==null){a.return=e.return,un=a;break}un=e.return}}var Vbe=Math.ceil,eF=Vp.ReactCurrentDispatcher,uK=Vp.ReactCurrentOwner,Yc=Vp.ReactCurrentBatchConfig,pr=0,oa=null,Ts=null,ka=0,Ku=0,Ny=B0(0),zs=0,gA=null,p1=0,F5=0,cK=0,C2=null,Eu=null,dK=0,Fw=1/0,zg=null,tF=!1,kV=null,Qv=null,uM=!1,Fv=null,nF=0,y2=0,NV=null,FP=-1,BP=0;function vl(){return pr&6?as():FP!==-1?FP:FP=as()}function Jv(i){return i.mode&1?pr&2&&ka!==0?ka&-ka:Sbe.transition!==null?(BP===0&&(BP=Loe()),BP):(i=Vr,i!==0||(i=window.event,i=i===void 0?16:Aoe(i.type)),i):1}function zh(i,e,t,n){if(50<y2)throw y2=0,NV=null,Error(Et(185));KO(i,t,n),(!(pr&2)||i!==oa)&&(i===oa&&(!(pr&2)&&(F5|=t),zs===4&&Av(i,ka)),Mu(i,n),t===1&&pr===0&&!(e.mode&1)&&(Fw=as()+500,O5&&W0()))}function Mu(i,e){var t=i.callbackNode;S0e(i,e);var n=W4(i,i===oa?ka:0);if(n===0)t!==null&&WZ(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&WZ(t),e===1)i.tag===0?wbe(NX.bind(null,i)):Xoe(NX.bind(null,i)),vbe(function(){!(pr&6)&&W0()}),t=null;else{switch(xoe(n)){case 1:t=Fj;break;case 4:t=Soe;break;case 16:t=B4;break;case 536870912:t=Eoe;break;default:t=B4}t=Yse(t,$se.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function $se(i,e){if(FP=-1,BP=0,pr&6)throw Error(Et(327));var t=i.callbackNode;if(ew()&&i.callbackNode!==t)return null;var n=W4(i,i===oa?ka:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=iF(i,n);else{e=n;var r=pr;pr|=2;var o=Use();(oa!==i||ka!==e)&&(zg=null,Fw=as()+500,jb(i,e));do try{zbe();break}catch(a){zse(i,a)}while(1);Zj(),eF.current=o,pr=r,Ts!==null?e=0:(oa=null,ka=0,e=zs)}if(e!==0){if(e===2&&(r=rV(i),r!==0&&(n=r,e=AV(i,r))),e===1)throw t=gA,jb(i,0),Av(i,n),Mu(i,as()),t;if(e===6)Av(i,n);else{if(r=i.current.alternate,!(n&30)&&!Hbe(r)&&(e=iF(i,n),e===2&&(o=rV(i),o!==0&&(n=o,e=AV(i,o))),e===1))throw t=gA,jb(i,0),Av(i,n),Mu(i,as()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(Et(345));case 2:cb(i,Eu,zg);break;case 3:if(Av(i,n),(n&130023424)===n&&(e=dK+500-as(),10<e)){if(W4(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){vl(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=hV(cb.bind(null,i,Eu,zg),e);break}cb(i,Eu,zg);break;case 4:if(Av(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var s=31-$h(n);o=1<<s,s=e[s],s>r&&(r=s),n&=~o}if(n=r,n=as()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vbe(n/1960))-n,10<n){i.timeoutHandle=hV(cb.bind(null,i,Eu,zg),n);break}cb(i,Eu,zg);break;case 5:cb(i,Eu,zg);break;default:throw Error(Et(329))}}}return Mu(i,as()),i.callbackNode===t?$se.bind(null,i):null}function AV(i,e){var t=C2;return i.current.memoizedState.isDehydrated&&(jb(i,e).flags|=256),i=iF(i,e),i!==2&&(e=Eu,Eu=t,e!==null&&OV(e)),i}function OV(i){Eu===null?Eu=i:Eu.push.apply(Eu,i)}function Hbe(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],o=r.getSnapshot;r=r.value;try{if(!Jh(o(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Av(i,e){for(e&=~cK,e&=~F5,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-$h(e),n=1<<t;i[t]=-1,e&=~n}}function NX(i){if(pr&6)throw Error(Et(327));ew();var e=W4(i,0);if(!(e&1))return Mu(i,as()),null;var t=iF(i,e);if(i.tag!==0&&t===2){var n=rV(i);n!==0&&(e=n,t=AV(i,n))}if(t===1)throw t=gA,jb(i,0),Av(i,e),Mu(i,as()),t;if(t===6)throw Error(Et(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,cb(i,Eu,zg),Mu(i,as()),null}function hK(i,e){var t=pr;pr|=1;try{return i(e)}finally{pr=t,pr===0&&(Fw=as()+500,O5&&W0())}}function m1(i){Fv!==null&&Fv.tag===0&&!(pr&6)&&ew();var e=pr;pr|=1;var t=Yc.transition,n=Vr;try{if(Yc.transition=null,Vr=1,i)return i()}finally{Vr=n,Yc.transition=t,pr=e,!(pr&6)&&W0()}}function fK(){Ku=Ny.current,So(Ny)}function jb(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,_be(t)),Ts!==null)for(t=Ts.return;t!==null;){var n=t;switch(Gj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&U4();break;case 3:Mw(),So(Ou),So(Za),nK();break;case 5:tK(n);break;case 4:Mw();break;case 13:So(Wo);break;case 19:So(Wo);break;case 10:Xj(n.type._context);break;case 22:case 23:fK()}t=t.return}if(oa=i,Ts=i=e0(i.current,null),ka=Ku=e,zs=0,gA=null,cK=F5=p1=0,Eu=C2=null,Ab!==null){for(e=0;e<Ab.length;e++)if(t=Ab[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,o=t.pending;if(o!==null){var s=o.next;o.next=r,n.next=s}t.pending=n}Ab=null}return i}function zse(i,e){do{var t=Ts;try{if(Zj(),RP.current=J4,Q4){for(var n=Ho.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Q4=!1}if(g1=0,Qs=$s=Ho=null,v2=!1,dA=0,uK.current=null,t===null||t.return===null){zs=1,gA=e,Ts=null;break}e:{var o=i,s=t.return,a=t,u=e;if(e=ka,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=vX(s);if(m!==null){m.flags&=-257,bX(m,s,a,o,e),m.mode&1&&_X(o,d,e),e=m,u=d;var v=e.updateQueue;if(v===null){var b=new Set;b.add(u),e.updateQueue=b}else v.add(u);break e}else{if(!(e&1)){_X(o,d,e),gK();break e}u=Error(Et(426))}}else if(xo&&a.mode&1){var E=vX(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),bX(E,s,a,o,e),qj(Pw(u,a));break e}}o=u=Pw(u,a),zs!==4&&(zs=2),C2===null?C2=[o]:C2.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=xse(o,u,e);dX(o,S);break e;case 1:a=u;var w=o.type,L=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Qv===null||!Qv.has(L)))){o.flags|=65536,e&=-e,o.lanes|=e;var A=Dse(o,a,e);dX(o,A);break e}}o=o.return}while(o!==null)}Kse(t)}catch(N){e=N,Ts===t&&t!==null&&(Ts=t=t.return);continue}break}while(1)}function Use(){var i=eF.current;return eF.current=J4,i===null?J4:i}function gK(){(zs===0||zs===3||zs===2)&&(zs=4),oa===null||!(p1&268435455)&&!(F5&268435455)||Av(oa,ka)}function iF(i,e){var t=pr;pr|=2;var n=Use();(oa!==i||ka!==e)&&(zg=null,jb(i,e));do try{$be();break}catch(r){zse(i,r)}while(1);if(Zj(),pr=t,eF.current=n,Ts!==null)throw Error(Et(261));return oa=null,ka=0,zs}function $be(){for(;Ts!==null;)jse(Ts)}function zbe(){for(;Ts!==null&&!g0e();)jse(Ts)}function jse(i){var e=qse(i.alternate,i,Ku);i.memoizedProps=i.pendingProps,e===null?Kse(i):Ts=e,uK.current=null}function Kse(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=Pbe(t,e),t!==null){t.flags&=32767,Ts=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{zs=6,Ts=null;return}}else if(t=Mbe(t,e,Ku),t!==null){Ts=t;return}if(e=e.sibling,e!==null){Ts=e;return}Ts=e=i}while(e!==null);zs===0&&(zs=5)}function cb(i,e,t){var n=Vr,r=Yc.transition;try{Yc.transition=null,Vr=1,Ube(i,e,t,n)}finally{Yc.transition=r,Vr=n}return null}function Ube(i,e,t,n){do ew();while(Fv!==null);if(pr&6)throw Error(Et(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Et(177));i.callbackNode=null,i.callbackPriority=0;var o=t.lanes|t.childLanes;if(E0e(i,o),i===oa&&(Ts=oa=null,ka=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uM||(uM=!0,Yse(B4,function(){return ew(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Yc.transition,Yc.transition=null;var s=Vr;Vr=1;var a=pr;pr|=4,uK.current=null,Bbe(i,t),Vse(t,i),cbe(cV),V4=!!uV,cV=uV=null,i.current=t,Wbe(t),p0e(),pr=a,Vr=s,Yc.transition=o}else i.current=t;if(uM&&(uM=!1,Fv=i,nF=r),o=i.pendingLanes,o===0&&(Qv=null),v0e(t.stateNode),Mu(i,as()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(tF)throw tF=!1,i=kV,kV=null,i;return nF&1&&i.tag!==0&&ew(),o=i.pendingLanes,o&1?i===NV?y2++:(y2=0,NV=i):y2=0,W0(),null}function ew(){if(Fv!==null){var i=xoe(nF),e=Yc.transition,t=Vr;try{if(Yc.transition=null,Vr=16>i?16:i,Fv===null)var n=!1;else{if(i=Fv,Fv=null,nF=0,pr&6)throw Error(Et(331));var r=pr;for(pr|=4,un=i.current;un!==null;){var o=un,s=o.child;if(un.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(un=d;un!==null;){var h=un;switch(h.tag){case 0:case 11:case 15:b2(8,h,o)}var f=h.child;if(f!==null)f.return=h,un=f;else for(;un!==null;){h=un;var p=h.sibling,m=h.return;if(Fse(h),h===d){un=null;break}if(p!==null){p.return=m,un=p;break}un=m}}}var v=o.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}un=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,un=s;else e:for(;un!==null;){if(o=un,o.flags&2048)switch(o.tag){case 0:case 11:case 15:b2(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,un=S;break e}un=o.return}}var w=i.current;for(un=w;un!==null;){s=un;var L=s.child;if(s.subtreeFlags&2064&&L!==null)L.return=s,un=L;else e:for(s=w;un!==null;){if(a=un,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P5(9,a)}}catch(N){Qo(a,a.return,N)}if(a===s){un=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,un=A;break e}un=a.return}}if(pr=r,W0(),Zf&&typeof Zf.onPostCommitFiberRoot=="function")try{Zf.onPostCommitFiberRoot(T5,i)}catch{}n=!0}return n}finally{Vr=t,Yc.transition=e}}return!1}function AX(i,e,t){e=Pw(t,e),e=xse(i,e,1),i=Xv(i,e,1),e=vl(),i!==null&&(KO(i,1,e),Mu(i,e))}function Qo(i,e,t){if(i.tag===3)AX(i,i,t);else for(;e!==null;){if(e.tag===3){AX(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qv===null||!Qv.has(n))){i=Pw(t,i),i=Dse(e,i,1),e=Xv(e,i,1),i=vl(),e!==null&&(KO(e,1,i),Mu(e,i));break}}e=e.return}}function jbe(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=vl(),i.pingedLanes|=i.suspendedLanes&t,oa===i&&(ka&t)===t&&(zs===4||zs===3&&(ka&130023424)===ka&&500>as()-dK?jb(i,0):cK|=t),Mu(i,e)}function Gse(i,e){e===0&&(i.mode&1?(e=JR,JR<<=1,!(JR&130023424)&&(JR=4194304)):e=1);var t=vl();i=Dp(i,e),i!==null&&(KO(i,e,t),Mu(i,t))}function Kbe(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Gse(i,t)}function Gbe(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Et(314))}n!==null&&n.delete(e),Gse(i,t)}var qse;qse=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Ou.current)Iu=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Iu=!1,Rbe(i,e,t);Iu=!!(i.flags&131072)}else Iu=!1,xo&&e.flags&1048576&&Qoe(e,G4,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;PP(i,e),i=e.pendingProps;var r=Aw(e,Za.current);Jy(e,t),r=rK(null,e,n,i,r,t);var o=oK();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ru(n)?(o=!0,j4(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Jj(e),r.updater=M5,e.stateNode=r,r._reactInternals=e,bV(e,n,i,t),e=wV(null,e,n,!0,o,t)):(e.tag=0,xo&&o&&Kj(e),dl(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(PP(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Ybe(n),i=bh(n,i),r){case 0:e=yV(null,e,n,i,t);break e;case 1:e=wX(null,e,n,i,t);break e;case 11:e=CX(null,e,n,i,t);break e;case 14:e=yX(null,e,n,bh(n.type,i),t);break e}throw Error(Et(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),yV(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),wX(i,e,n,r,t);case 3:e:{if(Nse(e),i===null)throw Error(Et(387));n=e.pendingProps,o=e.memoizedState,r=o.element,rse(i,e),Z4(e,n,null,t);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Pw(Error(Et(423)),e),e=SX(i,e,n,t,r);break e}else if(n!==r){r=Pw(Error(Et(424)),e),e=SX(i,e,n,t,r);break e}else for(Qu=Zv(e.stateNode.containerInfo.firstChild),nc=e,xo=!0,Ih=null,t=nse(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ow(),n===r){e=Tp(i,e,t);break e}dl(i,e,n,t)}e=e.child}return e;case 5:return ose(e),i===null&&mV(e),n=e.type,r=e.pendingProps,o=i!==null?i.memoizedProps:null,s=r.children,dV(n,r)?s=null:o!==null&&dV(n,o)&&(e.flags|=32),kse(i,e),dl(i,e,s,t),e.child;case 6:return i===null&&mV(e),null;case 13:return Ase(i,e,t);case 4:return eK(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Rw(e,null,n,t):dl(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),CX(i,e,n,r,t);case 7:return dl(i,e,e.pendingProps,t),e.child;case 8:return dl(i,e,e.pendingProps.children,t),e.child;case 12:return dl(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,ho(q4,n._currentValue),n._currentValue=s,o!==null)if(Jh(o.value,s)){if(o.children===r.children&&!Ou.current){e=Tp(i,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=fp(-1,t&-t),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}o.lanes|=t,u=o.alternate,u!==null&&(u.lanes|=t),_V(o.return,t,e),a.lanes|=t;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Et(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),_V(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}dl(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Jy(e,t),r=ed(r),n=n(r),e.flags|=1,dl(i,e,n,t),e.child;case 14:return n=e.type,r=bh(n,e.pendingProps),r=bh(n.type,r),yX(i,e,n,r,t);case 15:return Tse(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:bh(n,r),PP(i,e),e.tag=1,Ru(n)?(i=!0,j4(e)):i=!1,Jy(e,t),Lse(e,n,r),bV(e,n,r,t),wV(null,e,n,!0,i,t);case 19:return Ose(i,e,t);case 22:return Ise(i,e,t)}throw Error(Et(156,e.tag))};function Yse(i,e){return woe(i,e)}function qbe(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(i,e,t,n){return new qbe(i,e,t,n)}function pK(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ybe(i){if(typeof i=="function")return pK(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Rj)return 11;if(i===Mj)return 14}return 2}function e0(i,e){var t=i.alternate;return t===null?(t=jc(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function WP(i,e,t,n,r,o){var s=2;if(n=i,typeof i=="function")pK(i)&&(s=1);else if(typeof i=="string")s=5;else e:switch(i){case yy:return Kb(t.children,r,o,e);case Oj:s=8,r|=8;break;case zW:return i=jc(12,t,e,r|2),i.elementType=zW,i.lanes=o,i;case UW:return i=jc(13,t,e,r),i.elementType=UW,i.lanes=o,i;case jW:return i=jc(19,t,e,r),i.elementType=jW,i.lanes=o,i;case ooe:return B5(t,r,o,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ioe:s=10;break e;case roe:s=9;break e;case Rj:s=11;break e;case Mj:s=14;break e;case xv:s=16,n=null;break e}throw Error(Et(130,i==null?i:typeof i,""))}return e=jc(s,t,e,r),e.elementType=i,e.type=n,e.lanes=o,e}function Kb(i,e,t,n){return i=jc(7,i,n,e),i.lanes=t,i}function B5(i,e,t,n){return i=jc(22,i,n,e),i.elementType=ooe,i.lanes=t,i.stateNode={isHidden:!1},i}function Z7(i,e,t){return i=jc(6,i,null,e),i.lanes=t,i}function X7(i,e,t){return e=jc(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function Zbe(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N7(0),this.expirationTimes=N7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N7(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function mK(i,e,t,n,r,o,s,a,u){return i=new Zbe(i,e,t,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=jc(3,null,null,e),i.current=o,o.stateNode=i,o.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jj(o),i}function Xbe(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cy,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function Zse(i){if(!i)return g0;i=i._reactInternals;e:{if(fC(i)!==i||i.tag!==1)throw Error(Et(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ru(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Et(171))}if(i.tag===1){var t=i.type;if(Ru(t))return Zoe(i,t,e)}return e}function Xse(i,e,t,n,r,o,s,a,u){return i=mK(t,n,!0,i,r,o,s,a,u),i.context=Zse(null),t=i.current,n=vl(),r=Jv(t),o=fp(n,r),o.callback=e??null,Xv(t,o,r),i.current.lanes=r,KO(i,r,n),Mu(i,n),i}function W5(i,e,t,n){var r=e.current,o=vl(),s=Jv(r);return t=Zse(t),e.context===null?e.context=t:e.pendingContext=t,e=fp(o,s),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Xv(r,e,s),i!==null&&(zh(i,r,s,o),OP(i,r,s)),s}function rF(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function OX(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function _K(i,e){OX(i,e),(i=i.alternate)&&OX(i,e)}function Qbe(){return null}var Qse=typeof reportError=="function"?reportError:function(i){console.error(i)};function vK(i){this._internalRoot=i}V5.prototype.render=vK.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Et(409));W5(i,e,null,null)};V5.prototype.unmount=vK.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;m1(function(){W5(null,i,null,null)}),e[xp]=null}};function V5(i){this._internalRoot=i}V5.prototype.unstable_scheduleHydration=function(i){if(i){var e=Ioe();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Nv.length&&e!==0&&e<Nv[t].priority;t++);Nv.splice(t,0,i),t===0&&Noe(i)}};function bK(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function H5(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function RX(){}function Jbe(i,e,t,n,r){if(r){if(typeof n=="function"){var o=n;n=function(){var d=rF(s);o.call(d)}}var s=Xse(e,n,i,0,null,!1,!1,"",RX);return i._reactRootContainer=s,i[xp]=s.current,sA(i.nodeType===8?i.parentNode:i),m1(),s}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var d=rF(u);a.call(d)}}var u=mK(i,0,!1,null,null,!1,!1,"",RX);return i._reactRootContainer=u,i[xp]=u.current,sA(i.nodeType===8?i.parentNode:i),m1(function(){W5(e,u,t,n)}),u}function $5(i,e,t,n,r){var o=t._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var a=r;r=function(){var u=rF(s);a.call(u)}}W5(e,s,i,r)}else s=Jbe(t,e,i,r,n);return rF(s)}Doe=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=jN(e.pendingLanes);t!==0&&(Bj(e,t|1),Mu(e,as()),!(pr&6)&&(Fw=as()+500,W0()))}break;case 13:m1(function(){var n=Dp(i,1);if(n!==null){var r=vl();zh(n,i,1,r)}}),_K(i,1)}};Wj=function(i){if(i.tag===13){var e=Dp(i,134217728);if(e!==null){var t=vl();zh(e,i,134217728,t)}_K(i,134217728)}};Toe=function(i){if(i.tag===13){var e=Jv(i),t=Dp(i,e);if(t!==null){var n=vl();zh(t,i,e,n)}_K(i,e)}};Ioe=function(){return Vr};koe=function(i,e){var t=Vr;try{return Vr=i,e()}finally{Vr=t}};tV=function(i,e,t){switch(e){case"input":if(qW(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=A5(n);if(!r)throw Error(Et(90));aoe(n),qW(n,r)}}}break;case"textarea":uoe(i,t);break;case"select":e=t.value,e!=null&&Yy(i,!!t.multiple,e,!1)}};moe=hK;_oe=m1;var e1e={usingClientEntryPoint:!1,Events:[qO,Ly,A5,goe,poe,hK]},yN={findFiberByHostInstance:Nb,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t1e={bundleType:yN.bundleType,version:yN.version,rendererPackageName:yN.rendererPackageName,rendererConfig:yN.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vp.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Coe(i),i===null?null:i.stateNode},findFiberByHostInstance:yN.findFiberByHostInstance||Qbe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cM.isDisabled&&cM.supportsFiber)try{T5=cM.inject(t1e),Zf=cM}catch{}}mc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e1e;mc.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bK(e))throw Error(Et(200));return Xbe(i,e,null,t)};mc.createRoot=function(i,e){if(!bK(i))throw Error(Et(299));var t=!1,n="",r=Qse;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=mK(i,1,!1,null,null,t,!1,n,r),i[xp]=e.current,sA(i.nodeType===8?i.parentNode:i),new vK(e)};mc.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Et(188)):(i=Object.keys(i).join(","),Error(Et(268,i)));return i=Coe(e),i=i===null?null:i.stateNode,i};mc.flushSync=function(i){return m1(i)};mc.hydrate=function(i,e,t){if(!H5(e))throw Error(Et(200));return $5(null,i,e,!0,t)};mc.hydrateRoot=function(i,e,t){if(!bK(i))throw Error(Et(405));var n=t!=null&&t.hydratedSources||null,r=!1,o="",s=Qse;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=Xse(e,null,i,1,t??null,r,!1,o,s),i[xp]=e.current,sA(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new V5(e)};mc.render=function(i,e,t){if(!H5(e))throw Error(Et(200));return $5(null,i,e,!1,t)};mc.unmountComponentAtNode=function(i){if(!H5(i))throw Error(Et(40));return i._reactRootContainer?(m1(function(){$5(null,null,i,!1,function(){i._reactRootContainer=null,i[xp]=null})}),!0):!1};mc.unstable_batchedUpdates=hK;mc.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!H5(t))throw Error(Et(200));if(i==null||i._reactInternals===void 0)throw Error(Et(38));return $5(i,e,t,!1,n)};mc.version="18.3.1-next-f1338f8080-20240426";function Jse(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jse)}catch(i){console.error(i)}}Jse(),Jre.exports=mc;var z5=Jre.exports;const _1=Wp(z5),n1e=Hre({__proto__:null,default:_1},[z5]);var MX=z5;HW.createRoot=MX.createRoot,HW.hydrateRoot=MX.hydrateRoot;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var PX;(function(i){(function(e){var t=typeof ta=="object"?ta:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=r(i);typeof t.Reflect>"u"?t.Reflect=i:n=r(t.Reflect,n),e(n);function r(o,s){return function(a,u){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:u}),s&&s(a,u)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",r=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!s&&!a,d={create:s?function(){return Ci(Object.create(null))}:a?function(){return Ci({__proto__:null})}:function(){return Ci({})},has:u?function(Ie,Fe){return t.call(Ie,Fe)}:function(Ie,Fe){return Fe in Ie},get:u?function(Ie,Fe){return t.call(Ie,Fe)?Ie[Fe]:void 0}:function(Ie,Fe){return Ie[Fe]}},h=Object.getPrototypeOf(Function),f=typeof process=="object"&&process["env"]&&process["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",p=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:jn(),m=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Pt(),v=!f&&typeof WeakMap=="function"?WeakMap:pn(),b=new v;function E(Ie,Fe,pt,at){if(K(pt)){if(!ut(Ie))throw new TypeError;if(!Xe(Fe))throw new TypeError;return X(Ie,Fe)}else{if(!ut(Ie))throw new TypeError;if(!be(Fe))throw new TypeError;if(!be(at)&&!K(at)&&!fe(at))throw new TypeError;return fe(at)&&(at=void 0),pt=Re(pt),$(Ie,Fe,pt,at)}}e("decorate",E);function S(Ie,Fe){function pt(at,bt){if(!be(at))throw new TypeError;if(!K(bt)&&!on(bt))throw new TypeError;U(Ie,Fe,at,bt)}return pt}e("metadata",S);function w(Ie,Fe,pt,at){if(!be(pt))throw new TypeError;return K(at)||(at=Re(at)),U(Ie,Fe,pt,at)}e("defineMetadata",w);function L(Ie,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Re(pt)),O(Ie,Fe,pt)}e("hasMetadata",L);function A(Ie,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Re(pt)),B(Ie,Fe,pt)}e("hasOwnMetadata",A);function N(Ie,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Re(pt)),W(Ie,Fe,pt)}e("getMetadata",N);function H(Ie,Fe,pt){if(!be(Fe))throw new TypeError;return K(pt)||(pt=Re(pt)),j(Ie,Fe,pt)}e("getOwnMetadata",H);function M(Ie,Fe){if(!be(Ie))throw new TypeError;return K(Fe)||(Fe=Re(Fe)),G(Ie,Fe)}e("getMetadataKeys",M);function R(Ie,Fe){if(!be(Ie))throw new TypeError;return K(Fe)||(Fe=Re(Fe)),z(Ie,Fe)}e("getOwnMetadataKeys",R);function q(Ie,Fe,pt){if(!be(Fe))throw new TypeError;K(pt)||(pt=Re(pt));var at=I(Fe,pt,!1);if(K(at)||!at.delete(Ie))return!1;if(at.size>0)return!0;var bt=b.get(Fe);return bt.delete(pt),bt.size>0||b.delete(Fe),!0}e("deleteMetadata",q);function X(Ie,Fe){for(var pt=Ie.length-1;pt>=0;--pt){var at=Ie[pt],bt=at(Fe);if(!K(bt)&&!fe(bt)){if(!Xe(bt))throw new TypeError;Fe=bt}}return Fe}function $(Ie,Fe,pt,at){for(var bt=Ie.length-1;bt>=0;--bt){var yi=Ie[bt],Vt=yi(Fe,pt,at);if(!K(Vt)&&!fe(Vt)){if(!be(Vt))throw new TypeError;at=Vt}}return at}function I(Ie,Fe,pt){var at=b.get(Ie);if(K(at)){if(!pt)return;at=new p,b.set(Ie,at)}var bt=at.get(Fe);if(K(bt)){if(!pt)return;bt=new p,at.set(Fe,bt)}return bt}function O(Ie,Fe,pt){var at=B(Ie,Fe,pt);if(at)return!0;var bt=oi(Fe);return fe(bt)?!1:O(Ie,bt,pt)}function B(Ie,Fe,pt){var at=I(Fe,pt,!1);return K(at)?!1:rt(at.has(Ie))}function W(Ie,Fe,pt){var at=B(Ie,Fe,pt);if(at)return j(Ie,Fe,pt);var bt=oi(Fe);if(!fe(bt))return W(Ie,bt,pt)}function j(Ie,Fe,pt){var at=I(Fe,pt,!1);if(!K(at))return at.get(Ie)}function U(Ie,Fe,pt,at){var bt=I(pt,at,!0);bt.set(Ie,Fe)}function G(Ie,Fe){var pt=z(Ie,Fe),at=oi(Ie);if(at===null)return pt;var bt=G(at,Fe);if(bt.length<=0)return pt;if(pt.length<=0)return bt;for(var yi=new m,Vt=[],It=0,Gt=pt;It<Gt.length;It++){var qt=Gt[It],Bt=yi.has(qt);Bt||(yi.add(qt),Vt.push(qt))}for(var gr=0,ei=bt;gr<ei.length;gr++){var qt=ei[gr],Bt=yi.has(qt);Bt||(yi.add(qt),Vt.push(qt))}return Vt}function z(Ie,Fe){var pt=[],at=I(Ie,Fe,!1);if(K(at))return pt;for(var bt=at.keys(),yi=dn(bt),Vt=0;;){var It=Wn(yi);if(!It)return pt.length=Vt,pt;var Gt=Sn(It);try{pt[Vt]=Gt}catch(qt){try{Jn(yi)}finally{throw qt}}Vt++}}function k(Ie){if(Ie===null)return 1;switch(typeof Ie){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Ie===null?1:6;default:return 6}}function K(Ie){return Ie===void 0}function fe(Ie){return Ie===null}function ne(Ie){return typeof Ie=="symbol"}function be(Ie){return typeof Ie=="object"?Ie!==null:typeof Ie=="function"}function De(Ie,Fe){switch(k(Ie)){case 0:return Ie;case 1:return Ie;case 2:return Ie;case 3:return Ie;case 4:return Ie;case 5:return Ie}var pt=Fe===3?"string":Fe===5?"number":"default",at=Kt(Ie,r);if(at!==void 0){var bt=at.call(Ie,pt);if(be(bt))throw new TypeError;return bt}return Ve(Ie,pt==="default"?"number":pt)}function Ve(Ie,Fe){if(Fe==="string"){var pt=Ie.toString;if(Ct(pt)){var at=pt.call(Ie);if(!be(at))return at}var bt=Ie.valueOf;if(Ct(bt)){var at=bt.call(Ie);if(!be(at))return at}}else{var bt=Ie.valueOf;if(Ct(bt)){var at=bt.call(Ie);if(!be(at))return at}var yi=Ie.toString;if(Ct(yi)){var at=yi.call(Ie);if(!be(at))return at}}throw new TypeError}function rt(Ie){return!!Ie}function At(Ie){return""+Ie}function Re(Ie){var Fe=De(Ie,3);return ne(Fe)?Fe:At(Fe)}function ut(Ie){return Array.isArray?Array.isArray(Ie):Ie instanceof Object?Ie instanceof Array:Object.prototype.toString.call(Ie)==="[object Array]"}function Ct(Ie){return typeof Ie=="function"}function Xe(Ie){return typeof Ie=="function"}function on(Ie){switch(k(Ie)){case 3:return!0;case 4:return!0;default:return!1}}function Kt(Ie,Fe){var pt=Ie[Fe];if(pt!=null){if(!Ct(pt))throw new TypeError;return pt}}function dn(Ie){var Fe=Kt(Ie,o);if(!Ct(Fe))throw new TypeError;var pt=Fe.call(Ie);if(!be(pt))throw new TypeError;return pt}function Sn(Ie){return Ie.value}function Wn(Ie){var Fe=Ie.next();return Fe.done?!1:Fe}function Jn(Ie){var Fe=Ie.return;Fe&&Fe.call(Ie)}function oi(Ie){var Fe=Object.getPrototypeOf(Ie);if(typeof Ie!="function"||Ie===h||Fe!==h)return Fe;var pt=Ie.prototype,at=pt&&Object.getPrototypeOf(pt);if(at==null||at===Object.prototype)return Fe;var bt=at.constructor;return typeof bt!="function"||bt===Ie?Fe:bt}function jn(){var Ie={},Fe=[],pt=function(){function Vt(It,Gt,qt){this._index=0,this._keys=It,this._values=Gt,this._selector=qt}return Vt.prototype["@@iterator"]=function(){return this},Vt.prototype[o]=function(){return this},Vt.prototype.next=function(){var It=this._index;if(It>=0&&It<this._keys.length){var Gt=this._selector(this._keys[It],this._values[It]);return It+1>=this._keys.length?(this._index=-1,this._keys=Fe,this._values=Fe):this._index++,{value:Gt,done:!1}}return{value:void 0,done:!0}},Vt.prototype.throw=function(It){throw this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),It},Vt.prototype.return=function(It){return this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),{value:It,done:!0}},Vt}();return function(){function Vt(){this._keys=[],this._values=[],this._cacheKey=Ie,this._cacheIndex=-2}return Object.defineProperty(Vt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Vt.prototype.has=function(It){return this._find(It,!1)>=0},Vt.prototype.get=function(It){var Gt=this._find(It,!1);return Gt>=0?this._values[Gt]:void 0},Vt.prototype.set=function(It,Gt){var qt=this._find(It,!0);return this._values[qt]=Gt,this},Vt.prototype.delete=function(It){var Gt=this._find(It,!1);if(Gt>=0){for(var qt=this._keys.length,Bt=Gt+1;Bt<qt;Bt++)this._keys[Bt-1]=this._keys[Bt],this._values[Bt-1]=this._values[Bt];return this._keys.length--,this._values.length--,It===this._cacheKey&&(this._cacheKey=Ie,this._cacheIndex=-2),!0}return!1},Vt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Ie,this._cacheIndex=-2},Vt.prototype.keys=function(){return new pt(this._keys,this._values,at)},Vt.prototype.values=function(){return new pt(this._keys,this._values,bt)},Vt.prototype.entries=function(){return new pt(this._keys,this._values,yi)},Vt.prototype["@@iterator"]=function(){return this.entries()},Vt.prototype[o]=function(){return this.entries()},Vt.prototype._find=function(It,Gt){return this._cacheKey!==It&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=It)),this._cacheIndex<0&&Gt&&(this._cacheIndex=this._keys.length,this._keys.push(It),this._values.push(void 0)),this._cacheIndex},Vt}();function at(Vt,It){return Vt}function bt(Vt,It){return It}function yi(Vt,It){return[Vt,It]}}function Pt(){return function(){function Ie(){this._map=new p}return Object.defineProperty(Ie.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ie.prototype.has=function(Fe){return this._map.has(Fe)},Ie.prototype.add=function(Fe){return this._map.set(Fe,Fe),this},Ie.prototype.delete=function(Fe){return this._map.delete(Fe)},Ie.prototype.clear=function(){this._map.clear()},Ie.prototype.keys=function(){return this._map.keys()},Ie.prototype.values=function(){return this._map.values()},Ie.prototype.entries=function(){return this._map.entries()},Ie.prototype["@@iterator"]=function(){return this.keys()},Ie.prototype[o]=function(){return this.keys()},Ie}()}function pn(){var Ie=16,Fe=d.create(),pt=at();return function(){function Gt(){this._key=at()}return Gt.prototype.has=function(qt){var Bt=bt(qt,!1);return Bt!==void 0?d.has(Bt,this._key):!1},Gt.prototype.get=function(qt){var Bt=bt(qt,!1);return Bt!==void 0?d.get(Bt,this._key):void 0},Gt.prototype.set=function(qt,Bt){var gr=bt(qt,!0);return gr[this._key]=Bt,this},Gt.prototype.delete=function(qt){var Bt=bt(qt,!1);return Bt!==void 0?delete Bt[this._key]:!1},Gt.prototype.clear=function(){this._key=at()},Gt}();function at(){var Gt;do Gt="@@WeakMap@@"+It();while(d.has(Fe,Gt));return Fe[Gt]=!0,Gt}function bt(Gt,qt){if(!t.call(Gt,pt)){if(!qt)return;Object.defineProperty(Gt,pt,{value:d.create()})}return Gt[pt]}function yi(Gt,qt){for(var Bt=0;Bt<qt;++Bt)Gt[Bt]=Math.random()*255|0;return Gt}function Vt(Gt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Gt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Gt)):yi(new Uint8Array(Gt),Gt):yi(new Array(Gt),Gt)}function It(){var Gt=Vt(Ie);Gt[6]=Gt[6]&79|64,Gt[8]=Gt[8]&191|128;for(var qt="",Bt=0;Bt<Ie;++Bt){var gr=Gt[Bt];(Bt===4||Bt===6||Bt===8)&&(qt+="-"),gr<16&&(qt+="0"),qt+=gr.toString(16).toLowerCase()}return qt}}function Ci(Ie){return Ie.__=void 0,delete Ie.__,Ie}})})(PX||(PX={}));var RV;(function(i){i[i.Transient=0]="Transient",i[i.Singleton=1]="Singleton",i[i.ResolutionScoped=2]="ResolutionScoped",i[i.ContainerScoped=3]="ContainerScoped"})(RV||(RV={}));const bu=RV;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MV=function(i,e){return MV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},MV(i,e)};function CK(i,e){MV(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function dM(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oF(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function _b(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(oF(arguments[e]));return i}var i1e="injectionTokens";function r1e(i){var e=Reflect.getMetadata("design:paramtypes",i)||[],t=Reflect.getOwnMetadata(i1e,i)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function eae(i){return!!i.useClass}function PV(i){return!!i.useFactory}var tae=function(){function i(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return i.prototype.createProxy=function(e){var t=this,n={},r=!1,o,s=function(){return r||(o=e(t.wrap()),r=!0),o};return new Proxy(n,this.createHandler(s))},i.prototype.createHandler=function(e){var t={},n=function(r){t[r]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=e();var a=Reflect[r];return a.apply(void 0,_b(o))}};return this.reflectMethods.forEach(n),t},i}();function zC(i){return typeof i=="string"||typeof i=="symbol"}function o1e(i){return typeof i=="object"&&"token"in i&&"multiple"in i}function FX(i){return typeof i=="object"&&"token"in i&&"transform"in i}function s1e(i){return typeof i=="function"||i instanceof tae}function VP(i){return!!i.useToken}function HP(i){return i.useValue!=null}function a1e(i){return eae(i)||HP(i)||VP(i)||PV(i)}var yK=function(){function i(){this._registryMap=new Map}return i.prototype.entries=function(){return this._registryMap.entries()},i.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},i.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},i.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},i.prototype.setAll=function(e,t){this._registryMap.set(e,t)},i.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},i.prototype.clear=function(){this._registryMap.clear()},i.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},i}(),l1e=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(yK),BX=function(){function i(){this.scopedResolutions=new Map}return i}();function u1e(i,e){if(i===null)return"at position #"+e;var t=i.split(",")[e].trim();return'"'+t+'" at position #'+e}function c1e(i,e,t){return t===void 0&&(t="    "),_b([i],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function d1e(i,e,t){var n=oF(i.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=n[1],o=r===void 0?null:r,s=u1e(o,e);return c1e("Cannot inject the dependency "+s+' of "'+i.name+'" constructor. Reason:',t)}var h1e=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(yK),f1e=function(i){CK(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(yK),g1e=function(){function i(){this.preResolution=new h1e,this.postResolution=new f1e}return i}(),nae=new Map,p1e=function(){function i(e){this.parent=e,this._registry=new l1e,this.interceptors=new g1e}return i.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:bu.Transient});var r;if(a1e(t)?r=t:r={useClass:t},VP(r))for(var o=[e],s=r;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+_b(o,[a]).join(" -> "));o.push(a);var u=this._registry.get(a);u&&VP(u.provider)?s=u.provider:s=null}if((n.lifecycle===bu.Singleton||n.lifecycle==bu.ContainerScoped||n.lifecycle==bu.ResolutionScoped)&&(HP(r)||PV(r)))throw new Error('Cannot use lifecycle "'+bu[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},i.prototype.registerType=function(e,t){return zC(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},i.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},i.prototype.registerSingleton=function(e,t){if(zC(e)){if(zC(t))return this.register(e,{useToken:t},{lifecycle:bu.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:bu.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!zC(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:bu.Singleton})},i.prototype.resolve=function(e,t){t===void 0&&(t=new BX);var n=this.getRegistration(e);if(!n&&zC(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(s1e(e)){var r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},i.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var s=dM(this.interceptors.preResolution.getAll(e)),a=s.next();!a.done;a=s.next()){var u=a.value;u.options.frequency!="Once"&&o.push(u),u.callback(e,t)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},i.prototype.executePostResolutionInterceptor=function(e,t,n){var r,o;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var a=dM(this.interceptors.postResolution.getAll(e)),u=a.next();!u.done;u=a.next()){var d=u.value;d.options.frequency!="Once"&&s.push(d),d.callback(e,t,n)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,s)}},i.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===bu.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===bu.Singleton,r=e.options.lifecycle===bu.ContainerScoped,o=n||r,s;return HP(e.provider)?s=e.provider.useValue:VP(e.provider)?s=o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):eae(e.provider)?s=o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):PV(e.provider)?s=e.provider.useFactory(this):s=this.construct(e.provider,t),e.options.lifecycle===bu.ResolutionScoped&&t.scopedResolutions.set(e,s),s},i.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new BX);var r=this.getAllRegistrations(e);if(!r&&zC(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var o=r.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,o,"All"),o}var s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s},i.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},i.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},i.prototype.clearInstances=function(){var e,t;try{for(var n=dM(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=oF(r.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(u){return!HP(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},i.prototype.createChildContainer=function(){var e,t,n=new i(this);try{for(var r=dM(this._registry.entries()),o=r.next();!o.done;o=r.next()){var s=oF(o.value,2),a=s[0],u=s[1];u.some(function(d){var h=d.options;return h.lifecycle===bu.ContainerScoped})&&n._registry.setAll(a,u.map(function(d){return d.options.lifecycle===bu.ContainerScoped?{provider:d.provider,options:d.options}:d}))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},i.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},i.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},i.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},i.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},i.prototype.construct=function(e,t){var n=this;if(e instanceof tae)return e.createProxy(function(s){return n.resolve(s,t)});var r=nae.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(this.resolveParams(t,e));return new(e.bind.apply(e,_b([void 0],o)))},i.prototype.resolveParams=function(e,t){var n=this;return function(r,o){var s,a,u;try{return o1e(r)?FX(r)?r.multiple?(s=n.resolve(r.transform)).transform.apply(s,_b([n.resolveAll(r.token)],r.transformArgs)):(a=n.resolve(r.transform)).transform.apply(a,_b([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):FX(r)?(u=n.resolve(r.transform,e)).transform.apply(u,_b([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(d){throw new Error(d1e(t,o,d))}}},i}(),je=new p1e;function m1e(){return function(i){nae.set(i,r1e(i))}}function Gi(){return function(i){m1e()(i),je.registerSingleton(i)}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);class U5{constructor(){this._events=new Map}count(e){return(this._events.get(e)||[]).length}emit(e,...t){const n=this._events.get(e);if(n&&n.length>0){let r=!0;for(let o=n.length-1;o>=0;o--)r&&n[o].call({stopDelivery:()=>r=!1},...t)}}subscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.assignEvent(n,t)}):this.assignEvent(e,t)}unsubscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.deleteEvent(n,t)}):this.deleteEvent(e,t)}deleteEvent(e,t){if(t){const n=this._events.get(e);n&&n.splice(n.indexOf(t),1)}else this._events.delete(e)}assignEvent(e,t){const n=this._events.get(e);n?n.push(t):this._events.set(e,[t])}}const Rb=new U5;class NS{subscribe(e,t){Rb.subscribe(e,t)}emit(e,...t){Rb.emit(e,...t)}count(e){return Rb.count(e)}unsubscribe(e,t){Rb.unsubscribe(e,t)}}function _1e(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&(n.value=function(...o){try{const s=r.apply(this,o);return Rb.emit(i,o),s}catch(s){throw s}}),n}}function v1e(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&Rb.subscribe(i,r),n}}const b1e=Object.freeze(Object.defineProperty({__proto__:null,EventBus:Rb,EventEmitter:U5,GlobalEvent:NS,emit:_1e,subscribe:v1e},Symbol.toStringTag,{value:"Module"}));var sF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */sF.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,E=1,S=2,w=4,L=8,A=16,N=32,H=64,M=128,R=256,q=512,X=30,$="...",I=800,O=16,B=1,W=2,j=3,U=1/0,G=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",E],["bindKey",S],["curry",L],["curryRight",A],["flip",q],["partial",N],["partialRight",H],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Re="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",on="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",oi="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Ie="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",yi="[object Float32Array]",Vt="[object Float64Array]",It="[object Int8Array]",Gt="[object Int16Array]",qt="[object Int32Array]",Bt="[object Uint8Array]",gr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Ba=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,rr=RegExp(qs.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,T=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,st=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",yt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",Hn=Ot+yt+si,or="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Wa="\\xac\\xb1\\xd7\\xf7",al="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",fE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Wa+al+Ag+fE,od="['’]",gE="["+Ft+"]",Gp="["+Kp+"]",Ol="["+Hn+"]",qp="\\d+",pE="["+or+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+qp+or+$i+Up+"]",sd="\\ud83c[\\udffb-\\udfff]",mE="(?:"+Ol+"|"+sd+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",_E="(?:"+hs+"|"+Zp+")",em="(?:"+od+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+od+"(?:D|LL|M|RE|S|T|VE))?",nm=mE+"?",im="["+jp+"]?",vE="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",bE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+vE,yE="(?:"+[pE,ad,ld].join("|")+")"+rm,wE="(?:"+[Xp+Ol+"?",Ol,ad,ld,gE].join("|")+")",SE=RegExp(od,"g"),EE=RegExp(Ol,"g"),ud=RegExp(sd+"(?="+sd+")|"+wE+rm,"g"),LE=RegExp([hs+"?"+Yp+"+"+em+"(?="+[Gp,hs,"$"].join("|")+")",_E+"+"+tm+"(?="+[Gp,hs+Jp,"$"].join("|")+")",hs+"?"+Jp+"+"+em,hs+"+"+tm,CE,bE,qp,yE].join("|"),"g"),xE=RegExp("["+Qp+Ft+Hn+jp+"]"),DE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IE=-1,jt={};jt[yi]=jt[Vt]=jt[It]=jt[Gt]=jt[qt]=jt[Bt]=jt[gr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Re]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Re]=$t[yi]=$t[Vt]=$t[It]=$t[Gt]=$t[qt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[gr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var kE={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},RE=parseFloat,ME=parseInt,om=typeof ta=="object"&&ta&&ta.Object===Object&&ta,PE=typeof self=="object"&&self&&self.Object===Object&&self,xn=om||PE||Function("return this")(),cd=e&&!e.nodeType&&e,ko=cd&&!0&&i&&!i.nodeType&&i,sm=ko&&ko.exports===cd,dd=sm&&om.process,Ai=function(){try{var Y=ko&&ko.require&&ko.require("util").types;return Y||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function wi(Y,oe,ee){switch(ee.length){case 0:return Y.call(oe);case 1:return Y.call(oe,ee[0]);case 2:return Y.call(oe,ee[0],ee[1]);case 3:return Y.call(oe,ee[0],ee[1],ee[2])}return Y.apply(oe,ee)}function FE(Y,oe,ee,xe){for(var Qe=-1,St=Y==null?0:Y.length;++Qe<St;){var bn=Y[Qe];oe(xe,bn,ee(bn),Y)}return xe}function Oi(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe&&oe(Y[ee],ee,Y)!==!1;);return Y}function BE(Y,oe){for(var ee=Y==null?0:Y.length;ee--&&oe(Y[ee],ee,Y)!==!1;);return Y}function fm(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(!oe(Y[ee],ee,Y))return!1;return!0}function Jr(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];oe(bn,ee,Y)&&(St[Qe++]=bn)}return St}function Rl(Y,oe){var ee=Y==null?0:Y.length;return!!ee&&fs(Y,oe,0)>-1}function hd(Y,oe,ee){for(var xe=-1,Qe=Y==null?0:Y.length;++xe<Qe;)if(ee(oe,Y[xe]))return!0;return!1}function Jt(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=Array(xe);++ee<xe;)Qe[ee]=oe(Y[ee],ee,Y);return Qe}function eo(Y,oe){for(var ee=-1,xe=oe.length,Qe=Y.length;++ee<xe;)Y[Qe+ee]=oe[ee];return Y}function fd(Y,oe,ee,xe){var Qe=-1,St=Y==null?0:Y.length;for(xe&&St&&(ee=Y[++Qe]);++Qe<St;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function WE(Y,oe,ee,xe){var Qe=Y==null?0:Y.length;for(xe&&Qe&&(ee=Y[--Qe]);Qe--;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function gd(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(oe(Y[ee],ee,Y))return!0;return!1}var VE=pd("length");function HE(Y){return Y.split("")}function $E(Y){return Y.match(dt)||[]}function gm(Y,oe,ee){var xe;return ee(Y,function(Qe,St,bn){if(oe(Qe,St,bn))return xe=St,!1}),xe}function Ml(Y,oe,ee,xe){for(var Qe=Y.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(oe(Y[St],St,Y))return St;return-1}function fs(Y,oe,ee){return oe===oe?eL(Y,oe,ee):Ml(Y,pm,ee)}function zE(Y,oe,ee,xe){for(var Qe=ee-1,St=Y.length;++Qe<St;)if(xe(Y[Qe],oe))return Qe;return-1}function pm(Y){return Y!==Y}function mm(Y,oe){var ee=Y==null?0:Y.length;return ee?_d(Y,oe)/ee:k}function pd(Y){return function(oe){return oe==null?t:oe[Y]}}function md(Y){return function(oe){return Y==null?t:Y[oe]}}function _m(Y,oe,ee,xe,Qe){return Qe(Y,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UE(Y,oe){var ee=Y.length;for(Y.sort(oe);ee--;)Y[ee]=Y[ee].value;return Y}function _d(Y,oe){for(var ee,xe=-1,Qe=Y.length;++xe<Qe;){var St=oe(Y[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(Y,oe){for(var ee=-1,xe=Array(Y);++ee<Y;)xe[ee]=oe(ee);return xe}function jE(Y,oe){return Jt(oe,function(ee){return[ee,Y[ee]]})}function vm(Y){return Y&&Y.slice(0,wm(Y)+1).replace(pe,"")}function Si(Y){return function(oe){return Y(oe)}}function bd(Y,oe){return Jt(oe,function(ee){return Y[ee]})}function ca(Y,oe){return Y.has(oe)}function bm(Y,oe){for(var ee=-1,xe=Y.length;++ee<xe&&fs(oe,Y[ee],0)>-1;);return ee}function Cm(Y,oe){for(var ee=Y.length;ee--&&fs(oe,Y[ee],0)>-1;);return ee}function KE(Y,oe){for(var ee=Y.length,xe=0;ee--;)Y[ee]===oe&&++xe;return xe}var GE=md(kE),qE=md(NE);function YE(Y){return"\\"+OE[Y]}function ZE(Y,oe){return Y==null?t:Y[oe]}function gs(Y){return xE.test(Y)}function XE(Y){return DE.test(Y)}function QE(Y){for(var oe,ee=[];!(oe=Y.next()).done;)ee.push(oe.value);return ee}function Cd(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe,Qe){ee[++oe]=[Qe,xe]}),ee}function ym(Y,oe){return function(ee){return Y(oe(ee))}}function to(Y,oe){for(var ee=-1,xe=Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];(bn===oe||bn===h)&&(Y[ee]=h,St[Qe++]=ee)}return St}function Pl(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=xe}),ee}function JE(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eL(Y,oe,ee){for(var xe=ee-1,Qe=Y.length;++xe<Qe;)if(Y[xe]===oe)return xe;return-1}function tL(Y,oe,ee){for(var xe=ee+1;xe--;)if(Y[xe]===oe)return xe;return xe}function ps(Y){return gs(Y)?iL(Y):VE(Y)}function Zi(Y){return gs(Y)?rL(Y):HE(Y)}function wm(Y){for(var oe=Y.length;oe--&&J.test(Y.charAt(oe)););return oe}var nL=md(AE);function iL(Y){for(var oe=ud.lastIndex=0;ud.test(Y);)++oe;return oe}function rL(Y){return Y.match(ud)||[]}function oL(Y){return Y.match(LE)||[]}var sL=function Y(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,TE));var ee=oe.Array,xe=oe.Date,Qe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aL=oe.String,Ri=oe.TypeError,Fl=ee.prototype,lL=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lL.toString,Nt=_s.hasOwnProperty,uL=0,Sm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cL=Wl.call(Wt),dL=xn._,hL=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=sm?oe.Buffer:t,no=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),Lm=Wt.create,xm=_s.propertyIsEnumerable,Ul=Fl.splice,Dm=no?no.isConcatSpreadable:t,da=no?no.iterator:t,No=no?no.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fL=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gL=xe&&xe.now!==xn.Date.now&&xe.now,pL=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,wd=Wt.getOwnPropertySymbols,mL=Hl?Hl.isBuffer:t,Tm=oe.isFinite,_L=Fl.join,vL=ym(Wt.keys,Wt),Cn=bn.max,An=bn.min,bL=xe.now,CL=oe.parseInt,Im=bn.random,yL=Fl.reverse,Sd=Po(oe,"DataView"),ha=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),fa=Po(oe,"WeakMap"),ga=Po(Wt,"create"),ql=fa&&new fa,bs={},wL=Fo(Sd),SL=Fo(ha),EL=Fo(Ed),LL=Fo(vs),xL=Fo(fa),Yl=no?no.prototype:t,pa=Yl?Yl.valueOf:t,km=Yl?Yl.toString:t;function x(l){if(sn(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Mi)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Mi(l)}var Cs=function(){function l(){}return function(c){if(!tn(c))return{};if(Lm)return Lm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Mi(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Mi.prototype=Cs(Zl.prototype),Mi.prototype.constructor=Mi;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function DL(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function TL(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IL(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,y=g?l.length:0,D=Hx(0,y,this.__views__),P=D.start,V=D.end,Z=V-P,ue=_?V:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&y==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function kL(){this.__data__=ga?ga(null):{},this.size=0}function NL(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AL(l){var c=this.__data__;if(ga){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OL(l){var c=this.__data__;return ga?c[l]!==t:Nt.call(c,l)}function RL(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=ga&&c===t?u:c,this}Ao.prototype.clear=kL,Ao.prototype.delete=NL,Ao.prototype.get=AL,Ao.prototype.has=OL,Ao.prototype.set=RL;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ML(){this.__data__=[],this.size=0}function PL(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FL(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BL(l){return Xl(this.__data__,l)>-1}function WL(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ML,kr.prototype.delete=PL,kr.prototype.get=FL,kr.prototype.has=BL,kr.prototype.set=WL;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VL(){this.size=0,this.__data__={hash:new Ao,map:new(ha||kr),string:new Ao}}function HL(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $L(l){return uu(this,l).get(l)}function zL(l){return uu(this,l).has(l)}function UL(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VL,Nr.prototype.delete=HL,Nr.prototype.get=$L,Nr.prototype.has=zL,Nr.prototype.set=UL;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jL(l){return this.__data__.set(l,u),this}function KL(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jL,Oo.prototype.has=KL;function Xi(l){var c=this.__data__=new kr(l);this.size=c.size}function GL(){this.__data__=new kr,this.size=0}function qL(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YL(l){return this.__data__.get(l)}function ZL(l){return this.__data__.has(l)}function XL(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!ha||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Xi.prototype.clear=GL,Xi.prototype.delete=qL,Xi.prototype.get=YL,Xi.prototype.has=ZL,Xi.prototype.set=XL;function Nm(l,c){var g=tt(l),_=!g&&Bo(l),y=!g&&!_&&ao(l),D=!g&&!_&&!y&&Es(l),P=g||_||y||D,V=P?vd(l.length,aL):[],Z=V.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||y&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Mr(ue,Z)))&&V.push(ue);return V}function Am(l){var c=l.length;return c?l[Md(0,c-1)]:t}function QL(l,c){return cu(ai(l),Ro(c,0,l.length))}function JL(l){return cu(ai(l))}function Ld(l,c,g){(g!==t&&!Qi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function ma(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Qi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Qi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return io(l,function(y,D,P){c(_,y,g(y),P)}),_}function Om(l,c){return l&&vr(c,En(c),l)}function tx(l,c){return l&&vr(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,y=ee(_),D=l==null;++g<_;)y[g]=D?t:sh(l,c[g]);return y}function Ro(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,y,D){var P,V=c&f,Z=c&p,ue=c&m;if(g&&(P=y?g(l,_,y,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=zx(l),!V)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==on;if(ao(l))return i_(l,V);if(ge==Wn||ge==De||Se&&!y){if(P=Z||Se?{}:w_(l),!V)return Z?Ax(l,tx(P,l)):Nx(l,Om(P,l))}else{if(!$t[ge])return y?l:{};P=Ux(l,ge,V)}}D||(D=new Xi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:En,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),ma(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function nx(l){var c=En(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var y=g[_],D=c[y],P=l[y];if(P===t&&!(y in l)||!D(P))return!1}return!0}function Mm(l,c,g){if(typeof l!="function")throw new Ri(s);return Sa(function(){l.apply(t,g)},c)}function _a(l,c,g,_){var y=-1,D=Rl,P=!0,V=l.length,Z=[],ue=c.length;if(!V)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ca,P=!1,c=new Oo(c));e:for(;++y<V;){var ce=l[y],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var io=l_(_r),Pm=l_(Td,!0);function ix(l,c){var g=!0;return io(l,function(_,y,D){return g=!!c(_,y,D),g}),g}function Ql(l,c,g){for(var _=-1,y=l.length;++_<y;){var D=l[_],P=c(D);if(P!=null&&(V===t?P===P&&!Li(P):g(P,V)))var V=P,Z=D}return Z}function rx(l,c,g,_){var y=l.length;for(g=ot(g),g<0&&(g=-g>y?0:y+g),_=_===t||_>y?y:ot(_),_<0&&(_+=y),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return io(l,function(_,y,D){c(_,y,D)&&g.push(_)}),g}function Dn(l,c,g,_,y){var D=-1,P=l.length;for(g||(g=Kx),y||(y=[]);++D<P;){var V=l[D];c>0&&g(V)?c>1?Dn(V,c-1,g,_,y):eo(y,V):_||(y[y.length]=V)}return y}var Dd=u_(),Bm=u_(!0);function _r(l,c){return l&&Dd(l,c,En)}function Td(l,c){return l&&Bm(l,c,En)}function Jl(l,c){return Jr(c,function(g){return Pr(l[g])})}function Mo(l,c){c=oo(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[br(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:eo(_,g(l))}function qn(l){return l==null?l===t?Ie:Sn:No&&No in Wt(l)?Vx(l):Jx(l)}function Id(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Rl,y=l[0].length,D=l.length,P=D,V=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),V[P]=!g&&(c||y>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=V[0];e:for(;++ge<y&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ca(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=V[P];if(!(lt?ca(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function lx(l,c,g,_){return _r(l,function(y,D,P){c(_,g(y),D,P)}),_}function va(l,c,g){c=oo(c,l),l=x_(l,c);var _=l==null?l:l[br(Bi(c))];return _==null?t:wi(_,l,g)}function Vm(l){return sn(l)&&qn(l)==De}function ux(l){return sn(l)&&qn(l)==at}function cx(l){return sn(l)&&qn(l)==Re}function ba(l,c,g,_,y){return l===c?!0:l==null||c==null||!sn(l)&&!sn(c)?l!==l&&c!==c:dx(l,c,g,_,ba,y)}function dx(l,c,g,_,y,D){var P=tt(l),V=tt(c),Z=P?Ve:On(l),ue=V?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&ao(l)){if(!ao(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Xi),P||Es(l)?b_(l,c,g,_,y,D):Bx(l,c,Z,g,_,y,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Xi),y(lt,Ue,g,_,D)}}return Se?(D||(D=new Xi),Wx(l,c,g,_,y,D)):!1}function hx(l){return sn(l)&&On(l)==Kt}function Nd(l,c,g,_){var y=g.length,D=y,P=!_;if(l==null)return!D;for(l=Wt(l);y--;){var V=g[y];if(P&&V[2]?V[1]!==l[V[0]]:!(V[0]in l))return!1}for(;++y<D;){V=g[y];var Z=V[0],ue=l[Z],ce=V[1];if(P&&V[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Xi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?ba(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?hL:le;return c.test(Fo(l))}function fx(l){return sn(l)&&qn(l)==jn}function gx(l){return sn(l)&&On(l)==Pt}function px(l){return sn(l)&&mu(l.length)&&!!jt[qn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return vL(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!tn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return io(l,function(y,D,P){_[++g]=c(y,D,P)}),_}function Um(l){var c=qd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?E_(br(l),c):function(g){var _=sh(g,l);return _===t&&_===c?ah(g,l):ba(c,_,v|b)}}function eu(l,c,g,_,y){l!==c&&Dd(c,function(D,P){if(y||(y=new Xi),tn(D))_x(l,c,P,g,eu,_,y);else{var V=_?_(Qd(l,P),D,P+"",l,c,y):t;V===t&&(V=D),Ld(l,P,V)}},ui)}function _x(l,c,g,_,y,D,P){var V=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ld(l,g,ue);return}var ce=D?D(V,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&ao(Z),ze=!Se&&!Ne&&Es(Z);ce=Z,Se||Ne||ze?tt(V)?ce=V:hn(V)?ce=ai(V):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Ea(Z)||Bo(Z)?(ce=V,Bo(V)?ce=ev(V):(!tn(V)||Pr(V))&&(ce=w_(Z))):ge=!1}ge&&(P.set(Z,ce),y(ce,Z,_,D,P),P.delete(Z)),Ld(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Mr(c,g)?l[c]:t}function Gm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Mo(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var y=zm(l,function(D,P,V){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return UE(y,function(D,P){return kx(D,P,g)})}function vx(l,c){return qm(l,c,function(g,_){return ah(l,_)})}function qm(l,c,g){for(var _=-1,y=c.length,D={};++_<y;){var P=c[_],V=Mo(l,P);g(V,P)&&Ca(D,oo(P,l),V)}return D}function bx(l){return function(c){return Mo(c,l)}}function Rd(l,c,g,_){var y=_?zE:fs,D=-1,P=c.length,V=l;for(l===c&&(c=ai(c)),g&&(V=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=y(V,ce,Z,_))>-1;)V!==l&&Ul.call(V,Z,1),Ul.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var y=c[g];if(g==_||y!==D){var D=y;Mr(y)?Ul.call(l,y,1):Bd(l,y)}}return l}function Md(l,c){return l+Gl(Im()*(c-l+1))}function Cx(l,c,g,_){for(var y=-1,D=Cn(Kl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++y]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>G)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(L_(l,c,ci),l+"")}function yx(l){return Am(Ls(l))}function wx(l,c){var g=Ls(l);return cu(g,Ro(c,0,g.length))}function Ca(l,c,g,_){if(!tn(l))return l;c=oo(c,l);for(var y=-1,D=c.length,P=D-1,V=l;V!=null&&++y<D;){var Z=br(c[y]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(y!=P){var ce=V[Z];ue=_?_(ce,Z,V):t,ue===t&&(ue=tn(ce)?ce:Mr(c[y+1])?[]:{})}ma(V,Z,ue),V=V[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Ex(l){return cu(Ls(l))}function Fi(l,c,g){var _=-1,y=l.length;c<0&&(c=-c>y?0:y+c),g=g>y?y:g,g<0&&(g+=y),y=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(y);++_<y;)D[_]=l[_+c];return D}function Lx(l,c){var g;return io(l,function(_,y,D){return g=c(_,y,D),!g}),!!g}function tu(l,c,g){var _=0,y=l==null?_:l.length;if(typeof c=="number"&&c===c&&y<=ne){for(;_<y;){var D=_+y>>>1,P=l[D];P!==null&&!Li(P)&&(g?P<=c:P<c)?_=D+1:y=D}return y}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var y=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,V=c===null,Z=Li(c),ue=c===t;y<D;){var ce=Gl((y+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Li(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):V?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?y=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,y=0,D=[];++g<_;){var P=l[g],V=c?c(P):P;if(!g||!Qi(V,Z)){var Z=V;D[y++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Li(l)?k:+l}function Ei(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Ei)+"";if(Li(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function ro(l,c,g){var _=-1,y=Rl,D=l.length,P=!0,V=[],Z=V;if(g)P=!1,y=hd;else if(D>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,y=ca,Z=new Oo}else Z=c?[]:V;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),V.push(ce)}else y(Z,ge,g)||(Z!==V&&Z.push(ge),V.push(ce))}return V}function Bd(l,c){return c=oo(c,l),l=x_(l,c),l==null||delete l[br(Bi(c))]}function Jm(l,c,g,_){return Ca(l,c,g(Mo(l,c)),_)}function nu(l,c,g,_){for(var y=l.length,D=_?y:-1;(_?D--:++D<y)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:y):Fi(l,_?D+1:0,_?y:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,y){return y.func.apply(y.thisArg,eo([_],y.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?ro(l[0]):[];for(var y=-1,D=ee(_);++y<_;)for(var P=l[y],V=-1;++V<_;)V!=y&&(D[y]=_a(D[y]||P,l[V],c,g));return ro(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,y=l.length,D=c.length,P={};++_<y;){var V=_<D?c[_]:t;g(P,l[_],V)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function oo(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var xx=ct;function so(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=fL||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Tx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return pa?Wt(pa.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function o_(l,c){if(l!==c){var g=l!==t,_=l===null,y=l===l,D=Li(l),P=c!==t,V=c===null,Z=c===c,ue=Li(c);if(!V&&!ue&&!D&&l>c||D&&P&&Z&&!V&&!ue||_&&P&&Z||!g&&Z||!y)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&y&&!_&&!D||V&&g&&y||!P&&y||!Z)return-1}return 0}function kx(l,c,g){for(var _=-1,y=l.criteria,D=c.criteria,P=y.length,V=g.length;++_<P;){var Z=o_(y[_],D[_]);if(Z){if(_>=V)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function s_(l,c,g,_){for(var y=-1,D=l.length,P=g.length,V=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++V<Z;)ce[V]=c[V];for(;++y<P;)(ge||y<D)&&(ce[g[y]]=l[y]);for(;ue--;)ce[V++]=l[y++];return ce}function a_(l,c,g,_){for(var y=-1,D=l.length,P=-1,V=g.length,Z=-1,ue=c.length,ce=Cn(D-V,0),ge=ee(ce+ue),Se=!_;++y<ce;)ge[y]=l[y];for(var Ne=y;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<V;)(Se||y<D)&&(ge[Ne+g[P]]=l[y++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function vr(l,c,g,_){var y=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var V=c[D],Z=_?_(g[V],l[V],V,g,l):t;Z===t&&(Z=l[V]),y?Ar(g,V,Z):ma(g,V,Z)}return g}function Nx(l,c){return vr(l,Yd(l),c)}function Ax(l,c){return vr(l,C_(l),c)}function iu(l,c){return function(g,_){var y=tt(g)?FE:ex,D=c?c():{};return y(g,l,We(_,2),D)}}function ys(l){return ct(function(c,g){var _=-1,y=g.length,D=y>1?g[y-1]:t,P=y>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(y--,D):t,P&&Yn(g[0],g[1],P)&&(D=y<3?t:D,y=1),c=Wt(c);++_<y;){var V=g[_];V&&l(c,V,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var y=g.length,D=c?y:-1,P=Wt(g);(c?D--:++D<y)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var y=-1,D=Wt(c),P=_(c),V=P.length;V--;){var Z=P[l?V:++y];if(g(D[Z],Z,D)===!1)break}return c}}function Ox(l,c,g){var _=c&E,y=ya(l);function D(){var P=this&&this!==xn&&this instanceof D?y:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=gs(c)?Zi(c):t,_=g?g[0]:c.charAt(0),y=g?so(g,1).join(""):c.slice(1);return _[l]()+y}}function ws(l){return function(c){return fd(lv(av(c).replace(SE,"")),l,"")}}function ya(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Rx(l,c,g){var _=ya(l);function y(){for(var D=arguments.length,P=ee(D),V=D,Z=Ss(y);V--;)P[V]=arguments[V];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:to(P,Z);if(D-=ue.length,D<g)return p_(l,c,ru,y.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof y?_:l;return wi(ce,this,P)}return y}function d_(l){return function(c,g,_){var y=Wt(c);if(!li(c)){var D=We(g,3);c=En(c),g=function(V){return D(y[V],V,y)}}var P=l(c,g,_);return P>-1?y[D?c[P]:P]:t}}function h_(l){return Rr(function(c){var g=c.length,_=g,y=Mi.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Ri(s);if(y&&!P&&lu(D)=="wrapper")var P=new Mi([],!0)}for(_=P?_:g;++_<g;){D=c[_];var V=lu(D),Z=V=="wrapper"?Gd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|L|N|R)&&!Z[4].length&&Z[9]==1?P=P[lu(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[V]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,y,D,P,V,Z,ue){var ce=c&M,ge=c&E,Se=c&S,Ne=c&(L|A),ze=c&q,lt=Se?t:ya(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=Ss(Ue),Di=KE(vt,Zn);if(_&&(vt=s_(vt,_,y,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=to(vt,Zn);return p_(l,c,ru,Ue.placeholder,g,vt,fn,V,Z,ue-ht)}var Ji=ge?g:this,Br=Se?Ji[l]:l;return ht=vt.length,V?vt=eD(vt,V):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||ya(Br)),Br.apply(Ji,vt)}return Ue}function f_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var y;if(g===t&&_===t)return c;if(g!==t&&(y=g),_!==t){if(y===t)return _;typeof g=="string"||typeof _=="string"?(g=Ei(g),_=Ei(_)):(g=Qm(g),_=Qm(_)),y=l(g,_)}return y}}function zd(l){return Rr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(y){return wi(y,_,g)})})})}function su(l,c){c=c===t?" ":Ei(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,Kl(l/ps(c)));return gs(c)?so(Zi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var y=c&E,D=ya(l);function P(){for(var V=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++V];return wi(Se,y?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,y,D,P,V,Z,ue){var ce=c&L,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:H,c&=~(ce?H:N),c&w||(c&=~(E|S));var lt=[l,c,y,Ne,ge,ze,Se,V,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,T_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(ot(_),292),_&&Tm(g)){var y=(xt(g)+"e").split("e"),D=c(y[0]+"e"+(+y[1]+_));return y=(xt(D)+"e").split("e"),+(y[0]+"e"+(+y[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==U?function(l){return new vs(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?JE(c):jE(c,l(c))}}function Or(l,c,g,_,y,D,P,V){var Z=c&S;if(!Z&&typeof l!="function")throw new Ri(s);var ue=_?_.length:0;if(ue||(c&=~(N|H),_=y=t),P=P===t?P:Cn(ot(P),0),V=V===t?V:ot(V),ue-=y?y.length:0,c&H){var ce=_,ge=y;_=y=t}var Se=Z?t:Gd(l),Ne=[l,c,g,_,y,ce,ge,D,P,V];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],y=Ne[4],V=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!V&&c&(L|A)&&(c&=~(L|A)),!c||c==E)var ze=Ox(l,c,g);else c==L||c==A?ze=Rx(l,c,V):(c==N||c==(E|N))&&!y.length?ze=Mx(l,c,g,_):ze=ru.apply(t,Ne);var lt=Se?Zm:D_;return T_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Qi(l,_s[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,y,D){return tn(l)&&tn(c)&&(D.set(c,l),eu(l,c,t,v_,D),D.delete(c)),l}function Fx(l){return Ea(l)?t:l}function b_(l,c,g,_,y,D){var P=g&v,V=l.length,Z=c.length;if(V!=Z&&!(P&&Z>V))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(D.set(l,c),D.set(c,l);++ge<V;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ca(Ne,vt)&&(ze===ht||y(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||y(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Bx(l,c,g,_,y,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new $l(l),new $l(c)));case At:case Re:case dn:return Qi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var V=Cd;case Pt:var Z=_&v;if(V||(V=Pl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(V(l),V(c),_,y,D,P);return P.delete(l),ce;case Ci:if(pa)return pa.call(l)==pa.call(c)}return!1}function Wx(l,c,g,_,y,D){var P=g&v,V=jd(l),Z=V.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=V[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=V[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||y(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Rr(l){return Jd(L_(l,t,R_),l+"")}function jd(l){return Wm(l,En,Yd)}function Kd(l){return Wm(l,ui,C_)}var Gd=ql?function(l){return ql.get(l)}:hh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var y=g[_],D=y.func;if(D==null||D==l)return y.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function qd(l){for(var c=En(l),g=c.length;g--;){var _=c[g],y=l[_];c[g]=[_,y,S_(y)]}return c}function Po(l,c){var g=ZE(l,c);return Hm(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var y=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),y}var Yd=wd?function(l){return l==null?[]:(l=Wt(l),Jr(wd(l),function(c){return xm.call(l,c)}))}:fh,C_=wd?function(l){for(var c=[];l;)eo(c,Yd(l)),l=zl(l);return c}:fh,On=qn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||ha&&On(new ha)!=Kt||Ed&&On(Ed.resolve())!=Jn||vs&&On(new vs)!=Pt||fa&&On(new fa)!=Fe)&&(On=function(l){var c=qn(l),g=c==Wn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case wL:return bt;case SL:return Kt;case EL:return Jn;case LL:return Pt;case xL:return Fe}return c});function Hx(l,c,g){for(var _=-1,y=g.length;++_<y;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match($e);return c?c[1].split(Me):[]}function y_(l,c,g){c=oo(c,l);for(var _=-1,y=c.length,D=!1;++_<y;){var P=br(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=y?D:(y=l==null?0:l.length,!!y&&mu(y)&&Mr(P,y)&&(tt(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function w_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Re:return new _(+l);case bt:return Dx(l,g);case yi:case Vt:case It:case Gt:case qt:case Bt:case gr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Tx(l);case Pt:return new _;case Ci:return Ix(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return tt(l)||Bo(l)||!!(Dm&&l&&l[Dm])}function Mr(l,c){var g=typeof l;return c=c??G,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Mr(c,g.length):_=="string"&&c in g)?Qi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Li(l)?!0:Le.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=Gd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Yx=Bl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function S_(l){return l===l&&!tn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],y=g|_,D=y<(E|S|M),P=_==M&&g==L||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==L;if(!(D||P))return l;_&E&&(l[2]=c[2],y|=g&E?0:w);var V=c[3];if(V){var Z=l[3];l[3]=Z?s_(Z,V,c[4]):V,l[4]=Z?to(l[3],h):c[4]}return V=c[5],V&&(Z=l[5],l[5]=Z?a_(Z,V,c[6]):V,l[6]=Z?to(l[5],h):c[6]),V=c[7],V&&(l[7]=V),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=y,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function L_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,y=-1,D=Cn(_.length-c,0),P=ee(D);++y<D;)P[y]=_[c+y];y=-1;for(var V=ee(c+1);++y<c;)V[y]=_[y];return V[c]=g(P),wi(l,this,V)}}function x_(l,c){return c.length<2?l:Mo(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=An(c.length,g),y=ai(l);_--;){var D=c[_];l[_]=Mr(D,g)?y[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=I_(Zm),Sa=pL||function(l,c){return xn.setTimeout(l,c)},Jd=I_(Sx);function T_(l,c,g){var _=c+"";return Jd(l,jx(_,tD($x(_),g)))}function I_(l){var c=0,g=0;return function(){var _=bL(),y=O-(_-g);if(g=_,y>0){if(++c>=I)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,y=_-1;for(c=c===t?_:c;++g<c;){var D=Md(g,y),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,y,D){c.push(y?D.replace(T,"$1"):_||g)}),c});function br(l){if(typeof l=="string"||Li(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Rl(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Mi(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(ot(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var y=0,D=0,P=ee(Kl(_/c));y<_;)P[D++]=Fi(l,y,y+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,y=[];++c<g;){var D=l[c];D&&(y[_++]=D)}return y}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return eo(tt(g)?ai(g):[g],Dn(c,1))}var oD=ct(function(l,c){return hn(l)?_a(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var y=l==null?0:l.length;return y?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=y),rx(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),Ml(l,We(c,3),y)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_-1;return g!==t&&(y=ot(g),y=g<0?Cn(_+y,0):An(y,_-1)),Ml(l,We(c,3),y,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:ot(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var y=l[c];_[y[0]]=y[1]}return _}function M_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),fs(l,c,y)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),CD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function yD(l,c){return l==null?"":_L.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_;return g!==t&&(y=ot(g),y=y<0?Cn(_+y,0):An(y,_-1)),c===c?tL(l,c,y):Ml(l,pm,y,!0)}function SD(l,c){return l&&l.length?Km(l,ot(c)):t}var ED=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Rr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(y){return Mr(y,g)?+y:y}).sort(o_)),_});function TD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,y=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),y.push(_))}return Ym(l,y),g}function eh(l){return l==null?l:yL.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:ot(c),g=g===t?_:ot(g)),Fi(l,c,g)):[]}function kD(l,c){return tu(l,c)}function ND(l,c,g){return Fd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Qi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function RD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Qi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Xm(l):[]}function FD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:ot(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ct(function(l){return ro(Dn(l,1,hn,!0))}),UD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),ro(Dn(l,1,hn,!0),We(c,2))}),jD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,ro(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?ro(l):[]}function GD(l,c){return l&&l.length?ro(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?ro(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return wi(c,t,_)})}var YD=ct(function(l,c){return hn(l)?_a(l,c):[]}),ZD=ct(function(l){return Wd(Jr(l,hn))}),XD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),QD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),JD=ct(th);function eT(l,c){return t_(l||[],c||[],ma)}function tT(l,c){return t_(l||[],c||[],Ca)}var nT=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function iT(l,c){return c(l),l}function du(l,c){return c(l)}var rT=Rr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,y=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Mr(g)?this.thru(y):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[y],thisArg:t}),new Mi(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function oT(){return B_(this)}function sT(){return new Mi(this.value(),this.__chain__)}function aT(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lT(){return this}function uT(l){for(var c,g=this;g instanceof Zl;){var _=N_(g);_.__index__=0,_.__values__=t,c?y.__wrapped__=_:c=_;var y=_;g=g.__wrapped__}return y.__wrapped__=l,c}function cT(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[eh],thisArg:t}),new Mi(c,this.__chain__)}return this.thru(eh)}function dT(){return e_(this.__wrapped__,this.__actions__)}var hT=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fT(l,c,g){var _=tt(l)?fm:ix;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function gT(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var pT=d_(A_),mT=d_(O_);function _T(l,c){return Dn(hu(l,c),1)}function vT(l,c){return Dn(hu(l,c),U)}function bT(l,c,g){return g=g===t?1:ot(g),Dn(hu(l,c),g)}function W_(l,c){var g=tt(l)?Oi:io;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?BE:Pm;return g(l,We(c,3))}var CT=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function yT(l,c,g,_){l=li(l)?l:Ls(l),g=g&&!_?ot(g):0;var y=l.length;return g<0&&(g=Cn(y+g,0)),_u(l)?g<=y&&l.indexOf(c,g)>-1:!!y&&fs(l,c,g)>-1}var wT=ct(function(l,c,g){var _=-1,y=typeof c=="function",D=li(l)?ee(l.length):[];return io(l,function(P){D[++_]=y?wi(c,P,g):va(P,c,g)}),D}),ST=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function ET(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),Gm(l,c,g))}var LT=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xT(l,c,g){var _=tt(l)?fd:_m,y=arguments.length<3;return _(l,We(c,4),g,y,io)}function DT(l,c,g){var _=tt(l)?WE:_m,y=arguments.length<3;return _(l,We(c,4),g,y,Pm)}function TT(l,c){var g=tt(l)?Jr:Fm;return g(l,pu(We(c,3)))}function IT(l){var c=tt(l)?Am:yx;return c(l)}function kT(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=ot(c);var _=tt(l)?QL:wx;return _(l,c)}function NT(l){var c=tt(l)?JL:Ex;return c(l)}function AT(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function OT(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var RT=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),Gm(l,Dn(c,1),[])}),fu=gL||function(){return xn.Date.now()};function MT(l,c){if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=E;if(g.length){var y=to(g,Ss(nh));_|=N}return Or(l,_,c,g,y)}),z_=ct(function(l,c,g){var _=E|S;if(g.length){var y=to(g,Ss(z_));_|=N}return Or(c,_,l,g,y)});function U_(l,c,g){c=g?t:c;var _=Or(l,L,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,y,D,P,V,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Ri(s);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Ji=_,Br=y;return _=y=t,ue=fn,P=l.apply(Br,Ji),P}function ze(fn){return ue=fn,V=Sa(ht,c),ce?Ne(fn):P}function lt(fn){var Ji=fn-Z,Br=fn-ue,dv=c-Ji;return ge?An(dv,D-Br):dv}function Ue(fn){var Ji=fn-Z,Br=fn-ue;return Z===t||Ji>=c||Ji<0||ge&&Br>=D}function ht(){var fn=fu();if(Ue(fn))return vt(fn);V=Sa(ht,lt(fn))}function vt(fn){return V=t,Se&&_?Ne(fn):(_=y=t,P)}function xi(){V!==t&&n_(V),ue=0,_=Z=y=V=t}function Zn(){return V===t?P:vt(fu())}function Di(){var fn=fu(),Ji=Ue(fn);if(_=arguments,y=this,Z=fn,Ji){if(V===t)return ze(Z);if(ge)return n_(V),V=Sa(ht,c),Ne(Z)}return V===t&&(V=Sa(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var PT=ct(function(l,c){return Mm(l,1,c)}),FT=ct(function(l,c,g){return Mm(l,Wi(c)||0,g)});function BT(l){return Or(l,q)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Ri(s);var g=function(){var _=arguments,y=c?c.apply(this,_):_[0],D=g.cache;if(D.has(y))return D.get(y);var P=l.apply(this,_);return g.cache=D.set(y,P)||D,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Ri(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WT(l){return $_(2,l)}var VT=xx(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var y=-1,D=An(_.length,g);++y<D;)_[y]=c[y].call(this,_[y]);return wi(l,this,_)})}),ih=ct(function(l,c){var g=to(c,Ss(ih));return Or(l,N,t,c,g)}),G_=ct(function(l,c){var g=to(c,Ss(G_));return Or(l,H,t,c,g)}),HT=Rr(function(l,c){return Or(l,R,t,t,t,c)});function $T(l,c){if(typeof l!="function")throw new Ri(s);return c=c===t?c:ot(c),ct(l,c)}function zT(l,c){if(typeof l!="function")throw new Ri(s);return c=c==null?0:Cn(ot(c),0),ct(function(g){var _=g[c],y=so(g,0,c);return _&&eo(y,_),wi(l,this,y)})}function UT(l,c,g){var _=!0,y=!0;if(typeof l!="function")throw new Ri(s);return tn(g)&&(_="leading"in g?!!g.leading:_,y="trailing"in g?!!g.trailing:y),K_(l,c,{leading:_,maxWait:c,trailing:y})}function jT(l){return H_(l,1)}function KT(l,c){return ih(Hd(c),l)}function GT(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qT(l){return Pi(l,m)}function YT(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZT(l){return Pi(l,f|m)}function XT(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QT(l,c){return c==null||Rm(l,c,En(c))}function Qi(l,c){return l===c||l!==l&&c!==c}var JT=au(Id),eI=au(function(l,c){return l>=c}),Bo=Vm(function(){return arguments}())?Vm:function(l){return sn(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,tI=am?Si(am):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return sn(l)&&li(l)}function nI(l){return l===!0||l===!1||sn(l)&&qn(l)==At}var ao=mL||gh,iI=lm?Si(lm):cx;function rI(l){return sn(l)&&l.nodeType===1&&!Ea(l)}function oI(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||ao(l)||Es(l)||Bo(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sI(l,c){return ba(l,c)}function aI(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?ba(l,c,t,g):!!_}function rh(l){if(!sn(l))return!1;var c=qn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Ea(l)}function lI(l){return typeof l=="number"&&Tm(l)}function Pr(l){if(!tn(l))return!1;var c=qn(l);return c==Xe||c==on||c==rt||c==oi}function q_(l){return typeof l=="number"&&l==ot(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=G}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function sn(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):hx;function uI(l,c){return l===c||Nd(l,c,qd(c))}function cI(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,qd(c),g)}function dI(l){return Z_(l)&&l!=+l}function hI(l){if(Yx(l))throw new Qe(o);return Hm(l)}function fI(l){return l===null}function gI(l){return l==null}function Z_(l){return typeof l=="number"||sn(l)&&qn(l)==dn}function Ea(l){if(!sn(l)||qn(l)!=Wn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cL}var oh=cm?Si(cm):fx;function pI(l){return q_(l)&&l>=-G&&l<=G}var X_=dm?Si(dm):gx;function _u(l){return typeof l=="string"||!tt(l)&&sn(l)&&qn(l)==pn}function Li(l){return typeof l=="symbol"||sn(l)&&qn(l)==Ci}var Es=hm?Si(hm):px;function mI(l){return l===t}function _I(l){return sn(l)&&On(l)==Fe}function vI(l){return sn(l)&&qn(l)==pt}var bI=au(Od),CI=au(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return _u(l)?Zi(l):ai(l);if(da&&l[da])return QE(l[da]());var c=On(l),g=c==Kt?Cd:c==Pt?Pl:Ls;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function ot(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Ro(ot(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Li(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Te.test(l)?ME(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return vr(l,ui(l))}function yI(l){return l?Ro(ot(l),-G,G):l===0?l:0}function xt(l){return l==null?"":Ei(l)}var wI=ys(function(l,c){if(wa(c)||li(c)){vr(c,En(c),l);return}for(var g in c)Nt.call(c,g)&&ma(l,g,c[g])}),tv=ys(function(l,c){vr(c,ui(c),l)}),vu=ys(function(l,c,g,_){vr(c,ui(c),l,_)}),SI=ys(function(l,c,g,_){vr(c,En(c),l,_)}),EI=Rr(xd);function LI(l,c){var g=Cs(l);return c==null?g:Om(g,c)}var xI=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,y=_>2?c[2]:t;for(y&&Yn(c[0],c[1],y)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),V=-1,Z=P.length;++V<Z;){var ue=P[V],ce=l[ue];(ce===t||Qi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),DI=ct(function(l){return l.push(t,v_),wi(nv,t,l)});function TI(l,c){return gm(l,We(c,3),_r)}function II(l,c){return gm(l,We(c,3),Td)}function kI(l,c){return l==null?l:Dd(l,We(c,3),ui)}function NI(l,c){return l==null?l:Bm(l,We(c,3),ui)}function AI(l,c){return l&&_r(l,We(c,3))}function OI(l,c){return l&&Td(l,We(c,3))}function RI(l){return l==null?[]:Jl(l,En(l))}function MI(l){return l==null?[]:Jl(l,ui(l))}function sh(l,c,g){var _=l==null?t:Mo(l,c);return _===t?g:_}function PI(l,c){return l!=null&&y_(l,c,ox)}function ah(l,c){return l!=null&&y_(l,c,sx)}var FI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},uh(ci)),BI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),WI=ct(va);function En(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):mx(l)}function VI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,c(_,y,D),_)}),g}function HI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,y,c(_,y,D))}),g}var $I=ys(function(l,c,g){eu(l,c,g)}),nv=ys(function(l,c,g,_){eu(l,c,g,_)}),zI=Rr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=oo(D,l),_||(_=D.length>1),D}),vr(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var y=c.length;y--;)Bd(g,c[y]);return g});function UI(l,c){return iv(l,pu(We(c)))}var jI=Rr(function(l,c){return l==null?{}:vx(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),qm(l,g,function(_,y){return c(_,y[0])})}function KI(l,c,g){c=oo(c,l);var _=-1,y=c.length;for(y||(y=1,l=t);++_<y;){var D=l==null?t:l[br(c[_])];D===t&&(_=y,D=g),l=Pr(D)?D.call(l):D}return l}function GI(l,c,g){return l==null?l:Ca(l,c,g)}function qI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Ca(l,c,g,_)}var rv=m_(En),ov=m_(ui);function YI(l,c,g){var _=tt(l),y=_||ao(l)||Es(l);if(c=We(c,4),g==null){var D=l&&l.constructor;y?g=_?new D:[]:tn(l)?g=Pr(D)?Cs(zl(l)):{}:g={}}return(y?Oi:_r)(l,function(P,V,Z){return c(g,P,V,Z)}),g}function ZI(l,c){return l==null?!0:Bd(l,c)}function XI(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function QI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Ls(l){return l==null?[]:bd(l,En(l))}function JI(l){return l==null?[]:bd(l,ui(l))}function ek(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Ro(Wi(l),c,g)}function tk(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var y=Im();return An(l+y*(c-l+RE("1e-"+((y+"").length-1))),c)}return Md(l,c)}var ik=ws(function(l,c,g){return c=c.toLowerCase(),l+(g?sv(c):c)});function sv(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,GE).replace(EE,"")}function rk(l,c,g){l=xt(l),c=Ei(c);var _=l.length;g=g===t?_:Ro(ot(g),0,_);var y=g;return g-=c.length,g>=0&&l.slice(g,y)==c}function ok(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qE):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var ak=ws(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lk=ws(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uk=c_("toLowerCase");function ck(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;if(!c||_>=c)return l;var y=(c-_)/2;return su(Gl(y),g)+l+su(Kl(y),g)}function dk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fk(l,c,g){return g||c==null?c=0:c&&(c=+c),CL(xt(l).replace(pe,""),c||0)}function gk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=ot(c),Pd(xt(l),c)}function pk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mk=ws(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _k(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!oh(c))&&(c=Ei(c),!c&&gs(l))?so(Zi(l),0,g):l.split(c,g)):[]}var vk=ws(function(l,c,g){return l+(g?" ":"")+lh(c)});function bk(l,c,g){return l=xt(l),g=g==null?0:Ro(ot(g),0,l.length),c=Ei(c),l.slice(g,g+c.length)==c}function Ck(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,__);var y=vu({},c.imports,_.imports,__),D=En(y),P=bd(y,D),V,Z,ue=0,ce=c.interpolate||st,ge="__p += '",Se=yd((c.escape||st).source+"|"+ce.source+"|"+(ce===is?F:st).source+"|"+(c.evaluate||st).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IE+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,YE),ht&&(V=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Ba,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function yk(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Zi(c),D=bm(_,y),P=Cm(_,y)+1;return so(_,D,P).join("")}function Ek(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,wm(l)+1);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Cm(_,Zi(c))+1;return so(_,0,y).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=bm(_,Zi(c));return so(_,y).join("")}function xk(l,c){var g=X,_=$;if(tn(c)){var y="separator"in c?c.separator:y;g="length"in c?ot(c.length):g,_="omission"in c?Ei(c.omission):_}l=xt(l);var D=l.length;if(gs(l)){var P=Zi(l);D=P.length}if(g>=D)return l;var V=g-ps(_);if(V<1)return _;var Z=P?so(P,0,V).join(""):l.slice(0,V);if(y===t)return Z+_;if(P&&(V+=Z.length-V),oh(y)){if(l.slice(V).search(y)){var ue,ce=Z;for(y.global||(y=yd(y.source,xt(te.exec(y))+"g")),y.lastIndex=0;ue=y.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?V:ge)}}else if(l.indexOf(Ei(y),V)!=V){var Se=Z.lastIndexOf(y);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function Dk(l){return l=xt(l),l&&rr.test(l)?l.replace(qs,nL):l}var Tk=ws(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?XE(l)?oL(l):$E(l):l.match(c)||[]}var uv=ct(function(l,c){try{return wi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Rr(function(l,c){return Oi(c,function(g){g=br(g),Ar(l,g,nh(l[g],l))}),l});function kk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Ri(s);return[g(_[0]),_[1]]}):[],ct(function(_){for(var y=-1;++y<c;){var D=l[y];if(wi(D[0],this,_))return wi(D[1],this,_)}})}function Nk(l){return nx(Pi(l,f))}function uh(l){return function(){return l}}function Ak(l,c){return l==null||l!==l?c:l}var Ok=h_(),Rk=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Pk(l,c){return jm(l,Pi(c,f))}var Fk=ct(function(l,c){return function(g){return va(g,l,c)}}),Bk=ct(function(l,c){return function(g){return va(l,g,c)}});function dh(l,c,g){var _=En(c),y=Jl(c,_);g==null&&!(tn(c)&&(y.length||!_.length))&&(g=c,c=l,l=this,y=Jl(c,En(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(y,function(V){var Z=c[V];l[V]=Z,P&&(l.prototype[V]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,eo([this.value()],arguments))})}),l}function Wk(){return xn._===this&&(xn._=dL),this}function hh(){}function Vk(l){return l=ot(l),ct(function(c){return Km(c,l)})}var Hk=zd(Jt),$k=zd(fm),zk=zd(gd);function cv(l){return Zd(l)?pd(br(l)):bx(l)}function Uk(l){return function(c){return l==null?t:Mo(l,c)}}var jk=g_(),Kk=g_(!0);function fh(){return[]}function gh(){return!1}function Gk(){return{}}function qk(){return""}function Yk(){return!0}function Zk(l,c){if(l=ot(l),l<1||l>G)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var y=vd(_,c);++g<l;)c(g);return y}function Xk(l){return tt(l)?Jt(l,br):Li(l)?[l]:ai(k_(xt(l)))}function Qk(l){var c=++uL;return xt(l)+c}var Jk=ou(function(l,c){return l+c},0),eN=Ud("ceil"),tN=ou(function(l,c){return l/c},1),nN=Ud("floor");function iN(l){return l&&l.length?Ql(l,ci,Id):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Id):t}function oN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Od):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Od):t}var uN=ou(function(l,c){return l*c},1),cN=Ud("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?_d(l,ci):0}function fN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MT,x.ary=H_,x.assign=wI,x.assignIn=tv,x.assignInWith=vu,x.assignWith=SI,x.at=EI,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=GT,x.chain=B_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=kk,x.conforms=Nk,x.constant=uh,x.countBy=hT,x.create=LI,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=xI,x.defaultsDeep=DI,x.defer=PT,x.delay=FT,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gT,x.flatMap=_T,x.flatMapDeep=vT,x.flatMapDepth=bT,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BT,x.flow=Ok,x.flowRight=Rk,x.fromPairs=pD,x.functions=RI,x.functionsIn=MI,x.groupBy=CT,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=FI,x.invertBy=BI,x.invokeMap=wT,x.iteratee=ch,x.keyBy=ST,x.keys=En,x.keysIn=ui,x.map=hu,x.mapKeys=VI,x.mapValues=HI,x.matches=Mk,x.matchesProperty=Pk,x.memoize=gu,x.merge=$I,x.mergeWith=nv,x.method=Fk,x.methodOf=Bk,x.mixin=dh,x.negate=pu,x.nthArg=Vk,x.omit=zI,x.omitBy=UI,x.once=WT,x.orderBy=ET,x.over=Hk,x.overArgs=VT,x.overEvery=$k,x.overSome=zk,x.partial=ih,x.partialRight=G_,x.partition=LT,x.pick=jI,x.pickBy=iv,x.property=cv,x.propertyOf=Uk,x.pull=ED,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=xD,x.pullAt=DD,x.range=jk,x.rangeRight=Kk,x.rearg=HT,x.reject=TT,x.remove=TD,x.rest=$T,x.reverse=eh,x.sampleSize=kT,x.set=GI,x.setWith=qI,x.shuffle=NT,x.slice=ID,x.sortBy=RT,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_k,x.spread=zT,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iT,x.throttle=UT,x.thru=du,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=ov,x.toPath=Xk,x.toPlainObject=ev,x.transform=YI,x.unary=jT,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=ZI,x.unzip=th,x.unzipWith=F_,x.update=XI,x.updateWith=QI,x.values=Ls,x.valuesIn=JI,x.without=YD,x.words=lv,x.wrap=KT,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eT,x.zipObjectDeep=tT,x.zipWith=nT,x.entries=rv,x.entriesIn=ov,x.extend=tv,x.extendWith=vu,dh(x,x),x.add=Jk,x.attempt=uv,x.camelCase=ik,x.capitalize=sv,x.ceil=eN,x.clamp=ek,x.clone=qT,x.cloneDeep=ZT,x.cloneDeepWith=XT,x.cloneWith=YT,x.conformsTo=QT,x.deburr=av,x.defaultTo=Ak,x.divide=tN,x.endsWith=rk,x.eq=Qi,x.escape=ok,x.escapeRegExp=sk,x.every=fT,x.find=pT,x.findIndex=A_,x.findKey=TI,x.findLast=mT,x.findLastIndex=O_,x.findLastKey=II,x.floor=nN,x.forEach=W_,x.forEachRight=V_,x.forIn=kI,x.forInRight=NI,x.forOwn=AI,x.forOwnRight=OI,x.get=sh,x.gt=JT,x.gte=eI,x.has=PI,x.hasIn=ah,x.head=M_,x.identity=ci,x.includes=yT,x.indexOf=mD,x.inRange=tk,x.invoke=WI,x.isArguments=Bo,x.isArray=tt,x.isArrayBuffer=tI,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nI,x.isBuffer=ao,x.isDate=iI,x.isElement=rI,x.isEmpty=oI,x.isEqual=sI,x.isEqualWith=aI,x.isError=rh,x.isFinite=lI,x.isFunction=Pr,x.isInteger=q_,x.isLength=mu,x.isMap=Y_,x.isMatch=uI,x.isMatchWith=cI,x.isNaN=dI,x.isNative=hI,x.isNil=gI,x.isNull=fI,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=sn,x.isPlainObject=Ea,x.isRegExp=oh,x.isSafeInteger=pI,x.isSet=X_,x.isString=_u,x.isSymbol=Li,x.isTypedArray=Es,x.isUndefined=mI,x.isWeakMap=_I,x.isWeakSet=vI,x.join=yD,x.kebabCase=ak,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=lk,x.lowerFirst=uk,x.lt=bI,x.lte=CI,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Gk,x.stubString=qk,x.stubTrue=Yk,x.multiply=uN,x.nth=SD,x.noConflict=Wk,x.noop=hh,x.now=fu,x.pad=ck,x.padEnd=dk,x.padStart=hk,x.parseInt=fk,x.random=nk,x.reduce=xT,x.reduceRight=DT,x.repeat=gk,x.replace=pk,x.result=KI,x.round=cN,x.runInContext=Y,x.sample=IT,x.size=AT,x.snakeCase=mk,x.some=OT,x.sortedIndex=kD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=RD,x.sortedLastIndexOf=MD,x.startCase=vk,x.startsWith=bk,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=Ck,x.times=Zk,x.toFinite=Fr,x.toInteger=ot,x.toLength=J_,x.toLower=yk,x.toNumber=Wi,x.toSafeInteger=yI,x.toString=xt,x.toUpper=wk,x.trim=Sk,x.trimEnd=Ek,x.trimStart=Lk,x.truncate=xk,x.unescape=Dk,x.uniqueId=Qk,x.upperCase=Tk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=M_,dh(x,function(){var l={};return _r(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(ot(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(y){var D=this.clone();return D.__iteratees__.push({iteratee:We(y,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return va(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=ot(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=ot(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},_r(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),y=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);y&&(x.prototype[c]=function(){var P=this.__wrapped__,V=_?[1]:arguments,Z=P instanceof mt,ue=V[0],ce=Z||tt(P),ge=function(ht){var vt=y.apply(x,eo([ht],V));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,V);return Ue.__actions__.push({func:du,args:[ge],thisArg:t}),new Mi(Ue,Se)}return ze&&lt?l.apply(this,V):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var y=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],y)}return this[g](function(P){return c.apply(tt(P)?P:[],y)})}}),_r(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DL,mt.prototype.reverse=TL,mt.prototype.value=IL,x.prototype.at=rT,x.prototype.chain=oT,x.prototype.commit=sT,x.prototype.next=aT,x.prototype.plant=uT,x.prototype.reverse=cT,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dT,x.prototype.first=x.prototype.head,da&&(x.prototype[da]=lT),x},ms=sL();ko?((ko.exports=ms)._=ms,cd._=ms):xn._=ms}).call(ta)})(sF,sF.exports);var wr=sF.exports,tw;(function(i){i.Update="Component.Update"})(tw||(tw={}));class nl extends NS{constructor(){super(),this._event=new U5}setState(e,t){const n=Object.assign(this.state,e);this.render(n),t==null||t(this.state,n)}render(e){this._event.emit(tw.Update,this.state,e)}onUpdateState(e){this._event.subscribe(tw.Update,e)}removeOnUpdateState(e){this._event.unsubscribe(tw.Update,e)}forceUpdate(){this.setState(wr.cloneDeep(this.state))}getState(){return this.state}}function ZO(i,e){return he.Children.map(i,t=>he.isValidElement(t)?he.cloneElement(t,e):t)}const Pn={info(...i){},error(...i){console.error(...i)},warn(...i){console.warn(...i)}};function il(i,e,t){return class extends he.Component{constructor(r){super(r),this._isMounted=!1,this.update=()=>{this._isMounted&&this.setState({lastUpdated:Date.now()})},this.onChange=this.onChange.bind(this),this.state={lastUpdated:Date.now()}}componentDidMount(){this._isMounted=!0,this.handleService(r=>{r.onUpdateState(this.onChange)})}componentWillUnmount(){this._isMounted=!1,this.handleService(r=>{r.removeOnUpdateState(this.onChange)})}onChange(r,o){Pn.info(r,o,je._registry),this.update()}getServiceState(){const r={};return this.handleService((o,s)=>{s?Object.assign(r,{[s]:Object.assign({},o.getState())}):Object.assign(r,Object.assign({},o.getState()))}),r}handleService(r){if(this.isValidService(i))r(i);else for(const o in i)if(o){const s=i[o];this.isValidService(s)&&r(s,o)}}getControllerProperties(){const r={};return t&&this.handleController((o,s)=>{s?Object.assign(r,{[s]:this.getObjectPublicProperties(o)}):Object.assign(r,this.getObjectPublicProperties(o))}),r}handleController(r){if(this.isValidController(t))r(t);else for(const o in t)if(o){const s=t[o];this.isValidController(s)&&r(s,o)}}render(){return re.createElement(e,Object.assign({},this.state,this.props,this.getServiceState(),this.getControllerProperties()))}isValidService(r){return typeof r.onUpdateState=="function"}isValidController(r){return typeof r.initView=="function"}getObjectPublicProperties(r){const o=Object.keys(r),s={};return o.forEach(a=>{!a.endsWith("Service")&&!a.endsWith("Controller")&&!a.startsWith("_")&&(s[a]=r[a])}),s}}}class ua extends NS{}const C1e=Object.freeze(Object.defineProperty({__proto__:null,Component:nl,get ComponentEvents(){return tw},Controller:ua,cloneReactChildren:ZO,connect:il},Symbol.toStringTag,{value:"Module"}));var V0={};Object.defineProperty(V0,"__esModule",{value:!0});function WX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function y1e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WX(Object(t),!0).forEach(function(n){w1e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):WX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function FV(i){"@babel/helpers - typeof";return FV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FV(i)}function iae(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function VX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function rae(i,e,t){return e&&VX(i.prototype,e),t&&VX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function w1e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function HX(i,e){return S1e(i)||E1e(i,e)||L1e(i,e)||x1e()}function S1e(i){if(Array.isArray(i))return i}function E1e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,o=!1,s,a;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){o=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function L1e(i,e){if(i){if(typeof i=="string")return $X(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $X(i,e)}}function $X(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function x1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ta<"u"?ta:typeof self<"u"?self:{};function oae(i,e){return e={exports:{}},i(e,e.exports),e.exports}var Q7=oae(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,E=1,S=2,w=4,L=8,A=16,N=32,H=64,M=128,R=256,q=512,X=30,$="...",I=800,O=16,B=1,W=2,j=3,U=1/0,G=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",E],["bindKey",S],["curry",L],["curryRight",A],["flip",q],["partial",N],["partialRight",H],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Re="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",on="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",oi="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Ie="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",yi="[object Float32Array]",Vt="[object Float64Array]",It="[object Int8Array]",Gt="[object Int16Array]",qt="[object Int32Array]",Bt="[object Uint8Array]",gr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Ba=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,rr=RegExp(qs.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,T=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,st=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",yt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",Hn=Ot+yt+si,or="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Wa="\\xac\\xb1\\xd7\\xf7",al="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",fE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Wa+al+Ag+fE,od="['’]",gE="["+Ft+"]",Gp="["+Kp+"]",Ol="["+Hn+"]",qp="\\d+",pE="["+or+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+qp+or+$i+Up+"]",sd="\\ud83c[\\udffb-\\udfff]",mE="(?:"+Ol+"|"+sd+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",_E="(?:"+hs+"|"+Zp+")",em="(?:"+od+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+od+"(?:D|LL|M|RE|S|T|VE))?",nm=mE+"?",im="["+jp+"]?",vE="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",bE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+vE,yE="(?:"+[pE,ad,ld].join("|")+")"+rm,wE="(?:"+[Xp+Ol+"?",Ol,ad,ld,gE].join("|")+")",SE=RegExp(od,"g"),EE=RegExp(Ol,"g"),ud=RegExp(sd+"(?="+sd+")|"+wE+rm,"g"),LE=RegExp([hs+"?"+Yp+"+"+em+"(?="+[Gp,hs,"$"].join("|")+")",_E+"+"+tm+"(?="+[Gp,hs+Jp,"$"].join("|")+")",hs+"?"+Jp+"+"+em,hs+"+"+tm,CE,bE,qp,yE].join("|"),"g"),xE=RegExp("["+Qp+Ft+Hn+jp+"]"),DE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IE=-1,jt={};jt[yi]=jt[Vt]=jt[It]=jt[Gt]=jt[qt]=jt[Bt]=jt[gr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Re]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Re]=$t[yi]=$t[Vt]=$t[It]=$t[Gt]=$t[qt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[gr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var kE={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},RE=parseFloat,ME=parseInt,om=typeof fy=="object"&&fy&&fy.Object===Object&&fy,PE=typeof self=="object"&&self&&self.Object===Object&&self,xn=om||PE||Function("return this")(),cd=e&&!e.nodeType&&e,ko=cd&&!0&&i&&!i.nodeType&&i,sm=ko&&ko.exports===cd,dd=sm&&om.process,Ai=function(){try{var Y=ko&&ko.require&&ko.require("util").types;return Y||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function wi(Y,oe,ee){switch(ee.length){case 0:return Y.call(oe);case 1:return Y.call(oe,ee[0]);case 2:return Y.call(oe,ee[0],ee[1]);case 3:return Y.call(oe,ee[0],ee[1],ee[2])}return Y.apply(oe,ee)}function FE(Y,oe,ee,xe){for(var Qe=-1,St=Y==null?0:Y.length;++Qe<St;){var bn=Y[Qe];oe(xe,bn,ee(bn),Y)}return xe}function Oi(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe&&oe(Y[ee],ee,Y)!==!1;);return Y}function BE(Y,oe){for(var ee=Y==null?0:Y.length;ee--&&oe(Y[ee],ee,Y)!==!1;);return Y}function fm(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(!oe(Y[ee],ee,Y))return!1;return!0}function Jr(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];oe(bn,ee,Y)&&(St[Qe++]=bn)}return St}function Rl(Y,oe){var ee=Y==null?0:Y.length;return!!ee&&fs(Y,oe,0)>-1}function hd(Y,oe,ee){for(var xe=-1,Qe=Y==null?0:Y.length;++xe<Qe;)if(ee(oe,Y[xe]))return!0;return!1}function Jt(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=Array(xe);++ee<xe;)Qe[ee]=oe(Y[ee],ee,Y);return Qe}function eo(Y,oe){for(var ee=-1,xe=oe.length,Qe=Y.length;++ee<xe;)Y[Qe+ee]=oe[ee];return Y}function fd(Y,oe,ee,xe){var Qe=-1,St=Y==null?0:Y.length;for(xe&&St&&(ee=Y[++Qe]);++Qe<St;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function WE(Y,oe,ee,xe){var Qe=Y==null?0:Y.length;for(xe&&Qe&&(ee=Y[--Qe]);Qe--;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function gd(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(oe(Y[ee],ee,Y))return!0;return!1}var VE=pd("length");function HE(Y){return Y.split("")}function $E(Y){return Y.match(dt)||[]}function gm(Y,oe,ee){var xe;return ee(Y,function(Qe,St,bn){if(oe(Qe,St,bn))return xe=St,!1}),xe}function Ml(Y,oe,ee,xe){for(var Qe=Y.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(oe(Y[St],St,Y))return St;return-1}function fs(Y,oe,ee){return oe===oe?eL(Y,oe,ee):Ml(Y,pm,ee)}function zE(Y,oe,ee,xe){for(var Qe=ee-1,St=Y.length;++Qe<St;)if(xe(Y[Qe],oe))return Qe;return-1}function pm(Y){return Y!==Y}function mm(Y,oe){var ee=Y==null?0:Y.length;return ee?_d(Y,oe)/ee:k}function pd(Y){return function(oe){return oe==null?t:oe[Y]}}function md(Y){return function(oe){return Y==null?t:Y[oe]}}function _m(Y,oe,ee,xe,Qe){return Qe(Y,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UE(Y,oe){var ee=Y.length;for(Y.sort(oe);ee--;)Y[ee]=Y[ee].value;return Y}function _d(Y,oe){for(var ee,xe=-1,Qe=Y.length;++xe<Qe;){var St=oe(Y[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(Y,oe){for(var ee=-1,xe=Array(Y);++ee<Y;)xe[ee]=oe(ee);return xe}function jE(Y,oe){return Jt(oe,function(ee){return[ee,Y[ee]]})}function vm(Y){return Y&&Y.slice(0,wm(Y)+1).replace(pe,"")}function Si(Y){return function(oe){return Y(oe)}}function bd(Y,oe){return Jt(oe,function(ee){return Y[ee]})}function ca(Y,oe){return Y.has(oe)}function bm(Y,oe){for(var ee=-1,xe=Y.length;++ee<xe&&fs(oe,Y[ee],0)>-1;);return ee}function Cm(Y,oe){for(var ee=Y.length;ee--&&fs(oe,Y[ee],0)>-1;);return ee}function KE(Y,oe){for(var ee=Y.length,xe=0;ee--;)Y[ee]===oe&&++xe;return xe}var GE=md(kE),qE=md(NE);function YE(Y){return"\\"+OE[Y]}function ZE(Y,oe){return Y==null?t:Y[oe]}function gs(Y){return xE.test(Y)}function XE(Y){return DE.test(Y)}function QE(Y){for(var oe,ee=[];!(oe=Y.next()).done;)ee.push(oe.value);return ee}function Cd(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe,Qe){ee[++oe]=[Qe,xe]}),ee}function ym(Y,oe){return function(ee){return Y(oe(ee))}}function to(Y,oe){for(var ee=-1,xe=Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];(bn===oe||bn===h)&&(Y[ee]=h,St[Qe++]=ee)}return St}function Pl(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=xe}),ee}function JE(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eL(Y,oe,ee){for(var xe=ee-1,Qe=Y.length;++xe<Qe;)if(Y[xe]===oe)return xe;return-1}function tL(Y,oe,ee){for(var xe=ee+1;xe--;)if(Y[xe]===oe)return xe;return xe}function ps(Y){return gs(Y)?iL(Y):VE(Y)}function Zi(Y){return gs(Y)?rL(Y):HE(Y)}function wm(Y){for(var oe=Y.length;oe--&&J.test(Y.charAt(oe)););return oe}var nL=md(AE);function iL(Y){for(var oe=ud.lastIndex=0;ud.test(Y);)++oe;return oe}function rL(Y){return Y.match(ud)||[]}function oL(Y){return Y.match(LE)||[]}var sL=function Y(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,TE));var ee=oe.Array,xe=oe.Date,Qe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aL=oe.String,Ri=oe.TypeError,Fl=ee.prototype,lL=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lL.toString,Nt=_s.hasOwnProperty,uL=0,Sm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cL=Wl.call(Wt),dL=xn._,hL=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=sm?oe.Buffer:t,no=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),Lm=Wt.create,xm=_s.propertyIsEnumerable,Ul=Fl.splice,Dm=no?no.isConcatSpreadable:t,da=no?no.iterator:t,No=no?no.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fL=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gL=xe&&xe.now!==xn.Date.now&&xe.now,pL=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,wd=Wt.getOwnPropertySymbols,mL=Hl?Hl.isBuffer:t,Tm=oe.isFinite,_L=Fl.join,vL=ym(Wt.keys,Wt),Cn=bn.max,An=bn.min,bL=xe.now,CL=oe.parseInt,Im=bn.random,yL=Fl.reverse,Sd=Po(oe,"DataView"),ha=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),fa=Po(oe,"WeakMap"),ga=Po(Wt,"create"),ql=fa&&new fa,bs={},wL=Fo(Sd),SL=Fo(ha),EL=Fo(Ed),LL=Fo(vs),xL=Fo(fa),Yl=no?no.prototype:t,pa=Yl?Yl.valueOf:t,km=Yl?Yl.toString:t;function x(l){if(sn(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Mi)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Mi(l)}var Cs=function(){function l(){}return function(c){if(!tn(c))return{};if(Lm)return Lm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Mi(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Mi.prototype=Cs(Zl.prototype),Mi.prototype.constructor=Mi;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function DL(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function TL(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IL(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,y=g?l.length:0,D=Hx(0,y,this.__views__),P=D.start,V=D.end,Z=V-P,ue=_?V:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&y==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function kL(){this.__data__=ga?ga(null):{},this.size=0}function NL(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AL(l){var c=this.__data__;if(ga){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OL(l){var c=this.__data__;return ga?c[l]!==t:Nt.call(c,l)}function RL(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=ga&&c===t?u:c,this}Ao.prototype.clear=kL,Ao.prototype.delete=NL,Ao.prototype.get=AL,Ao.prototype.has=OL,Ao.prototype.set=RL;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ML(){this.__data__=[],this.size=0}function PL(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FL(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BL(l){return Xl(this.__data__,l)>-1}function WL(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ML,kr.prototype.delete=PL,kr.prototype.get=FL,kr.prototype.has=BL,kr.prototype.set=WL;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VL(){this.size=0,this.__data__={hash:new Ao,map:new(ha||kr),string:new Ao}}function HL(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $L(l){return uu(this,l).get(l)}function zL(l){return uu(this,l).has(l)}function UL(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VL,Nr.prototype.delete=HL,Nr.prototype.get=$L,Nr.prototype.has=zL,Nr.prototype.set=UL;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jL(l){return this.__data__.set(l,u),this}function KL(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jL,Oo.prototype.has=KL;function Xi(l){var c=this.__data__=new kr(l);this.size=c.size}function GL(){this.__data__=new kr,this.size=0}function qL(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YL(l){return this.__data__.get(l)}function ZL(l){return this.__data__.has(l)}function XL(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!ha||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Xi.prototype.clear=GL,Xi.prototype.delete=qL,Xi.prototype.get=YL,Xi.prototype.has=ZL,Xi.prototype.set=XL;function Nm(l,c){var g=tt(l),_=!g&&Bo(l),y=!g&&!_&&ao(l),D=!g&&!_&&!y&&Es(l),P=g||_||y||D,V=P?vd(l.length,aL):[],Z=V.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||y&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Mr(ue,Z)))&&V.push(ue);return V}function Am(l){var c=l.length;return c?l[Md(0,c-1)]:t}function QL(l,c){return cu(ai(l),Ro(c,0,l.length))}function JL(l){return cu(ai(l))}function Ld(l,c,g){(g!==t&&!Qi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function ma(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Qi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Qi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return io(l,function(y,D,P){c(_,y,g(y),P)}),_}function Om(l,c){return l&&vr(c,En(c),l)}function tx(l,c){return l&&vr(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,y=ee(_),D=l==null;++g<_;)y[g]=D?t:sh(l,c[g]);return y}function Ro(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,y,D){var P,V=c&f,Z=c&p,ue=c&m;if(g&&(P=y?g(l,_,y,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=zx(l),!V)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==on;if(ao(l))return i_(l,V);if(ge==Wn||ge==De||Se&&!y){if(P=Z||Se?{}:w_(l),!V)return Z?Ax(l,tx(P,l)):Nx(l,Om(P,l))}else{if(!$t[ge])return y?l:{};P=Ux(l,ge,V)}}D||(D=new Xi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:En,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),ma(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function nx(l){var c=En(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var y=g[_],D=c[y],P=l[y];if(P===t&&!(y in l)||!D(P))return!1}return!0}function Mm(l,c,g){if(typeof l!="function")throw new Ri(s);return Sa(function(){l.apply(t,g)},c)}function _a(l,c,g,_){var y=-1,D=Rl,P=!0,V=l.length,Z=[],ue=c.length;if(!V)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ca,P=!1,c=new Oo(c));e:for(;++y<V;){var ce=l[y],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var io=l_(_r),Pm=l_(Td,!0);function ix(l,c){var g=!0;return io(l,function(_,y,D){return g=!!c(_,y,D),g}),g}function Ql(l,c,g){for(var _=-1,y=l.length;++_<y;){var D=l[_],P=c(D);if(P!=null&&(V===t?P===P&&!Li(P):g(P,V)))var V=P,Z=D}return Z}function rx(l,c,g,_){var y=l.length;for(g=ot(g),g<0&&(g=-g>y?0:y+g),_=_===t||_>y?y:ot(_),_<0&&(_+=y),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return io(l,function(_,y,D){c(_,y,D)&&g.push(_)}),g}function Dn(l,c,g,_,y){var D=-1,P=l.length;for(g||(g=Kx),y||(y=[]);++D<P;){var V=l[D];c>0&&g(V)?c>1?Dn(V,c-1,g,_,y):eo(y,V):_||(y[y.length]=V)}return y}var Dd=u_(),Bm=u_(!0);function _r(l,c){return l&&Dd(l,c,En)}function Td(l,c){return l&&Bm(l,c,En)}function Jl(l,c){return Jr(c,function(g){return Pr(l[g])})}function Mo(l,c){c=oo(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[br(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:eo(_,g(l))}function qn(l){return l==null?l===t?Ie:Sn:No&&No in Wt(l)?Vx(l):Jx(l)}function Id(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Rl,y=l[0].length,D=l.length,P=D,V=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),V[P]=!g&&(c||y>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=V[0];e:for(;++ge<y&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ca(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=V[P];if(!(lt?ca(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function lx(l,c,g,_){return _r(l,function(y,D,P){c(_,g(y),D,P)}),_}function va(l,c,g){c=oo(c,l),l=x_(l,c);var _=l==null?l:l[br(Bi(c))];return _==null?t:wi(_,l,g)}function Vm(l){return sn(l)&&qn(l)==De}function ux(l){return sn(l)&&qn(l)==at}function cx(l){return sn(l)&&qn(l)==Re}function ba(l,c,g,_,y){return l===c?!0:l==null||c==null||!sn(l)&&!sn(c)?l!==l&&c!==c:dx(l,c,g,_,ba,y)}function dx(l,c,g,_,y,D){var P=tt(l),V=tt(c),Z=P?Ve:On(l),ue=V?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&ao(l)){if(!ao(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Xi),P||Es(l)?b_(l,c,g,_,y,D):Bx(l,c,Z,g,_,y,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Xi),y(lt,Ue,g,_,D)}}return Se?(D||(D=new Xi),Wx(l,c,g,_,y,D)):!1}function hx(l){return sn(l)&&On(l)==Kt}function Nd(l,c,g,_){var y=g.length,D=y,P=!_;if(l==null)return!D;for(l=Wt(l);y--;){var V=g[y];if(P&&V[2]?V[1]!==l[V[0]]:!(V[0]in l))return!1}for(;++y<D;){V=g[y];var Z=V[0],ue=l[Z],ce=V[1];if(P&&V[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Xi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?ba(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?hL:le;return c.test(Fo(l))}function fx(l){return sn(l)&&qn(l)==jn}function gx(l){return sn(l)&&On(l)==Pt}function px(l){return sn(l)&&mu(l.length)&&!!jt[qn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return vL(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!tn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return io(l,function(y,D,P){_[++g]=c(y,D,P)}),_}function Um(l){var c=qd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?E_(br(l),c):function(g){var _=sh(g,l);return _===t&&_===c?ah(g,l):ba(c,_,v|b)}}function eu(l,c,g,_,y){l!==c&&Dd(c,function(D,P){if(y||(y=new Xi),tn(D))_x(l,c,P,g,eu,_,y);else{var V=_?_(Qd(l,P),D,P+"",l,c,y):t;V===t&&(V=D),Ld(l,P,V)}},ui)}function _x(l,c,g,_,y,D,P){var V=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ld(l,g,ue);return}var ce=D?D(V,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&ao(Z),ze=!Se&&!Ne&&Es(Z);ce=Z,Se||Ne||ze?tt(V)?ce=V:hn(V)?ce=ai(V):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Ea(Z)||Bo(Z)?(ce=V,Bo(V)?ce=ev(V):(!tn(V)||Pr(V))&&(ce=w_(Z))):ge=!1}ge&&(P.set(Z,ce),y(ce,Z,_,D,P),P.delete(Z)),Ld(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Mr(c,g)?l[c]:t}function Gm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Mo(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var y=zm(l,function(D,P,V){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return UE(y,function(D,P){return kx(D,P,g)})}function vx(l,c){return qm(l,c,function(g,_){return ah(l,_)})}function qm(l,c,g){for(var _=-1,y=c.length,D={};++_<y;){var P=c[_],V=Mo(l,P);g(V,P)&&Ca(D,oo(P,l),V)}return D}function bx(l){return function(c){return Mo(c,l)}}function Rd(l,c,g,_){var y=_?zE:fs,D=-1,P=c.length,V=l;for(l===c&&(c=ai(c)),g&&(V=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=y(V,ce,Z,_))>-1;)V!==l&&Ul.call(V,Z,1),Ul.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var y=c[g];if(g==_||y!==D){var D=y;Mr(y)?Ul.call(l,y,1):Bd(l,y)}}return l}function Md(l,c){return l+Gl(Im()*(c-l+1))}function Cx(l,c,g,_){for(var y=-1,D=Cn(Kl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++y]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>G)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(L_(l,c,ci),l+"")}function yx(l){return Am(Ls(l))}function wx(l,c){var g=Ls(l);return cu(g,Ro(c,0,g.length))}function Ca(l,c,g,_){if(!tn(l))return l;c=oo(c,l);for(var y=-1,D=c.length,P=D-1,V=l;V!=null&&++y<D;){var Z=br(c[y]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(y!=P){var ce=V[Z];ue=_?_(ce,Z,V):t,ue===t&&(ue=tn(ce)?ce:Mr(c[y+1])?[]:{})}ma(V,Z,ue),V=V[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Ex(l){return cu(Ls(l))}function Fi(l,c,g){var _=-1,y=l.length;c<0&&(c=-c>y?0:y+c),g=g>y?y:g,g<0&&(g+=y),y=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(y);++_<y;)D[_]=l[_+c];return D}function Lx(l,c){var g;return io(l,function(_,y,D){return g=c(_,y,D),!g}),!!g}function tu(l,c,g){var _=0,y=l==null?_:l.length;if(typeof c=="number"&&c===c&&y<=ne){for(;_<y;){var D=_+y>>>1,P=l[D];P!==null&&!Li(P)&&(g?P<=c:P<c)?_=D+1:y=D}return y}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var y=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,V=c===null,Z=Li(c),ue=c===t;y<D;){var ce=Gl((y+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Li(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):V?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?y=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,y=0,D=[];++g<_;){var P=l[g],V=c?c(P):P;if(!g||!Qi(V,Z)){var Z=V;D[y++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Li(l)?k:+l}function Ei(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Ei)+"";if(Li(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function ro(l,c,g){var _=-1,y=Rl,D=l.length,P=!0,V=[],Z=V;if(g)P=!1,y=hd;else if(D>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,y=ca,Z=new Oo}else Z=c?[]:V;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),V.push(ce)}else y(Z,ge,g)||(Z!==V&&Z.push(ge),V.push(ce))}return V}function Bd(l,c){return c=oo(c,l),l=x_(l,c),l==null||delete l[br(Bi(c))]}function Jm(l,c,g,_){return Ca(l,c,g(Mo(l,c)),_)}function nu(l,c,g,_){for(var y=l.length,D=_?y:-1;(_?D--:++D<y)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:y):Fi(l,_?D+1:0,_?y:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,y){return y.func.apply(y.thisArg,eo([_],y.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?ro(l[0]):[];for(var y=-1,D=ee(_);++y<_;)for(var P=l[y],V=-1;++V<_;)V!=y&&(D[y]=_a(D[y]||P,l[V],c,g));return ro(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,y=l.length,D=c.length,P={};++_<y;){var V=_<D?c[_]:t;g(P,l[_],V)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function oo(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var xx=ct;function so(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=fL||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Tx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return pa?Wt(pa.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function o_(l,c){if(l!==c){var g=l!==t,_=l===null,y=l===l,D=Li(l),P=c!==t,V=c===null,Z=c===c,ue=Li(c);if(!V&&!ue&&!D&&l>c||D&&P&&Z&&!V&&!ue||_&&P&&Z||!g&&Z||!y)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&y&&!_&&!D||V&&g&&y||!P&&y||!Z)return-1}return 0}function kx(l,c,g){for(var _=-1,y=l.criteria,D=c.criteria,P=y.length,V=g.length;++_<P;){var Z=o_(y[_],D[_]);if(Z){if(_>=V)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function s_(l,c,g,_){for(var y=-1,D=l.length,P=g.length,V=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++V<Z;)ce[V]=c[V];for(;++y<P;)(ge||y<D)&&(ce[g[y]]=l[y]);for(;ue--;)ce[V++]=l[y++];return ce}function a_(l,c,g,_){for(var y=-1,D=l.length,P=-1,V=g.length,Z=-1,ue=c.length,ce=Cn(D-V,0),ge=ee(ce+ue),Se=!_;++y<ce;)ge[y]=l[y];for(var Ne=y;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<V;)(Se||y<D)&&(ge[Ne+g[P]]=l[y++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function vr(l,c,g,_){var y=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var V=c[D],Z=_?_(g[V],l[V],V,g,l):t;Z===t&&(Z=l[V]),y?Ar(g,V,Z):ma(g,V,Z)}return g}function Nx(l,c){return vr(l,Yd(l),c)}function Ax(l,c){return vr(l,C_(l),c)}function iu(l,c){return function(g,_){var y=tt(g)?FE:ex,D=c?c():{};return y(g,l,We(_,2),D)}}function ys(l){return ct(function(c,g){var _=-1,y=g.length,D=y>1?g[y-1]:t,P=y>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(y--,D):t,P&&Yn(g[0],g[1],P)&&(D=y<3?t:D,y=1),c=Wt(c);++_<y;){var V=g[_];V&&l(c,V,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var y=g.length,D=c?y:-1,P=Wt(g);(c?D--:++D<y)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var y=-1,D=Wt(c),P=_(c),V=P.length;V--;){var Z=P[l?V:++y];if(g(D[Z],Z,D)===!1)break}return c}}function Ox(l,c,g){var _=c&E,y=ya(l);function D(){var P=this&&this!==xn&&this instanceof D?y:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=gs(c)?Zi(c):t,_=g?g[0]:c.charAt(0),y=g?so(g,1).join(""):c.slice(1);return _[l]()+y}}function ws(l){return function(c){return fd(lv(av(c).replace(SE,"")),l,"")}}function ya(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Rx(l,c,g){var _=ya(l);function y(){for(var D=arguments.length,P=ee(D),V=D,Z=Ss(y);V--;)P[V]=arguments[V];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:to(P,Z);if(D-=ue.length,D<g)return p_(l,c,ru,y.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof y?_:l;return wi(ce,this,P)}return y}function d_(l){return function(c,g,_){var y=Wt(c);if(!li(c)){var D=We(g,3);c=En(c),g=function(V){return D(y[V],V,y)}}var P=l(c,g,_);return P>-1?y[D?c[P]:P]:t}}function h_(l){return Rr(function(c){var g=c.length,_=g,y=Mi.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Ri(s);if(y&&!P&&lu(D)=="wrapper")var P=new Mi([],!0)}for(_=P?_:g;++_<g;){D=c[_];var V=lu(D),Z=V=="wrapper"?Gd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|L|N|R)&&!Z[4].length&&Z[9]==1?P=P[lu(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[V]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,y,D,P,V,Z,ue){var ce=c&M,ge=c&E,Se=c&S,Ne=c&(L|A),ze=c&q,lt=Se?t:ya(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=Ss(Ue),Di=KE(vt,Zn);if(_&&(vt=s_(vt,_,y,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=to(vt,Zn);return p_(l,c,ru,Ue.placeholder,g,vt,fn,V,Z,ue-ht)}var Ji=ge?g:this,Br=Se?Ji[l]:l;return ht=vt.length,V?vt=eD(vt,V):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||ya(Br)),Br.apply(Ji,vt)}return Ue}function f_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var y;if(g===t&&_===t)return c;if(g!==t&&(y=g),_!==t){if(y===t)return _;typeof g=="string"||typeof _=="string"?(g=Ei(g),_=Ei(_)):(g=Qm(g),_=Qm(_)),y=l(g,_)}return y}}function zd(l){return Rr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(y){return wi(y,_,g)})})})}function su(l,c){c=c===t?" ":Ei(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,Kl(l/ps(c)));return gs(c)?so(Zi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var y=c&E,D=ya(l);function P(){for(var V=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++V];return wi(Se,y?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,y,D,P,V,Z,ue){var ce=c&L,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:H,c&=~(ce?H:N),c&w||(c&=~(E|S));var lt=[l,c,y,Ne,ge,ze,Se,V,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,T_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(ot(_),292),_&&Tm(g)){var y=(xt(g)+"e").split("e"),D=c(y[0]+"e"+(+y[1]+_));return y=(xt(D)+"e").split("e"),+(y[0]+"e"+(+y[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==U?function(l){return new vs(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?JE(c):jE(c,l(c))}}function Or(l,c,g,_,y,D,P,V){var Z=c&S;if(!Z&&typeof l!="function")throw new Ri(s);var ue=_?_.length:0;if(ue||(c&=~(N|H),_=y=t),P=P===t?P:Cn(ot(P),0),V=V===t?V:ot(V),ue-=y?y.length:0,c&H){var ce=_,ge=y;_=y=t}var Se=Z?t:Gd(l),Ne=[l,c,g,_,y,ce,ge,D,P,V];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],y=Ne[4],V=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!V&&c&(L|A)&&(c&=~(L|A)),!c||c==E)var ze=Ox(l,c,g);else c==L||c==A?ze=Rx(l,c,V):(c==N||c==(E|N))&&!y.length?ze=Mx(l,c,g,_):ze=ru.apply(t,Ne);var lt=Se?Zm:D_;return T_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Qi(l,_s[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,y,D){return tn(l)&&tn(c)&&(D.set(c,l),eu(l,c,t,v_,D),D.delete(c)),l}function Fx(l){return Ea(l)?t:l}function b_(l,c,g,_,y,D){var P=g&v,V=l.length,Z=c.length;if(V!=Z&&!(P&&Z>V))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(D.set(l,c),D.set(c,l);++ge<V;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ca(Ne,vt)&&(ze===ht||y(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||y(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Bx(l,c,g,_,y,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new $l(l),new $l(c)));case At:case Re:case dn:return Qi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var V=Cd;case Pt:var Z=_&v;if(V||(V=Pl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(V(l),V(c),_,y,D,P);return P.delete(l),ce;case Ci:if(pa)return pa.call(l)==pa.call(c)}return!1}function Wx(l,c,g,_,y,D){var P=g&v,V=jd(l),Z=V.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=V[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=V[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||y(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Rr(l){return Jd(L_(l,t,R_),l+"")}function jd(l){return Wm(l,En,Yd)}function Kd(l){return Wm(l,ui,C_)}var Gd=ql?function(l){return ql.get(l)}:hh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var y=g[_],D=y.func;if(D==null||D==l)return y.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function qd(l){for(var c=En(l),g=c.length;g--;){var _=c[g],y=l[_];c[g]=[_,y,S_(y)]}return c}function Po(l,c){var g=ZE(l,c);return Hm(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var y=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),y}var Yd=wd?function(l){return l==null?[]:(l=Wt(l),Jr(wd(l),function(c){return xm.call(l,c)}))}:fh,C_=wd?function(l){for(var c=[];l;)eo(c,Yd(l)),l=zl(l);return c}:fh,On=qn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||ha&&On(new ha)!=Kt||Ed&&On(Ed.resolve())!=Jn||vs&&On(new vs)!=Pt||fa&&On(new fa)!=Fe)&&(On=function(l){var c=qn(l),g=c==Wn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case wL:return bt;case SL:return Kt;case EL:return Jn;case LL:return Pt;case xL:return Fe}return c});function Hx(l,c,g){for(var _=-1,y=g.length;++_<y;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match($e);return c?c[1].split(Me):[]}function y_(l,c,g){c=oo(c,l);for(var _=-1,y=c.length,D=!1;++_<y;){var P=br(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=y?D:(y=l==null?0:l.length,!!y&&mu(y)&&Mr(P,y)&&(tt(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function w_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Re:return new _(+l);case bt:return Dx(l,g);case yi:case Vt:case It:case Gt:case qt:case Bt:case gr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Tx(l);case Pt:return new _;case Ci:return Ix(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return tt(l)||Bo(l)||!!(Dm&&l&&l[Dm])}function Mr(l,c){var g=typeof l;return c=c??G,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Mr(c,g.length):_=="string"&&c in g)?Qi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Li(l)?!0:Le.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=Gd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Yx=Bl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function S_(l){return l===l&&!tn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],y=g|_,D=y<(E|S|M),P=_==M&&g==L||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==L;if(!(D||P))return l;_&E&&(l[2]=c[2],y|=g&E?0:w);var V=c[3];if(V){var Z=l[3];l[3]=Z?s_(Z,V,c[4]):V,l[4]=Z?to(l[3],h):c[4]}return V=c[5],V&&(Z=l[5],l[5]=Z?a_(Z,V,c[6]):V,l[6]=Z?to(l[5],h):c[6]),V=c[7],V&&(l[7]=V),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=y,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function L_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,y=-1,D=Cn(_.length-c,0),P=ee(D);++y<D;)P[y]=_[c+y];y=-1;for(var V=ee(c+1);++y<c;)V[y]=_[y];return V[c]=g(P),wi(l,this,V)}}function x_(l,c){return c.length<2?l:Mo(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=An(c.length,g),y=ai(l);_--;){var D=c[_];l[_]=Mr(D,g)?y[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=I_(Zm),Sa=pL||function(l,c){return xn.setTimeout(l,c)},Jd=I_(Sx);function T_(l,c,g){var _=c+"";return Jd(l,jx(_,tD($x(_),g)))}function I_(l){var c=0,g=0;return function(){var _=bL(),y=O-(_-g);if(g=_,y>0){if(++c>=I)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,y=_-1;for(c=c===t?_:c;++g<c;){var D=Md(g,y),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,y,D){c.push(y?D.replace(T,"$1"):_||g)}),c});function br(l){if(typeof l=="string"||Li(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Rl(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Mi(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(ot(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var y=0,D=0,P=ee(Kl(_/c));y<_;)P[D++]=Fi(l,y,y+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,y=[];++c<g;){var D=l[c];D&&(y[_++]=D)}return y}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return eo(tt(g)?ai(g):[g],Dn(c,1))}var oD=ct(function(l,c){return hn(l)?_a(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var y=l==null?0:l.length;return y?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=y),rx(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),Ml(l,We(c,3),y)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_-1;return g!==t&&(y=ot(g),y=g<0?Cn(_+y,0):An(y,_-1)),Ml(l,We(c,3),y,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:ot(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var y=l[c];_[y[0]]=y[1]}return _}function M_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),fs(l,c,y)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),CD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function yD(l,c){return l==null?"":_L.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_;return g!==t&&(y=ot(g),y=y<0?Cn(_+y,0):An(y,_-1)),c===c?tL(l,c,y):Ml(l,pm,y,!0)}function SD(l,c){return l&&l.length?Km(l,ot(c)):t}var ED=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Rr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(y){return Mr(y,g)?+y:y}).sort(o_)),_});function TD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,y=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),y.push(_))}return Ym(l,y),g}function eh(l){return l==null?l:yL.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:ot(c),g=g===t?_:ot(g)),Fi(l,c,g)):[]}function kD(l,c){return tu(l,c)}function ND(l,c,g){return Fd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Qi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function RD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Qi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Xm(l):[]}function FD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:ot(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ct(function(l){return ro(Dn(l,1,hn,!0))}),UD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),ro(Dn(l,1,hn,!0),We(c,2))}),jD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,ro(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?ro(l):[]}function GD(l,c){return l&&l.length?ro(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?ro(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return wi(c,t,_)})}var YD=ct(function(l,c){return hn(l)?_a(l,c):[]}),ZD=ct(function(l){return Wd(Jr(l,hn))}),XD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),QD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),JD=ct(th);function eT(l,c){return t_(l||[],c||[],ma)}function tT(l,c){return t_(l||[],c||[],Ca)}var nT=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function iT(l,c){return c(l),l}function du(l,c){return c(l)}var rT=Rr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,y=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Mr(g)?this.thru(y):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[y],thisArg:t}),new Mi(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function oT(){return B_(this)}function sT(){return new Mi(this.value(),this.__chain__)}function aT(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lT(){return this}function uT(l){for(var c,g=this;g instanceof Zl;){var _=N_(g);_.__index__=0,_.__values__=t,c?y.__wrapped__=_:c=_;var y=_;g=g.__wrapped__}return y.__wrapped__=l,c}function cT(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[eh],thisArg:t}),new Mi(c,this.__chain__)}return this.thru(eh)}function dT(){return e_(this.__wrapped__,this.__actions__)}var hT=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fT(l,c,g){var _=tt(l)?fm:ix;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function gT(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var pT=d_(A_),mT=d_(O_);function _T(l,c){return Dn(hu(l,c),1)}function vT(l,c){return Dn(hu(l,c),U)}function bT(l,c,g){return g=g===t?1:ot(g),Dn(hu(l,c),g)}function W_(l,c){var g=tt(l)?Oi:io;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?BE:Pm;return g(l,We(c,3))}var CT=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function yT(l,c,g,_){l=li(l)?l:Ls(l),g=g&&!_?ot(g):0;var y=l.length;return g<0&&(g=Cn(y+g,0)),_u(l)?g<=y&&l.indexOf(c,g)>-1:!!y&&fs(l,c,g)>-1}var wT=ct(function(l,c,g){var _=-1,y=typeof c=="function",D=li(l)?ee(l.length):[];return io(l,function(P){D[++_]=y?wi(c,P,g):va(P,c,g)}),D}),ST=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function ET(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),Gm(l,c,g))}var LT=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xT(l,c,g){var _=tt(l)?fd:_m,y=arguments.length<3;return _(l,We(c,4),g,y,io)}function DT(l,c,g){var _=tt(l)?WE:_m,y=arguments.length<3;return _(l,We(c,4),g,y,Pm)}function TT(l,c){var g=tt(l)?Jr:Fm;return g(l,pu(We(c,3)))}function IT(l){var c=tt(l)?Am:yx;return c(l)}function kT(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=ot(c);var _=tt(l)?QL:wx;return _(l,c)}function NT(l){var c=tt(l)?JL:Ex;return c(l)}function AT(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function OT(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var RT=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),Gm(l,Dn(c,1),[])}),fu=gL||function(){return xn.Date.now()};function MT(l,c){if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=E;if(g.length){var y=to(g,Ss(nh));_|=N}return Or(l,_,c,g,y)}),z_=ct(function(l,c,g){var _=E|S;if(g.length){var y=to(g,Ss(z_));_|=N}return Or(c,_,l,g,y)});function U_(l,c,g){c=g?t:c;var _=Or(l,L,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,y,D,P,V,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Ri(s);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Ji=_,Br=y;return _=y=t,ue=fn,P=l.apply(Br,Ji),P}function ze(fn){return ue=fn,V=Sa(ht,c),ce?Ne(fn):P}function lt(fn){var Ji=fn-Z,Br=fn-ue,dv=c-Ji;return ge?An(dv,D-Br):dv}function Ue(fn){var Ji=fn-Z,Br=fn-ue;return Z===t||Ji>=c||Ji<0||ge&&Br>=D}function ht(){var fn=fu();if(Ue(fn))return vt(fn);V=Sa(ht,lt(fn))}function vt(fn){return V=t,Se&&_?Ne(fn):(_=y=t,P)}function xi(){V!==t&&n_(V),ue=0,_=Z=y=V=t}function Zn(){return V===t?P:vt(fu())}function Di(){var fn=fu(),Ji=Ue(fn);if(_=arguments,y=this,Z=fn,Ji){if(V===t)return ze(Z);if(ge)return n_(V),V=Sa(ht,c),Ne(Z)}return V===t&&(V=Sa(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var PT=ct(function(l,c){return Mm(l,1,c)}),FT=ct(function(l,c,g){return Mm(l,Wi(c)||0,g)});function BT(l){return Or(l,q)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Ri(s);var g=function(){var _=arguments,y=c?c.apply(this,_):_[0],D=g.cache;if(D.has(y))return D.get(y);var P=l.apply(this,_);return g.cache=D.set(y,P)||D,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Ri(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WT(l){return $_(2,l)}var VT=xx(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var y=-1,D=An(_.length,g);++y<D;)_[y]=c[y].call(this,_[y]);return wi(l,this,_)})}),ih=ct(function(l,c){var g=to(c,Ss(ih));return Or(l,N,t,c,g)}),G_=ct(function(l,c){var g=to(c,Ss(G_));return Or(l,H,t,c,g)}),HT=Rr(function(l,c){return Or(l,R,t,t,t,c)});function $T(l,c){if(typeof l!="function")throw new Ri(s);return c=c===t?c:ot(c),ct(l,c)}function zT(l,c){if(typeof l!="function")throw new Ri(s);return c=c==null?0:Cn(ot(c),0),ct(function(g){var _=g[c],y=so(g,0,c);return _&&eo(y,_),wi(l,this,y)})}function UT(l,c,g){var _=!0,y=!0;if(typeof l!="function")throw new Ri(s);return tn(g)&&(_="leading"in g?!!g.leading:_,y="trailing"in g?!!g.trailing:y),K_(l,c,{leading:_,maxWait:c,trailing:y})}function jT(l){return H_(l,1)}function KT(l,c){return ih(Hd(c),l)}function GT(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qT(l){return Pi(l,m)}function YT(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZT(l){return Pi(l,f|m)}function XT(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QT(l,c){return c==null||Rm(l,c,En(c))}function Qi(l,c){return l===c||l!==l&&c!==c}var JT=au(Id),eI=au(function(l,c){return l>=c}),Bo=Vm(function(){return arguments}())?Vm:function(l){return sn(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,tI=am?Si(am):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return sn(l)&&li(l)}function nI(l){return l===!0||l===!1||sn(l)&&qn(l)==At}var ao=mL||gh,iI=lm?Si(lm):cx;function rI(l){return sn(l)&&l.nodeType===1&&!Ea(l)}function oI(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||ao(l)||Es(l)||Bo(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sI(l,c){return ba(l,c)}function aI(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?ba(l,c,t,g):!!_}function rh(l){if(!sn(l))return!1;var c=qn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Ea(l)}function lI(l){return typeof l=="number"&&Tm(l)}function Pr(l){if(!tn(l))return!1;var c=qn(l);return c==Xe||c==on||c==rt||c==oi}function q_(l){return typeof l=="number"&&l==ot(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=G}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function sn(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):hx;function uI(l,c){return l===c||Nd(l,c,qd(c))}function cI(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,qd(c),g)}function dI(l){return Z_(l)&&l!=+l}function hI(l){if(Yx(l))throw new Qe(o);return Hm(l)}function fI(l){return l===null}function gI(l){return l==null}function Z_(l){return typeof l=="number"||sn(l)&&qn(l)==dn}function Ea(l){if(!sn(l)||qn(l)!=Wn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cL}var oh=cm?Si(cm):fx;function pI(l){return q_(l)&&l>=-G&&l<=G}var X_=dm?Si(dm):gx;function _u(l){return typeof l=="string"||!tt(l)&&sn(l)&&qn(l)==pn}function Li(l){return typeof l=="symbol"||sn(l)&&qn(l)==Ci}var Es=hm?Si(hm):px;function mI(l){return l===t}function _I(l){return sn(l)&&On(l)==Fe}function vI(l){return sn(l)&&qn(l)==pt}var bI=au(Od),CI=au(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return _u(l)?Zi(l):ai(l);if(da&&l[da])return QE(l[da]());var c=On(l),g=c==Kt?Cd:c==Pt?Pl:Ls;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function ot(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Ro(ot(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Li(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Te.test(l)?ME(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return vr(l,ui(l))}function yI(l){return l?Ro(ot(l),-G,G):l===0?l:0}function xt(l){return l==null?"":Ei(l)}var wI=ys(function(l,c){if(wa(c)||li(c)){vr(c,En(c),l);return}for(var g in c)Nt.call(c,g)&&ma(l,g,c[g])}),tv=ys(function(l,c){vr(c,ui(c),l)}),vu=ys(function(l,c,g,_){vr(c,ui(c),l,_)}),SI=ys(function(l,c,g,_){vr(c,En(c),l,_)}),EI=Rr(xd);function LI(l,c){var g=Cs(l);return c==null?g:Om(g,c)}var xI=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,y=_>2?c[2]:t;for(y&&Yn(c[0],c[1],y)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),V=-1,Z=P.length;++V<Z;){var ue=P[V],ce=l[ue];(ce===t||Qi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),DI=ct(function(l){return l.push(t,v_),wi(nv,t,l)});function TI(l,c){return gm(l,We(c,3),_r)}function II(l,c){return gm(l,We(c,3),Td)}function kI(l,c){return l==null?l:Dd(l,We(c,3),ui)}function NI(l,c){return l==null?l:Bm(l,We(c,3),ui)}function AI(l,c){return l&&_r(l,We(c,3))}function OI(l,c){return l&&Td(l,We(c,3))}function RI(l){return l==null?[]:Jl(l,En(l))}function MI(l){return l==null?[]:Jl(l,ui(l))}function sh(l,c,g){var _=l==null?t:Mo(l,c);return _===t?g:_}function PI(l,c){return l!=null&&y_(l,c,ox)}function ah(l,c){return l!=null&&y_(l,c,sx)}var FI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},uh(ci)),BI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),WI=ct(va);function En(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):mx(l)}function VI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,c(_,y,D),_)}),g}function HI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,y,c(_,y,D))}),g}var $I=ys(function(l,c,g){eu(l,c,g)}),nv=ys(function(l,c,g,_){eu(l,c,g,_)}),zI=Rr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=oo(D,l),_||(_=D.length>1),D}),vr(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var y=c.length;y--;)Bd(g,c[y]);return g});function UI(l,c){return iv(l,pu(We(c)))}var jI=Rr(function(l,c){return l==null?{}:vx(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),qm(l,g,function(_,y){return c(_,y[0])})}function KI(l,c,g){c=oo(c,l);var _=-1,y=c.length;for(y||(y=1,l=t);++_<y;){var D=l==null?t:l[br(c[_])];D===t&&(_=y,D=g),l=Pr(D)?D.call(l):D}return l}function GI(l,c,g){return l==null?l:Ca(l,c,g)}function qI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Ca(l,c,g,_)}var rv=m_(En),ov=m_(ui);function YI(l,c,g){var _=tt(l),y=_||ao(l)||Es(l);if(c=We(c,4),g==null){var D=l&&l.constructor;y?g=_?new D:[]:tn(l)?g=Pr(D)?Cs(zl(l)):{}:g={}}return(y?Oi:_r)(l,function(P,V,Z){return c(g,P,V,Z)}),g}function ZI(l,c){return l==null?!0:Bd(l,c)}function XI(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function QI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Ls(l){return l==null?[]:bd(l,En(l))}function JI(l){return l==null?[]:bd(l,ui(l))}function ek(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Ro(Wi(l),c,g)}function tk(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var y=Im();return An(l+y*(c-l+RE("1e-"+((y+"").length-1))),c)}return Md(l,c)}var ik=ws(function(l,c,g){return c=c.toLowerCase(),l+(g?sv(c):c)});function sv(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,GE).replace(EE,"")}function rk(l,c,g){l=xt(l),c=Ei(c);var _=l.length;g=g===t?_:Ro(ot(g),0,_);var y=g;return g-=c.length,g>=0&&l.slice(g,y)==c}function ok(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qE):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var ak=ws(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lk=ws(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uk=c_("toLowerCase");function ck(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;if(!c||_>=c)return l;var y=(c-_)/2;return su(Gl(y),g)+l+su(Kl(y),g)}function dk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fk(l,c,g){return g||c==null?c=0:c&&(c=+c),CL(xt(l).replace(pe,""),c||0)}function gk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=ot(c),Pd(xt(l),c)}function pk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mk=ws(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _k(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!oh(c))&&(c=Ei(c),!c&&gs(l))?so(Zi(l),0,g):l.split(c,g)):[]}var vk=ws(function(l,c,g){return l+(g?" ":"")+lh(c)});function bk(l,c,g){return l=xt(l),g=g==null?0:Ro(ot(g),0,l.length),c=Ei(c),l.slice(g,g+c.length)==c}function Ck(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,__);var y=vu({},c.imports,_.imports,__),D=En(y),P=bd(y,D),V,Z,ue=0,ce=c.interpolate||st,ge="__p += '",Se=yd((c.escape||st).source+"|"+ce.source+"|"+(ce===is?F:st).source+"|"+(c.evaluate||st).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IE+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,YE),ht&&(V=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Ba,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function yk(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Zi(c),D=bm(_,y),P=Cm(_,y)+1;return so(_,D,P).join("")}function Ek(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,wm(l)+1);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Cm(_,Zi(c))+1;return so(_,0,y).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=bm(_,Zi(c));return so(_,y).join("")}function xk(l,c){var g=X,_=$;if(tn(c)){var y="separator"in c?c.separator:y;g="length"in c?ot(c.length):g,_="omission"in c?Ei(c.omission):_}l=xt(l);var D=l.length;if(gs(l)){var P=Zi(l);D=P.length}if(g>=D)return l;var V=g-ps(_);if(V<1)return _;var Z=P?so(P,0,V).join(""):l.slice(0,V);if(y===t)return Z+_;if(P&&(V+=Z.length-V),oh(y)){if(l.slice(V).search(y)){var ue,ce=Z;for(y.global||(y=yd(y.source,xt(te.exec(y))+"g")),y.lastIndex=0;ue=y.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?V:ge)}}else if(l.indexOf(Ei(y),V)!=V){var Se=Z.lastIndexOf(y);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function Dk(l){return l=xt(l),l&&rr.test(l)?l.replace(qs,nL):l}var Tk=ws(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?XE(l)?oL(l):$E(l):l.match(c)||[]}var uv=ct(function(l,c){try{return wi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Rr(function(l,c){return Oi(c,function(g){g=br(g),Ar(l,g,nh(l[g],l))}),l});function kk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Ri(s);return[g(_[0]),_[1]]}):[],ct(function(_){for(var y=-1;++y<c;){var D=l[y];if(wi(D[0],this,_))return wi(D[1],this,_)}})}function Nk(l){return nx(Pi(l,f))}function uh(l){return function(){return l}}function Ak(l,c){return l==null||l!==l?c:l}var Ok=h_(),Rk=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Pk(l,c){return jm(l,Pi(c,f))}var Fk=ct(function(l,c){return function(g){return va(g,l,c)}}),Bk=ct(function(l,c){return function(g){return va(l,g,c)}});function dh(l,c,g){var _=En(c),y=Jl(c,_);g==null&&!(tn(c)&&(y.length||!_.length))&&(g=c,c=l,l=this,y=Jl(c,En(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(y,function(V){var Z=c[V];l[V]=Z,P&&(l.prototype[V]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,eo([this.value()],arguments))})}),l}function Wk(){return xn._===this&&(xn._=dL),this}function hh(){}function Vk(l){return l=ot(l),ct(function(c){return Km(c,l)})}var Hk=zd(Jt),$k=zd(fm),zk=zd(gd);function cv(l){return Zd(l)?pd(br(l)):bx(l)}function Uk(l){return function(c){return l==null?t:Mo(l,c)}}var jk=g_(),Kk=g_(!0);function fh(){return[]}function gh(){return!1}function Gk(){return{}}function qk(){return""}function Yk(){return!0}function Zk(l,c){if(l=ot(l),l<1||l>G)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var y=vd(_,c);++g<l;)c(g);return y}function Xk(l){return tt(l)?Jt(l,br):Li(l)?[l]:ai(k_(xt(l)))}function Qk(l){var c=++uL;return xt(l)+c}var Jk=ou(function(l,c){return l+c},0),eN=Ud("ceil"),tN=ou(function(l,c){return l/c},1),nN=Ud("floor");function iN(l){return l&&l.length?Ql(l,ci,Id):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Id):t}function oN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Od):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Od):t}var uN=ou(function(l,c){return l*c},1),cN=Ud("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?_d(l,ci):0}function fN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MT,x.ary=H_,x.assign=wI,x.assignIn=tv,x.assignInWith=vu,x.assignWith=SI,x.at=EI,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=GT,x.chain=B_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=kk,x.conforms=Nk,x.constant=uh,x.countBy=hT,x.create=LI,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=xI,x.defaultsDeep=DI,x.defer=PT,x.delay=FT,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gT,x.flatMap=_T,x.flatMapDeep=vT,x.flatMapDepth=bT,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BT,x.flow=Ok,x.flowRight=Rk,x.fromPairs=pD,x.functions=RI,x.functionsIn=MI,x.groupBy=CT,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=FI,x.invertBy=BI,x.invokeMap=wT,x.iteratee=ch,x.keyBy=ST,x.keys=En,x.keysIn=ui,x.map=hu,x.mapKeys=VI,x.mapValues=HI,x.matches=Mk,x.matchesProperty=Pk,x.memoize=gu,x.merge=$I,x.mergeWith=nv,x.method=Fk,x.methodOf=Bk,x.mixin=dh,x.negate=pu,x.nthArg=Vk,x.omit=zI,x.omitBy=UI,x.once=WT,x.orderBy=ET,x.over=Hk,x.overArgs=VT,x.overEvery=$k,x.overSome=zk,x.partial=ih,x.partialRight=G_,x.partition=LT,x.pick=jI,x.pickBy=iv,x.property=cv,x.propertyOf=Uk,x.pull=ED,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=xD,x.pullAt=DD,x.range=jk,x.rangeRight=Kk,x.rearg=HT,x.reject=TT,x.remove=TD,x.rest=$T,x.reverse=eh,x.sampleSize=kT,x.set=GI,x.setWith=qI,x.shuffle=NT,x.slice=ID,x.sortBy=RT,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_k,x.spread=zT,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iT,x.throttle=UT,x.thru=du,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=ov,x.toPath=Xk,x.toPlainObject=ev,x.transform=YI,x.unary=jT,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=ZI,x.unzip=th,x.unzipWith=F_,x.update=XI,x.updateWith=QI,x.values=Ls,x.valuesIn=JI,x.without=YD,x.words=lv,x.wrap=KT,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eT,x.zipObjectDeep=tT,x.zipWith=nT,x.entries=rv,x.entriesIn=ov,x.extend=tv,x.extendWith=vu,dh(x,x),x.add=Jk,x.attempt=uv,x.camelCase=ik,x.capitalize=sv,x.ceil=eN,x.clamp=ek,x.clone=qT,x.cloneDeep=ZT,x.cloneDeepWith=XT,x.cloneWith=YT,x.conformsTo=QT,x.deburr=av,x.defaultTo=Ak,x.divide=tN,x.endsWith=rk,x.eq=Qi,x.escape=ok,x.escapeRegExp=sk,x.every=fT,x.find=pT,x.findIndex=A_,x.findKey=TI,x.findLast=mT,x.findLastIndex=O_,x.findLastKey=II,x.floor=nN,x.forEach=W_,x.forEachRight=V_,x.forIn=kI,x.forInRight=NI,x.forOwn=AI,x.forOwnRight=OI,x.get=sh,x.gt=JT,x.gte=eI,x.has=PI,x.hasIn=ah,x.head=M_,x.identity=ci,x.includes=yT,x.indexOf=mD,x.inRange=tk,x.invoke=WI,x.isArguments=Bo,x.isArray=tt,x.isArrayBuffer=tI,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nI,x.isBuffer=ao,x.isDate=iI,x.isElement=rI,x.isEmpty=oI,x.isEqual=sI,x.isEqualWith=aI,x.isError=rh,x.isFinite=lI,x.isFunction=Pr,x.isInteger=q_,x.isLength=mu,x.isMap=Y_,x.isMatch=uI,x.isMatchWith=cI,x.isNaN=dI,x.isNative=hI,x.isNil=gI,x.isNull=fI,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=sn,x.isPlainObject=Ea,x.isRegExp=oh,x.isSafeInteger=pI,x.isSet=X_,x.isString=_u,x.isSymbol=Li,x.isTypedArray=Es,x.isUndefined=mI,x.isWeakMap=_I,x.isWeakSet=vI,x.join=yD,x.kebabCase=ak,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=lk,x.lowerFirst=uk,x.lt=bI,x.lte=CI,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Gk,x.stubString=qk,x.stubTrue=Yk,x.multiply=uN,x.nth=SD,x.noConflict=Wk,x.noop=hh,x.now=fu,x.pad=ck,x.padEnd=dk,x.padStart=hk,x.parseInt=fk,x.random=nk,x.reduce=xT,x.reduceRight=DT,x.repeat=gk,x.replace=pk,x.result=KI,x.round=cN,x.runInContext=Y,x.sample=IT,x.size=AT,x.snakeCase=mk,x.some=OT,x.sortedIndex=kD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=RD,x.sortedLastIndexOf=MD,x.startCase=vk,x.startsWith=bk,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=Ck,x.times=Zk,x.toFinite=Fr,x.toInteger=ot,x.toLength=J_,x.toLower=yk,x.toNumber=Wi,x.toSafeInteger=yI,x.toString=xt,x.toUpper=wk,x.trim=Sk,x.trimEnd=Ek,x.trimStart=Lk,x.truncate=xk,x.unescape=Dk,x.uniqueId=Qk,x.upperCase=Tk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=M_,dh(x,function(){var l={};return _r(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(ot(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(y){var D=this.clone();return D.__iteratees__.push({iteratee:We(y,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return va(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=ot(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=ot(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},_r(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),y=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);y&&(x.prototype[c]=function(){var P=this.__wrapped__,V=_?[1]:arguments,Z=P instanceof mt,ue=V[0],ce=Z||tt(P),ge=function(ht){var vt=y.apply(x,eo([ht],V));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,V);return Ue.__actions__.push({func:du,args:[ge],thisArg:t}),new Mi(Ue,Se)}return ze&&lt?l.apply(this,V):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var y=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],y)}return this[g](function(P){return c.apply(tt(P)?P:[],y)})}}),_r(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DL,mt.prototype.reverse=TL,mt.prototype.value=IL,x.prototype.at=rT,x.prototype.chain=oT,x.prototype.commit=sT,x.prototype.next=aT,x.prototype.plant=uT,x.prototype.reverse=cT,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dT,x.prototype.first=x.prototype.head,da&&(x.prototype[da]=lT),x},ms=sL();ko?((ko.exports=ms)._=ms,cd._=ms):xn._=ms}).call(fy)}),_h={browserCheck:function(){var e={};if(_h.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge?\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox||e.edge)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1024;)t=Number((t/1024).toFixed(2)),r++;return"".concat(t," ").concat(n[r])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){var n=t;n||(n=window.location.href);var r=e.replace(/[\[\]]/g,"\\$&"),o=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),s=o.exec(n);if(!s)return null;if(!s[2])return"";var a=decodeURIComponent(s[2].replace(/\+/g," "));if(a==="null")return null;if(a!=="undefined")return a},generateFullUrlPath:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new URLSearchParams(t),r=n.toString();return e+(r?"?".concat(r):"")},getQueryParameters:function(e){var t=new URLSearchParams(e),n=Object.fromEntries(t.entries());for(var r in n)n[r]==="null"&&(n[r]=null),n[r]==="undefined"&&(n[r]=void 0);return n},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){var n=e;if(!n||n===1/0)return"0%";n>1&&(n=1);var r=t||2;return r=Math.pow(10,r),Math.round(n*r*100)/r+"%"},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){var t=e;if(t==null||t==="")return"0";t="".concat(e);var n=t.split("."),r=HX(n,2),o=r[0],s=r[1];return"".concat(o.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(s?".".concat(s):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(o,s){for(var a=0,u=0,d=n;u<d.length;u++){var h=d[u];if(a=h(o,s),a!==0)return a}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){var t=_h.trim(e);return t.charAt(0)==="{"&&t.charAt(t.length-1)==="}"||t.charAt(0)==="["&&t.charAt(t.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function o(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var s="num",a="",u=0;u<e;u++)s==="num"?(a+=o(t),s="lower"):s==="lower"?(a+=o(n),s="upper"):s==="upper"&&(a+=o(r),s="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!_h.isEqual(this.state,n)||!_h.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||r>=65376&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],o=0;o*t<n;)r.push(e.slice(o*t,(o+1)*t)),o++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!_h.isObj(e)))return Object.entries(e).forEach(function(t){var n=HX(t,2),r=n[0],o=n[1];o&&_h.isObj(o)?_h.removeEmpty(o):_h.isEmpty(o)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!Q7.isPlainObject(e)||!Q7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=y1e({},e);return Q7.forEach(t,function(o,s){s in e?r[s]=_h.mergeDeep(e[s],o):r[s]=o}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,o=e.successCallback,s=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return s(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return s(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),o&&o(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["ä","å","æ","ç","è","é"];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var o=e.length||0;for(n=0;n<o;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}},D1e={getCookie:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.cookie,n=t.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(n!=null)try{return unescape(decodeURI(n[2]))}catch{return n[2]}return null},getAllCookies:function(){var e={};try{document.cookie.split("; ").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]})}catch{throw new Error("Cookie解析失败，请检查Cookie格式！")}return e},deleteCookie:function(e,t,n){var r=new Date(0),o=t?"; domain=".concat(t):"",s=n||"/";document.cookie=e+"=; expires="+r.toUTCString()+o+"; path="+s},deleteAllCookies:function(e,t){for(var n=document.cookie.split(";"),r=0;r<n.length;r++)n[r]&&this.deleteCookie(n[r].split("=")[0],e,t)},setCookie:function(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"/",s="";if(n){var a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),s="; expires="+a.toUTCString()}var u="";r&&(u="; domain="+r),document.cookie=e+"="+t+s+u+"; path="+o}},UC=oae(function(i,e){(function(t,n){i.exports=n()})(fy,function(){var t=1e3,n=6e4,r=36e5,o="millisecond",s="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},L=function(O,B,W){var j=String(O);return!j||j.length>=B?O:""+Array(B+1-j.length).join(W)+O},A={s:L,z:function(O){var B=-O.utcOffset(),W=Math.abs(B),j=Math.floor(W/60),U=W%60;return(B<=0?"+":"-")+L(j,2,"0")+":"+L(U,2,"0")},m:function O(B,W){if(B.date()<W.date())return-O(W,B);var j=12*(W.year()-B.year())+(W.month()-B.month()),U=B.clone().add(j,f),G=W-U<0,z=B.clone().add(j+(G?-1:1),f);return+(-(j+(W-U)/(G?U-z:z-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s,ms:o,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",H={};H[N]=w;var M=function(O){return O instanceof $},R=function O(B,W,j){var U;if(!B)return N;if(typeof B=="string"){var G=B.toLowerCase();H[G]&&(U=G),W&&(H[G]=W,U=G);var z=B.split("-");if(!U&&z.length>1)return O(z[0])}else{var k=B.name;H[k]=B,U=k}return!j&&U&&(N=U),U||!j&&N},q=function(O,B){if(M(O))return O.clone();var W=typeof B=="object"?B:{};return W.date=O,W.args=arguments,new $(W)},X=A;X.l=R,X.i=M,X.w=function(O,B){return q(O,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var $=function(){function O(W){this.$L=R(W.locale,null,!0),this.parse(W)}var B=O.prototype;return B.parse=function(W){this.$d=function(j){var U=j.date,G=j.utc;if(U===null)return new Date(NaN);if(X.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var z=U.match(E);if(z){var k=z[2]-1||0,K=(z[7]||"0").substring(0,3);return G?new Date(Date.UTC(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)):new Date(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)}}return new Date(U)}(W),this.$x=W.x||{},this.init()},B.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},B.$utils=function(){return X},B.isValid=function(){return this.$d.toString()!==b},B.isSame=function(W,j){var U=q(W);return this.startOf(j)<=U&&U<=this.endOf(j)},B.isAfter=function(W,j){return q(W)<this.startOf(j)},B.isBefore=function(W,j){return this.endOf(j)<q(W)},B.$g=function(W,j,U){return X.u(W)?this[j]:this.set(U,W)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(W,j){var U=this,G=!!X.u(j)||j,z=X.p(W),k=function(At,Re){var ut=X.w(U.$u?Date.UTC(U.$y,Re,At):new Date(U.$y,Re,At),U);return G?ut:ut.endOf(d)},K=function(At,Re){return X.w(U.toDate()[At].apply(U.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(Re)),U)},fe=this.$W,ne=this.$M,be=this.$D,De="set"+(this.$u?"UTC":"");switch(z){case m:return G?k(1,0):k(31,11);case f:return G?k(1,ne):k(0,ne+1);case h:var Ve=this.$locale().weekStart||0,rt=(fe<Ve?fe+7:fe)-Ve;return k(G?be-rt:be+(6-rt),ne);case d:case v:return K(De+"Hours",0);case u:return K(De+"Minutes",1);case a:return K(De+"Seconds",2);case s:return K(De+"Milliseconds",3);default:return this.clone()}},B.endOf=function(W){return this.startOf(W,!1)},B.$set=function(W,j){var U,G=X.p(W),z="set"+(this.$u?"UTC":""),k=(U={},U[d]=z+"Date",U[v]=z+"Date",U[f]=z+"Month",U[m]=z+"FullYear",U[u]=z+"Hours",U[a]=z+"Minutes",U[s]=z+"Seconds",U[o]=z+"Milliseconds",U)[G],K=G===d?this.$D+(j-this.$W):j;if(G===f||G===m){var fe=this.clone().set(v,1);fe.$d[k](K),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else k&&this.$d[k](K);return this.init(),this},B.set=function(W,j){return this.clone().$set(W,j)},B.get=function(W){return this[X.p(W)]()},B.add=function(W,j){var U,G=this;W=Number(W);var z=X.p(j),k=function(ne){var be=q(G);return X.w(be.date(be.date()+Math.round(ne*W)),G)};if(z===f)return this.set(f,this.$M+W);if(z===m)return this.set(m,this.$y+W);if(z===d)return k(1);if(z===h)return k(7);var K=(U={},U[a]=n,U[u]=r,U[s]=t,U)[z]||1,fe=this.$d.getTime()+W*K;return X.w(fe,this)},B.subtract=function(W,j){return this.add(-1*W,j)},B.format=function(W){var j=this,U=this.$locale();if(!this.isValid())return U.invalidDate||b;var G=W||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),k=this.$H,K=this.$m,fe=this.$M,ne=U.weekdays,be=U.months,De=function(Re,ut,Ct,Xe){return Re&&(Re[ut]||Re(j,G))||Ct[ut].slice(0,Xe)},Ve=function(Re){return X.s(k%12||12,Re,"0")},rt=U.meridiem||function(Re,ut,Ct){var Xe=Re<12?"AM":"PM";return Ct?Xe.toLowerCase():Xe},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:De(U.monthsShort,fe,be,3),MMMM:De(be,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:De(U.weekdaysMin,this.$W,ne,2),ddd:De(U.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(k),HH:X.s(k,2,"0"),h:Ve(1),hh:Ve(2),a:rt(k,K,!0),A:rt(k,K,!1),m:String(K),mm:X.s(K,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return G.replace(S,function(Re,ut){return ut||At[Re]||z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(W,j,U){var G,z=X.p(j),k=q(W),K=(k.utcOffset()-this.utcOffset())*n,fe=this-k,ne=X.m(this,k);return ne=(G={},G[m]=ne/12,G[f]=ne,G[p]=ne/3,G[h]=(fe-K)/6048e5,G[d]=(fe-K)/864e5,G[u]=fe/r,G[a]=fe/n,G[s]=fe/t,G)[z]||fe,U?ne:X.a(ne)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return H[this.$L]},B.locale=function(W,j){if(!W)return this.$L;var U=this.clone(),G=R(W,j,!0);return G&&(U.$L=G),U},B.clone=function(){return X.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},O}(),I=$.prototype;return q.prototype=I,[["$ms",o],["$s",s],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(O){I[O[1]]=function(B){return this.$g(B,O[0],O[1])}}),q.extend=function(O,B){return O.$i||(O(B,$,q),O.$i=!0),q},q.locale=R,q.isDayjs=M,q.unix=function(O){return q(1e3*O)},q.en=H[N],q.Ls=H,q.p={},q})}),T1e={formatDateTime:function(e){return UC(e).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(e){return UC(e).format("YYYY-MM-DD")},formatDateHours:function(e){return UC(e).format("YYYY-MM-DD HH:mm")},formatDayHours:function(e){return UC(e).format("MM-DD HH:mm")},formatHours:function(e){return UC(e).format("HH:mm")},formatMinute:function(e){return UC(e).format("HH:mm:ss")},formatSecond:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=0,n=0,r=0;function o(u){return r=Math.floor(u/3600),u-r*3600}function s(u){return n=Math.floor(u/60),u-n*60}function a(u){return t=u,t}return a(s(o(e))),"".concat(r?r+"h":"").concat(n?n+"m":"").concat(t?t+"s":"")||"0s"}},I1e={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},k1e=function(){function i(){iae(this,i),this.fakeHandler=null}return rae(i,[{key:"copy",value:function(t,n){var r=this;this.removeFake(),this.fakeHandlerCallback=function(){return r.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top="".concat(o,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=t,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText(n)}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(t){var n;try{n=document.execCommand("copy")}catch{n=!1}t&&t(n)}}]),i}(),N1e=function(){function i(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;iae(this,i),"indexedDB"in window?(this._storeName=n,this._version=t,this._database=e,this._openLog=r):console.log("This browser doesn't support IndexedDB")}return rae(i,[{key:"open",value:function(){var t=this;return new Promise(function(n,r){try{var o=t;if(o._db)return n(o._db);var s=indexedDB.open(o._database,o._version);s.onsuccess=function(){o._db=s.result,o._db.onversionchange=function(a){console.log("onversionchange",a)},n(s.result),console.log("Open indexedDB success!")},s.onupgradeneeded=function(a){console.log("openDb.onupgradeneeded",a),o._db=s.result,o._db.objectStoreNames.contains(o._storeName)||o._db.createObjectStore(o._storeName),n(s.result)},s.onblocked=function(a){console.log("openDb onblocked",a)},s.onerror=function(a){console.log("Maybe you not allow my web app to use IndexedDB!"),r(a)}}catch(a){console.error(a),r(a)}})}},{key:"getObjectStore",value:function(t,n){if(this._db){var r=this._db.transaction([t],n);return r.objectStore(t)}return null}},{key:"add",value:function(t,n){return this.wrapStoreOperationPromise(function(r){return r.add(t,n)})}},{key:"set",value:function(t,n){return this.log("IndexedDB set",t,n),this.wrapStoreOperationPromise(function(r){return r.put(n,t)})}},{key:"get",value:function(t){return this.log("IndexedDB get",t),this.wrapStoreOperationPromise(function(n){return n.get(t)})}},{key:"delete",value:function(t){return this.wrapStoreOperationPromise(function(n){return n.delete(t)})}},{key:"clear",value:function(){return this.wrapStoreOperationPromise(function(t){return t.clear()})}},{key:"getStore",value:function(){return this.getObjectStore(this._storeName,"readwrite")}},{key:"wrapStoreOperationPromise",value:function(t){var n=this;return new Promise(function(r,o){try{var s=n.getObjectStore(n._storeName,"readwrite");if(s){var a=t(s);a.onsuccess=function(u){return r(u.target.result)},a.onerror=function(u){return o(u)}}}catch(u){console.error(u),o(u)}})}},{key:"log",value:function(){if(this._openLog){var t;(t=console).log.apply(t,arguments)}}}]),i}(),A1e={set:function(e,t){if(t==null)delete window.localStorage[e];else{var n=FV(t)==="object"?JSON.stringify(t):t;window.localStorage[e]=n}},get:function(e){var t=window.localStorage[e]||"";try{return _h.isJSONStr(t)?JSON.parse(t):t}catch{return t}},remove:function(e){delete window.localStorage[e]},clear:function(){window.localStorage.clear()}};V0.Cookie=D1e;V0.CopyUtils=k1e;V0.DateTime=T1e;V0.Layout=I1e;V0.LocalDB=A1e;V0.LocalIndexedDB=N1e;var sae=V0.Utils=_h;const j5="mo";function Bn(i,e=j5){return i?`${e}-${i}`:""}function mn(...i){if(wr.isEmpty(i))return;const e=[];for(const t of i){if(!t)continue;const n=typeof t;if(n==="string"||n==="number"){e.push(`${t}`);continue}if(n==="object"){if(t.toString!==Object.prototype.toString){e.push(t.toString());continue}for(const r in t)Object.hasOwnProperty.call(t,r)&&t[r]&&e.push(r)}}return e.join(" ")}function gt(i,e){return`${i}__${e}`}function _n(i,e){return`${i}--${e}`}function aae(){return sae.isMacOs()?"mac":""}const K5=Object.assign({},n1e);let aF;const lF=Symbol("__molecule__root");z5.version.startsWith("18")&&(aF=K5.createRoot);function zX(i){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e}=K5;e&&typeof e=="object"&&(e.usingClientEntryPoint=i)}const uF=(i,e)=>{if(aF){zX(!0);const t=e[lF]||aF(e);zX(!1),t.render(i),e[lF]=t;return}K5.render(i,e)},lae=i=>{var e;return aF?((e=i[lF])===null||e===void 0||e.unmount(),Reflect.deleteProperty(i,lF),!0):K5.unmountComponentAtNode(i)},nw=document.querySelector.bind(document);document.querySelectorAll.bind(document);function O1e(){const i=document.body,e=document.documentElement,t=e.clientWidth,n=e.clientHeight,r=Math.max(i.scrollHeight,i.offsetHeight,n,e.scrollHeight,e.offsetHeight),o=Math.max(i.scrollWidth,i.offsetWidth,t,e.scrollWidth,e.offsetWidth);return{height:r,width:o,clientWidth:t,clientHeight:n}}function uae(i,e){const{clientWidth:t,clientHeight:n}=O1e(),r=e.x,o=e.y,s=t-r,a=n-o,u=i.offsetHeight,d=i.offsetWidth,h=s<d?r-d:r,f=a<u?o-u:o;return{x:h,y:f}}function cF(i){return{x:i.clientX,y:i.clientY}}function cae(i){switch(i){case"click":return"onClick";case"hover":return"onMouseOver";case"contextmenu":return"onContextMenu";default:return i}}function UX(i,e){let t=e.x,n=e.y;return i==="top"?n=e.y-e.height:i==="right"?t=e.x+e.width:i==="bottom"?n=e.y+e.height:i==="left"?t=e.x-e.width:i==="rightBottom"&&(t=e.x+e.width,n=e.y+e.height),{x:t,y:n}}function hM(i,e){return i.getAttribute(e)||""}function v1(i){return Object.keys(i).reduce((e,t)=>(t.startsWith("data-")&&(e[t]=i[t]),e),{})}function jX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function R1e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jX(Object(t),!0).forEach(function(n){M1e(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):jX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function M1e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function KX(i,e){return P1e(i)||F1e(i,e)||B1e(i,e)||W1e()}function P1e(i){if(Array.isArray(i))return i}function F1e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,o=!1,s,a;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){o=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function B1e(i,e){if(i){if(typeof i=="string")return GX(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return GX(i,e)}}function GX(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function W1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dae(i,e){return e={exports:{}},i(e,e.exports),e.exports}var J7=dae(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,E=1,S=2,w=4,L=8,A=16,N=32,H=64,M=128,R=256,q=512,X=30,$="...",I=800,O=16,B=1,W=2,j=3,U=1/0,G=9007199254740991,z=17976931348623157e292,k=0/0,K=4294967295,fe=K-1,ne=K>>>1,be=[["ary",M],["bind",E],["bindKey",S],["curry",L],["curryRight",A],["flip",q],["partial",N],["partialRight",H],["rearg",R]],De="[object Arguments]",Ve="[object Array]",rt="[object AsyncFunction]",At="[object Boolean]",Re="[object Date]",ut="[object DOMException]",Ct="[object Error]",Xe="[object Function]",on="[object GeneratorFunction]",Kt="[object Map]",dn="[object Number]",Sn="[object Null]",Wn="[object Object]",Jn="[object Promise]",oi="[object Proxy]",jn="[object RegExp]",Pt="[object Set]",pn="[object String]",Ci="[object Symbol]",Ie="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",bt="[object DataView]",yi="[object Float32Array]",Vt="[object Float64Array]",It="[object Int8Array]",Gt="[object Int16Array]",qt="[object Int32Array]",Bt="[object Uint8Array]",gr="[object Uint8ClampedArray]",ei="[object Uint16Array]",He="[object Uint32Array]",Ba=/\b__p \+= '';/g,Vn=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,rr=RegExp(qs.source),sl=RegExp(vn.source),qi=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$e=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,T=/\\(\\)?/g,F=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,Te=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,st=/($^)/,kt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",yt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",Hn=Ot+yt+si,or="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Wa="\\xac\\xb1\\xd7\\xf7",al="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ag="\\u2000-\\u206f",fE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Up="A-Z\\xc0-\\xd6\\xd8-\\xde",jp="\\ufe0e\\ufe0f",Kp=Wa+al+Ag+fE,od="['’]",gE="["+Ft+"]",Gp="["+Kp+"]",Ol="["+Hn+"]",qp="\\d+",pE="["+or+"]",Yp="["+$i+"]",Zp="[^"+Ft+Kp+qp+or+$i+Up+"]",sd="\\ud83c[\\udffb-\\udfff]",mE="(?:"+Ol+"|"+sd+")",Xp="[^"+Ft+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",ld="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+Up+"]",Qp="\\u200d",Jp="(?:"+Yp+"|"+Zp+")",_E="(?:"+hs+"|"+Zp+")",em="(?:"+od+"(?:d|ll|m|re|s|t|ve))?",tm="(?:"+od+"(?:D|LL|M|RE|S|T|VE))?",nm=mE+"?",im="["+jp+"]?",vE="(?:"+Qp+"(?:"+[Xp,ad,ld].join("|")+")"+im+nm+")*",bE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rm=im+nm+vE,yE="(?:"+[pE,ad,ld].join("|")+")"+rm,wE="(?:"+[Xp+Ol+"?",Ol,ad,ld,gE].join("|")+")",SE=RegExp(od,"g"),EE=RegExp(Ol,"g"),ud=RegExp(sd+"(?="+sd+")|"+wE+rm,"g"),LE=RegExp([hs+"?"+Yp+"+"+em+"(?="+[Gp,hs,"$"].join("|")+")",_E+"+"+tm+"(?="+[Gp,hs+Jp,"$"].join("|")+")",hs+"?"+Jp+"+"+em,hs+"+"+tm,CE,bE,qp,yE].join("|"),"g"),xE=RegExp("["+Qp+Ft+Hn+jp+"]"),DE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,TE=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],IE=-1,jt={};jt[yi]=jt[Vt]=jt[It]=jt[Gt]=jt[qt]=jt[Bt]=jt[gr]=jt[ei]=jt[He]=!0,jt[De]=jt[Ve]=jt[at]=jt[At]=jt[bt]=jt[Re]=jt[Ct]=jt[Xe]=jt[Kt]=jt[dn]=jt[Wn]=jt[jn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[De]=$t[Ve]=$t[at]=$t[bt]=$t[At]=$t[Re]=$t[yi]=$t[Vt]=$t[It]=$t[Gt]=$t[qt]=$t[Kt]=$t[dn]=$t[Wn]=$t[jn]=$t[Pt]=$t[pn]=$t[Ci]=$t[Bt]=$t[gr]=$t[ei]=$t[He]=!0,$t[Ct]=$t[Xe]=$t[Fe]=!1;var kE={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},RE=parseFloat,ME=parseInt,om=typeof gy=="object"&&gy&&gy.Object===Object&&gy,PE=typeof self=="object"&&self&&self.Object===Object&&self,xn=om||PE||Function("return this")(),cd=e&&!e.nodeType&&e,ko=cd&&!0&&i&&!i.nodeType&&i,sm=ko&&ko.exports===cd,dd=sm&&om.process,Ai=function(){try{var Y=ko&&ko.require&&ko.require("util").types;return Y||dd&&dd.binding&&dd.binding("util")}catch{}}(),am=Ai&&Ai.isArrayBuffer,lm=Ai&&Ai.isDate,um=Ai&&Ai.isMap,cm=Ai&&Ai.isRegExp,dm=Ai&&Ai.isSet,hm=Ai&&Ai.isTypedArray;function wi(Y,oe,ee){switch(ee.length){case 0:return Y.call(oe);case 1:return Y.call(oe,ee[0]);case 2:return Y.call(oe,ee[0],ee[1]);case 3:return Y.call(oe,ee[0],ee[1],ee[2])}return Y.apply(oe,ee)}function FE(Y,oe,ee,xe){for(var Qe=-1,St=Y==null?0:Y.length;++Qe<St;){var bn=Y[Qe];oe(xe,bn,ee(bn),Y)}return xe}function Oi(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe&&oe(Y[ee],ee,Y)!==!1;);return Y}function BE(Y,oe){for(var ee=Y==null?0:Y.length;ee--&&oe(Y[ee],ee,Y)!==!1;);return Y}function fm(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(!oe(Y[ee],ee,Y))return!1;return!0}function Jr(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];oe(bn,ee,Y)&&(St[Qe++]=bn)}return St}function Rl(Y,oe){var ee=Y==null?0:Y.length;return!!ee&&fs(Y,oe,0)>-1}function hd(Y,oe,ee){for(var xe=-1,Qe=Y==null?0:Y.length;++xe<Qe;)if(ee(oe,Y[xe]))return!0;return!1}function Jt(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length,Qe=Array(xe);++ee<xe;)Qe[ee]=oe(Y[ee],ee,Y);return Qe}function eo(Y,oe){for(var ee=-1,xe=oe.length,Qe=Y.length;++ee<xe;)Y[Qe+ee]=oe[ee];return Y}function fd(Y,oe,ee,xe){var Qe=-1,St=Y==null?0:Y.length;for(xe&&St&&(ee=Y[++Qe]);++Qe<St;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function WE(Y,oe,ee,xe){var Qe=Y==null?0:Y.length;for(xe&&Qe&&(ee=Y[--Qe]);Qe--;)ee=oe(ee,Y[Qe],Qe,Y);return ee}function gd(Y,oe){for(var ee=-1,xe=Y==null?0:Y.length;++ee<xe;)if(oe(Y[ee],ee,Y))return!0;return!1}var VE=pd("length");function HE(Y){return Y.split("")}function $E(Y){return Y.match(dt)||[]}function gm(Y,oe,ee){var xe;return ee(Y,function(Qe,St,bn){if(oe(Qe,St,bn))return xe=St,!1}),xe}function Ml(Y,oe,ee,xe){for(var Qe=Y.length,St=ee+(xe?1:-1);xe?St--:++St<Qe;)if(oe(Y[St],St,Y))return St;return-1}function fs(Y,oe,ee){return oe===oe?eL(Y,oe,ee):Ml(Y,pm,ee)}function zE(Y,oe,ee,xe){for(var Qe=ee-1,St=Y.length;++Qe<St;)if(xe(Y[Qe],oe))return Qe;return-1}function pm(Y){return Y!==Y}function mm(Y,oe){var ee=Y==null?0:Y.length;return ee?_d(Y,oe)/ee:k}function pd(Y){return function(oe){return oe==null?t:oe[Y]}}function md(Y){return function(oe){return Y==null?t:Y[oe]}}function _m(Y,oe,ee,xe,Qe){return Qe(Y,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UE(Y,oe){var ee=Y.length;for(Y.sort(oe);ee--;)Y[ee]=Y[ee].value;return Y}function _d(Y,oe){for(var ee,xe=-1,Qe=Y.length;++xe<Qe;){var St=oe(Y[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function vd(Y,oe){for(var ee=-1,xe=Array(Y);++ee<Y;)xe[ee]=oe(ee);return xe}function jE(Y,oe){return Jt(oe,function(ee){return[ee,Y[ee]]})}function vm(Y){return Y&&Y.slice(0,wm(Y)+1).replace(pe,"")}function Si(Y){return function(oe){return Y(oe)}}function bd(Y,oe){return Jt(oe,function(ee){return Y[ee]})}function ca(Y,oe){return Y.has(oe)}function bm(Y,oe){for(var ee=-1,xe=Y.length;++ee<xe&&fs(oe,Y[ee],0)>-1;);return ee}function Cm(Y,oe){for(var ee=Y.length;ee--&&fs(oe,Y[ee],0)>-1;);return ee}function KE(Y,oe){for(var ee=Y.length,xe=0;ee--;)Y[ee]===oe&&++xe;return xe}var GE=md(kE),qE=md(NE);function YE(Y){return"\\"+OE[Y]}function ZE(Y,oe){return Y==null?t:Y[oe]}function gs(Y){return xE.test(Y)}function XE(Y){return DE.test(Y)}function QE(Y){for(var oe,ee=[];!(oe=Y.next()).done;)ee.push(oe.value);return ee}function Cd(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe,Qe){ee[++oe]=[Qe,xe]}),ee}function ym(Y,oe){return function(ee){return Y(oe(ee))}}function to(Y,oe){for(var ee=-1,xe=Y.length,Qe=0,St=[];++ee<xe;){var bn=Y[ee];(bn===oe||bn===h)&&(Y[ee]=h,St[Qe++]=ee)}return St}function Pl(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=xe}),ee}function JE(Y){var oe=-1,ee=Array(Y.size);return Y.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eL(Y,oe,ee){for(var xe=ee-1,Qe=Y.length;++xe<Qe;)if(Y[xe]===oe)return xe;return-1}function tL(Y,oe,ee){for(var xe=ee+1;xe--;)if(Y[xe]===oe)return xe;return xe}function ps(Y){return gs(Y)?iL(Y):VE(Y)}function Zi(Y){return gs(Y)?rL(Y):HE(Y)}function wm(Y){for(var oe=Y.length;oe--&&J.test(Y.charAt(oe)););return oe}var nL=md(AE);function iL(Y){for(var oe=ud.lastIndex=0;ud.test(Y);)++oe;return oe}function rL(Y){return Y.match(ud)||[]}function oL(Y){return Y.match(LE)||[]}var sL=function Y(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,TE));var ee=oe.Array,xe=oe.Date,Qe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aL=oe.String,Ri=oe.TypeError,Fl=ee.prototype,lL=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lL.toString,Nt=_s.hasOwnProperty,uL=0,Sm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cL=Wl.call(Wt),dL=xn._,hL=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=sm?oe.Buffer:t,no=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),Lm=Wt.create,xm=_s.propertyIsEnumerable,Ul=Fl.splice,Dm=no?no.isConcatSpreadable:t,da=no?no.iterator:t,No=no?no.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fL=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gL=xe&&xe.now!==xn.Date.now&&xe.now,pL=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,wd=Wt.getOwnPropertySymbols,mL=Hl?Hl.isBuffer:t,Tm=oe.isFinite,_L=Fl.join,vL=ym(Wt.keys,Wt),Cn=bn.max,An=bn.min,bL=xe.now,CL=oe.parseInt,Im=bn.random,yL=Fl.reverse,Sd=Po(oe,"DataView"),ha=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),fa=Po(oe,"WeakMap"),ga=Po(Wt,"create"),ql=fa&&new fa,bs={},wL=Fo(Sd),SL=Fo(ha),EL=Fo(Ed),LL=Fo(vs),xL=Fo(fa),Yl=no?no.prototype:t,pa=Yl?Yl.valueOf:t,km=Yl?Yl.toString:t;function x(l){if(sn(l)&&!tt(l)&&!(l instanceof mt)){if(l instanceof Mi)return l;if(Nt.call(l,"__wrapped__"))return N_(l)}return new Mi(l)}var Cs=function(){function l(){}return function(c){if(!tn(c))return{};if(Lm)return Lm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Mi(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qi,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Mi.prototype=Cs(Zl.prototype),Mi.prototype.constructor=Mi;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function DL(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function TL(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function IL(){var l=this.__wrapped__.value(),c=this.__dir__,g=tt(l),_=c<0,y=g?l.length:0,D=Hx(0,y,this.__views__),P=D.start,V=D.end,Z=V-P,ue=_?V:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=An(Z,this.__takeCount__);if(!g||!_&&y==Z&&Ne==Z)return e_(l,this.__actions__);var ze=[];e:for(;Z--&&Se<Ne;){ue+=c;for(var lt=-1,Ue=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Zn=vt(Ue);if(xi==W)Ue=Zn;else if(!Zn){if(xi==B)continue e;break e}}ze[Se++]=Ue}return ze}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function kL(){this.__data__=ga?ga(null):{},this.size=0}function NL(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AL(l){var c=this.__data__;if(ga){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OL(l){var c=this.__data__;return ga?c[l]!==t:Nt.call(c,l)}function RL(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=ga&&c===t?u:c,this}Ao.prototype.clear=kL,Ao.prototype.delete=NL,Ao.prototype.get=AL,Ao.prototype.has=OL,Ao.prototype.set=RL;function kr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function ML(){this.__data__=[],this.size=0}function PL(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FL(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BL(l){return Xl(this.__data__,l)>-1}function WL(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}kr.prototype.clear=ML,kr.prototype.delete=PL,kr.prototype.get=FL,kr.prototype.has=BL,kr.prototype.set=WL;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VL(){this.size=0,this.__data__={hash:new Ao,map:new(ha||kr),string:new Ao}}function HL(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $L(l){return uu(this,l).get(l)}function zL(l){return uu(this,l).has(l)}function UL(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VL,Nr.prototype.delete=HL,Nr.prototype.get=$L,Nr.prototype.has=zL,Nr.prototype.set=UL;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jL(l){return this.__data__.set(l,u),this}function KL(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jL,Oo.prototype.has=KL;function Xi(l){var c=this.__data__=new kr(l);this.size=c.size}function GL(){this.__data__=new kr,this.size=0}function qL(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YL(l){return this.__data__.get(l)}function ZL(l){return this.__data__.has(l)}function XL(l,c){var g=this.__data__;if(g instanceof kr){var _=g.__data__;if(!ha||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Xi.prototype.clear=GL,Xi.prototype.delete=qL,Xi.prototype.get=YL,Xi.prototype.has=ZL,Xi.prototype.set=XL;function Nm(l,c){var g=tt(l),_=!g&&Bo(l),y=!g&&!_&&ao(l),D=!g&&!_&&!y&&Es(l),P=g||_||y||D,V=P?vd(l.length,aL):[],Z=V.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||y&&(ue=="offset"||ue=="parent")||D&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Mr(ue,Z)))&&V.push(ue);return V}function Am(l){var c=l.length;return c?l[Md(0,c-1)]:t}function QL(l,c){return cu(ai(l),Ro(c,0,l.length))}function JL(l){return cu(ai(l))}function Ld(l,c,g){(g!==t&&!Qi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function ma(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Qi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Qi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return io(l,function(y,D,P){c(_,y,g(y),P)}),_}function Om(l,c){return l&&vr(c,En(c),l)}function tx(l,c){return l&&vr(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function xd(l,c){for(var g=-1,_=c.length,y=ee(_),D=l==null;++g<_;)y[g]=D?t:sh(l,c[g]);return y}function Ro(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,y,D){var P,V=c&f,Z=c&p,ue=c&m;if(g&&(P=y?g(l,_,y,D):g(l)),P!==t)return P;if(!tn(l))return l;var ce=tt(l);if(ce){if(P=zx(l),!V)return ai(l,P)}else{var ge=On(l),Se=ge==Xe||ge==on;if(ao(l))return i_(l,V);if(ge==Wn||ge==De||Se&&!y){if(P=Z||Se?{}:w_(l),!V)return Z?Ax(l,tx(P,l)):Nx(l,Om(P,l))}else{if(!$t[ge])return y?l:{};P=Ux(l,ge,V)}}D||(D=new Xi);var Ne=D.get(l);if(Ne)return Ne;D.set(l,P),X_(l)?l.forEach(function(Ue){P.add(Pi(Ue,c,g,Ue,l,D))}):Y_(l)&&l.forEach(function(Ue,ht){P.set(ht,Pi(Ue,c,g,ht,l,D))});var ze=ue?Z?Kd:jd:Z?ui:En,lt=ce?t:ze(l);return Oi(lt||l,function(Ue,ht){lt&&(ht=Ue,Ue=l[ht]),ma(P,ht,Pi(Ue,c,g,ht,l,D))}),P}function nx(l){var c=En(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var y=g[_],D=c[y],P=l[y];if(P===t&&!(y in l)||!D(P))return!1}return!0}function Mm(l,c,g){if(typeof l!="function")throw new Ri(s);return Sa(function(){l.apply(t,g)},c)}function _a(l,c,g,_){var y=-1,D=Rl,P=!0,V=l.length,Z=[],ue=c.length;if(!V)return Z;g&&(c=Jt(c,Si(g))),_?(D=hd,P=!1):c.length>=r&&(D=ca,P=!1,c=new Oo(c));e:for(;++y<V;){var ce=l[y],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;Z.push(ce)}else D(c,ge,_)||Z.push(ce)}return Z}var io=l_(_r),Pm=l_(Td,!0);function ix(l,c){var g=!0;return io(l,function(_,y,D){return g=!!c(_,y,D),g}),g}function Ql(l,c,g){for(var _=-1,y=l.length;++_<y;){var D=l[_],P=c(D);if(P!=null&&(V===t?P===P&&!Li(P):g(P,V)))var V=P,Z=D}return Z}function rx(l,c,g,_){var y=l.length;for(g=ot(g),g<0&&(g=-g>y?0:y+g),_=_===t||_>y?y:ot(_),_<0&&(_+=y),_=g>_?0:J_(_);g<_;)l[g++]=c;return l}function Fm(l,c){var g=[];return io(l,function(_,y,D){c(_,y,D)&&g.push(_)}),g}function Dn(l,c,g,_,y){var D=-1,P=l.length;for(g||(g=Kx),y||(y=[]);++D<P;){var V=l[D];c>0&&g(V)?c>1?Dn(V,c-1,g,_,y):eo(y,V):_||(y[y.length]=V)}return y}var Dd=u_(),Bm=u_(!0);function _r(l,c){return l&&Dd(l,c,En)}function Td(l,c){return l&&Bm(l,c,En)}function Jl(l,c){return Jr(c,function(g){return Pr(l[g])})}function Mo(l,c){c=oo(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[br(c[g++])];return g&&g==_?l:t}function Wm(l,c,g){var _=c(l);return tt(l)?_:eo(_,g(l))}function qn(l){return l==null?l===t?Ie:Sn:No&&No in Wt(l)?Vx(l):Jx(l)}function Id(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=An(c,g)&&l<Cn(c,g)}function kd(l,c,g){for(var _=g?hd:Rl,y=l[0].length,D=l.length,P=D,V=ee(D),Z=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),Z=An(ce.length,Z),V[P]=!g&&(c||y>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=V[0];e:for(;++ge<y&&ue.length<Z;){var Ne=ce[ge],ze=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ca(Se,ze):_(ue,ze,g))){for(P=D;--P;){var lt=V[P];if(!(lt?ca(lt,ze):_(l[P],ze,g)))continue e}Se&&Se.push(ze),ue.push(Ne)}}return ue}function lx(l,c,g,_){return _r(l,function(y,D,P){c(_,g(y),D,P)}),_}function va(l,c,g){c=oo(c,l),l=x_(l,c);var _=l==null?l:l[br(Bi(c))];return _==null?t:wi(_,l,g)}function Vm(l){return sn(l)&&qn(l)==De}function ux(l){return sn(l)&&qn(l)==at}function cx(l){return sn(l)&&qn(l)==Re}function ba(l,c,g,_,y){return l===c?!0:l==null||c==null||!sn(l)&&!sn(c)?l!==l&&c!==c:dx(l,c,g,_,ba,y)}function dx(l,c,g,_,y,D){var P=tt(l),V=tt(c),Z=P?Ve:On(l),ue=V?Ve:On(c);Z=Z==De?Wn:Z,ue=ue==De?Wn:ue;var ce=Z==Wn,ge=ue==Wn,Se=Z==ue;if(Se&&ao(l)){if(!ao(c))return!1;P=!0,ce=!1}if(Se&&!ce)return D||(D=new Xi),P||Es(l)?b_(l,c,g,_,y,D):Bx(l,c,Z,g,_,y,D);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),ze=ge&&Nt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?l.value():l,Ue=ze?c.value():c;return D||(D=new Xi),y(lt,Ue,g,_,D)}}return Se?(D||(D=new Xi),Wx(l,c,g,_,y,D)):!1}function hx(l){return sn(l)&&On(l)==Kt}function Nd(l,c,g,_){var y=g.length,D=y,P=!_;if(l==null)return!D;for(l=Wt(l);y--;){var V=g[y];if(P&&V[2]?V[1]!==l[V[0]]:!(V[0]in l))return!1}for(;++y<D;){V=g[y];var Z=V[0],ue=l[Z],ce=V[1];if(P&&V[2]){if(ue===t&&!(Z in l))return!1}else{var ge=new Xi;if(_)var Se=_(ue,ce,Z,l,c,ge);if(!(Se===t?ba(ce,ue,v|b,_,ge):Se))return!1}}return!0}function Hm(l){if(!tn(l)||qx(l))return!1;var c=Pr(l)?hL:le;return c.test(Fo(l))}function fx(l){return sn(l)&&qn(l)==jn}function gx(l){return sn(l)&&On(l)==Pt}function px(l){return sn(l)&&mu(l.length)&&!!jt[qn(l)]}function $m(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?tt(l)?jm(l[0],l[1]):Um(l):cv(l)}function Ad(l){if(!wa(l))return vL(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!tn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Od(l,c){return l<c}function zm(l,c){var g=-1,_=li(l)?ee(l.length):[];return io(l,function(y,D,P){_[++g]=c(y,D,P)}),_}function Um(l){var c=qd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Nd(g,l,c)}}function jm(l,c){return Zd(l)&&S_(c)?E_(br(l),c):function(g){var _=sh(g,l);return _===t&&_===c?ah(g,l):ba(c,_,v|b)}}function eu(l,c,g,_,y){l!==c&&Dd(c,function(D,P){if(y||(y=new Xi),tn(D))_x(l,c,P,g,eu,_,y);else{var V=_?_(Qd(l,P),D,P+"",l,c,y):t;V===t&&(V=D),Ld(l,P,V)}},ui)}function _x(l,c,g,_,y,D,P){var V=Qd(l,g),Z=Qd(c,g),ue=P.get(Z);if(ue){Ld(l,g,ue);return}var ce=D?D(V,Z,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=tt(Z),Ne=!Se&&ao(Z),ze=!Se&&!Ne&&Es(Z);ce=Z,Se||Ne||ze?tt(V)?ce=V:hn(V)?ce=ai(V):Ne?(ge=!1,ce=i_(Z,!0)):ze?(ge=!1,ce=r_(Z,!0)):ce=[]:Ea(Z)||Bo(Z)?(ce=V,Bo(V)?ce=ev(V):(!tn(V)||Pr(V))&&(ce=w_(Z))):ge=!1}ge&&(P.set(Z,ce),y(ce,Z,_,D,P),P.delete(Z)),Ld(l,g,ce)}function Km(l,c){var g=l.length;if(g)return c+=c<0?g:0,Mr(c,g)?l[c]:t}function Gm(l,c,g){c.length?c=Jt(c,function(D){return tt(D)?function(P){return Mo(P,D.length===1?D[0]:D)}:D}):c=[ci];var _=-1;c=Jt(c,Si(We()));var y=zm(l,function(D,P,V){var Z=Jt(c,function(ue){return ue(D)});return{criteria:Z,index:++_,value:D}});return UE(y,function(D,P){return kx(D,P,g)})}function vx(l,c){return qm(l,c,function(g,_){return ah(l,_)})}function qm(l,c,g){for(var _=-1,y=c.length,D={};++_<y;){var P=c[_],V=Mo(l,P);g(V,P)&&Ca(D,oo(P,l),V)}return D}function bx(l){return function(c){return Mo(c,l)}}function Rd(l,c,g,_){var y=_?zE:fs,D=-1,P=c.length,V=l;for(l===c&&(c=ai(c)),g&&(V=Jt(l,Si(g)));++D<P;)for(var Z=0,ue=c[D],ce=g?g(ue):ue;(Z=y(V,ce,Z,_))>-1;)V!==l&&Ul.call(V,Z,1),Ul.call(l,Z,1);return l}function Ym(l,c){for(var g=l?c.length:0,_=g-1;g--;){var y=c[g];if(g==_||y!==D){var D=y;Mr(y)?Ul.call(l,y,1):Bd(l,y)}}return l}function Md(l,c){return l+Gl(Im()*(c-l+1))}function Cx(l,c,g,_){for(var y=-1,D=Cn(Kl((c-l)/(g||1)),0),P=ee(D);D--;)P[_?D:++y]=l,l+=g;return P}function Pd(l,c){var g="";if(!l||c<1||c>G)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ct(l,c){return Jd(L_(l,c,ci),l+"")}function yx(l){return Am(Ls(l))}function wx(l,c){var g=Ls(l);return cu(g,Ro(c,0,g.length))}function Ca(l,c,g,_){if(!tn(l))return l;c=oo(c,l);for(var y=-1,D=c.length,P=D-1,V=l;V!=null&&++y<D;){var Z=br(c[y]),ue=g;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return l;if(y!=P){var ce=V[Z];ue=_?_(ce,Z,V):t,ue===t&&(ue=tn(ce)?ce:Mr(c[y+1])?[]:{})}ma(V,Z,ue),V=V[Z]}return l}var Zm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:uh(c),writable:!0})}:ci;function Ex(l){return cu(Ls(l))}function Fi(l,c,g){var _=-1,y=l.length;c<0&&(c=-c>y?0:y+c),g=g>y?y:g,g<0&&(g+=y),y=c>g?0:g-c>>>0,c>>>=0;for(var D=ee(y);++_<y;)D[_]=l[_+c];return D}function Lx(l,c){var g;return io(l,function(_,y,D){return g=c(_,y,D),!g}),!!g}function tu(l,c,g){var _=0,y=l==null?_:l.length;if(typeof c=="number"&&c===c&&y<=ne){for(;_<y;){var D=_+y>>>1,P=l[D];P!==null&&!Li(P)&&(g?P<=c:P<c)?_=D+1:y=D}return y}return Fd(l,c,ci,g)}function Fd(l,c,g,_){var y=0,D=l==null?0:l.length;if(D===0)return 0;c=g(c);for(var P=c!==c,V=c===null,Z=Li(c),ue=c===t;y<D;){var ce=Gl((y+D)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,ze=ge===ge,lt=Li(ge);if(P)var Ue=_||ze;else ue?Ue=ze&&(_||Se):V?Ue=ze&&Se&&(_||!Ne):Z?Ue=ze&&Se&&!Ne&&(_||!lt):Ne||lt?Ue=!1:Ue=_?ge<=c:ge<c;Ue?y=ce+1:D=ce}return An(D,fe)}function Xm(l,c){for(var g=-1,_=l.length,y=0,D=[];++g<_;){var P=l[g],V=c?c(P):P;if(!g||!Qi(V,Z)){var Z=V;D[y++]=P===0?0:P}}return D}function Qm(l){return typeof l=="number"?l:Li(l)?k:+l}function Ei(l){if(typeof l=="string")return l;if(tt(l))return Jt(l,Ei)+"";if(Li(l))return km?km.call(l):"";var c=l+"";return c=="0"&&1/l==-U?"-0":c}function ro(l,c,g){var _=-1,y=Rl,D=l.length,P=!0,V=[],Z=V;if(g)P=!1,y=hd;else if(D>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,y=ca,Z=new Oo}else Z=c?[]:V;e:for(;++_<D;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=Z.length;Se--;)if(Z[Se]===ge)continue e;c&&Z.push(ge),V.push(ce)}else y(Z,ge,g)||(Z!==V&&Z.push(ge),V.push(ce))}return V}function Bd(l,c){return c=oo(c,l),l=x_(l,c),l==null||delete l[br(Bi(c))]}function Jm(l,c,g,_){return Ca(l,c,g(Mo(l,c)),_)}function nu(l,c,g,_){for(var y=l.length,D=_?y:-1;(_?D--:++D<y)&&c(l[D],D,l););return g?Fi(l,_?0:D,_?D+1:y):Fi(l,_?D+1:0,_?y:D)}function e_(l,c){var g=l;return g instanceof mt&&(g=g.value()),fd(c,function(_,y){return y.func.apply(y.thisArg,eo([_],y.args))},g)}function Wd(l,c,g){var _=l.length;if(_<2)return _?ro(l[0]):[];for(var y=-1,D=ee(_);++y<_;)for(var P=l[y],V=-1;++V<_;)V!=y&&(D[y]=_a(D[y]||P,l[V],c,g));return ro(Dn(D,1),c,g)}function t_(l,c,g){for(var _=-1,y=l.length,D=c.length,P={};++_<y;){var V=_<D?c[_]:t;g(P,l[_],V)}return P}function Vd(l){return hn(l)?l:[]}function Hd(l){return typeof l=="function"?l:ci}function oo(l,c){return tt(l)?l:Zd(l,c)?[l]:k_(xt(l))}var xx=ct;function so(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var n_=fL||function(l){return xn.clearTimeout(l)};function i_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function $d(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Tx(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function Ix(l){return pa?Wt(pa.call(l)):{}}function r_(l,c){var g=c?$d(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function o_(l,c){if(l!==c){var g=l!==t,_=l===null,y=l===l,D=Li(l),P=c!==t,V=c===null,Z=c===c,ue=Li(c);if(!V&&!ue&&!D&&l>c||D&&P&&Z&&!V&&!ue||_&&P&&Z||!g&&Z||!y)return 1;if(!_&&!D&&!ue&&l<c||ue&&g&&y&&!_&&!D||V&&g&&y||!P&&y||!Z)return-1}return 0}function kx(l,c,g){for(var _=-1,y=l.criteria,D=c.criteria,P=y.length,V=g.length;++_<P;){var Z=o_(y[_],D[_]);if(Z){if(_>=V)return Z;var ue=g[_];return Z*(ue=="desc"?-1:1)}}return l.index-c.index}function s_(l,c,g,_){for(var y=-1,D=l.length,P=g.length,V=-1,Z=c.length,ue=Cn(D-P,0),ce=ee(Z+ue),ge=!_;++V<Z;)ce[V]=c[V];for(;++y<P;)(ge||y<D)&&(ce[g[y]]=l[y]);for(;ue--;)ce[V++]=l[y++];return ce}function a_(l,c,g,_){for(var y=-1,D=l.length,P=-1,V=g.length,Z=-1,ue=c.length,ce=Cn(D-V,0),ge=ee(ce+ue),Se=!_;++y<ce;)ge[y]=l[y];for(var Ne=y;++Z<ue;)ge[Ne+Z]=c[Z];for(;++P<V;)(Se||y<D)&&(ge[Ne+g[P]]=l[y++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function vr(l,c,g,_){var y=!g;g||(g={});for(var D=-1,P=c.length;++D<P;){var V=c[D],Z=_?_(g[V],l[V],V,g,l):t;Z===t&&(Z=l[V]),y?Ar(g,V,Z):ma(g,V,Z)}return g}function Nx(l,c){return vr(l,Yd(l),c)}function Ax(l,c){return vr(l,C_(l),c)}function iu(l,c){return function(g,_){var y=tt(g)?FE:ex,D=c?c():{};return y(g,l,We(_,2),D)}}function ys(l){return ct(function(c,g){var _=-1,y=g.length,D=y>1?g[y-1]:t,P=y>2?g[2]:t;for(D=l.length>3&&typeof D=="function"?(y--,D):t,P&&Yn(g[0],g[1],P)&&(D=y<3?t:D,y=1),c=Wt(c);++_<y;){var V=g[_];V&&l(c,V,_,D)}return c})}function l_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var y=g.length,D=c?y:-1,P=Wt(g);(c?D--:++D<y)&&_(P[D],D,P)!==!1;);return g}}function u_(l){return function(c,g,_){for(var y=-1,D=Wt(c),P=_(c),V=P.length;V--;){var Z=P[l?V:++y];if(g(D[Z],Z,D)===!1)break}return c}}function Ox(l,c,g){var _=c&E,y=ya(l);function D(){var P=this&&this!==xn&&this instanceof D?y:l;return P.apply(_?g:this,arguments)}return D}function c_(l){return function(c){c=xt(c);var g=gs(c)?Zi(c):t,_=g?g[0]:c.charAt(0),y=g?so(g,1).join(""):c.slice(1);return _[l]()+y}}function ws(l){return function(c){return fd(lv(av(c).replace(SE,"")),l,"")}}function ya(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return tn(_)?_:g}}function Rx(l,c,g){var _=ya(l);function y(){for(var D=arguments.length,P=ee(D),V=D,Z=Ss(y);V--;)P[V]=arguments[V];var ue=D<3&&P[0]!==Z&&P[D-1]!==Z?[]:to(P,Z);if(D-=ue.length,D<g)return p_(l,c,ru,y.placeholder,t,P,ue,t,t,g-D);var ce=this&&this!==xn&&this instanceof y?_:l;return wi(ce,this,P)}return y}function d_(l){return function(c,g,_){var y=Wt(c);if(!li(c)){var D=We(g,3);c=En(c),g=function(V){return D(y[V],V,y)}}var P=l(c,g,_);return P>-1?y[D?c[P]:P]:t}}function h_(l){return Rr(function(c){var g=c.length,_=g,y=Mi.prototype.thru;for(l&&c.reverse();_--;){var D=c[_];if(typeof D!="function")throw new Ri(s);if(y&&!P&&lu(D)=="wrapper")var P=new Mi([],!0)}for(_=P?_:g;++_<g;){D=c[_];var V=lu(D),Z=V=="wrapper"?Gd(D):t;Z&&Xd(Z[0])&&Z[1]==(M|L|N|R)&&!Z[4].length&&Z[9]==1?P=P[lu(Z[0])].apply(P,Z[3]):P=D.length==1&&Xd(D)?P[V]():P.thru(D)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&tt(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,y,D,P,V,Z,ue){var ce=c&M,ge=c&E,Se=c&S,Ne=c&(L|A),ze=c&q,lt=Se?t:ya(l);function Ue(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Zn=Ss(Ue),Di=KE(vt,Zn);if(_&&(vt=s_(vt,_,y,Ne)),D&&(vt=a_(vt,D,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=to(vt,Zn);return p_(l,c,ru,Ue.placeholder,g,vt,fn,V,Z,ue-ht)}var Ji=ge?g:this,Br=Se?Ji[l]:l;return ht=vt.length,V?vt=eD(vt,V):ze&&ht>1&&vt.reverse(),ce&&Z<ht&&(vt.length=Z),this&&this!==xn&&this instanceof Ue&&(Br=lt||ya(Br)),Br.apply(Ji,vt)}return Ue}function f_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var y;if(g===t&&_===t)return c;if(g!==t&&(y=g),_!==t){if(y===t)return _;typeof g=="string"||typeof _=="string"?(g=Ei(g),_=Ei(_)):(g=Qm(g),_=Qm(_)),y=l(g,_)}return y}}function zd(l){return Rr(function(c){return c=Jt(c,Si(We())),ct(function(g){var _=this;return l(c,function(y){return wi(y,_,g)})})})}function su(l,c){c=c===t?" ":Ei(c);var g=c.length;if(g<2)return g?Pd(c,l):c;var _=Pd(c,Kl(l/ps(c)));return gs(c)?so(Zi(_),0,l).join(""):_.slice(0,l)}function Mx(l,c,g,_){var y=c&E,D=ya(l);function P(){for(var V=-1,Z=arguments.length,ue=-1,ce=_.length,ge=ee(ce+Z),Se=this&&this!==xn&&this instanceof P?D:l;++ue<ce;)ge[ue]=_[ue];for(;Z--;)ge[ue++]=arguments[++V];return wi(Se,y?g:this,ge)}return P}function g_(l){return function(c,g,_){return _&&typeof _!="number"&&Yn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function p_(l,c,g,_,y,D,P,V,Z,ue){var ce=c&L,ge=ce?P:t,Se=ce?t:P,Ne=ce?D:t,ze=ce?t:D;c|=ce?N:H,c&=~(ce?H:N),c&w||(c&=~(E|S));var lt=[l,c,y,Ne,ge,ze,Se,V,Z,ue],Ue=g.apply(t,lt);return Xd(l)&&D_(Ue,lt),Ue.placeholder=_,T_(Ue,l,c)}function Ud(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:An(ot(_),292),_&&Tm(g)){var y=(xt(g)+"e").split("e"),D=c(y[0]+"e"+(+y[1]+_));return y=(xt(D)+"e").split("e"),+(y[0]+"e"+(+y[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==U?function(l){return new vs(l)}:hh;function m_(l){return function(c){var g=On(c);return g==Kt?Cd(c):g==Pt?JE(c):jE(c,l(c))}}function Or(l,c,g,_,y,D,P,V){var Z=c&S;if(!Z&&typeof l!="function")throw new Ri(s);var ue=_?_.length:0;if(ue||(c&=~(N|H),_=y=t),P=P===t?P:Cn(ot(P),0),V=V===t?V:ot(V),ue-=y?y.length:0,c&H){var ce=_,ge=y;_=y=t}var Se=Z?t:Gd(l),Ne=[l,c,g,_,y,ce,ge,D,P,V];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],y=Ne[4],V=Ne[9]=Ne[9]===t?Z?0:l.length:Cn(Ne[9]-ue,0),!V&&c&(L|A)&&(c&=~(L|A)),!c||c==E)var ze=Ox(l,c,g);else c==L||c==A?ze=Rx(l,c,V):(c==N||c==(E|N))&&!y.length?ze=Mx(l,c,g,_):ze=ru.apply(t,Ne);var lt=Se?Zm:D_;return T_(lt(ze,Ne),l,c)}function __(l,c,g,_){return l===t||Qi(l,_s[g])&&!Nt.call(_,g)?c:l}function v_(l,c,g,_,y,D){return tn(l)&&tn(c)&&(D.set(c,l),eu(l,c,t,v_,D),D.delete(c)),l}function Fx(l){return Ea(l)?t:l}function b_(l,c,g,_,y,D){var P=g&v,V=l.length,Z=c.length;if(V!=Z&&!(P&&Z>V))return!1;var ue=D.get(l),ce=D.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(D.set(l,c),D.set(c,l);++ge<V;){var ze=l[ge],lt=c[ge];if(_)var Ue=P?_(lt,ze,ge,c,l,D):_(ze,lt,ge,l,c,D);if(Ue!==t){if(Ue)continue;Se=!1;break}if(Ne){if(!gd(c,function(ht,vt){if(!ca(Ne,vt)&&(ze===ht||y(ze,ht,g,_,D)))return Ne.push(vt)})){Se=!1;break}}else if(!(ze===lt||y(ze,lt,g,_,D))){Se=!1;break}}return D.delete(l),D.delete(c),Se}function Bx(l,c,g,_,y,D,P){switch(g){case bt:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!D(new $l(l),new $l(c)));case At:case Re:case dn:return Qi(+l,+c);case Ct:return l.name==c.name&&l.message==c.message;case jn:case pn:return l==c+"";case Kt:var V=Cd;case Pt:var Z=_&v;if(V||(V=Pl),l.size!=c.size&&!Z)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=b_(V(l),V(c),_,y,D,P);return P.delete(l),ce;case Ci:if(pa)return pa.call(l)==pa.call(c)}return!1}function Wx(l,c,g,_,y,D){var P=g&v,V=jd(l),Z=V.length,ue=jd(c),ce=ue.length;if(Z!=ce&&!P)return!1;for(var ge=Z;ge--;){var Se=V[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=D.get(l),ze=D.get(c);if(Ne&&ze)return Ne==c&&ze==l;var lt=!0;D.set(l,c),D.set(c,l);for(var Ue=P;++ge<Z;){Se=V[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,D):_(ht,vt,Se,l,c,D);if(!(xi===t?ht===vt||y(ht,vt,g,_,D):xi)){lt=!1;break}Ue||(Ue=Se=="constructor")}if(lt&&!Ue){var Zn=l.constructor,Di=c.constructor;Zn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Zn=="function"&&Zn instanceof Zn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return D.delete(l),D.delete(c),lt}function Rr(l){return Jd(L_(l,t,R_),l+"")}function jd(l){return Wm(l,En,Yd)}function Kd(l){return Wm(l,ui,C_)}var Gd=ql?function(l){return ql.get(l)}:hh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var y=g[_],D=y.func;if(D==null||D==l)return y.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||ch;return l=l===ch?$m:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function qd(l){for(var c=En(l),g=c.length;g--;){var _=c[g],y=l[_];c[g]=[_,y,S_(y)]}return c}function Po(l,c){var g=ZE(l,c);return Hm(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var y=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),y}var Yd=wd?function(l){return l==null?[]:(l=Wt(l),Jr(wd(l),function(c){return xm.call(l,c)}))}:fh,C_=wd?function(l){for(var c=[];l;)eo(c,Yd(l)),l=zl(l);return c}:fh,On=qn;(Sd&&On(new Sd(new ArrayBuffer(1)))!=bt||ha&&On(new ha)!=Kt||Ed&&On(Ed.resolve())!=Jn||vs&&On(new vs)!=Pt||fa&&On(new fa)!=Fe)&&(On=function(l){var c=qn(l),g=c==Wn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case wL:return bt;case SL:return Kt;case EL:return Jn;case LL:return Pt;case xL:return Fe}return c});function Hx(l,c,g){for(var _=-1,y=g.length;++_<y;){var D=g[_],P=D.size;switch(D.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=An(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match($e);return c?c[1].split(Me):[]}function y_(l,c,g){c=oo(c,l);for(var _=-1,y=c.length,D=!1;++_<y;){var P=br(c[_]);if(!(D=l!=null&&g(l,P)))break;l=l[P]}return D||++_!=y?D:(y=l==null?0:l.length,!!y&&mu(y)&&Mr(P,y)&&(tt(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function w_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return $d(l);case At:case Re:return new _(+l);case bt:return Dx(l,g);case yi:case Vt:case It:case Gt:case qt:case Bt:case gr:case ei:case He:return r_(l,g);case Kt:return new _;case dn:case pn:return new _(l);case jn:return Tx(l);case Pt:return new _;case Ci:return Ix(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return tt(l)||Bo(l)||!!(Dm&&l&&l[Dm])}function Mr(l,c){var g=typeof l;return c=c??G,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Yn(l,c,g){if(!tn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Mr(c,g.length):_=="string"&&c in g)?Qi(g[c],l):!1}function Zd(l,c){if(tt(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Li(l)?!0:Le.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Xd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=Gd(g);return!!_&&l===_[0]}function qx(l){return!!Sm&&Sm in l}var Yx=Bl?Pr:gh;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function S_(l){return l===l&&!tn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],y=g|_,D=y<(E|S|M),P=_==M&&g==L||_==M&&g==R&&l[7].length<=c[8]||_==(M|R)&&c[7].length<=c[8]&&g==L;if(!(D||P))return l;_&E&&(l[2]=c[2],y|=g&E?0:w);var V=c[3];if(V){var Z=l[3];l[3]=Z?s_(Z,V,c[4]):V,l[4]=Z?to(l[3],h):c[4]}return V=c[5],V&&(Z=l[5],l[5]=Z?a_(Z,V,c[6]):V,l[6]=Z?to(l[5],h):c[6]),V=c[7],V&&(l[7]=V),_&M&&(l[8]=l[8]==null?c[8]:An(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=y,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function L_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,y=-1,D=Cn(_.length-c,0),P=ee(D);++y<D;)P[y]=_[c+y];y=-1;for(var V=ee(c+1);++y<c;)V[y]=_[y];return V[c]=g(P),wi(l,this,V)}}function x_(l,c){return c.length<2?l:Mo(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=An(c.length,g),y=ai(l);_--;){var D=c[_];l[_]=Mr(D,g)?y[D]:t}return l}function Qd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var D_=I_(Zm),Sa=pL||function(l,c){return xn.setTimeout(l,c)},Jd=I_(Sx);function T_(l,c,g){var _=c+"";return Jd(l,jx(_,tD($x(_),g)))}function I_(l){var c=0,g=0;return function(){var _=bL(),y=O-(_-g);if(g=_,y>0){if(++c>=I)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,y=_-1;for(c=c===t?_:c;++g<c;){var D=Md(g,y),P=l[D];l[D]=l[g],l[g]=P}return l.length=c,l}var k_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,y,D){c.push(y?D.replace(T,"$1"):_||g)}),c});function br(l){if(typeof l=="string"||Li(l))return l;var c=l+"";return c=="0"&&1/l==-U?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(be,function(g){var _="_."+g[0];c&g[1]&&!Rl(l,_)&&l.push(_)}),l.sort()}function N_(l){if(l instanceof mt)return l.clone();var c=new Mi(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=Cn(ot(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var y=0,D=0,P=ee(Kl(_/c));y<_;)P[D++]=Fi(l,y,y+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,y=[];++c<g;){var D=l[c];D&&(y[_++]=D)}return y}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return eo(tt(g)?ai(g):[g],Dn(c,1))}var oD=ct(function(l,c){return hn(l)?_a(l,Dn(c,1,hn,!0)):[]}),sD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ct(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?_a(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var y=l==null?0:l.length;return y?(g&&typeof g!="number"&&Yn(l,c,g)&&(g=0,_=y),rx(l,c,g,_)):[]}function A_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),Ml(l,We(c,3),y)}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_-1;return g!==t&&(y=ot(g),y=g<0?Cn(_+y,0):An(y,_-1)),Ml(l,We(c,3),y,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,U):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:ot(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var y=l[c];_[y[0]]=y[1]}return _}function M_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=g==null?0:ot(g);return y<0&&(y=Cn(_+y,0)),fs(l,c,y)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ct(function(l){var c=Jt(l,Vd);return c.length&&c[0]===l[0]?kd(c):[]}),bD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?kd(g,We(c,2)):[]}),CD=ct(function(l){var c=Bi(l),g=Jt(l,Vd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?kd(g,t,c):[]});function yD(l,c){return l==null?"":_L.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function wD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var y=_;return g!==t&&(y=ot(g),y=y<0?Cn(_+y,0):An(y,_-1)),c===c?tL(l,c,y):Ml(l,pm,y,!0)}function SD(l,c){return l&&l.length?Km(l,ot(c)):t}var ED=ct(P_);function P_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function LD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Rr(function(l,c){var g=l==null?0:l.length,_=xd(l,c);return Ym(l,Jt(c,function(y){return Mr(y,g)?+y:y}).sort(o_)),_});function TD(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,y=[],D=l.length;for(c=We(c,3);++_<D;){var P=l[_];c(P,_,l)&&(g.push(P),y.push(_))}return Ym(l,y),g}function eh(l){return l==null?l:yL.call(l)}function ID(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Yn(l,c,g)?(c=0,g=_):(c=c==null?0:ot(c),g=g===t?_:ot(g)),Fi(l,c,g)):[]}function kD(l,c){return tu(l,c)}function ND(l,c,g){return Fd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Qi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function RD(l,c,g){return Fd(l,c,We(g,2),!0)}function MD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Qi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Xm(l):[]}function FD(l,c){return l&&l.length?Xm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:ot(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:ot(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ct(function(l){return ro(Dn(l,1,hn,!0))}),UD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),ro(Dn(l,1,hn,!0),We(c,2))}),jD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,ro(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?ro(l):[]}function GD(l,c){return l&&l.length?ro(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?ro(l,t,c):[]}function th(l){if(!(l&&l.length))return[];var c=0;return l=Jr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),vd(c,function(g){return Jt(l,pd(g))})}function F_(l,c){if(!(l&&l.length))return[];var g=th(l);return c==null?g:Jt(g,function(_){return wi(c,t,_)})}var YD=ct(function(l,c){return hn(l)?_a(l,c):[]}),ZD=ct(function(l){return Wd(Jr(l,hn))}),XD=ct(function(l){var c=Bi(l);return hn(c)&&(c=t),Wd(Jr(l,hn),We(c,2))}),QD=ct(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Wd(Jr(l,hn),t,c)}),JD=ct(th);function eT(l,c){return t_(l||[],c||[],ma)}function tT(l,c){return t_(l||[],c||[],Ca)}var nT=ct(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,F_(l,g)});function B_(l){var c=x(l);return c.__chain__=!0,c}function iT(l,c){return c(l),l}function du(l,c){return c(l)}var rT=Rr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,y=function(D){return xd(D,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Mr(g)?this.thru(y):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[y],thisArg:t}),new Mi(_,this.__chain__).thru(function(D){return c&&!D.length&&D.push(t),D}))});function oT(){return B_(this)}function sT(){return new Mi(this.value(),this.__chain__)}function aT(){this.__values__===t&&(this.__values__=Q_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lT(){return this}function uT(l){for(var c,g=this;g instanceof Zl;){var _=N_(g);_.__index__=0,_.__values__=t,c?y.__wrapped__=_:c=_;var y=_;g=g.__wrapped__}return y.__wrapped__=l,c}function cT(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[eh],thisArg:t}),new Mi(c,this.__chain__)}return this.thru(eh)}function dT(){return e_(this.__wrapped__,this.__actions__)}var hT=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fT(l,c,g){var _=tt(l)?fm:ix;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}function gT(l,c){var g=tt(l)?Jr:Fm;return g(l,We(c,3))}var pT=d_(A_),mT=d_(O_);function _T(l,c){return Dn(hu(l,c),1)}function vT(l,c){return Dn(hu(l,c),U)}function bT(l,c,g){return g=g===t?1:ot(g),Dn(hu(l,c),g)}function W_(l,c){var g=tt(l)?Oi:io;return g(l,We(c,3))}function V_(l,c){var g=tt(l)?BE:Pm;return g(l,We(c,3))}var CT=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function yT(l,c,g,_){l=li(l)?l:Ls(l),g=g&&!_?ot(g):0;var y=l.length;return g<0&&(g=Cn(y+g,0)),_u(l)?g<=y&&l.indexOf(c,g)>-1:!!y&&fs(l,c,g)>-1}var wT=ct(function(l,c,g){var _=-1,y=typeof c=="function",D=li(l)?ee(l.length):[];return io(l,function(P){D[++_]=y?wi(c,P,g):va(P,c,g)}),D}),ST=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=tt(l)?Jt:zm;return g(l,We(c,3))}function ET(l,c,g,_){return l==null?[]:(tt(c)||(c=c==null?[]:[c]),g=_?t:g,tt(g)||(g=g==null?[]:[g]),Gm(l,c,g))}var LT=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xT(l,c,g){var _=tt(l)?fd:_m,y=arguments.length<3;return _(l,We(c,4),g,y,io)}function DT(l,c,g){var _=tt(l)?WE:_m,y=arguments.length<3;return _(l,We(c,4),g,y,Pm)}function TT(l,c){var g=tt(l)?Jr:Fm;return g(l,pu(We(c,3)))}function IT(l){var c=tt(l)?Am:yx;return c(l)}function kT(l,c,g){(g?Yn(l,c,g):c===t)?c=1:c=ot(c);var _=tt(l)?QL:wx;return _(l,c)}function NT(l){var c=tt(l)?JL:Ex;return c(l)}function AT(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=On(l);return c==Kt||c==Pt?l.size:Ad(l).length}function OT(l,c,g){var _=tt(l)?gd:Lx;return g&&Yn(l,c,g)&&(c=t),_(l,We(c,3))}var RT=ct(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Yn(l,c[0],c[1])?c=[]:g>2&&Yn(c[0],c[1],c[2])&&(c=[c[0]]),Gm(l,Dn(c,1),[])}),fu=gL||function(){return xn.Date.now()};function MT(l,c){if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){if(--l<1)return c.apply(this,arguments)}}function H_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,M,t,t,t,t,c)}function $_(l,c){var g;if(typeof c!="function")throw new Ri(s);return l=ot(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var nh=ct(function(l,c,g){var _=E;if(g.length){var y=to(g,Ss(nh));_|=N}return Or(l,_,c,g,y)}),z_=ct(function(l,c,g){var _=E|S;if(g.length){var y=to(g,Ss(z_));_|=N}return Or(c,_,l,g,y)});function U_(l,c,g){c=g?t:c;var _=Or(l,L,t,t,t,t,t,c);return _.placeholder=U_.placeholder,_}function j_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){var _,y,D,P,V,Z,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Ri(s);c=Wi(c)||0,tn(g)&&(ce=!!g.leading,ge="maxWait"in g,D=ge?Cn(Wi(g.maxWait)||0,c):D,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Ji=_,Br=y;return _=y=t,ue=fn,P=l.apply(Br,Ji),P}function ze(fn){return ue=fn,V=Sa(ht,c),ce?Ne(fn):P}function lt(fn){var Ji=fn-Z,Br=fn-ue,dv=c-Ji;return ge?An(dv,D-Br):dv}function Ue(fn){var Ji=fn-Z,Br=fn-ue;return Z===t||Ji>=c||Ji<0||ge&&Br>=D}function ht(){var fn=fu();if(Ue(fn))return vt(fn);V=Sa(ht,lt(fn))}function vt(fn){return V=t,Se&&_?Ne(fn):(_=y=t,P)}function xi(){V!==t&&n_(V),ue=0,_=Z=y=V=t}function Zn(){return V===t?P:vt(fu())}function Di(){var fn=fu(),Ji=Ue(fn);if(_=arguments,y=this,Z=fn,Ji){if(V===t)return ze(Z);if(ge)return n_(V),V=Sa(ht,c),Ne(Z)}return V===t&&(V=Sa(ht,c)),P}return Di.cancel=xi,Di.flush=Zn,Di}var PT=ct(function(l,c){return Mm(l,1,c)}),FT=ct(function(l,c,g){return Mm(l,Wi(c)||0,g)});function BT(l){return Or(l,q)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Ri(s);var g=function(){var _=arguments,y=c?c.apply(this,_):_[0],D=g.cache;if(D.has(y))return D.get(y);var P=l.apply(this,_);return g.cache=D.set(y,P)||D,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Ri(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WT(l){return $_(2,l)}var VT=xx(function(l,c){c=c.length==1&&tt(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ct(function(_){for(var y=-1,D=An(_.length,g);++y<D;)_[y]=c[y].call(this,_[y]);return wi(l,this,_)})}),ih=ct(function(l,c){var g=to(c,Ss(ih));return Or(l,N,t,c,g)}),G_=ct(function(l,c){var g=to(c,Ss(G_));return Or(l,H,t,c,g)}),HT=Rr(function(l,c){return Or(l,R,t,t,t,c)});function $T(l,c){if(typeof l!="function")throw new Ri(s);return c=c===t?c:ot(c),ct(l,c)}function zT(l,c){if(typeof l!="function")throw new Ri(s);return c=c==null?0:Cn(ot(c),0),ct(function(g){var _=g[c],y=so(g,0,c);return _&&eo(y,_),wi(l,this,y)})}function UT(l,c,g){var _=!0,y=!0;if(typeof l!="function")throw new Ri(s);return tn(g)&&(_="leading"in g?!!g.leading:_,y="trailing"in g?!!g.trailing:y),K_(l,c,{leading:_,maxWait:c,trailing:y})}function jT(l){return H_(l,1)}function KT(l,c){return ih(Hd(c),l)}function GT(){if(!arguments.length)return[];var l=arguments[0];return tt(l)?l:[l]}function qT(l){return Pi(l,m)}function YT(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZT(l){return Pi(l,f|m)}function XT(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QT(l,c){return c==null||Rm(l,c,En(c))}function Qi(l,c){return l===c||l!==l&&c!==c}var JT=au(Id),eI=au(function(l,c){return l>=c}),Bo=Vm(function(){return arguments}())?Vm:function(l){return sn(l)&&Nt.call(l,"callee")&&!xm.call(l,"callee")},tt=ee.isArray,tI=am?Si(am):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return sn(l)&&li(l)}function nI(l){return l===!0||l===!1||sn(l)&&qn(l)==At}var ao=mL||gh,iI=lm?Si(lm):cx;function rI(l){return sn(l)&&l.nodeType===1&&!Ea(l)}function oI(l){if(l==null)return!0;if(li(l)&&(tt(l)||typeof l=="string"||typeof l.splice=="function"||ao(l)||Es(l)||Bo(l)))return!l.length;var c=On(l);if(c==Kt||c==Pt)return!l.size;if(wa(l))return!Ad(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sI(l,c){return ba(l,c)}function aI(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?ba(l,c,t,g):!!_}function rh(l){if(!sn(l))return!1;var c=qn(l);return c==Ct||c==ut||typeof l.message=="string"&&typeof l.name=="string"&&!Ea(l)}function lI(l){return typeof l=="number"&&Tm(l)}function Pr(l){if(!tn(l))return!1;var c=qn(l);return c==Xe||c==on||c==rt||c==oi}function q_(l){return typeof l=="number"&&l==ot(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=G}function tn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function sn(l){return l!=null&&typeof l=="object"}var Y_=um?Si(um):hx;function uI(l,c){return l===c||Nd(l,c,qd(c))}function cI(l,c,g){return g=typeof g=="function"?g:t,Nd(l,c,qd(c),g)}function dI(l){return Z_(l)&&l!=+l}function hI(l){if(Yx(l))throw new Qe(o);return Hm(l)}function fI(l){return l===null}function gI(l){return l==null}function Z_(l){return typeof l=="number"||sn(l)&&qn(l)==dn}function Ea(l){if(!sn(l)||qn(l)!=Wn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cL}var oh=cm?Si(cm):fx;function pI(l){return q_(l)&&l>=-G&&l<=G}var X_=dm?Si(dm):gx;function _u(l){return typeof l=="string"||!tt(l)&&sn(l)&&qn(l)==pn}function Li(l){return typeof l=="symbol"||sn(l)&&qn(l)==Ci}var Es=hm?Si(hm):px;function mI(l){return l===t}function _I(l){return sn(l)&&On(l)==Fe}function vI(l){return sn(l)&&qn(l)==pt}var bI=au(Od),CI=au(function(l,c){return l<=c});function Q_(l){if(!l)return[];if(li(l))return _u(l)?Zi(l):ai(l);if(da&&l[da])return QE(l[da]());var c=On(l),g=c==Kt?Cd:c==Pt?Pl:Ls;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===U||l===-U){var c=l<0?-1:1;return c*z}return l===l?l:0}function ot(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function J_(l){return l?Ro(ot(l),0,K):0}function Wi(l){if(typeof l=="number")return l;if(Li(l))return k;if(tn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=tn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=vm(l);var g=me.test(l);return g||Te.test(l)?ME(l.slice(2),g?2:8):ie.test(l)?k:+l}function ev(l){return vr(l,ui(l))}function yI(l){return l?Ro(ot(l),-G,G):l===0?l:0}function xt(l){return l==null?"":Ei(l)}var wI=ys(function(l,c){if(wa(c)||li(c)){vr(c,En(c),l);return}for(var g in c)Nt.call(c,g)&&ma(l,g,c[g])}),tv=ys(function(l,c){vr(c,ui(c),l)}),vu=ys(function(l,c,g,_){vr(c,ui(c),l,_)}),SI=ys(function(l,c,g,_){vr(c,En(c),l,_)}),EI=Rr(xd);function LI(l,c){var g=Cs(l);return c==null?g:Om(g,c)}var xI=ct(function(l,c){l=Wt(l);var g=-1,_=c.length,y=_>2?c[2]:t;for(y&&Yn(c[0],c[1],y)&&(_=1);++g<_;)for(var D=c[g],P=ui(D),V=-1,Z=P.length;++V<Z;){var ue=P[V],ce=l[ue];(ce===t||Qi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=D[ue])}return l}),DI=ct(function(l){return l.push(t,v_),wi(nv,t,l)});function TI(l,c){return gm(l,We(c,3),_r)}function II(l,c){return gm(l,We(c,3),Td)}function kI(l,c){return l==null?l:Dd(l,We(c,3),ui)}function NI(l,c){return l==null?l:Bm(l,We(c,3),ui)}function AI(l,c){return l&&_r(l,We(c,3))}function OI(l,c){return l&&Td(l,We(c,3))}function RI(l){return l==null?[]:Jl(l,En(l))}function MI(l){return l==null?[]:Jl(l,ui(l))}function sh(l,c,g){var _=l==null?t:Mo(l,c);return _===t?g:_}function PI(l,c){return l!=null&&y_(l,c,ox)}function ah(l,c){return l!=null&&y_(l,c,sx)}var FI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},uh(ci)),BI=f_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),WI=ct(va);function En(l){return li(l)?Nm(l):Ad(l)}function ui(l){return li(l)?Nm(l,!0):mx(l)}function VI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,c(_,y,D),_)}),g}function HI(l,c){var g={};return c=We(c,3),_r(l,function(_,y,D){Ar(g,y,c(_,y,D))}),g}var $I=ys(function(l,c,g){eu(l,c,g)}),nv=ys(function(l,c,g,_){eu(l,c,g,_)}),zI=Rr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(D){return D=oo(D,l),_||(_=D.length>1),D}),vr(l,Kd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var y=c.length;y--;)Bd(g,c[y]);return g});function UI(l,c){return iv(l,pu(We(c)))}var jI=Rr(function(l,c){return l==null?{}:vx(l,c)});function iv(l,c){if(l==null)return{};var g=Jt(Kd(l),function(_){return[_]});return c=We(c),qm(l,g,function(_,y){return c(_,y[0])})}function KI(l,c,g){c=oo(c,l);var _=-1,y=c.length;for(y||(y=1,l=t);++_<y;){var D=l==null?t:l[br(c[_])];D===t&&(_=y,D=g),l=Pr(D)?D.call(l):D}return l}function GI(l,c,g){return l==null?l:Ca(l,c,g)}function qI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Ca(l,c,g,_)}var rv=m_(En),ov=m_(ui);function YI(l,c,g){var _=tt(l),y=_||ao(l)||Es(l);if(c=We(c,4),g==null){var D=l&&l.constructor;y?g=_?new D:[]:tn(l)?g=Pr(D)?Cs(zl(l)):{}:g={}}return(y?Oi:_r)(l,function(P,V,Z){return c(g,P,V,Z)}),g}function ZI(l,c){return l==null?!0:Bd(l,c)}function XI(l,c,g){return l==null?l:Jm(l,c,Hd(g))}function QI(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:Jm(l,c,Hd(g),_)}function Ls(l){return l==null?[]:bd(l,En(l))}function JI(l){return l==null?[]:bd(l,ui(l))}function ek(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Ro(Wi(l),c,g)}function tk(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nk(l,c,g){if(g&&typeof g!="boolean"&&Yn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var y=Im();return An(l+y*(c-l+RE("1e-"+((y+"").length-1))),c)}return Md(l,c)}var ik=ws(function(l,c,g){return c=c.toLowerCase(),l+(g?sv(c):c)});function sv(l){return lh(xt(l).toLowerCase())}function av(l){return l=xt(l),l&&l.replace(Ze,GE).replace(EE,"")}function rk(l,c,g){l=xt(l),c=Ei(c);var _=l.length;g=g===t?_:Ro(ot(g),0,_);var y=g;return g-=c.length,g>=0&&l.slice(g,y)==c}function ok(l){return l=xt(l),l&&sl.test(l)?l.replace(vn,qE):l}function sk(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var ak=ws(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lk=ws(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uk=c_("toLowerCase");function ck(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;if(!c||_>=c)return l;var y=(c-_)/2;return su(Gl(y),g)+l+su(Kl(y),g)}function dk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hk(l,c,g){l=xt(l),c=ot(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fk(l,c,g){return g||c==null?c=0:c&&(c=+c),CL(xt(l).replace(pe,""),c||0)}function gk(l,c,g){return(g?Yn(l,c,g):c===t)?c=1:c=ot(c),Pd(xt(l),c)}function pk(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mk=ws(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _k(l,c,g){return g&&typeof g!="number"&&Yn(l,c,g)&&(c=g=t),g=g===t?K:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!oh(c))&&(c=Ei(c),!c&&gs(l))?so(Zi(l),0,g):l.split(c,g)):[]}var vk=ws(function(l,c,g){return l+(g?" ":"")+lh(c)});function bk(l,c,g){return l=xt(l),g=g==null?0:Ro(ot(g),0,l.length),c=Ei(c),l.slice(g,g+c.length)==c}function Ck(l,c,g){var _=x.templateSettings;g&&Yn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,__);var y=vu({},c.imports,_.imports,__),D=En(y),P=bd(y,D),V,Z,ue=0,ce=c.interpolate||st,ge="__p += '",Se=yd((c.escape||st).source+"|"+ce.source+"|"+(ce===is?F:st).source+"|"+(c.evaluate||st).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++IE+"]")+`
`;l.replace(Se,function(Ue,ht,vt,xi,Zn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(kt,YE),ht&&(V=!0,ge+=`' +
__e(`+ht+`) +
'`),Zn&&(Z=!0,ge+=`';
`+Zn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+Ue.length,Ue}),ge+=`';
`;var ze=Nt.call(c,"variable")&&c.variable;if(!ze)ge=`with (obj) {
`+ge+`
}
`;else if(Yt.test(ze))throw new Qe(a);ge=(Z?ge.replace(Ba,""):ge).replace(Vn,"$1").replace(ti,"$1;"),ge="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=uv(function(){return St(D,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,rh(lt))throw lt;return lt}function yk(l){return xt(l).toLowerCase()}function wk(l){return xt(l).toUpperCase()}function Sk(l,c,g){if(l=xt(l),l&&(g||c===t))return vm(l);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Zi(c),D=bm(_,y),P=Cm(_,y)+1;return so(_,D,P).join("")}function Ek(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,wm(l)+1);if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=Cm(_,Zi(c))+1;return so(_,0,y).join("")}function Lk(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Ei(c)))return l;var _=Zi(l),y=bm(_,Zi(c));return so(_,y).join("")}function xk(l,c){var g=X,_=$;if(tn(c)){var y="separator"in c?c.separator:y;g="length"in c?ot(c.length):g,_="omission"in c?Ei(c.omission):_}l=xt(l);var D=l.length;if(gs(l)){var P=Zi(l);D=P.length}if(g>=D)return l;var V=g-ps(_);if(V<1)return _;var Z=P?so(P,0,V).join(""):l.slice(0,V);if(y===t)return Z+_;if(P&&(V+=Z.length-V),oh(y)){if(l.slice(V).search(y)){var ue,ce=Z;for(y.global||(y=yd(y.source,xt(te.exec(y))+"g")),y.lastIndex=0;ue=y.exec(ce);)var ge=ue.index;Z=Z.slice(0,ge===t?V:ge)}}else if(l.indexOf(Ei(y),V)!=V){var Se=Z.lastIndexOf(y);Se>-1&&(Z=Z.slice(0,Se))}return Z+_}function Dk(l){return l=xt(l),l&&rr.test(l)?l.replace(qs,nL):l}var Tk=ws(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),lh=c_("toUpperCase");function lv(l,c,g){return l=xt(l),c=g?t:c,c===t?XE(l)?oL(l):$E(l):l.match(c)||[]}var uv=ct(function(l,c){try{return wi(l,t,c)}catch(g){return rh(g)?g:new Qe(g)}}),Ik=Rr(function(l,c){return Oi(c,function(g){g=br(g),Ar(l,g,nh(l[g],l))}),l});function kk(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Ri(s);return[g(_[0]),_[1]]}):[],ct(function(_){for(var y=-1;++y<c;){var D=l[y];if(wi(D[0],this,_))return wi(D[1],this,_)}})}function Nk(l){return nx(Pi(l,f))}function uh(l){return function(){return l}}function Ak(l,c){return l==null||l!==l?c:l}var Ok=h_(),Rk=h_(!0);function ci(l){return l}function ch(l){return $m(typeof l=="function"?l:Pi(l,f))}function Mk(l){return Um(Pi(l,f))}function Pk(l,c){return jm(l,Pi(c,f))}var Fk=ct(function(l,c){return function(g){return va(g,l,c)}}),Bk=ct(function(l,c){return function(g){return va(l,g,c)}});function dh(l,c,g){var _=En(c),y=Jl(c,_);g==null&&!(tn(c)&&(y.length||!_.length))&&(g=c,c=l,l=this,y=Jl(c,En(c)));var D=!(tn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(y,function(V){var Z=c[V];l[V]=Z,P&&(l.prototype[V]=function(){var ue=this.__chain__;if(D||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:Z,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return Z.apply(l,eo([this.value()],arguments))})}),l}function Wk(){return xn._===this&&(xn._=dL),this}function hh(){}function Vk(l){return l=ot(l),ct(function(c){return Km(c,l)})}var Hk=zd(Jt),$k=zd(fm),zk=zd(gd);function cv(l){return Zd(l)?pd(br(l)):bx(l)}function Uk(l){return function(c){return l==null?t:Mo(l,c)}}var jk=g_(),Kk=g_(!0);function fh(){return[]}function gh(){return!1}function Gk(){return{}}function qk(){return""}function Yk(){return!0}function Zk(l,c){if(l=ot(l),l<1||l>G)return[];var g=K,_=An(l,K);c=We(c),l-=K;for(var y=vd(_,c);++g<l;)c(g);return y}function Xk(l){return tt(l)?Jt(l,br):Li(l)?[l]:ai(k_(xt(l)))}function Qk(l){var c=++uL;return xt(l)+c}var Jk=ou(function(l,c){return l+c},0),eN=Ud("ceil"),tN=ou(function(l,c){return l/c},1),nN=Ud("floor");function iN(l){return l&&l.length?Ql(l,ci,Id):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Id):t}function oN(l){return mm(l,ci)}function sN(l,c){return mm(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Od):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Od):t}var uN=ou(function(l,c){return l*c},1),cN=Ud("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?_d(l,ci):0}function fN(l,c){return l&&l.length?_d(l,We(c,2)):0}return x.after=MT,x.ary=H_,x.assign=wI,x.assignIn=tv,x.assignInWith=vu,x.assignWith=SI,x.at=EI,x.before=$_,x.bind=nh,x.bindAll=Ik,x.bindKey=z_,x.castArray=GT,x.chain=B_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=kk,x.conforms=Nk,x.constant=uh,x.countBy=hT,x.create=LI,x.curry=U_,x.curryRight=j_,x.debounce=K_,x.defaults=xI,x.defaultsDeep=DI,x.defer=PT,x.delay=FT,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gT,x.flatMap=_T,x.flatMapDeep=vT,x.flatMapDepth=bT,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BT,x.flow=Ok,x.flowRight=Rk,x.fromPairs=pD,x.functions=RI,x.functionsIn=MI,x.groupBy=CT,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=FI,x.invertBy=BI,x.invokeMap=wT,x.iteratee=ch,x.keyBy=ST,x.keys=En,x.keysIn=ui,x.map=hu,x.mapKeys=VI,x.mapValues=HI,x.matches=Mk,x.matchesProperty=Pk,x.memoize=gu,x.merge=$I,x.mergeWith=nv,x.method=Fk,x.methodOf=Bk,x.mixin=dh,x.negate=pu,x.nthArg=Vk,x.omit=zI,x.omitBy=UI,x.once=WT,x.orderBy=ET,x.over=Hk,x.overArgs=VT,x.overEvery=$k,x.overSome=zk,x.partial=ih,x.partialRight=G_,x.partition=LT,x.pick=jI,x.pickBy=iv,x.property=cv,x.propertyOf=Uk,x.pull=ED,x.pullAll=P_,x.pullAllBy=LD,x.pullAllWith=xD,x.pullAt=DD,x.range=jk,x.rangeRight=Kk,x.rearg=HT,x.reject=TT,x.remove=TD,x.rest=$T,x.reverse=eh,x.sampleSize=kT,x.set=GI,x.setWith=qI,x.shuffle=NT,x.slice=ID,x.sortBy=RT,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_k,x.spread=zT,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iT,x.throttle=UT,x.thru=du,x.toArray=Q_,x.toPairs=rv,x.toPairsIn=ov,x.toPath=Xk,x.toPlainObject=ev,x.transform=YI,x.unary=jT,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=ZI,x.unzip=th,x.unzipWith=F_,x.update=XI,x.updateWith=QI,x.values=Ls,x.valuesIn=JI,x.without=YD,x.words=lv,x.wrap=KT,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eT,x.zipObjectDeep=tT,x.zipWith=nT,x.entries=rv,x.entriesIn=ov,x.extend=tv,x.extendWith=vu,dh(x,x),x.add=Jk,x.attempt=uv,x.camelCase=ik,x.capitalize=sv,x.ceil=eN,x.clamp=ek,x.clone=qT,x.cloneDeep=ZT,x.cloneDeepWith=XT,x.cloneWith=YT,x.conformsTo=QT,x.deburr=av,x.defaultTo=Ak,x.divide=tN,x.endsWith=rk,x.eq=Qi,x.escape=ok,x.escapeRegExp=sk,x.every=fT,x.find=pT,x.findIndex=A_,x.findKey=TI,x.findLast=mT,x.findLastIndex=O_,x.findLastKey=II,x.floor=nN,x.forEach=W_,x.forEachRight=V_,x.forIn=kI,x.forInRight=NI,x.forOwn=AI,x.forOwnRight=OI,x.get=sh,x.gt=JT,x.gte=eI,x.has=PI,x.hasIn=ah,x.head=M_,x.identity=ci,x.includes=yT,x.indexOf=mD,x.inRange=tk,x.invoke=WI,x.isArguments=Bo,x.isArray=tt,x.isArrayBuffer=tI,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nI,x.isBuffer=ao,x.isDate=iI,x.isElement=rI,x.isEmpty=oI,x.isEqual=sI,x.isEqualWith=aI,x.isError=rh,x.isFinite=lI,x.isFunction=Pr,x.isInteger=q_,x.isLength=mu,x.isMap=Y_,x.isMatch=uI,x.isMatchWith=cI,x.isNaN=dI,x.isNative=hI,x.isNil=gI,x.isNull=fI,x.isNumber=Z_,x.isObject=tn,x.isObjectLike=sn,x.isPlainObject=Ea,x.isRegExp=oh,x.isSafeInteger=pI,x.isSet=X_,x.isString=_u,x.isSymbol=Li,x.isTypedArray=Es,x.isUndefined=mI,x.isWeakMap=_I,x.isWeakSet=vI,x.join=yD,x.kebabCase=ak,x.last=Bi,x.lastIndexOf=wD,x.lowerCase=lk,x.lowerFirst=uk,x.lt=bI,x.lte=CI,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=fh,x.stubFalse=gh,x.stubObject=Gk,x.stubString=qk,x.stubTrue=Yk,x.multiply=uN,x.nth=SD,x.noConflict=Wk,x.noop=hh,x.now=fu,x.pad=ck,x.padEnd=dk,x.padStart=hk,x.parseInt=fk,x.random=nk,x.reduce=xT,x.reduceRight=DT,x.repeat=gk,x.replace=pk,x.result=KI,x.round=cN,x.runInContext=Y,x.sample=IT,x.size=AT,x.snakeCase=mk,x.some=OT,x.sortedIndex=kD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=RD,x.sortedLastIndexOf=MD,x.startCase=vk,x.startsWith=bk,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=Ck,x.times=Zk,x.toFinite=Fr,x.toInteger=ot,x.toLength=J_,x.toLower=yk,x.toNumber=Wi,x.toSafeInteger=yI,x.toString=xt,x.toUpper=wk,x.trim=Sk,x.trimEnd=Ek,x.trimStart=Lk,x.truncate=xk,x.unescape=Dk,x.uniqueId=Qk,x.upperCase=Tk,x.upperFirst=lh,x.each=W_,x.eachRight=V_,x.first=M_,dh(x,function(){var l={};return _r(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(ot(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=An(g,_.__takeCount__):_.__views__.push({size:An(g,K),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==B||g==j;mt.prototype[l]=function(y){var D=this.clone();return D.__iteratees__.push({iteratee:We(y,3),type:g}),D.__filtered__=D.__filtered__||_,D}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ct(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return va(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=ot(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=ot(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(K)},_r(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),y=x[_?"take"+(c=="last"?"Right":""):c],D=_||/^find/.test(c);y&&(x.prototype[c]=function(){var P=this.__wrapped__,V=_?[1]:arguments,Z=P instanceof mt,ue=V[0],ce=Z||tt(P),ge=function(ht){var vt=y.apply(x,eo([ht],V));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(Z=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,ze=D&&!Se,lt=Z&&!Ne;if(!D&&ce){P=lt?P:new mt(this);var Ue=l.apply(P,V);return Ue.__actions__.push({func:du,args:[ge],thisArg:t}),new Mi(Ue,Se)}return ze&&lt?l.apply(this,V):(Ue=this.thru(ge),ze?_?Ue.value()[0]:Ue.value():Ue)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var y=arguments;if(_&&!this.__chain__){var D=this.value();return c.apply(tt(D)?D:[],y)}return this[g](function(P){return c.apply(tt(P)?P:[],y)})}}),_r(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DL,mt.prototype.reverse=TL,mt.prototype.value=IL,x.prototype.at=rT,x.prototype.chain=oT,x.prototype.commit=sT,x.prototype.next=aT,x.prototype.plant=uT,x.prototype.reverse=cT,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dT,x.prototype.first=x.prototype.head,da&&(x.prototype[da]=lT),x},ms=sL();ko?((ko.exports=ms)._=ms,cd._=ms):xn._=ms}).call(gy)}),vf={browserCheck:function(){var e={};if(vf.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge?\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox||e.edge)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=e,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;t>=1024;)t=Number((t/1024).toFixed(2)),r++;return"".concat(t," ").concat(n[r])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){var n=t;n||(n=window.location.href);var r=e.replace(/[\[\]]/g,"\\$&"),o=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),s=o.exec(n);if(!s)return null;if(!s[2])return"";var a=decodeURIComponent(s[2].replace(/\+/g," "));if(a==="null")return null;if(a!=="undefined")return a},generateFullUrlPath:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new URLSearchParams(t),r=n.toString();return e+(r?"?".concat(r):"")},getQueryParameters:function(e){var t=new URLSearchParams(e),n=Object.fromEntries(t.entries());for(var r in n)n[r]==="null"&&(n[r]=null),n[r]==="undefined"&&(n[r]=void 0);return n},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){var n=e;if(!n||n===1/0)return"0%";n>1&&(n=1);var r=t||2;return r=Math.pow(10,r),Math.round(n*r*100)/r+"%"},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){var t=e;if(t==null||t==="")return"0";t="".concat(e);var n=t.split("."),r=KX(n,2),o=r[0],s=r[1];return"".concat(o.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(s?".".concat(s):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(o,s){for(var a=0,u=0,d=n;u<d.length;u++){var h=d[u];if(a=h(o,s),a!==0)return a}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){var t=vf.trim(e);return t.charAt(0)==="{"&&t.charAt(t.length-1)==="}"||t.charAt(0)==="["&&t.charAt(t.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function o(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var s="num",a="",u=0;u<e;u++)s==="num"?(a+=o(t),s="lower"):s==="lower"?(a+=o(n),s="upper"):s==="upper"&&(a+=o(r),s="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!vf.isEqual(this.state,n)||!vf.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||r>=65376&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],o=0;o*t<n;)r.push(e.slice(o*t,(o+1)*t)),o++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!vf.isObj(e)))return Object.entries(e).forEach(function(t){var n=KX(t,2),r=n[0],o=n[1];o&&vf.isObj(o)?vf.removeEmpty(o):vf.isEmpty(o)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!J7.isPlainObject(e)||!J7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=R1e({},e);return J7.forEach(t,function(o,s){s in e?r[s]=vf.mergeDeep(e[s],o):r[s]=o}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,o=e.successCallback,s=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return s(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return s(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),o&&o(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["ä","å","æ","ç","è","é"];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var o=e.length||0;for(n=0;n<o;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}};dae(function(i,e){(function(t,n){i.exports=n()})(gy,function(){var t=1e3,n=6e4,r=36e5,o="millisecond",s="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},L=function(O,B,W){var j=String(O);return!j||j.length>=B?O:""+Array(B+1-j.length).join(W)+O},A={s:L,z:function(O){var B=-O.utcOffset(),W=Math.abs(B),j=Math.floor(W/60),U=W%60;return(B<=0?"+":"-")+L(j,2,"0")+":"+L(U,2,"0")},m:function O(B,W){if(B.date()<W.date())return-O(W,B);var j=12*(W.year()-B.year())+(W.month()-B.month()),U=B.clone().add(j,f),G=W-U<0,z=B.clone().add(j+(G?-1:1),f);return+(-(j+(W-U)/(G?U-z:z-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s,ms:o,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",H={};H[N]=w;var M=function(O){return O instanceof $},R=function O(B,W,j){var U;if(!B)return N;if(typeof B=="string"){var G=B.toLowerCase();H[G]&&(U=G),W&&(H[G]=W,U=G);var z=B.split("-");if(!U&&z.length>1)return O(z[0])}else{var k=B.name;H[k]=B,U=k}return!j&&U&&(N=U),U||!j&&N},q=function(O,B){if(M(O))return O.clone();var W=typeof B=="object"?B:{};return W.date=O,W.args=arguments,new $(W)},X=A;X.l=R,X.i=M,X.w=function(O,B){return q(O,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var $=function(){function O(W){this.$L=R(W.locale,null,!0),this.parse(W)}var B=O.prototype;return B.parse=function(W){this.$d=function(j){var U=j.date,G=j.utc;if(U===null)return new Date(NaN);if(X.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var z=U.match(E);if(z){var k=z[2]-1||0,K=(z[7]||"0").substring(0,3);return G?new Date(Date.UTC(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)):new Date(z[1],k,z[3]||1,z[4]||0,z[5]||0,z[6]||0,K)}}return new Date(U)}(W),this.$x=W.x||{},this.init()},B.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},B.$utils=function(){return X},B.isValid=function(){return this.$d.toString()!==b},B.isSame=function(W,j){var U=q(W);return this.startOf(j)<=U&&U<=this.endOf(j)},B.isAfter=function(W,j){return q(W)<this.startOf(j)},B.isBefore=function(W,j){return this.endOf(j)<q(W)},B.$g=function(W,j,U){return X.u(W)?this[j]:this.set(U,W)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(W,j){var U=this,G=!!X.u(j)||j,z=X.p(W),k=function(At,Re){var ut=X.w(U.$u?Date.UTC(U.$y,Re,At):new Date(U.$y,Re,At),U);return G?ut:ut.endOf(d)},K=function(At,Re){return X.w(U.toDate()[At].apply(U.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(Re)),U)},fe=this.$W,ne=this.$M,be=this.$D,De="set"+(this.$u?"UTC":"");switch(z){case m:return G?k(1,0):k(31,11);case f:return G?k(1,ne):k(0,ne+1);case h:var Ve=this.$locale().weekStart||0,rt=(fe<Ve?fe+7:fe)-Ve;return k(G?be-rt:be+(6-rt),ne);case d:case v:return K(De+"Hours",0);case u:return K(De+"Minutes",1);case a:return K(De+"Seconds",2);case s:return K(De+"Milliseconds",3);default:return this.clone()}},B.endOf=function(W){return this.startOf(W,!1)},B.$set=function(W,j){var U,G=X.p(W),z="set"+(this.$u?"UTC":""),k=(U={},U[d]=z+"Date",U[v]=z+"Date",U[f]=z+"Month",U[m]=z+"FullYear",U[u]=z+"Hours",U[a]=z+"Minutes",U[s]=z+"Seconds",U[o]=z+"Milliseconds",U)[G],K=G===d?this.$D+(j-this.$W):j;if(G===f||G===m){var fe=this.clone().set(v,1);fe.$d[k](K),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else k&&this.$d[k](K);return this.init(),this},B.set=function(W,j){return this.clone().$set(W,j)},B.get=function(W){return this[X.p(W)]()},B.add=function(W,j){var U,G=this;W=Number(W);var z=X.p(j),k=function(ne){var be=q(G);return X.w(be.date(be.date()+Math.round(ne*W)),G)};if(z===f)return this.set(f,this.$M+W);if(z===m)return this.set(m,this.$y+W);if(z===d)return k(1);if(z===h)return k(7);var K=(U={},U[a]=n,U[u]=r,U[s]=t,U)[z]||1,fe=this.$d.getTime()+W*K;return X.w(fe,this)},B.subtract=function(W,j){return this.add(-1*W,j)},B.format=function(W){var j=this,U=this.$locale();if(!this.isValid())return U.invalidDate||b;var G=W||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),k=this.$H,K=this.$m,fe=this.$M,ne=U.weekdays,be=U.months,De=function(Re,ut,Ct,Xe){return Re&&(Re[ut]||Re(j,G))||Ct[ut].slice(0,Xe)},Ve=function(Re){return X.s(k%12||12,Re,"0")},rt=U.meridiem||function(Re,ut,Ct){var Xe=Re<12?"AM":"PM";return Ct?Xe.toLowerCase():Xe},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:De(U.monthsShort,fe,be,3),MMMM:De(be,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:De(U.weekdaysMin,this.$W,ne,2),ddd:De(U.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(k),HH:X.s(k,2,"0"),h:Ve(1),hh:Ve(2),a:rt(k,K,!0),A:rt(k,K,!1),m:String(K),mm:X.s(K,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return G.replace(S,function(Re,ut){return ut||At[Re]||z.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(W,j,U){var G,z=X.p(j),k=q(W),K=(k.utcOffset()-this.utcOffset())*n,fe=this-k,ne=X.m(this,k);return ne=(G={},G[m]=ne/12,G[f]=ne,G[p]=ne/3,G[h]=(fe-K)/6048e5,G[d]=(fe-K)/864e5,G[u]=fe/r,G[a]=fe/n,G[s]=fe/t,G)[z]||fe,U?ne:X.a(ne)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return H[this.$L]},B.locale=function(W,j){if(!W)return this.$L;var U=this.clone(),G=R(W,j,!0);return G&&(U.$L=G),U},B.clone=function(){return X.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},O}(),I=$.prototype;return q.prototype=I,[["$ms",o],["$s",s],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(O){I[O[1]]=function(B){return this.$g(B,O[0],O[1])}}),q.extend=function(O,B){return O.$i||(O(B,$,q),O.$i=!0),q},q.locale=R,q.isDayjs=M,q.unix=function(O){return q(1e3*O)},q.en=H[N],q.Ls=H,q.p={},q})});const pA=Bn("context-view"),e9=gt(pA,"content"),V1e=gt(pA,"block"),hae=_n(pA,"shadow");var w2;(function(i){i.onHide="onHide"})(w2||(w2={}));const t9=new U5;function XO(i){const[e,t]=he.useState();return he.useEffect(()=>{t(AS(i))},[]),e}function AS(i={}){const{shadowOutline:e=!0}=i,t=mn(pA,"fade-in");let n=nw(`.${pA}`);const r=(d,h)=>{const f=nw("."+e9),p=h||(i==null?void 0:i.render);if(!p)throw new Error("ContextView show Error: the render parameter is required!");uF(re.createElement("div",{ref:()=>{if(n){const m=uae(n,d);n.style.cssText=`
                    visibility: visible;
                    top: ${m.y}px;
                    left: ${m.x}px;
                `}}},p()),f)},o=()=>{if(n){const d=nw(`.${e9}`);d&&lae(d),n.style.visibility="hidden",t9.emit(w2.onHide)}},s=d=>{t9.subscribe(w2.onHide,d)},a=d=>{d.preventDefault(),d.stopPropagation(),o()},u=()=>{t9.unsubscribe(w2.onHide),o()};if(!n){n=document.createElement("div"),n.className=mn(t,vf.isMacOs()?"mac":""),n.style.visibility="hidden";const d=document.getElementById("molecule");d?d.appendChild(n):document.body.appendChild(n);const h=e===!1?"":hae;uF(re.createElement(re.Fragment,null,re.createElement("div",{className:V1e,onClick:a,onContextMenu:a}),re.createElement("div",{className:mn(e9,h)})),n)}return{view:n,show:r,hide:o,onHide:s,dispose:u}}function G5(i){const{anchor:e,render:t}=i;if(!e)return;const n=AS({render:t}),r=s=>{s.target===s.currentTarget&&(s.preventDefault(),n.show({x:s.clientX,y:s.clientY},t))};e.addEventListener("contextmenu",r);const o=()=>{n.hide(),e.removeEventListener("contextmenu",r)};return Object.assign(Object.assign({},n),{dispose:o})}function di(i){return e=>e.id===i}function wK(...i){return function(...e){i.filter(t=>!!t).forEach(t=>t==null?void 0:t(...e))}}function fae(){return Date.now()+Math.round(Math.random()*1e3)}function SK(i,e){for(const t in e)typeof i[t]=="object"&&e[t]?i[t]=SK(i[t],e[t]):i[t]=e[t];return i}function H1e(i){const e={},t=(n,r)=>{for(const o in r)if(o){const s=r[o],a=n?`${n}.${o}`:o;typeof s=="object"?t(a,s):e[a]=s}};return t("",i),e}function $1e(i){let e={};for(const t in i)if(t){const n=t.split(".");let r="",o={},s=o;for(let a=0;a<n.length&&a!==n.length;++a){const u=n[a],d={[u]:""};r&&(s[r]=d),s=d,r=u,a===0&&(o=d)}s[r]=i[t],e=SK(e,o)}return e}function z1e(i){let e,t,n;if(i.match(/^rgb/)){const o=i.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];e=+o[1],t=+o[2],n=+o[3]}else{let o=+("0x"+i.slice(1,7));i.length<5&&(o=+("0x"+i.slice(1).replace(/./g,"$&$&").slice(0,6))),e=o>>16,t=o>>8&255,n=o&255}return Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(n*n))>127.5?"light":"dark"}function U1e(i,e){return i*e}function j1e(i,e){const t=document.head.getElementsByClassName(e);if(t.length===0){const n=document.createElement("style");n.type="text/css",n.className=e,n.innerHTML=i,document.head.appendChild(n)}else t[0].innerHTML=i}const bg=Bn("menu"),gae=Bn("sub-menu"),K1e=_n(bg,"vertical"),G1e=_n(bg,"horizontal"),QO=gt(bg,"item"),q1e=gt(bg,"divider"),pae=gt(bg,"check"),EK=_n(QO,"disabled"),GN=_n(QO,"active"),mae=gt(bg,"label"),_ae=gt(bg,"content"),Y1e=gt(bg,"keybinding"),Z1e=gt(bg,"indicator"),X1e=()=>re.createElement("li",{className:mn(QO,EK),role:"separator"},re.createElement("a",{className:q1e}));var Q1e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function hr(i){const{className:e,type:t,children:n}=i,r=Q1e(i,["className","type","children"]);return t?typeof t=="string"?re.createElement("span",Object.assign({className:mn(e,"codicon",t.includes("~spin")&&"codicon-spin",Bn(t.split("~spin")[0],"codicon"))},r)):t:n?re.createElement("span",Object.assign({className:e},r),n):null}var J1e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function vae(i){const{icon:e,disabled:t=!1,className:n,onClick:r,keybinding:o,render:s,children:a,name:u,title:d,id:h,sortIndex:f}=i,p=J1e(i,["icon","disabled","className","onClick","keybinding","render","children","name","title","id","sortIndex"]),m={onClick:function(v){r==null||r(v,i)}};return re.createElement("li",Object.assign({className:mn(QO,n,t?EK:null),id:h==null?void 0:h.toString(),"data-sort":f},typeof d=="string"?{title:d}:{},m,p),re.createElement("div",{className:_ae},re.createElement(hr,{type:e,className:pae}),re.createElement("span",{className:mae,title:typeof u=="string"?u:""},s?s(i):a),o?re.createElement("span",{className:Y1e},o):null))}var eCe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t},p0;(function(i){i.Vertical="vertical",i.Horizontal="horizontal"})(p0||(p0={}));function bae(i){return i===p0.Horizontal}function Cae(i){const{className:e,name:t,render:n,data:r=[],mode:o=p0.Vertical,icon:s,disabled:a=!1,children:u,onClick:d,title:h,sortIndex:f}=i,p=eCe(i,["className","name","render","data","mode","icon","disabled","children","onClick","title","sortIndex"]),m=mn(gae,e),b=bae(o)?"down":"right",E=r.length>0?re.createElement(Xa,Object.assign({className:m,style:{opacity:"0",pointerEvents:"none"},data:r,onClick:d},p)):re.createElement(Xa,{className:m,style:{opacity:"0",pointerEvents:"none"},onClick:d},u);return re.createElement("li",Object.assign({className:mn(QO,a?EK:null),"data-submenu":!0,"data-mode":o,"data-sort":f},typeof h=="string"?{title:h}:{},p),re.createElement("div",{className:_ae},typeof s=="string"?re.createElement(hr,{className:pae,type:s||""}):s,re.createElement("span",{className:mae},n?n(i):t),re.createElement(hr,{className:Z1e,type:`chevron-${b}`})),E)}var tCe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const nCe=i=>{if(i&&i!=null&&i.dataset.submenu){const e=Array.prototype.find.call(i.children,t=>t.nodeName==="UL");e.style.opacity="1",e.style.pointerEvents="auto",i.classList.add(GN)}},iCe=(i,e,t=!1)=>{if(!i||!e)return;const n=i.getBoundingClientRect(),r=uae(e,n);if(t)r.y=r.y+n.height;else{r.x=r.x+n.width;const o=getComputedStyle(e).getPropertyValue("font-size"),s=U1e(.5,parseInt(o.replace(/px/g,"")));r.y=r.y-s}e.style.top=`${r.y}px`,e.style.left=`${r.x}px`};function rCe(i,e){const{className:t,mode:n=p0.Vertical,data:r=[],children:o,onClick:s,trigger:a="hover",title:u}=i,d=tCe(i,["className","mode","data","children","onClick","trigger","title"]),h=he.useRef(null),f=he.useRef(!1);let p=ZO(o,{onClick:s});const m=a==="hover"?200:0,v=n===p0.Horizontal?G1e:K1e,b=mn(bg,v,t);if(r.length>0){const H=M=>M.map(R=>{if(R.type==="divider")return re.createElement(X1e,{key:R.id});const q=wK(s,R.onClick);return R.data&&R.data.length>0?re.createElement(Cae,Object.assign({key:R.id,mode:R.mode||n},R,{onClick:q}),H(R.data)):re.createElement(vae,Object.assign({},R,{key:R.id,onClick:q}),R.name)});p=H(r)}const E=()=>{var H,M;(H=h.current)===null||H===void 0||H.querySelectorAll("ul").forEach(R=>{R.style.opacity="0",R.style.pointerEvents="none"}),(M=h.current)===null||M===void 0||M.querySelectorAll(`li.${GN}`).forEach(R=>{R.classList.remove(GN)})},S=wr.debounce(H=>{if(f.current){const M=document.elementsFromPoint(H.pageX,H.pageY),R=M.find(I=>I.nodeName==="UL"),q=M.find(I=>I.nodeName==="LI");R&&(R.querySelectorAll("ul").forEach(I=>{I.style.opacity="0",I.style.pointerEvents="none"}),R.querySelectorAll(`li.${GN}`).forEach(I=>{I.classList.remove(GN)})),nCe(q);const X=(q==null?void 0:q.querySelector("ul"))||void 0,$=(q==null?void 0:q.dataset.mode)||n;iCe(q,X,bae($))}},m),w=H=>{H.preventDefault(),H.persist(),H.stopPropagation(),f.current=!0,S(H)},L=()=>{f.current=!1},A=()=>b!=null&&b.includes(gae)?{}:{onContextMenu:H=>{H.preventDefault(),H.persist(),H.stopPropagation()},onClick:H=>{H.preventDefault(),H.persist(),H.stopPropagation()},[cae(a)]:w,onMouseOut:L},N=he.useCallback(()=>{document.hidden&&E()},[]);return he.useEffect(()=>(window.addEventListener("contextmenu",E),window.addEventListener("click",E),window.addEventListener("visibilitychange",N),()=>{document.removeEventListener("contextmenu",E),window.removeEventListener("click",E),window.removeEventListener("visibilitychange",N)}),[]),he.useImperativeHandle(e,()=>({dispose:()=>{E()}})),re.createElement("ul",Object.assign({className:b,ref:h},typeof u=="string"?{title:u}:{},A(),d),p)}const Xa=he.forwardRef(rCe);function us(){return us=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},us.apply(null,arguments)}function Ks(i){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(i)}function oCe(i,e){if(Ks(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(Ks(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function yae(i){var e=oCe(i,"string");return Ks(e)=="symbol"?e:e+""}function en(i,e,t){return(e=yae(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function qX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function yn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qX(Object(t),!0).forEach(function(n){en(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):qX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function sCe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function dF(i,e){if(i==null)return{};var t,n,r=sCe(i,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)t=o[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function H0(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function YX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,yae(n.key),n)}}function $0(i,e,t){return e&&YX(i.prototype,e),t&&YX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Tn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function BV(i,e){return BV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},BV(i,e)}function gC(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&BV(i,e)}function hF(i){return hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hF(i)}function wae(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wae=function(){return!!i})()}function aCe(i,e){if(e&&(Ks(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tn(i)}function pC(i){var e=wae();return function(){var t,n=hF(i);if(e){var r=hF(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return aCe(this,t)}}var Sae=function(e){return+setTimeout(e,16)},Eae=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Sae=function(e){return window.requestAnimationFrame(e)},Eae=function(e){return window.cancelAnimationFrame(e)});var ZX=0,LK=new Map;function Lae(i){LK.delete(i)}var Uh=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;ZX+=1;var n=ZX;function r(o){if(o===0)Lae(n),e();else{var s=Sae(function(){r(o-1)});LK.set(n,s)}}return r(t),n};Uh.cancel=function(i){var e=LK.get(i);return Lae(i),Eae(e)};function iw(i,e){if(!i)return!1;if(i.contains)return i.contains(e);for(var t=e;t;){if(t===i)return!0;t=t.parentNode}return!1}function XX(i){return i instanceof HTMLElement||i instanceof SVGElement}function lCe(i){return i&&Ks(i)==="object"&&XX(i.nativeElement)?i.nativeElement:XX(i)?i:null}function S2(i){var e=lCe(i);if(e)return e;if(i instanceof re.Component){var t;return(t=_1.findDOMNode)===null||t===void 0?void 0:t.call(_1,i)}return null}var xae={exports:{}},Hr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xK=Symbol.for("react.element"),DK=Symbol.for("react.portal"),q5=Symbol.for("react.fragment"),Y5=Symbol.for("react.strict_mode"),Z5=Symbol.for("react.profiler"),X5=Symbol.for("react.provider"),Q5=Symbol.for("react.context"),uCe=Symbol.for("react.server_context"),J5=Symbol.for("react.forward_ref"),eB=Symbol.for("react.suspense"),tB=Symbol.for("react.suspense_list"),nB=Symbol.for("react.memo"),iB=Symbol.for("react.lazy"),cCe=Symbol.for("react.offscreen"),Dae;Dae=Symbol.for("react.module.reference");function id(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case xK:switch(i=i.type,i){case q5:case Z5:case Y5:case eB:case tB:return i;default:switch(i=i&&i.$$typeof,i){case uCe:case Q5:case J5:case iB:case nB:case X5:return i;default:return e}}case DK:return e}}}Hr.ContextConsumer=Q5;Hr.ContextProvider=X5;Hr.Element=xK;Hr.ForwardRef=J5;Hr.Fragment=q5;Hr.Lazy=iB;Hr.Memo=nB;Hr.Portal=DK;Hr.Profiler=Z5;Hr.StrictMode=Y5;Hr.Suspense=eB;Hr.SuspenseList=tB;Hr.isAsyncMode=function(){return!1};Hr.isConcurrentMode=function(){return!1};Hr.isContextConsumer=function(i){return id(i)===Q5};Hr.isContextProvider=function(i){return id(i)===X5};Hr.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===xK};Hr.isForwardRef=function(i){return id(i)===J5};Hr.isFragment=function(i){return id(i)===q5};Hr.isLazy=function(i){return id(i)===iB};Hr.isMemo=function(i){return id(i)===nB};Hr.isPortal=function(i){return id(i)===DK};Hr.isProfiler=function(i){return id(i)===Z5};Hr.isStrictMode=function(i){return id(i)===Y5};Hr.isSuspense=function(i){return id(i)===eB};Hr.isSuspenseList=function(i){return id(i)===tB};Hr.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===q5||i===Z5||i===Y5||i===eB||i===tB||i===cCe||typeof i=="object"&&i!==null&&(i.$$typeof===iB||i.$$typeof===nB||i.$$typeof===X5||i.$$typeof===Q5||i.$$typeof===J5||i.$$typeof===Dae||i.getModuleId!==void 0)};Hr.typeOf=id;xae.exports=Hr;var E2=xae.exports;function dCe(i,e,t){var n=he.useRef({});return(!("value"in n.current)||t(n.current.condition,e))&&(n.current.value=i(),n.current.condition=e),n.current.value}var Tae=function(e,t){typeof e=="function"?e(t):Ks(e)==="object"&&e&&"current"in e&&(e.current=t)},TK=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(o){t.forEach(function(s){Tae(s,o)})}},hCe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dCe(function(){return TK.apply(void 0,t)},t,function(r,o){return r.length!==o.length||r.every(function(s,a){return s!==o[a]})})},IK=function(e){var t,n,r=E2.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render)&&r.$$typeof!==E2.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==E2.ForwardRef)};function QX(i){return he.isValidElement(i)&&!E2.isFragment(i)}Number(he.version.split(".")[0])>=19;function qN(i,e,t,n){var r=_1.unstable_batchedUpdates?function(s){_1.unstable_batchedUpdates(t,s)}:t;return i!=null&&i.addEventListener&&i.addEventListener(e,r,n),{remove:function(){i!=null&&i.removeEventListener&&i.removeEventListener(e,r,n)}}}function mC(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Iae=he.forwardRef(function(i,e){var t=i.didUpdate,n=i.getContainer,r=i.children,o=he.useRef(),s=he.useRef();he.useImperativeHandle(e,function(){return{}});var a=he.useRef(!1);return!a.current&&mC()&&(s.current=n(),o.current=s.current.parentNode,a.current=!0),he.useEffect(function(){t==null||t(i)}),he.useEffect(function(){return s.current.parentNode===null&&o.current!==null&&o.current.appendChild(s.current),function(){var u;(u=s.current)===null||u===void 0||(u=u.parentNode)===null||u===void 0||u.removeChild(s.current)}},[]),s.current?_1.createPortal(r,s.current):null}),kae={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,n(a)))}return o}function n(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(kae);var fCe=kae.exports;const nd=Wp(fCe);function gCe(i,e,t){return t?i[0]===e[0]:i[0]===e[0]&&i[1]===e[1]}function pCe(i,e,t){var n=i[e]||{};return yn(yn({},n),t)}function mCe(i,e,t,n){for(var r=t.points,o=Object.keys(i),s=0;s<o.length;s+=1){var a=o[s];if(gCe(i[a].points,r,n))return"".concat(e,"-placement-").concat(a)}return""}function _Ce(i){if(Array.isArray(i))return i}function vCe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,o,s,a=[],u=!0,d=!1;try{if(o=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(h){d=!0,r=h}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw r}}return a}}function WV(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Nae(i,e){if(i){if(typeof i=="string")return WV(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?WV(i,e):void 0}}function bCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fo(i,e){return _Ce(i)||vCe(i,e)||Nae(i,e)||bCe()}const CCe=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(i==null?void 0:i.substr(0,4))};var yCe=he.createContext({}),wCe=function(i){gC(t,i);var e=pC(t);function t(){return H0(this,t),e.apply(this,arguments)}return $0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component);function VV(i){var e=he.useRef();e.current=i;var t=he.useCallback(function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return t}var JX=mC()?he.useLayoutEffect:he.useEffect,HV=function(e,t){var n=he.useRef(!0);JX(function(){return e(n.current)},t),JX(function(){return n.current=!1,function(){n.current=!0}},[])};function fF(i){var e=he.useRef(!1),t=he.useState(i),n=fo(t,2),r=n[0],o=n[1];he.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,u){u&&e.current||o(a)}return[r,s]}function SCe(i){if(Array.isArray(i))return WV(i)}function ECe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function LCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eQ(i){return SCe(i)||ECe(i)||Nae(i)||LCe()}var $V={},xCe=function(e){};function DCe(i,e){}function TCe(i,e){}function ICe(){$V={}}function Aae(i,e,t){!e&&!$V[t]&&(i(!1,t),$V[t]=!0)}function rB(i,e){Aae(DCe,i,e)}function kCe(i,e){Aae(TCe,i,e)}rB.preMessage=xCe;rB.resetWarned=ICe;rB.noteOnce=kCe;function NCe(i){var e=he.useReducer(function(a){return a+1},0),t=fo(e,2),n=t[1],r=he.useRef(i),o=VV(function(){return r.current}),s=VV(function(a){r.current=typeof a=="function"?a(r.current):a,n()});return[o,s]}var Cv="none",fM="appear",gM="enter",pM="leave",tQ="none",Eh="prepare",Ay="start",Oy="active",kK="end",Oae="prepared";function nQ(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(i)]="webkit".concat(e),t["Moz".concat(i)]="moz".concat(e),t["ms".concat(i)]="MS".concat(e),t["O".concat(i)]="o".concat(e.toLowerCase()),t}function ACe(i,e){var t={animationend:nQ("Animation","AnimationEnd"),transitionend:nQ("Transition","TransitionEnd")};return i&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var OCe=ACe(mC(),typeof window<"u"?window:{}),Rae={};if(mC()){var RCe=document.createElement("div");Rae=RCe.style}var mM={};function Mae(i){if(mM[i])return mM[i];var e=OCe[i];if(e)for(var t=Object.keys(e),n=t.length,r=0;r<n;r+=1){var o=t[r];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Rae)return mM[i]=e[o],mM[i]}return""}var Pae=Mae("animationend"),Fae=Mae("transitionend"),Bae=!!(Pae&&Fae),iQ=Pae||"animationend",rQ=Fae||"transitionend";function oQ(i,e){if(!i)return null;if(Ks(i)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return i[t]}return"".concat(i,"-").concat(e)}const MCe=function(i){var e=he.useRef();function t(r){r&&(r.removeEventListener(rQ,i),r.removeEventListener(iQ,i))}function n(r){e.current&&e.current!==r&&t(e.current),r&&r!==e.current&&(r.addEventListener(rQ,i),r.addEventListener(iQ,i),e.current=r)}return he.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var Wae=mC()?he.useLayoutEffect:he.useEffect;const PCe=function(){var i=he.useRef(null);function e(){Uh.cancel(i.current)}function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Uh(function(){r<=1?n({isCanceled:function(){return o!==i.current}}):t(n,r-1)});i.current=o}return he.useEffect(function(){return function(){e()}},[]),[t,e]};var FCe=[Eh,Ay,Oy,kK],BCe=[Eh,Oae],Vae=!1,WCe=!0;function Hae(i){return i===Oy||i===kK}const VCe=function(i,e,t){var n=fF(tQ),r=fo(n,2),o=r[0],s=r[1],a=PCe(),u=fo(a,2),d=u[0],h=u[1];function f(){s(Eh,!0)}var p=e?BCe:FCe;return Wae(function(){if(o!==tQ&&o!==kK){var m=p.indexOf(o),v=p[m+1],b=t(o);b===Vae?s(v,!0):v&&d(function(E){function S(){E.isCanceled()||s(v,!0)}b===!0?S():Promise.resolve(b).then(S)})}},[i,o]),he.useEffect(function(){return function(){h()}},[]),[f,o]};function HCe(i,e,t,n){var r=n.motionEnter,o=r===void 0?!0:r,s=n.motionAppear,a=s===void 0?!0:s,u=n.motionLeave,d=u===void 0?!0:u,h=n.motionDeadline,f=n.motionLeaveImmediately,p=n.onAppearPrepare,m=n.onEnterPrepare,v=n.onLeavePrepare,b=n.onAppearStart,E=n.onEnterStart,S=n.onLeaveStart,w=n.onAppearActive,L=n.onEnterActive,A=n.onLeaveActive,N=n.onAppearEnd,H=n.onEnterEnd,M=n.onLeaveEnd,R=n.onVisibleChanged,q=fF(),X=fo(q,2),$=X[0],I=X[1],O=NCe(Cv),B=fo(O,2),W=B[0],j=B[1],U=fF(null),G=fo(U,2),z=G[0],k=G[1],K=W(),fe=he.useRef(!1),ne=he.useRef(null);function be(){return t()}var De=he.useRef(!1);function Ve(){j(Cv),k(null,!0)}var rt=VV(function(jn){var Pt=W();if(Pt!==Cv){var pn=be();if(!(jn&&!jn.deadline&&jn.target!==pn)){var Ci=De.current,Ie;Pt===fM&&Ci?Ie=N==null?void 0:N(pn,jn):Pt===gM&&Ci?Ie=H==null?void 0:H(pn,jn):Pt===pM&&Ci&&(Ie=M==null?void 0:M(pn,jn)),Ci&&Ie!==!1&&Ve()}}}),At=MCe(rt),Re=fo(At,1),ut=Re[0],Ct=function(Pt){switch(Pt){case fM:return en(en(en({},Eh,p),Ay,b),Oy,w);case gM:return en(en(en({},Eh,m),Ay,E),Oy,L);case pM:return en(en(en({},Eh,v),Ay,S),Oy,A);default:return{}}},Xe=he.useMemo(function(){return Ct(K)},[K]),on=VCe(K,!i,function(jn){if(jn===Eh){var Pt=Xe[Eh];return Pt?Pt(be()):Vae}if(Sn in Xe){var pn;k(((pn=Xe[Sn])===null||pn===void 0?void 0:pn.call(Xe,be(),null))||null)}return Sn===Oy&&K!==Cv&&(ut(be()),h>0&&(clearTimeout(ne.current),ne.current=setTimeout(function(){rt({deadline:!0})},h))),Sn===Oae&&Ve(),WCe}),Kt=fo(on,2),dn=Kt[0],Sn=Kt[1],Wn=Hae(Sn);De.current=Wn,Wae(function(){I(e);var jn=fe.current;fe.current=!0;var Pt;!jn&&e&&a&&(Pt=fM),jn&&e&&o&&(Pt=gM),(jn&&!e&&d||!jn&&f&&!e&&d)&&(Pt=pM);var pn=Ct(Pt);Pt&&(i||pn[Eh])?(j(Pt),dn()):j(Cv)},[e]),he.useEffect(function(){(K===fM&&!a||K===gM&&!o||K===pM&&!d)&&j(Cv)},[a,o,d]),he.useEffect(function(){return function(){fe.current=!1,clearTimeout(ne.current)}},[]);var Jn=he.useRef(!1);he.useEffect(function(){$&&(Jn.current=!0),$!==void 0&&K===Cv&&((Jn.current||$)&&(R==null||R($)),Jn.current=!0)},[$,K]);var oi=z;return Xe[Eh]&&Sn===Ay&&(oi=yn({transition:"none"},oi)),[K,Sn,oi,$??e]}function $Ce(i){var e=i;Ks(i)==="object"&&(e=i.transitionSupport);function t(r,o){return!!(r.motionName&&e&&o!==!1)}var n=he.forwardRef(function(r,o){var s=r.visible,a=s===void 0?!0:s,u=r.removeOnLeave,d=u===void 0?!0:u,h=r.forceRender,f=r.children,p=r.motionName,m=r.leavedClassName,v=r.eventProps,b=he.useContext(yCe),E=b.motion,S=t(r,E),w=he.useRef(),L=he.useRef();function A(){try{return w.current instanceof HTMLElement?w.current:S2(L.current)}catch{return null}}var N=HCe(S,a,A,r),H=fo(N,4),M=H[0],R=H[1],q=H[2],X=H[3],$=he.useRef(X);X&&($.current=!0);var I=he.useCallback(function(z){w.current=z,Tae(o,z)},[o]),O,B=yn(yn({},v),{},{visible:a});if(!f)O=null;else if(M===Cv)X?O=f(yn({},B),I):!d&&$.current&&m?O=f(yn(yn({},B),{},{className:m}),I):h||!d&&!m?O=f(yn(yn({},B),{},{style:{display:"none"}}),I):O=null;else{var W;R===Eh?W="prepare":Hae(R)?W="active":R===Ay&&(W="start");var j=oQ(p,"".concat(M,"-").concat(W));O=f(yn(yn({},B),{},{className:nd(oQ(p,M),en(en({},j,j&&W),p,typeof p=="string")),style:q}),I)}if(he.isValidElement(O)&&IK(O)){var U=O,G=U.ref;G||(O=he.cloneElement(O,{ref:I}))}return he.createElement(wCe,{ref:L},O)});return n.displayName="CSSMotion",n}const OS=$Ce(Bae);var zV="add",UV="keep",jV="remove",n9="removed";function zCe(i){var e;return i&&Ks(i)==="object"&&"key"in i?e=i:e={key:i},yn(yn({},e),{},{key:String(e.key)})}function KV(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return i.map(zCe)}function UCe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,r=e.length,o=KV(i),s=KV(e);o.forEach(function(d){for(var h=!1,f=n;f<r;f+=1){var p=s[f];if(p.key===d.key){n<f&&(t=t.concat(s.slice(n,f).map(function(m){return yn(yn({},m),{},{status:zV})})),n=f),t.push(yn(yn({},p),{},{status:UV})),n+=1,h=!0;break}}h||t.push(yn(yn({},d),{},{status:jV}))}),n<r&&(t=t.concat(s.slice(n).map(function(d){return yn(yn({},d),{},{status:zV})})));var a={};t.forEach(function(d){var h=d.key;a[h]=(a[h]||0)+1});var u=Object.keys(a).filter(function(d){return a[d]>1});return u.forEach(function(d){t=t.filter(function(h){var f=h.key,p=h.status;return f!==d||p!==jV}),t.forEach(function(h){h.key===d&&(h.status=UV)})}),t}var jCe=["component","children","onVisibleChanged","onAllRemoved"],KCe=["status"],GCe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function qCe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OS,t=function(n){gC(o,n);var r=pC(o);function o(){var s;H0(this,o);for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return s=r.call.apply(r,[this].concat(u)),en(Tn(s),"state",{keyEntities:[]}),en(Tn(s),"removeKey",function(h){var f=s.state.keyEntities,p=f.map(function(m){return m.key!==h?m:yn(yn({},m),{},{status:n9})});return s.setState({keyEntities:p}),p.filter(function(m){var v=m.status;return v!==n9}).length}),s}return $0(o,[{key:"render",value:function(){var a=this,u=this.state.keyEntities,d=this.props,h=d.component,f=d.children,p=d.onVisibleChanged,m=d.onAllRemoved,v=dF(d,jCe),b=h||he.Fragment,E={};return GCe.forEach(function(S){E[S]=v[S],delete v[S]}),delete v.keys,he.createElement(b,v,u.map(function(S,w){var L=S.status,A=dF(S,KCe),N=L===zV||L===UV;return he.createElement(e,us({},E,{key:A.key,visible:N,eventProps:A,onVisibleChanged:function(M){if(p==null||p(M,{key:A.key}),!M){var R=a.removeKey(A.key);R===0&&m&&m()}}}),function(H,M){return f(yn(yn({},H),{},{index:w}),M)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,u){var d=a.keys,h=u.keyEntities,f=KV(d),p=UCe(h,f);return{keyEntities:p.filter(function(m){var v=h.find(function(b){var E=b.key;return m.key===E});return!(v&&v.status===n9&&m.status===jV)})}}}]),o}(he.Component);return en(t,"defaultProps",{component:"div"}),t}qCe(Bae);function $ae(i){var e=i.prefixCls,t=i.motion,n=i.animation,r=i.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function YCe(i){var e=i.prefixCls,t=i.visible,n=i.zIndex,r=i.mask,o=i.maskMotion,s=i.maskAnimation,a=i.maskTransitionName;if(!r)return null;var u={};return(o||a||s)&&(u=yn({motionAppear:!0},$ae({motion:o,prefixCls:e,transitionName:a,animation:s}))),he.createElement(OS,us({},u,{visible:t,removeOnLeave:!0}),function(d){var h=d.className;return he.createElement("div",{style:{zIndex:n},className:nd("".concat(e,"-mask"),h)})})}function sQ(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function aQ(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sQ(Object(t),!0).forEach(function(n){ZCe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):sQ(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function GV(i){"@babel/helpers - typeof";return GV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GV(i)}function ZCe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var wN,XCe={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function gF(){if(wN!==void 0)return wN;wN="";var i=document.createElement("p").style,e="Transform";for(var t in XCe)t+e in i&&(wN=t);return wN}function zae(){return gF()?"".concat(gF(),"TransitionProperty"):"transitionProperty"}function oB(){return gF()?"".concat(gF(),"Transform"):"transform"}function lQ(i,e){var t=zae();t&&(i.style[t]=e,t!=="transitionProperty"&&(i.style.transitionProperty=e))}function i9(i,e){var t=oB();t&&(i.style[t]=e,t!=="transform"&&(i.style.transform=e))}function QCe(i){return i.style.transitionProperty||i.style[zae()]}function JCe(i){var e=window.getComputedStyle(i,null),t=e.getPropertyValue("transform")||e.getPropertyValue(oB());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var eye=/matrix\((.*)\)/,tye=/matrix3d\((.*)\)/;function nye(i,e){var t=window.getComputedStyle(i,null),n=t.getPropertyValue("transform")||t.getPropertyValue(oB());if(n&&n!=="none"){var r,o=n.match(eye);if(o)o=o[1],r=o.split(",").map(function(a){return parseFloat(a,10)}),r[4]=e.x,r[5]=e.y,i9(i,"matrix(".concat(r.join(","),")"));else{var s=n.match(tye)[1];r=s.split(",").map(function(a){return parseFloat(a,10)}),r[12]=e.x,r[13]=e.y,i9(i,"matrix3d(".concat(r.join(","),")"))}}else i9(i,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var iye=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,JO;function uQ(i){var e=i.style.display;i.style.display="none",i.offsetHeight,i.style.display=e}function rw(i,e,t){var n=t;if(GV(e)==="object"){for(var r in e)e.hasOwnProperty(r)&&rw(i,r,e[r]);return}if(typeof n<"u"){typeof n=="number"&&(n="".concat(n,"px")),i.style[e]=n;return}return JO(i,e)}function rye(i){var e,t,n,r=i.ownerDocument,o=r.body,s=r&&r.documentElement;return e=i.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=s.clientLeft||o.clientLeft||0,n-=s.clientTop||o.clientTop||0,{left:t,top:n}}function Uae(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function jae(i){return Uae(i)}function Kae(i){return Uae(i,!0)}function mA(i){var e=rye(i),t=i.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=jae(n),e.top+=Kae(n),e}function NK(i){return i!=null&&i==i.window}function Gae(i){return NK(i)?i.document:i.nodeType===9?i:i.ownerDocument}function oye(i,e,t){var n=t,r="",o=Gae(i);return n=n||o.defaultView.getComputedStyle(i,null),n&&(r=n.getPropertyValue(e)||n[e]),r}var sye=new RegExp("^(".concat(iye,")(?!px)[a-z%]+$"),"i"),aye=/^(top|right|bottom|left)$/,r9="currentStyle",o9="runtimeStyle",J0="left",lye="px";function uye(i,e){var t=i[r9]&&i[r9][e];if(sye.test(t)&&!aye.test(e)){var n=i.style,r=n[J0],o=i[o9][J0];i[o9][J0]=i[r9][J0],n[J0]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+lye,n[J0]=r,i[o9][J0]=o}return t===""?"auto":t}typeof window<"u"&&(JO=window.getComputedStyle?oye:uye);function _M(i,e){return i==="left"?e.useCssRight?"right":i:e.useCssBottom?"bottom":i}function cQ(i){if(i==="left")return"right";if(i==="right")return"left";if(i==="top")return"bottom";if(i==="bottom")return"top"}function dQ(i,e,t){rw(i,"position")==="static"&&(i.style.position="relative");var n=-999,r=-999,o=_M("left",t),s=_M("top",t),a=cQ(o),u=cQ(s);o!=="left"&&(n=999),s!=="top"&&(r=999);var d="",h=mA(i);("left"in e||"top"in e)&&(d=QCe(i)||"",lQ(i,"none")),"left"in e&&(i.style[a]="",i.style[o]="".concat(n,"px")),"top"in e&&(i.style[u]="",i.style[s]="".concat(r,"px")),uQ(i);var f=mA(i),p={};for(var m in e)if(e.hasOwnProperty(m)){var v=_M(m,t),b=m==="left"?n:r,E=h[m]-f[m];v===m?p[v]=b+E:p[v]=b-E}rw(i,p),uQ(i),("left"in e||"top"in e)&&lQ(i,d);var S={};for(var w in e)if(e.hasOwnProperty(w)){var L=_M(w,t),A=e[w]-h[w];w===L?S[L]=p[L]+A:S[L]=p[L]-A}rw(i,S)}function cye(i,e){var t=mA(i),n=JCe(i),r={x:n.x,y:n.y};"left"in e&&(r.x=n.x+e.left-t.left),"top"in e&&(r.y=n.y+e.top-t.top),nye(i,r)}function dye(i,e,t){if(t.ignoreShake){var n=mA(i),r=n.left.toFixed(0),o=n.top.toFixed(0),s=e.left.toFixed(0),a=e.top.toFixed(0);if(r===s&&o===a)return}t.useCssRight||t.useCssBottom?dQ(i,e,t):t.useCssTransform&&oB()in document.body.style?cye(i,e):dQ(i,e,t)}function AK(i,e){for(var t=0;t<i.length;t++)e(i[t])}function qae(i){return JO(i,"boxSizing")==="border-box"}var hye=["margin","border","padding"],qV=-1,fye=2,YV=1,gye=0;function pye(i,e,t){var n={},r=i.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=r[o],r[o]=e[o]);t.call(i);for(o in e)e.hasOwnProperty(o)&&(r[o]=n[o])}function YN(i,e,t){var n=0,r,o,s;for(o=0;o<e.length;o++)if(r=e[o],r)for(s=0;s<t.length;s++){var a=void 0;r==="border"?a="".concat(r).concat(t[s],"Width"):a=r+t[s],n+=parseFloat(JO(i,a))||0}return n}var Kf={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};AK(["Width","Height"],function(i){Kf["doc".concat(i)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(i)],t.body["scroll".concat(i)],Kf["viewport".concat(i)](t))},Kf["viewport".concat(i)]=function(e){var t="client".concat(i),n=e.document,r=n.body,o=n.documentElement,s=o[t];return n.compatMode==="CSS1Compat"&&s||r&&r[t]||s}});function hQ(i,e,t){var n=t;if(NK(i))return e==="width"?Kf.viewportWidth(i):Kf.viewportHeight(i);if(i.nodeType===9)return e==="width"?Kf.docWidth(i):Kf.docHeight(i);var r=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?i.getBoundingClientRect().width:i.getBoundingClientRect().height),s=qae(i),a=0;(o==null||o<=0)&&(o=void 0,a=JO(i,e),(a==null||Number(a)<0)&&(a=i.style[e]||0),a=Math.floor(parseFloat(a))||0),n===void 0&&(n=s?YV:qV);var u=o!==void 0||s,d=o||a;return n===qV?u?d-YN(i,["border","padding"],r):a:u?n===YV?d:d+(n===fye?-YN(i,["border"],r):YN(i,["margin"],r)):a+YN(i,hye.slice(n),r)}var mye={position:"absolute",visibility:"hidden",display:"block"};function fQ(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n,r=e[0];return r.offsetWidth!==0?n=hQ.apply(void 0,e):pye(r,mye,function(){n=hQ.apply(void 0,e)}),n}AK(["width","height"],function(i){var e=i.charAt(0).toUpperCase()+i.slice(1);Kf["outer".concat(e)]=function(n,r){return n&&fQ(n,i,r?gye:YV)};var t=i==="width"?["Left","Right"]:["Top","Bottom"];Kf[i]=function(n,r){var o=r;if(o!==void 0){if(n){var s=qae(n);return s&&(o+=YN(n,["padding","border"],t)),rw(n,i,o)}return}return n&&fQ(n,i,qV)}});function Yae(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}var hi={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Gae,offset:function(e,t,n){if(typeof t<"u")dye(e,t,n||{});else return mA(e)},isWindow:NK,each:AK,css:rw,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var r=e.overflow;if(r)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Yae,getWindowScrollLeft:function(e){return jae(e)},getWindowScrollTop:function(e){return Kae(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)hi.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Yae(hi,Kf);var s9=hi.getParent;function ZV(i){if(hi.isWindow(i)||i.nodeType===9)return null;var e=hi.getDocument(i),t=e.body,n,r=hi.css(i,"position"),o=r==="fixed"||r==="absolute";if(!o)return i.nodeName.toLowerCase()==="html"?null:s9(i);for(n=s9(i);n&&n!==t&&n.nodeType!==9;n=s9(n))if(r=hi.css(n,"position"),r!=="static")return n;return null}var gQ=hi.getParent;function _ye(i){if(hi.isWindow(i)||i.nodeType===9)return!1;var e=hi.getDocument(i),t=e.body,n=null;for(n=gQ(i);n&&n!==t&&n!==e;n=gQ(n)){var r=hi.css(n,"position");if(r==="fixed")return!0}return!1}function OK(i,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=ZV(i),r=hi.getDocument(i),o=r.defaultView||r.parentWindow,s=r.body,a=r.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==s&&n!==a&&hi.css(n,"overflow")!=="visible"){var u=hi.offset(n);u.left+=n.clientLeft,u.top+=n.clientTop,t.top=Math.max(t.top,u.top),t.right=Math.min(t.right,u.left+n.clientWidth),t.bottom=Math.min(t.bottom,u.top+n.clientHeight),t.left=Math.max(t.left,u.left)}else if(n===s||n===a)break;n=ZV(n)}var d=null;if(!hi.isWindow(i)&&i.nodeType!==9){d=i.style.position;var h=hi.css(i,"position");h==="absolute"&&(i.style.position="fixed")}var f=hi.getWindowScrollLeft(o),p=hi.getWindowScrollTop(o),m=hi.viewportWidth(o),v=hi.viewportHeight(o),b=a.scrollWidth,E=a.scrollHeight,S=window.getComputedStyle(s);if(S.overflowX==="hidden"&&(b=o.innerWidth),S.overflowY==="hidden"&&(E=o.innerHeight),i.style&&(i.style.position=d),e||_ye(i))t.left=Math.max(t.left,f),t.top=Math.max(t.top,p),t.right=Math.min(t.right,f+m),t.bottom=Math.min(t.bottom,p+v);else{var w=Math.max(b,f+m);t.right=Math.min(t.right,w);var L=Math.max(E,p+v);t.bottom=Math.min(t.bottom,L)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function vye(i,e,t,n){var r=hi.clone(i),o={width:e.width,height:e.height};return n.adjustX&&r.left<t.left&&(r.left=t.left),n.resizeWidth&&r.left>=t.left&&r.left+o.width>t.right&&(o.width-=r.left+o.width-t.right),n.adjustX&&r.left+o.width>t.right&&(r.left=Math.max(t.right-o.width,t.left)),n.adjustY&&r.top<t.top&&(r.top=t.top),n.resizeHeight&&r.top>=t.top&&r.top+o.height>t.bottom&&(o.height-=r.top+o.height-t.bottom),n.adjustY&&r.top+o.height>t.bottom&&(r.top=Math.max(t.bottom-o.height,t.top)),hi.mix(r,o)}function RK(i){var e,t,n;if(!hi.isWindow(i)&&i.nodeType!==9)e=hi.offset(i),t=hi.outerWidth(i),n=hi.outerHeight(i);else{var r=hi.getWindow(i);e={left:hi.getWindowScrollLeft(r),top:hi.getWindowScrollTop(r)},t=hi.viewportWidth(r),n=hi.viewportHeight(r)}return e.width=t,e.height=n,e}function pQ(i,e){var t=e.charAt(0),n=e.charAt(1),r=i.width,o=i.height,s=i.left,a=i.top;return t==="c"?a+=o/2:t==="b"&&(a+=o),n==="c"?s+=r/2:n==="r"&&(s+=r),{left:s,top:a}}function vM(i,e,t,n,r){var o=pQ(e,t[1]),s=pQ(i,t[0]),a=[s.left-o.left,s.top-o.top];return{left:Math.round(i.left-a[0]+n[0]-r[0]),top:Math.round(i.top-a[1]+n[1]-r[1])}}function mQ(i,e,t){return i.left<t.left||i.left+e.width>t.right}function _Q(i,e,t){return i.top<t.top||i.top+e.height>t.bottom}function bye(i,e,t){return i.left>t.right||i.left+e.width<t.left}function Cye(i,e,t){return i.top>t.bottom||i.top+e.height<t.top}function bM(i,e,t){var n=[];return hi.each(i,function(r){n.push(r.replace(e,function(o){return t[o]}))}),n}function CM(i,e){return i[e]=-i[e],i}function vQ(i,e){var t;return/%$/.test(i)?t=parseInt(i.substring(0,i.length-1),10)/100*e:t=parseInt(i,10),t||0}function bQ(i,e){i[0]=vQ(i[0],e.width),i[1]=vQ(i[1],e.height)}function Zae(i,e,t,n){var r=t.points,o=t.offset||[0,0],s=t.targetOffset||[0,0],a=t.overflow,u=t.source||i;o=[].concat(o),s=[].concat(s),a=a||{};var d={},h=0,f=!!(a&&a.alwaysByViewport),p=OK(u,f),m=RK(u);bQ(o,m),bQ(s,e);var v=vM(m,e,r,o,s),b=hi.merge(m,v);if(p&&(a.adjustX||a.adjustY)&&n){if(a.adjustX&&mQ(v,m,p)){var E=bM(r,/[lr]/gi,{l:"r",r:"l"}),S=CM(o,0),w=CM(s,0),L=vM(m,e,E,S,w);bye(L,m,p)||(h=1,r=E,o=S,s=w)}if(a.adjustY&&_Q(v,m,p)){var A=bM(r,/[tb]/gi,{t:"b",b:"t"}),N=CM(o,1),H=CM(s,1),M=vM(m,e,A,N,H);Cye(M,m,p)||(h=1,r=A,o=N,s=H)}h&&(v=vM(m,e,r,o,s),hi.mix(b,v));var R=mQ(v,m,p),q=_Q(v,m,p);if(R||q){var X=r;R&&(X=bM(r,/[lr]/gi,{l:"r",r:"l"})),q&&(X=bM(r,/[tb]/gi,{t:"b",b:"t"})),r=X,o=t.offset||[0,0],s=t.targetOffset||[0,0]}d.adjustX=a.adjustX&&R,d.adjustY=a.adjustY&&q,(d.adjustX||d.adjustY)&&(b=vye(v,m,p,d))}return b.width!==m.width&&hi.css(u,"width",hi.width(u)+b.width-m.width),b.height!==m.height&&hi.css(u,"height",hi.height(u)+b.height-m.height),hi.offset(u,{left:b.left,top:b.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:r,offset:o,targetOffset:s,overflow:d}}function yye(i,e){var t=OK(i,e),n=RK(i);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function MK(i,e,t){var n=t.target||e,r=RK(n),o=!yye(n,t.overflow&&t.overflow.alwaysByViewport);return Zae(i,r,t,o)}MK.__getOffsetParent=ZV;MK.__getVisibleRectForElement=OK;function wye(i,e,t){var n,r,o=hi.getDocument(i),s=o.defaultView||o.parentWindow,a=hi.getWindowScrollLeft(s),u=hi.getWindowScrollTop(s),d=hi.viewportWidth(s),h=hi.viewportHeight(s);"pageX"in e?n=e.pageX:n=a+e.clientX,"pageY"in e?r=e.pageY:r=u+e.clientY;var f={left:n,top:r,width:0,height:0},p=n>=0&&n<=a+d&&r>=0&&r<=u+h,m=[t.points[0],"cc"];return Zae(i,f,aQ(aQ({},t),{},{points:m}),p)}function Sye(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function r(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,u=n.has(o);if(rB(!u,"Warning: There may be circular references"),u)return!1;if(o===s)return!0;if(t&&a>1)return!1;n.add(o);var d=a+1;if(Array.isArray(o)){if(!Array.isArray(s)||o.length!==s.length)return!1;for(var h=0;h<o.length;h++)if(!r(o[h],s[h],d))return!1;return!0}if(o&&s&&Ks(o)==="object"&&Ks(s)==="object"){var f=Object.keys(o);return f.length!==Object.keys(s).length?!1:f.every(function(p){return r(o[p],s[p],d)})}return!1}return r(i,e)}const Eye=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var e=i.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(i.getBoundingClientRect){var r=i.getBoundingClientRect(),o=r.width,s=r.height;if(o||s)return!0}}return!1},Lye=function(i,e){var t=re.useRef(!1),n=re.useRef(null);function r(){window.clearTimeout(n.current)}function o(s){if(r(),!t.current||s===!0){if(i(s)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,r()}]};var Xae=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(r,o){return r[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(t,n){var r=i(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,r=i(n,t);~r&&n.splice(r,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var r=0,o=this.__entries__;r<o.length;r++){var s=o[r];t.call(n,s[1],s[0])}},e}()}(),XV=typeof window<"u"&&typeof document<"u"&&window.document===document,pF=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),xye=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pF):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),Dye=2;function Tye(i,e){var t=!1,n=!1,r=0;function o(){t&&(t=!1,i()),n&&a()}function s(){xye(o)}function a(){var u=Date.now();if(t){if(u-r<Dye)return;n=!0}else t=!0,n=!1,setTimeout(s,e);r=u}return a}var Iye=20,kye=["top","right","bottom","left","width","height","size","weight"],Nye=typeof MutationObserver<"u",Aye=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Tye(this.refresh.bind(this),Iye)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!XV||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nye?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!XV||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,r=kye.some(function(o){return!!~n.indexOf(o)});r&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),Qae=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Object.defineProperty(i,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return i},Bw=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||pF},Jae=sB(0,0,0,0);function mF(i){return parseFloat(i)||0}function CQ(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,r){var o=i["border-"+r+"-width"];return n+mF(o)},0)}function Oye(i){for(var e=["top","right","bottom","left"],t={},n=0,r=e;n<r.length;n++){var o=r[n],s=i["padding-"+o];t[o]=mF(s)}return t}function Rye(i){var e=i.getBBox();return sB(0,0,e.width,e.height)}function Mye(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return Jae;var n=Bw(i).getComputedStyle(i),r=Oye(n),o=r.left+r.right,s=r.top+r.bottom,a=mF(n.width),u=mF(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=CQ(n,"left","right")+o),Math.round(u+s)!==t&&(u-=CQ(n,"top","bottom")+s)),!Fye(i)){var d=Math.round(a+o)-e,h=Math.round(u+s)-t;Math.abs(d)!==1&&(a-=d),Math.abs(h)!==1&&(u-=h)}return sB(r.left,r.top,a,u)}var Pye=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof Bw(i).SVGGraphicsElement}:function(i){return i instanceof Bw(i).SVGElement&&typeof i.getBBox=="function"}}();function Fye(i){return i===Bw(i).document.documentElement}function Bye(i){return XV?Pye(i)?Rye(i):Mye(i):Jae}function Wye(i){var e=i.x,t=i.y,n=i.width,r=i.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Qae(s,{x:e,y:t,width:n,height:r,top:t,right:e+n,bottom:r+t,left:e}),s}function sB(i,e,t,n){return{x:i,y:e,width:t,height:n}}var Vye=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=sB(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=Bye(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),Hye=function(){function i(e,t){var n=Wye(t);Qae(this,{target:e,contentRect:n})}return i}(),$ye=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new Xae,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Bw(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Vye(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Bw(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Hye(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),ele=typeof WeakMap<"u"?new WeakMap:new Xae,tle=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Aye.getInstance(),n=new $ye(e,t,this);ele.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){tle.prototype[i]=function(){var e;return(e=ele.get(this))[i].apply(e,arguments)}});var nle=function(){return typeof pF.ResizeObserver<"u"?pF.ResizeObserver:tle}();function zye(i,e){return i===e?!0:!i||!e?!1:"pageX"in e&&"pageY"in e?i.pageX===e.pageX&&i.pageY===e.pageY:"clientX"in e&&"clientY"in e?i.clientX===e.clientX&&i.clientY===e.clientY:!1}function Uye(i,e){i!==document.activeElement&&iw(e,i)&&typeof i.focus=="function"&&i.focus()}function yQ(i,e){var t=null,n=null;function r(s){var a=fo(s,1),u=a[0].target;if(document.documentElement.contains(u)){var d=u.getBoundingClientRect(),h=d.width,f=d.height,p=Math.floor(h),m=Math.floor(f);(t!==p||n!==m)&&Promise.resolve().then(function(){e({width:p,height:m})}),t=p,n=m}}var o=new nle(r);return i&&o.observe(i),function(){o.disconnect()}}function wQ(i){return typeof i!="function"?null:i()}function SQ(i){return Ks(i)!=="object"||!i?null:i}var jye=function(e,t){var n=e.children,r=e.disabled,o=e.target,s=e.align,a=e.onAlign,u=e.monitorWindowResize,d=e.monitorBufferTime,h=d===void 0?0:d,f=re.useRef({}),p=re.useRef(),m=re.Children.only(n),v=re.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=s,v.current.onAlign=a;var b=Lye(function(){var $=v.current,I=$.disabled,O=$.target,B=$.align,W=$.onAlign,j=p.current;if(!I&&O&&j){var U,G=wQ(O),z=SQ(O);f.current.element=G,f.current.point=z,f.current.align=B;var k=document,K=k.activeElement;return G&&Eye(G)?U=MK(j,G,B):z&&(U=wye(j,z,B)),Uye(K,j),W&&U&&W(j,U),!0}return!1},h),E=fo(b,2),S=E[0],w=E[1],L=re.useState(),A=fo(L,2),N=A[0],H=A[1],M=re.useState(),R=fo(M,2),q=R[0],X=R[1];return HV(function(){H(wQ(o)),X(SQ(o))}),re.useEffect(function(){(f.current.element!==N||!zye(f.current.point,q)||!Sye(f.current.align,s))&&S()}),re.useEffect(function(){var $=yQ(p.current,S);return $},[p.current]),re.useEffect(function(){var $=yQ(N,S);return $},[N]),re.useEffect(function(){r?w():S()},[r]),re.useEffect(function(){if(u){var $=qN(window,"resize",S);return $.remove}},[u]),re.useEffect(function(){return function(){w()}},[]),re.useImperativeHandle(t,function(){return{forceAlign:function(){return S(!0)}}}),re.isValidElement(m)&&(m=re.cloneElement(m,{ref:TK(m.ref,p)})),m},ile=re.forwardRef(jye);ile.displayName="Align";function QV(){QV=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(j,U,G){j[U]=G.value},o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(j,U,G){return Object.defineProperty(j,U,{value:G,enumerable:!0,configurable:!0,writable:!0}),j[U]}try{d({},"")}catch{d=function(G,z,k){return G[z]=k}}function h(j,U,G,z){var k=U&&U.prototype instanceof S?U:S,K=Object.create(k.prototype),fe=new B(z||[]);return r(K,"_invoke",{value:X(j,G,fe)}),K}function f(j,U,G){try{return{type:"normal",arg:j.call(U,G)}}catch(z){return{type:"throw",arg:z}}}e.wrap=h;var p="suspendedStart",m="suspendedYield",v="executing",b="completed",E={};function S(){}function w(){}function L(){}var A={};d(A,s,function(){return this});var N=Object.getPrototypeOf,H=N&&N(N(W([])));H&&H!==t&&n.call(H,s)&&(A=H);var M=L.prototype=S.prototype=Object.create(A);function R(j){["next","throw","return"].forEach(function(U){d(j,U,function(G){return this._invoke(U,G)})})}function q(j,U){function G(k,K,fe,ne){var be=f(j[k],j,K);if(be.type!=="throw"){var De=be.arg,Ve=De.value;return Ve&&Ks(Ve)=="object"&&n.call(Ve,"__await")?U.resolve(Ve.__await).then(function(rt){G("next",rt,fe,ne)},function(rt){G("throw",rt,fe,ne)}):U.resolve(Ve).then(function(rt){De.value=rt,fe(De)},function(rt){return G("throw",rt,fe,ne)})}ne(be.arg)}var z;r(this,"_invoke",{value:function(K,fe){function ne(){return new U(function(be,De){G(K,fe,be,De)})}return z=z?z.then(ne,ne):ne()}})}function X(j,U,G){var z=p;return function(k,K){if(z===v)throw Error("Generator is already running");if(z===b){if(k==="throw")throw K;return{value:i,done:!0}}for(G.method=k,G.arg=K;;){var fe=G.delegate;if(fe){var ne=$(fe,G);if(ne){if(ne===E)continue;return ne}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(z===p)throw z=b,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);z=v;var be=f(j,U,G);if(be.type==="normal"){if(z=G.done?b:m,be.arg===E)continue;return{value:be.arg,done:G.done}}be.type==="throw"&&(z=b,G.method="throw",G.arg=be.arg)}}}function $(j,U){var G=U.method,z=j.iterator[G];if(z===i)return U.delegate=null,G==="throw"&&j.iterator.return&&(U.method="return",U.arg=i,$(j,U),U.method==="throw")||G!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+G+"' method")),E;var k=f(z,j.iterator,U.arg);if(k.type==="throw")return U.method="throw",U.arg=k.arg,U.delegate=null,E;var K=k.arg;return K?K.done?(U[j.resultName]=K.value,U.next=j.nextLoc,U.method!=="return"&&(U.method="next",U.arg=i),U.delegate=null,E):K:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,E)}function I(j){var U={tryLoc:j[0]};1 in j&&(U.catchLoc=j[1]),2 in j&&(U.finallyLoc=j[2],U.afterLoc=j[3]),this.tryEntries.push(U)}function O(j){var U=j.completion||{};U.type="normal",delete U.arg,j.completion=U}function B(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(I,this),this.reset(!0)}function W(j){if(j||j===""){var U=j[s];if(U)return U.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var G=-1,z=function k(){for(;++G<j.length;)if(n.call(j,G))return k.value=j[G],k.done=!1,k;return k.value=i,k.done=!0,k};return z.next=z}}throw new TypeError(Ks(j)+" is not iterable")}return w.prototype=L,r(M,"constructor",{value:L,configurable:!0}),r(L,"constructor",{value:w,configurable:!0}),w.displayName=d(L,u,"GeneratorFunction"),e.isGeneratorFunction=function(j){var U=typeof j=="function"&&j.constructor;return!!U&&(U===w||(U.displayName||U.name)==="GeneratorFunction")},e.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,L):(j.__proto__=L,d(j,u,"GeneratorFunction")),j.prototype=Object.create(M),j},e.awrap=function(j){return{__await:j}},R(q.prototype),d(q.prototype,a,function(){return this}),e.AsyncIterator=q,e.async=function(j,U,G,z,k){k===void 0&&(k=Promise);var K=new q(h(j,U,G,z),k);return e.isGeneratorFunction(U)?K:K.next().then(function(fe){return fe.done?fe.value:K.next()})},R(M),d(M,u,"Generator"),d(M,s,function(){return this}),d(M,"toString",function(){return"[object Generator]"}),e.keys=function(j){var U=Object(j),G=[];for(var z in U)G.push(z);return G.reverse(),function k(){for(;G.length;){var K=G.pop();if(K in U)return k.value=K,k.done=!1,k}return k.done=!0,k}},e.values=W,B.prototype={constructor:B,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(O),!U)for(var G in this)G.charAt(0)==="t"&&n.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=i)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var G=this;function z(De,Ve){return fe.type="throw",fe.arg=U,G.next=De,Ve&&(G.method="next",G.arg=i),!!Ve}for(var k=this.tryEntries.length-1;k>=0;--k){var K=this.tryEntries[k],fe=K.completion;if(K.tryLoc==="root")return z("end");if(K.tryLoc<=this.prev){var ne=n.call(K,"catchLoc"),be=n.call(K,"finallyLoc");if(ne&&be){if(this.prev<K.catchLoc)return z(K.catchLoc,!0);if(this.prev<K.finallyLoc)return z(K.finallyLoc)}else if(ne){if(this.prev<K.catchLoc)return z(K.catchLoc,!0)}else{if(!be)throw Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return z(K.finallyLoc)}}}},abrupt:function(U,G){for(var z=this.tryEntries.length-1;z>=0;--z){var k=this.tryEntries[z];if(k.tryLoc<=this.prev&&n.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var K=k;break}}K&&(U==="break"||U==="continue")&&K.tryLoc<=G&&G<=K.finallyLoc&&(K=null);var fe=K?K.completion:{};return fe.type=U,fe.arg=G,K?(this.method="next",this.next=K.finallyLoc,E):this.complete(fe)},complete:function(U,G){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&G&&(this.next=G),E},finish:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.finallyLoc===U)return this.complete(z.completion,z.afterLoc),O(z),E}},catch:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.tryLoc===U){var k=z.completion;if(k.type==="throw"){var K=k.arg;O(z)}return K}}throw Error("illegal catch attempt")},delegateYield:function(U,G,z){return this.delegate={iterator:W(U),resultName:G,nextLoc:z},this.method==="next"&&(this.arg=i),E}},e}function EQ(i,e,t,n,r,o,s){try{var a=i[o](s),u=a.value}catch(d){return void t(d)}a.done?e(u):Promise.resolve(u).then(n,r)}function Kye(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var o=i.apply(e,t);function s(u){EQ(o,n,r,s,a,"next",u)}function a(u){EQ(o,n,r,s,a,"throw",u)}s(void 0)})}}var LQ=["measure","alignPre","align",null,"motion"];const Gye=function(i,e){var t=fF(null),n=fo(t,2),r=n[0],o=n[1],s=he.useRef();function a(h){o(h,!0)}function u(){Uh.cancel(s.current)}function d(h){u(),s.current=Uh(function(){a(function(f){switch(r){case"align":return"motion";case"motion":return"stable"}return f}),h==null||h()})}return he.useEffect(function(){a("measure")},[i]),he.useEffect(function(){switch(r){case"measure":e();break}r&&(s.current=Uh(Kye(QV().mark(function h(){var f,p;return QV().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:f=LQ.indexOf(r),p=LQ[f+1],p&&f!==-1&&a(p);case 3:case"end":return v.stop()}},h)}))))},[r]),he.useEffect(function(){return function(){u()}},[]),[r,d]},qye=function(i){var e=he.useState({width:0,height:0}),t=fo(e,2),n=t[0],r=t[1];function o(a){var u=a.offsetWidth,d=a.offsetHeight,h=a.getBoundingClientRect(),f=h.width,p=h.height;Math.abs(u-f)<1&&Math.abs(d-p)<1&&(u=f,d=p),r({width:u,height:d})}var s=he.useMemo(function(){var a={};if(i){var u=n.width,d=n.height;i.indexOf("height")!==-1&&d?a.height=d:i.indexOf("minHeight")!==-1&&d&&(a.minHeight=d),i.indexOf("width")!==-1&&u?a.width=u:i.indexOf("minWidth")!==-1&&u&&(a.minWidth=u)}return a},[i,n]);return[s,o]};var rle=he.forwardRef(function(i,e){var t=i.visible,n=i.prefixCls,r=i.className,o=i.style,s=i.children,a=i.zIndex,u=i.stretch,d=i.destroyPopupOnHide,h=i.forceRender,f=i.align,p=i.point,m=i.getRootDomNode,v=i.getClassNameFromAlign,b=i.onAlign,E=i.onMouseEnter,S=i.onMouseLeave,w=i.onMouseDown,L=i.onTouchStart,A=i.onClick,N=he.useRef(),H=he.useRef(),M=he.useState(),R=fo(M,2),q=R[0],X=R[1],$=qye(u),I=fo($,2),O=I[0],B=I[1];function W(){u&&B(m())}var j=Gye(t,W),U=fo(j,2),G=U[0],z=U[1],k=he.useState(0),K=fo(k,2),fe=K[0],ne=K[1],be=he.useRef();HV(function(){G==="alignPre"&&ne(0)},[G]);function De(){return p||m}function Ve(){var on;(on=N.current)===null||on===void 0||on.forceAlign()}function rt(on,Kt){var dn=v(Kt);q!==dn&&X(dn),ne(function(Sn){return Sn+1}),G==="align"&&(b==null||b(on,Kt))}HV(function(){G==="align"&&(fe<3?Ve():z(function(){var on;(on=be.current)===null||on===void 0||on.call(be)}))},[fe]);var At=yn({},$ae(i));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(on){var Kt=At[on];At[on]=function(dn,Sn){return z(),Kt==null?void 0:Kt(dn,Sn)}});function Re(){return new Promise(function(on){be.current=on})}he.useEffect(function(){!At.motionName&&G==="motion"&&z()},[At.motionName,G]),he.useImperativeHandle(e,function(){return{forceAlign:Ve,getElement:function(){return H.current}}});var ut=yn(yn({},O),{},{zIndex:a,opacity:G==="motion"||G==="stable"||!t?void 0:0,pointerEvents:!t&&G!=="stable"?"none":void 0},o),Ct=!0;f!=null&&f.points&&(G==="align"||G==="stable")&&(Ct=!1);var Xe=s;return he.Children.count(s)>1&&(Xe=he.createElement("div",{className:"".concat(n,"-content")},s)),he.createElement(OS,us({visible:t,ref:H,leavedClassName:"".concat(n,"-hidden")},At,{onAppearPrepare:Re,onEnterPrepare:Re,removeOnLeave:d,forceRender:h}),function(on,Kt){var dn=on.className,Sn=on.style,Wn=nd(n,r,q,dn);return he.createElement(ile,{target:De(),key:"popup",ref:N,monitorWindowResize:!0,disabled:Ct,align:f,onAlign:rt},he.createElement("div",{ref:Kt,className:Wn,onMouseEnter:E,onMouseLeave:S,onMouseDownCapture:w,onTouchStartCapture:L,onClick:A,style:yn(yn({},Sn),ut)},Xe))})});rle.displayName="PopupInner";var ole=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.visible,r=i.zIndex,o=i.children,s=i.mobile;s=s===void 0?{}:s;var a=s.popupClassName,u=s.popupStyle,d=s.popupMotion,h=d===void 0?{}:d,f=s.popupRender,p=i.onClick,m=he.useRef();he.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return m.current}}});var v=yn({zIndex:r},u),b=o;return he.Children.count(o)>1&&(b=he.createElement("div",{className:"".concat(t,"-content")},o)),f&&(b=f(b)),he.createElement(OS,us({visible:n,ref:m,removeOnLeave:!0},h),function(E,S){var w=E.className,L=E.style,A=nd(t,a,w);return he.createElement("div",{ref:S,className:A,onClick:p,style:yn(yn({},L),v)},b)})});ole.displayName="MobilePopupInner";var Yye=["visible","mobile"],sle=he.forwardRef(function(i,e){var t=i.visible,n=i.mobile,r=dF(i,Yye),o=he.useState(t),s=fo(o,2),a=s[0],u=s[1],d=he.useState(!1),h=fo(d,2),f=h[0],p=h[1],m=yn(yn({},r),{},{visible:a});he.useEffect(function(){u(t),t&&n&&p(CCe())},[t,n]);var v=f?he.createElement(ole,us({},m,{mobile:n,ref:e})):he.createElement(rle,us({},m,{ref:e}));return he.createElement("div",null,he.createElement(YCe,m),v)});sle.displayName="Popup";var xQ=he.createContext(null);function a9(){}function Zye(){return""}function Xye(i){return i?i.ownerDocument:window.document}var Qye=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Jye(i){var e=function(t){gC(r,t);var n=pC(r);function r(o){var s;H0(this,r),s=n.call(this,o),en(Tn(s),"popupRef",he.createRef()),en(Tn(s),"triggerRef",he.createRef()),en(Tn(s),"portalContainer",void 0),en(Tn(s),"attachId",void 0),en(Tn(s),"clickOutsideHandler",void 0),en(Tn(s),"touchOutsideHandler",void 0),en(Tn(s),"contextMenuOutsideHandler1",void 0),en(Tn(s),"contextMenuOutsideHandler2",void 0),en(Tn(s),"mouseDownTimeout",void 0),en(Tn(s),"focusTime",void 0),en(Tn(s),"preClickTime",void 0),en(Tn(s),"preTouchTime",void 0),en(Tn(s),"delayTimer",void 0),en(Tn(s),"hasPopupMouseDown",void 0),en(Tn(s),"onMouseEnter",function(u){var d=s.props.mouseEnterDelay;s.fireEvents("onMouseEnter",u),s.delaySetPopupVisible(!0,d,d?null:u)}),en(Tn(s),"onMouseMove",function(u){s.fireEvents("onMouseMove",u),s.setPoint(u)}),en(Tn(s),"onMouseLeave",function(u){s.fireEvents("onMouseLeave",u),s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),en(Tn(s),"onPopupMouseEnter",function(){s.clearDelayTimer()}),en(Tn(s),"onPopupMouseLeave",function(u){var d;u.relatedTarget&&!u.relatedTarget.setTimeout&&iw((d=s.popupRef.current)===null||d===void 0?void 0:d.getElement(),u.relatedTarget)||s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),en(Tn(s),"onFocus",function(u){s.fireEvents("onFocus",u),s.clearDelayTimer(),s.isFocusToShow()&&(s.focusTime=Date.now(),s.delaySetPopupVisible(!0,s.props.focusDelay))}),en(Tn(s),"onMouseDown",function(u){s.fireEvents("onMouseDown",u),s.preClickTime=Date.now()}),en(Tn(s),"onTouchStart",function(u){s.fireEvents("onTouchStart",u),s.preTouchTime=Date.now()}),en(Tn(s),"onBlur",function(u){s.fireEvents("onBlur",u),s.clearDelayTimer(),s.isBlurToHide()&&s.delaySetPopupVisible(!1,s.props.blurDelay)}),en(Tn(s),"onContextMenu",function(u){u.preventDefault(),s.fireEvents("onContextMenu",u),s.setPopupVisible(!0,u)}),en(Tn(s),"onContextMenuClose",function(){s.isContextMenuToShow()&&s.close()}),en(Tn(s),"onClick",function(u){if(s.fireEvents("onClick",u),s.focusTime){var d;if(s.preClickTime&&s.preTouchTime?d=Math.min(s.preClickTime,s.preTouchTime):s.preClickTime?d=s.preClickTime:s.preTouchTime&&(d=s.preTouchTime),Math.abs(d-s.focusTime)<20)return;s.focusTime=0}s.preClickTime=0,s.preTouchTime=0,s.isClickToShow()&&(s.isClickToHide()||s.isBlurToHide())&&u&&u.preventDefault&&u.preventDefault();var h=!s.state.popupVisible;(s.isClickToHide()&&!h||h&&s.isClickToShow())&&s.setPopupVisible(!s.state.popupVisible,u)}),en(Tn(s),"onPopupMouseDown",function(){if(s.hasPopupMouseDown=!0,clearTimeout(s.mouseDownTimeout),s.mouseDownTimeout=window.setTimeout(function(){s.hasPopupMouseDown=!1},0),s.context){var u;(u=s.context).onPopupMouseDown.apply(u,arguments)}}),en(Tn(s),"onDocumentClick",function(u){if(!(s.props.mask&&!s.props.maskClosable)){var d=u.target,h=s.getRootDomNode(),f=s.getPopupDomNode();(!iw(h,d)||s.isContextMenuOnly())&&!iw(f,d)&&!s.hasPopupMouseDown&&s.close()}}),en(Tn(s),"getRootDomNode",function(){var u=s.props.getTriggerDOMNode;if(u)return u(s.triggerRef.current);try{var d=S2(s.triggerRef.current);if(d)return d}catch{}return _1.findDOMNode(Tn(s))}),en(Tn(s),"getPopupClassNameFromAlign",function(u){var d=[],h=s.props,f=h.popupPlacement,p=h.builtinPlacements,m=h.prefixCls,v=h.alignPoint,b=h.getPopupClassNameFromAlign;return f&&p&&d.push(mCe(p,m,u,v)),b&&d.push(b(u)),d.join(" ")}),en(Tn(s),"getComponent",function(){var u=s.props,d=u.prefixCls,h=u.destroyPopupOnHide,f=u.popupClassName,p=u.onPopupAlign,m=u.popupMotion,v=u.popupAnimation,b=u.popupTransitionName,E=u.popupStyle,S=u.mask,w=u.maskAnimation,L=u.maskTransitionName,A=u.maskMotion,N=u.zIndex,H=u.popup,M=u.stretch,R=u.alignPoint,q=u.mobile,X=u.forceRender,$=u.onPopupClick,I=s.state,O=I.popupVisible,B=I.point,W=s.getPopupAlign(),j={};return s.isMouseEnterToShow()&&(j.onMouseEnter=s.onPopupMouseEnter),s.isMouseLeaveToHide()&&(j.onMouseLeave=s.onPopupMouseLeave),j.onMouseDown=s.onPopupMouseDown,j.onTouchStart=s.onPopupMouseDown,he.createElement(sle,us({prefixCls:d,destroyPopupOnHide:h,visible:O,point:R&&B,className:f,align:W,onAlign:p,animation:v,getClassNameFromAlign:s.getPopupClassNameFromAlign},j,{stretch:M,getRootDomNode:s.getRootDomNode,style:E,mask:S,zIndex:N,transitionName:b,maskAnimation:w,maskTransitionName:L,maskMotion:A,ref:s.popupRef,motion:m,mobile:q,forceRender:X,onClick:$}),typeof H=="function"?H():H)}),en(Tn(s),"attachParent",function(u){Uh.cancel(s.attachId);var d=s.props,h=d.getPopupContainer,f=d.getDocument,p=s.getRootDomNode(),m;h?(p||h.length===0)&&(m=h(p)):m=f(s.getRootDomNode()).body,m?m.appendChild(u):s.attachId=Uh(function(){s.attachParent(u)})}),en(Tn(s),"getContainer",function(){if(!s.portalContainer){var u=s.props.getDocument,d=u(s.getRootDomNode()).createElement("div");d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",s.portalContainer=d}return s.attachParent(s.portalContainer),s.portalContainer}),en(Tn(s),"setPoint",function(u){var d=s.props.alignPoint;!d||!u||s.setState({point:{pageX:u.pageX,pageY:u.pageY}})}),en(Tn(s),"handlePortalUpdate",function(){s.state.prevPopupVisible!==s.state.popupVisible&&s.props.afterPopupVisibleChange(s.state.popupVisible)}),en(Tn(s),"triggerContextValue",{onPopupMouseDown:s.onPopupMouseDown});var a;return"popupVisible"in o?a=!!o.popupVisible:a=!!o.defaultPopupVisible,s.state={prevPopupVisible:a,popupVisible:a},Qye.forEach(function(u){s["fire".concat(u)]=function(d){s.fireEvents(u,d)}}),s}return $0(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var s=this.props,a=this.state;if(a.popupVisible){var u;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(u=s.getDocument(this.getRootDomNode()),this.clickOutsideHandler=qN(u,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(u=u||s.getDocument(this.getRootDomNode()),this.touchOutsideHandler=qN(u,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(u=u||s.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=qN(u,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=qN(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Uh.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var s;return((s=this.popupRef.current)===null||s===void 0?void 0:s.getElement())||null}},{key:"getPopupAlign",value:function(){var s=this.props,a=s.popupPlacement,u=s.popupAlign,d=s.builtinPlacements;return a&&d?pCe(d,a,u):u}},{key:"setPopupVisible",value:function(s,a){var u=this.props.alignPoint,d=this.state.popupVisible;this.clearDelayTimer(),d!==s&&("popupVisible"in this.props||this.setState({popupVisible:s,prevPopupVisible:d}),this.props.onPopupVisibleChange(s)),u&&a&&s&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(s,a,u){var d=this,h=a*1e3;if(this.clearDelayTimer(),h){var f=u?{pageX:u.pageX,pageY:u.pageY}:null;this.delayTimer=window.setTimeout(function(){d.setPopupVisible(s,f),d.clearDelayTimer()},h)}else this.setPopupVisible(s,u)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(s){var a=this.props.children.props,u=this.props;return a[s]&&u[s]?this["fire".concat(s)]:a[s]||u[s]}},{key:"isClickToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var s=this.props.action;return s==="contextMenu"||s.length===1&&s[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("contextMenu")!==-1||u.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("hover")!==-1||u.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("hover")!==-1||u.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("focus")!==-1||u.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("focus")!==-1||u.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var s;(s=this.popupRef.current)===null||s===void 0||s.forceAlign()}}},{key:"fireEvents",value:function(s,a){var u=this.props.children.props[s];u&&u(a);var d=this.props[s];d&&d(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var s=this.state.popupVisible,a=this.props,u=a.children,d=a.forceRender,h=a.alignPoint,f=a.className,p=a.autoDestroy,m=he.Children.only(u),v={key:"trigger"};this.isContextMenuToShow()?v.onContextMenu=this.onContextMenu:v.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(v.onClick=this.onClick,v.onMouseDown=this.onMouseDown,v.onTouchStart=this.onTouchStart):(v.onClick=this.createTwoChains("onClick"),v.onMouseDown=this.createTwoChains("onMouseDown"),v.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(v.onMouseEnter=this.onMouseEnter,h&&(v.onMouseMove=this.onMouseMove)):v.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?v.onMouseLeave=this.onMouseLeave:v.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(v.onFocus=this.onFocus,v.onBlur=this.onBlur):(v.onFocus=this.createTwoChains("onFocus"),v.onBlur=this.createTwoChains("onBlur"));var b=nd(m&&m.props&&m.props.className,f);b&&(v.className=b);var E=yn({},v);IK(m)&&(E.ref=TK(this.triggerRef,m.ref));var S=he.cloneElement(m,E),w;return(s||this.popupRef.current||d)&&(w=he.createElement(i,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!s&&p&&(w=null),he.createElement(xQ.Provider,{value:this.triggerContextValue},S,w)}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=s.popupVisible,d={};return u!==void 0&&a.popupVisible!==u&&(d.popupVisible=u,d.prevPopupVisible=a.popupVisible),d}}]),r}(he.Component);return en(e,"contextType",xQ),en(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Zye,getDocument:Xye,onPopupVisibleChange:a9,afterPopupVisibleChange:a9,onPopupAlign:a9,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const ewe=Jye(Iae);var wc={adjustX:1,adjustY:1},Sc=[0,0],twe={left:{points:["cr","cl"],overflow:wc,offset:[-4,0],targetOffset:Sc},right:{points:["cl","cr"],overflow:wc,offset:[4,0],targetOffset:Sc},top:{points:["bc","tc"],overflow:wc,offset:[0,-4],targetOffset:Sc},bottom:{points:["tc","bc"],overflow:wc,offset:[0,4],targetOffset:Sc},topLeft:{points:["bl","tl"],overflow:wc,offset:[0,-4],targetOffset:Sc},leftTop:{points:["tr","tl"],overflow:wc,offset:[-4,0],targetOffset:Sc},topRight:{points:["br","tr"],overflow:wc,offset:[0,-4],targetOffset:Sc},rightTop:{points:["tl","tr"],overflow:wc,offset:[4,0],targetOffset:Sc},bottomRight:{points:["tr","br"],overflow:wc,offset:[0,4],targetOffset:Sc},rightBottom:{points:["bl","br"],overflow:wc,offset:[4,0],targetOffset:Sc},bottomLeft:{points:["tl","bl"],overflow:wc,offset:[0,4],targetOffset:Sc},leftBottom:{points:["br","bl"],overflow:wc,offset:[-4,0],targetOffset:Sc}};function nwe(i){var e=i.showArrow,t=i.arrowContent,n=i.children,r=i.prefixCls,o=i.id,s=i.overlayInnerStyle,a=i.className,u=i.style;return he.createElement("div",{className:nd("".concat(r,"-content"),a),style:u},e!==!1&&he.createElement("div",{className:"".concat(r,"-arrow"),key:"arrow"},t),he.createElement("div",{className:"".concat(r,"-inner"),id:o,role:"tooltip",style:s},typeof n=="function"?n():n))}var iwe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],rwe=function(e,t){var n=e.overlayClassName,r=e.trigger,o=r===void 0?["hover"]:r,s=e.mouseEnterDelay,a=s===void 0?0:s,u=e.mouseLeaveDelay,d=u===void 0?.1:u,h=e.overlayStyle,f=e.prefixCls,p=f===void 0?"rc-tooltip":f,m=e.children,v=e.onVisibleChange,b=e.afterVisibleChange,E=e.transitionName,S=e.animation,w=e.motion,L=e.placement,A=L===void 0?"right":L,N=e.align,H=N===void 0?{}:N,M=e.destroyTooltipOnHide,R=M===void 0?!1:M,q=e.defaultVisible,X=e.getTooltipContainer,$=e.overlayInnerStyle,I=e.arrowContent,O=e.overlay,B=e.id,W=e.showArrow,j=W===void 0?!0:W,U=dF(e,iwe),G=he.useRef(null);he.useImperativeHandle(t,function(){return G.current});var z=yn({},U);"visible"in e&&(z.popupVisible=e.visible);var k=function(){return he.createElement(nwe,{showArrow:j,arrowContent:I,key:"content",prefixCls:p,id:B,overlayInnerStyle:$},O)},K=!1,fe=!1;if(typeof R=="boolean")K=R;else if(R&&Ks(R)==="object"){var ne=R.keepParent;K=ne===!0,fe=ne===!1}return he.createElement(ewe,us({popupClassName:n,prefixCls:p,popup:k,action:o,builtinPlacements:twe,popupPlacement:A,ref:G,popupAlign:H,getPopupContainer:X,onPopupVisibleChange:v,afterPopupVisibleChange:b,popupTransitionName:E,popupAnimation:S,popupMotion:w,defaultPopupVisible:q,destroyPopupOnHide:K,autoDestroy:fe,mouseLeaveDelay:d,popupStyle:h,mouseEnterDelay:a},z),m)};const owe=he.forwardRef(rwe);var swe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const PK=i=>{var{overlay:e,children:t,placement:n="bottom",trigger:r="hover",overlayClassName:o,mouseEnterDelay:s}=i,a=swe(i,["overlay","children","placement","trigger","overlayClassName","mouseEnterDelay"]);return e?re.createElement(owe,Object.assign({overlayClassName:mn(aae(),o),placement:n,trigger:r,overlay:e,mouseEnterDelay:s||.1},a),t):t||null};var ale=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const FK=Bn("action-bar"),awe=gt(FK,"container"),BK=gt(FK,"item"),lwe=_n(BK,"disabled"),uwe=_n(BK,"checked");function cwe(i){const{title:e,name:t,contextMenu:n=[],onClick:r,icon:o,onContextMenuClick:s}=i,a=ale(i,["title","name","contextMenu","onClick","icon","onContextMenuClick"]),u=i.disabled?lwe:null,d=i.checked?uwe:null,h=he.useRef(null),f=he.useRef(),p=he.useCallback((E,S)=>{var w;s==null||s(E,S),(w=f.current)===null||w===void 0||w.hide()},[n]),m=()=>re.createElement(Xa,{onClick:p,data:n});he.useEffect(()=>(n.length>0&&(f.current=G5({anchor:h.current,render:m})),function(){var S;(S=f.current)===null||S===void 0||S.dispose()}));const v=function(E){if(i.disabled){E.preventDefault();return}r&&r(E,i),n.length>-1&&f.current&&f.current.show({x:E.clientX,y:E.clientY})},b=v1(a);return re.createElement("li",Object.assign({ref:h,className:mn(BK,u,d),onClick:v},b),re.createElement(PK,{overlay:re.createElement("span",null,e)},re.createElement(hr,{type:o},t)))}function eR(i){const{data:e=[],onClick:t,onContextMenuClick:n,className:r,style:o,title:s}=i,a=ale(i,["data","onClick","onContextMenuClick","className","style","title"]),u=mn(FK,r),d=e.map((f,p)=>re.createElement(cwe,Object.assign({key:f.id},f,{onContextMenuClick:n,"data-index":p,onClick:wK(t,f.onClick)}))),h=v1(a);return re.createElement("div",Object.assign({className:u,style:o,title:s},h),re.createElement("ul",{className:awe},d))}const WK=Bn("breadcrumb"),dwe=gt(WK,"item"),hwe=gt(WK,"label");var DQ=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function lle(i){const{onClick:e,className:t,separator:n,routes:r=[],style:o,title:s,role:a}=i,u=DQ(i,["onClick","className","separator","routes","style","title","role"]),d=mn(WK,t),h=r.length,f=n||re.createElement(hr,{type:"chevron-right"}),p=v1(u);return re.createElement("div",Object.assign({className:d,role:a,style:o,title:s},p),r.map((m,v)=>{const{id:b,className:E,title:S,style:w,href:L,icon:A,render:N,name:H}=m,M=DQ(m,["id","className","title","style","href","icon","render","name"]);return re.createElement("a",Object.assign({key:b,className:mn(dwe,E),title:S,style:w,href:L,tabIndex:0,onContextMenu:R=>R.preventDefault(),onClick:R=>e==null?void 0:e(R,m)},v1(M)),re.createElement(hr,{type:A}),re.createElement("span",{className:hwe},N?N(m):H),h-v>1?f:null)}))}var fwe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const aB=Bn("btn"),gwe=_n(aB,"normal"),pwe=_n(aB,"large"),mwe=_n(aB,"disabled"),b1=he.forwardRef(function(i,e){const{className:t,children:n,size:r="normal"}=i,o=fwe(i,["className","children","size"]),s=i.disabled?mwe:null,u=mn(t,aB,r==="large"?pwe:gwe,s);return re.createElement("button",Object.assign({ref:e,className:u},o),n)});var _we=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const VK=Bn("checkbox"),vwe=gt(VK,"label"),bwe=gt(VK,"input");function Cwe(i){const{className:e,id:t,children:n,value:r,onChange:o,title:s,role:a,style:u}=i,d=_we(i,["className","id","children","value","onChange","title","role","style"]),h=mn(VK,e),f=m=>{o==null||o(m,{id:t,value:m.target.value})},p=v1(d);return re.createElement("div",Object.assign({className:h,role:a,style:u,title:s},p),re.createElement("input",{id:t.toString(),type:"checkbox",className:bwe,value:r,onChange:f}),re.createElement("label",{htmlFor:t.toString(),className:mn(vwe,"codicon")},n))}const _C=Bn("collapse"),ywe=gt(_C,"item"),ule=gt(_C,"pane"),wwe=_n(ule,"collapsing"),Swe=_n(_C,"active"),cle=gt(_C,"header"),Ewe=gt(cle,"title"),TQ=gt(_C,"content"),Lwe=gt(_C,"extra");var xwe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Dwe="tool-bar",Twe=Bn(Dwe);function tR(i){const{className:e}=i,t=xwe(i,["className"]);return re.createElement("div",{className:mn(Twe,e)},re.createElement(eR,Object.assign({},t)))}function gp({children:i,style:e,className:t,role:n,title:r}){return re.createElement("div",{role:n,title:r,className:t,style:e},i)}const RS=Bn("split"),Iwe=_n(RS,"dragging"),kwe=_n(RS,"vertical"),Nwe=_n(RS,"horizontal"),Awe=gt(RS,"pane"),nR=gt(RS,"sash"),Owe=_n(nR,"vertical"),Rwe=_n(nR,"horizontal"),Mwe=_n(nR,"disabled"),Pwe=_n(nR,"hover");var Fwe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function Bwe(i){var{className:e,onDragStart:t,onDragging:n,onDragEnd:r}=i,o=Fwe(i,["className","onDragStart","onDragging","onDragEnd"]);const s=he.useRef(),[a,u]=he.useState(!1),[d,h]=he.useState(!1);return he.useEffect(function(){return function(){clearTimeout(s.current)}},[]),re.createElement("div",Object.assign({role:"Resizer",className:mn(nR,(d||a)&&Pwe,e),onMouseEnter:()=>{s.current=setTimeout(()=>{u(!0)},150)},onMouseLeave:()=>{s.current&&(u(!1),clearTimeout(s.current))},onMouseDown:f=>{h(!0),t(f);const p=function(v){n(v)},m=function(v){h(!1),r(v),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)}},o))}var Wwe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const l9=function(i,e,t=1/0){return typeof i>"u"?t:typeof i=="number"?i:i.endsWith("%")?e*(+i.replace("%","")/100):i.endsWith("px")?+i.replace("px",""):t},_A=i=>{var e,{children:t,sizes:n,allowResize:r=!0,showSashes:o=!0,split:s="vertical",className:a,sashClassName:u,paneClassName:d,resizerSize:h=4,onChange:f}=i,p=Wwe(i,["children","sizes","allowResize","showSashes","split","className","sashClassName","paneClassName","resizerSize","onChange"]);const m=he.useRef({x:0,y:0}),v=he.useRef(null),[b,E]=he.useState({}),[S,w]=he.useState(!1);he.useEffect(()=>{const O=new ResizeObserver(()=>{E(v.current.getBoundingClientRect())});return O.observe(v.current),()=>{O.disconnect()}},[]);const{sizeName:L,sPos:A,sAxis:N}=he.useMemo(function(){return{sizeName:s==="vertical"?"width":"height",sPos:s==="vertical"?"left":"top",sAxis:s==="vertical"?"x":"y"}},[s]),H=(e=b[L])!==null&&e!==void 0?e:0,M=he.useMemo(function(){return t.map(O=>{const B=[0,1/0];if(O.type===gp){const{minSize:W,maxSize:j}=O.props;B[0]=l9(W,H,0),B[1]=l9(j,H)}return B})},[t,H]),R=he.useMemo(()=>typeof r=="boolean"?new Array(t.length).fill(r):t.map((O,B)=>{var W;return(W=r[B])!==null&&W!==void 0?W:!0}),[t.length,r]),q=he.useMemo(function(){let O=0,B=0,W=0;const j=t.map((G,z)=>{const k=l9(n[z],H);return k===1/0?O++:(B+=k,R[z]&&(W+=k)),k});if(R.filter(G=>G===!0).length===0)return j;if(B>H||!O&&B<H){const G=(B-H)/W;return j.map((z,k)=>z===1/0?0:R[k]?z-z*G:z)}if(O>0){const G=(H-B)/O;return j.map(z=>z===1/0?G:z)}return j},[...n,t.length,H,...R]),X=he.useMemo(function(){return q.reduce(function(O,B){return[...O,O[O.length-1]+B]},[0])},[...q]),$=he.useCallback(function(O){var B,W;m.current={x:(B=O.pageX)!==null&&B!==void 0?B:O.screenX,y:(W=O.pageY)!==null&&W!==void 0?W:O.screenY},w(!0)},[]),I=he.useCallback(function(O,B){var W,j;let G={x:(W=O.pageX)!==null&&W!==void 0?W:O.screenX,y:(j=O.pageY)!==null&&j!==void 0?j:O.screenY}[N]-m.current[N];const z=-Math.min(q[B]-M[B][0],M[B+1][1]-q[B+1]),k=Math.min(q[B+1]-M[B+1][0],M[B][1]-q[B]);G<z&&(G=z),G>k&&(G=k);const K=[...q];K[B]+=G,K[B+1]-=G,f==null||f(K)},[M,f,q]);return re.createElement("div",Object.assign({className:mn(RS,S&&Iwe,s==="vertical"&&kwe,s==="horizontal"&&Nwe,a),ref:v},p),t.map((O,B)=>{const W=mn(Awe,d),j={[L]:q[B],[A]:X[B]};let U=null;if(B>0){const G=o===!1||(o==null?void 0:o[B-1])===!1;U=re.createElement(Bwe,{className:mn(G&&Mwe,s==="vertical"?Owe:Rwe,u),style:{[L]:h,[A]:X[B]-h/2},onDragStart:$,onDragging:z=>I(z,B-1),onDragEnd:()=>{w(!1)}})}if(O.type===gp){const{className:G="",style:z={}}=O.props;return re.createElement(re.Fragment,{key:B},U,ZO(O,{className:mn(W,G),style:Object.assign(Object.assign({},z),j)}))}return re.createElement(re.Fragment,{key:B},U,re.createElement(gp,{className:W,style:j},O))}))};var Vwe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const $P=220,Hg=26;function dle(i){var{data:e=[],activePanelKeys:t,className:n,title:r,style:o,role:s,onCollapseChange:a,onToolbarClick:u,onResize:d}=i,h=Vwe(i,["data","activePanelKeys","className","title","style","role","onCollapseChange","onToolbarClick","onResize"]);const[f,p]=he.useState(new Array(e.length)),[m,v]=he.useState(!1),b=he.useRef(null),[E,S]=he.useState(e.map(W=>W.hidden?0:Hg)),w=he.useRef([]),L=he.useRef(!0),A=W=>W===void 0,N=(W,j)=>{for(let U=0;U<W.length;U++)if(W[U]!==j[U])return U+1;return-1},H=W=>{const j=N(E,W);j!==-1&&(w.current[j]=W[j],d==null||d(W),S(W))},M=(W,j,U)=>{W.stopPropagation(),u==null||u(j,U)},R=(W,j)=>j?j(W):null,q=(W,j)=>{const U=[...f];A(U[j])?U[j]=W:delete U[j],a==null||a(U),p(U.concat())},X=()=>{v(!0),$(),setTimeout(()=>{v(!1)},300)},$=()=>{if(f.filter(j=>!A(j)).length){const{height:j}=b.current.getBoundingClientRect();let U=j,G=0;const z=e.map((fe,ne)=>{var be,De,Ve,rt;if(fe.hidden)return 0;if(!f.includes(fe.id))return U=U-Hg,Hg;if(((be=fe.config)===null||be===void 0?void 0:be.grow)===0){const ut=(Ve=(De=b.current)===null||De===void 0?void 0:De.querySelector(`.${TQ}[data-collapse-index='${ne}']`))===null||Ve===void 0?void 0:Ve.querySelector(`[data-content='${fe.id}']`);if(!ut)return U=U-Hg,Hg;const{height:Ct}=ut.getBoundingClientRect(),Xe=Ct+Hg;return Xe>$P?(U=U-$P,$P):(U=U-Xe,Xe)}return typeof w.current[ne]<"u"?(U=U-w.current[ne],w.current[ne]):(G=G+(((rt=fe.config)===null||rt===void 0?void 0:rt.grow)||1),"auto")}),k=U/G,K=z.map((fe,ne)=>{var be;return fe==="auto"?k*(((be=e[ne].config)===null||be===void 0?void 0:be.grow)||1):fe});d==null||d(K),S(K)}else{const j=e.map(U=>U.hidden?0:Hg);d==null||d(j),S(j)}},{nextSashes:I,allowResize:O}=he.useMemo(function(){var W,j;const U=[];for(let G=1;G<f.length;G++){const z=!A(f[G-1]),k=((j=(W=e[G-1])===null||W===void 0?void 0:W.config)===null||j===void 0?void 0:j.grow)!==0,K=!A(f[G]),fe=z&&k&&K;U.push(fe)}return{nextSashes:U,allowResize:e.map((G,z)=>{var k;return((k=G==null?void 0:G.config)===null||k===void 0?void 0:k.grow)===0?!1:!A(f[z])})}},[f,e]);he.useLayoutEffect(()=>{L.current||X(),L.current=!1},[f,e]),he.useLayoutEffect(()=>{Array.isArray(t)&&p(t)},[t]);const B=v1(h);return re.createElement("div",Object.assign({ref:b,className:mn(_C,n),title:r,style:o,role:s},B),re.createElement(_A,{sizes:E,onChange:H,split:"horizontal",allowResize:O,showSashes:I,paneClassName:mn(ule,m&&wwe)},e.map((W,j)=>{const U=f.includes(W.id);return re.createElement(gp,{key:W.id,minSize:Hg},re.createElement("div",{className:mn(W.className,ywe,U&&Swe),"data-collapse-id":W.id},re.createElement("div",{className:cle,tabIndex:0,onClick:()=>q(W.id,j)},re.createElement(hr,{type:U?"chevron-down":"chevron-right"}),re.createElement("span",{className:Ewe},W.name),re.createElement("div",{className:Lwe},U&&re.createElement(tR,{key:W.id,data:W.toolbar||[],onClick:(G,z)=>M(G,z,W)}))),re.createElement("div",{className:TQ,tabIndex:0,"data-collapse-index":j},R(W,W.renderPanel))))})))}var IQ="data-rc-order",kQ="data-rc-priority",Hwe="rc-util-key",JV=new Map;function hle(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=i.mark;return e?e.startsWith("data-")?e:"data-".concat(e):Hwe}function lB(i){if(i.attachTo)return i.attachTo;var e=document.querySelector("head");return e||document.body}function $we(i){return i==="queue"?"prependQueue":i?"prepend":"append"}function HK(i){return Array.from((JV.get(i)||i).children).filter(function(e){return e.tagName==="STYLE"})}function fle(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!mC())return null;var t=e.csp,n=e.prepend,r=e.priority,o=r===void 0?0:r,s=$we(n),a=s==="prependQueue",u=document.createElement("style");u.setAttribute(IQ,s),a&&o&&u.setAttribute(kQ,"".concat(o)),t!=null&&t.nonce&&(u.nonce=t==null?void 0:t.nonce),u.innerHTML=i;var d=lB(e),h=d.firstChild;if(n){if(a){var f=(e.styles||HK(d)).filter(function(p){if(!["prepend","prependQueue"].includes(p.getAttribute(IQ)))return!1;var m=Number(p.getAttribute(kQ)||0);return o>=m});if(f.length)return d.insertBefore(u,f[f.length-1].nextSibling),u}d.insertBefore(u,h)}else d.appendChild(u);return u}function gle(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=lB(e);return(e.styles||HK(t)).find(function(n){return n.getAttribute(hle(e))===i})}function zwe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=gle(i,e);if(t){var n=lB(e);n.removeChild(t)}}function Uwe(i,e){var t=JV.get(i);if(!t||!iw(document,t)){var n=fle("",e),r=n.parentNode;JV.set(i,r),i.removeChild(n)}}function jwe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=lB(t),r=HK(n),o=yn(yn({},t),{},{styles:r});Uwe(n,o);var s=gle(e,o);if(s){var a,u;if((a=o.csp)!==null&&a!==void 0&&a.nonce&&s.nonce!==((u=o.csp)===null||u===void 0?void 0:u.nonce)){var d;s.nonce=(d=o.csp)===null||d===void 0?void 0:d.nonce}return s.innerHTML!==i&&(s.innerHTML=i),s}var h=fle(i,o);return h.setAttribute(hle(o),e),h}var u9;function Kwe(i){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),t=document.createElement("div");t.id=e;var n=t.style;n.position="absolute",n.left="0",n.top="0",n.width="100px",n.height="100px",n.overflow="scroll";var r,o;if(i){var s=getComputedStyle(i);n.scrollbarColor=s.scrollbarColor,n.scrollbarWidth=s.scrollbarWidth;var a=getComputedStyle(i,"::-webkit-scrollbar"),u=parseInt(a.width,10),d=parseInt(a.height,10);try{var h=u?"width: ".concat(a.width,";"):"",f=d?"height: ".concat(a.height,";"):"";jwe(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(h,`
`).concat(f,`
}`),e)}catch(v){console.error(v),r=u,o=d}}document.body.appendChild(t);var p=i&&r&&!isNaN(r)?r:t.offsetWidth-t.clientWidth,m=i&&o&&!isNaN(o)?o:t.offsetHeight-t.clientHeight;return document.body.removeChild(t),zwe(e),{width:p,height:m}}function ple(i){return typeof document>"u"?0:((i||u9===void 0)&&(u9=Kwe()),u9.width)}function Ww(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!i)return{};var t=e.element,n=t===void 0?document.body:t,r={},o=Object.keys(i);return o.forEach(function(s){r[s]=n.style[s]}),o.forEach(function(s){n.style[s]=i[s]}),r}function Gwe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var c9={};const NQ=function(i){if(!(!Gwe()&&!i)){var e="ant-scrolling-effect",t=new RegExp("".concat(e),"g"),n=document.body.className;if(i){if(!t.test(n))return;Ww(c9),c9={},document.body.className=n.replace(t,"").trim();return}var r=ple();if(r&&(c9=Ww({position:"relative",width:"calc(100% - ".concat(r,"px)")}),!t.test(n))){var o="".concat(n," ").concat(e);document.body.className=o.trim()}}};var qwe=0,Ec=[],mle="ant-scrolling-effect",d9=new RegExp("".concat(mle),"g"),h9=new Map,Ywe=$0(function i(e){var t=this;H0(this,i),en(this,"lockTarget",void 0),en(this,"options",void 0),en(this,"getContainer",function(){var n;return(n=t.options)===null||n===void 0?void 0:n.container}),en(this,"reLock",function(n){var r=Ec.find(function(o){var s=o.target;return s===t.lockTarget});r&&t.unLock(),t.options=n,r&&(r.options=n,t.lock())}),en(this,"lock",function(){var n;if(!Ec.some(function(u){var d=u.target;return d===t.lockTarget})){if(Ec.some(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)})){Ec=[].concat(eQ(Ec),[{target:t.lockTarget,options:t.options}]);return}var r=0,o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&getComputedStyle(o).overflow!=="hidden"&&(r=ple());var s=o.className;if(Ec.filter(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)}).length===0&&h9.set(o,Ww({width:r!==0?"calc(100% - ".concat(r,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!d9.test(s)){var a="".concat(s," ").concat(mle);o.className=a.trim()}Ec=[].concat(eQ(Ec),[{target:t.lockTarget,options:t.options}])}}),en(this,"unLock",function(){var n,r=Ec.find(function(a){var u=a.target;return u===t.lockTarget});if(Ec=Ec.filter(function(a){var u=a.target;return u!==t.lockTarget}),!(!r||Ec.some(function(a){var u,d=a.options;return(d==null?void 0:d.container)===((u=r.options)===null||u===void 0?void 0:u.container)}))){var o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body,s=o.className;d9.test(s)&&(Ww(h9.get(o),{element:o}),h9.delete(o),o.className=o.className.replace(d9,"").trim())}}),this.lockTarget=qwe++,this.options=e}),Og=0,ZN=mC(),yM={},jC=function(e){if(!ZN)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(Ks(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},Zwe=function(i){gC(t,i);var e=pC(t);function t(n){var r;return H0(this,t),r=e.call(this,n),en(Tn(r),"container",void 0),en(Tn(r),"componentRef",he.createRef()),en(Tn(r),"rafId",void 0),en(Tn(r),"scrollLocker",void 0),en(Tn(r),"renderComponent",void 0),en(Tn(r),"updateScrollLocker",function(o){var s=o||{},a=s.visible,u=r.props,d=u.getContainer,h=u.visible;h&&h!==a&&ZN&&jC(d)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:jC(d)})}),en(Tn(r),"updateOpenCount",function(o){var s=o||{},a=s.visible,u=s.getContainer,d=r.props,h=d.visible,f=d.getContainer;h!==a&&ZN&&jC(f)===document.body&&(h&&!a?Og+=1:o&&(Og-=1));var p=typeof f=="function"&&typeof u=="function";(p?f.toString()!==u.toString():f!==u)&&r.removeCurrentContainer()}),en(Tn(r),"attachToParent",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(o||r.container&&!r.container.parentNode){var s=jC(r.props.getContainer);return s?(s.appendChild(r.container),!0):!1}return!0}),en(Tn(r),"getContainer",function(){return ZN?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null}),en(Tn(r),"setWrapperClassName",function(){var o=r.props.wrapperClassName;r.container&&o&&o!==r.container.className&&(r.container.className=o)}),en(Tn(r),"removeCurrentContainer",function(){var o;(o=r.container)===null||o===void 0||(o=o.parentNode)===null||o===void 0||o.removeChild(r.container)}),en(Tn(r),"switchScrollingEffect",function(){Og===1&&!Object.keys(yM).length?(NQ(),yM=Ww({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):Og||(Ww(yM),yM={},NQ(!0))}),r.scrollLocker=new Ywe({container:jC(n.getContainer)}),r}return $0(t,[{key:"componentDidMount",value:function(){var r=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=Uh(function(){r.forceUpdate()}))}},{key:"componentDidUpdate",value:function(r){this.updateOpenCount(r),this.updateScrollLocker(r),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var r=this.props,o=r.visible,s=r.getContainer;ZN&&jC(s)===document.body&&(Og=o&&Og?Og-1:Og),this.removeCurrentContainer(),Uh.cancel(this.rafId)}},{key:"render",value:function(){var r=this.props,o=r.children,s=r.forceRender,a=r.visible,u=null,d={getOpenCount:function(){return Og},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(s||a||this.componentRef.current)&&(u=he.createElement(Iae,{getContainer:this.getContainer,ref:this.componentRef},o(d))),u}}]),t}(he.Component),Rn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Rn.F1&&t<=Rn.F12)return!1;switch(t){case Rn.ALT:case Rn.CAPS_LOCK:case Rn.CONTEXT_MENU:case Rn.CTRL:case Rn.DOWN:case Rn.END:case Rn.ESC:case Rn.HOME:case Rn.INSERT:case Rn.LEFT:case Rn.MAC_FF_META:case Rn.META:case Rn.NUMLOCK:case Rn.NUM_CENTER:case Rn.PAGE_DOWN:case Rn.PAGE_UP:case Rn.PAUSE:case Rn.PRINT_SCREEN:case Rn.RIGHT:case Rn.SHIFT:case Rn.UP:case Rn.WIN_KEY:case Rn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Rn.ZERO&&e<=Rn.NINE||e>=Rn.NUM_ZERO&&e<=Rn.NUM_MULTIPLY||e>=Rn.A&&e<=Rn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Rn.SPACE:case Rn.QUESTION_MARK:case Rn.NUM_PLUS:case Rn.NUM_MINUS:case Rn.NUM_PERIOD:case Rn.NUM_DIVISION:case Rn.SEMICOLON:case Rn.DASH:case Rn.EQUALS:case Rn.COMMA:case Rn.PERIOD:case Rn.SLASH:case Rn.APOSTROPHE:case Rn.SINGLE_QUOTE:case Rn.OPEN_SQUARE_BRACKET:case Rn.BACKSLASH:case Rn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Xwe(){var i=yn({},jve);return i.useId}var AQ=0,OQ=Xwe();const Qwe=OQ?function(e){var t=OQ();return e||t}:function(e){var t=he.useState("ssr-id"),n=fo(t,2),r=n[0],o=n[1];return he.useEffect(function(){var s=AQ;AQ+=1,o("rc_unique_".concat(s))},[]),e||r};var Jwe=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,eSe=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,tSe="".concat(Jwe," ").concat(eSe).split(/[\s\n]+/),nSe="aria-",iSe="data-";function RQ(i,e){return i.indexOf(e)===0}function rSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=yn({},e);var n={};return Object.keys(i).forEach(function(r){(t.aria&&(r==="role"||RQ(r,nSe))||t.data&&RQ(r,iSe)||t.attr&&tSe.includes(r))&&(n[r]=i[r])}),n}function oSe(i){var e=i.prefixCls,t=i.style,n=i.visible,r=i.maskProps,o=i.motionName;return he.createElement(OS,{key:"mask",visible:n,motionName:o,leavedClassName:"".concat(e,"-mask-hidden")},function(s){var a=s.className,u=s.style;return he.createElement("div",us({style:yn(yn({},u),t),className:nd("".concat(e,"-mask"),a)},r))})}function MQ(i,e,t){var n=e;return!n&&t&&(n="".concat(i,"-").concat(t)),n}function PQ(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function sSe(i){var e=i.getBoundingClientRect(),t={left:e.left,top:e.top},n=i.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=PQ(r),t.top+=PQ(r,!0),t}const aSe=he.memo(function(i){var e=i.children;return e},function(i,e){var t=e.shouldUpdate;return!t});var FQ={width:0,height:0,overflow:"hidden",outline:"none"},lSe=re.forwardRef(function(i,e){var t=i.prefixCls,n=i.className,r=i.style,o=i.title,s=i.ariaId,a=i.footer,u=i.closable,d=i.closeIcon,h=i.onClose,f=i.children,p=i.bodyStyle,m=i.bodyProps,v=i.modalRender,b=i.onMouseDown,E=i.onMouseUp,S=i.holderRef,w=i.visible,L=i.forceRender,A=i.width,N=i.height,H=he.useRef(),M=he.useRef();re.useImperativeHandle(e,function(){return{focus:function(){var B;(B=H.current)===null||B===void 0||B.focus()},changeActive:function(B){var W=document,j=W.activeElement;B&&j===M.current?H.current.focus():!B&&j===H.current&&M.current.focus()}}});var R={};A!==void 0&&(R.width=A),N!==void 0&&(R.height=N);var q;a&&(q=re.createElement("div",{className:"".concat(t,"-footer")},a));var X;o&&(X=re.createElement("div",{className:"".concat(t,"-header")},re.createElement("div",{className:"".concat(t,"-title"),id:s},o)));var $;u&&($=re.createElement("button",{type:"button",onClick:h,"aria-label":"Close",className:"".concat(t,"-close")},d||re.createElement("span",{className:"".concat(t,"-close-x")})));var I=re.createElement("div",{className:"".concat(t,"-content")},$,X,re.createElement("div",us({className:"".concat(t,"-body"),style:p},m),f),q);return re.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:S,style:yn(yn({},r),R),className:nd(t,n),onMouseDown:b,onMouseUp:E},re.createElement("div",{tabIndex:0,ref:H,style:FQ,"aria-hidden":"true"}),re.createElement(aSe,{shouldUpdate:w||L},v?v(I):I),re.createElement("div",{tabIndex:0,ref:M,style:FQ,"aria-hidden":"true"}))}),_le=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.title,r=i.style,o=i.className,s=i.visible,a=i.forceRender,u=i.destroyOnClose,d=i.motionName,h=i.ariaId,f=i.onVisibleChanged,p=i.mousePosition,m=he.useRef(),v=he.useState(),b=fo(v,2),E=b[0],S=b[1],w={};E&&(w.transformOrigin=E);function L(){var A=sSe(m.current);S(p?"".concat(p.x-A.left,"px ").concat(p.y-A.top,"px"):"")}return he.createElement(OS,{visible:s,onVisibleChanged:f,onAppearPrepare:L,onEnterPrepare:L,forceRender:a,motionName:d,removeOnLeave:u,ref:m},function(A,N){var H=A.className,M=A.style;return he.createElement(lSe,us({},i,{ref:e,title:n,ariaId:h,prefixCls:t,holderRef:N,style:yn(yn(yn({},M),r),w),className:nd(o,H)}))})});_le.displayName="Content";function BQ(i){var e=i.prefixCls,t=e===void 0?"rc-dialog":e,n=i.zIndex,r=i.visible,o=r===void 0?!1:r,s=i.keyboard,a=s===void 0?!0:s,u=i.focusTriggerAfterClose,d=u===void 0?!0:u,h=i.scrollLocker,f=i.wrapStyle,p=i.wrapClassName,m=i.wrapProps,v=i.onClose,b=i.afterClose,E=i.transitionName,S=i.animation,w=i.closable,L=w===void 0?!0:w,A=i.mask,N=A===void 0?!0:A,H=i.maskTransitionName,M=i.maskAnimation,R=i.maskClosable,q=R===void 0?!0:R,X=i.maskStyle,$=i.maskProps,I=i.rootClassName,O=he.useRef(),B=he.useRef(),W=he.useRef(),j=he.useState(o),U=fo(j,2),G=U[0],z=U[1],k=Qwe();function K(Re){if(Re){if(!iw(B.current,document.activeElement)){var ut;O.current=document.activeElement,(ut=W.current)===null||ut===void 0||ut.focus()}}else{if(z(!1),N&&O.current&&d){try{O.current.focus({preventScroll:!0})}catch{}O.current=null}G&&(b==null||b())}}function fe(Re){v==null||v(Re)}var ne=he.useRef(!1),be=he.useRef(),De=function(){clearTimeout(be.current),ne.current=!0},Ve=function(){be.current=setTimeout(function(){ne.current=!1})},rt=null;q&&(rt=function(ut){ne.current?ne.current=!1:B.current===ut.target&&fe(ut)});function At(Re){if(a&&Re.keyCode===Rn.ESC){Re.stopPropagation(),fe(Re);return}o&&Re.keyCode===Rn.TAB&&W.current.changeActive(!Re.shiftKey)}return he.useEffect(function(){return o&&z(!0),function(){}},[o]),he.useEffect(function(){return function(){clearTimeout(be.current)}},[]),he.useEffect(function(){return G?(h==null||h.lock(),h==null?void 0:h.unLock):function(){}},[G,h]),he.createElement("div",us({className:nd("".concat(t,"-root"),I)},rSe(i,{data:!0})),he.createElement(oSe,{prefixCls:t,visible:N&&o,motionName:MQ(t,H,M),style:yn({zIndex:n},X),maskProps:$}),he.createElement("div",us({tabIndex:-1,onKeyDown:At,className:nd("".concat(t,"-wrap"),p),ref:B,onClick:rt,style:yn(yn({zIndex:n},f),{},{display:G?null:"none"})},m),he.createElement(_le,us({},i,{onMouseDown:De,onMouseUp:Ve,ref:W,closable:L,ariaId:k,prefixCls:t,visible:o,onClose:fe,onVisibleChanged:K,motionName:MQ(t,E,S)}))))}var vle=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,o=e.destroyOnClose,s=o===void 0?!1:o,a=e.afterClose,u=he.useState(t),d=fo(u,2),h=d[0],f=d[1];return he.useEffect(function(){t&&f(!0)},[t]),n===!1?he.createElement(BQ,us({},e,{getOpenCount:function(){return 2}})):!r&&s&&!h?null:he.createElement(Zwe,{visible:t,forceRender:r,getContainer:n},function(p){return he.createElement(BQ,us({},e,{destroyOnClose:s,afterClose:function(){a==null||a(),f(!1)}},p))})};vle.displayName="Dialog";const $K=Bn("modal"),Ip=Bn("confirm"),uSe=gt($K,"close"),cSe=_n(uSe,"x"),dSe=_n($K,"centered"),hSe=gt(Ip,"container"),fSe=gt(Ip,"indicator"),gSe=i=>typeof i=="string"?gt(Ip,tH[i]):"",pSe=gt(Ip,"content"),zK=gt(Ip,"message"),mSe=gt(Ip,"btns"),_Se=_n(Ip,"centered"),vSe=_n(zK,"text"),bSe=_n(zK,"detail");var CSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Ry=[];let eH;const WQ=i=>{eH={x:i.pageX,y:i.pageY},setTimeout(()=>{eH=null},100)},ySe=re.createElement("span",{className:cSe},re.createElement(hr,{type:"close"})),ble=i=>{he.useEffect(()=>(document.documentElement.addEventListener("click",WQ,!0),()=>{document.documentElement.removeEventListener("click",WQ,!0)}),[]);const e=v=>{const{onCancel:b}=i;b==null||b(v)},t=v=>{const{onOk:b}=i;b==null||b(v)},{footer:n,visible:r,wrapClassName:o,centered:s,getContainer:a,closeIcon:u,cancelText:d="Cancel",okText:h="Ok"}=i,f=CSe(i,["footer","visible","wrapClassName","centered","getContainer","closeIcon","cancelText","okText"]),p=mn(o,{[dSe]:!!s}),m=()=>{const{footer:v,cancelButtonProps:b,okButtonProps:E}=i;return v!==void 0?v:re.createElement(re.Fragment,null,re.createElement(b1,Object.assign({onClick:e},b),d),re.createElement(b1,Object.assign({onClick:t},E),h))};return re.createElement(vle,Object.assign({},f,{getContainer:a,prefixCls:$K,wrapClassName:p,footer:m(),visible:r,mousePosition:eH,onClose:e,closeIcon:ySe}))},VQ=i=>{const e=he.useRef(!1),{close:t}=i,n=a=>{!a||!a.then||a.then((...u)=>{t==null||t(...u)},u=>{console.error(u),e.current=!1})},r=()=>{const{actionFn:a,close:u}=i;if(e.current)return;if(e.current=!0,!a){u==null||u();return}let d;if(a.length)d=a(u),e.current=!1;else if(d=a(),!d){u==null||u();return}n(d)},{children:o,buttonProps:s}=i;return re.createElement(b1,Object.assign({onClick:r},s),o)},wSe=i=>{const{actions:e,icon:t,onCancel:n,onOk:r,close:o,maskStyle:s,okText:a="Ok",okButtonProps:u,cancelText:d="Cancel",cancelButtonProps:h,okCancel:f,bodyStyle:p,closable:m=!1,className:v,width:b=520,style:E={},mask:S=!0,maskClosable:w=!1,transitionName:L="zoom",maskTransitionName:A="fade",type:N,visible:H}=i,M=gSe(N),R=mn(Ip,M,v),q=f&&re.createElement(VQ,{actionFn:n,close:o,buttonProps:h},d);return re.createElement(ble,{prefixCls:Ip,className:R,wrapClassName:mn({[_Se]:!!i.centered}),onCancel:()=>o({triggerCancel:!0}),transitionName:L,maskTransitionName:A,mask:S,maskClosable:w,style:E,width:b,closable:m,footer:"",title:"",maskStyle:s,visible:H},re.createElement("div",{className:hSe,style:p},re.createElement("div",{className:pSe},re.createElement("div",{className:fSe}," ",t," "),re.createElement("div",{className:zK},i.title!==void 0&&re.createElement("span",{className:vSe},i.title),re.createElement("div",{className:bSe},i.content))),re.createElement("div",{className:mSe},e===void 0?re.createElement(re.Fragment,null,q,re.createElement(VQ,{actionFn:r,close:o,buttonProps:u},a)):e)))};var SSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function Cle(i){const e=document.createElement("div");document.body.appendChild(e);const t=Object.assign(Object.assign({},i),{close:o,visible:!0});function n(...s){const a=s.some(d=>d&&d.triggerCancel);i.onCancel&&a&&i.onCancel(...s),lae(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let d=0;d<Ry.length;d++)if(Ry[d]===o){Ry.splice(d,1);break}}function r(s){var{okText:a,cancelText:u}=s,d=SSe(s,["okText","cancelText"]);uF(re.createElement(wSe,Object.assign({okText:a,cancelText:u},d)),e)}function o(...s){n(...s)}return r(t),Ry.push(o),{destroy:o}}function ESe(i){return Object.assign({type:"warning",okCancel:!1,icon:re.createElement(hr,{type:"warning"})},i)}function LSe(i){return Object.assign({type:"confirm",okCancel:!0,icon:re.createElement(hr,{type:"warning"})},i)}function yle(i){return Cle(ESe(i))}const iR=ble;var tH;(function(i){i.warning="warning",i.confirm="confirm"})(tH||(tH={}));iR.warning=yle;iR.warn=yle;iR.confirm=function(e){return Cle(LSe(e))};iR.destroyAll=function(){for(;Ry.length;){const e=Ry.pop();e&&e()}};var xSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const HQ=Bn("drop-down"),UK=he.forwardRef((i,e)=>{const{className:t,overlay:n,children:r,placement:o="right",trigger:s="click"}=i,a=xSe(i,["className","overlay","children","placement","trigger"]),u=XO({render:()=>n});he.useImperativeHandle(e,()=>({contextView:u,dispose:()=>{u.hide()}}));const d=mn(HQ,_n(HQ,o),t),h={[cae(s)]:function(f){if(!u)return;const m=f.currentTarget.getBoundingClientRect();let v=UX(o,m);if(u.show(v),o==="left"||o==="top"){const b=u.view.getBoundingClientRect();b.x=m.x,b.y=m.y,v=UX(o,b),u.show(v)}}};return re.createElement("div",Object.assign({className:d},h,a),r)});var nH;(function(i){i.ENTER="Enter"})(nH||(nH={}));var DSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const MS=Bn("input"),TSe=_n(MS,"normal"),ISe=_n(MS,"lg"),kSe=_n(MS,"disabled");function NSe(i){return typeof i>"u"||i===null?"":i}function wle(i,e,t){t&&t(e)}function ASe(i,e){return mn(MS,{[TSe]:i==="normal"},{[ISe]:i==="large"},{[kSe]:e})}let jK=class extends re.Component{constructor(e){super(e),this.input=null,this.saveInput=n=>{this.input=n},this.handleChange=n=>{const{onChange:r}=this.props;this.setValue(n.target.value),typeof r=="function"&&wle(this.input,n,r)},this.handleKeyDown=n=>{const{onPressEnter:r,onKeyDown:o}=this.props;n.key===nH.ENTER&&(r==null||r(n)),o==null||o(n)};const t=typeof e.value>"u"?e.defaultValue:e.value;this.state={value:t,prevValue:e.value}}static getDerivedStateFromProps(e,{prevValue:t}){const n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}setValue(e){this.props.value===void 0&&this.setState({value:e})}render(){const{value:e}=this.state,t=this.props,{className:n,size:r="normal",disabled:o=!1,placeholder:s,style:a}=t,u=DSe(t,["className","size","disabled","placeholder","style"]);return re.createElement("input",Object.assign({value:e,style:a,placeholder:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:mn(n,ASe(r,o)),ref:this.saveInput},u))}};jK.defaultProps={type:"text"};function iH(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return re.Children.forEach(i,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?t=t.concat(iH(n)):E2.isFragment(n)&&n.props?t=t.concat(iH(n.props.children,e)):t.push(n))}),t}var rH=he.createContext(null);function OSe(i){var e=i.children,t=i.onBatchResize,n=he.useRef(0),r=he.useRef([]),o=he.useContext(rH),s=he.useCallback(function(a,u,d){n.current+=1;var h=n.current;r.current.push({size:a,element:u,data:d}),Promise.resolve().then(function(){h===n.current&&(t==null||t(r.current),r.current=[])}),o==null||o(a,u,d)},[t,o]);return he.createElement(rH.Provider,{value:s},e)}var Bv=new Map;function RSe(i){i.forEach(function(e){var t,n=e.target;(t=Bv.get(n))===null||t===void 0||t.forEach(function(r){return r(n)})})}var Sle=new nle(RSe);function MSe(i,e){Bv.has(i)||(Bv.set(i,new Set),Sle.observe(i)),Bv.get(i).add(e)}function PSe(i,e){Bv.has(i)&&(Bv.get(i).delete(e),Bv.get(i).size||(Sle.unobserve(i),Bv.delete(i)))}var FSe=function(i){gC(t,i);var e=pC(t);function t(){return H0(this,t),e.apply(this,arguments)}return $0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component);function BSe(i,e){var t=i.children,n=i.disabled,r=he.useRef(null),o=he.useRef(null),s=he.useContext(rH),a=typeof t=="function",u=a?t(r):t,d=he.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!a&&he.isValidElement(u)&&IK(u),f=h?u.ref:null,p=hCe(f,r),m=function(){var S;return S2(r.current)||(r.current&&Ks(r.current)==="object"?S2((S=r.current)===null||S===void 0?void 0:S.nativeElement):null)||S2(o.current)};he.useImperativeHandle(e,function(){return m()});var v=he.useRef(i);v.current=i;var b=he.useCallback(function(E){var S=v.current,w=S.onResize,L=S.data,A=E.getBoundingClientRect(),N=A.width,H=A.height,M=E.offsetWidth,R=E.offsetHeight,q=Math.floor(N),X=Math.floor(H);if(d.current.width!==q||d.current.height!==X||d.current.offsetWidth!==M||d.current.offsetHeight!==R){var $={width:q,height:X,offsetWidth:M,offsetHeight:R};d.current=$;var I=M===Math.round(N)?N:M,O=R===Math.round(H)?H:R,B=yn(yn({},$),{},{offsetWidth:I,offsetHeight:O});s==null||s(B,E,L),w&&Promise.resolve().then(function(){w(B,E)})}},[]);return he.useEffect(function(){var E=m();return E&&!n&&MSe(E,b),function(){return PSe(E,b)}},[r.current,n]),he.createElement(FSe,{ref:o},h?he.cloneElement(u,{ref:p}):u)}var WSe=he.forwardRef(BSe),VSe="rc-observer-key";function HSe(i,e){var t=i.children,n=typeof t=="function"?[t]:iH(t);return n.map(function(r,o){var s=(r==null?void 0:r.key)||"".concat(VSe,"-").concat(o);return he.createElement(WSe,us({},i,{key:s,ref:o===0?e:void 0}),r)})}var Ele=he.forwardRef(HSe);Ele.Collection=OSe;function $Se(i,e){var t=Object.assign({},i);return Array.isArray(e)&&e.forEach(function(n){delete t[n]}),t}var zSe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,USe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],f9={},Lc;function jSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=i.getAttribute("id")||i.getAttribute("data-reactid")||i.getAttribute("name");if(e&&f9[t])return f9[t];var n=window.getComputedStyle(i),r=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),a=USe.map(function(d){return"".concat(d,":").concat(n.getPropertyValue(d))}).join(";"),u={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:r};return e&&t&&(f9[t]=u),u}function KSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Lc||(Lc=document.createElement("textarea"),Lc.setAttribute("tab-index","-1"),Lc.setAttribute("aria-hidden","true"),document.body.appendChild(Lc)),i.getAttribute("wrap")?Lc.setAttribute("wrap",i.getAttribute("wrap")):Lc.removeAttribute("wrap");var r=jSe(i,e),o=r.paddingSize,s=r.borderSize,a=r.boxSizing,u=r.sizingStyle;Lc.setAttribute("style","".concat(u,";").concat(zSe)),Lc.value=i.value||i.placeholder||"";var d=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,f=Lc.scrollHeight,p;if(a==="border-box"?f+=s:a==="content-box"&&(f-=o),t!==null||n!==null){Lc.value=" ";var m=Lc.scrollHeight-o;t!==null&&(d=m*t,a==="border-box"&&(d=d+o+s),f=Math.max(d,f)),n!==null&&(h=m*n,a==="border-box"&&(h=h+o+s),p=f>h?"":"hidden",f=Math.min(h,f))}return{height:f,minHeight:d,maxHeight:h,overflowY:p,resize:"none"}}var GSe=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),d=0;d<s.length;d++){var h=s[d];if(!u(h))return!1;var f=e[h],p=t[h];if(o=n?n.call(r,f,p,h):void 0,o===!1||o===void 0&&f!==p)return!1}return!0};const qSe=Wp(GSe);var Tv;(function(i){i[i.NONE=0]="NONE",i[i.RESIZING=1]="RESIZING",i[i.RESIZED=2]="RESIZED"})(Tv||(Tv={}));var YSe=function(i){gC(t,i);var e=pC(t);function t(n){var r;return H0(this,t),r=e.call(this,n),r.nextFrameActionId=void 0,r.resizeFrameId=void 0,r.textArea=void 0,r.saveTextArea=function(o){r.textArea=o},r.handleResize=function(o){var s=r.state.resizeStatus,a=r.props,u=a.autoSize,d=a.onResize;s===Tv.NONE&&(typeof d=="function"&&d(o),u&&r.resizeOnNextFrame())},r.resizeOnNextFrame=function(){cancelAnimationFrame(r.nextFrameActionId),r.nextFrameActionId=requestAnimationFrame(r.resizeTextarea)},r.resizeTextarea=function(){var o=r.props.autoSize;if(!(!o||!r.textArea)){var s=o.minRows,a=o.maxRows,u=KSe(r.textArea,!1,s,a);r.setState({textareaStyles:u,resizeStatus:Tv.RESIZING},function(){cancelAnimationFrame(r.resizeFrameId),r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Tv.RESIZED},function(){r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Tv.NONE}),r.fixFirefoxAutoScroll()})})})})}},r.renderTextArea=function(){var o=r.props,s=o.prefixCls,a=s===void 0?"rc-textarea":s,u=o.autoSize,d=o.onResize,h=o.className,f=o.disabled,p=r.state,m=p.textareaStyles,v=p.resizeStatus,b=$Se(r.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),E=nd(a,h,en({},"".concat(a,"-disabled"),f));"value"in b&&(b.value=b.value||"");var S=yn(yn(yn({},r.props.style),m),v===Tv.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return he.createElement(Ele,{onResize:r.handleResize,disabled:!(u||d)},he.createElement("textarea",us({},b,{className:E,style:S,ref:r.saveTextArea})))},r.state={textareaStyles:{},resizeStatus:Tv.NONE},r}return $0(t,[{key:"componentDidUpdate",value:function(r){(r.value!==this.props.value||!qSe(r.autoSize,this.props.autoSize))&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var r=this.textArea.selectionStart,o=this.textArea.selectionEnd;this.textArea.setSelectionRange(r,o)}}catch{}}},{key:"render",value:function(){return this.renderTextArea()}}]),t}(he.Component),ZSe=function(i){gC(t,i);var e=pC(t);function t(n){var r;H0(this,t),r=e.call(this,n),r.resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(s){r.resizableTextArea=s},r.handleChange=function(s){var a=r.props.onChange;r.setValue(s.target.value,function(){r.resizableTextArea.resizeTextarea()}),a&&a(s)},r.handleKeyDown=function(s){var a=r.props,u=a.onPressEnter,d=a.onKeyDown;s.keyCode===13&&u&&u(s),d&&d(s)};var o=typeof n.value>"u"||n.value===null?n.defaultValue:n.value;return r.state={value:o},r}return $0(t,[{key:"setValue",value:function(r,o){"value"in this.props||this.setState({value:r},o)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return he.createElement(YSe,us({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(r){return"value"in r?{value:r.value}:null}}]),t}(he.Component),Lle={},xle={exports:{}};(function(i){function e(t){return t&&t.__esModule?t:{default:t}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(xle);var KK=xle.exports,Dle={exports:{}},Tle={exports:{}};(function(i){function e(t){if(Array.isArray(t))return t}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Tle);var XSe=Tle.exports,Ile={exports:{}};(function(i){function e(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,s,a,u,d=[],h=!0,f=!1;try{if(a=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(o=a.call(r)).done)&&(d.push(o.value),d.length!==n);h=!0);}catch(p){f=!0,s=p}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw s}}return d}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Ile);var QSe=Ile.exports,kle={exports:{}},Nle={exports:{}};(function(i){function e(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,o=Array(n);r<n;r++)o[r]=t[r];return o}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Nle);var JSe=Nle.exports;(function(i){var e=JSe;function t(n,r){if(n){if(typeof n=="string")return e(n,r);var o={}.toString.call(n).slice(8,-1);return o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set"?Array.from(n):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(n,r):void 0}}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(kle);var eEe=kle.exports,Ale={exports:{}};(function(i){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Ale);var tEe=Ale.exports;(function(i){var e=XSe,t=QSe,n=eEe,r=tEe;function o(s,a){return e(s)||t(s,a)||n(s,a)||r()}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports})(Dle);var Ole=Dle.exports,GK={},Rle={exports:{}},Mle={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Mle);var nEe=Mle.exports;(function(i){var e=nEe.default;function t(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(t=function(u){return u?s:o})(r)}function n(r,o){if(!o&&r&&r.__esModule)return r;if(r===null||e(r)!="object"&&typeof r!="function")return{default:r};var s=t(o);if(s&&s.has(r))return s.get(r);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in r)if(d!=="default"&&{}.hasOwnProperty.call(r,d)){var h=u?Object.getOwnPropertyDescriptor(r,d):null;h&&(h.get||h.set)?Object.defineProperty(a,d,h):a[d]=r[d]}return a.default=r,s&&s.set(r,a),a}i.exports=n,i.exports.__esModule=!0,i.exports.default=i.exports})(Rle);var qK=Rle.exports,iEe=qK.default;Object.defineProperty(GK,"__esModule",{value:!0});GK.default=rEe;var $Q=iEe(he);function rEe(i){var e=$Q.useRef();e.current=i;var t=$Q.useCallback(function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return t}var Vw={},YK={};Object.defineProperty(YK,"__esModule",{value:!0});YK.default=oEe;function oEe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sEe=KK.default,aEe=qK.default;Object.defineProperty(Vw,"__esModule",{value:!0});Vw.useLayoutUpdateEffect=Vw.default=void 0;var oH=aEe(he),lEe=sEe(YK),zQ=(0,lEe.default)()?oH.useLayoutEffect:oH.useEffect,Ple=function(e,t){var n=oH.useRef(!0);zQ(function(){return e(n.current)},t),zQ(function(){return n.current=!1,function(){n.current=!0}},[])};Vw.useLayoutUpdateEffect=function(e,t){Ple(function(n){if(!n)return e()},t)};Vw.default=Ple;var ZK={},uEe=qK.default,cEe=KK.default;Object.defineProperty(ZK,"__esModule",{value:!0});ZK.default=hEe;var dEe=cEe(Ole),g9=uEe(he);function hEe(i){var e=g9.useRef(!1),t=g9.useState(i),n=(0,dEe.default)(t,2),r=n[0],o=n[1];g9.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,u){u&&e.current||o(a)}return[r,s]}var XK=KK.default;Object.defineProperty(Lle,"__esModule",{value:!0});var fEe=Lle.default=gEe,UQ=XK(Ole),jQ=XK(GK),KQ=Vw,GQ=XK(ZK);function p9(i){return i!==void 0}function gEe(i,e){var t=e||{},n=t.defaultValue,r=t.value,o=t.onChange,s=t.postState,a=(0,GQ.default)(function(){return p9(r)?r:p9(n)?typeof n=="function"?n():n:typeof i=="function"?i():i}),u=(0,UQ.default)(a,2),d=u[0],h=u[1],f=r!==void 0?r:d,p=s?s(f):f,m=(0,jQ.default)(o),v=(0,GQ.default)([f]),b=(0,UQ.default)(v,2),E=b[0],S=b[1];(0,KQ.useLayoutUpdateEffect)(function(){var L=E[0];d!==L&&m(d,L)},[E]),(0,KQ.useLayoutUpdateEffect)(function(){p9(r)||h(r)},[r]);var w=(0,jQ.default)(function(L,A){h(L,A),S([f],A)});return[p,w]}var pEe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Fle=gt(MS,"textarea"),mEe=_n(Fle,"show-count"),_Ee=i=>{var{showCount:e=!1,maxLength:t,className:n,style:r,onChange:o}=i,s=pEe(i,["showCount","maxLength","className","style","onChange"]);const a=he.useRef(null),[u,d]=fEe(s.defaultValue,{value:s.value}),h=he.useRef(s.value);he.useEffect(()=>{(s.value!==void 0||h.current!==s.value)&&(d(s.value),h.current=s.value)},[s.value,h.current]);const f=S=>{s.value===void 0&&d(S)},p=S=>{f(S.target.value),wle(a.current,S,o)},m=wr.omit(s,["value"]),v=re.createElement(ZSe,Object.assign({},m,{value:u,maxLength:t,className:mn(n&&!e?[n]:""),style:e?{}:r,prefixCls:MS,onChange:p,ref:a}));let b=NSe(u);const E=Number(t)>0;if(b=E?[...b].slice(0,t).join(""):b,e){const w=`${[...b].length}${E?` / ${t}`:""}`;return re.createElement("div",{className:mn(n,Fle,mEe),style:r,"data-count":w},v)}return v};jK.TextArea=_Ee;var vEe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const rR=Bn("list"),bEe=_n(rR,"vertical"),CEe=_n(rR,"horizontal");function yEe(i){const{children:e,current:t,disable:n,onClick:r,onSelect:o,className:s,mode:a}=i,u=vEe(i,["children","current","disable","onClick","onSelect","className","mode"]),[d,h]=he.useState(t),[f,p]=he.useState(n);he.useEffect(()=>{d!==t&&h(t),n!==f&&p(n)},[t,n]);const m=(E,S)=>{r==null||r(E,S),S&&(S.id!==d&&h(S.id),o==null||o(E,S))},b=mn(rR,s,a==="horizontal"?CEe:bEe);return re.createElement("ul",Object.assign({},u,{className:b}),ZO(e,{active:d,disable:f,onClick:m}))}var wEe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const QK=gt(rR,"item"),SEe=gt(rR,"label"),EEe=_n(QK,"active"),qQ=_n(QK,"disabled");function LEe(i){const{id:e,onClick:t,disabled:n,active:r,disable:o,className:s,children:a}=i,u=wEe(i,["id","onClick","disabled","active","disable","className","children"]),d=p=>{t==null||t(p,i)};let h="";(n!==void 0||n===!0)&&(h=qQ),o===e&&(h=qQ);const f=mn(QK,s,h,r===e?EEe:"");return re.createElement("li",Object.assign({id:e.toString(),className:f},u,{onClick:d}),re.createElement("span",{className:SEe},a))}class xEe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Ble=new xEe;function gn(i){Cg(i)||Ble.onUnexpectedError(i)}function Ms(i){Cg(i)||Ble.onUnexpectedExternalError(i)}function YQ(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const sH="Canceled";function Cg(i){return i instanceof Error&&i.name===sH&&i.message===sH}function vC(){const i=new Error(sH);return i.name=i.message,i}function jh(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function DEe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class TEe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function kp(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var Qn;(function(i){function e(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*r(w){yield w}i.single=r;function o(w){return w||t}i.from=o;function s(w){return!w||w[Symbol.iterator]().next().done===!0}i.isEmpty=s;function a(w){return w[Symbol.iterator]().next().value}i.first=a;function u(w,L){for(const A of w)if(L(A))return!0;return!1}i.some=u;function d(w,L){for(const A of w)if(L(A))return A}i.find=d;function*h(w,L){for(const A of w)L(A)&&(yield A)}i.filter=h;function*f(w,L){let A=0;for(const N of w)yield L(N,A++)}i.map=f;function*p(...w){for(const L of w)for(const A of L)yield A}i.concat=p;function*m(w){for(const L of w)for(const A of L)yield A}i.concatNested=m;function v(w,L,A){let N=A;for(const H of w)N=L(N,H);return N}i.reduce=v;function*b(w,L,A=w.length){for(L<0&&(L+=w.length),A<0?A+=w.length:A>w.length&&(A=w.length);L<A;L++)yield w[L]}i.slice=b;function E(w,L=Number.POSITIVE_INFINITY){const A=[];if(L===0)return[A,w];const N=w[Symbol.iterator]();for(let H=0;H<L;H++){const M=N.next();if(M.done)return[A,i.empty()];A.push(M.value)}return[A,{[Symbol.iterator](){return N}}]}i.consume=E;function S(w,L,A=(N,H)=>N===H){const N=w[Symbol.iterator](),H=L[Symbol.iterator]();for(;;){const M=N.next(),R=H.next();if(M.done!==R.done)return!1;if(M.done)return!0;if(!A(M.value,R.value))return!1}}i.equals=S})(Qn||(Qn={}));class IEe extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function JK(i){return typeof i.dispose=="function"&&i.dispose.length===0}function ri(i){if(Qn.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new IEe(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function t0(...i){return Un(()=>ri(i))}function Un(i){return{dispose:kp(()=>{i()})}}class Je{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{ri(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Je.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Je.DISABLE_DISPOSED_WARNING=!1;class Oe{constructor(){this._store=new Je,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Oe.None=Object.freeze({dispose(){}});class Ra{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class kEe{constructor(e){this.object=e}dispose(){}}let vo=class aH{constructor(e){this.element=e,this.next=aH.Undefined,this.prev=aH.Undefined}};vo.Undefined=new vo(void 0);class ku{constructor(){this._first=vo.Undefined,this._last=vo.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===vo.Undefined}clear(){let e=this._first;for(;e!==vo.Undefined;){const t=e.next;e.prev=vo.Undefined,e.next=vo.Undefined,e=t}this._first=vo.Undefined,this._last=vo.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new vo(e);if(this._first===vo.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==vo.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==vo.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==vo.Undefined&&e.next!==vo.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===vo.Undefined&&e.next===vo.Undefined?(this._first=vo.Undefined,this._last=vo.Undefined):e.next===vo.Undefined?(this._last=this._last.prev,this._last.next=vo.Undefined):e.prev===vo.Undefined&&(this._first=this._first.next,this._first.prev=vo.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==vo.Undefined;)yield e.element,e=e.next}}var m9;const zP="en";let _F=!1,vF=!1,UP=!1,Wle=!1,Vle=!1,eG=!1,XN,jP=zP,NEe,yv;const Yr=typeof self=="object"?self:typeof global=="object"?global:{};let hl;typeof Yr.vscode<"u"&&typeof Yr.vscode.process<"u"?hl=Yr.vscode.process:typeof process<"u"&&(hl=process);const AEe=typeof((m9=hl==null?void 0:hl.versions)===null||m9===void 0?void 0:m9.electron)=="string",OEe=AEe&&(hl==null?void 0:hl.type)==="renderer";if(typeof navigator=="object"&&!OEe)yv=navigator.userAgent,_F=yv.indexOf("Windows")>=0,vF=yv.indexOf("Macintosh")>=0,eG=(yv.indexOf("Macintosh")>=0||yv.indexOf("iPad")>=0||yv.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,UP=yv.indexOf("Linux")>=0,Vle=!0,XN=navigator.language,jP=XN;else if(typeof hl=="object"){_F=hl.platform==="win32",vF=hl.platform==="darwin",UP=hl.platform==="linux",UP&&hl.env.SNAP&&hl.env.SNAP_REVISION,XN=zP,jP=zP;const i=hl.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];XN=e.locale,jP=t||zP,NEe=e._translationsConfigFile}catch{}Wle=!0}else console.error("Unable to resolve platform.");const As=_F,Gn=vF,Qa=UP,Kh=Wle,PS=Vle,ng=eG,REe=yv,MEe=jP,PEe=XN,FEe=(()=>{if(typeof Yr.postMessage=="function"&&!Yr.importScripts){let i=[];Yr.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=i.length;n<r;n++){const o=i[n];if(o.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Yr.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),qu=vF||eG?2:_F?1:3;let ZQ=!0,XQ=!1;function Hle(){if(!XQ){XQ=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,ZQ=new Uint16Array(i.buffer)[0]===512+1}return ZQ}const BEe=Yr.performance&&typeof Yr.performance.now=="function";class ig{constructor(e){this._highResolution=BEe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new ig(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?Yr.performance.now():Date.now()}}var Mt;(function(i){i.None=()=>Oe.None;function e(w){return(L,A=null,N)=>{let H=!1,M;return M=w(R=>{if(!H)return M?M.dispose():H=!0,L.call(A,R)},null,N),H&&M.dispose(),M}}i.once=e;function t(w,L){return u((A,N=null,H)=>w(M=>A.call(N,L(M)),null,H))}i.map=t;function n(w,L){return u((A,N=null,H)=>w(M=>{L(M),A.call(N,M)},null,H))}i.forEach=n;function r(w,L){return u((A,N=null,H)=>w(M=>L(M)&&A.call(N,M),null,H))}i.filter=r;function o(w){return w}i.signal=o;function s(...w){return(L,A=null,N)=>t0(...w.map(H=>H(M=>L.call(A,M),null,N)))}i.any=s;function a(w,L,A){let N=A;return t(w,H=>(N=L(N,H),N))}i.reduce=a;function u(w){let L;const A=new Ce({onFirstListenerAdd(){L=w(A.fire,A)},onLastListenerRemove(){L.dispose()}});return A.event}function d(w,L,A=100,N=!1,H){let M,R,q,X=0;const $=new Ce({leakWarningThreshold:H,onFirstListenerAdd(){M=w(I=>{X++,R=L(R,I),N&&!q&&($.fire(R),R=void 0),clearTimeout(q),q=setTimeout(()=>{const O=R;R=void 0,q=void 0,(!N||X>1)&&$.fire(O),X=0},A)})},onLastListenerRemove(){M.dispose()}});return $.event}i.debounce=d;function h(w,L=(A,N)=>A===N){let A=!0,N;return r(w,H=>{const M=A||!L(H,N);return A=!1,N=H,M})}i.latch=h;function f(w,L){return[i.filter(w,L),i.filter(w,A=>!L(A))]}i.split=f;function p(w,L=!1,A=[]){let N=A.slice(),H=w(q=>{N?N.push(q):R.fire(q)});const M=()=>{N&&N.forEach(q=>R.fire(q)),N=null},R=new Ce({onFirstListenerAdd(){H||(H=w(q=>R.fire(q)))},onFirstListenerDidAdd(){N&&(L?setTimeout(M):M())},onLastListenerRemove(){H&&H.dispose(),H=null}});return R.event}i.buffer=p;class m{constructor(L){this.event=L}map(L){return new m(t(this.event,L))}forEach(L){return new m(n(this.event,L))}filter(L){return new m(r(this.event,L))}reduce(L,A){return new m(a(this.event,L,A))}latch(){return new m(h(this.event))}debounce(L,A=100,N=!1,H){return new m(d(this.event,L,A,N,H))}on(L,A,N){return this.event(L,A,N)}once(L,A,N){return e(this.event)(L,A,N)}}function v(w){return new m(w)}i.chain=v;function b(w,L,A=N=>N){const N=(...q)=>R.fire(A(...q)),H=()=>w.on(L,N),M=()=>w.removeListener(L,N),R=new Ce({onFirstListenerAdd:H,onLastListenerRemove:M});return R.event}i.fromNodeEventEmitter=b;function E(w,L,A=N=>N){const N=(...q)=>R.fire(A(...q)),H=()=>w.addEventListener(L,N),M=()=>w.removeEventListener(L,N),R=new Ce({onFirstListenerAdd:H,onLastListenerRemove:M});return R.event}i.fromDOMEventEmitter=E;function S(w){return new Promise(L=>e(w)(L))}i.toPromise=S})(Mt||(Mt={}));class uB{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${uB._idPool++}`}start(e){this._stopWatch=new ig(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}uB._idPool=0;let Ce=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new uB(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var r;this._listeners||(this._listeners=new ku);const o=this._listeners.isEmpty();o&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);o&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(r=this._leakageMon)===null||r===void 0?void 0:r.check(this._listeners.size),u=Un(()=>{a&&a(),this._disposed||(s(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Je?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new ku);for(let r of this._listeners)this._deliveryQueue.push([r,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[r,o]=this._deliveryQueue.shift();try{typeof r=="function"?r.call(void 0,o):r[0].call(r[1],o)}catch(s){gn(s)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,r,o;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(r=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||r===void 0||r.call(n),(o=this._leakageMon)===null||o===void 0||o.dispose())}};class bF extends Ce{constructor(e){super(e),this._isPaused=0,this._eventQueue=new ku,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class WEe extends bF{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class tG{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,r)=>e(o=>{const s=this.buffers[this.buffers.length-1];s?s.push(()=>t.call(n,o)):t.call(n,o)},void 0,r)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(r=>r()),n}}class QQ{constructor(){this.listening=!1,this.inputEvent=Mt.None,this.inputEventListener=Oe.None,this.emitter=new Ce({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class C1{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new Ce,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}C1.INSTANCE=new C1;function CF(){return C1.INSTANCE.getZoomLevel()}function $le(){return C1.INSTANCE.getTimeSinceLastZoomLevelChanged()}function nG(i){return C1.INSTANCE.onDidChangeZoomLevel(i)}function zle(){return C1.INSTANCE.getZoomFactor()}function vA(){return C1.INSTANCE.getPixelRatio()}const oR=navigator.userAgent,wl=oR.indexOf("Firefox")>=0,n0=oR.indexOf("AppleWebKit")>=0,iG=oR.indexOf("Chrome")>=0,Kc=!iG&&oR.indexOf("Safari")>=0,Ule=!iG&&!Kc&&n0,jle=oR.indexOf("Android")>=0,rG=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,VEe=Object.freeze(Object.defineProperty({__proto__:null,getPixelRatio:vA,getTimeSinceLastZoomLevelChanged:$le,getZoomFactor:zle,getZoomLevel:CF,isAndroid:jle,isChrome:iG,isFirefox:wl,isSafari:Kc,isStandalone:rG,isWebKit:n0,isWebkitWebView:Ule,onDidChangeZoomLevel:nG},Symbol.toStringTag,{value:"Module"})),cB={clipboard:{writeText:Kh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Kh||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Kh||rG?0:navigator.keyboard||Kc?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};class oG{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const KP=new oG,lH=new oG,uH=new oG,Kle=new Array(230),HEe=Object.create(null),$Ee=Object.create(null),sG=[];for(let i=0;i<=193;i++)sG[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const r of e){const[o,s,a,u,d,h,f,p,m,v]=r;if(n[a]||(n[a]=!0,HEe[u]=a,$Ee[u.toLowerCase()]=a,s&&(sG[a]=d)),!t[d]){if(t[d]=!0,!h)throw new Error(`String representation missing for key code ${d} around scan code ${u}`);KP.define(d,h),lH.define(d,m||h),uH.define(d,v||m||h)}f&&(Kle[f]=d)}})();var Mb;(function(i){function e(a){return KP.keyCodeToStr(a)}i.toString=e;function t(a){return KP.strToKeyCode(a)}i.fromString=t;function n(a){return lH.keyCodeToStr(a)}i.toUserSettingsUS=n;function r(a){return uH.keyCodeToStr(a)}i.toUserSettingsGeneral=r;function o(a){return lH.strToKeyCode(a)||uH.strToKeyCode(a)}i.fromUserSettings=o;function s(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return KP.keyCodeToStr(a)}i.toElectronAccelerator=s})(Mb||(Mb={}));function Zr(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}function cH(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new yF([_9(t,e),_9(n,e)]):new yF([_9(t,e)])}function _9(i,e){const t=!!(i&2048),n=!!(i&256),r=e===2?n:t,o=!!(i&1024),s=!!(i&512),a=e===2?t:n,u=i&255;return new y1(r,o,s,a,u)}class y1{constructor(e,t,n,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new yF([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class yF{constructor(e){if(e.length===0)throw jh("parts");this.parts=e}}class zEe{constructor(e,t,n,r,o,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=o,this.keyAriaLabel=s}}class UEe{}function jEe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return Mb.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(wl){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(Gn&&e===224)return 57}else if(n0){if(e===91)return 57;if(Gn&&e===93)return 57;if(!Gn&&e===92)return 57}return Kle[e]||0}const KEe=Gn?256:2048,GEe=512,qEe=1024,YEe=Gn?2048:256;class Sr{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=jEe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=KEe),this.altKey&&(t|=GEe),this.shiftKey&&(t|=qEe),this.metaKey&&(t|=YEe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new y1(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let dH=!1,KC=null;function ZEe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return dH=!0,null}catch{return dH=!0,null}return i.parent}class hH{static getSameOriginWindowChain(){if(!KC){KC=[];let e=window,t;do t=ZEe(e),t?KC.push({window:e,iframeElement:e.frameElement||null}):KC.push({window:e,iframeElement:null}),e=t;while(e)}return KC.slice(0)}static hasDifferentOriginAncestor(){return KC||this.getSameOriginWindowChain(),dH}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0,o=this.getSameOriginWindowChain();for(const s of o){if(n+=s.window.scrollY,r+=s.window.scrollX,s.window===t||!s.iframeElement)break;let a=s.iframeElement.getBoundingClientRect();n+=a.top,r+=a.left}return{top:n,left:r}}}class Ju{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=hH.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Hw{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let r=e,o=e;if(typeof r.wheelDeltaY<"u")this.deltaY=r.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?wl&&!Gn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")Kc&&As?this.deltaX=-(r.wheelDeltaX/120):this.deltaX=r.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?wl&&!Gn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}const Gle=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Fn;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof GP?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Mt.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Gle})})(Fn||(Fn={}));class GP{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Gle:(this._emitter||(this._emitter=new Ce),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let aa=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new GP),this._token}cancel(){this._token?this._token instanceof GP&&this._token.cancel():this._token=Fn.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof GP&&this._token.dispose():this._token=Fn.None}};var ju=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},QN=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,u){s=i[o](s),r(a,u,s.done,s.value)})}}function r(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}};function XEe(i){return!!i&&typeof i.then=="function"}function cs(i){const e=new aa,t=i(e.token),n=new Promise((r,o)=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),o(vC())});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),r(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(r,o){return n.then(r,o)}catch(r){return this.then(void 0,r)}finally(r){return n.finally(r)}}}function aG(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class QEe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,n(r)})})}}class Np{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,r)=>{this.doResolve=n,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(vC()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class JEe{constructor(e){this.delayer=new Np(e),this.throttler=new QEe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function m0(i,e){return e?new Promise((t,n)=>{const r=setTimeout(()=>{o.dispose(),t()},i),o=e.onCancellationRequested(()=>{clearTimeout(r),o.dispose(),n(vC())})}):cs(t=>m0(i,t))}function w1(i,e=0){const t=setTimeout(i,e);return Un(()=>clearTimeout(t))}function qle(i,e=n=>!!n,t=null){let n=0;const r=i.length,o=()=>{if(n>=r)return Promise.resolve(t);const s=i[n++];return Promise.resolve(s()).then(u=>e(u)?Promise.resolve(u):o())};return o()}class Ma{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class sR{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class tr{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let bA;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?bA=i=>{FEe(()=>{if(e)return;const t=Date.now()+3;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:bA=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class ow{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=bA(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Yle{constructor(){this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}}var fH;(function(i){function e(n){return ju(this,void 0,void 0,function*(){let r;const o=yield Promise.all(n.map(s=>s.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return o})}i.settled=e;function t(n){return new Promise((r,o)=>ju(this,void 0,void 0,function*(){try{yield n(r,o)}catch(s){o(s)}}))}i.withAsyncBody=t})(fH||(fH={}));class Yo{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Ce,queueMicrotask(()=>ju(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Yo(t=>{t.emitMany(e)})}static fromPromise(e){return new Yo(t=>ju(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Yo(t=>ju(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>ju(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Yo(t=>ju(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var r,o;return ju(this,void 0,void 0,function*(){var s,a;try{for(r=QN(n);o=yield r.next(),!o.done;){const u=o.value;t.emitOne(u)}}catch(u){s={error:u}}finally{try{o&&!o.done&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>ju(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Mt.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Yo(n=>ju(this,void 0,void 0,function*(){var r,o;try{for(var s=QN(e),a;a=yield s.next(),!a.done;){const u=a.value;n.emitOne(t(u))}}catch(u){r={error:u}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(r)throw r.error}}}))}map(e){return Yo.map(this,e)}static filter(e,t){return new Yo(n=>ju(this,void 0,void 0,function*(){var r,o;try{for(var s=QN(e),a;a=yield s.next(),!a.done;){const u=a.value;t(u)&&n.emitOne(u)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(r)throw r.error}}}))}filter(e){return Yo.filter(this,e)}static coalesce(e){return Yo.filter(e,t=>!!t)}coalesce(){return Yo.coalesce(this)}static toPromise(e){var t,n,r,o;return ju(this,void 0,void 0,function*(){const s=[];try{for(t=QN(e);n=yield t.next(),!n.done;){const a=n.value;s.push(a)}}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}return s})}toPromise(){return Yo.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Yo.EMPTY=Yo.fromArray([]);class eLe extends Yo{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function tLe(i){const e=new aa,t=i(e.token);return new eLe(e,n=>ju(this,void 0,void 0,function*(){var r,o;const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(vC())});try{try{for(var a=QN(t),u;u=yield a.next(),!u.done;){const d=u.value;if(e.token.isCancellationRequested)return;n.emitOne(d)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(o=a.return)&&(yield o.call(a))}finally{if(r)throw r.error}}s.dispose(),e.dispose()}catch(d){s.dispose(),e.dispose(),n.reject(d)}}))}let sw;if(typeof Yr.vscode<"u"&&typeof Yr.vscode.process<"u"){const i=Yr.vscode.process;sw={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"?sw={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:sw={get platform(){return As?"win32":Gn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const gH=sw.cwd,nLe=sw.env,bC=sw.platform,iLe=65,rLe=97,oLe=90,sLe=122,i0=46,Zs=47,wu=92,gv=58,aLe=63;class Zle extends Error{constructor(e,t,n){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const o=e.indexOf(".")!==-1?"property":"argument";let s=`The "${e}" ${o} ${r} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function Zo(i,e){if(typeof i!="string")throw new Zle(e,"string",i)}function Ti(i){return i===Zs||i===wu}function pH(i){return i===Zs}function pv(i){return i>=iLe&&i<=oLe||i>=rLe&&i<=sLe}function wF(i,e,t,n){let r="",o=0,s=-1,a=0,u=0;for(let d=0;d<=i.length;++d){if(d<i.length)u=i.charCodeAt(d);else{if(n(u))break;u=Zs}if(n(u)){if(!(s===d-1||a===1))if(a===2){if(r.length<2||o!==2||r.charCodeAt(r.length-1)!==i0||r.charCodeAt(r.length-2)!==i0){if(r.length>2){const h=r.lastIndexOf(t);h===-1?(r="",o=0):(r=r.slice(0,h),o=r.length-1-r.lastIndexOf(t)),s=d,a=0;continue}else if(r.length!==0){r="",o=0,s=d,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",o=2)}else r.length>0?r+=`${t}${i.slice(s+1,d)}`:r=i.slice(s+1,d),o=d-s-1;s=d,a=0}else u===i0&&a!==-1?++a:a=-1}return r}function Xle(i,e){if(e===null||typeof e!="object")throw new Zle("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const pl={resolve(...i){let e="",t="",n=!1;for(let r=i.length-1;r>=-1;r--){let o;if(r>=0){if(o=i[r],Zo(o,"path"),o.length===0)continue}else e.length===0?o=gH():(o=nLe[`=${e}`]||gH(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===wu)&&(o=`${e}\\`));const s=o.length;let a=0,u="",d=!1;const h=o.charCodeAt(0);if(s===1)Ti(h)&&(a=1,d=!0);else if(Ti(h))if(d=!0,Ti(o.charCodeAt(1))){let f=2,p=f;for(;f<s&&!Ti(o.charCodeAt(f));)f++;if(f<s&&f!==p){const m=o.slice(p,f);for(p=f;f<s&&Ti(o.charCodeAt(f));)f++;if(f<s&&f!==p){for(p=f;f<s&&!Ti(o.charCodeAt(f));)f++;(f===s||f!==p)&&(u=`\\\\${m}\\${o.slice(p,f)}`,a=f)}}}else a=1;else pv(h)&&o.charCodeAt(1)===gv&&(u=o.slice(0,2),a=2,s>2&&Ti(o.charCodeAt(2))&&(d=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=wF(t,!n,"\\",Ti),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Zo(i,"path");const e=i.length;if(e===0)return".";let t=0,n,r=!1;const o=i.charCodeAt(0);if(e===1)return pH(o)?"\\":i;if(Ti(o))if(r=!0,Ti(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ti(i.charCodeAt(a));)a++;if(a<e&&a!==u){const d=i.slice(u,a);for(u=a;a<e&&Ti(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ti(i.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${i.slice(u)}\\`;a!==u&&(n=`\\\\${d}\\${i.slice(u,a)}`,t=a)}}}else t=1;else pv(o)&&i.charCodeAt(1)===gv&&(n=i.slice(0,2),t=2,e>2&&Ti(i.charCodeAt(2))&&(r=!0,t=3));let s=t<e?wF(i.slice(t),!r,"\\",Ti):"";return s.length===0&&!r&&(s="."),s.length>0&&Ti(i.charCodeAt(e-1))&&(s+="\\"),n===void 0?r?`\\${s}`:s:r?`${n}\\${s}`:`${n}${s}`},isAbsolute(i){Zo(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return Ti(t)||e>2&&pv(t)&&i.charCodeAt(1)===gv&&Ti(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let o=0;o<i.length;++o){const s=i[o];Zo(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,r=0;if(typeof t=="string"&&Ti(t.charCodeAt(0))){++r;const o=t.length;o>1&&Ti(t.charCodeAt(1))&&(++r,o>2&&(Ti(t.charCodeAt(2))?++r:n=!1))}if(n){for(;r<e.length&&Ti(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return pl.normalize(e)},relative(i,e){if(Zo(i,"from"),Zo(e,"to"),i===e)return"";const t=pl.resolve(i),n=pl.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let r=0;for(;r<i.length&&i.charCodeAt(r)===wu;)r++;let o=i.length;for(;o-1>r&&i.charCodeAt(o-1)===wu;)o--;const s=o-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===wu;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===wu;)u--;const d=u-a,h=s<d?s:d;let f=-1,p=0;for(;p<h;p++){const v=i.charCodeAt(r+p);if(v!==e.charCodeAt(a+p))break;v===wu&&(f=p)}if(p!==h){if(f===-1)return n}else{if(d>h){if(e.charCodeAt(a+p)===wu)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>h&&(i.charCodeAt(r+p)===wu?f=p:p===2&&(f=3)),f===-1&&(f=0)}let m="";for(p=r+f+1;p<=o;++p)(p===o||i.charCodeAt(p)===wu)&&(m+=m.length===0?"..":"\\..");return a+=f,m.length>0?`${m}${n.slice(a,u)}`:(n.charCodeAt(a)===wu&&++a,n.slice(a,u))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=pl.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===wu){if(e.charCodeAt(1)===wu){const t=e.charCodeAt(2);if(t!==aLe&&t!==i0)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(pv(e.charCodeAt(0))&&e.charCodeAt(1)===gv&&e.charCodeAt(2)===wu)return`\\\\?\\${e}`;return i},dirname(i){Zo(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const r=i.charCodeAt(0);if(e===1)return Ti(r)?i:".";if(Ti(r)){if(t=n=1,Ti(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ti(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&Ti(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ti(i.charCodeAt(a));)a++;if(a===e)return i;a!==u&&(t=n=a+1)}}}}else pv(r)&&i.charCodeAt(1)===gv&&(t=e>2&&Ti(i.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Ti(i.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return i.slice(0,o)},basename(i,e){e!==void 0&&Zo(e,"ext"),Zo(i,"path");let t=0,n=-1,r=!0,o;if(i.length>=2&&pv(i.charCodeAt(0))&&i.charCodeAt(1)===gv&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(o=i.length-1;o>=t;--o){const u=i.charCodeAt(o);if(Ti(u)){if(!r){t=o+1;break}}else a===-1&&(r=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=t;--o)if(Ti(i.charCodeAt(o))){if(!r){t=o+1;break}}else n===-1&&(r=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){Zo(i,"path");let e=0,t=-1,n=0,r=-1,o=!0,s=0;i.length>=2&&i.charCodeAt(1)===gv&&pv(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const u=i.charCodeAt(a);if(Ti(u)){if(!o){n=a+1;break}continue}r===-1&&(o=!1,r=a+1),u===i0?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||r===-1||s===0||s===1&&t===r-1&&t===n+1?"":i.slice(t,r)},format:Xle.bind(null,"\\"),parse(i){Zo(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,r=i.charCodeAt(0);if(t===1)return Ti(r)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Ti(r)){if(n=1,Ti(i.charCodeAt(1))){let f=2,p=f;for(;f<t&&!Ti(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&Ti(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&!Ti(i.charCodeAt(f));)f++;f===t?n=f:f!==p&&(n=f+1)}}}}else if(pv(r)&&i.charCodeAt(1)===gv){if(t<=2)return e.root=e.dir=i,e;if(n=2,Ti(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let o=-1,s=n,a=-1,u=!0,d=i.length-1,h=0;for(;d>=n;--d){if(r=i.charCodeAt(d),Ti(r)){if(!u){s=d+1;break}continue}a===-1&&(u=!1,a=d+1),r===i0?o===-1?o=d:h!==1&&(h=1):o!==-1&&(h=-1)}return a!==-1&&(o===-1||h===0||h===1&&o===a-1&&o===s+1?e.base=e.name=i.slice(s,a):(e.name=i.slice(s,o),e.base=i.slice(s,a),e.ext=i.slice(o,a))),s>0&&s!==n?e.dir=i.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Do={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const r=n>=0?i[n]:gH();Zo(r,"path"),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===Zs)}return e=wF(e,!t,"/",pH),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Zo(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Zs,t=i.charCodeAt(i.length-1)===Zs;return i=wF(i,!e,"/",pH),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Zo(i,"path"),i.length>0&&i.charCodeAt(0)===Zs},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];Zo(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Do.normalize(e)},relative(i,e){if(Zo(i,"from"),Zo(e,"to"),i===e||(i=Do.resolve(i),e=Do.resolve(e),i===e))return"";const t=1,n=i.length,r=n-t,o=1,s=e.length-o,a=r<s?r:s;let u=-1,d=0;for(;d<a;d++){const f=i.charCodeAt(t+d);if(f!==e.charCodeAt(o+d))break;f===Zs&&(u=d)}if(d===a)if(s>a){if(e.charCodeAt(o+d)===Zs)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else r>a&&(i.charCodeAt(t+d)===Zs?u=d:d===0&&(u=0));let h="";for(d=t+u+1;d<=n;++d)(d===n||i.charCodeAt(d)===Zs)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(o+u)}`},toNamespacedPath(i){return i},dirname(i){if(Zo(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Zs;let t=-1,n=!0;for(let r=i.length-1;r>=1;--r)if(i.charCodeAt(r)===Zs){if(!n){t=r;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Zo(e,"ext"),Zo(i,"path");let t=0,n=-1,r=!0,o;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(o=i.length-1;o>=0;--o){const u=i.charCodeAt(o);if(u===Zs){if(!r){t=o+1;break}}else a===-1&&(r=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=0;--o)if(i.charCodeAt(o)===Zs){if(!r){t=o+1;break}}else n===-1&&(r=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){Zo(i,"path");let e=-1,t=0,n=-1,r=!0,o=0;for(let s=i.length-1;s>=0;--s){const a=i.charCodeAt(s);if(a===Zs){if(!r){t=s+1;break}continue}n===-1&&(r=!1,n=s+1),a===i0?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:Xle.bind(null,"/"),parse(i){Zo(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Zs;let n;t?(e.root="/",n=1):n=0;let r=-1,o=0,s=-1,a=!0,u=i.length-1,d=0;for(;u>=n;--u){const h=i.charCodeAt(u);if(h===Zs){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),h===i0?r===-1?r=u:d!==1&&(d=1):r!==-1&&(d=-1)}if(s!==-1){const h=o===0&&t?1:o;r===-1||d===0||d===1&&r===s-1&&r===o+1?e.base=e.name=i.slice(h,s):(e.name=i.slice(h,r),e.base=i.slice(h,s),e.ext=i.slice(r,s))}return o>0?e.dir=i.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Do.win32=pl.win32=pl;Do.posix=pl.posix=Do;const lG=bC==="win32"?pl.normalize:Do.normalize,lLe=bC==="win32"?pl.resolve:Do.resolve,uLe=bC==="win32"?pl.relative:Do.relative,Qle=bC==="win32"?pl.dirname:Do.dirname,Gb=bC==="win32"?pl.basename:Do.basename,cLe=bC==="win32"?pl.extname:Do.extname,qb=bC==="win32"?pl.sep:Do.sep,dLe=/^\w[\w\d+.-]*$/,hLe=/^\//,fLe=/^\/\//;function JQ(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!dLe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!hLe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(fLe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function gLe(i,e){return!i&&!e?"file":i}function pLe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==kh&&(e=kh+e):e=kh;break}return e}const Kr="",kh="/",mLe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class rn{constructor(e,t,n,r,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Kr,this.authority=e.authority||Kr,this.path=e.path||Kr,this.query=e.query||Kr,this.fragment=e.fragment||Kr):(this.scheme=gLe(e,s),this.authority=t||Kr,this.path=pLe(this.scheme,n||Kr),this.query=r||Kr,this.fragment=o||Kr,JQ(this,s))}static isUri(e){return e instanceof rn?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return SF(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=Kr),n===void 0?n=this.authority:n===null&&(n=Kr),r===void 0?r=this.path:r===null&&(r=Kr),o===void 0?o=this.query:o===null&&(o=Kr),s===void 0?s=this.fragment:s===null&&(s=Kr),t===this.scheme&&n===this.authority&&r===this.path&&o===this.query&&s===this.fragment?this:new GC(t,n,r,o,s)}static parse(e,t=!1){const n=mLe.exec(e);return n?new GC(n[2]||Kr,wM(n[4]||Kr),wM(n[5]||Kr),wM(n[7]||Kr),wM(n[9]||Kr),t):new GC(Kr,Kr,Kr,Kr,Kr)}static file(e){let t=Kr;if(As&&(e=e.replace(/\\/g,kh)),e[0]===kh&&e[1]===kh){const n=e.indexOf(kh,2);n===-1?(t=e.substring(2),e=kh):(t=e.substring(2,n),e=e.substring(n)||kh)}return new GC("file",t,e,Kr,Kr)}static from(e){const t=new GC(e.scheme,e.authority,e.path,e.query,e.fragment);return JQ(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return As&&e.scheme==="file"?n=rn.file(pl.join(SF(e,!0),...t)).path:n=Do.join(e.path,...t),e.with({path:n})}toString(e=!1){return mH(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof rn)return e;{const t=new GC(e);return t._formatted=e.external,t._fsPath=e._sep===Jle?e.fsPath:null,t}}else return e}}const Jle=As?1:void 0;let GC=class extends rn{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=SF(this,!1)),this._fsPath}toString(e=!1){return e?mH(this,!0):(this._formatted||(this._formatted=mH(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Jle),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const eue={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function eJ(i,e){let t,n=-1;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t!==void 0&&(t+=i.charAt(r));else{t===void 0&&(t=i.substr(0,r));const s=eue[o];s!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t+=s):n===-1&&(n=r)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function _Le(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=eue[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function SF(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,As&&(t=t.replace(/\//g,"\\")),t}function mH(i,e){const t=e?_Le:eJ;let n="",{scheme:r,authority:o,path:s,query:a,fragment:u}=i;if(r&&(n+=r,n+=":"),(o||r==="file")&&(n+=kh,n+=kh),o){let d=o.indexOf("@");if(d!==-1){const h=o.substr(0,d);o=o.substr(d+1),d=h.indexOf(":"),d===-1?n+=t(h,!1):(n+=t(h.substr(0,d),!1),n+=":",n+=t(h.substr(d+1),!1)),n+="@"}o=o.toLowerCase(),d=o.indexOf(":"),d===-1?n+=t(o,!1):(n+=t(o.substr(0,d),!1),n+=o.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){const d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){const d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0)}return a&&(n+="?",n+=t(a,!1)),u&&(n+="#",n+=e?u:eJ(u,!1)),n}function tue(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+tue(i.substr(3)):i}}const tJ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function wM(i){return i.match(tJ)?i.replace(tJ,e=>tue(e)):i}var In;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls"})(In||(In={}));class vLe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const r=this._ports[t],o=this._connectionTokens[t];let s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&tkn=${encodeURIComponent(o)}`),rn.from({scheme:PS?this._preferredWebSchema:In.vscodeRemoteResource,authority:`${n}:${r}`,path:"/vscode-remote-resource",query:s})}}const nue=new vLe;class CA{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===In.vscodeRemote?nue.rewrite(n):n.scheme===In.file&&(Kh||typeof Yr.importScripts=="function"&&Yr.origin===`${In.vscodeFileResource}://${CA.FALLBACK_AUTHORITY}`)?n.with({scheme:In.vscodeFileResource,authority:n.authority||CA.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return rn.isUri(e)?e:rn.parse(t.toUrl(e))}}CA.FALLBACK_AUTHORITY="vscode-app";const iue=new CA;function $o(i){for(;i.firstChild;)i.firstChild.remove()}function uG(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class rue{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function qe(i,e,t,n){return new rue(i,e,t,n)}function oue(i){return function(e){return i(new Ju(e))}}function bLe(i){return function(e){return i(new Sr(e))}}let ts=function(e,t,n,r){let o=n;return t==="click"||t==="mousedown"?o=oue(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=bLe(n)),qe(e,t,o,r)},CLe=function(e,t,n){let r=oue(t);return cG(e,r,n)};function cG(i,e,t){return qe(i,ng&&cB.pointerEvents?Ht.POINTER_DOWN:Ht.MOUSE_DOWN,e,t)}function sue(i,e,t){return qe(i,ng&&cB.pointerEvents?Ht.POINTER_UP:Ht.MOUSE_UP,e,t)}function dG(i,e){return qe(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function yLe(i,e){return qe(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function mh(i,e,t){let n=null;const r=u=>a.fire(u),o=()=>{n||(n=new rue(i,e,r,t))},s=()=>{n&&(n.dispose(),n=null)},a=new Ce({onFirstListenerAdd:o,onLastListenerRemove:s});return a}let v9=null;function wLe(i){if(!v9){const e=t=>setTimeout(()=>t(new Date().getTime()),0);v9=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return v9.call(self,i)}let aue,rg;class b9{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){gn(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,r=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(b9.sort),e.shift().execute();n=!1};rg=(o,s=0)=>{let a=new b9(o,s);return i.push(a),t||(t=!0,wLe(r)),a},aue=(o,s)=>{if(n){let a=new b9(o,s);return e.push(a),a}else return rg(o,s)}})();const SLe=8,ELe=function(i,e){return e};class LLe extends Oe{constructor(e,t,n,r=ELe,o=SLe){super();let s=null,a=0,u=this._register(new Ma),d=()=>{a=new Date().getTime(),n(s),s=null};this._register(qe(e,t,h=>{s=r(s,h);let f=new Date().getTime()-a;f>=o?(u.cancel(),d()):u.setIfNotSet(d,o-f)}))}}function hG(i,e,t,n,r){return new LLe(i,e,t,n,r)}function fG(i){return document.defaultView.getComputedStyle(i,null)}function dB(i){if(i!==document.body)return new dr(i.clientWidth,i.clientHeight);if(ng&&window.visualViewport)return new dr(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new dr(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new dr(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new dr(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class zr{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let r=fG(e),o="0";return r&&(r.getPropertyValue?o=r.getPropertyValue(t):o=r.getAttribute(n)),zr.convertToPixels(e,o)}static getBorderLeftWidth(e){return zr.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return zr.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return zr.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return zr.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return zr.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return zr.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return zr.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return zr.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return zr.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return zr.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return zr.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return zr.getDimension(e,"margin-bottom","marginBottom")}}class dr{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new dr(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof dr?e:new dr(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function lue(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const r=cue(i)?null:fG(i);r&&(n-=r.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=zr.getBorderLeftWidth(i),t+=zr.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function xLe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Us(i){let e=i.getBoundingClientRect();return{left:e.left+pp.scrollX,top:e.top+pp.scrollY,width:e.width,height:e.height}}const pp=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Nc(i){let e=zr.getMarginLeft(i)+zr.getMarginRight(i);return i.offsetWidth+e}function C9(i){let e=zr.getBorderLeftWidth(i)+zr.getBorderRightWidth(i),t=zr.getPaddingLeft(i)+zr.getPaddingRight(i);return i.offsetWidth-e-t}function DLe(i){let e=zr.getBorderTopWidth(i)+zr.getBorderBottomWidth(i),t=zr.getPaddingTop(i)+zr.getPaddingBottom(i);return i.offsetHeight-e-t}function _H(i){let e=zr.getMarginTop(i)+zr.getMarginBottom(i);return i.offsetHeight+e}function mp(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function uue(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function nJ(i,e,t){return!!uue(i,e,t)}function cue(i){return i&&!!i.host&&!!i.mode}function hB(i){return!!_0(i)}function _0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return cue(i)?i:null}function aw(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function uc(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let y9=null;function due(){return y9||(y9=uc()),y9}function TLe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function vH(i,e,t=due()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function iJ(i,e=due()){if(!e)return;let t=TLe(e),n=[];for(let r=0;r<t.length;r++)t[r].selectorText.indexOf(i)!==-1&&n.push(r);for(let r=n.length-1;r>=0;r--)e.sheet.deleteRule(n[r])}function hue(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ht={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:n0?"webkitAnimationStart":"animationstart",ANIMATION_END:n0?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:n0?"webkitAnimationIteration":"animationiteration"},Ni={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function ILe(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function kLe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class EF extends Oe{constructor(e){super(),this._onDidFocus=this._register(new Ce),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Ce),this.onDidBlur=this._onDidBlur.event;let t=EF.hasFocusWithin(e),n=!1;const r=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{EF.hasFocusWithin(e)!==t&&(t?o():r())},this._register(qe(e,Ht.FOCUS,r,!0)),this._register(qe(e,Ht.BLUR,o,!0)),this._register(qe(e,Ht.FOCUS_IN,()=>this._refreshStateHandler())),this._register(qe(e,Ht.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=_0(e),n=t?t.activeElement:document.activeElement;return mp(n,e)}}function $w(i){return new EF(i)}function Be(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function NLe(i,e){return i.insertBefore(e,i.firstChild),e}function v0(i,...e){i.innerText="",Be(i,...e)}const ALe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var yA;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(yA||(yA={}));function fue(i,e,t,...n){let r=ALe.exec(e);if(!r)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let o=r[1]||"div",s;return i!==yA.HTML?s=document.createElementNS(i,o):s=document.createElement(o),r[3]&&(s.id=r[3]),r[4]&&(s.className=r[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const u=t[a];typeof u>"u"||(/^on\w+$/.test(a)?s[a]=u:a==="selected"?u&&s.setAttribute(a,"true"):s.setAttribute(a,u))}),s.append(...n),s}function Ge(i,e,...t){return fue(yA.HTML,i,e,...t)}Ge.SVG=function(i,e,...t){return fue(yA.SVG,i,e,...t)};function Lu(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function ja(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function OLe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function rJ(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function gue(i){window.open(i,"_blank","noopener")}function RLe(i){const e=()=>{i(),t=rg(e)};let t=rg(e);return Un(()=>t.dispose())}nue.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function S1(i){return i?`url('${iue.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function oJ(i){return`'${i.replace(/'/g,"%27")}'`}class Pb extends Ce{constructor(){super(),this._subscriptions=new Je,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(qe(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Sr(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(qe(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(qe(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(qe(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(qe(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(qe(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Pb.instance||(Pb.instance=new Pb),Pb.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function MLe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}const sJ=2e4;let vb,qP,bH,YP,CH;function PLe(i){vb=document.createElement("div"),vb.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),vb.appendChild(n),n};qP=e(),bH=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),vb.appendChild(n),n};YP=t(),CH=t(),i.appendChild(vb)}function Is(i){vb&&(qP.textContent!==i?($o(bH),xF(qP,i)):($o(qP),xF(bH,i)))}function LF(i){vb&&(Gn?Is(i):YP.textContent!==i?($o(CH),xF(YP,i)):($o(YP),xF(CH,i)))}function xF(i,e){$o(i),e.length>sJ&&(e=e.substr(0,sJ)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var Mh;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Mh||(Mh={}));const Nn=gi("instantiationService");function FLe(i,e,t,n){e[Mh.DI_TARGET]===e?e[Mh.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[Mh.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[Mh.DI_TARGET]=e)}function gi(i){if(Mh.serviceIds.has(i))return Mh.serviceIds.get(i);const e=function(t,n,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");FLe(e,t,r,!1)};return e.toString=()=>i,Mh.serviceIds.set(i,e),e}const Ii=gi("codeEditorService"),gG=gi("markerDecorationsService");function BLe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,r){const o=r[0];return typeof e[o]<"u"?e[o]:n}),t}function C(i,e,...t){return BLe(e,t)}let Ee=class db{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new db(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return db.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return db.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return db.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,r=t.lineNumber|0;if(n===r){let o=e.column|0,s=t.column|0;return o-s}return n-r}clone(){return new db(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new db(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};const To=gi("modelService");function WLe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const Ja=gi("textModelService");var DF=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ic extends Oe{constructor(e,t="",n="",r=!0,o){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return DF(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class zw extends Oe{constructor(){super(...arguments),this._onBeforeRun=this._register(new Ce),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Ce),this.onDidRun=this._onDidRun.event}run(e,t){return DF(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(r){n=r}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return DF(this,void 0,void 0,function*(){yield e.run(t)})}}class Zc extends ic{constructor(e){super(Zc.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Zc.ID="vs.actions.separator";class fB{constructor(e,t,n,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=n}get actions(){return this._actions}dispose(){}run(){return DF(this,void 0,void 0,function*(){})}}class gB extends ic{constructor(){super(gB.ID,C("submenu.empty","(empty)"),void 0,!1)}}gB.ID="vs.actions.empty";let VLe=class{constructor(){this._icons=new Map,this._onDidRegister=new Ce}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const pue=new VLe,TF=pue;function HLe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class _e{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,pue.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}_e.add=new _e("add",{fontCharacter:"\\ea60"});_e.lightBulb=new _e("light-bulb",{fontCharacter:"\\ea61"});_e.warning=new _e("warning",{fontCharacter:"\\ea6c"});_e.info=new _e("info",{fontCharacter:"\\ea74"});_e.close=new _e("close",{fontCharacter:"\\ea76"});_e.symbolFolder=new _e("symbol-folder",{fontCharacter:"\\ea83"});_e.symbolEvent=new _e("symbol-event",{fontCharacter:"\\ea86"});_e.error=new _e("error",{fontCharacter:"\\ea87"});_e.symbolVariable=new _e("symbol-variable",{fontCharacter:"\\ea88"});_e.symbolArray=new _e("symbol-array",{fontCharacter:"\\ea8a"});_e.symbolModule=new _e("symbol-module",{fontCharacter:"\\ea8b"});_e.symbolPackage=new _e("symbol-package",{fontCharacter:"\\ea8b"});_e.symbolNamespace=new _e("symbol-namespace",{fontCharacter:"\\ea8b"});_e.symbolObject=new _e("symbol-object",{fontCharacter:"\\ea8b"});_e.symbolMethod=new _e("symbol-method",{fontCharacter:"\\ea8c"});_e.symbolFunction=new _e("symbol-function",{fontCharacter:"\\ea8c"});_e.symbolConstructor=new _e("symbol-constructor",{fontCharacter:"\\ea8c"});_e.symbolBoolean=new _e("symbol-boolean",{fontCharacter:"\\ea8f"});_e.symbolNull=new _e("symbol-null",{fontCharacter:"\\ea8f"});_e.symbolNumber=new _e("symbol-number",{fontCharacter:"\\ea90"});_e.symbolStruct=new _e("symbol-struct",{fontCharacter:"\\ea91"});_e.symbolTypeParameter=new _e("symbol-type-parameter",{fontCharacter:"\\ea92"});_e.symbolKey=new _e("symbol-key",{fontCharacter:"\\ea93"});_e.symbolText=new _e("symbol-text",{fontCharacter:"\\ea93"});_e.symbolReference=new _e("symbol-reference",{fontCharacter:"\\ea94"});_e.symbolEnum=new _e("symbol-enum",{fontCharacter:"\\ea95"});_e.symbolValue=new _e("symbol-value",{fontCharacter:"\\ea95"});_e.symbolUnit=new _e("symbol-unit",{fontCharacter:"\\ea96"});_e.arrowDown=new _e("arrow-down",{fontCharacter:"\\ea9a"});_e.arrowLeft=new _e("arrow-left",{fontCharacter:"\\ea9b"});_e.arrowUp=new _e("arrow-up",{fontCharacter:"\\eaa1"});_e.caseSensitive=new _e("case-sensitive",{fontCharacter:"\\eab1"});_e.check=new _e("check",{fontCharacter:"\\eab2"});_e.chevronDown=new _e("chevron-down",{fontCharacter:"\\eab4"});_e.chevronRight=new _e("chevron-right",{fontCharacter:"\\eab6"});_e.chevronUp=new _e("chevron-up",{fontCharacter:"\\eab7"});_e.lightbulbAutofix=new _e("lightbulb-autofix",{fontCharacter:"\\eb13"});_e.loading=new _e("loading",{fontCharacter:"\\eb19"});_e.preserveCase=new _e("preserve-case",{fontCharacter:"\\eb2e"});_e.regex=new _e("regex",{fontCharacter:"\\eb38"});_e.remove=new _e("remove",{fontCharacter:"\\eb3b"});_e.replaceAll=new _e("replace-all",{fontCharacter:"\\eb3c"});_e.replace=new _e("replace",{fontCharacter:"\\eb3d"});_e.splitHorizontal=new _e("split-horizontal",{fontCharacter:"\\eb56"});_e.splitVertical=new _e("split-vertical",{fontCharacter:"\\eb57"});_e.symbolClass=new _e("symbol-class",{fontCharacter:"\\eb5b"});_e.symbolColor=new _e("symbol-color",{fontCharacter:"\\eb5c"});_e.symbolConstant=new _e("symbol-constant",{fontCharacter:"\\eb5d"});_e.symbolEnumMember=new _e("symbol-enum-member",{fontCharacter:"\\eb5e"});_e.symbolField=new _e("symbol-field",{fontCharacter:"\\eb5f"});_e.symbolFile=new _e("symbol-file",{fontCharacter:"\\eb60"});_e.symbolInterface=new _e("symbol-interface",{fontCharacter:"\\eb61"});_e.symbolKeyword=new _e("symbol-keyword",{fontCharacter:"\\eb62"});_e.symbolOperator=new _e("symbol-operator",{fontCharacter:"\\eb64"});_e.symbolProperty=new _e("symbol-property",{fontCharacter:"\\eb65"});_e.symbolSnippet=new _e("symbol-snippet",{fontCharacter:"\\eb66"});_e.triangleDown=new _e("triangle-down",{fontCharacter:"\\eb6e"});_e.triangleLeft=new _e("triangle-left",{fontCharacter:"\\eb6f"});_e.triangleRight=new _e("triangle-right",{fontCharacter:"\\eb70"});_e.triangleUp=new _e("triangle-up",{fontCharacter:"\\eb71"});_e.wholeWord=new _e("whole-word",{fontCharacter:"\\eb7e"});_e.listFilter=new _e("list-filter",{fontCharacter:"\\eb83"});_e.listSelection=new _e("list-selection",{fontCharacter:"\\eb85"});_e.selection=new _e("selection",{fontCharacter:"\\eb85"});_e.symbolString=new _e("symbol-string",{fontCharacter:"\\eb8d"});_e.treeItemExpanded=new _e("tree-item-expanded",_e.chevronDown.definition);_e.treeFilterOnTypeOn=new _e("tree-filter-on-type-on",_e.listFilter.definition);_e.treeFilterOnTypeOff=new _e("tree-filter-on-type-off",_e.listSelection.definition);_e.treeFilterClear=new _e("tree-filter-clear",_e.close.definition);_e.treeItemLoading=new _e("tree-item-loading",_e.loading.definition);_e.menuSelection=new _e("menu-selection",_e.check.definition);_e.menuSubmenu=new _e("menu-submenu",_e.chevronRight.definition);_e.scrollbarButtonLeft=new _e("scrollbar-button-left",_e.triangleLeft.definition);_e.scrollbarButtonRight=new _e("scrollbar-button-right",_e.triangleRight.definition);_e.scrollbarButtonUp=new _e("scrollbar-button-up",_e.triangleUp.definition);_e.scrollbarButtonDown=new _e("scrollbar-button-down",_e.triangleDown.definition);_e.quickInputBack=new _e("quick-input-back",_e.arrowLeft.definition);var Ga;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(o){if(o instanceof _e)return["codicon","codicon-"+o.id];const s=e.exec(o.id);if(!s)return t(_e.error);let[,a,u]=s;const d=["codicon","codicon-"+a];return u&&d.push("codicon-modifier-"+u.substr(1)),d}i.asClassNameArray=t;function n(o){return t(o).join(" ")}i.asClassName=n;function r(o){return"."+t(o).join(".")}i.asCSSSelector=r})(Ga||(Ga={}));function mue(i){return Array.isArray(i)}function cc(i){return typeof i=="string"}function Ya(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function E1(i){return typeof i=="number"&&!isNaN(i)}function _ue(i){return i===!0||i===!1}function ml(i){return typeof i>"u"}function $Le(i){return!xu(i)}function xu(i){return ml(i)||i===null}function Yi(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function SM(i){if(xu(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function IF(i){return typeof i=="function"}function zLe(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)ULe(i[n],e[n])}function ULe(i,e){if(cc(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(IF(e)){try{if(i instanceof e)return}catch{}if(!xu(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function jLe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function pG(i){const e=[];for(const t of jLe(i))typeof i[t]=="function"&&e.push(t);return e}function KLe(i,e){const t=r=>function(){const o=Array.prototype.slice.call(arguments,0);return e(r,o)};let n={};for(const r of i)n[r]=t(r);return n}function _l(i){return i===null?void 0:i}function vue(i,e="Unreachable"){throw new Error(e)}const Ir=gi("commandService"),Xn=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Ce,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const s=[];for(let u of i.description.args)s.push(u.constraint);const a=i.handler;i.handler=function(u,...d){return zLe(d,s),a(u,...d)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new ku,this._commands.set(t,n));let r=n.unshift(i),o=Un(()=>{r();const s=this._commands.get(t);s!=null&&s.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(i,e){return Xn.registerCommand(i,(t,...n)=>t.get(Ir).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Qn.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Xn.registerCommand("noop",()=>{});function bue(i){return!i||typeof i!="string"?!0:i.trim().length===0}const GLe=/{(\d+)}/g;function ec(i,...e){return e.length===0?i:i.replace(GLe,function(t,n){const r=parseInt(n,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function mG(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function dc(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function qLe(i,e=" "){const t=_G(i,e);return Cue(t,e)}function _G(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function Cue(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let r=n,o=-1;for(;o=i.lastIndexOf(e,r-1),!(o===-1||o+t!==r);){if(o===0)return"";r=o}return i.substring(0,r)}function YLe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function ZLe(i){return i.replace(/\*/g,"")}function yue(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=dc(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function XLe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function w9(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function og(i){return i.split(/\r\n|\r|\n/)}function Na(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function zi(i,e=0,t=i.length){for(let n=e;n<t;n++){const r=i.charCodeAt(n);if(r!==32&&r!==9)return i.substring(e,n)}return i.substring(e,t)}function Qf(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function wA(i,e){return i<e?-1:i>e?1:0}function vG(i,e,t=0,n=i.length,r=0,o=e.length){for(;t<n&&r<o;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u<d)return-1;if(u>d)return 1}const s=n-t,a=o-r;return s<a?-1:s>a?1:0}function yH(i,e){return aR(i,e,0,i.length,0,e.length)}function aR(i,e,t=0,n=i.length,r=0,o=e.length){for(;t<n&&r<o;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u===d)continue;if(u>=128||d>=128)return vG(i.toLowerCase(),e.toLowerCase(),t,n,r,o);Wv(u)&&(u-=32),Wv(d)&&(d-=32);const h=u-d;if(h!==0)return h}const s=n-t,a=o-r;return s<a?-1:s>a?1:0}function Wv(i){return i>=97&&i<=122}function Tf(i){return i>=65&&i<=90}function JN(i,e){return i.length===e.length&&aR(i,e)===0}function bG(i,e){const t=e.length;return e.length>i.length?!1:aR(i,e,0,t)===0}function Uw(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function kF(i,e){let t,n=Math.min(i.length,e.length);const r=i.length-1,o=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(r-t)!==e.charCodeAt(o-t))return t;return n}function Vo(i){return 55296<=i&&i<=56319}function jw(i){return 56320<=i&&i<=57343}function CG(i,e){return(i-55296<<10)+(e-56320)+65536}function Fb(i,e,t){const n=i.charCodeAt(t);if(Vo(n)&&t+1<e){const r=i.charCodeAt(t+1);if(jw(r))return CG(n,r)}return n}function lw(i,e){const t=i.charCodeAt(e-1);if(jw(t)&&e>1){const n=i.charCodeAt(e-2);if(Vo(n))return CG(n,t)}return t}function NF(i,e){const t=up.getInstance(),n=e,r=i.length,o=Fb(i,r,e);e+=o>=65536?2:1;let s=t.getGraphemeBreakType(o);for(;e<r;){const a=Fb(i,r,e),u=t.getGraphemeBreakType(a);if(OF(s,u))break;e+=a>=65536?2:1,s=u}return e-n}function QLe(i,e){const t=up.getInstance(),n=e,r=lw(i,e);e-=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e>0;){const s=lw(i,e),a=t.getGraphemeBreakType(s);if(OF(a,o))break;e-=s>=65536?2:1,o=a}return n-e}const JLe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function pB(i){return JLe.test(i)}const exe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFF0]|\uD83E[\uDD00-\uDDFF\uDE70-\uDEF6])/;function txe(i){return exe.test(i)}const nxe=/^[\t\n\r\x20-\x7E]*$/;function yG(i){return nxe.test(i)}const wue=/[\u2028\u2029]/;function Sue(i){return wue.test(i)}function ixe(i){for(let e=0,t=i.length;e<t;e++)if(sg(i.charCodeAt(e)))return!0;return!1}function sg(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function AF(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const rxe=String.fromCharCode(65279);function wG(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function oxe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function Eue(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function EM(i){return up.getInstance().getGraphemeBreakType(i)}function OF(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class up{constructor(){this._data=sxe()}static getInstance(){return up._INSTANCE||(up._INSTANCE=new up),up._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}}up._INSTANCE=null;function sxe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function axe(i,e){if(i===0)return 0;const t=lxe(i,e);if(t!==void 0)return t;const n=lw(e,i);return i-=ZP(n),i}function lxe(i,e){let t=lw(e,i);for(i-=ZP(t);uxe(t)||t===65039||t===8419;){if(i===0)return;t=lw(e,i),i-=ZP(t)}if(AF(t)){if(i>=0){const n=lw(e,i);n===8205&&(i-=ZP(n))}return i}}function ZP(i){return i>=65536?2:1}function uxe(i){return 127995<=i&&i<=127999}const cxe=" ";class Lh{static getData(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,40,10088,40,10098,40,12308,40,64830,40,65341,41,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,124,8739,124,9213,124,65512,124,1633,124,1777,124,66336,124,125127,124,120783,124,120793,124,120803,124,120813,124,120823,124,130033,124,65321,124,8544,124,8464,124,8465,124,119816,124,119868,124,119920,124,120024,124,120128,124,120180,124,120232,124,120284,124,120336,124,120388,124,120440,124,406,124,65356,124,8572,124,8467,124,119845,124,119897,124,119949,124,120001,124,120053,124,120105,124,120157,124,120209,124,120261,124,120313,124,120365,124,120417,124,120469,124,448,124,120496,124,120554,124,120612,124,120670,124,120728,124,11410,124,1030,124,1216,124,1493,124,1503,124,1575,124,126464,124,126592,124,65166,124,65165,124,1994,124,11599,124,5825,124,42226,124,93992,124,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90],"_default":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"cs":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"de":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"es":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"fr":[65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"it":[160,32,8211,45,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ko":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pl":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pt-BR":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"qps-ploc":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ru":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,124,1009,112,215,120],"tr":[160,32,8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hans":[65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hant":[8211,45,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')}static getConfusablesForCurrentLocale(){if(!Lh.map){let n=function(s){const a=new Map;for(let u=0;u<s.length;u+=2)a.set(s[u],s[u+1]);return a};const e=Lh.getData();let t=PEe;(!t||!(t in e))&&(t=MEe),(!t||!(t in e))&&(t="_default");const r=n(e._common),o=n(e[t]);for(const[s,a]of o)r.set(s,a);Lh.map=r}return Lh.map}static isAmbiguous(e){return Lh.getConfusablesForCurrentLocale().has(e)}static getPrimaryConfusable(e){return Lh.getConfusablesForCurrentLocale().get(e)}static getPrimaryConfusableCodePoints(){return new Set(Lh.getConfusablesForCurrentLocale().keys())}}class _p{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(_p.getRawData())),this._data}static isInvisibleCharacter(e){return _p.getData().has(e)}static get codePoints(){return _p.getData()}}_p._data=void 0;let mB=REe||"";const Gs=new Map;Gs.set("false",!1);Gs.set("true",!0);Gs.set("isMac",Gn);Gs.set("isLinux",Qa);Gs.set("isWindows",As);Gs.set("isWeb",PS);Gs.set("isMacNative",Gn&&!PS);Gs.set("isEdge",mB.indexOf("Edg/")>=0);Gs.set("isFirefox",mB.indexOf("Firefox")>=0);Gs.set("isChrome",mB.indexOf("Chrome")>=0);Gs.set("isSafari",mB.indexOf("Safari")>=0);const dxe=Object.prototype.hasOwnProperty;class _t{static has(e){return b0.create(e)}static equals(e,t){return Kw.create(e,t)}static regex(e,t){return RF.create(e,t)}static not(e){return L1.create(e)}static and(...e){return Vv.create(e,null)}static or(...e){return cp.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return cp.create(n.map(r=>this._deserializeAndExpression(r,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return Vv.create(n.map(r=>this._deserializeOne(r,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return _B.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return Kw.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return RF.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return SG.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return CB.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return bB.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return wB.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return yB.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?L1.create(e.substr(1).trim()):b0.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(bue(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),r=e.lastIndexOf("/");if(n===r||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let o=e.slice(n+1,r),s=e[r+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function hxe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function uw(i,e){return i.cmp(e)}class Pu{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return hc.INSTANCE}}Pu.INSTANCE=new Pu;class hc{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Pu.INSTANCE}}hc.INSTANCE=new hc;class b0{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Gs.get(e);return typeof n=="boolean"?n?hc.INSTANCE:Pu.INSTANCE:new b0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:xue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gs.get(this.key);return typeof e=="boolean"?e?hc.INSTANCE:Pu.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=L1.create(this.key,this)),this.negated}}class Kw{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?b0.create(e,n):L1.create(e,n);const r=Gs.get(e);return typeof r=="boolean"?t===(r?"true":"false")?hc.INSTANCE:Pu.INSTANCE:new Kw(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?hc.INSTANCE:Pu.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_B.create(this.key,this.value,this)),this.negated}}class SG{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new SG(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?dxe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=EG.create(this)),this.negated}}class EG{constructor(e){this._actual=e,this.type=11}static create(e){return new EG(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class _B{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?L1.create(e,n):b0.create(e,n);const r=Gs.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Pu.INSTANCE:hc.INSTANCE:new _B(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gs.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Pu.INSTANCE:hc.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Kw.create(this.key,this.value,this)),this.negated}}class L1{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Gs.get(e);return typeof n=="boolean"?n?Pu.INSTANCE:hc.INSTANCE:new L1(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:xue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gs.get(this.key);return typeof e=="boolean"?e?Pu.INSTANCE:hc.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b0.create(this.key,this)),this.negated}}function vB(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Pu.INSTANCE}class bB{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return vB(t,r=>new bB(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=wB.create(this.key,this.value,this)),this.negated}}class CB{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return vB(t,r=>new CB(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=yB.create(this.key,this.value,this)),this.negated}}class yB{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return vB(t,r=>new yB(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=CB.create(this.key,this.value,this)),this.negated}}class wB{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return vB(t,r=>new wB(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:CC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=bB.create(this.key,this.value,this)),this.negated}}class RF{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new RF(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=LG.create(this)),this.negated}}class LG{constructor(e){this._actual=e,this.type=8}static create(e){return new LG(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function Lue(i){let e=null;for(let t=0,n=i.length;t<n;t++){const r=i[t].substituteConstants();if(i[t]!==r&&e===null){e=[];for(let o=0;o<t;o++)e[o]=i[o]}e!==null&&(e[t]=r)}return e===null?i:e}class Vv{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Vv._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=uw(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Lue(this.expr);return e===this.expr?this:Vv.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Pu.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&r)return hc.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(uw);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const s=n.pop(),a=n.length===0,u=cp.create(o.expr.map(d=>Vv.create([d,s],null)),null,a);u&&(n.push(u),n.sort(uw))}return n.length===1?n[0]:new Vv(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=cp.create(e,this,!0)}return this.negated}}class cp{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return cp._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=uw(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Lue(this.expr);return e===this.expr?this:cp.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let r=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){const u=e[s];if(u){if(u.type===0){o=!0;continue}if(u.type===1)return hc.INSTANCE;if(u.type===9){r=r.concat(u.expr);continue}r.push(u)}}if(r.length===0&&o)return Pu.INSTANCE;r.sort(uw)}if(r.length!==0){if(r.length===1)return r[0];for(let s=1;s<r.length;s++)r[s-1].equals(r[s])&&(r.splice(s,1),s--);if(r.length===1)return r[0];if(n){for(let s=0;s<r.length;s++)for(let a=s+1;a<r.length;a++)Due(r[s],r[a])&&(r.splice(a,1),a--);if(r.length===1)return r[0]}return new cp(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),r=[];for(const s of MF(t))for(const a of MF(n))r.push(Vv.create([s,a],null));const o=e.length===0;e.unshift(cp.create(r,null,o))}this.negated=e[0]}return this.negated}}class Dt extends b0{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Dt._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&Dt._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Dt._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Kw.create(this.key,e)}}Dt._info=[];const cn=gi("contextKeyService"),fxe="setContext";function xue(i,e){return i<e?-1:i>e?1:0}function CC(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function Due(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const r of e.expr)if(i.equals(r))return!0}const t=i.negate(),n=MF(t).concat(MF(e));n.sort(uw);for(let r=0;r<n.length;r++){const s=n[r].negate();for(let a=r+1;a<n.length;a++){const u=n[a];if(s.equals(u))return!0}}return!1}function MF(i){return i.type===9?i.expr:[i]}function XP(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class gxe{constructor(){this.data=new Map}add(e,t){XP(cc(e)),XP(Ya(t)),XP(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Xr=new gxe;var Xc;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Xc||(Xc={}));const xr=gi("themeService");var wH;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(wH||(wH={}));function Lr(i){return{id:i}}var mr;(function(i){function e(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||wH.isThemeColor(u.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Ga.iconNameExpression}(?:${Ga.iconModifierExpression})?)\\)$`);function n(u){const d=t.exec(u);if(!d)return;let[,h]=d;return{id:h}}i.fromString=n;function r(u,d){let h=u.id;const f=h.lastIndexOf("~");return f!==-1&&(h=h.substring(0,f)),d&&(h=`${h}~${d}`),{id:h}}i.modify=r;function o(u){const d=u.id.lastIndexOf("~");if(d!==-1)return u.id.substring(d+1)}i.getModifier=o;function s(u,d){var h,f;return u.id===d.id&&((h=u.color)===null||h===void 0?void 0:h.id)===((f=d.color)===null||f===void 0?void 0:f.id)}i.isEqual=s;function a(u,d){return{id:u.id,color:d?Lr(d):void 0}}i.asThemeIcon=a,i.asClassNameArray=Ga.asClassNameArray,i.asClassName=Ga.asClassName,i.asCSSSelector=Ga.asCSSSelector})(mr||(mr={}));function PF(i){switch(i){case Xc.DARK:return"vs-dark";case Xc.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const Tue={ThemingContribution:"base.contributions.theming"};class pxe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Ce}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Un(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let Iue=new pxe;Xr.add(Tue.ThemingContribution,Iue);function fr(i){return Iue.onColorThemeChange(i)}class mxe extends Oe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var _xe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},aJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function e2(i){return i.command!==void 0}class Rt{constructor(e){this.id=Rt._idPool++,this._debugName=e}}Rt._idPool=0;Rt.CommandPalette=new Rt("CommandPalette");Rt.EditorContext=new Rt("EditorContext");Rt.SimpleEditorContext=new Rt("SimpleEditorContext");Rt.EditorContextCopy=new Rt("EditorContextCopy");Rt.EditorContextPeek=new Rt("EditorContextPeek");Rt.MenubarEditMenu=new Rt("MenubarEditMenu");Rt.MenubarCopy=new Rt("MenubarCopy");Rt.MenubarGoMenu=new Rt("MenubarGoMenu");Rt.MenubarSelectionMenu=new Rt("MenubarSelectionMenu");Rt.InlineCompletionsActions=new Rt("InlineCompletionsActions");const yC=gi("menuService"),ra=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Ce,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Rt.CommandPalette}}addCommand(i){return this.addCommands(Qn.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Un(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(Qn.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new ku;for(const{id:n,item:r}of i){let o=this._menuItems.get(n);o||(o=new ku,this._menuItems.set(n,o)),t.push(o.push(r)),e.add(n)}return this._onDidChangeMenu.fire(e),Un(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Rt.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)e2(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class xG extends fB{constructor(e,t,n,r){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=r}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,r]of n)r.length>0&&(e.push(...r),e.push(new Zc));return e.length&&e.pop(),e}}let C0=class kue{constructor(e,t,n,r,o){var s,a;if(this._commandService=o,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(s=e.tooltip)===null||s===void 0?void 0:s.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}this.item=e,this.alt=t?new kue(t,void 0,n,r,o):void 0,this._options=n,mr.isThemeIcon(e.icon)&&(this.class=Ga.asClassName(e.icon))}dispose(){}run(...e){var t,n;let r=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(r=[...r,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(r=[...r,...e]),this._commandService.executeCommand(this.id,...r)}};C0=_xe([aJ(3,cn),aJ(4,Ir)],C0);class FF{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(qu===1){if(e&&e.win)return e.win}else if(qu===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=FF.bindToCurrentPlatform(e);if(t&&t.primary){const n=cH(t.primary,qu);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,r=t.secondary.length;n<r;n++){const o=t.secondary[n],s=cH(o,qu);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Xn.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&FF._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,r,o,s){qu===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:s,weight1:r,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(bxe)),this._cachedMergedKeybindings.slice(0)}}const Os=new FF,vxe={EditorModes:"platform.keybindingsRegistry"};Xr.add(vxe.EditorModes,Os);function bxe(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}const yg=gi("telemetryService"),wg=gi("logService");var Ph;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Ph||(Ph={}));const Nue=Ph.Info;class Cxe extends Oe{constructor(){super(...arguments),this.level=Nue,this._onDidChangeLogLevel=this._register(new Ce)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class yxe extends Cxe{constructor(e=Nue){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Ph.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Ph.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Ph.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Ph.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class wxe extends Oe{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}class SB{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=_t.and(n,this.precondition):n=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Os.registerKeybindingRule(r)}}Xn.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){ra.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class FS extends SB{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(wg);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){const o=r.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Aue extends SB{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Ps extends SB{static bindToContribution(e){return class extends Ps{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,r,o){e(r)&&this._callback(e(r),o)}}}runCommand(e,t){const n=e.get(Ii),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(o=>{if(o.get(cn).contextMatchesRules(_l(this.precondition)))return this.runEditorCommand(o,r,t)})}}let Lt=class Oue extends Ps{constructor(e){super(Oue.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(r){return r.menuId||(r.menuId=Rt.EditorContext),r.title||(r.title=e.label),r.when=_t.and(e.precondition,r.when),r}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(yg).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};class Rue extends Lt{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,r)=>r[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const r of this._implementations){const o=r[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}function Sg(i,e){Xn.registerCommand(i,function(t,...n){const[r,o]=n;Yi(rn.isUri(r)),Yi(Ee.isIPosition(o));const s=t.get(To).getModel(r);if(s){const a=Ee.lift(o);return e(s,a,...n.slice(2))}return t.get(Ja).createModelReference(r).then(a=>new Promise((u,d)=>{try{const h=e(a.object.textEditorModel,Ee.lift(o),n.slice(2));u(h)}catch(h){d(h)}}).finally(()=>{a.dispose()}))})}function Sxe(i,e){Xn.registerCommand(i,function(t,...n){const[r]=n;Yi(rn.isUri(r));const o=t.get(To).getModel(r);return o?e(o,...n.slice(1)):t.get(Ja).createModelReference(r).then(s=>new Promise((a,u)=>{try{const d=e(s.object.textEditorModel,n.slice(1));a(d)}catch(d){u(d)}}).finally(()=>{s.dispose()}))})}function nt(i){return Yu.INSTANCE.registerEditorCommand(i),i}function it(i){const e=new i;return Yu.INSTANCE.registerEditorAction(e),e}function Mue(i){return Yu.INSTANCE.registerEditorAction(i),i}function Pue(i){Yu.INSTANCE.registerEditorAction(i)}function ki(i,e){Yu.INSTANCE.registerEditorContribution(i,e)}var cw;(function(i){function e(s){return Yu.INSTANCE.getEditorCommand(s)}i.getEditorCommand=e;function t(){return Yu.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Yu.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function r(s){return Yu.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}i.getSomeEditorContributions=r;function o(){return Yu.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=o})(cw||(cw={}));const Exe={EditorCommonContributions:"editor.contributions"};class Yu{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Yu.INSTANCE=new Yu;Xr.add(Exe.EditorCommonContributions,Yu.INSTANCE);function lR(i){return i.register(),i}const Fue=lR(new FS({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Rt.MenubarEditMenu,group:"1_do",title:C({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Rt.CommandPalette,group:"",title:C("undo","Undo"),order:1}]}));lR(new Aue(Fue,{id:"default:undo",precondition:void 0}));const Bue=lR(new FS({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Rt.MenubarEditMenu,group:"1_do",title:C({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Rt.CommandPalette,group:"",title:C("redo","Redo"),order:1}]}));lR(new Aue(Bue,{id:"default:redo",precondition:void 0}));const Lxe=lR(new FS({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Rt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Rt.CommandPalette,group:"",title:C("selectAll","Select All"),order:1}]}));var xxe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Dxe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SA=class{constructor(e,t){}dispose(){}};SA.ID="editor.contrib.markerDecorations";SA=xxe([Dxe(1,gG)],SA);ki(SA.ID,SA);const Wue="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Txe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Wue)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Vue=Txe();function BF(i){let e=Vue;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const Ixe={maxLen:1e3,windowSize:15,timeBudget:150};function WF(i,e,t,n,r=Ixe){if(t.length>r.maxLen){let d=i-r.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,i+r.maxLen/2),WF(i,e,t,n,r)}const o=Date.now(),s=i-1-n;let a=-1,u=null;for(let d=1;!(Date.now()-o>=r.timeBudget);d++){const h=s-r.windowSize*d;e.lastIndex=Math.max(0,h);const f=kxe(e,t,s,a);if(!f&&u||(u=f,h<=0))break;a=h}if(u){let d={word:u[0],startColumn:n+1+u.index,endColumn:n+1+u.index+u[0].length};return e.lastIndex=0,d}return null}function kxe(i,e,t,n){let r;for(;r=i.exec(e);){const o=r.index||0;if(o<=t&&i.lastIndex>=t)return r;if(n>0&&o>n)return null}return null}function zu(i,e=0){return i[i.length-(1+e)]}function Nxe(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function rc(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,r=i.length;n<r;n++)if(!t(i[n],e[n]))return!1;return!0}function DG(i,e,t){let n=0,r=i.length-1;for(;n<=r;){const o=(n+r)/2|0,s=t(i[o],e);if(s<0)n=o+1;else if(s>0)r=o-1;else return o}return-(n+1)}function Hue(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const r=Math.floor((t+n)/2);e(i[r])?n=r:t=r+1}return t}function SH(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],r=[],o=[],s=[];for(let a of e){const u=t(a,n);u<0?r.push(a):u>0?o.push(a):s.push(a)}return i<r.length?SH(i,r,t):i<r.length+s.length?s[0]:SH(i-(r.length+s.length),o,t)}function lJ(i,e){const t=[];let n;for(const r of i.slice(0).sort(e))!n||e(n[0],r)!==0?(n=[r],t.push(n)):n.push(r);return t}function BS(i){return i.filter(e=>!!e)}function $ue(i){return!Array.isArray(i)||i.length===0}function bl(i){return Array.isArray(i)&&i.length>0}function x1(i,e=t=>t){const t=new Set;return i.filter(n=>{const r=e(n);return t.has(r)?!1:(t.add(r),!0)})}function Axe(i,e){const t=Oxe(i,e);if(t!==-1)return i[t]}function Oxe(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function EH(i,e){return i.length>0?i[0]:e}function zue(i){return[].concat(...i)}function Da(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let r=t;r<e;r++)n.push(r);else for(let r=t;r>e;r--)n.push(r);return n}function EA(i,e,t){const n=i.slice(0,e),r=i.slice(e);return n.concat(t,r)}function S9(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function LM(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function TG(i){return Array.isArray(i)?i:[i]}function Rxe(i,e,t){const n=Uue(i,e),r=i.length,o=t.length;i.length=r+o;for(let s=r-1;s>=n;s--)i[s+o]=i[s];for(let s=0;s<o;s++)i[s+n]=t[s]}function uJ(i,e,t,n){const r=Uue(i,e),o=i.splice(r,t);return Rxe(i,r,n),o}function Uue(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class dw{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function Xg(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Xg(i[t]):e[t]=i[t]}),e}function Mxe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(jue.call(t,n)){const r=t[n];typeof r=="object"&&!Object.isFrozen(r)&&e.push(r)}}return i}const jue=Object.prototype.hasOwnProperty;function Pxe(i,e){return LH(i,e,new Set)}function LH(i,e,t){if(xu(i))return i;const n=e(i);if(typeof n<"u")return n;if(mue(i)){const r=[];for(const o of i)r.push(LH(o,e,t));return r}if(Ya(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const r={};for(let o in i)jue.call(i,o)&&(r[o]=LH(i[o],e,t));return t.delete(i),r}return i}function Eg(i,e,t=!0){return Ya(i)?(Ya(e)&&Object.keys(e).forEach(n=>{n in i?t&&(Ya(i[n])&&Ya(e[n])?Eg(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function Qc(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Qc(i[t],e[t]))return!1}else{const r=[];for(n in i)r.push(n);r.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!Qc(r,o))return!1;for(t=0;t<r.length;t++)if(!Qc(i[r[t]],e[r[t]]))return!1}return!0}function ff(i,e,t){const n=e(i);return typeof n>"u"?t:n}const wv=8;class Kue{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Fxe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Gue{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class jo{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return EB(e,t)}compute(e,t,n){return n}}class L2{constructor(e,t){this.newValue=e,this.didChange=t}}function EB(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new L2(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&rc(i,e);return new L2(e,n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){const r=EB(i[n],e[n]);r.didChange&&(i[n]=r.newValue,t=!0)}return new L2(i,t)}class WS{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}applyUpdate(e,t){return EB(e,t)}validate(e){return this.defaultValue}}class wC{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return EB(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Zt(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Kn extends wC{constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=n),super(e,t,n,r)}validate(e){return Zt(e,this.defaultValue)}}function xH(i,e,t,n){if(typeof i>"u")return e;let r=parseInt(i,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(n,r),r|0)}class Cr extends wC{constructor(e,t,n,r,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=r,s.maximum=o),super(e,t,n,s),this.minimum=r,this.maximum=o}static clampedInt(e,t,n,r){return xH(e,t,n,r)}validate(e){return Cr.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Gf extends wC{constructor(e,t,n,r,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=r}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(Gf.float(e,this.defaultValue))}}class fl extends wC{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="string",r.default=n),super(e,t,n,r)}validate(e){return fl.string(e,this.defaultValue)}}function Ka(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class Eo extends wC{constructor(e,t,n,r,o=void 0){typeof o<"u"&&(o.type="string",o.enum=r,o.default=n),super(e,t,n,o),this._allowedValues=r}validate(e){return Ka(e,this.defaultValue,this._allowedValues)}}class SN extends jo{constructor(e,t,n,r,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=r),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Bxe(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Wxe extends jo{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[C("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),C("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),C("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:C("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Vxe extends jo{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:C("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:C("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Zt(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Zt(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Hxe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ls;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(ls||(ls={}));function $xe(i){switch(i){case"line":return ls.Line;case"block":return ls.Block;case"underline":return ls.Underline;case"line-thin":return ls.LineThin;case"block-outline":return ls.BlockOutline;case"underline-thin":return ls.UnderlineThin}}class zxe extends WS{constructor(){super(127,[65,33])}compute(e,t,n){const r=["monaco-editor"];return t.get(33)&&r.push(t.get(33)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(65)==="default"?r.push("mouse-default"):t.get(65)==="copy"&&r.push("mouse-copy"),t.get(99)&&r.push("showUnused"),t.get(125)&&r.push("showDeprecated"),r.join(" ")}}class Uxe extends Kn{constructor(){super(32,"emptySelectionClipboard",!0,{description:C("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class jxe extends jo{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:C("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[C("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),C("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),C("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:C("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[C("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),C("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),C("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:C("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:C("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Gn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:C("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:C("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Zt(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ka(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ka(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Zt(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Zt(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Zt(t.loop,this.defaultValue.loop)}}}class Du extends jo{constructor(){super(44,"fontLigatures",Du.OFF,{anyOf:[{type:"boolean",description:C("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:C("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:C("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Du.OFF:e==="true"?Du.ON:e:e?Du.ON:Du.OFF}}Du.OFF='"liga" off, "calt" off';Du.ON='"liga" on, "calt" on';class Kxe extends WS{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Gxe extends wC{constructor(){super(45,"fontSize",js.fontSize,{type:"number",minimum:6,maximum:100,default:js.fontSize,description:C("fontSize","Controls the font size in pixels.")})}validate(e){let t=Gf.float(e,this.defaultValue);return t===0?js.fontSize:Gf.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class Rf extends jo{constructor(){super(46,"fontWeight",js.fontWeight,{anyOf:[{type:"number",minimum:Rf.MINIMUM_VALUE,maximum:Rf.MAXIMUM_VALUE,errorMessage:C("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Rf.SUGGESTION_VALUES}],default:js.fontWeight,description:C("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Cr.clampedInt(e,js.fontWeight,Rf.MINIMUM_VALUE,Rf.MAXIMUM_VALUE))}}Rf.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Rf.MINIMUM_VALUE=1;Rf.MAXIMUM_VALUE=1e3;class qxe extends jo{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[C("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),C("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),C("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:C("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:C("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:C("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:C("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:C("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:C("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:C("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:C("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:C("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,r,o,s;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Ka(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Ka(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Ka(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(r=a.multipleDeclarations)!==null&&r!==void 0?r:Ka(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Ka(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(s=a.multipleReferences)!==null&&s!==void 0?s:Ka(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:fl.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:fl.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:fl.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:fl.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:fl.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class Yxe extends jo{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:C("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:C("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:C("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:C("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),delay:Cr.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Zt(t.sticky,this.defaultValue.sticky),above:Zt(t.above,this.defaultValue.above)}}}class hw extends WS{constructor(){super(130,[49,57,37,64,91,59,60,93,117,120,121,122,2])}compute(e,t,n){return hw.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,r=(e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,r=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,u=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let p=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const m=e.minimap.maxColumn,v=e.minimap.size,b=e.minimap.side,E=e.verticalScrollbarWidth,S=e.viewLineCount,w=e.remainingWidth,L=e.isViewportWrapping,A=f?2:3;let N=Math.floor(o*r);const H=N/o;let M=!1,R=!1,q=A*p,X=p/o,$=1;if(v==="fill"||v==="fit"){const{typicalViewportLineCount:G,extraLinesBeyondLastLine:z,desiredRatio:k,minimapLineCount:K}=hw.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:h,height:r,lineHeight:u,pixelRatio:o});if(S/K>1)M=!0,R=!0,p=1,q=1,X=p/o;else{let ne=!1,be=p+1;if(v==="fit"){const De=Math.ceil((S+z)*q);L&&a&&w<=t.stableFitRemainingWidth?(ne=!0,be=t.stableFitMaxMinimapScale):ne=De>N}if(v==="fill"||ne){M=!0;const De=p;q=Math.min(u*o,Math.max(1,Math.floor(1/k))),L&&a&&w<=t.stableFitRemainingWidth&&(be=t.stableFitMaxMinimapScale),p=Math.min(be,Math.max(1,Math.floor(q/A))),p>De&&($=Math.min(2,p/De)),X=p/o/$,N=Math.ceil(Math.max(G,S+z)*q),L?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=p):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const I=Math.floor(m*X),O=Math.min(I,Math.max(0,Math.floor((w-E-2)*X/(d+X)))+wv);let B=Math.floor(o*O);const W=B/o;B=Math.floor(B*$);const j=f?1:2,U=b==="left"?0:n-O-E;return{renderMinimap:j,minimapLeft:U,minimapWidth:O,minimapHeightIsEditorHeight:M,minimapIsSampling:R,minimapScale:p,minimapLineHeight:q,minimapCanvasInnerWidth:B,minimapCanvasInnerHeight:N,minimapCanvasOuterWidth:W,minimapCanvasOuterHeight:H}}static computeLayout(e,t){const n=t.outerWidth|0,r=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,u=t.maxDigitWidth,d=t.pixelRatio,h=t.viewLineCount,f=e.get(122),p=f==="inherit"?e.get(121):f,m=p==="inherit"?e.get(117):p,v=e.get(120),b=e.get(2),E=t.isDominatedByLongLines,S=e.get(49),w=e.get(59).renderType!==0,L=e.get(60),A=e.get(93),N=e.get(64),H=e.get(91),M=H.verticalScrollbarSize,R=H.verticalHasArrows,q=H.arrowSize,X=H.horizontalScrollbarSize,$=e.get(57),I=e.get(37);let O;if(typeof $=="string"&&/^\d+(\.\d+)?ch$/.test($)){const At=parseFloat($.substr(0,$.length-2));O=Cr.clampedInt(At*a,0,0,1e3)}else O=Cr.clampedInt($,0,0,1e3);I&&(O+=16);let B=0;if(w){const At=Math.max(s,L);B=Math.round(At*u)}let W=0;S&&(W=o);let j=0,U=j+W,G=U+B,z=G+O;const k=n-W-B-O;let K=!1,fe=!1,ne=-1;b!==2&&(p==="inherit"&&E?(K=!0,fe=!0):m==="on"||m==="bounded"?fe=!0:m==="wordWrapColumn"&&(ne=v));const be=hw._computeMinimapLayout({outerWidth:n,outerHeight:r,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:A,minimap:N,verticalScrollbarWidth:M,viewLineCount:h,remainingWidth:k,isViewportWrapping:fe},t.memory||new Gue);be.renderMinimap!==0&&be.minimapLeft===0&&(j+=be.minimapWidth,U+=be.minimapWidth,G+=be.minimapWidth,z+=be.minimapWidth);const De=k-be.minimapWidth,Ve=Math.max(1,Math.floor((De-M-2)/a)),rt=R?q:0;return fe&&(ne=Math.max(1,Ve),m==="bounded"&&(ne=Math.min(ne,v))),{width:n,height:r,glyphMarginLeft:j,glyphMarginWidth:W,lineNumbersLeft:U,lineNumbersWidth:B,decorationsLeft:G,decorationsWidth:O,contentLeft:z,contentWidth:De,minimap:be,viewportColumn:Ve,isWordWrapMinified:K,isViewportWrapping:fe,wrappingColumn:ne,verticalScrollbarWidth:M,horizontalScrollbarHeight:X,overviewRuler:{top:rt,width:M,height:r-2*rt,right:0}}}}class Zxe extends jo{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:C("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Zt(e.enabled,this.defaultValue.enabled)}}}class Xxe extends jo{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(126,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:C("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:C("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:C("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),fontSize:Cr.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:fl.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Qxe extends Gf{constructor(){super(58,"lineHeight",js.lineHeight,e=>Gf.clamp(e,0,150),{markdownDescription:C("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Jxe extends jo{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:C("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[C("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),C("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),C("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:C("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:C("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:C("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:C("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:C("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:C("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),size:Ka(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ka(t.side,this.defaultValue.side,["right","left"]),showSlider:Ka(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Zt(t.renderCharacters,this.defaultValue.renderCharacters),scale:Cr.clampedInt(t.scale,1,1,3),maxColumn:Cr.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function eDe(i){return i==="ctrlCmd"?Gn?"metaKey":"ctrlKey":"altKey"}class tDe extends jo{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Cr.clampedInt(t.top,0,0,1e3),bottom:Cr.clampedInt(t.bottom,0,0,1e3)}}}class nDe extends jo{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:C("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:C("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),cycle:Zt(t.cycle,this.defaultValue.cycle)}}}class iDe extends WS{constructor(){super(128)}compute(e,t,n){return e.pixelRatio}}class rDe extends jo{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:C("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:C("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:C("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:C("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Zt(t.other,this.defaultValue.other),comments:Zt(t.comments,this.defaultValue.comments),strings:Zt(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class oDe extends jo{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[C("lineNumbers.off","Line numbers are not rendered."),C("lineNumbers.on","Line numbers are rendered as absolute number."),C("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),C("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:C("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function IG(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class sDe extends jo{constructor(){const e=[],t={type:"number",description:C("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:C("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:C("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Cr.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const r=n;t.push({column:Cr.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((n,r)=>n.column-r.column),t}return this.defaultValue}}function cJ(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let aDe=class extends jo{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),C("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),C("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),C("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),C("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:C("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:C("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:C("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Cr.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Cr.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Cr.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:cJ(t.vertical,this.defaultValue.vertical),horizontal:cJ(t.horizontal,this.defaultValue.horizontal),useShadows:Zt(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Zt(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Zt(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Zt(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Zt(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Cr.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Cr.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Zt(t.scrollByPage,this.defaultValue.scrollByPage)}}};const Sf="inUntrustedWorkspace",Mf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments"};class lDe extends jo{constructor(){const e={nonBasicASCII:Sf,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Sf,allowedCharacters:{}};super(112,"unicodeHighlight",e,{[Mf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Sf],default:e.nonBasicASCII,description:C("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Mf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:C("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Mf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:C("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Mf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Sf],default:e.includeComments,description:C("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Mf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:C("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(Qc(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0));const r=super.applyUpdate(e,t);return n?new L2(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:VF(t.nonBasicASCII,Sf,[!0,!1,Sf]),invisibleCharacters:Zt(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Zt(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:VF(t.includeComments,Sf,[!0,!1,Sf]),allowedCharacters:this.validateAllowedCharacters(e.allowedCharacters,this.defaultValue.allowedCharacters)}}validateAllowedCharacters(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[r,o]of Object.entries(e))o===!0&&(n[r]=!0);return n}}class uDe extends jo{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:C("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Zt(t.enabled,this.defaultValue.enabled),mode:Ka(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class cDe extends jo{constructor(){const e={enabled:Js.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:C("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Zt(e.enabled,this.defaultValue.enabled)}}}class dDe extends jo{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairs.true","Enables bracket pair guides."),C("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),C("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:C("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),C("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),C("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:C("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:C("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:C("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:C("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:VF(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:VF(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Zt(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Zt(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Zt(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function VF(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class hDe extends jo{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[C("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),C("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:C("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:C("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:C("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:C("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:C("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:C("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:C("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:C("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:C("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:C("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:C("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ka(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Zt(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Zt(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Zt(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Zt(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Zt(t.showIcons,this.defaultValue.showIcons),showStatusBar:Zt(t.showStatusBar,this.defaultValue.showStatusBar),preview:Zt(t.preview,this.defaultValue.preview),previewMode:Ka(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Zt(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Zt(t.showMethods,this.defaultValue.showMethods),showFunctions:Zt(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Zt(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Zt(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Zt(t.showFields,this.defaultValue.showFields),showVariables:Zt(t.showVariables,this.defaultValue.showVariables),showClasses:Zt(t.showClasses,this.defaultValue.showClasses),showStructs:Zt(t.showStructs,this.defaultValue.showStructs),showInterfaces:Zt(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Zt(t.showModules,this.defaultValue.showModules),showProperties:Zt(t.showProperties,this.defaultValue.showProperties),showEvents:Zt(t.showEvents,this.defaultValue.showEvents),showOperators:Zt(t.showOperators,this.defaultValue.showOperators),showUnits:Zt(t.showUnits,this.defaultValue.showUnits),showValues:Zt(t.showValues,this.defaultValue.showValues),showConstants:Zt(t.showConstants,this.defaultValue.showConstants),showEnums:Zt(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Zt(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Zt(t.showKeywords,this.defaultValue.showKeywords),showWords:Zt(t.showWords,this.defaultValue.showWords),showColors:Zt(t.showColors,this.defaultValue.showColors),showFiles:Zt(t.showFiles,this.defaultValue.showFiles),showReferences:Zt(t.showReferences,this.defaultValue.showReferences),showFolders:Zt(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Zt(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Zt(t.showSnippets,this.defaultValue.showSnippets),showUsers:Zt(t.showUsers,this.defaultValue.showUsers),showIssues:Zt(t.showIssues,this.defaultValue.showIssues)}}}class fDe extends jo{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:C("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Zt(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class gDe extends WS{constructor(){super(129,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function pDe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class mDe extends WS{constructor(){super(131,[130])}compute(e,t,n){const r=t.get(130);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}const _De="Consolas, 'Courier New', monospace",vDe="Menlo, Monaco, 'Courier New', monospace",bDe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",js={fontFamily:Gn?vDe:Qa?bDe:_De,fontWeight:"normal",fontSize:Gn?12:14,lineHeight:0,letterSpacing:0},Js={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},bb=[];function et(i){return bb[i.id]=i,i}const af={acceptSuggestionOnCommitCharacter:et(new Kn(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:C("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:et(new Eo(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",C("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:C("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:et(new Wxe),accessibilityPageSize:et(new Cr(3,"accessibilityPageSize",10,1,1073741824,{description:C("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:et(new fl(4,"ariaLabel",C("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:et(new Eo(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),C("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:C("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:et(new Eo(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:et(new Eo(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:et(new Eo(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),C("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:C("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:et(new SN(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Bxe,{enumDescriptions:[C("editor.autoIndent.none","The editor will not insert indentation automatically."),C("editor.autoIndent.keep","The editor will keep the current line's indentation."),C("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),C("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),C("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:C("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:et(new Kn(10,"automaticLayout",!1)),autoSurround:et(new Eo(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[C("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),C("editor.autoSurround.quotes","Surround with quotes but not brackets."),C("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:C("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:et(new cDe),bracketPairGuides:et(new dDe),stickyTabStops:et(new Kn(103,"stickyTabStops",!1,{description:C("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:et(new Kn(14,"codeLens",!0,{description:C("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:et(new fl(15,"codeLensFontFamily","",{description:C("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:et(new Cr(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:C("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:et(new Kn(17,"colorDecorators",!0,{description:C("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:et(new Kn(18,"columnSelection",!1,{description:C("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:et(new Vxe),contextmenu:et(new Kn(20,"contextmenu",!0)),copyWithSyntaxHighlighting:et(new Kn(21,"copyWithSyntaxHighlighting",!0,{description:C("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:et(new SN(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Hxe,{description:C("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:et(new Kn(23,"cursorSmoothCaretAnimation",!1,{description:C("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:et(new SN(24,"cursorStyle",ls.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],$xe,{description:C("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:et(new Cr(25,"cursorSurroundingLines",0,0,1073741824,{description:C("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:et(new Eo(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[C("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),C("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:C("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:et(new Cr(27,"cursorWidth",0,0,1073741824,{markdownDescription:C("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:et(new Kn(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:et(new Kn(29,"disableMonospaceOptimizations",!1)),domReadOnly:et(new Kn(30,"domReadOnly",!1)),dragAndDrop:et(new Kn(31,"dragAndDrop",!0,{description:C("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:et(new Uxe),extraEditorClassName:et(new fl(33,"extraEditorClassName","")),fastScrollSensitivity:et(new Gf(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:C("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:et(new jxe),fixedOverflowWidgets:et(new Kn(36,"fixedOverflowWidgets",!1)),folding:et(new Kn(37,"folding",!0,{description:C("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:et(new Eo(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[C("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),C("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:C("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:et(new Kn(39,"foldingHighlight",!0,{description:C("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:et(new Kn(40,"foldingImportsByDefault",!1,{description:C("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:et(new Kn(41,"unfoldOnClickAfterEndOfLine",!1,{description:C("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:et(new fl(42,"fontFamily",js.fontFamily,{description:C("fontFamily","Controls the font family.")})),fontInfo:et(new Kxe),fontLigatures2:et(new Du),fontSize:et(new Gxe),fontWeight:et(new Rf),formatOnPaste:et(new Kn(47,"formatOnPaste",!1,{description:C("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:et(new Kn(48,"formatOnType",!1,{description:C("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:et(new Kn(49,"glyphMargin",!0,{description:C("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:et(new qxe),hideCursorInOverviewRuler:et(new Kn(51,"hideCursorInOverviewRuler",!1,{description:C("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:et(new Yxe),inDiffEditor:et(new Kn(53,"inDiffEditor",!1)),letterSpacing:et(new Gf(55,"letterSpacing",js.letterSpacing,i=>Gf.clamp(i,-5,20),{description:C("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:et(new Zxe),lineDecorationsWidth:et(new wC(57,"lineDecorationsWidth",10)),lineHeight:et(new Qxe),lineNumbers:et(new oDe),lineNumbersMinChars:et(new Cr(60,"lineNumbersMinChars",5,1,300)),linkedEditing:et(new Kn(61,"linkedEditing",!1,{description:C("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:et(new Kn(62,"links",!0,{description:C("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:et(new Eo(63,"matchBrackets","always",["always","near","never"],{description:C("matchBrackets","Highlight matching brackets.")})),minimap:et(new Jxe),mouseStyle:et(new Eo(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:et(new Gf(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:C("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:et(new Kn(67,"mouseWheelZoom",!1,{markdownDescription:C("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:et(new Kn(68,"multiCursorMergeOverlapping",!0,{description:C("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:et(new SN(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],eDe,{markdownEnumDescriptions:[C("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:C({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:et(new Eo(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[C("multiCursorPaste.spread","Each cursor pastes a single line of the text."),C("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:C("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:et(new Kn(71,"occurrencesHighlight",!0,{description:C("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:et(new Kn(72,"overviewRulerBorder",!0,{description:C("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:et(new Cr(73,"overviewRulerLanes",3,0,3)),padding:et(new tDe),parameterHints:et(new nDe),peekWidgetDefaultFocus:et(new Eo(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[C("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),C("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:C("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:et(new Kn(77,"definitionLinkOpensInPeek",!1,{description:C("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:et(new rDe),quickSuggestionsDelay:et(new Cr(79,"quickSuggestionsDelay",10,0,1073741824,{description:C("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:et(new Kn(80,"readOnly",!1)),renameOnType:et(new Kn(81,"renameOnType",!1,{description:C("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:C("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:et(new Kn(82,"renderControlCharacters",!0,{description:C("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:et(new Kn(83,"renderFinalNewline",!0,{description:C("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:et(new Eo(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",C("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:C("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:et(new Kn(85,"renderLineHighlightOnlyWhenFocus",!1,{description:C("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:et(new Eo(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:et(new Eo(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",C("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),C("renderWhitespace.selection","Render whitespace characters only on selected text."),C("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:C("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:et(new Cr(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:et(new Kn(89,"roundedSelection",!0,{description:C("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:et(new sDe),scrollbar:et(new aDe),scrollBeyondLastColumn:et(new Cr(92,"scrollBeyondLastColumn",5,0,1073741824,{description:C("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:et(new Kn(93,"scrollBeyondLastLine",!0,{description:C("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:et(new Kn(94,"scrollPredominantAxis",!0,{description:C("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:et(new Kn(95,"selectionClipboard",!0,{description:C("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Qa})),selectionHighlight:et(new Kn(96,"selectionHighlight",!0,{description:C("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:et(new Kn(97,"selectOnLineNumbers",!0)),showFoldingControls:et(new Eo(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[C("showFoldingControls.always","Always show the folding controls."),C("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:C("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:et(new Kn(99,"showUnused",!0,{description:C("showUnused","Controls fading out of unused code.")})),showDeprecated:et(new Kn(125,"showDeprecated",!0,{description:C("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:et(new Xxe),snippetSuggestions:et(new Eo(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[C("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),C("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),C("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),C("snippetSuggestions.none","Do not show snippet suggestions.")],description:C("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:et(new fDe),smoothScrolling:et(new Kn(102,"smoothScrolling",!1,{description:C("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:et(new Cr(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:et(new hDe),inlineSuggest:et(new uDe),suggestFontSize:et(new Cr(106,"suggestFontSize",0,0,1e3,{markdownDescription:C("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:et(new Cr(107,"suggestLineHeight",0,0,1e3,{markdownDescription:C("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:et(new Kn(108,"suggestOnTriggerCharacters",!0,{description:C("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:et(new Eo(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[C("suggestSelection.first","Always select the first suggestion."),C("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),C("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:C("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:et(new Eo(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[C("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),C("tabCompletion.off","Disable tab completions."),C("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:C("tabCompletion","Enables tab completions.")})),tabIndex:et(new Cr(111,"tabIndex",0,-1,1073741824)),unicodeHighlight:et(new lDe),unusualLineTerminators:et(new Eo(113,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[C("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),C("unusualLineTerminators.off","Unusual line terminators are ignored."),C("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:C("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:et(new Kn(114,"useShadowDOM",!0)),useTabStops:et(new Kn(115,"useTabStops",!0,{description:C("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:et(new fl(116,"wordSeparators",Wue,{description:C("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:et(new Eo(117,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),C({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:C({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:et(new fl(118,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:et(new fl(119,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:et(new Cr(120,"wordWrapColumn",80,1,1073741824,{markdownDescription:C({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:et(new Eo(121,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:et(new Eo(122,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:et(new SN(123,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],pDe,{enumDescriptions:[C("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),C("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),C("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),C("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:C("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:et(new Eo(124,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[C("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),C("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:C("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:et(new zxe),pixelRatio:et(new iDe),tabFocusMode:et(new gDe),layoutInfo:et(new hw),wrappingInfo:et(new mDe)};class CDe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class kG{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(Kc?js.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight="bold",r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(r);const o=document.createElement("div");o.style.fontFamily=e,o.style.fontWeight=this._bareFontInfo.fontWeight,o.style.fontSize=this._bareFontInfo.fontSize+"px",o.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,o.style.lineHeight=this._bareFontInfo.lineHeight+"px",o.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",o.style.fontStyle="italic",t.appendChild(o);const s=[];for(const a of this._requests){let u;a.type===0&&(u=n),a.type===2&&(u=r),a.type===1&&(u=o),u.appendChild(document.createElement("br"));const d=document.createElement("span");kG._render(d,a),u.appendChild(d),s.push(d)}this._container=t,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let r=0;r<8;r++)n+=n;e.innerText=n}else{let n=t.chr;for(let r=0;r<8;r++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],r=this._testElements[e];n.fulfill(r.offsetWidth/256)}}}function yDe(i,e){new kG(i,e).read()}class que extends Oe{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,r=0;t?(n=t.width,r=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,r=this.referenceDomElement.clientHeight),n=Math.max(5,n),r=Math.max(5,r),(this.width!==n||this.height!==r)&&(this.width=n,this.height=r,e&&this.changeCallback())}}const Ap=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Ce,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},wDe=Gn?1.5:1.35,E9=8;class Yb{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,r){const o=e.get(42),s=e.get(46),a=e.get(45),u=e.get(44),d=e.get(58),h=e.get(55);return Yb._create(o,s,a,u,d,h,t,n,r)}static _create(e,t,n,r,o,s,a,u,d){o===0?o=wDe*n:o<E9&&(o=o*n),o=Math.round(o),o<E9&&(o=E9);const h=1+(d?0:Ap.getZoomLevel()*.1);return n*=h,o*=h,new Yb({zoomLevel:a,pixelRatio:u,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:r,lineHeight:o,letterSpacing:s})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Yb._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const SDe=1;class DH extends Yb{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=SDe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const LB={JSONContribution:"base.contributions.json"};function EDe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class LDe{constructor(){this._onDidChangeSchema=new Ce,this.schemasById={}}registerSchema(e,t){this.schemasById[EDe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const xDe=new LDe;Xr.add(LB.JSONContribution,xDe);const SC={Configuration:"base.contributions.configuration"},EN="vscode://schemas/settings/resourceLanguage",dJ=Xr.as(LB.JSONContribution);class DDe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Ce,this._onDidUpdateConfiguration=new Ce,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:C("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},dJ.registerSchema(EN,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);dJ.registerSchema(EN,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],r=[];for(const{overrides:o,source:s}of e)for(const a in o)if(n.push(a),LA.test(a)){const u=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:s,value:u});const d={type:"object",default:u,description:C("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:EN,defaultDefaultValue:u,source:cc(s)?void 0:s};r.push(...Zue(a)),this.configurationProperties[a]=d,this.defaultLanguageConfigurationOverridesNode.properties[a]=d}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:s});const u=this.configurationProperties[a];u&&(this.updatePropertyDefaultValue(a,u),this.updateSchema(a,u))}this.registerOverrideIdentifiers(r),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(r=>{n.push(...this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties)),this.configurationContributors.push(r),this.registerJSONConfiguration(r)}),n}validateAndRegisterProperties(e,t=!0,n,r,o=3){o=xu(e.scope)?o:e.scope;let s=[],a=e.properties;if(a)for(let d in a){if(t&&kDe(d)){delete a[d];continue}const h=a[d];if(h.source=n,h.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,h),LA.test(d)?h.scope=void 0:(h.scope=xu(h.scope)?o:h.scope,h.restricted=xu(h.restricted)?!!(r!=null&&r.includes(d)):h.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d];!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.push(d)}let u=e.allOf;if(u)for(let d of u)s.push(...this.validateAndRegisterProperties(d,t,n,r,o));return s}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let r=n.properties;if(r)for(const s in r)this.updateSchema(s,r[s]);let o=n.allOf;o&&o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:C("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:EN};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),C("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let r=n==null?void 0:n.value,o=n==null?void 0:n.source;ml(r)&&(r=t.defaultDefaultValue,o=void 0),ml(r)&&(r=IDe(t.type)),t.default=r,t.defaultValueSource=o}}const Yue="\\[([^\\]]+)\\]",hJ=new RegExp(Yue,"g"),TDe=`^(${Yue})+$`,LA=new RegExp(TDe);function Zue(i){const e=[];if(LA.test(i)){let t=hJ.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=hJ.exec(i)}}return x1(e)}function IDe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Xue=new DDe;Xr.add(SC.Configuration,Xue);function kDe(i){return i.trim()?LA.test(i)?C("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):Xue.getConfigurationProperties()[i]!==void 0?C("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:C("config.property.empty","Cannot register an empty property")}const NDe=Object.prototype.hasOwnProperty;function ADe(i,e){for(let t in i)if(NDe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class ODe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const HF=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Ce,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},RDe=Object.hasOwnProperty;class MDe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class PDe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Lf{static readOptions(e){const t=e,n=new PDe;for(const r of bb){const o=r.name==="_never_"?void 0:t[r.name];n._write(r.id,o)}return n}static validateOptions(e){const t=new Fxe;for(const n of bb)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new MDe;for(const r of bb)n._write(r.id,r.compute(t,n,e._read(r.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?rc(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!Lf._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let r=!1;for(const o of bb){const s=!Lf._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=s,s&&(r=!0)}return r?new Kue(n):null}static applyUpdate(e,t){let n=!1;for(const r of bb)if(t.hasOwnProperty(r.name)){const o=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=o.newValue,n=n||o.didChange}return n}}function FDe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const o=i.renderWhitespace;o===!0?i.renderWhitespace="boundary":o===!1&&(i.renderWhitespace="none");const s=i.renderLineHighlight;s===!0?i.renderLineHighlight="line":s===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const u=i.tabCompletion;u===!1?i.tabCompletion="off":u===!0&&(i.tabCompletion="onlySnippets");const d=i.suggest;if(d&&typeof d.filteredTypes=="object"&&d.filteredTypes){const E={};E.method="showMethods",E.function="showFunctions",E.constructor="showConstructors",E.deprecated="showDeprecated",E.field="showFields",E.variable="showVariables",E.class="showClasses",E.struct="showStructs",E.interface="showInterfaces",E.module="showModules",E.property="showProperties",E.event="showEvents",E.operator="showOperators",E.unit="showUnits",E.value="showValues",E.constant="showConstants",E.enum="showEnums",E.enumMember="showEnumMembers",E.keyword="showKeywords",E.text="showWords",E.color="showColors",E.file="showFiles",E.reference="showReferences",E.folder="showFolders",E.typeParameter="showTypeParameters",E.snippet="showSnippets",ADe(E,S=>{const w=d.filteredTypes[S.key];w===!1&&(d[S.value]=w)})}const h=i.hover;h===!0?i.hover={enabled:!0}:h===!1&&(i.hover={enabled:!1});const f=i.parameterHints;f===!0?i.parameterHints={enabled:!0}:f===!1&&(i.parameterHints={enabled:!1});const p=i.autoIndent;p===!0?i.autoIndent="full":p===!1&&(i.autoIndent="advanced");const m=i.matchBrackets;m===!0?i.matchBrackets="always":m===!1&&(i.matchBrackets="never");const{renderIndentGuides:v,highlightActiveIndentGuide:b}=i;i.guides||(i.guides={}),v!==void 0&&(i.guides.indentation=!!v),b!==void 0&&(i.guides.highlightActiveIndentation=!!b)}function fJ(i){const e=Xg(i);return FDe(e),e}class NG extends Oe{constructor(e,t){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Ce),this.onDidChangeFast=this._onDidChangeFast.event,this._reservedHeight=0,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new Gue,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=fJ(t),this._readOptions=Lf.readOptions(this._rawOptions),this._validatedOptions=Lf.validateOptions(this._readOptions),this._register(Ap.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(HF.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=Lf.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Yb.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:HF.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Lf.computeOptions(this._validatedOptions,n)}updateOptions(e){if(typeof e>"u")return;const t=fJ(e);Lf.applyUpdate(this._rawOptions,t)&&(this._readOptions=Lf.readOptions(this._rawOptions),this._validatedOptions=Lf.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=NG._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}reserveHeight(e){this._reservedHeight=e,this._recomputeOptions()}}const BDe=Object.freeze({id:"editor",order:5,type:"object",title:C("editorConfigurationTitle","Editor"),scope:5}),WDe=Xr.as(SC.Configuration),$F=Object.assign(Object.assign({},BDe),{properties:{"editor.tabSize":{type:"number",default:Js.tabSize,minimum:1,markdownDescription:C("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Js.insertSpaces,markdownDescription:C("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Js.detectIndentation,markdownDescription:C("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Js.trimAutoWhitespace,description:C("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Js.largeFileOptimizations,description:C("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:C("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[C("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),C("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),C("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:C("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[C("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),C("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),C("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:C("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:C("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:C("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:C("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:C("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:C("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:C("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:C("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:C("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:C("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:C("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function VDe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of bb){const e=i.schema;if(typeof e<"u")if(VDe(e))$F.properties[`editor.${i.name}`]=e;else for(let t in e)RDe.call(e,t)&&($F.properties[t]=e[t])}let xM=null;function Que(){return xM===null&&(xM=Object.create(null),Object.keys($F.properties).forEach(i=>{xM[i]=!0})),xM}function HDe(i){return Que()[`editor.${i}`]||!1}function $De(i){return Que()[`diffEditor.${i}`]||!1}WDe.registerConfiguration($F);class gJ{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function zDe(){D1.INSTANCE.clearCache()}class D1 extends Oe{constructor(){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._cache=new gJ,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new gJ,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=D1._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new DH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,r){const o=new CDe(e,t);return n.push(o),r&&r.push(o),o}static _actualReadConfiguration(e){const t=[],n=[],r=this.createRequest("n",0,t,n),o=this.createRequest("ｍ",0,t,null),s=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),u=this.createRequest("1",0,t,n),d=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),f=this.createRequest("4",0,t,n),p=this.createRequest("5",0,t,n),m=this.createRequest("6",0,t,n),v=this.createRequest("7",0,t,n),b=this.createRequest("8",0,t,n),E=this.createRequest("9",0,t,n),S=this.createRequest("→",0,t,n),w=this.createRequest("￫",0,t,null),L=this.createRequest("·",0,t,n),A=this.createRequest(String.fromCharCode(11825),0,t,null),N="|/-_ilm%";for(let $=0,I=N.length;$<I;$++)this.createRequest(N.charAt($),0,t,n),this.createRequest(N.charAt($),1,t,n),this.createRequest(N.charAt($),2,t,n);yDe(e,t);const H=Math.max(a.width,u.width,d.width,h.width,f.width,p.width,m.width,v.width,b.width,E.width);let M=e.fontFeatureSettings===Du.OFF;const R=n[0].width;for(let $=1,I=n.length;M&&$<I;$++){const O=R-n[$].width;if(O<-.001||O>.001){M=!1;break}}let q=!0;M&&w.width!==R&&(q=!1),w.width>S.width&&(q=!1);const X=$le()>2e3;return new DH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:M,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:q,spaceWidth:s.width,middotWidth:L.width,wsmiddotWidth:A.width,maxDigitWidth:H},X)}}D1.INSTANCE=new D1;let Oa=class Jue extends NG{constructor(e,t,n=null,r){super(e,t),this.accessibilityService=r,this._elementSizeObserver=this._register(new que(n,t.dimension,()=>this._recomputeOptions())),this._register(D1.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(nG(o=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(Kc?js.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(Kc?js.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Kc&&!Ule&&(e+="no-user-select "),Kc&&(e+="no-minimap-shadow "),Gn&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Jue._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:n0||wl,pixelRatio:vA(),zoomLevel:CF(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return D1.INSTANCE.readConfiguration(e)}},Q=class Ys{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return Ys.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Ys.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Ys.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Ys.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Ys.plusRange(this,e)}static plusRange(e,t){let n,r,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new Ys(n,r,o,s)}intersectRanges(e){return Ys.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,u=t.startColumn,d=t.endLineNumber,h=t.endColumn;return n<a?(n=a,r=u):n===a&&(r=Math.max(r,u)),o>d?(o=d,s=h):o===d&&(s=Math.min(s,h)),n>o||n===o&&r>s?null:new Ys(n,r,o,s)}equalsRange(e){return Ys.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Ys.getEndPosition(this)}static getEndPosition(e){return new Ee(e.endLineNumber,e.endColumn)}getStartPosition(){return Ys.getStartPosition(this)}static getStartPosition(e){return new Ee(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Ys(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Ys(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Ys.collapseToStart(this)}static collapseToStart(e){return new Ys(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Ys(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Ys(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){const a=e.startColumn|0,u=t.startColumn|0;if(a===u){const d=e.endLineNumber|0,h=t.endLineNumber|0;if(d===h){const f=e.endColumn|0,p=t.endColumn|0;return f-p}return d-h}return a-u}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},wt=class Ic extends Q{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ic.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ic(this.startLineNumber,this.startColumn,e,t):new Ic(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Ee(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ee(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ic(e,t,this.endLineNumber,this.endColumn):new Ic(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ic(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ic(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ic(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ic(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,r,o){return o===0?new Ic(e,t,n,r):new Ic(n,r,e,t)}};class ece{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function ii(i){return new ece(i)}function Io(i,e,t){let n=null,r=null;if(typeof t.value=="function"?(n="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",r=t.get),!r)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,s)}),this[o]}}var UDe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ur;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(ur||(ur={}));class Hi extends Oe{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(qe(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(qe(document,"touchend",e=>this.onTouchEnd(e))),this._register(qe(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.targets.push(e),{dispose:()=>{Hi.INSTANCE.targets=Hi.INSTANCE.targets.filter(t=>t!==e)}}):Oe.None}static ignoreTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Hi.INSTANCE.ignoreTargets=Hi.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):Oe.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,r=e.targetTouches.length;n<r;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(ur.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,o=e.changedTouches.length;r<o;r++){let s=e.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],u=Date.now()-a.initialTimeStamp;if(u<Hi.HOLD_DELAY&&Math.abs(a.initialPageX-zu(a.rollingPageX))<30&&Math.abs(a.initialPageY-zu(a.rollingPageY))<30){let d=this.newGestureEvent(ur.Tap,a.initialTarget);d.pageX=zu(a.rollingPageX),d.pageY=zu(a.rollingPageY),this.dispatchEvent(d)}else if(u>=Hi.HOLD_DELAY&&Math.abs(a.initialPageX-zu(a.rollingPageX))<30&&Math.abs(a.initialPageY-zu(a.rollingPageY))<30){let d=this.newGestureEvent(ur.Contextmenu,a.initialTarget);d.pageX=zu(a.rollingPageX),d.pageY=zu(a.rollingPageY),this.dispatchEvent(d)}else if(n===1){let d=zu(a.rollingPageX),h=zu(a.rollingPageY),f=zu(a.rollingTimestamps)-a.rollingTimestamps[0],p=d-a.rollingPageX[0],m=h-a.rollingPageY[0];const v=this.targets.filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(v,t,Math.abs(p)/f,p>0?1:-1,d,Math.abs(m)/f,m>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(ur.End,a.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===ur.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Hi.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===ur.Change||e.type===ur.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,r,o,s,a,u){this.handle=rg(()=>{let d=Date.now(),h=d-t,f=0,p=0,m=!0;n+=Hi.SCROLL_FRICTION*h,s+=Hi.SCROLL_FRICTION*h,n>0&&(m=!1,f=r*n*h),s>0&&(m=!1,p=a*s*h);let v=this.newGestureEvent(ur.Change);v.translationX=f,v.translationY=p,e.forEach(b=>b.dispatchEvent(v)),m||this.inertia(e,d,n,r,o+f,s,a,u+p)})}onTouchMove(e){let t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(ur.Change,s.initialTarget);a.translationX=o.pageX-zu(s.rollingPageX),a.translationY=o.pageY-zu(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Hi.SCROLL_FRICTION=-.005;Hi.HOLD_DELAY=700;Hi.CLEAR_TAP_COUNT_TIME=400;UDe([Io],Hi,"isTouchDevice",null);function VS(i,e){let t=new Ju(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class EC{constructor(){this._hooks=new Je,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,r,o){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=r,this._onStopCallback=o;const s=hH.getSameOriginWindowChain(),a=ng?"pointermove":"mousemove",u="mouseup",d=s.map(f=>f.window.document),h=_0(e);h&&d.unshift(h);for(const f of d)this._hooks.add(hG(f,a,p=>{if(p.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(p)},(p,m)=>this._mouseMoveEventMerger(p,m))),this._hooks.add(qe(f,u,p=>this.stopMonitoring(!0)));if(hH.hasDifferentOriginAncestor()){let f=s[s.length-1];this._hooks.add(qe(f.window.document,"mouseout",p=>{new Ju(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(qe(f.window.document,"mouseover",p=>{new Ju(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(qe(f.window.document.body,"mouseleave",p=>{this.stopMonitoring(!0)}))}}}function r0(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class fi{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Nh{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.l=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,o=e.a,s=Math.max(t,n,r),a=Math.min(t,n,r);let u=0,d=0;const h=(a+s)/2,f=s-a;if(f>0){switch(d=Math.min(h<=.5?f/(2*h):f/(2-2*h),1),s){case t:u=(n-r)/f+(n<r?6:0);break;case n:u=(r-t)/f+2;break;case r:u=(t-n)/f+4;break}u*=60,u=Math.round(u)}return new Nh(u,d,h,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:r,a:o}=e;let s,a,u;if(n===0)s=a=u=r;else{const d=r<.5?r*(1+n):r+n-r*n,h=2*r-d;s=Nh._hue2rgb(h,d,t+1/3),a=Nh._hue2rgb(h,d,t),u=Nh._hue2rgb(h,d,t-1/3)}return new fi(Math.round(s*255),Math.round(a*255),Math.round(u*255),o)}}class qf{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.v=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,o=Math.max(t,n,r),s=Math.min(t,n,r),a=o-s,u=o===0?0:a/o;let d;return a===0?d=0:o===t?d=((n-r)/a%6+6)%6:o===n?d=(r-t)/a+2:d=(t-n)/a+4,new qf(Math.round(d*60),u,o,e.a)}static toRGBA(e){const{h:t,s:n,v:r,a:o}=e,s=r*n,a=s*(1-Math.abs(t/60%2-1)),u=r-s;let[d,h,f]=[0,0,0];return t<60?(d=s,h=a):t<120?(d=a,h=s):t<180?(h=s,f=a):t<240?(h=a,f=s):t<300?(d=a,f=s):t<=360&&(d=s,f=a),d=Math.round((d+u)*255),h=Math.round((h+u)*255),f=Math.round((f+u)*255),new fi(d,h,f,o)}}class we{constructor(e){if(e)if(e instanceof fi)this.rgba=e;else if(e instanceof Nh)this._hsla=e,this.rgba=Nh.toRGBA(e);else if(e instanceof qf)this._hsva=e,this.rgba=qf.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return we.Format.CSS.parseHex(e)||we.red}get hsla(){return this._hsla?this._hsla:Nh.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:qf.fromRGBA(this.rgba)}equals(e){return!!e&&fi.equals(this.rgba,e.rgba)&&Nh.equals(this.hsla,e.hsla)&&qf.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=we._relativeLuminanceForComponent(this.rgba.r),t=we._relativeLuminanceForComponent(this.rgba.g),n=we._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*n;return r0(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new we(new Nh(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new we(new Nh(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:r,a:o}=this.rgba;return new we(new fi(t,n,r,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new we(new fi(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=we.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-r)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(r-o)/r,e.darken(n)}}we.white=new we(new fi(255,255,255,1));we.black=new we(new fi(0,0,0,1));we.red=new we(new fi(255,0,0,1));we.blue=new we(new fi(0,0,255,1));we.cyan=new we(new fi(0,255,255,1));we.lightgrey=new we(new fi(211,211,211,1));we.transparent=new we(new fi(0,0,0,0));(function(i){(function(e){(function(t){function n(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:i.Format.CSS.formatRGBA(m)}t.formatRGB=n;function r(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=r;function o(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(m)}t.formatHSL=o;function s(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=s;function a(m){const v=m.toString(16);return v.length!==2?"0"+v:v}function u(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=u;function d(m,v=!1){return v&&m.rgba.a===1?i.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=d;function h(m){return m.isOpaque()?i.Format.CSS.formatHex(m):i.Format.CSS.formatRGBA(m)}t.format=h;function f(m){const v=m.length;if(v===0||m.charCodeAt(0)!==35)return null;if(v===7){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),E=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6));return new i(new fi(b,E,S,1))}if(v===9){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),E=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6)),w=16*p(m.charCodeAt(7))+p(m.charCodeAt(8));return new i(new fi(b,E,S,w/255))}if(v===4){const b=p(m.charCodeAt(1)),E=p(m.charCodeAt(2)),S=p(m.charCodeAt(3));return new i(new fi(16*b+b,16*E+E,16*S+S))}if(v===5){const b=p(m.charCodeAt(1)),E=p(m.charCodeAt(2)),S=p(m.charCodeAt(3)),w=p(m.charCodeAt(4));return new i(new fi(16*b+b,16*E+E,16*S+S,(16*w+w)/255))}return null}t.parseHex=f;function p(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(we||(we={}));function tce(i){return`--vscode-${i.replace(".","-")}`}const nce={ColorContribution:"base.contributions.colors"};class jDe{constructor(){this._onDidChangeSchema=new Ce,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const r=n.defaults[t.type];return Ug(r,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let r=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return r!==o?r-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const xB=new jDe;Xr.add(nce.ColorContribution,xB);function ye(i,e,t,n,r){return xB.registerColor(i,e,t,n,r)}const zt=ye("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},C("foreground","Overall foreground color. This color is only used if not overridden by a component.")),KDe=ye("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},C("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),L9=ye("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},C("iconForeground","The default color for icons in the workbench.")),T1=ye("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},C("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),go=ye("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},C("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),el=ye("contrastActiveBorder",{light:null,dark:null,hc:T1},C("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),DB=ye("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkForeground","Foreground color for links in text.")),TB=ye("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),ice=ye("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:we.black},C("textCodeBlockBackground","Background color for code blocks in text.")),y0=ye("widget.shadow",{dark:nr(we.black,.36),light:nr(we.black,.16),hc:null},C("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),AG=ye("input.background",{dark:"#3C3C3C",light:we.white,hc:we.black},C("inputBoxBackground","Input box background.")),OG=ye("input.foreground",{dark:zt,light:zt,hc:zt},C("inputBoxForeground","Input box foreground.")),RG=ye("input.border",{dark:null,light:null,hc:go},C("inputBoxBorder","Input box border.")),TH=ye("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:go},C("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),IH=ye("inputOption.activeBackground",{dark:nr(T1,.4),light:nr(T1,.2),hc:we.transparent},C("inputOption.activeBackground","Background hover color of options in input fields.")),kH=ye("inputOption.activeForeground",{dark:we.white,light:we.black,hc:null},C("inputOption.activeForeground","Foreground color of activated options in input fields.")),rce=ye("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:we.black},C("inputValidationInfoBackground","Input validation background color for information severity.")),oce=ye("inputValidation.infoForeground",{dark:null,light:null,hc:null},C("inputValidationInfoForeground","Input validation foreground color for information severity.")),sce=ye("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:go},C("inputValidationInfoBorder","Input validation border color for information severity.")),ace=ye("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:we.black},C("inputValidationWarningBackground","Input validation background color for warning severity.")),lce=ye("inputValidation.warningForeground",{dark:null,light:null,hc:null},C("inputValidationWarningForeground","Input validation foreground color for warning severity.")),uce=ye("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:go},C("inputValidationWarningBorder","Input validation border color for warning severity.")),cce=ye("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:we.black},C("inputValidationErrorBackground","Input validation background color for error severity.")),dce=ye("inputValidation.errorForeground",{dark:null,light:null,hc:null},C("inputValidationErrorForeground","Input validation foreground color for error severity.")),hce=ye("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:go},C("inputValidationErrorBorder","Input validation border color for error severity.")),x9=ye("dropdown.background",{dark:"#3C3C3C",light:we.white,hc:we.black},C("dropdownBackground","Dropdown background.")),pJ=ye("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:we.white},C("dropdownForeground","Dropdown foreground.")),GDe=ye("button.foreground",{dark:we.white,light:we.white,hc:we.white},C("buttonForeground","Button foreground color.")),NH=ye("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},C("buttonBackground","Button background color.")),qDe=ye("button.hoverBackground",{dark:bce(NH,.2),light:vce(NH,.2),hc:null},C("buttonHoverBackground","Button background color when hovering.")),x2=ye("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:we.black},C("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),D2=ye("badge.foreground",{dark:we.white,light:"#333",hc:we.white},C("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),HS=ye("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},C("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),fw=ye("scrollbarSlider.background",{dark:we.fromHex("#797979").transparent(.4),light:we.fromHex("#646464").transparent(.4),hc:nr(go,.6)},C("scrollbarSliderBackground","Scrollbar slider background color.")),gw=ye("scrollbarSlider.hoverBackground",{dark:we.fromHex("#646464").transparent(.7),light:we.fromHex("#646464").transparent(.7),hc:nr(go,.8)},C("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),pw=ye("scrollbarSlider.activeBackground",{dark:we.fromHex("#BFBFBF").transparent(.4),light:we.fromHex("#000000").transparent(.6),hc:go},C("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),YDe=ye("progressBar.background",{dark:we.fromHex("#0E70C0"),light:we.fromHex("#0E70C0"),hc:go},C("progressBarBackground","Background color of the progress bar that can show for long running operations.")),ZDe=ye("editorError.background",{dark:null,light:null,hc:null},C("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),T2=ye("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},C("editorError.foreground","Foreground color of error squigglies in the editor.")),fce=ye("editorError.border",{dark:null,light:null,hc:we.fromHex("#E47777").transparent(.8)},C("errorBorder","Border color of error boxes in the editor.")),XDe=ye("editorWarning.background",{dark:null,light:null,hc:null},C("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),vp=ye("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},C("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),IB=ye("editorWarning.border",{dark:null,light:null,hc:we.fromHex("#FFCC00").transparent(.8)},C("warningBorder","Border color of warning boxes in the editor.")),QDe=ye("editorInfo.background",{dark:null,light:null,hc:null},C("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Gh=ye("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},C("editorInfo.foreground","Foreground color of info squigglies in the editor.")),MG=ye("editorInfo.border",{dark:null,light:null,hc:we.fromHex("#3794FF").transparent(.8)},C("infoBorder","Border color of info boxes in the editor.")),JDe=ye("editorHint.foreground",{dark:we.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},C("editorHint.foreground","Foreground color of hint squigglies in the editor.")),eTe=ye("editorHint.border",{dark:null,light:null,hc:we.fromHex("#eeeeee").transparent(.8)},C("hintBorder","Border color of hint boxes in the editor.")),oc=ye("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:we.black},C("editorBackground","Editor background color.")),uR=ye("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:we.white},C("editorForeground","Editor default foreground color.")),qh=ye("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},C("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),bp=ye("editorWidget.foreground",{dark:zt,light:zt,hc:zt},C("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),QP=ye("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:go},C("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),tTe=ye("editorWidget.resizeBorder",{light:null,dark:null,hc:null},C("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),mJ=ye("quickInput.background",{dark:qh,light:qh,hc:qh},C("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),nTe=ye("quickInput.foreground",{dark:bp,light:bp,hc:bp},C("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),iTe=ye("quickInputTitle.background",{dark:new we(new fi(255,255,255,.105)),light:new we(new fi(0,0,0,.06)),hc:"#000000"},C("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),rTe=ye("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:we.white},C("pickerGroupForeground","Quick picker color for grouping labels.")),oTe=ye("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:we.white},C("pickerGroupBorder","Quick picker color for grouping borders.")),sTe=ye("keybindingLabel.background",{dark:new we(new fi(128,128,128,.17)),light:new we(new fi(221,221,221,.4)),hc:we.transparent},C("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),aTe=ye("keybindingLabel.foreground",{dark:we.fromHex("#CCCCCC"),light:we.fromHex("#555555"),hc:we.white},C("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),lTe=ye("keybindingLabel.border",{dark:new we(new fi(51,51,51,.6)),light:new we(new fi(204,204,204,.4)),hc:new we(new fi(111,195,223))},C("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),uTe=ye("keybindingLabel.bottomBorder",{dark:new we(new fi(68,68,68,.6)),light:new we(new fi(187,187,187,.4)),hc:new we(new fi(111,195,223))},C("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),o0=ye("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},C("editorSelectionBackground","Color of the editor selection.")),cTe=ye("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},C("editorSelectionForeground","Color of the selected text for high contrast.")),PG=ye("editor.inactiveSelectionBackground",{light:nr(o0,.5),dark:nr(o0,.5),hc:nr(o0,.5)},C("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),FG=ye("editor.selectionHighlightBackground",{light:bJ(o0,oc,.3,.6),dark:bJ(o0,oc,.3,.6),hc:null},C("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),dTe=ye("editor.selectionHighlightBorder",{light:null,dark:null,hc:el},C("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),hTe=ye("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},C("editorFindMatch","Color of the current search match.")),AH=ye("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},C("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),fTe=ye("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},C("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),gTe=ye("editor.findMatchBorder",{light:null,dark:null,hc:el},C("editorFindMatchBorder","Border color of the current search match.")),pTe=ye("editor.findMatchHighlightBorder",{light:null,dark:null,hc:el},C("findMatchHighlightBorder","Border color of the other search matches.")),mTe=ye("editor.findRangeHighlightBorder",{dark:null,light:null,hc:nr(el,.4)},C("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),_Te=ye("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},C("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),I1=ye("editorHoverWidget.background",{light:qh,dark:qh,hc:qh},C("hoverBackground","Background color of the editor hover.")),BG=ye("editorHoverWidget.foreground",{light:bp,dark:bp,hc:bp},C("hoverForeground","Foreground color of the editor hover.")),WG=ye("editorHoverWidget.border",{light:QP,dark:QP,hc:QP},C("hoverBorder","Border color of the editor hover.")),vTe=ye("editorHoverWidget.statusBarBackground",{dark:bce(I1,.2),light:vce(I1,.05),hc:qh},C("statusBarBackground","Background color of the editor hover status bar.")),gce=ye("editorLink.activeForeground",{dark:"#4E94CE",light:we.blue,hc:we.cyan},C("activeLinkForeground","Color of active links.")),Zb=ye("editorInlayHint.foreground",{dark:nr(D2,.8),light:nr(D2,.8),hc:D2},C("editorInlayHintForeground","Foreground color of inline hints")),Xb=ye("editorInlayHint.background",{dark:nr(x2,.6),light:nr(x2,.3),hc:x2},C("editorInlayHintBackground","Background color of inline hints")),bTe=ye("editorInlayHint.typeForeground",{dark:Zb,light:Zb,hc:Zb},C("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),CTe=ye("editorInlayHint.typeBackground",{dark:Xb,light:Xb,hc:Xb},C("editorInlayHintBackgroundTypes","Background color of inline hints for types")),yTe=ye("editorInlayHint.parameterForeground",{dark:Zb,light:Zb,hc:Zb},C("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),wTe=ye("editorInlayHint.parameterBackground",{dark:Xb,light:Xb,hc:Xb},C("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),STe=ye("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},C("editorLightBulbForeground","The color used for the lightbulb actions icon.")),ETe=ye("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),OH=new we(new fi(155,185,85,.2)),RH=new we(new fi(255,0,0,.2)),pce=ye("diffEditor.insertedTextBackground",{dark:OH,light:OH,hc:null},C("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),mce=ye("diffEditor.removedTextBackground",{dark:RH,light:RH,hc:null},C("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),LTe=ye("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},C("diffEditorInsertedOutline","Outline color for the text that got inserted.")),xTe=ye("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},C("diffEditorRemovedOutline","Outline color for text that got removed.")),DTe=ye("diffEditor.border",{dark:null,light:null,hc:go},C("diffEditorBorder","Border color between the two text editors.")),TTe=ye("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},C("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),ITe=ye("list.focusBackground",{dark:null,light:null,hc:null},C("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),kTe=ye("list.focusForeground",{dark:null,light:null,hc:null},C("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),NTe=ye("list.focusOutline",{dark:T1,light:T1,hc:el},C("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Qb=ye("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},C("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),s0=ye("list.activeSelectionForeground",{dark:we.white,light:we.white,hc:null},C("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JP=ye("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},C("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ATe=ye("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},C("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),OTe=ye("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),RTe=ye("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),MTe=ye("list.inactiveFocusBackground",{dark:null,light:null,hc:null},C("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),PTe=ye("list.inactiveFocusOutline",{dark:null,light:null,hc:null},C("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),FTe=ye("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},C("listHoverBackground","List/Tree background when hovering over items using the mouse.")),BTe=ye("list.hoverForeground",{dark:null,light:null,hc:null},C("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),WTe=ye("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},C("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),D9=ye("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:T1},C("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),VTe=ye("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:we.black},C("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),HTe=ye("listFilterWidget.outline",{dark:we.transparent,light:we.transparent,hc:"#f38518"},C("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),$Te=ye("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:go},C("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),zTe=ye("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},C("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),UTe=ye("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},C("tableColumnsBorder","Table border color between columns.")),jTe=ye("tree.tableOddRowsBackground",{dark:nr(zt,.04),light:nr(zt,.04),hc:null},C("tableOddRowsBackgroundColor","Background color for odd table rows.")),_J=ye("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,C("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),KTe=ye("quickInputList.focusForeground",{dark:s0,light:s0,hc:s0},C("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),GTe=ye("quickInputList.focusIconForeground",{dark:JP,light:JP,hc:JP},C("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),e4=ye("quickInputList.focusBackground",{dark:xA(_J,Qb),light:xA(_J,Qb),hc:null},C("quickInput.listFocusBackground","Quick picker background color for the focused item.")),qTe=ye("menu.border",{dark:null,light:null,hc:go},C("menuBorder","Border color of menus.")),YTe=ye("menu.foreground",{dark:pJ,light:zt,hc:pJ},C("menuForeground","Foreground color of menu items.")),ZTe=ye("menu.background",{dark:x9,light:x9,hc:x9},C("menuBackground","Background color of menu items.")),XTe=ye("menu.selectionForeground",{dark:s0,light:s0,hc:s0},C("menuSelectionForeground","Foreground color of the selected menu item in menus.")),QTe=ye("menu.selectionBackground",{dark:Qb,light:Qb,hc:Qb},C("menuSelectionBackground","Background color of the selected menu item in menus.")),JTe=ye("menu.selectionBorder",{dark:null,light:null,hc:el},C("menuSelectionBorder","Border color of the selected menu item in menus.")),eIe=ye("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:go},C("menuSeparatorBackground","Color of a separator menu item in menus.")),tIe=ye("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},C("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),kB=ye("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),_ce=ye("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),nIe=ye("editorOverviewRuler.unicodeForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerUnicodeForeground","Overview ruler marker color for highlighted unicode characters. The color must not be opaque so as not to hide underlying decorations."),!0),VG=ye("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),NB=ye("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},C("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),vJ=ye("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},C("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),iIe=ye("minimap.errorHighlight",{dark:new we(new fi(255,18,18,.7)),light:new we(new fi(255,18,18,.7)),hc:new we(new fi(255,50,50,1))},C("minimapError","Minimap marker color for errors.")),rIe=ye("minimap.warningHighlight",{dark:vp,light:vp,hc:IB},C("overviewRuleWarning","Minimap marker color for warnings.")),oIe=ye("minimap.background",{dark:null,light:null,hc:null},C("minimapBackground","Minimap background color.")),sIe=ye("minimap.foregroundOpacity",{dark:we.fromHex("#000f"),light:we.fromHex("#000f"),hc:we.fromHex("#000f")},C("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),aIe=ye("minimap.unicodeHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapUnicodeHighlight","Minimap marker color for highlighted unicode characters.")),lIe=ye("minimapSlider.background",{light:nr(fw,.5),dark:nr(fw,.5),hc:nr(fw,.5)},C("minimapSliderBackground","Minimap slider background color.")),uIe=ye("minimapSlider.hoverBackground",{light:nr(gw,.5),dark:nr(gw,.5),hc:nr(gw,.5)},C("minimapSliderHoverBackground","Minimap slider background color when hovering.")),cIe=ye("minimapSlider.activeBackground",{light:nr(pw,.5),dark:nr(pw,.5),hc:nr(pw,.5)},C("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),dIe=ye("problemsErrorIcon.foreground",{dark:T2,light:T2,hc:T2},C("problemsErrorIconForeground","The color used for the problems error icon.")),hIe=ye("problemsWarningIcon.foreground",{dark:vp,light:vp,hc:vp},C("problemsWarningIconForeground","The color used for the problems warning icon.")),fIe=ye("problemsInfoIcon.foreground",{dark:Gh,light:Gh,hc:Gh},C("problemsInfoIconForeground","The color used for the problems info icon."));function gIe(i,e){var t,n,r;switch(i.op){case 0:return(t=Ug(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=Ug(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(r=Ug(i.value,e))===null||r===void 0?void 0:r.transparent(i.factor);case 3:for(const a of i.values){const u=Ug(a,e);if(u)return u}return;case 5:return Ug(e.defines(i.if)?i.then:i.else,e);case 4:const o=Ug(i.value,e);if(!o)return;const s=Ug(i.background,e);return s?o.isDarkerThan(s)?we.getLighterColor(o,s,i.factor).transparent(i.transparency):we.getDarkerColor(o,s,i.factor).transparent(i.transparency):o.transparent(i.factor*i.transparency);default:throw vue()}}function vce(i,e){return{op:0,value:i,factor:e}}function bce(i,e){return{op:1,value:i,factor:e}}function nr(i,e){return{op:2,value:i,factor:e}}function xA(...i){return{op:3,values:i}}function bJ(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function Ug(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?we.fromHex(i):e.getColor(i);if(i instanceof we)return i;if(typeof i=="object")return gIe(i,e)}}const Cce="vscode://schemas/workbench-colors";let yce=Xr.as(LB.JSONContribution);yce.registerSchema(Cce,xB.getColorSchema());const CJ=new tr(()=>yce.notifySchemaChanged(Cce),200);xB.onDidChangeSchema(()=>{CJ.isScheduled()||CJ.schedule()});class HG{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new wce(this.x-pp.scrollX,this.y-pp.scrollY)}}class wce{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new HG(this.clientX+pp.scrollX,this.clientY+pp.scrollY)}}class pIe{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this._editorPagePositionBrand=void 0}}function Sce(i){const e=Us(i);return new pIe(e.left,e.top,e.width,e.height)}class k1 extends Ju{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new HG(this.posx,this.posy),this.editorPos=Sce(t)}}class mIe{constructor(e){this._editorViewDomNode=e}_create(e){return new k1(e,this._editorViewDomNode)}onContextMenu(e,t){return qe(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return qe(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return qe(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return dG(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,r){return hG(e,"mousemove",t,(s,a)=>n(s,this._create(a)),r)}}class _Ie{constructor(e){this._editorViewDomNode=e}_create(e){return new k1(e,this._editorViewDomNode)}onPointerUp(e,t){return qe(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return qe(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return yLe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,r){return hG(e,"pointermove",t,(s,a)=>n(s,this._create(a)),r)}}class vIe extends Oe{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new EC),this._keydownListener=null}startMonitoring(e,t,n,r,o){this._keydownListener=ts(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const s=(a,u)=>n(a,new k1(u,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,s,r,a=>{this._keydownListener.dispose(),o(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class Ece{constructor(e){this._editor=e,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new tr(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const r=this._counter++;n=new bIe(t,`dyn-rule-${r}`,hB(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class bIe{constructor(e,t,n,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElement=uc(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const r in t){const o=t[r];let s;typeof o=="object"?s=`var(${tce(o.id)})`:s=o;const a=CIe(r);n+=`
	${a}: ${s};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function CIe(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class cR extends Oe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,r=e.length;n<r;n++){let o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class vc extends cR{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class ag{static write(e,t){e instanceof ece,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],r=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[r++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(r);for(let s=0;s<r;s++)o[s]=n[r-s-1];return o}}class yIe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class wIe extends yIe{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class SIe{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class AB{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const o=e[n];t[n]=new AB(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}}class mw{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class EIe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class LIe{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class T9{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,r,o){const s=this._createRange();try{return s.setStart(e,t),s.setEnd(n,r),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(mw.compare);let t=[],n=0,r=e[0];for(let o=1,s=e.length;o<s;o++){const a=e[o];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[n++]=r,r=a)}return t[n++]=r,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];n[r]=new mw(Math.max(0,s.left-t),s.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,r,o,s,a){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),r=Math.min(d,Math.max(0,r)),t===r&&n===o&&n===0&&!e.children[t].firstChild){const m=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(m,s)}t!==r&&r>0&&o===0&&(r--,o=1073741824);let h=e.children[t].firstChild,f=e.children[r].firstChild;if((!h||!f)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!f&&o===0&&r>0&&(f=e.children[r-1].firstChild,o=1073741824)),!h||!f)return null;n=Math.min(h.textContent.length,Math.max(0,n)),o=Math.min(f.textContent.length,Math.max(0,o));const p=this._readClientRects(h,n,f,o,a);return this._createHorizontalRangesFromClientRects(p,s)}}class Nu{constructor(e,t,n,r){this.startColumn=e,this.endColumn=t,this.className=n,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,r=t.length;if(n!==r)return!1;for(let o=0;o<n;o++)if(!Nu._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const r=t+1,o=n+1,s=n-t,a=[];let u=0;for(const d of e)d.endColumn<=r||d.startColumn>=o||(a[u++]=new Nu(Math.max(1,d.startColumn-r+1),Math.min(s+1,d.endColumn-r+1),d.className,d.type));return a}static filter(e,t,n,r){if(e.length===0)return[];let o=[],s=0;for(let a=0,u=e.length;a<u;a++){const d=e[a],h=d.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(d.type===0||d.type===3))continue;const f=h.startLineNumber===t?h.startColumn:n,p=h.endLineNumber===t?h.endColumn:r;o[s++]=new Nu(f,p,d.inlineClassName,d.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Nu._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class yJ{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=r}}let xIe=class MH{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,r=e.length;n<r;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;n.push(new yJ(t,this.stopOffsets[r],this.classNames.join(" "),MH._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(n.push(new yJ(t,e-1,this.classNames.join(" "),MH._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,n);break}this.count++}};class DIe{static normalize(e,t){if(t.length===0)return[];let n=[];const r=new xIe;let o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];let d=u.startColumn,h=u.endColumn;const f=u.className,p=u.type===1?2:u.type===2?4:0;if(d>1){const b=e.charCodeAt(d-2);Vo(b)&&d--}if(h>1){const b=e.charCodeAt(h-2);Vo(b)&&h--}const m=d-1,v=h-2;o=r.consumeLowerThan(m,o,n),r.count===0&&(o=m),r.insert(v,f,p)}return r.consumeLowerThan(1073741824,o,n),n}}const wJ=typeof Buffer<"u";let I9;class OB{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return wJ&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new OB(e)}toString(){return wJ?this.buffer.toString():(I9||(I9=new TextDecoder),I9.decode(this.buffer))}}function TIe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function IIe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function Ch(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function yh(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function SJ(i,e){return i[e]}function EJ(i,e,t){i[t]=e}let k9;function Lce(){return k9||(k9=new TextDecoder("UTF-16LE")),k9}let N9;function kIe(){return N9||(N9=new TextDecoder("UTF-16BE")),N9}let A9;function xce(){return A9||(A9=Hle()?Lce():kIe()),A9}const Dce=typeof TextDecoder<"u";let N1,PH;Dce?(N1=i=>new AIe(i),PH=NIe):(N1=i=>new OIe,PH=Tce);function NIe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?Tce(i,e,t):Lce().decode(n)}function Tce(i,e,t){let n=[],r=0;for(let o=0;o<t;o++){const s=TIe(i,e);e+=2,n[r++]=String.fromCharCode(s)}return n.join("")}class AIe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return xce().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Vo(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class OIe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Jo{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class RIe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class LC{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,E,S,w,L){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=r,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=u,this.lineDecorations=d.sort(Nu.compare),this.tabSize=h,this.startVisibleColumn=f,this.spaceWidth=p,this.stopRenderingLineAfter=b,this.renderWhitespace=E==="all"?4:E==="boundary"?1:E==="selection"?2:E==="trailing"?3:0,this.renderControlCharacters=S,this.fontLigatures=w,this.selectionsOnLine=L&&L.sort((H,M)=>H.startOffset<M.startOffset?-1:1);const A=Math.abs(v-p),N=Math.abs(m-p);A<N?(this.renderSpaceWidth=v,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Nu.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class $G{constructor(e,t){this.partIndex=e,this.charIndex=t}}class If{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,r){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=r+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=If.getPartIndex(t),r=If.getCharIndex(t);return new $G(n,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let r=(e<<16|n<<0)>>>0,o=0,s=this.length-1;for(;o+1<s;){let b=o+s>>>1,E=this._data[b];if(E===r)return b;E>r?s=b:o=b}if(o===s)return o;let a=this._data[o],u=this._data[s];if(a===r)return o;if(u===r)return s;let d=If.getPartIndex(a),h=If.getCharIndex(a),f=If.getPartIndex(u),p;d!==f?p=t:p=If.getCharIndex(u);let m=n-h,v=p-n;return m<=v?o:s}}class FH{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function RB(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,r=0;for(const s of i.lineDecorations)(s.type===1||s.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(s.className),e.appendASCIIString('"></span>'),s.type===1&&(r|=1,t++),s.type===2&&(r|=2,n++));e.appendASCIIString("</span>");const o=new If(1,t+n);return o.setColumnInfo(1,t,0,0),new FH(o,!1,r)}return e.appendASCIIString("<span><span></span></span>"),new FH(new If(0,0),!1,0)}return zIe(FIe(i),e)}class MIe{constructor(e,t,n,r){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=r}}function MB(i){let e=N1(1e4),t=RB(i,e);return new MIe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class PIe{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=r,this.isOverflowing=o,this.parts=s,this.containsForeignElements=a,this.fauxIndentLength=u,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=f,this.spaceWidth=p,this.renderSpaceCharCode=m,this.renderWhitespace=v,this.renderControlCharacters=b}}function FIe(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let r=BIe(i.lineTokens,i.fauxIndentLength,n);i.renderControlCharacters&&!i.isBasicASCII&&(r=VIe(e,r)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(r=HIe(i,e,n,r));let o=0;if(i.lineDecorations.length>0){for(let s=0,a=i.lineDecorations.length;s<a;s++){const u=i.lineDecorations[s];u.type===3||u.type===1?o|=1:u.type===2&&(o|=2)}r=$Ie(e,n,r,i.lineDecorations)}return i.containsRTL||(r=WIe(e,r,!i.isBasicASCII||i.fontLigatures)),new PIe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,r,o,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function BIe(i,e,t){let n=[],r=0;e>0&&(n[r++]=new Jo(e,"",0));for(let o=0,s=i.getCount();o<s;o++){const a=i.getEndOffset(o);if(a<=e)continue;const u=i.getClassName(o);if(a>=t){n[r++]=new Jo(t,u,0);break}n[r++]=new Jo(a,u,0)}return n}function WIe(i,e,t){let n=0,r=[],o=0;if(t)for(let s=0,a=e.length;s<a;s++){const u=e[s],d=u.endIndex;if(n+50<d){const h=u.type,f=u.metadata;let p=-1,m=n;for(let v=n;v<d;v++)i.charCodeAt(v)===32&&(p=v),p!==-1&&v-m>=50&&(r[o++]=new Jo(p+1,h,f),m=p+1,p=-1);m!==d&&(r[o++]=new Jo(d,h,f))}else r[o++]=u;n=d}else for(let s=0,a=e.length;s<a;s++){const u=e[s],d=u.endIndex;let h=d-n;if(h>50){const f=u.type,p=u.metadata,m=Math.ceil(h/50);for(let v=1;v<m;v++){let b=n+v*50;r[o++]=new Jo(b,f,p)}r[o++]=new Jo(d,f,p)}else r[o++]=u;n=d}return r}function Ice(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function VIe(i,e){let t=[],n=new Jo(0,"",0),r=0;for(const o of e){const s=o.endIndex;for(;r<s;r++){const a=i.charCodeAt(r);Ice(a)&&(r>n.endIndex&&(n=new Jo(r,o.type,o.metadata),t.push(n)),n=new Jo(r+1,"mtkcontrol",o.metadata),t.push(n))}r>n.endIndex&&(n=new Jo(s,o.type,o.metadata),t.push(n))}return t}function HIe(i,e,t,n){const r=i.continuesWithWrappedLine,o=i.fauxIndentLength,s=i.tabSize,a=i.startVisibleColumn,u=i.useMonospaceOptimizations,d=i.selectionsOnLine,h=i.renderWhitespace===1,f=i.renderWhitespace===3,p=i.renderSpaceWidth!==i.spaceWidth;let m=[],v=0,b=0,E=n[b].type,S=n[b].endIndex;const w=n.length;let L=!1,A=Na(e),N;A===-1?(L=!0,A=t,N=t):N=Qf(e);let H=!1,M=0,R=d&&d[M],q=a%s;for(let $=o;$<t;$++){const I=e.charCodeAt($);R&&$>=R.endOffset&&(M++,R=d&&d[M]);let O;if($<A||$>N)O=!0;else if(I===9)O=!0;else if(I===32)if(h)if(H)O=!0;else{const B=$+1<t?e.charCodeAt($+1):0;O=B===32||B===9}else O=!0;else O=!1;if(O&&d&&(O=!!R&&R.startOffset<=$&&R.endOffset>$),O&&f&&(O=L||$>N),H){if(!O||!u&&q>=s){if(p){const B=v>0?m[v-1].endIndex:o;for(let W=B+1;W<=$;W++)m[v++]=new Jo(W,"mtkw",1)}else m[v++]=new Jo($,"mtkw",1);q=q%s}}else($===S||O&&$>o)&&(m[v++]=new Jo($,E,0),q=q%s);for(I===9?q=s:sg(I)?q+=2:q++,H=O;$===S&&(b++,b<w);)E=n[b].type,S=n[b].endIndex}let X=!1;if(H)if(r&&h){let $=t>0?e.charCodeAt(t-1):0,I=t>1?e.charCodeAt(t-2):0;$===32&&I!==32&&I!==9||(X=!0)}else X=!0;if(X)if(p){const $=v>0?m[v-1].endIndex:o;for(let I=$+1;I<=t;I++)m[v++]=new Jo(I,"mtkw",1)}else m[v++]=new Jo(t,"mtkw",1);else m[v++]=new Jo(t,E,0);return m}function $Ie(i,e,t,n){n.sort(Nu.compare);const r=DIe.normalize(i,n),o=r.length;let s=0,a=[],u=0,d=0;for(let f=0,p=t.length;f<p;f++){const m=t[f],v=m.endIndex,b=m.type,E=m.metadata;for(;s<o&&r[s].startOffset<v;){const S=r[s];if(S.startOffset>d&&(d=S.startOffset,a[u++]=new Jo(d,b,E)),S.endOffset+1<=v)d=S.endOffset+1,a[u++]=new Jo(d,b+" "+S.className,E|S.metadata),s++;else{d=v,a[u++]=new Jo(d,b+" "+S.className,E|S.metadata);break}}v>d&&(d=v,a[u++]=new Jo(d,b,E))}const h=t[t.length-1].endIndex;if(s<o&&r[s].startOffset===h)for(;s<o&&r[s].startOffset===h;){const f=r[s];a[u++]=new Jo(d,f.className,f.metadata),s++}return a}function zIe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,r=i.containsForeignElements,o=i.lineContent,s=i.len,a=i.isOverflowing,u=i.parts,d=i.fauxIndentLength,h=i.tabSize,f=i.startVisibleColumn,p=i.containsRTL,m=i.spaceWidth,v=i.renderSpaceCharCode,b=i.renderWhitespace,E=i.renderControlCharacters,S=new If(s+1,u.length);let w=!1,L=0,A=f,N=0,H=0,M=0,R=0;p?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let q=0,X=u.length;q<X;q++){R+=M;const $=u[q],I=$.endIndex,O=$.type,B=b!==0&&$.isWhitespace(),W=B&&!t&&(O==="mtkw"||!r),j=L===I&&$.isPseudoAfter();if(N=0,e.appendASCIIString('<span class="'),e.appendASCIIString(W?"mtkz":O),e.appendASCII(34),B){let U=0;{let G=L,z=A;for(;G<I;G++){const K=(o.charCodeAt(G)===9?h-z%h:1)|0;U+=K,G>=d&&(z+=K)}}for(W&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(m*U)),e.appendASCIIString('px"')),e.appendASCII(62);L<I;L++){S.setColumnInfo(L+1,q-H,N,R),H=0;const G=o.charCodeAt(L);let z;if(G===9){z=h-A%h|0,!n||z>1?e.write1(8594):e.write1(65515);for(let k=2;k<=z;k++)e.write1(160)}else z=1,e.write1(v);N+=z,L>=d&&(A+=z)}M=U}else{let U=0;for(e.appendASCII(62);L<I;L++){S.setColumnInfo(L+1,q-H,N,R),H=0;const G=o.charCodeAt(L);let z=1,k=1;switch(G){case 9:z=h-A%h,k=z;for(let K=1;K<=z;K++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:E?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:sg(G)&&k++,E&&G<32?e.write1(9216+G):E&&G===127?e.write1(9249):E&&Ice(G)?(e.appendASCIIString("[U+"),e.appendASCIIString(UIe(G)),e.appendASCIIString("]"),z=8):e.write1(G)}N+=z,U+=z,L>=d&&(A+=k)}M=U}j?H++:H=0,L>=s&&!w&&$.isPseudoAfter()&&(w=!0,S.setColumnInfo(L+1,q,N,R)),e.appendASCIIString("</span>")}return w||S.setColumnInfo(s+1,u.length-1,N,R),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new FH(S,p,r)}function UIe(i){return i.toString(16).toUpperCase().padStart(4,"0")}const jIe=function(){return Kh?!0:!(Qa||wl||Kc)}();let _w=!0;class LJ{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class xJ{constructor(e,t){this.themeType=t;const n=e.options,r=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Pf{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ii(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),s=this._options,a=Nu.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let u=null;if(s.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const p=n.selections;for(const m of p){if(m.endLineNumber<e||m.startLineNumber>e)continue;const v=m.startLineNumber===e?m.startColumn:o.minColumn,b=m.endLineNumber===e?m.endColumn:o.maxColumn;v<b&&(s.themeType===Xc.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new Nu(v,b,"inline-selected-text",0)):(u||(u=[]),u.push(new RIe(v-1,b-1))))}}const d=new LC(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==Du.OFF,u);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;r.appendASCIIString('<div style="top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;height:"),r.appendASCIIString(String(this._options.lineHeight)),r.appendASCIIString('px;" class="'),r.appendASCIIString(Pf.CLASS_NAME),r.appendASCIIString('">');const h=RB(d,r);r.appendASCIIString("</div>");let f=null;return _w&&jIe&&o.isBasicASCII&&s.useMonospaceOptimizations&&h.containsForeignElements===0&&o.content.length<300&&d.lineTokens.getCount()<100&&(f=new DM(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping)),f||(f=Nce(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=f,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof DM:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof DM?this._renderedViewLine.monospaceAssumptionsAreValid():_w}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof DM&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;let s=!1;o!==-1&&t>o+1&&n>o+1&&(s=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,r);return a&&a.length>0?new LIe(s,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}Pf.CLASS_NAME="view-line";class DM{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return _w;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),_w=!1),_w}toSlowRenderedLine(){return Nce(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,r){const o=this._getCharPosition(t),s=this._getCharPosition(n);return[new mw(o,s-o)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new $G(o,n),r)}}class kce{constructor(e,t,n,r,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,r);if(o===-1)return null;const s=this._readPixelOffset(this.domNode,e,n,r);return s===-1?null:[new mw(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,r)}_readVisibleRangesForRange(e,t,n,r,o){if(n===r){const s=this._readPixelOffset(e,t,n,o);return s===-1?null:[new mw(s,0)]}else return this._readRawVisibleRangesForRange(e,n,r,o)}_readPixelOffset(e,t,n,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const s=this._actualReadPixelOffset(e,t,n,r);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,r)}_actualReadPixelOffset(e,t,n,r){if(this._characterMapping.length===0){const u=T9.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r.clientRectDeltaLeft,r.endNode);return!u||u.length===0?-1:u[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const o=this._characterMapping.getDomPosition(n),s=T9.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,r.clientRectDeltaLeft,r.endNode);if(!s||s.length===0)return-1;const a=s[0].left;if(this.input.isBasicASCII){const u=this._characterMapping.getAbsoluteOffset(n),d=Math.round(this.input.spaceWidth*u);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,r){if(t===1&&n===this._characterMapping.length)return[new mw(0,this.getWidth())];const o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(n);return T9.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,r.clientRectDeltaLeft,r.endNode)}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new $G(o,n),r)}}class KIe extends kce{_readVisibleRangesForRange(e,t,n,r,o){const s=super._readVisibleRangesForRange(e,t,n,r,o);if(!s||s.length===0||n===r||n===1&&r===this._characterMapping.length)return s;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,o);if(a!==-1){const u=s[s.length-1];u.left<a&&(u.width=a-u.left)}}return s}}const Nce=function(){return n0?GIe:qIe}();function GIe(i,e,t,n,r){return new KIe(i,e,t,n,r)}function qIe(i,e,t,n,r){return new kce(i,e,t,n,r)}var Sl;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Sl||(Sl={}));var Cl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Cl||(Cl={}));class t4{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Qc(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class DA{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Jb;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Jb||(Jb={}));class My{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class BH{constructor(e,t){this.top=e,this.endColumn=t}}class O9{constructor(e,t,n,r,o,s){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=o,this._isTracked=s}}class YIe{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function TM(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Ds{constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${TM(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${TM(this.oldText)}")`:`(replace@${this.oldPosition} "${TM(this.oldText)}" with "${TM(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const r=t.length;yh(e,r,n),n+=4;for(let o=0;o<r;o++)IIe(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=Ch(e,t);return t+=4,PH(e,t,n)}writeSize(){return 4+4+Ds._writeStringSize(this.oldText)+Ds._writeStringSize(this.newText)}write(e,t){return yh(e,this.oldPosition,t),t+=4,yh(e,this.newPosition,t),t+=4,t=Ds._writeString(e,this.oldText,t),t=Ds._writeString(e,this.newText,t),t}static read(e,t,n){const r=Ch(e,t);t+=4;const o=Ch(e,t);t+=4;const s=Ds._readString(e,t);t+=Ds._writeStringSize(s);const a=Ds._readString(e,t);return t+=Ds._writeStringSize(a),n.push(new Ds(r,s,o,a)),t}}function ZIe(i,e){return i===null||i.length===0?e:new Ef(i,e).compress()}class Ef{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldEnd<=n.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(n.newEnd<=r.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldPosition<n.newPosition){const[d,h]=Ef._splitCurr(r,n.newPosition-r.oldPosition);this._acceptCurr(d),r=h;continue}if(n.newPosition<r.oldPosition){const[d,h]=Ef._splitPrev(n,r.oldPosition-n.newPosition);this._acceptPrev(d),n=h;continue}let a,u;if(r.oldEnd===n.newEnd)a=n,u=r,n=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<n.newEnd){const[d,h]=Ef._splitPrev(n,r.oldLength);a=d,u=r,n=h,r=this._getCurr(++t)}else{const[d,h]=Ef._splitCurr(r,n.newLength);a=n,u=d,n=this._getPrev(++e),r=h}this._result[this._resultLen++]=new Ds(a.oldPosition,a.oldText,u.newPosition,u.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=u.newLength-u.oldLength}const o=Ef._merge(this._result);return Ef._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Ef._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ef._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Ds(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Ds(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),r=e.newText.substr(t);return[new Ds(e.oldPosition,e.oldText,e.newPosition,n),new Ds(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new Ds(e.oldPosition,n,e.newPosition,e.newText),new Ds(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,r=e[0];for(let o=1;o<e.length;o++){const s=e[o];r.oldEnd===s.oldPosition?r=new Ds(r.oldPosition,r.oldText+s.oldText,r.newPosition,r.newText+s.newText):(t[n++]=r,r=s)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let r=0;r<e.length;r++){const o=e[r];o.oldText!==o.newText&&(t[n++]=o)}return t}}function XIe(i){return i.replace(/[\\/]/g,Do.sep)}function QIe(i){return i.indexOf("/")===-1&&(i=XIe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function JIe(i,e,t,n=qb){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!bG(i,e))return!1;if(e.length===i.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,i.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function eke(i){return i>=65&&i<=90||i>=97&&i<=122}function tke(i){const e=lG(i);return As?i.length>3?!1:Ace(e)&&(i.length===2||e.charCodeAt(2)===92):e===Do.sep}function Ace(i,e){return(e!==void 0?e:As)?eke(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function n4(i){return SF(i,!0)}class nke{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:wA(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return rn.joinPath(e,...t)}basenameOrAuthority(e){return fc(e)||e.authority}basename(e){return Do.basename(e.path)}extname(e){return Do.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===In.file?t=rn.file(Qle(n4(e))).path:(t=Do.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===In.file?t=rn.file(lG(n4(e))).path:t=Do.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===In.file){const n=rn.file(lLe(n4(e),t));return e.with({authority:n.authority,path:n.path})}return t=QIe(t),e.with({path:Do.resolve(e.path,t)})}}const la=new nke(()=>!1),Oce=la.isEqual.bind(la),Rce=la.basenameOrAuthority.bind(la),fc=la.basename.bind(la),ike=la.extname.bind(la),zG=la.dirname.bind(la),rke=la.joinPath.bind(la),oke=la.normalizePath.bind(la),DJ=la.resolvePath.bind(la);var w0;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(s=>{const[a,u]=s.split(":");a&&u&&n.set(a,u)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(i.META_DATA_MIME,o),n}i.parseMetaData=e})(w0||(w0={}));function qC(i){return i.toString()}class qo{constructor(e,t,n,r,o,s,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=o,this.afterCursorState=s,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),r=WH(e);return new qo(n,n,r,r,t,t,[])}append(e,t,n,r,o){t.length>0&&(this.changes=ZIe(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(yh(e,t?t.length:0,n),n+=4,t)for(const r of t)yh(e,r.selectionStartLineNumber,n),n+=4,yh(e,r.selectionStartColumn,n),n+=4,yh(e,r.positionLineNumber,n),n+=4,yh(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const r=Ch(e,t);t+=4;for(let o=0;o<r;o++){const s=Ch(e,t);t+=4;const a=Ch(e,t);t+=4;const u=Ch(e,t);t+=4;const d=Ch(e,t);t+=4,n.push(new wt(s,a,u,d))}return t}serialize(){let e=10+qo._writeSelectionsSize(this.beforeCursorState)+qo._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let n=0;yh(t,this.beforeVersionId,n),n+=4,yh(t,this.afterVersionId,n),n+=4,EJ(t,this.beforeEOL,n),n+=1,EJ(t,this.afterEOL,n),n+=1,n=qo._writeSelections(t,this.beforeCursorState,n),n=qo._writeSelections(t,this.afterCursorState,n),yh(t,this.changes.length,n),n+=4;for(const r of this.changes)n=r.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const r=Ch(t,n);n+=4;const o=Ch(t,n);n+=4;const s=SJ(t,n);n+=1;const a=SJ(t,n);n+=1;const u=[];n=qo._readSelections(t,n,u);const d=[];n=qo._readSelections(t,n,d);const h=Ch(t,n);n+=4;const f=[];for(let p=0;p<h;p++)n=Ds.read(t,n,f);return new qo(r,o,s,a,u,d,f)}}class Mce{constructor(e,t){this.model=e,this._data=qo.create(e,t)}get type(){return 0}get resource(){return rn.isUri(this.model)?this.model:this.model.uri}get label(){return C("edit","Typing")}toString(){return(this._data instanceof qo?this._data:qo.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(rn.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof qo}append(e,t,n,r,o){this._data instanceof qo&&this._data.append(e,t,n,r,o)}close(){this._data instanceof qo&&(this._data=this._data.serialize())}open(){this._data instanceof qo||(this._data=qo.deserialize(this._data))}undo(){if(rn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qo&&(this._data=this._data.serialize());const e=qo.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(rn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qo&&(this._data=this._data.serialize());const e=qo.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof qo&&(this._data=this._data.serialize()),this._data.byteLength+168}}class ske{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const r=qC(n.resource);this._editStackElementsMap.set(r,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=qC(e);return this._editStackElementsMap.has(t)}setModel(e){const t=qC(rn.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=qC(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,o){const s=qC(e.uri);this._editStackElementsMap.get(s).append(e,t,n,r,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=qC(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${fc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function WH(i){return i.getEOL()===`
`?0:1}function Qg(i){return i?i instanceof Mce||i instanceof ske:!1}class UG{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Qg(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Qg(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Qg(t)&&t.canAppend(this._model))return t;const n=new Mce(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],WH(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const r=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),s=UG._computeCursorState(n,o),a=o.map((u,d)=>({index:d,textChange:u.textChange}));return a.sort((u,d)=>u.textChange.oldPosition===d.textChange.oldPosition?u.index-d.index:u.textChange.oldPosition-d.textChange.oldPosition),r.append(this._model,a.map(u=>u.textChange),WH(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return gn(n),null}}}class ake{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function lke(i,e,t,n,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=i.charCodeAt(o),m=t.charCodeAt(o);if(p!==m)break}let s=0,a=0;for(let p=o;p<e;p++)i.charCodeAt(p)===32?s++:a++;let u=0,d=0;for(let p=o;p<n;p++)t.charCodeAt(p)===32?u++:d++;if(s>0&&a>0||u>0&&d>0)return;let h=Math.abs(a-d),f=Math.abs(s-u);if(h===0){r.spacesDiff=f,f>0&&0<=u-1&&u-1<i.length&&u<t.length&&t.charCodeAt(u)!==32&&i.charCodeAt(u-1)===32&&i.charCodeAt(i.length-1)===44&&(r.looksLikeAlignment=!0);return}if(f%h===0){r.spacesDiff=f/h;return}}function TJ(i,e,t){const n=Math.min(i.getLineCount(),1e4);let r=0,o=0,s="",a=0;const u=[2,4,6,8,3,5,7],d=8;let h=[0,0,0,0,0,0,0,0,0],f=new ake;for(let v=1;v<=n;v++){let b=i.getLineLength(v),E=i.getLineContent(v);const S=b<=65536;let w=!1,L=0,A=0,N=0;for(let M=0,R=b;M<R;M++){let q=S?E.charCodeAt(M):i.getLineCharCode(v,M);if(q===9)N++;else if(q===32)A++;else{w=!0,L=M;break}}if(!w||(N>0?r++:A>1&&o++,lke(s,a,E,L,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;let H=f.spacesDiff;H<=d&&h[H]++,s=E,a=L}let p=t;r!==o&&(p=r<o);let m=e;if(p){let v=p?0:.1*n;u.forEach(b=>{let E=h[b];E>v&&(v=E,m=b)}),m===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(m=2)}return{insertSpaces:p,tabSize:m}}function $a(i){return(i.metadata&1)>>>0}function sr(i,e){i.metadata=i.metadata&254|e<<0}function Ns(i){return(i.metadata&2)>>>1===1}function er(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function Pce(i){return(i.metadata&4)>>>2===1}function IJ(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function uke(i){return(i.metadata&24)>>>3}function kJ(i,e){i.metadata=i.metadata&231|e<<3}function cke(i){return(i.metadata&32)>>>5===1}function NJ(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class Fce{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,sr(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,IJ(this,!1),kJ(this,1),NJ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,er(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;let t=this.options.className;IJ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),kJ(this,this.options.stickiness),NJ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const wn=new Fce(null,0,0);wn.parent=wn;wn.left=wn;wn.right=wn;sr(wn,0);class R9{constructor(){this.root=wn,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,o){return this.root===wn?[]:vke(this,e,t,n,r,o)}search(e,t,n){return this.root===wn?[]:_ke(this,e,t,n)}collectNodesFromOwner(e){return pke(this,e)}collectNodesPostOrder(){return mke(this)}insert(e){AJ(this,e),this._normalizeDeltaIfNecessary()}delete(e){OJ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const o=n.start+r,s=n.end+r;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,r){const o=fke(this,e,e+t);for(let s=0,a=o.length;s<a;s++){const u=o[s];OJ(this,u)}this._normalizeDeltaIfNecessary(),gke(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){const u=o[s];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,hke(u,e,e+t,n,r),u.maxEnd=u.end,AJ(this,u)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,dke(this))}}function dke(i){let e=i.root,t=0;for(;e!==wn;){if(e.left!==wn&&!Ns(e.left)){e=e.left;continue}if(e.right!==wn&&!Ns(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,S0(e),er(e,!0),er(e.left,!1),er(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}er(i.root,!1)}function YC(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function hke(i,e,t,n,r){const o=uke(i),s=o===0||o===2,a=o===1||o===2,u=t-e,d=n,h=Math.min(u,d),f=i.start;let p=!1;const m=i.end;let v=!1;e<=f&&m<=t&&cke(i)&&(i.start=e,p=!0,i.end=e,v=!0);{const E=r?1:u>0?2:0;!p&&YC(f,s,e,E)&&(p=!0),!v&&YC(m,a,e,E)&&(v=!0)}if(h>0&&!r){const E=u>d?2:0;!p&&YC(f,s,e+h,E)&&(p=!0),!v&&YC(m,a,e+h,E)&&(v=!0)}{const E=r?1:0;!p&&YC(f,s,t,E)&&(i.start=e+d,p=!0),!v&&YC(m,a,t,E)&&(i.end=e+d,v=!0)}const b=d-u;p||(i.start=Math.max(0,f+b)),v||(i.end=Math.max(0,m+b)),i.start>i.end&&(i.end=i.start)}function fke(i,e,t){let n=i.root,r=0,o=0,s=0,a=0,u=[],d=0;for(;n!==wn;){if(Ns(n)){er(n.left,!1),er(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),n=n.parent;continue}if(!Ns(n.left)){if(o=r+n.maxEnd,o<e){er(n,!0);continue}if(n.left!==wn){n=n.left;continue}}if(s=r+n.start,s>t){er(n,!0);continue}if(a=r+n.end,a>=e&&(n.setCachedOffsets(s,a,0),u[d++]=n),er(n,!0),n.right!==wn&&!Ns(n.right)){r+=n.delta,n=n.right;continue}}return er(i.root,!1),u}function gke(i,e,t,n){let r=i.root,o=0,s=0,a=0;const u=n-(t-e);for(;r!==wn;){if(Ns(r)){er(r.left,!1),er(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),S0(r),r=r.parent;continue}if(!Ns(r.left)){if(s=o+r.maxEnd,s<e){er(r,!0);continue}if(r.left!==wn){r=r.left;continue}}if(a=o+r.start,a>t){r.start+=u,r.end+=u,r.delta+=u,(r.delta<-1073741824||r.delta>1073741824)&&(i.requestNormalizeDelta=!0),er(r,!0);continue}if(er(r,!0),r.right!==wn&&!Ns(r.right)){o+=r.delta,r=r.right;continue}}er(i.root,!1)}function pke(i,e){let t=i.root,n=[],r=0;for(;t!==wn;){if(Ns(t)){er(t.left,!1),er(t.right,!1),t=t.parent;continue}if(t.left!==wn&&!Ns(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[r++]=t),er(t,!0),t.right!==wn&&!Ns(t.right)){t=t.right;continue}}return er(i.root,!1),n}function mke(i){let e=i.root,t=[],n=0;for(;e!==wn;){if(Ns(e)){er(e.left,!1),er(e.right,!1),e=e.parent;continue}if(e.left!==wn&&!Ns(e.left)){e=e.left;continue}if(e.right!==wn&&!Ns(e.right)){e=e.right;continue}t[n++]=e,er(e,!0)}return er(i.root,!1),t}function _ke(i,e,t,n){let r=i.root,o=0,s=0,a=0,u=[],d=0;for(;r!==wn;){if(Ns(r)){er(r.left,!1),er(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==wn&&!Ns(r.left)){r=r.left;continue}s=o+r.start,a=o+r.end,r.setCachedOffsets(s,a,n);let h=!0;if(e&&r.ownerId&&r.ownerId!==e&&(h=!1),t&&Pce(r)&&(h=!1),h&&(u[d++]=r),er(r,!0),r.right!==wn&&!Ns(r.right)){o+=r.delta,r=r.right;continue}}return er(i.root,!1),u}function vke(i,e,t,n,r,o){let s=i.root,a=0,u=0,d=0,h=0,f=[],p=0;for(;s!==wn;){if(Ns(s)){er(s.left,!1),er(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!Ns(s.left)){if(u=a+s.maxEnd,u<e){er(s,!0);continue}if(s.left!==wn){s=s.left;continue}}if(d=a+s.start,d>t){er(s,!0);continue}if(h=a+s.end,h>=e){s.setCachedOffsets(d,h,o);let m=!0;n&&s.ownerId&&s.ownerId!==n&&(m=!1),r&&Pce(s)&&(m=!1),m&&(f[p++]=s)}if(er(s,!0),s.right!==wn&&!Ns(s.right)){a+=s.delta,s=s.right;continue}}return er(i.root,!1),f}function AJ(i,e){if(i.root===wn)return e.parent=wn,e.left=wn,e.right=wn,sr(e,0),i.root=e,i.root;bke(i,e),Sv(e.parent);let t=e;for(;t!==i.root&&$a(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;$a(n)===1?(sr(t.parent,0),sr(n,0),sr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,I2(i,t)),sr(t.parent,0),sr(t.parent.parent,1),k2(i,t.parent.parent))}else{const n=t.parent.parent.left;$a(n)===1?(sr(t.parent,0),sr(n,0),sr(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,k2(i,t)),sr(t.parent,0),sr(t.parent.parent,1),I2(i,t.parent.parent))}return sr(i.root,0),e}function bke(i,e){let t=0,n=i.root;const r=e.start,o=e.end;for(;;)if(yke(r,o,n.start+t,n.end+t)<0)if(n.left===wn){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===wn){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=wn,e.right=wn,sr(e,1)}function OJ(i,e){let t,n;if(e.left===wn?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===wn?(t=e.left,n=e):(n=Cke(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,sr(t,0),e.detach(),M9(),S0(t),i.root.parent=wn;return}let r=$a(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,sr(n,$a(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==wn&&(n.left.parent=n),n.right!==wn&&(n.right.parent=n)),e.detach(),r){Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent)),M9();return}Sv(t),Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent));let o;for(;t!==i.root&&$a(t)===0;)t===t.parent.left?(o=t.parent.right,$a(o)===1&&(sr(o,0),sr(t.parent,1),I2(i,t.parent),o=t.parent.right),$a(o.left)===0&&$a(o.right)===0?(sr(o,1),t=t.parent):($a(o.right)===0&&(sr(o.left,0),sr(o,1),k2(i,o),o=t.parent.right),sr(o,$a(t.parent)),sr(t.parent,0),sr(o.right,0),I2(i,t.parent),t=i.root)):(o=t.parent.left,$a(o)===1&&(sr(o,0),sr(t.parent,1),k2(i,t.parent),o=t.parent.left),$a(o.left)===0&&$a(o.right)===0?(sr(o,1),t=t.parent):($a(o.left)===0&&(sr(o.right,0),sr(o,1),I2(i,o),o=t.parent.left),sr(o,$a(t.parent)),sr(t.parent,0),sr(o.left,0),k2(i,t.parent),t=i.root));sr(t,0),M9()}function Cke(i){for(;i.left!==wn;)i=i.left;return i}function M9(){wn.parent=wn,wn.delta=0,wn.start=0,wn.end=0}function I2(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==wn&&(t.left.parent=e),t.parent=e.parent,e.parent===wn?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,S0(e),S0(t)}function k2(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==wn&&(t.right.parent=e),t.parent=e.parent,e.parent===wn?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,S0(e),S0(t)}function Bce(i){let e=i.end;if(i.left!==wn){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==wn){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function S0(i){i.maxEnd=Bce(i)}function Sv(i){for(;i!==wn;){const e=Bce(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function yke(i,e,t,n){return i===t?e-n:i-t}let VH=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ln)return jG(this.right);let e=this;for(;e.parent!==ln&&e.parent.left!==e;)e=e.parent;return e.parent===ln?ln:e.parent}prev(){if(this.left!==ln)return Wce(this.left);let e=this;for(;e.parent!==ln&&e.parent.right!==e;)e=e.parent;return e.parent===ln?ln:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const ln=new VH(null,0);ln.parent=ln;ln.left=ln;ln.right=ln;ln.color=0;function jG(i){for(;i.left!==ln;)i=i.left;return i}function Wce(i){for(;i.right!==ln;)i=i.right;return i}function KG(i){return i===ln?0:i.size_left+i.piece.length+KG(i.right)}function GG(i){return i===ln?0:i.lf_left+i.piece.lineFeedCnt+GG(i.right)}function P9(){ln.parent=ln}function N2(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ln&&(t.left.parent=e),t.parent=e.parent,e.parent===ln?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function A2(i,e){let t=e.left;e.left=t.right,t.right!==ln&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ln?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function IM(i,e){let t,n;if(e.left===ln?(n=e,t=n.right):e.right===ln?(n=e,t=n.left):(n=jG(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),P9(),i.root.parent=ln;return}let r=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,t2(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,t2(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ln&&(n.left.parent=n),n.right!==ln&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,t2(i,n)),e.detach(),t.parent.left===t){let s=KG(t),a=GG(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let u=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,$g(i,t.parent,u,d)}}if(t2(i,t.parent),r){P9();return}let o;for(;t!==i.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,N2(i,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,A2(i,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,N2(i,t.parent),t=i.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,A2(i,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,N2(i,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,A2(i,t.parent),t=i.root));t.color=0,P9()}function RJ(i,e){for(t2(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,N2(i,e)),e.parent.color=0,e.parent.parent.color=1,A2(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,A2(i,e)),e.parent.color=0,e.parent.parent.color=1,N2(i,e.parent.parent))}i.root.color=0}function $g(i,e,t,n){for(;e!==i.root&&e!==ln;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function t2(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=KG(e.left)-e.size_left,n=GG(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}function zF(i){return i<0?0:i>255?255:i|0}function ZC(i){return i<0?0:i>4294967295?4294967295:i|0}class $S{constructor(e){let t=zF(e);this._defaultValue=t,this._asciiMap=$S._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=zF(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Py{constructor(){this._actual=new $S(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class wke extends $S{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function Ske(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const gc=Ske(i=>new wke(i)),Eke=999;class hb{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Lke(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=yue(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new xke(t,this.wordSeparators?gc(this.wordSeparators):null,n?this.searchString:null)}}function Lke(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const r=i.charCodeAt(e);if(r===110||r===114||r===87)return!0}return!1}class xke{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function Cb(i,e,t){if(!t)return new DA(i,null);let n=[];for(let r=0,o=e.length;r<o;r++)n[r]=e[r];return new DA(i,n)}class MJ{constructor(e){let t=[],n=0;for(let r=0,o=e.length;r<o;r++)e.charCodeAt(r)===10&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){const o=n+((r-n)/2>>0);t[o]>=e?r=o-1:t[o+1]>=e?(n=o,r=o):n=o+1}return n+1}}class kM{static findMatches(e,t,n,r,o){const s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new Fy(s.wordSeparators,s.regex),r,o):this._doFindMatchesLineByLine(e,n,s,r,o):[]}static _getMultilineMatchRange(e,t,n,r,o,s){let a,u=0;r?(u=r.findLineFeedCountBeforeOffset(o),a=t+o+u):a=t+o;let d;if(r){let m=r.findLineFeedCountBeforeOffset(o+s.length)-u;d=a+s.length+m}else d=a+s.length;const h=e.getPositionAt(a),f=e.getPositionAt(d);return new Q(h.lineNumber,h.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,n,r,o){const s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),u=e.getEOL()===`\r
`?new MJ(a):null,d=[];let h=0,f;for(n.reset(0);f=n.next(a);)if(d[h++]=Cb(this._getMultilineMatchRange(e,s,a,u,f.index,f[0]),f,r),h>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,r,o){const s=[];let a=0;if(t.startLineNumber===t.endLineNumber){const d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,r,o),s}const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,s,r,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,r,o);if(a<o){const d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,r,o)}return s}static _findMatchesInLine(e,t,n,r,o,s,a,u){const d=e.wordSeparators;if(!a&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=t.length;let b=-m;for(;(b=t.indexOf(p,b+m))!==-1;)if((!d||qG(d,t,v,b,m))&&(s[o++]=new DA(new Q(n,b+1+r,n,b+1+m+r),null),o>=u))return o;return o}const h=new Fy(e.wordSeparators,e.regex);let f;h.reset(0);do if(f=h.next(t),f&&(s[o++]=Cb(new Q(n,f.index+1+r,n,f.index+1+f[0].length+r),f,a),o>=u))return o;while(f);return o}static findNextMatch(e,t,n,r){const o=t.parseSearchRequest();if(!o)return null;const s=new Fy(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,r):this._doFindNextMatchLineByLine(e,n,s,r)}static _doFindNextMatchMultiline(e,t,n,r){const o=new Ee(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),u=e.getValueInRange(new Q(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new MJ(u):null;n.reset(t.column-1);let h=n.next(u);return h?Cb(this._getMultilineMatchRange(e,s,u,d,h.index,h[0]),h,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Ee(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),u=this._findFirstMatchInLine(n,a,s,t.column,r);if(u)return u;for(let d=1;d<=o;d++){const h=(s+d-1)%o,f=e.getLineContent(h+1),p=this._findFirstMatchInLine(n,f,h+1,1,r);if(p)return p}return null}static _findFirstMatchInLine(e,t,n,r,o){e.reset(r-1);const s=e.next(t);return s?Cb(new Q(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,r){const o=t.parseSearchRequest();if(!o)return null;const s=new Fy(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,r):this._doFindPreviousMatchLineByLine(e,n,s,r)}static _doFindPreviousMatchMultiline(e,t,n,r){const o=this._doFindMatchesMultiline(e,new Q(1,1,t.lineNumber,t.column),n,r,10*Eke);if(o.length>0)return o[o.length-1];const s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Ee(s,e.getLineMaxColumn(s)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),u=this._findLastMatchInLine(n,a,s,r);if(u)return u;for(let d=1;d<=o;d++){const h=(o+s-d-1)%o,f=e.getLineContent(h+1),p=this._findLastMatchInLine(n,f,h+1,r);if(p)return p}return null}static _findLastMatchInLine(e,t,n,r){let o=null,s;for(e.reset(0);s=e.next(t);)o=Cb(new Q(n,s.index+1,n,s.index+1+s[0].length),s,r);return o}}function Dke(i,e,t,n,r){if(n===0)return!0;const o=e.charCodeAt(n-1);if(i.get(o)!==0||o===13||o===10)return!0;if(r>0){const s=e.charCodeAt(n);if(i.get(s)!==0)return!0}return!1}function Tke(i,e,t,n,r){if(n+r===t)return!0;const o=e.charCodeAt(n+r);if(i.get(o)!==0||o===13||o===10)return!0;if(r>0){const s=e.charCodeAt(n+r-1);if(i.get(s)!==0)return!0}return!1}function qG(i,e,t,n,r){return Dke(i,e,t,n,r)&&Tke(i,e,t,n,r)}class Fy{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const r=n.index,o=n[0].length;if(r===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Fb(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=o,!this._wordSeparators||qG(this._wordSeparators,e,t,r,o))return n}while(n);return null}}const Rg=65535;function Vce(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class Ike{constructor(e,t,n,r,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=o}}function jg(i,e=!0){let t=[0],n=1;for(let r=0,o=i.length;r<o;r++){const s=i.charCodeAt(r);s===13?r+1<o&&i.charCodeAt(r+1)===10?(t[n++]=r+2,r++):t[n++]=r+1:s===10&&(t[n++]=r+1)}return e?Vce(t):t}function kke(i,e){i.length=0,i[0]=0;let t=1,n=0,r=0,o=0,s=!0;for(let u=0,d=e.length;u<d;u++){const h=e.charCodeAt(u);h===13?u+1<d&&e.charCodeAt(u+1)===10?(o++,i[t++]=u+2,u++):(n++,i[t++]=u+1):h===10?(r++,i[t++]=u+1):s&&h!==9&&(h<32||h>126)&&(s=!1)}const a=new Ike(Vce(i),n,r,o,s);return i.length=0,a}class ll{constructor(e,t,n,r,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=o}}class yb{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Nke{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ln&&e.iterate(e.root,n=>(n!==ln&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Ake{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let o=n[r];if(o.node.parent===null||o.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){let r=[];for(const o of n)o!==null&&r.push(o);this._cache=r}}}class Oke{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new yb("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ln,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=jg(e[o].buffer));let a=new ll(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),r=this.rbInsertRight(r,a)}this._searchCache=new Ake(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Rg,n=t-Math.floor(t/3),r=n*2,o="",s=0,a=[];if(this.iterate(this.root,u=>{let d=this.getNodeContent(u),h=d.length;if(s<=n||s+h<r)return o+=d,s+=h,!0;let f=o.replace(/\r\n|\r|\n/g,e);return a.push(new yb(f,jg(f))),o=d,s=h,!0}),s>0){let u=o.replace(/\r\n|\r|\n/g,e);a.push(new yb(u,jg(u)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Nke(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==ln;)if(r.left!==ln&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;let o=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=o+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,r=e;for(;t!==ln;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=r-s;return new Ee(n+1,a+1)}return new Ee(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===ln){let o=this.getOffsetAt(n+1,1),s=r-e-o;return new Ee(n+1,s+1)}else t=t.right;return new Ee(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,u=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return u.substring(d+e.remainder,d+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=r.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==ln;){let a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(u,u+t.remainder);break}else s+=a.substr(u,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",r=!1;return this.iterate(this.root,o=>{if(o===ln)return!0;const s=o.piece;let a=s.length;if(a===0)return!0;const u=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,h=s.start.line,f=s.end.line;let p=d[h]+s.start.column;if(r&&(u.charCodeAt(p)===10&&(p++,a--),e[t++]=n,n="",r=!1,a===0))return!0;if(h===f)return!this._EOLNormalized&&u.charCodeAt(p+a-1)===13?(r=!0,n+=u.substr(p,a-1)):n+=u.substr(p,a),!0;n+=this._EOLNormalized?u.substring(p,Math.max(p,d[h+1]-this._EOLLength)):u.substring(p,d[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=h+1;m<f;m++)n=this._EOLNormalized?u.substring(d[m],d[m+1]-this._EOLLength):u.substring(d[m],d[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&u.charCodeAt(d[f]+s.end.column-1)===13?(r=!0,s.end.column===0?t--:n=u.substr(d[f],s.end.column-1)):n=u.substr(d[f],s.end.column),!0}),r&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{let t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,o,s,a,u,d,h,f){let p=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),v=this.offsetInBuffer(e.piece.bufferIndex,o),b=this.offsetInBuffer(e.piece.bufferIndex,s),E,S={line:0,column:0},w,L;t._wordSeparators?(w=p.buffer.substring(v,b),L=A=>A+v,t.reset(0)):(w=p.buffer,L=A=>A,t.reset(v));do if(E=t.next(w),E){if(L(E.index)>=b)return h;this.positionInBuffer(e,L(E.index)-m,S);let A=this.getLineFeedCnt(e.piece.bufferIndex,o,S),N=S.line===o.line?S.column-o.column+r:S.column+1,H=N+E[0].length;if(f[h++]=Cb(new Q(n+A,N,n+A,H),E,u),L(E.index)+E[0].length>=b||h>=d)return h}while(E);return h}findMatchesLineByLine(e,t,n,r){const o=[];let s=0;const a=new Fy(t.wordSeparators,t.regex);let u=this.nodeAt2(e.startLineNumber,e.startColumn);if(u===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let h=this.positionInBuffer(u.node,u.remainder),f=this.positionInBuffer(d.node,d.remainder);if(u.node===d.node)return this.findMatchesInNode(u.node,a,e.startLineNumber,e.startColumn,h,f,t,n,r,s,o),o;let p=e.startLineNumber,m=u.node;for(;m!==d.node;){let b=this.getLineFeedCnt(m.piece.bufferIndex,h,m.piece.end);if(b>=1){let S=this._buffers[m.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),L=S[h.line+b],A=p===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,p,A,h,this.positionInBuffer(m,L-w),t,n,r,s,o),s>=r)return o;p+=b}let E=p===e.startLineNumber?e.startColumn-1:0;if(p===e.endLineNumber){const S=this.getLineContent(p).substring(E,e.endColumn-1);return s=this._findMatchesInLine(t,a,S,e.endLineNumber,E,s,o,n,r),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(p).substr(E),p,E,s,o,n,r),s>=r)return o;p++,u=this.nodeAt2(p,1),m=u.node,h=this.positionInBuffer(u.node,u.remainder)}if(p===e.endLineNumber){let b=p===e.startLineNumber?e.startColumn-1:0;const E=this.getLineContent(p).substring(b,e.endColumn-1);return s=this._findMatchesInLine(t,a,E,e.endLineNumber,b,s,o,n,r),o}let v=p===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,p,v,h,f,t,n,r,s,o),o}_findMatchesInLine(e,t,n,r,o,s,a,u,d){const h=e.wordSeparators;if(!u&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=n.length;let b=-m;for(;(b=n.indexOf(p,b+m))!==-1;)if((!h||qG(h,n,v,b,m))&&(a[s++]=new DA(new Q(r,b+1+o,r,b+1+m+o),null),s>=d))return s;return s}let f;t.reset(0);do if(f=t.next(n),f&&(a[s++]=Cb(new Q(r,f.index+1+o,r,f.index+1+f[0].length+o),f,u),s>=d))return s;while(f);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ln){let{node:r,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=r.piece,u=a.bufferIndex,d=this.positionInBuffer(r,o);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Rg){this.appendToNode(r,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(s+r.piece.length>e){let h=[],f=new ll(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(u,a.end)-this.offsetInBuffer(u,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,o)===10){let b={line:f.start.line+1,column:0};f=new ll(f.bufferIndex,b,f.end,this.getLineFeedCnt(f.bufferIndex,b,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,o-1)===13){let b=this.positionInBuffer(r,o-1);this.deleteNodeTail(r,b),t="\r"+t,r.piece.length===0&&h.push(r)}else this.deleteNodeTail(r,d);else this.deleteNodeTail(r,d);let p=this.createNewPieces(t);f.length>0&&this.rbInsertRight(r,f);let m=r;for(let v=0;v<p.length;v++)m=this.rbInsertRight(m,p[v]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,r)}else{let r=this.createNewPieces(t),o=this.rbInsertLeft(null,r[0]);for(let s=1;s<r.length;s++)o=this.rbInsertRight(o,r[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ln)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),o=n.node,s=r.node;if(o===s){let p=this.positionInBuffer(o,n.remainder),m=this.positionInBuffer(o,r.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let v=o.next();IM(this,o),this.validateCRLFWithPrevNode(v),this.computeBufferMetadata();return}this.deleteNodeHead(o,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,p),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,p,m),this.computeBufferMetadata();return}let a=[],u=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,u),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let d=this.positionInBuffer(s,r.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let h=o.next();for(let p=h;p!==ln&&p!==s;p=p.next())a.push(p);let f=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},u=new ll(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=u,e+=`
`,$g(this,t,-1,-1),t.piece.length===0&&n.push(t)}let r=this.createNewPieces(e),o=this.rbInsertLeft(t,r[r.length-1]);for(let s=r.length-2;s>=0;s--)o=this.rbInsertLeft(o,r[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),o=r;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,u=s[r.start.line]+r.start.column+t,d=r.start.line,h=r.end.line,f=0,p=0,m=0;for(;d<=h&&(f=d+(h-d)/2|0,m=s[f],f!==h);)if(p=s[f+1],u<m)h=f-1;else if(u>=p)d=f+1;else break;return n?(n.line=f,n.column=u-m,null):{line:f,column:u-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let o=r[n.line+1],s=r[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)IM(this,e[t])}createNewPieces(e){if(e.length>Rg){let h=[];for(;e.length>Rg;){const p=e.charCodeAt(Rg-1);let m;p===13||p>=55296&&p<=56319?(m=e.substring(0,Rg-1),e=e.substring(Rg-1)):(m=e.substring(0,Rg),e=e.substring(Rg));let v=jg(m);h.push(new ll(this._buffers.length,{line:0,column:0},{line:v.length-1,column:m.length-v[v.length-1]},v.length-1,m.length)),this._buffers.push(new yb(m,v))}let f=jg(e);return h.push(new ll(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new yb(e,f)),h}let t=this._buffers[0].buffer.length;const n=jg(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length;let s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],u={line:s,column:a},d=new ll(0,r,u,this.getLineFeedCnt(0,r,u),o-t);return this._lastChangeBufferPos=u,[d]}getLineRawContent(e,t=0){let n=this.root,r="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=a.substring(u+s,u+n.piece.length);else{let d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(u+s,u+d-t)}}else{let s=0;const a=e;for(;n!==ln;)if(n.left!==ln&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,f=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(f+u,f+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=d.substring(h+u,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==ln;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=s.substring(u,u+a-t),r}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=s.substr(a,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==ln;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),o=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[o]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),u=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=u-r,h=a-o,f=n.length+h;e.piece=new ll(n.bufferIndex,n.start,s,u,f),$g(this,e,h,d)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),u=this.offsetInBuffer(n.bufferIndex,s),d=a-r,h=o-u,f=n.length+h;e.piece=new ll(n.bufferIndex,s,n.end,a,f),$g(this,e,h,d)}shrinkNode(e,t,n){const r=e.piece,o=r.start,s=r.end,a=r.length,u=r.lineFeedCnt,d=t,h=this.getLineFeedCnt(r.bufferIndex,r.start,d),f=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,o);e.piece=new ll(r.bufferIndex,r.start,d,h,f),$g(this,e,f-a,h-u);let p=new ll(r.bufferIndex,n,s,this.getLineFeedCnt(r.bufferIndex,n,s),this.offsetInBuffer(r.bufferIndex,s)-this.offsetInBuffer(r.bufferIndex,n)),m=this.rbInsertRight(e,p);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=jg(t,!1);for(let m=0;m<o.length;m++)o[m]+=r;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],u={line:s,column:a},d=e.piece.length+t.length,h=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,u),p=f-h;e.piece=new ll(e.piece.bufferIndex,e.piece.start,u,f,d),this._lastChangeBufferPos=u,$g(this,e,t.length,p)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==ln;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==ln;)if(n.left!==ln&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:r};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==ln;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ln||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,o=n[r]+t.start.column;return r===n.length-1||n[r+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ln||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],r=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new ll(e.piece.bufferIndex,e.piece.start,o,a,s),$g(this,e,-1,-1),e.piece.length===0&&n.push(e);let u={line:t.piece.start.line+1,column:0};const d=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,u,t.piece.end);t.piece=new ll(t.piece.bufferIndex,u,t.piece.end,h,d),$g(this,t,-1,-1),t.piece.length===0&&n.push(t);let f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let p=0;p<n.length;p++)IM(this,n[p])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)IM(this,n);else{const r=n.piece,o={line:r.start.line+1,column:0},s=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,o,r.end);n.piece=new ll(r.bufferIndex,o,r.end,a,s),$g(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ln)return t(ln);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ln)return"";let t=this._buffers[e.piece.bufferIndex],n,r=e.piece,o=this.offsetInBuffer(r.bufferIndex,r.start),s=this.offsetInBuffer(r.bufferIndex,r.end);return n=t.buffer.substring(o,s),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new VH(t,1);if(n.left=ln,n.right=ln,n.parent=ln,n.size_left=0,n.lf_left=0,this.root===ln)this.root=n,n.color=0;else if(e.right===ln)e.right=n,n.parent=e;else{let o=jG(e.right);o.left=n,n.parent=o}return RJ(this,n),n}rbInsertLeft(e,t){let n=new VH(t,1);if(n.left=ln,n.right=ln,n.parent=ln,n.size_left=0,n.lf_left=0,this.root===ln)this.root=n,n.color=0;else if(e.left===ln)e.left=n,n.parent=e;else{let r=Wce(e.left);r.right=n,n.parent=r}return RJ(this,n),n}}function Hce(i){return PB(i,0)}function PB(i,e){switch(typeof i){case"object":return i===null?dp(349,e):Array.isArray(i)?Mke(i,e):Pke(i,e);case"string":return YG(i,e);case"boolean":return Rke(i,e);case"number":return dp(i,e);case"undefined":return dp(937,e);default:return dp(617,e)}}function dp(i,e){return(e<<5)-e+i|0}function Rke(i,e){return dp(i?433:863,e)}function YG(i,e){e=dp(149417,e);for(let t=0,n=i.length;t<n;t++)e=dp(i.charCodeAt(t),e);return e}function Mke(i,e){return e=dp(104579,e),i.reduce((t,n)=>PB(n,t),e)}function Pke(i,e){return e=dp(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=YG(n,t),PB(i[n],t)),e)}function F9(i,e,t=32){const n=t-e,r=~((1<<n)-1);return(i<<e|(r&i)>>>n)>>>0}function PJ(i,e=0,t=i.byteLength,n=0){for(let r=0;r<t;r++)i[e+r]=n}function Fke(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function LN(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):Fke((i>>>0).toString(16),e/4)}class FB{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let r=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let u=s;if(Vo(s))if(a+1<t){const d=e.charCodeAt(a+1);jw(d)?(a++,u=CG(s,d)):u=65533}else{o=s;break}else jw(s)&&(u=65533);if(r=this._push(n,r,u),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),LN(this._h0)+LN(this._h1)+LN(this._h2)+LN(this._h3)+LN(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,PJ(this._buff,this._buffLen),this._buffLen>56&&(this._step(),PJ(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=FB._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,F9(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,o=this._h2,s=this._h3,a=this._h4,u,d,h;for(let f=0;f<80;f++)f<20?(u=r&o|~r&s,d=1518500249):f<40?(u=r^o^s,d=1859775393):f<60?(u=r&o|r&s|o&s,d=2400959708):(u=r^o^s,d=3395469782),h=F9(n,5)+u+a+d+e.getUint32(f*4,!1)&4294967295,a=s,s=o,o=F9(r,30),r=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}}FB._bigBlock32=new DataView(new ArrayBuffer(320));var FJ,BJ;class Bke{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Wke{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?vG(e,this._value,0,e.length,this._from,this._to):aR(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Vke{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?vG(e,this._value,0,e.length,this._from,this._to):aR(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Hke{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Vke(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return yH(e,this._value.scheme);if(this._states[this._stateIdx]===2)return yH(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return wA(e,this._value.query);if(this._states[this._stateIdx]===5)return wA(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class NM{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class vw{constructor(e){this._iter=e}static forUris(e=()=>!1){return new vw(new Hke(e))}static forStrings(){return new vw(new Bke)}static forConfigKeys(){return new vw(new Wke)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let r;this._root||(this._root=new NM,this._root.segment=n.value());const o=[];for(r=this._root;;){const a=n.cmp(r.segment);if(a>0)r.left||(r.left=new NM,r.left.segment=n.value()),o.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new NM,r.right.segment=n.value()),o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new NM,r.mid.segment=n.value()),o.push([0,r]),r=r.mid;else break}const s=r.value;r.value=t,r.key=e;for(let a=o.length-1;a>=0;a--){const u=o[a][1];u.updateHeight();const d=u.balanceFactor();if(d<-1||d>1){const h=o[a][0],f=o[a+1][0];if(h===1&&f===1)o[a][1]=u.rotateLeft();else if(h===-1&&f===-1)o[a][1]=u.rotateRight();else if(h===1&&f===-1)u.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=u.rotateLeft();else if(h===-1&&f===1)u.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=u.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const r=this._iter.reset(e),o=[];let s=this._root;for(;s;){const a=r.cmp(s.segment);if(a>0)o.push([-1,s]),s=s.left;else if(a<0)o.push([1,s]),s=s.right;else if(r.hasNext())r.next(),o.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const a=this._min(s.right),{key:u,value:d,segment:h}=a;this._delete(a.key,!1),s.key=u,s.value=d,s.segment=h}else{const a=(n=s.left)!==null&&n!==void 0?n:s.right;if(o.length>0){const[u,d]=o[o.length-1];switch(u){case-1:d.left=a;break;case 0:d.mid=a;break;case 1:d.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const u=o[a][1];u.updateHeight();const d=u.balanceFactor();if(d>1?(u.right.balanceFactor()>=0||(u.right=o[a+1][1]=o[a+1][1].rotateRight()),o[a][1]=u.rotateLeft()):d<-1&&(u.left.balanceFactor()<=0||(u.left=o[a+1][1]=o[a+1][1].rotateLeft()),o[a][1]=u.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,r;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class $ke{constructor(e,t){this.uri=e,this.value=t}}class na{constructor(e,t){this[FJ]="ResourceMap",e instanceof na?(this.map=new Map(e.map),this.toKey=t??na.defaultToKey):(this.map=new Map,this.toKey=e??na.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new $ke(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,r]of this.map)e(r.value,r.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(FJ=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}na.defaultToKey=i=>i.toString();class zke{constructor(){this[BJ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let r=this._map.get(e);if(r)r.value=t,n!==0&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}[(BJ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(n.previous=r,r.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,r=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=r,r.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class z0 extends zke{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function Rc(i,e,t){return Math.min(Math.max(i,e),t)}class Uke{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}const B9="**",WJ="/",i4="[/\\\\]",r4="[^/\\\\]",jke=/\//g;function VJ(i){switch(i){case 0:return"";case 1:return`${r4}*?`;default:return`(?:${i4}|${r4}+${i4}|${i4}${r4}+)*?`}}function HJ(i,e){if(!i)return[];const t=[];let n=!1,r=!1,o="";for(const s of i){switch(s){case e:if(!n&&!r){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1;break}o+=s}return o&&t.push(o),t}function $ce(i){if(!i)return"";let e="";const t=HJ(i,WJ);if(t.every(n=>n===B9))e=".*";else{let n=!1;t.forEach((r,o)=>{if(r===B9){n||(e+=VJ(2),n=!0);return}let s=!1,a="",u=!1,d="";for(const h of r){if(h!=="}"&&s){a+=h;continue}if(u&&(h!=="]"||!d)){let f;h==="-"?f=h:(h==="^"||h==="!")&&!d?f="^":h===WJ?f="":f=dc(h),d+=f;continue}switch(h){case"{":s=!0;continue;case"[":u=!0;continue;case"}":const p=`(?:${HJ(a,",").map(m=>$ce(m)).join("|")})`;e+=p,s=!1,a="";break;case"]":e+="["+d+"]",u=!1,d="";break;case"?":e+=r4;continue;case"*":e+=VJ(1);continue;default:e+=dc(h)}}o<t.length-1&&(t[o+1]!==B9||o+2<t.length)&&(e+=i4),n=!1})}return e}const Kke=/^\*\*\/\*\.[\w\.-]+$/,Gke=/^\*\*\/([\w\.-]+)\/?$/,qke=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,Yke=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,Zke=/^\*\*((\/[\w\.-]+)+)\/?$/,Xke=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,$J=new z0(1e4),zJ=function(){return!1},Jf=function(){return null};function ZG(i,e){if(!i)return Jf;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let r=$J.get(n);if(r)return UJ(r,i);let o;if(Kke.test(t)){const s=t.substr(4);r=function(a,u){return typeof a=="string"&&a.endsWith(s)?t:null}}else(o=Gke.exec(W9(t,e)))?r=Qke(o[1],t):(e.trimForExclusions?Yke:qke).test(t)?r=Jke(t,e):(o=Zke.exec(W9(t,e)))?r=jJ(o[1].substr(1),t,!0):(o=Xke.exec(W9(t,e)))?r=jJ(o[1],t,!1):r=eNe(t);return $J.set(n,r),UJ(r,i)}function UJ(i,e){return typeof e=="string"?i:function(t,n){return JIe(t,e.base)?i(uLe(e.base,t),n):null}}function W9(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function Qke(i,e){const t=`/${i}`,n=`\\${i}`,r=function(s,a){return typeof s!="string"?null:a?a===i?e:null:s===i||s.endsWith(t)||s.endsWith(n)?e:null},o=[i];return r.basenames=o,r.patterns=[e],r.allBasenames=o,r}function Jke(i,e){const t=Uce(i.slice(1,-1).split(",").map(a=>ZG(a,e)).filter(a=>a!==Jf),i),n=t.length;if(!n)return Jf;if(n===1)return t[0];const r=function(a,u){for(let d=0,h=t.length;d<h;d++)if(t[d](a,u))return i;return null},o=t.find(a=>!!a.allBasenames);o&&(r.allBasenames=o.allBasenames);const s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(r.allPaths=s),r}function jJ(i,e,t){const n=qb===Do.sep,r=n?i:i.replace(jke,qb),o=qb+r,s=Do.sep+i,a=t?function(u,d){return typeof u=="string"&&(u===r||u.endsWith(o)||!n&&(u===i||u.endsWith(s)))?e:null}:function(u,d){return typeof u=="string"&&(u===r||!n&&u===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function eNe(i){try{const e=new RegExp(`^${$ce(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Jf}}function tNe(i,e,t){return!i||typeof e!="string"?!1:zce(i)(e,void 0,t)}function zce(i,e={}){if(!i)return zJ;if(typeof i=="string"||nNe(i)){const t=ZG(i,e);if(t===Jf)return zJ;const n=function(r,o){return!!t(r,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return iNe(i,e)}function nNe(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function iNe(i,e){const t=Uce(Object.getOwnPropertyNames(i).map(a=>rNe(a,i[a],e)).filter(a=>a!==Jf)),n=t.length;if(!n)return Jf;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,f){for(let p=0,m=t.length;p<m;p++){const v=t[p](h,f);if(v)return v}return null},u=t.find(h=>!!h.allBasenames);u&&(a.allBasenames=u.allBasenames);const d=t.reduce((h,f)=>f.allPaths?h.concat(f.allPaths):h,[]);return d.length&&(a.allPaths=d),a}const r=function(a,u,d){let h;for(let f=0,p=t.length;f<p;f++){const m=t[f];m.requiresSiblings&&d&&(u||(u=Gb(a)),h||(h=u.substr(0,u.length-cLe(a).length)));const v=m(a,u,h,d);if(v)return v}return null},o=t.find(a=>!!a.allBasenames);o&&(r.allBasenames=o.allBasenames);const s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(r.allPaths=s),r}function rNe(i,e,t){if(e===!1)return Jf;const n=ZG(i,t);if(n===Jf)return Jf;if(typeof e=="boolean")return n;if(e){const r=e.when;if(typeof r=="string"){const o=(s,a,u,d)=>{if(!d||!n(s,a))return null;const h=r.replace("$(basename)",u),f=d(h);return XEe(f)?f.then(p=>p?i:null):f?i:null};return o.requiresSiblings=!0,o}}return n}function Uce(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,u)=>{const d=u.basenames;return d?a.concat(d):a},[]);let r;if(e){r=[];for(let a=0,u=n.length;a<u;a++)r.push(e)}else r=t.reduce((a,u)=>{const d=u.patterns;return d?a.concat(d):a},[]);const o=function(a,u){if(typeof a!="string")return null;if(!u){let h;for(h=a.length;h>0;h--){const f=a.charCodeAt(h-1);if(f===47||f===92)break}u=a.substr(h)}const d=n.indexOf(u);return d!==-1?r[d]:null};o.basenames=n,o.patterns=r,o.allBasenames=n;const s=i.filter(a=>!a.basenames);return s.push(o),s}function jce(i,e,t,n){if(Array.isArray(i)){let r=0;for(const o of i){const s=jce(o,e,t,n);if(s===10)return s;s>r&&(r=s)}return r}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:r,pattern:o,scheme:s,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let u=0;if(s)if(s===e.scheme)u=10;else if(s==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(o){let d;if(typeof o=="string"?d=o:d=Object.assign(Object.assign({},o),{base:lG(o.base)}),d===e.fsPath||tNe(d,e.fsPath))u=10;else return 0}return u}else return 0}}function Kce(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(Kce):!!i.exclusive}class Qr{constructor(){this._clock=0,this._entries=[],this._onDidChange=new Ce}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Un(()=>{if(n){let r=this._entries.indexOf(n);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,r;return this._orderedForEach(e,o=>{n&&r===o._score?n.push(o.provider):(r=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=jce(n.selector,e.uri,e.getLanguageId(),WLe(e)),Kce(n.selector)&&n._score>0){for(let r of this._entries)r._score=0;n._score=1e3;break}this._entries.sort(Qr._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const KJ=new WeakMap;let oNe=0;function sNe(i){let e=KJ.get(i);return e===void 0&&(e=++oNe,KJ.set(i,e)),e}class UF{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new z0(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>PB(sNe(n),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let r=this._cache.get(n);return r||(r=new Uke,this._cache.set(n,r)),r.update(t),this.get(e)}}class aNe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Un(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,r=!1;return this._promises.set(e,t.then(o=>{this._promises.delete(e),!(r||!o)&&(n=this.register(e,o))})),Un(()=>{r=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(r=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class ia{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),r=this.getFontStyle(e);return r&1&&(n+=" mtki"),r&2&&(n+=" mtkb"),r&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),r=this.getFontStyle(e);let o=`color: ${t[n]};`;return r&1&&(o+="font-style: italic;"),r&2&&(o+="font-weight: bold;"),r&4&&(o+="text-decoration: underline;"),o}}const lNe=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&TF.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=_e.symbolProperty),n.classNames}}();let Gce=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Zu;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Zu||(Zu={}));var eg;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(eg||(eg={}));var TA;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(TA||(TA={}));function uNe(i){return i&&rn.isUri(i.uri)&&Q.isIRange(i.range)&&(Q.isIRange(i.originSelectionRange)||Q.isIRange(i.targetSelectionRange))}var HH;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(s){return e.get(s)}i.fromString=n;function r(s){return t.get(s)}i.toString=r;function o(s,a){const u=t.get(s);let d=u&&TF.get("symbol-"+u);return d||(console.info("No codicon found for SymbolKind "+s),d=_e.symbolProperty),`${a?"inline":"block"} ${d.classNames}`}i.toCssClassName=o})(HH||(HH={}));class ef{constructor(e){this.value=e}}ef.Comment=new ef("comment");ef.Imports=new ef("imports");ef.Region=new ef("region");var jF;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(jF||(jF={}));const KF=new Qr,GF=new Qr,Ah=new Qr,XG=new Qr,e1=new Qr,IA=new Qr,Gc=new Qr,Gw=new Qr,qF=new Qr,kA=new Qr,YF=new Qr,ZF=new Qr,XF=new Qr,ip=new Qr,Hv=new Qr,tg=new Qr,O2=new Qr,Oh=new Qr,QF=new Qr,NA=new Qr,qw=new Qr,BB=new Qr,$H=new Qr,Yw=new Qr,WB=new Qr,Wr=new aNe;class es{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=es.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=n,new es(r,e,t)}equals(e){return e instanceof es?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,o=r+(n<<1);for(let s=r;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=ia.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ia.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ia.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ia.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return ia.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return es.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new QG(this,e,t,n)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let o=0;o<r;o++)e[o<<1]=e[o+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){const o=n+Math.floor((r-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(r=o)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,r="";const o=new Array;let s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,u=n<e.length?e[n]:null;if(a!==-1&&(u===null||a<=u.offset)){r+=this._text.substring(s,a);const d=this._tokens[(t<<1)+1];o.push(r.length,d),t++,s=a}else if(u){if(u.offset>s){r+=this._text.substring(s,u.offset);const d=this._tokens[(t<<1)+1];o.push(r.length,d),s=u.offset}r+=u.text,o.push(r.length,u.tokenMetadata),n++}else break}return new es(new Uint32Array(o),r,this._languageIdCodec)}}es.defaultTokenMetadata=(16384|2<<23)>>>0;class QG{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof QG?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}function A1(i){let e=0,t=0,n=0,r=0;for(let o=0,s=i.length;o<s;o++){const a=i.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&i.charCodeAt(o+1)===10?(r|=2,o++):r|=3,n=o+1):a===10&&(r|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=i.length),[e,t,i.length-n,r]}function GJ(i){return(i<<0|0|0|16384|2<<23)>>>0}const Mg=new Uint32Array(0).buffer;class V9{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new cNe(e,[t]))}}class JF{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new Q(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const r=t+Math.floor((n-t)/2),o=this._getDeltaLine(r);if(o<e)t=r+1;else if(o>e)n=r-1;else{let s=r;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new qJ(this._tokens.subarray(4*s,4*a+4))}}return this._getDeltaLine(t)===e?new qJ(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){const o=this._tokens,s=this._tokenCount;let a=0,u=!1,d=0;for(let h=0;h<s;h++){const f=4*h,p=o[f],m=o[f+1],v=o[f+2],b=o[f+3];if((p>e||p===e&&v>=t)&&(p<n||p===n&&m<=r))u=!0;else{if(a===0&&(d=p),u){const E=4*a;o[E]=p-d,o[E+1]=m,o[E+2]=v,o[E+3]=b}a++}}return this._tokenCount=a,d}split(e,t,n,r){const o=this._tokens,s=this._tokenCount;let a=[],u=[],d=a,h=0,f=0;for(let p=0;p<s;p++){const m=4*p,v=o[m],b=o[m+1],E=o[m+2],S=o[m+3];if(v>e||v===e&&E>=t){if(v<n||v===n&&b<=r)continue;d!==u&&(d=u,h=0,f=v)}d[h++]=v-f,d[h++]=b,d[h++]=E,d[h++]=S}return[new JF(new Uint32Array(a)),new JF(new Uint32Array(u)),f]}acceptDeleteRange(e,t,n,r,o){const s=this._tokens,a=this._tokenCount,u=r-t;let d=0,h=!1;for(let f=0;f<a;f++){const p=4*f;let m=s[p],v=s[p+1],b=s[p+2];const E=s[p+3];if(m<t||m===t&&b<=n){d++;continue}else if(m===t&&v<n)m===r&&b>o?b-=o-n:b=n;else if(m===t&&v===n)if(m===r&&b>o)b-=o-n;else{h=!0;continue}else if(m<r||m===r&&v<o)if(m===r&&b>o)m===t?(v=n,b=v+(b-o)):(v=0,b=v+(b-o));else{h=!0;continue}else if(m>r){if(u===0&&!h){d=a;break}m-=u}else if(m===r&&v>=o)e&&m===0&&(v+=e,b+=e),m-=u,v-=o-n,b-=o-n;else throw new Error("Not possible!");const S=4*d;s[S]=m,s[S+1]=v,s[S+2]=b,s[S+3]=E,d++}this._tokenCount=d}acceptInsertText(e,t,n,r,o,s){const a=n===0&&r===1&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),u=this._tokens,d=this._tokenCount;for(let h=0;h<d;h++){const f=4*h;let p=u[f],m=u[f+1],v=u[f+2];if(!(p<e||p===e&&v<t)){if(p===e&&v===t)if(a)v+=1;else continue;else if(p===e&&m<t&&t<v)n===0?v+=r:v=t;else{if(p===e&&m===t&&a)continue;if(p===e)if(p+=n,n===0)m+=r,v+=r;else{const b=v-m;m=o+(m-t),v=m+b}else p+=n}u[f]=p,u[f+1]=m,u[f+2]=v}}}}class qJ{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class e3{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new Q(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[r,o,s]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new e3(this.startLineNumber,r),new e3(this.startLineNumber+s,o)]}applyEdit(e,t){const[n,r,o]=A1(t);this.acceptEdit(e,n,r,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,o){this._acceptDeleteRange(e),this._acceptInsertText(new Ee(e.startLineNumber,e.startColumn),t,n,r,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const o=n-t;this.startLineNumber-=o;return}const r=this.tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const o=-t;this.startLineNumber-=o,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,o){if(t===0&&n===0)return;const s=e.lineNumber-this.startLineNumber;if(s<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();s>=a+1||this.tokens.acceptInsertText(s,e.column-1,t,n,r,o)}}class cNe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Pg(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class JG{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let r=null;for(let o=0,s=this._pieces.length;o<s;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:o};continue}const[u,d]=a.split(n);if(u.isEmpty()){r=r||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,u,d),o++,s++,r=r||{index:o})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=EA(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const r=JG._findFirstPieceWithLine(n,e),o=n[r].getLineTokens(e);if(!o)return t;const s=t.getCount(),a=o.getCount();let u=0,d=[],h=0,f=0;const p=(m,v)=>{m!==f&&(f=m,d[h++]=m,d[h++]=v)};for(let m=0;m<a;m++){const v=o.getStartCharacter(m),b=o.getEndCharacter(m),E=o.getMetadata(m),S=((E&1?2048:0)|(E&2?4096:0)|(E&4?8192:0)|(E&8?8372224:0)|(E&16?4286578688:0))>>>0,w=~S>>>0;for(;u<s&&t.getEndOffset(u)<=v;)p(t.getEndOffset(u),t.getMetadata(u)),u++;for(u<s&&t.getStartOffset(u)<v&&p(v,t.getMetadata(u));u<s&&t.getEndOffset(u)<b;)p(t.getEndOffset(u),t.getMetadata(u)&w|E&S),u++;if(u<s)p(b,t.getMetadata(u)&w|E&S),t.getEndOffset(u)===b&&u++;else{const L=Math.min(Math.max(0,u-1),s-1);p(b,t.getMetadata(L)&w|E&S)}}for(;u<s;)p(t.getEndOffset(u),t.getMetadata(u)),u++;return new es(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let o=n+Math.floor((r-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)r=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,r,o){for(const s of this._pieces)s.acceptEdit(e,t,n,r,o)}}class Uu{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==Mg)return new es(Pg(r),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=GJ(this._languageIdCodec.encodeLanguageId(e)),new es(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const r=n?Pg(n):null;if(t===0){let o=!1;if(r&&r.length>1&&(o=ia.getLanguageId(r[1])!==e),!o)return Mg}if(!r||r.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=GJ(e),o.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let r=0;r<t;r++)n[r]=null;this._lineTokens=EA(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,r,o){const s=Uu._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=s,o?!Uu._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Pg(e),r=Pg(t);if(n.length!==r.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==r[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Ee(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Uu._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Uu._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let r=null;n<this._len&&(r=Uu._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Uu._append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=Uu._insert(this._lineTokens[r],e.column-1,n);return}this._lineTokens[r]=Uu._deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=Uu._insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Mg?e:Uu._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Mg)return e;const n=Pg(e),r=n[n.length-2];return Uu._delete(e,t,r)}static _delete(e,t,n){if(e===null||e===Mg||t===n)return e;const r=Pg(e),o=r.length>>>1;if(t===0&&r[r.length-2]===n)return Mg;const s=es.findIndexInTokensArray(r,t),a=s>0?r[s-1<<1]:0,u=r[s<<1];if(n<u){const m=n-t;for(let v=s;v<o;v++)r[v<<1]-=m;return e}let d,h;a!==t?(r[s<<1]=t,d=s+1<<1,h=t):(d=s<<1,h=a);const f=n-t;for(let m=s+1;m<o;m++){const v=r[m<<1]-f;v>h&&(r[d++]=v,r[d++]=r[(m<<1)+1],h=v)}if(d===r.length)return e;let p=new Uint32Array(d);return p.set(r.subarray(0,d),0),p.buffer}static _append(e,t){if(t===Mg)return e;if(e===Mg)return t;if(e===null)return e;if(t===null)return null;const n=Pg(e),r=Pg(t),o=r.length>>>1;let s=new Uint32Array(n.length+r.length);s.set(n,0);let a=n.length;const u=n[n.length-2];for(let d=0;d<o;d++)s[a++]=r[d<<1]+u,s[a++]=r[(d<<1)+1];return s.buffer}static _insert(e,t,n){if(e===null||e===Mg)return e;const r=Pg(e),o=r.length>>>1;let s=es.findIndexInTokensArray(r,t);s>0&&r[s-1<<1]===t&&s--;for(let a=s;a<o;a++)r[a<<1]+=n;return e}}class bw extends Oe{constructor(e,t,n,r,o,s,a){super(),this._onDidChangeContent=this._register(new Ce),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._pieceTree=new Oke(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const r=this.getPositionAt(e),o=this.getPositionAt(n);return new Q(r.lineNumber,r.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const r=e.startLineNumber,o=e.endLineNumber;for(let s=r;s<=o;s++){const a=this.getLineContent(s),u=s===r?e.startColumn-1:0,d=s===o?e.endColumn-1:a.length;for(let h=u;h<d;h++)Vo(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Na(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Qf(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let r=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,u=[];for(let b=0;b<e.length;b++){let E=e[b];a&&E._isTracked&&(a=!1);let S=E.range;if(E.text){let H=!0;s||(H=!yG(E.text),s=H),!r&&H&&(r=pB(E.text)),!o&&H&&(o=Sue(E.text))}let w="",L=0,A=0,N=0;if(E.text){let H;[L,A,N,H]=A1(E.text);const M=this.getEOL();H===0||H===(M===`\r
`?2:1)?w=E.text:w=E.text.replace(/\r\n|\r|\n/g,M)}u[b]={sortIndex:b,identifier:E.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:w,eolCount:L,firstLineLength:A,lastLineLength:N,forceMoveMarkers:!!E.forceMoveMarkers,isAutoWhitespaceEdit:E.isAutoWhitespaceEdit||!1}}u.sort(bw._sortOpsAscending);let d=!1;for(let b=0,E=u.length-1;b<E;b++){let S=u[b].range.getEndPosition(),w=u[b+1].range.getStartPosition();if(w.isBeforeOrEqual(S)){if(w.isBefore(S))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(u=this._reduceOperations(u));let h=n||t?bw._getInverseEditRanges(u):[],f=[];if(t)for(let b=0;b<u.length;b++){let E=u[b],S=h[b];if(E.isAutoWhitespaceEdit&&E.range.isEmpty())for(let w=S.startLineNumber;w<=S.endLineNumber;w++){let L="";w===S.startLineNumber&&(L=this.getLineContent(E.range.startLineNumber),Na(L)!==-1)||f.push({lineNumber:w,oldContent:L})}}let p=null;if(n){let b=0;p=[];for(let E=0;E<u.length;E++){const S=u[E],w=h[E],L=this.getValueInRange(S.range),A=S.rangeOffset+b;b+=S.text.length-L.length,p[E]={sortIndex:S.sortIndex,identifier:S.identifier,range:w,text:L,textChange:new Ds(S.rangeOffset,L,A,S.text)}}d||p.sort((E,S)=>E.sortIndex-S.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;const m=this._doApplyEdits(u);let v=null;if(t&&f.length>0){f.sort((b,E)=>E.lineNumber-b.lineNumber),v=[];for(let b=0,E=f.length;b<E;b++){let S=f[b].lineNumber;if(b>0&&f[b-1].lineNumber===S)continue;let w=f[b].oldContent,L=this.getLineContent(S);L.length===0||L===w||Na(L)!==-1||v.push(S)}}return this._onDidChangeContent.fire(),new YIe(p,m,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,r=e[e.length-1].range,o=new Q(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn);let s=n.startLineNumber,a=n.startColumn;const u=[];for(let m=0,v=e.length;m<v;m++){const b=e[m],E=b.range;t=t||b.forceMoveMarkers,u.push(this.getValueInRange(new Q(s,a,E.startLineNumber,E.startColumn))),b.text.length>0&&u.push(b.text),s=E.endLineNumber,a=E.endColumn}const d=u.join(""),[h,f,p]=A1(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:h,firstLineLength:f,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(bw._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let r=e[n];const o=r.range.startLineNumber,s=r.range.startColumn,a=r.range.endLineNumber,u=r.range.endColumn;if(o===a&&s===u&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const d=new Q(o,s,a,u);t.push({range:d,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){let t=[],n=0,r=0,o=null;for(let s=0,a=e.length;s<a;s++){let u=e[s],d,h;o?o.range.endLineNumber===u.range.startLineNumber?(d=n,h=r+(u.range.startColumn-o.range.endColumn)):(d=n+(u.range.startLineNumber-o.range.endLineNumber),h=u.range.startColumn):(d=u.range.startLineNumber,h=u.range.startColumn);let f;if(u.text.length>0){const p=u.eolCount+1;p===1?f=new Q(d,h,d,h+u.firstLineLength):f=new Q(d,h,d+p-1,u.lastLineLength+1)}else f=new Q(d,h,d,h);n=f.endLineNumber,r=f.endColumn,t.push(f),o=u}return t}static _sortOpsAscending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class dNe{constructor(e,t,n,r,o,s,a,u,d){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=o,this._containsRTL=s,this._containsUnusualLineTerminators=a,this._isBasicASCII=u,this._normalizeEOL=d}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),u=jg(a);n[o]=new yb(a,u)}const r=new bw(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class hNe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&wG(e)&&(this.BOM=rxe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=kke(this._tmpLineStarts,e);this.chunks.push(new yb(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=pB(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=Sue(e))}finish(e=!0){return this._finish(),new dNe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=jg(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class fNe{constructor(){this.changeType=1}}class tf{constructor(e,t,n,r,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",r=0;for(const o of t)n+=e.substring(r,o.column-1),r=o.column-1,n+=o.options.content;return n+=e.substring(r),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new tf(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new tf(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,r)=>n.lineNumber===r.lineNumber?n.column===r.column?n.order-r.order:n.column-r.column:n.lineNumber-r.lineNumber),t}}class YJ{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class gNe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class pNe{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class mNe{constructor(){this.changeType=5}}class t1{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new t1(n,r,o,s)}}class qce{constructor(e){this.changes=e}}class t3{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=t1.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=t3._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new t3(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,u=e.isFlush||t.isFlush;return{changes:n,eol:r,versionId:o,isUndoing:s,isRedoing:a,isFlush:u}}}let VB=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class eq{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class HB{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}class _Ne{clone(){return this}equals(e){return this===e}}const dR=new _Ne,E0="vs.editor.nullMode";function Yce(i,e,t,n){return new eq([new VB(n,"",i)],t)}function tq(i,e,t,n){let r=new Uint32Array(2);return r[0]=n,r[1]=(i<<0|0|0|16384|2<<23)>>>0,new HB(r,t===null?dR:t)}class vNe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],r=[];for(let o=0;o<t;o++)n[o]=null,r[o]=!1;this._beginState=EA(this._beginState,e,n),this._valid=EA(this._valid,e,r),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const r=this.getBeginState(t+1);if(r===null||!n.equals(r)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let o=t+1;for(;o<e&&this._isValid(o);)o++;this._invalidLineStartIndex=o}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,o=Math.min(n,t);for(let s=o;s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new Ee(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class bNe extends Oe{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=new vNe,this._tokenizationSupport=null,this._register(Wr.onDidChange(n=>{const r=this._textModel.getLanguageId();n.changedLanguages.indexOf(r)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let r=0,o=n.changes.length;r<o;r++){const s=n.changes[r],[a]=A1(s.text);this._tokenizationStateStore.applyEdits(s.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=CNe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,bA(e=>{this._isScheduled=!1,!this._isDisposed&&this._revalidateTokensNow(e)}))}_revalidateTokensNow(e){const t=this._textModel.getLineCount(),n=1,r=new V9,o=ig.create(!1);let s=-1;do if(o.elapsed()>n||(s=this._tokenizeOneInvalidLine(r),s>=t))break;while(this._hasLinesToTokenize()&&e.timeRemaining()>0);this._beginBackgroundTokenization(),this._textModel.setTokens(r.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new V9;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new V9;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationSupport)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const r=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),s=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=AM(this._languageIdCodec,r,this._tokenizationSupport,s,!0,n),u=new es(a.tokens,s,this._languageIdCodec);if(u.getCount()===0)return 0;const d=u.findTokenIndexAtOffset(e.column-1);return u.getStandardTokenType(d)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),r=this._textModel.getLineCount(),o=t-1;for(let s=this._tokenizationStateStore.invalidLineStartIndex;s<=o;s++){const a=this._textModel.getLineContent(s+1),u=this._tokenizationStateStore.getBeginState(s),d=AM(this._languageIdCodec,n,this._tokenizationSupport,a,!0,u);e.add(s+1,d.tokens),this._tokenizationStateStore.setEndState(r,s,d.endState),s=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let r=this._textModel.getLineFirstNonWhitespaceColumn(t);const o=[];let s=null;for(let d=t-1;r>1&&d>=1;d--){const h=this._textModel.getLineFirstNonWhitespaceColumn(d);if(h!==0&&h<r){if(s=this._tokenizationStateStore.getBeginState(d-1),s)break;o.push(this._textModel.getLineContent(d)),r=h}}s||(s=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let u=s;for(let d=o.length-1;d>=0;d--)u=AM(this._languageIdCodec,a,this._tokenizationSupport,o[d],!1,u).endState;for(let d=t;d<=n;d++){const h=this._textModel.getLineContent(d),f=AM(this._languageIdCodec,a,this._tokenizationSupport,h,!0,u);e.add(d,f.tokens),this._tokenizationStateStore.setFakeTokens(d-1),u=f.endState}}}function CNe(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:Wr.get(e),n=null;if(t)try{n=t.getInitialState()}catch(r){gn(r),t=null}return[t,n]}function AM(i,e,t,n,r,o){let s=null;if(t)try{s=t.tokenize2(n,r,o.clone(),0)}catch(a){gn(a)}return s||(s=tq(i.encodeLanguageId(e),n,o,0)),es.convertToEndOffset(s.tokens,n.length),s}var co;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(co||(co={}));class H9{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(n);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const r=String.fromCharCode(n);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class yNe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)xN(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),xN(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),xN(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),xN(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&xN(this.autoClosingPairsCloseSingleChar,t.close,t)}}function xN(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function o4(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),r=i.getLanguageId(n),o=n;for(;o+1<t&&i.getLanguageId(o+1)===r;)o++;let s=n;for(;s>0&&i.getLanguageId(s-1)===r;)s--;return new wNe(i,r,s,o+1,i.getStartOffset(s),i.getEndOffset(o))}class wNe{constructor(e,t,n,r,o,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=o,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function bf(i){return(i&7)!==0}class hR{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new H9(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new H9({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=ZJ(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=ZJ(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new H9({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:hR.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}hR.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function ZJ(i){return i.filter(([e,t])=>e!==""&&t!=="")}class n3{constructor(e,t,n,r,o,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=r,this.forwardRegex=o,this.reversedRegex=s,this._openSet=n3._toSet(this.open),this._closeSet=n3._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function SNe(i){const e=i.length;i=i.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);const t=[];for(let s=0;s<e;s++)t[s]=s;const n=(s,a)=>{const[u,d]=s,[h,f]=a;return u===h||u===f||d===h||d===f},r=(s,a)=>{const u=Math.min(s,a),d=Math.max(s,a);for(let h=0;h<e;h++)t[h]===d&&(t[h]=u)};for(let s=0;s<e;s++){const a=i[s];for(let u=s+1;u<e;u++){const d=i[u];n(a,d)&&r(t[s],t[u])}}const o=[];for(let s=0;s<e;s++){let a=[],u=[];for(let d=0;d<e;d++)if(t[d]===s){const[h,f]=i[d];a.push(h),u.push(f)}a.length>0&&o.push({open:a,close:u})}return o}class ENe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=SNe(t);this.brackets=n.map((r,o)=>new n3(e,o,r.open,r.close,LNe(r.open,r.close,n,o),xNe(r.open,r.close,n,o))),this.forwardRegex=DNe(this.brackets),this.reversedRegex=TNe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const o of r.open)this.textIsBracket[o]=r,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of r.close)this.textIsBracket[o]=r,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function Zce(i,e,t,n){for(let r=0,o=e.length;r<o;r++){if(r===t)continue;const s=e[r];for(const a of s.open)a.indexOf(i)>=0&&n.push(a);for(const a of s.close)a.indexOf(i)>=0&&n.push(a)}}function Xce(i,e){return i.length-e.length}function $B(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function LNe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let o=0,s=r.length;o<s;o++)Zce(r[o],t,n,r);return r=$B(r),r.sort(Xce),r.reverse(),zB(r)}function xNe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let o=0,s=r.length;o<s;o++)Zce(r[o],t,n,r);return r=$B(r),r.sort(Xce),r.reverse(),zB(r.map(nq))}function DNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=$B(e),zB(e)}function TNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=$B(e),zB(e.map(nq))}function INe(i){const e=/^[\w ]+$/.test(i);return i=dc(i),e?`\\b${i}\\b`:i}function zB(i){let e=`(${i.map(INe).join(")|(")})`;return yue(e,!0)}const nq=function(){function i(n){if(Dce){const r=new Uint16Array(n.length);let o=0;for(let s=n.length-1;s>=0;s--)r[o++]=n.charCodeAt(s);return xce().decode(r)}else{let r=[],o=0;for(let s=n.length-1;s>=0;s--)r[o++]=n.charAt(s);return r.join("")}}let e=null,t=null;return function(r){return e!==r&&(e=r,t=i(e)),t}}();class kc{static _findPrevBracketInText(e,t,n,r){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,u=r+s;return new Q(t,u-a+1,t,u+1)}static findPrevBracketInRange(e,t,n,r,o){const a=nq(n).substring(n.length-o,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let u=r+s;return new Q(t,u+1,t,u+1+a)}static findNextBracketInRange(e,t,n,r,o){const s=n.substring(r,o);return this.findNextBracketInText(e,t,s,r)}}class kNe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const r=n.charAt(n.length-1);e.push(r)}return x1(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(n-1);if(bf(t.getStandardTokenType(r)))return null;const o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=kc.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;const u=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[u])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:u}:null}}function OM(i){return i.global&&(i.lastIndex=0),!0}class NNe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&OM(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&OM(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&OM(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&OM(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class By{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=By._createOpenBracketRegExp(t[0]),r=By._createCloseBracketRegExp(t[1]);n&&r&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&r.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(r))return{indentAction:co.IndentOutdent}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:co.Indent}}return null}static _createOpenBracketRegExp(e){let t=dc(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",By._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=dc(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,By._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return gn(t),null}}}const ir=gi("configurationService");function Qce(i,e){const t=Object.create(null);for(let n in i)iq(t,n,i[n],e);return t}function iq(i,e,t,n){const r=e.split("."),o=r.pop();let s=i;for(let a=0;a<r.length;a++){let u=r[a],d=s[u];switch(typeof d){case"undefined":d=s[u]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(d)}`);return}s=d}if(typeof s=="object"&&s!==null)try{s[o]=t}catch{n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(s)}`)}else n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(s)}`)}function ANe(i,e){const t=e.split(".");Jce(i,t)}function Jce(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(Jce(n,e),Object.keys(n).length===0&&delete i[t])}}function ONe(i,e,t){function n(s,a){let u=s;for(const d of a){if(typeof u!="object"||u===null)return;u=u[d]}return u}const r=e.split("."),o=n(i,r);return typeof o>"u"?t:o}const Fs=gi("modeService");class Iv{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const ede=[];function U0(i,e,t){e instanceof Iv||(e=new Iv(e,[],t)),ede.push([i,e])}function RNe(){return ede}var MNe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},XJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class $9{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const fR=gi("languageConfigurationService");let i3=class extends Oe{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new Ce),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(zH));this._register(this.configurationService.onDidChangeConfiguration(r=>{const o=r.change.keys.some(a=>n.has(a)),s=r.change.overrides.filter(([a,u])=>u.some(d=>n.has(d))).map(([a])=>this.modeService.validateLanguageId(a));if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new $9(void 0));else for(const a of s)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new $9(a)))})),this._register(_i.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new $9(r.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=PNe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};i3=MNe([XJ(0,ir),XJ(1,Fs)],i3);function PNe(i,e,t){let n=_i.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new AA(a,{})}const r=FNe(n.languageId,e),o=tde([n.underlyingConfig,r]);return new AA(n.languageId,o)}const zH={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function FNe(i,e){const t=e.getValue(zH.brackets,{overrideIdentifier:i}),n=e.getValue(zH.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:QJ(t),colorizedBracketPairs:QJ(n)}}function QJ(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class JJ{constructor(e){this.languageId=e}}class BNe{constructor(){this._entries=new Map,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let r=this._entries.get(e);r||(r=new WNe(e),this._entries.set(e,r));const o=r.register(t,n);return this._onDidChange.fire(new JJ(e)),Un(()=>{o.dispose(),this._onDidChange.fire(new JJ(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let r=o4(t,n-1),o=this._getElectricCharacterSupport(r.languageId);return o?o.onElectricCharacter(e,r,n-r.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new yNe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():hR.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return BF(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let r=e.getLanguageIdAtPosition(t,0);if(t>1){let o,s=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==r)return s;let a=e.getLineContent(o);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){s=o;continue}return o}}return-1}getInheritIndentForLine(e,t,n,r=!0){if(e<4)return null;const o=this.getIndentRulesSupport(t.getLanguageId());if(!o)return null;if(n<=1)return{indentation:"",action:null};const s=this.getPrecedingValidLine(t,n,o);if(s<0)return null;if(s<1)return{indentation:"",action:null};const a=t.getLineContent(s);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:zi(a),action:co.Indent,line:s};if(o.shouldDecrease(a))return{indentation:zi(a),action:null,line:s};{if(s===1)return{indentation:zi(t.getLineContent(s)),action:null,line:s};const u=s-1,d=o.getIndentMetadata(t.getLineContent(u));if(!(d&3)&&d&4){let h=0;for(let f=u-1;f>0;f--)if(!o.shouldIndentNextLine(t.getLineContent(f))){h=f;break}return{indentation:zi(t.getLineContent(h+1)),action:null,line:h+1}}if(r)return{indentation:zi(t.getLineContent(s)),action:null,line:s};for(let h=s;h>0;h--){const f=t.getLineContent(h);if(o.shouldIncrease(f))return{indentation:zi(f),action:co.Indent,line:h};if(o.shouldIndentNextLine(f)){let p=0;for(let m=h-1;m>0;m--)if(!o.shouldIndentNextLine(t.getLineContent(h))){p=m;break}return{indentation:zi(t.getLineContent(p+1)),action:null,line:p+1}}else if(o.shouldDecrease(f))return{indentation:zi(f),action:null,line:h}}return{indentation:zi(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,r,o){if(e<4)return null;const s=this.getLanguageConfiguration(n);if(!s)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const u=this.getInheritIndentForLine(e,t,r),d=t.getLineContent(r);if(u){const h=u.line;if(h!==void 0){const f=s.onEnter(e,"",t.getLineContent(h),"");if(f){let p=zi(t.getLineContent(h));return f.removeText&&(p=p.substring(0,p.length-f.removeText)),f.indentAction===co.Indent||f.indentAction===co.IndentOutdent?p=o.shiftIndent(p):f.indentAction===co.Outdent&&(p=o.unshiftIndent(p)),a.shouldDecrease(d)&&(p=o.unshiftIndent(p)),f.appendText&&(p+=f.appendText),zi(p)}}return a.shouldDecrease(d)?u.action===co.Indent?u.indentation:o.unshiftIndent(u.indentation):u.action===co.Indent?o.shiftIndent(u.indentation):u.indentation}return null}getIndentForEnter(e,t,n,r){if(e<4)return null;t.forceTokenization(n.startLineNumber);const o=t.getLineTokens(n.startLineNumber),s=o4(o,n.startColumn-1),a=s.getLineContent();let u=!1,d;s.firstCharOffset>0&&o.getLanguageId(0)!==s.languageId?(u=!0,d=a.substr(0,n.startColumn-1-s.firstCharOffset)):d=o.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-s.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);const f=this.getIndentRulesSupport(s.languageId);if(!f)return null;const p=d,m=zi(d),v={getLineTokens:w=>t.getLineTokens(w),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(w,L)=>t.getLanguageIdAtPosition(w,L),getLineContent:w=>w===n.startLineNumber?p:t.getLineContent(w)},b=zi(o.getLineContent()),E=this.getInheritIndentForLine(e,v,n.startLineNumber+1);if(!E){const w=u?b:m;return{beforeEnter:w,afterEnter:w}}let S=u?b:E.indentation;return E.action===co.Indent&&(S=r.shiftIndent(S)),f.shouldDecrease(h)&&(S=r.unshiftIndent(S)),{beforeEnter:u?b:m,afterEnter:S}}getIndentActionForType(e,t,n,r,o){if(e<4)return null;const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(s.firstCharOffset)return null;const a=this.getIndentRulesSupport(s.languageId);if(!a)return null;const u=s.getLineContent(),d=u.substr(0,n.startColumn-1-s.firstCharOffset);let h;if(n.isEmpty()?h=u.substr(n.startColumn-1-s.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset),!a.shouldDecrease(d+h)&&a.shouldDecrease(d+r+h)){const f=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!f)return null;let p=f.indentation;return f.action!==co.Indent&&(p=o.unshiftIndent(p)),p}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const r=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),o=this.getLanguageConfiguration(r.languageId);if(!o)return null;const s=r.getLineContent(),a=s.substr(0,n.startColumn-1-r.firstCharOffset);let u;n.isEmpty()?u=s.substr(n.startColumn-1-r.firstCharOffset):u=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset);let d="";if(n.startLineNumber>1&&r.firstCharOffset===0){const b=this.getScopedLineTokens(t,n.startLineNumber-1);b.languageId===r.languageId&&(d=b.getLineContent())}const h=o.onEnter(e,d,a,u);if(!h)return null;const f=h.indentAction;let p=h.appendText;const m=h.removeText||0;p?f===co.Indent&&(p="	"+p):f===co.Indent||f===co.IndentOutdent?p="	":p="";let v=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return m&&(v=v.substring(0,v.length-m)),{indentAction:f,appendText:p,removeText:m,indentation:v}}getIndentationAtPosition(e,t,n){const r=e.getLineContent(t);let o=zi(r);return o.length>n-1&&(o=o.substring(0,n-1)),o}getScopedLineTokens(e,t,n){e.forceTokenization(t);const r=e.getLineTokens(t),o=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return o4(r,o)}}const _i=new BNe;class WNe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new eee(e,t,++this._order);return this._entries.push(n),this._resolved=null,Un(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===n){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new AA(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(eee.cmp),tde(this._entries.map(e=>e.configuration)))}}function tde(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class eee{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class AA{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new By(this.underlyingConfig):null,this.comments=AA._handleComments(this.underlyingConfig),this.characterPair=new hR(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Vue,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new NNe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return BF(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new ENe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new kNe(this.brackets)),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[r,o]=t.blockComment;n.blockCommentStartToken=r,n.blockCommentEndToken=o}return n}}U0(fR,i3);const gR=gi("undoRedoService");class nde{constructor(e,t){this.resource=e,this.elements=t}}class Zw{constructor(){this.id=Zw._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Zw._ID=0;Zw.None=new Zw;class Ff{constructor(){this.id=Ff._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Ff._ID=0;Ff.None=new Ff;class tee{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class VNe{constructor(e,t,n,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r}}class HNe extends VNe{constructor(e,t,n,r,o){super(e,t,n,r),this.minVisibleColumnIndentation=o}}class $Ne{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function zNe(i,e,t,n){return i!==t?qr(t-i,n):qr(0,n-e)}const Op=0;function UNe(i){return i===0}const Au=Math.pow(2,26);function qr(i,e){return i*Au+e}function a0(i){const e=i,t=Math.floor(e/Au),n=e-t*Au;return new $Ne(t,n)}function jNe(i){return Math.floor(i/Au)}function ks(i,e){return e<Au?i+e:i-i%Au+e}function KNe(i,e){const t=i,n=e;if(n-t<=0)return Op;const o=Math.floor(t/Au),s=Math.floor(n/Au),a=n-s*Au;if(o===s){const u=t-o*Au;return qr(0,a-u)}else return qr(s-o,a)}function s4(i,e){return i<e}function Bb(i,e){return i<=e}function RM(i,e){return i>=e}function MM(i){return qr(i.lineNumber-1,i.column-1)}function R2(i,e){const t=i,n=Math.floor(t/Au),r=t-n*Au,o=e,s=Math.floor(o/Au),a=o-s*Au;return new Q(n+1,r+1,s+1,a+1)}function GNe(i){const e=og(i);return qr(e.length-1,e[e.length-1].length)}class nee{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class qNe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>rq.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return KNe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?qr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):qr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=a0(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?qr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):qr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Bb(n,e)){this.nextEditIdx++;const r=a0(n),o=a0(this.translateOldToCur(t.endOffsetBeforeObj)),s=r.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,u=r.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+u,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class rq{constructor(e,t,n){this.endOffsetBeforeObj=a0(t),this.endOffsetAfterObj=a0(ks(e,n)),this.offsetObj=a0(e)}static from(e){return new rq(e.startOffset,e.endOffset,e.newLength)}}class cr{static visibleColumnFromColumn(e,t,n){const r=e.length,o=t-1<r?t-1:r;let s=0,a=0;for(;a<o;){const u=Fb(e,o,a);if(a+=u>=65536?2:1,u===9)s=cr.nextRenderTabStop(s,n);else{let d=EM(u);for(;a<o;){const h=Fb(e,o,a),f=EM(h);if(OF(d,f))break;a+=h>=65536?2:1,d=f}sg(u)||AF(u)?s=s+2:s=s+1}}return s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const r=e.length;let o=0,s=1,a=0;for(;a<r;){const u=Fb(e,r,a);a+=u>=65536?2:1;let d;if(u===9)d=cr.nextRenderTabStop(o,n);else{let f=EM(u);for(;a<r;){const p=Fb(e,r,a),m=EM(p);if(OF(f,m))break;a+=p>=65536?2:1,f=m}sg(u)||AF(u)?d=o+2:d=o+1}const h=a+1;if(d>=t){const f=t-o;return d-t<f?h:s}o=d,s=h}return r+1}static columnFromVisibleColumn2(e,t,n,r){let o=this.columnFromVisibleColumn(t.getLineContent(n),r,e.tabSize),s=t.getLineMinColumn(n);if(o<s)return s;let a=t.getLineMaxColumn(n);return o>a?a:o}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const a4=new Array;class wo{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=wo.cache[e];return n||(n=new wo(e,t),wo.cache[e]=n),n}return new wo(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let r=n>>5;if(r===0){const s=1<<n|this.items;return s===this.items?this:wo.create(s,this.additionalItems)}r--;const o=this.additionalItems.slice(0);for(;o.length<r;)o.push(0);return o[r]|=1<<(n&31),wo.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===a4&&e.additionalItems===a4)return t===this.items?this:t===e.items?e:wo.create(t,a4);const n=new Array;for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const o=this.additionalItems[r]||0,s=e.additionalItems[r]||0;n.push(o|s)}return wo.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}wo.cache=new Array(129);wo.empty=wo.create(0,a4);const iee={getKey(i){return i}};class YNe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class oq{constructor(e){this._length=e}get length(){return this._length}}class OA extends oq{constructor(e,t,n,r,o){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=o}static create(e,t,n){let r=e.length;return t&&(r=ks(r,t.length)),n&&(r=ks(r,n.length)),new OA(r,e,t,n,t?t.missingOpeningBracketIds:wo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new OA(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(ks(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class lg extends oq{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,r=!1){let o=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=ks(o,t.length),s=s.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=ks(o,n.length),s=s.merge(n.missingOpeningBracketIds)}return r?new ZNe(o,e.listHeight+1,e,t,n,s):new RA(o,e.listHeight+1,e,t,n,s)}static getEmpty(){return new XNe(Op,0,[],wo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const o=this.getChild(r);t=ks(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,r=e;for(let o=0;o<this.childrenLength;o++){const s=this.getChild(o);s&&(n=Math.min(n,s.computeMinIndentation(r,t)),r=ks(r,s.length))}return this.cachedMinIndentation=n,n}}class RA extends lg{constructor(e,t,n,r,o,s){super(e,t,s),this._item1=n,this._item2=r,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new RA(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class ZNe extends RA{toMutable(){return new RA(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class r3 extends lg{constructor(e,t,n,r){super(e,t,r),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new r3(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class XNe extends r3{toMutable(){return new r3(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const QNe=[];class sq extends oq{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return QNe}deepClone(){return this}}class py extends sq{get kind(){return 0}get missingOpeningBracketIds(){return wo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=a0(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=jNe(ks(e,this.length))+1;let s=Number.MAX_SAFE_INTEGER;for(let a=r;a<=o;a++){const u=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(u===0)continue;const h=cr.visibleColumnFromColumn(d,u,t.getOptions().tabSize);s=Math.min(s,h)}return s}}class n1 extends sq{constructor(e){super(e)}static create(e){const t=e,n=n1.cacheByLength.get(t);if(n)return n;const r=new n1(e);return n1.cacheByLength.set(t,r),r}get kind(){return 1}get missingOpeningBracketIds(){return wo.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}n1.cacheByLength=new Map;class JNe extends sq{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Ov=class{constructor(e,t,n,r,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=o}};class e2e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new t2e(this.textModel,this.bracketTokens),this._offset=Op,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return qr(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=ks(this._offset,e);const t=a0(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ks(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class t2e{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,s=o.getCount();let a=null;if(this.lineTokenOffset<s){const u=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&u===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const d=ia.getTokenType(u)===0,h=o.getEndOffset(this.lineTokenOffset);if(d&&h!==this.lineCharOffset){const f=o.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,h),m=this.bracketTokens.getSingleLanguageBracketTokens(f),v=m.regExpGlobal;if(v){v.lastIndex=0;const b=v.exec(p);b&&(a=m.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const r=zNe(e,t,this.lineIdx,this.lineCharOffset);return new Ov(r,0,-1,wo.getEmpty(),new py(r))}}class n2e{constructor(e,t){this.text=e,this._offset=Op,this.idx=0;const r=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,o=[];let s,a=0,u=0,d=0,h=0;const f=new Array;for(let v=0;v<60;v++)f.push(new Ov(qr(0,v),0,-1,wo.getEmpty(),new py(qr(0,v))));const p=new Array;for(let v=0;v<60;v++)p.push(new Ov(qr(1,v),0,-1,wo.getEmpty(),new py(qr(1,v))));if(r)for(r.lastIndex=0;(s=r.exec(e))!==null;){const v=s.index,b=s[0];if(b===`
`)a++,u=v+1;else{if(d!==v){let E;if(h===a){const S=v-d;if(S<f.length)E=f[S];else{const w=qr(0,S);E=new Ov(w,0,-1,wo.getEmpty(),new py(w))}}else{const S=a-h,w=v-u;if(S===1&&w<p.length)E=p[w];else{const L=qr(S,w);E=new Ov(L,0,-1,wo.getEmpty(),new py(L))}}o.push(E)}o.push(t.getToken(b)),d=v+b.length,h=a}}const m=e.length;if(d!==m){const v=h===a?qr(0,m-d):qr(a-h,m-u);o.push(new Ov(v,0,-1,wo.getEmpty(),new py(v)))}this.length=qr(a,m-u),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new TEe}}class o3{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(u,d){return t.getKey(`${u}:::${d}`)}const r=e.characterPair.getColorizedBrackets(),o=new Map,s=new Set;for(const[u,d]of r){s.add(u);let h=o.get(d);const f=n(e.languageId,u);h||(h={openingBrackets:wo.getEmpty(),first:f},o.set(d,h)),h.openingBrackets=h.openingBrackets.add(f,iee)}const a=new Map;for(const[u,d]of o){const h=qr(0,u.length);a.set(u,new Ov(h,2,d.first,d.openingBrackets,n1.create(h)))}for(const u of s){const d=qr(0,u.length),h=n(e.languageId,u);a.set(u,new Ov(d,1,h,wo.getEmpty().add(h,iee),n1.create(d)))}return new o3(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>i2e(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function i2e(i){const e=dc(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class r2e{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=o3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=o3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function o2e(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const s=e,a=i[s].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-s>=2?ide(s===0&&e===i.length?i:i.slice(s,e),!1):i[s]}let n=t(),r=t();if(!r)return n;for(let s=t();s;s=t())ree(n,r)<=ree(r,s)?(n=z9(n,r),r=s):r=z9(r,s);return z9(n,r)}function ide(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let r=0;r<n;r++){const o=r<<1;i[r]=lg.create23(i[o],i[o+1],o+3===t?i[o+2]:null,e)}t=n}return lg.create23(i[0],i[1],t>=3?i[2]:null,e)}function ree(i,e){return Math.abs(i.listHeight-e.listHeight)}function z9(i,e){return i.listHeight===e.listHeight?lg.create23(i,e,null,!1):i.listHeight>e.listHeight?s2e(i,e):a2e(e,i)}function s2e(i,e){i=i.toMutable();let t=i;const n=new Array;let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const s=n[o];r?s.childrenLength>=3?r=lg.create23(s.unappendChild(),r,null,!1):(s.appendChildOfSameHeight(r),r=void 0):s.handleChildrenChanged()}return r?lg.create23(i,r,null,!1):i}function a2e(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let r=e;for(let o=n.length-1;o>=0;o--){const s=n[o];r?s.childrenLength>=3?r=lg.create23(r,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(r),r=void 0):s.handleChildrenChanged()}return r?lg.create23(r,i,null,!1):i}class l2e{constructor(e){this.lastOffset=Op,this.nextNodes=[e],this.offsets=[Op],this.idxs=[]}readLongestNodeAt(e,t){if(s4(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=DN(this.nextNodes);if(!n)return;const r=DN(this.offsets);if(s4(e,r))return;if(s4(r,e))if(ks(r,n.length)<=e)this.nextNodeAfterCurrent();else{const o=U9(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(r),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=U9(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(r),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=DN(this.offsets),t=DN(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=DN(this.nextNodes),r=U9(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(ks(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function U9(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function DN(i){return i.length>0?i[i.length-1]:void 0}function oee(i,e,t,n){return new u2e(i,e,t,n).parseDocument()}class u2e{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw new Error("Not supported");this.oldNodeReader=n?new l2e(n):void 0,this.positionMapper=new qNe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(wo.getEmpty());return e||(e=lg.getEmpty()),e}parseList(e){const t=new Array;for(;;){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;const o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?o2e(t):ide(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!UNe(n)){const r=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>s4(o.length,n)?o.canBeReused(e):!1);if(r)return this._itemsFromCache++,this.tokenizer.skip(r.length),r}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new JNe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),r=this.parseList(n),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),OA.create(t.astNode,r,o.astNode)):OA.create(t.astNode,r,null);default:throw new Error("unexpected")}}}class c2e extends Oe{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Ce,this.denseKeyProvider=new YNe,this.brackets=new r2e(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const r=n.map(o=>new nee(qr(o.fromLineNumber-1,0),qr(o.toLineNumber,0),qr(o.toLineNumber-o.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(r,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new n2e(this.textModel.getValue(),n);this.initialAstWithoutTokens=oee(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const r=Q.lift(n.range);return new nee(MM(r.getStartPosition()),MM(r.getEndPosition()),GNe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const r=t,o=new e2e(this.textModel,this.brackets);return oee(o,e,r,n)}getBracketsInRange(e){const t=qr(e.startLineNumber-1,e.startColumn-1),n=qr(e.endLineNumber-1,e.endColumn-1),r=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return n2(o,Op,o.length,t,n,r),r}getBracketPairsInRange(e,t){const n=new Array,r=MM(e.getStartPosition()),o=MM(e.getEndPosition()),s=this.initialAstWithoutTokens||this.astWithTokens,a=new d2e(n,t,this.textModel);return rde(s,Op,s.length,r,o,a),n}}function n2(i,e,t,n,r,o,s=0){if(i.kind===1){const a=R2(e,t);o.push(new tee(a,s-1,!1))}else if(i.kind===3){const a=R2(e,t);o.push(new tee(a,s-1,!0))}else if(i.kind===4)for(const a of i.children)t=ks(e,a.length),Bb(e,r)&&RM(t,n)&&n2(a,e,t,n,r,o,s),e=t;else if(i.kind===2){s++;{const a=i.openingBracket;t=ks(e,a.length),Bb(e,r)&&RM(t,n)&&n2(a,e,t,n,r,o,s),e=t}if(i.child){const a=i.child;t=ks(e,a.length),Bb(e,r)&&RM(t,n)&&n2(a,e,t,n,r,o,s),e=t}if(i.closingBracket){const a=i.closingBracket;t=ks(e,a.length),Bb(e,r)&&RM(t,n)&&n2(a,e,t,n,r,o,s),e=t}}}class d2e{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function rde(i,e,t,n,r,o,s=0){var a;if(i.kind===2){const d=ks(e,i.openingBracket.length);let h=-1;o.includeMinIndentation&&(h=i.computeMinIndentation(e,o.textModel)),o.result.push(new HNe(R2(e,t),R2(e,d),i.closingBracket?R2(ks(d,((a=i.child)===null||a===void 0?void 0:a.length)||Op),t):void 0,s,h)),s++}let u=e;for(const d of i.children){const h=u;u=ks(u,d.length),Bb(h,r)&&Bb(n,u)&&rde(d,h,u,n,r,o,s)}}class h2e extends Oe{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Ra),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(e.onDidChangeLanguage(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(this.languageConfigurationService.onDidChange(n=>{var r;(!n.languageId||!((r=this.bracketPairsTree.value)===null||r===void 0)&&r.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Je;this.bracketPairsTree.value=f2e(e.add(new c2e(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}handleContentChanged(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t){let n=e.toLowerCase(),r=this.textModel.validatePosition(t);const o=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);let s=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!s)return null;let a=s.textIsBracket[n];return a?PM(this._findMatchingBracketUp(a,r,null)):null}matchBracket(e){return this._matchBracket(this.textModel.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,r){const o=t.getCount(),s=t.getLanguageId(r);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let d=r-1;d>=0;d--){const h=t.getEndOffset(d);if(h<=a)break;if(bf(t.getStandardTokenType(d))||t.getLanguageId(d)!==s){a=h;break}}let u=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let d=r+1;d<o;d++){const h=t.getStartOffset(d);if(h>=u)break;if(bf(t.getStandardTokenType(d))||t.getLanguageId(d)!==s){u=h;break}}return{searchStartOffset:a,searchEndOffset:u}}_matchBracket(e){const t=e.lineNumber,n=this.textModel.getLineTokens(t),r=this.textModel.getLineContent(t),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(s&&!bf(n.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:u}=this._establishBracketSearchOffsets(e,n,s,o),d=null;for(;;){const h=kc.findNextBracketInRange(s.forwardRegex,t,r,a,u);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const f=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),p=this._matchFoundBracket(h,s.textIsBracket[f],s.textIsOpenBracket[f],null);if(p){if(p instanceof Jg)return null;d=p}}a=h.endColumn-1}if(d)return d}if(o>0&&n.getStartOffset(o)===e.column-1){const a=o-1,u=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(u&&!bf(n.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,u,a);const f=kc.findPrevBracketInRange(u.reversedRegex,t,r,d,h);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const p=r.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),m=this._matchFoundBracket(f,u.textIsBracket[p],u.textIsOpenBracket[p],null);if(m)return m instanceof Jg?null:m}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return o?o instanceof Jg?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const r=e.languageId,o=e.reversedRegex;let s=-1,a=0;const u=(d,h,f,p)=>{for(;;){if(n&&++a%100===0&&!n())return Jg.INSTANCE;const m=kc.findPrevBracketInRange(o,d,h,f,p);if(!m)break;const v=h.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(v)?s++:e.isClose(v)&&s--,s===0)return m;p=m.startColumn-1}return null};for(let d=t.lineNumber;d>=1;d--){const h=this.textModel.getLineTokens(d),f=h.getCount(),p=this.textModel.getLineContent(d);let m=f-1,v=p.length,b=p.length;d===t.lineNumber&&(m=h.findTokenIndexAtOffset(t.column-1),v=t.column-1,b=t.column-1);let E=!0;for(;m>=0;m--){const S=h.getLanguageId(m)===r&&!bf(h.getStandardTokenType(m));if(S)E?v=h.getStartOffset(m):(v=h.getStartOffset(m),b=h.getEndOffset(m));else if(E&&v!==b){const w=u(d,p,v,b);if(w)return w}E=S}if(E&&v!==b){const S=u(d,p,v,b);if(S)return S}}return null}_findMatchingBracketDown(e,t,n){const r=e.languageId,o=e.forwardRegex;let s=1,a=0;const u=(h,f,p,m)=>{for(;;){if(n&&++a%100===0&&!n())return Jg.INSTANCE;const v=kc.findNextBracketInRange(o,h,f,p,m);if(!v)break;const b=f.substring(v.startColumn-1,v.endColumn-1).toLowerCase();if(e.isOpen(b)?s++:e.isClose(b)&&s--,s===0)return v;p=v.endColumn-1}return null},d=this.textModel.getLineCount();for(let h=t.lineNumber;h<=d;h++){const f=this.textModel.getLineTokens(h),p=f.getCount(),m=this.textModel.getLineContent(h);let v=0,b=0,E=0;h===t.lineNumber&&(v=f.findTokenIndexAtOffset(t.column-1),b=t.column-1,E=t.column-1);let S=!0;for(;v<p;v++){const w=f.getLanguageId(v)===r&&!bf(f.getStandardTokenType(v));if(w)S||(b=f.getStartOffset(v)),E=f.getEndOffset(v);else if(S&&b!==E){const L=u(h,m,b,E);if(L)return L}S=w}if(S&&b!==E){const w=u(h,m,b,E);if(w)return w}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,r=null;for(let o=t.lineNumber;o>=1;o--){const s=this.textModel.getLineTokens(o),a=s.getCount(),u=this.textModel.getLineContent(o);let d=a-1,h=u.length,f=u.length;if(o===t.lineNumber){d=s.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const m=s.getLanguageId(d);n!==m&&(n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let p=!0;for(;d>=0;d--){const m=s.getLanguageId(d);if(n!==m){if(r&&p&&h!==f){const b=kc.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(b)return this._toFoundBracket(r,b);p=!1}n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const v=!!r&&!bf(s.getStandardTokenType(d));if(v)p?h=s.getStartOffset(d):(h=s.getStartOffset(d),f=s.getEndOffset(d));else if(r&&p&&h!==f){const b=kc.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(b)return this._toFoundBracket(r,b)}p=v}if(r&&p&&h!==f){const m=kc.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(m)return this._toFoundBracket(r,m)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let r=null,o=null;for(let s=t.lineNumber;s<=n;s++){const a=this.textModel.getLineTokens(s),u=a.getCount(),d=this.textModel.getLineContent(s);let h=0,f=0,p=0;if(s===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),f=t.column-1,p=t.column-1;const v=a.getLanguageId(h);r!==v&&(r=v,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets)}let m=!0;for(;h<u;h++){const v=a.getLanguageId(h);if(r!==v){if(o&&m&&f!==p){const E=kc.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(E)return this._toFoundBracket(o,E);m=!1}r=v,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets}const b=!!o&&!bf(a.getStandardTokenType(h));if(b)m||(f=a.getStartOffset(h)),p=a.getEndOffset(h);else if(o&&m&&f!==p){const E=kc.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(E)return this._toFoundBracket(o,E)}m=b}if(o&&m&&f!==p){const v=kc.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(v)return this._toFoundBracket(o,v)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const m=Date.now();n=()=>Date.now()-m<=t}const r=this.textModel.validatePosition(e),o=this.textModel.getLineCount(),s=new Map;let a=[];const u=(m,v)=>{if(!s.has(m)){let b=[];for(let E=0,S=v?v.brackets.length:0;E<S;E++)b[E]=0;s.set(m,b)}a=s.get(m)};let d=0;const h=(m,v,b,E,S)=>{for(;;){if(n&&++d%100===0&&!n())return Jg.INSTANCE;const w=kc.findNextBracketInRange(m.forwardRegex,v,b,E,S);if(!w)break;const L=b.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),A=m.textIsBracket[L];if(A&&(A.isOpen(L)?a[A.index]++:A.isClose(L)&&a[A.index]--,a[A.index]===-1))return this._matchFoundBracket(w,A,!1,n);E=w.endColumn-1}return null};let f=null,p=null;for(let m=r.lineNumber;m<=o;m++){const v=this.textModel.getLineTokens(m),b=v.getCount(),E=this.textModel.getLineContent(m);let S=0,w=0,L=0;if(m===r.lineNumber){S=v.findTokenIndexAtOffset(r.column-1),w=r.column-1,L=r.column-1;const N=v.getLanguageId(S);f!==N&&(f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p))}let A=!0;for(;S<b;S++){const N=v.getLanguageId(S);if(f!==N){if(p&&A&&w!==L){const M=h(p,m,E,w,L);if(M)return PM(M);A=!1}f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p)}const H=!!p&&!bf(v.getStandardTokenType(S));if(H)A||(w=v.getStartOffset(S)),L=v.getEndOffset(S);else if(p&&A&&w!==L){const M=h(p,m,E,w,L);if(M)return PM(M)}A=H}if(p&&A&&w!==L){const N=h(p,m,E,w,L);if(N)return PM(N)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let r=e.textIsBracket[n];return r?{range:t,open:r.open,close:r.close,isOpen:e.textIsOpenBracket[n]}:null}}function f2e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class Jg{constructor(){this._searchCanceledBrand=void 0}}Jg.INSTANCE=new Jg;function PM(i){return i instanceof Jg?null:i}const g2e=ye("editor.lineHighlightBackground",{dark:null,light:null,hc:null},C("lineHighlight","Background color for the highlight of line at the cursor position.")),see=ye("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},C("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),p2e=ye("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},C("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),m2e=ye("editor.rangeHighlightBorder",{dark:null,light:null,hc:el},C("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),_2e=ye("editor.symbolHighlightBackground",{dark:AH,light:AH,hc:null},C("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),v2e=ye("editor.symbolHighlightBorder",{dark:null,light:null,hc:el},C("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),ode=ye("editorCursor.foreground",{dark:"#AEAFAD",light:we.black,hc:we.white},C("caret","Color of the editor cursor.")),b2e=ye("editorCursor.background",null,C("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),i1=ye("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},C("editorWhitespaces","Color of whitespace characters in the editor.")),UB=ye("editorIndentGuide.background",{dark:i1,light:i1,hc:i1},C("editorIndentGuides","Color of the editor indentation guides.")),jB=ye("editorIndentGuide.activeBackground",{dark:i1,light:i1,hc:i1},C("editorActiveIndentGuide","Color of the active editor indentation guides.")),sde=ye("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:we.white},C("editorLineNumbers","Color of editor line numbers.")),j9=ye("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:el},C("editorActiveLineNumber","Color of editor active line number"),!1,C("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),C2e=ye("editorLineNumber.activeForeground",{dark:j9,light:j9,hc:j9},C("editorActiveLineNumber","Color of editor active line number")),y2e=ye("editorRuler.foreground",{dark:"#5A5A5A",light:we.lightgrey,hc:we.white},C("editorRuler","Color of the editor rulers.")),w2e=ye("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},C("editorBracketMatchBackground","Background color behind matching brackets")),ade=ye("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:go},C("editorBracketMatchBorder","Color for matching brackets boxes")),S2e=ye("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},C("editorOverviewRulerBorder","Color of the overview ruler border.")),E2e=ye("editorOverviewRuler.background",null,C("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),L2e=ye("editorGutter.background",{dark:oc,light:oc,hc:oc},C("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),x2e=ye("editorUnnecessaryCode.border",{dark:null,light:null,hc:we.fromHex("#fff").transparent(.8)},C("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),D2e=ye("editorUnnecessaryCode.opacity",{dark:we.fromHex("#000a"),light:we.fromHex("#0007"),hc:null},C("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),T2e=ye("editorGhostText.border",{dark:null,light:null,hc:we.fromHex("#fff").transparent(.8)},C("editorGhostTextBorder","Border color of ghost text in the editor.")),I2e=ye("editorGhostText.foreground",{dark:we.fromHex("#ffffff56"),light:we.fromHex("#0007"),hc:null},C("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),k2e=ye("editorGhostText.background",{dark:null,light:null,hc:null},C("editorGhostTextBackground","Background color of the ghost text in the editor.")),K9=new we(new fi(0,122,204,.6)),N2e=ye("editorOverviewRuler.rangeHighlightForeground",{dark:K9,light:K9,hc:K9},C("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),A2e=ye("editorOverviewRuler.errorForeground",{dark:new we(new fi(255,18,18,.7)),light:new we(new fi(255,18,18,.7)),hc:new we(new fi(255,50,50,1))},C("overviewRuleError","Overview ruler marker color for errors.")),O2e=ye("editorOverviewRuler.warningForeground",{dark:vp,light:vp,hc:IB},C("overviewRuleWarning","Overview ruler marker color for warnings.")),R2e=ye("editorOverviewRuler.infoForeground",{dark:Gh,light:Gh,hc:MG},C("overviewRuleInfo","Overview ruler marker color for infos.")),lde=ye("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},C("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),ude=ye("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},C("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),cde=ye("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},C("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),dde=ye("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),hde=ye("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),fde=ye("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),M2e=ye("editorBracketHighlight.unexpectedBracket.foreground",{dark:new we(new fi(255,18,18,.8)),light:new we(new fi(255,18,18,.8)),hc:new we(new fi(255,50,50,1))},C("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),P2e=ye("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),F2e=ye("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),B2e=ye("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),W2e=ye("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),V2e=ye("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),H2e=ye("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),$2e=ye("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),z2e=ye("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),U2e=ye("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),j2e=ye("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),K2e=ye("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),G2e=ye("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));fr((i,e)=>{const t=i.getColor(oc);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(uR);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const r=i.getColor(L2e);r&&e.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const o=i.getColor(p2e);o&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${o}; }`);const s=i.getColor(m2e);s&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${s}; }`);const a=i.getColor(_2e);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const u=i.getColor(v2e);u&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${u}; }`);const d=i.getColor(i1);d&&(e.addRule(`.monaco-editor .mtkw { color: ${d} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${d} !important; }`))});class q2e extends Oe{constructor(e){super(),this.textModel=e,this.colorProvider=new gde,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const r=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(const s of o)r.push({id:`bracket${s.range.toString()}-${s.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(s)},ownerId:0,range:s.range});return r}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class gde{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}fr((i,e)=>{const t=[lde,ude,cde,dde,hde,fde],n=new gde;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(M2e)}; }`);let r=t.map(o=>i.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const s=r[o%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});var Y2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},G9=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function Z2e(){return new hNe}function X2e(i){const e=Z2e();return e.acceptChunk(i),e.finish()}function aee(i,e){return(typeof i=="string"?X2e(i):i).create(e)}let FM=0;const Q2e=999,J2e=1e4;class eAe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join("")}while(!0)}}const TN=()=>{throw new Error("Invalid change accessor")};let El=class Cf extends Oe{constructor(e,t,n,r=null,o,s,a){super(),this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onWillDispose=this._register(new Ce),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new rAe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new Ce),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Ce),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Ce),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new Ce),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Ce),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new Ce),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new oAe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Ce),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(p=>{this._onDidChangeContentOrInjectedText.fire(p.rawContentChangedEvent)})),FM++,this.id="$model"+FM,this.isForSimpleWidget=t.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=rn.parse("inmemory://model/"+FM):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:u,disposable:d}=aee(e,t.defaultEOL);this._buffer=u,this._bufferDisposable=d,this._options=Cf.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new Q(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=f>Cf.LARGE_FILE_SIZE_THRESHOLD||h>Cf.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=f>Cf.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||E0,this._languageRegistryListener=this._languageConfigurationService.onDidChange(p=>{p.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=Eue(FM),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new lee,this._commandManager=new UG(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Uu(this._modeService.languageIdCodec),this._tokens2=new JG(this._modeService.languageIdCodec),this._tokenization=new bNe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new h2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new q2e(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=TJ(e,t.tabSize,t.insertSpaces);return new t4({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new t4({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new bw([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new t3(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=aee(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,o,s,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:s,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new lee,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new t1([new fNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,o,s),0,r,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new t1([new mNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,o,s),0,r,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){const o=t[n],s=o.range,a=o.cachedAbsoluteStart-o.start,u=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),d=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);o.cachedAbsoluteStart=u,o.cachedAbsoluteEnd=d,o.cachedVersionId=e,o.start=u-a,o.end=d-a,S0(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let r=1;r<=n;r++){const o=this._buffer.getLineLength(r);o>=J2e?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new t4({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:s});if(this._options.equals(a))return;let u=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(u)}detectIndentation(e,t){this._assertNotDisposed();let n=TJ(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let r=0;for(let s=0;s<e.length;s++)e.charAt(s)==="	"?r+=t:r++;let o="";if(!n){let s=Math.floor(r/t);r=r%t;for(let a=0;a<s;a++)o+="	"}for(let s=0;s<r;s++)o+=" ";return o}static normalizeIndentation(e,t,n){let r=Na(e);return r===-1&&(r=e.length),Cf._normalizeIndentationFromWhitespace(e.substring(0,r),t,n)+e.substring(r)}normalizeIndentation(e){return this._assertNotDisposed(),Cf.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(wue.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new eAe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn;let o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),s=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(o<1)o=1,s=1;else if(o>t)o=t,s=this.getLineMaxColumn(o);else if(s<=1)s=1;else{const f=this.getLineMaxColumn(o);s>=f&&(s=f)}const a=e.endLineNumber,u=e.endColumn;let d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof u=="number"&&!isNaN(u)?u:1);if(d<1)d=1,h=1;else if(d>t)d=t,h=this.getLineMaxColumn(d);else if(h<=1)h=1;else{const f=this.getLineMaxColumn(d);h>=f&&(h=f)}return n===o&&r===s&&a===d&&u===h&&e instanceof Q&&!(e instanceof wt)?e:new Q(o,s,d,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(n===1){const s=this._buffer.getLineCharCode(e,t-2);if(Vo(s))return!1}return!0}_validatePosition(e,t,n){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=this._buffer.getLineCount();if(r<1)return new Ee(1,1);if(r>s)return new Ee(s,this.getLineMaxColumn(s));if(o<=1)return new Ee(r,1);const a=this.getLineMaxColumn(r);if(o>=a)return new Ee(r,a);if(n===1){const u=this._buffer.getLineCharCode(r,o-2);if(Vo(u))return new Ee(r,o-1)}return new Ee(r,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof Ee&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,r,0)||!this._isValidPosition(o,s,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(n,r-2):0,u=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,d=Vo(a),h=Vo(u);return!d&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Q&&!(e instanceof wt)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),o=n.lineNumber,s=n.column,a=r.lineNumber,u=r.column;{const d=s>1?this._buffer.getLineCharCode(o,s-2):0,h=u>1&&u<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,u-2):0,f=Vo(d),p=Vo(h);return!f&&!p?new Q(o,s,a,u):o===a&&s===u?new Q(o,s-1,a,u-1):f&&p?new Q(o,s-1,a,u+1):f?new Q(o,s-1,a,u):new Q(o,s,a,u+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,o,s,a=Q2e){this._assertNotDisposed();let u=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>Q.isIRange(f))&&(u=t.map(f=>this.validateRange(f)))),u===null&&(u=[this.getFullModelRange()]),u=u.sort((f,p)=>f.startLineNumber-p.startLineNumber||f.startColumn-p.startColumn);const d=[];d.push(u.reduce((f,p)=>Q.areIntersecting(f,p)?f.plusRange(p):(d.push(f),p)));let h;if(!n&&e.indexOf(`
`)<0){const p=new hb(e,n,r,o).parseSearchRequest();if(!p)return[];h=m=>this.findMatchesLineByLine(m,p,s,a)}else h=f=>kM.findMatches(this,new hb(e,n,r,o),f,s,a);return d.map(h).reduce((f,p)=>f.concat(p),[])}findNextMatch(e,t,n,r,o,s){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const d=new hb(e,n,r,o).parseSearchRequest();if(!d)return null;const h=this.getLineCount();let f=new Q(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),p=this.findMatchesLineByLine(f,d,s,1);return kM.findNextMatch(this,new hb(e,n,r,o),a,s),p.length>0||(f=new Q(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),p=this.findMatchesLineByLine(f,d,s,1),p.length>0)?p[0]:null}return kM.findNextMatch(this,new hb(e,n,r,o),a,s)}findPreviousMatch(e,t,n,r,o,s){this._assertNotDisposed();const a=this.validatePosition(t);return kM.findPreviousMatch(this,new hb(e,n,r,o),a,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof O9?e:new O9(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let r=t.map(s=>({range:this.validateRange(s.range),text:s.text})),o=!0;if(e)for(let s=0,a=e.length;s<a;s++){let u=e[s],d=!1;for(let h=0,f=r.length;h<f;h++){let p=r[h].range,m=p.startLineNumber>u.endLineNumber,v=u.startLineNumber>p.endLineNumber;if(!m&&!v){d=!0;break}}if(!d){o=!1;break}}if(o)for(let s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){let u=this._trimAutoWhitespaceLines[s],d=this.getLineMaxColumn(u),h=!0;for(let f=0,p=r.length;f<p;f++){let m=r[f].range,v=r[f].text;if(!(u<m.startLineNumber||u>m.endLineNumber)&&!(u===m.startLineNumber&&m.startColumn===d&&m.isEmpty()&&v&&v.length>0&&v.charAt(0)===`
`)&&!(u===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&v&&v.length>0&&v.charAt(v.length-1)===`
`)){h=!1;break}}if(h){const f=new Q(u,1,u,d);t.push(new O9(null,f,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,r){const o=e.map(s=>{const a=this.getPositionAt(s.newPosition),u=this.getPositionAt(s.newEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:s.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,n,r)}_applyRedo(e,t,n,r){const o=e.map(s=>{const a=this.getPositionAt(s.oldPosition),u=this.getPositionAt(s.oldEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:s.newText}});this._applyUndoRedoEdits(o,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,o,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),s=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,s.length!==0){for(let d=0,h=s.length;d<h;d++){const f=s[d],[p,m,v]=A1(f.text);this._tokens.acceptEdit(f.range,p,m),this._tokens2.acceptEdit(f.range,p,m,v,f.text.length>0?f.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}let a=[];this._increaseVersionId();let u=n;for(let d=0,h=s.length;d<h;d++){const f=s[d],[p]=A1(f.text);this._onDidChangeDecorations.fire();const m=f.range.startLineNumber,v=f.range.endLineNumber,b=v-m,E=p,S=Math.min(b,E),w=E-b,L=o-u-w+m,A=L,N=L+E,H=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Ee(A,1)),this.getOffsetAt(new Ee(N,this.getLineMaxColumn(N))),0),M=tf.fromDecorations(H),R=new dw(M);for(let q=S;q>=0;q--){const X=m+q,$=L+q;R.takeFromEndWhile(O=>O.lineNumber>$);const I=R.takeFromEndWhile(O=>O.lineNumber===$);a.push(new YJ(X,this.getLineContent($),I))}if(S<b){const q=m+S;a.push(new gNe(q+1,v))}if(S<E){const q=new dw(M),X=m+S,$=E-S,I=o-u-$+X+1;let O=[],B=[];for(let W=0;W<$;W++){let j=I+W;B[W]=this.getLineContent(j),q.takeWhile(U=>U.lineNumber<j),O[W]=q.takeWhile(U=>U.lineNumber===j)}a.push(new pNe(X+1,m+E,B,O))}u+=w}this._emitContentChangedEvent(new t1(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(r=>new YJ(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeContentOrInjectedText.fire(new qce(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(o,s)=>this._deltaDecorationsImpl(e,[],[{range:o,options:s}])[0],changeDecoration:(o,s)=>{this._changeDecorationImpl(o,s)},changeDecorationOptions:(o,s)=>{this._changeDecorationOptionsImpl(o,cee(s))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,s)=>o.length===0&&s.length===0?[]:this._deltaDecorationsImpl(e,o,s)},r=null;try{r=t(n)}catch(o){gn(o)}return n.addDecoration=TN,n.changeDecoration=TN,n.changeDecorationOptions=TN,n.removeDecoration=TN,n.deltaDecorations=TN,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:uee[n]}])[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const o=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),s,a,o),r.setOptions(uee[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,r=t.length;n<r;n++){const o=t[n];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,r=!1){let o=this.getLineCount(),s=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),u=this.getLineMaxColumn(a);const d=new Q(s,1,a,u),h=this._getDecorationsInRange(d,n,r);return h.push(...this._decorationProvider.getDecorationsInRange(d,n,r)),h}getDecorationsInRange(e,t=0,n=!1){let r=this.validateRange(e);const o=this._getDecorationsInRange(r,t,n);return o.push(...this._decorationProvider.getDecorationsInRange(r,t,n)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return tf.fromDecorations(r).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),s=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,s,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber)}if(n.options.before||t.before){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}r!==o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const r=this.getVersionId(),o=t.length;let s=0;const a=n.length;let u=0,d=new Array(a);for(;s<o||u<a;){let h=null;if(s<o){do h=this._decorations[t[s++]];while(!h&&s<o);if(h){if(h.options.after){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber)}if(h.options.before){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<a){if(!h){const E=++this._lastDecorationId,S=`${this._instanceId};${E}`;h=new Fce(S,0,0),this._decorations[S]=h}const f=n[u],p=this._validateRangeRelaxedNoAllocations(f.range),m=cee(f.options),v=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),b=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);h.ownerId=e,h.reset(r,v,b,p),h.setOptions(m),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(h),d[u]=h.id,u++}else h&&delete this._decorations[h.id]}return d}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];let a=0,u=0,d=!1;for(let h=0,f=s.tokens.length;h<f;h++){const p=s.startLineNumber+h;d?(this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[h],!1),u=p):this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[h],!0)&&(d=!0,a=p,u=p)}d&&n.push({fromLineNumber:a,toLineNumber:u})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new Ee(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const r=this.validatePosition(new Ee(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(r,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),r=this._getLineTokens(t.lineNumber),o=r.findTokenIndexAtOffset(t.column-1),[s,a]=Cf._findLanguageBoundaries(r,o),u=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(o)).getWordDefinition(),n.substring(s,a),s);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u;if(o>0&&s===t.column-1){const[d,h]=Cf._findLanguageBoundaries(r,o-1),f=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(o-1)).getWordDefinition(),n.substring(d,h),d);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let r=0;for(let s=t;s>=0&&e.getLanguageId(s)===n;s--)r=e.getStartOffset(s);let o=e.getLineContent().length;for(let s=t,a=e.getCount();s<a&&e.getLanguageId(s)===n;s++)o=e.getEndOffset(s);return[r,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}static computeIndentLevel(e,t){let n=0,r=0,o=e.length;for(;r<o;){let s=e.charCodeAt(r);if(s===32)n++;else if(s===9)n=n-n%t+t;else break;r++}return r===o?-1:n}_computeIndentLevel(e){return Cf.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const r=this.getLineCount();if(e<1||e>r)throw new Error("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this._languageId).foldingRules,s=!!(o&&o.offSide);let a=-2,u=-1,d=-2,h=-1;const f=M=>{if(a!==-1&&(a===-2||a>M-1)){a=-1,u=-1;for(let R=M-2;R>=0;R--){let q=this._computeIndentLevel(R);if(q>=0){a=R,u=q;break}}}if(d===-2){d=-1,h=-1;for(let R=M;R<r;R++){let q=this._computeIndentLevel(R);if(q>=0){d=R,h=q;break}}}};let p=-2,m=-1,v=-2,b=-1;const E=M=>{if(p===-2){p=-1,m=-1;for(let R=M-2;R>=0;R--){let q=this._computeIndentLevel(R);if(q>=0){p=R,m=q;break}}}if(v!==-1&&(v===-2||v<M-1)){v=-1,b=-1;for(let R=M;R<r;R++){let q=this._computeIndentLevel(R);if(q>=0){v=R,b=q;break}}}};let S=0,w=!0,L=0,A=!0,N=0,H=0;for(let M=0;w||A;M++){const R=e-M,q=e+M;M>1&&(R<1||R<t)&&(w=!1),M>1&&(q>r||q>n)&&(A=!1),M>5e4&&(w=!1,A=!1);let X=-1;if(w){const I=this._computeIndentLevel(R-1);I>=0?(d=R-1,h=I,X=Math.ceil(I/this._options.indentSize)):(f(R),X=this._getIndentLevelForWhitespaceLine(s,u,h))}let $=-1;if(A){const I=this._computeIndentLevel(q-1);I>=0?(p=q-1,m=I,$=Math.ceil(I/this._options.indentSize)):(E(q),$=this._getIndentLevelForWhitespaceLine(s,m,b))}if(M===0){H=X;continue}if(M===1){if(q<=r&&$>=0&&H+1===$){w=!1,S=q,L=q,N=$;continue}if(R>=1&&X>=0&&X-1===H){A=!1,S=R,L=R,N=X;continue}if(S=e,L=e,N=H,N===0)return{startLineNumber:S,endLineNumber:L,indent:N}}w&&(X>=N?S=R:w=!1),A&&($>=N?L=q:A=!1)}return{startLineNumber:S,endLineNumber:L,indent:N}}getLinesBracketGuides(e,t,n,r){var o,s,a,u,d;const h=[],f=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new Q(e,1,t,this.getLineMaxColumn(t)));let p;if(n&&f.length>0){const S=e<=n.lineNumber&&n.lineNumber<=t?f.filter(w=>Q.strictContainsPosition(w.range,n)):this._bracketPairColorizer.getBracketPairsInRange(Q.fromPositions(n));p=(o=Axe(S,w=>w.range.startLineNumber!==w.range.endLineNumber))===null||o===void 0?void 0:o.range}const m=new dw(f),v=new Array,b=new Array,E=new pde;for(let S=e;S<=t;S++){let w=new Array;b.length>0&&(w=w.concat(b),b.length=0),h.push(w);for(const A of m.takeWhile(N=>N.openingBracketRange.startLineNumber<=S)||[]){if(A.range.startLineNumber===A.range.endLineNumber)continue;const N=Math.min(this.getVisibleColumnFromPosition(A.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(s=A.closingBracketRange)===null||s===void 0?void 0:s.getStartPosition())!==null&&a!==void 0?a:A.range.getEndPosition()),A.minVisibleColumnIndentation+1);let H=!1;A.closingBracketRange&&Na(this.getLineContent(A.closingBracketRange.startLineNumber))<A.closingBracketRange.startColumn-1&&(H=!0);const M=A.openingBracketRange.getStartPosition(),R=(d=(u=A.closingBracketRange)===null||u===void 0?void 0:u.getStartPosition())!==null&&d!==void 0?d:A.range.getEndPosition();A.closingBracketRange===void 0?v[A.nestingLevel]=null:v[A.nestingLevel]={nestingLevel:A.nestingLevel,guideVisibleColumn:N,start:M,visibleStartColumn:this.getVisibleColumnFromPosition(M),end:R,visibleEndColumn:this.getVisibleColumnFromPosition(R),bracketPair:A,renderHorizontalEndLineAtTheBottom:H}}for(const A of v){if(!A)continue;const N=p&&A.bracketPair.range.equalsRange(p),H=E.getInlineClassNameOfLevel(A.nestingLevel)+(r.highlightActive&&N?" "+E.activeClassName:"");(N&&r.horizontalGuides!==Jb.Disabled||r.includeInactive&&r.horizontalGuides===Jb.Enabled)&&(A.start.lineNumber===S&&A.guideVisibleColumn<A.visibleStartColumn&&w.push(new My(A.guideVisibleColumn,H,new BH(!1,A.start.column))),A.end.lineNumber===S+1&&A.guideVisibleColumn<A.visibleEndColumn&&b.push(new My(A.guideVisibleColumn,H,new BH(!A.renderHorizontalEndLineAtTheBottom,A.end.column))))}let L=Number.MAX_SAFE_INTEGER;for(let A=v.length-1;A>=0;A--){const N=v[A];if(!N)continue;const H=r.highlightActive&&p&&N.bracketPair.range.equalsRange(p),M=E.getInlineClassNameOfLevel(N.nestingLevel)+(H?" "+E.activeClassName:"");(H||r.includeInactive)&&N.renderHorizontalEndLineAtTheBottom&&N.end.lineNumber===S+1&&b.push(new My(N.guideVisibleColumn,M,null)),!(N.end.lineNumber<=S||N.start.lineNumber>=S)&&(N.guideVisibleColumn>=L&&!H||(L=N.guideVisibleColumn,(H||r.includeInactive)&&w.push(new My(N.guideVisibleColumn,M,null))))}w.sort((A,N)=>A.visibleColumn-N.visibleColumn)}return h}getVisibleColumnFromPosition(e){return cr.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(r&&r.offSide);let s=new Array(t-e+1),a=-2,u=-1,d=-2,h=-1;for(let f=e;f<=t;f++){let p=f-e;const m=this._computeIndentLevel(f-1);if(m>=0){a=f-1,u=m,s[p]=Math.ceil(m/this._options.indentSize);continue}if(a===-2){a=-1,u=-1;for(let v=f-2;v>=0;v--){let b=this._computeIndentLevel(v);if(b>=0){a=v,u=b;break}}}if(d!==-1&&(d===-2||d<f-1)){d=-1,h=-1;for(let v=f;v<n;v++){let b=this._computeIndentLevel(v);if(b>=0){d=v,h=b;break}}}s[p]=this._getIndentLevelForWhitespaceLine(o,u,h)}return s}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return tAe(this.getLineContent(e))+1}};El.MODEL_SYNC_LIMIT=50*1024*1024;El.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;El.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;El.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Js.tabSize,indentSize:Js.indentSize,insertSpaces:Js.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Js.trimAutoWhitespace,largeFileOptimizations:Js.largeFileOptimizations,bracketPairColorizationOptions:Js.bracketPairColorizationOptions};El=Y2e([G9(4,gR),G9(5,Fs),G9(6,fR)],El);function tAe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class pde{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function q9(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function Y9(i){return!!i.options.after||!!i.options.before}class lee{constructor(){this._decorationsTree0=new R9,this._decorationsTree1=new R9,this._injectedTextDecorationsTree=new R9}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,o){const s=e.getVersionId(),a=this._intervalSearch(t,n,r,o,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,r,o){const s=this._decorationsTree0.intervalSearch(e,t,n,r,o),a=this._decorationsTree1.intervalSearch(e,t,n,r,o),u=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,o);return s.concat(a).concat(u)}getInjectedTextInInterval(e,t,n,r){const o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,o);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,r).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,r){const o=e.getVersionId(),s=this._search(t,n,r,o);return this._ensureNodesHaveRanges(e,s)}_search(e,t,n,r){if(n)return this._decorationsTree1.search(e,t,r);{const o=this._decorationsTree0.search(e,t,r),s=this._decorationsTree1.search(e,t,r),a=this._injectedTextDecorationsTree.search(e,t,r);return o.concat(s).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){Y9(e)?this._injectedTextDecorationsTree.insert(e):q9(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Y9(e)?this._injectedTextDecorationsTree.delete(e):q9(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Y9(e)?this._injectedTextDecorationsTree.resolveNode(e,t):q9(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}}function mv(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class mde{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class nAe extends mde{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Sl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class iAe extends mde{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?we.fromHex(e):t.getColor(e.id)}}class MA{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof MA?e:new MA(e)}}class Ln{constructor(e){var t;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?mv(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new nAe(e.overviewRuler):null,this.minimap=e.minimap?new iAe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?mv(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?mv(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?mv(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?mv(e.marginClassName):null,this.inlineClassName=e.inlineClassName?mv(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?mv(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?mv(e.afterContentClassName):null,this.after=e.after?MA.from(e.after):null,this.before=e.before?MA.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1}static register(e){return new Ln(e)}static createDynamic(e){return new Ln(e)}}Ln.EMPTY=Ln.register({description:"empty"});const uee=[Ln.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ln.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ln.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ln.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function cee(i){return i instanceof Ln?i:Ln.createDynamic(i)}class rAe extends Oe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Ce),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class oAe extends Oe{constructor(){super(),this._fastEmitter=this._register(new Ce),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Ce),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const sAe=()=>!0,dee=()=>!1,aAe=i=>i===" "||i==="	";class Bc{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,o=r.get(130);this.readOnly=r.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(103),this.lineHeight=r.get(58),this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(115),this.wordSeparators=r.get(116),this.emptySelectionClipboard=r.get(32),this.copyWithSyntaxHighlighting=r.get(21),this.multiCursorMergeOverlapping=r.get(68),this.multiCursorPaste=r.get(70),this.autoClosingBrackets=r.get(5),this.autoClosingQuotes=r.get(8),this.autoClosingDelete=r.get(6),this.autoClosingOvertype=r.get(7),this.autoSurround=r.get(11),this.autoIndent=r.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Bc._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Bc._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=_i.getAutoClosingPairs(e);let s=Bc._getSurroundingPairs(e);if(s)for(const a of s)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(130)||e.hasChanged(116)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(115)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Bc._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return El.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return _i.getElectricCharacters(e)}catch(t){return gn(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return aAe;case"languageDefined":return Bc._getLanguageDefinedShouldAutoClose(e);case"always":return sAe;case"never":return dee}}static _getLanguageDefinedShouldAutoClose(e){try{const t=_i.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return gn(t),dee}}static _getSurroundingPairs(e){try{return _i.getSurroundingPairs(e)}catch(t){return gn(t),null}}}class ss{constructor(e,t,n,r){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=r,this.selection=ss._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new ss(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Ee(t,n),r):new ss(new Q(t,n,t,n),r,new Ee(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?wt.fromPositions(e.getStartPosition(),t):wt.fromPositions(e.getEndPosition(),t)}}class hee{constructor(e,t,n,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=r}}class lAe{constructor(e){this.modelState=e,this.viewState=null}}class uAe{constructor(e){this.modelState=null,this.viewState=e}}let Mn=class _de{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new lAe(e)}static fromViewState(e){return new uAe(e)}static fromModelSelection(e){const t=wt.liftSelection(e),n=new ss(Q.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return _de.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class ul{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function my(i){return i==="'"||i==='"'||i==="`"}class PA{static whitespaceVisibleColumn(e,t,n){const r=e.length;let o=0,s=-1,a=-1;for(let u=0;u<r;u++){if(u===t)return[s,a,o];switch(o%n===0&&(s=u,a=o),e.charCodeAt(u)){case 32:o+=1;break;case 9:o=cr.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===r?[s,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const o=e.length,[s,a,u]=PA.whitespaceVisibleColumn(e,t,n);if(u===-1)return-1;let d;switch(r){case 0:d=!0;break;case 1:d=!1;break;case 2:if(u%n===0)return t;d=u%n<=n/2;break}if(d){if(s===-1)return-1;let p=a;for(let m=s;m<o;++m){if(p===a+n)return s;switch(e.charCodeAt(m)){case 32:p+=1;break;case 9:p=cr.nextRenderTabStop(p,n);break;default:return-1}}return p===a+n?s:-1}const h=cr.nextRenderTabStop(u,n);let f=u;for(let p=t;p<o;p++){if(f===h)return p;switch(e.charCodeAt(p)){case 32:f+=1;break;case 9:f=cr.nextRenderTabStop(f,n);break;default:return-1}}return f===h?o:-1}}class Ev{constructor(e=null){this.hitTarget=e,this.type=0}}class UH{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var wb;(function(i){function e(t,n,r){const o=t.getPositionFromDOMInfo(n,r);return o?new UH(o,n,null):new Ev(n)}i.createFromDOMInfo=e})(wb||(wb={}));class cAe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class xh{constructor(e,t,n=0,r=null,o=null,s=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,!o&&r&&(o=new Q(r.lineNumber,r.column,r.lineNumber,r.column)),this.range=o,this.detail=s}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return xh.toString(this)}}class xc{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Xw{constructor(e,t,n){this.model=e.model;const r=e.configuration.options;this.layoutInfo=r.get(130),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(58),this.stickyTabStops=r.get(103),this.typicalHalfwidthCharacterWidth=r.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Xw.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const r=n.verticalOffset+n.height/2,o=e.model.getLineCount();let s=null,a,u=null;return n.afterLineNumber!==o&&(u=new Ee(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new Ee(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),u===null?a=s:s===null?a=u:t<r?a=s:a=u,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:u,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.model.getLineCount(),o=this._context.model.getLineMaxColumn(r);return{range:new Q(r,o,r,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new Q(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Xw._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class dAe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Ws._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class aq extends dAe{constructor(e,t,n,r){super(e,t,n),this._ctx=e,r?(this.target=r,this.targetPath=ag.collect(r,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,r=null){let o=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(o=cr.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new xh(this.target,e,o,t,n,r)}withTarget(e){return new aq(this._ctx,this.editorPos,this.pos,e)}}const fee={isAfterLines:!0};function Z9(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Ws{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=ag.collect(t,this._viewHelper.viewDomNode);return!!(xc.isChildOfContentWidgets(n)||xc.isChildOfOverflowingContentWidgets(n)||xc.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,r){const o=new Xw(this._context,this._viewHelper,e),s=new aq(o,t,n,r);try{return Ws._createMouseTarget(o,s,!1)}catch{return s.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const s=Ws._doHitTest(e,t);return s.type===1?Ws.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}const r=t;let o=null;return o=o||Ws._hitTestContentWidget(e,r),o=o||Ws._hitTestOverlayWidget(e,r),o=o||Ws._hitTestMinimap(e,r),o=o||Ws._hitTestScrollbarSlider(e,r),o=o||Ws._hitTestViewZone(e,r),o=o||Ws._hitTestMargin(e,r),o=o||Ws._hitTestViewCursor(e,r),o=o||Ws._hitTestTextArea(e,r),o=o||Ws._hitTestViewLines(e,r,n),o=o||Ws._hitTestScrollbar(e,r),o||t.fulfill(0)}static _hitTestContentWidget(e,t){if(xc.isChildOfContentWidgets(t.targetPath)||xc.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(xc.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const r of n)if(t.target===r.domNode)return t.fulfill(6,r.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const s of n){if(r<s.contentLeft||r>s.contentLeft+s.width)continue;const a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=o&&o<=a+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const r=t.isInContentArea?8:5;return t.fulfill(r,n.position,null,n)}return null}static _hitTestTextArea(e,t){return xc.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=n.range.getStartPosition();let o=Math.abs(t.pos.x-t.editorPos.x);const s={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,r,n.range,s):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,r,n.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,r,n.range,s)))}return null}static _hitTestViewLines(e,t,n){if(!xc.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new Ee(1,1),null,fee);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.model.getLineCount(),s=e.model.getLineMaxColumn(o);return t.fulfill(7,new Ee(o,s),null,fee)}if(n){if(xc.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(o)===0){const a=e.getLineWidth(o),u=Z9(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new Ee(o,1),null,u)}const s=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=s){const a=Z9(t.mouseContentHorizontalOffset-s),u=new Ee(o,e.model.getLineMaxColumn(o));return t.fulfill(7,u,null,a)}}return t.fulfill(0)}const r=Ws._doHitTest(e,t);return r.type===1?Ws.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}static _hitTestMinimap(e,t){if(xc.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Ee(n,r))}return null}static _hitTestScrollbarSlider(e,t){if(xc.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(r);return t.fulfill(11,new Ee(r,o))}}return null}static _hitTestScrollbar(e,t){if(xc.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Ee(n,r))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,r=n.get(130),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-r.contentLeft;return Ws._getMouseColumn(o,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,r,o){const s=r.lineNumber,a=r.column,u=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>u){const E=Z9(t.mouseContentHorizontalOffset-u);return t.fulfill(7,r,null,E)}const d=e.visibleRangeForPosition(s,a);if(!d)return t.fulfill(0,r);const h=d.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,r,null,{mightBeForeignElement:!!o});const f=[];if(f.push({offset:d.left,column:a}),a>1){const E=e.visibleRangeForPosition(s,a-1);E&&f.push({offset:E.left,column:a-1})}const p=e.model.getLineMaxColumn(s);if(a<p){const E=e.visibleRangeForPosition(s,a+1);E&&f.push({offset:E.left,column:a+1})}f.sort((E,S)=>E.offset-S.offset);const m=t.pos.toClientCoordinates(),v=n.getBoundingClientRect(),b=v.left<=m.clientX&&m.clientX<=v.right;for(let E=1;E<f.length;E++){const S=f[E-1],w=f[E];if(S.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){const L=new Q(s,S.column,s,w.column);return t.fulfill(6,r,L,{mightBeForeignElement:!b||!!o})}}return t.fulfill(6,r,null,{mightBeForeignElement:!b||!!o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let s=t.pos.y+(o-t.mouseVerticalOffset);s<=t.editorPos.y&&(s=t.editorPos.y+1),s>=t.editorPos.y+e.layoutInfo.height&&(s=t.editorPos.y+e.layoutInfo.height-1);const a=new HG(t.pos.x,s),u=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return u.type===1?u:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=_0(e.viewDomNode);let r;if(n?typeof n.caretRangeFromPoint>"u"?r=hAe(n,t.clientX,t.clientY):r=n.caretRangeFromPoint(t.clientX,t.clientY):r=document.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new Ev;const o=r.startContainer;if(o.nodeType===o.TEXT_NODE){const s=o.parentNode,a=s?s.parentNode:null,u=a?a.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===Pf.CLASS_NAME?wb.createFromDOMInfo(e,s,r.startOffset):new Ev(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const s=o.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Pf.CLASS_NAME?wb.createFromDOMInfo(e,o,o.textContent.length):new Ev(o)}return new Ev}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const r=n.offsetNode.parentNode,o=r?r.parentNode:null,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===Pf.CLASS_NAME?wb.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Ev(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const r=n.offsetNode.parentNode,o=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,s=r?r.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(o===Pf.CLASS_NAME){const u=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(u)return wb.createFromDOMInfo(e,u,0)}else if(a===Pf.CLASS_NAME)return wb.createFromDOMInfo(e,n.offsetNode,0)}return new Ev(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:r}=t.getTextModelOptions(),o=PA.atomicPosition(n,e.column-1,r,2);return o!==-1?new Ee(e.lineNumber,o+1):e}static _doHitTest(e,t){let n=new Ev;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const r=e.model.getInjectedTextAt(n.position),o=e.model.normalizePosition(n.position,2);(r||!o.equals(n.position))&&(n=new UH(o,n.spanNode,r))}return n.type===1&&e.stickyTabStops&&(n=new UH(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function hAe(i,e,t){const n=document.createRange();let r=i.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const o=r.getBoundingClientRect(),s=window.getComputedStyle(r,null).getPropertyValue("font"),a=r.innerText;let u=o.left,d=0,h;if(e>o.left+o.width)d=a.length;else{const f=Wb.getInstance();for(let p=0;p<a.length+1;p++){if(h=f.getCharWidth(a.charAt(p),s)/2,u+=h,e<u){d=p;break}u+=h}}n.setStart(r.firstChild,d),n.setEnd(r.firstChild,d)}return n}class Wb{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Wb._INSTANCE||(Wb._INSTANCE=new Wb),Wb._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const r=this._canvas.getContext("2d");r.font=t;const s=r.measureText(e).width;return this._cache[n]=s,s}}Wb._INSTANCE=null;function s3(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class O1 extends cR{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Ws(this._context,n),this._mouseDownOperation=this._register(new fAe(this._context,this.viewController,this.viewHelper,(s,a)=>this._createMouseTarget(s,a),s=>this._getMouseColumn(s))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(130).height;const r=new mIe(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,s=>this._onContextMenu(s,!0))),this._register(r.onMouseMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),s3(this.mouseTargetFactory),O1.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onMouseUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onMouseDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)));const o=s=>{if(this.viewController.emitMouseWheel(s),!this._context.configuration.options.get(67))return;const a=new Hw(s);if(Gn?(s.metaKey||s.ctrlKey)&&!s.shiftKey&&!s.altKey:s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey){const d=Ap.getZoomLevel(),h=a.deltaY>0?1:-1;Ap.setZoomLevel(d+h),a.preventDefault(),a.stopPropagation()}};this._register(qe(this.viewHelper.viewDomNode,Ht.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(130)){const t=this._context.configuration.options.get(130).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const r=new wce(e,t).toPageCoordinates(),o=Sce(this.viewHelper.viewDomNode);return r.y<o.y||r.y>o.y+o.height||r.x<o.x||r.x>o.x+o.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const r=_0(this.viewHelper.viewDomNode);r&&(n=r.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,r=t.type===2||t.type===3||t.type===4,o=t.type===3,s=this._context.configuration.options.get(97),a=t.type===8||t.type===5,u=t.type===9;let d=e.leftButton||e.middleButton;Gn&&e.leftButton&&e.ctrlKey&&(d=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(n||o&&s))h(),this._mouseDownOperation.start(t.type,e);else if(r)e.preventDefault();else if(a){const f=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else u&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}O1.MOUSE_MOVE_MINIMUM_TIME=100;class fAe extends Oe{constructor(e,t,n,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new vIe(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Ma),this._mouseState=new KB,this._currentSelection=new wt(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(80)&&r.get(31)&&!r.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,s3(null),o=>this._onMouseDownThenMove(o),o=>{const s=this._findMousePosition(this._lastMouseEvent,!0);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:s?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,s3(null),o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,r=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(r.getCurrentScrollTop()-(t.y-e.posy),0),u=Xw.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new xh(null,13,o,h)}const d=r.getLineNumberAtVerticalOffset(a);return new xh(null,13,o,new Ee(d,1))}if(e.posy>t.y+t.height){const a=r.getCurrentScrollTop()+(e.posy-t.y),u=Xw.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new xh(null,13,o,h)}const d=r.getLineNumberAtVerticalOffset(a);return new xh(null,13,o,new Ee(d,n.getLineMaxColumn(d)))}const s=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new xh(null,13,o,new Ee(s,1)):e.posx>t.x+t.width?new xh(null,13,o,new Ee(s,n.getLineMaxColumn(s))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const s=this._helpPositionJumpOverViewZone(r.detail);if(s)return new xh(r.element,r.type,r.mouseColumn,s,null,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new Ee(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,r=e.positionAfter;return n&&r?n.isBefore(t)?n:r:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class KB{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>KB.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}KB.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Vc;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})(Vc||(Vc={}));let r1=[],lq=[],a3=[];function BM(i,e=!1){const t=gAe(i);r1.push(t),t.userConfigured?a3.push(t):lq.push(t),e&&!t.userConfigured&&r1.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function gAe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?zce(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Do.sep)>=0:!1}}function pAe(i){i?(r1=r1.filter(e=>!e.userConfigured),a3=[]):(r1=[],lq=[],a3=[])}function mAe(i,e){let t;if(i)switch(i.scheme){case In.file:t=i.fsPath;break;case In.data:t=w0.parseMetaData(i).get(w0.META_DATA_LABEL);break;default:t=i.path}if(!t)return[Vc.unknown];t=t.toLowerCase();const n=Gb(t),r=gee(t,n,a3);if(r)return[r,Vc.text];const o=gee(t,n,lq);if(o)return[o,Vc.text];if(e){const s=_Ae(e);if(s)return[s,Vc.text]}return[Vc.unknown]}function gee(i,e,t){var n;let r=null,o=null,s=null;for(let a=t.length-1;a>=0;a--){const u=t[a];if(e===u.filenameLowercase){r=u;break}if(u.filepattern&&(!o||u.filepattern.length>o.filepattern.length)){const d=u.filepatternOnPath?i:e;!((n=u.filepatternLowercase)===null||n===void 0)&&n.call(u,d)&&(o=u)}u.extension&&(!s||u.extension.length>s.extension.length)&&e.endsWith(u.extensionLowercase)&&(s=u)}return r?r.mime:o?o.mime:s?s.mime:null}function _Ae(i){if(wG(i)&&(i=i.substr(1)),i.length>0)for(let e=r1.length-1;e>=0;e--){const t=r1[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class Xo{constructor(e,t,n,r,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=r,this.selectionEndPosition=o}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new Xo(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Xo(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const r=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,r,-1)}if(e>=this.selectionEnd){const r=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,r,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let r=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)r++;return[e,n*t.length,r]}static selectedText(e){return new Xo(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let r=e.value,o=e.selectionStart,s=e.selectionEnd,a=t.value,u=t.selectionStart,d=t.selectionEnd;const h=r.substring(s),f=a.substring(d),p=kF(h,f);a=a.substring(0,a.length-p),r=r.substring(0,r.length-p);const m=r.substring(0,o),v=a.substring(0,u),b=Uw(m,v);if(a=a.substring(b),r=r.substring(b),u-=b,o-=b,d-=b,s-=b,n&&u===d&&r.length>0){let S=null;if(u===a.length?a.startsWith(r)&&(S=a.substring(r.length)):a.endsWith(r)&&(S=a.substring(0,a.length-r.length)),S!==null&&S.length>0&&(/\uFE0F/.test(S)||txe(S)))return{text:S,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(u===d){if(r===a&&o===0&&s===r.length&&u===a.length&&a.indexOf(`
`)===-1&&ixe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const S=m.length-b;return{text:a,replacePrevCharCnt:S,replaceNextCharCnt:0,positionDelta:0}}const E=s-o;return{text:a,replacePrevCharCnt:E,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(Uw(e.value,t.value),e.selectionEnd),r=Math.min(kF(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-r),s=t.value.substring(n,t.value.length-r);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const u=t.selectionEnd-n;return{text:s,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:u-s.length}}}Xo.EMPTY=new Xo("",0,0,null,null);class Wy{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,r=n+1,o=n+t;return new Q(r,1,o+1,1)}static fromEditorSelection(e,t,n,r,o){const s=Wy._getPageOfLine(n.startLineNumber,r),a=Wy._getRangeForPage(s,r),u=Wy._getPageOfLine(n.endLineNumber,r),d=Wy._getRangeForPage(u,r),h=a.intersectRanges(new Q(1,1,n.startLineNumber,n.startColumn));let f=t.getValueInRange(h,1);const p=t.getLineCount(),m=t.getLineMaxColumn(p),v=d.intersectRanges(new Q(n.endLineNumber,n.endColumn,p,m));let b=t.getValueInRange(v,1),E;if(s===u||s+1===u)E=t.getValueInRange(n,1);else{const S=a.intersectRanges(n),w=d.intersectRanges(n);E=t.getValueInRange(S,1)+String.fromCharCode(8230)+t.getValueInRange(w,1)}return o&&(f.length>500&&(f=f.substring(f.length-500,f.length)),b.length>500&&(b=b.substring(0,500)),E.length>2*500&&(E=E.substring(0,500)+String.fromCharCode(8230)+E.substring(E.length-500,E.length))),new Xo(f+E+b,f.length,f.length+E.length,new Ee(n.startLineNumber,n.startColumn),new Ee(n.endLineNumber,n.endColumn))}}var l3;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(l3||(l3={}));const jH={forceCopyWithSyntaxHighlighting:!1};class FA{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}FA.INSTANCE=new FA;class vAe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class bAe extends Oe{constructor(e,t,n,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=r,this._onFocus=this._register(new Ce),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Ce),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Ce),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Ce),this.onCut=this._onCut.event,this._onPaste=this._register(new Ce),this.onPaste=this._onPaste.event,this._onType=this._register(new Ce),this.onType=this._onType.event,this._onCompositionStart=this._register(new Ce),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Ce),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Ce),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Ce),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new tr(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new tr(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Xo.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null,this._nextCommand=0;let o=null;this._register(this._textArea.onKeyDown(s=>{const a=new Sr(s);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(s=>{const a=new Sr(s);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(s=>{const a=new vAe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===s.data&&(o&&o.equals(109)&&(o.code==="ArrowRight"||o.code==="ArrowLeft")||this._browser.isFirefox)){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(this._browser.isAndroid){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._onCompositionStart.fire({revealDeltaColumns:0})})),this._register(this._textArea.onCompositionUpdate(s=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const d=Xo.readFromTextArea(this._textArea),h=Xo.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(s);return}const u=a.handleCompositionUpdate(s.data);this._textAreaState=Xo.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionUpdate.fire(s)})),this._register(this._textArea.onCompositionEnd(s=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Xo.readFromTextArea(this._textArea),h=Xo.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const u=a.handleCompositionUpdate(s.data);this._textAreaState=Xo.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Xo.readFromTextArea(this._textArea),u=Xo.deduceInput(this._textAreaState,a,this._OS===2);if(u.replacePrevCharCnt===0&&u.text.length===1&&Vo(u.text.charCodeAt(0)))return;this._textAreaState=a;const d=u.text===""&&u.replacePrevCharCnt===0&&u.replaceNextCharCnt===0&&u.positionDelta===0;this._nextCommand===0?d||this._onType.fire(u):(d||this._firePaste(u.text,null),this._nextCommand=0)})),this._register(this._textArea.onCut(s=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(s),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(s=>{this._ensureClipboardGetsEditorSelection(s)})),this._register(this._textArea.onPaste(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),IN.canUseTextData(s)){const[a,u]=IN.getTextData(s);a!==""&&this._firePaste(a,u)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",Xo.EMPTY),this._nextCommand=1})),this._register(this._textArea.onFocus(()=>{const s=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!s&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return qe(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),r=n-e;if(e=n,r<5)return;const o=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const a=this._textArea.getSelectionStart(),u=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===u)return;const d=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(d[0],d[1],d[2]),f=this._textAreaState.deduceEditorPosition(u),p=this._host.deduceModelPosition(f[0],f[1],f[2]),m=new wt(h.lineNumber,h.column,p.lineNumber,p.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(IN.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(FA.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),!IN.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",Xo.selectedText(t.text));return}IN.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=FA.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class IN{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(Vc.text);let n=null;const r=e.clipboardData.getData("vscode-editor-data");if(typeof r=="string")try{n=JSON.parse(r),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,r){if(e.clipboardData){e.clipboardData.setData(Vc.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(r)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class CAe extends Oe{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(mh(this._actual,"keydown")).event,this.onKeyUp=this._register(mh(this._actual,"keyup")).event,this.onCompositionStart=this._register(mh(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(mh(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(mh(this._actual,"compositionend")).event,this.onInput=this._register(mh(this._actual,"input")).event,this.onCut=this._register(mh(this._actual,"cut")).event,this.onCopy=this._register(mh(this._actual,"copy")).event,this.onPaste=this._register(mh(this._actual,"paste")).event,this.onFocus=this._register(mh(this._actual,"focus")).event,this.onBlur=this._register(mh(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Ce),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(qe(this._actual,l3.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=_0(this._actual);return e?e.activeElement===this._actual:uG(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const r=this._actual;let o=null;const s=_0(r);s?o=s.activeElement:o=document.activeElement;const a=o===r,u=r.selectionStart,d=r.selectionEnd;if(a&&u===t&&d===n){wl&&window.parent!==window&&r.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,n),wl&&window.parent!==window&&r.focus();return}try{const h=ILe(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,n),kLe(r,h)}catch{}}}class yAe extends O1{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(qe(this.viewHelper.linesContentDomNode,ur.Tap,o=>this.onTap(o))),this._register(qe(this.viewHelper.linesContentDomNode,ur.Change,o=>this.onChange(o))),this._register(qe(this.viewHelper.linesContentDomNode,ur.Contextmenu,o=>this._onContextMenu(new k1(o,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(qe(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const s=o.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new _Ie(this.viewHelper.viewDomNode);this._register(r.onPointerMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),s3(this.mouseTargetFactory),O1.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new k1(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class wAe extends O1{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(qe(this.viewHelper.linesContentDomNode,ur.Tap,r=>this.onTap(r))),this._register(qe(this.viewHelper.linesContentDomNode,ur.Change,r=>this.onChange(r))),this._register(qe(this.viewHelper.linesContentDomNode,ur.Contextmenu,r=>this._onContextMenu(new k1(r,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new k1(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(l3.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class SAe extends Oe{constructor(e,t,n){super(),ng&&cB.pointerEvents?this.handler=this._register(new yAe(e,t,n)):window.TouchEvent?this.handler=this._register(new wAe(e,t,n)):this.handler=this._register(new O1(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class zS extends cR{}class Qw extends zS{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Ee(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(130);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ee(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-n);return r===0?'<span class="relative-current-line-number">'+n+"</span>":String(r)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Qa?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o='<div class="'+Qw.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),a=[];for(let u=n;u<=r;u++){const d=u-n;if(!this._renderFinalNewline&&u===s&&this._context.model.getLineLength(u)===0){a[d]="";continue}const h=this._getLineRenderLineNumber(u);h?u===this._activeLineNumber?a[d]='<div class="active-line-number '+Qw.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[d]=o+h+"</div>":a[d]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Qw.CLASS_NAME="line-numbers";fr((i,e)=>{const t=i.getColor(sde);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(C2e);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class R1 extends vc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=ii(document.createElement("div")),this._domNode.setClassName(R1.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ii(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(R1.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}R1.CLASS_NAME="glyph-margin";R1.OUTER_CLASS_NAME="margin";const o1="monaco-mouse-cursor-text";class uq{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new uq(this.top,this.left,e)}}const kN=wl;class EAe extends vc{constructor(e,t,n){super(e),this._primaryCursorPosition=new Ee(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,o=r.get(130);this._setAccessibilityOptions(r),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=r.get(43),this._lineHeight=r.get(58),this._emptySelectionClipboard=r.get(32),this._copyWithSyntaxHighlighting=r.get(21),this._visibleTextArea=null,this._selections=[new wt(1,1,1,1)],this._modelSelections=[new wt(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ii(document.createElement("textarea")),ag.write(this.textArea,6),this.textArea.setClassName(`inputarea ${o1}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("tabindex",String(r.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",C("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),r.get(30)&&r.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=ii(document.createElement("div")),this.textAreaCover.setPosition("absolute");const s={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:d=>this._context.model.getLineMaxColumn(d),getValueInRange:(d,h)=>this._context.model.getValueInRange(d,h)},a={getDataToCopy:d=>{const h=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,As),f=this._context.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),m=Array.isArray(h)?h:null,v=Array.isArray(h)?h.join(f):h;let b,E=null;if(d&&(jH.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&v.length<65536)){const S=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);S&&(b=S.html,E=S.mode)}return{isFromEmptySelection:p,multicursorText:m,text:v,html:b,mode:E}},getScreenReaderContent:d=>{if(this._accessibilitySupport===1){if(Gn){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition();let p=this._getWordBeforePosition(f);if(p.length===0&&(p=this._getCharacterBeforePosition(f)),p.length>0)return new Xo(p,p.length,p.length,f,f)}}return Xo.EMPTY}if(jle){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[p,m]=this._getAndroidWordAtPosition(f);if(p.length>0)return new Xo(p,m,m,f,f)}return Xo.EMPTY}return Wy.fromEditorSelection(d,s,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,h,f)=>this._context.model.deduceModelPositionRelativeToViewPosition(d,h,f)},u=this._register(new CAe(this.textArea.domNode));this._textAreaInput=this._register(new bAe(a,u,qu,VEe)),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let h=!1,f=null,p=null;d.metadata&&(h=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,f=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,p=d.metadata.mode),this._viewController.paste(d.text,h,f,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const h=this._selections[0].startLineNumber,f=this._selections[0].startColumn+d.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new Q(h,f,h,f),0,1);const p=this._viewHelper.visibleRangeForPositionRelativeToEditor(h,f);p&&(this._visibleTextArea=new uq(this._context.viewLayout.getVerticalOffsetForLineNumber(h),p.left,kN?0:1),this.textArea.domNode.scrollLeft=0,this._render()),this.textArea.setClassName(`inputarea ${o1} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(LAe(d.data,this._fontInfo)),this.textArea.domNode.scrollLeft=0,this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${o1}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),r=gc(t);let o=!0,s=e.column,a=!0,u=e.column,d=0;for(;d<50&&(o||a);){if(o&&s<=1&&(o=!1),o){const h=n.charCodeAt(s-2);r.get(h)!==0?o=!1:s--}if(a&&u>n.length&&(a=!1),a){const h=n.charCodeAt(u-1);r.get(h)!==0?a=!1:u++}d++}return[n.substring(s-1,u-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=gc(this._context.configuration.options.get(116));let r=e.column,o=0;for(;r>1;){const s=t.charCodeAt(r-2);if(n.get(s)!==0||o>50)return t.substring(r-1,e.column-1);o++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Vo(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?C("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Qa?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===af.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new Ee(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Gn){this._renderInsideEditor(this._primaryCursorPosition,t,e,kN?0:1,this._lineHeight),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._renderInsideEditor(this._primaryCursorPosition,t,e,kN?0:1,kN?0:1)}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderInsideEditor(e,t,n,r,o){this._lastRenderPosition=e;const s=this.textArea,a=this.textAreaCover;Oa.applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(n),s.setWidth(r),s.setHeight(o),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Oa.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),kN){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+R1.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Qw.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function LAe(i,e){const n=document.createElement("canvas").getContext("2d");n.font=xAe(e);const r=n.measureText(i);return wl?r.width+2:r.width}function xAe(i){return DAe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function DAe(i,e,t,n,r){return`${i} normal ${e} ${t}px / ${n}px ${r}`}class Sb{static columnSelect(e,t,n,r,o,s){let a=Math.abs(o-n)+1,u=n>o,d=r>s,h=r<s,f=[];for(let p=0;p<a;p++){let m=n+(u?-p:p),v=cr.columnFromVisibleColumn2(e,t,m,r),b=cr.columnFromVisibleColumn2(e,t,m,s),E=cr.visibleColumnFromColumn2(e,t,new Ee(m,v)),S=cr.visibleColumnFromColumn2(e,t,new Ee(m,b));h&&(E>s||S<r)||d&&(S>r||E<s)||f.push(new ss(new Q(m,v,m,v),0,new Ee(m,b),0))}if(f.length===0)for(let p=0;p<a;p++){const m=n+(u?-p:p),v=t.getLineMaxColumn(m);f.push(new ss(new Q(m,v,m,v),0,new Ee(m,v),0))}return{viewStates:f,reversed:u,fromLineNumber:n,fromVisualColumn:r,toLineNumber:o,toVisualColumn:s}}static columnSelectLeft(e,t,n){let r=n.toViewVisualColumn;return r>0&&r--,Sb.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,r)}static columnSelectRight(e,t,n){let r=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let u=o;u<=s;u++){const d=t.getLineMaxColumn(u),h=cr.visibleColumnFromColumn2(e,t,new Ee(u,d));r=Math.max(r,h)}let a=n.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,r){const o=r?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,r){const o=r?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}}class xs{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return wt.fromPositions(r.getEndPosition())}}class TAe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return wt.fromRange(r,0)}}class WM{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return wt.fromPositions(r.getStartPosition())}}class l4{constructor(e,t,n,r,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return wt.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class cq{constructor(e,t,n,r=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class X9{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class pi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-QLe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Ee(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=PA.atomicPosition(o,t.column-1,n,0);if(s!==-1&&s+1>=r)return new Ee(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const r=e.stickyTabStops?pi.leftPositionAtomicSoftTabs(t,n,e.tabSize):pi.leftPosition(t,n);return new X9(r.lineNumber,r.column,0)}static moveLeft(e,t,n,r,o){let s,a;if(n.hasSelection()&&!r)s=n.selection.startLineNumber,a=n.selection.startColumn;else{const u=n.position.delta(void 0,-(o-1)),d=t.normalizePosition(pi.clipPositionColumn(u,t),0),h=pi.left(e,t,d);s=h.lineNumber,a=h.column}return n.move(r,s,a,0)}static clipPositionColumn(e,t){return new Ee(e.lineNumber,pi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+NF(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new Ee(t,n)}static rightPositionAtomicSoftTabs(e,t,n,r,o){if(n<e.getLineIndentColumn(t)){const s=e.getLineContent(t),a=PA.atomicPosition(s,n-1,r,1);if(a!==-1)return new Ee(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const r=e.stickyTabStops?pi.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):pi.rightPosition(t,n.lineNumber,n.column);return new X9(r.lineNumber,r.column,0)}static moveRight(e,t,n,r,o){let s,a;if(n.hasSelection()&&!r)s=n.selection.endLineNumber,a=n.selection.endColumn;else{const u=n.position.delta(void 0,o-1),d=t.normalizePosition(pi.clipPositionColumn(u,t),1),h=pi.right(e,t,d);s=h.lineNumber,a=h.column}return n.move(r,s,a,0)}static vertical(e,t,n,r,o,s,a){const u=cr.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize)+o,d=t.getLineCount(),h=n===1&&r===1,f=n===d&&r===t.getLineMaxColumn(n),p=s<n?h:f;return n=s,n<1?(n=1,a?r=t.getLineMinColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):n>d?(n=d,a?r=t.getLineMaxColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):r=cr.columnFromVisibleColumn2(e,t,n,u),p?o=0:o=u-cr.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize),new X9(n,r,o)}static down(e,t,n,r,o,s,a){return this.vertical(e,t,n,r,o,n+s,a)}static moveDown(e,t,n,r,o){let s,a;n.hasSelection()&&!r?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let u=pi.down(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateDown(e,t,n){let r=n.selection,o=pi.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=pi.down(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new ss(new Q(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Ee(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,r,o,s,a){return this.vertical(e,t,n,r,o,n-s,a)}static moveUp(e,t,n,r,o){let s,a;n.hasSelection()&&!r?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let u=pi.up(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateUp(e,t,n){let r=n.selection,o=pi.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=pi.up(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new ss(new Q(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Ee(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,r){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(r,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,r){const o=t.getLineCount();let s=n.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return n.move(r,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,r){let o=n.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,u;return n.position.column===a?u=s:u=a,n.move(r,o,u,0)}static moveToEndOfLine(e,t,n,r,o){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(r,s,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,r){return n.move(r,1,1,0)}static moveToEndOfBuffer(e,t,n,r){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return n.move(r,o,s,0)}}class M1{static deleteRight(e,t,n,r){let o=[],s=e!==3;for(let a=0,u=r.length;a<u;a++){const d=r[a];let h=d;if(h.isEmpty()){let f=d.getPosition(),p=pi.right(t,n,f);h=new Q(p.lineNumber,p.column,f.lineNumber,f.column)}if(h.isEmpty()){o[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(s=!0),o[a]=new xs(h,"")}return[s,o]}static isAutoClosingPairDelete(e,t,n,r,o,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let u=0,d=s.length;u<d;u++){const h=s[u],f=h.getPosition();if(!h.isEmpty())return!1;const p=o.getLineContent(f.lineNumber);if(f.column<2||f.column>=p.length+1)return!1;const m=p.charAt(f.column-2),v=r.get(m);if(!v)return!1;if(my(m)){if(n==="never")return!1}else if(t==="never")return!1;const b=p.charAt(f.column-1);let E=!1;for(const S of v)S.open===m&&S.close===b&&(E=!0);if(!E)return!1;if(e==="auto"){let S=!1;for(let w=0,L=a.length;w<L;w++){const A=a[w];if(f.lineNumber===A.startLineNumber&&f.column===A.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].getPosition(),u=new Q(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[o]=new xs(u,"")}return[!0,r]}static deleteLeft(e,t,n,r,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,r,o))return this._runAutoClosingPairDelete(t,n,r);const s=[];let a=e!==2;for(let u=0,d=r.length;u<d;u++){let h=M1.getDeleteRange(r[u],n,t);if(h.isEmpty()){s[u]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),s[u]=new xs(h,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const r=e.getPosition();if(n.useTabStops&&r.column>1){const o=t.getLineContent(r.lineNumber),s=Na(o),a=s===-1?o.length+1:s+1;if(r.column<=a){const u=cr.visibleColumnFromColumn2(n,t,r),d=cr.prevIndentTabStop(u,n.indentSize),h=cr.columnFromVisibleColumn2(n,t,r.lineNumber,d);return new Q(r.lineNumber,h,r.lineNumber,r.column)}}return Q.fromPositions(M1.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=axe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new Ee(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let r=[],o=null;n.sort((s,a)=>Ee.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){const u=n[s];if(u.isEmpty())if(e.emptySelectionClipboard){let d=u.getPosition(),h,f,p,m;d.lineNumber<t.getLineCount()?(h=d.lineNumber,f=1,p=d.lineNumber+1,m=1):d.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==d.lineNumber?(h=d.lineNumber-1,f=t.getLineMaxColumn(d.lineNumber-1),p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber)):(h=d.lineNumber,f=1,p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber));let v=new Q(h,f,p,m);o=v,v.isEmpty()?r[s]=null:r[s]=new xs(v,"")}else r[s]=null;else r[s]=new xs(u,"")}return new ul(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class ni{static _createWord(e,t,n,r,o){return{start:r,end:o,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(r,e,n)}static _doFindPreviousWordOnLine(e,t,n){let r=0;for(let o=n.column-2;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===0){if(r===2)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1));r=1}else if(a===2){if(r===1)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1));r=2}else if(a===1&&r!==0)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,n,r){let o=e.length;for(let s=r;s<o;s++){let a=e.charCodeAt(s),u=t.get(a);if(u===1||n===1&&u===2||n===2&&u===0)return s}return o}static _findNextWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(r,e,n)}static _doFindNextWordOnLine(e,t,n){let r=0,o=e.length;for(let s=n.column-1;s<o;s++){let a=e.charCodeAt(s),u=t.get(a);if(u===0){if(r===2)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s);r=1}else if(u===2){if(r===1)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s);r=2}else if(u===1&&r!==0)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,o-1),o):null}static _findStartOfWord(e,t,n,r){for(let o=r;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===1||n===1&&a===2||n===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,n,r){let o=n.lineNumber,s=n.column;s===1&&o>1&&(o=o-1,s=t.getLineMaxColumn(o));let a=ni._findPreviousWordOnLine(e,t,new Ee(o,s));if(r===0)return new Ee(o,a?a.start+1:1);if(r===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=ni._findPreviousWordOnLine(e,t,new Ee(o,a.start+1))),new Ee(o,a?a.start+1:1);if(r===3){for(;a&&a.wordType===2;)a=ni._findPreviousWordOnLine(e,t,new Ee(o,a.start+1));return new Ee(o,a?a.start+1:1)}return a&&s<=a.end+1&&(a=ni._findPreviousWordOnLine(e,t,new Ee(o,a.start+1))),new Ee(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===1)return n>1?new Ee(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let s=t.column-1;s>1;s--){const a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a===95&&u!==95)return new Ee(n,s);if(Wv(a)&&Tf(u))return new Ee(n,s);if(Tf(a)&&Tf(u)&&s+1<r){const d=o.charCodeAt(s);if(Wv(d))return new Ee(n,s)}}return new Ee(n,1)}static moveWordRight(e,t,n,r){let o=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);let u=ni._findNextWordOnLine(e,t,new Ee(o,s));if(r===2)u&&u.wordType===2&&u.end-u.start===1&&u.nextCharClass===0&&(u=ni._findNextWordOnLine(e,t,new Ee(o,u.end+1))),u?s=u.end+1:s=t.getLineMaxColumn(o);else if(r===3){for(a&&(s=0);u&&(u.wordType===2||u.start+1<=s);)u=ni._findNextWordOnLine(e,t,new Ee(o,u.end+1));u?s=u.start+1:s=t.getLineMaxColumn(o)}else u&&!a&&s>=u.start+1&&(u=ni._findNextWordOnLine(e,t,new Ee(o,u.end+1))),u?s=u.start+1:s=t.getLineMaxColumn(o);return new Ee(o,s)}static _moveWordPartRight(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===r)return n<e.getLineCount()?new Ee(n+1,1):t;const o=e.getLineContent(n);for(let s=t.column+1;s<r;s++){const a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a!==95&&u===95)return new Ee(n,s);if(Wv(a)&&Tf(u))return new Ee(n,s);if(Tf(a)&&Tf(u)&&s+1<r){const d=o.charCodeAt(s);if(Wv(d))return new Ee(n,s)}}return new Ee(n,r)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-2,o=Qf(n,r);return o+1<r?new Q(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,r=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(M1.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new Q(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new Ee(o.positionLineNumber,o.positionColumn);let u=a.lineNumber,d=a.column;if(u===1&&d===1)return null;if(s){let f=this._deleteWordLeftWhitespace(r,a);if(f)return f}let h=ni._findPreviousWordOnLine(n,r,a);return t===0?h?d=h.start+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u)):(h&&d<=h.end+1&&(h=ni._findPreviousWordOnLine(n,r,new Ee(u,h.start+1))),h?d=h.end+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const r=new Ee(n.positionLineNumber,n.positionColumn);let o=this._deleteInsideWordWhitespace(t,r);return o||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=n.length;if(r===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let s=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(n,s))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;s+1<r&&this._charAtIsWhitespace(n,s+1);)s++;return new Q(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const r=t.getLineContent(n.lineNumber),o=r.length;if(o===0)return n.lineNumber>1?new Q(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new Q(n.lineNumber,1,n.lineNumber+1,1):new Q(n.lineNumber,1,n.lineNumber,1);const s=f=>f.start+1<=n.column&&n.column<=f.end+1,a=(f,p)=>(f=Math.min(f,n.column),p=Math.max(p,n.column),new Q(n.lineNumber,f,n.lineNumber,p)),u=f=>{let p=f.start+1,m=f.end+1,v=!1;for(;m-1<o&&this._charAtIsWhitespace(r,m-1);)v=!0,m++;if(!v)for(;p>1&&this._charAtIsWhitespace(r,p-2);)p--;return a(p,m)},d=ni._findPreviousWordOnLine(e,t,n);if(d&&s(d))return u(d);const h=ni._findNextWordOnLine(e,t,n);return h&&s(h)?u(h):d&&h?a(d.end+1,h.start+1):d?a(d.start+1,d.end+1):h?a(h.start+1,h.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ni._moveWordPartLeft(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let r=t;r<n;r++){let o=e.charAt(r);if(o!==" "&&o!=="	")return r}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-1,o=this._findFirstNonWhitespaceChar(n,r);return r+1<o?new Q(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,r=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new Ee(o.positionLineNumber,o.positionColumn);let u=a.lineNumber,d=a.column;const h=r.getLineCount(),f=r.getLineMaxColumn(u);if(u===h&&d===f)return null;if(s){let m=this._deleteWordRightWhitespace(r,a);if(m)return m}let p=ni._findNextWordOnLine(n,r,a);return t===2?p?d=p.end+1:d<f||u===h?d=f:(u++,p=ni._findNextWordOnLine(n,r,new Ee(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u)):(p&&d>=p.start+1&&(p=ni._findNextWordOnLine(n,r,new Ee(u,p.end+1))),p?d=p.start+1:d<f||u===h?d=f:(u++,p=ni._findNextWordOnLine(n,r,new Ee(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ni._moveWordPartRight(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,n){const r=new Q(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,n){const r=gc(t),o=ni._findPreviousWordOnLine(r,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return ni._createWordAtPosition(e,n.lineNumber,o);const s=ni._findNextWordOnLine(r,e,n);return s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end?ni._createWordAtPosition(e,n.lineNumber,s):null}static word(e,t,n,r,o){const s=gc(e.wordSeparators);let a=ni._findPreviousWordOnLine(s,t,o),u=ni._findNextWordOnLine(s,t,o);if(!r){let m,v;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(m=a.start+1,v=a.end+1):u&&u.wordType===1&&u.start<=o.column-1&&o.column-1<=u.end?(m=u.start+1,v=u.end+1):(a?m=a.end+1:m=1,u?v=u.start+1:v=t.getLineMaxColumn(o.lineNumber)),new ss(new Q(o.lineNumber,m,o.lineNumber,v),0,new Ee(o.lineNumber,v),0)}let d,h;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(d=a.start+1,h=a.end+1):u&&u.wordType===1&&u.start<o.column-1&&o.column-1<u.end?(d=u.start+1,h=u.end+1):(d=o.column,h=o.column);let f=o.lineNumber,p;if(n.selectionStart.containsPosition(o))p=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){p=d;let m=new Ee(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.endColumn)}else{p=h;let m=new Ee(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.startColumn)}return n.move(!0,f,p,0)}}class GB extends ni{static deleteWordPartLeft(e){const t=VM([ni.deleteWordLeft(e,0),ni.deleteWordLeft(e,2),ni._deleteWordPartLeft(e.model,e.selection)]);return t.sort(Q.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=VM([ni.deleteWordRight(e,0),ni.deleteWordRight(e,2),ni._deleteWordPartRight(e.model,e.selection)]);return t.sort(Q.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const r=VM([ni.moveWordLeft(e,t,n,0),ni.moveWordLeft(e,t,n,2),ni._moveWordPartLeft(t,n)]);return r.sort(Ee.compare),r[2]}static moveWordPartRight(e,t,n){const r=VM([ni.moveWordRight(e,t,n,0),ni.moveWordRight(e,t,n,2),ni._moveWordPartRight(t,n)]);return r.sort(Ee.compare),r[0]}}function VM(i){return i.filter(e=>!!e)}class os{static addCursorDown(e,t,n){let r=[],o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];r[o++]=new Mn(u.modelState,u.viewState),n?r[o++]=Mn.fromModelState(pi.translateDown(e.cursorConfig,e.model,u.modelState)):r[o++]=Mn.fromViewState(pi.translateDown(e.cursorConfig,e,u.viewState))}return r}static addCursorUp(e,t,n){let r=[],o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];r[o++]=new Mn(u.modelState,u.viewState),n?r[o++]=Mn.fromModelState(pi.translateUp(e.cursorConfig,e.model,u.modelState)):r[o++]=Mn.fromViewState(pi.translateUp(e.cursorConfig,e,u.viewState))}return r}static moveToBeginningOfLine(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=this._moveToLineStart(e,a,n)}return r}static _moveToLineStart(e,t,n){const r=t.viewState.position.column,o=t.modelState.position.column,s=r===o,a=t.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(r===u)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Mn.fromViewState(pi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Mn.fromModelState(pi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=this._moveToLineEnd(e,u,n,r)}return o}static _moveToLineEnd(e,t,n,r){const o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),a=o.column===s,u=t.modelState.position,d=e.model.getLineMaxColumn(u.lineNumber),h=s-o.column===d-u.column;return a||h?this._moveToLineEndByModel(e,t,n,r):this._moveToLineEndByView(e,t,n,r)}static _moveToLineEndByView(e,t,n,r){return Mn.fromViewState(pi.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,r))}static _moveToLineEndByModel(e,t,n,r){return Mn.fromModelState(pi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,r))}static expandLineSelection(e,t){let n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r],a=s.modelState.selection.startLineNumber,u=e.model.getLineCount();let d=s.modelState.selection.endLineNumber,h;d===u?h=e.model.getLineMaxColumn(u):(d++,h=1),n[r]=Mn.fromModelState(new ss(new Q(a,1,a,1),0,new Ee(d,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=Mn.fromModelState(pi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static moveToEndOfBuffer(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=Mn.fromModelState(pi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static selectAll(e,t){const n=e.model.getLineCount(),r=e.model.getLineMaxColumn(n);return Mn.fromModelState(new ss(new Q(1,1,1,1),0,new Ee(n,r),0))}static line(e,t,n,r,o){const s=e.model.validatePosition(r),a=o?e.coordinatesConverter.validateViewPosition(new Ee(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n||!t.modelState.hasSelection()){const d=e.model.getLineCount();let h=s.lineNumber+1,f=1;return h>d&&(h=d,f=e.model.getLineMaxColumn(h)),Mn.fromModelState(new ss(new Q(s.lineNumber,1,h,f),0,new Ee(h,f),0))}const u=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<u)return Mn.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>u){const d=e.getLineCount();let h=a.lineNumber+1,f=1;return h>d&&(h=d,f=e.getLineMaxColumn(h)),Mn.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,f,0))}else{const d=t.modelState.selectionStart.getEndPosition();return Mn.fromModelState(t.modelState.move(t.modelState.hasSelection(),d.lineNumber,d.column,0))}}static word(e,t,n,r){const o=e.model.validatePosition(r);return Mn.fromModelState(ni.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Mn(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,r=t.viewState.position.column;return Mn.fromViewState(new ss(new Q(n,r,n,r),0,new Ee(n,r),0))}static moveTo(e,t,n,r,o){const s=e.model.validatePosition(r),a=o?e.coordinatesConverter.validateViewPosition(new Ee(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return Mn.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,r,o,s){switch(n){case 0:return s===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,o);case 1:return s===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,o);case 2:return s===2?this._moveUpByViewLines(e,t,r,o):this._moveUpByModelLines(e,t,r,o);case 3:return s===2?this._moveDownByViewLines(e,t,r,o):this._moveDownByModelLines(e,t,r,o);case 4:return s===2?t.map(a=>Mn.fromViewState(pi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Mn.fromModelState(pi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return s===2?t.map(a=>Mn.fromViewState(pi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Mn.fromModelState(pi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,n,r,o){const s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case 11:{const u=this._firstLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 13:{const u=this._lastLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 12:{const u=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 14:{let u=[];for(let d=0,h=t.length;d<h;d++){const f=t[d];u[d]=this.findPositionInViewportIfOutside(e,f,s,r)}return u}default:return null}}static findPositionInViewportIfOutside(e,t,n,r){let o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new Mn(t.modelState,t.viewState);{let s;o>n.endLineNumber-1?s=n.endLineNumber-1:o<n.startLineNumber?s=n.startLineNumber:s=o;const a=pi.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return Mn.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+n-1)}static _lastLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-n+1)}static _moveLeft(e,t,n,r){return t.map(o=>Mn.fromViewState(pi.moveLeft(e.cursorConfig,e,o.viewState,n,r)))}static _moveHalfLineLeft(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[o]=Mn.fromViewState(pi.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveRight(e,t,n,r){return t.map(o=>Mn.fromViewState(pi.moveRight(e.cursorConfig,e,o.viewState,n,r)))}static _moveHalfLineRight(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[o]=Mn.fromViewState(pi.moveRight(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveDownByViewLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Mn.fromViewState(pi.moveDown(e.cursorConfig,e,u.viewState,n,r))}return o}static _moveDownByModelLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Mn.fromModelState(pi.moveDown(e.cursorConfig,e.model,u.modelState,n,r))}return o}static _moveUpByViewLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Mn.fromViewState(pi.moveUp(e.cursorConfig,e,u.viewState,n,r))}return o}static _moveUpByModelLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Mn.fromModelState(pi.moveUp(e.cursorConfig,e.model,u.modelState,n,r))}return o}static _moveToViewPosition(e,t,n,r,o){return Mn.fromViewState(t.viewState.move(n,r,o,0))}static _moveToModelPosition(e,t,n,r,o){return Mn.fromModelState(t.modelState.move(n,r,o,0))}static _moveToViewMinColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineMinColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewCenterColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(u)+e.getLineMinColumn(u))/2);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewMaxColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineMaxColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}}var u3;(function(i){const e=function(n){if(!Ya(n))return!1;let r=n;return!(!cc(r.to)||!ml(r.select)&&!_ue(r.select)||!ml(r.by)&&!cc(r.by)||!ml(r.value)&&!E1(r.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let r;switch(n.to){case i.RawDirection.Left:r=0;break;case i.RawDirection.Right:r=1;break;case i.RawDirection.Up:r=2;break;case i.RawDirection.Down:r=3;break;case i.RawDirection.PrevBlankLine:r=4;break;case i.RawDirection.NextBlankLine:r=5;break;case i.RawDirection.WrappedLineStart:r=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case i.RawDirection.WrappedLineColumnCenter:r=8;break;case i.RawDirection.WrappedLineEnd:r=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case i.RawDirection.ViewPortTop:r=11;break;case i.RawDirection.ViewPortBottom:r=13;break;case i.RawDirection.ViewPortCenter:r=12;break;case i.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let o=0;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Character:o=3;break;case i.RawUnit.HalfLine:o=4;break}return{direction:r,unit:o,select:!!n.select,value:n.value||1}}i.parse=t})(u3||(u3={}));const Q9=Object.create(null);function eb(i,e){if(e<=0)return"";Q9[i]||(Q9[i]=["",i]);const t=Q9[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Tu{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,r,o){const s=cr.visibleColumnFromColumn(e,t,n);if(o){const a=eb(" ",r),d=cr.prevIndentTabStop(s,r)/r;return eb(a,d)}else{const a="	",d=cr.prevRenderTabStop(s,n)/n;return eb(a,d)}}static shiftIndent(e,t,n,r,o){const s=cr.visibleColumnFromColumn(e,t,n);if(o){const a=eb(" ",r),d=cr.nextIndentTabStop(s,r)/r;return eb(a,d)}else{const a="	",d=cr.nextRenderTabStop(s,n)/n;return eb(a,d)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&n!==r&&(r=r-1);const{tabSize:o,indentSize:s,insertSpaces:a}=this._opts,u=n===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,h=0;for(let f=n;f<=r;f++,d=h){h=0;let p=e.getLineContent(f),m=Na(p);if(this._opts.isUnshift&&(p.length===0||m===0)||!u&&!this._opts.isUnshift&&p.length===0)continue;if(m===-1&&(m=p.length),f>1&&cr.visibleColumnFromColumn(p,m+1,o)%s!==0&&e.isCheapToTokenize(f-1)){let E=_i.getEnterAction(this._opts.autoIndent,e,new Q(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)));if(E){if(h=d,E.appendText)for(let S=0,w=E.appendText.length;S<w&&h<s&&E.appendText.charCodeAt(S)===32;S++)h++;E.removeText&&(h=Math.max(0,h-E.removeText));for(let S=0;S<h&&!(m===0||p.charCodeAt(m-1)!==32);S++)m--}}if(this._opts.isUnshift&&m===0)continue;let v;this._opts.isUnshift?v=Tu.unshiftIndent(p,m+1,o,s,a):v=Tu.shiftIndent(p,m+1,o,s,a),this._addEditOperation(t,new Q(f,1,f,m+1),v),f===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?eb(" ",s):"	";for(let h=n;h<=r;h++){const f=e.getLineContent(h);let p=Na(f);if(!(this._opts.isUnshift&&(f.length===0||p===0))&&!(!u&&!this._opts.isUnshift&&f.length===0)&&(p===-1&&(p=f.length),!(this._opts.isUnshift&&p===0)))if(this._opts.isUnshift){p=Math.min(p,s);for(let m=0;m<p;m++)if(f.charCodeAt(m)===9){p=m+1;break}this._addEditOperation(t,new Q(h,1,h,p+1),"")}else this._addEditOperation(t,new Q(h,1,h,1),d),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let r=t.getInverseEditOperations()[0];return new wt(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let r=this._selection.startColumn;return n.startColumn<=r?n:n.getDirection()===0?new wt(n.startLineNumber,r,n.endLineNumber,n.endColumn):new wt(n.endLineNumber,n.endColumn,n.startLineNumber,r)}return n}}class IAe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),r=n[0].range,o=n[1].range;return new wt(r.endLineNumber,r.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class Dr{static indent(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new Tu(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static outdent(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new Tu(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static shiftIndent(e,t,n){return n=n||1,Tu.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Tu.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,r){let o=[];for(let s=0,a=n.length;s<a;s++)o[s]=new xs(n[s],r[s]);return new ul(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,r,o){let s=[];for(let a=0,u=n.length;a<u;a++){const d=n[a];let h=d.getPosition();if(o&&!d.isEmpty()&&(o=!1),o&&r.indexOf(`
`)!==r.length-1&&(o=!1),o){let f=new Q(h.lineNumber,1,h.lineNumber,1);s[a]=new cq(f,r,d,!0)}else s[a]=new xs(d,r)}return new ul(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,r,o){if(r||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let s=og(n);if(s.length===t.length)return s}return null}static paste(e,t,n,r,o,s){const a=this._distributePasteToCursors(e,n,r,o,s);return a?(n=n.sort(Q.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,r,o)}static _goodIndentForLine(e,t,n){let r=null,o="";const s=_i.getInheritIndentForLine(e.autoIndent,t,n,!1);if(s)r=s.action,o=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(Qf(h)>=0)break}if(a<1)return null;const u=t.getLineMaxColumn(a),d=_i.getEnterAction(e.autoIndent,t,new Q(a,u,a,u));d&&(o=d.indentation+d.appendText)}return r&&(r===co.Indent&&(o=Dr.shiftIndent(e,o)),r===co.Outdent&&(o=Dr.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,r){let o="",s=n.getStartPosition();if(e.insertSpaces){let a=cr.visibleColumnFromColumn2(e,t,s),u=e.indentSize,d=u-a%u;for(let h=0;h<d;h++)o+=" "}else o="	";return new xs(n,o,r)}static tab(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o];if(a.isEmpty()){let u=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(u)&&t.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";let h=e.normalizeIndentation(d);if(!u.startsWith(h)){r[o]=new xs(new Q(a.startLineNumber,1,a.startLineNumber,u.length+1),h,!0);continue}}r[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let u=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==u){r[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[o]=new Tu(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return r}static compositionType(e,t,n,r,o,s,a,u){const d=r.map(h=>this._compositionType(n,h,o,s,a,u));return new ul(4,d,{shouldPushStackElementBefore:HM(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,r,o,s){if(!t.isEmpty())return null;const a=t.getPosition(),u=Math.max(1,a.column-r),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),h=new Q(a.lineNumber,u,a.lineNumber,d);return e.getValueInRange(h)===n&&s===0?null:new l4(h,n,0,s)}static _typeCommand(e,t,n){return n?new WM(e,t,!0):new xs(e,t,!0)}static _enter(e,t,n,r){if(e.autoIndent===0)return Dr._typeCommand(r,`
`,n);if(!t.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){let u=t.getLineContent(r.startLineNumber),d=zi(u).substring(0,r.startColumn-1);return Dr._typeCommand(r,`
`+e.normalizeIndentation(d),n)}const o=_i.getEnterAction(e.autoIndent,t,r);if(o){if(o.indentAction===co.None)return Dr._typeCommand(r,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===co.Indent)return Dr._typeCommand(r,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===co.IndentOutdent){const u=e.normalizeIndentation(o.indentation),d=e.normalizeIndentation(o.indentation+o.appendText),h=`
`+d+`
`+u;return n?new WM(r,h,!0):new l4(r,h,-1,d.length-u.length,!0)}else if(o.indentAction===co.Outdent){const u=Dr.unshiftIndent(e,o.indentation);return Dr._typeCommand(r,`
`+e.normalizeIndentation(u+o.appendText),n)}}const s=t.getLineContent(r.startLineNumber),a=zi(s).substring(0,r.startColumn-1);if(e.autoIndent>=4){const u=_i.getIndentForEnter(e.autoIndent,t,r,{unshiftIndent:d=>Dr.unshiftIndent(e,d),shiftIndent:d=>Dr.shiftIndent(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)});if(u){let d=cr.visibleColumnFromColumn2(e,t,r.getEndPosition());const h=r.endColumn,f=t.getLineContent(r.endLineNumber),p=Na(f);if(p>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,p+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),n)return new WM(r,`
`+e.normalizeIndentation(u.afterEnter),!0);{let m=0;return h<=p+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),m=Math.min(d+1-e.normalizeIndentation(u.afterEnter).length-1,0)),new l4(r,`
`+e.normalizeIndentation(u.afterEnter),0,m,!0)}}}return Dr._typeCommand(r,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let r=0,o=n.length;r<o;r++)if(!t.isCheapToTokenize(n[r].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,r){const o=_i.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),s=_i.getIndentActionForType(e.autoIndent,t,n,r,{shiftIndent:a=>Dr.shiftIndent(e,a),unshiftIndent:a=>Dr.unshiftIndent(e,a)});if(s===null)return null;if(s!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Dr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+r,!1):Dr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+r,!1)}return null}static _isAutoClosingOvertype(e,t,n,r,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let s=0,a=n.length;s<a;s++){const u=n[s];if(!u.isEmpty())return!1;const d=u.getPosition(),h=t.getLineContent(d.lineNumber);if(h.charAt(d.column-1)!==o)return!1;const p=my(o);if((d.column>2?h.charCodeAt(d.column-2):0)===92&&p)return!1;if(e.autoClosingOvertype==="auto"){let v=!1;for(let b=0,E=r.length;b<E;b++){const S=r[b];if(d.lineNumber===S.startLineNumber&&d.column===S.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,r,o){let s=[];for(let a=0,u=r.length;a<u;a++){const h=r[a].getPosition(),f=new Q(h.lineNumber,h.column,h.lineNumber,h.column+1);s[a]=new xs(f,o)}return new ul(4,s,{shouldPushStackElementBefore:HM(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=r.some(u=>t.startsWith(u.open)),a=o.some(u=>t.startsWith(u.close));return!s&&a}static _findAutoClosingPairOpen(e,t,n,r){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!o)return null;let s=null;for(const a of o)if(s===null||a.open.length>s.open.length){let u=!0;for(const d of n)if(t.getValueInRange(new Q(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+r!==a.open){u=!1;break}u&&(s=a)}return s}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const s of r)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!o||s.open.length>o.open.length)&&(o=s);return o}static _getAutoClosingPairClose(e,t,n,r,o){const s=my(r),a=s?e.autoClosingQuotes:e.autoClosingBrackets,u=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const v of n)if(!v.isEmpty())return null;const d=n.map(v=>{const b=v.getPosition();return o?{lineNumber:b.lineNumber,beforeColumn:b.column-r.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),h=this._findAutoClosingPairOpen(e,t,d.map(v=>new Ee(v.lineNumber,v.beforeColumn)),r);if(!h)return null;const f=this._findContainedAutoClosingPair(e,h),p=f?f.close:"";let m=!0;for(const v of d){const{lineNumber:b,beforeColumn:E,afterColumn:S}=v,w=t.getLineContent(b),L=w.substring(0,E-1),A=w.substring(S-1);if(A.startsWith(p)||(m=!1),A.length>0){const R=A.charAt(0);if(!Dr._isBeforeClosingBrace(e,A)&&!u(R))return null}if(h.open.length===1&&(r==="'"||r==='"')&&a!=="always"){const R=gc(e.wordSeparators);if(L.length>0){const q=L.charCodeAt(L.length-1);if(R.get(q)===0)return null}}if(!t.isCheapToTokenize(b))return null;t.forceTokenization(b);const N=t.getLineTokens(b),H=o4(N,E-1);if(!h.shouldAutoClose(H,E-H.firstCharOffset))return null;const M=h.findNeutralCharacter();if(M){const R=t.getTokenTypeIfInsertingCharacter(b,E,M);if(!h.isOK(R))return null}}return m?h.close.substring(0,h.close.length-p.length):h.close}static _runAutoClosingOpenCharType(e,t,n,r,o,s,a){let u=[];for(let d=0,h=r.length;d<h;d++){const f=r[d];u[d]=new vde(f,o,!s,a)}return new ul(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return my(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,r){if(!Dr._shouldSurroundChar(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const o=my(r);for(let s=0,a=n.length;s<a;s++){const u=n[s];if(u.isEmpty())return!1;let d=!0;for(let h=u.startLineNumber;h<=u.endLineNumber;h++){const f=t.getLineContent(h),p=h===u.startLineNumber?u.startColumn-1:0,m=h===u.endLineNumber?u.endColumn-1:f.length,v=f.substring(p,m);if(/[^ \t]/.test(v)){d=!1;break}}if(d)return!1;if(o&&u.startLineNumber===u.endLineNumber&&u.startColumn+1===u.endColumn){const h=t.getValueInRange(u);if(my(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,r,o){let s=[];for(let a=0,u=r.length;a<u;a++){const d=r[a],h=t.surroundingPairs[o];s[a]=new IAe(d,o,h)}return new ul(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,r,o){if(!t.electricChars.hasOwnProperty(o)||!r.isEmpty())return null;let s=r.getPosition();n.forceTokenization(s.lineNumber);let a=n.getLineTokens(s.lineNumber),u;try{u=_i.onElectricCharacter(o,a,s.column)}catch(d){return gn(d),null}if(!u)return null;if(u.matchOpenBracket){let d=(a.getLineContent()+o).lastIndexOf(u.matchOpenBracket)+1,h=n.bracketPairs.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:s.lineNumber,column:d});if(h){if(h.startLineNumber===s.lineNumber)return null;let f=n.getLineContent(h.startLineNumber),p=zi(f),m=t.normalizeIndentation(p),v=n.getLineContent(s.lineNumber),b=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,E=v.substring(b-1,s.column-1),S=m+E+o,w=new Q(s.lineNumber,1,s.lineNumber,s.column);const L=new xs(w,S);return new ul(J9(S,e),[L],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,r,o,s){if(!r||wt.selectionsArrEqual(r,o))return null;let a=null;for(const d of o){if(!d.isEmpty())return null;const h=d.getPosition(),f=n.getValueInRange(new Q(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=f;else if(a!==f)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,o,s,a)){const d=o.map(h=>new xs(new Q(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new ul(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=this._getAutoClosingPairClose(t,n,o,a,!0);return u!==null?this._runAutoClosingOpenCharType(e,t,n,o,a,!0,u):null}static typeWithInterceptors(e,t,n,r,o,s,a){if(!e&&a===`
`){let h=[];for(let f=0,p=o.length;f<p;f++)h[f]=Dr._enter(n,r,!1,o[f]);return new ul(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,r,o)){let h=[],f=!1;for(let p=0,m=o.length;p<m;p++)if(h[p]=this._runAutoIndentType(n,r,o[p],a),!h[p]){f=!0;break}if(!f)return new ul(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,r,o,s,a))return this._runAutoClosingOvertype(t,n,r,o,a);if(!e){const h=this._getAutoClosingPairClose(n,r,o,a,!1);if(h)return this._runAutoClosingOpenCharType(t,n,r,o,a,!1,h)}if(this._isSurroundSelectionType(n,r,o,a))return this._runSurroundSelectionType(t,n,r,o,a);if(!e&&this._isTypeInterceptorElectricChar(n,r,o)){const h=this._typeInterceptorElectricChar(t,n,r,o[0],a);if(h)return h}let u=[];for(let h=0,f=o.length;h<f;h++)u[h]=new xs(o[h],a);const d=J9(a,t);return new ul(d,u,{shouldPushStackElementBefore:HM(t,d),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,r,o){let s=[];for(let u=0,d=r.length;u<d;u++)s[u]=new xs(r[u],o);const a=J9(o,e);return new ul(a,s,{shouldPushStackElementBefore:HM(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].positionLineNumber;if(a===1)r[o]=new WM(new Q(1,1,1,1),`
`);else{a--;let u=t.getLineMaxColumn(a);r[o]=this._enter(e,t,!1,new Q(a,u,a,u))}}return r}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].positionLineNumber;let u=t.getLineMaxColumn(a);r[o]=this._enter(e,t,!1,new Q(a,u,a,u))}return r}static lineBreakInsert(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=this._enter(e,t,!0,n[o]);return r}}class vde extends l4{constructor(e,t,n,r){super(e,(n?t:"")+r,0,-r.length),this._openCharacter=t,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Q(r.startLineNumber,r.endColumn-this._closeCharacter.length,r.endLineNumber,r.endColumn),this.enclosingRange=new Q(r.startLineNumber,r.endColumn-this._openCharacter.length-this._closeCharacter.length,r.endLineNumber,r.endColumn),super.computeCursorState(e,t)}}function J9(i,e){return i===" "?e===5||e===6?6:5:4}function HM(i,e){return mee(i)&&!mee(e)?!0:i===5?!1:pee(i)!==pee(e)}function pee(i){return i===6||i===5?"space":i}function mee(i){return i===4||i===5||i===6}var de;(function(i){i.editorSimpleInput=new Dt("editorSimpleInput",!1,!0),i.editorTextFocus=new Dt("editorTextFocus",!1,C("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Dt("editorFocus",!1,C("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Dt("textInputFocus",!1,C("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Dt("editorReadonly",!1,C("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new Dt("inDiffEditor",!1,C("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new Dt("editorColumnSelection",!1,C("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Dt("editorHasSelection",!1,C("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Dt("editorHasMultipleSelections",!1,C("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Dt("editorTabMovesFocus",!1,C("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Dt("isInEmbeddedEditor",!1,!0),i.canUndo=new Dt("canUndo",!1,!0),i.canRedo=new Dt("canRedo",!1,!0),i.hoverVisible=new Dt("editorHoverVisible",!1,C("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new Dt("inCompositeEditor",void 0,C("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Dt("editorLangId","",C("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Dt("editorHasCompletionItemProvider",!1,C("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Dt("editorHasCodeActionsProvider",!1,C("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Dt("editorHasCodeLensProvider",!1,C("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Dt("editorHasDefinitionProvider",!1,C("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Dt("editorHasDeclarationProvider",!1,C("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Dt("editorHasImplementationProvider",!1,C("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Dt("editorHasTypeDefinitionProvider",!1,C("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Dt("editorHasHoverProvider",!1,C("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Dt("editorHasDocumentHighlightProvider",!1,C("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Dt("editorHasDocumentSymbolProvider",!1,C("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Dt("editorHasReferenceProvider",!1,C("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Dt("editorHasRenameProvider",!1,C("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Dt("editorHasSignatureHelpProvider",!1,C("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Dt("editorHasInlayHintsProvider",!1,C("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Dt("editorHasDocumentFormattingProvider",!1,C("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Dt("editorHasDocumentSelectionFormattingProvider",!1,C("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Dt("editorHasMultipleDocumentFormattingProvider",!1,C("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Dt("editorHasMultipleDocumentSelectionFormattingProvider",!1,C("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(de||(de={}));const mi=0;class mo extends Ps{runEditorCommand(e,t,n){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,n||{})}}var c3;(function(i){const e=function(n){if(!Ya(n))return!1;const r=n;return!(!cc(r.to)||!ml(r.by)&&!cc(r.by)||!ml(r.value)&&!E1(r.value)||!ml(r.revealCursor)&&!_ue(r.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let r;switch(n.to){case i.RawDirection.Up:r=1;break;case i.RawDirection.Down:r=2;break;default:return null}let o;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Page:o=3;break;case i.RawUnit.HalfPage:o=4;break;default:o=2}const s=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:r,unit:o,value:s,revealCursor:a,select:!!n.select}}i.parse=t})(c3||(c3={}));var Vy;(function(i){const e=function(t){if(!Ya(t))return!1;const n=t;return!(!E1(n.lineNumber)&&!cc(n.lineNumber)||!ml(n.at)&&!cc(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Vy||(Vy={}));class KH{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Ii).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const r=document.activeElement;return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const r=t.get(Ii).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,n)):!1})}_runEditorCommand(e,t,n){const r=this.runEditorCommand(e,t,n);return r||!0}}var Go;(function(i){class e extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,[os.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,L.position,L.viewPosition)]),w.revealPrimaryCursor(L.source,!0)}}i.MoveTo=nt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=nt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends mo{runCoreEditorCommand(w,L){w.model.pushStackElement();const A=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),L);w.setCursorStates(L.source,3,A.viewStates.map(N=>Mn.fromViewState(N))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:A.fromLineNumber,fromViewVisualColumn:A.fromVisualColumn,toViewLineNumber:A.toLineNumber,toViewVisualColumn:A.toVisualColumn}),A.reversed?w.revealTopMostCursor(L.source):w.revealBottomMostCursor(L.source)}}i.ColumnSelect=nt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(S,w,L,A){const N=S.model.validatePosition(A.position),H=S.coordinatesConverter.validateViewPosition(new Ee(A.viewPosition.lineNumber,A.viewPosition.column),N);let M=A.doColumnSelect?L.fromViewLineNumber:H.lineNumber,R=A.doColumnSelect?L.fromViewVisualColumn:A.mouseColumn-1;return Sb.columnSelect(S.cursorConfig,S,M,R,H.lineNumber,A.mouseColumn-1)}}),i.CursorColumnSelectLeft=nt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(S,w,L,A){return Sb.columnSelectLeft(S.cursorConfig,S,L)}}),i.CursorColumnSelectRight=nt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(S,w,L,A){return Sb.columnSelectRight(S.cursorConfig,S,L)}});class n extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,L,A,N){return Sb.columnSelectUp(w.cursorConfig,w,A,this._isPaged)}}i.CursorColumnSelectUp=nt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=nt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,L,A,N){return Sb.columnSelectDown(w.cursorConfig,w,A,this._isPaged)}}i.CursorColumnSelectDown=nt(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=nt(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends mo{constructor(){super({id:"cursorMove",precondition:void 0,description:u3.description})}runCoreEditorCommand(w,L){const A=u3.parse(L);A&&this._runCursorMove(w,L.source,A)}_runCursorMove(w,L,A){w.model.pushStackElement(),w.setCursorStates(L,3,o._move(w,w.getCursorStates(),A)),w.revealPrimaryCursor(L,!0)}static _move(w,L,A){const N=A.select,H=A.value;switch(A.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return os.simpleMove(w,L,A.direction,N,H,A.unit);case 11:case 13:case 12:case 14:return os.viewportMove(w,L,A.direction,N,H);default:return null}}}i.CursorMoveImpl=o,i.CursorMove=nt(new o);class s extends mo{constructor(w){super(w),this._staticArgs=w.args}runCoreEditorCommand(w,L){let A=this._staticArgs;this._staticArgs.value===-1&&(A={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(L.source,3,os.simpleMove(w,w.getCursorStates(),A.direction,A.select,A.value,A.unit)),w.revealPrimaryCursor(L.source,!0)}}i.CursorLeft=nt(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=nt(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1039}})),i.CursorRight=nt(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=nt(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1041}})),i.CursorUp=nt(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=nt(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=nt(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:11}})),i.CursorPageUpSelect=nt(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1035}})),i.CursorDown=nt(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=nt(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=nt(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:12}})),i.CursorPageDownSelect=nt(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1036}})),i.CreateCursor=nt(new class extends mo{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(S,w){let L;w.wholeLine?L=os.line(S,S.getPrimaryCursorState(),!1,w.position,w.viewPosition):L=os.moveTo(S,S.getPrimaryCursorState(),!1,w.position,w.viewPosition);const A=S.getCursorStates();if(A.length>1){const N=L.modelState?L.modelState.position:null,H=L.viewState?L.viewState.position:null;for(let M=0,R=A.length;M<R;M++){const q=A[M];if(!(N&&!q.modelState.selection.containsPosition(N))&&!(H&&!q.viewState.selection.containsPosition(H))){A.splice(M,1),S.model.pushStackElement(),S.setCursorStates(w.source,3,A);return}}}A.push(L),S.model.pushStackElement(),S.setCursorStates(w.source,3,A)}}),i.LastCursorMoveToSelect=nt(new class extends mo{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(S,w){const L=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0);N[L]=os.moveTo(S,A[L],!0,w.position,w.viewPosition),S.model.pushStackElement(),S.setCursorStates(w.source,3,N)}});class a extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,os.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(L.source,!0)}}i.CursorHome=nt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=nt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class u extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,this._exec(w.getCursorStates())),w.revealPrimaryCursor(L.source,!0)}_exec(w){const L=[];for(let A=0,N=w.length;A<N;A++){const H=w[A],M=H.modelState.position.lineNumber;L[A]=Mn.fromModelState(H.modelState.move(this._inSelectionMode,M,1,0))}return L}}i.CursorLineStart=nt(new u({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=nt(new u({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:1311}}}));class d extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,os.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,L.sticky||!1)),w.revealPrimaryCursor(L.source,!0)}}i.CursorEnd=nt(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:mi,kbExpr:de.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=nt(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:mi,kbExpr:de.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,this._exec(w,w.getCursorStates())),w.revealPrimaryCursor(L.source,!0)}_exec(w,L){const A=[];for(let N=0,H=L.length;N<H;N++){const M=L[N],R=M.modelState.position.lineNumber,q=w.model.getLineMaxColumn(R);A[N]=Mn.fromModelState(M.modelState.move(this._inSelectionMode,R,q,0))}return A}}i.CursorLineEnd=nt(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=nt(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,os.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(L.source,!0)}}i.CursorTop=nt(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=nt(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,os.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(L.source,!0)}}i.CursorBottom=nt(new p({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=nt(new p({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends mo{constructor(){super({id:"editorScroll",precondition:void 0,description:c3.description})}runCoreEditorCommand(w,L){const A=c3.parse(L);A&&this._runEditorScroll(w,L.source,A)}_runEditorScroll(w,L,A){const N=this._computeDesiredScrollTop(w,A);if(A.revealCursor){const H=w.getCompletelyVisibleViewRangeAtScrollTop(N);w.setCursorStates(L,3,[os.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),H,A.select)])}w.setScrollTop(N,0)}_computeDesiredScrollTop(w,L){if(L.unit===1){const H=w.getCompletelyVisibleViewRange(),M=w.coordinatesConverter.convertViewRangeToModelRange(H);let R;L.direction===1?R=Math.max(1,M.startLineNumber-L.value):R=Math.min(w.model.getLineCount(),M.startLineNumber+L.value);const q=w.coordinatesConverter.convertModelPositionToViewPosition(new Ee(R,1));return w.getVerticalOffsetForLineNumber(q.lineNumber)}let A;L.unit===3?A=w.cursorConfig.pageSize*L.value:L.unit===4?A=Math.round(w.cursorConfig.pageSize/2)*L.value:A=L.value;const N=(L.direction===1?-1:1)*A;return w.getScrollTop()+N*w.cursorConfig.lineHeight}}i.EditorScrollImpl=m,i.EditorScroll=nt(new m),i.ScrollLineUp=nt(new class extends mo{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(S,w){i.EditorScroll._runEditorScroll(S,w.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=nt(new class extends mo{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(S,w){i.EditorScroll._runEditorScroll(S,w.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=nt(new class extends mo{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(S,w){i.EditorScroll._runEditorScroll(S,w.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=nt(new class extends mo{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(S,w){i.EditorScroll._runEditorScroll(S,w.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class v extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,[os.word(w,w.getPrimaryCursorState(),this._inSelectionMode,L.position)]),w.revealPrimaryCursor(L.source,!0)}}i.WordSelect=nt(new v({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=nt(new v({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=nt(new class extends mo{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(S,w){const L=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0),H=A[L];N[L]=os.word(S,H,H.modelState.hasSelection(),w.position),S.model.pushStackElement(),S.setCursorStates(w.source,3,N)}});class b extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){w.model.pushStackElement(),w.setCursorStates(L.source,3,[os.line(w,w.getPrimaryCursorState(),this._inSelectionMode,L.position,L.viewPosition)]),w.revealPrimaryCursor(L.source,!1)}}i.LineSelect=nt(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=nt(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class E extends mo{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,L){const A=w.getLastAddedCursorIndex(),N=w.getCursorStates(),H=N.slice(0);H[A]=os.line(w,N[A],this._inSelectionMode,L.position,L.viewPosition),w.model.pushStackElement(),w.setCursorStates(L.source,3,H)}}i.LastCursorLineSelect=nt(new E({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=nt(new E({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=nt(new class extends mo{constructor(){super({id:"cancelSelection",precondition:de.hasNonEmptySelection,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,w){S.model.pushStackElement(),S.setCursorStates(w.source,3,[os.cancelSelection(S,S.getPrimaryCursorState())]),S.revealPrimaryCursor(w.source,!0)}}),i.RemoveSecondaryCursors=nt(new class extends mo{constructor(){super({id:"removeSecondaryCursors",precondition:de.hasMultipleSelections,kbOpts:{weight:mi+1,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,w){S.model.pushStackElement(),S.setCursorStates(w.source,3,[S.getPrimaryCursorState()]),S.revealPrimaryCursor(w.source,!0),LF(C("removedCursor","Removed secondary cursors"))}}),i.RevealLine=nt(new class extends mo{constructor(){super({id:"revealLine",precondition:void 0,description:Vy.description})}runCoreEditorCommand(S,w){const L=w,A=L.lineNumber||0;let N=typeof A=="number"?A+1:parseInt(A)+1;N<1&&(N=1);const H=S.model.getLineCount();N>H&&(N=H);const M=new Q(N,1,N,S.model.getLineMaxColumn(N));let R=0;if(L.at)switch(L.at){case Vy.RawAtArgument.Top:R=3;break;case Vy.RawAtArgument.Center:R=1;break;case Vy.RawAtArgument.Bottom:R=4;break}const q=S.coordinatesConverter.convertModelRangeToViewRange(M);S.revealRange(w.source,!1,q,R,0)}}),i.SelectAll=new class extends KH{constructor(){super(Lxe)}runDOMCommand(){wl&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(S,w,L){const A=w._getViewModel();A&&this.runCoreEditorCommand(A,L)}runCoreEditorCommand(S,w){S.model.pushStackElement(),S.setCursorStates("keyboard",3,[os.selectAll(S,S.getPrimaryCursorState())])}},i.SetSelection=nt(new class extends mo{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(S,w){S.model.pushStackElement(),S.setCursorStates(w.source,3,[Mn.fromModelSelection(w.selection)])}})})(Go||(Go={}));const kAe=_t.and(de.textInputFocus,de.columnSelection);function US(i,e){Os.registerKeybindingRule({id:i,primary:e,when:kAe,weight:mi+1})}US(Go.CursorColumnSelectLeft.id,1039);US(Go.CursorColumnSelectRight.id,1041);US(Go.CursorColumnSelectUp.id,1040);US(Go.CursorColumnSelectPageUp.id,1035);US(Go.CursorColumnSelectDown.id,1042);US(Go.CursorColumnSelectPageDown.id,1036);function _ee(i){return i.register(),i}var Cw;(function(i){class e extends Ps{runEditorCommand(n,r,o){const s=r._getViewModel();s&&this.runCoreEditingCommand(r,s,o||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=nt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:de.writable,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,Dr.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),i.Outdent=nt(new class extends e{constructor(){super({id:"outdent",precondition:de.writable,kbOpts:{weight:mi,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,Dr.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.Tab=nt(new class extends e{constructor(){super({id:"tab",precondition:de.writable,kbOpts:{weight:mi,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,Dr.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=nt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,r){const[o,s]=M1.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(2)}}),i.DeleteRight=nt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:mi,kbExpr:de.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,r){const[o,s]=M1.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(3)}}),i.Undo=new class extends KH{constructor(){super(Fue)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends KH{constructor(){super(Bue)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(Cw||(Cw={}));class vee extends SB{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(Ii).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function xC(i,e){_ee(new vee("default:"+i,i)),_ee(new vee(i,i,e))}xC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});xC("replacePreviousChar");xC("compositionType");xC("compositionStart");xC("compositionEnd");xC("paste");xC("cut");class NAe{constructor(e,t,n,r){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=r}paste(e,t,n,r){this.commandDelegate.paste(e,t,n,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,r){this.commandDelegate.compositionType(e,t,n,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Go.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Ee(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Qa&&t.get(95),r=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Go.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Go.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Go.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Go.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Go.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Go.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Go.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Go.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Go.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Go.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Go.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Go.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Go.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class qB{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return qB.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new AAe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class AAe{constructor(e,t,n,r,o,s){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,this.range=o,this.detail=s}toString(){return xh.toString(this)}}var e6;class bde{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<n){const u=t-e+1;return this._rendLineNumberStart-=u,null}if(e>r)return null;let o=0,s=0;for(let u=n;u<=r;u++){const d=u-this._rendLineNumberStart;e<=u&&u<=t&&(s===0?(o=d,s=1):s++)}if(e<n){let u=0;t<n?u=t-e+1:u=n-e,this._rendLineNumberStart-=u}return this._lines.splice(o,s)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let s=e;s<=t;s++)s>=n&&s<=r&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,r=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const s=[];for(let f=0;f<n;f++)s[f]=this._createLine();const a=e-this._rendLineNumberStart,u=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=u.concat(s).concat(d),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let r=!1;for(let o=0,s=e.length;o<s;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const u=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let h=u;h<=d;h++){const f=h-this._rendLineNumberStart;this._lines[f].onTokensChanged(),r=!0}}return r}}class Cde{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new bde(()=>this._host.createVisibleLine())}_createDomNode(){const e=ii(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new rp(this.domNode.domNode,this._host,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class rp{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,r){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let s=t;s<=n;s++)o.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,r),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),r,t),o.rendLineNumberStart>t){const s=t,a=Math.min(n,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,r,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){const s=Math.min(o.linesLength,t-o.rendLineNumberStart);s>0&&(this._removeLinesBefore(o,s),o.linesLength-=s)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const s=o.rendLineNumberStart+o.linesLength,a=n;s<=a&&(this._insertLinesAfter(o,s,a,r,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const s=Math.max(0,n-o.rendLineNumberStart+1),u=o.linesLength-1-s+1;u>0&&(this._removeLinesAfter(o,u),o.linesLength-=u)}return this._finishRendering(o,!1,r),o}_renderUntouchedLines(e,t,n,r,o){const s=e.rendLineNumberStart,a=e.lines;for(let u=t;u<=n;u++){const d=s+u;a[u].layoutLine(d,r[d-o])}}_insertLinesBefore(e,t,n,r,o){const s=[];let a=0;for(let u=t;u<=n;u++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const r=e.lines[n].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,r,o){const s=[];let a=0;for(let u=t;u<=n;u++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let r=0;r<t;r++){const o=e.lines[n+r].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,r){rp._ttPolicy&&(n=rp._ttPolicy.createHTML(n));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let s=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const u=e.lines[a];r[a]&&(u.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const r=document.createElement("div");rp._ttPolicy&&(t=rp._ttPolicy.createHTML(t)),r.innerHTML=t;for(let o=0;o<e.linesLength;o++){const s=e.lines[o];if(n[o]){const a=r.firstChild,u=s.getDomNode();u.parentNode.replaceChild(a,u),s.setDomNode(a)}}}_finishRendering(e,t,n){const r=rp._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,u=[];{r.reset();let d=!1;for(let h=0;h<o;h++){const f=s[h];u[h]=!1,!(f.getDomNode()||!f.renderLine(h+a,n[h],this.viewportData,r))&&(u[h]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,r.build(),u)}{r.reset();let d=!1;const h=[];for(let f=0;f<o;f++){const p=s[f];h[f]=!1,!(u[f]||!p.renderLine(f+a,n[f],this.viewportData,r))&&(h[f]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,r.build(),h)}}}rp._ttPolicy=(e6=window.trustedTypes)===null||e6===void 0?void 0:e6.createPolicy("editorViewLayer",{createHTML:i=>i});rp._sb=N1(1e5);class yde extends vc{constructor(e){super(e),this._visibleLines=new Cde(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new OAe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,r=t.length;n<r;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class OAe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ii(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,r){let o="";for(let s=0,a=this._dynamicOverlays.length;s<a;s++){const u=this._dynamicOverlays[s];o+=u.render(n.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendASCIIString('<div style="position:absolute;top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;width:100%;height:"),r.appendASCIIString(String(this._lineHeight)),r.appendASCIIString('px;">'),r.appendASCIIString(o),r.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class RAe extends yde{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class MAe extends yde{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Oa.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Oa.applyFontInfo(this.domNode,t.get(43));const n=t.get(130);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class NN{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class PAe extends vc{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ii(document.createElement("div")),ag.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ii(document.createElement("div")),ag.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new FAe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const r=n.domNode.domNode;r.parentNode.removeChild(r),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let FAe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=ii(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,o=r.get(130);this._fixedOverflowWidgets=r.get(36),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=r.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(130)){const n=t.get(130);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,r,o){const s=e.top,a=s,u=t.top+this._lineHeight,d=o.viewportHeight-u,h=s-r,f=a>=r,p=u,m=d>=r;let v=e.left,b=t.left;return v+n>o.scrollLeft+o.viewportWidth&&(v=o.scrollLeft+o.viewportWidth-n),b+n>o.scrollLeft+o.viewportWidth&&(b=o.scrollLeft+o.viewportWidth-n),v<o.scrollLeft&&(v=o.scrollLeft),b<o.scrollLeft&&(b=o.scrollLeft),{fitsAbove:f,aboveTop:h,aboveLeft:v,fitsBelow:m,belowTop:p,belowLeft:b}}_layoutHorizontalSegmentInPage(e,t,n,r){const o=Math.max(0,t.left-r),s=Math.min(t.left+t.width+r,e.width);let a=t.left+n-pp.scrollX;if(a+r>s){const u=a-(s-r);a-=u,n-=u}if(a<o){const u=a-o;a-=u,n-=u}return[n,a]}_layoutBoxInPage(e,t,n,r,o){const s=e.top-r,a=t.top+this._lineHeight,u=Us(this._viewDomNode.domNode),d=u.top+s-pp.scrollY,h=u.top+a-pp.scrollY,f=dB(document.body),[p,m]=this._layoutHorizontalSegmentInPage(f,u,e.left-o.scrollLeft+this._contentLeft,n),[v,b]=this._layoutHorizontalSegmentInPage(f,u,t.left-o.scrollLeft+this._contentLeft,n),E=22,S=22,w=d>=E,L=h+r<=f.height-S;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(d,E),aboveLeft:m,fitsBelow:L,belowTop:h,belowLeft:b}:{fitsAbove:w,aboveTop:s,aboveLeft:p,fitsBelow:L,belowTop:a,belowLeft:v}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new NN(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],r=t[0];for(const f of t)f.lineNumber<n.lineNumber&&(n=f),f.lineNumber>r.lineNumber&&(r=f);let o=1073741824;for(const f of n.ranges)f.left<o&&(o=f.left);let s=1073741824;for(const f of r.ranges)f.left<s&&(s=f.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,u=new NN(a,o),d=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop,h=new NN(d,s);return[u,h]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=t6(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeClientWidth=o.width,this._cachedDomNodeClientHeight=o.height;else{const s=this.domNode.domNode;this._cachedDomNodeClientWidth=s.clientWidth,this._cachedDomNodeClientHeight=s.clientHeight}}let r;this.allowEditorOverflow?r=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):r=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e);for(let o=1;o<=2;o++)for(const s of this._preference)if(s===1){if(!r)return null;if(o===2||r.fitsAbove)return{coordinate:new NN(r.aboveTop,r.aboveLeft),position:1}}else if(s===2){if(!r)return null;if(o===2||r.fitsBelow)return{coordinate:new NN(r.belowTop,r.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&t6(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&t6(this._actual.afterRender,this._actual,this._renderData.position)}};function t6(i,e,...t){try{return i.call(e,...t)}catch{return null}}let GH=!0;class wde extends zS{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new wt(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=GH?this._selections.slice(0,1):this._selections,n=t.map(o=>o.positionLineNumber);n.sort((o,s)=>o-s),rc(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const r=t.every(o=>o.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let s=0;const a=[];for(let u=n;u<=r;u++){const d=u-n;for(;s<o&&this._cursorLineNumbers[s]<u;)s++;s<o&&this._cursorLineNumbers[s]===u?a[d]=t:a[d]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class BAe extends wde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class WAe extends wde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}fr((i,e)=>{GH=!1;const t=i.getColor(g2e);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(see)){const n=i.getColor(see);n&&(GH=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class VAe extends zS{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let u=0,d=t.length;u<d;u++){const h=t[u];h.options.className&&(n[r++]=h)}n=n.sort((u,d)=>{if(u.options.zIndex<d.options.zIndex)return-1;if(u.options.zIndex>d.options.zIndex)return 1;const h=u.options.className,f=d.options.className;return h<f?-1:h>f?1:Q.compareRangesUsingStarts(u.range,d.range)});const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let u=o;u<=s;u++){const d=u-o;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const r=String(this._lineHeight),o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let a=0,u=t.length;a<u;a++){const d=t[a];if(!d.options.isWholeLine)continue;const h='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+r+'px;"></div>',f=Math.max(d.range.startLineNumber,o),p=Math.min(d.range.endLineNumber,s);for(let m=f;m<=p;m++){const v=m-o;n[v]+=h}}}_renderNormalDecorations(e,t,n){const r=String(this._lineHeight),o=e.visibleRange.startLineNumber;let s=null,a=!1,u=null;for(let d=0,h=t.length;d<h;d++){const f=t[d];if(f.options.isWholeLine)continue;const p=f.options.className,m=!!f.options.showIfCollapsed;let v=f.range;if(m&&v.endColumn===1&&v.endLineNumber!==v.startLineNumber&&(v=new Q(v.startLineNumber,v.startColumn,v.endLineNumber-1,this._context.model.getLineMaxColumn(v.endLineNumber-1))),s===p&&a===m&&Q.areIntersectingOrTouching(u,v)){u=Q.plusRange(u,v);continue}s!==null&&this._renderNormalDecoration(e,u,s,a,r,o,n),s=p,a=m,u=v}s!==null&&this._renderNormalDecoration(e,u,s,a,r,o,n)}_renderNormalDecoration(e,t,n,r,o,s,a){const u=e.linesVisibleRangesForRange(t,n==="findMatch");if(u)for(let d=0,h=u.length;d<h;d++){const f=u[d];if(f.outsideRenderedLine)continue;const p=f.lineNumber-s;if(r&&f.ranges.length===1){const m=f.ranges[0];if(m.width<this._typicalHalfwidthCharacterWidth){const v=Math.round(m.left+m.width/2),b=Math.max(0,Math.round(v-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new AB(b,this._typicalHalfwidthCharacterWidth)}}for(let m=0,v=f.ranges.length;m<v;m++){const b=f.ranges[m],E='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+o+'px;"></div>';a[p]+=E}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Vu extends Oe{onclick(e,t){this._register(qe(e,Ht.CLICK,n=>t(new Ju(n))))}onmousedown(e,t){this._register(qe(e,Ht.MOUSE_DOWN,n=>t(new Ju(n))))}onmouseover(e,t){this._register(qe(e,Ht.MOUSE_OVER,n=>t(new Ju(n))))}onnonbubblingmouseout(e,t){this._register(dG(e,n=>t(new Ju(n))))}onkeydown(e,t){this._register(qe(e,Ht.KEY_DOWN,n=>t(new Sr(n))))}onkeyup(e,t){this._register(qe(e,Ht.KEY_UP,n=>t(new Sr(n))))}oninput(e,t){this._register(qe(e,Ht.INPUT,t))}onblur(e,t){this._register(qe(e,Ht.BLUR,t))}onfocus(e,t){this._register(qe(e,Ht.FOCUS,t))}ignoreGesture(e){Hi.ignoreTarget(e)}}const Jw=11;class HAe extends Vu{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Jw+"px",this.domNode.style.height=Jw+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new EC),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new sR),this._mousedownScheduleRepeatTimer=this._register(new Ma)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,VS,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class $Ae extends Oe{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ma)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const zAe=140;class Sde extends Vu{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new $Ae(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new EC),this._shouldRender=!0,this.domNode=ii(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new HAe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=ii(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,o=>{o.leftButton&&(o.preventDefault(),this._sliderMouseDown(o,()=>{}))}),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(e);n<=o&&o<=r?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const o=Us(this.domNode.domNode);t=e.posx-o.left,n=e.posy-o.top}const r=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),r=this._sliderOrthogonalMousePosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,VS,s=>{const a=this._sliderOrthogonalMousePosition(s),u=Math.abs(a-r);if(As&&u>zAe){this._setDesiredScrollPositionNow(o.getScrollPosition());return}const h=this._sliderMousePosition(s)-n;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const UAe=20;class BA{constructor(e,t,n,r,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new BA(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,o){const s=Math.max(0,n-e),a=Math.max(0,s-2*t),u=r>0&&r>n;if(!u)return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const d=Math.round(Math.max(UAe,Math.floor(n*a/r))),h=(a-d)/(r-n),f=o*h;return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(d),computedSliderRatio:h,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=BA._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class jAe extends Sde{constructor(e,t,n){const r=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const s=(t.arrowSize-Jw)/2,a=(t.horizontalScrollbarSize-Jw)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Hw(null,1,0))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Hw(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class KAe extends Sde{constructor(e,t,n){const r=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const s=(t.arrowSize-Jw)/2,a=(t.verticalScrollbarSize-Jw)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Hw(null,0,1))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Hw(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class d3{constructor(e,t,n,r,o,s){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,s=s|0,this.rawScrollLeft=n,this.rawScrollTop=s,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),r<0&&(r=0),s+r>o&&(s=o-r),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=r,this.scrollHeight=o,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new d3(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new d3(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,u=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:u}}}class YB extends Oe{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ce),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new d3(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;t?r=new WA(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=WA.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class bee{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function n6(i,e){const t=e-i;return function(n){return i+t*YAe(n)}}function GAe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class WA{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),GAe(n6(e,o),n6(s,t),.33)}return n6(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),r=this.scrollTop(t);return new bee(n,r,!1)}return new bee(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return WA.start(e,t,n)}static start(e,t,n){n=n+10;const r=Date.now()-10;return new WA(e,t,r,n)}}function qAe(i){return Math.pow(i,3)}function YAe(i){return 1-qAe(1-i)}const ZAe=500,Cee=50;class XAe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class qH{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{const o=r===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[r].score*o,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const r=new XAe(e,t,n);r.score=this._computeScore(r),this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}qH.INSTANCE=new qH;class Ede extends Vu{constructor(e,t,n){super(),this._onScroll=this._register(new Ce),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ce),e.style.overflow="hidden",this._options=QAe(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const r={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new KAe(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new jAe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ii(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ii(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ii(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onnonbubblingmouseout(this._listenOnDomNode,o=>this._onMouseOut(o)),this._hideTimeout=this._register(new Ma),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ri(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Gn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ri(this._mouseWheelToDispose),e)){const n=r=>{this._onMouseWheel(new Hw(r))};this._mouseWheelToDispose.push(qe(this._listenOnDomNode,Ht.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=qH.INSTANCE;{const o=window.devicePixelRatio/zle();As||Qa?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);const a=!Gn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const u=this._scrollable.getFutureScrollPosition();let d={};if(o){const h=Cee*o,f=u.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(d,f)}if(s){const h=Cee*s,f=u.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(d,f)}d=this._scrollable.validateScrollPosition(d),(u.scrollLeft!==d.scrollLeft||u.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let r=n;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),ZAe)}}class dq extends Ede{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new YB(0,r=>rg(r));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class hq extends Ede{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class pR extends dq{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function QAe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Gn&&(e.className+=" mac"),e}class JAe extends vc{constructor(e,t,n,r){super(e);const o=this._context.configuration.options,s=o.get(91),a=o.get(66),u=o.get(34),d=o.get(94),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+PF(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:u,scrollPredominantAxis:d,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new hq(t.domNode,h,this._context.viewLayout.getScrollable())),ag.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=ii(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(p,m,v)=>{const b={};if(m){const E=p.scrollTop;E&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+E,p.scrollTop=0)}if(v){const E=p.scrollLeft;E&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+E,p.scrollLeft=0)}this._context.model.setScrollPosition(b,1)};this._register(qe(n.domNode,"scroll",p=>f(n.domNode,!0,!0))),this._register(qe(t.domNode,"scroll",p=>f(t.domNode,!0,!1))),this._register(qe(r.domNode,"scroll",p=>f(r.domNode,!0,!1))),this._register(qe(this.scrollbarDomNode.domNode,"scroll",p=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(130);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),r=t.get(66),o=t.get(34),s=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:o,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(130)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+PF(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}fr((i,e)=>{const t=i.getColor(HS);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(fw);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.getColor(gw);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const o=i.getColor(pw);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});class h3{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class fq extends zS{_render(e,t,n){const r=[];for(let a=e;a<=t;a++){const u=a-e;r[u]=[]}if(n.length===0)return r;n.sort((a,u)=>a.className===u.className?a.startLineNumber===u.startLineNumber?a.endLineNumber-u.endLineNumber:a.startLineNumber-u.startLineNumber:a.className<u.className?-1:1);let o=null,s=0;for(let a=0,u=n.length;a<u;a++){const d=n[a],h=d.className;let f=Math.max(d.startLineNumber,e)-e;const p=Math.min(d.endLineNumber,t)-e;o===h?(f=Math.max(s+1,f),s=Math.max(s,p)):(o=h,s=p);for(let m=f;m<=s;m++)r[m].push(o)}return r}}class eOe extends fq{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.glyphMarginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=this._lineHeight.toString(),s=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),u='" style="left:'+s+"px;width:"+a+"px;height:"+o+'px;"></div>',d=[];for(let h=t;h<=n;h++){const f=h-t,p=r[f];p.length===0?d[f]="":d[f]='<div class="cgmr codicon '+p.join(" ")+u}this._renderResult=d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class tOe extends zS{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(131),r=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131),r=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const r=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(r)?!1:(this._primaryPosition=r,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,r,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,u=e.scrollWidth,d=this._lineHeight,h=this._primaryPosition,f=this.getGuidesByLine(s,a,h),p=[];for(let m=s;m<=a;m++){const v=m-s,b=f[v];let E="";const S=(n=(t=e.visibleRangeForPosition(new Ee(m,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const w of b){const L=S+(w.visibleColumn-1)*this._spaceWidth;if(L>u||this._maxIndentLeft>0&&L>this._maxIndentLeft)break;const A=w.horizontalLine?w.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",N=w.horizontalLine?((o=(r=e.visibleRangeForPosition(new Ee(m,w.horizontalLine.endColumn)))===null||r===void 0?void 0:r.left)!==null&&o!==void 0?o:L+this._spaceWidth)-L:this._spaceWidth;E+=`<div class="core-guide ${w.className} ${A}" style="left:${L}px;height:${d}px;width:${N}px"></div>`}p[v]=E}this._renderResult=p}getGuidesByLine(e,t,n){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Jb.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Jb.EnabledForActive:Jb.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let s=0,a=0,u=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const f=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);s=f.startLineNumber,a=f.endLineNumber,u=f.indent}const{indentSize:d}=this._context.model.getTextModelOptions(),h=[];for(let f=e;f<=t;f++){const p=new Array;h.push(p);const m=r?r[f-e]:[],v=new dw(m),b=o?o[f-e]:[];for(let E=1;E<=b;E++){const S=(E-1)*d+1,w=m.length===0&&s<=f&&f<=a&&E===u;p.push(...v.takeWhile(A=>A.visibleColumn<S)||[]);const L=v.peek();(!L||L.visibleColumn!==S||L.horizontalLine)&&p.push(new My(S,w?"core-guide-indent-active":"core-guide-indent",null))}p.push(...v.takeWhile(E=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function $M(i){if(!(i&&i.isTransparent()))return i}fr((i,e)=>{const t=i.getColor(UB);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(jB)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const r=[{bracketColor:lde,guideColor:P2e,guideColorActive:$2e},{bracketColor:ude,guideColor:F2e,guideColorActive:z2e},{bracketColor:cde,guideColor:B2e,guideColorActive:U2e},{bracketColor:dde,guideColor:W2e,guideColorActive:j2e},{bracketColor:hde,guideColor:V2e,guideColorActive:K2e},{bracketColor:fde,guideColor:H2e,guideColorActive:G2e}],o=new pde;let s=r.map(a=>{var u,d;const h=i.getColor(a.bracketColor),f=i.getColor(a.guideColor),p=i.getColor(a.guideColorActive),m=$M((u=$M(f))!==null&&u!==void 0?u:h==null?void 0:h.transparent(.3)),v=$M((d=$M(p))!==null&&d!==void 0?d:h);if(!(!m||!v))return{guideColor:m,guideColorActive:v}}).filter($Le);if(s.length>0){for(let a=0;a<30;a++){const u=s[a%s.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${u.guideColor}; --guide-color-active: ${u.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class nOe{constructor(){this._currentVisibleRange=new Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class iOe{constructor(e,t,n,r,o,s){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=s,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class rOe{constructor(e,t,n,r){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=r,this.type="selections";let o=e[0].startLineNumber,s=e[0].endLineNumber;for(let a=1,u=e.length;a<u;a++){const d=e[a];o=Math.min(o,d.startLineNumber),s=Math.max(s,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=s}}class ZB extends vc{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Cde(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,r=this._context.configuration.options,o=r.get(43),s=r.get(131);this._lineHeight=r.get(58),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=r.get(88),this._cursorSurroundingLines=r.get(25),this._cursorSurroundingLinesStyle=r.get(26),this._canUseLayerHinting=!r.get(28),this._viewLineOptions=new xJ(n,this._context.theme.type),ag.write(this.domNode,7),this.domNode.setClassName(`view-lines ${o1}`),Oa.applyFontInfo(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new tr(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new tr(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new nOe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Pf(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(131)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),r=t.get(131);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Oa.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(130)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new xJ(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=!1;for(let o=t;o<=n;o++)r=this._visibleLines.getVisibleLine(o).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new iOe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new rOe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const r=this._getLineNumberFor(n);if(r===-1||r<1||r>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(r)===1)return new Ee(r,1);const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(r<o||r>s)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(r,e,t);const u=this._context.model.getLineMinColumn(r);return a<u&&(a=u),new Ee(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Pf.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++){const o=this._visibleLines.getVisibleLine(r);if(e===o.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,r=Q.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;let o=[],s=0;const a=new LJ(this.domNode.domNode,this._textRangeRestingSpot);let u=0;t&&(u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ee(r.startLineNumber,1)).lineNumber);const d=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let f=r.startLineNumber;f<=r.endLineNumber;f++){if(f<d||f>h)continue;const p=f===r.startLineNumber?r.startColumn:1,m=f===r.endLineNumber?r.endColumn:this._context.model.getLineMaxColumn(f),v=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,p,m,a);if(v){if(t&&f<n){const b=u;u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ee(f+1,1)).lineNumber,b!==u&&(v.ranges[v.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[s++]=new SIe(v.outsideRenderedLine,f,AB.from(v.ranges))}}return s===0?null:o}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new LJ(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new EIe(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=1,o=!0;for(let s=t;s<=n;s++){const a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){o=!1;continue}r=Math.max(r,a.getWidth())}return o&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++){const s=this._visibleLines.getVisibleLine(o);if(s.needsMonospaceFontCheck()){const a=s.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=r;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(n);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:r.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Qa&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,r,o){const s=e.top,a=e.height,u=s+a;let d,h,f;if(r&&r.length>0){let v=r[0].startLineNumber,b=r[0].endLineNumber;for(let E=1,S=r.length;E<S;E++){const w=r[E];v=Math.min(v,w.startLineNumber),b=Math.max(b,w.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(v),f=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(n)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const v=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=v*this._lineHeight,f+=Math.max(0,v-1)*this._lineHeight}(o===0||o===4)&&(f+=this._lineHeight);let m;if(f-h>a){if(!d)return-1;m=h}else if(o===5||o===6)if(o===6&&s<=h&&f<=u)m=s;else{const v=Math.max(5*this._lineHeight,a*.2),b=h-v,E=f-a;m=Math.max(E,b)}else if(o===1||o===2)if(o===2&&s<=h&&f<=u)m=s;else{const v=(h+f)/2;m=Math.max(0,v-a/2)}else m=this._computeMinimumScrolling(s,u,h,f,o===3,o===4);return m}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,r=n+t.width;let o=1073741824,s=0;if(e.type==="range"){const u=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),s=Math.max(s,Math.round(d.left+d.width))}else for(const u of e.selections){if(u.startLineNumber!==u.endLineNumber)return null;const d=this._visibleRangesForLineRange(u.startLineNumber,u.startColumn,u.endColumn);if(!d)return null;for(const h of d.ranges)o=Math.min(o,Math.round(h.left)),s=Math.max(s,Math.round(h.left+h.width))}return o=Math.max(0,o-ZB.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding,e.type==="selections"&&s-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,r,o,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,n,r,o,s){e=e|0,t=t|0,n=n|0,r=r|0,o=!!o,s=!!s;const a=t-e;if(r-n<a){if(o)return n;if(s)return Math.max(0,r-a);if(n<e)return n;if(r>t)return Math.max(0,r-a)}else return n;return e}}ZB.HORIZONTAL_EXTRA_PX=30;class oOe extends fq{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(130);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.linesDecorationsClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u));const d=a.options.firstLineDecorationClassName;d&&(n[r++]=new h3(a.range.startLineNumber,a.range.startLineNumber,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+s+'px;"></div>',u=[];for(let d=t;d<=n;d++){const h=d-t,f=r[h];let p="";for(let m=0,v=f.length;m<v;m++)p+='<div class="cldr '+f[m]+a;u[h]=p}this._renderResult=u}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class sOe extends fq{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.marginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=[];for(let s=t;s<=n;s++){const a=s-t,u=r[a];let d="";for(let h=0,f=u.length;h<f;h++)d+='<div class="cmdr '+u[h]+'" style=""></div>';o[a]=d}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class tc{constructor(e,t,n,r){this._rgba8Brand=void 0,this.r=tc._clamp(e),this.g=tc._clamp(t),this.b=tc._clamp(n),this.a=tc._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}tc.Empty=new tc(0,0,0,0);class mR extends Oe{constructor(){super(),this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Wr.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new mR),this._INSTANCE}_updateColorMap(){const e=Wr.getColorMap();if(!e){this._colors=[tc.Empty],this._backgroundIsLight=!0;return}this._colors=[tc.Empty];for(let n=1;n<e.length;n++){const r=e[n].rgba;this._colors[n]=new tc(r.r,r.g,r.b,Math.round(r.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}mR._INSTANCE=null;class yee{constructor(e,t,n,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=r|0}}class aOe{constructor(e,t){this.tabSize=e,this.data=t}}class gq{constructor(e,t,n,r,o,s,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=r,this.startVisibleColumn=o,this.tokens=s,this.inlineDecorations=a}}class Fu{constructor(e,t,n,r,o,s,a,u,d,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=r,this.isBasicASCII=Fu.isBasicASCII(n,s),this.containsRTL=Fu.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=u,this.tabSize=d,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?yG(e):!0}static containsRTL(e,t,n){return!t&&n?pB(e):!1}}class M2{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class lOe{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new M2(new Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Lde{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class xde{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}const uOe=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),cOe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class VA{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=VA.soften(e,12/15),this.charDataLight=VA.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let r=0,o=e.length;r<o;r++)n[r]=zF(e[r]*t);return n}renderChar(e,t,n,r,o,s,a,u,d,h,f){const p=1*this.scale,m=2*this.scale,v=f?1:m;if(t+p>e.width||n+v>e.height){console.warn("bad render request outside image data");return}const b=h?this.charDataLight:this.charDataNormal,E=cOe(r,d),S=e.width*4,w=a.r,L=a.g,A=a.b,N=o.r-w,H=o.g-L,M=o.b-A,R=Math.max(s,u),q=e.data;let X=E*p*m,$=n*S+t*4;for(let I=0;I<v;I++){let O=$;for(let B=0;B<p;B++){const W=b[X++]/255*(s/255);q[O++]=w+N*W,q[O++]=L+H*W,q[O++]=A+M*W,q[O++]=R}$+=S}}blockRenderChar(e,t,n,r,o,s,a,u){const d=1*this.scale,h=2*this.scale,f=u?1:h;if(t+d>e.width||n+f>e.height){console.warn("bad render request outside image data");return}const p=e.width*4,m=.5*(o/255),v=s.r,b=s.g,E=s.b,S=r.r-v,w=r.g-b,L=r.b-E,A=v+S*m,N=b+w*m,H=E+L*m,M=Math.max(o,a),R=e.data;let q=n*p+t*4;for(let X=0;X<f;X++){let $=q;for(let I=0;I<d;I++)R[$++]=A,R[$++]=N,R[$++]=H,R[$++]=M;q+=p}}}const wee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},See=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=wee[i[t]]<<4|wee[i[t+1]]&15;return e},Eee={1:kp(()=>See("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:kp(()=>See("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class P2{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Eee[e]?n=new VA(Eee[e](),e):n=P2.createFromSampleData(P2.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let r=0;for(const o of uOe)n.fillText(String.fromCharCode(o),r,16/2),r+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let r=P2._downsample(e,t);return new VA(r,t)}static _downsampleChar(e,t,n,r,o){const s=1*o,a=2*o;let u=r,d=0;for(let h=0;h<a;h++){const f=h/a*16,p=(h+1)/a*16;for(let m=0;m<s;m++){const v=m/s*10,b=(m+1)/s*10;let E=0,S=0;for(let L=f;L<p;L++){const A=t+Math.floor(L)*3840,N=1-(L-Math.floor(L));for(let H=v;H<b;H++){const M=1-(H-Math.floor(H)),R=A+Math.floor(H)*4,q=M*N;S+=q,E+=e[R]*e[R+3]/255*q}}const w=E/S;d=Math.max(d,w),n[u++]=zF(w)}}return d}static _downsample(e,t){const n=2*t*1*t,r=n*96,o=new Uint8ClampedArray(r);let s=0,a=0,u=0;for(let d=0;d<96;d++)u=Math.max(u,this._downsampleChar(e,a,o,s,t)),s+=n,a+=10*4;if(u>0){const d=255/u;for(let h=0;h<r;h++)o[h]*=d}return o}}const dOe=140,hOe=2;class HA{constructor(e,t,n){const r=e.options,o=r.get(128),s=r.get(130),a=s.minimap,u=r.get(43),d=r.get(64);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(93),this.showSlider=d.showSlider,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=kp(()=>P2.create(this.fontScale,u.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=HA._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=HA._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(oIe);return n?new tc(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(sIe);return t?tc._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class F2{constructor(e,t,n,r,o,s,a,u){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=o,this.sliderHeight=s,this.startLineNumber=a,this.endLineNumber=u}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,r,o,s,a,u,d,h,f){const p=e.pixelRatio,m=e.minimapLineHeight,v=Math.floor(e.canvasInnerHeight/m),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){const N=u*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),H=Math.max(1,Math.floor(o*o/N)),M=Math.max(0,e.minimapHeight-H),R=M/(h-o),q=d*R,X=M>0,$=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new F2(d,h,X,R,q,H,1,Math.min(a,$))}let E;if(s&&n!==a){const N=n-t+1;E=Math.floor(N*m/p)}else{const N=o/b;E=Math.floor(N*m/p)}let S;e.scrollBeyondLastLine?S=(a-1)*m/p:S=Math.max(0,a*m/p-E),S=Math.min(e.minimapHeight-E,S);const w=S/(h-o),L=d*w;let A=0;if(e.scrollBeyondLastLine&&(A=o/b-1),v>=a+A){const H=a,M=S>0;return new F2(d,h,M,w,L,E,1,H)}else{let N=Math.max(1,Math.floor(t-L*p/m));f&&f.scrollHeight===h&&(f.scrollTop>d&&(N=Math.min(N,f.startLineNumber)),f.scrollTop<d&&(N=Math.max(N,f.startLineNumber)));const H=Math.min(a,N+v-1),M=(d-r)/b,R=(t-N+M)*m/p;return new F2(d,h,!0,w,R,E,N,H)}}}class f3{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}f3.INVALID=new f3(-1);class Lee{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new bde(()=>f3.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let r=0,o=n.length;r<o;r++)if(n[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class pq{constructor(e,t,n,r){this._backgroundFillData=pq._createBackgroundFillData(t,n,r),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const r=n.r,o=n.g,s=n.b,a=n.a,u=new Uint8ClampedArray(e*t*4);let d=0;for(let h=0;h<t;h++)for(let f=0;f<e;f++)u[d]=r,u[d+1]=o,u[d+2]=s,u[d+3]=a,d+=4;return u}}class $A{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const r=e.pixelRatio,o=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:a}=hw.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:o,pixelRatio:r}),u=t/a,d=u/2;if(!n||n.minimapLines.length===0){let L=[];if(L[0]=1,a>1){for(let A=0,N=a-1;A<N;A++)L[A]=Math.round(A*u+d);L[a-1]=t}return[new $A(u,L),[]]}const h=n.minimapLines,f=h.length;let p=[],m=0,v=0,b=1;const E=10;let S=[],w=null;for(let L=0;L<a;L++){const A=Math.max(b,Math.round(L*u)),N=Math.max(A,Math.round((L+1)*u));for(;m<f&&h[m]<A;){if(S.length<E){const M=m+1+v;w&&w.type==="deleted"&&w._oldIndex===m-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:m,deleteFromLineNumber:M,deleteToLineNumber:M},S.push(w)),v--}m++}let H;if(m<f&&h[m]<=N)H=h[m],m++;else if(L===0?H=1:L+1===a?H=t:H=Math.round(L*u+d),S.length<E){const M=m+1+v;w&&w.type==="inserted"&&w._i===L-1?w.insertToLineNumber++:(w={type:"inserted",_i:L,insertFromLineNumber:M,insertToLineNumber:M},S.push(w)),v++}p[L]=H,b=H}if(S.length<E)for(;m<f;){const L=m+1+v;w&&w.type==="deleted"&&w._oldIndex===m-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:m,deleteFromLineNumber:L,deleteToLineNumber:L},S.push(w)),v--,m++}else S=[{type:"flush"}];return[new $A(u,p),S]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(n===r){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===n&&(r===this.minimapLines.length?n>1&&n--:r++),[n,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,r=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),r=Math.max(r,o)):this.minimapLines[o]-=t;return[n,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class fOe extends vc{constructor(e){super(e),this.tokensColorTracker=mR.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=$A.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new g3(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=$A.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of n)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let r=[];for(let o=0,s=t-e+1;o<s;o++)n[o]?r[o]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+o-1]):r[o]=null;return r}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new wt(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];n=new Q(o,1,s,this._context.model.getLineMaxColumn(s))}else n=new Q(e,1,t,this._context.model.getLineMaxColumn(t));const r=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let o=[];for(const s of r){if(!s.options.minimap)continue;const a=s.range,u=this._samplingState.modelLineToMinimapLine(a.startLineNumber),d=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new Lde(new Q(u,a.startColumn,d,a.endColumn),s.options))}return o}return r}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new Q(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class g3 extends Oe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(vJ),this._domNode=ii(document.createElement("div")),ag.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ii(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ii(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ii(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ii(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ii(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=ts(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const d=Us(this._slider.domNode),h=d.top+d.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,s=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let u=Math.floor(s/o)+this._lastRenderData.renderedLayout.startLineNumber;u=Math.min(u,this._model.getLineCount()),this._model.revealLineNumber(u)}),this._sliderMouseMoveMonitor=new EC,this._sliderMouseDownListener=ts(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Hi.addTarget(this._domNode.domNode),this._sliderTouchStartListener=qe(this._domNode.domNode,ur.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=qe(this._domNode.domNode,ur.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=ts(this._domNode.domNode,ur.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,r,o){this._slider.toggleClassName("active",!0);const s=(a,u)=>{const d=Math.abs(u-t);if(As&&d>dOe){this._model.setScrollTop(o.scrollTop);return}const h=a-n;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(h))};r!==n&&s(r,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,VS,a=>s(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new pq(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(vJ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=F2.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(Q.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((p,m)=>(p.options.zIndex||0)-(m.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,u=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,r,o);const h=new xee(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,h,e,s),this._renderDecorationsLineHighlights(d,n,h,e,s);const f=new xee(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,f,e,s,u,a,r),this._renderDecorationsHighlights(d,n,f,e,s,u,a,r)}}_renderSelectionLineHighlights(e,t,n,r,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(const u of t){const d=Math.max(r.startLineNumber,u.startLineNumber),h=Math.min(r.endLineNumber,u.endLineNumber);if(d>h)continue;for(let m=d;m<=h;m++)n.set(m,!0);const f=(d-r.startLineNumber)*o,p=(h-r.startLineNumber)*o+o;a>=f||(a>s&&e.fillRect(wv,s,e.canvas.width,a-s),s=f),a=p}a>s&&e.fillRect(wv,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,n,r,o){const s=new Map;for(let a=t.length-1;a>=0;a--){const u=t[a],d=u.options.minimap;if(!d||d.position!==Cl.Inline)continue;const h=Math.max(r.startLineNumber,u.range.startLineNumber),f=Math.min(r.endLineNumber,u.range.endLineNumber);if(h>f)continue;const p=d.getColor(this._theme);if(!p||p.isTransparent())continue;let m=s.get(p.toString());m||(m=p.transparent(.5).toString(),s.set(p.toString(),m)),e.fillStyle=m;for(let v=h;v<=f;v++){if(n.has(v))continue;n.set(v,!0);const b=(h-r.startLineNumber)*o;e.fillRect(wv,b,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,r,o,s,a,u){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const d of t){const h=Math.max(r.startLineNumber,d.startLineNumber),f=Math.min(r.endLineNumber,d.endLineNumber);if(!(h>f))for(let p=h;p<=f;p++)this.renderDecorationOnLine(e,n,d,this._selectionColor,r,p,o,o,s,a,u)}}_renderDecorationsHighlights(e,t,n,r,o,s,a,u){for(const d of t){const h=d.options.minimap;if(!h)continue;const f=Math.max(r.startLineNumber,d.range.startLineNumber),p=Math.min(r.endLineNumber,d.range.endLineNumber);if(f>p)continue;const m=h.getColor(this._theme);if(!(!m||m.isTransparent()))for(let v=f;v<=p;v++)switch(h.position){case Cl.Inline:this.renderDecorationOnLine(e,n,d.range,m,r,v,o,o,s,a,u);continue;case Cl.Gutter:const b=(v-r.startLineNumber)*o,E=2;this.renderDecoration(e,m,E,b,hOe,o);continue}}}renderDecorationOnLine(e,t,n,r,o,s,a,u,d,h,f){const p=(s-o.startLineNumber)*u;if(p+a<0||p>this._model.options.canvasInnerHeight)return;const{startLineNumber:m,endLineNumber:v}=n,b=m===s?n.startColumn:1,E=v===s?n.endColumn:this._model.getLineMaxColumn(s),S=this.getXOffsetForPosition(t,s,b,d,h,f),w=this.getXOffsetForPosition(t,s,E,d,h,f);this.renderDecoration(e,r,S,p,w-S,a)}getXOffsetForPosition(e,t,n,r,o,s){if(n===1)return wv;if((n-1)*o>=s)return s;let u=e.get(t);if(!u){const d=this._model.getLineContent(t);u=[wv];let h=wv;for(let f=1;f<d.length+1;f++){const p=d.charCodeAt(f-1),m=p===9?r*o:sg(p)?2*o:o,v=h+m;if(v>=s){u[f]=s;break}u[f]=v,h=v}e.set(t,u)}return n-1<u.length?u[n-1]:s}renderDecoration(e,t,n,r,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(n,r,o,s)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const W=this._lastRenderData._get();return new Lee(e,W.imageData,W.lines)}const o=this._getBuffer();if(!o)return null;let[s,a,u]=g3._renderUntouchedLines(o,t,n,r,this._lastRenderData);const d=this._model.getMinimapLinesRenderingData(t,n,u),h=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,p=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,v=this._model.tokensColorTracker,b=v.backgroundIsLight(),E=this._model.options.renderMinimap,S=this._model.options.charRenderer(),w=this._model.options.fontScale,L=this._model.options.minimapCharWidth,N=(E===1?2:2+1)*w,H=r>N?Math.floor((r-N)/2):0,M=p.a/255,R=new tc(Math.round((p.r-f.r)*M+f.r),Math.round((p.g-f.g)*M+f.g),Math.round((p.b-f.b)*M+f.b),255);let q=0;const X=[];for(let W=0,j=n-t+1;W<j;W++)u[W]&&g3._renderLine(o,R,p.a,b,E,L,v,m,S,q,H,h,d[W],w,r),X[W]=new f3(q),q+=r;const $=s===-1?0:s,O=(a===-1?o.height:a)-$;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,$,o.width,O),new Lee(e,o,X)}static _renderUntouchedLines(e,t,n,r,o){const s=[];if(!o){for(let R=0,q=n-t+1;R<q;R++)s[R]=!0;return[-1,-1,s]}const a=o._get(),u=a.imageData.data,d=a.rendLineNumberStart,h=a.lines,f=h.length,p=e.width,m=e.data,v=(n-t+1)*r*p*4;let b=-1,E=-1,S=-1,w=-1,L=-1,A=-1,N=0;for(let R=t;R<=n;R++){const q=R-t,X=R-d,$=X>=0&&X<f?h[X].dy:-1;if($===-1){s[q]=!0,N+=r;continue}const I=$*p*4,O=($+r)*p*4,B=N*p*4,W=(N+r)*p*4;w===I&&A===B?(w=O,A=W):(S!==-1&&(m.set(u.subarray(S,w),L),b===-1&&S===0&&S===L&&(b=w),E===-1&&w===v&&S===L&&(E=S)),S=I,w=O,L=B,A=W),s[q]=!1,N+=r}S!==-1&&(m.set(u.subarray(S,w),L),b===-1&&S===0&&S===L&&(b=w),E===-1&&w===v&&S===L&&(E=S));const H=b===-1?-1:b/(p*4),M=E===-1?-1:E/(p*4);return[H,M,s]}static _renderLine(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const E=m.content,S=m.tokens,w=e.width-s,L=b===1;let A=wv,N=0,H=0;for(let M=0,R=S.getCount();M<R;M++){const q=S.getEndOffset(M),X=S.getForeground(M),$=a.getColor(X);for(;N<q;N++){if(A>w)return;const I=E.charCodeAt(N);if(I===9){const O=p-(N+H)%p;H+=O-1,A+=O*s}else if(I===32)A+=s;else{const O=sg(I)?2:1;for(let B=0;B<O;B++)if(o===2?d.blockRenderChar(e,A,h+f,$,u,t,n,L):d.renderChar(e,A,h+f,I,$,u,t,n,v,r,L),A+=s,A>w)return}}}}}class xee{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let r=0,o=this._endLineNumber-this._startLineNumber+1;r<o;r++)this._values[r]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}fr((i,e)=>{const t=i.getColor(lIe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(uIe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const r=i.getColor(cIe);r&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${r}; }`);const o=i.getColor(HS);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class gOe extends vc{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=ii(document.createElement("div")),ag.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=ii(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.parentNode.removeChild(r),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,r=t.length;n<r;n++){const o=t[n];this._renderWidget(this._widgets[o])}}}class pOe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(128),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const r=t.getColor(S2e);this.borderColor=r?r.toString():null,this.hideCursor=n.get(51);const o=t.getColor(ode);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const s=n.get(64),a=s.enabled,u=s.side,d=a?t.getColor(E2e)||Wr.getDefaultBackground():null;d===null||u==="left"?this.backgroundColor=null:this.backgroundColor=we.Format.CSS.formatHex(d);const f=n.get(130).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=m}_initLanes(e,t,n){const r=t-e;if(n>=3){const o=Math.floor(r/3),s=Math.floor(r/3),a=r-o-s,u=e,d=u+o,h=u+o+a;return[[0,u,d,u,h,u,d,u],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(n===2){const o=Math.floor(r/2),s=r-o,a=e,u=a+o;return[[0,a,a,a,u,a,a,a],[0,o,o,o,s,o+s,o+s,o+s]]}else{const o=e,s=r;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class mOe extends vc{constructor(e){super(e),this._domNode=ii(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Wr.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new pOe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Ee.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,r=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),s=t/o,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),u=6*this._settings.pixelRatio|0,d=u/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const f=this._settings.x,p=this._settings.w;a.sort(xde.cmp);for(const m of a){const v=m.color,b=m.data;h.fillStyle=v;let E=0,S=0,w=0;for(let L=0,A=b.length/3;L<A;L++){const N=b[3*L],H=b[3*L+1],M=b[3*L+2];let R=r.getVerticalOffsetForLineNumber(H)*s|0,q=(r.getVerticalOffsetForLineNumber(M)+n)*s|0;if(q-R<u){let $=(R+q)/2|0;$<d?$=d:$+d>t&&($=t-d),R=$-d,q=$+d}R>w+1||N!==E?(L!==0&&h.fillRect(f[E],S,p[E],w-S),E=N,S=R,w=q):q>w&&(w=q)}h.fillRect(f[E],S,p[E],w-S)}if(!this._settings.hideCursor&&this._settings.cursorColor){const m=2*this._settings.pixelRatio|0,v=m/2|0,b=this._settings.x[7],E=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let S=-100,w=-100;for(let L=0,A=this._cursorPositions.length;L<A;L++){const N=this._cursorPositions[L];let H=r.getVerticalOffsetForLineNumber(N.lineNumber)*s|0;H<v?H=v:H+v>t&&(H=t-v);const M=H-v,R=M+m;M>w+1?(L!==0&&h.fillRect(b,S,E,w-S),S=M,w=R):R>w&&(w=R)}h.fillRect(b,S,E,w-S)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class Dee{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class zA{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class _Oe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(zA.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),o=n/r,s=Math.floor(4*this._pixelRatio/2);let a=[];for(let u=0,d=this._zones.length;u<d;u++){const h=this._zones[u];if(!e){const w=h.getColorZones();if(w){a.push(w);continue}}const f=Math.floor(o*this._getVerticalOffsetForLine(h.startLineNumber)),p=Math.floor(o*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let m=Math.floor((f+p)/2),v=p-m;v<s&&(v=s),m-v<0&&(m=v),m+v>n&&(m=n-v);const b=h.color;let E=this._color2Id[b];E||(E=++this._lastAssignedId,this._color2Id[b]=E,this._id2Color[E]=b);const S=new Dee(m-v,m+v,E);h.setColorZone(S),a.push(S)}return this._colorZonesInvalid=!1,a.sort(Dee.compare),a}}class vOe extends cR{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=ii(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new _Oe(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(128)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(128)&&(this._zoneManager.setPixelRatio(t.get(128)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,r,e),!0}_renderOneLane(e,t,n,r){let o=0,s=0,a=0;for(const u of t){const d=u.colorId,h=u.from,f=u.to;d!==o?(e.fillRect(0,s,r,a-s),o=d,e.fillStyle=n[o],s=h,a=f):a>=h?a=Math.max(a,f):(e.fillRect(0,s,r,a-s),s=h,a=f)}e.fillRect(0,s,r,a-s)}}class bOe extends vc{constructor(e){super(e),this.domNode=ii(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.model.getTextModelOptions(),o=r;let s=t-e;for(;s>0;){const a=ii(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let n=e-t;for(;n>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const r=this._renderedRulers[t],o=this._rulers[t];r.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}fr((i,e)=>{const t=i.getColor(y2e);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class COe extends vc{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=ii(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(130);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}fr((i,e)=>{const t=i.getColor(HS);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class yOe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class wOe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function SOe(i){return new yOe(i)}function EOe(i){return new wOe(i.lineNumber,i.ranges.map(SOe))}class $r extends zS{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const r=this._typicalHalfwidthCharacterWidth/4;let o=null,s=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!o&&d<n.length;d++)n[d].lineNumber===a&&(o=n[d].ranges[0]);const u=t[t.length-1].lineNumber;if(u===e.endLineNumber)for(let d=n.length-1;!s&&d>=0;d--)n[d].lineNumber===u&&(s=n[d].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let a=0,u=t.length;a<u;a++){const d=t[a].ranges[0],h=d.left,f=d.left+d.width,p={top:0,bottom:0},m={top:0,bottom:0};if(a>0){const v=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;zM(h-v)<r?p.top=2:h>v&&(p.top=1),zM(f-b)<r?m.top=2:v<f&&f<b&&(m.top=1)}else o&&(p.top=o.startStyle.top,m.top=o.endStyle.top);if(a+1<u){const v=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;zM(h-v)<r?p.bottom=2:v<h&&h<b&&(p.bottom=1),zM(f-b)<r?m.bottom=2:f<b&&(m.bottom=1)}else s&&(p.bottom=s.startStyle.bottom,m.bottom=s.endStyle.bottom);d.startStyle=p,d.endStyle=m}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(EOe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,r,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+r.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,r){if(r.length===0)return;const o=!!r[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),u=r[0].lineNumber,d=r[r.length-1].lineNumber;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=p.lineNumber,v=m-t,b=n&&(m===d||m===u)?a:s,E=n&&m===u?1:0;let S="",w="";for(let L=0,A=p.ranges.length;L<A;L++){const N=p.ranges[L];if(o){const M=N.startStyle,R=N.endStyle;if(M.top===1||M.bottom===1){S+=this._createSelectionPiece(E,b,$r.SELECTION_CLASS_NAME,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH);let q=$r.EDITOR_BACKGROUND_CLASS_NAME;M.top===1&&(q+=" "+$r.SELECTION_TOP_RIGHT),M.bottom===1&&(q+=" "+$r.SELECTION_BOTTOM_RIGHT),S+=this._createSelectionPiece(E,b,q,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH)}if(R.top===1||R.bottom===1){S+=this._createSelectionPiece(E,b,$r.SELECTION_CLASS_NAME,N.left+N.width,$r.ROUNDED_PIECE_WIDTH);let q=$r.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(q+=" "+$r.SELECTION_TOP_LEFT),R.bottom===1&&(q+=" "+$r.SELECTION_BOTTOM_LEFT),S+=this._createSelectionPiece(E,b,q,N.left+N.width,$r.ROUNDED_PIECE_WIDTH)}}let H=$r.SELECTION_CLASS_NAME;if(o){const M=N.startStyle,R=N.endStyle;M.top===0&&(H+=" "+$r.SELECTION_TOP_LEFT),M.bottom===0&&(H+=" "+$r.SELECTION_BOTTOM_LEFT),R.top===0&&(H+=" "+$r.SELECTION_TOP_RIGHT),R.bottom===0&&(H+=" "+$r.SELECTION_BOTTOM_RIGHT)}w+=this._createSelectionPiece(E,b,H,N.left,N.width)}e[v][0]+=S,e[v][1]+=w}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let s=n;s<=r;s++){const a=s-n;t[a]=["",""]}const o=[];for(let s=0,a=this._selections.length;s<a;s++){const u=this._selections[s];if(u.isEmpty()){o[s]=null;continue}const d=this._getVisibleRangesWithStyle(u,e,this._previousFrameVisibleRangesWithStyle[s]);o[s]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}$r.SELECTION_CLASS_NAME="selected-text";$r.SELECTION_TOP_LEFT="top-left-radius";$r.SELECTION_BOTTOM_LEFT="bottom-left-radius";$r.SELECTION_TOP_RIGHT="top-right-radius";$r.SELECTION_BOTTOM_RIGHT="bottom-right-radius";$r.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";$r.ROUNDED_PIECE_WIDTH=10;fr((i,e)=>{const t=i.getColor(o0);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(PG);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const r=i.getColor(cTe);r&&!r.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${r}; }`)});function zM(i){return i<0?-i:i}class Tee{constructor(e,t,n,r,o,s){this.top=e,this.left=t,this.width=n,this.height=r,this.textContent=o,this.textContentClassName=s}}class Iee{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ii(document.createElement("div")),this._domNode.setClassName(`cursor ${o1}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Oa.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Ee(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Oa.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===ls.Line||this._cursorStyle===ls.LineThin){const p=e.visibleRangeForPosition(this._position);if(!p||p.outsideRenderedLine)return null;let m;if(this._cursorStyle===ls.Line){if(m=rJ(this._lineCursorWidth>0?this._lineCursorWidth:2),m>2){const E=this._context.model.getLineContent(this._position.lineNumber),S=NF(E,this._position.column-1);t=E.substr(this._position.column-1,S)}}else m=rJ(1);let v=p.left;m>=2&&v>=1&&(v-=1);const b=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new Tee(b,v,m,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),r=NF(n,this._position.column-1),o=e.linesVisibleRangesForRange(new Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+r),!1);if(!o||o.length===0)return null;const s=o[0];if(s.outsideRenderedLine||s.ranges.length===0)return null;const a=s.ranges[0],u=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let d="";if(this._cursorStyle===ls.Block){const p=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,r);const m=p.tokens.findTokenIndexAtOffset(this._position.column-1);d=p.tokens.getClassName(m)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===ls.Underline||this._cursorStyle===ls.UnderlineThin)&&(h+=this._lineHeight-2,f=2),new Tee(h,a.left,u,f,t,d)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${o1} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class UA extends vc{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Iee(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=ii(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Ma,this._cursorFlatBlinkInterval=new sR,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,r=this._secondaryCursors.length;n<r;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let r=0;r<n;r++){const o=new Iee(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let r=0;r<n;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let r=0,o=e.selections.length;r<o;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let r=0,o=e.ranges.length;r<o;r++)if(e.ranges[r].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},UA.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},UA.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ls.Line:e+=" cursor-line-style";break;case ls.Block:e+=" cursor-block-style";break;case ls.Underline:e+=" cursor-underline-style";break;case ls.LineThin:e+=" cursor-line-thin-style";break;case ls.BlockOutline:e+=" cursor-block-outline-style";break;case ls.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const r=this._primaryCursor.render(e);r&&(t[n++]=r);for(let o=0,s=this._secondaryCursors.length;o<s;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}UA.BLINK_INTERVAL=500;fr((i,e)=>{const t=i.getColor(ode);if(t){let n=i.getColor(b2e);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const i6=()=>{throw new Error("Invalid change accessor")};class LOe extends vc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=ii(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ii(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let n=!1;return this._context.model.changeWhitespace(r=>{const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const u=o[s],d=this._zones[u],h=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=h.isInHiddenArea;const f=t.get(u);f&&(f.afterLineNumber!==h.afterViewLineNumber||f.height!==h.heightInPx)&&(r.changeOneWhitespace(u,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(d.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const s=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Ee(s,this._context.model.getModelLineMaxColumn(s))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),o=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:r.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const r={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{o&&(t=this._removeZone(n,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(n,o)||t)}};xOe(e,r),r.addZone=i6,r.removeZone=i6,r.layoutZone=i6}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:ii(t.domNode),marginDomNode:t.marginDomNode?ii(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],r=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(n.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){gn(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){gn(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let r=!1;for(const s of t)this._zones[s.id].isInHiddenArea||(n[s.id]=s,r=!0);const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const u=o[s],d=this._zones[u];let h=0,f=0,p="none";n.hasOwnProperty(u)?(h=n[u].verticalOffset-e.bigNumbersDelta,f=n[u].height,p="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[u].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(h),d.domNode.setHeight(f),d.domNode.setDisplay(p),d.marginDomNode&&(d.marginDomNode.setTop(h),d.marginDomNode.setHeight(f),d.marginDomNode.setDisplay(p))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function xOe(i,e){try{return i(e)}catch(t){gn(t)}}class DOe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class TOe{constructor(e,t,n){this.configuration=e,this.theme=new DOe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class IOe{constructor(e,t,n,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=r,this.visibleRange=new Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class kOe extends cR{constructor(e,t,n,r,o,s){super(),this._selections=[new wt(1,1,1,1)],this._renderAnimationFrame=null;const a=new NAe(t,r,o,e);this._context=new TOe(t,n.getColorTheme(),r),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(b=>{this._context.theme.update(b),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new EAe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ii(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ii(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ii(document.createElement("div")),ag.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new JAe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new ZB(this._context,this._linesContent),this._viewZones=new LOe(this._context),this._viewParts.push(this._viewZones);const u=new mOe(this._context);this._viewParts.push(u);const d=new COe(this._context);this._viewParts.push(d);const h=new RAe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new BAe(this._context)),h.addDynamicOverlay(new $r(this._context)),h.addDynamicOverlay(new tOe(this._context)),h.addDynamicOverlay(new VAe(this._context));const f=new MAe(this._context);this._viewParts.push(f),f.addDynamicOverlay(new WAe(this._context)),f.addDynamicOverlay(new eOe(this._context)),f.addDynamicOverlay(new sOe(this._context)),f.addDynamicOverlay(new oOe(this._context)),f.addDynamicOverlay(new Qw(this._context));const p=new R1(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(f.getDomNode()),this._viewParts.push(p),this._contentWidgets=new PAe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new UA(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new gOe(this._context),this._viewParts.push(this._overlayWidgets);const m=new bOe(this._context);this._viewParts.push(m);const v=new fOe(this._context);if(this._viewParts.push(v),u){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(u.getDomNode(),b.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new SAe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new cAe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ee(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ee(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+PF(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=aue(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){NOe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!uG(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new IOe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const r=new wIe(this._context.viewLayout,n,this._viewLines);for(const o of e)o.prepareRender(r);for(const o of e)o.render(r),o.onDidRender();Math.abs(vA()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new Ee(r.lineNumber,r.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?qB.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new vOe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const r=e.position?e.position.position:null;r!==null&&(t=new Q(r.lineNumber,r.column,r.lineNumber,r.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function NOe(i){try{return i()}catch(e){gn(e)}}class p3{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ss(new Q(1,1,1,1),0,new Ee(1,1),0),new ss(new Q(1,1,1,1),0,new Ee(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Mn(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return wt.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,r){return t.equals(n)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,r=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,r,n,s),u=this._validatePositionWithCache(e,o,r,a);return n.equals(s)&&r.equals(a)&&o.equals(u)?t:new ss(Q.fromPositions(a,u),t.selectionStartLeftoverVisibleColumns+r.column-a.column,s,t.leftoverVisibleColumns+n.column-s.column)}_setState(e,t,n){if(n&&(n=p3._validateViewState(e.viewModel,n)),t){const r=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new ss(r,o,s,a)}else{if(!n)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new ss(r,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const r=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new ss(r,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new Ee(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new Ee(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new Q(r.lineNumber,r.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new ss(s,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class kee{constructor(e){this.context=e,this.primaryCursor=new p3(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;r.isBefore(e)&&(e=r)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(r)&&(e=r)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Mn.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let r=n-t;for(let o=0;o<r;o++)this._addSecondaryCursor()}else if(t>n){let r=t-n;for(let o=0;o<r;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let r=0;r<n;r++)this.secondaryCursors[r].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new p3(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,r=e.length;n<r;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,r)=>n.selection.startLineNumber===r.selection.startLineNumber?n.selection.startColumn-r.selection.startColumn:n.selection.startLineNumber-r.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1],s=r.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let u;if(a.isEmpty()||s.isEmpty()?u=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):u=a.getStartPosition().isBefore(s.getEndPosition()),u){const d=r.index<o.index?n:n+1,h=r.index<o.index?n+1:n,f=t[h].index,p=t[d].index,m=t[h].selection,v=t[d].selection;if(!m.equalsSelection(v)){const b=m.plusRange(v),E=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,S=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn;let w;f===this.lastAddedCursorIndex?(w=E,this.lastAddedCursorIndex=p):w=S;let L;w?L=new wt(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):L=new wt(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[d].selection=L;const A=Mn.fromModelSelection(L);e[p].setState(this.context,A.modelState,A.viewState)}for(const b of t)b.index>f&&b.index--;e.splice(f,1),t.splice(h,1),this._removeSecondaryCursor(f-1),n--}}}}class AOe{constructor(){this.type=0}}class OOe{constructor(){this.type=1}}class ROe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class MOe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class XC{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class UM{constructor(){this.type=5}}class POe{constructor(e){this.type=6,this.isFocused=e}}class FOe{constructor(){this.type=7}}class jM{constructor(){this.type=8}}class Dde{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class YH{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class ZH{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class u4{constructor(e,t,n,r,o,s){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=r,this.revealHorizontal=o,this.scrollType=s}}class BOe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class WOe{constructor(){this.type=14}}class VOe{constructor(e){this.type=15,this.ranges=e}}class HOe{constructor(){this.type=16}}let $Oe=class{constructor(){this.type=17}};class zOe extends Oe{constructor(){super(),this._onEvent=this._register(new Ce),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new UOe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class UOe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class mq{constructor(e,t,n,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new mq(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class _q{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new _q(this.oldHasFocus,e.hasFocus)}}class vq{constructor(e,t,n,r,o,s,a,u){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=r,this.scrollWidth=o,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=u,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new vq(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Nee{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class m3{constructor(e,t,n,r,o,s,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=r,this.source=o,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,r=t.length;if(n!==r)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return m3._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new m3(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class jOe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class r6{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Aee{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(Q.compareRangesUsingStarts),e.sort(Q.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class eS extends Oe{constructor(e,t,n,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new hee(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new kee(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ri(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new hee(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,r){let o=!1;r!==null&&r.length>eS.MAX_CURSOR_COUNT&&(r=r.slice(0,eS.MAX_CURSOR_COUNT),o=!0);const s=new r6(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,r){const o=this._cursors.getViewPositions();if(o.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,r);return}else{const s=o[0],a=new Q(s.lineNumber,s.column,s.lineNumber,s.column);this._emitCursorRevealRange(e,t,a,null,0,n,r)}}_revealPrimaryCursor(e,t,n,r,o){const s=this._cursors.getViewPositions();if(s.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,r,o);else{const a=s[0],u=new Q(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,u,null,n,r,o)}}_emitCursorRevealRange(e,t,n,r,o,s,a){e.emitViewEvent(new u4(t,n,r,o,s,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){let n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];let a=1,u=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(u=s.position.column);let d=a,h=u;s.selectionStart&&s.selectionStart.lineNumber&&(d=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(h=s.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:h,positionLineNumber:a,positionColumn:u})}this.setStates(e,"restoreState",0,Mn.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof qce){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new kee(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const r=Mn.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,r)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Mn.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:cr.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:cr.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,r){this.setStates(e,t,r,Mn.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],r=[];for(let a=0,u=e.length;a<u;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],r);this._autoClosedActions.push(new Aee(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=KOe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],r=[];for(let o=0;o<e.commands.length;o++){const s=e.commands[o];s instanceof vde&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),r.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,r,o){const s=new r6(this._model,this);if(s.equals(r))return!1;const a=this._cursors.getSelections(),u=this._cursors.getViewSelections();if(e.emitViewEvent(new MOe(u,a)),!r||r.cursorState.length!==s.cursorState.length||s.cursorState.some((d,h)=>!d.modelState.equals(r.cursorState[h].modelState))){const d=r?r.cursorState.map(f=>f.modelState.selection):null,h=r?r.modelVersionId:0;e.emitOutgoingEvent(new m3(d,a,h,s.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const s=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;const a=s[1],u=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!u||u.length!==1)return null;const d=u[0].open,h=o.text.length-s[2].length-1,f=o.text.lastIndexOf(d,h-1);if(f===-1)return null;t.push([f,h])}return t}executeEdits(e,t,n,r){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);let s=[],a=[];const u=this._model.pushEditOperations(this.getSelections(),n,d=>{if(o)for(let f=0,p=o.length;f<p;f++){const[m,v]=o[f],b=d[f],E=b.range.startLineNumber,S=b.range.startColumn-1+m,w=b.range.startColumn-1+v;s.push(new Q(E,w+1,E,w+2)),a.push(new Q(E,S+1,E,w+2))}const h=r(d);return h&&(this._isHandling=!0),h});u&&(this._isHandling=!1,this.setSelections(e,t,u,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,n,r=0){if(this.context.cursorConfig.readOnly)return;const o=new r6(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){gn(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,o,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return Aee.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(Dr.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const r=t.length;let o=0;for(;o<r;){const s=NF(t,o),a=t.substr(o,s);this._executeEditOperation(Dr.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=s}}else this._executeEditOperation(Dr.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,r,o,s){if(t.length===0&&n===0&&r===0){if(o!==0){const a=this.getSelections().map(u=>{const d=u.getPosition();return new wt(d.lineNumber,d.column+o,d.lineNumber,d.column+o)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Dr.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,r,o))},e,s)}paste(e,t,n,r,o){this._executeEdit(()=>{this._executeEditOperation(Dr.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,r||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(M1.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ul(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new ul(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}eS.MAX_CURSOR_COUNT=1e4;class KOe{static executeCommands(e,t,n){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(r,n);for(let s=0,a=r.trackedRanges.length;s<a;s++)r.model._setTrackedRange(r.trackedRanges[s],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const r=n.operations,o=this._getLoserCursorMap(r);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let d=0,h=r.length;d<h;d++)o.hasOwnProperty(r[d].identifier.major.toString())||s.push(r[d]);n.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,d=>{let h=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m]=[];for(const m of d)m.identifier&&h[m.identifier.major].push(m);const f=(m,v)=>m.identifier.minor-v.identifier.minor;let p=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m].length>0?(h[m].sort(f),p[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>h[m],getTrackedSelection:v=>{const b=parseInt(v,10),E=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new wt(E.startLineNumber,E.startColumn,E.endLineNumber,E.endColumn):new wt(E.endLineNumber,E.endColumn,E.startLineNumber,E.startColumn)}})):p[m]=e.selectionsBefore[m];return p});a||(a=e.selectionsBefore);let u=[];for(let d in o)o.hasOwnProperty(d)&&u.push(parseInt(d,10));u.sort((d,h)=>h-d);for(const d of u)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],r=!1;for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a){const u=this._getEditOperationsFromCommand(e,o,a);n=n.concat(u.operations),r=r||u.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,n){let r=[],o=0;const s=(f,p,m=!1)=>{Q.isEmpty(f)&&p===""||r.push({identifier:{major:t,minor:o++},range:f,text:p,forceMoveMarkers:m,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:s,addTrackedEditOperation:(f,p,m)=>{a=!0,s(f,p,m)},trackSelection:(f,p)=>{const m=wt.liftSelection(f);let v;if(m.isEmpty())if(typeof p=="boolean")p?v=2:v=3;else{const S=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===S?v=2:v=3}else v=1;const b=e.trackedRanges.length,E=e.model._setTrackedRange(null,m,v);return e.trackedRanges[b]=E,e.trackedRangesDirection[b]=m.getDirection(),b.toString()}};try{n.getEditOperations(e.model,h)}catch(f){return gn(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,r)=>-Q.compareRangesUsingEnds(n.range,r.range));let t={};for(let n=1;n<e.length;n++){const r=e[n-1],o=e[n];if(Q.getStartPosition(r.range).isBefore(Q.getEndPosition(o.range))){let s;r.identifier.major>o.identifier.major?s=r.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class Tde{constructor(e,t,n,r,o,s){this.id=e,this.label=t,this.alias=n,this._precondition=r,this._run=o,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const _R={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Oee={getInitialState:()=>dR,tokenize2:(i,e,t,n)=>tq(0,i,t,n)};function Ide(i,e,t=Oee){return qOe(i,e,t||Oee)}function GOe(i,e,t,n,r,o,s){let a="<div>",u=n,d=0,h=!0;for(let f=0,p=e.getCount();f<p;f++){const m=e.getEndOffset(f);if(m<=n)continue;let v="";for(;u<m&&u<r;u++){const b=i.charCodeAt(u);switch(b){case 9:let E=o-(u+d)%o;for(d+=E-1;E>0;)s&&h?(v+="&#160;",h=!1):(v+=" ",h=!0),E--;break;case 60:v+="&lt;",h=!1;break;case 62:v+="&gt;",h=!1;break;case 38:v+="&amp;",h=!1;break;case 0:v+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:v+="�",h=!1;break;case 13:v+="&#8203",h=!1;break;case 32:s&&h?(v+="&#160;",h=!1):(v+=" ",h=!0);break;default:v+=String.fromCharCode(b),h=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${v}</span>`,m>r||u>=r)break}return a+="</div>",a}function qOe(i,e,t){let n='<div class="monaco-tokenized-source">';const r=og(i);let o=t.getInitialState();for(let s=0,a=r.length;s<a;s++){const u=r[s];s>0&&(n+="<br/>");const d=t.tokenize2(u,!0,o,0);es.convertToEndOffset(d.tokens,u.length);const f=new es(d.tokens,u,e).inflate();let p=0;for(let m=0,v=f.getCount();m<v;m++){const b=f.getClassName(m),E=f.getEndOffset(m);n+=`<span class="${b}">${mG(u.substring(p,E))}</span>`,p=E}o=d.endState}return n+="</div>",n}class YOe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,r)}}class ZOe{constructor(e,t,n,r,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=r,this.minWidth=o,this.prefixSum=0}}class jA{constructor(e,t,n,r){this._instanceId=Eue(++jA.INSTANCE_COUNT),this._pendingChanges=new YOe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=r}static findInsertionIndex(e,t,n){let r=0,o=e.length;for(;r<o;){const s=r+o>>>1;t===e[s].afterLineNumber?n<e[s].ordinal?o=s:r=s+1:t<e[s].afterLineNumber?o=s:r=s+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,o,s,a)=>{t=!0,r=r|0,o=o|0,s=s|0,a=a|0;const u=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new ZOe(u,r,o,s,a)),u},changeOneWhitespace:(r,o,s)=>{t=!0,o=o|0,s=s|0,this._pendingChanges.change({id:r,newAfterLineNumber:o,newHeight:s})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const u of e)this._insertWhitespace(u);for(const u of t)this._changeOneWhitespace(u.id,u.newAfterLineNumber,u.newHeight);for(const u of n){const d=this._findWhitespaceIndex(u.id);d!==-1&&this._removeWhitespace(d)}return}const r=new Set;for(const u of n)r.add(u.id);const o=new Map;for(const u of t)o.set(u.id,u);const s=u=>{let d=[];for(const h of u)if(!r.has(h.id)){if(o.has(h.id)){const f=o.get(h.id);h.afterLineNumber=f.newAfterLineNumber,h.height=f.newHeight}d.push(h)}return d},a=s(this._arr).concat(s(e));a.sort((u,d)=>u.afterLineNumber===d.afterLineNumber?u.ordinal-d.ordinal:u.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=jA.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,r=t.length;n<r;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==n&&(this._arr[r].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const o=this._arr[r];this._removeWhitespace(r),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,r=t.length-1;for(;n<=r;){const s=(r-n|0)/2|0,a=n+s|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let r=1,o=t;for(;r<o;){const s=(r+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+n)r=s+1;else{if(e>=a)return s;o=s}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(r)|0;let s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const u=this.getWhitespacesCount()|0;let d,h;a===-1?(a=u,h=s+1,d=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let f=o,p=f;const m=5e5;let v=0;o>=m&&(v=Math.floor(o/m)*m,v=Math.floor(v/n)*n,p-=v);const b=[],E=e+(t-e)/2;let S=-1;for(let N=r;N<=s;N++){if(S===-1){const H=f,M=f+n;(H<=E&&E<M||H>E)&&(S=N)}for(f+=n,b[N-r]=p,p+=n;h===N;)p+=d,f+=d,a++,a>=u?h=s+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){s=N;break}}S===-1&&(S=s);const w=this.getVerticalOffsetForLineNumber(s)|0;let L=r,A=s;return L<A&&o<e&&L++,L<A&&w+n>t&&A--,{bigNumbersDelta:v,startLineNumber:r,endLineNumber:s,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:L,completelyVisibleEndLineNumber:A}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,n+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=r+o)return-1;for(;t<n;){const s=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),u=this.getHeightForWhitespaceIndex(s);if(e>=a+u)t=s+1;else{if(e>=a)return s;n=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const r=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:n,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(n<0)return[];let o=[];for(let s=n;s<=r;s++){const a=this.getVerticalOffsetForWhitespaceIndex(s),u=this.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:u})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}jA.INSTANCE_COUNT=0;const XOe=125;class i2{constructor(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=r,this.scrollHeight=Math.max(n,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class QOe extends Oe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Ce),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new i2(0,0,0,0),this._scrollable=this._register(new YB(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(n||r)&&this._onDidContentSizeChange.fire(new mq(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class JOe extends Oe{constructor(e,t,n){super(),this._configuration=e;const r=this._configuration.options,o=r.get(130),s=r.get(74);this._linesLayout=new jA(t,r.get(58),s.top,s.bottom),this._scrollable=this._register(new QOe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new i2(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?XOe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(130)){const n=t.get(130),r=n.contentWidth,o=n.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new i2(r,s.contentWidth,o,this._getContentHeight(r,o,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(91);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,n){const r=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return r.get(93)?o+=Math.max(0,t-r.get(58)-r.get(74).bottom):o+=this._getHorizontalScrollbarHeight(e,n),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new i2(t,e.contentWidth,n,this._getContentHeight(t,n,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new yee(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new yee(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(131),r=t.get(43);if(n.isViewportWrapping){const o=t.get(130),s=t.get(64);return e>o.contentWidth+r.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?e+o.verticalScrollbarWidth:e}else{const o=t.get(92)*r.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o,s)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new i2(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}function o6(i,e){return i===null?e?_3.INSTANCE:v3.INSTANCE:new eRe(i,e)}class eRe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.getOutputLineCount():0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,0)}getInputEndOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,this._lineBreakData.getMaxOutputOffset(e))}getViewLineContent(e,t,n){this.assertVisible();const r=n>0?this._lineBreakData.breakOffsets[n-1]:0,o=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let s;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((u,d)=>new tf(0,0,u+1,this._lineBreakData.injectionOptions[d],0));s=tf.applyInjectedText(e.getLineContent(t),a).substring(r,o)}else s=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:o+1});return n>0&&(s=Ree(this._lineBreakData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,n){return this.assertVisible(),this._lineBreakData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){this.assertVisible();const r=this._lineBreakData,o=n>0?r.wrappedTextIndentLength:0,s=r.injectionOffsets,a=r.injectionOptions;let u,d;if(s){const b=e.getLineTokens(t).withInserted(s.map((L,A)=>({offset:L,text:a[A].content,tokenMetadata:es.defaultTokenMetadata}))),E=n>0?r.breakOffsets[n-1]:0,S=r.breakOffsets[n];u=b.sliceAndInflate(E,S,o),d=new Array;let w=0;for(let L=0;L<s.length;L++){const A=a[L].content.length,N=s[L]+w,H=s[L]+w+A;if(N>S)break;if(E<H){const M=a[L];if(M.inlineClassName){const R=n>0?r.wrappedTextIndentLength:0,q=R+Math.max(N-E,0),X=R+Math.min(H-E,S);q!==X&&d.push(new lOe(q,X,M.inlineClassName,M.inlineClassNameAffectsLetterSpacing))}}w+=A}}else{const b=this.getInputStartOffsetOfOutputLineIndex(n),E=this.getInputEndOffsetOfOutputLineIndex(n);u=e.getLineTokens(t).sliceAndInflate(b,E,o),d=null}let h=u.getLineContent();n>0&&(h=Ree(r.wrappedTextIndentLength)+h);const f=this._lineBreakData.getMinOutputOffset(n)+1,p=h.length+1,m=n+1<this.getViewLineCount(),v=n===0?0:r.breakOffsetsVisibleColumn[n-1];return new gq(h,m,f,p,v,u,d)}getViewLinesData(e,t,n,r,o,s,a){this.assertVisible();for(let u=n;u<r;u++){let d=o+u-n;if(!s[d]){a[d]=null;continue}a[d]=this.getViewLineData(e,t,u)}}getModelColumnOfViewPosition(e,t){return this.assertVisible(),this._lineBreakData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this.assertVisible(),this._lineBreakData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this.assertVisible();const n=this._lineBreakData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const r=t.lineNumber-e;return this._lineBreakData.normalizeOutputPosition(e,t.column-1,n).toPosition(r)}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class _3{constructor(){}isVisible(){return!0}setVisible(e){return e?this:v3.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let r=e.getLineTokens(t),o=r.getLineContent();return new gq(o,!1,1,o.length+1,0,r.inflate(),null)}getViewLinesData(e,t,n,r,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Ee(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}_3.INSTANCE=new _3;class v3{constructor(){}isVisible(){return!1}setVisible(e){return e?_3.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,r,o,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}v3.INSTANCE=new v3;let s6=[""];function Ree(i){if(i>=s6.length)for(let e=1;e<=i;e++)s6[e]=tRe(e);return s6[i]}function tRe(i){return new Array(i+1).join(" ")}class nRe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=ZC(e);const n=this.values,r=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=ZC(e),t=ZC(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=ZC(e),t=ZC(t);const n=this.values,r=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=ZC(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,r=0,o=0,s=0;for(;t<=n;)if(r=t+(n-t)/2|0,o=this.prefixSum[r],s=o-this.values[r],e<s)n=r-1;else if(e>=o)t=r+1;else break;return new kde(r,e-s)}}class iRe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new kde(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=EA(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+n;for(let o=0;o<n;o++)this._indexBySum[r+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class kde{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class rRe{constructor(e,t,n,r,o,s,a,u,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=u,this.wrappingIndent=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new sRe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),o=n.length,s=this.createLineBreaksComputer(),a=new dw(tf.fromDecorations(r));for(let b=0;b<o;b++){const E=a.takeWhile(S=>S.lineNumber===b+1);s.addRequest(n[b],E,t?t[b]:null)}const u=s.finalize();let d=[],h=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(Q.compareRangesUsingStarts),f=1,p=0,m=-1,v=m+1<h.length?p+1:o+2;for(let b=0;b<o;b++){let E=b+1;E===v&&(m++,f=h[m].startLineNumber,p=h[m].endLineNumber,v=m+1<h.length?p+1:o+2);let S=E>=f&&E<=p,w=o6(u[b],!S);d[b]=w.getViewLineCount(),this.modelLineProjections[b]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new iRe(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(p=>this.model.validateRange(p));let n=oRe(t),r=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(Q.compareRangesUsingStarts);if(n.length===r.length){let p=!1;for(let m=0;m<n.length;m++)if(!n[m].equalsRange(r[m])){p=!0;break}if(!p)return!1}const o=n.map(p=>({range:p,options:Ln.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);let s=n,a=1,u=0,d=-1,h=d+1<s.length?u+1:this.modelLineProjections.length+2,f=!1;for(let p=0;p<this.modelLineProjections.length;p++){let m=p+1;m===h&&(d++,a=s[d].startLineNumber,u=s[d].endLineNumber,h=d+1<s.length?u+1:this.modelLineProjections.length+2);let v=!1;if(m>=a&&m<=u?this.modelLineProjections[p].isVisible()&&(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!1),v=!0):(f=!0,this.modelLineProjections[p].isVisible()||(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!0),v=!0)),v){let b=this.modelLineProjections[p].getViewLineCount();this.projectedModelLineLineCounts.setValue(p,b)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,r){const o=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===n,u=this.wrappingIndent===r;if(o&&s&&a&&u)return!1;const d=o&&s&&!a&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=r;let h=null;if(d){h=[];for(let f=0,p=this.modelLineProjections.length;f<p;f++)h[f]=this.modelLineProjections[f].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new YH(r,o)}onModelLinesInserted(e,t,n,r){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible();let s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,u=[],d=[];for(let h=0,f=r.length;h<f;h++){let p=o6(r[h],!o);u.push(p);let m=p.getViewLineCount();a+=m,d[h]=m}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(u).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new ZH(s,s+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let r=t-1,o=this.modelLineProjections[r].getViewLineCount(),s=this.modelLineProjections[r].isVisible(),a=o6(n,s);this.modelLineProjections[r]=a;let u=this.modelLineProjections[r].getViewLineCount(),d=!1,h=0,f=-1,p=0,m=-1,v=0,b=-1;o>u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1,v=f+1,b=v+(o-u)-1,d=!0):o<u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+o-1,p=f+1,m=p+(u-o)-1,d=!0):(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1),this.projectedModelLineLineCounts.setValue(r,u);const E=h<=f?new Dde(h,f):null,S=p<=m?new ZH(p,m):null,w=v<=b?new YH(v,b):null;return[d,E,S,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(r.lineNumber,o.lineNumber,s.lineNumber),u=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:u.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,r=t.remainder;return new Mee(n+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ee(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ee(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),r=this.getViewLineInfo(t),o=new Array;let s=this.getModelStartPositionOfViewLine(n),a=new Array;for(let u=n.modelLineNumber;u<=r.modelLineNumber;u++){const d=this.modelLineProjections[u-1];if(d.isVisible()){let h=u===n.modelLineNumber?n.modelLineWrappedLineIdx:0,f=u===r.modelLineNumber?r.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let p=h;p<f;p++)a.push(new Mee(u,p))}if(!d.isVisible()&&s){const h=new Ee(u-1,this.model.getLineMaxColumn(u-1)+1),f=Q.fromPositions(s,h);o.push(new Pee(f,a)),a=[],s=null}else d.isVisible()&&!s&&(s=new Ee(u,1))}if(s){const u=Q.fromPositions(s,this.getModelEndPositionOfViewLine(r));o.push(new Pee(u,a))}return o}getViewLinesBracketGuides(e,t,n,r){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const u=a.modelRange.startLineNumber,d=this.model.getLinesBracketGuides(u,a.modelRange.endLineNumber,o,r);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)s.push([]);else{let f=d[h.modelLineNumber-u];f=f.map(p=>p.horizontalLine?new My(p.visibleColumn,p.className,new BH(p.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,p.horizontalLine.endColumn).column)):p),s.push(f)}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[],s=[],a=[];const u=n.lineNumber-1,d=r.lineNumber-1;let h=null;for(let v=u;v<=d;v++){const b=this.modelLineProjections[v];if(b.isVisible()){let E=b.getViewLineNumberOfModelPosition(0,v===u?n.column:1),S=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(v+1)),w=S-E+1,L=0;w>1&&b.getViewLineMinColumn(this.model,v+1,S)===1&&(L=E===0?1:2),s.push(w),a.push(L),h===null&&(h=new Ee(v+1,0))}else h!==null&&(o=o.concat(this.model.getLinesIndentGuides(h.lineNumber,v)),h=null)}h!==null&&(o=o.concat(this.model.getLinesIndentGuides(h.lineNumber,r.lineNumber)),h=null);const f=t-e+1;let p=new Array(f),m=0;for(let v=0,b=o.length;v<b;v++){let E=o[v],S=Math.min(f-m,s[v]),w=a[v],L;w===2?L=0:w===1?L=1:L=S;for(let A=0;A<S;A++)A===L&&(E=0),p[m++]=E}return p}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,s=r.index,a=r.remainder,u=[];for(let d=s,h=this.model.getLineCount();d<h;d++){let f=this.modelLineProjections[d];if(!f.isVisible())continue;let p=d===s?a:0,m=f.getViewLineCount()-p,v=!1;o+m>t&&(v=!0,m=t-o+1);let b=p+m;if(f.getViewLinesData(this.model,d+1,p,b,o-e,n,u),o+=m,v)break}return u}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),o=r.index,s=r.remainder,a=this.modelLineProjections[o],u=a.getViewLineMinColumn(this.model,o+1,s),d=a.getViewLineMaxColumn(this.model,o+1,s);t<u&&(t=u),t>d&&(t=d);let h=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new Ee(o+1,h)).equals(n)?new Ee(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e);let r=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Ee(n.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Q(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const r=this.model.validatePosition(new Ee(e,t)),o=r.lineNumber,s=r.column;let a=o-1,u=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,u=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new Ee(1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(a);let h;return u?h=this.modelLineProjections[a].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(a+1),n):h=this.modelLineProjections[o-1].getViewPositionOfModelPosition(d,s,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return Q.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Q(r.lineNumber,1,o.lineNumber,o.column),t,n);let s=[];const a=r.lineNumber-1,u=o.lineNumber-1;let d=null;for(let m=a;m<=u;m++)if(this.modelLineProjections[m].isVisible())d===null&&(d=new Ee(m+1,m===a?r.column:1));else if(d!==null){const b=this.model.getLineMaxColumn(m);s=s.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,m,b),t,n)),d=null}d!==null&&(s=s.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,o.lineNumber,o.column),t,n)),d=null),s.sort((m,v)=>{const b=Q.compareRangesUsingStarts(m.range,v.range);return b===0?m.id<v.id?-1:m.id>v.id?1:0:b});let h=[],f=0,p=null;for(const m of s){const v=m.id;p!==v&&(p=v,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function oRe(i){if(i.length===0)return[];const e=i.slice();e.sort(Q.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,r=e[0].endLineNumber;for(let o=1,s=e.length;o<s;o++){let a=e[o];a.startLineNumber>r+1?(t.push(new Q(n,1,r,1)),n=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new Q(n,1,r,1)),t}class Mee{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class Pee{constructor(e,t){this.modelRange=e,this.viewLines=t}}class sRe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class aRe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new lRe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,r){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new YH(t,n)}onModelLinesInserted(e,t,n,r){return new ZH(t,n)}onModelLineChanged(e,t,n){return[!1,new Dde(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let r=new Array(n);for(let o=0;o<n;o++)r[o]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new gq(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);let o=[];for(let s=e;s<=t;s++){let a=s-e;n[a]||(o[a]=null),o[a]=this.getViewLineData(s)}return o}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class lRe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class uRe{constructor(e,t,n,r,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=r,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const r=e.range,o=e.options;let s;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Ee(r.startLineNumber,1),0),u=this._coordinatesConverter.convertModelPositionToViewPosition(new Ee(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);s=new Q(a.lineNumber,a.column,u.lineNumber,u.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new Lde(s,o),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,IG(this.configuration.options)),n=e.startLineNumber,r=e.endLineNumber;let o=[],s=0,a=[];for(let u=n;u<=r;u++)a[u-n]=[];for(let u=0,d=t.length;u<d;u++){let h=t[u],f=h.options;if(!bq(this.model,h))continue;let p=this._getOrCreateViewModelDecoration(h),m=p.range;if(o[s++]=p,f.inlineClassName){let v=new M2(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(n,m.startLineNumber),E=Math.min(r,m.endLineNumber);for(let S=b;S<=E;S++)a[S-n].push(v)}if(f.beforeContentClassName&&n<=m.startLineNumber&&m.startLineNumber<=r){let v=new M2(new Q(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);a[m.startLineNumber-n].push(v)}if(f.afterContentClassName&&n<=m.endLineNumber&&m.endLineNumber<=r){let v=new M2(new Q(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);a[m.endLineNumber-n].push(v)}}return{decorations:o,inlineDecorations:a}}}function bq(i,e){return!(e.options.hideInCommentTokens&&cRe(i,e.range,n=>n===1))}function cRe(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const r=i.getLineTokens(n),o=n===e.startLineNumber,s=n===e.endLineNumber;let a=o?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(s&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}const dRe={ModesRegistry:"editor.modesRegistry"};class hRe{constructor(){this._onDidChangeLanguages=new Ce,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const s1=new hRe;Xr.add(dRe.ModesRegistry,s1);const jS="plaintext",fRe=".txt";s1.registerLanguage({id:jS,extensions:[fRe],aliases:[C("plainText.alias","Plain Text"),"text"],mimetypes:[Vc.text]});_i.register(jS,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);Xr.as(SC.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1}}}]);class gRe extends Oe{constructor(e,t,n,r,o,s){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new zOe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new tr(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new tr(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new aRe(this.model);else{const a=this._configuration.options,u=a.get(43),d=a.get(124),h=a.get(131),f=a.get(123);this._lines=new rRe(this._editorId,this.model,r,o,u,this.model.getOptions().tabSize,d,h.wrappingColumn,f)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new eS(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new JOe(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new BOe(a)),this._eventDispatcher.emitOutgoingEvent(new vq(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new uRe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(mR.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new HOe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const r of n)this.model.tokenizeViewport(r.startLineNumber,r.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new POe(e)),this._eventDispatcher.emitOutgoingEvent(new _q(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new AOe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new OOe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new WOe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new Ee(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let r=!1;const o=this._configuration.options,s=o.get(43),a=o.get(124),u=o.get(131),d=o.get(123);if(this._lines.setWrappingSettings(s,a,u.wrappingColumn,d)&&(e.emitViewEvent(new UM),e.emitViewEvent(new jM),e.emitViewEvent(new XC(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(r=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new XC(null))),e.emitViewEvent(new ROe(t)),this.viewLayout.onConfigurationChanged(t),r&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),f=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:f+this._viewportStartLineDelta},1)}Bc.shouldRecreate(t)&&(this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,r=!1;const o=e.changes,s=e instanceof t1?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of o)switch(h.changeType){case 4:{for(let f=0;f<h.detail.length;f++){const p=h.detail[f];let m=h.injectedTexts[f];m&&(m=m.filter(v=>!v.ownerId||v.ownerId===this._editorId)),a.addRequest(p,m,null)}break}case 2:{let f=null;h.injectedText&&(f=h.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(h.detail,f,null);break}}const u=a.finalize(),d=new dw(u);for(const h of o)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new UM),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const f=this._lines.onModelLinesDeleted(s,h.fromLineNumber,h.toLineNumber);f!==null&&(t.emitViewEvent(f),this.viewLayout.onLinesDeleted(f.fromLineNumber,f.toLineNumber)),n=!0;break}case 4:{const f=d.takeCount(h.detail.length),p=this._lines.onModelLinesInserted(s,h.fromLineNumber,h.toLineNumber,f);p!==null&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const f=d.dequeue(),[p,m,v,b]=this._lines.onModelLineChanged(s,h.lineNumber,f);r=p,m&&t.emitViewEvent(m),v&&(t.emitViewEvent(v),this.viewLayout.onLinesInserted(v.fromLineNumber,v.toLineNumber)),b&&(t.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}s!==null&&this._lines.acceptVersionId(s),this.viewLayout.onHeightMaybeChanged(),!n&&r&&(t.emitViewEvent(new jM),t.emitViewEvent(new XC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,r=e.ranges.length;n<r;n++){const o=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new Ee(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Ee(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new VOe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new FOe),this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new UM),t.emitViewEvent(new jM),t.emitViewEvent(new XC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new XC(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new UM),n.emitViewEvent(new jM),n.emitViewEvent(new XC(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new Nee)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(130),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),o=Math.max(1,r.completelyVisibleStartLineNumber-n),s=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new Q(o,this.getLineMinColumn(o),s,this.getLineMaxColumn(s)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let r=[],o=0,s=t.startLineNumber,a=t.startColumn,u=t.endLineNumber,d=t.endColumn;for(let h=0,f=n.length;h<f;h++){const p=n[h].startLineNumber,m=n[h].endLineNumber;m<s||p>u||(s<p&&(r[o++]=new Q(s,a,p-1,this.model.getLineMaxColumn(p-1))),s=m+1,a=1)}return(s<u||s===u&&a<d)&&(r[o++]=new Q(s,a,u,d)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new Q(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new Q(n,this.getLineMinColumn(n),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new Ee(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let r=this.coordinatesConverter.convertViewPositionToModelPosition(new Ee(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Q(r.lineNumber,r.column,r.lineNumber,r.column),1);const o=this.viewLayout.getVerticalOffsetForLineNumber(e),s=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=s-o}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,r){return this._lines.getViewLinesBracketGuides(e,t,n,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Na(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Qf(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),s=this._lines.getViewLineData(t),u=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return s.inlineDecorations&&(u=[...u,...s.inlineDecorations.map(d=>d.toInlineDecoration(t))]),new Fu(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,r,s.tokens,u,o,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let r=this._lines.getViewLinesData(e,t,n);return new aOe(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,IG(this._configuration.options)),n=new pRe;for(const r of t){const o=r.options,s=o.overviewRuler;if(!s)continue;const a=s.position;if(a===0)continue;const u=s.getColor(e),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);n.accept(u,o.zIndex,d,h,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const s=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(s)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const r=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Q.compareRangesUsingStarts);let o=!1,s=!1;for(const u of e)u.isEmpty()?o=!0:s=!0;if(!s){if(!t)return"";const u=e.map(h=>h.startLineNumber);let d="";for(let h=0;h<u.length;h++)h>0&&u[h-1]===u[h]||(d+=this.model.getLineContent(u[h])+r);return d}if(o&&t){let u=[],d=0;for(const h of e){const f=h.startLineNumber;h.isEmpty()?f!==d&&u.push(this.model.getLineContent(f)):u.push(this.model.getValueInRange(h,n?2:0)),d=f}return u.length===1?u[0]:u}let a=[];for(const u of e)u.isEmpty()||a.push(this.model.getValueInRange(u,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===jS||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const h=r.startLineNumber;r=new Q(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const o=this._configuration.options.get(43),s=this._getColorMap(),u=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===js.fontFamily;let d;return u?d=js.fontFamily:(d=o.fontFamily,d=d.replace(/"/g,"'"),/[,']/.test(d)||/[+ ]/.test(d)&&(d=`'${d}'`),d=`${d}, ${js.fontFamily}`),{mode:n,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${d};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,s)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=this.getTabSize();let u="";for(let d=n;d<=o;d++){const h=this.model.getLineTokens(d),f=h.getLineContent(),p=d===n?r-1:0,m=d===o?s-1:f.length;f===""?u+="<br>":u+=GOe(f,h.inflate(),t,p,m,a,As)}return u}_getColorMap(){let e=Wr.getColorMap(),t=["#000000"];if(e)for(let n=1,r=e.length;n<r;n++)t[n]=we.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new jOe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,r,o){this._executeCursorEdit(s=>this._cursor.compositionType(s,e,t,n,r,o))}paste(e,t,n,r){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealRange(e,t,n,r,o){this._withViewEventsCollector(s=>s.emitViewEvent(new u4(e,n,null,r,t,o)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new $Oe),this._eventDispatcher.emitOutgoingEvent(new Nee))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class pRe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,r,o){const s=this._asMap[e];if(s){const a=s.data,u=a[a.length-3],d=a[a.length-1];if(u===o&&d+1>=n){r>d&&(a[a.length-1]=r);return}a.push(o,n,r)}else{const a=new xde(e,t,[o,n,r]);this._asMap[e]=a,this.asArray.push(a)}}}class KA{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var GA;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(GA||(GA={}));(function(i){const e="error",t="warning",n="warn",r="info",o="ignore";function s(u){return u?JN(e,u)?i.Error:JN(t,u)||JN(n,u)?i.Warning:JN(r,u)?i.Info:i.Ignore:i.Ignore}i.fromValue=s;function a(u){switch(u){case i.Error:return e;case i.Warning:return t;case i.Info:return r;default:return o}}i.toString=a})(GA||(GA={}));const Ur=GA,po=gi("notificationService");class mRe{}const rl=gi("accessibilityService"),vR=new Dt("accessibilityModeEnabled",!1);class B2{constructor(e,t,n,r,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&r>this.injectionOffsets[o];o++)r<this.injectionOffsets[o]+this.injectionOptions[o].content.length?r=this.injectionOffsets[o]:r-=this.injectionOptions[o].content.length;return r}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)n+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,r=this.breakOffsets.length-1,o=0,s=0;for(;n<=r;){o=n+(r-n)/2|0;const u=this.breakOffsets[o];if(s=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=s)r=o-1;else if(e>u)n=o+1;else break;else if(e<s)r=o-1;else if(e>=u)n=o+1;else break}let a=e-s;return o>0&&(a+=this.wrappedTextIndentLength),new KM(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,n);if(o!==r)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new KM(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new KM(e+1,this.getMinOutputOffset(e+1))}return new KM(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInInputWithInjections+n.length?n.offsetInInputWithInjections+n.length:n.offsetInInputWithInjections;if(t===1){let s=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)s+=this.injectionOptions[a+1].content.length,a++;return s}let r=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)r-=this.injectionOptions[o-1].content.length,o++;return r}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(n);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let r=0;for(let o=0;o<t.length;o++){const s=n[o].content.length,a=t[o]+r,u=t[o]+r+s;if(a>e)break;if(e<=u)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:s};r+=s}}}}class KM{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Ee(e+this.outputLineIndex,this.outputOffset+1)}}class Cq{constructor(e,t){this.classifier=new _Re(e,t)}static create(e){return new Cq(e.get(119),e.get(118))}createLineBreaksComputer(e,t,n,r){const o=[],s=[],a=[];return{addRequest:(u,d,h)=>{o.push(u),s.push(d),a.push(h)},finalize:()=>{const u=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let d=[];for(let h=0,f=o.length;h<f;h++){const p=s[h],m=a[h];m&&!m.injectionOptions&&!p?d[h]=vRe(this.classifier,m,o[h],t,n,u,r):d[h]=bRe(this.classifier,o[h],p,t,n,u,r)}return XH.length=0,QH.length=0,d}}}}class _Re extends $S{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let XH=[],QH=[];function vRe(i,e,t,n,r,o,s){if(r===-1)return null;const a=t.length;if(a<=1)return null;const u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,h=Nde(t,n,r,o,s),f=r-h;let p=XH,m=QH,v=0,b=0,E=0,S=r;const w=u.length;let L=0;if(L>=0){let A=Math.abs(d[L]-S);for(;L+1<w;){const N=Math.abs(d[L+1]-S);if(N>=A)break;A=N,L++}}for(;L<w;){let A=L<0?0:u[L],N=L<0?0:d[L];b>A&&(A=b,N=E);let H=0,M=0,R=0,q=0;if(N<=S){let $=N,I=A===0?0:t.charCodeAt(A-1),O=A===0?0:i.get(I),B=!0;for(let W=A;W<a;W++){const j=W,U=t.charCodeAt(W);let G,z;if(Vo(U)?(W++,G=0,z=2):(G=i.get(U),z=W2(U,$,n,o)),j>b&&JH(I,O,U,G)&&(H=j,M=$),$+=z,$>S){j>b?(R=j,q=$-z):(R=W+1,q=$),$-M>f&&(H=0),B=!1;break}I=U,O=G}if(B){v>0&&(p[v]=u[u.length-1],m[v]=d[u.length-1],v++);break}}if(H===0){let $=N,I=t.charCodeAt(A),O=i.get(I),B=!1;for(let W=A-1;W>=b;W--){const j=W+1,U=t.charCodeAt(W);if(U===9){B=!0;break}let G,z;if(jw(U)?(W--,G=0,z=2):(G=i.get(U),z=sg(U)?o:1),$<=S){if(R===0&&(R=j,q=$),$<=S-f)break;if(JH(U,G,I,O)){H=j,M=$;break}}$-=z,I=U,O=G}if(H!==0){const W=f-(q-M);if(W<=n){const j=t.charCodeAt(R);let U;Vo(j)?U=2:U=W2(j,q,n,o),W-U<0&&(H=0)}}if(B){L--;continue}}if(H===0&&(H=R,M=q),H<=b){const $=t.charCodeAt(b);Vo($)?(H=b+2,M=E+2):(H=b+1,M=E+W2($,E,n,o))}for(b=H,p[v]=H,E=M,m[v]=M,v++,S=M+f;L<0||L<w&&d[L]<M;)L++;let X=Math.abs(d[L]-S);for(;L+1<w;){const $=Math.abs(d[L+1]-S);if($>=X)break;X=$,L++}}return v===0?null:(p.length=v,m.length=v,XH=e.breakOffsets,QH=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function bRe(i,e,t,n,r,o,s){const a=tf.applyInjectedText(e,t);let u,d;if(t&&t.length>0?(u=t.map(M=>M.options),d=t.map(M=>M.column-1)):(u=null,d=null),r===-1)return u?new B2(d,u,[a.length],[],0):null;const h=a.length;if(h<=1)return u?new B2(d,u,[a.length],[],0):null;const f=Nde(a,n,r,o,s),p=r-f;let m=[],v=[],b=0,E=0,S=0,w=r,L=a.charCodeAt(0),A=i.get(L),N=W2(L,0,n,o),H=1;Vo(L)&&(N+=1,L=a.charCodeAt(1),A=i.get(L),H++);for(let M=H;M<h;M++){const R=M,q=a.charCodeAt(M);let X,$;Vo(q)?(M++,X=0,$=2):(X=i.get(q),$=W2(q,N,n,o)),JH(L,A,q,X)&&(E=R,S=N),N+=$,N>w&&((E===0||N-S>p)&&(E=R,S=N-$),m[b]=E,v[b]=S,b++,w=S+p,E=0),L=q,A=X}return b===0&&(!t||t.length===0)?null:(m[b]=h,v[b]=N,new B2(d,u,m,v,f))}function W2(i,e,t,n){return i===9?t-e%t:sg(i)||i<32?n:1}function Fee(i,e){return e-i%e}function JH(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function Nde(i,e,t,n,r){let o=0;if(r!==0){const s=Na(i);if(s!==-1){for(let u=0;u<s;u++){const d=i.charCodeAt(u)===9?Fee(o,e):1;o+=d}const a=r===3?2:r===2?1:0;for(let u=0;u<a;u++){const d=Fee(o,e);o+=d}o+n>t&&(o=0)}}return o}var a6;const l6=(a6=window.trustedTypes)===null||a6===void 0?void 0:a6.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class yq{static create(){return new yq}constructor(){}createLineBreaksComputer(e,t,n,r){let o=[],s=[];return{addRequest:(a,u,d)=>{o.push(a),s.push(u)},finalize:()=>CRe(o,e,t,n,r,s)}}}function CRe(i,e,t,n,r,o){var s;function a(R){const q=o[R];if(q){const X=tf.applyInjectedText(i[R],q),$=q.map(O=>O.options),I=q.map(O=>O.column-1);return new B2(I,$,[X.length],[],0)}else return null}if(n===-1){const R=[];for(let q=0,X=i.length;q<X;q++)R[q]=a(q);return R}const u=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(r===3?2:r===2?1:0)),f=Math.ceil(e.spaceWidth*h),p=document.createElement("div");Oa.applyFontInfoSlow(p,e);const m=N1(1e4),v=[],b=[],E=[],S=[],w=[];for(let R=0;R<i.length;R++){const q=tf.applyInjectedText(i[R],o[R]);let X=0,$=0,I=u;if(r!==0)if(X=Na(q),X===-1)X=0;else{for(let j=0;j<X;j++){const U=q.charCodeAt(j)===9?t-$%t:1;$+=U}const W=Math.ceil(e.spaceWidth*$);W+e.typicalFullwidthCharacterWidth>u?(X=0,$=0):I=u-W}const O=q.substr(X),B=yRe(O,$,t,I,m,f);v[R]=X,b[R]=$,E[R]=O,S[R]=B[0],w[R]=B[1]}const L=m.build(),A=(s=l6==null?void 0:l6.createHTML(L))!==null&&s!==void 0?s:L;p.innerHTML=A,p.style.position="absolute",p.style.top="10000",p.style.wordWrap="break-word",document.body.appendChild(p);let N=document.createRange();const H=Array.prototype.slice.call(p.children,0);let M=[];for(let R=0;R<i.length;R++){const q=H[R],X=wRe(N,q,E[R],S[R]);if(X===null){M[R]=a(R);continue}const $=v[R],I=b[R]+h,O=w[R],B=[];for(let G=0,z=X.length;G<z;G++)B[G]=O[X[G]];if($!==0)for(let G=0,z=X.length;G<z;G++)X[G]+=$;let W,j;const U=o[R];U?(W=U.map(G=>G.options),j=U.map(G=>G.column-1)):(W=null,j=null),M[R]=new B2(j,W,X,B,I)}return document.body.removeChild(p),M}function yRe(i,e,t,n,r,o){if(o!==0){let p=String(o);r.appendASCIIString('<div style="text-indent: -'),r.appendASCIIString(p),r.appendASCIIString("px; padding-left: "),r.appendASCIIString(p),r.appendASCIIString("px; box-sizing: border-box; width:")}else r.appendASCIIString('<div style="width:');r.appendASCIIString(String(n)),r.appendASCIIString('px;">');const s=i.length;let a=e,u=0,d=[],h=[],f=0<s?i.charCodeAt(0):0;r.appendASCIIString("<span>");for(let p=0;p<s;p++){p!==0&&p%16384===0&&r.appendASCIIString("</span><span>"),d[p]=u,h[p]=a;const m=f;f=p+1<s?i.charCodeAt(p+1):0;let v=1,b=1;switch(m){case 9:v=t-a%t,b=v;for(let E=1;E<=v;E++)E<v?r.write1(160):r.appendASCII(32);break;case 32:f===32?r.write1(160):r.appendASCII(32);break;case 60:r.appendASCIIString("&lt;");break;case 62:r.appendASCIIString("&gt;");break;case 38:r.appendASCIIString("&amp;");break;case 0:r.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.write1(65533);break;default:sg(m)&&b++,m<32?r.write1(9216+m):r.write1(m)}u+=v,a+=b}return r.appendASCIIString("</span>"),d[i.length]=u,h[i.length]=a,r.appendASCIIString("</div>"),[d,h]}function wRe(i,e,t,n){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),o=[];try{e$(i,r,n,0,null,t.length-1,null,o)}catch(s){return console.log(s),null}return o.length===0?null:(o.push(t.length),o)}function e$(i,e,t,n,r,o,s,a){if(n===o||(r=r||u6(i,e,t[n],t[n+1]),s=s||u6(i,e,t[o],t[o+1]),Math.abs(r[0].top-s[0].top)<=.1))return;if(n+1===o){a.push(o);return}const u=n+(o-n)/2|0,d=u6(i,e,t[u],t[u+1]);e$(i,e,t,n,r,u,d,a),e$(i,e,t,u,d,o,s,a)}function u6(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var SRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},tb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let ERe=0,LRe=class{constructor(e,t,n,r,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=r,this.listenersToRemove=o}dispose(){ri(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},qA=class c4 extends Oe{constructor(e,t,n,r,o,s,a,u,d,h){super(),this._onDidDispose=this._register(new Ce),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Ce),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Ce),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Ce),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Ce),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Ce),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new Ce),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Ce),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Ce),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Ce),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Ce),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Ce),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Bee),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Bee),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Ce),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Ce),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Ce),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Ce),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Ce),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Ce),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Ce),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Ce),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Ce),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Ce),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new Ce),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Ce),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Ce),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Ce),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Ce),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Ce),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Ce),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Ce),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Ce),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++ERe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(f,h)),this._register(this._configuration.onDidChange(m=>{this._onDidChangeConfiguration.fire(m);const v=this._configuration.options;if(m.hasChanged(130)){const b=v.get(130);this._onDidLayoutChange.fire(b)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=o,this._commandService=s,this._themeService=u,this._register(new xRe(this,this._contextKeyService)),this._register(new DRe(this,this._contextKeyService)),this._instantiationService=r.createChild(new KA([cn,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new TRe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=cw.getEditorContributions();for(const m of p){if(this._contributions[m.id]){gn(new Error(`Cannot have two contributions with the same id ${m.id}`));continue}try{const v=this._instantiationService.createInstance(m.ctor,this);this._contributions[m.id]=v}catch(v){gn(v)}}cw.getEditorActions().forEach(m=>{if(this._actions[m.id]){gn(new Error(`Cannot have two actions with the same id ${m.id}`));return}const v=new Tde(m.id,m.label,m.alias,_l(m.precondition),()=>this._instantiationService.invokeFunction(b=>Promise.resolve(m.runEditorCommand(b,this,null))),this._contextKeyService);this._actions[v.id]=v}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Oa(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _R.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const r=e[t];this._contributions[r].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ni.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const o={oldModelUrl:r?r.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(r)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}getTopForLineNumber(e){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>Q.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return cr.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!Ee.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,r){if(!this._modelData)return;if(!Q.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",n,s,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,r){if(!Ee.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Q(e.lineNumber,e.column,e.lineNumber,e.column),t,n,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=wt.isISelection(e),n=Q.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new wt(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,t,1),n,!1,r)}revealRange(e,t=0,n=!1,r=!0){this._revealRange(e,n?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,r){if(!Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Q.lift(e),t,n,r)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,o=e.length;r<o;r++)if(!wt.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const o of t){const s=this._contributions[o];typeof s.saveViewState=="function"&&(e[o]=s.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),r=this._modelData.viewModel.saveState();return{cursorState:n,viewState:r,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const r=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,u=o.length;a<u;a++){const d=o[a],h=this._contributions[d];typeof h.restoreViewState=="function"&&h.restoreViewState(r[d])}const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=n;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=n;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=n;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=n;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run()).then(void 0,gn);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,r,o){this._modelData&&this._modelData.viewModel.compositionType(t,n,r,o,e)}_paste(e,t,n,r,o){if(!this._modelData||t.length===0)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,r,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new Q(s.lineNumber,s.column,a.lineNumber,a.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const r=cw.getEditorCommand(t);return r?(n=n||{},n.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(r.runEditorCommand(o,this,n)).then(void 0,gn)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let r;return n?Array.isArray(n)?r=()=>n:r=n:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,IG(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,r=n.get(130),o=c4._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:o,left:s,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Oa.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new gRe(this._id,this._configuration,e,yq.create(),Cq.create(this._configuration.options),s=>rg(s));t.push(e.onDidChangeDecorations(s=>this._onDidChangeModelDecorations.fire(s))),t.push(e.onDidChangeLanguage(s=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(s)})),t.push(e.onDidChangeLanguageConfiguration(s=>this._onDidChangeModelLanguageConfiguration.fire(s))),t.push(e.onDidChangeContent(s=>this._onDidChangeModelContent.fire(s))),t.push(e.onDidChangeOptions(s=>this._onDidChangeModelOptions.fire(s))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(s=>{switch(s.kind){case 0:this._onDidContentSizeChange.fire(s);break;case 1:this._editorTextFocus.setValue(s.hasFocus);break;case 2:this._onDidScrollChange.fire(s);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{s.reachedMaxCursorCount&&this._notificationService.warn(C("cursors.maximum","The number of cursors has been limited to {0}.",eS.MAX_CURSOR_COUNT));const a=[];for(let h=0,f=s.selections.length;h<f;h++)a[h]=s.selections[h].getPosition();const u={position:a[0],secondaryPositions:a.slice(1),reason:s.reason,source:s.source};this._onDidChangeCursorPosition.fire(u);const d={selection:s.selections[0],secondarySelections:s.selections.slice(1),modelVersionId:s.modelVersionId,oldSelections:s.oldSelections,oldModelVersionId:s.oldModelVersionId,source:s.source,reason:s.reason};this._onDidChangeCursorSelection.fire(d);break}}}));const[r,o]=this._createView(n);if(o){this._domElement.appendChild(r.domNode.domNode);let s=Object.keys(this._contentWidgets);for(let a=0,u=s.length;a<u;a++){const d=s[a];r.addContentWidget(this._contentWidgets[d])}s=Object.keys(this._overlayWidgets);for(let a=0,u=s.length;a<u;a++){const d=s[a];r.addOverlayWidget(this._overlayWidgets[d])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new LRe(e,n,r,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,s,a,u)=>{this._paste("keyboard",o,s,a,u)},type:o=>{this._type("keyboard",o)},compositionType:(o,s,a,u)=>{this._compositionType("keyboard",o,s,a,u)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,s,a,u)=>{const d={text:o,pasteOnNewLine:s,multicursorText:a,mode:u};this._commandService.executeCommand("paste",d)},type:o=>{const s={text:o};this._commandService.executeCommand("type",s)},compositionType:(o,s,a,u)=>{if(a||u){const d={text:o,replacePrevCharCnt:s,replaceNextCharCnt:a,positionDelta:u};this._commandService.executeCommand("compositionType",d)}else{const d={text:o,replaceCharCnt:s};this._commandService.executeCommand("replacePreviousChar",d)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new qB(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new kOe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};qA=SRe([tb(3,Nn),tb(4,Ii),tb(5,Ir),tb(6,cn),tb(7,xr),tb(8,po),tb(9,rl)],qA);class Bee extends Oe{constructor(){super(),this._onDidChangeToTrue=this._register(new Ce),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Ce),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class xRe extends Oe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=de.editorSimpleInput.bindTo(t),this._editorFocus=de.focus.bindTo(t),this._textInputFocus=de.textInputFocus.bindTo(t),this._editorTextFocus=de.editorTextFocus.bindTo(t),this._editorTabMovesFocus=de.tabMovesFocus.bindTo(t),this._editorReadonly=de.readOnly.bindTo(t),this._inDiffEditor=de.inDiffEditor.bindTo(t),this._editorColumnSelection=de.columnSelection.bindTo(t),this._hasMultipleSelections=de.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=de.hasNonEmptySelection.bindTo(t),this._canUndo=de.canUndo.bindTo(t),this._canRedo=de.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class DRe extends Oe{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=de.languageId.bindTo(t),this._hasCompletionItemProvider=de.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=de.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=de.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=de.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=de.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=de.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=de.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=de.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=de.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=de.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=de.hasReferenceProvider.bindTo(t),this._hasRenameProvider=de.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=de.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=de.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=de.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=de.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=de.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=de.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=de.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(Ah.onDidChange(n)),this._register(tg.onDidChange(n)),this._register(ip.onDidChange(n)),this._register(kA.onDidChange(n)),this._register(YF.onDidChange(n)),this._register(ZF.onDidChange(n)),this._register(XF.onDidChange(n)),this._register(IA.onDidChange(n)),this._register(Gw.onDidChange(n)),this._register(Gc.onDidChange(n)),this._register(KF.onDidChange(n)),this._register(GF.onDidChange(n)),this._register(O2.onDidChange(n)),this._register(Oh.onDidChange(n)),this._register(e1.onDidChange(n)),this._register(Hv.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(Ah.has(e)),this._hasCodeActionsProvider.set(tg.has(e)),this._hasCodeLensProvider.set(ip.has(e)),this._hasDefinitionProvider.set(kA.has(e)),this._hasDeclarationProvider.set(YF.has(e)),this._hasImplementationProvider.set(ZF.has(e)),this._hasTypeDefinitionProvider.set(XF.has(e)),this._hasHoverProvider.set(IA.has(e)),this._hasDocumentHighlightProvider.set(Gw.has(e)),this._hasDocumentSymbolProvider.set(Gc.has(e)),this._hasReferenceProvider.set(KF.has(e)),this._hasRenameProvider.set(GF.has(e)),this._hasSignatureHelpProvider.set(e1.has(e)),this._hasInlayHintsProvider.set(Hv.has(e)),this._hasDocumentFormattingProvider.set(O2.has(e)||Oh.has(e)),this._hasDocumentSelectionFormattingProvider.set(Oh.has(e)),this._hasMultipleDocumentFormattingProvider.set(O2.all(e).length+Oh.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Oh.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===In.walkThroughSnippet)})}}class TRe extends Oe{constructor(e){super(),this._onChange=this._register(new Ce),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register($w(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const IRe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),kRe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function c6(i){return IRe+encodeURIComponent(i.toString())+kRe}const NRe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ARe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function ORe(i){return NRe+encodeURIComponent(i.toString())+ARe}fr((i,e)=>{const t=i.getColor(fce);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(T2);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${c6(n)}") repeat-x bottom left; }`);const r=i.getColor(ZDe);r&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${r}; }`);const o=i.getColor(IB);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);const s=i.getColor(vp);s&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${c6(s)}") repeat-x bottom left; }`);const a=i.getColor(XDe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const u=i.getColor(MG);u&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${u}; }`);const d=i.getColor(Gh);d&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${c6(d)}") repeat-x bottom left; }`);const h=i.getColor(QDe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const f=i.getColor(eTe);f&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${f}; }`);const p=i.getColor(JDe);p&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${ORe(p)}") no-repeat bottom left; }`);const m=i.getColor(D2e);m&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);const v=i.getColor(x2e);v&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${v}; }`);const b=i.getColor(uR)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${b}}`)});class Ui{constructor(e,t,n){const r=o=>this.emitter.fire(o);this.emitter=new Ce({onFirstListenerAdd:()=>e.addEventListener(t,r,n),onLastListenerRemove:()=>e.removeEventListener(t,r,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function Wee(i){return i.preventDefault(),i.stopPropagation(),i}var KS=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};let RRe=!1;var b3;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(b3||(b3={}));let MRe=4;const PRe=new Ce;let FRe=300;const BRe=new Ce;class wq{constructor(){this.disposables=new Je}get onPointerMove(){return this.disposables.add(new Ui(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ui(window,"mouseup")).event}dispose(){this.disposables.dispose()}}KS([Io],wq.prototype,"onPointerMove",null);KS([Io],wq.prototype,"onPointerUp",null);class Sq{constructor(e){this.el=e,this.disposables=new Je}get onPointerMove(){return this.disposables.add(new Ui(this.el,ur.Change)).event}get onPointerUp(){return this.disposables.add(new Ui(this.el,ur.End)).event}dispose(){this.disposables.dispose()}}KS([Io],Sq.prototype,"onPointerMove",null);KS([Io],Sq.prototype,"onPointerUp",null);class C3{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}KS([Io],C3.prototype,"onPointerMove",null);KS([Io],C3.prototype,"onPointerUp",null);class Hs extends Oe{constructor(e,t,n){super(),this.hoverDelay=FRe,this.hoverDelayer=this._register(new Np(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Ce),this._onDidStart=this._register(new Ce),this._onDidChange=this._register(new Ce),this._onDidReset=this._register(new Ce),this._onDidEnd=this._register(new Ce),this.orthogonalStartSashDisposables=this._register(new Je),this.orthogonalStartDragHandleDisposables=this._register(new Je),this.orthogonalEndSashDisposables=this._register(new Je),this.orthogonalEndDragHandleDisposables=this._register(new Je),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Be(e,Ge(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Gn&&this.el.classList.add("mac");const r=this._register(new Ui(this.el,"mousedown")).event;this._register(r(f=>this.onPointerStart(f,new wq),this));const o=this._register(new Ui(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const s=this._register(new Ui(this.el,"mouseenter")).event;this._register(s(()=>Hs.onMouseEnter(this)));const a=this._register(new Ui(this.el,"mouseleave")).event;this._register(a(()=>Hs.onMouseLeave(this))),this._register(Hi.addTarget(this.el));const u=Mt.map(this._register(new Ui(this.el,ur.Start)).event,f=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(u(f=>this.onPointerStart(f,new Sq(this.el)),this));const d=this._register(new Ui(this.el,ur.Tap)).event,h=Mt.map(Mt.filter(Mt.debounce(d,(f,p)=>{var m;return{event:p,count:((m=f==null?void 0:f.count)!==null&&m!==void 0?m:0)+1}},250),({count:f})=>f===2),({event:f})=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=MRe,this._register(PRe.event(f=>{this.size=f,this.layout()}))),this._register(BRe.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",RRe),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Be(this.el,Ge(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Un(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Be(this.el,Ge(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Un(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ni.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const v=this.getOrthogonalSash(e);v&&(n=!0,e.__orthogonalSashEvent=!0,v.onPointerStart(e,new C3(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new C3(t))),!this.state)return;const r=OLe("iframe");for(const v of r)v.style.pointerEvents="none";const o=e.pageX,s=e.pageY,a=e.altKey,u={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(u);const d=uc(this.el),h=()=>{let v="";n?v="all-scroll":this.orientation===1?this.state===1?v="s-resize":this.state===2?v="n-resize":v=Gn?"row-resize":"ns-resize":this.state===1?v="e-resize":this.state===2?v="w-resize":v=Gn?"col-resize":"ew-resize",d.textContent=`* { cursor: ${v} !important; }`},f=new Je;h(),n||this.onDidEnablementChange.event(h,null,f);const p=v=>{Ni.stop(v,!1);const b={startX:o,currentX:v.pageX,startY:s,currentY:v.pageY,altKey:a};this._onDidChange.fire(b)},m=v=>{Ni.stop(v,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const b of r)b.style.pointerEvents="auto"};t.onPointerMove(p,null,f),t.onPointerUp(m,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Hs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Hs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Hs.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const Eq=gi("IEditorCancelService"),Ade=new Dt("cancellableOperation",!1,C("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));U0(Eq,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(r=>{const o=Ade.bindTo(r.get(cn)),s=new ku;return{key:o,tokens:s}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class WRe extends aa{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(Eq).add(e,this))}dispose(){this._unregister(),super.dispose()}}nt(new class extends Ps{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Ade})}runEditorCommand(i,e){i.get(Eq).cancel(e)}});let Ode=class t${constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?ec("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof t$))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new t$(e,this.flags))}};class YA extends WRe{constructor(e,t,n,r){super(e,r),this._listener=new Je,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!n||!Q.containsPosition(n,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!n||!Q.containsRange(n,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class Lq extends aa{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class L0{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}}return new L0(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const Rde={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Vc.text,TERMINALS:"Terminals"};class VRe{constructor(e){this.data=e}update(){}getData(){return this.data}}const Kg={CurrentDragAndDropData:void 0};class kf extends Oe{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof ic&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new zw)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Hi.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,wl&&this._register(qe(e,Ht.DRAG_START,r=>{var o;return(o=r.dataTransfer)===null||o===void 0?void 0:o.setData(Rde.TEXT,this._action.label)}))),this._register(qe(t,ur.Tap,r=>this.onClick(r,!0))),this._register(qe(t,Ht.MOUSE_DOWN,r=>{n||Ni.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),Gn&&this._register(qe(t,Ht.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(qe(t,Ht.CLICK,r=>{Ni.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(qe(t,Ht.DBLCLICK,r=>{Ni.stop(r,!0)})),[Ht.MOUSE_UP,Ht.MOUSE_OUT].forEach(r=>{this._register(qe(t,r,o=>{Ni.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ni.stop(e,!0);const r=xu(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,r)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ZA extends kf{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Be(this.element,Ge("a.action-label"))),this.label&&(this._action.id===Zc.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(Be(this.element,Ge("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var HRe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ug extends Oe{constructor(e,t={}){var n,r,o,s,a,u;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Ce),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Ce({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Ce),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Ce),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(r=this.options.orientation)!==null&&r!==void 0?r:0,this._triggerKeys={keyDown:(s=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&s!==void 0?s:!1,keys:(u=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&u!==void 0?u:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new zw,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(f=>this._onDidRun.fire(f))),this._register(this._actionRunner.onBeforeRun(f=>this._onBeforeRun.fire(f))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let d,h;switch(this._orientation){case 0:d=[15],h=[17];break;case 1:d=[16],h=[18],this.domNode.className+=" vertical";break}this._register(qe(this.domNode,Ht.KEY_DOWN,f=>{const p=new Sr(f);let m=!0;const v=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(p.equals(d[0])||p.equals(d[1]))?m=this.focusPrevious():h&&(p.equals(h[0])||p.equals(h[1]))?m=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?m=this.focusFirst():p.equals(13)?m=this.focusLast():p.equals(2)&&v instanceof kf&&v.trapsArrowNavigation?m=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:m=!1,m&&(p.preventDefault(),p.stopPropagation())})),this._register(qe(this.domNode,Ht.KEY_UP,f=>{const p=new Sr(f);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register($w(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(aw()===this.domNode||!mp(aw(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof kf&&n.isEnabled());t instanceof kf&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof kf&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(mp(aw(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let r=E1(t.index)?t.index:null;n.forEach(o=>{const s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(qe(s,Ht.CONTEXT_MENU,u=>{Ni.stop(u,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new ZA(this.context,o,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof kf&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(s,this.actionsList.children[r]),this.viewItems.splice(r,0,a),this._actionIds.splice(r,0,o.id),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){ri(this.viewItems),this.viewItems=[],this._actionIds=[],$o(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let s=!0;IF(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&IF(o.isEnabled)&&!o.isEnabled()&&(s=!1),s?(n||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof kf){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return HRe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){ri(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const $Re={IconContribution:"base.contributions.icons"};class zRe{constructor(){this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:C("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:C("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Ga.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const u=this.iconReferenceSchema.enum.indexOf(e);u!==-1&&(this.iconReferenceSchema.enumDescriptions[u]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;mr.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of r.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${mr.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of r.filter(s=>!mr.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}const P1=new zRe;Xr.add($Re.IconContribution,P1);function ds(i,e,t,n){return P1.registerIcon(i,e,t,n)}function URe(){return P1}function jRe(){for(const i of TF.all)P1.registerIcon(i.id,i.definition,i.description);TF.onDidRegister(i=>P1.registerIcon(i.id,i.definition,i.description))}jRe();const Mde="vscode://schemas/icons";let Pde=Xr.as(LB.JSONContribution);Pde.registerSchema(Mde,P1.getIconSchema());const Vee=new tr(()=>Pde.notifySchemaChanged(Mde),200);P1.onDidChange(()=>{Vee.isScheduled()||Vee.schedule()});const Fde=ds("widget-close",_e.close,C("widgetClose","Icon for the close action in widgets."));var KRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},GRe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qRe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},d6;const GM=3;class AN{constructor(e,t,n,r){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=r}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class h6{constructor(e){this.entries=e}}const YRe=ds("diff-review-insert",_e.add,C("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),ZRe=ds("diff-review-remove",_e.remove,C("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),XRe=ds("diff-review-close",_e.close,C("diffReviewCloseIcon","Icon for 'Close' in diff review."));let y3=class fb extends Oe{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=ii(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=ii(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ug(this.actionBarContainer.domNode)),this._actionBar.push(new ic("diffreview.close",C("label.close","Close"),"close-diff-review "+mr.asClassName(XRe),!0,()=>qRe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=ii(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=ii(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new pR(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(ts(this.domNode.domNode,"click",n=>{n.preventDefault();let r=uue(n.target,"diff-review-row");r&&this._goToRow(r)})),this._register(ts(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,o=this._diffs.length;r<o;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Ee(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,o=this._diffs.length;r<o;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Ee(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Ee(e,1)),this._diffEditor.revealPosition(new Ee(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:fb._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let r=[],o=0;for(let d=0,h=e.length;d<h;d++){const f=e[d],p=f.originalStartLineNumber,m=f.originalEndLineNumber,v=f.modifiedStartLineNumber,b=f.modifiedEndLineNumber;let E=[],S=0;{const w=m===0?p:p-1,L=b===0?v:v-1;let A=1,N=1;if(d>0){const R=e[d-1];R.originalEndLineNumber===0?A=R.originalStartLineNumber+1:A=R.originalEndLineNumber+1,R.modifiedEndLineNumber===0?N=R.modifiedStartLineNumber+1:N=R.modifiedEndLineNumber+1}let H=w-GM+1,M=L-GM+1;if(H<A){const R=A-H;H=H+R,M=M+R}if(M<N){const R=N-M;H=H+R,M=M+R}E[S++]=new AN(H,w,M,L)}m!==0&&(E[S++]=new AN(p,m,0,0)),b!==0&&(E[S++]=new AN(0,0,v,b));{const w=m===0?p+1:m+1,L=b===0?v+1:b+1;let A=t,N=n;if(d+1<h){const R=e[d+1];R.originalEndLineNumber===0?A=R.originalStartLineNumber:A=R.originalStartLineNumber-1,R.modifiedEndLineNumber===0?N=R.modifiedStartLineNumber:N=R.modifiedStartLineNumber-1}let H=w+GM-1,M=L+GM-1;if(H>A){const R=A-H;H=H+R,M=M+R}if(M>N){const R=N-M;H=H+R,M=M+R}E[S++]=new AN(w,H,L,M)}r[o++]=new h6(E)}let s=r[0].entries,a=[],u=0;for(let d=1,h=r.length;d<h;d++){const f=r[d].entries,p=s[s.length-1],m=f[0];if(p.getType()===0&&m.getType()===0&&m.originalLineStart<=p.originalLineEnd){s[s.length-1]=new AN(p.originalLineStart,m.originalLineEnd,p.modifiedLineStart,m.modifiedLineEnd),s=s.concat(f.slice(1));continue}a[u++]=new h6(s),s=f}return a[u++]=new h6(s),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,r=this._diffs.length;n<r;n++){const o=this._diffs[n].entries,s=o[o.length-1].modifiedLineEnd;if(t<=s)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel(),o=n.getOptions(),s=r.getOptions();if(!this._isVisible||!n||!r){$o(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const u=this._diffs[a].entries;let d=document.createElement("div");d.className="diff-review-table",d.setAttribute("role","list"),d.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Oa.applyFontInfoSlow(d,t.get(43));let h=0,f=0,p=0,m=0;for(let M=0,R=u.length;M<R;M++){const q=u[M],X=q.originalLineStart,$=q.originalLineEnd,I=q.modifiedLineStart,O=q.modifiedLineEnd;X!==0&&(h===0||X<h)&&(h=X),$!==0&&(f===0||$>f)&&(f=$),I!==0&&(p===0||I<p)&&(p=I),O!==0&&(m===0||O>m)&&(m=O)}let v=document.createElement("div");v.className="diff-review-row";let b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const E=f-h+1,S=m-p+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${E} +${p},${S} @@`)),v.setAttribute("data-line",String(p));const w=M=>M===0?C("no_lines_changed","no lines changed"):M===1?C("one_line_changed","1 line changed"):C("more_lines_changed","{0} lines changed",M),L=w(E),A=w(S);v.setAttribute("aria-label",C({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,L,p,A)),v.appendChild(b),v.setAttribute("role","listitem"),d.appendChild(v);const N=t.get(58);let H=p;for(let M=0,R=u.length;M<R;M++){const q=u[M];fb._renderSection(d,q,H,N,this._width,e,n,o,t,r,s,this._modeService.languageIdCodec),q.modifiedLineStart!==0&&(H=q.modifiedLineEnd)}$o(this._content.domNode),this._content.domNode.appendChild(d),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,r,o,s,a,u,d,h,f,p){const m=t.getType();let v="diff-review-row",b="";const E="diff-review-spacer";let S=null;switch(m){case 1:v="diff-review-row line-insert",b=" char-insert",S=YRe;break;case 2:v="diff-review-row line-delete",b=" char-delete",S=ZRe;break}const w=t.originalLineStart,L=t.originalLineEnd,A=t.modifiedLineStart,N=t.modifiedLineEnd,H=Math.max(N-A,L-w),M=s.get(130),R=M.glyphMarginWidth+M.lineNumbersWidth,q=d.get(130),X=10+q.glyphMarginWidth+q.lineNumbersWidth;for(let $=0;$<=H;$++){const I=w===0?0:w+$,O=A===0?0:A+$,B=document.createElement("div");B.style.minWidth=o+"px",B.className=v,B.setAttribute("role","listitem"),O!==0&&(n=O),B.setAttribute("data-line",String(n));let W=document.createElement("div");W.className="diff-review-cell",W.style.height=`${r}px`,B.appendChild(W);const j=document.createElement("span");j.style.width=R+"px",j.style.minWidth=R+"px",j.className="diff-review-line-number"+b,I!==0?j.appendChild(document.createTextNode(String(I))):j.innerText=" ",W.appendChild(j);const U=document.createElement("span");U.style.width=X+"px",U.style.minWidth=X+"px",U.style.paddingRight="10px",U.className="diff-review-line-number"+b,O!==0?U.appendChild(document.createTextNode(String(O))):U.innerText=" ",W.appendChild(U);const G=document.createElement("span");if(G.className=E,S){const K=document.createElement("span");K.className=mr.asClassName(S),K.innerText="  ",G.appendChild(K)}else G.innerText="  ";W.appendChild(G);let z;if(O!==0){let K=this._renderLine(h,d,f.tabSize,O,p);fb._ttPolicy&&(K=fb._ttPolicy.createHTML(K)),W.insertAdjacentHTML("beforeend",K),z=h.getLineContent(O)}else{let K=this._renderLine(a,s,u.tabSize,I,p);fb._ttPolicy&&(K=fb._ttPolicy.createHTML(K)),W.insertAdjacentHTML("beforeend",K),z=a.getLineContent(I)}z.length===0&&(z=C("blankLine","blank"));let k="";switch(m){case 0:I===O?k=C({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",z,I):k=C("equalLine","{0} original line {1} modified line {2}",z,I,O);break;case 1:k=C("insertLine","+ {0} modified line {1}",z,O);break;case 2:k=C("deleteLine","- {0} original line {1}",z,I);break}B.setAttribute("aria-label",k),e.appendChild(B)}}static _renderLine(e,t,n,r,o){const s=e.getLineContent(r),a=t.get(43),u=es.createEmpty(s,o),d=Fu.isBasicASCII(s,e.mightContainNonBasicASCII()),h=Fu.containsRTL(s,d,e.mightContainRTL());return MB(new LC(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,s,!1,d,h,0,u,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==Du.OFF,null)).html}};y3._ttPolicy=(d6=window.trustedTypes)===null||d6===void 0?void 0:d6.createPolicy("diffReview",{createHTML:i=>i});y3=KRe([GRe(1,Fs)],y3);fr((i,e)=>{const t=i.getColor(sde);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(HS);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class QRe extends Lt{constructor(){super({id:"editor.action.diffReview.next",label:C("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Bde(e);n&&n.diffReviewNext()}}class JRe extends Lt{constructor(){super({id:"editor.action.diffReview.prev",label:C("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Bde(e);n&&n.diffReviewPrev()}}function Bde(i){const e=i.get(Ii),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let r=0,o=t.length;r<o;r++){const s=t[r];if(s.getModifiedEditor().getId()===n.getId()||s.getOriginalEditor().getId()===n.getId())return s}return null}it(QRe);it(JRe);const eMe="editorWorkerService",Hu=gi(eMe),Hp=gi("contextViewService"),j0=gi("contextMenuService");var f6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class tMe extends Oe{constructor(e,t,n,r,o,s){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=r,this._contextMenuService=o,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=_e.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),u=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const d=[],h=r.modifiedEndLineNumber===0;d.push(new ic("diff.clipboard.copyDeletedContent",h?r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):C("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):C("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber+1,1),E=r.originalModel.getValueInRange(b);yield this._clipboardService.writeText(E)})));let f=0,p;r.originalEndLineNumber>r.modifiedStartLineNumber&&(p=new ic("diff.clipboard.copyDeletedLineContent",h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=r.originalModel.getLineContent(r.originalStartLineNumber+f);if(b===""){const E=r.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(E===0?`
`:`\r
`)}else yield this._clipboardService.writeText(b)})),d.push(p)),n.getOption(80)||d.push(new ic("diff.inline.revertChange",C("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>f6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber,r.originalModel.getLineMaxColumn(r.originalEndLineNumber)),E=r.originalModel.getValueInRange(b);if(r.modifiedEndLineNumber===0){const S=n.getModel().getLineMaxColumn(r.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,S,r.modifiedStartLineNumber,S),text:u+E}])}else{const S=n.getModel().getLineMaxColumn(r.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,S),text:E}])}})));const v=(b,E)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:b,y:E}),getActions:()=>(p&&(p.label=h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber+f):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber+f)),d),autoSelectFirstItem:!0})};this._register(ts(this._diffActions,"mousedown",b=>{const{top:E,height:S}=Us(this._diffActions);let w=Math.floor(a/3);b.preventDefault(),v(b.posx,E+S+w)})),this._register(n.onMouseMove(b=>{b.target.type===8||b.target.type===5?b.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(b=>{b.event.rightButton&&(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._viewZoneId&&(b.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a),v(b.event.posx,b.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:r}=Us(e),o=t-r,s=Math.floor(o/n),a=s*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let u=0;for(let d=0;d<this.diff.viewLineCounts.length;d++)if(u+=this.diff.viewLineCounts[d],s<u)return d}return s}}const K0=gi("clipboardService");class DC{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}DC.None=Object.freeze({report(){}});const $p=gi("editorProgressService");var nMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Fg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},g6;class Hee{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,r){const o=r?L0.capture(e):null;e.changeViewZones(s=>{var a;for(const u of this._zones)s.removeZone(u);for(const u of this._inlineDiffMargins)u.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let u=0,d=n.zones.length;u<d;u++){const h=n.zones[u];h.suppressMouseDown=!0;const f=s.addZone(h);this._zones.push(f),this._zonesMap[String(f)]=!0,n.zones[u].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=n.zones[u].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new tMe(f,h.marginDomNode,e,n.zones[u].diff,this._contextMenuService,this._clipboardService)))}}),o&&o.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let iMe=0;const rMe=ds("diff-insert",_e.add,C("diffInsertIcon","Line decoration for inserts in the diff editor.")),Wde=ds("diff-remove",_e.remove,C("diffRemoveIcon","Line decoration for removals in the diff editor.")),$ee=(g6=window.trustedTypes)===null||g6===void 0?void 0:g6.createPolicy("diffEditorWidget",{createHTML:i=>i});let x0=class Bs extends Oe{constructor(e,t,n,r,o,s,a,u,d,h,f,p){super(),this._editorProgressService=p,this._onDidDispose=this._register(new Ce),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Ce),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Ce),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=u,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=a.createChild(new KA([cn,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=d,this._notificationService=h,this._id=++iMe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=jee(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new tr(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=ii(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(ts(this._overviewDomElement,"mousedown",v=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(v)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new Hee(f,r),this._modifiedEditorState=new Hee(f,r),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new que(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(y3,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new op(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Uee(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(d.onDidColorThemeChange(v=>{this._strategy&&this._strategy.applyColors(v)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const m=cw.getDiffEditorContributions();for(const v of m)try{this._register(a.createInstance(v.ctor,this))}catch(b){gn(b)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=PF(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const r=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bs.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const r=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bs.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createInnerEditor(e,t,n,r){return e.createInstance(qA,t,n,r)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _R.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=jee(e,this._options),n=lMe(this._options,t);this._options=t;const r=n.ignoreTrimWhitespace||n.renderIndicators,o=this._isVisible&&(n.maxComputationTime||n.maxFileSize);r?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new op(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Uee(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,r=!0){this._modifiedEditor.revealRange(e,t,n,r)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Bs.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Bs.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Bs.ONE_OVERVIEW_WIDTH,right:n+Bs.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Bs.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Bs.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,r=this._options.maxFileSize*1024*1024,o=s=>{const a=s.getValueLength();return r===0||a<=r};if(!o(e)||!o(t)){(!Bs._equals(e.uri,this._lastOriginalWarning)||!Bs._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(C("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=s,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),r=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,r.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,r.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=af.revealHorizontalRightPadding.defaultValue+Bs.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),r=this._strategy.layout();this._originalDomNode.style.width=r+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-r+"px",this._modifiedDomNode.style.left=r+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Bs.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Bs.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Bs.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:r,height:t-n}),this._modifiedEditor.layout({width:e-r-(this._options.renderOverviewRuler?Bs.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),r=Math.max(0,e.height),o=Math.max(0,r-2*0),s=n>0?o/n:0,a=Math.max(0,Math.floor(e.height*s)),u=Math.floor(t*s);return{height:a,top:u}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let r=0,o=n.length-1;for(;r<o;){const s=Math.floor((r+o)/2),a=t(n[s]),u=s+1<=o?t(n[s+1]):1073741824;e<a?o=s-1:e>=u?r=s+1:(r=s,o=s)}return n[r]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=o?r+Math.min(a,s):r+s-o+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-r;return a<=s?n+Math.min(a,o):n+o-s+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};x0.ONE_OVERVIEW_WIDTH=15;x0.ENTIRE_DIFF_OVERVIEW_WIDTH=30;x0.UPDATE_DIFF_DECORATIONS_DELAY=200;x0=nMe([Fg(3,K0),Fg(4,Hu),Fg(5,cn),Fg(6,Nn),Fg(7,Ii),Fg(8,xr),Fg(9,po),Fg(10,j0),Fg(11,$p)],x0);class Vde extends Oe{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(pce)||OH).transparent(2),n=(e.getColor(mce)||RH).transparent(2),r=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,r}getEditorsDiffDecorations(e,t,n,r,o){o=o.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);const s=this._getViewZones(e,r,o,n),a=this._getOriginalEditorDecorations(e,t,n),u=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:u.decorations,overviewZones:u.overviewZones,zones:s.modified}}}}class zee{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Vb{constructor(e,t,n,r,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=r,this._modifiedEditor=o}static _getViewLineCount(e,t,n){const r=e.getModel(),o=e._getViewModel();if(r&&o){const s=XA(r,o,t,n);return s.endLineNumber-s.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(131).wrappingColumn!==-1,r=this._modifiedEditor.getOption(131).wrappingColumn!==-1,o=n||r,s=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,u=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let h=0,f=0,p=0,m=0,v=0,b=0;const E=(H,M)=>H.afterLineNumber-M.afterLineNumber,S=(H,M)=>{if(M.domNode===null&&H.length>0){const R=H[H.length-1];if(R.afterLineNumber===M.afterLineNumber&&R.domNode===null){R.heightInLines+=M.heightInLines;return}}H.push(M)},w=new zee(this._modifiedForeignVZ),L=new zee(this._originalForeignVZ);let A=1,N=1;for(let H=0,M=this._lineChanges.length;H<=M;H++){const R=H<M?this._lineChanges[H]:null;R!==null?(p=R.originalStartLineNumber+(R.originalEndLineNumber>0?-1:0),m=R.modifiedStartLineNumber+(R.modifiedEndLineNumber>0?-1:0),f=R.originalEndLineNumber>0?Vb._getViewLineCount(this._originalEditor,R.originalStartLineNumber,R.originalEndLineNumber):0,h=R.modifiedEndLineNumber>0?Vb._getViewLineCount(this._modifiedEditor,R.modifiedStartLineNumber,R.modifiedEndLineNumber):0,v=Math.max(R.originalStartLineNumber,R.originalEndLineNumber),b=Math.max(R.modifiedStartLineNumber,R.modifiedEndLineNumber)):(p+=1e7+f,m+=1e7+h,v=p,b=m);let q=[],X=[];if(o){let O;R?R.originalEndLineNumber>0?O=R.originalStartLineNumber-A:O=R.modifiedStartLineNumber-N:O=s.getLineCount()-A;for(let B=0;B<O;B++){const W=A+B,j=N+B,U=a.getModelLineViewLineCount(W),G=u.getModelLineViewLineCount(j);U<G?q.push({afterLineNumber:W,heightInLines:G-U,domNode:null,marginDomNode:null}):U>G&&X.push({afterLineNumber:j,heightInLines:U-G,domNode:null,marginDomNode:null})}R&&(A=(R.originalEndLineNumber>0?R.originalEndLineNumber:R.originalStartLineNumber)+1,N=(R.modifiedEndLineNumber>0?R.modifiedEndLineNumber:R.modifiedStartLineNumber)+1)}for(;w.current&&w.current.afterLineNumber<=b;){let O;w.current.afterLineNumber<=m?O=p-m+w.current.afterLineNumber:O=v;let B=null;R&&R.modifiedStartLineNumber<=w.current.afterLineNumber&&w.current.afterLineNumber<=R.modifiedEndLineNumber&&(B=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),q.push({afterLineNumber:O,heightInLines:w.current.height/t,domNode:null,marginDomNode:B}),w.advance()}for(;L.current&&L.current.afterLineNumber<=v;){let O;L.current.afterLineNumber<=p?O=m-p+L.current.afterLineNumber:O=b,X.push({afterLineNumber:O,heightInLines:L.current.height/e,domNode:null}),L.advance()}if(R!==null&&yw(R)){const O=this._produceOriginalFromDiff(R,f,h);O&&q.push(O)}if(R!==null&&ww(R)){const O=this._produceModifiedFromDiff(R,f,h);O&&X.push(O)}let $=0,I=0;for(q=q.sort(E),X=X.sort(E);$<q.length&&I<X.length;){const O=q[$],B=X[I],W=O.afterLineNumber-p,j=B.afterLineNumber-m;W<j?(S(d.original,O),$++):j<W?(S(d.modified,B),I++):O.shouldNotShrink?(S(d.original,O),$++):B.shouldNotShrink?(S(d.modified,B),I++):O.heightInLines>=B.heightInLines?(O.heightInLines-=B.heightInLines,I++):(B.heightInLines-=O.heightInLines,$++)}for(;$<q.length;)S(d.original,q[$]),$++;for(;I<X.length;)S(d.modified,X[I]),I++}return{original:Vb._ensureDomNodes(d.original),modified:Vb._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Hde()),t))}}function ep(i,e,t,n,r){return{range:new Q(i,e,t,n),options:r}}const za={charDelete:Ln.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Ln.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Ln.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Ln.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Ln.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:Ln.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+mr.asClassName(rMe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:Ln.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:Ln.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+mr.asClassName(Wde),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:Ln.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class op extends Vde{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Hs(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?x0.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let r=Math.floor((e||.5)*n);const o=Math.floor(.5*n);return r=this._disableSash?o:r||o,n>op.MINIMUM_EDITOR_WIDTH*2?(r<op.MINIMUM_EDITOR_WIDTH&&(r=op.MINIMUM_EDITOR_WIDTH),r>n-op.MINIMUM_EDITOR_WIDTH&&(r=n-op.MINIMUM_EDITOR_WIDTH)):r=o,this._sashPosition!==r&&(this._sashPosition=r,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?x0.ENTIRE_DIFF_OVERVIEW_WIDTH:0),r=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=r/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new oMe(e,t,n,r,o).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=this._dataSource.getOriginalEditor(),o=String(this._removeColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(ww(d)){s.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:n?za.lineDeleteWithSign:za.lineDelete}),(!yw(d)||!d.charChanges)&&s.decorations.push(ep(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,za.charDeleteWholeLine));const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(ww(f))if(t)for(let p=f.originalStartLineNumber;p<=f.originalEndLineNumber;p++){let m,v;p===f.originalStartLineNumber?m=f.originalStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.originalEndLineNumber?v=f.originalEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(ep(p,m,p,v,za.charDelete))}else s.decorations.push(ep(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn,za.charDelete))}}return s}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(yw(d)){s.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?za.lineInsertWithSign:za.lineInsert}),(!ww(d)||!d.charChanges)&&s.decorations.push(ep(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,za.charInsertWholeLine));const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(yw(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(ep(p,m,p,v,za.charInsert))}else s.decorations.push(ep(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,za.charInsert))}}return s}}op.MINIMUM_EDITOR_WIDTH=100;class oMe extends Vb{constructor(e,t,n,r,o){super(e,t,n,r,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class Uee extends Vde{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,r){const o=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new sMe(e,t,n,o,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=String(this._removeColor),o={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),a=s.getModel(),u=s._getViewModel();for(const d of e)if(ww(d)){o.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:za.lineDeleteMargin});const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);o.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,r))}return o}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(yw(d)){s.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?za.lineInsertWithSign:za.lineInsert});const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(yw(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(ep(p,m,p,v,za.charInsert))}else s.decorations.push(ep(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,za.charInsert))}else s.decorations.push(ep(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,za.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class sMe extends Vb{constructor(e,t,n,r,o,s){super(e,t,n,r,o),this._originalModel=r.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const r=document.createElement("div");return r.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:r}}_produceModifiedFromDiff(e,t,n){const r=document.createElement("div");r.className=`view-lines line-delete ${o1}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:r,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,r=t.get(43),o=t.get(29),s=r.typicalHalfwidthCharacterWidth,a=t.get(92),u=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),h=t.get(58),p=t.get(130).decorationsWidth,m=t.get(104),v=t.get(87),b=t.get(82),E=t.get(44),S=this._lineBreaksComputer.finalize();let w=0;for(let L=0;L<this._pendingLineChange.length;L++){const A=this._pendingLineChange[L],N=this._pendingViewZones[L],H=N.domNode;Oa.applyFontInfoSlow(H,r);const M=N.marginDomNode;Oa.applyFontInfoSlow(M,r);const R=[];if(A.charChanges)for(const j of A.charChanges)ww(j)&&R.push(new M2(new Q(j.originalStartLineNumber,j.originalStartColumn,j.originalEndLineNumber,j.originalEndColumn),"char-delete",0));const q=R.length>0,X=N1(1e4);let $=0,I=0,O=null;for(let j=A.originalStartLineNumber;j<=A.originalEndLineNumber;j++){const U=j-A.originalStartLineNumber,G=this._originalModel.getLineTokens(j),z=G.getLineContent(),k=S[w++],K=Nu.filter(R,j,1,z.length+1);if(k){let fe=0;for(const be of k.breakOffsets){const De=G.sliceAndInflate(fe,be,0),Ve=z.substring(fe,be);$=Math.max($,this._renderOriginalLine(I++,Ve,De,Nu.extractWrapped(K,fe,be),q,u,d,r,o,h,p,m,v,b,E,n,X,M)),fe=be}for(O||(O=[]);O.length<U;)O[O.length]=1;O[U]=k.breakOffsets.length,N.heightInLines+=k.breakOffsets.length-1;const ne=document.createElement("div");ne.className="line-delete",e.original.push({afterLineNumber:j,afterColumn:0,heightInLines:k.breakOffsets.length-1,domNode:Hde(),marginDomNode:ne})}else $=Math.max($,this._renderOriginalLine(I++,z,G,K,q,u,d,r,o,h,p,m,v,b,E,n,X,M))}$+=a;const B=X.build(),W=$ee?$ee.createHTML(B):B;if(H.innerHTML=W,N.minWidthInPx=$*s,O){const j=A.originalEndLineNumber-A.originalStartLineNumber;for(;O.length<=j;)O[O.length]=1}N.diff.viewLineCounts=O}e.original.sort((L,A)=>L.afterLineNumber-A.afterLineNumber)}_renderOriginalLine(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,E,S,w){S.appendASCIIString('<div class="view-line'),o||S.appendASCIIString(" char-delete"),S.appendASCIIString('" style="top:'),S.appendASCIIString(String(e*h)),S.appendASCIIString('px;width:1000000px;">');const L=Fu.isBasicASCII(t,s),A=Fu.containsRTL(t,L,a),N=RB(new LC(u.isMonospace&&!d,u.canUseHalfwidthRightwardsArrow,t,!1,L,A,0,n,r,E,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,p,m,v,b!==Du.OFF,null),S);if(S.appendASCIIString("</div>"),this._renderIndicators){const H=document.createElement("div");H.className=`delete-sign ${mr.asClassName(Wde)}`,H.setAttribute("style",`position:absolute;top:${e*h}px;width:${f}px;height:${h}px;right:0;`),w.appendChild(H)}return N.characterMapping.getAbsoluteOffset(N.characterMapping.length)}}function aMe(i,e){return Ka(i,e,["off","on","inherit"])}function yw(i){return i.modifiedEndLineNumber>0}function ww(i){return i.originalEndLineNumber>0}function Hde(){const i=document.createElement("div");return i.className="diagonal-fill",i}function XA(i,e,t,n){const r=i.getLineCount();return t=Math.min(r,Math.max(1,t)),n=Math.min(r,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new Q(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function jee(i,e){return{enableSplitViewResizing:Zt(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Zt(i.renderSideBySide,e.renderSideBySide),maxComputationTime:xH(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:xH(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Zt(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Zt(i.renderIndicators,e.renderIndicators),originalEditable:Zt(i.originalEditable,e.originalEditable),diffCodeLens:Zt(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Zt(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:aMe(i.diffWordWrap,e.diffWordWrap)}}function lMe(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}fr((i,e)=>{const t=i.getColor(pce);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor(mce);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const r=i.getColor(LTe);r&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const o=i.getColor(xTe);o&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${o}; }`);const s=i.getColor(HS);s&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${s}; }`);const a=i.getColor(DTe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const u=i.getColor(fw);u&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${u};
			}
		`);const d=i.getColor(gw);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${d};
			}
		`);const h=i.getColor(pw);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const f=i.getColor(TTe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${f} 12.5%,
			#0000 12.5%, #0000 50%,
			${f} 50%, ${f} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});function cg(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_R.ICodeEditor:!1}function $de(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_R.IDiffEditor:!1}function zde(i){return cg(i)?i:$de(i)?i.getModifiedEditor():null}const xq=gi("IWorkspaceEditService");function uMe(i){return Ya(i)&&(!!i.newUri||!!i.oldUri)}function cMe(i){return Ya(i)&&rn.isUri(i.resource)&&Ya(i.edit)}class XB{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(cMe(t))return new Ude(t.resource,t.edit,t.modelVersionId,t.metadata);if(uMe(t))return new dMe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class Ude extends XB{constructor(e,t,n,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}}class dMe extends XB{constructor(e,t,n,r){super(r),this.oldResource=e,this.newResource=t,this.options=n}}class jr{static insert(e,t){return{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Gu{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?ONe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Xg(this.contents),n=Xg(this.overrides),r=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const s of o.overrides){const[a]=n.filter(u=>rc(u.identifiers,s.identifiers));a?(this.mergeContents(a.contents,s.contents),a.keys.push(...s.keys),a.keys=x1(a.keys)):n.push(Xg(s))}for(const s of o.keys)r.indexOf(s)===-1&&r.push(s)}return new Gu(t,r,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const r of x1([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[r],s=t[r];s&&(typeof o=="object"&&typeof s=="object"?(o=Xg(o),this.mergeContents(o,s)):o=s),n[r]=o}return new Gu(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Ya(e[n])&&Ya(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Xg(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Mxe(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const r=o=>{o&&(n?this.mergeContents(n,o):n=Xg(o))};for(const o of this.overrides)rc(o.identifiers,[e])?t=o.contents:o.identifiers.includes(e)&&r(o.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),iq(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&ANe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class hMe extends Gu{constructor(e={}){const t=Xr.as(SC.Configuration).getConfigurationProperties(),n=Object.keys(t),r=Object.create(null),o=[];for(const s in t){const a=e[s],u=a!==void 0?a:t[s].default;iq(r,s,u,d=>console.error(`Conflict in default settings: ${d}`))}for(const s of Object.keys(r))LA.test(s)&&o.push({identifiers:Zue(s),keys:Object.keys(r[s]),contents:Qce(r[s],a=>console.error(`Conflict in default settings file: ${a}`))});super(r,n,o)}}class QB{constructor(e,t,n=new Gu,r=new Gu,o=new na,s=new Gu,a=new na,u=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new na,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new Gu,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);const o=this._memoryConfigurationByResource.get(e);o&&(n=n.merge(o))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:r,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),o=e.folders.reduce((s,a)=>(s.set(rn.revive(a[0]),this.parseConfigurationModel(a[1])),s),new na);return new QB(t,n,new Gu,r,o,new Gu,new na,!1)}static parseConfigurationModel(e){return new Gu(e.contents,e.keys,e.overrides).freeze()}}class fMe{constructor(e,t,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this._previousConfiguration=void 0;const o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(u=>o.add(u))),this.affectedKeys=[...o.values()];const s=new Gu;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=QB.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const r=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Qc(r,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Qce({[t]:!0},()=>{}),r;for(;typeof n=="object"&&(r=Object.keys(n)[0]);){if(e=e[r],!e)return!1;n=n[r]}return!0}}const gMe=/^(cursor|delete)/;class pMe extends Oe{constructor(e,t,n,r,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=o,this._onDidUpdateKeybindings=this._register(new Ce),this._currentChord=null,this._currentChordChecker=new sR,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Hy.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ma,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Mt.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[r]=n.getDispatchParts();if(r===null)return null;const o=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,s,r)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(C("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchParts();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Hy.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Hy.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=n.getParts();return this._ignoreSingleModifiers=new Hy(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let r=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,s=null;if(n){const[h]=e.getSingleModifierDispatchParts();o=h,s=h}else[o]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const a=this._contextKeyService.getContext(t),u=e.getLabel(),d=this._getResolver().resolve(a,s,o);return this._logService.trace("KeybindingService#dispatch",u,d==null?void 0:d.commandId),d&&d.enterChord?(r=!0,this._enterChordMode(o,u),r):(this._currentChord&&(!d||!d.commandId)&&(this._notificationService.status(C("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,u),{hideAfter:10*1e3}),r=!0),this._leaveChordMode(),d&&d.commandId&&(d.bubble||(r=!0),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,h=>this._notificationService.warn(h)),gMe.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding"})),r)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Hy{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Hy.EMPTY=new Hy(null);class Sw{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let r=0,o=e.length;r<o;r++){const s=e[r].command;s&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Sw.combine(e,t);for(let r=0,o=this._keybindings.length;r<o;r++){let s=this._keybindings[r];s.keypressParts.length!==0&&(s.when&&s.when.type===0||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(e,t,n,r,o){return!(e.command!==r||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||o&&(!e.when||!hxe(o,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const r of t){if(!r.command||r.command.length===0||r.command.charAt(0)!=="-"){n.push(r);continue}const o=r.command.substr(1),s=r.keypressParts[0],a=r.keypressParts[1],u=r.when;for(let d=e.length-1;d>=0;d--)this._isTargetedForRemoval(e[d],s,a,o,u)&&e.splice(d,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=n.length-1;r>=0;r--){let o=n[r];if(o.command===t.command)continue;const s=o.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&o.keypressParts[1]!==t.keypressParts[1]||Sw.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:Due(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let r=n.length-1;r>=0;r--){const o=n[r];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let r=null;if(t!==null){const s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;r=[];for(let a=0,u=s.length;a<u;a++){let d=s[a];d.keypressParts[1]===n&&r.push(d)}}else{const s=this._map.get(n);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;r=s}let o=this._findCommand(e,r);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${r.length} keybinding entries, matched chord, when: ${Kee(o.when)}, source: ${Gee(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${r.length} keybinding entries, matched ${o.command}, when: ${Kee(o.when)}, source: ${Gee(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let r=t[n];if(Sw.contextMatchesRules(e,r.when))return r}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function Kee(i){return i?`${i.serialize()}`:"no when condition"}function Gee(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class qee{constructor(e,t,n,r,o,s,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?n$(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=n$(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}}function n$(i){let e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(!r)return e;e.push(r)}return e}class Dq{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=n(a);if(u===null)return null;r[o]=vMe(a,u,this.modifierLabels[e])}return r.join(" ")}}const Tq=new Dq({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),mMe=new Dq({ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:C({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),_Me=new Dq({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function vMe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class bMe extends UEe{constructor(e,t){if(super(),t.length===0)throw jh("parts");this._os=e,this._parts=t}getLabel(){return Tq.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return mMe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:_Me.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new zEe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class QA extends bMe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Mb.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Mb.toString(e.keyCode)}_getElectronAccelerator(e){return Mb.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return QA.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Mb.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=sG[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof y1)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new y1(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=n$(e.map(r=>this._resolveSimpleUserBinding(r)));return n.length>0?[new QA(new yF(n),t)]:[]}}const jde=gi("contextService");class CMe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var bo;(function(i){i.noSelection=C("noSelection","No selection"),i.singleSelectionRange=C("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=C("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=C("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=C("multiSelection","{0} selections"),i.emergencyConfOn=C("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=C("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=C("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=C("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=C("readonlyEditor"," in a read-only code editor"),i.editableEditor=C("editableEditor"," in a code editor"),i.changeConfigToOnMac=C("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=C("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=C("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=C("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=C("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=C("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=C("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=C("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=C("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=C("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=C("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=C("showAccessibilityHelpAction","Show Accessibility Help")})(bo||(bo={}));var i$;(function(i){i.inspectTokensAction=C("inspectTokens","Developer: Inspect Tokens")})(i$||(i$={}));var w3;(function(i){i.gotoLineActionLabel=C("gotoLineActionLabel","Go to Line/Column...")})(w3||(w3={}));var r$;(function(i){i.helpQuickAccessActionLabel=C("helpQuickAccess","Show all Quick Access Providers")})(r$||(r$={}));var JA;(function(i){i.quickCommandActionLabel=C("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=C("quickCommandActionHelp","Show And Run Commands")})(JA||(JA={}));var eO;(function(i){i.quickOutlineActionLabel=C("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=C("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(eO||(eO={}));var S3;(function(i){i.editorViewAccessibleLabel=C("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=C("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(S3||(S3={}));var o$;(function(i){i.toggleHighContrast=C("toggleHighContrast","Toggle High Contrast Theme")})(o$||(o$={}));var s$;(function(i){i.bulkEditServiceSummary=C("bulkEditServiceSummary","Made {0} edits in {1} files")})(s$||(s$={}));var Kde=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Gde=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qde=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class yMe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Ce}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function wMe(i,e,t){return cg(i)?e(i):t(i)}let E3=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=wMe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new kEe(new yMe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};E3=Kde([Gde(0,To)],E3);class JB{show(){return JB.NULL_PROGRESS_RUNNER}showWhile(e,t){return qde(this,void 0,void 0,function*(){yield e})}}JB.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class SMe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,r){return Promise.resolve({choice:0})}}class e8{info(e){return this.notify({severity:Ur.Info,message:e})}warn(e){return this.notify({severity:Ur.Warning,message:e})}error(e){return this.notify({severity:Ur.Error,message:e})}notify(e){switch(e.severity){case Ur.Error:console.error(e.message);break;case Ur.Warning:console.warn(e.message);break;default:console.log(e.message);break}return e8.NO_OP}status(e,t){return Oe.None}}e8.NO_OP=new mRe;class EMe{constructor(e){this._onWillExecuteCommand=new Ce,this._onDidExecuteCommand=new Ce,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Xn.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}}class Yde extends pMe{constructor(e,t,n,r,o,s){super(e,t,n,r,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(qe(s,Ht.KEY_DOWN,a=>{const u=new Sr(a);this._dispatch(u,u.target)&&(u.preventDefault(),u.stopPropagation())})),this._register(qe(window,Ht.KEY_UP,a=>{const u=new Sr(a);this._singleModifierDispatch(u,u.target)&&u.preventDefault()}))}addDynamicKeybinding(e,t,n,r){const o=cH(t,qu),s=new Je;return o&&(this._dynamicKeybindings.push({keybinding:o.parts,command:e,when:r,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(Un(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),s.add(Xn.registerCommand(e,n)),this.updateResolver({source:1}),s}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Os.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Sw(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],r=0;for(const o of e){const s=o.when||void 0,a=o.keybinding;if(!a)n[r++]=new qee(void 0,o.command,o.commandArgs,s,t,null,!1);else{const u=QA.resolveUserBinding(a,qu);for(const d of u)n[r++]=new qee(d,o.command,o.commandArgs,s,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new y1(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new QA(t,qu)}}function Yee(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof rn)}class Zde{constructor(){this._onDidChangeConfiguration=new Ce,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new QB(new hMe,new Gu)}getValue(e,t){const n=typeof e=="string"?e:void 0,r=Yee(e)?e:Yee(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const r of e){const[o,s]=r;this.getValue(o)!==s&&(this._configuration.updateValue(o,s),n.push(o))}if(n.length>0){const r=new fMe({keys:n,overrides:[]},t,this._configuration);r.source=7,r.sourceConfig=null,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}}class LMe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Ce,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,r)=>t.affectsConfiguration(r)})})}getValue(e,t,n){const o=(Ee.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)}}let a$=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Qa||Gn?`
`:`\r
`}};a$=Kde([Gde(0,ir)],a$);class xMe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class t8{constructor(){const e=rn.from({scheme:t8.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new CMe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}t8.SCHEME="inmemory";function L3(i,e,t){if(!e||!(i instanceof Zde))return;let n=[];Object.keys(e).forEach(r=>{HDe(r)&&n.push([`editor.${r}`,e[r]]),t&&$De(r)&&n.push([`diffEditor.${r}`,e[r]])}),n.length>0&&i.updateValues(n)}class DMe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return qde(this,void 0,void 0,function*(){const n=new Map;for(let s of e){if(!(s instanceof Ude))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(s.resource);if(!a)throw new Error("bad edit - model not found");if(typeof s.versionId=="number"&&a.getVersionId()!==s.versionId)throw new Error("bad state - model changed in the meantime");let u=n.get(a);u||(u=[],n.set(a,u)),u.push(jr.replaceMove(Q.lift(s.textEdit.range),s.textEdit.text))}let r=0,o=0;for(const[s,a]of n)s.pushStackElement(),s.pushEditOperations([],a,()=>[]),s.pushStackElement(),o+=1,r+=a.length;return{ariaSummary:ec(s$.bulkEditServiceSummary,r,o)}})}}class TMe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class Xde{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Mt.None}get dimension(){return this._dimension||(this._dimension=dB(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}class IMe{constructor(){this._neverEmitter=new Ce,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}const G0=gi("themeService"),Er=gi("keybindingService");class kMe extends Oe{constructor(){super(),this._onCodeEditorAdd=this._register(new Ce),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Ce),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Ce),this._onDiffEditorRemove=this._register(new Ce),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const r=e.toString();let o;this._modelProperties.has(r)?o=this._modelProperties.get(r):(o=new Map,this._modelProperties.set(r,o)),o.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var NMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},AMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let l$=class extends kMe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._globalStyleSheet=e||null,this._themeService=t}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}};l$=NMe([AMe(1,xr)],l$);var OMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Zee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let x3=class extends l${constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===In.http||o===In.https)return gue(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const o={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};x3=OMe([Zee(1,cn),Zee(2,xr)],x3);var Iq=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},yr=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let RMe=0,Xee=!1;function MMe(i){if(!i){if(Xee)return;Xee=!0}PLe(i||document.body)}let D3=class extends qA{constructor(e,t,n,r,o,s,a,u,d,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||S3.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+S3.accessibilityHelpMessage,super(e,f,{},n,r,o,s,u,d,h),a instanceof Yde?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,MMe(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let r="DYNAMIC_"+ ++RMe,o=_t.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,o),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Oe.None;const t=e.id,n=e.label,r=_t.and(_t.equals("editorId",this.getId()),_t.deserialize(e.precondition)),o=e.keybindings,s=_t.and(r,_t.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,u=e.contextMenuOrder||0,d=(m,...v)=>Promise.resolve(e.run(this,...v)),h=new Je,f=this.getId()+":"+t;if(h.add(Xn.registerCommand(f,d)),a){let m={command:{id:f,title:n},when:r,group:a,order:u};h.add(ra.appendMenuItem(Rt.EditorContext,m))}if(Array.isArray(o))for(const m of o)h.add(this._standaloneKeybindingService.addDynamicKeybinding(f,m,d,s));let p=new Tde(f,n,n,r,d,this._contextKeyService);return this._actions[t]=p,h.add(Un(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof x3)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};D3=Iq([yr(2,Nn),yr(3,Ii),yr(4,Ir),yr(5,cn),yr(6,Er),yr(7,xr),yr(8,po),yr(9,rl)],D3);let tO=class extends D3{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const E=Object.assign({},t);L3(p,E,!1);const S=h.registerEditorContainer(e);typeof E.theme=="string"&&h.setTheme(E.theme),typeof E.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!E.autoDetectHighContrast);let w=E.model;delete E.model,super(e,E,r,o,s,a,u,h,f,m),this._contextViewService=d,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S);let L;if(typeof w>"u"?(L=Qde(v,b,E.value||"",E.language||Vc.text,void 0),this._ownsModel=!0):(L=w,this._ownsModel=!1),this._attachModel(L),L){let A={oldModelUrl:null,newModelUrl:L.uri};this._onDidChangeModel.fire(A)}}dispose(){super.dispose()}updateOptions(e){L3(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};tO=Iq([yr(3,Nn),yr(4,Ii),yr(5,Ir),yr(6,cn),yr(7,Er),yr(8,Hp),yr(9,G0),yr(10,po),yr(11,ir),yr(12,rl),yr(13,To),yr(14,Fs)],tO);let u$=class extends x0{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const E=Object.assign({},t);L3(p,E,!0);const S=h.registerEditorContainer(e);typeof E.theme=="string"&&h.setTheme(E.theme),typeof E.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!E.autoDetectHighContrast),super(e,E,{},b,u,o,r,d,h,f,m,v),this._contextViewService=a,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){L3(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(D3,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};u$=Iq([yr(3,Nn),yr(4,cn),yr(5,Er),yr(6,Hp),yr(7,Hu),yr(8,Ii),yr(9,G0),yr(10,po),yr(11,ir),yr(12,j0),yr(13,$p),yr(14,K0)],u$);function Qde(i,e,t,n,r){if(t=t||"",!n){const o=t.indexOf(`
`);let s=t;return o!==-1&&(s=t.substring(0,o)),Qee(i,t,e.createByFilepathOrFirstLine(r||null,s),r)}return Qee(i,t,e.create(n),r)}function Qee(i,e,t,n){return i.createModel(e,t,n)}const PMe="$initialize";let Jee=!1;function c$(i){PS&&(Jee||(Jee=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class FMe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.method=n,this.args=r,this.type=0}}class ete{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=1}}class BMe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=r,this.type=2}}class WMe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class VMe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class HMe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[n]={resolve:r,reject:o},this._send(new FMe(this._workerId,n,e,t))})}listen(e,t){let n=null;const r=new Ce({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new BMe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new VMe(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(r=>{this._send(new ete(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=YQ(r.detail)),this._send(new ete(this._workerId,t,void 0,YQ(r)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(r=>{this._send(new WMe(this._workerId,t,r))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class $Me extends Oe{constructor(e,t,n){super();let r=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{r&&r(d)})),this._protocol=new HMe({sendMessage:(d,h)=>{this._worker.postMessage(d,h)},handleMessage:(d,h)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,h))}catch(f){return Promise.reject(f)}},handleEvent:(d,h)=>{if(ehe(d)){const f=n[d].call(n,h);if(typeof f!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return f}if(Jde(d)){const f=n[d];if(typeof f!="function")throw new Error(`Missing event ${d} on main thread host.`);return f}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof Yr.require<"u"&&typeof Yr.require.getConfig=="function"?o=Yr.require.getConfig():typeof Yr.requirejs<"u"&&(o=Yr.requirejs.s.contexts._.config);const s=pG(n);this._onModuleLoaded=this._protocol.sendMessage(PMe,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,s]);const a=(d,h)=>this._request(d,h),u=(d,h)=>this._protocol.listen(d,h);this._lazyProxy=new Promise((d,h)=>{r=h,this._onModuleLoaded.then(f=>{d(zMe(f,a,u))},f=>{h(f),this._onError("Worker failed to load "+t,f)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,r)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,r)},r)})}_onError(e,t){console.error(e),console.info(t)}}function Jde(i){return i[0]==="o"&&i[1]==="n"&&Tf(i.charCodeAt(2))}function ehe(i){return/^onDynamic/.test(i)&&Tf(i.charCodeAt(9))}function zMe(i,e,t){const n=s=>function(){const a=Array.prototype.slice.call(arguments,0);return e(s,a)},r=s=>function(a){return t(s,a)};let o={};for(const s of i){if(ehe(s)){o[s]=r(s);continue}if(Jde(s)){o[s]=t(s,void 0);continue}o[s]=n(s)}return o}var p6;const tte=(p6=window.trustedTypes)===null||p6===void 0?void 0:p6.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function UMe(i,e){if(Yr.MonacoEnvironment){if(typeof Yr.MonacoEnvironment.getWorker=="function")return Yr.MonacoEnvironment.getWorker(i,e);if(typeof Yr.MonacoEnvironment.getWorkerUrl=="function"){const t=Yr.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(tte?tte.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function jMe(i){return typeof i.then=="function"}class KMe{constructor(e,t,n,r,o){this.id=t;const s=UMe("workerMain.js",n);jMe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(u){r(u.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class n8{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let r=++n8.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new KMe(e,r,this._label||"anonymous"+r,t,o=>{c$(o),this._webWorkerFailedBeforeError=o,n(o)})}}n8.LAST_WORKER_ID=0;class Lv{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class nte{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}}function GMe(i,e,t){return new Bf(new nte(i),new nte(e)).ComputeDiff(t).changes}class QC{static Assert(e,t){if(!e)throw new Error(t)}}class JC{static Copy(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}static Copy2(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}}class ite{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Lv(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Bf{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[r,o,s]=Bf._getElements(e),[a,u,d]=Bf._getElements(t);this._hasStrings=s&&d,this._originalStringElements=r,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Bf._isStringArray(t)){const n=new Int32Array(t.length);for(let r=0,o=t.length;r<o;r++)n[r]=YG(t[r],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Bf._getStrictElement(this._originalSequence,e),r=Bf._getStrictElement(this._modifiedSequence,t);return n===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,o){const s=[!1];let a=this.ComputeDiffRecursive(e,t,n,r,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,r,o){for(o[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let f;return n<=r?(QC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new Lv(e,0,n,r-n+1)]):e<=t?(QC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[new Lv(e,t-e+1,n,0)]):(QC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),QC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const s=[0],a=[0],u=this.ComputeRecursionPoint(e,t,n,r,s,a,o),d=s[0],h=a[0];if(u!==null)return u;if(!o[0]){const f=this.ComputeDiffRecursive(e,d,n,h,o);let p=[];return o[0]?p=[new Lv(d+1,t-(d+1)+1,h+1,r-(h+1)+1)]:p=this.ComputeDiffRecursive(d+1,t,h+1,r,o),this.ConcatenateChanges(f,p)}return[new Lv(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,E,S,w){let L=null,A=null,N=new ite,H=t,M=n,R=m[0]-E[0]-r,q=-1073741824,X=this.m_forwardHistory.length-1;do{const $=R+e;$===H||$<M&&d[$-1]<d[$+1]?(f=d[$+1],v=f-R-r,f<q&&N.MarkNextChange(),q=f,N.AddModifiedElement(f+1,v),R=$+1-e):(f=d[$-1]+1,v=f-R-r,f<q&&N.MarkNextChange(),q=f-1,N.AddOriginalElement(f,v+1),R=$-1-e),X>=0&&(d=this.m_forwardHistory[X],e=d[0],H=1,M=d.length-1)}while(--X>=-1);if(L=N.getReverseChanges(),w[0]){let $=m[0]+1,I=E[0]+1;if(L!==null&&L.length>0){const O=L[L.length-1];$=Math.max($,O.getOriginalEnd()),I=Math.max(I,O.getModifiedEnd())}A=[new Lv($,p-$+1,I,b-I+1)]}else{N=new ite,H=s,M=a,R=m[0]-E[0]-u,q=1073741824,X=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const $=R+o;$===H||$<M&&h[$-1]>=h[$+1]?(f=h[$+1]-1,v=f-R-u,f>q&&N.MarkNextChange(),q=f+1,N.AddOriginalElement(f+1,v+1),R=$+1-o):(f=h[$-1],v=f-R-u,f>q&&N.MarkNextChange(),q=f,N.AddModifiedElement(f+1,v+1),R=$-1-o),X>=0&&(h=this.m_reverseHistory[X],o=h[0],H=1,M=h.length-1)}while(--X>=-1);A=N.getChanges()}return this.ConcatenateChanges(L,A)}ComputeRecursionPoint(e,t,n,r,o,s,a){let u=0,d=0,h=0,f=0,p=0,m=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const v=t-e+(r-n),b=v+1,E=new Int32Array(b),S=new Int32Array(b),w=r-n,L=t-e,A=e-n,N=t-r,M=(L-w)%2===0;E[w]=e,S[L]=t,a[0]=!1;for(let R=1;R<=v/2+1;R++){let q=0,X=0;h=this.ClipDiagonalBound(w-R,R,w,b),f=this.ClipDiagonalBound(w+R,R,w,b);for(let I=h;I<=f;I+=2){I===h||I<f&&E[I-1]<E[I+1]?u=E[I+1]:u=E[I-1]+1,d=u-(I-w)-A;const O=u;for(;u<t&&d<r&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(E[I]=u,u+d>q+X&&(q=u,X=d),!M&&Math.abs(I-L)<=R-1&&u>=S[I])return o[0]=u,s[0]=d,O<=S[I]&&1447>0&&R<=1447+1?this.WALKTRACE(w,h,f,A,L,p,m,N,E,S,u,t,o,d,r,s,M,a):null}const $=(q-e+(X-n)-R)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(q,$))return a[0]=!0,o[0]=q,s[0]=X,$>0&&1447>0&&R<=1447+1?this.WALKTRACE(w,h,f,A,L,p,m,N,E,S,u,t,o,d,r,s,M,a):(e++,n++,[new Lv(e,t-e+1,n,r-n+1)]);p=this.ClipDiagonalBound(L-R,R,L,b),m=this.ClipDiagonalBound(L+R,R,L,b);for(let I=p;I<=m;I+=2){I===p||I<m&&S[I-1]>=S[I+1]?u=S[I+1]-1:u=S[I-1],d=u-(I-L)-N;const O=u;for(;u>e&&d>n&&this.ElementsAreEqual(u,d);)u--,d--;if(S[I]=u,M&&Math.abs(I-w)<=R&&u<=E[I])return o[0]=u,s[0]=d,O>=E[I]&&1447>0&&R<=1447+1?this.WALKTRACE(w,h,f,A,L,p,m,N,E,S,u,t,o,d,r,s,M,a):null}if(R<=1447){let I=new Int32Array(f-h+2);I[0]=w-h+1,JC.Copy2(E,h,I,1,f-h+1),this.m_forwardHistory.push(I),I=new Int32Array(m-p+2),I[0]=L-p+1,JC.Copy2(S,p,I,1,m-p+1),this.m_reverseHistory.push(I)}}return this.WALKTRACE(w,h,f,A,L,p,m,N,E,S,u,t,o,d,r,s,M,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let u=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],u)){e[t]=u[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let r=0,o=0;if(t>0){const f=e[t-1];r=f.originalStart+f.originalLength,o=f.modifiedStart+f.modifiedLength}const s=n.originalLength>0,a=n.modifiedLength>0;let u=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let f=1;;f++){const p=n.originalStart-f,m=n.modifiedStart-f;if(p<r||m<o||s&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+n.modifiedLength))break;const b=(p===r&&m===o?5:0)+this._boundaryScore(p,n.originalLength,m,n.modifiedLength);b>d&&(d=b,u=f)}n.originalStart-=u,n.modifiedStart-=u;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const r=e[t-1],o=e[t],s=o.originalStart-r.originalStart-r.originalLength,a=r.originalStart,u=o.originalStart+o.originalLength,d=u-a,h=r.modifiedStart,f=o.modifiedStart+o.modifiedLength,p=f-h;if(s<5&&d<20&&p<20){const m=this._findBetterContiguousSequence(a,d,h,p,s);if(m){const[v,b]=m;(v!==r.originalStart+r.originalLength||b!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=v-r.originalStart,r.modifiedLength=b-r.modifiedStart,o.originalStart=v+s,o.modifiedStart=b+s,o.originalLength=u-o.originalStart,o.modifiedLength=f-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,o){if(t<o||r<o)return null;const s=e+t-o+1,a=n+r-o+1;let u=0,d=0,h=0;for(let f=e;f<s;f++)for(let p=n;p<a;p++){const m=this._contiguousSequenceScore(f,p,o);m>0&&m>u&&(u=m,d=f,h=p)}return u>0?[d,h]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;r+=this._originalStringElements[e+o].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){const o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,r)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const r=new Array(e.length+t.length-1);return JC.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],JC.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return JC.Copy(e,0,r,0,e.length),JC.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,n){if(QC.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),QC.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let o=e.originalLength;const s=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Lv(r,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;const o=n,s=r-n-1,a=t%2===0;if(e<0){const u=o%2===0;return a===u?0:1}else{const u=s%2===0;return a===u?r-1:r-2}}}const qMe=3;function the(i,e,t,n){return new Bf(i,e,t).ComputeDiff(n)}class rte{constructor(e){const t=[],n=[];for(let r=0,o=e.length;r<o;r++)t[r]=d$(e[r],1),n[r]=h$(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const r=[],o=[],s=[];let a=0;for(let u=t;u<=n;u++){const d=this.lines[u],h=e?this._startColumns[u]:1,f=e?this._endColumns[u]:d.length+1;for(let p=h;p<f;p++)r[a]=d.charCodeAt(p-1),o[a]=u+1,s[a]=p,a++}return new YMe(r,o,s)}}class YMe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class nO{constructor(e,t,n,r,o,s,a,u){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=r,this.modifiedStartLineNumber=o,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=u}static createFromDiffChange(e,t,n){let r,o,s,a,u,d,h,f;return e.originalLength===0?(r=0,o=0,s=0,a=0):(r=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(u=0,d=0,h=0,f=0):(u=n.getStartLineNumber(e.modifiedStart),d=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new nO(r,o,s,a,u,d,h,f)}}function ZMe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,r=i.length;n<r;n++){const o=i[n],s=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(s,a)<qMe?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class V2{constructor(e,t,n,r,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=r,this.charChanges=o}static createFromDiffResult(e,t,n,r,o,s,a){let u,d,h,f,p;if(t.originalLength===0?(u=n.getStartLineNumber(t.originalStart)-1,d=0):(u=n.getStartLineNumber(t.originalStart),d=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=r.getStartLineNumber(t.modifiedStart)-1,f=0):(h=r.getStartLineNumber(t.modifiedStart),f=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const m=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),v=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let b=the(m,v,o,!0).changes;a&&(b=ZMe(b)),p=[];for(let E=0,S=b.length;E<S;E++)p.push(nO.createFromDiffChange(b[E],m,v))}return new V2(u,d,h,f,p)}}class XMe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new rte(e),this.modified=new rte(t),this.continueLineDiff=ote(n.maxComputationTime),this.continueCharDiff=ote(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=the(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let u=0,d=t.length;u<d;u++)a.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[u],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const r=[];let o=0,s=0;for(let a=-1,u=t.length;a<u;a++){const d=a+1<u?t[a+1]:null,h=d?d.originalStart:this.originalLines.length,f=d?d.modifiedStart:this.modifiedLines.length;for(;o<h&&s<f;){const p=this.originalLines[o],m=this.modifiedLines[s];if(p!==m){{let v=d$(p,1),b=d$(m,1);for(;v>1&&b>1;){const E=p.charCodeAt(v-2),S=m.charCodeAt(b-2);if(E!==S)break;v--,b--}(v>1||b>1)&&this._pushTrimWhitespaceCharChange(r,o+1,1,v,s+1,1,b)}{let v=h$(p,1),b=h$(m,1);const E=p.length+1,S=m.length+1;for(;v<E&&b<S;){const w=p.charCodeAt(v-1),L=p.charCodeAt(b-1);if(w!==L)break;v++,b++}(v<E||b<S)&&this._pushTrimWhitespaceCharChange(r,o+1,v,E,s+1,b,S)}}o++,s++}d&&(r.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=d.originalLength,s+=d.modifiedLength)}return{quitEarly:n,changes:r}}_pushTrimWhitespaceCharChange(e,t,n,r,o,s,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,r,o,s,a))return;let u;this.shouldComputeCharChanges&&(u=[new nO(t,n,t,r,o,s,o,a)]),e.push(new V2(t,t,o,o,u))}_mergeTrimWhitespaceCharChange(e,t,n,r,o,s,a){const u=e.length;if(u===0)return!1;const d=e[u-1];return d.originalEndLineNumber===0||d.modifiedEndLineNumber===0?!1:d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===o?(d.originalEndLineNumber=t,d.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new nO(t,n,t,r,o,s,o,a)),!0):!1}}function d$(i,e){const t=Na(i);return t===-1?e:t+1}function h$(i,e){const t=Qf(i);return t===-1?e:t+2}function ote(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class QMe{constructor(e,t,n,r){this._uri=e,this._lines=t,this._eol=n,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Ee(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=this._lines[r].length+e;this._lineStarts=new nRe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=og(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let r=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),r[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}class JMe{constructor(e,t,n){const r=new Uint8Array(e*t);for(let o=0,s=e*t;o<s;o++)r[o]=n;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class ePe{constructor(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++){let[a,u,d]=e[o];u>t&&(t=u),a>n&&(n=a),d>n&&(n=d)}t++,n++;let r=new JMe(n,t,0);for(let o=0,s=e.length;o<s;o++){let[a,u,d]=e[o];r.set(a,u,d)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let m6=null;function tPe(){return m6===null&&(m6=new ePe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),m6}let ON=null;function nPe(){if(ON===null){ON=new $S(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)ON.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)ON.set(e.charCodeAt(t),2)}return ON}class T3{static _createLink(e,t,n,r,o){let s=o-1;do{const a=t.charCodeAt(s);if(e.get(a)!==2)break;s--}while(s>r);if(r>0){const a=t.charCodeAt(r-1),u=t.charCodeAt(s);(a===40&&u===41||a===91&&u===93||a===123&&u===125)&&s--}return{range:{startLineNumber:n,startColumn:r+1,endLineNumber:n,endColumn:s+2},url:t.substring(r,s+1)}}static computeLinks(e,t=tPe()){const n=nPe();let r=[];for(let o=1,s=e.getLineCount();o<=s;o++){const a=e.getLineContent(o),u=a.length;let d=0,h=0,f=0,p=1,m=!1,v=!1,b=!1,E=!1;for(;d<u;){let S=!1;const w=a.charCodeAt(d);if(p===13){let L;switch(w){case 40:m=!0,L=0;break;case 41:L=m?0:1;break;case 91:b=!0,v=!0,L=0;break;case 93:b=!1,L=v?0:1;break;case 123:E=!0,L=0;break;case 125:L=E?0:1;break;case 39:L=f===34||f===96?0:1;break;case 34:L=f===39||f===96?0:1;break;case 96:L=f===39||f===34?0:1;break;case 42:L=f===42?1:0;break;case 124:L=f===124?1:0;break;case 32:L=b?0:1;break;default:L=n.get(w)}L===1&&(r.push(T3._createLink(n,a,o,h,d)),S=!0)}else if(p===12){let L;w===91?(v=!0,L=0):L=n.get(w),L===1?S=!0:p=13}else p=t.nextState(p,w),p===0&&(S=!0);S&&(p=1,m=!1,v=!1,E=!1,h=d+1,f=w),d++}p===13&&r.push(T3._createLink(n,a,o,h,u))}return r}}function iPe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:T3.computeLinks(i)}class f${constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,r,o){if(e&&t){let s=this.doNavigateValueSet(t,o);if(s)return{range:e,value:s}}if(n&&r){let s=this.doNavigateValueSet(r,o);if(s)return{range:n,value:s}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),r=Number(e),o=parseFloat(e);return!isNaN(r)&&!isNaN(o)&&r===o?r===0&&!t?null:(r=Math.floor(r*n),r+=t?n:-n,String(r/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let r=null;for(let o=0,s=e.length;r===null&&o<s;o++)r=this.valueSetReplace(e[o],t,n);return r}valueSetReplace(e,t,n){let r=e.indexOf(t);return r>=0?(r+=n?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}}f$.INSTANCE=new f$;var g$;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(g$||(g$={}));var p$;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(p$||(p$={}));var m$;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(m$||(m$={}));var _$;(function(i){i[i.Deprecated=1]="Deprecated"})(_$||(_$={}));var v$;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(v$||(v$={}));var b$;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(b$||(b$={}));var C$;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(C$||(C$={}));var y$;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(y$||(y$={}));var w$;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(w$||(w$={}));var S$;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(S$||(S$={}));var E$;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unicodeHighlighting=112]="unicodeHighlighting",i[i.unusualLineTerminators=113]="unusualLineTerminators",i[i.useShadowDOM=114]="useShadowDOM",i[i.useTabStops=115]="useTabStops",i[i.wordSeparators=116]="wordSeparators",i[i.wordWrap=117]="wordWrap",i[i.wordWrapBreakAfterCharacters=118]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=119]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=120]="wordWrapColumn",i[i.wordWrapOverride1=121]="wordWrapOverride1",i[i.wordWrapOverride2=122]="wordWrapOverride2",i[i.wrappingIndent=123]="wrappingIndent",i[i.wrappingStrategy=124]="wrappingStrategy",i[i.showDeprecated=125]="showDeprecated",i[i.inlayHints=126]="inlayHints",i[i.editorClassName=127]="editorClassName",i[i.pixelRatio=128]="pixelRatio",i[i.tabFocusMode=129]="tabFocusMode",i[i.layoutInfo=130]="layoutInfo",i[i.wrappingInfo=131]="wrappingInfo"})(E$||(E$={}));var L$;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(L$||(L$={}));var x$;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(x$||(x$={}));var D$;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(D$||(D$={}));var T$;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(T$||(T$={}));var I$;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(I$||(I$={}));var k$;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(k$||(k$={}));var N$;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(N$||(N$={}));var A$;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(A$||(A$={}));var O$;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(O$||(O$={}));var R$;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(R$||(R$={}));var M$;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(M$||(M$={}));var P$;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(P$||(P$={}));var F$;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(F$||(F$={}));var B$;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(B$||(B$={}));var W$;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(W$||(W$={}));var V$;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(V$||(V$={}));var H$;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(H$||(H$={}));var $$;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})($$||($$={}));var z$;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(z$||(z$={}));var U$;(function(i){i[i.Deprecated=1]="Deprecated"})(U$||(U$={}));var j$;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(j$||(j$={}));var K$;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(K$||(K$={}));var G$;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(G$||(G$={}));var q$;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(q$||(q$={}));let bR=class{static chord(e,t){return Zr(e,t)}};bR.CtrlCmd=2048;bR.Shift=1024;bR.Alt=512;bR.WinCtrl=256;function nhe(){return{editor:void 0,languages:void 0,CancellationTokenSource:aa,Emitter:Ce,KeyCode:k$,KeyMod:bR,Position:Ee,Range:Q,Selection:wt,SelectionDirection:H$,MarkerSeverity:N$,MarkerTag:A$,Uri:rn,Token:VB}}class kq{static computeUnicodeHighlights(e,t,n){const r=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),s=new ste(t),a=s.getCandidateCodePoints();let u;a==="allNonBasicAscii"?u=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):u=new RegExp(`${rPe(Array.from(a))}`,"g");const d=new Fy(null,u),h=[];let f=!1,p,m=0,v=0,b=0;e:for(let E=r,S=o;E<=S;E++){const w=e.getLineContent(E),L=w.length;d.reset(0);do if(p=d.next(w),p){let A=p.index,N=p.index+p[0].length;if(A>0){const R=w.charCodeAt(A-1);Vo(R)&&A--}if(N+1<L){const R=w.charCodeAt(N-1);Vo(R)&&N++}const H=w.substring(A,N),M=s.shouldHighlightNonBasicASCII(H);if(M!==0){M===3?m++:M===2?v++:M===1?b++:vue();const R=1e3;if(h.length>=R){f=!0;break e}h.push(new Q(E,A+1,E,N+1))}}while(p)}return{ranges:h,hasMore:f,ambiguousCharacterCount:m,invisibleCharacterCount:v,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){switch(new ste(t).shouldHighlightNonBasicASCII(e)){case 0:return null;case 2:return{kind:1};case 3:const o=Lh.getPrimaryConfusable(e.codePointAt(0));return{kind:0,confusableWith:String.fromCodePoint(o)};case 1:return{kind:2}}}}function rPe(i,e){return`[${dc(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class ste{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints)}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of _p.codePoints)e.add(t);if(this.options.ambiguousCharacters)for(const t of Lh.getPrimaryConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e){const t=e.codePointAt(0);return this.allowedCodePoints.has(t)?0:this.options.nonBasicASCII?1:this.options.invisibleCharacters&&!(e===" "||e===`
`||e==="	")&&_p.isInvisibleCharacter(t)?2:this.options.ambiguousCharacters&&Lh.isAmbiguous(t)?3:0}}var nb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class oPe extends QMe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=WF(e.column,BF(t),this._lines[e.lineNumber-1],0);return n?new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let r=0,o="",s=0,a=[];return{*[Symbol.iterator](){for(;;)if(s<a.length){const u=o.substring(a[s].start,a[s].end);s+=1,yield u}else if(r<t.length)o=t[r],a=n(o,e),s=0,r+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],r=this._wordenize(n,t),o=[];for(const s of r)o.push({word:n.substring(s.start,s.end),startColumn:s.start+1,endColumn:s.end+1});return o}_wordenize(e,t){const n=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)n.push({start:r.index,end:r.index+r[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,r=e.endLineNumber-1,o=[];o.push(this._lines[n].substring(e.startColumn-1));for(let s=n+1;s<r;s++)o.push(this._lines[s]);return o.push(this._lines[r].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Ee.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,r=!1;if(t<1)t=1,n=1,r=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,r=!0;else{let o=this._lines[t-1].length+1;n<1?(n=1,r=!0):n>o&&(n=o,r=!0)}return r?{lineNumber:t,column:n}:e}}class F1{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new oPe(rn.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return nb(this,void 0,void 0,function*(){const r=this._getModel(e);return r?kq.computeUnicodeHighlights(r,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,r){return nb(this,void 0,void 0,function*(){const o=this._getModel(e),s=this._getModel(t);if(!o||!s)return null;const a=o.getLinesContent(),u=s.getLinesContent(),h=new XMe(a,u,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:r}).computeDiff(),f=h.changes.length>0?!1:this._modelsAreIdentical(o,s);return{quitEarly:h.quitEarly,identical:f,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),r=t.getLineCount();if(n!==r)return!1;for(let o=1;o<=n;o++){const s=e.getLineContent(o),a=t.getLineContent(o);if(s!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return nb(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const r=[];let o;t=t.slice(0).sort((s,a)=>{if(s.range&&a.range)return Q.compareRangesUsingStarts(s.range,a.range);let u=s.range?0:1,d=a.range?0:1;return u-d});for(let{range:s,text:a,eol:u}of t){if(typeof u=="number"&&(o=u),Q.isEmpty(s)&&!a)continue;const d=n.getValueInRange(s);if(a=a.replace(/\r\n|\n|\r/g,n.eol),d===a)continue;if(Math.max(a.length,d.length)>F1._diffLimit){r.push({range:s,text:a});continue}const h=GMe(d,a,!1),f=n.offsetAt(Q.lift(s).getStartPosition());for(const p of h){const m=n.positionAt(f+p.originalStart),v=n.positionAt(f+p.originalStart+p.originalLength),b={text:a.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:v.lineNumber,endColumn:v.column}};n.getValueInRange(b.range)!==b.text&&r.push(b)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r})}computeLinks(e){return nb(this,void 0,void 0,function*(){let t=this._getModel(e);return t?iPe(t):null})}textualSuggest(e,t,n,r){return nb(this,void 0,void 0,function*(){const o=new ig(!0),s=new RegExp(n,r),a=new Set;e:for(let u of e){const d=this._getModel(u);if(d){for(let h of d.words(s))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>F1._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,n,r){return nb(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return Object.create(null);const s=new RegExp(n,r),a=Object.create(null);for(let u=t.startLineNumber;u<t.endLineNumber;u++){let d=o.getLineWords(u,s);for(const h of d){if(!isNaN(Number(h.word)))continue;let f=a[h.word];f||(f=[],a[h.word]=f),f.push({startLineNumber:u,startColumn:h.startColumn,endLineNumber:u,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,r,o){return nb(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return null;let a=new RegExp(r,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let u=s.getValueInRange(t),d=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!d)return null;let h=s.getValueInRange(d);return f$.INSTANCE.navigateValueSet(t,u,d,h,n)})}loadForeignModule(e,t,n){let s={host:KLe(n,(a,u)=>this._host.fhr(a,u)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(pG(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}F1._diffLimit=1e5;F1._suggestionsLimit=1e4;typeof importScripts=="function"&&(Yr.monaco=nhe());const Nq=gi("textResourceConfigurationService"),ihe=gi("textResourcePropertiesService");var sPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Y$=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const ate=60*1e3,lte=5*60*1e3;function Eb(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Z$=class extends Oe{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new lPe(this._modelService)),this._logService=n,this._register(NA.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,o)=>Eb(this._modelService,r.uri)?this._workerManager.withWorker().then(s=>s.computeLinks(r.uri)).then(s=>s&&{links:s}):Promise.resolve({links:[]})})),this._register(Ah.register("*",new aPe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Eb(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(r=>r.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,r){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,n,r))}computeMoreMinimalEdits(e,t){if(bl(t)){if(!Eb(this._modelService,e))return Promise.resolve(t);const n=ig.create(!0),r=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([r,m0(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Eb(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(r=>r.navigateValueSet(e,t,n))}canComputeWordRanges(e){return Eb(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};Z$=sPe([_6(0,To),_6(1,Nq),_6(2,wg)],Z$);class aPe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return Y$(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const r=[];if(n.wordBasedSuggestionsMode==="currentDocument")Eb(this._modelService,e.uri)&&r.push(e.uri);else for(const f of this._modelService.getModels())Eb(this._modelService,f.uri)&&(f===e?r.unshift(f.uri):(n.wordBasedSuggestionsMode==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&r.push(f.uri));if(r.length===0)return;const o=_i.getWordDefinition(e.getLanguageId()),s=e.getWordAtPosition(t),a=s?new Q(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):Q.fromPositions(t),u=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(r,s==null?void 0:s.word,o);if(h)return{duration:h.duration,suggestions:h.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:u,replace:a}}))}})}}let lPe=class extends Oe{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new sR).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(lte/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>lte&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new rhe(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}};class uPe extends Oe{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let r=new sR;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(ate/2)),this._register(r)}}dispose(){for(let e in this._syncedModels)ri(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let r=n.toString();this._syncedModels[r]||this._beginModelSync(n,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>ate&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let r=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const o=new Je;o.add(n.onDidChangeContent(s=>{this._proxy.acceptModelChanged(r.toString(),s)})),o.add(n.onWillDispose(()=>{this._stopModelSync(r)})),o.add(Un(()=>{this._proxy.acceptRemovedModel(r)})),this._syncedModels[r]=o}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ri(t)}}class ute{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class v6{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class rhe extends Oe{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new n8(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new $Me(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new v6(this)))}catch(e){c$(e),this._worker=new ute(new F1(new v6(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(c$(e),this._worker=new ute(new F1(new v6(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new uPe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return Y$(this,void 0,void 0,function*(){return this._disposed?Promise.reject(vC()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(r=>r.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,r){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),n,r))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return Y$(this,void 0,void 0,function*(){const r=yield this._withSyncedResources(e),o=n.source,s=w9(n);return r.textualSuggest(e.map(a=>a.toString()),t,o,s)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let r=this._modelService.getModel(e);if(!r)return Promise.resolve(null);let o=_i.getWordDefinition(r.getLanguageId()),s=o.source,a=w9(o);return n.computeWordRanges(e.toString(),t,s,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(r=>{let o=this._modelService.getModel(e);if(!o)return null;let s=_i.getWordDefinition(o.getLanguageId()),a=s.source,u=w9(s);return r.navigateValueSet(e.toString(),t,n,a,u)})}dispose(){super.dispose(),this._disposed=!0}}const ib=Object.prototype.hasOwnProperty;class cPe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(E0,0),this._register(jS,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||E0}}class iO extends Oe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,iO.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new cPe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(s1.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){iO.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},pAe();const e=s1.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=n.identifier}),n.mimetypes.forEach(r=>{this._mimeTypesMap[r]=n.identifier})}),Xr.as(SC.Configuration).registerOverrideIdentifiers(s1.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;ib.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)BM({id:n,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)BM({id:n,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)BM({id:n,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let u=new RegExp(a);XLe(u)||BM({id:n,mime:r,firstline:u},this._warnOnOverwrite)}catch(u){gn(u)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);let s=o!==null&&o.length>0;if(!(s&&o[0]===null)){let a=(s?o[0]:null)||n;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return ib.call(this._mimeTypesMap,e)?!0:ib.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return ib.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>ib.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>ib.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===E0?E0:ib.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=mAe(e,t);return this.extractModeIds(n.join(","))}}iO.instanceCount=0;class cte{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new Ce({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class rO extends Oe{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Ce),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new Ce({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,rO.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new iO(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){rO.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return EH(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return EH(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new cte(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new cte(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||E0;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||E0;this._onDidEncounterLanguage.fire(t)}}}rO.instanceCount=0;var dPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},b6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let X$=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._modeService=n,this._logService=r,this._hashTable=new tp,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const r=this._modeService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,r);let s;if(o)s=o.metadata,this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${ia.getForeground(s)}, fontStyle ${ia.getFontStyle(s).toString(2)}`);else{let a=this._legend.tokenTypes[e];const u=[];if(a){let d=t;for(let f=0;d>0&&f<this._legend.tokenModifiers.length;f++)d&1&&u.push(this._legend.tokenModifiers[f]),d=d>>1;d>0&&this._logService.getLevel()===Ph.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),u.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,u,n);if(typeof h>"u")s=2147483647;else{if(s=0,typeof h.italic<"u"){const f=(h.italic?1:0)<<11;s|=f|1}if(typeof h.bold<"u"){const f=(h.bold?2:0)<<11;s|=f|2}if(typeof h.underline<"u"){const f=(h.underline?4:0)<<11;s|=f|4}if(h.foreground){const f=h.foreground<<14;s|=f|8}s===0&&(s=2147483647)}}else this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),s=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,s),this._logService.getLevel()===Ph.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${u.join(" ")}): foreground ${ia.getForeground(s)}, fontStyle ${ia.getFontStyle(s).toString(2)}`)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};X$=dPe([b6(1,xr),b6(2,Fs),b6(3,wg)],X$);function ohe(i,e,t){const n=i.data,r=i.data.length/5|0,o=Math.max(Math.ceil(r/1024),400),s=[];let a=0,u=1,d=0;for(;a<r;){const h=a;let f=Math.min(h+o,r);if(f<r){let L=f;for(;L-1>h&&n[5*L]===0;)L--;if(L-1===h){let A=f;for(;A+1<r&&n[5*A]===0;)A++;f=A}else f=L}let p=new Uint32Array((f-h)*4),m=0,v=0,b=0,E=0,S=0;for(;a<f;){const L=5*a,A=n[L],N=n[L+1],H=u+A|0,M=A===0?d+N|0:N,R=n[L+2],q=n[L+3],X=n[L+4],$=e.getMetadata(q,X,t);$!==2147483647&&(v===0&&(v=H),b===H&&S>M&&(e.warnOverlappingSemanticTokens(H,M+1),E<M?p[m-4+2]=M:m-=4),p[m]=H-v,p[m+1]=M,p[m+2]=M+R,p[m+3]=$,m+=4,b=H,E=M,S=M+R),u=H,d=M,a++}m!==p.length&&(p=p.subarray(0,m));const w=new e3(v,new JF(p));s.push(w)}return s}class hPe{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}}class tp{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=tp._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<tp._SIZES.length?2/3*this._currentLength:0),this._elements=[],tp._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const r=this._hashFunc(e,t,n);let o=this._elements[r];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===n)return o;o=o.next}return null}add(e,t,n,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=tp._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<tp._SIZES.length?2/3*this._currentLength:0),this._elements=[],tp._nullOutEntries(this._elements,this._currentLength);for(const s of o){let a=s;for(;a;){const u=a.next;a.next=null,this._add(a),a=u}}}this._add(new hPe(e,t,n,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}tp._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function fPe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],r=i[e+1],o=i[e+2],s=i[e+3];i[e+0]=s,i[e+1]=o,i[e+2]=r,i[e+3]=n}}function gPe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return Hle()||fPe(e),OB.wrap(e)}function she(i){const e=new Uint32Array(pPe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return gPe(e)}function pPe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var D0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function i8(i){return i&&!!i.data}function ahe(i){return i&&Array.isArray(i.edits)}class mPe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function lhe(i){return Yw.has(i)}function _Pe(i){const e=Yw.orderedGroups(i);return e.length>0?e[0]:[]}function uhe(i,e,t,n){return D0(this,void 0,void 0,function*(){const r=_Pe(i),o=yield Promise.all(r.map(s=>D0(this,void 0,void 0,function*(){let a,u=null;try{a=yield s.provideDocumentSemanticTokens(i,s===e?t:null,n)}catch(d){u=d,a=null}return(!a||!i8(a)&&!ahe(a))&&(a=null),new mPe(s,a,u)})));for(const s of o){if(s.error)throw s.error;if(s.tokens)return s}return o.length>0?o[0]:null})}function vPe(i){const e=Yw.orderedGroups(i);return e.length>0?e[0]:null}class bPe{constructor(e,t){this.provider=e,this.tokens=t}}function CPe(i){return WB.has(i)}function che(i){const e=WB.orderedGroups(i);return e.length>0?e[0]:[]}function Aq(i,e,t){return D0(this,void 0,void 0,function*(){const n=che(i),r=yield Promise.all(n.map(o=>D0(this,void 0,void 0,function*(){let s;try{s=yield o.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){Ms(a),s=null}return(!s||!i8(s))&&(s=null),new bPe(o,s)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}Xn.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t]=e;Yi(t instanceof rn);const n=i.get(To).getModel(t);if(!n)return;const r=vPe(n);return r?r[0].getLegend():i.get(Ir).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Xn.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t]=e;Yi(t instanceof rn);const n=i.get(To).getModel(t);if(!n)return;if(!lhe(n))return i.get(Ir).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const r=yield uhe(n,null,null,Fn.None);if(!r)return;const{provider:o,tokens:s}=r;if(!s||!i8(s))return;const a=she({id:0,type:"full",data:s.data});return s.resultId&&o.releaseDocumentSemanticTokens(s.resultId),a}));Xn.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t,n]=e;Yi(t instanceof rn);const r=i.get(To).getModel(t);if(!r)return;const o=che(r);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!n||!Q.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const s=yield Aq(r,Q.lift(n),Fn.None);if(s)return s.provider.getLegend()}));Xn.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>D0(void 0,void 0,void 0,function*(){const[t,n]=e;Yi(t instanceof rn),Yi(Q.isIRange(n));const r=i.get(To).getModel(t);if(!r)return;const o=yield Aq(r,Q.lift(n),Fn.None);if(!(!o||!o.tokens))return she({id:0,type:"full",data:o.tokens.data})}));var yPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},rb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function _v(i){return i.toString()}function dte(i){const e=new FB,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class wPe{constructor(e,t,n){this._modelEventListeners=new Je,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>n(e,r)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const SPe=Qa||Gn?1:2;class EPe{constructor(e,t,n,r,o,s,a,u){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=o,this.sha1=s,this.versionId=a,this.alternativeVersionId=u}}let I3=class r2 extends Oe{constructor(e,t,n,r,o,s,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=r,this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onModelAdded=this._register(new Ce),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Ce),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Ce),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new xPe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new LPe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let r=Js.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const m=parseInt(e.editor.tabSize,10);isNaN(m)||(r=m),r<1&&(r=1)}let o=r;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const m=parseInt(e.editor.indentSize,10);isNaN(m)||(o=m),o<1&&(o=1)}let s=Js.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=SPe;const u=e.eol;u===`\r
`?a=2:u===`
`&&(a=1);let d=Js.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(d=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let h=Js.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(h=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let f=Js.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(f=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let p=Js.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(p={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:r,indentSize:o,insertSpaces:s,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:d,largeFileOptimizations:f,bracketPairColorizationOptions:p}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:qu===3||qu===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let r=this._modelCreationOptionsByLanguageAndResource[e+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),s=this._getEOL(t,e);r=r2._readModelOptions({editor:o,eol:s},n),this._modelCreationOptionsByLanguageAndResource[e+t]=r}return r}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const o=t[n],s=this._models[o],a=s.model.getLanguageId(),u=s.model.uri,d=e[a+u],h=this.getCreationOptions(a,u,s.model.isForSimpleWidget);r2._setModelOptionsForModel(s.model,h,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Qc(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(_v(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(_v(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(_v(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,r)=>n.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){const o=this.getCreationOptions(t,n,r),s=new El(e,o,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(_v(n))){const d=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),f=dte(s)===d.sha1;if(f||d.sharesUndoRedoStack){for(const p of h.past)Qg(p)&&p.matchesResource(n)&&p.setModel(s);for(const p of h.future)Qg(p)&&p.matchesResource(n)&&p.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,p=>Qg(p)&&p.matchesResource(n)),f&&(s._overwriteVersionId(d.versionId),s._overwriteAlternativeVersionId(d.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(d.initialUndoRedoSnapshot))}else d.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(d.initialUndoRedoSnapshot)}const a=_v(s.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const u=new wPe(s,d=>this._onWillDispose(d),(d,h)=>this._onDidChangeLanguage(d,h));return this._models[a]=u,u}createModel(e,t,n,r=!1){let o;return t?(o=this._createModelData(e,t.languageId,n,r),this.setMode(o.model,t)):o=this._createModelData(e,jS,n,r),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;const n=this._models[_v(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push(this._models[o].model)}return e}getModel(e){const t=_v(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===In.file||e.scheme===In.vscodeRemote||e.scheme===In.userData||e.scheme===In.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=_v(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,s=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const u=this._undoRedoService.getElements(e.uri);if(u.past.length>0||u.future.length>0){for(const d of u.past)Qg(d)&&d.matchesResource(e.uri)&&(o=!0,s+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of u.future)Qg(d)&&d.matchesResource(e.uri)&&(o=!0,s+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=r2.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!r&&s>a){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}else this._ensureDisposedModelsHeapSize(a-s),this._undoRedoService.setElementsValidFlag(e.uri,!1,u=>Qg(u)&&u.matchesResource(e.uri)),this._insertDisposedModel(new EPe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,s,dte(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,r=e.getLanguageId(),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);r2._setModelOptionsForModel(e,s,o),this._onModelModeChanged.fire({model:e,oldModeId:n})}};I3.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;I3=yPe([rb(0,ir),rb(1,ihe),rb(2,xr),rb(3,wg),rb(4,gR),rb(5,Fs),rb(6,fR)],I3);const Oq="editor.semanticHighlighting";function Q$(i,e,t){var n;const r=(n=t.getValue(Oq,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof r=="boolean"?r:e.getColorTheme().semanticHighlighting}class LPe extends Oe{constructor(e,t,n,r){super(),this._watchers=Object.create(null),this._semanticStyling=r;const o=u=>{this._watchers[u.uri.toString()]=new Hb(u,t,this._semanticStyling)},s=(u,d)=>{d.dispose(),delete this._watchers[u.uri.toString()]},a=()=>{for(let u of e.getModels()){const d=this._watchers[u.uri.toString()];Q$(u,t,n)?d||o(u):d&&s(u,d)}};this._register(e.onModelAdded(u=>{Q$(u,t,n)&&o(u)})),this._register(e.onModelRemoved(u=>{const d=this._watchers[u.uri.toString()];d&&s(u,d)})),this._register(n.onDidChangeConfiguration(u=>{u.affectsConfiguration(Oq)&&a()})),this._register(t.onDidColorThemeChange(a))}}class xPe extends Oe{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new X$(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class DPe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class Hb extends Oe{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new tr(()=>this._fetchDocumentSemanticTokensNow(),Hb.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{ri(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const o of Yw.all(e))typeof o.onDidChange=="function"&&this._documentProvidersChangeListeners.push(o.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};r(),this._register(Yw.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(o=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!lhe(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new aa,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=uhe(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const o=[],s=this._model.onDidChangeContent(a=>{o.push(a)});r.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:u,tokens:d}=a,h=this._semanticStyling.get(u);this._setDocumentSemanticTokens(u,d||null,h,o)}},a=>{a&&(Cg(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||gn(a),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}_setDocumentSemanticTokens(e,t,n,r){const o=this._currentDocumentResponse,s=()=>{r.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),s();return}if(ahe(t)){if(!o){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const p of t.edits)a+=(p.data?p.data.length:0)-p.deleteCount;const u=o.data,d=new Uint32Array(u.length+a);let h=u.length,f=d.length;for(let p=t.edits.length-1;p>=0;p--){const m=t.edits[p],v=h-(m.start+m.deleteCount);v>0&&(Hb._copy(u,h-v,d,f-v,v),f-=v),m.data&&(Hb._copy(m.data,0,d,f-m.data.length,m.data.length),f-=m.data.length),h=m.start}h>0&&Hb._copy(u,0,d,0,h),t={resultId:t.resultId,data:d}}}if(i8(t)){this._currentDocumentResponse=new DPe(e,t.resultId,t.data);const a=ohe(t,n,this._model.getLanguageId());if(r.length>0)for(const u of r)for(const d of a)for(const h of u.changes)d.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);s()}}Hb.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class TPe{constructor(e,t,n,r,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=o}}function IPe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,r=i.length;n<r;n++){let o=i[n],s=-1;if(typeof o.fontStyle=="string"){s=0;let d=o.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let u=null;typeof o.background=="string"&&(u=o.background),e[t++]=new TPe(o.token||"",n,s,a,u)}return e}function kPe(i,e){i.sort((h,f)=>{let p=MPe(h.token,f.token);return p!==0?p:h.index-f.index});let t=0,n="000000",r="ffffff";for(;i.length>=1&&i[0].token==="";){let h=i.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(r=h.background)}let o=new APe;for(let h of e)o.getId(h);let s=o.getId(n),a=o.getId(r),u=new Rq(t,s,a),d=new Mq(u);for(let h=0,f=i.length;h<f;h++){let p=i[h];d.insert(p.token,p.fontStyle,o.getId(p.foreground),o.getId(p.background))}return new dhe(o,d)}const NPe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class APe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(NPe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=we.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class dhe{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(IPe(e),t)}static createFromParsedTokenTheme(e,t){return kPe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let r=this._match(t),o=RPe(t);n=(r.metadata|o<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const OPe=/\b(comment|string|regex|regexp)\b/;function RPe(i){let e=i.match(OPe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function MPe(i,e){return i<e?-1:i>e?1:0}class Rq{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new Rq(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class Mq{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,r;t===-1?(n=e,r=""):(n=e.substring(0,t),r=e.substring(t+1));let o=this._children.get(n);return typeof o<"u"?o.match(r):this._mainRule}insert(e,t,n,r){if(e===""){this._mainRule.acceptOverwrite(t,n,r);return}let o=e.indexOf("."),s,a;o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1));let u=this._children.get(s);typeof u>"u"&&(u=new Mq(this._mainRule.clone()),this._children.set(s,u)),u.insert(a,t,n,r)}}function PPe(i){let e=[];for(let t=1,n=i.length;t<n;t++){let r=i[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const FPe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[oc]:"#FFFFFE",[uR]:"#000000",[PG]:"#E5EBF1",[UB]:"#D3D3D3",[jB]:"#939393",[FG]:"#ADD6FF4D"}},BPe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[oc]:"#1E1E1E",[uR]:"#D4D4D4",[PG]:"#3A3D41",[UB]:"#404040",[jB]:"#707070",[FG]:"#ADD6FF26"}},WPe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[oc]:"#000000",[uR]:"#FFFFFF",[UB]:"#FFFFFF",[jB]:"#FFFFFF"}};function VPe(){const i=new Ce,e=URe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=o=>{let s=o.defaults;for(;mr.isThemeIcon(s);){const u=e.getIcon(s.id);if(!u)return;s=u.defaults}const a=s.fontId;if(a){const u=e.getIconFont(a);if(u)return t[a]=u,`.codicon-${o.id}:before { content: '${s.fontCharacter}'; font-family: ${oJ(a)}; }`}return`.codicon-${o.id}:before { content: '${s.fontCharacter}'; }`},r=[];for(let o of e.getIcons()){const s=n(o);s&&r.push(s)}for(let o in t){const a=t[o].definition.src.map(u=>`${S1(u.location)} format('${u.format}')`).join(", ");r.push(`@font-face { src: ${a}; font-family: ${oJ(o)}; font-display: block; }`)}return r.join(`
`)}}}const $b="vs",k3="vs-dark",Ew="hc-black",hhe=Xr.as(nce.ColorContribution),HPe=Xr.as(Tue.ThemingContribution);class fhe{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(d4(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,we.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=J$(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,we.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=hhe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case $b:return Xc.LIGHT;case Ew:return Xc.HIGH_CONTRAST;default:return Xc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let o=J$(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(n||r){const o={token:""};n&&(o.foreground=n),r&&(o.background=r),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=dhe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=ia.getForeground(o),a=ia.getFontStyle(o);return{foreground:s,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function d4(i){return i===$b||i===k3||i===Ew}function J$(i){switch(i){case $b:return FPe;case k3:return BPe;case Ew:return WPe}}function C6(i){let e=J$(i);return new fhe(i,e)}class $Pe extends Oe{constructor(){super(),this._onColorThemeChange=this._register(new Ce),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set($b,C6($b)),this._knownThemes.set(k3,C6(k3)),this._knownThemes.set(Ew,C6(Ew));const e=VPe();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme($b),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),MLe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return hB(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=uc(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Oe.None}_registerShadowDomContainer(e){const t=uc(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!d4(t.base)&&!d4(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new fhe(e,t)),d4(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get($b),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(Ew):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:s=>{t[s]||(e.push(s),t[s]=!0)}};HPe.getThemingParticipants().forEach(s=>s(this._theme,n,this._environment));const r=[];for(const s of hhe.getColors()){const a=this._theme.getColor(s.id,!0);a&&r.push(`${tce(s.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${r.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(PPe(o)),this._themeCSS=e.join(`
`),this._updateCSS(),Wr.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var zPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},UPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const H2="data-keybinding-context";let Pq=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class tS extends Pq{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}tS.INSTANCE=new tS;class oO extends Pq{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=vw.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===6){const o=Array.from(Qn.map(this._values,([s])=>s));this._values.clear(),n.fire(new fte(o))}else{const o=[];for(const s of r.affectedKeys){const a=`config.${s}`,u=this._values.findSuperstr(a);u!==void 0&&(o.push(...Qn.map(u,([d])=>d)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}n.fire(new fte(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(oO._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(oO._keyPrefix.length),n=this._configurationService.getValue(t);let r;switch(typeof n){case"number":case"boolean":case"string":r=n;break;default:Array.isArray(n)?r=JSON.stringify(n):r=n}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}oO._keyPrefix="config.";class jPe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class hte{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class fte{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class KPe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class ghe{constructor(e){this._onDidChangeContext=new bF({merge:t=>new KPe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new jPe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new GPe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Sw.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new hte(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new hte(e))}getContext(e){return this._isDisposed?tS.INSTANCE:this.getContextValuesContainer(qPe(e))}}let ez=class extends ghe{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Je,this._lastContextId=0;const t=new oO(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?tS.INSTANCE:this._contexts.get(e)||tS.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new Pq(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};ez=zPe([UPe(0,ir)],ez);class GPe extends ghe{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Ra,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(H2)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(H2,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(H2),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?tS.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function qPe(i){for(;i;){if(i.hasAttribute(H2)){const e=i.getAttribute(H2);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Xn.registerCommand(fxe,function(i,e,t){i.get(cn).createKey(String(e),t)});Xn.registerCommand({id:"getContextKeyInfo",handler(){return[...Dt.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:C("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Xn.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of Dt.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function gte(i){let e=i.definition;for(;e instanceof _e;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Vs;(function(i){function e(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,s.start),u=Math.min(o.end,s.end);return u-a<=0?{start:0,end:0}:{start:a,end:u}}i.intersect=e;function t(o){return o.end-o.start<=0}i.isEmpty=t;function n(o,s){return!t(e(o,s))}i.intersects=n;function r(o,s){const a=[],u={start:o.start,end:Math.min(s.start,o.end)},d={start:Math.max(s.end,o.start),end:o.end};return t(u)||a.push(u),t(d)||a.push(d),a}i.relativeComplement=r})(Vs||(Vs={}));var $v;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})($v||($v={}));function $y(i,e,t){const n=t.mode===$v.ALIGN?t.offset:t.offset+t.size,r=t.mode===$v.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=r?r-e:Math.max(i-e,0):e<=r?r-e:e<=i-n?n:0}class nS extends Oe{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=Oe.None,this.toDisposeOnSetContainer=Oe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ge(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,ja(this.view),this.setContainer(e,t),this._register(Un(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Ge(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=YPe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ge("slot"))}else this.container.appendChild(this.view);const r=new Je;nS.BUBBLE_UP_EVENTS.forEach(o=>{r.add(ts(this.container,o,s=>{this.onDOMEvent(s,!1)}))}),nS.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(ts(this.container,o,s=>{this.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){this.isVisible()&&this.hide(),$o(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Lu(this.view),this.toDisposeOnClean=e.render(this.view)||Oe.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ng&&cB.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(hue(e)){let f=Us(e);t={top:f.top,left:f.left,width:f.width,height:f.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Nc(this.view),r=_H(this.view),o=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let u,d;if(a===0){const f={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},p={offset:t.left,size:t.width,position:s===0?0:1,mode:$v.ALIGN};u=$y(window.innerHeight,r,f)+window.pageYOffset,Vs.intersects({start:u,end:u+r},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),d=$y(window.innerWidth,n,p)}else{const f={offset:t.left,size:t.width,position:s===0?0:1},p={offset:t.top,size:t.height,position:o===0?0:1,mode:$v.ALIGN};d=$y(window.innerWidth,n,f),Vs.intersects({start:d,end:d+n},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),u=$y(window.innerHeight,r,p)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(s===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Us(this.container);this.view.style.top=`${u-(this.useFixedPosition?Us(this.view).top:h.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?Us(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),ja(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!mp(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}nS.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];nS.BUBBLE_DOWN_EVENTS=["click"];let YPe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function Fq(...i){return function(e,t){for(let n=0,r=i.length;n<r;n++){const o=i[n](e,t);if(o)return o}return null}}const r8=ZPe.bind(void 0,!0);function ZPe(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=bG(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function phe(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function XPe(i,e){return tz(i.toLowerCase(),e.toLowerCase(),0,0)}function tz(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let r=null;return(r=tz(i,e,t+1,n+1))?Vq({start:n,end:n+1},r):null}return tz(i,e,t,n+1)}function Bq(i){return 97<=i&&i<=122}function o8(i){return 65<=i&&i<=90}function Wq(i){return 48<=i&&i<=57}function mhe(i){return i===32||i===9||i===10||i===13}const _he=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>_he.add(i.charCodeAt(0)));function N3(i){return mhe(i)||_he.has(i)}function QPe(i,e){return i===e||N3(i)&&N3(e)}function vhe(i){return Bq(i)||o8(i)||Wq(i)}function Vq(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function bhe(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(o8(n)||Wq(n)||t>0&&!vhe(i.charCodeAt(t-1)))return t}return i.length}function nz(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let r=null,o=n+1;for(r=nz(i,e,t+1,n+1);!r&&(o=bhe(e,o))<e.length;)r=nz(i,e,t+1,o),o++;return r===null?null:Vq({start:n,end:n+1},r)}}function JPe(i){let e=0,t=0,n=0,r=0,o=0;for(let h=0;h<i.length;h++)o=i.charCodeAt(h),o8(o)&&e++,Bq(o)&&t++,vhe(o)&&n++,Wq(o)&&r++;const s=e/i.length,a=t/i.length,u=n/i.length,d=r/i.length;return{upperPercent:s,lowerPercent:a,alphaPercent:u,numericPercent:d}}function e4e(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function t4e(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:r}=i;return t>.2&&e<.8&&n>.6&&r<.2}function n4e(i){let e=0,t=0,n=0,r=0;for(let o=0;o<i.length;o++)n=i.charCodeAt(o),o8(n)&&e++,Bq(n)&&t++,mhe(n)&&r++;return(e===0||t===0)&&r===0?i.length<=30:e<=5}function Che(i,e){if(!e||(e=e.trim(),e.length===0)||!n4e(i)||e.length>60)return null;const t=JPe(e);if(!t4e(t)){if(!e4e(t))return null;e=e.toLowerCase()}let n=null,r=0;for(i=i.toLowerCase();r<e.length&&(n=nz(i,e,0,r))===null;)r=bhe(e,r+1);return n}function i4e(i,e,t=!1){if(!e||e.length===0)return null;let n=null,r=0;for(i=i.toLowerCase(),e=e.toLowerCase();r<e.length&&(n=iz(i,e,0,r,t))===null;)r=yhe(e,r+1);return n}function iz(i,e,t,n,r){if(t===i.length)return[];if(n===e.length)return null;if(QPe(i.charCodeAt(t),e.charCodeAt(n))){let o=null,s=n+1;if(o=iz(i,e,t+1,n+1,r),!r)for(;!o&&(s=yhe(e,s))<e.length;)o=iz(i,e,t+1,s,r),s++;return o===null?null:Vq({start:n,end:n+1},o)}else return null}function yhe(i,e){for(let t=e;t<i.length;t++)if(N3(i.charCodeAt(t))||t>0&&N3(i.charCodeAt(t-1)))return t;return i.length}const r4e=Fq(r8,Che,phe),o4e=Fq(r8,Che,XPe),pte=new z0(1e4);function mte(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=pte.get(i);n||(n=new RegExp(YLe(i),"i"),pte.set(i,n));const r=n.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?o4e(i,e):r4e(i,e)}function s4e(i,e,t,n,r,o){const s=Math.min(13,i.length);for(;t<s;t++){const a=iS(i,e,t,n,r,o,!1);if(a)return a}return[0,o]}function s8(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const r=i[n]+t,o=e[e.length-1];o&&o.end===r?o.end=r+1:e.push({start:r,end:r+1})}return e}const zv=128;function Hq(){const i=[],e=[];for(let t=0;t<=zv;t++)e[t]=0;for(let t=0;t<=zv;t++)i.push(e.slice(0));return i}function whe(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const She=whe(2*zv),rz=whe(2*zv),Bg=Hq(),ob=Hq(),qM=Hq();function YM(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!AF(t)}}function _te(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function h4(i,e,t){return e[i]!==t[i]}function a4e(i,e,t,n,r,o,s=!1){for(;e<t&&r<o;)i[e]===n[r]&&(s&&(She[e]=r),e+=1),r+=1;return e===t}var Yh;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Yh||(Yh={}));function iS(i,e,t,n,r,o,s){const a=i.length>zv?zv:i.length,u=n.length>zv?zv:n.length;if(t>=a||o>=u||a-t>u-o||!a4e(e,t,a,r,o,u,!0))return;l4e(a,u,t,o,e,r);let d=1,h=1,f=t,p=o;const m=[!1];for(d=1,f=t;f<a;d++,f++){const w=She[f],L=rz[f],A=f+1<a?rz[f+1]:u;for(h=w-o+1,p=w;p<A;h++,p++){let N=Number.MIN_SAFE_INTEGER,H=!1;p<=L&&(N=u4e(i,e,f,t,n,r,p,u,o,Bg[d-1][h-1]===0,m));let M=0;N!==Number.MAX_SAFE_INTEGER&&(H=!0,M=N+ob[d-1][h-1]);const R=p>w,q=R?ob[d][h-1]+(Bg[d][h-1]>0?-5:0):0,X=p>w+1&&Bg[d][h-1]>0,$=X?ob[d][h-2]+(Bg[d][h-2]>0?-5:0):0;if(X&&(!R||$>=q)&&(!H||$>=M))ob[d][h]=$,qM[d][h]=3,Bg[d][h]=0;else if(R&&(!H||q>=M))ob[d][h]=q,qM[d][h]=2,Bg[d][h]=0;else if(H)ob[d][h]=M,qM[d][h]=1,Bg[d][h]=Bg[d-1][h-1]+1;else throw new Error("not possible")}}if(!m[0]&&!s)return;d--,h--;const v=[ob[d][h],o];let b=0,E=0;for(;d>=1;){let w=h;do{const L=qM[d][w];if(L===3)w=w-2;else if(L===2)w=w-1;else break}while(w>=1);b>1&&e[t+d-1]===r[o+h-1]&&!h4(w+o-1,n,r)&&b+1>Bg[d][w]&&(w=h),w===h?b++:b=1,E||(E=w),d--,h=w-1,v.push(h)}u===a&&(v[0]+=2);const S=E-a;return v[0]-=S,v}function l4e(i,e,t,n,r,o){let s=i-1,a=e-1;for(;s>=t&&a>=n;)r[s]===o[a]&&(rz[s]=a,s--),a--}function u4e(i,e,t,n,r,o,s,a,u,d,h){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let f=1,p=!1;return s===t-n?f=i[t]===r[s]?7:5:h4(s,r,o)&&(s===0||!h4(s-1,r,o))?(f=i[t]===r[s]?7:5,p=!0):YM(o,s)&&(s===0||!YM(o,s-1))?f=5:(YM(o,s-1)||_te(o,s-1))&&(f=5,p=!0),f>1&&t===n&&(h[0]=!0),p||(p=h4(s,r,o)||YM(o,s-1)||_te(o,s-1)),t===n?s>u&&(f-=p?3:5):d?f+=p?2:0:f+=p?0:1,s+1===a&&(f-=p?3:5),f}function c4e(i,e,t,n,r,o,s){return d4e(i,e,t,n,r,o,!0,s)}function d4e(i,e,t,n,r,o,s,a){let u=iS(i,e,t,n,r,o,a);if(u&&!s)return u;if(i.length>=3){const d=Math.min(7,i.length-1);for(let h=t+1;h<d;h++){const f=h4e(i,h);if(f){const p=iS(f,f.toLowerCase(),t,n,r,o,a);p&&(p[0]-=3,(!u||p[0]>u[0])&&(u=p))}}}return u}function h4e(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const $2="$(",$q=new RegExp(`\\$\\(${Ga.iconNameExpression}(?:${Ga.iconModifierExpression})?\\)`,"g"),f4e=new RegExp(Ga.iconNameCharacter),g4e=new RegExp(`(\\\\)?${$q.source}`,"g");function p4e(i){return i.replace(g4e,(e,t)=>t?e:`\\${e}`)}const m4e=new RegExp(`\\\\${$q.source}`,"g");function _4e(i){return i.replace(m4e,e=>`\\${e}`)}const v4e=new RegExp(`(\\s)?(\\\\)?${$q.source}(\\s)?`,"g");function zq(i){return i.indexOf($2)===-1?i:i.replace(v4e,(e,t,n,r)=>n?e:t||r||"")}function ZM(i){const e=i.indexOf($2);return e===-1?{text:i}:b4e(i,e)}function b4e(i,e){const t=[];let n="";function r(p){if(p){n+=p;for(const m of p)t.push(a)}}let o=-1,s="",a=0,u,d,h=e;const f=i.length;for(r(i.substr(0,e));h<f;){if(u=i[h],d=i[h+1],u===$2[0]&&d===$2[1])o=h,r(s),s=$2,h++;else if(u===")"&&o!==-1){const p=h-o+1;a+=p,o=-1,s=""}else o!==-1?f4e.test(u)?s+=u:(r(s),o=-1,s=""):r(u);h++}return r(s),{text:n,iconOffsets:t}}function XM(i,e,t=!1){const{text:n,iconOffsets:r}=e;if(!r||r.length===0)return mte(i,n,t);const o=_G(n," "),s=n.length-o.length,a=mte(i,o,t);if(a)for(const u of a){const d=r[u.start+s]+s;u.start+=d,u.end+=d}return a}const oz=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,y6=/(&amp;)?(&amp;)([^\s&])/g;var A3;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(A3||(A3={}));let Ehe=class f4 extends ug{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Gn||Qa?[10]:[]],keyDown:!0}}),this.menuElement=r,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Je),this._register(Hi.addTarget(r)),qe(r,Ht.KEY_DOWN,a=>{new Sr(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(qe(r,Ht.KEY_DOWN,a=>{const u=a.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Ni.stop(a,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof vte&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(a)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(u,d)}}})),Qa&&this._register(qe(r,Ht.KEY_DOWN,a=>{const u=new Sr(a);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ni.stop(a,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ni.stop(a,!0))})),this._register(qe(this.domNode,Ht.MOUSE_OUT,a=>{let u=a.relatedTarget;mp(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(qe(this.actionsList,Ht.MOUSE_OVER,a=>{let u=a.target;if(!(!u||!mp(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Hi.addTarget(this.actionsList)),this._register(qe(this.actionsList,ur.Tap,a=>{let u=a.initialTarget;if(!(!u||!mp(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new pR(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const s=this.scrollableElement.getDomNode();s.style.position="",this._register(qe(r,ur.Change,a=>{Ni.stop(a,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-a.translationY})})),this._register(qe(s,Ht.MOUSE_UP,a=>{a.preventDefault()})),r.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var u;return!((u=n.submenuIds)===null||u===void 0)&&u.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof w6)).forEach((a,u,d)=>{a.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(hB(e)?this.styleSheet=uc(e):(f4.globalStyleSheet||(f4.globalStyleSheet=uc()),this.styleSheet=f4.globalStyleSheet)),this.styleSheet.textContent=y4e(t)}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",r=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",s=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=o,this.domNode.style.color=n,this.domNode.style.backgroundColor=r,t.style.boxShadow=s,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof sz||a instanceof w6)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Zc)return new w6(t.context,e,{icon:!0});if(e instanceof fB){const r=new vte(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let s=[];this.mnemonics.has(o)&&(s=this.mnemonics.get(o)),s.push(r),this.mnemonics.set(o,s)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const s=t.getKeyBinding(e);if(s){const a=s.getLabel();a&&(r.keybinding=a)}}const o=new sz(t.context,e,r);if(t.enableMnemonics){const s=o.getMnemonic();if(s&&o.isEnabled()){let a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}}};class sz extends kf{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let r=this.getAction().label;if(r){let o=oz.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new tr(()=>{this.element&&(this._register(qe(this.element,Ht.MOUSE_UP,r=>{if(Ni.stop(r,!0),wl){if(new Ju(r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(qe(this.element,Ht.CONTEXT_MENU,r=>{Ni.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Be(this.element,Ge("a.action-menu-item")),this._action.id===Zc.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Be(this.item,Ge("span.menu-item-check"+_e.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=Be(this.item,Ge("span.action-label")),this.options.label&&this.options.keybinding&&(Be(this.item,Ge("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){$o(this.label);let e=zq(this.getAction().label);if(e){const t=C4e(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=oz.exec(e);if(n){e=mG(e),y6.lastIndex=0;let r=y6.exec(e);for(;r&&r[1];)r=y6.exec(e);const o=s=>s.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(_G(o(e.substr(0,r.index))," "),Ge("u",{"aria-hidden":"true"},r[3]),Cue(o(e.substr(r.index+r[0].length))," ")):this.label.innerText=o(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=r)}style(e){this.menuStyle=e,this.applyStyle()}}class vte extends sz{constructor(e,t,n,r){super(e,e,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new Je),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:A3.Right,this.showScheduler=new tr(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new tr(()=>{this.element&&!mp(aw(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Be(this.item,Ge("span.submenu-indicator"+_e.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(qe(this.element,Ht.KEY_UP,t=>{let n=new Sr(t);(n.equals(17)||n.equals(3))&&(Ni.stop(t,!0),this.createSubmenu(!0))})),this._register(qe(this.element,Ht.KEY_DOWN,t=>{let n=new Sr(t);aw()===this.item&&(n.equals(17)||n.equals(3))&&Ni.stop(t,!0)})),this._register(qe(this.element,Ht.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(qe(this.element,Ht.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(qe(this.element,Ht.FOCUS_OUT,t=>{this.element&&!mp(aw(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Ni.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,r){const o={top:0,left:0};return o.left=$y(e.width,t.width,{position:r===A3.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=$y(e.height,t.height,{position:0,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Be(this.element,Ge("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Ehe(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new gB],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const r=this.element.getBoundingClientRect(),o={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:u}=this.calculateSubmenuMenuLayout(new dr(window.innerWidth,window.innerHeight),dr.lift(s),o,this.expandDirection);this.submenuContainer.style.left=`${u-s.left}px`,this.submenuContainer.style.top=`${a-s.top}px`,this.submenuDisposables.add(qe(this.submenuContainer,Ht.KEY_UP,d=>{new Sr(d).equals(15)&&(Ni.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(qe(this.submenuContainer,Ht.KEY_DOWN,d=>{new Sr(d).equals(15)&&Ni.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class w6 extends ZA{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function C4e(i){const e=oz,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function y4e(i){let e=`
.monaco-menu {
	font-size: 13px;

}

${gte(_e.menuSelection)}
${gte(_e.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
`;const t=i.scrollbarShadow;t&&(e+=`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.scrollbarSliderBackground;n&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.scrollbarSliderHoverBackground;r&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const o=i.scrollbarSliderActiveBackground;return o&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`),e}function Dh(i,e){const t=Object.create(null);for(let n in e){const r=e[n];r&&(t[n]=Ug(r,i))}return t}function Uq(i,e,t){function n(){const r=Dh(i.getColorTheme(),e);typeof t=="function"?t(r):t.style(r)}return n(),i.onDidColorThemeChange(n)}function w4e(i,e,t){return Uq(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||x2,badgeForeground:(t==null?void 0:t.badgeForeground)||D2,badgeBorder:go},i)}function B1(i,e,t){return Uq(e,Object.assign(Object.assign({},a8),t||{}),i)}const a8={listFocusBackground:ITe,listFocusForeground:kTe,listFocusOutline:NTe,listActiveSelectionBackground:Qb,listActiveSelectionForeground:s0,listActiveSelectionIconForeground:JP,listFocusAndSelectionBackground:Qb,listFocusAndSelectionForeground:s0,listInactiveSelectionBackground:ATe,listInactiveSelectionIconForeground:RTe,listInactiveSelectionForeground:OTe,listInactiveFocusBackground:MTe,listInactiveFocusOutline:PTe,listHoverBackground:FTe,listHoverForeground:BTe,listDropBackground:WTe,listSelectionOutline:el,listHoverOutline:el,listFilterWidgetBackground:VTe,listFilterWidgetOutline:HTe,listFilterWidgetNoMatchesOutline:$Te,listMatchesShadow:y0,treeIndentGuidesStroke:zTe,tableColumnsBorder:UTe,tableOddRowsBackgroundColor:jTe},S4e={shadowColor:y0,borderColor:qTe,foregroundColor:YTe,backgroundColor:ZTe,selectionForegroundColor:XTe,selectionBackgroundColor:QTe,selectionBorderColor:JTe,separatorColor:eIe,scrollbarShadow:HS,scrollbarSliderBackground:fw,scrollbarSliderHoverBackground:gw,scrollbarSliderActiveBackground:pw};function E4e(i,e,t){return Uq(e,Object.assign(Object.assign({},S4e),t),i)}class L4e{constructor(e,t,n,r,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,r=hue(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{let s=e.getMenuClassName?e.getMenuClassName():"";s&&(o.className+=" "+s),this.options.blockMouse&&(this.block=o.appendChild(Ge(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",qe(this.block,Ht.MOUSE_DOWN,d=>d.stopPropagation()));const a=new Je,u=e.actionRunner||new zw;return u.onBeforeRun(this.onActionRun,this,a),u.onDidRun(this.onDidActionRun,this,a),n=new Ehe(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:u,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)}),a.add(E4e(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(qe(window,Ht.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(qe(window,Ht.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;let h=new Ju(d),f=h.target;if(!h.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),t0(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},r,!!r)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Cg(e.error)&&this.notificationService.error(e.error)}}var x4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},RN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let az=class extends Oe{constructor(e,t,n,r,o){super(),this._onDidShowContextMenu=new Ce,this._onDidHideContextMenu=new Ce,this.contextMenuHandler=new L4e(n,e,t,r,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),Pb.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};az=x4e([RN(0,yg),RN(1,po),RN(2,Hp),RN(3,Er),RN(4,xr)],az);const CR=gi("layoutService");var D4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},T4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let lz=class extends Oe{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Oe.None,this.container=e.container,this.contextView=this._register(new nS(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const r=Un(()=>{this.currentViewDisposable===r&&this.hideContextView()});return this.currentViewDisposable=r,r}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};lz=D4e([T4e(0,CR)],lz);const yR=gi("dialogService");let I4e=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class k4e{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),r),r.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new I4e(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(let[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(r,t);if(o)return o;t.delete(n)}}}class bte extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class O3{constructor(e=new KA,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Nn,this)}createChild(e){return new O3(e,this._strict,this)}invokeFunction(e,...t){let n=Hc.traceInvocation(e),r=!1;try{return e({get:s=>{if(r)throw DEe("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){let n,r;return e instanceof Iv?(n=Hc.traceCreation(e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=Hc.traceCreation(e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){let r=Mh.getServiceDependencies(e).sort((a,u)=>a.index-u.index),o=[];for(const a of r){let u=this._getOrCreateServiceInstance(a.id,n);if(!u&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);o.push(u)}let s=r.length>0?r[0].index:t.length;if(t.length!==s){console.warn(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return new e(...t,...o)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Iv)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Iv?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const r=new k4e(a=>a.id.toString());let o=0;const s=[{id:e,desc:t,_trace:n}];for(;s.length;){const a=s.pop();if(r.lookupOrInsertNode(a),o++>1e3)throw new bte(r);for(let u of Mh.getServiceDependencies(a.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(!d&&!u.optional&&console.warn(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`),d instanceof Iv){const h={id:u.id,desc:d,_trace:a._trace.branch(u.id,!0)};r.insertEdge(a,h),s.push(h)}}}for(;;){const a=r.roots();if(a.length===0){if(!r.isEmpty())throw new bte(r);break}for(const{data:u}of a){if(this._getServiceInstanceOrDescriptor(u.id)instanceof Iv){const h=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setServiceInstance(u.id,h)}r.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,o){if(this._services.get(e)instanceof Iv)return this._createServiceInstance(t,n,r,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,r){if(n){const o=new ow(()=>this._createInstance(e,t,r));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let u=o.value,d=u[a];return typeof d!="function"||(d=d.bind(u),s[a]=d),d},set(s,a,u){return o.value[a]=u,!0}})}else return this._createInstance(e,t,r)}}class Hc{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Hc._None}static traceCreation(e){return Hc._None}branch(e,t){let n=new Hc(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;Hc._totals+=e;let t=!1;function n(o,s){let a=[],u=new Array(o+1).join("	");for(const[d,h,f]of s._dep)if(h&&f){t=!0,a.push(`${u}CREATES -> ${d}`);let p=n(o+1,f);p&&a.push(p)}else a.push(`${u}uses -> ${d}`);return a.join(`
`)}let r=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Hc._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(r.join(`
`))}}Hc._None=new class extends Hc{constructor(){super(-1,null)}stop(){}branch(){return this}};Hc._totals=0;const wR=gi("labelService");class N4e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}}class sb extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function Cte(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const r=Vs.intersect(i,n.range);Vs.isEmpty(r)||t.push({range:r,size:n.size})}return t}function uz({start:i,end:e},t){return{start:i+t,end:e+t}}function A4e(i){const e=[];let t=null;for(let n of i){const r=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:r,end:o},size:s},e.push(t)}return e}function O4e(...i){return A4e(i.reduce((e,t)=>e.concat(t),[]))}class yte{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const r=n.length-t,o=Cte({start:0,end:e},this.groups),s=Cte({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(u=>({range:uz(u.range,r),size:u.size})),a=n.map((u,d)=>({range:{start:e+d,end:e+d+1},size:u.size}));this.groups=O4e(o,a,s),this._size=this.groups.reduce((u,d)=>u+d.size*(d.range.end-d.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const o=r.range.end-r.range.start,s=n+o*r.size;if(e<s)return t+Math.floor((e-n)/r.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const o=r.range.end-r.range.start,s=n+o;if(e<s)return t+(e-n)*r.size;t+=o*r.size,n=s}return-1}}function R4e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class M4e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=Ge(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),R4e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var TC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};const gf={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class SR{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class P4e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class F4e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function B4e(i,e){return Array.isArray(i)&&Array.isArray(e)?rc(i,e):i===e}class W4e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,r)=>r,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class lf{constructor(e,t,n,r=gf){if(this.virtualDelegate=t,this.domId=`list_id_${++lf.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Np(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Oe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Oe.None,this.onDragLeaveTimeout=Oe.None,this.disposables=new Je,this._onDidChangeContentHeight=new Ce,this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new yte;for(const s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new M4e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=ff(r,s=>s.horizontalScrolling,gf.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof r.additionalScrollHeight>"u"?0:r.additionalScrollHeight,this.accessibilityProvider=new W4e(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",ff(r,s=>s.transformOptimization,gf.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Hi.addTarget(this.rowsContainer)),this.scrollable=new YB(ff(r,s=>s.smoothScrolling,!1)?125:0,s=>rg(s)),this.scrollableElement=this.disposables.add(new hq(this.rowsContainer,{alwaysConsumeMouseWheel:ff(r,s=>s.alwaysConsumeMouseWheel,gf.alwaysConsumeMouseWheel),horizontal:1,vertical:ff(r,s=>s.verticalScrollMode,gf.verticalScrollMode),useShadows:ff(r,s=>s.useShadows,gf.useShadows),mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(qe(this.rowsContainer,ur.Change,s=>this.onTouchChange(s))),this.disposables.add(qe(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(qe(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=ff(r,s=>s.setRowLineHeight,gf.setRowLineHeight),this.setRowHeight=ff(r,s=>s.setRowHeight,gf.setRowHeight),this.supportDynamicHeights=ff(r,s=>s.supportDynamicHeights,gf.supportDynamicHeights),this.dnd=ff(r,s=>s.dnd,gf.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:C9(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=Vs.intersect(r,o),a=new Map;for(let H=s.start;H<s.end;H++){const M=this.items[H];if(M.dragStartDisposable.dispose(),M.row){let R=a.get(M.templateId);R||(R=[],a.set(M.templateId,R));const q=this.renderers.get(M.templateId);q&&q.disposeElement&&q.disposeElement(M.element,H,M.row.templateData,M.size),R.push(M.row)}M.row=null}const u={start:e+t,end:this.items.length},d=Vs.intersect(u,r),h=Vs.relativeComplement(u,r),f=n.map(H=>({id:String(this.itemId++),element:H,templateId:this.virtualDelegate.getTemplateId(H),size:this.virtualDelegate.getHeight(H),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(H),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Oe.None}));let p;e===0&&t>=this.items.length?(this.rangeMap=new yte,this.rangeMap.splice(0,0,f),p=this.items,this.items=f):(this.rangeMap.splice(e,t,f),p=this.items.splice(e,t,...f));const m=n.length-t,v=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=uz(d,m),E=Vs.intersect(v,b);for(let H=E.start;H<E.end;H++)this.updateItemInDOM(this.items[H],H);const S=Vs.relativeComplement(b,v);for(const H of S)for(let M=H.start;M<H.end;M++)this.removeItemFromDOM(M);const w=h.map(H=>uz(H,m)),A=[{start:e,end:e+n.length},...w].map(H=>Vs.intersect(v,H)),N=this.getNextToLastElement(A);for(const H of A)for(let M=H.start;M<H.end;M++){const R=this.items[M],q=a.get(R.templateId),X=q==null?void 0:q.pop();this.insertItemInDOM(M,N,X)}for(const H of a.values())for(const M of H)this.cache.release(M);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),p.map(H=>H.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=rg(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:DLe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:C9(this.domNode)})}render(e,t,n,r,o,s=!1){const a=this.getRenderRange(t,n),u=Vs.relativeComplement(a,e),d=Vs.relativeComplement(e,a),h=this.getNextToLastElement(u);if(s){const f=Vs.intersect(e,a);for(let p=f.start;p<f.end;p++)this.updateItemInDOM(this.items[p],p)}for(const f of u)for(let p=f.start;p<f.end;p++)this.insertItemInDOM(p,h);for(const f of d)for(let p=f.start;p<f.end;p++)this.removeItemFromDOM(p);r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const r=this.items[e];r.row||(r.row=n??this.cache.alloc(r.templateId));const o=this.accessibilityProvider.getRole(r.element)||"listitem";r.row.domNode.setAttribute("role",o);const s=this.accessibilityProvider.isChecked(r.element);typeof s<"u"&&r.row.domNode.setAttribute("aria-checked",String(!!s)),r.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);const a=this.renderers.get(r.templateId);if(!a)throw new Error(`No renderer found for template id ${r.templateId}`);a&&a.renderElement(r.element,e,r.row.templateData,r.size);const u=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!u,u&&(r.dragStartDisposable=qe(r.row.domNode,"dragstart",d=>this.onDragStart(r.element,u,d))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=wl?"-moz-fit-content":"fit-content",e.width=C9(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Mt.map(this.disposables.add(new Ui(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Mt.map(this.disposables.add(new Ui(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Mt.filter(Mt.map(this.disposables.add(new Ui(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Mt.map(this.disposables.add(new Ui(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Mt.any(Mt.map(this.disposables.add(new Ui(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Mt.map(this.disposables.add(new Ui(this.domNode,ur.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Mt.map(this.disposables.add(new Ui(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Mt.map(this.disposables.add(new Ui(this.rowsContainer,ur.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Rde.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(r,n)),typeof o>"u"&&(o=String(r.length));const s=Ge(".monaco-drag-image");s.textContent=o,document.body.appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>document.body.removeChild(s),0)}this.currentDragData=new SR(r),Kg.CurrentDragAndDropData=new P4e(r),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Kg.CurrentDragAndDropData&&Kg.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Kg.CurrentDragAndDropData)this.currentDragData=Kg.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new F4e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=x1(n).filter(r=>r>=-1&&r<this.length).sort((r,o)=>r-o),n=n[0]===-1?[-1]:n,B4e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Un(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const r of n){const o=this.items[r];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Un(()=>{for(const r of n){const o=this.items[r];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=w1(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Kg.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Kg.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Oe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=lue(this.domNode).top;this.dragOverAnimationDisposable=RLe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=w1(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const r=n.getAttribute("data-index");if(r){const o=Number(r);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const r=this.getRenderRange(e,t);let o,s;e===this.elementTop(r.start)?(o=r.start,s=0):r.end-r.start>1&&(o=r.start+1,s=this.elementTop(o)-e);let a=0;for(;;){const u=this.getRenderRange(e,t);let d=!1;for(let h=u.start;h<u.end;h++){const f=this.probeDynamicHeight(h);f!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=f,d=d||f!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Vs.relativeComplement(r,u);for(const p of h)for(let m=p.start;m<p.end;m++)this.items[m].row&&this.removeItemFromDOM(m);const f=Vs.relativeComplement(u,r);for(const p of f)for(let m=p.start;m<p.end;m++){const v=m+1,b=v<this.items.length?this.items[v].row:null,E=b?b.domNode:null;this.insertItemInDOM(m,E)}for(let p=u.start;p<u.end;p++)this.items[p].row&&this.updateItemInDOM(this.items[p],p);if(typeof o=="number"){const p=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(o)-s+p;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){const a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let s=t.row.domNode.offsetHeight;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-n}const r=this.cache.alloc(t.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,r.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,r.templateData,void 0)),t.size=r.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(r.domNode),this.cache.release(r),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),ri(this.disposables)}}lf.InstanceCount=0;TC([Io],lf.prototype,"onMouseClick",null);TC([Io],lf.prototype,"onMouseDblClick",null);TC([Io],lf.prototype,"onMouseMiddleClick",null);TC([Io],lf.prototype,"onMouseDown",null);TC([Io],lf.prototype,"onContextMenu",null);TC([Io],lf.prototype,"onTouchStart",null);TC([Io],lf.prototype,"onTap",null);var IC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class V4e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const r=this.renderedElements.findIndex(o=>o.templateData===n);if(r>=0){const o=this.renderedElements[r];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const r=[];for(const o of this.renderedElements)o.index<e?r.push(o):o.index>=e+t&&r.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let R3=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Ce,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new V4e(this)}splice(e,t,n){var r;t=Math.max(0,Math.min(t,this.length-e));const o=n.length-t,s=e+t,a=[...this.sortedIndexes.filter(d=>d<e),...n.map((d,h)=>d?h+e:-1).filter(d=>d!==-1),...this.sortedIndexes.filter(d=>d>=s).map(d=>d+o)],u=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&u>0){const d=(r=this.sortedIndexes.find(h=>h>=e))!==null&&r!==void 0?r:u-1;a.push(Math.min(d,u-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=u}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Ete),t)}_set(e,t,n){const r=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const s=cz(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return DG(this.sortedIndexes,e,Ete)>=0}dispose(){ri(this._onChange)}};IC([Io],R3.prototype,"renderer",null);class H4e extends R3{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class S6{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const r=this.trait.get().map(s=>this.identityProvider.getId(this.view.element(s)).toString()),o=n.map(s=>r.indexOf(this.identityProvider.getId(s).toString())>-1);this.trait.splice(e,t,o)}}function T0(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function zy(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:zy(i.parentElement)}class Lhe{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Je,this.multipleSelectionDisposables=new Je,this.onKeyDown.filter(r=>r.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(r=>(Gn?r.metaKey:r.ctrlKey)&&r.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Mt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).filter(e=>!T0(e.target)).map(e=>new Sr(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(Gn?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Da(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}IC([Io],Lhe.prototype,"onKeyDown",null);var Uy;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(Uy||(Uy={}));const xhe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class $4e{constructor(e,t,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=r,this.enabled=!1,this.state=Uy.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Je,this.disposables=new Je,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Mt.chain(this.enabledDisposables.add(new Ui(this.view.domNode,"keydown")).event).filter(r=>!T0(r.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(r=>new Sr(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>r.preventDefault()).map(r=>r.browserEvent.key).event,t=Mt.debounce(e,()=>null,800);Mt.reduce(Mt.any(e,t),(r,o)=>o===null?null:(r||"")+o)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Is(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Uy.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===Uy.Idle?1:0;this.state=Uy.Typing;for(let o=0;o<this.list.length;o++){const s=(n+o+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),u=a&&a.toString();if(typeof u>"u"||r8(e,u)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class z4e{constructor(e,t){this.list=e,this.view=t,this.disposables=new Je,Mt.chain(this.disposables.add(new Ui(t.domNode,"keydown")).event).filter(r=>!T0(r.target)).map(r=>new Sr(r)).filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const r=n.querySelector("[tabIndex]");if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;const o=window.getComputedStyle(r);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function Dhe(i){return Gn?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function The(i){return i.browserEvent.shiftKey}function U4e(i){return i instanceof MouseEvent&&i.button===2}const Ste={isSelectionSingleChangeEvent:Dhe,isSelectionRangeChangeEvent:The};class Ihe{constructor(e){this.list=e,this.disposables=new Je,this._onPointer=new Ce,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Ste),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Hi.addTarget(e.getHTMLElement()))),Mt.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Ste))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){zy(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(zy(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||T0(e.browserEvent.target)||zy(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),U4e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(T0(e.browserEvent.target)||zy(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const h=this.list.getFocus()[0];n=h??t,this.list.setAnchor(n)}const r=Math.min(n,t),o=Math.max(n,t),s=Da(r,o+1),a=this.list.getSelection(),u=G4e(cz(a,[n]),n);if(u.length===0)return;const d=cz(s,q4e(a,u));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),o=r.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class khe{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):Gn||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const j4e={listFocusBackground:we.fromHex("#7FB0D0"),listActiveSelectionBackground:we.fromHex("#0E639C"),listActiveSelectionForeground:we.fromHex("#FFFFFF"),listActiveSelectionIconForeground:we.fromHex("#FFFFFF"),listFocusAndSelectionBackground:we.fromHex("#094771"),listFocusAndSelectionForeground:we.fromHex("#FFFFFF"),listInactiveSelectionBackground:we.fromHex("#3F3F46"),listInactiveSelectionIconForeground:we.fromHex("#FFFFFF"),listHoverBackground:we.fromHex("#2A2D2E"),listDropBackground:we.fromHex("#383B3D"),treeIndentGuidesStroke:we.fromHex("#a9a9a9"),tableColumnsBorder:we.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:we.fromHex("#cccccc").transparent(.04)},K4e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function G4e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let r=t-1;for(;r>=0&&i[r]===e-(t-r);)n.push(i[r--]);for(n.reverse(),r=t;r<i.length&&i[r]===e+(r-t);)n.push(i[r++]);return n}function cz(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){t.push(i[n]),n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):t.push(e[r++]);return t}function q4e(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):r++;return t}const Ete=(i,e)=>i-e;class Y4e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let o=0;for(const s of this.renderers)s.renderElement(e,t,n[o++],r)}disposeElement(e,t,n,r){let o=0;for(const s of this.renderers)s.disposeElement&&s.disposeElement(e,t,n[o],r),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class Z4e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.setAttribute("aria-level",`${o}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class X4e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){var o,s;(s=(o=this.dnd).onDragLeave)===null||s===void 0||s.call(o,e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}}class Lg{constructor(e,t,n,r,o=K4e){var s;this.user=e,this._options=o,this.focus=new R3("focused"),this.anchor=new R3("anchor"),this.eventBufferer=new tG,this._ariaLabel="",this.disposables=new Je,this._onDidDispose=new Ce,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(s=this._options.accessibilityProvider)===null||s===void 0?void 0:s.getWidgetRole():"list";this.selection=new H4e(a!=="listbox"),Eg(o,j4e,!1);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(u.push(new Z4e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(h=>new Y4e(h.templateId,[...u,h]));const d=Object.assign(Object.assign({},o),{dnd:o.dnd&&new X4e(this,o.dnd)});if(this.view=new lf(t,n,r,d),this.view.domNode.setAttribute("role",a),o.styleController)this.styleController=o.styleController(this.view.domId);else{const h=uc(this.view.domNode);this.styleController=new khe(h,this.view.domId)}if(this.spliceable=new N4e([new S6(this.focus,this.view,o.identityProvider),new S6(this.selection,this.view,o.identityProvider),new S6(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new z4e(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new Lhe(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const h=o.keyboardNavigationDelegate||xhe;this.typeLabelController=new $4e(this,this.view,o.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Mt.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Mt.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Mt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).map(o=>new Sr(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Wee).filter(()=>!1).event,n=Mt.chain(this.disposables.add(new Ui(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(o=>new Sr(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Wee).map(({browserEvent:o})=>{const s=this.getFocus(),a=s.length?s[0]:void 0,u=typeof a<"u"?this.view.element(a):void 0,d=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:u,anchor:d,browserEvent:o}}).event,r=Mt.chain(this.view.onContextMenu).filter(o=>!e).map(({element:o,index:s,browserEvent:a})=>({element:o,index:s,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Mt.any(t,n,r)}get onKeyDown(){return this.disposables.add(new Ui(this.view.domNode,"keydown")).event}get onDidFocus(){return Mt.signal(this.disposables.add(new Ui(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new Ihe(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new sb(this.user,`Invalid start index: ${e}`);if(t<0)throw new sb(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new sb(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new sb(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return EH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new sb(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;const o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,r);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;const o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,r);s>-1&&this.setFocus([s],n)}focusNextPage(e,t){return wte(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const r=this.view.element(n),o=this.getFocusedElements()[0];if(o!==r){const s=this.findPreviousIndex(n,!1,t);s>-1&&o!==this.view.element(s)?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();this.view.setScrollTop(s+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==s&&(this.setFocus([]),yield m0(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return wte(this,void 0,void 0,function*(){let n;const r=this.view.getScrollTop();r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const o=this.view.element(n),s=this.getFocusedElements()[0];if(s!==o){const a=this.findNextIndex(n,!1,t);a>-1&&s!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield m0(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new sb(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(E1(t)){const s=o-this.view.renderHeight;this.view.setScrollTop(s*Rc(t,0,1)+r)}else{const s=r+o,a=n+this.view.renderHeight;r<n&&s>=a||(r<n||s>=a&&o>=this.view.renderHeight?this.view.setScrollTop(r):s>=a&&this.view.setScrollTop(s-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new sb(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<t||n+r>t+this.view.renderHeight)return null;const o=r-this.view.renderHeight;return Math.abs((t-n)/o)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}IC([Io],Lg.prototype,"onDidChangeFocus",null);IC([Io],Lg.prototype,"onDidChangeSelection",null);IC([Io],Lg.prototype,"onContextMenu",null);IC([Io],Lg.prototype,"onKeyDown",null);IC([Io],Lg.prototype,"onDidFocus",null);class Q4e{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Oe.None}}renderElement(e,t,n,r){if(n.disposable&&n.disposable.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,r);const s=new aa,a=o.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(u=>this.renderer.renderElement(u,e,n.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class J4e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function eFe(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new J4e(i,e.accessibilityProvider)})}class tFe{constructor(e,t,n,r,o={}){const s=()=>this.model,a=r.map(u=>new Q4e(u,s));this.list=new Lg(e,t,n,a,eFe(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Mt.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Mt.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Mt.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Da(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const nFe={separatorBorder:we.transparent};class Nhe{constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=Rc(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class iFe extends Nhe{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class rFe extends Nhe{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Gg;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Gg||(Gg={}));var M3;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(M3||(M3={}));class Ahe extends Oe{constructor(e,t={}){var n,r,o,s,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Gg.Idle,this._onDidSashChange=this._register(new Ce),this._onDidSashReset=this._register(new Ce),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(r=t.inverseAltBehavior)!==null&&r!==void 0?r:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Be(this.el,Ge(".sash-container")),this.viewContainer=Ge(".split-view-container"),this.scrollable=new YB(125,rg),this.scrollableElement=this._register(new hq(this.viewContainer,{vertical:this.orientation===0?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(u=>{this.viewContainer.scrollTop=u.scrollTop,this.viewContainer.scrollLeft=u.scrollLeft})),Be(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||nFe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((u,d)=>{const h=ml(u.visible)||u.visible?u.size:{type:"invisible",cachedVisibleSize:u.size},f=u.view;this.doAddView(f,h,d,!0)}),this.contentSize=this.viewItems.reduce((u,d)=>u+d.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r];o.size=Rc(Math.round(this.proportions[r]*e),o.minimumSize,o.maximumSize)}else{const r=Da(this.viewItems.length),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),o=t0(qe(document.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),qe(document.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,u)=>{const d=this.viewItems.map(v=>v.size);let h=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(u=!u),u)if(r===this.sashItems.length-1){const b=this.viewItems[r];h=(b.minimumSize-b.size)/2,f=(b.maximumSize-b.size)/2}else{const b=this.viewItems[r+1];h=(b.size-b.maximumSize)/2,f=(b.size-b.minimumSize)/2}let p,m;if(!u){const v=Da(r,-1),b=Da(r+1,this.viewItems.length),E=v.reduce((R,q)=>R+(this.viewItems[q].minimumSize-d[q]),0),S=v.reduce((R,q)=>R+(this.viewItems[q].viewMaximumSize-d[q]),0),w=b.length===0?Number.POSITIVE_INFINITY:b.reduce((R,q)=>R+(d[q]-this.viewItems[q].minimumSize),0),L=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((R,q)=>R+(d[q]-this.viewItems[q].viewMaximumSize),0),A=Math.max(E,L),N=Math.min(w,S),H=this.findFirstSnapIndex(v),M=this.findFirstSnapIndex(b);if(typeof H=="number"){const R=this.viewItems[H],q=Math.floor(R.viewMinimumSize/2);p={index:H,limitDelta:R.visible?A-q:A+q,size:R.size}}if(typeof M=="number"){const R=this.viewItems[M],q=Math.floor(R.viewMinimumSize/2);m={index:M,limitDelta:R.visible?N+q:N-q,size:R.size}}}this.sashDragState={start:a,current:a,index:r,sizes:d,minDelta:h,maxDelta:f,alt:u,snapBefore:p,snapAfter:m,disposable:o}};s(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:r,alt:o,minDelta:s,maxDelta:a,snapBefore:u,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const h=e-n,f=this.resize(t,h,r,void 0,void 0,s,a,u,d);if(o){const p=t===this.sashItems.length-1,m=this.viewItems.map(L=>L.size),v=p?t:t+1,b=this.viewItems[v],E=b.size-b.maximumSize,S=b.size-b.minimumSize,w=p?t-1:t+1;this.resize(w,-f,m,void 0,void 0,E,S)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Rc(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Gg.Idle)throw new Error("Cant modify splitview");if(this.state=Gg.Busy,e<0||e>=this.viewItems.length)return;const n=Da(this.viewItems.length).filter(a=>a!==e),r=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=Rc(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(r,o),this.state=Gg.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Rc(n,a.minimumSize,a.maximumSize);const r=Da(this.viewItems.length),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==Gg.Idle)throw new Error("Cant modify splitview");this.state=Gg.Busy;const o=Ge(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const s=e.onDidChange(p=>this.onViewChange(h,p)),a=Un(()=>this.viewContainer.removeChild(o)),u=t0(s,a);let d;typeof t=="number"?d=t:t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize;const h=this.orientation===0?new iFe(o,e,d,u):new rFe(o,e,d,u);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let p={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const m=this.orientation===0?new Hs(this.sashContainer,{getHorizontalSashTop:R=>this.getSashPosition(R),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:1})):new Hs(this.sashContainer,{getVerticalSashLeft:R=>this.getSashPosition(R),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:0})),v=this.orientation===0?R=>({sash:m,start:R.startY,current:R.currentY,alt:R.altKey}):R=>({sash:m,start:R.startX,current:R.currentX,alt:R.altKey}),E=Mt.map(m.onDidStart,v)(this.onSashStart,this),w=Mt.map(m.onDidChange,v)(this.onSashChange,this),A=Mt.map(m.onDidEnd,()=>this.sashItems.findIndex(R=>R.sash===m))(this.onSashEnd,this),N=m.onDidReset(()=>{const R=this.sashItems.findIndex(O=>O.sash===m),q=Da(R,-1),X=Da(R+1,this.viewItems.length),$=this.findFirstSnapIndex(q),I=this.findFirstSnapIndex(X);typeof $=="number"&&!this.viewItems[$].visible||typeof I=="number"&&!this.viewItems[I].visible||this._onDidSashReset.fire(R)}),H=t0(E,w,A,N,m),M={sash:m,disposable:H};this.sashItems.splice(n-1,0,M)}o.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),r||this.relayout([n],f),this.state=Gg.Idle,!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((r,o)=>r+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),r,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u,d){if(e<0||e>=this.viewItems.length)return 0;const h=Da(e,-1),f=Da(e+1,this.viewItems.length);if(o)for(const M of o)S9(h,M),S9(f,M);if(r)for(const M of r)LM(h,M),LM(f,M);const p=h.map(M=>this.viewItems[M]),m=h.map(M=>n[M]),v=f.map(M=>this.viewItems[M]),b=f.map(M=>n[M]),E=h.reduce((M,R)=>M+(this.viewItems[R].minimumSize-n[R]),0),S=h.reduce((M,R)=>M+(this.viewItems[R].maximumSize-n[R]),0),w=f.length===0?Number.POSITIVE_INFINITY:f.reduce((M,R)=>M+(n[R]-this.viewItems[R].minimumSize),0),L=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((M,R)=>M+(n[R]-this.viewItems[R].maximumSize),0),A=Math.max(E,L,s),N=Math.min(w,S,a);let H=!1;if(u){const M=this.viewItems[u.index],R=t>=u.limitDelta;H=R!==M.visible,M.setVisible(R,u.size)}if(!H&&d){const M=this.viewItems[d.index],R=t<d.limitDelta;H=R!==M.visible,M.setVisible(R,d.size)}if(H)return this.resize(e,t,n,r,o,s,a);t=Rc(t,A,N);for(let M=0,R=t;M<p.length;M++){const q=p[M],X=Rc(m[M]+R,q.minimumSize,q.maximumSize),$=X-m[M];R-=$,q.size=X}for(let M=0,R=t;M<v.length;M++){const q=v[M],X=Rc(b[M]-R,q.minimumSize,q.maximumSize),$=X-b[M];R+=$,q.size=X}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,u)=>a+u.size,0);let n=this.size-t;const r=Da(this.viewItems.length-1,-1),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);for(const a of s)S9(r,a);for(const a of o)LM(r,a);typeof e=="number"&&LM(r,e);for(let a=0;n!==0&&a<r.length;a++){const u=this.viewItems[r[a]],d=Rc(u.size+n,u.minimumSize,u.maximumSize),h=d-u.size;n-=h,u.size=d}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(u=>e=u.size-u.minimumSize>0||e);e=!1;const n=this.viewItems.map(u=>e=u.maximumSize-u.size>0||e),r=[...this.viewItems].reverse();e=!1;const o=r.map(u=>e=u.size-u.minimumSize>0||e).reverse();e=!1;const s=r.map(u=>e=u.maximumSize-u.size>0||e).reverse();let a=0;for(let u=0;u<this.sashItems.length;u++){const{sash:d}=this.sashItems[u],h=this.viewItems[u];a+=h.size;const f=!(t[u]&&s[u+1]),p=!(n[u]&&o[u+1]);if(f&&p){const m=Da(u,-1),v=Da(u+1,this.viewItems.length),b=this.findFirstSnapIndex(m),E=this.findFirstSnapIndex(v),S=typeof b=="number"&&!this.viewItems[b].visible,w=typeof E=="number"&&!this.viewItems[E].visible;S&&o[u]&&(a>0||this.startSnappingEnabled)?d.state=1:w&&t[u]&&(a<this.contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else f&&!p?d.state=1:!f&&p?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class ER{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=ER.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const s=r.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}renderTemplate(e){const t=Be(e,Ge(".monaco-table-tr")),n=[],r=[];for(let s=0;s<this.columns.length;s++){const a=this.renderers[s],u=Be(t,Ge(".monaco-table-td",{"data-col-index":s}));u.style.width=`${this.getColumnSize(s)}px`,n.push(u),r.push(a.renderTemplate(u))}const o={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(o),o}renderElement(e,t,n,r){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],r)}}disposeElement(e,t,n,r){for(let o=0;o<this.columns.length;o++){const s=this.renderers[o];if(s.disposeElement){const u=this.columns[o].project(e);s.disposeElement(u,t,n.cellTemplateData[o],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);$o(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}ER.TemplateId="row";function oFe(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return ER.TemplateId}}}class sFe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new Ce,this.onDidLayout=this._onDidLayout.event,this.element=Ge(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Mt.None}layout(e){this._onDidLayout.fire([this.index,e])}}class l8{constructor(e,t,n,r,o,s){this.virtualDelegate=n,this.domId=`table_id_${++l8.InstanceCount}`,this.disposables=new Je,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Be(t,Ge(`.monaco-table.${this.domId}`));const a=r.map((h,f)=>new sFe(h,f)),u={size:a.reduce((h,f)=>h+f.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new Ahe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:u})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const d=new ER(r,o,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new Lg(e,this.domNode,oFe(n),[d],s)),Mt.any(...a.map(h=>h.onDidLayout))(([h,f])=>d.layoutColumn(h,f),null,this.disposables),this.splitview.onDidSashReset(h=>{const f=r.reduce((m,v)=>m+v.weight,0),p=r[h].weight/f*this.cachedWidth;this.splitview.resizeView(h,p)},null,this.disposables),this.styleElement=uc(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}l8.InstanceCount=0;var z2;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(z2||(z2={}));class Xu extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class jq{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function Kq(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function sO(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function E6(i){return typeof i.collapsible=="boolean"}class aFe{constructor(e,t,n,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new tG,this._onDidChangeCollapseState=new Ce,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Ce,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Ce,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Qn.empty(),r={}){if(e.length===0)throw new Xu(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r,o,s){var a;r===void 0&&(r=Qn.empty()),s===void 0&&(s=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:u}=this.getParentNodeWithListIndex(t);if(!u.lastDiffIds)return this.spliceSimple(t,n,r,o);const d=[...r],h=t[t.length-1],f=new Bf({getElements:()=>u.lastDiffIds},{getElements:()=>[...u.children.slice(0,h),...d,...u.children.slice(h+n)].map(E=>e.getId(E.element).toString())}).ComputeDiff(!1);if(f.quitEarly)return u.lastDiffIds=void 0,this.spliceSimple(t,n,d,o);const p=t.slice(0,-1),m=(E,S,w)=>{if(s>0)for(let L=0;L<w;L++)E--,S--,this.spliceSmart(e,[...p,E,0],Number.MAX_SAFE_INTEGER,d[S].children,o,s-1)};let v=Math.min(u.children.length,h+n),b=d.length;for(const E of f.changes.sort((S,w)=>w.originalStart-S.originalStart))m(v,b,v-(E.originalStart+E.originalLength)),v=E.originalStart,b=E.modifiedStart-h,this.spliceSimple([...p,v],E.originalLength,Qn.slice(d,b,b+E.modifiedLength),o);m(v,b,v)}spliceSimple(e,t,n=Qn.empty(),{onDidCreateNode:r,onDidDeleteNode:o,diffIdentityProvider:s}){const{parentNode:a,listIndex:u,revealed:d,visible:h}=this.getParentNodeWithListIndex(e),f=[],p=Qn.map(n,M=>this.createTreeNode(M,a,a.visible?1:0,d,f,r)),m=e[e.length-1],v=a.children.length>0;let b=0;for(let M=m;M>=0&&M<a.children.length;M--){const R=a.children[M];if(R.visible){b=R.visibleChildIndex;break}}const E=[];let S=0,w=0;for(const M of p)E.push(M),w+=M.renderNodeCount,M.visible&&(M.visibleChildIndex=b+S++);const L=uJ(a.children,m,t,E);s?a.lastDiffIds?uJ(a.lastDiffIds,m,t,E.map(M=>s.getId(M.element).toString())):a.lastDiffIds=a.children.map(M=>s.getId(M.element).toString()):a.lastDiffIds=void 0;let A=0;for(const M of L)M.visible&&A++;if(A!==0)for(let M=m+E.length;M<a.children.length;M++){const R=a.children[M];R.visible&&(R.visibleChildIndex-=A)}if(a.visibleChildrenCount+=S-A,d&&h){const M=L.reduce((R,q)=>R+(q.visible?q.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-M),this.list.splice(u,M,f)}if(L.length>0&&o){const M=R=>{o(R),R.children.forEach(M)};L.forEach(M)}const N=a.children.length>0;v!==N&&this.setCollapsible(e.slice(0,-1),N),this._onDidSplice.fire({insertedNodes:E,deletedNodes:L});let H=a;for(;H;){if(H.visibility===2){this.refilter();break}H=H.parent}}rerender(e){if(e.length===0)throw new Xu(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:r,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,r,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!E6(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let u=0;u<n.children.length;u++)if(n.children[u].visible)if(a>-1){a=-1;break}else a=u;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,r){const o=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!o)return o;const s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),u=s-(t===-1?0:1);return this.list.splice(t+1,u,a.slice(1)),o}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(E6(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!E6(t)&&t.recursive)for(const o of e.children)r=this._setNodeCollapseState(o,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,r,o,s){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},u=this._filterNode(a,n);a.visibility=u,r&&o.push(a);const d=e.children||Qn.empty(),h=r&&u!==0&&!a.collapsed,f=Qn.map(d,v=>this.createTreeNode(v,a,u,h,o,s));let p=0,m=1;for(const v of f)a.children.push(v),m+=v.renderNodeCount,v.visible&&(v.visibleChildIndex=p++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=p,a.visible=u===2?p>0:u===1,a.visible?a.collapsed||(a.renderNodeCount=m):(a.renderNodeCount=0,r&&o.pop()),s&&s(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}const s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let u=0;for(const d of e.children)a=this._updateNodeAfterFilterChange(d,o,n,r&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=u++);e.visibleChildrenCount=u}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):Kq(n)?(e.filterData=n.data,sO(n.visibility)):(e.filterData=void 0,sO(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...r]=e;if(n<0||n>t.children.length)throw new Xu(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:r,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new Xu(this.user,"Invalid tree location");const a=t.children[s];return{node:a,listIndex:n,revealed:r,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,o=!0){const[s,...a]=e;if(s<0||s>t.children.length)throw new Xu(this.user,"Invalid tree location");for(let u=0;u<s;u++)n+=t.children[u].renderNodeCount;return r=r&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:r,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],n+1,r,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Nxe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class lFe extends SR{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function L6(i){return i instanceof SR?new lFe(i):i}class uFe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Oe.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(L6(e),t)}onDragOver(e,t,n,r,o=!0){const s=this.dnd.onDragOver(L6(e),t&&t.element,n,r),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return s;if(a&&typeof s!="boolean"&&s.autoExpand&&(this.autoExpandDisposable=w1(()=>{const p=this.modelProvider(),m=p.getNodeLocation(t);p.isCollapsed(m)&&p.setCollapsed(m,!1),this.autoExpandNode=void 0},500)),typeof s=="boolean"||!s.accept||typeof s.bubble>"u"||s.feedback){if(!o){const p=typeof s=="boolean"?s:s.accept,m=typeof s=="boolean"?void 0:s.effect;return{accept:p,effect:m,feedback:[n]}}return s}if(s.bubble===1){const p=this.modelProvider(),m=p.getNodeLocation(t),v=p.getParentNodeLocation(m),b=p.getNode(v),E=v&&p.getListIndex(v);return this.onDragOver(e,b,E,r,!1)}const u=this.modelProvider(),d=u.getNodeLocation(t),h=u.getListIndex(d),f=u.getListRenderCount(d);return Object.assign(Object.assign({},s),{feedback:Da(h,h+f)})}drop(e,t,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(L6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function cFe(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new uFe(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),r=n.getNodeLocation(t),o=n.getParentNodeLocation(r);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class Gq{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var aO;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(aO||(aO={}));class dFe{constructor(e,t=[]){this._elements=t,this.onDidChange=Mt.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class lO{constructor(e,t,n,r,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=lO.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new ODe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Oe.None,this.disposables=new Je,this.templateId=e.templateId,this.updateOptions(o),Mt.map(n,s=>s.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=Rc(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==aO.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Je;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Be(e,Ge(".monaco-tl-row")),n=Be(t,Ge(".monaco-tl-indent")),r=Be(t,Ge(".monaco-tl-twistie")),o=Be(t,Ge(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:r,indentGuidesDisposable:Oe.None,templateData:s}}renderElement(e,t,n,r){typeof r=="number"&&(this.renderedNodes.set(e,{templateData:n,height:r}),this.renderedElements.set(e.element,e));const o=lO.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${o}px`,n.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,n),typeof r=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,r)}disposeElement(e,t,n,r){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._e.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(..._e.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if($o(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Je,r=this.modelProvider();let o=e;for(;;){const s=r.getNodeLocation(o),a=r.getParentNodeLocation(s);if(!a)break;const u=r.getNode(a),d=Ge(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(u)&&d.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(d):t.indent.insertBefore(d,t.indent.firstElementChild),this.renderedIndentGuides.add(u,d),n.add(Un(()=>this.renderedIndentGuides.delete(u,d))),o=u}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(r=>{const o=n.getNodeLocation(r);try{const s=n.getParentNodeLocation(o);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):s&&t.add(n.getNode(s))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,o=>o.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ri(this.disposables)}}lO.DefaultIndent=8;class hFe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Je,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const o=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return o;let s;if(typeof o=="boolean"?s=o?1:0:Kq(o)?s=sO(o.visibility):s=o,s===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Yh.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(const o of r){const s=o&&o.toString();if(typeof s>"u")return{data:Yh.Default,visibility:!0};const a=iS(this._pattern,this._lowercasePattern,0,s,s.toLowerCase(),0,!0);if(a)return this._matchCount++,r.length===1?{data:a,visibility:!0}:{data:{label:s,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Yh.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ri(this.disposables)}}class fFe{constructor(e,t,n,r,o){this.tree=e,this.view=n,this.filter=r,this.keyboardNavigationDelegate=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new Ce,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new Ce,this.enabledDisposables=new Je,this.disposables=new Je,this.domNode=Ge(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(qe(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=Be(n.getHTMLElement(),Ge(".monaco-list-type-filter-message")),this.labelDomNode=Be(this.domNode,Ge("span.label"));const s=Be(this.domNode,Ge(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=Be(s,Ge("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(qe(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=Be(s,Ge("button.clear"+_e.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=C("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Ui(this.view.getHTMLElement(),"keydown")),t=Mt.chain(e.event).filter(r=>!T0(r.target)||r.target===this.filterOnTypeDomNode).filter(r=>r.key!=="Dead"&&!/^Media/.test(r.key)).map(r=>new Sr(r)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(r=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(r)&&!(r.keyCode===18||r.keyCode===16||r.keyCode===15||r.keyCode===17)||(this.pattern.length>0||this.triggered)&&(r.keyCode===9||r.keyCode===1)&&!r.altKey&&!r.ctrlKey&&!r.metaKey||r.keyCode===1&&(Gn?r.altKey&&!r.metaKey:r.ctrlKey)&&!r.shiftKey).forEach(r=>{r.stopPropagation(),r.preventDefault()}).event,n=this.enabledDisposables.add(new Ui(this.clearDomNode,"click"));Mt.chain(Mt.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(Gn?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,r=>!Yh.isDefault(r.filterData));const n=this.tree.getFocus();if(n.length>0){const r=n[0];this.tree.getRelativeTop(r)===null&&this.tree.reveal(r,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Us(e),n=e.clientWidth,r=n/2,o=this.domNode.clientWidth,s=new Je;let a=this.positionClassName;const u=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-o-6}px`;break}},d=f=>{f.preventDefault();const p=f.clientX-t;f.dataTransfer&&(f.dataTransfer.dropEffect="none"),p<r?a="nw":a="ne",u()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",ri(s)};u(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),s.add(Un(()=>this.domNode.classList.remove("dragging"))),s.add(qe(document,"dragover",f=>d(f))),s.add(qe(this.domNode,"dragend",()=>h())),Kg.CurrentDragAndDropData=new VRe("vscode-ui"),s.add(Un(()=>Kg.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=C("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=C("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=C("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=C("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"…"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Yh.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),ri(this.disposables)}}function Lte(i){let e=z2.Unknown;return nJ(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=z2.Twistie:nJ(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=z2.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function g4(i,e){e(i),i.children.forEach(t=>g4(t,e))}class x6{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&rc(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const u=this.createNodeSet(),d=h=>u.delete(h);t.forEach(h=>g4(h,d)),this.set([...u.values()]);return}const n=new Set,r=u=>n.add(this.identityProvider.getId(u.element).toString());t.forEach(u=>g4(u,r));const o=new Map,s=u=>o.set(this.identityProvider.getId(u.element).toString(),u);e.forEach(u=>g4(u,s));const a=[];for(const u of this.nodes){const d=this.identityProvider.getId(u.element).toString();if(!n.has(d))a.push(u);else{const f=o.get(d);f&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const u=this.getFirstViewElementWithTrait();u&&a.push(u)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class gFe extends Ihe{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(T0(e.browserEvent.target)||zy(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,r=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const s=this.tree.model,a=s.getNodeLocation(t),u=e.browserEvent.altKey;if(this.tree.setFocus([a]),s.setCollapsed(a,void 0,u),o&&r)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class pFe extends Lg{constructor(e,t,n,r,o,s,a,u){super(e,t,n,r,u),this.focusTrait=o,this.selectionTrait=s,this.anchorTrait=a}createMouseController(e){return new gFe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const r=[],o=[];let s;n.forEach((a,u)=>{this.focusTrait.has(a)&&r.push(e+u),this.selectionTrait.has(a)&&o.push(e+u),this.anchorTrait.has(a)&&(s=e+u)}),r.length>0&&super.setFocus(x1([...super.getFocus(),...r])),o.length>0&&super.setSelection(x1([...super.getSelection(),...o])),typeof s=="number"&&super.setAnchor(s)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Ohe{constructor(e,t,n,r,o={}){this._options=o,this.eventBufferer=new tG,this.disposables=new Je,this._onWillRefilter=new Ce,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Ce;const s=new Gq(n),a=new QQ,u=new QQ,d=new dFe(u.event);this.renderers=r.map(p=>new lO(p,()=>this.model,a.event,d,o));for(let p of this.renderers)this.disposables.add(p);let h;o.keyboardNavigationLabelProvider&&(h=new hFe(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:h}),this.disposables.add(h)),this.focus=new x6(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new x6(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new x6(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new pFe(e,t,s,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},cFe(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),a.input=this.model.onDidChangeCollapseState;const f=Mt.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})});if(f(()=>null,null,this.disposables),u.input=Mt.chain(Mt.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const m of this.focus.getNodes())p.add(m);for(const m of this.selection.getNodes())p.add(m);return[...p.values()]}).event,o.keyboardSupport!==!1){const p=Mt.chain(this.view.onKeyDown).filter(m=>!T0(m.target)).map(m=>new Sr(m));p.filter(m=>m.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(m=>m.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(m=>m.keyCode===10).on(this.onSpace,this,this.disposables)}if(o.keyboardNavigationLabelProvider){const p=o.keyboardNavigationDelegate||xhe;this.typeFilterController=new fFe(this,this.model,this.view,h,p),this.focusNavigationFilter=m=>this.typeFilterController.shouldAllowFocus(m),this.disposables.add(this.typeFilterController)}this.styleElement=uc(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Mt.map(this.view.onMouseDblClick,Lte)}get onPointer(){return Mt.map(this.view.onPointer,Lte)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Mt.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const r=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(r,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const r=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(r,t,!0)}focusNext(e=1,t=!1,n,r=this.focusNavigationFilter){this.view.focusNext(e,t,n,r)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){const s=this.model.getParentNodeLocation(r);if(!s)return;const a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(u=>u.visible))return;const[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,o)}dispose(){ri(this.disposables),this.view.dispose()}}class qq{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new aFe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(r,o){return n.sorter.compare(r.element,o.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Qn.empty(),n={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=Qn.empty(),n){const r=new Set,o=new Set,s=u=>{var d;if(u.element===null)return;const h=u;if(r.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();o.add(f),this.nodesByIdentity.set(f,h)}(d=n.onDidCreateNode)===null||d===void 0||d.call(n,h)},a=u=>{var d;if(u.element===null)return;const h=u;if(r.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();o.has(f)||this.nodesByIdentity.delete(f)}(d=n.onDidDeleteNode)===null||d===void 0||d.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:a}))}preserveCollapseState(e=Qn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Qn.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const r=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:r,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Xu(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function p4(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Qn.map(Qn.from(i.children),p4),collapsible:i.collapsible,collapsed:i.collapsed}}function m4(i){const e=[i.element],t=i.incompressible||!1;let n,r;for(;[r,n]=Qn.consume(Qn.from(i.children),2),!(r.length!==1||r[0].incompressible);)i=r[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Qn.map(Qn.concat(r,n),m4),collapsible:i.collapsible,collapsed:i.collapsed}}function dz(i,e=0){let t;return e<i.element.elements.length-1?t=[dz(i,e+1)]:t=Qn.map(Qn.from(i.children),n=>dz(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function xte(i){return dz(i,0)}function Rhe(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:Qn.map(Qn.from(i.children),n=>Rhe(n,e,t))})}const mFe=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class _Fe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new qq(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Qn.empty(),n){const r=n.diffIdentityProvider&&mFe(n.diffIdentityProvider);if(e===null){const m=Qn.map(t,this.enabled?m4:p4);this._setChildren(null,m,{diffIdentityProvider:r,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),u=this.model.getNode(a),d=xte(s),h=Rhe(d,e,t),f=(this.enabled?m4:p4)(h),p=u.children.map(m=>m===s?f:m);this._setChildren(u.element,p,{diffIdentityProvider:r,diffDepth:s.depth-u.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,r=Qn.map(n,xte),o=Qn.map(r,e?m4:p4);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const r=new Set,o=a=>{for(const u of a.element.elements)r.add(u),this.nodes.set(u,a.element)},s=a=>{for(const u of a.element.elements)r.has(u)||this.nodes.delete(u)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:s}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return t}}const vFe=i=>i[i.length-1];class Yq{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new Yq(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function bFe(i,e){return{splice(t,n,r){e.splice(t,n,r.map(o=>i.map(o)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function CFe(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class yFe{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||vFe;const r=o=>this.elementMapper(o.elements);this.nodeMapper=new jq(o=>new Yq(r,o)),this.model=new _Fe(e,bFe(this.nodeMapper,t),CFe(r,n))}get onDidSplice(){return Mt.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Mt.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Mt.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Qn.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var wFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};class Zq extends Ohe{constructor(e,t,n,r,o={}){super(e,t,n,r,o)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Qn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new qq(e,t,n)}}class Mhe{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,r))}disposeElement(e,t,n,r){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,r):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}wFe([Io],Mhe.prototype,"compressedTreeNodeProvider",null);function SFe(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class Phe extends Zq{constructor(e,t,n,r,o={}){const s=()=>this,a=r.map(u=>new Mhe(s,u));super(e,t,n,a,SFe(s,o))}setChildren(e,t=Qn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new yFe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var vv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function D6(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function hz(i,e){return e.parent?e.parent===i?!0:hz(i,e.parent):!1}function EFe(i,e){return i===e||hz(i,e)||hz(e,i)}class Xq{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new Xq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class LFe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Dte(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function Tte(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class xFe extends SR{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function T6(i){return i instanceof SR?new xFe(i):i}class DFe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(T6(e),t)}onDragOver(e,t,n,r,o=!0){return this.dnd.onDragOver(T6(e),t&&t.element,n,r)}drop(e,t,n,r){this.dnd.drop(T6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function Fhe(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new DFe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function fz(i,e){e(i),i.children.forEach(t=>fz(t,e))}class Bhe{constructor(e,t,n,r,o,s={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Ce,this._onDidChangeNodeSlowState=new Ce,this.nodeMapper=new jq(a=>new Xq(a)),this.disposables=new Je,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,n,r,s),this.root=D6({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Mt.map(this.tree.onDidChangeFocus,Dte)}get onDidChangeSelection(){return Mt.map(this.tree.onDidChangeSelection,Dte)}get onMouseDblClick(){return Mt.map(this.tree.onMouseDblClick,Tte)}get onPointer(){return Mt.map(this.tree.onPointer,Tte)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,r,o){const s=new Gq(n),a=r.map(d=>new LFe(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),u=Fhe(o)||{};return new Zq(e,t,s,a,u)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return vv(this,void 0,void 0,function*(){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,r,o){return vv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Xu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Mt.toPromise(this._onDidRender.event));const s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,r,o),n)try{this.tree.rerender(s)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return vv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Xu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Mt.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Mt.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Mt.toPromise(this._onDidRender.event)),r})}setSelection(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Xu(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,r){return vv(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,r)})}refreshNode(e,t,n){return vv(this,void 0,void 0,function*(){let r;return this.subTreeRefreshPromises.forEach((o,s)=>{!r&&EFe(s,e)&&(r=o.then(()=>this.refreshNode(e,t,n)))}),r||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return vv(this,void 0,void 0,function*(){let r;e.refreshPromise=new Promise(o=>r=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,n);e.stale=!1,yield fH.settled(o.map(s=>this.doRefreshSubTree(s,t,n)))}finally{r()}})}doRefreshNode(e,t,n){return vv(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(Qn.empty());else{const o=m0(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},s=>null),r=this.doGetChildren(e).finally(()=>o.cancel())}try{const o=yield r;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Cg(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=cs(()=>vv(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(gn))}setChildren(e,t,n,r){const o=[...t];if(e.children.length===0&&o.length===0)return[];const s=new Map,a=new Map;for(const h of e.children)if(s.set(h.element,h),this.identityProvider){const f=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:f})}const u=[],d=o.map(h=>{const f=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const b=D6({element:h,parent:e,hasChildren:f});return f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const p=this.identityProvider.getId(h).toString(),m=a.get(p);if(m){const b=m.node;return s.delete(b.element),this.nodes.delete(b.element),this.nodes.set(h,b),b.element=h,b.hasChildren=f,n?m.collapsed?(b.children.forEach(E=>fz(E,S=>this.nodes.delete(S.element))),b.children.splice(0,b.children.length),b.stale=!0):u.push(b):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const v=D6({element:h,parent:e,id:p,hasChildren:f});return r&&r.viewState.focus&&r.viewState.focus.indexOf(p)>-1&&r.focus.push(v),r&&r.viewState.selection&&r.viewState.selection.indexOf(p)>-1&&r.selection.push(v),r&&r.viewState.expanded&&r.viewState.expanded.indexOf(p)>-1?u.push(v):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(v.collapsedByDefault=!1,u.push(v)),v});for(const h of s.values())fz(h,f=>this.nodes.delete(f.element));for(const h of d)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&u.length===0&&(d[0].collapsedByDefault=!1,u.push(d[0])),u}render(e,t,n){const r=e.children.map(s=>this.asTreeElement(s,t)),o=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}});this.tree.setChildren(e===this.root?null:e,r,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Qn.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class Qq{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new Qq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class TFe{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ri(this.disposables)}}function IFe(i){const e=i&&Fhe(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class kFe extends Bhe{constructor(e,t,n,r,o,s,a={}){super(e,t,n,o,s,a),this.compressionDelegate=r,this.compressibleNodeMapper=new jq(u=>new Qq(u)),this.filter=a.filter}createTree(e,t,n,r,o){const s=new Gq(n),a=r.map(d=>new TFe(d,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),u=IFe(o)||{};return new Phe(e,t,s,a,u)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),r=p=>{const m=new Set;for(const v of p){const b=this.tree.getCompressedTreeNode(v===this.root?null:v);if(b.element)for(const E of b.element.elements)m.add(n(E.element))}return m},o=r(this.tree.getSelection()),s=r(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let u=!1;const d=this.getFocus();let h=!1;const f=p=>{const m=p.element;if(m)for(let v=0;v<m.elements.length;v++){const b=n(m.elements[v].element),E=m.elements[m.elements.length-1].element;o.has(b)&&a.indexOf(E)===-1&&(a.push(E),u=!0),s.has(b)&&d.indexOf(E)===-1&&(d.push(E),h=!0)}p.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),u&&this.setSelection(a),h&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Qn.filter(e,t=>{const n=this.filter.filter(t,1),r=NFe(n);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function NFe(i){return typeof i=="boolean"?i?1:0:Kq(i)?sO(i.visibility):sO(i)}class AFe extends Ohe{constructor(e,t,n,r,o,s={}){super(e,t,n,r,s),this.user=e,this.dataSource=o,this.identityProvider=s.identityProvider}createModel(e,t,n){return new qq(e,t,n)}}const u8=new Dt("isWindows",As,C("isWindows","Whether the operating system is Windows")),OFe="inputFocus";var xg=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},kn=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const bc=gi("listService");let gz=class{constructor(e){this._themeService=e,this.disposables=new Je,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const r=new khe(uc(),"");this.disposables.add(B1(r,this._themeService))}if(this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),t0(e.onDidFocus(()=>this.setLastFocusedList(e)),Un(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};gz=xg([kn(0,xr)],gz);const Whe=new Dt("listFocus",!0),c8=new Dt("listSupportsMultiselect",!0),Vhe=_t.and(Whe,_t.not(OFe)),Jq=new Dt("listHasSelectionOrFocus",!1),eY=new Dt("listDoubleSelection",!1),tY=new Dt("listMultiSelection",!1),d8=new Dt("listSelectionNavigation",!1),RFe=new Dt("treeElementCanCollapse",!1),MFe=new Dt("treeElementHasParent",!1),PFe=new Dt("treeElementCanExpand",!1),FFe=new Dt("treeElementHasChild",!1),Hhe="listAutomaticKeyboardNavigation";function h8(i,e){const t=i.createScoped(e.getHTMLElement());return Whe.bindTo(t),t}const kC="workbench.list.multiSelectModifier",pz="workbench.list.openMode",sc="workbench.list.horizontalScrolling",P3="workbench.list.keyboardNavigation",nY="workbench.list.automaticKeyboardNavigation",uO="workbench.tree.indent",F3="workbench.tree.renderIndentGuides",nf="workbench.list.smoothScrolling",dg="workbench.list.mouseWheelScrollSensitivity",hg="workbench.list.fastScrollSensitivity",B3="workbench.tree.expandMode";function fg(i){return i.getValue(kC)==="alt"}class BFe extends Oe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=fg(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(kC)&&(this.useAltAsMultipleSelectionModifier=fg(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Dhe(e)}isSelectionRangeChangeEvent(e){return The(e)}}function f8(i,e,t){var n;const r=new Je;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return t.mightProducePrintableCharacter(s)}},smoothScrolling:!!e.getValue(nf),mouseWheelScrollSensitivity:e.getValue(dg),fastScrollSensitivity:e.getValue(hg),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:r.add(new BFe(e))}),r]}let mz=class extends Lg{constructor(e,t,n,r,o,s,a,u,d,h){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!d.getValue(sc),[p,m]=f8(o,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(u.getColorTheme(),a8)),p),{horizontalScrolling:f})),this.disposables.add(m),this.contextKeyService=h8(s,this),this.themeService=u,this.listSupportsMultiSelect=c8.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),d8.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=Jq.bindTo(this.contextKeyService),this.listDoubleSelection=eY.bindTo(this.contextKeyService),this.listMultiSelection=tY.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),E=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||E.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),E=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||E.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(kC)&&(this._useAltAsMultipleSelectionModifier=fg(d));let E={};if(b.affectsConfiguration(sc)&&this.horizontalScrolling===void 0){const S=!!d.getValue(sc);E=Object.assign(Object.assign({},E),{horizontalScrolling:S})}if(b.affectsConfiguration(nf)){const S=!!d.getValue(nf);E=Object.assign(Object.assign({},E),{smoothScrolling:S})}if(b.affectsConfiguration(dg)){const S=d.getValue(dg);E=Object.assign(Object.assign({},E),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);E=Object.assign(Object.assign({},E),{fastScrollSensitivity:S})}Object.keys(E).length>0&&this.updateOptions(E)})),this.navigator=new $he(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=B1(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};mz=xg([kn(5,cn),kn(6,bc),kn(7,xr),kn(8,ir),kn(9,Er)],mz);let Ite=class extends tFe{constructor(e,t,n,r,o,s,a,u,d,h){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!d.getValue(sc),[p,m]=f8(o,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(u.getColorTheme(),a8)),p),{horizontalScrolling:f})),this.disposables=new Je,this.disposables.add(m),this.contextKeyService=h8(s,this),this.themeService=u,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=c8.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),d8.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=fg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(B1(this,u,o.overrideStyles)),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(kC)&&(this._useAltAsMultipleSelectionModifier=fg(d));let E={};if(b.affectsConfiguration(sc)&&this.horizontalScrolling===void 0){const S=!!d.getValue(sc);E=Object.assign(Object.assign({},E),{horizontalScrolling:S})}if(b.affectsConfiguration(nf)){const S=!!d.getValue(nf);E=Object.assign(Object.assign({},E),{smoothScrolling:S})}if(b.affectsConfiguration(dg)){const S=d.getValue(dg);E=Object.assign(Object.assign({},E),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);E=Object.assign(Object.assign({},E),{fastScrollSensitivity:S})}Object.keys(E).length>0&&this.updateOptions(E)})),this.navigator=new $he(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=B1(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};Ite=xg([kn(5,cn),kn(6,bc),kn(7,xr),kn(8,ir),kn(9,Er)],Ite);let kte=class extends l8{constructor(e,t,n,r,o,s,a,u,d,h,f){const p=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!h.getValue(sc),[m,v]=f8(s,h,f);super(e,t,n,r,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Dh(d.getColorTheme(),a8)),m),{horizontalScrolling:p})),this.disposables.add(v),this.contextKeyService=h8(a,this),this.themeService=d,this.listSupportsMultiSelect=c8.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),d8.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=Jq.bindTo(this.contextKeyService),this.listDoubleSelection=eY.bindTo(this.contextKeyService),this.listMultiSelection=tY.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=fg(h),this.disposables.add(this.contextKeyService),this.disposables.add(u.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const E=this.getSelection(),S=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(E.length>0||S.length>0),this.listMultiSelection.set(E.length>1),this.listDoubleSelection.set(E.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const E=this.getSelection(),S=this.getFocus();this.listHasSelectionOrFocus.set(E.length>0||S.length>0)})),this.disposables.add(h.onDidChangeConfiguration(E=>{E.affectsConfiguration(kC)&&(this._useAltAsMultipleSelectionModifier=fg(h));let S={};if(E.affectsConfiguration(sc)&&this.horizontalScrolling===void 0){const w=!!h.getValue(sc);S=Object.assign(Object.assign({},S),{horizontalScrolling:w})}if(E.affectsConfiguration(nf)){const w=!!h.getValue(nf);S=Object.assign(Object.assign({},S),{smoothScrolling:w})}if(E.affectsConfiguration(dg)){const w=h.getValue(dg);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:w})}if(E.affectsConfiguration(hg)){const w=h.getValue(hg);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:w})}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new WFe(this,Object.assign({configurationService:h},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=B1(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};kte=xg([kn(6,cn),kn(7,bc),kn(8,xr),kn(9,ir),kn(10,Er)],kte);class iY extends Oe{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new Ce),this.onDidOpen=this._onDidOpen.event,this._register(Mt.filter(this.widget.onDidChangeSelection,r=>r.browserEvent instanceof KeyboardEvent)(r=>this.onSelectionFromKeyboard(r))),this._register(this.widget.onPointer(r=>this.onPointer(r.element,r.browserEvent))),this._register(this.widget.onMouseDblClick(r=>this.onMouseDblClick(r.element,r.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(pz))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(pz))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!n,o=!1;this._open(this.getSelectedElement(),n,r,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,o=!0,s=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,s=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}_open(e,t,n,r,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:o})}}class $he extends iY{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class WFe extends iY{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class VFe extends iY{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function HFe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const r=e.softDispatch(n,i);return r&&r.enterChord?(t=!0,!1):(t=!1,!0)}}let Nte=class extends Zq{constructor(e,t,n,r,o,s,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=LR(t,o,s,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new W1(this,o,m,o.overrideStyles,s,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Nte=xg([kn(5,cn),kn(6,bc),kn(7,xr),kn(8,ir),kn(9,Er),kn(10,rl)],Nte);let Ate=class extends Phe{constructor(e,t,n,r,o,s,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=LR(t,o,s,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new W1(this,o,m,o.overrideStyles,s,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ate=xg([kn(5,cn),kn(6,bc),kn(7,xr),kn(8,ir),kn(9,Er),kn(10,rl)],Ate);let Ote=class extends AFe{constructor(e,t,n,r,o,s,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=LR(t,s,a,h,f,p);super(e,t,n,r,o,m),this.disposables.add(b),this.internals=new W1(this,s,v,s.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ote=xg([kn(6,cn),kn(7,bc),kn(8,xr),kn(9,ir),kn(10,Er),kn(11,rl)],Ote);let _z=class extends Bhe{constructor(e,t,n,r,o,s,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=LR(t,s,a,h,f,p);super(e,t,n,r,o,m),this.disposables.add(b),this.internals=new W1(this,s,v,s.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};_z=xg([kn(6,cn),kn(7,bc),kn(8,xr),kn(9,ir),kn(10,Er),kn(11,rl)],_z);let Rte=class extends kFe{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m){const{options:v,getAutomaticKeyboardNavigation:b,disposable:E}=LR(t,a,u,f,p,m);super(e,t,n,r,o,s,v),this.disposables.add(E),this.internals=new W1(this,a,b,a.overrideStyles,u,d,h,f,m),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Rte=xg([kn(7,cn),kn(8,bc),kn(9,xr),kn(10,ir),kn(11,Er),kn(12,rl)],Rte);function LR(i,e,t,n,r,o){var s;const a=()=>{let v=!!t.getContextKeyValue(Hhe);return v&&(v=!!n.getValue(nY)),v},u=o.isScreenReaderOptimized(),d=e.simpleKeyboardNavigation||u?"simple":n.getValue(P3),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(sc),[f,p]=f8(e,n,r),m=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:p,options:Object.assign(Object.assign({keyboardSupport:!1},f),{indent:typeof n.getValue(uO)=="number"?n.getValue(uO):void 0,renderIndentGuides:n.getValue(F3),smoothScrolling:!!n.getValue(nf),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:d==="simple",filterOnType:d==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:HFe(i,r),additionalScrollHeight:m,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(s=e.expandOnlyOnTwistieClick)!==null&&s!==void 0?s:n.getValue(B3)==="doubleClick"})}}let W1=class{constructor(e,t,n,r,o,s,a,u,d){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=h8(o,e),this.listSupportsMultiSelect=c8.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),d8.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=Jq.bindTo(this.contextKeyService),this.hasDoubleSelection=eY.bindTo(this.contextKeyService),this.hasMultiSelection=tY.bindTo(this.contextKeyService),this.treeElementCanCollapse=RFe.bindTo(this.contextKeyService),this.treeElementHasParent=MFe.bindTo(this.contextKeyService),this.treeElementCanExpand=PFe.bindTo(this.contextKeyService),this.treeElementHasChild=FFe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=fg(u);const f=new Set;f.add(Hhe);const p=()=>{const b=d.isScreenReaderOptimized()?"simple":u.getValue(P3);e.updateOptions({simpleKeyboardNavigation:b==="simple",filterOnType:b==="filter"})};this.updateStyleOverrides(r);const m=()=>{const v=e.getFocus()[0];if(!v)return;const b=e.getNode(v);this.treeElementCanCollapse.set(b.collapsible&&!b.collapsed),this.treeElementHasParent.set(!!e.getParentElement(v)),this.treeElementCanExpand.set(b.collapsible&&b.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(v))};this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{const v=e.getSelection(),b=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(v.length>0||b.length>0),this.hasMultiSelection.set(v.length>1),this.hasDoubleSelection.set(v.length===2)})}),e.onDidChangeFocus(()=>{const v=e.getSelection(),b=e.getFocus();this.hasSelectionOrFocus.set(v.length>0||b.length>0),m()}),e.onDidChangeCollapseState(m),e.onDidChangeModel(m),u.onDidChangeConfiguration(v=>{let b={};if(v.affectsConfiguration(kC)&&(this._useAltAsMultipleSelectionModifier=fg(u)),v.affectsConfiguration(uO)){const E=u.getValue(uO);b=Object.assign(Object.assign({},b),{indent:E})}if(v.affectsConfiguration(F3)){const E=u.getValue(F3);b=Object.assign(Object.assign({},b),{renderIndentGuides:E})}if(v.affectsConfiguration(nf)){const E=!!u.getValue(nf);b=Object.assign(Object.assign({},b),{smoothScrolling:E})}if(v.affectsConfiguration(P3)&&p(),v.affectsConfiguration(nY)&&(b=Object.assign(Object.assign({},b),{automaticKeyboardNavigation:n()})),v.affectsConfiguration(sc)&&t.horizontalScrolling===void 0){const E=!!u.getValue(sc);b=Object.assign(Object.assign({},b),{horizontalScrolling:E})}if(v.affectsConfiguration(B3)&&t.expandOnlyOnTwistieClick===void 0&&(b=Object.assign(Object.assign({},b),{expandOnlyOnTwistieClick:u.getValue(B3)==="doubleClick"})),v.affectsConfiguration(dg)){const E=u.getValue(dg);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:E})}if(v.affectsConfiguration(hg)){const E=u.getValue(hg);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:E})}Object.keys(b).length>0&&e.updateOptions(b)}),this.contextKeyService.onDidChangeContext(v=>{v.affectsSome(f)&&e.updateOptions({automaticKeyboardNavigation:n()})}),d.onDidChangeScreenReaderOptimized(()=>p())),this.navigator=new VFe(e,Object.assign({configurationService:u},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){ri(this.styler),this.styler=e?B1(this.tree,this.themeService,e):Oe.None}dispose(){this.disposables=ri(this.disposables),ri(this.styler),this.styler=void 0}};W1=xg([kn(4,cn),kn(5,bc),kn(6,xr),kn(7,ir),kn(8,rl)],W1);const $Fe=Xr.as(SC.Configuration);$Fe.registerConfiguration({id:"workbench",order:7,title:C("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[kC]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[C("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:C({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[pz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[sc]:{type:"boolean",default:!1,description:C("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[uO]:{type:"number",default:8,minimum:0,maximum:40,description:C("tree indent setting","Controls tree indentation in pixels.")},[F3]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:C("render tree indent guides","Controls whether the tree should render indent guides.")},[nf]:{type:"boolean",default:!1,description:C("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[dg]:{type:"number",default:1,description:C("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[hg]:{type:"number",default:5,description:C("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[P3]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[C("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),C("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),C("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:C("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[nY]:{type:"boolean",default:!0,markdownDescription:C("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[B3]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Tr;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Tr||(Tr={}));(function(i){function e(s,a){return a-s}i.compare=e;const t=Object.create(null);t[i.Error]=C("sev.error","Error"),t[i.Warning]=C("sev.warning","Warning"),t[i.Info]=C("sev.info","Info");function n(s){return t[s]||""}i.toString=n;function r(s){switch(s){case Ur.Error:return i.Error;case Ur.Warning:return i.Warning;case Ur.Info:return i.Info;case Ur.Ignore:return i.Hint}}i.fromSeverity=r;function o(s){switch(s){case i.Error:return Ur.Error;case i.Warning:return Ur.Warning;case i.Info:return Ur.Info;case i.Hint:return Ur.Ignore}}i.toSeverity=o})(Tr||(Tr={}));var W3;(function(i){const e="";function t(r){return n(r,!0)}i.makeKey=t;function n(r,o){let s=[e];return r.source?s.push(r.source.replace("¦","\\¦")):s.push(e),r.code?typeof r.code=="string"?s.push(r.code.replace("¦","\\¦")):s.push(r.code.value.replace("¦","\\¦")):s.push(e),r.severity!==void 0&&r.severity!==null?s.push(Tr.toString(r.severity)):s.push(e),r.message&&o?s.push(r.message.replace("¦","\\¦")):s.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?s.push(r.startLineNumber.toString()):s.push(e),r.startColumn!==void 0&&r.startColumn!==null?s.push(r.startColumn.toString()):s.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?s.push(r.endLineNumber.toString()):s.push(e),r.endColumn!==void 0&&r.endColumn!==null?s.push(r.endColumn.toString()):s.push(e),s.push(e),s.join("¦")}i.makeKeyOptionalMessage=n})(W3||(W3={}));const xR=gi("markerService");class zFe{constructor(){this._byResource=new na,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let o=this._byOwner.get(t);o||(o=new na,this._byOwner.set(t,o)),o.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,r=!1,o=this._byResource.get(e);o&&(n=o.delete(t));let s=this._byOwner.get(t);if(s&&(r=s.delete(e)),n!==r)throw new Error("illegal state");return n&&r}values(e){var t,n,r,o;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Qn.empty():rn.isUri(e)?(o=(r=this._byResource.get(e))===null||r===void 0?void 0:r.values())!==null&&o!==void 0?o:Qn.empty():Qn.map(Qn.concat(...this._byOwner.values()),s=>s[1])}}class UFe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new na,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===In.inMemory||e.scheme===In.walkThrough||e.scheme===In.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Tr.Error?t.errors+=1:n===Tr.Warning?t.warnings+=1:n===Tr.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Lb{constructor(){this._onMarkerChanged=new WEe({delay:0,merge:Lb._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new zFe,this._stats=new UFe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if($ue(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const o of n){const s=Lb._toMarker(e,t,o);s&&r.push(s)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:r,severity:o,message:s,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}=n;if(s)return u=u>0?u:1,d=d>0?d:1,h=h>=u?h:u,f=f>0?f:d,{resource:t,owner:e,code:r,severity:o,message:s,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}}read(e=Object.create(null)){let{owner:t,resource:n,severities:r,take:o}=e;if((!o||o<0)&&(o=-1),t&&n){const s=this._data.get(n,t);if(s){const a=[];for(const u of s)if(Lb._accept(u,r)){const d=a.push(u);if(o>0&&d===o)break}return a}else return[]}else if(!t&&!n){const s=[];for(let a of this._data.values())for(let u of a)if(Lb._accept(u,r)){const d=s.push(u);if(o>0&&d===o)return s}return s}else{const s=this._data.values(n??t),a=[];for(const u of s)for(const d of u)if(Lb._accept(d,r)){const h=a.push(d);if(o>0&&h===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new na;for(let n of e)for(let r of n)t.set(r,!0);return Array.from(t.keys())}}var o2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},jy;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(jy||(jy={}));class cO extends Oe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Ce),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=jy.None,this.cache=new Map,this.flushDelayer=new JEe(cO.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((r,o)=>this.accept(o,r)),(n=e.deleted)===null||n===void 0||n.forEach(r=>this.accept(r,void 0))}accept(e,t){if(this.state===jy.Closed)return;let n=!1;xu(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return xu(n)?t:n}getBoolean(e,t){const n=this.get(e);return xu(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return xu(n)?t:parseInt(n,10)}set(e,t){return o2(this,void 0,void 0,function*(){if(this.state===jy.Closed)return;if(xu(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return o2(this,void 0,void 0,function*(){if(!(this.state===jy.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return o2(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return o2(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}cO.DEFAULT_FLUSH_DELAY=100;class Mte{constructor(){this.onDidChangeItemsExternal=Mt.None,this.items=new Map}updateItems(e){return o2(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const QM="__$__targetStorageMarker",Dg=gi("storageService");var V3;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(V3||(V3={}));class g8 extends Oe{constructor(e={flushInterval:g8.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new bF),this._onDidChangeTarget=this._register(new bF),this._onWillSaveState=this._register(new Ce),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===QM?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.get(e,n)}getBoolean(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getBoolean(e,n)}getNumber(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getNumber(e,n)}store(e,t,n,r){if(xu(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,r),(o=this.getStorage(n))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var r,o;const s=this.getKeyTargets(t);typeof n=="number"?s[e]!==n&&(s[e]=n,(r=this.getStorage(t))===null||r===void 0||r.set(QM,JSON.stringify(s))):typeof s[e]=="number"&&(delete s[e],(o=this.getStorage(t))===null||o===void 0||o.set(QM,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(QM,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}g8.DEFAULT_FLUSH_INTERVAL=60*1e3;class jFe extends g8{constructor(){super(),this.globalStorage=this._register(new cO(new Mte)),this.workspaceStorage=this._register(new cO(new Mte)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var zhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let vz=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new bz(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};vz=zhe([_4(0,Ir)],vz);let bz=class _y{constructor(e,t,n,r,o){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=r,this._menuService=o,this._disposables=new Je,this._menuGroups=[],this._contextKeys=new Set,this._build();const s=new tr(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(s),this._disposables.add(ra.onDidChangeMenu(d=>{d.has(e)&&s.schedule()}));const a=this._disposables.add(new Je),u=()=>{const d=new tr(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(d),a.add(r.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&d.schedule()}))};this._onDidChange=new Ce({onFirstListenerAdd:u,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=ra.getMenuItems(this._id);let t;e.sort(_y._compareMenuItems);for(const n of e){const r=n.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(_y._fillInKbExprKeys(e.when,this._contextKeys),e2(e)){if(e.command.precondition&&_y._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;_y._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&ra.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[r,o]=n,s=[];for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const u=e2(a)?new C0(a.command,a.alt,e,this._contextKeyService,this._commandService):new xG(a,this._menuService,this._contextKeyService,e);s.push(u)}s.length>0&&t.push([r,s])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,r=t.group;if(n!==r){if(n){if(!r)return-1}else return 1;if(n==="navigation")return-1;if(r==="navigation")return 1;let a=n.localeCompare(r);if(a!==0)return a}let o=e.order||0,s=t.order||0;return o<s?-1:o>s?1:_y._compareTitles(e2(e)?e.command.title:e.title,e2(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return n.localeCompare(r)}};bz=zhe([_4(2,Ir),_4(3,cn),_4(4,yC)],bz);var KFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Pte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class GFe extends Oe{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Un(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const r=this.model.deltaDecorations(n,t);for(let o=0;o<r.length;o++)this._markersData.set(r[o],e[o]);return n.length!==0||r.length!==0}getMarker(e){return this._markersData.get(e.id)}}let Cz=class extends Oe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Ce),this._markerDecorations=new na,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new GFe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===In.inMemory||e.uri.scheme===In.internal||e.uri.scheme===In.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(r=>({range:this._createDecorationRange(e.model,r),options:this._createDecorationOption(r)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=Q.lift(t);return t.severity===Tr.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,r,o,s;switch(e.severity){case Tr.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case Tr.Warning:t="squiggly-warning",n=Lr(O2e),r=20,s={color:Lr(rIe),position:Cl.Inline};break;case Tr.Info:t="squiggly-info",n=Lr(R2e),r=10;break;case Tr.Error:default:t="squiggly-error",n=Lr(A2e),r=30,s={color:Lr(iIe),position:Cl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Sl.Right},minimap:s,zIndex:r,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};Cz=KFe([Pte(0,To),Pte(1,xR)],Cz);var qFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Fte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let yz=class extends Oe{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Ce,this._accessibilityModeEnabledContext=vR.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};yz=qFe([Fte(0,cn),Fte(1,ir)],yz);var JM=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class YFe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return JM(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const n=document.activeElement,r=document.body.appendChild(Ge("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(r)})}readText(e){return JM(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return JM(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return JM(this,void 0,void 0,function*(){this.findText=e})}}var ZFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Bte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function tP(i){return i.scheme===In.file?i.fsPath:i.path}let Uhe=0;class nP{constructor(e,t,n,r,o,s,a){this.id=++Uhe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Wte{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Vte{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);let n=[];return e.length>0&&n.push(C({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(C({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class XFe{constructor(e,t,n,r,o,s,a){this.id=++Uhe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new Vte),this.removedResources.has(t)||this.removedResources.set(t,new Wte(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Vte),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Wte(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class jhe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,r=this._past.length;n<r;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new nde(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,r=0,o=-1;for(let a=0,u=this._past.length;a<u;a++,r++){const d=this._past[a];n&&(r>=t||d.id!==e.elements[r])&&(n=!1,o=0),!n&&d.type===1&&d.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let a=this._future.length-1;a>=0;a--,r++){const u=this._future[a];n&&(r>=t||u.id!==e.elements[r])&&(n=!1,s=a),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),s!==-1&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class I6{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Khe=new jhe("","");Khe.locked=!0;let H3=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Zw.None,n=Ff.None){if(e.type===0){const r=tP(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new nP(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const r=new Set,o=[],s=[];for(const a of e.resources){const u=tP(a),d=this.getUriComparisonKey(a);r.has(d)||(r.add(d),o.push(u),s.push(d))}o.length===1?this._pushElement(new nP(e,o[0],s[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new XFe(e,o,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const r=e.resourceLabels[t],o=e.strResources[t];let s;this._editStacks.has(o)?s=this._editStacks.get(o):(s=new jhe(r,o),this._editStacks.set(o,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const r=n.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const o of n){const s=tP(o.resource),a=this.getUriComparisonKey(o.resource),u=new nP(o,s,a,0,0,0,0);r.set(u.strResource,u)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const o of n){const s=tP(o.resource),a=this.getUriComparisonKey(o.resource),u=new nP(o,s,a,0,0,0,0);r.set(u.strResource,u)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new nde(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.sourceId===e&&(!t||s.sourceOrder>t.sourceOrder)&&(t=s,n=r)}return[t,n]}canUndo(e){if(e instanceof Ff){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){gn(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,o){const s=this._acquireLocks(n);let a;try{a=t()}catch(u){return s(),r.dispose(),this._onError(u,e)}return a?a.then(()=>(s(),r.dispose(),o()),u=>(s(),r.dispose(),this._onError(u,e))):(s(),r.dispose(),o())}_invokeWorkspacePrepare(e){return eP(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return Oe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Oe.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Oe.None);const n=e.actual.prepareUndoRedo();return n?JK(n)?t(n):n.then(r=>t(r)):t(Oe.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Khe);return new I6(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(r),new iP}_checkWorkspaceUndo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const r=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,r,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,r){return eP(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ur.Info,C("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[C({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),C("nok","Undo this File"),C("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const u=this._checkWorkspaceUndo(e,t,n,!1);if(u)return u.returnValue;r=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const s=this._checkWorkspaceUndo(e,t,n,!0);if(s)return o.dispose(),s.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,o,()=>this._continueUndoInGroup(t.groupId,r))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=C({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new I6([e]),r,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.groupId===e&&(!t||s.groupOrder>t.groupOrder)&&(t=s,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Ff){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),o=r.getClosestPastElement();if(!o)return;if(o.groupId){const[a,u]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&u)return this._undo(u,t,n)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,n):this._resourceUndo(r,o,n)}finally{}}_confirmAndContinueUndo(e,t,n){return eP(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ur.Info,C("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[C("confirmDifferentSource.yes","Yes"),C("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.sourceId===e&&(!t||s.sourceOrder<t.sourceOrder)&&(t=s,n=r)}return[t,n]}canRedo(e){if(e instanceof Ff){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(r),new iP}_checkWorkspaceRedo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return eP(this,void 0,void 0,function*(){let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(s){return this._onError(s,t)}const o=this._checkWorkspaceRedo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const s of n.editStacks)s.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=C({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new I6([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.groupId===e&&(!t||s.groupOrder<t.groupOrder)&&(t=s,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ff){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[r,o]=this._findClosestRedoElementInGroup(n.groupId);if(n!==r&&o)return this._redo(o)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};H3=ZFe([Bte(0,yR),Bte(1,po)],H3);class iP{constructor(e){this.returnValue=e}}U0(gR,H3);const QFe=new RegExp(`(\\\\)?\\$\\((${Ga.iconNameExpression}(?:${Ga.iconModifierExpression})?)\\)`,"g");function a1(i){const e=new Array;let t,n=0,r=0;for(;(t=QFe.exec(i))!==null;){r=t.index||0,e.push(i.substring(n,r)),n=(t.index||0)+t[0].length;const[,o,s]=t;e.push(o?`$(${s})`:JFe({id:s}))}return n<i.length&&e.push(i.substring(n)),e}function JFe(i){const e=Ge("span");return e.classList.add(...Ga.asClassNameArray(i)),e}const e3e={buttonBackground:we.fromHex("#0E639C"),buttonHoverBackground:we.fromHex("#006BB3"),buttonForeground:we.white};class Hte extends Oe{constructor(e,t){super(),this._onDidClick=this._register(new Ce),this.options=t||Object.create(null),Eg(this.options,e3e,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Hi.addTarget(this._element)),[Ht.CLICK,ur.Tap].forEach(n=>{this._register(qe(this._element,n,r=>{if(!this.enabled){Ni.stop(r);return}this._onDidClick.fire(r)}))}),this._register(qe(this._element,Ht.KEY_DOWN,n=>{const r=new Sr(n);let o=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(n),o=!0):r.equals(9)&&(this._element.blur(),o=!0),o&&Ni.stop(r,!0)})),this._register(qe(this._element,Ht.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(qe(this._element,Ht.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register($w(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?v0(this._element,...a1(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const t3e={badgeBackground:we.fromHex("#4D4D4D"),badgeForeground:we.fromHex("#FFFFFF")};class wz{constructor(e,t){this.count=0,this.options=t||Object.create(null),Eg(this.options,t3e,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Be(e,Ge(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=ec(this.countFormat,this.count),this.element.title=ec(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const $te="done",zte="active",k6="infinite",Ute="discrete",n3e={progressBarBackground:we.fromHex("#0E70C0")};class i3e extends Oe{constructor(e,t){super(),this.options=t||Object.create(null),Eg(this.options,n3e,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new tr(()=>Lu(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(zte,k6,Ute),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add($te),this.element.classList.contains(k6)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(Ute,$te),this.element.classList.add(zte,k6),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class rY{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Ghe=new rY("id#");const N6={},r3e=new rY("quick-input-button-icon-");function Sz(i){if(!i)return;let e;const t=i.dark.toString();return N6[t]?e=N6[t]:(e=r3e.nextId(),vH(`.${e}`,`background-image: ${S1(i.light||i.dark)}`),vH(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${S1(i.dark)}`),N6[t]=e),e}const o3e={ctrlCmd:!1,alt:!1};var dO;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(dO||(dO={}));var wh;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(wh||(wh={}));function s3e(i,e={}){const t=oY(e);return t.textContent=i,t}function qhe(i,e={}){const t=oY(e);return Yhe(t,l3e(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function oY(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class a3e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Yhe(i,e,t,n){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&n)r=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");o.href="#",t.disposables.add(ts(o,"click",s=>{t.callback(String(e.index),s)})),r=o}else e.type===8?r=document.createElement("br"):e.type===1&&(r=i);r&&i!==r&&i.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(o=>{Yhe(r,o,t,n)})}function l3e(i,e){const t={type:1,children:[]};let n=0,r=t;const o=[],s=new a3e(i);for(;!s.eos();){let a=s.next();const u=a==="\\"&&Ez(s.peek(),e)!==0;if(u&&(a=s.next()),!u&&u3e(a,e)&&a===s.peek()){s.advance(),r.type===2&&(r=o.pop());const d=Ez(a,e);if(r.type===d||r.type===5&&d===6)r=o.pop();else{const h={type:d,children:[]};d===5&&(h.index=n,n++),r.children.push(h),o.push(r),r=h}}else if(a===`
`)r.type===2&&(r=o.pop()),r.children.push({type:8});else if(r.type!==2){const d={type:2,content:a};r.children.push(d),o.push(r),r=d}else r.content+=a}return r.type===2&&(r=o.pop()),t}function u3e(i,e){return Ez(i,e)!==0}function Ez(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class c3e{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class d3e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new c3e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const MN=Ge,h3e={inputBackground:we.fromHex("#3C3C3C"),inputForeground:we.fromHex("#CCCCCC"),inputValidationInfoBorder:we.fromHex("#55AAFF"),inputValidationInfoBackground:we.fromHex("#063B49"),inputValidationWarningBorder:we.fromHex("#B89500"),inputValidationWarningBackground:we.fromHex("#352A05"),inputValidationErrorBorder:we.fromHex("#BE1100"),inputValidationErrorBackground:we.fromHex("#5A1D1D")};class Zhe extends Vu{constructor(e,t,n){var r;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Ce),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Ce),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Eg(this.options,h3e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(r=this.options.tooltip)!==null&&r!==void 0?r:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Be(e,MN(".monaco-inputbox.idle"));let o=this.options.flexibleHeight?"textarea":"input",s=Be(this.element,MN(".ibwrapper"));if(this.input=Be(s,MN(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Be(s,MN("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new dq(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Be(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(d=>this.input.scrollTop=d.scrollTop));const a=this._register(new Ui(document,"selectionchange")),u=Mt.filter(a.event,()=>{const d=document.getSelection();return(d==null?void 0:d.anchorNode)===s});this._register(u(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ug(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:_H(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Nc(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,r=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+r}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Nc(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{if(!this.message)return null;e=Be(r,MN(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?qhe(this.message.content,o):s3e(this.message.content,o);s.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background?a.background.toString():"",s.style.color=a.foreground?a.foreground.toString():"",s.style.border=a.border?`1px solid ${a.border}`:"",Be(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=C("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=C("alertWarningMessage","Warning: {0}",this.message.content):n=C("alertInfoMessage","Info: {0}",this.message.content),Is(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=_H(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,o=t.value;n!==null&&r!==null&&(this.value=o.substr(0,n)+e+o.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class Xhe extends Zhe{constructor(e,t,n){const r=C({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or ⇅ ${r}`,s=` (⇅ ${r})`;super(e,t,n),this.history=new d3e(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const u=this.placeholder.endsWith(")")?o:s,d=this.placeholder+u;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=d:this.setPlaceHolder(d)}};this.observer=new MutationObserver((u,d)=>{u.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const u=d=>{if(this.placeholder.endsWith(d)){const h=this.placeholder.slice(0,this.placeholder.length-d.length);return n.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};u(s)||u(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,LF(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,LF(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const f3e=Ge;class g3e extends Oe{constructor(e){super(),this.parent=e,this.onKeyDown=t=>qe(this.inputBox.inputElement,Ht.KEY_DOWN,n=>{t(new Sr(n))}),this.onMouseDown=t=>qe(this.inputBox.inputElement,Ht.MOUSE_DOWN,n=>{t(new Ju(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=Be(this.parent,f3e(".quick-input-box")),this.inputBox=this._register(new Zhe(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ur.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ur.Info?1:e===Ur.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ur.Info?1:e===Ur.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class V1{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=Be(e,Ge("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",r){e||(e=""),r&&(e=V1.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Qc(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const s=this.text.substring(t,n.start);e.push(Ge("span",void 0,...this.supportIcons?a1(s):[s])),t=n.end}const r=this.text.substring(n.start,n.end),o=Ge("span.highlight",void 0,...this.supportIcons?a1(r):[r]);n.extraClasses&&o.classList.add(...n.extraClasses),e.push(o),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(Ge("span",void 0,...this.supportIcons?a1(n):[n]))}v0(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(o,s)=>{r=o===`\r
`?-1:0,s+=n;for(const a of t)a.end<=s||(a.start>=s&&(a.start+=r),a.end>=s&&(a.end+=r));return n+=r,"⏎"})}}class Rp{constructor(e="",t=!1){var n,r,o;if(this.value=e,typeof this.value!="string")throw jh("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(r=t.supportThemeIcons)!==null&&r!==void 0?r:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=p3e(this.supportThemeIcons?p4e(e):e).replace(/([ \t]+)/g,(n,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function hO(i){return Qhe(i)?!i.value:Array.isArray(i)?i.every(hO):!0}function Qhe(i){return i instanceof Rp?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function p3e(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function A6(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function m3e(i){const e=[],t=i.split("|").map(r=>r.trim());i=t[0];const n=t[1];if(n){const r=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=r?r[1]:"",a=o?o[1]:"",u=isFinite(parseInt(a)),d=isFinite(parseInt(s));u&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:i,dimensions:e}}var Lz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function _3e(i,e){cc(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class v3e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return Lz(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||cc(e)||e instanceof HTMLElement)r=e;else if(!IF(e.markdown))r=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(C("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new aa;const o=this._cancellationTokenSource.token;if(r=yield e.markdown(o),this.isDisposed||o.isCancellationRequested)return}this.show(r,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n==null||n.dispose()}hasContent(e){return e?Qhe(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function b3e(i,e,t){let n,r;const o=(h,f)=>{var p;h&&(r==null||r.dispose(),r=void 0),f&&(n==null||n.dispose(),n=void 0),(p=i.onDidHideHover)===null||p===void 0||p.call(i)},s=(h,f,p)=>new Ma(()=>Lz(this,void 0,void 0,function*(){(!r||r.isDisposed)&&(r=new v3e(i,p||e,h>0),yield r.update(t,f))}),h),a=()=>{if(n)return;const h=new Je,f=v=>o(!1,v.fromElement===e);h.add(qe(e,Ht.MOUSE_LEAVE,f,!0));const p=()=>o(!0,!0);h.add(qe(e,Ht.MOUSE_DOWN,p,!0));const m={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const v=b=>m.x=b.x+10;h.add(qe(e,Ht.MOUSE_MOVE,v,!0))}h.add(s(i.delay,!1,m)),n=h},u=qe(e,Ht.MOUSE_OVER,a,!0);return{show:h=>{o(!1,!0),s(0,h)},hide:()=>{o(!0,!0)},update:h=>Lz(this,void 0,void 0,function*(){t=h,yield r==null?void 0:r.update(t)}),dispose:()=>{u.dispose(),o(!0,!0)}}}class O6{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class $3 extends Oe{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new O6(Be(e,Ge(".monaco-icon-label")))),this.labelContainer=Be(this.domNode.element,Ge(".monaco-icon-label-container"));const n=Be(this.labelContainer,Ge("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new O6(Be(this.labelContainer,Ge("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new w3e(n,!!t.supportIcons):this.nameNode=new C3e(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new V1(Be(this.descriptionContainer.element,Ge("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new O6(Be(this.descriptionContainer.element,Ge("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const r=["monaco-icon-label"];n&&(n.extraClasses&&r.push(...n.extraClasses),n.italic&&r.push("italic"),n.strikethrough&&r.push("strikethrough")),this.domNode.className=r.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof V1?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)_3e(e,t);else{const r=b3e(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class C3e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Qc(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Be(this.container,Ge("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const r=e[n],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Be(this.container,Ge("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},r)),n<e.length-1&&Be(this.container,Ge("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function y3e(i,e,t){if(!t)return;let n=0;return i.map(r=>{const o={start:n,end:n+r.length},s=t.map(a=>Vs.intersect(o,a)).filter(a=>!Vs.isEmpty(a)).map(({start:a,end:u})=>({start:a-n,end:u-n}));return n=o.end+e.length,s})}class w3e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Qc(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new V1(Be(this.container,Ge("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",r=y3e(e,n,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const s=e[o],a=r?r[o]:void 0,u=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,d=Ge("a.label-name",{id:u,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new V1(Be(this.container,d),{supportIcons:this.supportIcons}).set(s,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&Be(d,Ge("span.label-separator",void 0,n))}}}}const rP=Ge;class sY{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Be(e,rP(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&sY.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(Be(this.domNode,rP("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){$o(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const r=Tq.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!(n!=null&&n.ctrlKey),r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!(n!=null&&n.shiftKey),r.separator),t.altKey&&this.renderKey(e,r.altKey,!!(n!=null&&n.altKey),r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!(n!=null&&n.metaKey),r.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,r){Be(e,this.createKeyElement(t,n?".highlight":"")),r&&Be(e,rP("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){Be(e,this.createKeyElement(C("unbound","Unbound")))}createKeyElement(e,t=""){const n=rP("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Qc(e.firstPart,t.firstPart)&&Qc(e.chordPart,t.chordPart)}}const jte=new ow(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function S3e(i,e,t=!1){const n=i||"",r=e||"",o=jte.value.collator.compare(n,r);return jte.value.collatorIsNumeric&&o===0&&n!==r?n<r?-1:1:o}function E3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),o=L3e(i,e,t);if(o)return o;const s=n.endsWith(t),a=r.endsWith(t);if(s!==a)return s?-1:1;const u=S3e(n,r);return u!==0?u:n.localeCompare(r)}function L3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),o=n.startsWith(t),s=r.startsWith(t);if(o!==s)return o?-1:1;if(o&&s){if(n.length<r.length)return-1;if(n.length>r.length)return 1}return 0}var Jhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},x3e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const yf=Ge;class D3e{constructor(e){this.hidden=!1,this._onChecked=new Ce,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class DR{get templateId(){return DR.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Be(e,yf(".quick-input-list-entry"));const n=Be(t.entry,yf("label.quick-input-list-label"));t.toDisposeTemplate.push(ts(n,Ht.CLICK,d=>{t.checkbox.offsetParent||d.preventDefault()})),t.checkbox=Be(n,yf("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(ts(t.checkbox,Ht.CHANGE,d=>{t.element.checked=t.checkbox.checked}));const r=Be(n,yf(".quick-input-list-rows")),o=Be(r,yf(".quick-input-list-row")),s=Be(r,yf(".quick-input-list-row"));t.label=new $3(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=Be(o,yf(".quick-input-list-entry-keybinding"));t.keybinding=new sY(a,qu);const u=Be(s,yf(".quick-input-list-label-meta"));return t.detail=new $3(u,{supportHighlights:!0,supportIcons:!0}),t.separator=Be(t.entry,yf(".quick-input-list-separator")),t.actionBar=new ug(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=ri(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(d=>n.checkbox.checked=d));const{labelHighlights:r,descriptionHighlights:o,detailHighlights:s}=e,a=Object.create(null);a.matches=r||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:s,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const u=e.item.buttons;u&&u.length?(n.actionBar.push(u.map((d,h)=>{let f=d.iconClass||(d.iconPath?Sz(d.iconPath):void 0);d.alwaysVisible&&(f=f?`${f} always-visible`:"always-visible");const p=new ic(`id-${h}`,"",f,!0,()=>x3e(this,void 0,void 0,function*(){e.fireButtonTriggered({button:d,item:e.item})}));return p.tooltip=d.tooltip||"",p}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=ri(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=ri(e.toDisposeElement),e.toDisposeTemplate=ri(e.toDisposeTemplate)}}DR.ID="listelement";class T3e{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return DR.ID}}var uo;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(uo||(uo={}));class aY{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Ce,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Ce,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Ce,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Ce,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Ce,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Ce,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Ce,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Be(this.parent,yf(".quick-input-list"));const r=new T3e,o=new k3e;this.list=n.createList("QuickInput",this.container,r,[new DR],{identityProvider:{getId:s=>s.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(s=>{const a=new Sr(s);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(Gn?s.metaKey:s.ctrlKey)&&this.list.setFocus(Da(this.list.length));break;case 16:const u=this.list.getFocus();u.length===1&&u[0]===0&&this._onLeave.fire();break;case 18:const d=this.list.getFocus();d.length===1&&d[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(s=>{s.browserEvent.button!==2&&s.browserEvent.preventDefault()})),this.disposables.push(qe(this.container,Ht.CLICK,s=>{(s.x||s.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(s=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(s=>{typeof s.index=="number"&&(s.browserEvent.preventDefault(),this.list.setSelection([s.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Mt.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Mt.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=ri(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,r,o)=>{var s,a,u;if(r.type!=="separator"){const d=o&&e[o-1],h=r.label&&r.label.replace(/\r?\n/g," "),f=r.meta&&r.meta.replace(/\r?\n/g," "),p=r.description&&r.description.replace(/\r?\n/g," "),m=r.detail&&r.detail.replace(/\r?\n/g," "),v=r.ariaLabel||[h,p,m].map(b=>HLe(b)).filter(b=>!!b).join(", ");n.push(new D3e({index:o,item:r,saneLabel:h,saneMeta:f,saneAriaLabel:v,saneDescription:p,saneDetail:m,labelHighlights:(s=r.highlights)===null||s===void 0?void 0:s.label,descriptionHighlights:(a=r.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(u=r.highlights)===null||u===void 0?void 0:u.detail,checked:!1,separator:d&&d.type==="separator"?d:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,r,o)=>(n.set(r.item,o),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===uo.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=uo.First),e===uo.Previous&&this.list.getFocus()[0]===0&&(e=uo.Last),e===uo.Second&&this.list.length<2&&(e=uo.First),e){case uo.First:this.list.focusFirst();break;case uo.Second:this.list.focusNth(1);break;case uo.Last:this.list.focusLast();break;case uo.Next:this.list.focusNext();break;case uo.Previous:this.list.focusPrevious();break;case uo.NextPage:this.list.focusNextPage();break;case uo.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const r=n.index&&this.inputElements[n.index-1];n.separator=r&&r.type==="separator"?r:void 0});else{let n;this.elements.forEach(r=>{const o=this.matchOnLabel?_l(XM(e,ZM(r.saneLabel))):void 0,s=this.matchOnDescription?_l(XM(e,ZM(r.saneDescription||""))):void 0,a=this.matchOnDetail?_l(XM(e,ZM(r.saneDetail||""))):void 0,u=this.matchOnMeta?_l(XM(e,ZM(r.saneMeta||""))):void 0;if(o||s||a||u?(r.labelHighlights=o,r.descriptionHighlights=s,r.detailHighlights=a,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!r.item.alwaysShow),r.separator=void 0,!this.sortByLabel){const d=r.index&&this.inputElements[r.index-1];n=d&&d.type==="separator"?d:n,n&&!r.hidden&&(r.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((r,o)=>I3e(r,o,n))}return this.elementsToIndexes=t.reduce((n,r,o)=>(n.set(r.item,o),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=ri(this.elementDisposables),this.disposables=ri(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}Jhe([Io],aY.prototype,"onDidChangeFocus",null);Jhe([Io],aY.prototype,"onDidChangeSelection",null);function I3e(i,e,t){const n=i.labelHighlights||[],r=e.labelHighlights||[];return n.length&&!r.length?-1:!n.length&&r.length?1:n.length===0&&r.length===0?0:E3e(i.saneLabel,e.saneLabel,t)}class k3e{getWidgetAriaLabel(){return C("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var Kte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Cu=Ge,xz={iconClass:_e.quickInputBack.classNames,tooltip:C("quickInput.back","Back"),handle:-1};class p8 extends Oe{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=p8.noPromptMessage,this._severity=Ur.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Ce),this.onDidHideEmitter=this._register(new Ce),this.onDisposeEmitter=this._register(new Ce),this.visibleDisposables=this._register(new Je),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ng;this._ignoreFocusOut=e&&!ng,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=dO.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Ma,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(s=>s===xz);this.ui.leftActionBar.push(r.map((s,a)=>{const u=new ic(`id-${a}`,"",s.iconClass||Sz(s.iconPath),!0,()=>Kte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return u.tooltip=s.tooltip||"",u}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter(s=>s!==xz);this.ui.rightActionBar.push(o.map((s,a)=>{const u=new ic(`id-${a}`,"",s.iconClass||Sz(s.iconPath),!0,()=>Kte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return u.tooltip=s.tooltip||"",u}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,v0(this.ui.message,...a1(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?C("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ur.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}p8.noPromptMessage=C("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class fO extends p8{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Ce),this.onWillAcceptEmitter=this._register(new Ce),this.onDidAcceptEmitter=this._register(new Ce),this.onDidCustomEmitter=this._register(new Ce),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?wh.NONE:wh.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Ce),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Ce),this.onDidTriggerItemButtonEmitter=this._register(new Ce),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?o3e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(uo.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(uo.Next),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(uo.Previous):this.ui.list.focus(uo.Last),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 12:this.ui.list.focus(uo.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 11:this.ui.list.focus(uo.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(uo.First),Ni.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(uo.Last),Ni.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&rc(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&rc(e,this._selectedItems,(n,r)=>n===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&rc(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return qe(this.ui.container,Ht.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Sr(e),n=t.keyCode;this._quickNavigate.keybindings.some(s=>{const[a,u]=s.getParts();return u?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const r=this.ariaLabel||this.placeholder||fO.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==r&&(this.ui.inputBox.ariaLabel=r),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case wh.NONE:this._itemActivation=wh.FIRST;break;case wh.SECOND:this.ui.list.focus(uo.Second),this._itemActivation=wh.FIRST;break;case wh.LAST:this.ui.list.focus(uo.Last),this._itemActivation=wh.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(uo.First)),this.keepScrollPosition&&(this.scrollTop=e)}}fO.DEFAULT_ARIA_LABEL=C("quickInputBox.ariaLabel","Type to narrow down results.");class m8 extends Oe{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Ce),this.onDidCustomEmitter=this._register(new Ce),this.onDidTriggerButtonEmitter=this._register(new Ce),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Ce),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Ce),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(qe(window,Ht.KEY_DOWN,e,!0)),this._register(qe(window,Ht.KEY_UP,e,!0)),this._register(qe(window,Ht.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Be(this.parentElement,Cu(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=uc(e),n=Be(e,Cu(".quick-input-titlebar")),r=this._register(new ug(n));r.domNode.classList.add("quick-input-left-action-bar");const o=Be(n,Cu(".quick-input-title")),s=this._register(new ug(n));s.domNode.classList.add("quick-input-right-action-bar");const a=Be(e,Cu(".quick-input-description")),u=Be(e,Cu(".quick-input-header")),d=Be(u,Cu("input.quick-input-check-all"));d.type="checkbox",this._register(ts(d,Ht.CHANGE,X=>{const $=d.checked;M.setAllVisibleChecked($)})),this._register(qe(d,Ht.CLICK,X=>{(X.x||X.y)&&m.setFocus()}));const h=Be(u,Cu(".quick-input-description")),f=Be(u,Cu(".quick-input-and-message")),p=Be(f,Cu(".quick-input-filter")),m=this._register(new g3e(p));m.setAttribute("aria-describedby",`${this.idPrefix}message`);const v=Be(p,Cu(".quick-input-visible-count"));v.setAttribute("aria-live","polite"),v.setAttribute("aria-atomic","true");const b=new wz(v,{countFormat:C({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),E=Be(p,Cu(".quick-input-count"));E.setAttribute("aria-live","polite");const S=new wz(E,{countFormat:C({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),w=Be(u,Cu(".quick-input-action")),L=new Hte(w);L.label=C("ok","OK"),this._register(L.onDidClick(X=>{this.onDidAcceptEmitter.fire()}));const A=Be(u,Cu(".quick-input-action")),N=new Hte(A);N.label=C("custom","Custom"),this._register(N.onDidClick(X=>{this.onDidCustomEmitter.fire()}));const H=Be(f,Cu(`#${this.idPrefix}message.quick-input-message`)),M=this._register(new aY(e,this.idPrefix+"list",this.options));this._register(M.onChangedAllVisibleChecked(X=>{d.checked=X})),this._register(M.onChangedVisibleCount(X=>{b.setCount(X)})),this._register(M.onChangedCheckedCount(X=>{S.setCount(X)})),this._register(M.onLeave(()=>{setTimeout(()=>{m.setFocus(),this.controller instanceof fO&&this.controller.canSelectMany&&M.clearFocus()},0)})),this._register(M.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const R=new i3e(e);R.getContainer().classList.add("quick-input-progress");const q=$w(e);return this._register(q),this._register(qe(e,Ht.FOCUS,X=>{this.previousFocusElement=X.relatedTarget instanceof HTMLElement?X.relatedTarget:void 0},!0)),this._register(q.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(dO.Blur),this.previousFocusElement=void 0})),this._register(qe(e,Ht.FOCUS,X=>{m.setFocus()})),this._register(qe(e,Ht.KEY_DOWN,X=>{const $=new Sr(X);switch($.keyCode){case 3:Ni.stop(X,!0),this.onDidAcceptEmitter.fire();break;case 9:Ni.stop(X,!0),this.hide(dO.Gesture);break;case 2:if(!$.altKey&&!$.ctrlKey&&!$.metaKey){const I=[".action-label.codicon"];e.classList.contains("show-checkboxes")?I.push("input"):I.push("input[type=text]"),this.getUI().list.isDisplayed()&&I.push(".monaco-list");const O=e.querySelectorAll(I.join(", "));$.shiftKey&&$.target===O[0]?(Ni.stop(X,!0),O[O.length-1].focus()):!$.shiftKey&&$.target===O[O.length-1]&&(Ni.stop(X,!0),O[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:r,titleBar:n,title:o,description1:a,description2:h,rightActionBar:s,checkAll:d,filterContainer:p,inputBox:m,visibleCountContainer:v,visibleCount:b,countContainer:E,count:S,okContainer:w,ok:L,message:H,customButtonContainer:A,customButton:N,list:M,progressBar:R,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:X=>this.show(X),hide:()=>this.hide(),setVisibilities:X=>this.setVisibilities(X),setComboboxAccessibility:X=>this.setComboboxAccessibility(X),setEnabled:X=>this.setEnabled(X),setContextKey:X=>this.options.setContextKey(X)},this.updateStyles(),this.ui}pick(e,t={},n=Fn.None){return new Promise((r,o)=>{let s=h=>{s=r,t.onKeyMods&&t.onKeyMods(a.keyMods),r(h)};if(n.isCancellationRequested){s(void 0);return}const a=this.createQuickPick();let u;const d=[a,a.onDidAccept(()=>{if(a.canSelectMany)s(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(s(h),a.hide())}}),a.onDidChangeActive(h=>{const f=h[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const f=h[0];f&&(s(f),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const f=a.items.indexOf(h.item);if(f!==-1){const p=a.items.slice(),m=p.splice(f,1),v=a.activeItems.filter(E=>E!==m[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=p,v&&(a.activeItems=v),a.keepScrollPosition=b}}}))),a.onDidChangeValue(h=>{u&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==u)&&(a.activeItems=[u])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ri(d),s(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,f])=>{u=f,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(p=>p.type!=="separator"&&p.picked)),u&&(a.activeItems=[u])}),a.show(),Promise.resolve(e).then(void 0,h=>{o(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new fO(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ur.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),v0(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const r=this.options.backKeybindingLabel();xz.tooltip=r?C("quickInput.backWithKeybinding","Back ({0})",r):C("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const r=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!r){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=_l(o.parentElement);o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,m8.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:r,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));const a=s.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}m8.MAX_WIDTH=600;var Dz;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(Dz||(Dz={}));const q0={Quickaccess:"workbench.contributions.quickaccess"};let N3e=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Un(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return BS([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};Xr.add(q0.Quickaccess,new N3e);const Cc=gi("quickInputService");var A3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Gte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Tz=class extends Oe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Xr.as(q0.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var r;const[o,s]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,u=a==null?void 0:a.descriptor;if(a&&s&&u===s){e!==s.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,s,n);return}if(s&&!(n!=null&&n.preserveValue)){let m;if(a&&u&&u!==s){const v=a.value.substr(u.prefix.length);v&&(m=`${s.prefix}${v}`)}if(!m){const v=o==null?void 0:o.defaultFilterValue;v===Dz.LAST?m=this.lastAcceptedPickerValues.get(s):typeof v=="string"&&(m=`${s.prefix}${v}`)}typeof m=="string"&&(e=m)}const d=new Je,h=d.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,s,n),h.placeholder=s==null?void 0:s.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(r=n==null?void 0:n.itemActivation)!==null&&r!==void 0?r:wh.SECOND),h.contextKey=s==null?void 0:s.contextKey,h.filterValue=m=>m.substring(s?s.prefix.length:0),s!=null&&s.placeholder&&(h.ariaLabel=s==null?void 0:s.placeholder);let f;t&&(f=new Yle,d.add(kp(h.onWillAccept)(m=>{m.veto(),h.hide()}))),d.add(this.registerPickerListeners(h,o,s,e));const p=d.add(new aa);if(o&&d.add(o.provide(h,p.token)),kp(h.onDidHide)(()=>{h.selectedItems.length===0&&p.cancel(),d.dispose(),f==null||f.complete(h.selectedItems.slice(0))}),h.show(),t)return f==null?void 0:f.p}adjustValueSelection(e,t,n){var r;let o;n!=null&&n.preserveValue?o=[e.value.length,e.value.length]:o=[(r=t==null?void 0:t.prefix.length)!==null&&r!==void 0?r:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,n,r){const o=new Je,s=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return o.add(Un(()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{const[u]=this.getOrInstantiateProvider(a);u!==t?this.show(a,{preserveValue:!0}):s.value=a})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};Tz=A3e([Gte(0,Cc),Gte(1,Nn)],Tz);var O3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},PN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let z3=class extends mxe{constructor(e,t,n,r,o){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=r,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Tz))),this._quickAccess}createController(e=this.layoutService,t){var n,r;const o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,u,d,h,f)=>this.instantiationService.createInstance(mz,a,u,d,h,f),styles:this.computeStyles()},s=this._register(new m8(Object.assign(Object.assign({},o),t)));return s.layout(e.dimension,(r=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&r!==void 0?r:0),this._register(e.onDidLayout(a=>{var u,d;return s.layout(a,(d=(u=e.offset)===null||u===void 0?void 0:u.top)!==null&&d!==void 0?d:0)})),this._register(s.onShow(()=>this.resetContextKeys())),this._register(s.onHide(()=>this.resetContextKeys())),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Dt(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Fn.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Dh(this.theme,{quickInputBackground:mJ,quickInputForeground:nTe,quickInputTitleBackground:iTe,contrastBorder:go,widgetShadow:y0})),inputBox:Dh(this.theme,{inputForeground:OG,inputBackground:AG,inputBorder:RG,inputValidationInfoBackground:rce,inputValidationInfoForeground:oce,inputValidationInfoBorder:sce,inputValidationWarningBackground:ace,inputValidationWarningForeground:lce,inputValidationWarningBorder:uce,inputValidationErrorBackground:cce,inputValidationErrorForeground:dce,inputValidationErrorBorder:hce}),countBadge:Dh(this.theme,{badgeBackground:x2,badgeForeground:D2,badgeBorder:go}),button:Dh(this.theme,{buttonForeground:GDe,buttonBackground:NH,buttonHoverBackground:qDe,buttonBorder:go}),progressBar:Dh(this.theme,{progressBarBackground:YDe}),keybindingLabel:Dh(this.theme,{keybindingLabelBackground:sTe,keybindingLabelForeground:aTe,keybindingLabelBorder:lTe,keybindingLabelBottomBorder:uTe,keybindingLabelShadow:y0}),list:Dh(this.theme,{listBackground:mJ,listInactiveFocusForeground:KTe,listInactiveSelectionIconForeground:GTe,listInactiveFocusBackground:e4,listFocusOutline:el,listInactiveFocusOutline:el,pickerGroupBorder:oTe,pickerGroupForeground:rTe})}}};z3=O3e([PN(0,Nn),PN(1,cn),PN(2,xr),PN(3,rl),PN(4,CR)],z3);var efe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},xb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Iz=class extends z3{constructor(e,t,n,r,o,s){super(t,n,r,o,s),this.host=void 0;const a=rS.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};Iz=efe([xb(1,Nn),xb(2,cn),xb(3,xr),xb(4,rl),xb(5,CR)],Iz);let kz=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(Iz,e);this.mapEditorToService.set(e,t),kp(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Fn.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};kz=efe([xb(0,Nn),xb(1,Ii)],kz);class rS{constructor(e){this.editor=e,this.widget=new _8(this.editor)}static get(e){return e.getContribution(rS.ID)}dispose(){this.widget.dispose()}}rS.ID="editor.controller.quickInput";class _8{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return _8.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}_8.ID="editor.contrib.quickInputWidget";ki(rS.ID,rS);const tfe=gi("workspaceTrustManagementService");var bi;(function(i){const e=new KA;class t{constructor(u,d){this._serviceId=u,this._factory=d,this._value=null}get id(){return this._serviceId}get(u){if(!this._value){if(u&&(this._value=u[this._serviceId.toString()]),this._value||(this._value=this._factory(u)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function r(a,u){let d=new t(a,u);return n.push(d),d}function o(a){let u=new KA;for(const[h,f]of RNe())u.set(h,f);for(let h in a)a.hasOwnProperty(h)&&u.set(gi(h),a[h]);n.forEach(h=>u.set(h.id,h.get(a)));let d=new O3(u,!0);return u.set(Nn,d),[u,d]}i.init=o,i.instantiationService=r(Nn,()=>new O3(e,!0));const s=new Zde;i.configurationService=r(ir,()=>s),i.resourceConfigurationService=r(Nq,()=>new LMe(s)),i.resourcePropertiesService=r(ihe,()=>new a$(s)),i.contextService=r(jde,()=>new t8),i.labelService=r(wR,()=>new TMe),i.telemetryService=r(yg,()=>new xMe),i.dialogService=r(yR,()=>new SMe),i.notificationService=r(po,()=>new e8),i.markerService=r(xR,()=>new Lb),i.modeService=r(Fs,a=>new rO),i.standaloneThemeService=r(G0,()=>new $Pe),i.logService=r(wg,()=>new wxe(new yxe)),i.undoRedoService=r(gR,a=>new H3(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=r(fR,a=>new i3(i.configurationService.get(a),i.modeService.get(a))),i.modelService=r(To,a=>new I3(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=r(gG,a=>new Cz(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=r(cn,a=>new ez(i.configurationService.get(a))),i.codeEditorService=r(Ii,a=>new x3(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=r($p,()=>new JB),i.storageService=r(Dg,()=>new jFe),i.editorWorkerService=r(Hu,a=>new Z$(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(bi||(bi={}));class nfe extends Oe{constructor(e,t){super();const[n,r]=bi.init(t);this._serviceCollection=n,this._instantiationService=r;const o=this.get(ir),s=this.get(po),a=this.get(yg),u=this.get(xr),d=this.get(wg),h=this.get(cn);let f=(E,S)=>{let w=null;return t&&(w=t[E.toString()]),w||(w=S()),this._serviceCollection.set(E,w),w};f(rl,()=>new yz(h,o)),f(bc,()=>new gz(u));let p=f(Ir,()=>new EMe(this._instantiationService)),m=f(Er,()=>this._register(new Yde(h,p,a,s,d,e))),v=f(CR,()=>new Xde(bi.codeEditorService.get(Ii),e));f(Cc,()=>new kz(r,bi.codeEditorService.get(Ii)));let b=f(Hp,()=>this._register(new lz(v)));f(K0,()=>new YFe),f(j0,()=>{const E=new az(a,s,b,m,u);return E.configure({blockMouse:!1}),this._register(E)}),f(yC,()=>new vz(p)),f(xq,()=>new DMe(bi.modelService.get(To))),f(tfe,()=>new IMe)}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}var qte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Ll=gi("openerService"),R3e=Object.freeze({_serviceBrand:void 0,registerOpener(){return Oe.None},registerValidator(){return Oe.None},registerExternalUriResolver(){return Oe.None},setDefaultExternalOpener(){},registerExternalOpener(){return Oe.None},open(){return qte(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return qte(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function ife(i,e){return rn.isUri(i)?JN(i.scheme,e):bG(i,e+":")}function Yte(i,...e){return e.some(t=>ife(i,t))}function Nz(i){let e=JSON.parse(i);return e=Az(e),e}function Az(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return rn.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof OB||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=Az(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=Az(i[t],e+1))}return i}var U3;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(U3||(U3={}));var lY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},j3=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Db=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let Oz=class{constructor(e){this._commandService=e}open(e,t){return Db(this,void 0,void 0,function*(){if(!ife(e,In.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=rn.parse(e));let n=[];try{n=Nz(decodeURIComponent(e.query))}catch{try{n=Nz(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};Oz=lY([j3(0,Ir)],Oz);let Rz=class{constructor(e){this._editorService=e}open(e,t){return Db(this,void 0,void 0,function*(){typeof e=="string"&&(e=rn.parse(e));let n;const r=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return r&&(n={startLineNumber:parseInt(r[1]),startColumn:r[2]?parseInt(r[2]):1},e=e.with({fragment:""})),e.scheme===In.file&&(e=oke(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?U3.USER:U3.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};Rz=lY([j3(0,Ii)],Rz);let K3=class{constructor(e,t){this._openers=new ku,this._validators=new ku,this._resolvers=new ku,this._resolvedUriTargets=new na(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ku,this._defaultExternalOpener={openExternal:n=>Db(this,void 0,void 0,function*(){return Yte(n,In.http,In.https)?gue(n):window.location.href=n,!0})},this._openers.push({open:(n,r)=>Db(this,void 0,void 0,function*(){return r!=null&&r.openExternal||Yte(n,In.mailto,In.http,In.https,In.vsls)?(yield this._doOpenExternal(n,r),!0):!1})}),this._openers.push(new Oz(t)),this._openers.push(new Rz(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return Db(this,void 0,void 0,function*(){const r=typeof e=="string"?rn.parse(e):e,o=(n=this._resolvedUriTargets.get(r))!==null&&n!==void 0?n:e;for(const s of this._validators)if(!(yield s.shouldOpen(o)))return!1;for(const s of this._openers)if(yield s.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Db(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const r=yield n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Db(this,void 0,void 0,function*(){const n=typeof e=="string"?rn.parse(e):e;let r;try{r=(yield this.resolveExternalUri(n,t)).resolved}catch{r=n}let o;if(typeof e=="string"&&n.toString()===r.toString()?o=e:o=encodeURI(r.toString(!0)),t!=null&&t.allowContributedOpeners){const s=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:n,preferredOpenerId:s},Fn.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:n},Fn.None)})}dispose(){this._validators.clear()}};K3=lY([j3(0,Ii),j3(1,Ir)],K3);var M3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},P3e=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let gg=class{constructor(){this.simpleEditorModelResolverService=null}initWorkspace(e){this._container=e,this._services=this.createStandaloneServices()}get container(){return this._container}get services(){return this._services}get commandService(){return this.services.get(Ir)}mergeEditorServices(e){if(e){const t=this.services;for(const n in e)n&&t.get(n)&&e[n]&&t.set(n,e[n])}}create(e,t,n){const r=this.services;this.mergeEditorServices(n),r.has(Ja)||(this.simpleEditorModelResolverService=new E3(bi.modelService.get()),r.set(Ja,this.simpleEditorModelResolverService));const o=new tO(e,t,r,r.get(Nn),r.get(Ii),r.get(Ir),r.get(cn),r.get(Er),r.get(Hp),r.get(G0),r.get(po),r.get(ir),r.get(rl),r.get(To),r.get(Fs));return this.simpleEditorModelResolverService&&this.simpleEditorModelResolverService.setEditor(o),o}createStandaloneServices(){const e=new nfe(this.container),t=e.get(Nn);e.has(Ll)||e.set(Ll,new K3(e.get(Ii),e.get(Ir)));const n=t.createInstance(z3),r=new Xde(bi.codeEditorService.get(Ii),this.container);return e.set(CR,r),e.set(Cc,n),e}};gg=M3e([Gi(),P3e("design:paramtypes",[])],gg);const F3e=`${j5}-monaco-editor`;class uY extends he.PureComponent{constructor(e){super(e),this.monacoService=je.resolve(gg)}componentDidMount(){var e;const{options:t={},override:n,editorInstanceRef:r}=this.props;this.monacoInstance||(this.monacoInstance=(e=this.monacoService)===null||e===void 0?void 0:e.create(this.monacoDom,t,n),r==null||r(this.monacoInstance))}componentDidUpdate(e){const{onChangeEditorProps:t}=this.props;!wr.isEqual(e,this.props)&&(t==null||t(e,this.props))}render(){const{style:e}=this.props;let t={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return t=e?Object.assign(t,e):t,re.createElement("div",{style:t,className:F3e,ref:n=>{this.monacoDom=n}})}}const TR=Bn("scrollBar"),B3e=gt(TR,"wrapper"),cY=gt(TR,"container"),rfe=gt(TR,"shadow"),v8=gt(TR,"track"),W3e=gt(TR,"thumb"),V3e=_n(cY,"horizontal"),H3e=_n(cY,"vertical"),$3e=_n(v8,"hidden"),z3e=_n(v8,"vertical"),U3e=_n(v8,"horizontal"),j3e=_n(rfe,"hidden");var oS;(function(i){i.vertical="vertical",i.horizontal="horizontal"})(oS||(oS={}));function vh(i){return i===oS.vertical}function ey(i,e){const t=vh(i)?"height":"width";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}function oP(i,e){const t=vh(i)?"top":"left";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}const GS=he.forwardRef(function({children:i,style:e,trackStyle:t,className:n,isShowShadow:r=!1,inactiveHidden:o=!0,direction:s=oS.vertical,onScroll:a,onScrollStart:u,onScrollEnd:d},h){const[f,p]=he.useState(.1),[m,v]=he.useState(!0),[b,E]=he.useState(!1),[S,w]=he.useState(!1),L=he.useRef(null),A=he.useRef(null),N=he.useRef(null),H=he.useRef(null),M=he.useRef({y:0,startOffset:0}),R=()=>{var K;return((K=A.current)===null||K===void 0?void 0:K[ey(s,"scroll")])||0},q=()=>{var K;return((K=L.current)===null||K===void 0?void 0:K[ey(s,"client")])||0},X=()=>{var K;return((K=L.current)===null||K===void 0?void 0:K[oP(s,"scroll")])||0},$=()=>{var K;return((K=N.current)===null||K===void 0?void 0:K.getBoundingClientRect()[ey(s)])||0},I=()=>{var K;return((K=H.current)===null||K===void 0?void 0:K.getBoundingClientRect()[ey(s)])||0},O=()=>{var K;return((K=H.current)===null||K===void 0?void 0:K[oP(s,"offset")])||0};he.useImperativeHandle(h,()=>{var K;return{scrollTo:fe=>{if(B()&&typeof fe=="number"){const ne=fe/R()*$();j(fe),W(ne)}},scrollHeight:((K=L.current)===null||K===void 0?void 0:K.scrollHeight)||0}}),he.useEffect(()=>{const K=new ResizeObserver(fe=>{for(const ne of fe){const De=ne.contentRect[ey(s)],Ve=R();let rt=De/Ve;Number.isNaN(rt)&&(rt=1);const At=X(),Re=At/Ve*$();j(At),W(Re),p(rt>1?1:rt)}});return K.observe(L.current),()=>{K.disconnect()}},[]),he.useEffect(()=>{const K=new ResizeObserver(fe=>{for(const ne of fe){const be=R(),Ve=q()/be;p(Ve>1?1:Ve)}});return K.observe(A.current),()=>{K.disconnect()}},[]),he.useEffect(()=>{var K;let fe=0;function ne(be){if(!B())return;be.preventDefault();const De=X();fe?window.clearTimeout(fe):(u==null||u({scrollTop:De},be),E(!0)),fe=window.setTimeout(()=>{d==null||d({scrollTop:De},be),fe=0,E(!1)},150);const rt=5*(be[vh(s)?"deltaY":"deltaX"]/10),At=De/this[vh(s)?"scrollHeight":"scrollWidth"]*$();W(At),j(De+rt),a==null||a({scrollTop:De},be)}return(K=L.current)===null||K===void 0||K.addEventListener("wheel",ne),()=>{var be;(be=L.current)===null||be===void 0||be.removeEventListener("wheel",ne)}},[]);const B=()=>R()>q(),W=K=>{const fe=$(),ne=I();requestAnimationFrame(()=>{const be=oP(s);K<=0?H.current.style[be]="0px":K>=fe-ne?H.current.style[be]=`${fe-ne}px`:H.current.style[be]=`${K}px`})},j=K=>{requestAnimationFrame(()=>{var fe,ne,be;const De=oP(s);K<=0?((fe=L.current)===null||fe===void 0||fe.scrollTo({[De]:0}),v(!0)):K>=R()-$()?((ne=L.current)===null||ne===void 0||ne.scrollTo({[De]:R()}),v(!1)):((be=L.current)===null||be===void 0||be.scrollTo({[De]:K}),v(!1))})},U=K=>{if(K.stopPropagation(),!B())return;const{y:fe,height:ne,x:be,width:De}=K.target.getBoundingClientRect(),rt=I()/2,At=R(),ut=K[vh(s)?"clientY":"clientX"]-(vh(s)?fe:be)-rt,Ct=ut/(vh(s)?ne:De);u==null||u({scrollTop:X()},K),j(At*Ct),W(ut),a==null||a({scrollTop:X()},K),d==null||d({scrollTop:X()},K)},G=he.useCallback(K=>{const ne=K[vh(s)?"clientY":"clientX"]-M.current.y,be=M.current.startOffset,De=$(),Ve=be+ne,rt=Ve/De,At=R();j(At*rt),W(Ve),a==null||a({scrollTop:X()},K)},[]),z=K=>{B()&&(E(!0),u==null||u({scrollTop:X()},K),M.current={y:K[vh(s)?"clientY":"clientX"],startOffset:O()},document.body.style.userSelect="none",window.addEventListener("mouseup",fe=>{fe.stopPropagation(),fe.preventDefault(),E(!1),d==null||d({scrollTop:X()},fe),document.body.style.removeProperty("user-select"),window.removeEventListener("mousemove",G)},{once:!0}),window.addEventListener("mousemove",G,{passive:!1}))},k=he.useMemo(()=>{const K=R(),fe=q();return K<=fe?!0:!b&&!S},[b,S]);return re.createElement("div",{className:mn(B3e,n),ref:L,style:e,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1)},r&&re.createElement("div",{className:mn(rfe,m&&j3e)}),re.createElement("div",{className:mn(cY,vh(s)?H3e:V3e),ref:A},i),re.createElement("div",{className:mn(v8,vh(s)?z3e:U3e,o&&k&&$3e),ref:N,onClick:U,style:t},re.createElement("div",{className:W3e,style:{[ey(s)]:`calc(100% * ${f})`},ref:H,onClick:K=>K.stopPropagation(),onMouseDown:z})))}),Tg=Bn("search"),Zte=gt(Tg,"input"),K3e=gt(Tg,"group"),G3e=gt(Tg,"toolbar"),ofe=gt(Tg,"replace"),q3e=gt(Tg,"target"),Y3e=gt(ofe,"button"),Z3e=gt(Tg,"base"),X3e=gt(Tg,"info"),Q3e=gt(Tg,"warning"),J3e=gt(Tg,"error");var Lw;(function(i){i.info="info",i.warning="warning",i.error="error"})(Lw||(Lw={}));function v4(i){const{className:e,placeholder:t,toolbarData:n=[],onChange:r,value:o,info:s}=i,[a,u]=he.useState(!1),d=he.useRef(null),h=(E,S)=>{var w,L;(w=d.current)===null||w===void 0||w.focus(),(L=i.onToolbarClick)===null||L===void 0||L.call(i,S)},f=E=>{switch(E){case Lw.info:return X3e;case Lw.warning:return Q3e;case Lw.error:return J3e;default:return""}},p=()=>{u(!0)},m=()=>{u(!1)},v=E=>{if(d.current){d.current.style.height="24px";const w=d.current.scrollHeight/24,L=5;w>L?d.current.style.height=`${24*L}px`:d.current.style.height=`${d.current.scrollHeight}px`}r==null||r(E.target.value||"")},b=E=>{E.keyCode===13&&(r==null||r(E.target.value||""),E.preventDefault())};return re.createElement("div",{className:e},re.createElement("textarea",{ref:d,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",className:mn((s==null?void 0:s.text)&&f((s==null?void 0:s.type)||"")),value:o||"",placeholder:t,title:t,onKeyDown:b,onFocus:p,onBlur:m,onChange:v}),(s==null?void 0:s.text)&&a&&re.createElement("div",{className:mn(Z3e,f(s.type))},s.text),re.createElement(eR,{className:G3e,data:n,onClick:h}))}function e5e({children:i}){return re.createElement("div",{className:K3e},i)}v4.Group=e5e;function sfe(i){const{className:e="",style:t,placeholders:n=[],validationInfo:r,addons:o=[],values:s=[],onAddonClick:a,onButtonClick:u,onChange:d,onSearch:h}=i,[f="Search",p="Replace"]=n,[m,v]=o,[b,E]=s,[S,w]=he.useState(!1),L=()=>{w(!S),u==null||u(!S),h==null||h([b,E])},A=(R,q)=>{if(d){const X=q==="search"?[R,E]:[b,R];d(X),h==null||h(X)}},N=R=>{a==null||a(R),h==null||h([b,E])},M=(()=>{if(r)return typeof r=="string"?{type:Lw.info,text:r}:r})();return re.createElement("div",{style:t,className:mn(Tg,e)},re.createElement(hr,{className:Y3e,type:S?"chevron-down":"chevron-right",onClick:L}),re.createElement(v4.Group,null,re.createElement(v4,{value:b,className:mn(Zte,q3e),info:M,placeholder:f,onChange:R=>A(R,"search"),toolbarData:m,onToolbarClick:N}),S&&re.createElement(v4,{value:E,className:mn(Zte,ofe),placeholder:p,onChange:R=>A(R,"replace"),toolbarData:v,onToolbarClick:N})))}var t5e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const n5e={isOpen:!1,option:{name:"",value:"",description:""}},Y0=Bn("select"),i5e=gt(Y0,"container"),r5e=gt(Y0,"options"),Xte=gt(Y0,"descriptor"),o5e=gt(Y0,"input"),Qte=_n(Y0,"active"),s5e=gt(Y0,"arrow");class gO extends he.PureComponent{constructor(e){super(e),this.handleOnClickOption=t=>{const n=t.target,r=hM(n,"data-value"),o=hM(n,"data-name"),s=hM(n,"data-desc");if(o){const a={value:r,name:o,description:s};this.setState({option:a},()=>{var u,d;(d=(u=this.props).onSelect)===null||d===void 0||d.call(u,t,a),this.contextView.hide()})}},this.handleOnHoverOption=t=>{const n=t.target,r=hM(n,"data-desc"),o=this.contextView.view.querySelector("."+Xte);if(o){const s=r||"None";o.innerHTML=s,o.setAttribute("title",s)}},this.handleOnClickSelect=t=>{const n=this.selectElm.current,{children:r}=this.props;if(n){const o=n==null?void 0:n.getBoundingClientRect();o.y=o.y+o.height,this.setState({isOpen:!0}),this.contextView.show(o,()=>re.createElement("div",{style:{width:o.width},className:mn(i5e,Qte),onMouseOver:this.handleOnHoverOption},re.createElement("div",{className:r5e},ZO(r,{onClick:this.handleOnClickOption})),re.createElement("div",{className:Xte},"None")))}},this.contextView=AS({shadowOutline:!1}),this.state=this.getDefaultState(this.props),this.selectElm=re.createRef(),this.selectInput=re.createRef()}static getDerivedStateFromProps(e,t){return e.value!==t.value?{option:gO.getSelectOption(e)}:null}componentDidMount(){this.contextView.onHide(()=>{this.state.isOpen&&this.setState({isOpen:!1})})}componentWillUnmount(){this.contextView.dispose()}static getSelectOption(e){let t={};const n=e.value||e.defaultValue,r=he.Children.toArray(e.children);for(const o of r)if(he.isValidElement(o)){const s=o.props;if(s.value&&s.value===n){t=Object.assign(Object.assign({},s),{name:s.name||s.children});break}}return t}getDefaultState(e){return Object.assign(Object.assign({},n5e),{option:Object.assign({},gO.getSelectOption(e))})}render(){const{option:e,isOpen:t}=this.state,n=this.props,{className:r,placeholder:o,onSelect:s}=n,a=t5e(n,["className","placeholder","onSelect"]),d=mn(Y0,r,t?Qte:"");return re.createElement("div",Object.assign({ref:this.selectElm,className:d},a),re.createElement("input",{onClick:this.handleOnClickSelect,ref:this.selectInput,autoComplete:"off",placeholder:o,className:o5e,value:e.name,readOnly:!0}),re.createElement("span",{className:s5e},re.createElement(hr,{type:"chevron-down"})))}}var a5e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const afe=gt(Y0,"option"),l5e=_n(afe,"disabled");function lfe(i){const{className:e,value:t,title:n,name:r,description:o,disabled:s,children:a,onClick:u}=i,d=a5e(i,["className","value","title","name","description","disabled","children","onClick"]),h=mn(afe,e,s?l5e:""),f=p=>{s||u==null||u(p)};return re.createElement("div",Object.assign({className:h,title:n,"data-name":r||a,"data-value":t,"data-desc":o,onClick:f},d),a)}var Mz={exports:{}};(function(i,e){Object.defineProperty(e,"__esModule",{value:!0});function t(M){return typeof M=="object"&&!("toString"in M)?Object.prototype.toString.call(M).slice(8,-1):M}var n=typeof process=="object"&&!0;function r(M,R){if(!M)throw n?new Error("Invariant failed"):new Error(R())}e.invariant=r;var o=Object.prototype.hasOwnProperty,s=Array.prototype.splice,a=Object.prototype.toString;function u(M){return a.call(M).slice(8,-1)}var d=Object.assign||function(M,R){return h(R).forEach(function(q){o.call(R,q)&&(M[q]=R[q])}),M},h=typeof Object.getOwnPropertySymbols=="function"?function(M){return Object.keys(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.keys(M)};function f(M){return Array.isArray(M)?d(M.constructor(M.length),M):u(M)==="Map"?new Map(M):u(M)==="Set"?new Set(M):M&&typeof M=="object"?d(Object.create(Object.getPrototypeOf(M)),M):M}var p=function(){function M(){this.commands=d({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(R,q){return R===q},this.update.newContext=function(){return new M().update}}return Object.defineProperty(M.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(R){this.update.isEquals=R},enumerable:!0,configurable:!0}),M.prototype.extend=function(R,q){this.commands[R]=q},M.prototype.update=function(R,q){var X=this,$=typeof q=="function"?{$apply:q}:q;Array.isArray(R)&&Array.isArray($)||r(!Array.isArray($),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),r(typeof $=="object"&&$!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(X.commands).join(", ")+".")});var I=R;return h($).forEach(function(O){if(o.call(X.commands,O)){var B=R===I;I=X.commands[O]($[O],I,$,R),B&&X.isEquals(I,R)&&(I=R)}else{var W=u(R)==="Map"?X.update(R.get(O),$[O]):X.update(R[O],$[O]),j=u(I)==="Map"?I.get(O):I[O];(!X.isEquals(W,j)||typeof W>"u"&&!o.call(R,O))&&(I===R&&(I=f(R)),u(I)==="Map"?I.set(O,W):I[O]=W)}}),I},M}();e.Context=p;var m={$push:function(M,R,q){return b(R,q,"$push"),M.length?R.concat(M):R},$unshift:function(M,R,q){return b(R,q,"$unshift"),M.length?M.concat(R):R},$splice:function(M,R,q,X){return S(R,q),M.forEach(function($){w($),R===X&&$.length&&(R=f(X)),s.apply(R,$)}),R},$set:function(M,R,q){return A(q),M},$toggle:function(M,R){E(M,"$toggle");var q=M.length?f(R):R;return M.forEach(function(X){q[X]=!R[X]}),q},$unset:function(M,R,q,X){return E(M,"$unset"),M.forEach(function($){Object.hasOwnProperty.call(R,$)&&(R===X&&(R=f(X)),delete R[$])}),R},$add:function(M,R,q,X){return H(R,"$add"),E(M,"$add"),u(R)==="Map"?M.forEach(function($){var I=$[0],O=$[1];R===X&&R.get(I)!==O&&(R=f(X)),R.set(I,O)}):M.forEach(function($){R===X&&!R.has($)&&(R=f(X)),R.add($)}),R},$remove:function(M,R,q,X){return H(R,"$remove"),E(M,"$remove"),M.forEach(function($){R===X&&R.has($)&&(R=f(X)),R.delete($)}),R},$merge:function(M,R,q,X){return N(R,M),h(M).forEach(function($){M[$]!==R[$]&&(R===X&&(R=f(X)),R[$]=M[$])}),R},$apply:function(M,R){return L(M),M(R)}},v=new p;e.isEquals=v.update.isEquals,e.extend=v.extend,e.default=v.update,e.default.default=i.exports=d(e.default,e);function b(M,R,q){r(Array.isArray(M),function(){return"update(): expected target of "+t(q)+" to be an array; got "+t(M)+"."}),E(R[q],q)}function E(M,R){r(Array.isArray(M),function(){return"update(): expected spec of "+t(R)+" to be an array; got "+t(M)+". Did you forget to wrap your parameter in an array?"})}function S(M,R){r(Array.isArray(M),function(){return"Expected $splice target to be an array; got "+t(M)}),w(R.$splice)}function w(M){r(Array.isArray(M),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(M)+". Did you forget to wrap your parameters in an array?"})}function L(M){r(typeof M=="function",function(){return"update(): expected spec of $apply to be a function; got "+t(M)+"."})}function A(M){r(Object.keys(M).length===1,function(){return"Cannot have more than one key in an object with $set"})}function N(M,R){r(R&&typeof R=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t(R)}),r(M&&typeof M=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t(M)})}function H(M,R){var q=u(M);r(q==="Map"||q==="Set",function(){return"update(): "+t(R)+" expects a target of type Set or Map; got "+t(q)})}})(Mz,Mz.exports);var u5e=Mz.exports;const c5e=Wp(u5e),ufe=he.createContext({dragDropManager:void 0});function Dc(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var Jte=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),R6=function(){return Math.random().toString(36).substring(7).split("").join(".")},ene={INIT:"@@redux/INIT"+R6(),REPLACE:"@@redux/REPLACE"+R6(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+R6()}};function d5e(i){if(typeof i!="object"||i===null)return!1;for(var e=i;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function cfe(i,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Dc(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Dc(1));return t(cfe)(i,e)}if(typeof i!="function")throw new Error(Dc(2));var r=i,o=e,s=[],a=s,u=!1;function d(){a===s&&(a=s.slice())}function h(){if(u)throw new Error(Dc(3));return o}function f(b){if(typeof b!="function")throw new Error(Dc(4));if(u)throw new Error(Dc(5));var E=!0;return d(),a.push(b),function(){if(E){if(u)throw new Error(Dc(6));E=!1,d();var w=a.indexOf(b);a.splice(w,1),s=null}}}function p(b){if(!d5e(b))throw new Error(Dc(7));if(typeof b.type>"u")throw new Error(Dc(8));if(u)throw new Error(Dc(9));try{u=!0,o=r(o,b)}finally{u=!1}for(var E=s=a,S=0;S<E.length;S++){var w=E[S];w()}return b}function m(b){if(typeof b!="function")throw new Error(Dc(10));r=b,p({type:ene.REPLACE})}function v(){var b,E=f;return b={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Dc(11));function L(){w.next&&w.next(h())}L();var A=E(L);return{unsubscribe:A}}},b[Jte]=function(){return this},b}return p({type:ene.INIT}),n={dispatch:p,subscribe:f,getState:h,replaceReducer:m},n[Jte]=v,n}function vi(i,e,...t){if(h5e()&&e===void 0)throw new Error("invariant requires an error message argument");if(!i){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(e.replace(/%s/g,function(){return t[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function h5e(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function f5e(i,e,t){return e.split(".").reduce((n,r)=>n&&n[r]?n[r]:t||null,i)}function g5e(i,e){return i.filter(t=>t!==e)}function dfe(i){return typeof i=="object"}function p5e(i,e){const t=new Map,n=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};i.forEach(n),e.forEach(n);const r=[];return t.forEach((o,s)=>{o===1&&r.push(s)}),r}function m5e(i,e){return i.filter(t=>e.indexOf(t)>-1)}const dY="dnd-core/INIT_COORDS",b8="dnd-core/BEGIN_DRAG",hY="dnd-core/PUBLISH_DRAG_SOURCE",C8="dnd-core/HOVER",y8="dnd-core/DROP",w8="dnd-core/END_DRAG";function tne(i,e){return{type:dY,payload:{sourceClientOffset:e||null,clientOffset:i||null}}}const _5e={type:dY,payload:{clientOffset:null,sourceClientOffset:null}};function v5e(i){return function(t=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:o,getSourceClientOffset:s}=n,a=i.getMonitor(),u=i.getRegistry();i.dispatch(tne(o)),b5e(t,a,u);const d=w5e(t,a);if(d==null){i.dispatch(_5e);return}let h=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");C5e(s),h=s(d)}i.dispatch(tne(o,h));const p=u.getSource(d).beginDrag(a,d);if(p==null)return;y5e(p),u.pinSource(d);const m=u.getSourceType(d);return{type:b8,payload:{itemType:m,item:p,sourceId:d,clientOffset:o||null,sourceClientOffset:h||null,isSourcePublic:!!r}}}}function b5e(i,e,t){vi(!e.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(n){vi(t.getSource(n),"Expected sourceIds to be registered.")})}function C5e(i){vi(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function y5e(i){vi(dfe(i),"Item must be an object.")}function w5e(i,e){let t=null;for(let n=i.length-1;n>=0;n--)if(e.canDragSource(i[n])){t=i[n];break}return t}function S5e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function E5e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){S5e(i,r,t[r])})}return i}function L5e(i){return function(t={}){const n=i.getMonitor(),r=i.getRegistry();x5e(n),I5e(n).forEach((s,a)=>{const u=D5e(s,a,r,n),d={type:y8,payload:{dropResult:E5e({},t,u)}};i.dispatch(d)})}}function x5e(i){vi(i.isDragging(),"Cannot call drop while not dragging."),vi(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function D5e(i,e,t,n){const r=t.getTarget(i);let o=r?r.drop(n,i):void 0;return T5e(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function T5e(i){vi(typeof i>"u"||dfe(i),"Drop result must either be an object or undefined.")}function I5e(i){const e=i.getTargetIds().filter(i.canDropOnTarget,i);return e.reverse(),e}function k5e(i){return function(){const t=i.getMonitor(),n=i.getRegistry();N5e(t);const r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:w8}}}function N5e(i){vi(i.isDragging(),"Cannot call endDrag while not dragging.")}function Pz(i,e){return e===null?i===null:Array.isArray(i)?i.some(t=>t===e):i===e}function A5e(i){return function(t,{clientOffset:n}={}){O5e(t);const r=t.slice(0),o=i.getMonitor(),s=i.getRegistry(),a=o.getItemType();return M5e(r,s,a),R5e(r,o,s),P5e(r,o,s),{type:C8,payload:{targetIds:r,clientOffset:n||null}}}}function O5e(i){vi(Array.isArray(i),"Expected targetIds to be an array.")}function R5e(i,e,t){vi(e.isDragging(),"Cannot call hover while not dragging."),vi(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<i.length;n++){const r=i[n];vi(i.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(r);vi(o,"Expected targetIds to be registered.")}}function M5e(i,e,t){for(let n=i.length-1;n>=0;n--){const r=i[n],o=e.getTargetType(r);Pz(o,t)||i.splice(n,1)}}function P5e(i,e,t){i.forEach(function(n){t.getTarget(n).hover(e,n)})}function F5e(i){return function(){if(i.getMonitor().isDragging())return{type:hY}}}function B5e(i){return{beginDrag:v5e(i),publishDragSource:F5e(i),hover:A5e(i),drop:L5e(i),endDrag:k5e(i)}}class W5e{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(o){return(...s)=>{const a=o.apply(e,s);typeof a<"u"&&t(a)}}const r=B5e(this);return Object.keys(r).reduce((o,s)=>{const a=r[s];return o[s]=n(a),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function V5e(i,e){return{x:i.x+e.x,y:i.y+e.y}}function hfe(i,e){return{x:i.x-e.x,y:i.y-e.y}}function H5e(i){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=i;return!e||!t||!n?null:hfe(V5e(e,n),t)}function $5e(i){const{clientOffset:e,initialClientOffset:t}=i;return!e||!t?null:hfe(e,t)}const U2=[],fY=[];U2.__IS_NONE__=!0;fY.__IS_ALL__=!0;function z5e(i,e){return i===U2?!1:i===fY||typeof e>"u"?!0:m5e(e,i).length>0}class U5e{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;vi(typeof e=="function","listener must be a function."),vi(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;const o=()=>{const s=this.store.getState(),a=s.stateId;try{a===r||a===r+1&&!z5e(s.dirtyHandlerIds,n)||e()}finally{r=a}};return this.store.subscribe(o)}subscribeToOffsetChange(e){vi(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return vi(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(vi(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),r=this.getItemType();return Pz(n,r)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(vi(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),r=this.getItemType();return n!==r?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Pz(r,o))return!1;const s=this.getTargetIds();if(!s.length)return!1;const a=s.indexOf(e);return n?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return H5e(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return $5e(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const nne=typeof global<"u"?global:self,ffe=nne.MutationObserver||nne.WebKitMutationObserver;function gfe(i){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),i()}}}function j5e(i){let e=1;const t=new ffe(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const K5e=typeof ffe=="function"?j5e:gfe;class G5e{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,r=e.length-this.index;n<r;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=K5e(this.flush),this.requestErrorThrow=gfe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class q5e{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class Y5e{create(e){const t=this.freeTasks,n=t.length?t.pop():new q5e(this.onError,r=>t[t.length]=r);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const pfe=new G5e,Z5e=new Y5e(pfe.registerPendingError);function X5e(i){pfe.enqueueTask(Z5e.create(i))}const gY="dnd-core/ADD_SOURCE",pY="dnd-core/ADD_TARGET",mY="dnd-core/REMOVE_SOURCE",S8="dnd-core/REMOVE_TARGET";function Q5e(i){return{type:gY,payload:{sourceId:i}}}function J5e(i){return{type:pY,payload:{targetId:i}}}function eBe(i){return{type:mY,payload:{sourceId:i}}}function tBe(i){return{type:S8,payload:{targetId:i}}}function nBe(i){vi(typeof i.canDrag=="function","Expected canDrag to be a function."),vi(typeof i.beginDrag=="function","Expected beginDrag to be a function."),vi(typeof i.endDrag=="function","Expected endDrag to be a function.")}function iBe(i){vi(typeof i.canDrop=="function","Expected canDrop to be a function."),vi(typeof i.hover=="function","Expected hover to be a function."),vi(typeof i.drop=="function","Expected beginDrag to be a function.")}function Fz(i,e){if(e&&Array.isArray(i)){i.forEach(t=>Fz(t,!1));return}vi(typeof i=="string"||typeof i=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Wc;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Wc||(Wc={}));let rBe=0;function oBe(){return rBe++}function sBe(i){const e=oBe().toString();switch(i){case Wc.SOURCE:return`S${e}`;case Wc.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${i}`)}}function ine(i){switch(i[0]){case"S":return Wc.SOURCE;case"T":return Wc.TARGET;default:throw new Error(`Cannot parse handler ID: ${i}`)}}function rne(i,e){const t=i.entries();let n=!1;do{const{done:r,value:[,o]}=t.next();if(o===e)return!0;n=!!r}while(!n);return!1}class aBe{addSource(e,t){Fz(e),nBe(t);const n=this.addHandler(Wc.SOURCE,e,t);return this.store.dispatch(Q5e(n)),n}addTarget(e,t){Fz(e,!0),iBe(t);const n=this.addHandler(Wc.TARGET,e,t);return this.store.dispatch(J5e(n)),n}containsHandler(e){return rne(this.dragSources,e)||rne(this.dropTargets,e)}getSource(e,t=!1){return vi(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return vi(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return vi(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return vi(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ine(e)===Wc.SOURCE}isTargetId(e){return ine(e)===Wc.TARGET}removeSource(e){vi(this.getSource(e),"Expected an existing source."),this.store.dispatch(eBe(e)),X5e(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){vi(this.getTarget(e),"Expected an existing target."),this.store.dispatch(tBe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);vi(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){vi(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=sBe(e);return this.types.set(r,t),e===Wc.SOURCE?this.dragSources.set(r,n):e===Wc.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const lBe=(i,e)=>i===e;function uBe(i,e){return!i&&!e?!0:!i||!e?!1:i.x===e.x&&i.y===e.y}function cBe(i,e,t=lBe){if(i.length!==e.length)return!1;for(let n=0;n<i.length;++n)if(!t(i[n],e[n]))return!1;return!0}function dBe(i=U2,e){switch(e.type){case C8:break;case gY:case pY:case S8:case mY:return U2;case b8:case hY:case w8:case y8:default:return fY}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=p5e(t,n);if(!(r.length>0||!cBe(t,n)))return U2;const s=n[n.length-1],a=t[t.length-1];return s!==a&&(s&&r.push(s),a&&r.push(a)),r}function hBe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function fBe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){hBe(i,r,t[r])})}return i}const one={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function gBe(i=one,e){const{payload:t}=e;switch(e.type){case dY:case b8:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case C8:return uBe(i.clientOffset,t.clientOffset)?i:fBe({},i,{clientOffset:t.clientOffset});case w8:case y8:return one;default:return i}}function pBe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ty(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){pBe(i,r,t[r])})}return i}const mBe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function _Be(i=mBe,e){const{payload:t}=e;switch(e.type){case b8:return ty({},i,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case hY:return ty({},i,{isSourcePublic:!0});case C8:return ty({},i,{targetIds:t.targetIds});case S8:return i.targetIds.indexOf(t.targetId)===-1?i:ty({},i,{targetIds:g5e(i.targetIds,t.targetId)});case y8:return ty({},i,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case w8:return ty({},i,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function vBe(i=0,e){switch(e.type){case gY:case pY:return i+1;case mY:case S8:return i-1;default:return i}}function bBe(i=0){return i+1}function CBe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function yBe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){CBe(i,r,t[r])})}return i}function wBe(i={},e){return{dirtyHandlerIds:dBe(i.dirtyHandlerIds,{type:e.type,payload:yBe({},e.payload,{prevTargetIds:f5e(i,"dragOperation.targetIds",[])})}),dragOffset:gBe(i.dragOffset,e),refCount:vBe(i.refCount,e),dragOperation:_Be(i.dragOperation,e),stateId:bBe(i.stateId)}}function SBe(i,e=void 0,t={},n=!1){const r=EBe(n),o=new U5e(r,new aBe(r)),s=new W5e(r,o),a=i(s,e,t);return s.receiveBackend(a),s}function EBe(i){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return cfe(wBe,i&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function LBe(i,e){if(i==null)return{};var t=xBe(i,e),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function xBe(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}let sne=0;const b4=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var DBe=he.memo(function(e){var{children:t}=e,n=LBe(e,["children"]);const[r,o]=TBe(n);return he.useEffect(()=>{if(o){const s=mfe();return++sne,()=>{--sne===0&&(s[b4]=null)}}},[]),Mc.jsx(ufe.Provider,{value:r,children:t})});function TBe(i){if("manager"in i)return[{dragDropManager:i.manager},!1];const e=IBe(i.backend,i.context,i.options,i.debugMode),t=!i.context;return[e,t]}function IBe(i,e=mfe(),t,n){const r=e;return r[b4]||(r[b4]={dragDropManager:SBe(i,e,t,n)}),r[b4]}function mfe(){return typeof global<"u"?global:window}var kBe=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){var s=o[r];if(!i(e[s],t[s]))return!1}return!0}return e!==e&&t!==t};const NBe=Wp(kBe),H1=typeof window<"u"?he.useLayoutEffect:he.useEffect;function ABe(i,e,t){const[n,r]=he.useState(()=>e(i)),o=he.useCallback(()=>{const s=e(i);NBe(n,s)||(r(s),t&&t())},[n,i,t]);return H1(o),[n,o]}function OBe(i,e,t){const[n,r]=ABe(i,e,t);return H1(function(){const s=i.getHandlerId();if(s!=null)return i.subscribeToStateChange(r,{handlerIds:[s]})},[i,r]),n}function _fe(i,e,t){return OBe(e,i||(()=>({})),()=>t.reconnect())}function vfe(i,e){const t=[...e||[]];return e==null&&typeof i!="function"&&t.push(i),he.useMemo(()=>typeof i=="function"?i():i,t)}function RBe(i){return he.useMemo(()=>i.hooks.dragSource(),[i])}function MBe(i){return he.useMemo(()=>i.hooks.dragPreview(),[i])}let M6=!1,P6=!1;class PBe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){vi(!M6,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return M6=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{M6=!1}}isDragging(){if(!this.sourceId)return!1;vi(!P6,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return P6=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{P6=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let F6=!1;class FBe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;vi(!F6,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return F6=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{F6=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function BBe(i,e,t){const n=t.getRegistry(),r=n.addTarget(i,e);return[r,()=>n.removeTarget(r)]}function WBe(i,e,t){const n=t.getRegistry(),r=n.addSource(i,e);return[r,()=>n.removeSource(r)]}function Bz(i,e,t,n){let r=t?t.call(n,i,e):void 0;if(r!==void 0)return!!r;if(i===e)return!0;if(typeof i!="object"||!i||typeof e!="object"||!e)return!1;const o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const d=o[u];if(!a(d))return!1;const h=i[d],f=e[d];if(r=t?t.call(n,h,f,d):void 0,r===!1||r===void 0&&h!==f)return!1}return!0}function Wz(i){return i!==null&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function VBe(i){if(typeof i.type=="string")return;const e=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function HBe(i){return(e=null,t=null)=>{if(!he.isValidElement(e)){const o=e;return i(o,t),o}const n=e;return VBe(n),$Be(n,t?o=>i(o,t):i)}}function bfe(i){const e={};return Object.keys(i).forEach(t=>{const n=i[t];if(t.endsWith("Ref"))e[t]=i[t];else{const r=HBe(n);e[t]=()=>r}}),e}function ane(i,e){typeof i=="function"?i(e):i.current=e}function $Be(i,e){const t=i.ref;return vi(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?he.cloneElement(i,{ref:n=>{ane(t,n),ane(e,n)}}):he.cloneElement(i,{ref:e})}class zBe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Bz(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Bz(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=bfe({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Wz(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Wz(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class UBe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Bz(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=bfe({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Wz(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function qS(){const{dragDropManager:i}=he.useContext(ufe);return vi(i!=null,"Expected drag drop context"),i}function jBe(i,e){const t=qS(),n=he.useMemo(()=>new zBe(t.getBackend()),[t]);return H1(()=>(n.dragSourceOptions=i||null,n.reconnect(),()=>n.disconnectDragSource()),[n,i]),H1(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function KBe(){const i=qS();return he.useMemo(()=>new PBe(i),[i])}class GBe{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:o}=n;return o?o(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function qBe(i,e,t){const n=he.useMemo(()=>new GBe(i,e,t),[e,t]);return he.useEffect(()=>{n.spec=i},[i]),n}function YBe(i){return he.useMemo(()=>{const e=i.type;return vi(e!=null,"spec.type must be defined"),e},[i])}function ZBe(i,e,t){const n=qS(),r=qBe(i,e,t),o=YBe(i);H1(function(){if(o!=null){const[a,u]=WBe(o,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u}},[n,e,t,r,o])}function XBe(i,e){const t=vfe(i,e);vi(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=KBe(),r=jBe(t.options,t.previewOptions);return ZBe(t,n,r),[_fe(t.collect,n,r),RBe(r),MBe(r)]}function QBe(i){return he.useMemo(()=>i.hooks.dropTarget(),[i])}function JBe(i){const e=qS(),t=he.useMemo(()=>new UBe(e.getBackend()),[e]);return H1(()=>(t.dropTargetOptions=i||null,t.reconnect(),()=>t.disconnectDropTarget()),[i]),t}function e8e(){const i=qS();return he.useMemo(()=>new FBe(i),[i])}function t8e(i){const{accept:e}=i;return he.useMemo(()=>(vi(i.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class n8e{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function i8e(i,e){const t=he.useMemo(()=>new n8e(i,e),[e]);return he.useEffect(()=>{t.spec=i},[i]),t}function r8e(i,e,t){const n=qS(),r=i8e(i,e),o=t8e(i);H1(function(){const[a,u]=BBe(o,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u},[n,e,r,t,o.map(s=>s.toString()).join("|")])}function o8e(i,e){const t=vfe(i,e),n=e8e(),r=JBe(t.options);return r8e(t,n,r),[_fe(t.collect,n,r),QBe(r)]}function Cfe(i){let e=null;return()=>(e==null&&(e=i()),e)}function s8e(i,e){return i.filter(t=>t!==e)}function a8e(i,e){const t=new Set,n=o=>t.add(o);i.forEach(n),e.forEach(n);const r=[];return t.forEach(o=>r.push(o)),r}class l8e{enter(e){const t=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(e));return this.entered=a8e(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=s8e(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class u8e{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const yfe="__NATIVE_FILE__",wfe="__NATIVE_URL__",Sfe="__NATIVE_TEXT__",Efe="__NATIVE_HTML__",lne=Object.freeze(Object.defineProperty({__proto__:null,FILE:yfe,HTML:Efe,TEXT:Sfe,URL:wfe},Symbol.toStringTag,{value:"Module"}));function B6(i,e,t){const n=e.reduce((r,o)=>r||i.getData(o),"");return n??t}const Vz={[yfe]:{exposeProperties:{files:i=>Array.prototype.slice.call(i.files),items:i=>i.items,dataTransfer:i=>i},matchesTypes:["Files"]},[Efe]:{exposeProperties:{html:(i,e)=>B6(i,e,""),dataTransfer:i=>i},matchesTypes:["Html","text/html"]},[wfe]:{exposeProperties:{urls:(i,e)=>B6(i,e,"").split(`
`),dataTransfer:i=>i},matchesTypes:["Url","text/uri-list"]},[Sfe]:{exposeProperties:{text:(i,e)=>B6(i,e,""),dataTransfer:i=>i},matchesTypes:["Text","text/plain"]}};function c8e(i,e){const t=Vz[i];if(!t)throw new Error(`native type ${i} has no configuration`);const n=new u8e(t);return n.loadDataTransfer(e),n}function W6(i){if(!i)return null;const e=Array.prototype.slice.call(i.types||[]);return Object.keys(Vz).filter(t=>{const n=Vz[t];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>e.indexOf(r)>-1):!1})[0]||null}const d8e=Cfe(()=>/firefox/i.test(navigator.userAgent)),Lfe=Cfe(()=>!!window.safari);class une{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:o,c3s:s}=this;let a=t.length-1;if(e===t[a])return n[a];let u=0,d=s.length-1,h;for(;u<=d;){h=Math.floor(.5*(u+d));const m=t[h];if(m<e)u=h+1;else if(m>e)d=h-1;else return n[h]}a=Math.max(0,d);const f=e-t[a],p=f*f;return n[a]+r[a]*f+o[a]*p+s[a]*f*p}constructor(e,t){const{length:n}=e,r=[];for(let m=0;m<n;m++)r.push(m);r.sort((m,v)=>e[m]<e[v]?-1:1);const o=[],s=[];let a,u;for(let m=0;m<n-1;m++)a=e[m+1]-e[m],u=t[m+1]-t[m],o.push(a),s.push(u/a);const d=[s[0]];for(let m=0;m<o.length-1;m++){const v=s[m],b=s[m+1];if(v*b<=0)d.push(0);else{a=o[m];const E=o[m+1],S=a+E;d.push(3*S/((S+E)/v+(S+a)/b))}}d.push(s[s.length-1]);const h=[],f=[];let p;for(let m=0;m<d.length-1;m++){p=s[m];const v=d[m],b=1/o[m],E=v+d[m+1]-p-p;h.push((p-v-E)*b),f.push(E*b*b)}this.xs=e,this.ys=t,this.c1s=d,this.c2s=h,this.c3s=f}}const h8e=1;function xfe(i){const e=i.nodeType===h8e?i:i.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function sP(i){return{x:i.clientX,y:i.clientY}}function f8e(i){var e;return i.nodeName==="IMG"&&(d8e()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(i)))}function g8e(i,e,t,n){let r=i?e.width:t,o=i?e.height:n;return Lfe()&&i&&(o/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:o}}function p8e(i,e,t,n,r){const o=f8e(e),a=xfe(o?i:e),u={x:t.x-a.x,y:t.y-a.y},{offsetWidth:d,offsetHeight:h}=i,{anchorX:f,anchorY:p}=n,{dragPreviewWidth:m,dragPreviewHeight:v}=g8e(o,e,d,h),b=()=>{let H=new une([0,.5,1],[u.y,u.y/h*v,u.y+v-h]).interpolate(p);return Lfe()&&o&&(H+=(window.devicePixelRatio-1)*v),H},E=()=>new une([0,.5,1],[u.x,u.x/d*m,u.x+m-d]).interpolate(f),{offsetX:S,offsetY:w}=r,L=S===0||S,A=w===0||w;return{x:L?S:E(),y:A?w:b()}}class m8e{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function _8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cne(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){_8e(i,r,t[r])})}return i}class v8e{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=s=>this.handleDragStart(s,e),o=s=>this.handleSelectStart(s);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=s=>this.handleDragEnter(s,e),r=s=>this.handleDragOver(s,e),o=s=>this.handleDrop(s,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return cne({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return cne({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(lne).some(t=>lne[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=c8e(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{const o=this.sourceNodes.get(r);return o&&xfe(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{const r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const s=sP(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:a}=r,u=W6(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),f=this.sourceNodes.get(h),p=this.sourcePreviewNodes.get(h)||f;if(p){const{anchorX:m,anchorY:v,offsetX:b,offsetY:E}=this.getCurrentSourcePreviewNodeOptions(),L=p8e(f,p,s,{anchorX:m,anchorY:v},{offsetX:b,offsetY:E});a.setDragImage(p,L.x,L.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(r.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(a&&!a.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;const{dataTransfer:a}=r,u=W6(a);u&&this.beginDragNativeItem(u,a)},this.handleTopDragEnter=r=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,o.length>0&&this.actions.hover(o,{clientOffset:sP(r)}),o.some(a=>this.monitor.canDropOnTarget(a))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=sP(r),this.scheduleHover(o),(o||[]).some(a=>this.monitor.canDropOnTarget(a))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;r.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}else W6(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:sP(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{const o=r.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(r.preventDefault(),o.dragDrop()))},this.options=new m8e(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new l8e(this.isNodeInDocument)}}const b8e=function(e,t,n){return new v8e(e,t,n)},C8e=({onClick:i,classNames:e="",renderStatus:t})=>{const[n,r]=he.useState(!1),o=()=>{r(!0)},s=()=>{r(!1)};return re.createElement("div",{role:"button",className:e,onClick:i,onMouseOver:o,onMouseOut:s},t==null?void 0:t(n))};var y8e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const w8e=Bn("tab"),E8=gt(w8e,"item"),Hz=_n(E8,"active"),S8e=gt(E8,"label"),E8e=gt(E8,"extra");function Dfe(i){var{tab:e,active:t}=i,n=y8e(i,["tab","active"]);const{name:r,closable:o,id:s,icon:a,status:u}=e,{onCloseTab:d,onSelectTab:h,onContextMenu:f,onDrag:p}=n,m=he.useRef(null),v=L=>{L.preventDefault(),f==null||f(L,e)},[,b]=XBe({collect:L=>({isDragging:L.isDragging()}),type:"DND_NODE",item:e}),[,E]=o8e({accept:"DND_NODE",hover(L,A){if(!m.current)return;const N=m.current,H=N==null?void 0:N.getBoundingClientRect(),M=(H.right-H.left)/2,q=A.getClientOffset().x-H.left,X={hoverMiddleX:M,hoverClientX:q};p==null||p(L,e,X)}});b(E(m));const S=L=>typeof L=="string"?re.createElement(hr,{type:L}):L,w=(L,A)=>{if(L&&!A){if(typeof L=="function")return L(e);switch(L){case"edited":return re.createElement(hr,{type:"primitive-dot"});default:return re.createElement(hr,{type:"close"})}}return re.createElement(hr,{type:"close"})};return re.createElement("div",{ref:m,className:mn(E8,{[Hz]:t}),onClick:L=>h==null?void 0:h(s),onContextMenu:v},a&&re.createElement("span",{className:S8e},S(a)),r,(typeof o>"u"||o)&&re.createElement(C8e,{classNames:E8e,onClick:L=>{L.stopPropagation(),d==null||d(s)},renderStatus:L=>w(u,L)}))}const $z=Bn("tabs"),L8e=gt($z,"header");function _Y(i){var e;const{role:t,activeTab:n,className:r,data:o=[],type:s="line",style:a,onMoveTab:u,onCloseTab:d,onSelectTab:h,onContextMenu:f}=i,p=he.useRef(null),m=he.useRef(null),v=he.useCallback((E,S)=>{const w=o[E];u==null||u(c5e(o,{$splice:[[E,1],[S,0,w]]}))},[o]),b=(E,S,w)=>{const L=o.indexOf(E),A=o.indexOf(S),{hoverClientX:N,hoverMiddleX:H}=w;L!==A&&(L<A&&N<H||L>A&&N>H||v==null||v(L,A))};return he.useEffect(()=>{var E,S;const w=(E=p.current)===null||E===void 0?void 0:E.querySelector(`.${Hz}`);if(w){const L=((S=p.current)===null||S===void 0?void 0:S.clientWidth)||0,A=w.offsetLeft;A>L&&setTimeout(()=>{var N;(N=m.current)===null||N===void 0||N.scrollTo(A+w.clientWidth)},0)}},[(e=p.current)===null||e===void 0?void 0:e.querySelector(`.${Hz}`)]),re.createElement(DBe,{backend:b8e,context:window},re.createElement("div",{style:a,className:mn($z,_n($z,s),r),role:t,ref:p},re.createElement(GS,{className:L8e,direction:oS.horizontal,ref:m,trackStyle:{height:3}},o.map((E,S)=>re.createElement(Dfe,{key:E.id,active:n===E.id,tab:E,onDrag:b,onCloseTab:d,onContextMenu:f,onSelectTab:h})))))}const vY=Bn("tree"),IR=gt(vY,"treenode"),x8e=_n(IR,"active"),D8e=_n(IR,"open"),T8e=_n(IR,"close"),Tfe=gt(vY,"indent"),I8e=gt(Tfe,"guide"),k8e=gt(IR,"title"),N8e=8,A8e=({data:i,indent:e,className:t,name:n,renderIcon:r,renderTitle:o,draggable:s,onContextMenu:a,onClick:u,onNodeDragStart:d,onNodeDragEnter:h,onNodeDragOver:f,onNodeDrop:p,onNodeDragEnd:m})=>{const v=i.id,b=he.useRef(null),E=H=>{H.stopPropagation(),d==null||d(H,i);try{H.dataTransfer.setData("text/plain","")}catch{}},S=H=>{H.preventDefault(),H.stopPropagation(),h==null||h(H,i)},w=H=>{H.preventDefault(),H.stopPropagation(),f==null||f(H,i)},L=H=>{H.preventDefault(),H.stopPropagation(),p==null||p(H,i)},A=H=>{H.stopPropagation(),m==null||m(H,i)},N=`${e?e+"_":""}${i.id}`;return re.createElement("div",{ref:b,key:`${v}-${e}`,tabIndex:0,"data-indent":e,"data-key":v,"data-id":`mo_treeNode_${N}`,className:t,title:n,draggable:s,onContextMenu:a,onClick:u,onDragStart:E,onDragOver:w,onDragEnter:S,onDragEnd:A,onDrop:L},re.createElement("div",{className:Tfe,style:{width:N8e*e}},new Array(e).fill("").map((H,M)=>re.createElement("div",{key:M,className:I8e}))),r(),re.createElement("span",{className:k8e},o()))};function O8e(){this.__data__=[],this.size=0}var R8e=O8e;function M8e(i,e){return i===e||i!==i&&e!==e}var bY=M8e,P8e=bY;function F8e(i,e){for(var t=i.length;t--;)if(P8e(i[t][0],e))return t;return-1}var L8=F8e,B8e=L8,W8e=Array.prototype,V8e=W8e.splice;function H8e(i){var e=this.__data__,t=B8e(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():V8e.call(e,t,1),--this.size,!0}var $8e=H8e,z8e=L8;function U8e(i){var e=this.__data__,t=z8e(e,i);return t<0?void 0:e[t][1]}var j8e=U8e,K8e=L8;function G8e(i){return K8e(this.__data__,i)>-1}var q8e=G8e,Y8e=L8;function Z8e(i,e){var t=this.__data__,n=Y8e(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var X8e=Z8e,Q8e=R8e,J8e=$8e,e7e=j8e,t7e=q8e,n7e=X8e;function YS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}YS.prototype.clear=Q8e;YS.prototype.delete=J8e;YS.prototype.get=e7e;YS.prototype.has=t7e;YS.prototype.set=n7e;var x8=YS,i7e=x8;function r7e(){this.__data__=new i7e,this.size=0}var o7e=r7e;function s7e(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var a7e=s7e;function l7e(i){return this.__data__.get(i)}var u7e=l7e;function c7e(i){return this.__data__.has(i)}var d7e=c7e,h7e=typeof ta=="object"&&ta&&ta.Object===Object&&ta,Ife=h7e,f7e=Ife,g7e=typeof self=="object"&&self&&self.Object===Object&&self,p7e=f7e||g7e||Function("return this")(),Ig=p7e,m7e=Ig,_7e=m7e.Symbol,kR=_7e,dne=kR,kfe=Object.prototype,v7e=kfe.hasOwnProperty,b7e=kfe.toString,FN=dne?dne.toStringTag:void 0;function C7e(i){var e=v7e.call(i,FN),t=i[FN];try{i[FN]=void 0;var n=!0}catch{}var r=b7e.call(i);return n&&(e?i[FN]=t:delete i[FN]),r}var y7e=C7e,w7e=Object.prototype,S7e=w7e.toString;function E7e(i){return S7e.call(i)}var L7e=E7e,hne=kR,x7e=y7e,D7e=L7e,T7e="[object Null]",I7e="[object Undefined]",fne=hne?hne.toStringTag:void 0;function k7e(i){return i==null?i===void 0?I7e:T7e:fne&&fne in Object(i)?x7e(i):D7e(i)}var NR=k7e;function N7e(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var NC=N7e,A7e=NR,O7e=NC,R7e="[object AsyncFunction]",M7e="[object Function]",P7e="[object GeneratorFunction]",F7e="[object Proxy]";function B7e(i){if(!O7e(i))return!1;var e=A7e(i);return e==M7e||e==P7e||e==R7e||e==F7e}var Nfe=B7e,W7e=Ig,V7e=W7e["__core-js_shared__"],H7e=V7e,V6=H7e,gne=function(){var i=/[^.]+$/.exec(V6&&V6.keys&&V6.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function $7e(i){return!!gne&&gne in i}var z7e=$7e,U7e=Function.prototype,j7e=U7e.toString;function K7e(i){if(i!=null){try{return j7e.call(i)}catch{}try{return i+""}catch{}}return""}var Afe=K7e,G7e=Nfe,q7e=z7e,Y7e=NC,Z7e=Afe,X7e=/[\\^$.*+?()[\]{}|]/g,Q7e=/^\[object .+?Constructor\]$/,J7e=Function.prototype,e9e=Object.prototype,t9e=J7e.toString,n9e=e9e.hasOwnProperty,i9e=RegExp("^"+t9e.call(n9e).replace(X7e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function r9e(i){if(!Y7e(i)||q7e(i))return!1;var e=G7e(i)?i9e:Q7e;return e.test(Z7e(i))}var o9e=r9e;function s9e(i,e){return i==null?void 0:i[e]}var a9e=s9e,l9e=o9e,u9e=a9e;function c9e(i,e){var t=u9e(i,e);return l9e(t)?t:void 0}var AC=c9e,d9e=AC,h9e=Ig,f9e=d9e(h9e,"Map"),CY=f9e,g9e=AC,p9e=g9e(Object,"create"),D8=p9e,pne=D8;function m9e(){this.__data__=pne?pne(null):{},this.size=0}var _9e=m9e;function v9e(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var b9e=v9e,C9e=D8,y9e="__lodash_hash_undefined__",w9e=Object.prototype,S9e=w9e.hasOwnProperty;function E9e(i){var e=this.__data__;if(C9e){var t=e[i];return t===y9e?void 0:t}return S9e.call(e,i)?e[i]:void 0}var L9e=E9e,x9e=D8,D9e=Object.prototype,T9e=D9e.hasOwnProperty;function I9e(i){var e=this.__data__;return x9e?e[i]!==void 0:T9e.call(e,i)}var k9e=I9e,N9e=D8,A9e="__lodash_hash_undefined__";function O9e(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=N9e&&e===void 0?A9e:e,this}var R9e=O9e,M9e=_9e,P9e=b9e,F9e=L9e,B9e=k9e,W9e=R9e;function ZS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}ZS.prototype.clear=M9e;ZS.prototype.delete=P9e;ZS.prototype.get=F9e;ZS.prototype.has=B9e;ZS.prototype.set=W9e;var V9e=ZS,mne=V9e,H9e=x8,$9e=CY;function z9e(){this.size=0,this.__data__={hash:new mne,map:new($9e||H9e),string:new mne}}var U9e=z9e;function j9e(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var K9e=j9e,G9e=K9e;function q9e(i,e){var t=i.__data__;return G9e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var T8=q9e,Y9e=T8;function Z9e(i){var e=Y9e(this,i).delete(i);return this.size-=e?1:0,e}var X9e=Z9e,Q9e=T8;function J9e(i){return Q9e(this,i).get(i)}var e6e=J9e,t6e=T8;function n6e(i){return t6e(this,i).has(i)}var i6e=n6e,r6e=T8;function o6e(i,e){var t=r6e(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var s6e=o6e,a6e=U9e,l6e=X9e,u6e=e6e,c6e=i6e,d6e=s6e;function XS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}XS.prototype.clear=a6e;XS.prototype.delete=l6e;XS.prototype.get=u6e;XS.prototype.has=c6e;XS.prototype.set=d6e;var yY=XS,h6e=x8,f6e=CY,g6e=yY,p6e=200;function m6e(i,e){var t=this.__data__;if(t instanceof h6e){var n=t.__data__;if(!f6e||n.length<p6e-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new g6e(n)}return t.set(i,e),this.size=t.size,this}var _6e=m6e,v6e=x8,b6e=o7e,C6e=a7e,y6e=u7e,w6e=d7e,S6e=_6e;function QS(i){var e=this.__data__=new v6e(i);this.size=e.size}QS.prototype.clear=b6e;QS.prototype.delete=C6e;QS.prototype.get=y6e;QS.prototype.has=w6e;QS.prototype.set=S6e;var wY=QS;function E6e(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var L6e=E6e,x6e=AC,D6e=function(){try{var i=x6e(Object,"defineProperty");return i({},"",{}),i}catch{}}(),T6e=D6e,_ne=T6e;function I6e(i,e,t){e=="__proto__"&&_ne?_ne(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var Ofe=I6e,k6e=Ofe,N6e=bY,A6e=Object.prototype,O6e=A6e.hasOwnProperty;function R6e(i,e,t){var n=i[e];(!(O6e.call(i,e)&&N6e(n,t))||t===void 0&&!(e in i))&&k6e(i,e,t)}var SY=R6e,M6e=SY,P6e=Ofe;function F6e(i,e,t,n){var r=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=n?n(t[a],i[a],a,t,i):void 0;u===void 0&&(u=i[a]),r?P6e(t,a,u):M6e(t,a,u)}return t}var I8=F6e;function B6e(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var W6e=B6e;function V6e(i){return i!=null&&typeof i=="object"}var OC=V6e,H6e=NR,$6e=OC,z6e="[object Arguments]";function U6e(i){return $6e(i)&&H6e(i)==z6e}var j6e=U6e,vne=j6e,K6e=OC,Rfe=Object.prototype,G6e=Rfe.hasOwnProperty,q6e=Rfe.propertyIsEnumerable,Y6e=vne(function(){return arguments}())?vne:function(i){return K6e(i)&&G6e.call(i,"callee")&&!q6e.call(i,"callee")},Mfe=Y6e,Z6e=Array.isArray,zp=Z6e,G3={exports:{}};function X6e(){return!1}var Q6e=X6e;G3.exports;(function(i,e){var t=Ig,n=Q6e,r=e&&!e.nodeType&&e,o=r&&!0&&i&&!i.nodeType&&i,s=o&&o.exports===r,a=s?t.Buffer:void 0,u=a?a.isBuffer:void 0,d=u||n;i.exports=d})(G3,G3.exports);var EY=G3.exports,J6e=9007199254740991,eWe=/^(?:0|[1-9]\d*)$/;function tWe(i,e){var t=typeof i;return e=e??J6e,!!e&&(t=="number"||t!="symbol"&&eWe.test(i))&&i>-1&&i%1==0&&i<e}var LY=tWe,nWe=9007199254740991;function iWe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=nWe}var xY=iWe,rWe=NR,oWe=xY,sWe=OC,aWe="[object Arguments]",lWe="[object Array]",uWe="[object Boolean]",cWe="[object Date]",dWe="[object Error]",hWe="[object Function]",fWe="[object Map]",gWe="[object Number]",pWe="[object Object]",mWe="[object RegExp]",_We="[object Set]",vWe="[object String]",bWe="[object WeakMap]",CWe="[object ArrayBuffer]",yWe="[object DataView]",wWe="[object Float32Array]",SWe="[object Float64Array]",EWe="[object Int8Array]",LWe="[object Int16Array]",xWe="[object Int32Array]",DWe="[object Uint8Array]",TWe="[object Uint8ClampedArray]",IWe="[object Uint16Array]",kWe="[object Uint32Array]",Co={};Co[wWe]=Co[SWe]=Co[EWe]=Co[LWe]=Co[xWe]=Co[DWe]=Co[TWe]=Co[IWe]=Co[kWe]=!0;Co[aWe]=Co[lWe]=Co[CWe]=Co[uWe]=Co[yWe]=Co[cWe]=Co[dWe]=Co[hWe]=Co[fWe]=Co[gWe]=Co[pWe]=Co[mWe]=Co[_We]=Co[vWe]=Co[bWe]=!1;function NWe(i){return sWe(i)&&oWe(i.length)&&!!Co[rWe(i)]}var AWe=NWe;function OWe(i){return function(e){return i(e)}}var DY=OWe,q3={exports:{}};q3.exports;(function(i,e){var t=Ife,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,o=r&&r.exports===n,s=o&&t.process,a=function(){try{var u=r&&r.require&&r.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();i.exports=a})(q3,q3.exports);var TY=q3.exports,RWe=AWe,MWe=DY,bne=TY,Cne=bne&&bne.isTypedArray,PWe=Cne?MWe(Cne):RWe,Pfe=PWe,FWe=W6e,BWe=Mfe,WWe=zp,VWe=EY,HWe=LY,$We=Pfe,zWe=Object.prototype,UWe=zWe.hasOwnProperty;function jWe(i,e){var t=WWe(i),n=!t&&BWe(i),r=!t&&!n&&VWe(i),o=!t&&!n&&!r&&$We(i),s=t||n||r||o,a=s?FWe(i.length,String):[],u=a.length;for(var d in i)(e||UWe.call(i,d))&&!(s&&(d=="length"||r&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||HWe(d,u)))&&a.push(d);return a}var Ffe=jWe,KWe=Object.prototype;function GWe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||KWe;return i===t}var IY=GWe;function qWe(i,e){return function(t){return i(e(t))}}var Bfe=qWe,YWe=Bfe,ZWe=YWe(Object.keys,Object),XWe=ZWe,QWe=IY,JWe=XWe,eVe=Object.prototype,tVe=eVe.hasOwnProperty;function nVe(i){if(!QWe(i))return JWe(i);var e=[];for(var t in Object(i))tVe.call(i,t)&&t!="constructor"&&e.push(t);return e}var iVe=nVe,rVe=Nfe,oVe=xY;function sVe(i){return i!=null&&oVe(i.length)&&!rVe(i)}var Wfe=sVe,aVe=Ffe,lVe=iVe,uVe=Wfe;function cVe(i){return uVe(i)?aVe(i):lVe(i)}var k8=cVe,dVe=I8,hVe=k8;function fVe(i,e){return i&&dVe(e,hVe(e),i)}var gVe=fVe;function pVe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var mVe=pVe,_Ve=NC,vVe=IY,bVe=mVe,CVe=Object.prototype,yVe=CVe.hasOwnProperty;function wVe(i){if(!_Ve(i))return bVe(i);var e=vVe(i),t=[];for(var n in i)n=="constructor"&&(e||!yVe.call(i,n))||t.push(n);return t}var SVe=wVe,EVe=Ffe,LVe=SVe,xVe=Wfe;function DVe(i){return xVe(i)?EVe(i,!0):LVe(i)}var kY=DVe,TVe=I8,IVe=kY;function kVe(i,e){return i&&TVe(e,IVe(e),i)}var NVe=kVe,Y3={exports:{}};Y3.exports;(function(i,e){var t=Ig,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,o=r&&r.exports===n,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var f=d.length,p=a?a(f):new d.constructor(f);return d.copy(p),p}i.exports=u})(Y3,Y3.exports);var AVe=Y3.exports;function OVe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var RVe=OVe;function MVe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,o=[];++t<n;){var s=i[t];e(s,t,i)&&(o[r++]=s)}return o}var PVe=MVe;function FVe(){return[]}var Vfe=FVe,BVe=PVe,WVe=Vfe,VVe=Object.prototype,HVe=VVe.propertyIsEnumerable,yne=Object.getOwnPropertySymbols,$Ve=yne?function(i){return i==null?[]:(i=Object(i),BVe(yne(i),function(e){return HVe.call(i,e)}))}:WVe,NY=$Ve,zVe=I8,UVe=NY;function jVe(i,e){return zVe(i,UVe(i),e)}var KVe=jVe;function GVe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var Hfe=GVe,qVe=Bfe,YVe=qVe(Object.getPrototypeOf,Object),$fe=YVe,ZVe=Hfe,XVe=$fe,QVe=NY,JVe=Vfe,eHe=Object.getOwnPropertySymbols,tHe=eHe?function(i){for(var e=[];i;)ZVe(e,QVe(i)),i=XVe(i);return e}:JVe,zfe=tHe,nHe=I8,iHe=zfe;function rHe(i,e){return nHe(i,iHe(i),e)}var oHe=rHe,sHe=Hfe,aHe=zp;function lHe(i,e,t){var n=e(i);return aHe(i)?n:sHe(n,t(i))}var Ufe=lHe,uHe=Ufe,cHe=NY,dHe=k8;function hHe(i){return uHe(i,dHe,cHe)}var jfe=hHe,fHe=Ufe,gHe=zfe,pHe=kY;function mHe(i){return fHe(i,pHe,gHe)}var Kfe=mHe,_He=AC,vHe=Ig,bHe=_He(vHe,"DataView"),CHe=bHe,yHe=AC,wHe=Ig,SHe=yHe(wHe,"Promise"),EHe=SHe,LHe=AC,xHe=Ig,DHe=LHe(xHe,"Set"),THe=DHe,IHe=AC,kHe=Ig,NHe=IHe(kHe,"WeakMap"),AHe=NHe,zz=CHe,Uz=CY,jz=EHe,Kz=THe,Gz=AHe,Gfe=NR,JS=Afe,wne="[object Map]",OHe="[object Object]",Sne="[object Promise]",Ene="[object Set]",Lne="[object WeakMap]",xne="[object DataView]",RHe=JS(zz),MHe=JS(Uz),PHe=JS(jz),FHe=JS(Kz),BHe=JS(Gz),gb=Gfe;(zz&&gb(new zz(new ArrayBuffer(1)))!=xne||Uz&&gb(new Uz)!=wne||jz&&gb(jz.resolve())!=Sne||Kz&&gb(new Kz)!=Ene||Gz&&gb(new Gz)!=Lne)&&(gb=function(i){var e=Gfe(i),t=e==OHe?i.constructor:void 0,n=t?JS(t):"";if(n)switch(n){case RHe:return xne;case MHe:return wne;case PHe:return Sne;case FHe:return Ene;case BHe:return Lne}return e});var N8=gb,WHe=Object.prototype,VHe=WHe.hasOwnProperty;function HHe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&VHe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var $He=HHe,zHe=Ig,UHe=zHe.Uint8Array,qfe=UHe,Dne=qfe;function jHe(i){var e=new i.constructor(i.byteLength);return new Dne(e).set(new Dne(i)),e}var AY=jHe,KHe=AY;function GHe(i,e){var t=e?KHe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var qHe=GHe,YHe=/\w*$/;function ZHe(i){var e=new i.constructor(i.source,YHe.exec(i));return e.lastIndex=i.lastIndex,e}var XHe=ZHe,Tne=kR,Ine=Tne?Tne.prototype:void 0,kne=Ine?Ine.valueOf:void 0;function QHe(i){return kne?Object(kne.call(i)):{}}var JHe=QHe,e$e=AY;function t$e(i,e){var t=e?e$e(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var n$e=t$e,i$e=AY,r$e=qHe,o$e=XHe,s$e=JHe,a$e=n$e,l$e="[object Boolean]",u$e="[object Date]",c$e="[object Map]",d$e="[object Number]",h$e="[object RegExp]",f$e="[object Set]",g$e="[object String]",p$e="[object Symbol]",m$e="[object ArrayBuffer]",_$e="[object DataView]",v$e="[object Float32Array]",b$e="[object Float64Array]",C$e="[object Int8Array]",y$e="[object Int16Array]",w$e="[object Int32Array]",S$e="[object Uint8Array]",E$e="[object Uint8ClampedArray]",L$e="[object Uint16Array]",x$e="[object Uint32Array]";function D$e(i,e,t){var n=i.constructor;switch(e){case m$e:return i$e(i);case l$e:case u$e:return new n(+i);case _$e:return r$e(i,t);case v$e:case b$e:case C$e:case y$e:case w$e:case S$e:case E$e:case L$e:case x$e:return a$e(i,t);case c$e:return new n;case d$e:case g$e:return new n(i);case h$e:return o$e(i);case f$e:return new n;case p$e:return s$e(i)}}var T$e=D$e,I$e=NC,Nne=Object.create,k$e=function(){function i(){}return function(e){if(!I$e(e))return{};if(Nne)return Nne(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),N$e=k$e,A$e=N$e,O$e=$fe,R$e=IY;function M$e(i){return typeof i.constructor=="function"&&!R$e(i)?A$e(O$e(i)):{}}var P$e=M$e,F$e=N8,B$e=OC,W$e="[object Map]";function V$e(i){return B$e(i)&&F$e(i)==W$e}var H$e=V$e,$$e=H$e,z$e=DY,Ane=TY,One=Ane&&Ane.isMap,U$e=One?z$e(One):$$e,j$e=U$e,K$e=N8,G$e=OC,q$e="[object Set]";function Y$e(i){return G$e(i)&&K$e(i)==q$e}var Z$e=Y$e,X$e=Z$e,Q$e=DY,Rne=TY,Mne=Rne&&Rne.isSet,J$e=Mne?Q$e(Mne):X$e,eze=J$e,tze=wY,nze=L6e,ize=SY,rze=gVe,oze=NVe,sze=AVe,aze=RVe,lze=KVe,uze=oHe,cze=jfe,dze=Kfe,hze=N8,fze=$He,gze=T$e,pze=P$e,mze=zp,_ze=EY,vze=j$e,bze=NC,Cze=eze,yze=k8,wze=kY,Sze=1,Eze=2,Lze=4,Yfe="[object Arguments]",xze="[object Array]",Dze="[object Boolean]",Tze="[object Date]",Ize="[object Error]",Zfe="[object Function]",kze="[object GeneratorFunction]",Nze="[object Map]",Aze="[object Number]",Xfe="[object Object]",Oze="[object RegExp]",Rze="[object Set]",Mze="[object String]",Pze="[object Symbol]",Fze="[object WeakMap]",Bze="[object ArrayBuffer]",Wze="[object DataView]",Vze="[object Float32Array]",Hze="[object Float64Array]",$ze="[object Int8Array]",zze="[object Int16Array]",Uze="[object Int32Array]",jze="[object Uint8Array]",Kze="[object Uint8ClampedArray]",Gze="[object Uint16Array]",qze="[object Uint32Array]",lo={};lo[Yfe]=lo[xze]=lo[Bze]=lo[Wze]=lo[Dze]=lo[Tze]=lo[Vze]=lo[Hze]=lo[$ze]=lo[zze]=lo[Uze]=lo[Nze]=lo[Aze]=lo[Xfe]=lo[Oze]=lo[Rze]=lo[Mze]=lo[Pze]=lo[jze]=lo[Kze]=lo[Gze]=lo[qze]=!0;lo[Ize]=lo[Zfe]=lo[Fze]=!1;function C4(i,e,t,n,r,o){var s,a=e&Sze,u=e&Eze,d=e&Lze;if(t&&(s=r?t(i,n,r,o):t(i)),s!==void 0)return s;if(!bze(i))return i;var h=mze(i);if(h){if(s=fze(i),!a)return aze(i,s)}else{var f=hze(i),p=f==Zfe||f==kze;if(_ze(i))return sze(i,a);if(f==Xfe||f==Yfe||p&&!r){if(s=u||p?{}:pze(i),!a)return u?uze(i,oze(s,i)):lze(i,rze(s,i))}else{if(!lo[f])return r?i:{};s=gze(i,f,a)}}o||(o=new tze);var m=o.get(i);if(m)return m;o.set(i,s),Cze(i)?i.forEach(function(E){s.add(C4(E,e,t,E,i,o))}):vze(i)&&i.forEach(function(E,S){s.set(S,C4(E,e,t,S,i,o))});var v=d?u?dze:cze:u?wze:yze,b=h?void 0:v(i);return nze(b||i,function(E,S){b&&(S=E,E=i[S]),ize(s,S,C4(E,e,t,S,i,o))}),s}var Yze=C4,Zze=Yze,Xze=1,Qze=4;function Jze(i){return Zze(i,Xze|Qze)}var eUe=Jze;const Zh=Wp(eUe);class y4{constructor(e){this.hashMap=new Map,this.count=0,this.getHashMap=t=>this.hashMap.get(t.toString())||null,this.removeHashMap=t=>{var n;const r=this.hashMap.get(t.toString());r&&(this.hashMap.delete(t.toString()),!((n=r.children)===null||n===void 0)&&n.length&&r.children.forEach(o=>{this.removeHashMap(o)}))},this.getNode=t=>{const n=this.getHashMap(t);return(n==null?void 0:n.node)||null},this.removeNode=t=>{var n,r;const o=this.getHashMap(t);if(o){const{node:s,parent:a}=o;if(!a)return Pn.error("You're going to remove a root node"),null;const u=this.getHashMap(a),d=u==null?void 0:u.node;if(d)return(n=d.children)===null||n===void 0||n.splice(d.children.indexOf(s),1),(r=u.children)===null||r===void 0||r.splice(u.children.indexOf(t.toString()),1),this.removeHashMap(t),this.updateChildren(u.children),s}return null},this.updateNode=(t,n)=>{const r=this.getNode(t);return r?(Object.assign(r,n),r):null},this.insertNode=(t,n,r)=>{const o=this.getHashMap(n);if(o){const s=o.node,a=this.generate(t);if(a.parent=n.toString(),s.children=s.children||[],o.children=o.children||[],s.children.splice(r,0,t),o.children.splice(r,0,a.id),this.updateChildren(o.children),o.parent){const u=this.getHashMap(o.parent);u&&this.updateChildren(u.children)}return a}return null},this.insertBefore=(t,n)=>{const r=this.getHashMap(n);if(r){const o=r.parent;if(!o)return Pn.error("You're going to insert a obj before the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a)}}return null},this.insertAfter=(t,n)=>{const r=this.getHashMap(n);if(r){const o=r.parent;if(!o)return Pn.error("You're going to insert a obj after the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a+1)}}return null},this.prepend=(t,n)=>this.insertNode(t,n,0),this.append=(t,n)=>{const r=this.getHashMap(n);return r?(r.children=r.children||[],this.insertNode(t,n,r.children.length)):null},this.obj=Zh(e),this.count=1,this.generate(this.obj)}addMap(e,t){if(this.hashMap.has(e)){Pn.error(`There is already a data whose key is ${e} in hashMap`);return}else this.hashMap.set(e,t),this.count+=1}generateChildren(e,t){const n=[];e.forEach(r=>{var o;const s={id:r.id.toString(),node:r};t.id&&(s.parent=t.id),this.addMap(r.id.toString(),s),n.push(r.id.toString()),!((o=r.children)===null||o===void 0)&&o.length&&this.generateChildren(r.children,s)}),t.children=n,n.forEach((r,o)=>{const s=this.hashMap.get(r);o>0&&(s.prev=n[o-1]),o<n.length-1&&(s.next=n[o+1])})}generate(e){var t;const n=e.id.toString(),r={id:n,node:e};return this.addMap(n,r),!((t=e.children)===null||t===void 0)&&t.length&&this.generateChildren(e.children,r),r}updateChildren(e=[]){e.forEach((t,n)=>{const r=this.getHashMap(t);r&&(r.prev=r.next=void 0,n>0&&(r.prev=e[n-1]),n<e.length-1&&(r.next=e[n+1]))})}}const A8=({className:i,data:e=[],draggable:t=!1,loadedKeys:n,expandKeys:r,activeKey:o,onExpand:s,onDropTree:a,onRightClick:u,renderTitle:d,onSelect:h,onLoadData:f,onTreeClick:p})=>{const[m,v]=he.useState([]),[b,E]=he.useState(null),[S,w]=he.useState([]),L=he.useRef(),A=he.useRef({x:0,y:0,dragNode:null,flattenTree:null}),N=he.useRef(null),H=ne=>!(!f||n!=null&&n.includes(ne)),M=ne=>{const be=ne.id.toString();H(be)&&(w(De=>{const Ve=De.concat();return Ve.push(be),Ve}),f(ne).finally(()=>{w(De=>{const Ve=De.concat(),rt=Ve.indexOf(be);return Ve.splice(rt,1),Ve})}))},R=(ne,be)=>{const De=(r||m).concat(),Ve=De.findIndex(rt=>rt===ne);Ve>-1?De.splice(Ve,1):De.push(ne),s?s(De.concat(),be):v(De.concat())},q=(ne,be)=>{be.stopPropagation();const De=ne.id.toString();E(De),ne.isLeaf||(M(ne),R(De,ne)),h==null||h(ne)},X=(ne,be,De,Ve)=>be?ne||null:Ve?re.createElement(hr,{type:"loading~spin"}):re.createElement(hr,{type:De?"chevron-down":"chevron-right"}),$=(ne,be)=>{ne.stopPropagation(),u==null||u(ne,be)},I=he.useCallback(ne=>{z(ne,null,!0),window.removeEventListener("dragend",I)},[]),O=(ne,be)=>{A.current={x:ne.clientX,y:ne.clientY,dragNode:be,flattenTree:new y4({id:Number.MAX_SAFE_INTEGER,children:e})};const De=be.id.toString(),Ve=(r||m).indexOf(De);if(Ve>-1){const rt=m.concat();rt.splice(Ve,1),s?s(rt,be):v(rt)}window.addEventListener("dragend",I)},B=wr.debounce((ne,be)=>{const De=be.id.toString(),Ve=(r||m).includes(De),At=A.current.dragNode.id.toString(),Re=De===At;!be.isLeaf&&!Re&&!Ve&&!H(De)&&R(De,be)},300),W=ne=>{const be=ne.id.toString(),De=document.querySelector(`div[data-key="${be}"]`);let Ve=De;for(;Ve;){Ve.classList.contains("drag-over")||Ve.classList.add("drag-over");const rt=Ve.nextElementSibling;(rt==null?void 0:rt.dataset.indent)===De.dataset.indent?Ve=null:Ve=rt}},j=()=>{var ne;(ne=N.current)===null||ne===void 0||ne.querySelectorAll(".drag-over").forEach(be=>{be.classList.remove("drag-over")})},U=ne=>{var be,De;const Ve=A.current.flattenTree,rt=(be=Ve.getHashMap(ne.id))===null||be===void 0?void 0:be.parent;return(De=Ve.getHashMap(rt))===null||De===void 0?void 0:De.node},G=(ne,be)=>{const De=be.isLeaf?U(be):be;De!==L.current&&(j(),L.current=De,W(De))},z=(ne,be,De=!1)=>{j(),L.current=void 0,A.current={x:0,y:0,dragNode:null,flattenTree:null}},k=(ne,be)=>{if(be.isLeaf){const De=U(be),Ve=U(A.current.dragNode),rt=(De.key||De.id).toString(),At=(Ve.key||Ve.id).toString();if(rt===At){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,De)}else{const De=U(A.current.dragNode),Ve=(De.key||De.id).toString(),rt=be.id.toString(),Re=A.current.dragNode.id.toString();if(Ve===rt||Re===rt){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,be)}A.current={x:0,y:0,dragNode:null,flattenTree:null}},K=(ne,be)=>ne.map((De,Ve)=>{const rt=De.id.toString(),At=(r||m).includes(rt),Re=S.includes(rt),ut=b===rt,Ct=(d==null?void 0:d(De,Ve,!!De.isLeaf))||De.name,Xe=typeof De.icon=="string"?re.createElement(hr,{type:De.icon}):De.icon,on=re.createElement(A8e,{key:`${rt}-${be}`,draggable:t,data:De,name:typeof Ct=="string"?Ct:void 0,indent:be,className:mn(IR,ut&&x8e,At?D8e:T8e),renderIcon:()=>X(Xe,!!De.isLeaf,At,Re),renderTitle:()=>Ct,onContextMenu:dn=>$(dn,De),onClick:dn=>q(De,dn),onNodeDragStart:t?O:void 0,onNodeDragEnter:t?B:void 0,onNodeDragOver:t?G:void 0,onNodeDragEnd:t?z:void 0,onNodeDrop:t?k:void 0}),Kt=At&&!Re&&K(De.children||[],be+1);return[on,Kt]}),fe=()=>{E(null),p==null||p()};return he.useLayoutEffect(()=>{var ne,be;const De=[];for(e.forEach(Ve=>{De.push({paths:[Ve],data:Ve})});De.length;){const{paths:Ve,data:rt}=De.pop();if((ne=rt.children)===null||ne===void 0?void 0:ne.find(Re=>Re.isEditable)){const Re=Ve.map(Ct=>(M(Ct),Ct.id.toString())),ut=Array.from(new Set([...Re,...r||m]));s?s(ut,rt):v(ut);break}else{const Re=((be=rt.children)===null||be===void 0?void 0:be.map(ut=>({paths:[...Ve,ut],data:ut})))||[];De.push(...Re)}}},[e]),he.useEffect(()=>{o&&E(o.toString())},[o]),re.createElement("div",{role:"tree",ref:N,draggable:t,onClick:fe,className:mn(vY,i)},K(e,0))};var tUe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const s2=i=>{const{visible:e=!0,children:t,className:n,style:r={}}=i,o=tUe(i,["visible","children","className","style"]);return re.createElement("div",Object.assign({className:n,style:Object.assign({display:e?void 0:"none"},r)},o),t)},nUe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:eR,Breadcrumb:lle,Button:b1,Checkbox:Cwe,Collapse:dle,get DirectionKind(){return oS},Display:s2,DropDown:UK,Icon:hr,Input:jK,Item:LEe,List:yEe,Menu:Xa,MenuItem:vae,get MenuMode(){return p0},Modal:iR,MonacoEditor:uY,Option:lfe,Pane:gp,Scrollbar:GS,Search:sfe,Select:gO,SplitPane:_A,SubMenu:Cae,Tab:Dfe,Tabs:_Y,Toolbar:tR,Tooltip:PK,TreeView:A8,useContextMenu:G5,useContextView:AS,useContextViewEle:XO},Symbol.toStringTag,{value:"Module"}));var pc;(function(i){i[i.EditorCore=0]="EditorCore",i[i.EditorContrib=100]="EditorContrib",i[i.WorkbenchContrib=200]="WorkbenchContrib",i[i.BuiltinExtension=300]="BuiltinExtension",i[i.ExternalExtension=400]="ExternalExtension"})(pc||(pc={}));const Qfe={View:{value:C("view","View"),original:"View"},Help:{value:C("help","Help"),original:"Help"},Preferences:{value:C("preferences","Preferences"),original:"Preferences"},Developer:{value:C({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}};var iUe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};class rd{constructor(e){this.desc=e}}function rUe(i){const e=new Je,t=new i,n=t.desc,{f1:r,menu:o,keybinding:s,description:a}=n,u=iUe(n,["f1","menu","keybinding","description"]);if(e.add(Xn.registerCommand({id:u.id,handler:(d,...h)=>t.run(d,...h),description:a})),Array.isArray(o)?e.add(ra.appendMenuItems(o.map(d=>({id:d.id,item:Object.assign({command:u},d)})))):o&&e.add(ra.appendMenuItem(o.id,Object.assign({command:u},o))),r&&(e.add(ra.appendMenuItem(Rt.CommandPalette,{command:u,when:u.precondition})),e.add(ra.addCommand(u))),Array.isArray(s))for(const d of s)Os.registerKeybindingRule(Object.assign(Object.assign({},d),{id:u.id,when:u.precondition?_t.and(u.precondition,d.when):d.when}));else s&&Os.registerKeybindingRule(Object.assign(Object.assign({},s),{id:u.id,when:u.precondition?_t.and(u.precondition,s.when):s.when}));return e}const oUe=Object.freeze(Object.defineProperty({__proto__:null,Action2:rd,KeyChord:Zr,get KeybindingWeight(){return pc}},Symbol.toStringTag,{value:"Module"})),sUe="ko-KR",aUe="한국어",lUe={"molecule.welcome":"Molecule에 오신 것을 환영합니다",menubar:"메뉴 모음","menu.file":"파일","menu.settings":"설정","menu.account":"계정","menu.colorTheme":"색 테마","menu.newFile":"새 파일","menu.newFolder":"새 폴더","menu.open":"열기","menu.edit":"편집","menu.undo":"되돌리기","menu.redo":"다시 실행","menu.selection":"선택","menu.selectAll":"모두 선택","menu.copyLineUp":"위에 줄 복사","menu.view":"보기","menu.commandPalette":"명령어 팔레트","menu.openView":"뷰 열기","menu.appearance":"모양","menu.showMenuBar":"메뉴 모음 표시","menu.showSideBar":"사이드 모음 표시","menu.showSideBar.label":"사이드 모음 표시 유형 토글","menu.showStatusBar":"상태 표시줄 보기","menu.showActivityBar":"작업 막대 표시","menu.hideActivityBar":"작업 막대 숨기기","menu.showPanel":"패널 표시","menu.showPanel.title":"패널 토글","menu.defaultProjectName":"기본 프로젝트 이름","menu.run":"실행","menu.runTask":"작업 실행","menu.help":"도움말","menu.about":"정보","menu.menuBarHorizontal":"메뉴 모음 가로 모드","menu.menuBarVertical":"메뉴 모음 새로 모드","sidebar.explore.folders":"폴더","sidebar.explore.title":"탐색기","sidebar.explore.openEditor":"편집기 열기","sidebar.explore.openEditor.group":"${i} 그룹","sidebar.explore.outline":"개요","sidebar.search.title":"검색","sidebar.replace.placement":"바꾸기","sidebar.explore.refresh":"탐색기 새로 고침","sidebar.explore.collapseFolders":"탐색기 내에 폴더 축소","sidebar.explore.toggleVertical":"세로로 토글","sidebar.explore.saveAll":"모두 저장","sidebar.explore.actionDesc":"보기 및 더 기타 작업...","sidebar.explore.outlineMore":"더 많은 액션들...","toolbar.refresh":"새로 고침","toolbar.clearAll":"모두 지우기","toolbar.collapseAll":"모두 축소","search.matchCase":"대/소문자 구분","search.matchWholeWord":"전체 단어 일치","search.useRegularExpression":"정규식 사용","search.preserveCase":"대/소문자 보존","search.replaceAll":"모두 바꾸기","panel.output.title":"출력","panel.toolbox.closePanel":"패널 닫기","panel.toolbox.maximize":"패널 크기 최대화","panel.toolbox.restoreSize":"패널 크기 복원","panel.problems.title":"문제","panel.problems.empty":"작업 영역안에는 문제가 감지되지 않았습니다.","notification.title":"알림","notification.title.no":"새로운 알림이 없습니다.","editor.closeToRight":"오른쪽에 있는 항목 닫기","editor.closeToLeft":"왼쪽에 있는 항목 닫기","editor.closeAll":"모두 닫기","editor.closeSaved":"저장된 항목 닫기","editor.closeOthers":"기타 항목 닫기","editor.close":"닫기","editor.actions.splitRight":"오른쪽으로 분할","editor.showOpenEditors":"열려 있는 편집기 표시","contextmenu.rename":"이름 바꾸기","contextmenu.delete":"삭제","contextmenu.newFile":"새 파일","contextmenu.newFolder":"새 폴더","contextmenu.removeFolder":"폴더 삭제","contextmenu.openToTheSide":"사이드에 열기","contextmenu.addFolderToSpace":"작업 영역에 폴더 추가...","contextmenu.findInSpace":"작업 영역에서 찾기...","contextmenu.download":"다운로드..."},uUe={id:sUe,name:aUe,source:lUe},cUe="zh-CN",dUe="简体中文",hUe={"molecule.welcome":"欢迎!",menubar:"菜单栏","menu.file":"文件","menu.settings":"设置","menu.account":"账号","menu.colorTheme":"颜色主题","menu.newFile":"新建文件","menu.newFolder":"新建文件夹","menu.open":"打开","menu.edit":"编辑","menu.undo":"撤销","menu.redo":"重做","menu.selection":"选择","menu.selectAll":"选择全部","menu.copyLineUp":"向上拷贝","menu.view":"视图","menu.commandPalette":"命令面板","menu.openView":"打开视图","menu.appearance":"外观","menu.showMenuBar":"显示菜单栏","menu.showAuxiliaryBar":"显示辅助侧边栏","menu.showSideBar":"显示侧边栏","menu.showSideBar.label":"切换侧边栏","menu.showStatusBar":"显示状态栏","menu.showActivityBar":"显示活动栏","menu.hideActivityBar":"隐藏活动栏","menu.showPanel":"显示面板","menu.showPanel.title":"切换面板","menu.defaultProjectName":"无打开文件夹","menu.run":"运行","menu.runTask":"运行任务","menu.help":"帮助","menu.about":"关于","menu.menuBarHorizontal":"菜单栏水平模式","menu.menuBarVertical":"菜单栏垂直模式","sidebar.explore.folders":"文件夹","sidebar.explore.title":"浏览","sidebar.explore.openEditor":"打开的编辑器","sidebar.explore.openEditor.group":"第 ${i} 组","sidebar.explore.outline":"轮廓","sidebar.search.title":"搜索","sidebar.replace.placement":"替换","sidebar.explore.refresh":"刷新浏览","sidebar.explore.collapseFolders":"折叠文件夹","sidebar.explore.toggleVertical":"切换垂直","sidebar.explore.saveAll":"全部保存","sidebar.explore.actionDesc":"视图和更多操作...","sidebar.explore.outlineMore":"更多操作...","toolbar.refresh":"刷新","toolbar.clearAll":"清除所有","toolbar.collapseAll":"折叠所有","search.matchCase":"区分大小写","search.matchWholeWord":"匹配整个字词","search.useRegularExpression":"使用正则表达式","search.preserveCase":"保留大小写","search.replaceAll":"全部替换","panel.output.title":"输出","panel.problems.title":"问题","panel.problems.empty":"未在工作区检测到问题","panel.toolbox.closePanel":"关闭面板","panel.toolbox.maximize":"最大化面板","panel.toolbox.restoreSize":"恢复面板大小","notification.title":"通知","notification.title.no":"没有新通知","notification.locale.title":"要使显示语言更改生效, 需要重新加载页面。","notification.locale.description":"按下确认按钮来重新加载页面并更改显示语言。","notification.locale.button":"确认重新加载","editor.closeToRight":"关闭右边","editor.closeToLeft":"关闭左边","editor.closeAll":"关闭所有","editor.closeOthers":"关闭其他","editor.closeSaved":"关闭已保存","editor.close":"关闭","editor.actions.splitRight":"向右拆分编辑器","editor.showOpenEditors":"展示已打开的编辑器","contextmenu.rename":"重命名","contextmenu.delete":"删除","contextmenu.newFile":"新建文件","contextmenu.newFolder":"新建文件夹","contextmenu.removeFolder":"删除文件夹","contextmenu.openToTheSide":"在侧边打开","contextmenu.addFolderToSpace":"将文件夹添加到工作区...","contextmenu.findInSpace":"在工作区中寻找...","contextmenu.download":"下载..."},fUe={id:cUe,name:dUe,source:hUe},gUe="en",pUe="English",mUe={"molecule.welcome":"Welcome to Molecule",menubar:"Menu Bar","menu.file":"File","menu.settings":"Settings","menu.account":"Account","menu.colorTheme":"Color Theme","menu.newFile":"New File","menu.newFolder":"New Folder","menu.open":"Open","menu.edit":"Edit","menu.undo":"Undo","menu.redo":"Redo","menu.selection":"Selection","menu.selectAll":"Select All","menu.copyLineUp":"Copy Line Up","menu.view":"View","menu.commandPalette":"Command Palette","menu.openView":"Open View","menu.appearance":"Appearance","menu.showMenuBar":"Show Menu Bar","menu.showAuxiliaryBar":"Show Auxiliary Bar","menu.showSideBar":"Show Side Bar","menu.showSideBar.label":"Toggle Side Bar Visibility","menu.showStatusBar":"Show Status Bar","menu.showActivityBar":"Show Activity Bar","menu.hideActivityBar":"Hide Activity Bar","menu.showPanel":"Show Panel","menu.showPanel.title":"Toggle Panel","menu.defaultProjectName":"Default Project Name","menu.run":"Run","menu.runTask":"Run Task","menu.help":"Help","menu.about":"About","menu.menuBarHorizontal":"Menu Bar Horizontal Mode","menu.menuBarVertical":"Menu Bar Vertical Mode","sidebar.explore.folders":"Folders","sidebar.explore.title":"Explorer","sidebar.explore.openEditor":"Open Editors","sidebar.explore.openEditor.group":"Group ${i}","sidebar.explore.outline":"Outline","sidebar.search.title":"Search","sidebar.replace.placement":"Replace","sidebar.explore.refresh":"Refresh Explorer","sidebar.explore.collapseFolders":"Collapse Folders in Explorer","sidebar.explore.toggleVertical":"Toggle Vertical","sidebar.explore.saveAll":"Save All","sidebar.explore.actionDesc":"View and More Actions...","sidebar.explore.outlineMore":"More Actions...","toolbar.refresh":"Refresh","toolbar.clearAll":"Clear all","toolbar.collapseAll":"Collapse all","search.matchCase":"Match Case","search.matchWholeWord":"Match Whole Word","search.useRegularExpression":"Use Regular Expression","search.preserveCase":"Preserve Case","search.replaceAll":"Replace All","panel.output.title":"output","panel.toolbox.closePanel":"Close Panel","panel.toolbox.maximize":"Maximize Panel Size","panel.toolbox.restoreSize":"Restore Panel Size","panel.problems.title":"Problems","panel.problems.empty":"No problems have been detected in the workspace.","notification.title":"Notifications","notification.title.no":"No new notifications","notification.locale.title":"A reload is required for the change in display language to take effect.","notification.locale.description":"Press the confirm button to reload and change the display language.","notification.locale.button":"Confirm Reload","editor.closeToRight":"Close To Right","editor.closeToLeft":"Close To Left","editor.closeAll":"Close All","editor.closeSaved":"Close Saved","editor.closeOthers":"Close Others","editor.close":"Close","editor.actions.splitRight":"Split Editor Right","editor.showOpenEditors":"Show Opened Editors","contextmenu.rename":"Rename","contextmenu.delete":"Delete","contextmenu.newFile":"New File","contextmenu.newFolder":"New Folder","contextmenu.removeFolder":"Remove Folder","contextmenu.openToTheSide":"Open to the Side","contextmenu.addFolderToSpace":"Add Folder to Workspace...","contextmenu.findInSpace":"Find in Workspace...","contextmenu.download":"Download..."},_Ue={id:gUe,name:pUe,source:mUe};var qz;(function(i){i.Theme="Themes",i.Normal="normal",i.Settings="settings",i.Locals="locales",i.Menus="menus",i.Workbench="workbench"})(qz||(qz={}));var sS;(function(i){i.Languages="languages",i.Commands="commands",i.Configuration="configuration",i.Grammar="grammars",i.Themes="themes",i.IconTheme="iconThemes"})(sS||(sS={}));const vUe=uUe,bUe=fUe,Jfe=_Ue,ege=[bUe,Jfe,vUe],CUe={id:"ExtendsLocales",name:"Extends locales",contributes:{[sS.Languages]:ege},activate(){},dispose(){}},yUe=Jfe.id;ege.find(i=>i.id===yUe);var Z3;(function(i){i.OnChange="localization.onchange"})(Z3||(Z3={}));var wUe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},SUe=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Yz;const Zz=`${j5}.localeId`;let rf=Yz=class extends nl{constructor(){super(),this.state={},this._locales=new Map}reset(){localStorage.removeItem(Zz),this._current=void 0,this._locales.clear()}getLocales(){return Array.from(this._locales.values())}initialize(e,t){this.addLocales(e),this._locales.get(t)?this._current=this._locales.get(t):Pn.error(`Cannot initialize the locale with ${t}`)}getCurrentLocale(){return this._current&&Object.assign({},this._current)}getLocale(e){if(e)return this._locales.get(e)}removeLocale(e){const t=this._locales.get(e);if(t!==void 0){if(this._locales.size===1){Pn.error("You can't remove this Locale because there must have one locale at least");return}return this._current&&this._current.id===t.id&&(this._current=this._locales.values().next().value),this._locales.delete(e),t}}setCurrentLocale(e){if(this._current&&this._current.id===e)return!0;const t=this._locales.get(e);return t?(this.emit(Z3.OnChange,this._current,t),this._current=t,localStorage.setItem(Zz,t.id),!0):!1}transformLocaleData(e){const t=Object.assign({},e);if(e.source instanceof Map||(t.source=new Map(Object.entries(e.source))),t.inherit){const n=this._locales.get(t.inherit);n&&(t.source=new Map([...n.source,...t.source]))}return t}addLocales(e){if(e.length>0){const t=this._locales;e.forEach(n=>{const r=n.id;t.has(r)||t.set(r,this.transformLocaleData(n))})}}onChange(e){this.subscribe(Z3.OnChange,e)}localize(e,t="",...n){let r=t;return this._current&&(r=this._current.source.get(e)||t),n.length&&n.forEach(o=>{r=r.replace(Yz.LOCALIZE_REPLACED_WORD,o)}),r}};rf.LOCALIZE_REPLACED_WORD="${i}";rf=Yz=wUe([Gi(),SUe("design:paramtypes",[])],rf);function ft(i,e,...t){return je.resolve(rf).localize(i,e,...t)}class ept extends re.PureComponent{constructor(e){super(e),this.state={localeId:""},this.getValue=()=>{const{sourceKey:t,defaultValue:n=""}=this.props;return this.localeService?this.localeService.localize(t,n):n}}componentDidMount(){var e;this.update((e=this.localeService.getCurrentLocale())===null||e===void 0?void 0:e.id),this.localeService.onChange((t,n)=>{this.update(n.id)})}update(e){this.setState({localeId:e})}get localeService(){return je.resolve(rf)}render(){return this.getValue()}}var Gr;(function(i){i.OnCloseTab="editor.closeTab",i.OnCloseAll="editor.closeAll",i.OnCloseOther="editor.closeOther",i.OnCloseToLeft="editor.closeToLeft",i.OnCloseToRight="editor.closeToRight",i.OnMoveTab="editor.moveTab",i.OpenTab="editor.openTab",i.OnSelectTab="editor.selectTab",i.OnUpdateTab="editor.updateTab",i.onActionsClick="editor.actionsClick",i.OnSplitEditorRight="editor.splitEditorRight",i.onEditorInstanceMount="editor.onEditorInstanceMount"})(Gr||(Gr={}));class tge{constructor(e,t,n,r,o=[],s=[],a){this.id=e,this.data=r,this.menu=s,this.actions=o,this.tab=t,this.activeTab=n,this.editorInstance=a}}class nge{constructor(e=null,t=[],n,r={}){this.current=e,this.groups=t,this.entry=n,this.editorOptions=r}}const EUe="modulepreload",LUe=function(i){return"/monaco-sql-languages/"+i},Pne={},Tt=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=LUe(o),o in Pne)return;Pne[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":EUe,s||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),s)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};const xUe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class DUe extends Oe{constructor(e,t={}){super(),this._onDidUpdate=this._register(new Ce),this._editor=e,this._options=Eg(t,xUe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new Q(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let r=0,o=this.ranges.length;r<o&&!t;r++){let s=this.ranges[r].range;n.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=r+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(XP(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let r=n.range.getStartPosition();this._editor.setPosition(r),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}function TUe(i,e){return new IUe(i,e)}class IUe extends rhe{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?pG(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const r=(a,u)=>e.fmr(a,u),o=(a,u)=>function(){const d=Array.prototype.slice.call(arguments,0);return u(a,d)};let s={};for(const a of n)s[a]=o(a,r);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function kUe(i){return Array.isArray(i)}function NUe(i){return!kUe(i)}function ige(i){return typeof i=="string"}function Fne(i){return!ige(i)}function vy(i){return!i}function l0(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Bne(i){return i.replace(/[&<>'"_]/g,"-")}function AUe(i,e){console.log(`${i.languageId}: ${e}`)}function ar(i,e){return new Error(`${i.languageId}: ${e}`)}function Rv(i,e,t,n,r){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let s=null;return e.replace(o,function(a,u,d,h,f,p,m,v,b){return vy(d)?vy(h)?!vy(f)&&f<n.length?l0(i,n[f]):!vy(m)&&i&&typeof i[m]=="string"?i[m]:(s===null&&(s=r.split("."),s.unshift(r)),!vy(p)&&p<s.length?l0(i,s[p]):""):l0(i,t):"$"})}function aP(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function OUe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}const rge=5;class pO{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new xw(e,t);let n=xw.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let r=this._entries[n];return r||(r=new xw(e,t),this._entries[n]=r,r)}}pO._INSTANCE=new pO(rge);class xw{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return xw._equals(this,e)}push(e){return pO.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return pO.create(this.parent,e)}}class j2{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new j2(this.languageId,this.state)}}class Mv{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new K2(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new K2(e,t);let n=xw.getStackElementId(e),r=this._entries[n];return r||(r=new K2(e,null),this._entries[n]=r,r)}}Mv._INSTANCE=new Mv(rge);class K2{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Mv.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof K2)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class RUe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new VB(e,t,this._languageId)))}nestedModeTokenize(e,t,n,r){const o=n.languageId,s=n.state,a=Wr.get(o);if(!a)return this.enterMode(r,o),this.emit(r,""),s;let u=a.tokenize(e,t,s,r);return this._tokens=this._tokens.concat(u.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,u.endState}finalize(e){return new eq(this._tokens,e)}}class X3{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let r=e!==null?e.length:0,o=t.length,s=n!==null?n.length:0;if(r===0&&o===0&&s===0)return new Uint32Array(0);if(r===0&&o===0)return n;if(o===0&&s===0)return e;let a=new Uint32Array(r+o+s);e!==null&&a.set(e);for(let u=0;u<o;u++)a[r+u]=t[u];return n!==null&&a.set(n,r+o),a}nestedModeTokenize(e,t,n,r){const o=n.languageId,s=n.state,a=Wr.get(o);if(!a)return this.enterMode(r,o),this.emit(r,""),s;let u=a.tokenize2(e,t,s,r);return this._prependTokens=X3._merge(this._prependTokens,this._tokens,u.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,u.endState}finalize(e){return new HB(X3._merge(this._prependTokens,this._tokens,null),e)}}class O8{constructor(e,t,n,r){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=r,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=Wr.onDidChange(s=>{if(o)return;let a=!1;for(let u=0,d=s.changedLanguages.length;u<d;u++){let h=s.changedLanguages[u];if(this._embeddedModes[h]){a=!0;break}}a&&(o=!0,Wr.fire([this._languageId]),o=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Wr.get(t);if(n){if(n instanceof O8){const o=n.getLoadStatus();o.loaded===!1&&e.push(o.promise)}continue}const r=Wr.getPromise(t);r&&e.push(r)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=pO.create(null,this._lexer.start);return Mv.create(e,null)}tokenize(e,t,n,r){let o=new RUe,s=this._tokenize(e,t,n,r,o);return o.finalize(s)}tokenize2(e,t,n,r){let o=new X3(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,r,o);return o.finalize(s)}_tokenize(e,t,n,r,o){return n.embeddedModeData?this._nestedTokenize(e,t,n,r,o):this._myTokenize(e,t,n,r,o)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=aP(this._lexer,t.stack.state),!n))throw ar(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,o=!1;for(const s of n){if(!Fne(s.action)||s.action.nextEmbedded!=="@pop")continue;o=!0;let a=s.regex,u=s.regex.source;if(u.substr(0,4)==="^(?:"&&u.substr(u.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(u.substr(4,u.length-5),h)}let d=e.search(a);d===-1||d!==0&&s.matchOnlyAtLineStart||(r===-1||d<r)&&(r=d)}if(!o)throw ar(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,n,r,o){let s=this._findLeavingNestedModeOffset(e,n);if(s===-1){let d=o.nestedModeTokenize(e,t,n.embeddedModeData,r);return Mv.create(n.stack,new j2(n.embeddedModeData.languageId,d))}let a=e.substring(0,s);a.length>0&&o.nestedModeTokenize(a,!1,n.embeddedModeData,r);let u=e.substring(s);return this._myTokenize(u,t,n,r+s,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,r,o){o.enterMode(r,this._languageId);const s=e.length,a=t&&this._lexer.includeLF?e+`
`:e,u=a.length;let d=n.embeddedModeData,h=n.stack,f=0,p=null,m=!0;for(;m||f<u;){const v=f,b=h.depth,E=p?p.groups.length:0,S=h.state;let w=null,L=null,A=null,N=null,H=null;if(p){w=p.matches;const q=p.groups.shift();L=q.matched,A=q.action,N=p.rule,p.groups.length===0&&(p=null)}else{if(!m&&f>=u)break;m=!1;let q=this._lexer.tokenizer[S];if(!q&&(q=aP(this._lexer,S),!q))throw ar(this._lexer,"tokenizer state is not defined: "+S);let X=a.substr(f);for(const $ of q)if((f===0||!$.matchOnlyAtLineStart)&&(w=X.match($.regex),w)){L=w[0],A=$.action;break}}if(w||(w=[""],L=""),A||(f<u&&(w=[a.charAt(f)],L=w[0]),A=this._lexer.defaultToken),L===null)break;for(f+=L.length;NUe(A)&&Fne(A)&&A.test;)A=A.test(L,w,S,f===u);let M=null;if(typeof A=="string"||Array.isArray(A))M=A;else if(A.group)M=A.group;else if(A.token!==null&&A.token!==void 0){if(A.tokenSubst?M=Rv(this._lexer,A.token,L,w,S):M=A.token,A.nextEmbedded)if(A.nextEmbedded==="@pop"){if(!d)throw ar(this._lexer,"cannot pop embedded mode if not inside one");d=null}else{if(d)throw ar(this._lexer,"cannot enter embedded mode from within an embedded mode");H=Rv(this._lexer,A.nextEmbedded,L,w,S)}if(A.goBack&&(f=Math.max(0,f-A.goBack)),A.switchTo&&typeof A.switchTo=="string"){let q=Rv(this._lexer,A.switchTo,L,w,S);if(q[0]==="@"&&(q=q.substr(1)),aP(this._lexer,q))h=h.switchTo(q);else throw ar(this._lexer,"trying to switch to a state '"+q+"' that is undefined in rule: "+this._safeRuleName(N))}else{if(A.transform&&typeof A.transform=="function")throw ar(this._lexer,"action.transform not supported");if(A.next)if(A.next==="@push"){if(h.depth>=this._lexer.maxStack)throw ar(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(S)}else if(A.next==="@pop"){if(h.depth<=1)throw ar(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(N));h=h.pop()}else if(A.next==="@popall")h=h.popall();else{let q=Rv(this._lexer,A.next,L,w,S);if(q[0]==="@"&&(q=q.substr(1)),aP(this._lexer,q))h=h.push(q);else throw ar(this._lexer,"trying to set a next state '"+q+"' that is undefined in rule: "+this._safeRuleName(N))}}A.log&&typeof A.log=="string"&&AUe(this._lexer,this._lexer.languageId+": "+Rv(this._lexer,A.log,L,w,S))}if(M===null)throw ar(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(N));const R=q=>{let X=this._modeService.getModeIdForLanguageName(q);X&&(q=X);const $=this._getNestedEmbeddedModeData(q);if(f<u){const I=e.substr(f);return this._nestedTokenize(I,t,Mv.create(h,$),r+f,o)}else return Mv.create(h,$)};if(Array.isArray(M)){if(p&&p.groups.length>0)throw ar(this._lexer,"groups cannot be nested: "+this._safeRuleName(N));if(w.length!==M.length+1)throw ar(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(N));let q=0;for(let X=1;X<w.length;X++)q+=w[X].length;if(q!==L.length)throw ar(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(N));p={rule:N,matches:w,groups:[]};for(let X=0;X<M.length;X++)p.groups[X]={action:M[X],matched:w[X+1]};f-=L.length;continue}else{if(M==="@rematch"&&(f-=L.length,L="",w=null,M="",H!==null))return R(H);if(L.length===0){if(u===0||b!==h.depth||S!==h.state||(p?p.groups.length:0)!==E)continue;throw ar(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(N))}let q=null;if(ige(M)&&M.indexOf("@brackets")===0){let X=M.substr(9),$=MUe(this._lexer,L);if(!$)throw ar(this._lexer,"@brackets token returned but no bracket defined as: "+L);q=Bne($.token+X)}else{let X=M===""?"":M+this._lexer.tokenPostfix;q=Bne(X)}v<s&&o.emit(v+r,q)}if(H!==null)return R(H)}return Mv.create(h,d)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Wr.get(t);if(n)return new j2(t,n.getInitialState())}return new j2(t||E0,dR)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function MUe(i,e){if(!e)return null;e=l0(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function PUe(i,e,t,n){return new O8(i,e,t,n)}var H6;const $6=(H6=window.trustedTypes)===null||H6===void 0?void 0:H6.createPolicy("standaloneColorizer",{createHTML:i=>i});class OY{static colorizeElement(e,t,n,r){r=r||{};let o=r.theme||"vs",s=r.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(o);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+o;let u=d=>{var h;const f=(h=$6==null?void 0:$6.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=f};return this.colorize(t,a||"",s,r).then(u,d=>console.error(d))}static colorize(e,t,n,r){const o=e.languageIdCodec;let s=4;r&&typeof r.tabSize=="number"&&(s=r.tabSize),wG(t)&&(t=t.substr(1));let a=og(t),u=e.getModeId(n);if(!u)return Promise.resolve(Wne(a,s,o));e.triggerMode(u);const d=Wr.get(u);if(d)return z6(a,s,d,o);const h=Wr.getPromise(u);return h?new Promise((f,p)=>{h.then(m=>{z6(a,s,m,o).then(f,p)},p)}):new Promise((f,p)=>{let m=null,v=null;const b=()=>{m&&(m.dispose(),m=null),v&&(v.dispose(),v=null);const E=Wr.get(u);if(E){z6(a,s,E,o).then(f,p);return}f(Wne(a,s,o))};v=new Ma,v.cancelAndSet(b,500),m=Wr.onDidChange(E=>{E.changedLanguages.indexOf(u)>=0&&b()})})}static colorizeLine(e,t,n,r,o=4){const s=Fu.isBasicASCII(e,t),a=Fu.containsRTL(e,s,n);return MB(new LC(!1,!0,e,!1,s,a,0,r,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let r=e.getLineContent(t);e.forceTokenization(t);let s=e.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,n)}}function z6(i,e,t,n){return new Promise((r,o)=>{const s=()=>{const a=FUe(i,e,t,n);if(t instanceof O8){const u=t.getLoadStatus();if(u.loaded===!1){u.promise.then(s,o);return}}r(a)};s()})}function Wne(i,e,t){let n=[];const o=new Uint32Array(2);o[0]=0,o[1]=16793600;for(let s=0,a=i.length;s<a;s++){let u=i[s];o[0]=u.length;const d=new es(o,u,t),h=Fu.isBasicASCII(u,!0),f=Fu.containsRTL(u,h,!0);let p=MB(new LC(!1,!0,u,!1,h,f,0,d,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>")}return n.join("")}function FUe(i,e,t,n){let r=[],o=t.getInitialState();for(let s=0,a=i.length;s<a;s++){let u=i[s],d=t.tokenize2(u,!0,o,0);es.convertToEndOffset(d.tokens,u.length);let h=new es(d.tokens,u,n);const f=Fu.isBasicASCII(u,!0),p=Fu.containsRTL(u,f,!0);let m=MB(new LC(!1,!0,u,!1,f,p,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(m.html),r.push("<br/>"),o=d.endState}return r.join("")}function oge(i,e,t){let n=new nfe(i,e),r=null;n.has(Ja)||(r=new E3(bi.modelService.get()),n.set(Ja,r)),n.has(Ll)||n.set(Ll,new K3(n.get(Ii),n.get(Ir)));let o=t(n);return r&&r.setEditor(o),o}function BUe(i,e,t){return oge(i,t||{},n=>new tO(i,e,n,n.get(Nn),n.get(Ii),n.get(Ir),n.get(cn),n.get(Er),n.get(Hp),n.get(G0),n.get(po),n.get(ir),n.get(rl),n.get(To),n.get(Fs)))}function WUe(i){return bi.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function VUe(i,e,t){return oge(i,t||{},n=>new u$(i,e,n,n.get(Nn),n.get(cn),n.get(Er),n.get(Hp),n.get(Hu),n.get(Ii),n.get(G0),n.get(po),n.get(ir),n.get(j0),n.get($p),n.get(K0)))}function HUe(i,e){return new DUe(i,e)}function $Ue(i,e,t){return Qde(bi.modelService.get(),bi.modeService.get(),i,e,t)}function zUe(i,e){bi.modelService.get().setMode(i,bi.modeService.get().create(e))}function UUe(i,e,t){i&&bi.markerService.get().changeOne(e,i.uri,t)}function jUe(i){return bi.markerService.get().read(i)}function KUe(i){return bi.markerService.get().onMarkerChanged(i)}function GUe(i){return bi.modelService.get().getModel(i)}function qUe(){return bi.modelService.get().getModels()}function YUe(i){return bi.modelService.get().onModelAdded(i)}function ZUe(i){return bi.modelService.get().onModelRemoved(i)}function XUe(i){return bi.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function QUe(i){return TUe(bi.modelService.get(),i)}function JUe(i,e){const t=bi.standaloneThemeService.get();return t.registerEditorContainer(i),OY.colorizeElement(t,bi.modeService.get(),i,e)}function eje(i,e,t){return bi.standaloneThemeService.get().registerEditorContainer(document.body),OY.colorize(bi.modeService.get(),i,e,t)}function tje(i,e,t=4){return bi.standaloneThemeService.get().registerEditorContainer(document.body),OY.colorizeModelLine(i,e,t)}function nje(i){let e=Wr.get(i);return e||{getInitialState:()=>dR,tokenize:(t,n,r,o)=>Yce(i,t,r,o)}}function ije(i,e){bi.modeService.get().triggerMode(e);let n=nje(e),r=og(i),o=[],s=n.getInitialState();for(let a=0,u=r.length;a<u;a++){let d=r[a],h=n.tokenize(d,!0,s,0);o[a]=h.tokens,s=h.endState}return o}function rje(i,e){bi.standaloneThemeService.get().defineTheme(i,e)}function oje(i){bi.standaloneThemeService.get().setTheme(i)}function sje(){zDe()}function aje(i,e){return Xn.registerCommand({id:i,handler:e})}function lje(){return{create:BUe,onDidCreateEditor:WUe,createDiffEditor:VUe,createDiffNavigator:HUe,createModel:$Ue,setModelLanguage:zUe,setModelMarkers:UUe,getModelMarkers:jUe,onDidChangeMarkers:KUe,getModels:qUe,getModel:GUe,onDidCreateModel:YUe,onWillDisposeModel:ZUe,onDidChangeModelLanguage:XUe,createWebWorker:QUe,colorizeElement:JUe,colorize:eje,colorizeModelLine:tje,tokenize:ije,defineTheme:rje,setTheme:oje,remeasureFonts:sje,registerCommand:aje,AccessibilitySupport:g$,ContentWidgetPositionPreference:b$,CursorChangeReason:C$,DefaultEndOfLine:y$,EditorAutoIndentStrategy:S$,EditorOption:E$,EndOfLinePreference:L$,EndOfLineSequence:x$,MinimapPosition:O$,MouseTargetType:R$,OverlayWidgetPositionPreference:M$,OverviewRulerLane:P$,RenderLineNumbersType:F$,RenderMinimap:B$,ScrollbarVisibility:V$,ScrollType:W$,TextEditorCursorBlinkingStyle:j$,TextEditorCursorStyle:K$,TrackedRangeStickiness:G$,WrappingIndent:q$,ConfigurationChangedEvent:Kue,BareFontInfo:Yb,FontInfo:DH,TextModelResolvedOptions:t4,FindMatch:DA,ApplyUpdateResult:L2,EditorType:_R,EditorOptions:af}}function uje(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function lP(i,e){return typeof i=="boolean"?i:e}function Vne(i,e){return typeof i=="string"?i:e}function cje(i){const e={};for(const t of i)e[t]=!0;return e}function Hne(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=cje(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function Xz(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,s){n=!0;let a="";if(typeof i[s]=="string")a=i[s];else if(i[s]&&i[s]instanceof RegExp)a=i[s].source;else throw i[s]===void 0?ar(i,"language definition does not contain attribute '"+s+"', used at: "+e):ar(i,"attribute reference '"+s+"' must be a string, used at: "+e);return vy(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,r)}function dje(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let r=t.split(".");if(r.unshift(t),n<r.length)return r[n]}return null}function hje(i,e,t,n){let r=-1,o=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(r=parseInt(s[3]),s[2]&&(r=r+100)),o=s[4]);let a="~",u=o;!o||o.length===0?(a="!=",u=""):/^\w*$/.test(u)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],u=s[2]));let d;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(u)){let h=Hne(u.split("|"),i.ignoreCase);d=function(f){return a==="~"?h(f):!h(f)}}else if(a==="@"||a==="!@"){let h=i[u];if(!h)throw ar(i,"the @ match target '"+u+"' is not defined, in rule: "+e);if(!uje(function(p){return typeof p=="string"},h))throw ar(i,"the @ match target '"+u+"' must be an array of strings, in rule: "+e);let f=Hne(h,i.ignoreCase);d=function(p){return a==="@"?f(p):!f(p)}}else if(a==="~"||a==="!~")if(u.indexOf("$")<0){let h=Xz(i,"^"+u+"$");d=function(f){return a==="~"?h.test(f):!h.test(f)}}else d=function(h,f,p,m){return Xz(i,"^"+Rv(i,u,f,p,m)+"$").test(h)};else if(u.indexOf("$")<0){let h=l0(i,u);d=function(f){return a==="=="?f===h:f!==h}}else{let h=l0(i,u);d=function(f,p,m,v,b){let E=Rv(i,h,p,m,v);return a==="=="?f===E:f!==E}}return r===-1?{name:t,value:n,test:function(h,f,p,m){return d(h,h,f,p,m)}}:{name:t,value:n,test:function(h,f,p,m){let v=dje(h,f,p,r);return d(v||"",h,f,p,m)}}}function Qz(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw ar(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw ar(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw ar(i,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!OUe(i,Rv(i,r,"",[],""))))throw ar(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=r}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=Qz(i,e,t[r]);return{group:n}}else if(t.cases){let n=[];for(let o in t.cases)if(t.cases.hasOwnProperty(o)){const s=Qz(i,e,t.cases[o]);o==="@default"||o==="@"||o===""?n.push({test:void 0,value:s,name:o}):o==="@eos"?n.push({test:function(a,u,d,h){return h},value:s,name:o}):n.push(hje(i,e,o,s))}const r=i.defaultToken;return{test:function(o,s,a,u){for(const d of n)if(!d.test||d.test(o,s,a,u))return d.value;return r}}}else throw ar(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class fje{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw ar(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=Xz(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=Qz(e,this.name,t)}}function gje(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=lP(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=lP(e.ignoreCase,!1),t.unicode=lP(e.unicode,!1),t.tokenPostfix=Vne(e.tokenPostfix,"."+t.languageId),t.defaultToken=Vne(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function r(s,a,u){for(const d of u){let h=d.include;if(h){if(typeof h!="string")throw ar(t,"an 'include' attribute must be a string at: "+s);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw ar(t,"include target '"+h+"' is not defined at: "+s);r(s+"."+h,a,e.tokenizer[h])}else{const f=new fje(s);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(f.setRegex(n,d[0]),d.length>=3)if(typeof d[1]=="string")f.setAction(n,{token:d[1],next:d[2]});else if(typeof d[1]=="object"){const p=d[1];p.next=d[2],f.setAction(n,p)}else throw ar(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+s);else f.setAction(n,d[1]);else{if(!d.regex)throw ar(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+s);d.name&&typeof d.name=="string"&&(f.name=d.name),d.matchOnlyAtStart&&(f.matchOnlyAtLineStart=lP(d.matchOnlyAtLineStart,!1)),f.setRegex(n,d.regex),f.setAction(n,d.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw ar(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let s in e.tokenizer)if(e.tokenizer.hasOwnProperty(s)){t.start||(t.start=s);const a=e.tokenizer[s];t.tokenizer[s]=new Array,r("tokenizer."+s,t.tokenizer[s],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw ar(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let o=[];for(let s of e.brackets){let a=s;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw ar(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:l0(t,a.open),close:l0(t,a.close)});else throw ar(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function pje(i){s1.registerLanguage(i)}function mje(){let i=[];return i=i.concat(s1.getLanguages()),i}function _je(i){return bi.modeService.get().languageIdCodec.encodeLanguageId(i)}function vje(i,e){let t=bi.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function bje(i,e){const t=bi.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return _i.register(t,e,100)}class Cje{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,r){if(typeof this._actual.tokenize=="function")return mO.adaptTokenize(this._languageId,this._actual,e,n,r);throw new Error("Not supported!")}tokenize2(e,t,n){let r=this._actual.tokenizeEncoded(e,n);return new HB(r.tokens,r.endState)}}class mO{constructor(e,t,n,r){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=r}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let r=[],o=0;for(let s=0,a=e.length;s<a;s++){const u=e[s];let d=u.startIndex;s===0?d=0:d<o&&(d=o),r[s]=new VB(d+n,u.scopes,t),o=d}return r}static adaptTokenize(e,t,n,r,o){let s=t.tokenize(n,r),a=mO._toClassicTokens(s.tokens,e,o),u;return s.endState.equals(r)?u=r:u=s.endState,new eq(a,u)}tokenize(e,t,n,r){return mO.adaptTokenize(this._languageId,this._actual,e,n,r)}_toBinaryTokens(e,t,n){const r=e.encodeLanguageId(this._languageId),o=this._standaloneThemeService.getColorTheme().tokenTheme;let s=[],a=0,u=0;for(let h=0,f=t.length;h<f;h++){const p=t[h],m=o.match(r,p.scopes);if(a>0&&s[a-1]===m)continue;let v=p.startIndex;h===0?v=0:v<u&&(v=u),s[a++]=v+n,s[a++]=m,u=v}let d=new Uint32Array(a);for(let h=0;h<a;h++)d[h]=s[h];return d}tokenize2(e,t,n,r){let o=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._modeService.languageIdCodec,o.tokens,r),a;return o.endState.equals(n)?a=n:a=o.endState,new HB(s,a)}}function yje(i){return"tokenizeEncoded"in i}function sge(i){return i&&typeof i.then=="function"}function wje(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=we.fromHex(i[t]);bi.standaloneThemeService.get().setColorMapOverride(e)}else bi.standaloneThemeService.get().setColorMapOverride(null)}function Sje(i,e){const t=bi.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=r=>yje(r)?new Cje(t,r):new mO(t,r,bi.modeService.get(),bi.standaloneThemeService.get());return sge(e)?Wr.registerPromise(i,e.then(r=>n(r))):Wr.register(i,n(e))}function Eje(i,e){const t=n=>PUe(bi.modeService.get(),bi.standaloneThemeService.get(),i,gje(i,n));return sge(e)?Wr.registerPromise(i,e.then(n=>t(n))):Wr.register(i,t(e))}function Lje(i,e){return KF.register(i,e)}function xje(i,e){return GF.register(i,e)}function Dje(i,e){return e1.register(i,e)}function Tje(i,e){return IA.register(i,{provideHover:(t,n,r)=>{let o=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,r)).then(s=>{if(s)return!s.range&&o&&(s.range=new Q(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn)),s.range||(s.range=new Q(n.lineNumber,n.column,n.lineNumber,n.column)),s})}})}function Ije(i,e){return Gc.register(i,e)}function kje(i,e){return Gw.register(i,e)}function Nje(i,e){return qF.register(i,e)}function Aje(i,e){return kA.register(i,e)}function Oje(i,e){return ZF.register(i,e)}function Rje(i,e){return XF.register(i,e)}function Mje(i,e){return ip.register(i,e)}function Pje(i,e,t){return tg.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,r,o,s)=>{let a=bi.markerService.get().read({resource:n.uri}).filter(u=>Q.areIntersectingOrTouching(u,r));return e.provideCodeActions(n,r,{markers:a,only:o.only},s)},resolveCodeAction:e.resolveCodeAction})}function Fje(i,e){return O2.register(i,e)}function Bje(i,e){return Oh.register(i,e)}function Wje(i,e){return QF.register(i,e)}function Vje(i,e){return NA.register(i,e)}function Hje(i,e){return Ah.register(i,e)}function $je(i,e){return qw.register(i,e)}function zje(i,e){return $H.register(i,e)}function Uje(i,e){return YF.register(i,e)}function jje(i,e){return BB.register(i,e)}function Kje(i,e){return Yw.register(i,e)}function Gje(i,e){return WB.register(i,e)}function qje(i,e){return XG.register(i,e)}function Yje(i,e){return Hv.register(i,e)}function Zje(){return{register:pje,getLanguages:mje,onLanguage:vje,getEncodedLanguageId:_je,setLanguageConfiguration:bje,setColorMap:wje,setTokensProvider:Sje,setMonarchTokensProvider:Eje,registerReferenceProvider:Lje,registerRenameProvider:xje,registerCompletionItemProvider:Hje,registerSignatureHelpProvider:Dje,registerHoverProvider:Tje,registerDocumentSymbolProvider:Ije,registerDocumentHighlightProvider:kje,registerLinkedEditingRangeProvider:Nje,registerDefinitionProvider:Aje,registerImplementationProvider:Oje,registerTypeDefinitionProvider:Rje,registerCodeLensProvider:Mje,registerCodeActionProvider:Pje,registerDocumentFormattingEditProvider:Fje,registerDocumentRangeFormattingEditProvider:Bje,registerOnTypeFormattingEditProvider:Wje,registerLinkProvider:Vje,registerColorProvider:$je,registerFoldingRangeProvider:zje,registerDeclarationProvider:Uje,registerSelectionRangeProvider:jje,registerDocumentSemanticTokensProvider:Kje,registerDocumentRangeSemanticTokensProvider:Gje,registerInlineCompletionsProvider:qje,registerInlayHintsProvider:Yje,DocumentHighlightKind:w$,CompletionItemKind:m$,CompletionItemTag:_$,CompletionItemInsertTextRule:p$,SymbolKind:z$,SymbolTag:U$,IndentAction:D$,CompletionTriggerKind:v$,SignatureHelpTriggerKind:$$,InlayHintKind:T$,InlineCompletionTriggerKind:I$,FoldingRangeKind:ef}}class aS{static _handleEolEdits(e,t){let n,r=[];for(let o of t)typeof o.eol=="number"&&(n=o.eol),o.range&&typeof o.text=="string"&&r.push(o);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),r}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),r=n.validateRange(t.range);return n.getFullModelRange().equalsRange(r)}static execute(e,t,n){n&&e.pushUndoStop();const r=aS._handleEolEdits(e,t);r.length===1&&aS._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(o=>jr.replace(Q.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",r.map(o=>jr.replaceMove(Q.lift(o.range),o.text))),n&&e.pushUndoStop()}}class U6{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var of=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function RY(i){if(i=i.filter(r=>r.range),!i.length)return;let{range:e}=i[0];for(let r=1;r<i.length;r++)e=Q.plusRange(e,i[r].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?i.length===1?Is(C("hint11","Made 1 formatting edit on line {0}",t)):Is(C("hintn1","Made {0} formatting edits on line {1}",i.length,t)):i.length===1?Is(C("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):Is(C("hintnn","Made {0} formatting edits between lines {1} and {2}",i.length,t,n))}function age(i){const e=[],t=new Set,n=O2.ordered(i);for(const o of n)e.push(o),o.extensionId&&t.add(U6.toKey(o.extensionId));const r=Oh.ordered(i);for(const o of r){if(o.extensionId){if(t.has(U6.toKey(o.extensionId)))continue;t.add(U6.toKey(o.extensionId))}e.push({displayName:o.displayName,extensionId:o.extensionId,provideDocumentFormattingEdits(s,a,u){return o.provideDocumentRangeFormattingEdits(s,s.getFullModelRange(),a,u)}})}return e}class $1{static setFormatterSelector(e){return{dispose:$1._selectors.unshift(e)}}static select(e,t,n){return of(this,void 0,void 0,function*(){if(e.length===0)return;const r=Qn.first($1._selectors);if(r)return yield r(e,t,n)})}}$1._selectors=new ku;function lge(i,e,t,n,r,o){return of(this,void 0,void 0,function*(){const s=i.get(Nn),a=cg(e)?e.getModel():e,u=Oh.ordered(a),d=yield $1.select(u,a,n);d&&(r.report(d),yield s.invokeFunction(Xje,d,e,t,o))})}function Xje(i,e,t,n,r){return of(this,void 0,void 0,function*(){const o=i.get(Hu);let s,a;cg(t)?(s=t.getModel(),a=new YA(t,5,void 0,r)):(s=t,a=new Lq(t,r));let u=[],d=0;for(let v of TG(n).sort(Q.compareRangesUsingStarts))d>0&&Q.areIntersectingOrTouching(u[d-1],v)?u[d-1]=Q.fromPositions(u[d-1].getStartPosition(),v.getEndPosition()):d=u.push(v);const h=v=>of(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(s,v,s.getFormattingOptions(),a.token))||[]}),f=(v,b)=>{if(!v.length||!b.length)return!1;const E=v.reduce((S,w)=>Q.plusRange(S,w.range),v[0].range);if(!b.some(S=>Q.intersectRanges(E,S.range)))return!1;for(let S of v)for(let w of b)if(Q.intersectRanges(S.range,w.range))return!0;return!1},p=[],m=[];try{for(let v of u){if(a.token.isCancellationRequested)return!0;m.push(yield h(v))}for(let v=0;v<u.length;++v)for(let b=v+1;b<u.length;++b){if(a.token.isCancellationRequested)return!0;if(f(m[v],m[b])){const E=Q.plusRange(u[v],u[b]),S=yield h(E);u.splice(b,1),u.splice(v,1),u.push(E),m.splice(b,1),m.splice(v,1),m.push(S),v=0,b=0}}for(let v of m){if(a.token.isCancellationRequested)return!0;const b=yield o.computeMoreMinimalEdits(s.uri,v);b&&p.push(...b)}}finally{a.dispose()}if(p.length===0)return!1;if(cg(t))aS.execute(t,p,!0),RY(p),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:v}]=p,b=new wt(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn);s.pushEditOperations([b],p.map(E=>({text:E.text,range:Q.lift(E.range),forceMoveMarkers:!0})),E=>{for(const{range:S}of E)if(Q.areIntersectingOrTouching(S,b))return[new wt(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn)];return null})}return!0})}function Qje(i,e,t,n,r){return of(this,void 0,void 0,function*(){const o=i.get(Nn),s=cg(e)?e.getModel():e,a=age(s),u=yield $1.select(a,s,t);u&&(n.report(u),yield o.invokeFunction(Jje,u,e,t,r))})}function Jje(i,e,t,n,r){return of(this,void 0,void 0,function*(){const o=i.get(Hu);let s,a;cg(t)?(s=t.getModel(),a=new YA(t,5,void 0,r)):(s=t,a=new Lq(t,r));let u;try{const d=yield e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(u=yield o.computeMoreMinimalEdits(s.uri,d),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!u||u.length===0)return!1;if(cg(t))aS.execute(t,u,n!==2),n!==2&&(RY(u),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:d}]=u,h=new wt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn);s.pushEditOperations([h],u.map(f=>({text:f.text,range:Q.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:p}of f)if(Q.areIntersectingOrTouching(p,h))return[new wt(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn)];return null})}return!0})}function eKe(i,e,t,n,r){return of(this,void 0,void 0,function*(){const o=Oh.ordered(e);for(const s of o){let a=yield Promise.resolve(s.provideDocumentRangeFormattingEdits(e,t,n,r)).catch(Ms);if(bl(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function tKe(i,e,t,n){return of(this,void 0,void 0,function*(){const r=age(e);for(const o of r){let s=yield Promise.resolve(o.provideDocumentFormattingEdits(e,t,n)).catch(Ms);if(bl(s))return yield i.computeMoreMinimalEdits(e.uri,s)}})}function uge(i,e,t,n,r){const o=QF.ordered(e);return o.length===0||o[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(o[0].provideOnTypeFormattingEdits(e,t,n,r,Fn.None)).catch(Ms).then(s=>i.computeMoreMinimalEdits(e.uri,s))}Xn.registerCommand("_executeFormatRangeProvider",function(i,...e){return of(this,void 0,void 0,function*(){const[t,n,r]=e;Yi(rn.isUri(t)),Yi(Q.isIRange(n));const o=i.get(Ja),s=i.get(Hu),a=yield o.createModelReference(t);try{return eKe(s,a.object.textEditorModel,Q.lift(n),r,Fn.None)}finally{a.dispose()}})});Xn.registerCommand("_executeFormatDocumentProvider",function(i,...e){return of(this,void 0,void 0,function*(){const[t,n]=e;Yi(rn.isUri(t));const r=i.get(Ja),o=i.get(Hu),s=yield r.createModelReference(t);try{return tKe(o,s.object.textEditorModel,n,Fn.None)}finally{s.dispose()}})});Xn.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return of(this,void 0,void 0,function*(){const[t,n,r,o]=e;Yi(rn.isUri(t)),Yi(Ee.isIPosition(n)),Yi(typeof r=="string");const s=i.get(Ja),a=i.get(Hu),u=yield s.createModelReference(t);try{return uge(a,u.object.textEditorModel,Ee.lift(n),r,o)}finally{u.dispose()}})});var j6;af.wrappingIndent.defaultValue=0;af.glyphMargin.defaultValue=!1;af.autoIndent.defaultValue=3;af.overviewRulerLanes.defaultValue=2;$1.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const Pa=nhe();Pa.editor=lje();Pa.languages=Zje();const nKe=Pa.CancellationTokenSource,cge=Pa.Emitter,an=Pa.KeyCode,tl=Pa.KeyMod,iKe=Pa.Position,rKe=Pa.Range,oKe=Pa.Selection,sKe=Pa.SelectionDirection,aKe=Pa.MarkerSeverity,lKe=Pa.MarkerTag,u0=Pa.Uri,uKe=Pa.Token,sa=Pa.editor,Ia=Pa.languages;(!((j6=Yr.MonacoEnvironment)===null||j6===void 0)&&j6.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Pa);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const AR=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:nKe,Emitter:cge,KeyCode:an,KeyMod:tl,MarkerSeverity:aKe,MarkerTag:lKe,Position:iKe,Range:rKe,Selection:oKe,SelectionDirection:sKe,Token:uKe,Uri:u0,editor:sa,languages:Ia},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var dge=Object.defineProperty,cKe=Object.getOwnPropertyDescriptor,dKe=Object.getOwnPropertyNames,hKe=Object.prototype.hasOwnProperty,fKe=i=>dge(i,"__esModule",{value:!0}),gKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of dKe(e))!hKe.call(i,n)&&n!=="default"&&dge(i,n,{get:()=>e[n],enumerable:!(t=cKe(e,n))||t.enumerable});return i},pKe="4.4.4",z1={};fKe(z1);gKe(z1,AR);var Jz;(function(i){i[i.None=0]="None",i[i.CommonJS=1]="CommonJS",i[i.AMD=2]="AMD",i[i.UMD=3]="UMD",i[i.System=4]="System",i[i.ES2015=5]="ES2015",i[i.ESNext=99]="ESNext"})(Jz||(Jz={}));var eU;(function(i){i[i.None=0]="None",i[i.Preserve=1]="Preserve",i[i.React=2]="React",i[i.ReactNative=3]="ReactNative",i[i.ReactJSX=4]="ReactJSX",i[i.ReactJSXDev=5]="ReactJSXDev"})(eU||(eU={}));var tU;(function(i){i[i.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",i[i.LineFeed=1]="LineFeed"})(tU||(tU={}));var nU;(function(i){i[i.ES3=0]="ES3",i[i.ES5=1]="ES5",i[i.ES2015=2]="ES2015",i[i.ES2016=3]="ES2016",i[i.ES2017=4]="ES2017",i[i.ES2018=5]="ES2018",i[i.ES2019=6]="ES2019",i[i.ES2020=7]="ES2020",i[i.ESNext=99]="ESNext",i[i.JSON=100]="JSON",i[i.Latest=99]="Latest"})(nU||(nU={}));var iU;(function(i){i[i.Classic=1]="Classic",i[i.NodeJs=2]="NodeJs"})(iU||(iU={}));var hge=class{constructor(e,t,n,r){this._onDidChange=new z1.Emitter,this._onDidExtraLibsChange=new z1.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(r),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let r=1;return this._removedExtraLibs[n]&&(r=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(r=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:r},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let o=this._extraLibs[n];o&&o.version===r&&(delete this._extraLibs[n],this._removedExtraLibs[n]=r,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,r=t.content;let o=1;this._removedExtraLibs[n]&&(o=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:r,version:o}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},mKe=pKe,fge=new hge({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),gge=new hge({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),_Ke=()=>R8().then(i=>i.getTypeScriptWorker()),vKe=()=>R8().then(i=>i.getJavaScriptWorker());z1.languages.typescript={ModuleKind:Jz,JsxEmit:eU,NewLineKind:tU,ScriptTarget:nU,ModuleResolutionKind:iU,typescriptVersion:mKe,typescriptDefaults:fge,javascriptDefaults:gge,getTypeScriptWorker:_Ke,getJavaScriptWorker:vKe};function R8(){return Tt(()=>import("./tsMode-898d4e6f.js"),[])}z1.languages.onLanguage("typescript",()=>R8().then(i=>i.setupTypeScript(fge)));z1.languages.onLanguage("javascript",()=>R8().then(i=>i.setupJavaScript(gge)));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var pge=Object.defineProperty,bKe=Object.getOwnPropertyDescriptor,CKe=Object.getOwnPropertyNames,yKe=Object.prototype.hasOwnProperty,wKe=i=>pge(i,"__esModule",{value:!0}),SKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of CKe(e))!yKe.call(i,n)&&n!=="default"&&pge(i,n,{get:()=>e[n],enumerable:!(t=bKe(e,n))||t.enumerable});return i},RC={};wKe(RC);SKe(RC,AR);var MY=class{constructor(e,t,n){this._onDidChange=new RC.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},PY={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},FY={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},mge=new MY("css",PY,FY),_ge=new MY("scss",PY,FY),vge=new MY("less",PY,FY);RC.languages.css={cssDefaults:mge,lessDefaults:vge,scssDefaults:_ge};function BY(){return Tt(()=>import("./cssMode-ef81220c.js"),[])}RC.languages.onLanguage("less",()=>{BY().then(i=>i.setupMode(vge))});RC.languages.onLanguage("scss",()=>{BY().then(i=>i.setupMode(_ge))});RC.languages.onLanguage("css",()=>{BY().then(i=>i.setupMode(mge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var bge=Object.defineProperty,EKe=Object.getOwnPropertyDescriptor,LKe=Object.getOwnPropertyNames,xKe=Object.prototype.hasOwnProperty,DKe=i=>bge(i,"__esModule",{value:!0}),TKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of LKe(e))!xKe.call(i,n)&&n!=="default"&&bge(i,n,{get:()=>e[n],enumerable:!(t=EKe(e,n))||t.enumerable});return i},eE={};DKe(eE);TKe(eE,AR);var IKe=class{constructor(e,t,n){this._onDidChange=new eE.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},kKe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},NKe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Cge=new IKe("json",kKe,NKe);eE.languages.json={jsonDefaults:Cge};function AKe(){return Tt(()=>import("./jsonMode-b578bcad.js"),[])}eE.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});eE.languages.onLanguage("json",()=>{AKe().then(i=>i.setupMode(Cge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var yge=Object.defineProperty,OKe=Object.getOwnPropertyDescriptor,RKe=Object.getOwnPropertyNames,MKe=Object.prototype.hasOwnProperty,PKe=i=>yge(i,"__esModule",{value:!0}),FKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of RKe(e))!MKe.call(i,n)&&n!=="default"&&yge(i,n,{get:()=>e[n],enumerable:!(t=OKe(e,n))||t.enumerable});return i},OR={};PKe(OR);FKe(OR,AR);var BKe=class{constructor(e,t,n){this._onDidChange=new OR.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},WKe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},M8={format:WKe,suggest:{},data:{useDefaultDataProvider:!0}};function P8(i){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:i===G2,documentFormattingEdits:i===G2,documentRangeFormattingEdits:i===G2}}var G2="html",$ne="handlebars",zne="razor",wge=F8(G2,M8,P8(G2)),VKe=wge.defaults,Sge=F8($ne,M8,P8($ne)),HKe=Sge.defaults,Ege=F8(zne,M8,P8(zne)),$Ke=Ege.defaults;OR.languages.html={htmlDefaults:VKe,razorDefaults:$Ke,handlebarDefaults:HKe,htmlLanguageService:wge,handlebarLanguageService:Sge,razorLanguageService:Ege,registerHTMLLanguageService:F8};function zKe(){return Tt(()=>import("./htmlMode-1c57c43d.js"),[])}function F8(i,e=M8,t=P8(i)){const n=new BKe(i,e,t);let r;const o=OR.languages.onLanguage(i,async()=>{r=(await zKe()).setupMode(n)});return{defaults:n,dispose(){o.dispose(),r==null||r.dispose(),r=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Lge=Object.defineProperty,UKe=Object.getOwnPropertyDescriptor,jKe=Object.getOwnPropertyNames,KKe=Object.prototype.hasOwnProperty,GKe=i=>Lge(i,"__esModule",{value:!0}),qKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of jKe(e))!KKe.call(i,n)&&n!=="default"&&Lge(i,n,{get:()=>e[n],enumerable:!(t=UKe(e,n))||t.enumerable});return i},Ky={};GKe(Ky);qKe(Ky,AR);var xge={},K6={},Dge=class{static getOrCreate(e){return K6[e]||(K6[e]=new Dge(e)),K6[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,xge[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function Ut(i){const e=i.id;xge[e]=i,Ky.languages.register(i);const t=Dge.getOrCreate(e);Ky.languages.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),Ky.languages.onLanguage(e,()=>{t.load().then(n=>{Ky.languages.setLanguageConfiguration(e,n.conf)})})}Ut({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>Tt(()=>import("./abap-c25c4b29.js"),[])});Ut({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>Tt(()=>import("./apex-90b58cb1.js"),[])});Ut({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>Tt(()=>import("./azcli-c8384527.js"),[])});Ut({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>Tt(()=>import("./bat-dd03db3a.js"),[])});Ut({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>Tt(()=>import("./bicep-b5110554.js"),[])});Ut({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>Tt(()=>import("./cameligo-3323522b.js"),[])});Ut({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>Tt(()=>import("./clojure-d45fb7b6.js"),[])});Ut({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>Tt(()=>import("./coffee-912c6d0d.js"),[])});Ut({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>Tt(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>Tt(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>Tt(()=>import("./csharp-0553c8db.js"),[])});Ut({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>Tt(()=>import("./csp-dbe8a1fa.js"),[])});Ut({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>Tt(()=>import("./css-64c40e4a.js"),[])});Ut({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>Tt(()=>import("./dart-4b7e6961.js"),[])});Ut({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>Tt(()=>import("./dockerfile-1b41f08d.js"),[])});Ut({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>Tt(()=>import("./ecl-eaf29bcc.js"),[])});Ut({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>Tt(()=>import("./elixir-4f68332f.js"),[])});Ut({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>Tt(()=>import("./flow9-6536bbb8.js"),[])});Ut({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>Tt(()=>import("./fsharp-d4a13be8.js"),[])});Ut({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>Tt(()=>import("./go-514c6bed.js"),[])});Ut({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>Tt(()=>import("./graphql-dcd71327.js"),[])});Ut({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>Tt(()=>import("./handlebars-91dcfd66.js"),[])});Ut({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>Tt(()=>import("./hcl-69c09a16.js"),[])});Ut({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>Tt(()=>import("./html-ba36c3cd.js"),[])});Ut({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>Tt(()=>import("./ini-ddcf22bb.js"),[])});Ut({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>Tt(()=>import("./java-7b3bef9f.js"),[])});Ut({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>Tt(()=>import("./javascript-37db15fd.js"),["assets/javascript-37db15fd.js","assets/typescript-f6d67703.js"])});Ut({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>Tt(()=>import("./julia-d49177e7.js"),[])});Ut({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>Tt(()=>import("./kotlin-12177a5b.js"),[])});Ut({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>Tt(()=>import("./less-dd974dd5.js"),[])});Ut({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>Tt(()=>import("./lexon-7236519e.js"),[])});Ut({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>Tt(()=>import("./lua-de05fd08.js"),[])});Ut({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>Tt(()=>import("./liquid-2bc62bd1.js"),[])});Ut({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>Tt(()=>import("./m3-ceb8ffc4.js"),[])});Ut({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>Tt(()=>import("./markdown-6a6346da.js"),[])});Ut({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>Tt(()=>import("./mips-6fb0802a.js"),[])});Ut({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>Tt(()=>import("./msdax-bf1578ea.js"),[])});Ut({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>Tt(()=>import("./mysql-4cfd205e.js"),[])});Ut({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>Tt(()=>import("./objective-c-fadd4d71.js"),[])});Ut({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>Tt(()=>import("./pascal-4479a90f.js"),[])});Ut({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>Tt(()=>import("./pascaligo-7d1a5852.js"),[])});Ut({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>Tt(()=>import("./perl-4a4b182f.js"),[])});Ut({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>Tt(()=>import("./pgsql-e04cad37.js"),[])});Ut({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>Tt(()=>import("./php-f332f715.js"),[])});Ut({id:"pla",extensions:[".pla"],loader:()=>Tt(()=>import("./pla-649d56b2.js"),[])});Ut({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>Tt(()=>import("./postiats-52f8c4e6.js"),[])});Ut({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>Tt(()=>import("./powerquery-ee00e87c.js"),[])});Ut({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>Tt(()=>import("./powershell-d33e9d1b.js"),[])});Ut({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>Tt(()=>import("./protobuf-16b10ef3.js"),[])});Ut({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>Tt(()=>import("./pug-768921d2.js"),[])});Ut({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>Tt(()=>import("./python-61ec9de4.js"),[])});Ut({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>Tt(()=>import("./qsharp-c7533acc.js"),[])});Ut({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>Tt(()=>import("./r-d1be5f1d.js"),[])});Ut({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>Tt(()=>import("./razor-a97e8da3.js"),[])});Ut({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>Tt(()=>import("./redis-bd6165ff.js"),[])});Ut({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>Tt(()=>import("./redshift-c705624d.js"),[])});Ut({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>Tt(()=>import("./restructuredtext-947094fa.js"),[])});Ut({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>Tt(()=>import("./ruby-1816fcd8.js"),[])});Ut({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>Tt(()=>import("./rust-c4db2e19.js"),[])});Ut({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>Tt(()=>import("./sb-adba4cc1.js"),[])});Ut({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>Tt(()=>import("./scala-af9b4756.js"),[])});Ut({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>Tt(()=>import("./scheme-812b9ffd.js"),[])});Ut({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>Tt(()=>import("./scss-b21c6880.js"),[])});Ut({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>Tt(()=>import("./shell-a62a83b7.js"),[])});Ut({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>Tt(()=>import("./solidity-9a528bff.js"),[])});Ut({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>Tt(()=>import("./sophia-dc39a193.js"),[])});Ut({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>Tt(()=>import("./sparql-658eb489.js"),[])});Ut({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>Tt(()=>import("./sql-233b53ac.js"),[])});Ut({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>Tt(()=>import("./st-27efd63b.js"),[])});Ut({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>Tt(()=>import("./swift-a2a125fe.js"),[])});Ut({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>Tt(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>Tt(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>Tt(()=>import("./tcl-5c798828.js"),[])});Ut({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>Tt(()=>import("./twig-5245532a.js"),[])});Ut({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>Tt(()=>import("./typescript-f6d67703.js"),[])});Ut({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>Tt(()=>import("./vb-818b3fb1.js"),[])});Ut({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>Tt(()=>import("./xml-b23605d9.js"),[])});Ut({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>Tt(()=>import("./yaml-eee3d8e3.js"),[])});var YKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ZKe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},B8=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const W8=new Dt("selectionAnchorSet",!1);let Mp=class Tge{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=W8.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(Tge.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:wt.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Rp().appendText(C("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),Is(C("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(wt.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Mp.ID="editor.contrib.selectionAnchorController";Mp=YKe([ZKe(1,cn)],Mp);class XKe extends Lt{constructor(){super({id:"editor.action.setSelectionAnchor",label:C("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2080),weight:100}})}run(e,t){return B8(this,void 0,void 0,function*(){Mp.get(t).setSelectionAnchor()})}}class QKe extends Lt{constructor(){super({id:"editor.action.goToSelectionAnchor",label:C("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:W8})}run(e,t){return B8(this,void 0,void 0,function*(){Mp.get(t).goToSelectionAnchor()})}}class JKe extends Lt{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:C("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:W8,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2089),weight:100}})}run(e,t){return B8(this,void 0,void 0,function*(){Mp.get(t).selectFromAnchorToCursor()})}}class eGe extends Lt{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:C("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:W8,kbOpts:{kbExpr:de.editorTextFocus,primary:9,weight:100}})}run(e,t){return B8(this,void 0,void 0,function*(){Mp.get(t).cancelSelectionAnchor()})}}ki(Mp.ID,Mp);it(XKe);it(QKe);it(JKe);it(eGe);const tGe=ye("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},C("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class nGe extends Lt{constructor(){super({id:"editor.action.jumpToBracket",label:C("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=Xh.get(t);n&&n.jumpToBracket()}}class iGe extends Lt{constructor(){super({id:"editor.action.selectToBracket",label:C("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const r=Xh.get(t);if(!r)return;let o=!0;n&&n.selectBrackets===!1&&(o=!1),r.selectToBracket(o)}}class rGe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Xh extends Oe{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new tr(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Xh.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const r=n.getStartPosition(),o=e.bracketPairs.matchBracket(r);let s=null;if(o)o[0].containsPosition(r)?s=o[1].getStartPosition():o[1].containsPosition(r)&&(s=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(r);if(a)s=a[0].getStartPosition();else{const u=e.bracketPairs.findNextBracket(r);u&&u.range&&(s=u.range.getStartPosition())}}return s?new wt(s.lineNumber,s.column,s.lineNumber,s.column):new wt(r.lineNumber,r.column,r.lineNumber,r.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(r=>{const o=r.getStartPosition();let s=t.bracketPairs.matchBracket(o);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(o),!s)){const d=t.bracketPairs.findNextBracket(o);d&&d.range&&(s=t.bracketPairs.matchBracket(d.range.getStartPosition()))}let a=null,u=null;if(s){s.sort(Q.compareRangesUsingStarts);const[d,h]=s;if(a=e?d.getStartPosition():d.getEndPosition(),u=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(o)){const f=a;a=u,u=f}}a&&u&&n.push(new wt(a.lineNumber,a.column,u.lineNumber,u.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let r=n.brackets;r&&(e[t++]={range:r[0],options:n.options},e[t++]={range:r[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let r=[];this._lastVersionId===n&&(r=this._lastBracketsData);let o=[],s=0;for(let f=0,p=e.length;f<p;f++){let m=e[f];m.isEmpty()&&(o[s++]=m.getStartPosition())}o.length>1&&o.sort(Ee.compare);let a=[],u=0,d=0,h=r.length;for(let f=0,p=o.length;f<p;f++){let m=o[f];for(;d<h&&r[d].position.isBefore(m);)d++;if(d<h&&r[d].position.equals(m))a[u++]=r[d];else{let v=t.bracketPairs.matchBracket(m),b=Xh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!v&&this._matchBrackets==="always"&&(v=t.bracketPairs.findEnclosingBrackets(m,20),b=Xh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[u++]=new rGe(m,v,b)}}this._lastBracketsData=a,this._lastVersionId=n}}Xh.ID="editor.contrib.bracketMatchingController";Xh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Ln.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Lr(tGe),position:Sl.Center}});Xh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Ln.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});ki(Xh.ID,Xh);it(iGe);it(nGe);fr((i,e)=>{const t=i.getColor(w2e);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(ade);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});ra.appendMenuItem(Rt.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:C({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class oGe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,r=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(n)))if(this._isMovingLeft){const s=new Q(n,r-1,n,r),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new Q(n,o,n,o),a)}else{const s=new Q(n,o,n,o+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new Q(n,r,n,r),a)}}computeCursorState(e,t){return this._isMovingLeft?new wt(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new wt(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class Ige extends Lt{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],r=t.getSelections();for(const o of r)n.push(new oGe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class sGe extends Ige{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:C("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:de.writable})}}class aGe extends Ige{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:C("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:de.writable})}}it(sGe);it(aGe);class lGe extends Lt{constructor(){super({id:"editor.action.transposeLetters",label:C("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=[],o=t.getSelections();for(let s of o){if(!s.isEmpty())continue;let a=s.startLineNumber,u=s.startColumn,d=n.getLineMaxColumn(a);if(a===1&&(u===1||u===2&&d===2))continue;let h=u===d?s.getPosition():pi.rightPosition(n,s.getPosition().lineNumber,s.getPosition().column),f=pi.leftPosition(n,h),p=pi.leftPosition(n,f),m=n.getValueInRange(Q.fromPositions(p,f)),v=n.getValueInRange(Q.fromPositions(f,h)),b=Q.fromPositions(p,h);r.push(new xs(b,v+m))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}}it(lGe);var uGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const U1="9_cutcopypaste",cGe=Kh||document.queryCommandSupported("cut"),kge=Kh||document.queryCommandSupported("copy"),dGe=typeof navigator.clipboard>"u"||wl?document.queryCommandSupported("paste"):!0;function WY(i){return i.register(),i}const hGe=cGe?WY(new FS({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Kh?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Rt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Rt.EditorContext,group:U1,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1},{menuId:Rt.CommandPalette,group:"",title:C("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Rt.SimpleEditorContext,group:U1,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1}]})):void 0,fGe=kge?WY(new FS({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Kh?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Rt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Rt.EditorContext,group:U1,title:C("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Rt.CommandPalette,group:"",title:C("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Rt.SimpleEditorContext,group:U1,title:C("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;ra.appendMenuItem(Rt.MenubarEditMenu,{submenu:Rt.MenubarCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});ra.appendMenuItem(Rt.EditorContext,{submenu:Rt.EditorContextCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:U1,order:3});const G6=dGe?WY(new FS({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Kh?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Rt.MenubarEditMenu,group:"2_ccp",title:C({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Rt.EditorContext,group:U1,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4},{menuId:Rt.CommandPalette,group:"",title:C("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Rt.SimpleEditorContext,group:U1,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4}]})):void 0;class gGe extends Lt{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:C("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(jH.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),jH.forceCopyWithSyntaxHighlighting=!1)}}function Nge(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(Ii).getFocusedCodeEditor();if(r&&r.hasTextFocus()){const o=r.getOption(32),s=r.getSelection();return s&&s.isEmpty()&&!o||document.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}Nge(hGe,"cut");Nge(fGe,"copy");G6&&(G6.addImplementation(1e4,"code-editor",(i,e)=>{const t=i.get(Ii),n=i.get(K0),r=t.getFocusedCodeEditor();return r&&r.hasTextFocus()?!document.execCommand("paste")&&PS?(()=>uGe(void 0,void 0,void 0,function*(){const s=yield n.readText();if(s!==""){const a=FA.INSTANCE.get(s);let u=!1,d=null,h=null;a&&(u=r.getOption(32)&&!!a.isFromEmptySelection,d=typeof a.multicursorText<"u"?a.multicursorText:null,h=a.mode),r.trigger("keyboard","paste",{text:s,pasteOnNewLine:u,multicursorText:d,mode:h})}}))():!0:!1}),G6.addImplementation(0,"generic-dom",(i,e)=>(document.execCommand("paste"),!0)));kge&&it(gGe);class Q3{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}class zn{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+zn.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new zn(this.value+zn.sep+e)}}zn.sep=".";zn.None=new zn("@@none@@");zn.Empty=new zn("");zn.QuickFix=new zn("quickfix");zn.Refactor=new zn("refactor");zn.Source=new zn("source");zn.SourceOrganizeImports=zn.Source.append("organizeImports");zn.SourceFixAll=zn.Source.append("fixAll");function pGe(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>Age(e,t,i.include))||!i.includeSourceActions&&zn.Source.contains(e))}function mGe(i,e){const t=e.kind?new zn(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>Age(t,n,i.include))||!i.includeSourceActions&&t&&zn.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function Age(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class Wf{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Wf(t.kind,t.apply,!1):new Wf(Wf.getKindFromUser(e,t.kind),Wf.getApplyFromUser(e,t.apply),Wf.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new zn(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var VY=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Oge="editor.action.codeAction",Rge="editor.action.refactor",Mge="editor.action.sourceAction",HY="editor.action.organizeImports",$Y="editor.action.fixAll";class Pge{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return VY(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(r){Ms(r)}n&&(this.action.edit=n.edit)}return this})}}class zY extends Oe{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(zY.codeActionsComparator),this.validActions=this.allActions.filter(({action:r})=>!r.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:bl(e.diagnostics)?bl(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:bl(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&zn.QuickFix.contains(new zn(e.kind))&&!!e.isPreferred)}}const Une={actions:[],documentation:void 0};function UY(i,e,t,n,r){var o;const s=t.filter||{},a={only:(o=s.include)===null||o===void 0?void 0:o.value,trigger:t.type},u=new Lq(i,r),d=_Ge(i,s),h=new Je,f=d.map(m=>VY(this,void 0,void 0,function*(){try{n.report(m);const v=yield m.provideCodeActions(i,e,a,u.token);if(v&&h.add(v),u.token.isCancellationRequested)return Une;const b=((v==null?void 0:v.actions)||[]).filter(S=>S&&mGe(s,S)),E=vGe(m,b,s.include);return{actions:b.map(S=>new Pge(S,m)),documentation:E}}catch(v){if(Cg(v))throw v;return Ms(v),Une}})),p=tg.onDidChange(()=>{const m=tg.all(i);rc(m,d)||u.cancel()});return Promise.all(f).then(m=>{const v=zue(m.map(E=>E.actions)),b=BS(m.map(E=>E.documentation));return new zY(v,b,h)}).finally(()=>{p.dispose(),u.dispose()})}function _Ge(i,e){return tg.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>pGe(e,new zn(n))):!0)}function vGe(i,e,t){if(!i.documentation)return;const n=i.documentation.map(r=>({kind:new zn(r.kind),command:r.command}));if(t){let r;for(const o of n)o.kind.contains(t)&&(r?r.kind.contains(o.kind)&&(r=o):r=o);if(r)return r==null?void 0:r.command}for(const r of e)if(r.kind){for(const o of n)if(o.kind.contains(new zn(r.kind)))return o.command}}Xn.registerCommand("_executeCodeActionProvider",function(i,e,t,n,r){return VY(this,void 0,void 0,function*(){if(!(e instanceof rn))throw jh();const o=i.get(To).getModel(e);if(!o)throw jh();const s=wt.isISelection(t)?wt.liftSelection(t):Q.isIRange(t)?o.validateRange(t):void 0;if(!s)throw jh();const a=typeof n=="string"?new zn(n):void 0,u=yield UY(o,s,{type:1,filter:{includeSourceActions:!0,include:a}},DC.None,Fn.None),d=[],h=Math.min(u.validActions.length,typeof r=="number"?r:0);for(let f=0;f<h;f++)d.push(u.validActions[f].resolve(Fn.None));try{return yield Promise.all(d),u.validActions.map(f=>f.action)}finally{setTimeout(()=>u.dispose(),100)}})});var bGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},CGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Bu=class rU{constructor(e,t){this._messageWidget=new Ra,this._messageListeners=new Je,this._editor=e,this._visible=rU.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(rU.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Is(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new jne(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Ma(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(r=>{r.target.position&&(n?n.containsPosition(r.target.position)||this.closeMessage():n=new Q(t.lineNumber-3,1,r.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(jne.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(C("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Bu.ID="editor.contrib.messageController";Bu.MESSAGE_VISIBLE=new Dt("messageVisible",!1,C("messageVisible","Whether the editor is currently showing an inline message"));Bu=bGe([CGe(1,cn)],Bu);const yGe=Ps.bindToContribution(Bu.get);nt(new yGe({id:"leaveEditorMessage",precondition:Bu.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let jne=class{constructor(e,{lineNumber:t,column:n},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");s.classList.add("message"),s.textContent=r,this._domNode.appendChild(s);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};ki(Bu.ID,Bu);var wGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Kne=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},SGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Gne extends ic{constructor(e,t){super(e.command?e.command.id:e.title,EGe(e.title),void 0,!e.disabled,t),this.action=e}}function EGe(i){return i.replace(/\r\n|\r|\n/g," ")}let oU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Ra),this._keybindingResolver=new V8({getKeybindings:()=>r.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,r){return SGe(this,void 0,void 0,function*(){const o=r.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,vC();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,o,t.documentation),a=Ee.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},u=this._keybindingResolver.getResolver(),d=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof Gne?u(h.action):void 0})})}getMenuActions(e,t,n){var r,o;const s=h=>new Gne(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(s),u=[...n],d=this._editor.getModel();if(d&&a.length)for(const h of tg.all(d))h._getAdditionalMenuItems&&u.push(...h._getAdditionalMenuItems({trigger:e.type,only:(o=(r=e.filter)===null||r===void 0?void 0:r.include)===null||o===void 0?void 0:o.value},t.map(f=>f.action)));return u.length&&a.push(new Zc,...u.map(h=>s(new Pge({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Us(this._editor.getDomNode()),r=n.left+t.left,o=n.top+t.top+t.height;return{x:r,y:o}}};oU=wGe([Kne(2,j0),Kne(3,Er)],oU);class V8{constructor(e){this._keybindingProvider=e}getResolver(){const e=new Q3(()=>this._keybindingProvider.getKeybindings().filter(t=>V8.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===HY?n={kind:zn.SourceOrganizeImports.value}:t.command===$Y&&(n={kind:zn.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Wf.fromUser(n,{kind:zn.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new zn(e.kind);return t.filter(r=>r.kind.contains(n)).filter(r=>r.preferred?e.isPreferred:!0).reduceRight((r,o)=>r?r.kind.contains(o.kind)?o:r:o,void 0)}}V8.codeActionCommands=[Rge,Oge,Mge,HY,$Y];var LGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},xGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},q2;(function(i){i.Hidden={type:0};class e{constructor(n,r,o,s){this.actions=n,this.trigger=r,this.editorPosition=o,this.widgetPosition=s,this.type=1}}i.Showing=e})(q2||(q2={}));let J3=class Fge extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=r,this._onClick=this._register(new Ce),this.onClick=this._onClick.event,this._state=q2.Hidden,this._domNode=document.createElement("div"),this._domNode.className=_e.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),Hi.ignoreTarget(this._domNode),this._register(CLe(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();const{top:s,height:a}=Us(this._domNode),u=this._editor.getOption(58);let d=Math.floor(u/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(d+=u),this._onClick.fire({x:o.posx,y:s+a+d,actions:this.state.actions,trigger:this.state.trigger})})),this._register(qe(this._domNode,"mouseenter",o=>{if((o.buttons&1)!==1)return;this.hide();const s=new EC;s.startMonitoring(o.target,o.buttons,VS,()=>{},()=>{s.dispose()})})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(56).enabled)return this.hide();const o=this._editor.getModel();if(!o)return this.hide();const{lineNumber:s,column:a}=o.validatePosition(n),u=o.getOptions().tabSize,d=r.get(43),h=o.getLineContent(s),f=El.computeIndentLevel(h,u),p=d.spaceWidth*f>22,m=b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1);let v=s;if(!p){if(s>1&&!m(s-1))v-=1;else if(!m(s+1))v+=1;else if(a*d.spaceWidth<22)return this.hide()}this.state=new q2.Showing(e,t,n,{position:{lineNumber:v,column:1},preference:Fge._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=q2.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(..._e.lightBulb.classNamesArray),this._domNode.classList.add(..._e.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=C("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(..._e.lightbulbAutofix.classNamesArray),this._domNode.classList.add(..._e.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=C("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=C("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};J3._posPref=[0];J3=LGe([xGe(3,Er)],J3);fr((i,e)=>{var t;const n=(t=i.getColor(oc))===null||t===void 0?void 0:t.transparent(.7),r=i.getColor(STe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightBulb.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`);const o=i.getColor(ETe);o&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${n};
		}`)});var DGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},TGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},q6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},IGe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},kGe=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},w4;let sU=class extends Oe{constructor(e,t,n,r,o){super(),this._editor=e,this.delegate=r,this._activeCodeActions=this._register(new Ra),w4.set(this,!1),this._codeActionWidget=new Q3(()=>this._register(o.createInstance(oU,this._editor,{onSelectCodeAction:s=>q6(this,void 0,void 0,function*(){this.delegate.applyCodeAction(s,!0)})}))),this._lightBulbWidget=new Q3(()=>{const s=this._register(o.createInstance(J3,this._editor,t,n));return this._register(s.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),s})}dispose(){IGe(this,w4,!0,"f"),super.dispose()}update(e){var t,n,r;return q6(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let o;try{o=yield e.actions}catch(s){gn(s);return}if(!kGe(this,w4,"f"))if(this._lightBulbWidget.getValue().update(o,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,o);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{o.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,o);if(u&&u.action.disabled){Bu.get(this._editor).showMessage(u.action.disabled,e.trigger.context.position),o.dispose();return}}}const s=!!(!((r=e.trigger.filter)===null||r===void 0)&&r.include);if(e.trigger.context&&(!o.allActions.length||!s&&!o.validActions.length)){Bu.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=o,o.dispose();return}this._activeCodeActions.value=o,this._codeActionWidget.getValue().show(e.trigger,o,e.position,{includeDisabledActions:s})}else this._codeActionWidget.getValue().isVisible?o.dispose():this._activeCodeActions.value=o})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,r){return q6(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,r)})}};w4=new WeakMap;sU=DGe([TGe(4,Nn)],sU);var Y6=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},NGe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},by;const Bge=new Dt("supportedCodeAction","");class AGe extends Oe{constructor(e,t,n,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=r,this._autoTriggerTimer=this._register(new Ma),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>Oce(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const r=t.validateRange(n);if(Q.intersectRanges(r,e))return Q.lift(r)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:r,column:o}=n.getPosition(),s=t.getLineContent(r);if(s.length===0)return;if(o===1){if(/\s/.test(s[0]))return}else if(o===t.getLineMaxColumn(r)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[o-2])&&/\s/.test(s[o-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const r=this._getRangeOfMarker(t),o=r?r.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:o};return this._signalChange(s),s}}var Tb;(function(i){i.Empty={type:0};class e{constructor(n,r,o,s){this.trigger=n,this.rangeOrSelection=r,this.position=o,this._cancellablePromise=s,this.type=1,this.actions=s.catch(a=>{if(Cg(a))return OGe;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(Tb||(Tb={}));const OGe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class RGe extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._markerService=t,this._progressService=r,this._codeActionOracle=this._register(new Ra),this._state=Tb.Empty,this._onDidChangeState=this._register(new Ce),this.onDidChangeState=this._onDidChangeState.event,by.set(this,!1),this._supportedCodeActions=Bge.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(tg.onDidChange(()=>this._update())),this._update()}dispose(){Y6(this,by,"f")||(NGe(this,by,!0,"f"),super.dispose(),this.setState(Tb.Empty,!0))}_update(){if(Y6(this,by,"f"))return;this._codeActionOracle.value=void 0,this.setState(Tb.Empty);const e=this._editor.getModel();if(e&&tg.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of tg.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new AGe(this._editor,this._markerService,n=>{var r;if(!n){this.setState(Tb.Empty);return}const o=cs(s=>UY(e,n.selection,n.trigger,DC.None,s));n.trigger.type===1&&((r=this._progressService)===null||r===void 0||r.showWhile(o,250)),this.setState(new Tb.Triggered(n.trigger,n.selection,n.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!Y6(this,by,"f")&&this._onDidChangeState.fire(e))}}by=new WeakMap;var MGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function RR(i){return _t.regex(Bge.keys()[0],new RegExp("(\\s|^)"+dc(i.value)+"\\b"))}const jY={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:C("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:C("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[C("args.schema.apply.first","Always apply the first returned code action."),C("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),C("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:C("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let j1=class Vge extends Oe{constructor(e,t,n,r,o){super(),this._instantiationService=o,this._editor=e,this._model=this._register(new RGe(this._editor,t,n,r)),this._register(this._model.onDidChangeState(s=>this.update(s))),this._ui=new Q3(()=>this._register(new sU(e,tE.Id,MR.Id,{applyCodeAction:(s,a)=>Wge(this,void 0,void 0,function*(){try{yield this._applyCodeAction(s)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Vge.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Bu.get(this._editor).closeMessage();const r=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(PGe,e,this._editor)}};j1.ID="editor.contrib.quickFixController";j1=MGe([uP(1,xR),uP(2,cn),uP(3,$p),uP(4,Nn)],j1);function PGe(i,e,t){return Wge(this,void 0,void 0,function*(){const n=i.get(xq),r=i.get(Ir),o=i.get(yg),s=i.get(po);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Fn.None),e.action.edit&&(yield n.apply(XB.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const u=FGe(a);s.error(typeof u=="string"?u:C("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function FGe(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function MC(i,e,t,n){if(i.hasModel()){const r=j1.get(i);r&&r.manualTriggerAtCurrentPosition(e,t,n)}}class tE extends Lt{constructor(){super({id:tE.Id,label:C("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:2132,weight:100}})}run(e,t){return MC(t,C("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}tE.Id="editor.action.quickFix";class BGe extends Ps{constructor(){super({id:Oge,precondition:_t.and(de.writable,de.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:jY}]}})}runEditorCommand(e,t,n){const r=Wf.fromUser(n,{kind:zn.Empty,apply:"ifSingle"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):C("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):r.preferred?C("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):C("editor.action.codeAction.noneMessage","No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class WGe extends Lt{constructor(){super({id:Rge,label:C("refactor.label","Refactor..."),alias:"Refactor...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:_t.and(de.writable,RR(zn.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:jY}]}})}run(e,t,n){const r=Wf.fromUser(n,{kind:zn.Refactor,apply:"never"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):C("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):r.preferred?C("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):C("editor.action.refactor.noneMessage","No refactorings available"),{include:zn.Refactor.contains(r.kind)?r.kind:zn.None,onlyIncludePreferredActions:r.preferred},r.apply)}}class VGe extends Lt{constructor(){super({id:Mge,label:C("source.label","Source Action..."),alias:"Source Action...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:_t.and(de.writable,RR(zn.Source))},description:{description:"Source Action...",args:[{name:"args",schema:jY}]}})}run(e,t,n){const r=Wf.fromUser(n,{kind:zn.Source,apply:"never"});return MC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):C("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):r.preferred?C("editor.action.source.noneMessage.preferred","No preferred source actions available"):C("editor.action.source.noneMessage","No source actions available"),{include:zn.Source.contains(r.kind)?r.kind:zn.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class HGe extends Lt{constructor(){super({id:HY,label:C("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:_t.and(de.writable,RR(zn.SourceOrganizeImports)),kbOpts:{kbExpr:de.editorTextFocus,primary:1581,weight:100}})}run(e,t){return MC(t,C("editor.action.organize.noneMessage","No organize imports action available"),{include:zn.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class $Ge extends Lt{constructor(){super({id:$Y,label:C("fixAll.label","Fix All"),alias:"Fix All",precondition:_t.and(de.writable,RR(zn.SourceFixAll))})}run(e,t){return MC(t,C("fixAll.noneMessage","No fix all action available"),{include:zn.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class MR extends Lt{constructor(){super({id:MR.Id,label:C("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:_t.and(de.writable,RR(zn.QuickFix)),kbOpts:{kbExpr:de.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return MC(t,C("editor.action.autoFix.noneMessage","No auto fixes available"),{include:zn.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}MR.Id="editor.action.autoFix";ki(j1.ID,j1);it(tE);it(WGe);it(VGe);it(HGe);it(MR);it($Ge);nt(new BGe);var qne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class aU{constructor(){this.lenses=[],this._disposables=new Je}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function Hge(i,e){return qne(this,void 0,void 0,function*(){const t=ip.ordered(i),n=new Map,r=new aU,o=t.map((s,a)=>qne(this,void 0,void 0,function*(){n.set(s,a);try{const u=yield Promise.resolve(s.provideCodeLenses(i,e));u&&r.add(u,s)}catch(u){Ms(u)}}));return yield Promise.all(o),r.lenses=r.lenses.sort((s,a)=>s.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:s.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:n.get(s.provider)<n.get(a.provider)?-1:n.get(s.provider)>n.get(a.provider)?1:s.symbol.range.startColumn<a.symbol.range.startColumn?-1:s.symbol.range.startColumn>a.symbol.range.startColumn?1:0),r})}Xn.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,n]=e;Yi(rn.isUri(t)),Yi(typeof n=="number"||!n);const r=i.get(To).getModel(t);if(!r)throw jh();const o=[],s=new Je;return Hge(r,Fn.None).then(a=>{s.add(a);let u=[];for(const d of a.lenses)n==null||d.symbol.command?o.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&u.push(Promise.resolve(d.provider.resolveCodeLens(r,d.symbol,Fn.None)).then(h=>o.push(h||d.symbol)));return Promise.all(u)}).then(()=>o).finally(()=>{setTimeout(()=>s.dispose(),100)})});var zGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},UGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const $ge=gi("ICodeLensCache");class Yne{constructor(e,t){this.lineCount=e,this.data=t}}let lU=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new z0(20,.75);const t="codelens/cache";bA(()=>e.remove(t,1));const n="codelens/cache2",r=e.get(n,1,"{}");this._deserialize(r),kp(e.onWillSaveState)(o=>{o.reason===V3.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(s=>{var a;return{range:s.symbol.range,command:s.symbol.command&&{id:"",title:(a=s.symbol.command)===null||a===void 0?void 0:a.title}}}),r=new aU;r.add({lenses:n,dispose:()=>{}},this._fakeProvider);const o=new Yne(e.getLineCount(),r);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const r=new Set;for(const o of n.data.lenses)r.add(o.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const r=t[n],o=[];for(const a of r.lines)o.push({range:new Q(a,1,a,11)});const s=new aU;s.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(n,new Yne(r.lineCount,s))}}catch{}}};lU=zGe([UGe(0,Dg)],lU);U0($ge,lU);class jGe{constructor(e,t,n){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class H8{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${H8._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],r=!1;for(let o=0;o<e.length;o++){const s=e[o];if(s&&(r=!0,s.command)){const a=a1(s.command.title.trim());s.command.id?(n.push(Ge("a",{id:String(o),title:s.command.tooltip},...a)),this._commands.set(String(o),s.command)):n.push(Ge("span",{title:s.command.tooltip},...a)),o+1<e.length&&n.push(Ge("span",void 0," | "))}}r?(v0(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):v0(this._domNode,Ge("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}H8._idPool=0;class Z6{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,r=t.length;n<r;n++)this._addDecorationsCallbacks[n](t[n])}}class Zne{constructor(e,t,n,r,o,s,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let u,d=[];this._data.forEach((h,f)=>{h.symbol.command&&d.push(h.symbol),r.addDecoration({range:h.symbol.range,options:Ln.EMPTY},p=>this._decorationIds[f]=p),u?u=Q.plusRange(u,h.symbol.range):u=Q.lift(h.symbol.range)}),this._viewZone=new jGe(u.startLineNumber-1,s,a),this._viewZoneId=o.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new H8(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(n&&Q.isEmpty(r.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,r)=>{t.addDecoration({range:n.symbol.range,options:Ln.EMPTY},o=>this._decorationIds[r]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:r}=this._data[t];r.command=n.command||r.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var KGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},X6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},GGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let lS=class{constructor(e,t,n,r){this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=r,this._disposables=new Je,this._localToDispose=new Je,this._lenses=[],this._getCodeLensModelDelays=new UF(ip,250,2500),this._oldCodeLensModels=new Je,this._resolveCodeLensesDelays=new UF(ip,250,2500),this._resolveCodeLensesScheduler=new tr(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(16)||o.hasChanged(15))&&this._updateLensStyle(),o.hasChanged(14)&&this._onModelChange()})),this._disposables.add(ip.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+Hce(this._editor.getId()).toString(16),this._styleElement=uc(hB(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),r=this._editor.getOption(43),o=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${s}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${js.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(s,r.fontFeatureSettings),this._editor.changeViewZones(u=>{for(let d of this._lenses)d.updateHeight(e,u)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!ip.has(e)){t&&this._localToDispose.add(w1(()=>{const r=this._codeLensCache.get(e);t===r&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const r of ip.all(e))if(typeof r.onDidChange=="function"){let o=r.onDidChange(()=>n.schedule());this._localToDispose.add(o)}const n=new tr(()=>{var r;const o=Date.now();(r=this._getCodeLensModelPromise)===null||r===void 0||r.cancel(),this._getCodeLensModelPromise=cs(s=>Hge(e,s)),this._getCodeLensModelPromise.then(s=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=s,this._codeLensCache.put(e,s);const a=this._getCodeLensModelDelays.update(e,Date.now()-o);n.delay=a,this._renderCodeLensSymbols(s),this._resolveCodeLensesInViewportSoon()},gn)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(n),this._localToDispose.add(Un(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(r=>{this._editor.changeViewZones(o=>{let s=[],a=-1;this._lenses.forEach(d=>{!d.isValid()||a===d.getLineNumber()?s.push(d):(d.update(o),a=d.getLineNumber())});let u=new Z6;s.forEach(d=>{d.dispose(u,o),this._lenses.splice(this._lenses.indexOf(d),1)}),u.commit(r)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(r=>{r.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Un(()=>{if(this._editor.getModel()){const r=L0.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(s=>{this._disposeAllLenses(o,s)})}),r.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(r=>{if(r.target.type!==9)return;let o=r.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const s of this._lenses){let a=s.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(u=>this._notificationService.error(u));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new Z6;for(const r of this._lenses)r.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],r;for(let a of e.lenses){let u=a.symbol.range.startLineNumber;u<1||u>t||(r&&r[r.length-1].symbol.range.startLineNumber===u?r.push(a):(r=[a],n.push(r)))}const o=L0.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(u=>{const d=new Z6;let h=0,f=0;for(;f<n.length&&h<this._lenses.length;){let p=n[f][0].symbol.range.startLineNumber,m=this._lenses[h].getLineNumber();m<p?(this._lenses[h].dispose(d,u),this._lenses.splice(h,1)):m===p?(this._lenses[h].updateCodeLensSymbols(n[f],d),f++,h++):(this._lenses.splice(h,0,new Zne(n[f],this._editor,this._styleClassName,d,u,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++,f++)}for(;h<this._lenses.length;)this._lenses[h].dispose(d,u),this._lenses.splice(h,1);for(;f<n.length;)this._lenses.push(new Zne(n[f],this._editor,this._styleClassName,d,u,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;d.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],r=[];if(this._lenses.forEach(a=>{const u=a.computeIfNecessary(t);u&&(n.push(u),r.push(a))}),n.length===0)return;const o=Date.now(),s=cs(a=>{const u=n.map((d,h)=>{const f=new Array(d.length),p=d.map((m,v)=>!m.symbol.command&&typeof m.provider.resolveCodeLens=="function"?Promise.resolve(m.provider.resolveCodeLens(t,m.symbol,a)).then(b=>{f[v]=b},Ms):(f[v]=m.symbol,Promise.resolve(void 0)));return Promise.all(p).then(()=>{!a.isCancellationRequested&&!r[h].isDisposed()&&r[h].updateCommands(f)})});return Promise.all(u)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDelays.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{gn(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};lS.ID="css.editor.codeLens";lS=KGe([X6(1,Ir),X6(2,po),X6(3,$ge)],lS);ki(lS.ID,lS);it(class extends Lt{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:de.hasCodeLensProvider,label:C("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return GGe(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Cc),r=e.get(Ir),o=e.get(po),s=t.getSelection().positionLineNumber,a=t.getContribution(lS.ID),u=[];for(let h of a.getLenses())if(h.getLineNumber()===s)for(let f of h.getItems()){const{command:p}=f.symbol;p&&u.push({label:p.title,command:p})}if(u.length===0)return;const d=yield n.pick(u,{canPickMany:!1});if(d)try{yield r.executeCommand(d.command.id,...d.command.arguments||[])}catch(h){o.error(h)}})}});function qGe(i,e){const t=[],r=qw.ordered(i).reverse().map(o=>Promise.resolve(o.provideDocumentColors(i,e)).then(s=>{if(Array.isArray(s))for(let a of s)t.push({colorInfo:a,provider:o})}));return Promise.all(r).then(()=>t)}function Xne(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Xn.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof rn))throw jh();const n=i.get(To).getModel(t);if(!n)throw jh();const r=[],s=qw.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,Fn.None)).then(u=>{if(Array.isArray(u))for(let d of u)r.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(s).then(()=>r)});Xn.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:r,range:o}=n;if(!(r instanceof rn)||!Array.isArray(t)||t.length!==4||!Q.isIRange(o))throw jh();const[s,a,u,d]=t,h=i.get(To).getModel(r);if(!h)throw jh();const f={range:o,color:{red:s,green:a,blue:u,alpha:d}},p=[],v=qw.ordered(h).reverse().map(b=>Promise.resolve(b.provideColorPresentations(h,f,Fn.None)).then(E=>{Array.isArray(E)&&p.push(...E)}));return Promise.all(v).then(()=>p)});var YGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ZGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const XGe=500;let K1=class zge extends Oe{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new Je),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new Ece(this._editor),this._colorDecorationClassRefs=this._register(new Je),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(qw.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const r=n.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!qw.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Ma,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},zge.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=cs(e=>{const t=this._editor.getModel();return t?qGe(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},gn)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Ln.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,r)=>this._colorDatas.set(n,e[r]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<XGe;n++){const{red:r,green:o,blue:s,alpha:a}=e[n].colorInfo.color,u=new fi(Math.round(r*255),Math.round(o*255),Math.round(s*255),a);let d=`rgba(${u.r}, ${u.g}, ${u.b}, ${u.a})`;const h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:cxe,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(Q.fromPositions(e,e)).filter(r=>this._colorDatas.has(r.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};K1.ID="editor.contrib.colorDetector";K1.RECOMPUTE_TIME=1e3;K1=YGe([ZGe(1,ir)],K1);ki(K1.ID,K1);function uU(i,e){return!!i[e]}class Q6{constructor(e,t){this.target=e.target,this.hasTriggerModifier=uU(e.event,t.triggerModifier),this.hasSideBySideModifier=uU(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Qne{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=uU(e,t.triggerModifier)}}class cP{constructor(e,t,n,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Jne(i){return i==="altKey"?Gn?new cP(57,"metaKey",6,"altKey"):new cP(5,"ctrlKey",6,"altKey"):Gn?new cP(6,"altKey",57,"metaKey"):new cP(6,"altKey",5,"ctrlKey")}class Uge extends Oe{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Ce),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Ce),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Ce),this.onCancel=this._onCancel.event,this._editor=e,this._opts=Jne(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=Jne(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new Q6(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new Q6(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new Q6(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new Qne(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new Qne(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var QGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ab=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let G1=class extends qA{constructor(e,t,n,r,o,s,a,u,d,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},r,o,s,a,u,d,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Eg(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};G1=QGe([ab(3,Nn),ab(4,Ii),ab(5,Ir),ab(6,cn),ab(7,xr),ab(8,po),ab(9,rl)],G1);const eie=new we(new fi(0,122,204)),JGe={showArrow:!0,showFrame:!0,className:"",frameColor:eie,arrowColor:eie,keepEditorSelection:!1},eqe="vs.editor.contrib.zoneWidget";class tqe{constructor(e,t,n,r,o,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=r,this._onDomNodeTop=o,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class nqe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class $8{constructor(e){this._editor=e,this._ruleName=$8._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),iJ(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){iJ(this._ruleName),vH(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:Q.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}$8._IdGenerator=new rY(".arrow-decoration-");class iqe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Je,this.container=null,this._isShowing=!1,this.editor=e,this.options=Xg(t),Eg(this.options,JGe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const r=this._getWidth(n);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(r)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new $8(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=Q.isIRange(e)?Q.lift(e):Q.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:Ln.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),r=this.editor.getLayoutInfo(),o=this._getWidth(r);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(r)+"px";const s=document.createElement("div");s.style.overflow="hidden";const a=this.editor.getOption(58),u=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,u);let d=0,h=0;if(this._arrow&&this.options.showArrow&&(d=Math.round(a/3),this._arrow.height=d,this._arrow.show(n)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(m=>{this._viewZone&&m.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new tqe(s,n.lineNumber,n.column,t,v=>this._onViewZoneTop(v),v=>this._onViewZoneHeight(v)),this._viewZone.id=m.addZone(this._viewZone),this._overlayWidget=new nqe(eqe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const m=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=m+"px",this.container.style.borderBottomWidth=m+"px"}let f=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=d+"px",this.container.style.height=f+"px",this.container.style.overflow="hidden"),this._doLayout(f,o),this.options.keepEditorSelection||this.editor.setSelection(e);const p=this.editor.getModel();if(p){const m=e.endLineNumber+1;m<=p.getLineCount()?this.revealLine(m,!1):this.revealLine(p.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Hs(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),r=n<0?Math.ceil(n):Math.floor(n),o=e.heightInLines+r;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class rqe extends zw{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Ce),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Be(e,Ge(".monaco-dropdown")),this._label=Be(this._element,Ge(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(const o of[Ht.CLICK,Ht.MOUSE_DOWN,ur.Tap])this._register(qe(this.element,o,s=>Ni.stop(s,!0)));for(const o of[Ht.MOUSE_DOWN,ur.Tap])this._register(qe(this._label,o,s=>{s instanceof MouseEvent&&s.detail>1||(this.visible?this.hide():this.show())}));this._register(qe(this._label,Ht.KEY_UP,o=>{const s=new Sr(o);(s.equals(3)||s.equals(10))&&(Ni.stop(o,!0),this.visible?this.hide():this.show())}));const r=n(this._label);r&&this._register(r),this._register(Hi.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class oqe extends rqe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class jge extends kf{constructor(e,t,n,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new Ce),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=Be(o,Ge("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new oqe(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var s;(s=this.element)===null||s===void 0||s.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var KY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Nf=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Kge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function sqe(i,e,t,n,r,o,s){const a=i.getActions(e);return lqe(a,t,!1,typeof n=="string"?d=>d===n:n,r,o,s),aqe(a)}function aqe(i){const e=new Je;for(const[,t]of i)for(const n of t)e.add(n);return e}function lqe(i,e,t,n=a=>a==="navigation",r=Number.MAX_SAFE_INTEGER,o=()=>!1,s=!1){let a,u;Array.isArray(e)?(a=e,u=e):(a=e.primary,u=e.secondary);const d=new Set;for(const[h,f]of i){let p;n(h)?(p=a,p.length>0&&s&&p.push(new Zc)):(p=u,p.length>0&&p.push(new Zc));for(let m of f){t&&(m=m instanceof C0&&m.alt?m.alt:m);const v=p.push(m);m instanceof fB&&d.add({group:h,action:m,index:v-1})}}for(const{group:h,action:f,index:p}of d){const m=n(h)?a:u,v=f.actions;(v.length<=1||m.length+v.length-2<=r)&&o(f,h,m.length)&&m.splice(p,1,...v)}if(a!==u&&a.length>r){const h=a.splice(r,a.length-r);u.unshift(...h,new Zc)}}let uS=class extends ZA{constructor(e,t,n,r,o){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=r,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Ra),this._altKey=Pb.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return Kge(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(As||Qa)&&this._altKey.keyStatus.shiftKey;const r=()=>{const o=t&&n;o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{n=o.altKey||(As||Qa)&&o.shiftKey,r()})),this._register(qe(e,"mouseleave",o=>{t=!1,r()})),this._register(qe(e,"mouseenter",o=>{t=!0,r()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let r=t?C("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=s&&s.getLabel(),u=a?C("titleAndKb","{0} ({1})",o,a):o;r+=`
[${Tq.modifierLabels[qu].altKey}] ${u}`}this.label.title=r}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:r}=this;if(!n||!r)return;const o=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(o)if(mr.isThemeIcon(o)){const s=mr.asClassNameArray(o);r.classList.add(...s),this._itemClassDispose.value=Un(()=>{r.classList.remove(...s)})}else o.light&&r.style.setProperty("--menu-entry-icon-light",S1(o.light)),o.dark&&r.style.setProperty("--menu-entry-icon-dark",S1(o.dark)),r.classList.add("icon"),this._itemClassDispose.value=Un(()=>{r.classList.remove("icon"),r.style.removeProperty("--menu-entry-icon-light"),r.style.removeProperty("--menu-entry-icon-dark")})}};uS=KY([Nf(2,Er),Nf(3,po),Nf(4,cn)],uS);let cU=class extends jge{constructor(e,t,n){var r,o;const s=Object.assign({},t??Object.create(null),{menuAsChild:(r=t==null?void 0:t.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(o=t==null?void 0:t.classNames)!==null&&o!==void 0?o:mr.isThemeIcon(e.item.icon)?mr.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,s)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!mr.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",S1(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",S1(t.dark)))}}};cU=KY([Nf(2,j0)],cU);let dU=class extends kf{constructor(e,t,n,r,o,s,a,u){var d,h,f;super(null,e),this._keybindingService=n,this._notificationService=r,this._contextMenuService=o,this._menuService=s,this._instaService=a,this._storageService=u,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let p,m=u.get(this._storageKey,1);m&&(p=e.actions.find(b=>m===b.id)),p||(p=e.actions[0]),this._defaultAction=this._instaService.createInstance(uS,p,void 0);const v=Object.assign({},t??Object.create(null),{menuAsChild:(d=t==null?void 0:t.menuAsChild)!==null&&d!==void 0?d:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(f=t==null?void 0:t.actionRunner)!==null&&f!==void 0?f:new zw});this._dropdown=new jge(e,e.actions,this._contextMenuService,v),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof C0&&this.update(b.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(uS,e,void 0),this._defaultAction.actionRunner=new class extends zw{runAction(t,n){return Kge(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(NLe(this._container,Ge(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Ge(".action-container");this._defaultAction.render(Be(this._container,t)),this._register(qe(t,Ht.KEY_DOWN,r=>{const o=new Sr(r);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const n=Ge(".dropdown-action-container");this._dropdown.render(Be(this._container,n)),this._register(qe(n,Ht.KEY_DOWN,r=>{var o;const s=new Sr(r);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};dU=KY([Nf(2,Er),Nf(3,po),Nf(4,j0),Nf(5,yC),Nf(6,Nn),Nf(7,Dg)],dU);function uqe(i,e,t){return e instanceof C0?i.createInstance(uS,e,void 0):e instanceof xG?e.item.rememberDefaultAction?i.createInstance(dU,e,t):i.createInstance(cU,e,t):void 0}var Gge=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},qge=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Yge=gi("IPeekViewService");U0(Yge,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const r=this._widgets.get(i);r&&r.widget===e&&(r.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var xl;(function(i){i.inPeekEditor=new Dt("inReferenceSearchEditor",!0,C("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(xl||(xl={}));let _O=class{constructor(e,t){e instanceof G1&&xl.inPeekEditor.bindTo(t)}dispose(){}};_O.ID="editor.contrib.referenceController";_O=Gge([qge(1,cn)],_O);ki(_O.ID,_O);function cqe(i){let e=i.get(Ii).getFocusedCodeEditor();return e instanceof G1?e.getParentEditor():e}const dqe={headerBackgroundColor:we.white,primaryHeadingColor:we.fromHex("#333333"),secondaryHeadingColor:we.fromHex("#6c6c6cb3")};let e5=class extends iqe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new Ce,this.onDidClose=this._onDidClose.event,Eg(this.options,dqe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Ge(".head"),this._bodyElement=Ge(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=Ge(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),ts(n,"click",s=>this._onTitleClick(s))),Be(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=Ge("span.filename"),this._secondaryHeading=Ge("span.dirname"),this._metaHeading=Ge("span.meta"),Be(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const r=Ge(".peekview-actions");Be(this._headElement,r);const o=this._getActionBarOptions();this._actionbarWidget=new ug(r,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new ic("peekview.close",C("label.close","Close"),_e.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:uqe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:$o(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Lu(this._metaHeading)):ja(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),r=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};e5=Gge([qge(2,Nn)],e5);const hqe=ye("peekViewTitle.background",{dark:nr(Gh,.1),light:nr(Gh,.1),hc:null},C("peekViewTitleBackground","Background color of the peek view title area.")),Zge=ye("peekViewTitleLabel.foreground",{dark:we.white,light:we.black,hc:we.white},C("peekViewTitleForeground","Color of the peek view title.")),Xge=ye("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},C("peekViewTitleInfoForeground","Color of the peek view title info.")),fqe=ye("peekView.border",{dark:Gh,light:Gh,hc:go},C("peekViewBorder","Color of the peek view borders and arrow.")),gqe=ye("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:we.black},C("peekViewResultsBackground","Background color of the peek view result list."));var pqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class I0{constructor(e,t,n,r){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=r,this.id=Ghe.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?C({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",fc(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):C("aria.oneReference","symbol in {0} on line {1} at column {2}",fc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class mqe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:r,startColumn:o,endLineNumber:s,endColumn:a}=e,u=n.getWordUntilPosition({lineNumber:r,column:o-t}),d=new Q(r,u.startColumn,r,o),h=new Q(s,a,s,1073741824),f=n.getValueInRange(d).replace(/^\s+/,""),p=n.getValueInRange(e),m=n.getValueInRange(h).replace(/\s+$/,"");return{value:f+p+m,highlight:{start:f.length,end:f.length+p.length}}}}class vO{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new na}dispose(){ri(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?C("aria.fileReferences.1","1 symbol in {0}, full path {1}",fc(this.uri),this.uri.fsPath):C("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,fc(this.uri),this.uri.fsPath)}resolve(e){return pqe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new mqe(n))}catch(n){gn(n)}return this})}}class yl{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Ce,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(yl._compareReferences);let r;for(let o of e)if((!r||!la.isEqual(r.uri,o.uri,!0))&&(r=new vO(this,o.uri),this.groups.push(r)),r.children.length===0||yl._compareReferences(o,r.children[r.children.length-1])!==0){const s=new I0(n===o,r,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),r.children.push(s)}}dispose(){ri(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new yl(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?C("aria.result.0","No results found"):this.references.length===1?C("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?C("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):C("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,r=n.children.indexOf(e),o=n.children.length,s=n.parent.groups.length;return s===1||t&&r+1<o||!t&&r>0?(t?r=(r+1)%o:r=(r+o-1)%o,n.children[r]):(r=n.parent.groups.indexOf(n),t?(r=(r+1)%s,n.parent.groups[r].children[0]):(r=(r+s-1)%s,n.parent.groups[r].children[n.parent.groups[r].children.length-1]))}nearestReference(e,t){const n=this.references.map((r,o)=>({idx:o,prefixLen:Uw(r.uri.toString(),e.toString()),offsetDist:Math.abs(r.range.startLineNumber-t.lineNumber)*100+Math.abs(r.range.startColumn-t.column)})).sort((r,o)=>r.prefixLen>o.prefixLen?-1:r.prefixLen<o.prefixLen?1:r.offsetDist<o.offsetDist?-1:r.offsetDist>o.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&Q.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return la.compare(e.uri,t.uri)||Q.compareRangesUsingStarts(e.range,t.range)}}function Qge(i){if(!i)return;typeof i=="string"&&(i=rn.file(i));const e=fc(i)||(i.scheme===In.file?i.fsPath:i.path);return As&&tke(e)?hU(e):e}function hU(i,e){return Ace(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}var z8=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},bO=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let fU=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof yl||e instanceof vO}getChildren(e){if(e instanceof yl)return e.groups;if(e instanceof vO)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};fU=z8([bO(0,Ja)],fU);class _qe{getHeight(){return 23}getTemplateId(e){return e instanceof vO?CO.id:PR.id}}let gU=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof I0){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return fc(e.uri)}};gU=z8([bO(0,Er)],gU);class vqe{getId(e){return e instanceof I0?e.id:e.uri}}let pU=class extends Oe{constructor(e,t,n){super(),this._uriLabel=t;const r=document.createElement("div");r.classList.add("reference-file"),this.file=this._register(new $3(r,{supportHighlights:!0})),this.badge=new wz(Be(r,Ge(".count"))),this._register(w4e(this.badge,n)),e.appendChild(r)}set(e,t){let n=zG(e.uri);this.file.setLabel(Qge(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(C("referencesCount","{0} references",r)):this.badge.setTitleFormat(C("referenceCount","{0} reference",r))}};pU=z8([bO(1,wR),bO(2,xr)],pU);let CO=class Jge{constructor(e){this._instantiationService=e,this.templateId=Jge.id}renderTemplate(e){return this._instantiationService.createInstance(pU,e)}renderElement(e,t,n){n.set(e.element,s8(e.filterData))}disposeTemplate(e){e.dispose()}};CO.id="FileReferencesRenderer";CO=z8([bO(0,Nn)],CO);class bqe{constructor(e){this.label=new V1(e)}set(e,t){var n;const r=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!r||!r.value)this.label.set(`${fc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:s}=r;t&&!Yh.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,s8(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[s]))}}}class PR{constructor(){this.templateId=PR.id}renderTemplate(e){return new bqe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}PR.id="OneReferenceRenderer";class Cqe{getWidgetAriaLabel(){return C("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var yqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},tie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class U8{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Je,this._callOnModelChange=new Je,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let o=0,s=e.children.length;o<s;o++){let a=e.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:U8.DecorationOptions}),n.push(o))}const r=this._editor.deltaDecorations([],t);for(let o=0;o<r.length;o++)this._decorations.set(r[o],e.children[n[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,r]of this._decorations){const o=t.getDecorationRange(n);if(!o)continue;let s=!1;if(!Q.equalsRange(o,r.range)){if(Q.spansMultipleLines(o))s=!0;else{const a=r.range.endColumn-r.range.startColumn,u=o.endColumn-o.startColumn;a!==u&&(s=!0)}s?(this._decorationIgnoreSet.add(r.id),e.push(n)):r.range=o}}for(let n=0,r=e.length;n<r;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}U8.DecorationOptions=Ln.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class wqe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const r=JSON.parse(e);t=r.ratio,n=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class Sqe extends _z{}let mU=class extends e5{constructor(e,t,n,r,o,s,a,u,d,h,f,p){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=o,this._instantiationService=s,this._peekViewService=a,this._uriLabel=u,this._undoRedoService=d,this._keybindingService=h,this._modeService=f,this._languageConfigurationService=p,this._disposeOnNewModel=new Je,this._callOnDispose=new Je,this._onDidSelectReference=new Ce,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new dr(0,0),this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),ri(this._preview),ri(this._previewNotAvailableMessage),ri(this._tree),ri(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(fqe)||we.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(hqe)||we.transparent,primaryHeadingColor:e.getColor(Zge),secondaryHeadingColor:e.getColor(Xge)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Be(e,Ge("div.messages")),ja(this._messageContainer),this._splitView=new Ahe(e,{orientation:1}),this._previewContainer=Be(e,Ge("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(G1,this._previewContainer,t,this.editor),ja(this._previewContainer),this._previewNotAvailableMessage=new El(C("missingPreviewMessage","no preview available"),El.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=Be(e,Ge("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Cqe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(gU),identityProvider:new vqe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:gqe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(ts(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Sqe,"ReferencesWidget",this._treeContainer,new _qe,[this._instantiationService.createInstance(CO),this._instantiationService.createInstance(PR)],this._instantiationService.createInstance(fU),n),this._splitView.addView({onDidChange:Mt.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},M3.Distribute),this._splitView.addView({onDidChange:Mt.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},M3.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let r=(o,s)=>{o instanceof I0&&(s==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:s,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?r(o.element,"side"):o.editorOptions.pinned?r(o.element,"goto"):r(o.element,"show")}),ja(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new dr(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=C("noResults","No results"),Lu(this._messageContainer),Promise.resolve(void 0)):(ja(this._messageContainer),this._decorationsManager=new U8(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Lu(this._treeContainer),Lu(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof I0)return e;if(e instanceof vO&&e.children.length>0)return e.children[0]}revealReference(e){return tie(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return tie(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==In.inMemory?this.setTitle(Rce(e.uri),this._uriLabel.getUriLabel(zG(e.uri))):this.setTitle(C("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const r=yield n;if(!this._model){r.dispose();return}ri(this._previewModelReference);const o=r.object;if(o){const s=this._preview.getModel()===o.textEditorModel?0:1,a=Q.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,s)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()})}};mU=yqe([Wg(3,xr),Wg(4,Ja),Wg(5,Nn),Wg(6,Yge),Wg(7,wR),Wg(8,gR),Wg(9,Er),Wg(10,Fs),Wg(11,fR)],mU);var Eqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ny=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},nie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const PC=new Dt("referenceSearchVisible",!1,C("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let k0=class _U{constructor(e,t,n,r,o,s,a,u){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=o,this._instantiationService=s,this._storageService=a,this._configurationService=u,this._disposables=new Je,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=PC.bindTo(n)}static get(e){return e.getContribution(_U.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",s=wqe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(mU,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(C("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(u=>{let{element:d,kind:h}=u;if(d)switch(h){case"open":(u.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(d,!1,!1);break;case"side":this.openReference(d,!0,!1);break;case"goto":n?this._gotoReference(d):this.openReference(d,!1,!0);break}}));const a=++this._requestIdPool;t.then(u=>{var d;if(a!==this._requestIdPool||!this._widget){u.dispose();return}return(d=this._model)===null||d===void 0||d.dispose(),this._model=u,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(C("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,f=new Ee(e.startLineNumber,e.startColumn),p=this._model.nearestReference(h,f);if(p)return this._widget.setSelection(p).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},u=>{this._notificationService.error(u)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return nie(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const r=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(r),yield this._gotoReference(r),o?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()})}revealReference(e){return nie(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=Q.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var r;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const o=_U.get(n),s=this._model.clone();this.closeWidget(),n.focus(),o.toggleWidget(t,cs(a=>Promise.resolve(s)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},n=>{this._ignoreModelChangeEvent=!1,gn(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:r,range:o}=e;this._editorService.openCodeEditor({resource:r,options:{selection:o,pinned:n}},this._editor,t)}};k0.ID="editor.contrib.referencesController";k0=Eqe([ny(2,cn),ny(3,Ii),ny(4,po),ny(5,Nn),ny(6,Dg),ny(7,ir)],k0);function FC(i,e){const t=cqe(i);if(!t)return;let n=k0.get(t);n&&e(n)}Os.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Zr(2089,60),when:_t.or(PC,xl.inPeekEditor),handler(i){FC(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Os.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:_t.or(PC,xl.inPeekEditor),handler(i){FC(i,e=>{e.goToNextOrPreviousReference(!0)})}});Os.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:_t.or(PC,xl.inPeekEditor),handler(i){FC(i,e=>{e.goToNextOrPreviousReference(!1)})}});Xn.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Xn.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Xn.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Xn.registerCommand("closeReferenceSearch",i=>FC(i,e=>e.closeWidget()));Os.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:_t.and(xl.inPeekEditor,_t.not("config.editor.stablePeek"))});Os.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:_t.and(PC,_t.not("config.editor.stablePeek"))});Os.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:_t.and(PC,Vhe),handler(i){var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&FC(i,r=>r.revealReference(n[0]))}});Os.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_t.and(PC,Vhe),handler(i){var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&FC(i,r=>r.openReference(n[0],!0,!0))}});Xn.registerCommand("openReference",i=>{var e;const n=(e=i.get(bc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&FC(i,r=>r.openReference(n[0],!1,!0))});var epe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},a2=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const GY=new Dt("hasSymbols",!1,C("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),j8=gi("ISymbolNavigationService");let vU=class{constructor(e,t,n,r){this._editorService=t,this._notificationService=n,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=GY.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new bU(this._editorService),r=n.onDidChange(o=>{if(this._ignoreEditorChange)return;const s=this._editorService.getActiveCodeEditor();if(!s)return;const a=s.getModel(),u=s.getPosition();if(!a||!u)return;let d=!1,h=!1;for(const f of t.references)if(Oce(f.uri,a.uri))d=!0,h=h||Q.containsPosition(f.range,u);else if(d)break;(!d||!h)&&this.reset()});this._currentState=t0(n,r)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:Q.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?C("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):C("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};vU=epe([a2(0,cn),a2(1,Ii),a2(2,po),a2(3,Er)],vU);U0(j8,vU,!0);nt(new class extends Ps{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:GY,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(j8).revealNext(e)}});Os.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:GY,primary:9,handler(i){i.get(j8).reset()}});let bU=class{constructor(e){this._listener=new Map,this._disposables=new Je,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),ri(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,t0(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};bU=epe([a2(0,Ii)],bU);var tpe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function FR(i,e,t,n){const o=t.ordered(i).map(s=>Promise.resolve(n(s,i,e)).then(void 0,a=>{Ms(a)}));return Promise.all(o).then(s=>{const a=[];for(let u of s)Array.isArray(u)?a.push(...u):u&&a.push(u);return a})}function qY(i,e,t){return FR(i,e,kA,(n,r,o)=>n.provideDefinition(r,o,t))}function npe(i,e,t){return FR(i,e,YF,(n,r,o)=>n.provideDeclaration(r,o,t))}function ipe(i,e,t){return FR(i,e,ZF,(n,r,o)=>n.provideImplementation(r,o,t))}function rpe(i,e,t){return FR(i,e,XF,(n,r,o)=>n.provideTypeDefinition(r,o,t))}function K8(i,e,t,n){return FR(i,e,KF,(r,o,s)=>tpe(this,void 0,void 0,function*(){const a=yield r.provideReferences(o,s,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const u=yield r.provideReferences(o,s,{includeDeclaration:!1},n);return u&&u.length===1?u:a}))}function BR(i){return tpe(this,void 0,void 0,function*(){const e=yield i(),t=new yl(e,""),n=t.references.map(r=>r.link);return t.dispose(),n})}Sg("_executeDefinitionProvider",(i,e)=>BR(()=>qY(i,e,Fn.None)));Sg("_executeDeclarationProvider",(i,e)=>BR(()=>npe(i,e,Fn.None)));Sg("_executeImplementationProvider",(i,e)=>BR(()=>ipe(i,e,Fn.None)));Sg("_executeTypeDefinitionProvider",(i,e)=>BR(()=>rpe(i,e,Fn.None)));Sg("_executeReferenceProvider",(i,e)=>BR(()=>K8(i,e,!1,Fn.None)));var Jc=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},J6,eW,tW,nW,iW,rW,oW,sW;ra.appendMenuItem(Rt.EditorContext,{submenu:Rt.EditorContextPeek,title:C("peek.submenu","Peek"),group:"navigation",order:100});const ope=new Set;function uf(i){const e=new i;return Pue(e),ope.add(e.id),e}class nE extends Lt{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(po),r=e.get(Ii),o=e.get($p),s=e.get(j8),a=t.getModel(),u=t.getPosition(),d=new YA(t,5),h=aG(this._getLocationModel(a,u,d.token),d.token).then(f=>Jc(this,void 0,void 0,function*(){if(!f||d.token.isCancellationRequested)return;Is(f.ariaMessage);let p;if(f.referenceAt(a.uri,u)){const v=this._getAlternativeCommand(t);v!==this.id&&ope.has(v)&&(p=t.getAction(v))}const m=f.references.length;if(m===0){if(!this._configuration.muteMessage){const v=a.getWordAtPosition(u);Bu.get(t).showMessage(this._getNoResultFoundMessage(v),u)}}else if(m===1&&p)p.run();else return this._onResult(r,s,t,f)}),f=>{n.error(f)}).finally(()=>{d.dispose()});return o.showWhile(h,250),h}_onResult(e,t,n,r){return Jc(this,void 0,void 0,function*(){const o=this._getGoToPreference(n);if(!(n instanceof G1)&&(this._configuration.openInPeek||o==="peek"&&r.references.length>1))this._openInPeek(n,r);else{const s=r.firstReference(),a=r.references.length>1&&o==="gotoAndPeek",u=yield this._openReference(n,e,s,this._configuration.openToSide,!a);a&&u?this._openInPeek(u,r):r.dispose(),o==="goto"&&t.put(s)}})}_openReference(e,t,n,r,o){return Jc(this,void 0,void 0,function*(){let s;if(uNe(n)&&(s=n.targetSelectionRange),s||(s=n.range),!s)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:Q.collapseToStart(s),selectionRevealType:3}},e,r);if(a){if(o){const u=a.getModel(),d=a.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===u&&a.deltaDecorations(d,[])},350)}return a}})}_openInPeek(e,t){let n=k0.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),cs(r=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class G8 extends nE{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield qY(e,t,n),C("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("noResultWord","No definition found for '{0}'",e.word):C("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const spe=PS&&!rG?2118:70;uf((J6=class CU extends G8{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:CU.id,label:C("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:spe,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Xn.registerCommandAlias("editor.action.goToDeclaration",CU.id)}},J6.id="editor.action.revealDefinition",J6));uf((eW=class yU extends G8{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:yU.id,label:C("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,spe),weight:100}}),Xn.registerCommandAlias("editor.action.openDeclarationToTheSide",yU.id)}},eW.id="editor.action.revealDefinitionAside",eW));uf((tW=class wU extends G8{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:wU.id,label:C("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:_t.and(de.hasDefinitionProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Rt.EditorContextPeek,group:"peek",order:2}}),Xn.registerCommandAlias("editor.action.previewDeclaration",wU.id)}},tW.id="editor.action.peekDefinition",tW));class ape extends nE{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield npe(e,t,n),C("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}uf((nW=class lpe extends ape{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:lpe.id,label:C("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:_t.and(de.hasDeclarationProvider,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}},nW.id="editor.action.revealDeclaration",nW));uf(class extends ape{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:C("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:_t.and(de.hasDeclarationProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Rt.EditorContextPeek,group:"peek",order:3}})}});class upe extends nE{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield rpe(e,t,n),C("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):C("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}uf((iW=class cpe extends upe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:cpe.ID,label:C("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},iW.ID="editor.action.goToTypeDefinition",iW));uf((rW=class dpe extends upe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:dpe.ID,label:C("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Rt.EditorContextPeek,group:"peek",order:4}})}},rW.ID="editor.action.peekTypeDefinition",rW));class hpe extends nE{_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield ipe(e,t,n),C("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):C("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}uf((oW=class fpe extends hpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:fpe.ID,label:C("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:_t.and(de.hasImplementationProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},oW.ID="editor.action.goToImplementation",oW));uf((sW=class gpe extends hpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:gpe.ID,label:C("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:_t.and(de.hasImplementationProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Rt.EditorContextPeek,group:"peek",order:5}})}},sW.ID="editor.action.peekImplementation",sW));class ppe extends nE{_getNoResultFoundMessage(e){return e?C("references.no","No references found for '{0}'",e.word):C("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}uf(class extends ppe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:C("goToReferences.label","Go to References"),alias:"Go to References",precondition:_t.and(de.hasReferenceProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield K8(e,t,!0,n),C("ref.title","References"))})}});uf(class extends ppe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:C("references.action.label","Peek References"),alias:"Peek References",precondition:_t.and(de.hasReferenceProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Rt.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(yield K8(e,t,!1,n),C("ref.title","References"))})}});class Lqe extends nE{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:C("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:_t.and(xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return Jc(this,void 0,void 0,function*(){return new yl(this._references,C("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&C("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Xn.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:rn},{name:"position",description:"The position at which to start",constraint:Ee.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,r,o,s)=>Jc(void 0,void 0,void 0,function*(){Yi(rn.isUri(e)),Yi(Ee.isIPosition(t)),Yi(Array.isArray(n)),Yi(typeof r>"u"||typeof r=="string"),Yi(typeof s>"u"||typeof s=="boolean");const a=i.get(Ii),u=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(cg(u))return u.setPosition(t),u.revealPositionInCenterIfOutsideViewport(t,0),u.invokeWithinContext(d=>{const h=new class extends Lqe{_getNoResultFoundMessage(f){return o||super._getNoResultFoundMessage(f)}}({muteMessage:!o,openInPeek:!!s,openToSide:!1},n,r);d.get(Nn).invokeFunction(h.run.bind(h),u)})})});Xn.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:rn},{name:"position",description:"The position at which to start",constraint:Ee.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,r)=>Jc(void 0,void 0,void 0,function*(){i.get(Ir).executeCommand("editor.action.goToLocations",e,t,n,r,void 0,!0)})});Xn.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{Yi(rn.isUri(e)),Yi(Ee.isIPosition(t));const n=i.get(Ii);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(r=>{if(!cg(r)||!r.hasModel())return;const o=k0.get(r);if(!o)return;const s=cs(u=>K8(r.getModel(),Ee.lift(t),!1,u).then(d=>new yl(d,C("ref.title","References")))),a=new Q(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(a,s,!1))})}});Xn.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");ra.appendMenuItems([{id:Rt.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:C({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Rt.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:C({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Rt.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:C({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Rt.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:C({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Rt.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:C({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var xqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},iie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let q1=class l2{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new Je,this.toUnhookForKeyboard=new Je,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let r=new Uge(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(([o,s])=>{this.startFindDefinitionFromMouse(o,_l(s))})),this.toUnhook.add(r.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},s=>{this.removeLinkDecorations(),gn(s)})})),this.toUnhook.add(r.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(l2.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let r=new Ode(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=cs(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!r.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Rp().appendText(C("multipleResults","Click to show {0} definitions.",o.length)));else{let s=o[0];if(!s.uri)return;this.textModelResolverService.createModelReference(s.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:u}}=a,{startLineNumber:d}=s.range;if(d<1||d>u.getLineCount()){a.dispose();return}const h=this.getPreviewValue(u,d,s);let f;s.originSelectionRange?f=Q.lift(s.originSelectionRange):f=new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const p=this.modeService.getModeIdByFilepathOrFirstLine(u.uri);this.addDecoration(f,new Rp().appendCodeblock(p||"",h)),a.dispose()})}}).then(void 0,gn)}getPreviewValue(e,t,n){let r=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return r.endLineNumber-r.startLineNumber>=l2.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const u=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,u)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+l2.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<r;o++){let s=e.getLineFirstNonWhitespaceColumn(o);if(n===s)break}return new Q(t,1,o+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+l2.MAX_SOURCE_PREVIEW_LINES),r=[];let o=!0,s=e.bracketPairs.findNextBracket(new Ee(t,1));for(;s!==null;){if(r.length===0)r.push(s);else{const h=r[r.length-1];if(h.open[0]===s.open[0]&&h.isOpen&&!s.isOpen?r.pop():r.push(s),r.length===0)if(o)o=!1;else return new Q(t,1,s.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let u=s.range.endLineNumber,d=s.range.endColumn;if(a===s.range.endColumn&&(u++,d=1),u>n)return new Q(t,1,n+1,1);s=e.bracketPairs.findNextBracket(new Ee(u,d))}return new Q(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&kA.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?qY(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const r=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new G8({openToSide:t,openInPeek:r,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(cn);return xl.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};q1.ID="editor.contrib.gotodefinitionatposition";q1.MAX_SOURCE_PREVIEW_LINES=8;q1=xqe([iie(1,Ja),iie(2,Fs)],q1);ki(q1.ID,q1);fr((i,e)=>{const t=i.getColor(gce);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const dP=Ge;class mpe extends Oe{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new pR(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class YY extends Oe{constructor(e,t,n){super(),this.actionContainer=Be(e,dP("div.action-container")),this.action=Be(this.actionContainer,dP("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Be(this.action,dP(`span.icon.${t.iconClass}`));const r=Be(this.action,dP("span"));r.textContent=n?`${t.label} (${n})`:t.label,this._register(qe(this.actionContainer,Ht.MOUSE_DOWN,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new YY(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class Dqe{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Ce,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Ce,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const Fh=Ge;class Tqe extends Oe{constructor(e,t,n){super(),this.model=t,this.domNode=Fh(".colorpicker-header"),Be(e,this.domNode),this.pickedColorNode=Be(this.domNode,Fh(".picked-color"));const r=C("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",r);const o=Be(this.domNode,Fh(".original-color"));o.style.backgroundColor=we.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(I1)||we.white,this._register(fr((s,a)=>{this.backgroundColor=s.getColor(I1)||we.white})),this._register(qe(this.pickedColorNode,Ht.CLICK,()=>this.model.selectNextColorPresentation())),this._register(qe(o,Ht.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=we.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=we.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Fh(".codicon.codicon-color-mode"))}}class Iqe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=Fh(".colorpicker-body"),Be(e,this.domNode),this.saturationBox=new kqe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new Nqe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Aqe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new we(new qf(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new we(new qf(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new we(new qf(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class kqe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Fh(".saturation-wrap"),Be(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Be(this.domNode,this.canvas),this.selection=Fh(".saturation-selection"),Be(this.domNode,this.selection),this.layout(),this._register(cG(this.domNode,r=>this.onMouseDown(r))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new EC);const t=Us(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,VS,r=>this.onDidChangePosition(r.posx-t.left,r.posy-t.top),()=>null);const n=sue(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,r),this._onDidChange.fire({s:n,v:r})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new we(new qf(e.h,1,1,1)),n=this.canvas.getContext("2d"),r=n.createLinearGradient(0,0,this.canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");const o=n.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=we.Format.CSS.format(t),n.fill(),n.fillStyle=r,n.fill(),n.fillStyle=o,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class _pe extends Oe{constructor(e,t){super(),this.model=t,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Ce,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Be(e,Fh(".strip")),this.overlay=Be(this.domNode,Fh(".overlay")),this.slider=Be(this.domNode,Fh(".slider")),this.slider.style.top="0px",this._register(cG(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new EC),n=Us(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,VS,o=>this.onDidChangeTop(o.posy-n.top),()=>null);const r=sue(document,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class Nqe extends _pe{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:r}=e.rgba,o=new we(new fi(t,n,r,1)),s=new we(new fi(t,n,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class Aqe extends _pe{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class Oqe extends Vu{constructor(e,t,n,r){super(),this.model=t,this.pixelRatio=n,this._register(nG(()=>this.layout()));const o=Fh(".colorpicker-widget");e.appendChild(o);const s=new Tqe(o,this.model,r);this.body=new Iqe(o,this.model,this.pixelRatio),this._register(s),this._register(this.body)}layout(){this.body.layout()}}var Rqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Mqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Pqe{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let SU=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Yo.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return rie(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const r=K1.get(this._editor);for(const o of t){if(!r.isColorDecorationId(o.id))continue;const s=r.getColorData(o.range.getStartPosition());if(s)return[yield this._createColorHover(this._editor.getModel(),s.colorInfo,s.provider)]}return[]})}_createColorHover(e,t,n){return rie(this,void 0,void 0,function*(){const r=e.getValueInRange(t.range),{red:o,green:s,blue:a,alpha:u}=t.color,d=new fi(Math.round(o*255),Math.round(s*255),Math.round(a*255),u),h=new we(d),f=yield Xne(e,t,n,Fn.None),p=new Dqe(h,[],0);return p.colorPresentations=f||[],p.guessColorPresentation(h,r),new Pqe(this,Q.lift(t.range),p,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return Oe.None;const r=new Je,o=e[0],s=this._editor.getModel(),a=o.model,u=r.add(new Oqe(t,a,this._editor.getOption(128),this._themeService));let d=new Q(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);const h=()=>{let p,m;if(a.presentation.textEdit){p=[a.presentation.textEdit],m=new Q(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const v=this._editor.getModel()._setTrackedRange(null,m,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p),m=this._editor.getModel()._getTrackedRange(v)||m}else p=[{identifier:null,range:d,text:a.presentation.label,forceMoveMarkers:!1}],m=d.setEndPosition(d.endLineNumber,d.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p);a.presentation.additionalTextEdits&&(p=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",p),this._hover.hide()),this._editor.pushUndoStop(),d=m},f=p=>Xne(s,{range:d,color:{red:p.rgba.r/255,green:p.rgba.g/255,blue:p.rgba.b/255,alpha:p.rgba.a}},o.provider,Fn.None).then(m=>{a.colorPresentations=m||[]});return r.add(a.onColorFlushed(p=>{f(p).then(h)})),r.add(a.onDidChangeColor(f)),this._hover.setColorPicker(u),r}};SU=Rqe([Mqe(2,xr)],SU);var Fqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Bqe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,u){s=i[o](s),r(a,u,s.done,s.value)})}}function r(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}};class vpe{constructor(e,t,n,r,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new tr(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new tr(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new tr(()=>this._showLoadingMessage(),0),this._asyncIterable=null,this._asyncIterableDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=r}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=tLe(e=>this._computer.computeAsync(e)),Fqe(this,void 0,void 0,function*(){var e,t;try{try{for(var n=Bqe(this._asyncIterable),r;r=yield n.next(),!r.done;){const o=r.value;o&&(this._computer.onResult([o],!1),this._onProgress())}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,this._withAsyncResult()}catch(o){this._onError(o)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncIterableDone?(this._state=0,this._onComplete()):(this._state=3,this._onProgress())}_showLoadingMessage(){this._state===3&&(this._state=4,this._onProgress())}_withAsyncResult(){(this._state===3||this._state===4)&&(this._state=0,this._onComplete())}_onComplete(){this._completeCallback(this._computer.getResult())}_onError(e){this._errorCallback?this._errorCallback(e):gn(e)}_onProgress(){this._state===4?this._progressCallback(this._computer.getResultWithLoadingMessage()):this._progressCallback(this._computer.getResult())}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._state=0}}class oie{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class aW{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function Wqe(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var Vqe=Object.hasOwnProperty,sie=Object.setPrototypeOf,Hqe=Object.isFrozen,$qe=Object.getPrototypeOf,zqe=Object.getOwnPropertyDescriptor,Dl=Object.freeze,Pp=Object.seal,Uqe=Object.create,bpe=typeof Reflect<"u"&&Reflect,t5=bpe.apply,EU=bpe.construct;t5||(t5=function(e,t,n){return e.apply(t,n)});Dl||(Dl=function(e){return e});Pp||(Pp=function(e){return e});EU||(EU=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(Wqe(t))))});var jqe=sf(Array.prototype.forEach),aie=sf(Array.prototype.pop),BN=sf(Array.prototype.push),pb=sf(String.prototype.toLowerCase),lie=sf(String.prototype.match),bv=sf(String.prototype.replace),Kqe=sf(String.prototype.indexOf),Gqe=sf(String.prototype.trim),Vg=sf(RegExp.prototype.test),uie=qqe(TypeError);function sf(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return t5(i,e,n)}}function qqe(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return EU(i,t)}}function Vi(i,e){sie&&sie(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var r=pb(n);r!==n&&(Hqe(e)||(e[t]=r),n=r)}i[n]=!0}return i}function lb(i){var e=Uqe(null),t=void 0;for(t in i)t5(Vqe,i,[t])&&(e[t]=i[t]);return e}function hP(i,e){for(;i!==null;){var t=zqe(i,e);if(t){if(t.get)return sf(t.get);if(typeof t.value=="function")return sf(t.value)}i=$qe(i)}function n(r){return console.warn("fallback value for",r),null}return n}var cie=Dl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lW=Dl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),uW=Dl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Yqe=Dl(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cW=Dl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Zqe=Dl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),die=Dl(["#text"]),hie=Dl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),dW=Dl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fie=Dl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fP=Dl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xqe=Pp(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Qqe=Pp(/<%[\s\S]*|[\s\S]*%>/gm),Jqe=Pp(/^data-[\-\w.\u00B7-\uFFFF]/),eYe=Pp(/^aria-[\-\w]+$/),tYe=Pp(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nYe=Pp(/^(?:\w+script|data):/i),iYe=Pp(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function pf(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var rYe=function(){return typeof window>"u"?null:window},oYe=function(e,t){if((typeof e>"u"?"undefined":u2(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Cpe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rYe(),e=function(J){return Cpe(J)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,r=i.DocumentFragment,o=i.HTMLTemplateElement,s=i.Node,a=i.Element,u=i.NodeFilter,d=i.NamedNodeMap,h=d===void 0?i.NamedNodeMap||i.MozNamedAttrMap:d,f=i.Text,p=i.Comment,m=i.DOMParser,v=i.trustedTypes,b=a.prototype,E=hP(b,"cloneNode"),S=hP(b,"nextSibling"),w=hP(b,"childNodes"),L=hP(b,"parentNode");if(typeof o=="function"){var A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}var N=oYe(v,t),H=N&&Jn?N.createHTML(""):"",M=n,R=M.implementation,q=M.createNodeIterator,X=M.createDocumentFragment,$=M.getElementsByTagName,I=t.importNode,O={};try{O=lb(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof L=="function"&&R&&typeof R.createHTMLDocument<"u"&&O!==9;var W=Xqe,j=Qqe,U=Jqe,G=eYe,z=nYe,k=iYe,K=tYe,fe=null,ne=Vi({},[].concat(pf(cie),pf(lW),pf(uW),pf(cW),pf(die))),be=null,De=Vi({},[].concat(pf(hie),pf(dW),pf(fie),pf(fP))),Ve=null,rt=null,At=!0,Re=!0,ut=!1,Ct=!1,Xe=!1,on=!1,Kt=!1,dn=!1,Sn=!1,Wn=!0,Jn=!1,oi=!0,jn=!0,Pt=!1,pn={},Ci=null,Ie=Vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fe=null,pt=Vi({},["audio","video","img","source","image","track"]),at=null,bt=Vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yi="http://www.w3.org/1998/Math/MathML",Vt="http://www.w3.org/2000/svg",It="http://www.w3.org/1999/xhtml",Gt=It,qt=!1,Bt=null,gr=n.createElement("form"),ei=function(J){Bt&&Bt===J||((!J||(typeof J>"u"?"undefined":u2(J))!=="object")&&(J={}),J=lb(J),fe="ALLOWED_TAGS"in J?Vi({},J.ALLOWED_TAGS):ne,be="ALLOWED_ATTR"in J?Vi({},J.ALLOWED_ATTR):De,at="ADD_URI_SAFE_ATTR"in J?Vi(lb(bt),J.ADD_URI_SAFE_ATTR):bt,Fe="ADD_DATA_URI_TAGS"in J?Vi(lb(pt),J.ADD_DATA_URI_TAGS):pt,Ci="FORBID_CONTENTS"in J?Vi({},J.FORBID_CONTENTS):Ie,Ve="FORBID_TAGS"in J?Vi({},J.FORBID_TAGS):{},rt="FORBID_ATTR"in J?Vi({},J.FORBID_ATTR):{},pn="USE_PROFILES"in J?J.USE_PROFILES:!1,At=J.ALLOW_ARIA_ATTR!==!1,Re=J.ALLOW_DATA_ATTR!==!1,ut=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=J.SAFE_FOR_TEMPLATES||!1,Xe=J.WHOLE_DOCUMENT||!1,dn=J.RETURN_DOM||!1,Sn=J.RETURN_DOM_FRAGMENT||!1,Wn=J.RETURN_DOM_IMPORT!==!1,Jn=J.RETURN_TRUSTED_TYPE||!1,Kt=J.FORCE_BODY||!1,oi=J.SANITIZE_DOM!==!1,jn=J.KEEP_CONTENT!==!1,Pt=J.IN_PLACE||!1,K=J.ALLOWED_URI_REGEXP||K,Gt=J.NAMESPACE||It,Ct&&(Re=!1),Sn&&(dn=!0),pn&&(fe=Vi({},[].concat(pf(die))),be=[],pn.html===!0&&(Vi(fe,cie),Vi(be,hie)),pn.svg===!0&&(Vi(fe,lW),Vi(be,dW),Vi(be,fP)),pn.svgFilters===!0&&(Vi(fe,uW),Vi(be,dW),Vi(be,fP)),pn.mathMl===!0&&(Vi(fe,cW),Vi(be,fie),Vi(be,fP))),J.ADD_TAGS&&(fe===ne&&(fe=lb(fe)),Vi(fe,J.ADD_TAGS)),J.ADD_ATTR&&(be===De&&(be=lb(be)),Vi(be,J.ADD_ATTR)),J.ADD_URI_SAFE_ATTR&&Vi(at,J.ADD_URI_SAFE_ATTR),J.FORBID_CONTENTS&&(Ci===Ie&&(Ci=lb(Ci)),Vi(Ci,J.FORBID_CONTENTS)),jn&&(fe["#text"]=!0),Xe&&Vi(fe,["html","head","body"]),fe.table&&(Vi(fe,["tbody"]),delete Ve.tbody),Dl&&Dl(J),Bt=J)},He=Vi({},["mi","mo","mn","ms","mtext"]),Ba=Vi({},["foreignobject","desc","title","annotation-xml"]),Vn=Vi({},lW);Vi(Vn,uW),Vi(Vn,Yqe);var ti=Vi({},cW);Vi(ti,Zqe);var qs=function(J){var ve=L(J);(!ve||!ve.tagName)&&(ve={namespaceURI:It,tagName:"template"});var $e=pb(J.tagName),Me=pb(ve.tagName);if(J.namespaceURI===Vt)return ve.namespaceURI===It?$e==="svg":ve.namespaceURI===yi?$e==="svg"&&(Me==="annotation-xml"||He[Me]):!!Vn[$e];if(J.namespaceURI===yi)return ve.namespaceURI===It?$e==="math":ve.namespaceURI===Vt?$e==="math"&&Ba[Me]:!!ti[$e];if(J.namespaceURI===It){if(ve.namespaceURI===Vt&&!Ba[Me]||ve.namespaceURI===yi&&!He[Me])return!1;var dt=Vi({},["title","style","font","a","script"]);return!ti[$e]&&(dt[$e]||!Vn[$e])}return!1},vn=function(J){BN(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{try{J.outerHTML=H}catch{J.remove()}}},rr=function(J,ve){try{BN(e.removed,{attribute:ve.getAttributeNode(J),from:ve})}catch{BN(e.removed,{attribute:null,from:ve})}if(ve.removeAttribute(J),J==="is"&&!be[J])if(dn||Sn)try{vn(ve)}catch{}else try{ve.setAttribute(J,"")}catch{}},sl=function(J){var ve=void 0,$e=void 0;if(Kt)J="<remove></remove>"+J;else{var Me=lie(J,/^[\r\n\t ]+/);$e=Me&&Me[0]}var dt=N?N.createHTML(J):J;if(Gt===It)try{ve=new m().parseFromString(dt,"text/html")}catch{}if(!ve||!ve.documentElement){ve=R.createDocument(Gt,"template",null);try{ve.documentElement.innerHTML=qt?"":dt}catch{}}var Yt=ve.body||ve.documentElement;return J&&$e&&Yt.insertBefore(n.createTextNode($e),Yt.childNodes[0]||null),Gt===It?$.call(ve,Xe?"html":"body")[0]:Xe?ve.documentElement:Yt},qi=function(J){return q.call(J.ownerDocument||J,J,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Ye=function(J){return J instanceof f||J instanceof p?!1:typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof h)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"},is=function(J){return(typeof s>"u"?"undefined":u2(s))==="object"?J instanceof s:J&&(typeof J>"u"?"undefined":u2(J))==="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},ke=function(J,ve,$e){B[J]&&jqe(B[J],function(Me){Me.call(e,ve,$e,Bt)})},Le=function(J){var ve=void 0;if(ke("beforeSanitizeElements",J,null),Ye(J)||lie(J.nodeName,/[\u0080-\uFFFF]/))return vn(J),!0;var $e=pb(J.nodeName);if(ke("uponSanitizeElement",J,{tagName:$e,allowedTags:fe}),!is(J.firstElementChild)&&(!is(J.content)||!is(J.content.firstElementChild))&&Vg(/<[/\w]/g,J.innerHTML)&&Vg(/<[/\w]/g,J.textContent)||$e==="select"&&Vg(/<template/i,J.innerHTML))return vn(J),!0;if(!fe[$e]||Ve[$e]){if(jn&&!Ci[$e]){var Me=L(J)||J.parentNode,dt=w(J)||J.childNodes;if(dt&&Me)for(var Yt=dt.length,T=Yt-1;T>=0;--T)Me.insertBefore(E(dt[T],!0),S(J))}return vn(J),!0}return J instanceof a&&!qs(J)||($e==="noscript"||$e==="noembed")&&Vg(/<\/no(script|embed)/i,J.innerHTML)?(vn(J),!0):(Ct&&J.nodeType===3&&(ve=J.textContent,ve=bv(ve,W," "),ve=bv(ve,j," "),J.textContent!==ve&&(BN(e.removed,{element:J.cloneNode()}),J.textContent=ve)),ke("afterSanitizeElements",J,null),!1)},Ae=function(J,ve,$e){if(oi&&(ve==="id"||ve==="name")&&($e in n||$e in gr))return!1;if(!(Re&&!rt[ve]&&Vg(U,ve))){if(!(At&&Vg(G,ve))){if(!be[ve]||rt[ve])return!1;if(!at[ve]){if(!Vg(K,bv($e,k,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&J!=="script"&&Kqe($e,"data:")===0&&Fe[J])){if(!(ut&&!Vg(z,bv($e,k,"")))){if($e)return!1}}}}}}return!0},se=function(J){var ve=void 0,$e=void 0,Me=void 0,dt=void 0;ke("beforeSanitizeAttributes",J,null);var Yt=J.attributes;if(Yt){var T={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(dt=Yt.length;dt--;){ve=Yt[dt];var F=ve,te=F.name,ie=F.namespaceURI;if($e=Gqe(ve.value),Me=pb(te),T.attrName=Me,T.attrValue=$e,T.keepAttr=!0,T.forceKeepAttr=void 0,ke("uponSanitizeAttribute",J,T),$e=T.attrValue,!T.forceKeepAttr&&(rr(te,J),!!T.keepAttr)){if(Vg(/\/>/i,$e)){rr(te,J);continue}Ct&&($e=bv($e,W," "),$e=bv($e,j," "));var me=J.nodeName.toLowerCase();if(Ae(me,Me,$e))try{ie?J.setAttributeNS(ie,te,$e):J.setAttribute(te,$e),aie(e.removed)}catch{}}}ke("afterSanitizeAttributes",J,null)}},ae=function pe(J){var ve=void 0,$e=qi(J);for(ke("beforeSanitizeShadowDOM",J,null);ve=$e.nextNode();)ke("uponSanitizeShadowNode",ve,null),!Le(ve)&&(ve.content instanceof r&&pe(ve.content),se(ve));ke("afterSanitizeShadowDOM",J,null)};return e.sanitize=function(pe,J){var ve=void 0,$e=void 0,Me=void 0,dt=void 0,Yt=void 0;if(qt=!pe,qt&&(pe="<!-->"),typeof pe!="string"&&!is(pe)){if(typeof pe.toString!="function")throw uie("toString is not a function");if(pe=pe.toString(),typeof pe!="string")throw uie("dirty is not a string, aborting")}if(!e.isSupported){if(u2(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof pe=="string")return i.toStaticHTML(pe);if(is(pe))return i.toStaticHTML(pe.outerHTML)}return pe}if(on||ei(J),e.removed=[],typeof pe=="string"&&(Pt=!1),!Pt)if(pe instanceof s)ve=sl("<!---->"),$e=ve.ownerDocument.importNode(pe,!0),$e.nodeType===1&&$e.nodeName==="BODY"||$e.nodeName==="HTML"?ve=$e:ve.appendChild($e);else{if(!dn&&!Ct&&!Xe&&pe.indexOf("<")===-1)return N&&Jn?N.createHTML(pe):pe;if(ve=sl(pe),!ve)return dn?null:H}ve&&Kt&&vn(ve.firstChild);for(var T=qi(Pt?pe:ve);Me=T.nextNode();)Me.nodeType===3&&Me===dt||Le(Me)||(Me.content instanceof r&&ae(Me.content),se(Me),dt=Me);if(dt=null,Pt)return pe;if(dn){if(Sn)for(Yt=X.call(ve.ownerDocument);ve.firstChild;)Yt.appendChild(ve.firstChild);else Yt=ve;return Wn&&(Yt=I.call(t,Yt,!0)),Yt}var F=Xe?ve.outerHTML:ve.innerHTML;return Ct&&(F=bv(F,W," "),F=bv(F,j," ")),N&&Jn?N.createHTML(F):F},e.setConfig=function(pe){ei(pe),on=!0},e.clearConfig=function(){Bt=null,on=!1},e.isValidAttribute=function(pe,J,ve){Bt||ei({});var $e=pb(pe),Me=pb(J);return Ae($e,Me,ve)},e.addHook=function(pe,J){typeof J=="function"&&(B[pe]=B[pe]||[],BN(B[pe],J))},e.removeHook=function(pe){B[pe]&&aie(B[pe])},e.removeHooks=function(pe){B[pe]&&(B[pe]=[])},e.removeAllHooks=function(){B={}},e}var kg=Cpe();kg.version;kg.isSupported;const sYe=kg.sanitize;kg.setConfig;kg.clearConfig;kg.isValidAttribute;const gie=kg.addHook,pie=kg.removeHook;kg.removeHooks;kg.removeAllHooks;let cf;(function(){function i(e){cf=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(ke,Le){for(var Ae=0;Ae<Le.length;Ae++){var se=Le[Ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ke,se.key,se)}}function t(ke,Le,Ae){return Le&&e(ke.prototype,Le),Ae&&e(ke,Ae),ke}function n(ke,Le){if(ke){if(typeof ke=="string")return r(ke,Le);var Ae=Object.prototype.toString.call(ke).slice(8,-1);if(Ae==="Object"&&ke.constructor&&(Ae=ke.constructor.name),Ae==="Map"||Ae==="Set")return Array.from(ke);if(Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae))return r(ke,Le)}}function r(ke,Le){(Le==null||Le>ke.length)&&(Le=ke.length);for(var Ae=0,se=new Array(Le);Ae<Le;Ae++)se[Ae]=ke[Ae];return se}function o(ke,Le){var Ae=typeof Symbol<"u"&&ke[Symbol.iterator]||ke["@@iterator"];if(Ae)return(Ae=Ae.call(ke)).next.bind(Ae);if(Array.isArray(ke)||(Ae=n(ke))||Le&&ke&&typeof ke.length=="number"){Ae&&(ke=Ae);var se=0;return function(){return se>=ke.length?{done:!0}:{done:!1,value:ke[se++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function u(ke){s.exports.defaults=ke}s.exports={defaults:a(),getDefaults:a,changeDefaults:u};var d=/[&<>"']/,h=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v=function(Le){return m[Le]};function b(ke,Le){if(Le){if(d.test(ke))return ke.replace(h,v)}else if(f.test(ke))return ke.replace(p,v);return ke}var E=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function S(ke){return ke.replace(E,function(Le,Ae){return Ae=Ae.toLowerCase(),Ae==="colon"?":":Ae.charAt(0)==="#"?Ae.charAt(1)==="x"?String.fromCharCode(parseInt(Ae.substring(2),16)):String.fromCharCode(+Ae.substring(1)):""})}var w=/(^|[^\[])\^/g;function L(ke,Le){ke=ke.source||ke,Le=Le||"";var Ae={replace:function(ae,pe){return pe=pe.source||pe,pe=pe.replace(w,"$1"),ke=ke.replace(ae,pe),Ae},getRegex:function(){return new RegExp(ke,Le)}};return Ae}var A=/[^\w:]/g,N=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function H(ke,Le,Ae){if(ke){var se;try{se=decodeURIComponent(S(Ae)).replace(A,"").toLowerCase()}catch{return null}if(se.indexOf("javascript:")===0||se.indexOf("vbscript:")===0||se.indexOf("data:")===0)return null}Le&&!N.test(Ae)&&(Ae=$(Le,Ae));try{Ae=encodeURI(Ae).replace(/%25/g,"%")}catch{return null}return Ae}var M={},R=/^[^:]+:\/*[^/]*$/,q=/^([^:]+:)[\s\S]*$/,X=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $(ke,Le){M[" "+ke]||(R.test(ke)?M[" "+ke]=ke+"/":M[" "+ke]=W(ke,"/",!0)),ke=M[" "+ke];var Ae=ke.indexOf(":")===-1;return Le.substring(0,2)==="//"?Ae?Le:ke.replace(q,"$1")+Le:Le.charAt(0)==="/"?Ae?Le:ke.replace(X,"$1")+Le:ke+Le}var I={exec:function(){}};function O(ke){for(var Le=1,Ae,se;Le<arguments.length;Le++){Ae=arguments[Le];for(se in Ae)Object.prototype.hasOwnProperty.call(Ae,se)&&(ke[se]=Ae[se])}return ke}function B(ke,Le){var Ae=ke.replace(/\|/g,function(pe,J,ve){for(var $e=!1,Me=J;--Me>=0&&ve[Me]==="\\";)$e=!$e;return $e?"|":" |"}),se=Ae.split(/ \|/),ae=0;if(se[0].trim()||se.shift(),se[se.length-1].trim()||se.pop(),se.length>Le)se.splice(Le);else for(;se.length<Le;)se.push("");for(;ae<se.length;ae++)se[ae]=se[ae].trim().replace(/\\\|/g,"|");return se}function W(ke,Le,Ae){var se=ke.length;if(se===0)return"";for(var ae=0;ae<se;){var pe=ke.charAt(se-ae-1);if(pe===Le&&!Ae)ae++;else if(pe!==Le&&Ae)ae++;else break}return ke.substr(0,se-ae)}function j(ke,Le){if(ke.indexOf(Le[1])===-1)return-1;for(var Ae=ke.length,se=0,ae=0;ae<Ae;ae++)if(ke[ae]==="\\")ae++;else if(ke[ae]===Le[0])se++;else if(ke[ae]===Le[1]&&(se--,se<0))return ae;return-1}function U(ke){ke&&ke.sanitize&&!ke.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function G(ke,Le){if(Le<1)return"";for(var Ae="";Le>1;)Le&1&&(Ae+=ke),Le>>=1,ke+=ke;return Ae+ke}var z={escape:b,unescape:S,edit:L,cleanUrl:H,resolveUrl:$,noopTest:I,merge:O,splitCells:B,rtrim:W,findClosingBracket:j,checkSanitizeDeprecation:U,repeatString:G},k=s.exports.defaults,K=z.rtrim,fe=z.splitCells,ne=z.escape,be=z.findClosingBracket;function De(ke,Le,Ae,se){var ae=Le.href,pe=Le.title?ne(Le.title):null,J=ke[1].replace(/\\([\[\]])/g,"$1");if(ke[0].charAt(0)!=="!"){se.state.inLink=!0;var ve={type:"link",raw:Ae,href:ae,title:pe,text:J,tokens:se.inlineTokens(J,[])};return se.state.inLink=!1,ve}else return{type:"image",raw:Ae,href:ae,title:pe,text:ne(J)}}function Ve(ke,Le){var Ae=ke.match(/^(\s+)(?:```)/);if(Ae===null)return Le;var se=Ae[1];return Le.split(`
`).map(function(ae){var pe=ae.match(/^\s+/);if(pe===null)return ae;var J=pe[0];return J.length>=se.length?ae.slice(se.length):ae}).join(`
`)}var rt=function(){function ke(Ae){this.options=Ae||k}var Le=ke.prototype;return Le.space=function(se){var ae=this.rules.block.newline.exec(se);if(ae)return ae[0].length>1?{type:"space",raw:ae[0]}:{raw:`
`}},Le.code=function(se){var ae=this.rules.block.code.exec(se);if(ae){var pe=ae[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ae[0],codeBlockStyle:"indented",text:this.options.pedantic?pe:K(pe,`
`)}}},Le.fences=function(se){var ae=this.rules.block.fences.exec(se);if(ae){var pe=ae[0],J=Ve(pe,ae[3]||"");return{type:"code",raw:pe,lang:ae[2]?ae[2].trim():ae[2],text:J}}},Le.heading=function(se){var ae=this.rules.block.heading.exec(se);if(ae){var pe=ae[2].trim();if(/#$/.test(pe)){var J=K(pe,"#");(this.options.pedantic||!J||/ $/.test(J))&&(pe=J.trim())}var ve={type:"heading",raw:ae[0],depth:ae[1].length,text:pe,tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},Le.hr=function(se){var ae=this.rules.block.hr.exec(se);if(ae)return{type:"hr",raw:ae[0]}},Le.blockquote=function(se){var ae=this.rules.block.blockquote.exec(se);if(ae){var pe=ae[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ae[0],tokens:this.lexer.blockTokens(pe,[]),text:pe}}},Le.list=function(se){var ae=this.rules.block.list.exec(se);if(ae){var pe,J,ve,$e,Me,dt,Yt,T,F,te,ie=ae[1].trim(),me=ie.length>1,le={type:"list",raw:"",ordered:me,start:me?+ie.slice(0,-1):"",loose:!1,items:[]};ie=me?"\\d{1,9}\\"+ie.slice(-1):"\\"+ie,this.options.pedantic&&(ie=me?ie:"[*+-]");for(var Te=new RegExp("^( {0,3}"+ie+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");se&&!(this.rules.block.hr.test(se)||!(ae=Te.exec(se)));){F=ae[2].split(`
`),this.options.pedantic?($e=2,te=F[0].trimLeft()):($e=ae[2].search(/[^ ]/),$e=ae[1].length+($e>4?1:$e),te=F[0].slice($e-ae[1].length)),dt=!1,pe=ae[0],!F[0]&&/^ *$/.test(F[1])&&(pe=ae[1]+F.slice(0,2).join(`
`)+`
`,le.loose=!0,F=[]);var Pe=new RegExp("^ {0,"+Math.min(3,$e-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(Me=1;Me<F.length;Me++){if(T=F[Me],this.options.pedantic&&(T=T.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Pe.test(T)){pe=ae[1]+F.slice(0,Me).join(`
`)+`
`;break}if(!dt){T.trim()||(dt=!0),T.search(/[^ ]/)>=$e?te+=`
`+T.slice($e):te+=`
`+T;continue}if(T.search(/[^ ]/)>=$e||!T.trim()){te+=`
`+T.slice($e);continue}else{pe=ae[1]+F.slice(0,Me).join(`
`)+`
`;break}}le.loose||(Yt?le.loose=!0:/\n *\n *$/.test(pe)&&(Yt=!0)),this.options.gfm&&(J=/^\[[ xX]\] /.exec(te),J&&(ve=J[0]!=="[ ] ",te=te.replace(/^\[[ xX]\] +/,""))),le.items.push({type:"list_item",raw:pe,task:!!J,checked:ve,loose:!1,text:te}),le.raw+=pe,se=se.slice(pe.length)}le.items[le.items.length-1].raw=pe.trimRight(),le.items[le.items.length-1].text=te.trimRight(),le.raw=le.raw.trimRight();var Ze=le.items.length;for(Me=0;Me<Ze;Me++)this.lexer.state.top=!1,le.items[Me].tokens=this.lexer.blockTokens(le.items[Me].text,[]),le.items[Me].tokens.some(function(st){return st.type==="space"})&&(le.loose=!0,le.items[Me].loose=!0);return le}},Le.html=function(se){var ae=this.rules.block.html.exec(se);if(ae){var pe={type:"html",raw:ae[0],pre:!this.options.sanitizer&&(ae[1]==="pre"||ae[1]==="script"||ae[1]==="style"),text:ae[0]};return this.options.sanitize&&(pe.type="paragraph",pe.text=this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]),pe.tokens=[],this.lexer.inline(pe.text,pe.tokens)),pe}},Le.def=function(se){var ae=this.rules.block.def.exec(se);if(ae){ae[3]&&(ae[3]=ae[3].substring(1,ae[3].length-1));var pe=ae[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:pe,raw:ae[0],href:ae[2],title:ae[3]}}},Le.table=function(se){var ae=this.rules.block.table.exec(se);if(ae){var pe={type:"table",header:fe(ae[1]).map(function(Yt){return{text:Yt}}),align:ae[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:ae[3]?ae[3].replace(/\n$/,"").split(`
`):[]};if(pe.header.length===pe.align.length){pe.raw=ae[0];var J=pe.align.length,ve,$e,Me,dt;for(ve=0;ve<J;ve++)/^ *-+: *$/.test(pe.align[ve])?pe.align[ve]="right":/^ *:-+: *$/.test(pe.align[ve])?pe.align[ve]="center":/^ *:-+ *$/.test(pe.align[ve])?pe.align[ve]="left":pe.align[ve]=null;for(J=pe.rows.length,ve=0;ve<J;ve++)pe.rows[ve]=fe(pe.rows[ve],pe.header.length).map(function(Yt){return{text:Yt}});for(J=pe.header.length,$e=0;$e<J;$e++)pe.header[$e].tokens=[],this.lexer.inlineTokens(pe.header[$e].text,pe.header[$e].tokens);for(J=pe.rows.length,$e=0;$e<J;$e++)for(dt=pe.rows[$e],Me=0;Me<dt.length;Me++)dt[Me].tokens=[],this.lexer.inlineTokens(dt[Me].text,dt[Me].tokens);return pe}}},Le.lheading=function(se){var ae=this.rules.block.lheading.exec(se);if(ae){var pe={type:"heading",raw:ae[0],depth:ae[2].charAt(0)==="="?1:2,text:ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Le.paragraph=function(se){var ae=this.rules.block.paragraph.exec(se);if(ae){var pe={type:"paragraph",raw:ae[0],text:ae[1].charAt(ae[1].length-1)===`
`?ae[1].slice(0,-1):ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Le.text=function(se){var ae=this.rules.block.text.exec(se);if(ae){var pe={type:"text",raw:ae[0],text:ae[0],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Le.escape=function(se){var ae=this.rules.inline.escape.exec(se);if(ae)return{type:"escape",raw:ae[0],text:ne(ae[1])}},Le.tag=function(se){var ae=this.rules.inline.tag.exec(se);if(ae)return!this.lexer.state.inLink&&/^<a /i.test(ae[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ae[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ae[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ae[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:ae[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]):ae[0]}},Le.link=function(se){var ae=this.rules.inline.link.exec(se);if(ae){var pe=ae[2].trim();if(!this.options.pedantic&&/^</.test(pe)){if(!/>$/.test(pe))return;var J=K(pe.slice(0,-1),"\\");if((pe.length-J.length)%2===0)return}else{var ve=be(ae[2],"()");if(ve>-1){var $e=ae[0].indexOf("!")===0?5:4,Me=$e+ae[1].length+ve;ae[2]=ae[2].substring(0,ve),ae[0]=ae[0].substring(0,Me).trim(),ae[3]=""}}var dt=ae[2],Yt="";if(this.options.pedantic){var T=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(dt);T&&(dt=T[1],Yt=T[3])}else Yt=ae[3]?ae[3].slice(1,-1):"";return dt=dt.trim(),/^</.test(dt)&&(this.options.pedantic&&!/>$/.test(pe)?dt=dt.slice(1):dt=dt.slice(1,-1)),De(ae,{href:dt&&dt.replace(this.rules.inline._escapes,"$1"),title:Yt&&Yt.replace(this.rules.inline._escapes,"$1")},ae[0],this.lexer)}},Le.reflink=function(se,ae){var pe;if((pe=this.rules.inline.reflink.exec(se))||(pe=this.rules.inline.nolink.exec(se))){var J=(pe[2]||pe[1]).replace(/\s+/g," ");if(J=ae[J.toLowerCase()],!J||!J.href){var ve=pe[0].charAt(0);return{type:"text",raw:ve,text:ve}}return De(pe,J,pe[0],this.lexer)}},Le.emStrong=function(se,ae,pe){pe===void 0&&(pe="");var J=this.rules.inline.emStrong.lDelim.exec(se);if(J&&!(J[3]&&pe.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ve=J[1]||J[2]||"";if(!ve||ve&&(pe===""||this.rules.inline.punctuation.exec(pe))){var $e=J[0].length-1,Me,dt,Yt=$e,T=0,F=J[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(F.lastIndex=0,ae=ae.slice(-1*se.length+$e);(J=F.exec(ae))!=null;)if(Me=J[1]||J[2]||J[3]||J[4]||J[5]||J[6],!!Me){if(dt=Me.length,J[3]||J[4]){Yt+=dt;continue}else if((J[5]||J[6])&&$e%3&&!(($e+dt)%3)){T+=dt;continue}if(Yt-=dt,!(Yt>0)){if(dt=Math.min(dt,dt+Yt+T),Math.min($e,dt)%2){var te=se.slice(1,$e+J.index+dt);return{type:"em",raw:se.slice(0,$e+J.index+dt+1),text:te,tokens:this.lexer.inlineTokens(te,[])}}var ie=se.slice(2,$e+J.index+dt-1);return{type:"strong",raw:se.slice(0,$e+J.index+dt+1),text:ie,tokens:this.lexer.inlineTokens(ie,[])}}}}}},Le.codespan=function(se){var ae=this.rules.inline.code.exec(se);if(ae){var pe=ae[2].replace(/\n/g," "),J=/[^ ]/.test(pe),ve=/^ /.test(pe)&&/ $/.test(pe);return J&&ve&&(pe=pe.substring(1,pe.length-1)),pe=ne(pe,!0),{type:"codespan",raw:ae[0],text:pe}}},Le.br=function(se){var ae=this.rules.inline.br.exec(se);if(ae)return{type:"br",raw:ae[0]}},Le.del=function(se){var ae=this.rules.inline.del.exec(se);if(ae)return{type:"del",raw:ae[0],text:ae[2],tokens:this.lexer.inlineTokens(ae[2],[])}},Le.autolink=function(se,ae){var pe=this.rules.inline.autolink.exec(se);if(pe){var J,ve;return pe[2]==="@"?(J=ne(this.options.mangle?ae(pe[1]):pe[1]),ve="mailto:"+J):(J=ne(pe[1]),ve=J),{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Le.url=function(se,ae){var pe;if(pe=this.rules.inline.url.exec(se)){var J,ve;if(pe[2]==="@")J=ne(this.options.mangle?ae(pe[0]):pe[0]),ve="mailto:"+J;else{var $e;do $e=pe[0],pe[0]=this.rules.inline._backpedal.exec(pe[0])[0];while($e!==pe[0]);J=ne(pe[0]),pe[1]==="www."?ve="http://"+J:ve=J}return{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Le.inlineText=function(se,ae){var pe=this.rules.inline.text.exec(se);if(pe){var J;return this.lexer.state.inRawBlock?J=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(pe[0]):ne(pe[0]):pe[0]:J=ne(this.options.smartypants?ae(pe[0]):pe[0]),{type:"text",raw:pe[0],text:J}}},ke}(),At=z.noopTest,Re=z.edit,ut=z.merge,Ct={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:At,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ct._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,Ct._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Ct.def=Re(Ct.def).replace("label",Ct._label).replace("title",Ct._title).getRegex(),Ct.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ct.listItemStart=Re(/^( *)(bull) */).replace("bull",Ct.bullet).getRegex(),Ct.list=Re(Ct.list).replace(/bull/g,Ct.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ct.def.source+")").getRegex(),Ct._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ct._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ct.html=Re(Ct.html,"i").replace("comment",Ct._comment).replace("tag",Ct._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ct.paragraph=Re(Ct._paragraph).replace("hr",Ct.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ct._tag).getRegex(),Ct.blockquote=Re(Ct.blockquote).replace("paragraph",Ct.paragraph).getRegex(),Ct.normal=ut({},Ct),Ct.gfm=ut({},Ct.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ct.gfm.table=Re(Ct.gfm.table).replace("hr",Ct.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ct._tag).getRegex(),Ct.pedantic=ut({},Ct.normal,{html:Re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ct._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:At,paragraph:Re(Ct.normal._paragraph).replace("hr",Ct.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ct.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Xe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:At,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:At,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Xe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Xe.punctuation=Re(Xe.punctuation).replace(/punctuation/g,Xe._punctuation).getRegex(),Xe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Xe.escapedEmSt=/\\\*|\\_/g,Xe._comment=Re(Ct._comment).replace("(?:-->|$)","-->").getRegex(),Xe.emStrong.lDelim=Re(Xe.emStrong.lDelim).replace(/punct/g,Xe._punctuation).getRegex(),Xe.emStrong.rDelimAst=Re(Xe.emStrong.rDelimAst,"g").replace(/punct/g,Xe._punctuation).getRegex(),Xe.emStrong.rDelimUnd=Re(Xe.emStrong.rDelimUnd,"g").replace(/punct/g,Xe._punctuation).getRegex(),Xe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Xe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Xe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Xe.autolink=Re(Xe.autolink).replace("scheme",Xe._scheme).replace("email",Xe._email).getRegex(),Xe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Xe.tag=Re(Xe.tag).replace("comment",Xe._comment).replace("attribute",Xe._attribute).getRegex(),Xe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Xe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Xe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Xe.link=Re(Xe.link).replace("label",Xe._label).replace("href",Xe._href).replace("title",Xe._title).getRegex(),Xe.reflink=Re(Xe.reflink).replace("label",Xe._label).getRegex(),Xe.reflinkSearch=Re(Xe.reflinkSearch,"g").replace("reflink",Xe.reflink).replace("nolink",Xe.nolink).getRegex(),Xe.normal=ut({},Xe),Xe.pedantic=ut({},Xe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Re(/^!?\[(label)\]\((.*?)\)/).replace("label",Xe._label).getRegex(),reflink:Re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Xe._label).getRegex()}),Xe.gfm=ut({},Xe.normal,{escape:Re(Xe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Xe.gfm.url=Re(Xe.gfm.url,"i").replace("email",Xe.gfm._extended_email).getRegex(),Xe.breaks=ut({},Xe.gfm,{br:Re(Xe.br).replace("{2,}","*").getRegex(),text:Re(Xe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var on={block:Ct,inline:Xe},Kt=rt,dn=s.exports.defaults,Sn=on.block,Wn=on.inline,Jn=z.repeatString;function oi(ke){return ke.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function jn(ke){var Le="",Ae,se,ae=ke.length;for(Ae=0;Ae<ae;Ae++)se=ke.charCodeAt(Ae),Math.random()>.5&&(se="x"+se.toString(16)),Le+="&#"+se+";";return Le}var Pt=function(){function ke(Ae){this.tokens=[],this.tokens.links=Object.create(null),this.options=Ae||dn,this.options.tokenizer=this.options.tokenizer||new Kt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var se={block:Sn.normal,inline:Wn.normal};this.options.pedantic?(se.block=Sn.pedantic,se.inline=Wn.pedantic):this.options.gfm&&(se.block=Sn.gfm,this.options.breaks?se.inline=Wn.breaks:se.inline=Wn.gfm),this.tokenizer.rules=se}ke.lex=function(se,ae){var pe=new ke(ae);return pe.lex(se)},ke.lexInline=function(se,ae){var pe=new ke(ae);return pe.inlineTokens(se)};var Le=ke.prototype;return Le.lex=function(se){se=se.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(se,this.tokens);for(var ae;ae=this.inlineQueue.shift();)this.inlineTokens(ae.src,ae.tokens);return this.tokens},Le.blockTokens=function(se,ae){var pe=this;ae===void 0&&(ae=[]),this.options.pedantic&&(se=se.replace(/^ +$/gm,""));for(var J,ve,$e,Me;se;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Yt){return(J=Yt.call({lexer:pe},se,ae))?(se=se.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.space(se)){se=se.substring(J.raw.length),J.type&&ae.push(J);continue}if(J=this.tokenizer.code(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(J=this.tokenizer.fences(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.heading(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.hr(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.blockquote(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.list(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.html(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.def(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title});continue}if(J=this.tokenizer.table(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.lheading(se)){se=se.substring(J.raw.length),ae.push(J);continue}if($e=se,this.options.extensions&&this.options.extensions.startBlock&&function(){var Yt=1/0,T=se.slice(1),F=void 0;pe.options.extensions.startBlock.forEach(function(te){F=te.call({lexer:this},T),typeof F=="number"&&F>=0&&(Yt=Math.min(Yt,F))}),Yt<1/0&&Yt>=0&&($e=se.substring(0,Yt+1))}(),this.state.top&&(J=this.tokenizer.paragraph($e))){ve=ae[ae.length-1],Me&&ve.type==="paragraph"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J),Me=$e.length!==se.length,se=se.substring(J.raw.length);continue}if(J=this.tokenizer.text(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(se){var dt="Infinite loop on byte: "+se.charCodeAt(0);if(this.options.silent){console.error(dt);break}else throw new Error(dt)}}return this.state.top=!0,ae},Le.inline=function(se,ae){this.inlineQueue.push({src:se,tokens:ae})},Le.inlineTokens=function(se,ae){var pe=this;ae===void 0&&(ae=[]);var J,ve,$e,Me=se,dt,Yt,T;if(this.tokens.links){var F=Object.keys(this.tokens.links);if(F.length>0)for(;(dt=this.tokenizer.rules.inline.reflinkSearch.exec(Me))!=null;)F.includes(dt[0].slice(dt[0].lastIndexOf("[")+1,-1))&&(Me=Me.slice(0,dt.index)+"["+Jn("a",dt[0].length-2)+"]"+Me.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(dt=this.tokenizer.rules.inline.blockSkip.exec(Me))!=null;)Me=Me.slice(0,dt.index)+"["+Jn("a",dt[0].length-2)+"]"+Me.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(dt=this.tokenizer.rules.inline.escapedEmSt.exec(Me))!=null;)Me=Me.slice(0,dt.index)+"++"+Me.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;se;)if(Yt||(T=""),Yt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(ie){return(J=ie.call({lexer:pe},se,ae))?(se=se.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.escape(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.tag(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.link(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.reflink(se,this.tokens.links)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.emStrong(se,Me,T)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.codespan(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.br(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.del(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.autolink(se,jn)){se=se.substring(J.raw.length),ae.push(J);continue}if(!this.state.inLink&&(J=this.tokenizer.url(se,jn))){se=se.substring(J.raw.length),ae.push(J);continue}if($e=se,this.options.extensions&&this.options.extensions.startInline&&function(){var ie=1/0,me=se.slice(1),le=void 0;pe.options.extensions.startInline.forEach(function(Te){le=Te.call({lexer:this},me),typeof le=="number"&&le>=0&&(ie=Math.min(ie,le))}),ie<1/0&&ie>=0&&($e=se.substring(0,ie+1))}(),J=this.tokenizer.inlineText($e,oi)){se=se.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(T=J.raw.slice(-1)),Yt=!0,ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(se){var te="Infinite loop on byte: "+se.charCodeAt(0);if(this.options.silent){console.error(te);break}else throw new Error(te)}}return ae},t(ke,null,[{key:"rules",get:function(){return{block:Sn,inline:Wn}}}]),ke}(),pn=s.exports.defaults,Ci=z.cleanUrl,Ie=z.escape,Fe=function(){function ke(Ae){this.options=Ae||pn}var Le=ke.prototype;return Le.code=function(se,ae,pe){var J=(ae||"").match(/\S*/)[0];if(this.options.highlight){var ve=this.options.highlight(se,J);ve!=null&&ve!==se&&(pe=!0,se=ve)}return se=se.replace(/\n$/,"")+`
`,J?'<pre><code class="'+this.options.langPrefix+Ie(J,!0)+'">'+(pe?se:Ie(se,!0))+`</code></pre>
`:"<pre><code>"+(pe?se:Ie(se,!0))+`</code></pre>
`},Le.blockquote=function(se){return`<blockquote>
`+se+`</blockquote>
`},Le.html=function(se){return se},Le.heading=function(se,ae,pe,J){return this.options.headerIds?"<h"+ae+' id="'+this.options.headerPrefix+J.slug(pe)+'">'+se+"</h"+ae+`>
`:"<h"+ae+">"+se+"</h"+ae+`>
`},Le.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Le.list=function(se,ae,pe){var J=ae?"ol":"ul",ve=ae&&pe!==1?' start="'+pe+'"':"";return"<"+J+ve+`>
`+se+"</"+J+`>
`},Le.listitem=function(se){return"<li>"+se+`</li>
`},Le.checkbox=function(se){return"<input "+(se?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Le.paragraph=function(se){return"<p>"+se+`</p>
`},Le.table=function(se,ae){return ae&&(ae="<tbody>"+ae+"</tbody>"),`<table>
<thead>
`+se+`</thead>
`+ae+`</table>
`},Le.tablerow=function(se){return`<tr>
`+se+`</tr>
`},Le.tablecell=function(se,ae){var pe=ae.header?"th":"td",J=ae.align?"<"+pe+' align="'+ae.align+'">':"<"+pe+">";return J+se+"</"+pe+`>
`},Le.strong=function(se){return"<strong>"+se+"</strong>"},Le.em=function(se){return"<em>"+se+"</em>"},Le.codespan=function(se){return"<code>"+se+"</code>"},Le.br=function(){return this.options.xhtml?"<br/>":"<br>"},Le.del=function(se){return"<del>"+se+"</del>"},Le.link=function(se,ae,pe){if(se=Ci(this.options.sanitize,this.options.baseUrl,se),se===null)return pe;var J='<a href="'+Ie(se)+'"';return ae&&(J+=' title="'+ae+'"'),J+=">"+pe+"</a>",J},Le.image=function(se,ae,pe){if(se=Ci(this.options.sanitize,this.options.baseUrl,se),se===null)return pe;var J='<img src="'+se+'" alt="'+pe+'"';return ae&&(J+=' title="'+ae+'"'),J+=this.options.xhtml?"/>":">",J},Le.text=function(se){return se},ke}(),pt=function(){function ke(){}var Le=ke.prototype;return Le.strong=function(se){return se},Le.em=function(se){return se},Le.codespan=function(se){return se},Le.del=function(se){return se},Le.html=function(se){return se},Le.text=function(se){return se},Le.link=function(se,ae,pe){return""+pe},Le.image=function(se,ae,pe){return""+pe},Le.br=function(){return""},ke}(),at=function(){function ke(){this.seen={}}var Le=ke.prototype;return Le.serialize=function(se){return se.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Le.getNextSafeSlug=function(se,ae){var pe=se,J=0;if(this.seen.hasOwnProperty(pe)){J=this.seen[se];do J++,pe=se+"-"+J;while(this.seen.hasOwnProperty(pe))}return ae||(this.seen[se]=J,this.seen[pe]=0),pe},Le.slug=function(se,ae){ae===void 0&&(ae={});var pe=this.serialize(se);return this.getNextSafeSlug(pe,ae.dryrun)},ke}(),bt=Fe,yi=pt,Vt=at,It=s.exports.defaults,Gt=z.unescape,qt=function(){function ke(Ae){this.options=Ae||It,this.options.renderer=this.options.renderer||new bt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yi,this.slugger=new Vt}ke.parse=function(se,ae){var pe=new ke(ae);return pe.parse(se)},ke.parseInline=function(se,ae){var pe=new ke(ae);return pe.parseInline(se)};var Le=ke.prototype;return Le.parse=function(se,ae){ae===void 0&&(ae=!0);var pe="",J,ve,$e,Me,dt,Yt,T,F,te,ie,me,le,Te,Pe,Ze,st,kt,Ft,Ot,yt=se.length;for(J=0;J<yt;J++){if(ie=se[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]&&(Ot=this.options.extensions.renderers[ie.type].call({parser:this},ie),Ot!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ie.type))){pe+=Ot||"";continue}switch(ie.type){case"space":continue;case"hr":{pe+=this.renderer.hr();continue}case"heading":{pe+=this.renderer.heading(this.parseInline(ie.tokens),ie.depth,Gt(this.parseInline(ie.tokens,this.textRenderer)),this.slugger);continue}case"code":{pe+=this.renderer.code(ie.text,ie.lang,ie.escaped);continue}case"table":{for(F="",T="",Me=ie.header.length,ve=0;ve<Me;ve++)T+=this.renderer.tablecell(this.parseInline(ie.header[ve].tokens),{header:!0,align:ie.align[ve]});for(F+=this.renderer.tablerow(T),te="",Me=ie.rows.length,ve=0;ve<Me;ve++){for(Yt=ie.rows[ve],T="",dt=Yt.length,$e=0;$e<dt;$e++)T+=this.renderer.tablecell(this.parseInline(Yt[$e].tokens),{header:!1,align:ie.align[$e]});te+=this.renderer.tablerow(T)}pe+=this.renderer.table(F,te);continue}case"blockquote":{te=this.parse(ie.tokens),pe+=this.renderer.blockquote(te);continue}case"list":{for(me=ie.ordered,le=ie.start,Te=ie.loose,Me=ie.items.length,te="",ve=0;ve<Me;ve++)Ze=ie.items[ve],st=Ze.checked,kt=Ze.task,Pe="",Ze.task&&(Ft=this.renderer.checkbox(st),Te?Ze.tokens.length>0&&Ze.tokens[0].type==="paragraph"?(Ze.tokens[0].text=Ft+" "+Ze.tokens[0].text,Ze.tokens[0].tokens&&Ze.tokens[0].tokens.length>0&&Ze.tokens[0].tokens[0].type==="text"&&(Ze.tokens[0].tokens[0].text=Ft+" "+Ze.tokens[0].tokens[0].text)):Ze.tokens.unshift({type:"text",text:Ft}):Pe+=Ft),Pe+=this.parse(Ze.tokens,Te),te+=this.renderer.listitem(Pe,kt,st);pe+=this.renderer.list(te,me,le);continue}case"html":{pe+=this.renderer.html(ie.text);continue}case"paragraph":{pe+=this.renderer.paragraph(this.parseInline(ie.tokens));continue}case"text":{for(te=ie.tokens?this.parseInline(ie.tokens):ie.text;J+1<yt&&se[J+1].type==="text";)ie=se[++J],te+=`
`+(ie.tokens?this.parseInline(ie.tokens):ie.text);pe+=ae?this.renderer.paragraph(te):te;continue}default:{var si='Token with "'+ie.type+'" type was not found.';if(this.options.silent){console.error(si);return}else throw new Error(si)}}}return pe},Le.parseInline=function(se,ae){ae=ae||this.renderer;var pe="",J,ve,$e,Me=se.length;for(J=0;J<Me;J++){if(ve=se[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]&&($e=this.options.extensions.renderers[ve.type].call({parser:this},ve),$e!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ve.type))){pe+=$e||"";continue}switch(ve.type){case"escape":{pe+=ae.text(ve.text);break}case"html":{pe+=ae.html(ve.text);break}case"link":{pe+=ae.link(ve.href,ve.title,this.parseInline(ve.tokens,ae));break}case"image":{pe+=ae.image(ve.href,ve.title,ve.text);break}case"strong":{pe+=ae.strong(this.parseInline(ve.tokens,ae));break}case"em":{pe+=ae.em(this.parseInline(ve.tokens,ae));break}case"codespan":{pe+=ae.codespan(ve.text);break}case"br":{pe+=ae.br();break}case"del":{pe+=ae.del(this.parseInline(ve.tokens,ae));break}case"text":{pe+=ae.text(ve.text);break}default:{var dt='Token with "'+ve.type+'" type was not found.';if(this.options.silent){console.error(dt);return}else throw new Error(dt)}}}return pe},ke}(),Bt=Pt,gr=qt,ei=rt,He=Fe,Ba=pt,Vn=at,ti=z.merge,qs=z.checkSanitizeDeprecation,vn=z.escape,rr=s.exports.getDefaults,sl=s.exports.changeDefaults,qi=s.exports.defaults;function Ye(ke,Le,Ae){if(typeof ke>"u"||ke===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");if(typeof Le=="function"&&(Ae=Le,Le=null),Le=ti({},Ye.defaults,Le||{}),qs(Le),Ae){var se=Le.highlight,ae;try{ae=Bt.lex(ke,Le)}catch($e){return Ae($e)}var pe=function(Me){var dt;if(!Me)try{Le.walkTokens&&Ye.walkTokens(ae,Le.walkTokens),dt=gr.parse(ae,Le)}catch(Yt){Me=Yt}return Le.highlight=se,Me?Ae(Me):Ae(null,dt)};if(!se||se.length<3||(delete Le.highlight,!ae.length))return pe();var J=0;Ye.walkTokens(ae,function($e){$e.type==="code"&&(J++,setTimeout(function(){se($e.text,$e.lang,function(Me,dt){if(Me)return pe(Me);dt!=null&&dt!==$e.text&&($e.text=dt,$e.escaped=!0),J--,J===0&&pe()})},0))}),J===0&&pe();return}try{var ve=Bt.lex(ke,Le);return Le.walkTokens&&Ye.walkTokens(ve,Le.walkTokens),gr.parse(ve,Le)}catch($e){if($e.message+=`
Please report this to https://github.com/markedjs/marked.`,Le.silent)return"<p>An error occurred:</p><pre>"+vn($e.message+"",!0)+"</pre>";throw $e}}Ye.options=Ye.setOptions=function(ke){return ti(Ye.defaults,ke),sl(Ye.defaults),Ye},Ye.getDefaults=rr,Ye.defaults=qi,Ye.use=function(){for(var ke=this,Le=arguments.length,Ae=new Array(Le),se=0;se<Le;se++)Ae[se]=arguments[se];var ae=ti.apply(void 0,[{}].concat(Ae)),pe=Ye.defaults.extensions||{renderers:{},childTokens:{}},J;Ae.forEach(function(ve){if(ve.extensions&&(J=!0,ve.extensions.forEach(function(Me){if(!Me.name)throw new Error("extension name required");if(Me.renderer){var dt=pe.renderers?pe.renderers[Me.name]:null;dt?pe.renderers[Me.name]=function(){for(var Yt=arguments.length,T=new Array(Yt),F=0;F<Yt;F++)T[F]=arguments[F];var te=Me.renderer.apply(this,T);return te===!1&&(te=dt.apply(this,T)),te}:pe.renderers[Me.name]=Me.renderer}if(Me.tokenizer){if(!Me.level||Me.level!=="block"&&Me.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");pe[Me.level]?pe[Me.level].unshift(Me.tokenizer):pe[Me.level]=[Me.tokenizer],Me.start&&(Me.level==="block"?pe.startBlock?pe.startBlock.push(Me.start):pe.startBlock=[Me.start]:Me.level==="inline"&&(pe.startInline?pe.startInline.push(Me.start):pe.startInline=[Me.start]))}Me.childTokens&&(pe.childTokens[Me.name]=Me.childTokens)})),ve.renderer&&function(){var Me=Ye.defaults.renderer||new He,dt=function(F){var te=Me[F];Me[F]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var Te=ve.renderer[F].apply(Me,me);return Te===!1&&(Te=te.apply(Me,me)),Te}};for(var Yt in ve.renderer)dt(Yt);ae.renderer=Me}(),ve.tokenizer&&function(){var Me=Ye.defaults.tokenizer||new ei,dt=function(F){var te=Me[F];Me[F]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var Te=ve.tokenizer[F].apply(Me,me);return Te===!1&&(Te=te.apply(Me,me)),Te}};for(var Yt in ve.tokenizer)dt(Yt);ae.tokenizer=Me}(),ve.walkTokens){var $e=Ye.defaults.walkTokens;ae.walkTokens=function(Me){ve.walkTokens.call(ke,Me),$e&&$e(Me)}}J&&(ae.extensions=pe),Ye.setOptions(ae)})},Ye.walkTokens=function(ke,Le){for(var Ae=function(){var J=ae.value;switch(Le(J),J.type){case"table":{for(var ve=o(J.header),$e;!($e=ve()).done;){var Me=$e.value;Ye.walkTokens(Me.tokens,Le)}for(var dt=o(J.rows),Yt;!(Yt=dt()).done;)for(var T=Yt.value,F=o(T),te;!(te=F()).done;){var ie=te.value;Ye.walkTokens(ie.tokens,Le)}break}case"list":{Ye.walkTokens(J.items,Le);break}default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[J.type]?Ye.defaults.extensions.childTokens[J.type].forEach(function(me){Ye.walkTokens(J[me],Le)}):J.tokens&&Ye.walkTokens(J.tokens,Le)}},se=o(ke),ae;!(ae=se()).done;)Ae()},Ye.parseInline=function(ke,Le){if(typeof ke>"u"||ke===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");Le=ti({},Ye.defaults,Le||{}),qs(Le);try{var Ae=Bt.lexInline(ke,Le);return Le.walkTokens&&Ye.walkTokens(Ae,Le.walkTokens),gr.parseInline(Ae,Le)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,Le.silent)return"<p>An error occurred:</p><pre>"+vn(se.message+"",!0)+"</pre>";throw se}},Ye.Parser=gr,Ye.parser=gr.parse,Ye.Renderer=He,Ye.TextRenderer=Ba,Ye.Lexer=Bt,Ye.lexer=Bt.lex,Ye.Tokenizer=ei,Ye.Slugger=Vn,Ye.parse=Ye;var is=Ye;return is})})();cf||exports;(cf||exports).Parser;(cf||exports).parser;var aYe=(cf||exports).Renderer;(cf||exports).TextRenderer;(cf||exports).Lexer;(cf||exports).lexer;(cf||exports).Tokenizer;(cf||exports).Slugger;var lYe=(cf||exports).parse;function uYe(i,e={},t={}){var n;const r=new Je;let o=!1;const s=r.add(new aa),a=oY(e),u=function(S){let w;try{w=Nz(decodeURIComponent(S))}catch{}return w?(w=Pxe(w,L=>{if(i.uris&&i.uris[L])return rn.revive(i.uris[L])}),encodeURIComponent(JSON.stringify(w))):S},d=function(S,w){const L=i.uris&&i.uris[S];let A=rn.revive(L);return w?S.startsWith(In.data+":")?S:(A||(A=rn.parse(S)),iue.asBrowserUri(A).toString(!0)):!A||rn.parse(S).toString()===A.toString()?S:(A.query&&(A=A.with({query:u(A.query)})),A.toString())};let h;const f=new Promise(S=>h=S),p=new aYe;if(p.image=(S,w,L)=>{let A=[],N=[];return S&&({href:S,dimensions:A}=m3e(S),N.push(`src="${S}"`)),L&&N.push(`alt="${L}"`),w&&N.push(`title="${w}"`),A.length&&(N=N.concat(A)),"<img "+N.join(" ")+">"},p.link=(S,w,L)=>(S===L&&(L=A6(L)),S=d(S,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(S)||(S=DJ(e.baseUrl,S).toString())),w=A6(w),S=A6(S),!S||S.match(/^data:|javascript:/i)||S.match(/^command:/i)&&!i.isTrusted||S.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?L:(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${S}" title="${w||S}">${L}</a>`)),p.paragraph=S=>`<p>${S}</p>`,e.codeBlockRenderer&&(p.code=(S,w)=>{const L=e.codeBlockRenderer(w,S),A=Ghe.nextId();return aG(Promise.all([L,f]),s.token).then(N=>{var H;if(!o&&N){const M=a.querySelector(`div[data-code="${A}"]`);M&&v0(M,N[0]),(H=e.asyncRenderCallback)===null||H===void 0||H.call(e)}}).catch(()=>{}),`<div class="code" data-code="${A}">${mG(S)}</div>`}),e.actionHandler){const S=e.actionHandler.disposables.add(new Ui(a,"click")),w=e.actionHandler.disposables.add(new Ui(a,"auxclick"));e.actionHandler.disposables.add(Mt.any(S.event,w.event)(L=>{const A=new Ju(L);if(!A.leftButton&&!A.middleButton)return;let N=A.target;if(!(N.tagName!=="A"&&(N=N.parentElement,!N||N.tagName!=="A")))try{const H=N.dataset.href;H&&e.actionHandler.callback(H,A)}catch(H){gn(H)}finally{A.preventDefault()}}))}i.supportHtml||(t.sanitizer=S=>(i.isTrusted?S.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?S:"",t.sanitize=!0,t.silent=!0),t.renderer=p;let m=(n=i.value)!==null&&n!==void 0?n:"";m.length>1e5&&(m=`${m.substr(0,1e5)}…`),i.supportThemeIcons&&(m=_4e(m));let v=lYe(m,t);i.supportThemeIcons&&(v=a1(v).map(w=>typeof w=="string"?w:w.outerHTML).join(""));const E=new DOMParser().parseFromString(mie(i,v),"text/html");if(E.body.querySelectorAll("img").forEach(S=>{if(S.src){let w=d(S.src,!0);try{const L=rn.parse(w);e.baseUrl&&L.scheme===In.file&&(w=DJ(e.baseUrl,w).toString())}catch{}S.src=w}}),a.innerHTML=mie(i,E.body.innerHTML),h(),e.asyncRenderCallback)for(const S of a.getElementsByTagName("img")){const w=r.add(qe(S,"load",()=>{w.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,s.cancel(),r.dispose()}}}function mie(i,e){const{config:t,allowedSchemes:n}=cYe(i);gie("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}});const r=document.createElement("a");gie("afterSanitizeAttributes",o=>{for(const s of["href","src"])o.hasAttribute(s)&&(r.href=o.getAttribute(s),n.includes(r.protocol.replace(/:$/,""))||o.removeAttribute(s))});try{return sYe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{pie("uponSanitizeAttribute"),pie("afterSanitizeAttributes")}}function cYe(i){const e=[In.http,In.https,In.mailto,In.data,In.file,In.vscodeFileResource,In.vscodeRemote,In.vscodeRemoteResource];return i.isTrusted&&e.push(In.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var dYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_ie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},hYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},hW;let Fp=class ype{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new Ce,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new Je;return{element:r.add(uYe(e,Object.assign(Object.assign({},this._getRenderOptions(e,r)),t),n)).element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,r)=>hYe(this,void 0,void 0,function*(){var o,s,a,u;let d;n?d=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(d=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),d||(d="plaintext"),this._modeService.triggerMode(d);const h=(s=yield Wr.getPromise(d))!==null&&s!==void 0?s:void 0,f=document.createElement("span");if(f.innerHTML=(u=(a=ype._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(r,this._modeService.languageIdCodec,h))!==null&&u!==void 0?u:Ide(r,this._modeService.languageIdCodec,h),this._options.editor){const p=this._options.editor.getOption(43);Oa.applyFontInfoSlow(f,p)}else this._options.codeBlockFontFamily&&(f.style.fontFamily=this._options.codeBlockFontFamily);return f}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(gn),disposables:t}}}};Fp._ttpTokenizer=(hW=window.trustedTypes)===null||hW===void 0?void 0:hW.createPolicy("tokenizeToString",{createHTML(i,e,t){return Ide(i,e,t)}});Fp=dYe([_ie(1,Fs),_ie(2,Ll)],Fp);var fYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class gYe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function pYe(i,e,t,n,r){return fYe(this,void 0,void 0,function*(){try{const o=yield Promise.resolve(i.provideHover(t,n,r));if(o&&_Ye(o))return new gYe(i,o,e)}catch(o){Ms(o)}})}function wpe(i,e,t){const r=IA.ordered(i).map((o,s)=>pYe(o,s,i,e,t));return Yo.fromPromises(r).coalesce()}function mYe(i,e,t){return wpe(i,e,t).map(n=>n.hover).toPromise()}Sg("_executeHoverProvider",(i,e)=>mYe(i,e,Fn.None));function _Ye(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var vYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},fW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const vie=Ge;class c2{constructor(e,t,n,r){this.owner=e,this.range=t,this.contents=n,this.ordinal=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let LU=class{constructor(e,t,n,r,o){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r,this._configurationService=o}createLoadingMessage(e){return new c2(this,e.range,[new Rp().appendText(C("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),s=[];let a=1e3;const u=n.getLineLength(r),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});typeof h=="number"&&u>=h&&s.push(new c2(this,e.range,[{value:C("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const f of t){const p=f.range.startLineNumber===r?f.range.startColumn:1,m=f.range.endLineNumber===r?f.range.endColumn:o,v=f.options.hoverMessage;if(!v||hO(v))continue;const b=new Q(e.range.startLineNumber,p,e.range.startLineNumber,m);s.push(new c2(this,b,TG(v),a++))}return s}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Yo.EMPTY;const r=this._editor.getModel();if(!IA.has(r))return Yo.EMPTY;const o=new Ee(e.range.startLineNumber,e.range.startColumn);return wpe(r,o,n).filter(s=>!hO(s.hover.contents)).map(s=>{const a=s.hover.range?Q.lift(s.hover.range):e.range;return new c2(this,a,s.hover.contents,s.ordinal)})}renderHoverParts(e,t,n){return Spe(e,t,this._editor,this._hover,this._modeService,this._openerService)}};LU=vYe([fW(2,Fs),fW(3,Ll),fW(4,ir)],LU);function Spe(i,e,t,n,r,o){i.sort((a,u)=>a.ordinal-u.ordinal);const s=new Je;for(const a of i)for(const u of a.contents){if(hO(u))continue;const d=vie("div.hover-row.markdown-hover"),h=Be(d,vie("div.hover-contents")),f=s.add(new Fp({editor:t},r,o));s.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",n.onContentsChanged()}));const p=s.add(f.render(u));h.appendChild(p.element),e.appendChild(d)}return s}var Epe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},n5=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class bie{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let xU=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new Ce,this.onDidChange=this._onDidChange.event,this._dispoables=new Je,this._markers=[],this._nextIdx=-1,rn.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const r=this._configService.getValue("problems.sortOrder"),o=(a,u)=>{let d=wA(a.resource.toString(),u.resource.toString());return r==="position"?d=Q.compareRangesUsingStarts(a,u)||Tr.compare(a.severity,u.severity):d=Tr.compare(a.severity,u.severity)||Q.compareRangesUsingStarts(a,u),d},s=()=>{this._markers=this._markerService.read({resource:rn.isUri(e)?e:void 0,severities:Tr.Error|Tr.Warning|Tr.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};s(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(u=>this._resourceFilter(u)))&&(s(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new bie(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let r=!1,o=this._markers.findIndex(s=>s.resource.toString()===e.uri.toString());o<0&&(o=DG(this._markers,{resource:e.uri},(s,a)=>wA(s.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let s=o;s<this._markers.length;s++){let a=Q.lift(this._markers[s]);if(a.isEmpty()){const u=e.getWordAtPosition(a.getStartPosition());u&&(a=new Q(a.startLineNumber,u.startColumn,a.startLineNumber,u.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=s,r=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}r||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let n=this._markers.findIndex(r=>r.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(Q.containsPosition(this._markers[n],t))return new bie(this._markers[n],n+1,this._markers.length)}}};xU=Epe([n5(1,xR),n5(2,ir)],xU);const Lpe=gi("IMarkerNavigationService");let DU=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new ku}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new xU(e,this._markerService,this._configService)}};DU=Epe([n5(0,xR),n5(1,ir)],DU);U0(Lpe,DU,!0);var TU;(function(i){function e(t){switch(t){case Ur.Ignore:return"severity-ignore "+_e.info.classNames;case Ur.Info:return _e.info.classNames;case Ur.Warning:return _e.warning.classNames;case Ur.Error:return _e.error.classNames;default:return""}}i.className=e})(TU||(TU={}));fr((i,e)=>{const t=i.getColor(dIe);if(t){const o=_e.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}const n=i.getColor(hIe);if(n){const o=_e.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${n};
			}
		`)}const r=i.getColor(fIe);if(r){const o=_e.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${r};
			}
		`)}});var bYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},iy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class CYe{constructor(e,t,n,r,o){this._openerService=r,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Je,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(ts(this._relatedBlock,"click",a=>{a.preventDefault();const u=this._relatedDiagnostics.get(a.target);u&&n(u)})),this._scrollable=new dq(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){ri(this._disposables)}update(e){const{source:t,message:n,relatedInformation:r,code:o}=e;let s=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?s+=o.length:s+=o.value.length);const a=og(n);this._lines=a.length,this._longestLineLength=0;for(const p of a)this._longestLineLength=Math.max(p.length+s,this._longestLineLength);$o(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let u=this._messageBlock;for(const p of a)u=document.createElement("div"),u.innerText=p,p===""&&(u.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(u);if(t||o){const p=document.createElement("span");if(p.classList.add("details"),u.appendChild(p),t){const m=document.createElement("span");m.innerText=t,m.classList.add("source"),p.appendChild(m)}if(o)if(typeof o=="string"){const m=document.createElement("span");m.innerText=`(${o})`,m.classList.add("code"),p.appendChild(m)}else{this._codeLink=Ge("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=v=>{this._openerService.open(o.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()};const m=Be(this._codeLink,Ge("span"));m.innerText=o.value,p.appendChild(this._codeLink)}}if($o(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),bl(r)){const p=this._relatedBlock.appendChild(document.createElement("div"));p.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const m of r){let v=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${Qge(m.resource)}(${m.startLineNumber}, ${m.startColumn}): `,b.title=this._labelService.getUriLabel(m.resource),this._relatedDiagnostics.set(b,m);let E=document.createElement("span");E.innerText=m.message,v.appendChild(b),v.appendChild(E),this._lines+=1,p.appendChild(v)}}const d=this._editor.getOption(43),h=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Tr.Error:t=C("Error","Error");break;case Tr.Warning:t=C("Warning","Warning");break;case Tr.Info:t=C("Info","Info");break;case Tr.Hint:t=C("Hint","Hint");break}let n=C("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(n=`${r.getLineContent(e.startLineNumber)}, ${n}`),n}}let cS=class xpe extends e5{constructor(e,t,n,r,o,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=n,this._menuService=r,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new Je,this._onDidSelectRelatedInformation=new Ce,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Tr.Warning,this._backgroundColor=we.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(EYe);let t=IU,n=yYe;this._severity===Tr.Warning?(t=kU,n=wYe):this._severity===Tr.Info&&(t=NU,n=SYe);const r=e.getColor(t),o=e.getColor(n);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:o,primaryHeadingColor:e.getColor(Zge),secondaryHeadingColor:e.getColor(Xge)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(r=>this.editor.focus()));const t=[],n=this._menuService.createMenu(xpe.TitleMenu,this._contextKeyService);sqe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=Be(e,Ge(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new CYe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let r=Q.lift(e);const o=this.editor.getPosition();let s=o&&r.containsPosition(o)?o:r.getStartPosition();super.show(s,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const u=n>1?C("problems","{0} of {1} problems",t,n):C("change","{0} of {1} problem",t,n);this.setTitle(fc(a.uri),u)}this._icon.className=`codicon ${TU.className(Tr.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};cS.TitleMenu=new Rt("gotoErrorTitleMenu");cS=bYe([iy(1,xr),iy(2,Ll),iy(3,yC),iy(4,Nn),iy(5,cn),iy(6,wR)],cS);let Cie=xA(T2,fce),yie=xA(vp,IB),wie=xA(Gh,MG);const IU=ye("editorMarkerNavigationError.background",{dark:Cie,light:Cie,hc:go},C("editorMarkerNavigationError","Editor marker navigation widget error color.")),yYe=ye("editorMarkerNavigationError.headerBackground",{dark:nr(IU,.1),light:nr(IU,.1),hc:null},C("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),kU=ye("editorMarkerNavigationWarning.background",{dark:yie,light:yie,hc:go},C("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),wYe=ye("editorMarkerNavigationWarning.headerBackground",{dark:nr(kU,.1),light:nr(kU,.1),hc:"#0C141F"},C("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),NU=ye("editorMarkerNavigationInfo.background",{dark:wie,light:wie,hc:go},C("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),SYe=ye("editorMarkerNavigationInfo.headerBackground",{dark:nr(NU,.1),light:nr(NU,.1),hc:null},C("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),EYe=ye("editorMarkerNavigation.background",{dark:oc,light:oc,hc:oc},C("editorMarkerNavigationBackground","Editor marker navigation widget background."));var LYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Dpe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let N0=class S4{constructor(e,t,n,r,o){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=r,this._instantiationService=o,this._sessionDispoables=new Je,this._editor=e,this._widgetVisible=Tpe.bindTo(this._contextKeyService)}static get(e){return e.getContribution(S4.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(cS,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var r,o,s;(!(!((r=this._model)===null||r===void 0)&&r.selected)||!Q.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,n.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:Q.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Ee(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Dpe(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);r&&(S4.get(r).close(),S4.get(r).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};N0.ID="editor.contrib.markerController";N0=LYe([gP(1,Lpe),gP(2,cn),gP(3,Ii),gP(4,Nn)],N0);class q8 extends Lt{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return Dpe(this,void 0,void 0,function*(){t.hasModel()&&N0.get(t).nagivate(this._next,this._multiFile)})}}class Cp extends q8{constructor(){super(!0,!1,{id:Cp.ID,label:Cp.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:578,weight:100},menuOpts:{menuId:cS.TitleMenu,title:Cp.LABEL,icon:ds("marker-navigation-next",_e.arrowDown,C("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Cp.ID="editor.action.marker.next";Cp.LABEL=C("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class dS extends q8{constructor(){super(!1,!1,{id:dS.ID,label:dS.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1602,weight:100},menuOpts:{menuId:cS.TitleMenu,title:Cp.LABEL,icon:ds("marker-navigation-previous",_e.arrowUp,C("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}dS.ID="editor.action.marker.prev";dS.LABEL=C("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class xYe extends q8{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:C("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:66,weight:100},menuOpts:{menuId:Rt.MenubarGoMenu,title:C({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class DYe extends q8{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:C("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1090,weight:100},menuOpts:{menuId:Rt.MenubarGoMenu,title:C({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}ki(N0.ID,N0);it(Cp);it(dS);it(xYe);it(DYe);const Tpe=new Dt("markersNavigationVisible",!1),TYe=Ps.bindToContribution(N0.get);nt(new TYe({id:"closeMarkersNavigation",precondition:Tpe,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:de.focus,primary:9,secondary:[1033]}}));var IYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Sie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Tc=Ge;class kYe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Eie={type:1,filter:{include:zn.QuickFix}};let AU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=r,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),s=[];for(const a of t){const u=a.range.startLineNumber===r?a.range.startColumn:1,d=a.range.endLineNumber===r?a.range.endColumn:o,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const f=new Q(e.range.startLineNumber,u,e.range.startLineNumber,d);s.push(new kYe(this,f,h))}return s}renderHoverParts(e,t,n){if(!e.length)return Oe.None;const r=new Je;e.forEach(s=>t.appendChild(this.renderMarkerHover(s,r)));const o=e.length===1?e[0]:e.sort((s,a)=>Tr.compare(s.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(o,n,r),r}renderMarkerHover(e,t){const n=Tc("div.hover-row"),r=Be(n,Tc("div.marker.hover-contents")),{source:o,message:s,code:a,relatedInformation:u}=e.marker;this._editor.applyFontInfo(r);const d=Be(r,Tc("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,o||a)if(a&&typeof a!="string"){const h=Tc("span");if(o){const v=Be(h,Tc("span"));v.innerText=o}const f=Be(h,Tc("a.code-link"));f.setAttribute("href",a.target.toString()),t.add(qe(f,"click",v=>{this._openerService.open(a.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()}));const p=Be(f,Tc("span"));p.innerText=a.value;const m=Be(r,h);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{const h=Be(r,Tc("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(bl(u))for(const{message:h,resource:f,startLineNumber:p,startColumn:m}of u){const v=Be(r,Tc("div"));v.style.marginTop="8px";const b=Be(v,Tc("a"));b.innerText=`${fc(f)}(${p}, ${m}): `,b.style.cursor="pointer",t.add(qe(b,"click",S=>{S.stopPropagation(),S.preventDefault(),this._openerService&&this._openerService.open(f,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:p,startColumn:m}}}).catch(gn)}));const E=Be(v,Tc("span"));E.innerText=h,this._editor.applyFontInfo(E)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===Tr.Error||e.marker.severity===Tr.Warning||e.marker.severity===Tr.Info)&&t.addAction({label:C("view problem","View Problem"),commandId:Cp.ID,run:()=>{this._hover.hide(),N0.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const r=t.append(Tc("div"));this.recentMarkerCodeActionsInfo&&(W3.makeKey(this.recentMarkerCodeActionsInfo.marker)===W3.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=C("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?Oe.None:n.add(w1(()=>r.textContent=C("checkingForQuickFixes","Checking for quick fixes..."),200));r.textContent||(r.textContent=String.fromCharCode(160));const s=this.getCodeActions(e.marker);n.add(Un(()=>s.cancel())),s.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=C("noQuickFixes","No quick fixes available");return}r.style.display="none";let u=!1;n.add(Un(()=>{u||a.dispose()})),t.addAction({label:C("quick fixes","Quick Fix..."),commandId:tE.Id,run:d=>{u=!0;const h=j1.get(this._editor),f=Us(d);this._hover.hide(),h.showCodeActions(Eie,a,{x:f.left+6,y:f.top+f.height+6})}})},gn)}}getCodeActions(e){return cs(t=>UY(this._editor.getModel(),new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Eie,DC.None,t))}};AU=IYe([Sie(2,gG),Sie(3,Ll)],AU);fr((i,e)=>{const t=i.getColor(DB);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(TB);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const Ipe="editor.action.inlineSuggest.commit";class kpe{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return AYe(n,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class NYe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function AYe(i,e){const t=new NYe(i),n=e.map(r=>{const o=Q.lift(r.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:r.text}});n.sort((r,o)=>o.startOffset-r.startOffset);for(const r of n)i=i.substring(0,r.startOffset)+r.text+i.substring(r.endOffset);return i}class Lie{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class Npe extends Oe{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function OYe(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function Ape(i,e,t,n,r=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const o=e.getLineContent(i.range.startLineNumber),s=zi(o).length;if(i.range.startColumn-1<=s){const m=zi(i.text).length,v=o.substring(i.range.startColumn-1,s),b=Q.fromPositions(i.range.getStartPosition().delta(0,v.length),i.range.getEndPosition()),E=i.text.startsWith(v)?i.text.substring(v.length):i.text.substring(m);i={range:b,text:E,command:i.command}}const u=e.getValueInRange(i.range),d=RYe(u,i.text);if(!d)return;const h=i.range.startLineNumber,f=new Array;if(t==="prefix"){const m=d.filter(v=>v.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==u.length)return}const p=i.text.length-r;for(const m of d){const v=i.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&v<n.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;const b=m.modifiedStart+m.modifiedLength,E=Math.max(m.modifiedStart,Math.min(b,p)),S=i.text.substring(m.modifiedStart,E),w=i.text.substring(E,Math.max(m.modifiedStart,b));if(S.length>0){const L=og(S);f.push(new Lie(v,L,!1))}if(w.length>0){const L=og(w);f.push(new Lie(v,L,!0))}}return new kpe(h,f,0)}let mf;function RYe(i,e){if((mf==null?void 0:mf.originalValue)===i&&(mf==null?void 0:mf.newValue)===e)return mf==null?void 0:mf.changes;{const t=MYe(i,e);return mf={originalValue:i,newValue:e,changes:t},t}}function MYe(i,e){if(i.length>5e3||e.length>5e3)return;function t(u){let d=0;for(let h=0,f=u.length;h<f;h++){const p=u.charCodeAt(h);p>d&&(d=p)}return d}const n=Math.max(t(i),t(e));function r(u){if(u<0)throw new Error("unexpected");return n+u+1}function o(u){let d=0,h=0;const f=new Int32Array(u.length);for(let p=0,m=u.length;p<m;p++){const v=h*100+d;u[p]==="("?(f[p]=r(2*v),d++):u[p]===")"?(f[p]=r(2*v+1),d===1&&h++,d=Math.max(d-1,0)):f[p]=u.charCodeAt(p)}return f}const s=o(i),a=o(e);return new Bf({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}var PYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},FYe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},np=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let OU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Ra),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(r=>{new Set([Cw.Tab.id,Cw.DeleteLeft.id,Cw.DeleteRight.id,Ipe,"acceptSelectedSuggestion"]).has(r.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(r=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(r=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Un(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Zu.Automatic))}trigger(e){if(this.completionSession.value){e===Zu.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new BYe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return np(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};OU=PYe([FYe(2,Ir)],OU);class BYe extends Npe{constructor(e,t,n,r,o,s){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=r,this.cache=o,this.initialTriggerKind=s,this.minReservedLineCount=0,this.updateOperation=this._register(new Ra),this.updateSoon=this._register(new tr(()=>{let u=this.initialTriggerKind;return this.initialTriggerKind=Zu.Automatic,this.update(u)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const u=this.currentCompletion;if(u&&u.sourceInlineCompletion!==a){a=u.sourceInlineCompletion;const d=u.sourceProvider;d.handleItemDidShow&&d.handleItemDidShow(u.sourceInlineCompletions,a)}})),this._register(Un(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(u=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(u=>{this.scheduleAutomaticUpdate()})),this._register(XG.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return np(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return np(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return np(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Zu.Explicit?yield this.updateOperation.value.promise:yield this.update(Zu.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Zu.Explicit&&(yield this.update(Zu.Explicit))})}hasMultipleInlineCompletions(){var e;return np(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Ape(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return np(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=cs(o=>np(this,void 0,void 0,function*(){let s;try{s=yield Rpe(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},o)}catch(a){gn(a);return}o.isCancellationRequested||(this.cache.setValue(this.editor,s,e),this.onDidChangeEmitter.fire())})),r=new Ope(n,e);this.updateOperation.value=r,yield n,this.updateOperation.value===r&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[jr.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Ms):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class Ope{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class WYe extends Oe{constructor(e,t,n,r){super(),this.triggerKind=r;const o=e.deltaDecorations([],t.items.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._register(Un(()=>{e.deltaDecorations(o,[])})),this.completions=t.items.map((s,a)=>new VYe(s,o[a])),this._register(e.onDidChangeModelContent(()=>{let s=!1;const a=e.getModel();for(const u of this.completions){const d=a.getDecorationRange(u.decorationId);if(!d){gn(new Error("Decoration has no range"));continue}u.synchronizedRange.equalsRange(d)||(s=!0,u.synchronizedRange=d)}s&&n()})),this._register(t)}}class VYe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function HYe(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new Q(i.lineNumber,t.startColumn,i.lineNumber,n):Q.fromPositions(i,i.with(void 0,n))}function Rpe(i,e,t,n=Fn.None){return np(this,void 0,void 0,function*(){const r=HYe(i,e),o=XG.all(e),s=yield Promise.all(o.map(u=>np(this,void 0,void 0,function*(){const d=yield u.provideInlineCompletions(e,i,t,n);return{completions:d,provider:u,dispose:()=>{d&&u.freeInlineCompletions(d)}}}))),a=new Map;for(const u of s){const d=u.completions;if(d)for(const h of d.items.map(f=>({text:f.text,range:f.range?Q.lift(f.range):r,command:f.command,sourceProvider:u.provider,sourceInlineCompletions:d,sourceInlineCompletion:f})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const u of s)u.dispose()}}})}function i5(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=Uw(t,e.text),r=i.getOffsetAt(e.range.getStartPosition())+n,o=i.getPositionAt(r),s=t.substr(n),a=kF(s,e.text),u=i.getPositionAt(Math.max(r,i.getOffsetAt(e.range.getEndPosition())-a));return{range:Q.fromPositions(o,u),text:e.text.substr(n,e.text.length-n-a)}}class Ac{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),r;if(r=Ac._table[n],typeof r=="number")return this.pos+=1,{type:r,pos:e,len:1};if(Ac.isDigitCharacter(n)){r=8;do t+=1,n=this.value.charCodeAt(e+t);while(Ac.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}if(Ac.isVariableCharacter(n)){r=9;do n=this.value.charCodeAt(e+ ++t);while(Ac.isVariableCharacter(n)||Ac.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}r=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Ac._table[n]>"u"&&!Ac.isDigitCharacter(n)&&!Ac.isVariableCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}}Ac._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class iE{constructor(){this._children=[]}appendChild(e){return e instanceof gl&&this._children[this._children.length-1]instanceof gl?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,r=n.children.indexOf(e),o=n.children.slice(0);o.splice(r,1,...t),n._children=o,function s(a,u){for(const d of a)d.parent=u,s(d.children,d)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Y8)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class gl extends iE{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new gl(this.value)}}class Mpe extends iE{}class $c extends Mpe{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof WR?this._children[0]:void 0}clone(){let e=new $c(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class WR extends iE{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof gl&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new WR;return this.options.forEach(e.appendChild,e),e}}class ZY extends iE{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,r=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof Th&&!!o.elseValue)&&(r=this._replace([])),r}_replace(e){let t="";for(const n of this._children)if(n instanceof Th){let r=e[n.index]||"";r=n.resolve(r),t+=r}else t+=n.toString();return t}toString(){return""}clone(){let e=new ZY;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Th extends iE{constructor(e,t,n,r){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=r}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,r)=>r===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new Th(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class yO extends Mpe{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new gl(t)],!0):!1}clone(){const e=new yO(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function xie(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class Y8 extends iE{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof $c&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(r=>r===e?(n=!0,!1):(t+=r.len(),!0)),n?t:-1}fullLen(e){let t=0;return xie([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof $c&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof yO&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new Y8;return this._children=this.children.map(t=>t.clone()),e}walk(e){xie(this.children,e)}}class Z8{constructor(){this._scanner=new Ac,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const r=new Y8;for(;this._parse(r););const o=new Map,s=[];let a=0;r.walk(u=>(u instanceof $c&&(a+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(const u of s){const d=o.get(u.index);if(d){const h=new $c(u.index);h.transform=u.transform;for(const f of d)h.appendChild(f.clone());r.replace(u,[h])}}return n||(n=a>0&&t),!o.has(0)&&n&&r.appendChild(new $c(0)),r}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const r=this._scanner.next();if(r.type!==0&&r.type!==4&&r.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new gl(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new $c(Number(t)):new yO(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const o=new $c(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new gl("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const s=new WR;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let r;if((r=this._accept(5,!0))?r=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:r=this._accept(void 0,!0),!r)return this._backTo(t),!1;n.push(r)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new gl(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const o=new yO(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new gl("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new ZY,n="",r="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new gl(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let r=this._accept(8,!0);if(r)if(n){if(this._accept(4))return e.appendChild(new Th(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Th(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Th(Number(r),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Th(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Th(Number(r),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Th(Number(r),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Th(Number(r),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new gl(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const rs=new Uint8Array(16),La=[];for(let i=0;i<256;i++)La.push(i.toString(16).padStart(2,"0"));let RU;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?RU=crypto.getRandomValues.bind(crypto):RU=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function $Ye(){RU(rs),rs[6]=rs[6]&15|64,rs[8]=rs[8]&63|128;let i=0,e="";return e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e}const Die="code-workspace";function Tie(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&rn.isUri(e.uri)}function zYe(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class UYe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class jYe{constructor(e,t,n,r){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=r}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,r=o.multiline)}if(n&&r&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),s=zi(o,0,this._selection.startColumn-1);let a=s;e.snippet.walk(d=>d===e?!1:(d instanceof gl&&(a=zi(og(d.value).pop())),!0));const u=Uw(a,s);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,h,f)=>`${h}${a.substr(u)}${f}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class KYe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Gb(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Gb(this._model.uri.fsPath),r=n.lastIndexOf(".");return r<=0?n:n.slice(0,r)}else{if(t==="TM_DIRECTORY")return Qle(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(zG(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class GYe{constructor(e,t,n,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=r}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(r=>!bue(r));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class qYe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=_i.getComments(n);if(r){if(t==="LINE_COMMENT")return r.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return r.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return r.blockCommentEndToken||void 0}}}class Yf{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Yf.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Yf.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Yf.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Yf.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Yf.dayNames=[C("Sunday","Sunday"),C("Monday","Monday"),C("Tuesday","Tuesday"),C("Wednesday","Wednesday"),C("Thursday","Thursday"),C("Friday","Friday"),C("Saturday","Saturday")];Yf.dayNamesShort=[C("SundayShort","Sun"),C("MondayShort","Mon"),C("TuesdayShort","Tue"),C("WednesdayShort","Wed"),C("ThursdayShort","Thu"),C("FridayShort","Fri"),C("SaturdayShort","Sat")];Yf.monthNames=[C("January","January"),C("February","February"),C("March","March"),C("April","April"),C("May","May"),C("June","June"),C("July","July"),C("August","August"),C("September","September"),C("October","October"),C("November","November"),C("December","December")];Yf.monthNamesShort=[C("JanuaryShort","Jan"),C("FebruaryShort","Feb"),C("MarchShort","Mar"),C("AprilShort","Apr"),C("MayShort","May"),C("JuneShort","Jun"),C("JulyShort","Jul"),C("AugustShort","Aug"),C("SeptemberShort","Sep"),C("OctoberShort","Oct"),C("NovemberShort","Nov"),C("DecemberShort","Dec")];class YYe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=zYe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Tie(e))return Gb(e.uri.path);let t=Gb(e.configPath.path);return t.endsWith(Die)&&(t=t.substr(0,t.length-Die.length-1)),t}_resoveWorkspacePath(e){if(Tie(e))return hU(e.uri.fsPath);let t=Gb(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?hU(n):"/"}}class ZYe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return $Ye()}}class Oc{constructor(e,t,n,r){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=r,this._nestingLevel=1,this._placeholderGroups=lJ(t.placeholders,$c.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const r=this._snippet.offset(n),o=this._snippet.fullLen(n),s=Q.fromPositions(e.getPositionAt(this._offset+r),e.getPositionAt(this._offset+r+o)),a=n.isFinalTabstop?Oc._decor.inactiveFinal:Oc._decor.inactive,u=t.addDecoration(s,a);this._placeholderDecorations.set(n,u)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let r=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const s=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(s),u=this._editor.getModel().getValueInRange(a),d=o.transform.resolve(u).split(/\r\n|\r|\n/);for(let h=1;h<d.length;h++)d[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[h]);r.push(jr.replace(a,d.join(this._editor.getModel().getEOL())))}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(r=>{const o=new Set,s=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const u=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(u);s.push(new wt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),r.changeDecorationOptions(u,a.isFinalTabstop?Oc._decor.activeFinal:Oc._decor.active),o.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(h);r.changeDecorationOptions(f,h.isFinalTabstop?Oc._decor.activeFinal:Oc._decor.active),o.add(h)}}for(const[a,u]of this._placeholderDecorations)o.has(a)||r.changeDecorationOptions(u,a.isFinalTabstop?Oc._decor.inactiveFinal:Oc._decor.inactive);return s});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof $c){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const r of t){if(r.isFinalTabstop)break;n||(n=[],e.set(r.index,n));const o=this._placeholderDecorations.get(r),s=this._editor.getModel().getDecorationRange(o);if(!s){e.delete(r.index);break}n.push(s)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const r of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(!o._placeholderDecorations);const s=o._snippet.placeholderInfo.last.index;for(const u of o._snippet.placeholderInfo.all)u.isFinalTabstop?u.index=r.index+(s+1)/this._nestingLevel:u.index=r.index+u.index/this._nestingLevel;this._snippet.replace(r,o._snippet.children);const a=this._placeholderDecorations.get(r);n.removeDecoration(a),this._placeholderDecorations.delete(r);for(const u of o._snippet.placeholders){const d=o._snippet.offset(u),h=o._snippet.fullLen(u),f=Q.fromPositions(t.getPositionAt(o._offset+d),t.getPositionAt(o._offset+d+h)),p=n.addDecoration(f,Oc._decor.inactive);this._placeholderDecorations.set(u,p)}}this._placeholderGroups=lJ(this._snippet.placeholders,$c.compareByIndex)})}}Oc._decor={active:Ln.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Ln.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Ln.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Ln.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const Iie={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class xf{constructor(e,t,n=Iie){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,r,o){const s=e.getLineContent(t.lineNumber),a=zi(s,0,t.column-1);let u;return n.walk(d=>{if(!(d instanceof gl)||d.parent instanceof WR)return!0;const h=d.value.split(/\r\n|\r|\n/);if(r){const p=n.offset(d);if(p===0)h[0]=e.normalizeIndentation(h[0]);else{u=u??n.toString();let m=u.charCodeAt(p-1);(m===10||m===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let m=1;m<h.length;m++)h[m]=e.normalizeIndentation(a+h[m])}const f=h.join(e.getEOL());return f!==d.value&&(d.parent.replace(d,[new gl(f)]),u=void 0),!0}),a}static adjustSelection(e,t,n,r){if(n!==0||r!==0){const{positionLineNumber:o,positionColumn:s}=t,a=s-n,u=s+r,d=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:u});t=wt.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,r,o,s,a,u){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const f=e.getModel(),p=e.invokeWithinContext(A=>A.get(jde)),m=e.invokeWithinContext(A=>new KYe(A.get(wR),f)),v=()=>a;let b=0,E=f.getValueInRange(xf.adjustSelection(f,e.getSelection(),n,0)),S=f.getValueInRange(xf.adjustSelection(f,e.getSelection(),0,r)),w=f.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const L=e.getSelections().map((A,N)=>({selection:A,idx:N})).sort((A,N)=>Q.compareRangesUsingStarts(A.selection,N.selection));for(const{selection:A,idx:N}of L){let H=xf.adjustSelection(f,A,n,0),M=xf.adjustSelection(f,A,0,r);E!==f.getValueInRange(H)&&(H=A),S!==f.getValueInRange(M)&&(M=A);const R=A.setStartPosition(H.startLineNumber,H.startColumn).setEndPosition(M.endLineNumber,M.endColumn),q=new Z8().parse(t,!0,o),X=R.getStartPosition(),$=xf.adjustWhitespace(f,X,q,s||N>0&&w!==f.getLineFirstNonWhitespaceColumn(A.positionLineNumber),!0);q.resolveVariables(new UYe([m,new GYe(v,N,L.length,e.getOption(70)==="spread"),new jYe(f,A,N,u),new qYe(f,A),new Yf,new YYe(p),new ZYe]));const I=f.getOffsetAt(X)+b;b+=q.toString().length-f.getValueLengthInRange(R),d[N]=jr.replace(R,q.toString()),d[N].identifier={major:N,minor:0},h[N]=new Oc(e,q,I,$)}return{edits:d,snippets:h}}dispose(){ri(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=xf.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(r=>!!r.identifier).map(r=>wt.fromPositions(r.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=Iie){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:r}=xf.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,o=>{for(const s of this._snippets)s.merge(r);return console.assert(r.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):o.filter(s=>!!s.identifier).map(s=>wt.fromPositions(s.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const r=n.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const r=n.computePossibleSelections();if(t.size===0)for(const[o,s]of r){s.sort(Q.compareRangesUsingStarts);for(const a of e)if(s[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,s)=>{o.push(...r.get(s))})}e.sort(Q.compareRangesUsingStarts);for(let[n,r]of t){if(r.length!==e.length){t.delete(n);continue}r.sort(Q.compareRangesUsingStarts);for(let o=0;o<r.length;o++)if(!r[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}}var Y2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const $n={Visible:new Dt("suggestWidgetVisible",!1,C("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new Dt("suggestWidgetDetailsVisible",!1,C("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Dt("suggestWidgetMultipleSuggestions",!1,C("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Dt("suggestionMakesTextEdit",!0,C("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Dt("acceptSuggestionOnEnter",!0,C("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Dt("suggestionHasInsertAndReplaceRange",!1,C("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Dt("suggestionInsertMode",void 0,{type:"string",description:C("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Dt("suggestionCanResolve",!1,C("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},A0=new Rt("suggestWidgetStatusBar");class XYe{constructor(e,t,n,r){this.position=e,this.completion=t,this.container=n,this.provider=r,this.isInvalid=!1,this.score=Yh.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),Q.isIRange(t.range)?(this.editStart=new Ee(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Ee(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Ee(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Ee(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Ee(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Ee(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range.insert)||Q.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Y2(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Cg(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class r5{constructor(e=2,t=new Set,n=new Set,r=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=r}}r5.default=new r5;let QYe;function JYe(){return QYe}class eZe{constructor(e,t,n,r){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=r}}function Ppe(i,e,t=r5.default,n={triggerKind:0},r=Fn.None){return Y2(this,void 0,void 0,function*(){const o=new ig(!0);e=e.clone();const s=i.getWordAtPosition(e),a=s?new Q(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn):Q.fromPositions(e),u={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},d=[],h=new Je,f=[];let p=!1;const m=(b,E,S)=>{var w,L,A;if(E){for(let N of E.suggestions)if(!t.kindFilter.has(N.kind)){if(!t.showDeprecated&&(!((w=N==null?void 0:N.tags)===null||w===void 0)&&w.includes(1)))continue;N.range||(N.range=u),N.sortText||(N.sortText=typeof N.label=="string"?N.label:N.label.label),!p&&N.insertTextRules&&N.insertTextRules&4&&(p=Z8.guessNeedsClipboard(N.insertText)),d.push(new XYe(e,N,E,b))}JK(E)&&h.add(E),f.push({providerName:(L=b._debugDisplayName)!==null&&L!==void 0?L:"unkown_provider",elapsedProvider:(A=E.duration)!==null&&A!==void 0?A:-1,elapsedOverall:S.elapsed()})}},v=(()=>Y2(this,void 0,void 0,function*(){}))();for(let b of Ah.orderedGroups(i)){let E=d.length;if(yield Promise.all(b.map(S=>Y2(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(S)))try{const w=new ig(!0),L=yield S.provideCompletionItems(i,e,n,r);m(S,L,w)}catch(w){Ms(w)}}))),E!==d.length||r.isCancellationRequested)break}return yield v,r.isCancellationRequested?(h.dispose(),Promise.reject(vC())):new eZe(d.sort(Fpe(t.snippetSortOrder)),p,{entries:f,elapsed:o.elapsed()},h)})}function XY(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function tZe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return XY(i,e)}function nZe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return XY(i,e)}const X8=new Map;X8.set(0,tZe);X8.set(2,nZe);X8.set(1,XY);function Fpe(i){return X8.get(i)}Xn.registerCommand("_executeCompletionItemProvider",(i,...e)=>Y2(void 0,void 0,void 0,function*(){const[t,n,r,o]=e;Yi(rn.isUri(t)),Yi(Ee.isIPosition(n)),Yi(typeof r=="string"||!r),Yi(typeof o=="number"||!o);const s=yield i.get(Ja).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},u=[],d=yield Ppe(s.object.textEditorModel,Ee.lift(n),void 0,{triggerCharacter:r,triggerKind:r?1:0});for(const h of d.items)u.length<(o??0)&&u.push(h.resolve(Fn.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(u),a}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{s.dispose()}}));const MU=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};Ah.register("*",MU);function iZe(i,e){setTimeout(()=>{MU.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(MU))},0)}var rZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},kie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Nie={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Rs=class d2{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new Je,this._modelVersionId=-1,this._inSnippet=d2.InSnippetMode.bindTo(n),this._hasNextTabstop=d2.HasNextTabstop.bindTo(n),this._hasPrevTabstop=d2.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(d2.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Nie:Object.assign(Object.assign({},Nie),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new xf(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>wt.fromPositions(n.getStartPosition())));const[t]=e.options;iZe(this._editor,e.options.map((n,r)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(r+1),range:Q.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Rs.ID="snippetController2";Rs.InSnippetMode=new Dt("inSnippetMode",!1,C("inSnippetMode","Whether the editor in current in snippet mode"));Rs.HasNextTabstop=new Dt("hasNextTabstop",!1,C("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Rs.HasPrevTabstop=new Dt("hasPrevTabstop",!1,C("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Rs=rZe([kie(1,wg),kie(2,cn)],Rs);ki(Rs.ID,Rs);const Q8=Ps.bindToContribution(Rs.get);nt(new Q8({id:"jumpToNextSnippetPlaceholder",precondition:_t.and(Rs.InSnippetMode,Rs.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:2}}));nt(new Q8({id:"jumpToPrevSnippetPlaceholder",precondition:_t.and(Rs.InSnippetMode,Rs.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:1026}}));nt(new Q8({id:"leaveSnippet",precondition:Rs.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:9,secondary:[1033]}}));nt(new Q8({id:"acceptSnippet",precondition:Rs.InSnippetMode,handler:i=>i.finish()}));var oZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Aie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class QY{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let r=n[0].score[0];for(let o=0;o<n.length;o++){const{score:s,completion:a}=n[o];if(s[0]!==r)break;if(a.preselect)return o}return 0}}class Bpe extends QY{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class sZe extends QY{constructor(){super("recentlyUsed"),this._cache=new z0(300,.66),this._seq=0}memorize(e,t,n){const r=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(r,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,n);let o=n[0].score[0],s=-1,a=-1,u=-1;for(let d=0;d<n.length&&n[d].score[0]===o;d++){const h=`${e.getLanguageId()}/${n[d].textLabel}`,f=this._cache.peek(h);if(f&&f.touch>u&&f.type===n[d].completion.kind&&f.insertText===n[d].completion.insertText&&(u=f.touch,a=d),n[d].completion.preselect&&s===-1)return s=d}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,r]of e)r.touch=t,r.type=typeof r.type=="number"?r.type:Gce(r.type),this._cache.set(n,r);this._seq=this._cache.size}}class aZe extends QY{constructor(){super("recentlyUsedByPrefix"),this._trie=vw.forStrings(),this._seq=0}memorize(e,t,n){const{word:r}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${r}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,n);let o=`${e.getLanguageId()}/${r}`,s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(let a=0;a<n.length;a++){let{kind:u,insertText:d}=n[a].completion;if(u===s.type&&d===s.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Gce(n.type),this._trie.set(t,n)}}}let wO=class E4{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Je,this._persistSoon=new tr(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===V3.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==r){this._saveState();const o=E4._strategyCtors.get(r)||Bpe;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,u=this._storageService.get(`${E4._storagePrefix}/${r}`,a);u&&this._strategy.fromJSON(JSON.parse(u))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${E4._storagePrefix}/${this._strategy.name}`,n,t,1)}}};wO._strategyCtors=new Map([["recentlyUsedByPrefix",aZe],["recentlyUsed",sZe],["first",Bpe]]);wO._storagePrefix="suggest/memories";wO=oZe([Aie(0,Dg),Aie(1,ir)],wO);const Wpe=gi("ISuggestMemories");U0(Wpe,wO,!0);var lZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uZe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SO=class Vpe{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Vpe.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),r=this._editor.getSelection(),o=n.getWordAtPosition(r.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===r.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};SO.AtEnd=new Dt("atEndOfWord",!1);SO=lZe([uZe(1,cn)],SO);var cZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},dZe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Y1=class L4{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=L4.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(L4._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let r=n;for(;r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===n||!t.items[r].completion.additionalTextEdits););return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=L4._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Y1.OtherSuggestions=new Dt("hasOtherSuggestions",!1);Y1=cZe([dZe(1,cn)],Y1);class hZe{constructor(e,t,n){this._disposables=new Je,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(r=>{if(this._active&&!t.isFrozen()){const o=r.charCodeAt(r.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!bl(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Py;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var fZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Su{provideSelectionRanges(e,t){return fZe(this,void 0,void 0,function*(){const n=[];for(const r of t){const o=[];n.push(o);const s=new Map;yield new Promise(a=>Su._bracketsRightYield(a,0,e,r,s)),yield new Promise(a=>Su._bracketsLeftYield(a,0,e,r,s,o))}return n})}static _bracketsRightYield(e,t,n,r,o){const s=new Map,a=Date.now();for(;;){if(t>=Su._maxRounds){e();break}if(!r){e();break}let u=n.bracketPairs.findNextBracket(r);if(!u){e();break}if(Date.now()-a>Su._maxDuration){setTimeout(()=>Su._bracketsRightYield(e,t+1,n,r,o));break}const h=u.close[0];if(u.isOpen){let f=s.has(h)?s.get(h):0;s.set(h,f+1)}else{let f=s.has(h)?s.get(h):0;if(f-=1,s.set(h,Math.max(0,f)),f<0){let p=o.get(h);p||(p=new ku,o.set(h,p)),p.push(u.range)}}r=u.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,r,o,s){const a=new Map,u=Date.now();for(;;){if(t>=Su._maxRounds&&o.size===0){e();break}if(!r){e();break}let d=n.bracketPairs.findPrevBracket(r);if(!d){e();break}if(Date.now()-u>Su._maxDuration){setTimeout(()=>Su._bracketsLeftYield(e,t+1,n,r,o,s));break}const f=d.close[0];if(d.isOpen){let p=a.has(f)?a.get(f):0;if(p-=1,a.set(f,Math.max(0,p)),p<0){let m=o.get(f);if(m){let v=m.shift();m.size===0&&o.delete(f);const b=Q.fromPositions(d.range.getEndPosition(),v.getStartPosition()),E=Q.fromPositions(d.range.getStartPosition(),v.getEndPosition());s.push({range:b}),s.push({range:E}),Su._addBracketLeading(n,E,s)}}}else{let p=a.has(f)?a.get(f):0;a.set(f,p+1)}r=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const r=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(r);o!==0&&o!==t.startColumn&&(n.push({range:Q.fromPositions(new Ee(r,o),t.getEndPosition())}),n.push({range:Q.fromPositions(new Ee(r,1),t.getEndPosition())}));const s=r-1;if(s>0){const a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(n.push({range:Q.fromPositions(new Ee(s,a),t.getEndPosition())}),n.push({range:Q.fromPositions(new Ee(s,1),t.getEndPosition())}))}}}Su._maxDuration=30;Su._maxRounds=2;var gZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Af{static create(e,t){return gZe(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return Af.None;const n=t.getModel(),r=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Af.None;const[o]=yield new Su().provideSelectionRanges(n,[r]);if(o.length===0)return Af.None;const s=yield e.computeWordRanges(n.uri,o[0].range);if(!s)return Af.None;const a=n.getWordUntilPosition(r);return delete s[a.word],new class extends Af{distance(u,d){if(!r.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;let h=typeof d.label=="string"?d.label:d.label.label,f=s[h];if($ue(f))return 2<<20;let p=DG(f,Q.fromPositions(u),Q.compareRangesUsingStarts),m=p>=0?f[p]:f[Math.max(0,~p-1)],v=o.length;for(const b of o){if(!Q.containsRange(b.range,m))break;v-=1}return v}}})}}Af.None=new class extends Af{distance(){return 0}};class Ib{constructor(e,t,n,r,o,s,a){this.clipboardText=a,this._snippetCompareFn=Ib._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=r,this._options=o,this._refilterKind=1,this._lineContext=n,s==="top"?this._snippetCompareFn=Ib._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=Ib._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let r="",o="";const s=this._refilterKind===1?this._items:this._filteredItems,a=[],u=!this._options.filterGraceful||s.length>2e3?iS:c4e;for(let d=0;d<s.length;d++){const h=s[d];if(h.isInvalid)continue;this._providerInfo.set(h.provider,!!h.container.incomplete);const f=h.position.column-h.editStart.column,p=f+n-(h.position.column-this._column);if(r.length!==p&&(r=p===0?"":t.slice(-p),o=r.toLowerCase()),h.word=r,p===0)h.score=Yh.Default;else{let m=0;for(;m<f;){const v=r.charCodeAt(m);if(v===32||v===9)m+=1;else break}if(m>=p)h.score=Yh.Default;else if(typeof h.completion.filterText=="string"){let v=u(r,o,m,h.completion.filterText,h.filterTextLow,0,!1);if(!v)continue;yH(h.completion.filterText,h.textLabel)===0?h.score=v:(h.score=s4e(r,o,m,h.textLabel,h.labelLow,0),h.score[0]=v[0])}else{let v=u(r,o,m,h.textLabel,h.labelLow,0,!1);if(!v)continue;h.score=v}}h.idx=d,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?SH(e.length-.85,e,(d,h)=>d-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Ib._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Ib._compareCompletionItems(e,t)}}var pZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ry=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},mZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class oy{constructor(e,t,n,r){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=r}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const r=t.getWordAtPosition(n);return!(!r||r.endColumn!==n.column||!isNaN(Number(r.word)))}}function _Ze(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function vZe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let PU=class Hpe{constructor(e,t,n,r,o,s,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=r,this._logService=o,this._contextKeyService=s,this._configurationService=a,this._toDispose=new Je,this._quickSuggestDelay=10,this._triggerCharacterListener=new Je,this._triggerQuickSuggest=new Ma,this._state=0,this._completionDisposables=new Je,this._onDidCancel=new Ce,this._onDidTrigger=new Ce,this._onDidSuggest=new Ce,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new wt(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(Ah.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{this._onCursorChange(d)}));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{u=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{u=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{u||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){ri(this._triggerCharacterListener),ri([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of Ah.all(this._editor.getModel()))for(const r of n.triggerCharacters||[]){let o=e.get(r);o||(o=new Set,o.add(JYe()),e.set(r,o)),o.add(n)}const t=n=>{if(!vZe(this._editor,this._contextKeyService,this._configurationService)||oy.shouldAutoTrigger(this._editor))return;if(!n){const s=this._editor.getPosition();n=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let r="";jw(n.charCodeAt(n.length-1))?Vo(n.charCodeAt(n.length-2))&&(r=n.substr(n.length-2)):r=n.charAt(n.length-1);const o=e.get(r);if(o){const s=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:r},!!this._completionModel,o,s)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!Ah.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Rs.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!oy.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const r=e.getLineTokens(t.lineNumber),o=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&o===0||n.comments&&o===1||n.strings&&o===2))return}_Ze(this._editor,this._contextKeyService,this._configurationService)&&Ah.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new oy(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,r){var o;if(!this._editor.hasModel())return;const s=this._editor.getModel(),a=e.auto,u=new oy(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=u;let d={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new aa;const h=this._editor.getOption(100);let f=1;switch(h){case"top":f=0;break;case"bottom":f=2;break}const{itemKind:p,showDeprecated:m}=Hpe._createSuggestFilter(this._editor),v=Af.create(this._editorWorkerService,this._editor),b=Ppe(s,this._editor.getPosition(),new r5(f,p,n,m),d,this._requestToken.token);Promise.all([b,v]).then(([E,S])=>mZe(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let L=r==null?void 0:r.clipboardText;if(!L&&E.needsClipboard&&(L=yield this._clipboardService.readText()),this._state===0)return;const A=this._editor.getModel();let N=E.items;if(r){const M=Fpe(f);N=N.concat(r.items).sort(M)}const H=new oy(A,this._editor.getPosition(),a,e.shy);this._completionModel=new Ib(N,this._context.column,{leadingLineContent:H.leadingLineContent,characterCountDelta:H.column-this._context.column},S,this._editor.getOption(105),this._editor.getOption(100),L),this._completionDisposables.add(E.disposable),this._onNewContext(H),this._reportDurationsTelemetry(E.durations)})).catch(gn)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const r=e.getOption(105);return r.showMethods||t.add(0),r.showFunctions||t.add(1),r.showConstructors||t.add(2),r.showFields||t.add(3),r.showVariables||t.add(4),r.showClasses||t.add(5),r.showStructs||t.add(6),r.showInterfaces||t.add(7),r.showModules||t.add(8),r.showProperties||t.add(9),r.showEvents||t.add(10),r.showOperators||t.add(11),r.showUnits||t.add(12),r.showValues||t.add(13),r.showConstants||t.add(14),r.showEnums||t.add(15),r.showEnumMembers||t.add(16),r.showKeywords||t.add(17),r.showWords||t.add(18),r.showColors||t.add(19),r.showFiles||t.add(20),r.showReferences||t.add(21),r.showColors||t.add(22),r.showFolders||t.add(23),r.showTypeParameters||t.add(24),r.showSnippets||t.add(27),r.showUsers||t.add(25),r.showIssues||t.add(26),{itemKind:t,showDeprecated:r.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(zi(e.leadingLineContent)!==zi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(Ah.all(this._editor.getModel()));for(let r of this._completionModel.allProvider)t.delete(r);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(oy.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};PU=pZe([ry(1,Hu),ry(2,K0),ry(3,yg),ry(4,wg),ry(5,cn),ry(6,ir)],PU);class J8{constructor(e,t){this._disposables=new Je,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),r=n.length;let o=!1;for(let a=0;a<r;a++)if(!n[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const s=e.getModel();for(let a=0;a<r;a++){const u=n[a];if(s.getValueLengthInRange(u)>J8._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(u),multiline:u.startLineNumber!==u.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}J8._maxSelectionLength=51200;var bZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class JY extends uS{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=C("ddd","{0} ({1})",this._action.label,JY.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let FU=class{constructor(e,t,n,r){this._menuService=n,this._contextKeyService=r,this._menuDisposables=new Je,this.element=Be(e,Ge(".suggest-status-bar"));const o=s=>s instanceof C0?t.createInstance(JY,s,void 0):void 0;this._leftActions=new ug(this.element,{actionViewItemProvider:o}),this._rightActions=new ug(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(A0,this._contextKeyService),t=()=>{const n=[],r=[];for(let[o,s]of e.getActions())o==="left"?n.push(...s):r.push(...s);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(r)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};FU=bZe([gW(1,Nn),gW(2,yC),gW(3,cn)],FU);const CZe=ye("symbolIcon.arrayForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yZe=ye("symbolIcon.booleanForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wZe=ye("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SZe=ye("symbolIcon.colorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),EZe=ye("symbolIcon.constantForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),LZe=ye("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xZe=ye("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),DZe=ye("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TZe=ye("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),IZe=ye("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kZe=ye("symbolIcon.fileForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),NZe=ye("symbolIcon.folderForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),AZe=ye("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),OZe=ye("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),RZe=ye("symbolIcon.keyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),MZe=ye("symbolIcon.keywordForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),PZe=ye("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),FZe=ye("symbolIcon.moduleForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),BZe=ye("symbolIcon.namespaceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),WZe=ye("symbolIcon.nullForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),VZe=ye("symbolIcon.numberForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),HZe=ye("symbolIcon.objectForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$Ze=ye("symbolIcon.operatorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zZe=ye("symbolIcon.packageForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),UZe=ye("symbolIcon.propertyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jZe=ye("symbolIcon.referenceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),KZe=ye("symbolIcon.snippetForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),GZe=ye("symbolIcon.stringForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qZe=ye("symbolIcon.structForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),YZe=ye("symbolIcon.textForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ZZe=ye("symbolIcon.typeParameterForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),XZe=ye("symbolIcon.unitForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),QZe=ye("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));fr((i,e)=>{const t=i.getColor(CZe);t&&e.addRule(`${_e.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(yZe);n&&e.addRule(`${_e.symbolBoolean.cssSelector} { color: ${n}; }`);const r=i.getColor(wZe);r&&e.addRule(`${_e.symbolClass.cssSelector} { color: ${r}; }`);const o=i.getColor(PZe);o&&e.addRule(`${_e.symbolMethod.cssSelector} { color: ${o}; }`);const s=i.getColor(SZe);s&&e.addRule(`${_e.symbolColor.cssSelector} { color: ${s}; }`);const a=i.getColor(EZe);a&&e.addRule(`${_e.symbolConstant.cssSelector} { color: ${a}; }`);const u=i.getColor(LZe);u&&e.addRule(`${_e.symbolConstructor.cssSelector} { color: ${u}; }`);const d=i.getColor(xZe);d&&e.addRule(`
			${_e.symbolValue.cssSelector},${_e.symbolEnum.cssSelector} { color: ${d}; }`);const h=i.getColor(DZe);h&&e.addRule(`${_e.symbolEnumMember.cssSelector} { color: ${h}; }`);const f=i.getColor(TZe);f&&e.addRule(`${_e.symbolEvent.cssSelector} { color: ${f}; }`);const p=i.getColor(IZe);p&&e.addRule(`${_e.symbolField.cssSelector} { color: ${p}; }`);const m=i.getColor(kZe);m&&e.addRule(`${_e.symbolFile.cssSelector} { color: ${m}; }`);const v=i.getColor(NZe);v&&e.addRule(`${_e.symbolFolder.cssSelector} { color: ${v}; }`);const b=i.getColor(AZe);b&&e.addRule(`${_e.symbolFunction.cssSelector} { color: ${b}; }`);const E=i.getColor(OZe);E&&e.addRule(`${_e.symbolInterface.cssSelector} { color: ${E}; }`);const S=i.getColor(RZe);S&&e.addRule(`${_e.symbolKey.cssSelector} { color: ${S}; }`);const w=i.getColor(MZe);w&&e.addRule(`${_e.symbolKeyword.cssSelector} { color: ${w}; }`);const L=i.getColor(FZe);L&&e.addRule(`${_e.symbolModule.cssSelector} { color: ${L}; }`);const A=i.getColor(BZe);A&&e.addRule(`${_e.symbolNamespace.cssSelector} { color: ${A}; }`);const N=i.getColor(WZe);N&&e.addRule(`${_e.symbolNull.cssSelector} { color: ${N}; }`);const H=i.getColor(VZe);H&&e.addRule(`${_e.symbolNumber.cssSelector} { color: ${H}; }`);const M=i.getColor(HZe);M&&e.addRule(`${_e.symbolObject.cssSelector} { color: ${M}; }`);const R=i.getColor($Ze);R&&e.addRule(`${_e.symbolOperator.cssSelector} { color: ${R}; }`);const q=i.getColor(zZe);q&&e.addRule(`${_e.symbolPackage.cssSelector} { color: ${q}; }`);const X=i.getColor(UZe);X&&e.addRule(`${_e.symbolProperty.cssSelector} { color: ${X}; }`);const $=i.getColor(jZe);$&&e.addRule(`${_e.symbolReference.cssSelector} { color: ${$}; }`);const I=i.getColor(KZe);I&&e.addRule(`${_e.symbolSnippet.cssSelector} { color: ${I}; }`);const O=i.getColor(GZe);O&&e.addRule(`${_e.symbolString.cssSelector} { color: ${O}; }`);const B=i.getColor(qZe);B&&e.addRule(`${_e.symbolStruct.cssSelector} { color: ${B}; }`);const W=i.getColor(YZe);W&&e.addRule(`${_e.symbolText.cssSelector} { color: ${W}; }`);const j=i.getColor(ZZe);j&&e.addRule(`${_e.symbolTypeParameter.cssSelector} { color: ${j}; }`);const U=i.getColor(XZe);U&&e.addRule(`${_e.symbolUnit.cssSelector} { color: ${U}; }`);const G=i.getColor(QZe);G&&e.addRule(`${_e.symbolVariable.cssSelector} { color: ${G}; }`)});class $pe{constructor(){this._onDidWillResize=new Ce,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Ce,this.onDidResize=this._onDidResize.event,this._sashListener=new Je,this._size=new dr(0,0),this._minSize=new dr(0,0),this._maxSize=new dr(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Hs(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Hs(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Hs(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:b3.North}),this._southSash=new Hs(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:b3.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Mt.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Mt.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(n=r.currentX-r.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(n=-(r.currentX-r.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Mt.any(this._eastSash.onDidReset,this._westSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Mt.any(this._northSash.onDidReset,this._southSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:r}=this._minSize,{height:o,width:s}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(r,Math.min(s,t));const a=new dr(t,e);dr.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var JZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},eXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function eZ(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let BU=class{constructor(e,t){this._editor=e,this._onDidClose=new Ce,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Ce,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Je,this._renderDisposeable=new Je,this._borderWidth=1,this._size=new dr(330,0),this.domNode=Ge(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Fp,{editor:e}),this._body=Ge(".body"),this._scrollbar=new pR(this._body,{}),Be(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Be(this._body,Ge(".header")),this._close=Be(this._header,Ge("span"+_e.close.cssSelector)),this._close.title=C("details.close","Close"),this._type=Be(this._header,Ge("p.type")),this._docs=Be(this._body,Ge("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(Kc?js.fontFamily:null),r=e.get(106)||t.fontSize,o=e.get(107)||t.lineHeight,s=t.fontWeight,a=`${r}px`,u=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/r}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=u,this._close.style.width=u}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=C("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,r;this._renderDisposeable.clear();let{detail:o,documentation:s}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(r=e.completion.commitCharacters)===null||r===void 0?void 0:r.join("")}
`,s=new Rp().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!eZ(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){const a=o.length>1e5?`${o.substr(0,1e5)}…`:o;this._type.textContent=a,this._type.title=a,Lu(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else $o(this._type),this._type.title="",ja(this._type),this.domNode.classList.add("no-type");if($o(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),$o(this._docs);const a=this._markdownRenderer.render(s);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new dr(e,t);dr.equals(n,this._size)||(this._size=n,xLe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};BU=JZe([eXe(1,Nn)],BU);class tXe{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Je,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new $pe,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,r,o=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&r){this.widget.layout(a.dimension.width,a.dimension.height);let u=!1;a.west&&(s=r.width-a.dimension.width,u=!0),a.north&&(o=r.height-a.dimension.height,u=!0),u&&this._applyTopLeft({top:n.top+o,left:n.left+s})}a.done&&(n=void 0,r=void 0,o=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const r=e.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var r;const o=dB(document.body),s=this.widget.getLayoutInfo(),a=new dr(220,2*s.lineHeight),u=e.top,d=function(){const L=o.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),A=-s.borderWidth+e.left+e.width,N=new dr(L,o.height-e.top-s.borderHeight-s.verticalPadding),H=N.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:A,fit:L-t.width,maxSizeTop:N,maxSizeBottom:H,minSize:a.with(Math.min(L,a.width))}}(),h=function(){const L=e.left-s.borderWidth-s.horizontalPadding,A=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),N=new dr(L,o.height-e.top-s.borderHeight-s.verticalPadding),H=N.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:A,fit:L-t.width,maxSizeTop:N,maxSizeBottom:H,minSize:a.with(Math.min(L,a.width))}}(),f=function(){const L=e.left,A=-s.borderWidth+e.top+e.height,N=new dr(e.width-s.borderHeight,o.height-e.top-e.height-s.verticalPadding);return{top:A,left:L,fit:N.height-t.height,maxSizeBottom:N,maxSizeTop:N,minSize:a.with(N.width)}}(),p=[d,h,f],m=(r=p.find(L=>L.fit>=0))!==null&&r!==void 0?r:p.sort((L,A)=>A.fit-L.fit)[0],v=e.top+e.height-s.borderHeight;let b,E=t.height;const S=Math.max(m.maxSizeTop.height,m.maxSizeBottom.height);E>S&&(E=S);let w;n?E<=m.maxSizeTop.height?(b=!0,w=m.maxSizeTop):(b=!1,w=m.maxSizeBottom):E<=m.maxSizeBottom.height?(b=!1,w=m.maxSizeBottom):(b=!0,w=m.maxSizeTop),this._applyTopLeft({left:m.left,top:b?m.top:v-E}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,m===d,b,m!==d),this._resizable.minSize=m.minSize,this._resizable.maxSize=w,this._resizable.layout(E,Math.min(w.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var hp;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(hp||(hp={}));function pP(i,e,t,n){const r=n===hp.ROOT_FOLDER?["rootfolder-icon"]:n===hp.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===In.data?o=w0.parseMetaData(t).get(w0.META_DATA_LABEL):o=Oie(Rce(t).toLowerCase()),n===hp.FOLDER)r.push(`${o}-name-folder-icon`);else{if(o){if(r.push(`${o}-name-file-icon`),o.length<=255){const a=o.split(".");for(let u=1;u<a.length;u++)r.push(`${a.slice(u).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}const s=nXe(i,e,t);s&&r.push(`${Oie(s)}-lang-file-icon`)}}return r}function nXe(i,e,t){if(!t)return null;let n=null;if(t.scheme===In.data){const o=w0.parseMetaData(t).get(w0.META_DATA_MIME);o&&(n=e.getModeId(o))}else{const r=i.getModel(t);r&&(n=r.getLanguageId())}return n&&n!==jS?n:e.getModeIdByFilepathOrFirstLine(t)}function Oie(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var iXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},pW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},WN;function zpe(i){return`suggest-aria-id:${i}`}const rXe=ds("suggest-more-info",_e.chevronRight,C("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),oXe=new(WN=class x4{extract(e,t){if(e.textLabel.match(x4._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(x4._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=x4._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},WN._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,WN._regexStrict=new RegExp(`^${WN._regexRelaxed.source}$`,"i"),WN);let WU=class{constructor(e,t,n,r){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=r,this._onDidToggleDetails=new Ce,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Je,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Be(e,Ge(".icon")),t.colorspan=Be(t.icon,Ge("span.colorspan"));const n=Be(e,Ge(".contents")),r=Be(n,Ge(".main"));t.iconContainer=Be(r,Ge(".icon-label.codicon")),t.left=Be(r,Ge("span.left")),t.right=Be(r,Ge("span.right")),t.iconLabel=new $3(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Be(t.left,Ge("span.signature-label")),t.qualifierLabel=Be(t.left,Ge("span.qualifier-label")),t.detailsLabel=Be(t.right,Ge("span.details-label")),t.readMore=Be(t.right,Ge("span.readMore"+mr.asCSSSelector(rXe))),t.readMore.title=C("readMore","Read More");const o=()=>{const s=this._editor.getOptions(),a=s.get(43),u=a.getMassagedFontFamily(Kc?js.fontFamily:null),d=a.fontFeatureSettings,h=s.get(106)||a.fontSize,f=s.get(107)||a.lineHeight,p=a.fontWeight,m=`${h}px`,v=`${f}px`;t.root.style.fontSize=m,t.root.style.fontWeight=p,r.style.fontFamily=u,r.style.fontFeatureSettings=d,r.style.lineHeight=v,t.icon.style.height=v,t.icon.style.width=v,t.readMore.style.height=v,t.readMore.style.width=v};return o(),t.disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(106)||s.hasChanged(107))&&o()})),t}renderElement(e,t,n){const{completion:r}=e;n.root.id=zpe(t),n.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:s8(e.score)};let s=[];if(r.kind===19&&oXe.extract(e,s))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=s[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:e.textLabel}),hp.FILE),u=pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:r.detail}),hp.FILE);o.extraClasses=a.length>u.length?a:u}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=zue([pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:e.textLabel}),hp.FOLDER),pP(this._modelService,this._modeService,rn.from({scheme:"fake",path:r.detail}),hp.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...lNe(r.kind).split(" ")));r.tags&&r.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof r.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=mW(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=mW(r.label.detail||""),n.detailsLabel.textContent=mW(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Lu(n.detailsLabel):ja(n.detailsLabel),eZ(e)?(n.right.classList.add("can-expand-details"),Lu(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),ja(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};WU=iXe([pW(1,To),pW(2,Fs),pW(3,xr)],WU);function mW(i){return i.replace(/\r\n|\r|\n/g,"")}var sXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},mP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},aXe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const lXe=ye("editorSuggestWidget.selectedBackground",{dark:e4,light:e4,hc:e4},C("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));class uXe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof G1}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(dr.is(n))return dr.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let EO=class VU{constructor(e,t,n,r,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Ma,this._disposables=new Je,this._onDidSelect=new Ce,this._onDidFocus=new Ce,this._onDidHide=new Ce,this._onDidShow=new Ce,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Ce,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new $pe,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new cXe(this,e),this._persistedSize=new uXe(t,e);class s{constructor(m,v,b=!1,E=!1){this.persistedSize=m,this.currentSize=v,this.persistHeight=b,this.persistWidth=E}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(p=>{var m,v,b,E;if(this._resize(p.dimension.width,p.dimension.height),a&&(a.persistHeight=a.persistHeight||!!p.north||!!p.south,a.persistWidth=a.persistWidth||!!p.east||!!p.west),!!p.done){if(a){const{itemHeight:S,defaultSize:w}=this.getLayoutInfo(),L=Math.round(S/2);let{width:A,height:N}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-N)<=L)&&(N=(v=(m=a.persistedSize)===null||m===void 0?void 0:m.height)!==null&&v!==void 0?v:w.height),(!a.persistWidth||Math.abs(a.currentSize.width-A)<=L)&&(A=(E=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&E!==void 0?E:w.width),this._persistedSize.store(new dr(A,N))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Be(this.element.domNode,Ge(".message")),this._listElement=Be(this.element.domNode,Ge(".tree"));const u=o.createInstance(BU,this.editor);u.onDidClose(this.toggleDetails,this,this._disposables),this._details=new tXe(u,this.editor);const d=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);d();const h=o.createInstance(WU,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Lg("SuggestWidget",this._listElement,{getHeight:p=>this.getLayoutInfo().itemHeight,getTemplateId:p=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:p=>{if(p.isResolved&&this._isDetailsVisible()){const{documentation:m,detail:v}=p.completion,b=ec("{0}{1}",v||"",m?typeof m=="string"?m:m.value:"");return C("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p.textLabel,b)}else return p.textLabel},getWidgetAriaLabel:()=>C("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=o.createInstance(FU,this.element.domNode);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);f(),this._disposables.add(B1(this._list,r,{listInactiveFocusBackground:lXe,listInactiveFocusOutline:el})),this._disposables.add(r.onDidColorThemeChange(p=>this._onThemeChange(p))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onTap(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onDidChangeSelection(p=>this._onListSelection(p))),this._disposables.add(this._list.onDidChangeFocus(p=>this._onListFocus(p))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(p=>{p.hasChanged(105)&&(f(),d())})),this._ctxSuggestWidgetVisible=$n.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=$n.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=$n.MultipleSuggestions.bindTo(n),this._disposables.add(ts(this._details.widget.domNode,"keydown",p=>{this._onDetailsKeydown.fire(p)})),this._disposables.add(this.editor.onMouseDown(p=>this._onEditorMouseDown(p)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],r=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(r),this._currentSuggestionDetails=cs(o=>aXe(this,void 0,void 0,function*(){const s=w1(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);o.onCancellationRequested(()=>s.dispose());const a=yield n.resolve(o);return s.dispose(),a})),this._currentSuggestionDetails.then(()=>{r>=this._list.length||n!==this._list.element(r)||(this._ignoreFocusEvents=!0,this._list.splice(r,1,[n]),this._list.setFocus([r]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:zpe(r)}))}).catch(gn)),this._onDidFocus.fire({item:n,index:r,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:ja(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=VU.LOADING_MESSAGE,ja(this._listElement,this._status.element),Lu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=VU.NO_SUGGESTIONS_MESSAGE,ja(this._listElement,this._status.element),Lu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:ja(this._messageElement),Lu(this._listElement,this._status.element),this._show();break;case 4:ja(this._messageElement),Lu(this._listElement,this._status.element),this._show();break;case 5:ja(this._messageElement),Lu(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=w1(()=>this._setState(1),t)))}showSuggestions(e,t,n,r){var o,s;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(s=this._currentSuggestionDetails)===null||s===void 0||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,u=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),u){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(eZ(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const o=dB(document.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,u=e.width;if(this._status.element.style.lineHeight=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,u=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new dr(u,a),this._contentWidget.setPreference(2);else{const d=o.width-s.borderHeight-2*s.horizontalPadding;u>d&&(u=d);const h=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:u,f=s.statusBarHeight+this._list.contentHeight+s.borderHeight,p=s.itemHeight+s.statusBarHeight,m=Us(this.editor.getDomNode()),v=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=m.top+v.top+v.height,E=Math.min(o.height-b-s.verticalPadding,f),S=m.top+v.top-s.verticalPadding,w=Math.min(S,f);let L=Math.min(Math.max(w,E)+s.borderHeight,f);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<p&&(a=p),a>L&&(a=L);const A=150;a>E||this._forceRenderingAbove&&S>A?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),L=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),L=E),this.element.preferredSize=new dr(h,s.defaultSize.height),this.element.maxSize=new dr(d,L),this.element.minSize=new dr(220,p),this._cappedHeight=a===f?{wanted:(r=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&r!==void 0?r:e.height,capped:a}:void 0}this._resize(u,a)}_resize(e,t){const{width:n,height:r}=this.element.maxSize;e=Math.min(n,e),t=Math.min(r,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(43),t=Rc(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth,o=2*r;return{itemHeight:t,statusBarHeight:n,borderWidth:r,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new dr(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};EO.LOADING_MESSAGE=C("suggestWidget.loading","Loading...");EO.NO_SUGGESTIONS_MESSAGE=C("suggestWidget.noSuggestions","No suggestions.");EO=sXe([mP(1,Dg),mP(2,cn),mP(3,xr),mP(4,Nn)],EO);class cXe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:r}=this._widget.getLayoutInfo();return new dr(t+2*n+r,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var dXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},sy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class hXe{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const r=e.getOffsetAt(t),o=e.getPositionAt(r+1);this._marker=e.deltaDecorations([],[{range:Q.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let qc=class Upe{constructor(e,t,n,r,o,s,a){this._memoryService=t,this._commandService=n,this._contextKeyService=r,this._instantiationService=o,this._logService=s,this._telemetryService=a,this._lineSuffix=new Ra,this._toDispose=new Je,this._selectors=new fXe(f=>f.priority),this._telemetryGate=0,this.editor=e,this.model=o.createInstance(PU,this.editor);const u=$n.InsertMode.bindTo(r);u.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>u.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new ow(()=>{const f=this._instantiationService.createInstance(EO,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(E=>this._insertSuggestion(E,0),this));const p=new hZe(this.editor,f,E=>this._insertSuggestion(E,2));this._toDispose.add(p),this._toDispose.add(this.model.onDidSuggest(E=>{E.completionModel.items.length===0&&p.reset()}));const m=$n.MakesTextEdit.bindTo(this._contextKeyService),v=$n.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=$n.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Un(()=>{m.reset(),v.reset(),b.reset()})),this._toDispose.add(f.onDidFocus(({item:E})=>{const S=this.editor.getPosition(),w=E.editStart.column,L=S.column;let A=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!E.completion.additionalTextEdits&&!(E.completion.insertTextRules&4)&&L-w===E.completion.insertText.length&&(A=this.editor.getModel().getValueInRange({startLineNumber:S.lineNumber,startColumn:w,endLineNumber:S.lineNumber,endColumn:L})!==E.completion.insertText),m.set(A),v.set(!Ee.equals(E.editInsertEnd,E.editReplaceEnd)),b.set(!!E.provider.resolveCompletionItem||!!E.completion.documentation||E.completion.detail!==E.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(E=>{if(E.toKeybinding().equals(new y1(!0,!1,!1,!1,33))||Gn&&E.toKeybinding().equals(new y1(!1,!1,!1,!0,33))){E.stopPropagation();return}E.toKeybinding().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new ow(()=>this._toDispose.add(new J8(this.editor,this.model)))),this._alternatives=this._toDispose.add(new ow(()=>this._toDispose.add(new Y1(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(SO,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new hXe(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(!f.shy){let p=-1;for(const m of this._selectors.itemsOrderedByPriorityDesc)if(p=m.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),p!==-1)break;p===-1&&(p=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items)),this.widget.value.showSuggestions(f.completionModel,p,f.isFrozen,f.auto)}})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let d=$n.AcceptSuggestionsOnEnter.bindTo(r),h=()=>{const f=this.editor.getOption(1);d.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>h())),h()}static get(e){return e.getContribution(Upe.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),r=n.getAlternativeVersionId(),{item:o}=e,s=[],a=new aa;t&1||this.editor.pushUndoStop();const u=this.getOverwriteInfo(o,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){const h=L0.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(f=>jr.replace(Q.lift(f.range),f.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){const h=new ig(!0);let f;const p=n.onDidChangeContent(E=>{if(E.isFlush){a.cancel(),p.dispose();return}for(let S of E.changes){const w=Q.getEndPosition(S.range);(!f||Ee.isBefore(w,f))&&(f=w)}});let m=t;t|=2;let v=!1,b=this.editor.onWillType(()=>{b.dispose(),v=!0,m&2||this.editor.pushUndoStop()});s.push(o.resolve(a.token).then(()=>{if(!o.completion.additionalTextEdits||a.token.isCancellationRequested||f&&o.completion.additionalTextEdits.some(S=>Ee.isBefore(f,Q.getStartPosition(S.range))))return!1;v&&this.editor.pushUndoStop();const E=L0.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(S=>jr.replace(Q.lift(S.range),S.text))),E.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(m&2))&&this.editor.pushUndoStop(),!0}).then(E=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),E),p.dispose(),b.dispose()}))}let{insertText:d}=o.completion;o.completion.insertTextRules&4||(d=Z8.escape(d)),Rs.get(this.editor).insert(d,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===VR.id?this.model.trigger({auto:!0,shy:!1},!0):(s.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(gn)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();n.canUndo();){r!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(s).finally(()=>{this._reportSuggestionAcceptedTelemetry(n,e),this.model.clear(),a.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const r=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:r,basenameHash:Hce(fc(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:ike(e.uri)})}getOverwriteInfo(e,t){Yi(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const r=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+s,overwriteAfter:o+a}}_alertCompletionItem(e){if(bl(e.completion.additionalTextEdits)){let t=C("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Is(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const s=this.editor.getPosition(),a=o.editStart.column,u=s.column;return u-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:u})!==o.completion.insertText};Mt.once(this.model.onDidTrigger)(o=>{let s=[];Mt.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{ri(s),n()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(ri(s),a.items.length===0){n();return}const u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[u];if(!r(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:u,item:d,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(n,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};qc.ID="editor.contrib.suggestController";qc=dXe([sy(1,Wpe),sy(2,Ir),sy(3,cn),sy(4,Nn),sy(5,wg),sy(6,yg)],qc);class fXe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class VR extends Lt{constructor(){super({id:VR.id,label:C("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:_t.and(de.writable,de.hasCompletionItemProvider),kbOpts:{kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const r=qc.get(t);if(!r)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),r.triggerSuggest(void 0,o)}}VR.id="editor.action.triggerSuggest";ki(qc.ID,qc);it(VR);const yc=100+90,Al=Ps.bindToContribution(qc.get);nt(new Al({id:"acceptSelectedSuggestion",precondition:$n.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));Os.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and($n.Visible,de.textInputFocus),primary:2,weight:yc});Os.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and($n.Visible,de.textInputFocus,$n.AcceptSuggestionsOnEnter,$n.MakesTextEdit),primary:3,weight:yc});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:$n.HasInsertAndReplaceRange.toNegated()});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("insert"))});ra.appendMenuItem(A0,{command:{id:"acceptSelectedSuggestion",title:C("accept.replace","Replace")},group:"left",order:1,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("replace"))});nt(new Al({id:"acceptAlternativeSelectedSuggestion",precondition:_t.and($n.Visible,de.textInputFocus),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:A0,group:"left",order:2,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("insert")),title:C("accept.replace","Replace")},{menuId:A0,group:"left",order:2,when:_t.and($n.HasInsertAndReplaceRange,$n.InsertMode.isEqualTo("replace")),title:C("accept.insert","Insert")}]}));Xn.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");nt(new Al({id:"hideSuggestWidget",precondition:$n.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}}));nt(new Al({id:"selectNextSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));nt(new Al({id:"selectNextPageSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:12,secondary:[2060]}}));nt(new Al({id:"selectLastSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));nt(new Al({id:"selectPrevSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));nt(new Al({id:"selectPrevPageSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:11,secondary:[2059]}}));nt(new Al({id:"selectFirstSuggestion",precondition:_t.and($n.Visible,$n.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));nt(new Al({id:"toggleSuggestionDetails",precondition:$n.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:A0,group:"right",order:1,when:_t.and($n.DetailsVisible,$n.CanResolve),title:C("detail.more","show less")},{menuId:A0,group:"right",order:1,when:_t.and($n.DetailsVisible.toNegated(),$n.CanResolve),title:C("detail.less","show more")}]}));nt(new Al({id:"toggleExplainMode",precondition:$n.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));nt(new Al({id:"toggleSuggestionFocus",precondition:$n.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:2570,mac:{primary:778}}}));nt(new Al({id:"insertBestCompletion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),SO.AtEnd,$n.Visible.toNegated(),Y1.OtherSuggestions.toNegated(),Rs.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(Ya(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:yc,primary:2}}));nt(new Al({id:"insertNextSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),Y1.OtherSuggestions,$n.Visible.toNegated(),Rs.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:2}}));nt(new Al({id:"insertPrevSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),Y1.OtherSuggestions,$n.Visible.toNegated(),Rs.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:yc,kbExpr:de.textInputFocus,primary:1026}}));it(class extends Lt{constructor(){super({id:"editor.action.resetSuggestSize",label:C("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){qc.get(e).resetWidgetSize()}});function gXe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function pXe(i,e){return(t,n)=>e(i(t),i(n))}function mXe(){return(i,e)=>i-e}function _Xe(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class vXe extends Oe{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new tr(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=qc.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(s,a,u)=>{const d=this.editor.getModel(),h=i5(d,this.suggestControllerPreselector());if(!h)return-1;const f=Ee.lift(a),p=u.map((v,b)=>{const E=Rie(n,f,v,this.isShiftKeyPressed),S=i5(d,E==null?void 0:E.normalizedInlineCompletion);if(!S)return;const w=bXe(h.range,S.range)&&h.text.startsWith(S.text);return{index:b,valid:w,prefixLength:S.text.length,suggestItem:v}}).filter(v=>v&&v.valid),m=_Xe(p,pXe(v=>v.prefixLength,mXe()));return m?m.index:-1}}));let r=!1;const o=()=>{r||(r=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Mt.once(n.model.onDidTrigger)(s=>{o()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;CXe(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=qc.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return Rie(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=qc.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=qc.get(this.editor);e&&e.forceRenderingAbove()}}function bXe(i,e){return e.startLineNumber===i.startLineNumber&&e.startColumn===i.startColumn&&(e.endLineNumber<i.endLineNumber||e.endLineNumber===i.endLineNumber&&e.endColumn<=i.endColumn)}function CXe(i,e){return i===e?!0:!i||!e?!1:i.completionItemKind===e.completionItemKind&&i.isSnippetText===e.isSnippetText&&OYe(i.normalizedInlineCompletion,e.normalizedInlineCompletion)}function Rie(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:Q.fromPositions(e,e),text:""}};let{insertText:r}=t.completion,o=!1;if(t.completion.insertTextRules&4){const a=new Z8().parse(r),u=i.editor.getModel();if(a.children.length>100)return;xf.adjustWhitespace(u,e,a,!0,!0),r=a.toString(),o=!0}const s=i.getOverwriteInfo(t,n);return{isSnippetText:o,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:r,range:Q.fromPositions(e.delta(0,-s.overwriteBefore),e.delta(0,Math.max(s.overwriteAfter,0)))}}}var Mie=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class yXe extends Npe{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new vXe(this.editor,()=>{var n,r;return(r=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||r===void 0?void 0:r.toLiveInlineCompletion()})),this.updateOperation=this._register(new Ra),this.updateCacheSoon=this._register(new tr(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const r=this.ghostText;r&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,wXe(r.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Un(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return Mie(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),r=cs(s=>Mie(this,void 0,void 0,function*(){let a;try{a=yield Rpe(n,this.editor.getModel(),{triggerKind:Zu.Automatic,selectedSuggestionInfo:t},s)}catch(u){gn(u);return}s.isCancellationRequested||(this.cache.setValue(this.editor,a,Zu.Automatic),this.onDidChangeEmitter.fire())})),o=new Ope(r,Zu.Automatic);this.updateOperation.value=o,yield r,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const r=this.isSuggestionPreviewEnabled(),o=i5(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),s=this.suggestionInlineCompletionSource.state,a=i5(this.editor.getModel(),(n=s==null?void 0:s.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),u=o&&a&&o.text.startsWith(a.text)&&o.range.equalsRange(a.range);if(!r&&!u)return;const d=u?o:a||o,h=u?d.text.length-a.text.length:0;return this.toGhostText(d,h)}toGhostText(e,t){const n=this.editor.getOptions().get(105).previewMode;return e?Ape(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new kpe(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}function wXe(i){return i.reduce((e,t)=>e+t,0)}var SXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},EXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},LXe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class xXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Ra)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?gXe(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let HU=class extends xXe{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new DXe),this.suggestWidgetAdapterModel=this._register(new yXe(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new OU(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(r=>e.containsPosition(new Ee(n.lineNumber,r.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Zu.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return LXe(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};HU=SXe([EXe(1,Ir)],HU);class DXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new Ce,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Ra)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new WYe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var TXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Pie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_W;const Fie=(_W=window.trustedTypes)===null||_W===void 0?void 0:_W.createPolicy("editorGhostText",{createHTML:i=>i});let $U=class extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=r,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(IXe,this.editor)),this.additionalLinesWidget=this._register(new kXe(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(104)||o.hasChanged(87)||o.hasChanged(82)||o.hasChanged(44)||o.hasChanged(43)||o.hasChanged(58))&&this.update()})),this._register(Un(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,r=new Array;function o(d,h){if(r.length>0){const f=r[r.length-1];h&&f.decorations.push(new Nu(f.content.length+1,f.content.length+1+d[0].length,h,0)),f.content+=d[0],d=d.slice(1)}for(const f of d)r.push({content:f,decorations:h?[new Nu(1,f.length+1,h,0)]:[]})}const s=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,u=0;for(const d of t.parts){let h=d.lines;a===void 0?(n.push({column:d.column,text:h[0],preview:d.preview}),h=h.slice(1)):o([s.substring(u,d.column-1)],void 0),h.length>0&&(o(h,"ghost-text"),a===void 0&&d.column<=s.length&&(a=d.column)),u=d.column-1}a!==void 0&&o([s.substring(u)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:s.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,r,t.additionalReservedLineCount),t.parts.some(d=>d.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new Ee(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const r=this.editor.getOption(43),o=document.createElement("div");o.className="suggest-preview-additional-widget",Oa.applyFontInfoSlow(o,r);const s=document.createElement("span");s.className="content-spacer",s.append(t),o.append(s);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),o.append(a);const u=new Je,d=document.createElement("div");return d.className="button suggest-preview-text",d.append(`+${n} lines…`),u.add(ts(d,"mousedown",h=>{var f;(f=this.model)===null||f===void 0||f.setExpanded(!0),h.preventDefault(),this.editor.focus()})),o.append(d),new AXe(this.editor,e,o,u)}};$U=TXe([Pie(2,Nn),Pie(3,Fs)],$U);class IXe{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Je}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const o=new Array;n&&o.push({range:Q.fromPositions(new Ee(e,n.column),new Ee(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(s=>({range:Q.fromPositions(new Ee(e,s.column)),options:{description:"ghost-text",after:{content:s.text,inlineClassName:s.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(o))}}class kXe{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const r=this.editor.getModel();if(!r)return;const{tabSize:o}=r.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const u=document.createElement("div");NXe(u,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:u})}})}}function NXe(i,e,t,n,r){const o=n.get(29),s=n.get(104),a="none",u=n.get(82),d=n.get(44),h=n.get(43),f=n.get(58),p=N1(1e4);p.appendASCIIString('<div class="suggest-preview-text">');for(let b=0,E=t.length;b<E;b++){const S=t[b],w=S.content;p.appendASCIIString('<div class="view-line'),p.appendASCIIString('" style="top:'),p.appendASCIIString(String(b*f)),p.appendASCIIString('px;width:1000000px;">');const L=yG(w),A=pB(w),N=es.createEmpty(w,r);RB(new LC(h.isMonospace&&!o,h.canUseHalfwidthRightwardsArrow,w,!1,L,A,0,N,S.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,s,a,u,d!==Du.OFF,null),p),p.appendASCIIString("</div>")}p.appendASCIIString("</div>"),Oa.applyFontInfoSlow(i,h);const m=p.build(),v=Fie?Fie.createHTML(m):m;i.innerHTML=v}class AXe extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(r),this._register(Un(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}fr((i,e)=>{const t=i.getColor(I2e);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=i.getColor(k2e);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const r=i.getColor(T2e);r&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${r}; }`))});var jpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},zU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},e7=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let ns=class Kpe extends Oe{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Ra),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Kpe.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(UU,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return e7(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};ns.inlineSuggestionVisible=new Dt("inlineSuggestionVisible",!1,C("inlineSuggestionVisible","Whether an inline suggestion is visible"));ns.inlineSuggestionHasIndentation=new Dt("inlineSuggestionHasIndentation",!1,C("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));ns.inlineSuggestionHasIndentationLessThanTabSize=new Dt("inlineSuggestionHasIndentationLessThanTabSize",!0,C("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));ns.ID="editor.contrib.ghostTextController";ns=jpe([zU(1,Nn)],ns);class OXe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=ns.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=ns.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=ns.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let UU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new OXe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(HU,this.editor)),this.widget=this._register(this.instantiationService.createInstance($U,this.editor,this.model)),this._register(Un(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const r=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&r&&r.parts.length>0){const{column:o,lines:s}=r.parts[0],a=s[0],u=this.editor.getModel().getLineIndentColumn(r.lineNumber);if(o<=u){let h=Na(a);h===-1&&(h=a.length-1),t=h>0;const f=this.editor.getModel().getOptions().tabSize;n=cr.visibleColumnFromColumn(a,h+1,f)<f}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};UU=jpe([zU(1,Nn),zU(2,cn)],UU);const Gpe=Ps.bindToContribution(ns.get),LO=new Gpe({id:Ipe,precondition:ns.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});nt(LO);Os.registerKeybindingRule({primary:2,weight:200,id:LO.id,when:_t.and(LO.precondition,de.tabMovesFocus.toNegated(),ns.inlineSuggestionHasIndentationLessThanTabSize)});nt(new Gpe({id:"editor.action.inlineSuggest.hide",precondition:ns.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class hS extends Lt{constructor(){super({id:hS.ID,label:C("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:_t.and(de.writable,ns.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return e7(this,void 0,void 0,function*(){const n=ns.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}hS.ID="editor.action.inlineSuggest.showNext";class fS extends Lt{constructor(){super({id:fS.ID,label:C("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:_t.and(de.writable,ns.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return e7(this,void 0,void 0,function*(){const n=ns.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}fS.ID="editor.action.inlineSuggest.showPrevious";class RXe extends Lt{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:C("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:de.writable})}run(e,t){return e7(this,void 0,void 0,function*(){const n=ns.get(t);n&&n.trigger()})}}ki(ns.ID,ns);it(RXe);it(hS);it(fS);var MXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ay=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class PXe{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let jU=class{constructor(e,t,n,r,o,s,a,u){this._editor=e,this._hover=t,this._commandService=n,this._menuService=r,this._contextKeyService=o,this._modeService=s,this._openerService=a,this.accessibilityService=u}suggestHoverAnchor(e){const t=ns.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new aW(1e3,this,Q.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new aW(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new aW(1e3,this,e.target.range):null}computeSync(e,t){const n=ns.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new PXe(this,e.range,n)]:[]}renderHoverParts(e,t,n){const r=new Je,o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,r);const s=r.add(this._menuService.createMenu(Rt.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:C("showNextInlineSuggestion","Next"),commandId:hS.ID,run:()=>this._commandService.executeCommand(hS.ID)}),u=n.addAction({label:C("showPreviousInlineSuggestion","Previous"),commandId:fS.ID,run:()=>this._commandService.executeCommand(fS.ID)});n.addAction({label:C("acceptInlineSuggestion","Accept"),commandId:LO.id,run:()=>this._commandService.executeCommand(LO.id)});const d=[a,u];for(const h of d)h.setEnabled(!1);o.hasMultipleSuggestions().then(h=>{for(const f of d)f.setEnabled(h)});for(const[h,f]of s.getActions())for(const p of f)p instanceof C0&&n.addAction({label:p.label,commandId:p.item.id,run:()=>this._commandService.executeCommand(p.item.id)});return r}renderScreenReaderText(e,t,n){var r,o;const s=Ge,a=s("div.hover-row.markdown-hover"),u=Be(a,s("div.hover-contents")),d=n.add(new Fp({editor:this._editor},this._modeService,this._openerService)),h=p=>{n.add(d.onDidRenderAsync(()=>{u.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const m=C("inlineSuggestionFollows","Suggestion:"),v=n.add(d.render(new Rp().appendText(m).appendCodeblock("text",p)));u.replaceChildren(v.element)},f=(o=(r=e.controller.activeModel)===null||r===void 0?void 0:r.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(f){const p=this._editor.getModel().getLineContent(f.lineNumber);h(f.renderForScreenReader(p))}t.appendChild(a)}};jU=MXe([ay(2,Ir),ay(3,yC),ay(4,cn),ay(5,Fs),ay(6,Ll),ay(7,rl)],jU);var FXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},BXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let KU=class extends Oe{constructor(e,t,n={},r){var o;super(),this._link=t,this._enabled=!0,this.el=Be(e,Ge("a.monaco-link",{tabIndex:(o=t.tabIndex)!==null&&o!==void 0?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const s=this._register(new Ui(this.el,"click")),a=this._register(new Ui(this.el,"keypress")),u=Mt.chain(a.event).map(f=>new Sr(f)).filter(f=>f.keyCode===3).event,d=this._register(new Ui(this.el,ur.Tap)).event;this._register(Hi.addTarget(this.el));const h=Mt.any(s.event,u,d);this._register(h(f=>{this.enabled&&(Ni.stop(f,!0),n!=null&&n.opener?n.opener(this._link.href):r.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};KU=FXe([BXe(3,Ll)],KU);fr((i,e)=>{const t=i.getColor(DB);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=i.getColor(TB);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var qpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ype=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const WXe=26;let GU=class extends Oe{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(qU))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,WXe)}};GU=qpe([Ype(1,Nn)],GU);let qU=class extends Oe{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Fp,{}),this.element=Ge("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=Ge("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){$o(this.element)}show(e){$o(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=Be(this.element,Ge("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(Ge(`div${mr.asCSSSelector(e.icon)}`));const r=Be(this.element,Ge("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Be(this.element,Ge("div.message-actions-container")),e.actions)for(const s of e.actions)this._register(this.instantiationService.createInstance(KU,this.messageActionsContainer,Object.assign(Object.assign({},s),{tabIndex:-1}),{}));const o=Be(this.element,Ge("div.action-container"));this.actionBar=this._register(new ug(o)),this.actionBar.push(this._register(new ic("banner.close","Close Banner",mr.asClassName(Fde),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};qU=qpe([Ype(0,Nn)],qU);var tZ=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Dw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Bh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const VXe=ds("extensions-warning-message",_e.warning,C("warningIcon","Icon shown with a warning message in the extensions editor."));let gS=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const s=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new sE};else if(o.ambiguousCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new rE};else if(o.invisibleCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new oE};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:VXe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(GU,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(112),this._register(n.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(112)&&(this._options=e.getOption(112),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=HXe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new YU(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new $Xe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};gS.ID="editor.contrib.unicodeHighlighter";gS=tZ([Dw(1,Hu),Dw(2,tfe),Dw(3,Nn)],gS);function HXe(i,e){var t;return{nonBasicASCII:e.nonBasicASCII===Sf?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Sf?!i:e.includeComments,allowedCharacters:(t=e.allowedCharacters)!==null&&t!==void 0?t:{}}}let YU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new tr(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const r of t.ranges)n.push({range:r,options:this._options.includeComments?s5:o5});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e);if(!bq(t,{range:n,options:this._options.includeComments?s5:o5,id:e,ownerId:0}))return null;const r=t.getValueInRange(n);return{reason:Zpe(r,this._options)}}};YU=tZ([Dw(3,Hu)],YU);class $Xe extends Oe{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new tr(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const r of e){const o=kq.computeUnicodeHighlights(this._model,this._options,r);for(const s of o.ranges)n.ranges.push(s);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||o.hasMore}if(!n.hasMore)for(const r of n.ranges)t.push({range:r,options:this._options.includeComments?s5:o5});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),r=t.getValueInRange(n);return bq(t,{range:n,options:this._options.includeComments?s5:o5,id:e,ownerId:0})?{reason:Zpe(r,this._options)}:null}}let ZU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=this._editor.getContribution(gS.ID),o=[];let s=300;for(const a of t){let f=function(S){let w=`\`U+${S.toString(16).padStart(4,"0")}\``;return _p.isInvisibleCharacter(S)||(w+=` "${`${zXe(S)}`}"`),w};const u=r.getDecorationInfo(a.id);if(!u)continue;const h=n.getValueInRange(a.range).codePointAt(0),p=f(h);let m;switch(u.reason.kind){case 0:m=C("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",p,f(u.reason.confusableWith.codePointAt(0)));break;case 1:m=C("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",p);break;case 2:m=C("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",p);break}const v={codePoint:h,reason:u.reason.kind},b=C("unicodeHighlight.adjustSettings","Adjust settings"),E=[{value:`${m} [${b}](command:${HR.ID}?${encodeURIComponent(JSON.stringify(v))})`,isTrusted:!0}];o.push(new c2(this,a.range,E,s++))}return o}renderHoverParts(e,t,n){return Spe(e,t,this._editor,this._hover,this._modeService,this._openerService)}};ZU=tZ([Dw(2,Fs),Dw(3,Ll)],ZU);function zXe(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function Zpe(i,e){return kq.computeUnicodeHighlightReason(i,e)}const o5=Ln.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(nIe),position:Sl.Center},minimap:{color:Lr(aIe),position:Cl.Inline},hideInCommentTokens:!0}),s5=Ln.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(kB),position:Sl.Center},minimap:{color:Lr(VG),position:Cl.Inline}});class rE extends Lt{constructor(){super({id:rE.ID,label:C("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(ir);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Mf.ambiguousCharacters,!1,1)})}}rE.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class oE extends Lt{constructor(){super({id:oE.ID,label:C("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(ir);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Mf.invisibleCharacters,!1,1)})}}oE.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class sE extends Lt{constructor(){super({id:sE.ID,label:C("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Bh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(ir);r&&this.runAction(r)})}runAction(e){return Bh(this,void 0,void 0,function*(){yield e.updateValue(Mf.nonBasicASCII,!1,1)})}}sE.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class HR extends Lt{constructor(){super({id:HR.ID,label:C("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Bh(this,void 0,void 0,function*(){const{codePoint:r,reason:o}=n,s=String.fromCodePoint(r),a=e.get(Cc),u=e.get(ir);function d(p){return _p.isInvisibleCharacter(p)?C("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",`U+${p.toString(16)}`):C("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`U+${p.toString(16)} "${s}"`)}const h=[{label:d(r),run:()=>UXe(u,[r])}];if(o===0){const p=new rE;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(o===1){const p=new oE;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(o===2){const p=new sE;h.push({label:p.label,run:()=>Bh(this,void 0,void 0,function*(){return p.runAction(u)})})}else jXe(o);const f=yield a.pick(h,{title:C("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}HR.ID="editor.action.unicodeHighlight.showExcludeOptions";function UXe(i,e){return Bh(this,void 0,void 0,function*(){const t=i.getValue(Mf.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const r of e)n[String.fromCodePoint(r)]=!0;yield i.updateValue(Mf.allowedCharacters,n,1)})}function jXe(i){throw new Error(`Unexpected value: ${i}`)}it(rE);it(oE);it(sE);it(HR);ki(gS.ID,gS);var Xpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},D4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Bie=Ge;let XU=class extends Oe{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Bie("div.hover-row.status-bar"),this.actionsElement=Be(this.hoverElement,Bie("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(YY.render(this.actionsElement,e,n))}append(e){const t=Be(this.actionsElement,e);return this._hasContent=!0,t}};XU=Xpe([D4(0,Er)],XU);class a5{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),r=t.range.startLineNumber,o=n.getLineMaxColumn(r);return e.getLineDecorations(r).filter(s=>{if(s.options.isWholeLine)return!0;const a=s.range.startLineNumber===r?s.range.startColumn:1,u=s.range.endLineNumber===r?s.range.endColumn:o;if(s.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>u)return!1}else if(a>t.range.startColumn||t.range.endColumn>u)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Yo.EMPTY;const n=a5._getLineDecorations(this._editor,t);return Yo.merge(this._participants.map(r=>this._computeAsync(r,n,t,e)))}_computeAsync(e,t,n,r){return e.computeAsync?e.computeAsync(n,t,r):Yo.EMPTY}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=a5._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return BS(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let Uv=class QU extends Vu{constructor(e,t,n,r,o){super(),this._hoverVisibleKey=t,this._keybindingService=r,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[n.createInstance(SU,e,this),n.createInstance(LU,e,this),n.createInstance(jU,e,this),n.createInstance(ZU,e,this),n.createInstance(AU,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new mpe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,s=>{s.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._messagesAreComplete=!1,this._lastAnchor=null,this._computer=new a5(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new vpe(this._computer,s=>this._withResult(s,!0),null,s=>this._withResult(s,!1),this._editor.getOption(52).delay),this._register(ts(this.getDomNode(),Ht.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(ts(this.getDomNode(),Ht.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Wr.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return QU.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,r=e.target.detail;if(r&&!r.isAfterLines&&typeof r.horizontalDistanceToText=="number"&&r.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const r of this._participants)if(typeof r.suggestHoverAnchor=="function"){const o=r.suggestHoverAnchor(e);o&&n.push(o)}if(this._shouldShowAt(e)&&e.target.range){const o=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new oie(0,o))}return n.length===0?!1:(n.sort((r,o)=>o.priority-r.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue($n.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new oie(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const r=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(r.length===0)this.hide();else{if(r.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,r)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._messagesAreComplete=t,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,r=t[0].range,o=null,s=document.createDocumentFragment();const a=new Je,u=new Map;for(const h of t)n=Math.min(n,h.range.startColumn),r=Q.plusRange(r,h.range),h.forceShowAtRange&&(o=h.range),u.has(h.owner)||u.set(h.owner,[]),u.get(h.owner).push(h);const d=a.add(new XU(this._keybindingService));for(const h of this._participants)if(u.has(h)){const f=u.get(h);a.add(h.renderHoverParts(f,s,d))}d.hasContent&&s.appendChild(d.hoverElement),this._renderDisposable=a,s.hasChildNodes()&&(o?this._showAt(o.getStartPosition(),o,this._shouldFocus):this._showAt(new Ee(e.range.startLineNumber,n),r,this._shouldFocus),this._updateContents(s)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:QU._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};Uv.ID="editor.contrib.modesContentHoverWidget";Uv._DECORATION_OPTIONS=Ln.register({description:"content-hover-highlight",className:"hoverHighlight"});Uv=Xpe([D4(2,Nn),D4(3,Er),D4(4,cn)],Uv);const Wie=Ge;class KXe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const r of t){if(!r.options.glyphMarginClassName)continue;const o=r.options.glyphMarginHoverMessage;!o||hO(o)||n.push(...TG(o).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class zb extends Vu{constructor(e,t,n=R3e){super(),this._renderDisposeables=this._register(new Je),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new mpe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Fp({editor:this._editor},t,n)),this._computer=new KXe(this._editor),this._hoverOperation=new vpe(this._computer,r=>this._withResult(r),void 0,r=>this._withResult(r),300),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return zb.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),r=this._editor.getScrollTop(),o=this._editor.getOption(58),s=this._hover.containerDomNode.clientHeight,a=n-r-(s-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const r of t){const o=Wie("div.hover-row.markdown-hover"),s=Be(o,Wie("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(r.value));s.appendChild(a.element),n.appendChild(o)}this._updateContents(n),this._showAt(e)}}zb.ID="editor.contrib.modesGlyphHoverWidget";var GXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_P=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let O0=class Qpe{constructor(e,t,n,r,o){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=r,this._toUnhook=new Je,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=de.hoverVisible.bindTo(o)}static get(e){return e.getContribution(Qpe.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===Uv.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===zb.ID||(t!==12&&e.target.detail!==zb.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,r,o,s;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===Uv.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===Uv.ID&&(!((r=this._contentWidget)===null||r===void 0)&&r.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===zb.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a===2&&e.target.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._glyphWidget||(this._glyphWidget=new zb(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Uv,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};O0.ID="editor.contrib.hover";O0=GXe([_P(1,Nn),_P(2,Ll),_P(3,Fs),_P(4,cn)],O0);class qXe extends Lt{constructor(){super({id:"editor.action.showHover",label:C({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=O0.get(t);if(!n)return;const r=t.getPosition(),o=new Q(r.lineNumber,r.column,r.lineNumber,r.column),s=t.getOption(2)===2;n.showContentHover(o,1,s)}}class YXe extends Lt{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:C({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=O0.get(t);if(!n)return;const r=t.getPosition();if(!r)return;const o=new Q(r.lineNumber,r.column,r.lineNumber,r.column);q1.get(t).startFindDefinitionFromCursor(r).then(()=>{n.showContentHover(o,1,!0)})}}ki(O0.ID,O0);it(qXe);it(YXe);fr((i,e)=>{const t=i.getColor(_Te);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(I1);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const r=i.getColor(WG);r&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${r.transparent(.5)}; }`));const o=i.getColor(DB);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);const s=i.getColor(TB);s&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=i.getColor(BG);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const u=i.getColor(vTe);u&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${u}; }`);const d=i.getColor(ice);d&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${d}; }`)});class JU extends Oe{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))||!e.target.range)return;const o=this._editor.getContribution(O0.ID);if(!o.isColorPickerVisible()){const s=new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);o.showContentHover(s,0,!1)}}}JU.ID="editor.contrib.colorContribution";ki(JU.ID,JU);class jv{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const r=t.length,o=e.length;if(n+r>o)return!1;for(let s=0;s<r;s++){const a=e.charCodeAt(n+s),u=t.charCodeAt(s);if(a!==u&&!(a>=65&&a<=90&&a+32===u)&&!(u>=65&&u<=90&&u+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,r,o,s){const a=e.startLineNumber,u=e.startColumn,d=e.endLineNumber,h=e.endColumn,f=o.getLineContent(a),p=o.getLineContent(d);let m=f.lastIndexOf(t,u-1+t.length),v=p.indexOf(n,h-1-n.length);if(m!==-1&&v!==-1)if(a===d)f.substring(m+t.length,v).indexOf(n)>=0&&(m=-1,v=-1);else{const E=f.substring(m+t.length),S=p.substring(0,v);(E.indexOf(n)>=0||S.indexOf(n)>=0)&&(m=-1,v=-1)}let b;m!==-1&&v!==-1?(r&&m+t.length<f.length&&f.charCodeAt(m+t.length)===32&&(t=t+" "),r&&v>0&&p.charCodeAt(v-1)===32&&(n=" "+n,v-=1),b=jv._createRemoveBlockCommentOperations(new Q(a,m+t.length+1,d,v+1),t,n)):(b=jv._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const E of b)s.addTrackedEditOperation(E.range,E.text)}static _createRemoveBlockCommentOperations(e,t,n){let r=[];return Q.isEmpty(e)?r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(jr.delete(new Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),r}static _createAddBlockCommentOperations(e,t,n,r){let o=[];return Q.isEmpty(e)?o.push(jr.replace(new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(o.push(jr.insert(new Ee(e.startLineNumber,e.startColumn),t+(r?" ":""))),o.push(jr.insert(new Ee(e.endLineNumber,e.endColumn),(r?" ":"")+n))),o}getEditOperations(e,t){const n=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenizeIfCheap(n);const o=e.getLanguageIdAtPosition(n,r),s=_i.getComments(o);!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const r=n[0],o=n[1];return new wt(r.range.endLineNumber,r.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const r=n[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new wt(r.endLineNumber,r.endColumn+o,r.endLineNumber,r.endColumn+o)}}}class qg{constructor(e,t,n,r,o,s){this._selection=e,this._tabSize=t,this._type=n,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,n){e.tokenizeIfCheap(t);const r=e.getLanguageIdAtPosition(t,1),o=_i.getComments(r),s=o?o.lineCommentToken:null;if(!s)return null;let a=[];for(let u=0,d=n-t+1;u<d;u++)a[u]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,n,r,o,s,a){let u=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=o+h;if(m===o&&a){p.ignore=!0;continue}const v=n.getLineContent(m),b=Na(v);if(b===-1){p.ignore=s,p.commentStrOffset=v.length;continue}if(u=!1,p.ignore=!1,p.commentStrOffset=b,d&&!jv._haystackHasNeedleAtOffset(v,p.commentStr,b)&&(e===0?d=!1:e===1||(p.ignore=!0)),d&&t){const E=b+p.commentStrLength;E<v.length&&v.charCodeAt(E)===32&&(p.commentStrLength+=1)}}if(e===0&&u){d=!1;for(let h=0,f=r.length;h<f;h++)r[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:r}}static _gatherPreflightData(e,t,n,r,o,s,a){const u=qg._gatherPreflightCommentStrings(n,r,o);return u===null?{supported:!1}:qg._analyzeLines(e,t,n,u,r,s,a)}_executeLineComments(e,t,n,r){let o;n.shouldRemoveComments?o=qg._createRemoveLineCommentsOperations(n.lines,r.startLineNumber):(qg._normalizeInsertionPoint(e,n.lines,r.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(n.lines,r.startLineNumber));const s=new Ee(r.positionLineNumber,r.positionColumn);for(let a=0,u=o.length;a<u;a++)t.addEditOperation(o[a].range,o[a].text),Q.isEmpty(o[a].range)&&Q.getStartPosition(o[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(r)}_attemptRemoveBlockComment(e,t,n,r){let o=t.startLineNumber,s=t.endLineNumber,a=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),u=e.getLineContent(o).lastIndexOf(n,a-1),d=e.getLineContent(s).indexOf(r,t.endColumn-1-n.length);return u!==-1&&d===-1&&(d=e.getLineContent(o).indexOf(r,u+n.length),s=o),u===-1&&d!==-1&&(u=e.getLineContent(s).lastIndexOf(n,d),o=s),t.isEmpty()&&(u===-1||d===-1)&&(u=e.getLineContent(o).indexOf(n),u!==-1&&(d=e.getLineContent(o).indexOf(r,u+n.length))),u!==-1&&e.getLineContent(o).charCodeAt(u+n.length)===32&&(n+=" "),d!==-1&&e.getLineContent(s).charCodeAt(d-1)===32&&(r=" "+r,d-=1),u!==-1&&d!==-1?jv._createRemoveBlockCommentOperations(new Q(o,u+n.length+1,s,d+1),n,r):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let r=e.getLanguageIdAtPosition(n.startLineNumber,1),o=_i.getComments(r);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const s=o.blockCommentStartToken,a=o.blockCommentEndToken;let u=this._attemptRemoveBlockComment(e,n,s,a);if(!u){if(n.isEmpty()){const d=e.getLineContent(n.startLineNumber);let h=Na(d);h===-1&&(h=d.length),u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,h+1,n.startLineNumber,d.length+1),s,a,this._insertSpace)}else u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),s,a,this._insertSpace);u.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(n);for(const d of u)t.addEditOperation(d.range,d.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new Q(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const r=qg._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return r.supported?this._executeLineComments(e,t,r,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new wt(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];s.ignore||n.push(jr.delete(new Q(t+r,s.commentStrOffset+1,t+r,s.commentStrOffset+s.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const r=this._insertSpace?" ":"";for(let o=0,s=e.length;o<s;o++){const a=e[o];a.ignore||n.push(jr.insert(new Ee(t+o,a.commentStrOffset+1),a.commentStr+r))}return n}static nextVisibleColumn(e,t,n,r){return n?e+(t-e%t):e+r}static _normalizeInsertionPoint(e,t,n,r){let o=1073741824,s,a;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(let p=0,m=t[u].commentStrOffset;f<o&&p<m;p++)f=qg.nextVisibleColumn(f,r,h.charCodeAt(p)===9,1);f<o&&(o=f)}o=Math.floor(o/r)*r;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(s=0,a=t[u].commentStrOffset;f<o&&s<a;s++)f=qg.nextVisibleColumn(f,r,h.charCodeAt(s)===9,1);f>o?t[u].commentStrOffset=s-1:t[u].commentStrOffset=s}}}class nZ extends Lt{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=[],o=n.getOptions(),s=t.getOption(19),a=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));a.sort((d,h)=>Q.compareRangesUsingStarts(d.selection,h.selection));let u=a[0];for(let d=1;d<a.length;d++){const h=a[d];u.selection.endLineNumber===h.selection.startLineNumber&&(u.index<h.index?h.ignoreFirstLine=!0:(u.ignoreFirstLine=!0,u=h))}for(const d of a)r.push(new qg(d.selection,o.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class ZXe extends nZ{constructor(){super(0,{id:"editor.action.commentLine",label:C("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:Rt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class XXe extends nZ{constructor(){super(1,{id:"editor.action.addCommentLine",label:C("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2081),weight:100}})}}class QXe extends nZ{constructor(){super(2,{id:"editor.action.removeCommentLine",label:C("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2099),weight:100}})}}class JXe extends Lt{constructor(){super({id:"editor.action.blockComment",label:C("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Rt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const n=t.getOption(19),r=[],o=t.getSelections();for(const s of o)r.push(new jv(s,n.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}it(ZXe);it(XXe);it(QXe);it(JXe);var eQe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},VN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let pS=class Jpe{constructor(e,t,n,r,o,s){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=r,this._keybindingService=o,this._menuService=s,this._toDispose=new Je,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const u=this._contextViewService.getContextViewElement(),d=a.srcElement;d.shadowRoot&&_0(u)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(Jpe.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const r of this._editor.getSelections())if(r.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?Rt.SimpleEditorContext:Rt.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],r=this._menuService.createMenu(t,this._contextKeyService),o=r.getActions({arg:e.uri});r.dispose();for(let s of o){const[,a]=s;let u=0;for(const d of a)if(d instanceof xG){const h=this._getMenuActions(e,d.item.submenu);h.length>0&&(n.push(new fB(d.id,d.label,h)),u++)}else n.push(d),u++;u&&n.push(new Zc)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=Us(this._editor.getDomNode()),a=s.left+o.left,u=s.top+o.top+o.height;t={x:a,y:u}}const r=this._editor.getOption(114)&&!ng;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{const s=this._keybindingFor(o);if(s)return new ZA(o,o,{label:!0,keybinding:s.getLabel(),isMenu:!0});const a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new ZA(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};pS.ID="editor.contrib.contextmenu";pS=eQe([VN(1,j0),VN(2,Hp),VN(3,cn),VN(4,Er),VN(5,yC)],pS);class tQe extends Lt{constructor(){super({id:"editor.action.showContextMenu",label:C("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:1092,weight:100}})}run(e,t){pS.get(t).showContextMenu()}}ki(pS.ID,pS);it(tQe);class vW{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let r=0;r<t;r++)if(!this.selections[r].equalsSelection(e.selections[r]))return!1;return!0}}class bW{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class Z1 extends Oe{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new vW(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new bW(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(Z1.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new bW(new vW(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new bW(new vW(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}Z1.ID="editor.contrib.cursorUndoRedoController";class nQe extends Lt{constructor(){super({id:"cursorUndo",label:C("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:2099,weight:100}})}run(e,t,n){Z1.get(t).cursorUndo()}}class iQe extends Lt{constructor(){super({id:"cursorRedo",label:C("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){Z1.get(t).cursorRedo()}}ki(Z1.ID,Z1);it(nQe);it(iQe);class rQe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new Q(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new wt(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new wt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new wt(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new wt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new wt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function ly(i){return Gn?i.altKey:i.ctrlKey}class yp extends Oe{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(ly(e)&&(this._modifierPressed=!0),this._mouseDown&&ly(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(ly(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===yp.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let r=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(r.length===1)this._dragSelection=r[0];else return}ly(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new Ee(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let r=this._editor.getSelection();if(r){const{selectionStartLineNumber:o,selectionStartColumn:s}=r;n=[new wt(o,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(r=>r.containsPosition(t)?new wt(t.lineNumber,t.column,t.lineNumber,t.column):r);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(ly(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(yp.ID,new rQe(this._dragSelection,t,ly(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),options:yp._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}yp.ID="editor.contrib.dragAndDrop";yp.TRIGGER_KEY_VALUE=Gn?6:5;yp._DECORATION_OPTIONS=Ln.register({description:"dnd-target",className:"dnd-target"});ki(yp.ID,yp);class Xs{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const r=n.options;if(r===Xs._FIND_MATCH_DECORATION||r===Xs._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let r=0,o=this._decorations.length;r<o;r++){let s=this._editor.getModel().getDecorationRange(this._decorations[r]);if(e.equalsRange(s)){t=this._decorations[r],n=r+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(r=>{if(this._highlightedDecorationId!==null&&(r.changeDecorationOptions(this._highlightedDecorationId,Xs._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,r.changeDecorationOptions(this._highlightedDecorationId,Xs._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(r.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){let s=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);o=new Q(o.startLineNumber,o.startColumn,s,a)}this._rangeHighlightDecorationId=r.addDecoration(o,Xs._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let r=Xs._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){r=Xs._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),d=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/d));let f=e[0].range.startLineNumber,p=e[0].range.endLineNumber;for(let m=1,v=e.length;m<v;m++){const b=e[m].range;p+h>=b.startLineNumber?b.endLineNumber>p&&(p=b.endLineNumber):(o.push({range:new Q(f,1,p,1),options:Xs._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=b.startLineNumber,p=b.endLineNumber)}o.push({range:new Q(f,1,p,1),options:Xs._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,u=e.length;a<u;a++)s[a]={range:e[a].range,options:r};this._decorations=n.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Xs._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.endLineNumber>e.lineNumber)){if(r.endLineNumber<e.lineNumber)return r;if(!(r.endColumn>e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let r=this._decorations[t],o=this._editor.getModel().getDecorationRange(r);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Xs._CURRENT_FIND_MATCH_DECORATION=Ln.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(kB),position:Sl.Center},minimap:{color:Lr(VG),position:Cl.Inline}});Xs._FIND_MATCH_DECORATION=Ln.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(kB),position:Sl.Center},minimap:{color:Lr(VG),position:Cl.Inline}});Xs._FIND_MATCH_NO_OVERVIEW_DECORATION=Ln.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Xs._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Ln.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Lr(kB),position:Sl.Center}});Xs._RANGE_HIGHLIGHT_DECORATION=Ln.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Xs._FIND_SCOPE_DECORATION=Ln.register({description:"find-scope",className:"findScope",isWholeLine:!0});class oQe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let s=0;s<this._ranges.length;s++)n.push({range:this._ranges[s],text:this._replaceStrings[s]});n.sort((s,a)=>Q.compareRangesUsingStarts(s.range,a.range));let r=[],o=n[0];for(let s=1;s<n.length;s++)o.range.endLineNumber===n[s].range.startLineNumber&&o.range.endColumn===n[s].range.startColumn?(o.range=o.range.plusRange(n[s].range),o.text=o.text+n[s].text):(r.push(o),o=n[s]);r.push(o);for(const s of r)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function eme(i,e){if(i&&i[0]!==""){const t=Vie(i,e,"-"),n=Vie(i,e,"_");return t&&!n?Hie(i,e,"-"):!t&&n?Hie(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():oxe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Vie(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function Hie(i,e,t){const n=e.split(t),r=i[0].split(t);let o="";return n.forEach((s,a)=>{o+=eme([r[a]],s)+t}),o.slice(0,-1)}class $ie{constructor(e){this.staticValue=e,this.kind=0}}class sQe{constructor(e){this.pieces=e,this.kind=1}}class mS{constructor(e){!e||e.length===0?this._state=new $ie(""):e.length===1&&e[0].staticValue!==null?this._state=new $ie(e[0].staticValue):this._state=new sQe(e)}static fromStaticValue(e){return new mS([l1.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?eme(e,this._state.staticValue):this._state.staticValue;let n="";for(let r=0,o=this._state.pieces.length;r<o;r++){let s=this._state.pieces[r];if(s.staticValue!==null){n+=s.staticValue;continue}let a=mS._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let u=[],d=s.caseOps.length,h=0;for(let f=0,p=a.length;f<p;f++){if(h>=d){u.push(a.slice(f));break}switch(s.caseOps[h]){case"U":u.push(a[f].toUpperCase());break;case"u":u.push(a[f].toUpperCase()),h++;break;case"L":u.push(a[f].toLowerCase());break;case"l":u.push(a[f].toLowerCase()),h++;break;default:u.push(a[f])}}a=u.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class l1{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new l1(e,-1,null)}static caseOps(e,t){return new l1(null,e,t)}}class aQe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=l1.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=l1.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=l1.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new mS(this._result)}}function lQe(i){if(!i||i.length===0)return new mS(null);let e=[],t=new aQe(i);for(let n=0,r=i.length;n<r;n++){let o=i.charCodeAt(n);if(o===92){if(n++,n>=r)break;let s=i.charCodeAt(n);switch(s){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(s));break}continue}if(o===36){if(n++,n>=r)break;let s=i.charCodeAt(n);if(s===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(s===48||s===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(n+1<r){let u=i.charCodeAt(n+1);if(48<=u&&u<=57){n++,a=a*10+(u-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const BC=new Dt("findWidgetVisible",!1),t7=new Dt("findInputFocussed",!1),iZ=new Dt("replaceInputFocussed",!1),vP={primary:545,mac:{primary:2593}},bP={primary:565,mac:{primary:2613}},CP={primary:560,mac:{primary:2608}},yP={primary:554,mac:{primary:2602}},wP={primary:558,mac:{primary:2606}},lr={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Kv=19999,uQe=240;class Z2{constructor(e,t){this._toDispose=new Je,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Ma,this._decorations=new Xs(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new tr(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,ri(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},uQe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let u=a.endLineNumber;return a.endColumn===1&&(u=u-1),new Q(a.startLineNumber,1,u,this._editor.getModel().getLineMaxColumn(u))}return a}));let r=this._findMatches(n,!1,Kv);this._decorations.set(r,n);const o=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(o);if(s===0&&r.length>0){const a=Hue(r.map(u=>u.range),u=>Q.compareRangesUsingStarts(u,o)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,o=this._editor.getModel();return t||r===1?(n===1?n=o.getLineCount():n--,r=o.getLineMaxColumn(n)):r--,new Ee(n,r)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<Kv){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),r=Z2._getSearchRange(this._editor.getModel(),n);r.getEndPosition().isBefore(e)&&(e=r.getEndPosition()),e.isBefore(r.getStartPosition())&&(e=r.getEndPosition());let{lineNumber:o,column:s}=e,a=this._editor.getModel(),u=new Ee(o,s),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),!!d){if(!t&&!r.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,o=this._editor.getModel();return t||r===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,r=1):r++,new Ee(n,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Kv){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,r=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),s=Z2._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:u}=e,d=this._editor.getModel(),h=new Ee(a,u),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return n&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),f?!r&&!s.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,n,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?lQe(this._state.replaceString):mS.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let r=e.buildReplaceString(n.matches,this._state.preserveCase),o=new xs(t,r);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new Ee(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const r=(e||[null]).map(o=>Z2._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Kv?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new hb(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let f="mu";n.ignoreCase&&(f+="i"),n.global&&(f+="g"),n=new RegExp(n.source,f)}const r=this._editor.getModel(),o=r.getValue(1),s=r.getFullModelRange(),a=this._getReplacePattern();let u;const d=this._state.preserveCase;a.hasReplacementPatterns||d?u=o.replace(n,function(){return a.buildReplaceString(arguments,d)}):u=o.replace(n,a.buildReplaceString(null,d));let h=new cq(s,u,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let s=0,a=n.length;s<a;s++)r[s]=t.buildReplaceString(n[s].matches,this._state.preserveCase);let o=new oQe(this._editor.getSelection(),n.map(s=>s.range),r);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(o=>new wt(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),r=this._editor.getSelection();for(let o=0,s=n.length;o<s;o++)if(n[o].equalsRange(r)){n=[r].concat(n.slice(0,o)).concat(n.slice(o+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const cQe={inputActiveOptionBorder:we.fromHex("#007ACC00"),inputActiveOptionForeground:we.fromHex("#FFFFFF"),inputActiveOptionBackground:we.fromHex("#0E639C50")};class $R extends Vu{constructor(e){super(),this._onChange=this._register(new Ce),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},cQe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Ga.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const dQe=C("caseDescription","Match Case"),hQe=C("wordsDescription","Match Whole Word"),fQe=C("regexDescription","Use Regular Expression");class tme extends $R{constructor(e){super({icon:_e.caseSensitive,title:dQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class nme extends $R{constructor(e){super({icon:_e.wholeWord,title:hQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class ime extends $R{constructor(e){super({icon:_e.regex,title:fQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class n7 extends Vu{constructor(e,t,n,r){super(),this._hideSoon=this._register(new tr(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=r.getColorTheme().getColor(TH),s=r.getColorTheme().getColor(kH),a=r.getColorTheme().getColor(IH);this.caseSensitive=this._register(new tme({appendTitle:this._keybindingLabelFor(lr.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new nme({appendTitle:this._keybindingLabelFor(lr.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new ime({appendTitle:this._keybindingLabelFor(lr.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(u=>{let d=!1;u.isRegex&&(this.regex.checked=this._state.isRegex,d=!0),u.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,d=!0),u.matchCase&&(this.caseSensitive.checked=this._state.matchCase,d=!0),!this._state.isRevealed&&d&&this._revealTemporarily()})),this._register(dG(this._domNode,u=>this._onMouseOut())),this._register(qe(this._domNode,"mouseover",u=>this._onMouseOver())),this._applyTheme(r.getColorTheme()),this._register(r.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return n7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(TH),inputActiveOptionForeground:e.getColor(kH),inputActiveOptionBackground:e.getColor(IH)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}n7.ID="editor.contrib.findOptionsWidget";fr((i,e)=>{const t=i.getColor(qh);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(bp);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const r=i.getColor(y0);r&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${r}; }`);const o=i.getColor(go);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function SP(i,e){return i===1?!0:i===2?!1:e}class gQe extends Oe{constructor(){super(),this._onFindReplaceStateChange=this._register(new Ce),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return SP(this._isRegexOverride,this._isRegex)}get wholeWord(){return SP(this._wholeWordOverride,this._wholeWord)}get matchCase(){return SP(this._matchCaseOverride,this._matchCase)}get preserveCase(){return SP(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,o=!0),typeof n<"u"&&(Q.equalsRange(this._currentMatch,n)||(this._currentMatch=n,r.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(r)}change(e,t,n=!0){var r;let o={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const a=this.isRegex,u=this.wholeWord,d=this.matchCase,h=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((r=e.searchScope)===null||r===void 0)&&r.every(f=>{var p;return(p=this._searchScope)===null||p===void 0?void 0:p.some(m=>!Q.equalsRange(m,f))})||(this._searchScope=e.searchScope,o.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,o.isRegex=!0),u!==this.wholeWord&&(s=!0,o.wholeWord=!0),d!==this.matchCase&&(s=!0,o.matchCase=!0),h!==this.preserveCase&&(s=!0,o.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Kv}}const pQe=C("defaultLabel","input");class mQe extends Vu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new Ce),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ce),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Ce),this._onKeyUp=this._register(new Ce),this._onCaseSensitiveKeyDown=this._register(new Ce),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Ce),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||pQe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const o=r.appendCaseSensitiveLabel||"",s=r.appendWholeWordsLabel||"",a=r.appendRegexLabel||"",u=r.history||[],d=!!r.flexibleHeight,h=!!r.flexibleWidth,f=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Xhe(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:u,showHistoryHint:r.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:f})),this.regex=this._register(new ime({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(v=>{this._onRegexKeyDown.fire(v)})),this.wholeWords=this._register(new nme({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new tme({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(v=>{this._onCaseSensitiveKeyDown.fire(v)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let p=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,v=>{if(v.equals(15)||v.equals(17)||v.equals(9)){let b=p.indexOf(document.activeElement);if(b>=0){let E=-1;v.equals(17)?E=(b+1)%p.length:v.equals(15)&&(b===0?E=p.length-1:E=b-1),v.equals(9)?(p[b].blur(),this.inputBox.focus()):E>=0&&p[E].focus(),Ni.stop(v,!0)}}});let m=document.createElement("div");m.className="controls",m.style.display=this._showOptionButtons?"block":"none",m.appendChild(this.caseSensitive.domNode),m.appendChild(this.wholeWords.domNode),m.appendChild(this.regex.domNode),this.domNode.appendChild(m),e&&e.appendChild(this.domNode),this._register(qe(this.inputBox.inputElement,"compositionstart",v=>{this.imeSessionInProgress=!0})),this._register(qe(this.inputBox.inputElement,"compositionend",v=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,v=>this._onKeyDown.fire(v)),this.onkeyup(this.inputBox.inputElement,v=>this._onKeyUp.fire(v)),this.oninput(this.inputBox.inputElement,v=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,v=>this._onMouseDown.fire(v))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const _Qe=C("defaultLabel","input"),vQe=C("label.preserveCaseCheckbox","Preserve Case");class bQe extends $R{constructor(e){super({icon:_e.preserveCase,title:vQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class CQe extends Vu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Ce),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Ce),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Ce),this._onInput=this._register(new Ce),this._onKeyUp=this._register(new Ce),this._onPreserveCaseKeyDown=this._register(new Ce),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||_Qe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const o=r.appendPreserveCaseLabel||"",s=r.history||[],a=!!r.flexibleHeight,u=!!r.flexibleWidth,d=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Xhe(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:s,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:u,flexibleMaxHeight:d})),this.preserveCase=this._register(new bQe({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(p=>{this._onPreserveCaseKeyDown.fire(p)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let m=h.indexOf(document.activeElement);if(m>=0){let v=-1;p.equals(17)?v=(m+1)%h.length:p.equals(15)&&(m===0?v=h.length-1:v=m-1),p.equals(9)?(h[m].blur(),this.inputBox.focus()):v>=0&&h[v].focus(),Ni.stop(p,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var rme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ome=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const xO="historyNavigationWidget",sme="historyNavigationForwardsEnabled",ame="historyNavigationBackwardsEnabled";function yQe(i,e,t){new Dt(t,e).bindTo(i)}function wQe(i,e){return i.createScoped(e.target)}function lme(i,e){return i.getContext(document.activeElement).getValue(e)}function ume(i,e){const t=wQe(i,e);yQe(t,e,xO);const n=new Dt(sme,!0).bindTo(t),r=new Dt(ame,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:r}}let ej=class extends mQe{constructor(e,t,n,r,o=!1){super(e,t,o,n),this._register(ume(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};ej=rme([ome(3,cn)],ej);let tj=class extends CQe{constructor(e,t,n,r,o=!1){super(e,t,o,n),this._register(ume(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};tj=rme([ome(3,cn)],tj);Os.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:_t.and(_t.has(xO),_t.equals(ame,!0),$n.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=lme(i.get(cn),xO);e&&e.historyNavigator.showPreviousValue()}});Os.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:_t.and(_t.has(xO),_t.equals(sme,!0),$n.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=lme(i.get(cn),xO);e&&e.historyNavigator.showNextValue()}});function zie(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var SQe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const EQe=ds("find-selection",_e.selection,C("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Uie=ds("find-collapsed",_e.chevronRight,C("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),jie=ds("find-expanded",_e.chevronDown,C("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),LQe=ds("find-replace",_e.replace,C("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),xQe=ds("find-replace-all",_e.replaceAll,C("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),DQe=ds("find-previous-match",_e.arrowUp,C("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),TQe=ds("find-next-match",_e.arrowDown,C("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),IQe=C("label.find","Find"),kQe=C("placeholder.find","Find"),NQe=C("label.previousMatchButton","Previous Match"),AQe=C("label.nextMatchButton","Next Match"),OQe=C("label.toggleSelectionFind","Find in Selection"),RQe=C("label.closeButton","Close"),MQe=C("label.replace","Replace"),PQe=C("placeholder.replace","Replace"),FQe=C("label.replaceButton","Replace"),BQe=C("label.replaceAllButton","Replace All"),WQe=C("label.toggleReplaceButton","Toggle Replace"),VQe=C("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Kv),HQe=C("label.matchesLocation","{0} of {1}"),Kie=C("label.noResults","No results"),_f=419,$Qe=275,zQe=$Qe-54;let HN=69;const UQe=33,Gie="ctrlEnterReplaceAll.windows.donotask",qie=Gn?256:2048;class CW{constructor(e){this.afterLineNumber=e,this.heightInPx=UQe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Yie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function Zie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class i7 extends Vu{constructor(e,t,n,r,o,s,a,u,d){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=r,this._keybindingService=o,this._contextKeyService=s,this._storageService=u,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!u.getBoolean(Gie,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Np(500),this._register(Un(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(130)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const f=this._codeEditor.getOption(35).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new CW(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>SQe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=t7.bindTo(s),this._findFocusTracker=this._register($w(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=iZ.bindTo(s),this._replaceFocusTracker=this._register($w(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new CW(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return i7.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Nc(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,gn)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=HN+"px",this._state.matchesCount>=Kv?this._matchesCount.title=VQe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Kv&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=ec(HQe,n,t)}else e=Kie;this._matchesCount.appendChild(document.createTextNode(e)),Is(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),HN=Math.max(HN,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Kie)return n===""?C("ariaSearchNoResultEmpty","{0} found",e):C("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const r=C("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${r}`:r}return C("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const r=Us(n),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=r.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const u=lue(this._domNode).left;s>u&&(t=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());r.left+(d?d.left:0)>u&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(r=>{n.heightInPx=this._getHeight(),this._viewZoneId=r.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new CW(0));const n=this._viewZone;this._codeEditor.changeViewZones(r=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===n.heightInPx)return;let s=o-n.heightInPx;n.heightInPx=o,r.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;n.heightInPx=o,this._viewZoneId=r.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(TH),inputActiveOptionBackground:e.getColor(IH),inputActiveOptionForeground:e.getColor(kH),inputBackground:e.getColor(AG),inputForeground:e.getColor(OG),inputBorder:e.getColor(RG),inputValidationInfoBackground:e.getColor(rce),inputValidationInfoForeground:e.getColor(oce),inputValidationInfoBorder:e.getColor(sce),inputValidationWarningBackground:e.getColor(ace),inputValidationWarningForeground:e.getColor(lce),inputValidationWarningBorder:e.getColor(uce),inputValidationErrorBackground:e.getColor(cce),inputValidationErrorForeground:e.getColor(dce),inputValidationErrorBorder:e.getColor(hce)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!uG(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,r=e.minimap.minimapWidth;let o=!1,s=!1,a=!1;if(this._resized&&Nc(this._domNode)>_f){this._domNode.style.maxWidth=`${n-28-r-15}px`,this._replaceInput.width=Nc(this._findInput.domNode);return}if(_f+28+r>=n&&(s=!0),_f+28+r-HN>=n&&(a=!0),_f+28+r-HN>=n+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",s),!a&&!o&&(this._domNode.style.maxWidth=`${n-28-r-15}px`),this._resized){this._findInput.inputBox.layout();let u=this._findInput.inputBox.element.clientWidth;u>0&&(this._replaceInput.width=u)}else this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!Q.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(qie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Yie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Zie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(qie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{As&&Kh&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(C("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Gie,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Yie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Zie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new ej(null,this._contextViewProvider,{width:zQe,label:IQe,placeholder:kQe,appendCaseSensitiveLabel:this._keybindingLabelFor(lr.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(lr.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(lr.ToggleRegexCommand),validation:u=>{if(u.length===0||!this._findInput.getRegex())return null;try{return new RegExp(u,"gu"),null}catch(d){return{content:d.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>zie(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(u=>this._onFindInputKeyDown(u))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(u=>{u.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),u.preventDefault())})),this._register(this._findInput.onRegexKeyDown(u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),u.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(u=>{this._tryUpdateHeight()&&this._showViewZone()})),Qa&&this._register(this._findInput.onMouseDown(u=>this._onFindInputMouseDown(u))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new uy({label:NQe+this._keybindingLabelFor(lr.PreviousMatchFindAction),icon:DQe,onTrigger:()=>{this._codeEditor.getAction(lr.PreviousMatchFindAction).run().then(void 0,gn)}})),this._nextBtn=this._register(new uy({label:AQe+this._keybindingLabelFor(lr.NextMatchFindAction),icon:TQe,onTrigger:()=>{this._codeEditor.getAction(lr.NextMatchFindAction).run().then(void 0,gn)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",n.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new $R({icon:EQe,title:OQe+this._keybindingLabelFor(lr.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let u=this._codeEditor.getSelections();u.map(d=>(d.endColumn===1&&d.endLineNumber>d.startLineNumber&&(d=d.setEndPosition(d.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(d.endLineNumber-1))),d.isEmpty()?null:d)).filter(d=>!!d),u.length&&this._state.change({searchScope:u},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new uy({label:RQe+this._keybindingLabelFor(lr.CloseFindWidgetCommand),icon:Fde,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),u.preventDefault())}})),r.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new tj(null,void 0,{label:MQe,placeholder:PQe,appendPreserveCaseLabel:this._keybindingLabelFor(lr.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>zie(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(u=>this._onReplaceInputKeyDown(u))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(u=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(u=>{u.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),u.preventDefault())})),this._replaceBtn=this._register(new uy({label:FQe+this._keybindingLabelFor(lr.ReplaceOneAction),icon:LQe,onTrigger:()=>{this._controller.replace()},onKeyDown:u=>{u.equals(1026)&&(this._closeBtn.focus(),u.preventDefault())}})),this._replaceAllBtn=this._register(new uy({label:BQe+this._keybindingLabelFor(lr.ReplaceAllAction),icon:xQe,onTrigger:()=>{this._controller.replaceAll()}}));let o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new uy({label:WQe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${_f}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(o),this._resizeSash=new Hs(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=_f;this._register(this._resizeSash.onDidStart(()=>{a=Nc(this._domNode)})),this._register(this._resizeSash.onDidChange(u=>{this._resized=!0;let d=a+u.startX-u.currentX;if(d<_f)return;const h=parseFloat(fG(this._domNode).maxWidth)||0;d>h||(this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const u=Nc(this._domNode);if(u<_f)return;let d=_f;if(!this._resized||u===_f){const h=this._codeEditor.getLayoutInfo();d=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Nc(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}i7.ID="editor.contrib.findWidget";class uy extends Vu{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+mr.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...mr.asClassNameArray(Uie)),this._domNode.classList.add(...mr.asClassNameArray(jie))):(this._domNode.classList.remove(...mr.asClassNameArray(jie)),this._domNode.classList.add(...mr.asClassNameArray(Uie)))}}fr((i,e)=>{const t=(v,b)=>{b&&e.addRule(`.monaco-editor ${v} { background-color: ${b}; }`)};t(".findMatch",i.getColor(AH)),t(".currentFindMatch",i.getColor(hTe)),t(".findScope",i.getColor(fTe));const n=i.getColor(qh);t(".find-widget",n);const r=i.getColor(y0);r&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${r}; }`);const o=i.getColor(pTe);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=i.getColor(gTe);s&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${s}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(mTe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const u=i.getColor(go);u&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${u}; }`);const d=i.getColor(bp);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const h=i.getColor(KDe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const f=i.getColor(tTe);if(f)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${f}; }`);else{const v=i.getColor(QP);v&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${v}; }`)}const p=i.getColor(tIe);p&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${p} !important;
		}
	`);const m=i.getColor(T1);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var cme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Df=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},X1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const jQe=524288;function nj(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const r=i.getConfiguredWordAtPosition(n.getStartPosition());if(r&&t===!1)return r.word}else if(i.getModel().getValueLengthInRange(n)<jQe)return i.getModel().getValueInRange(n)}return null}let Tl=class dme extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._findWidgetVisible=BC.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=r,this._updateHistoryDelayer=new Np(500),this._state=this._register(new gQe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(dme.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!t7.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=dc(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return X1(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let r=nj(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?n.searchString=dc(r):n.searchString=r)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let r=nj(this._editor,e.seedSearchStringFromSelection);r&&(n.searchString=r)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let r=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;r&&(n.searchString=r)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let r=this._editor.getSelections();r.some(o=>!o.isEmpty())&&(n.searchScope=r)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Z2(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return X1(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Tl.ID="editor.contrib.findController";Tl=cme([Df(1,cn),Df(2,Dg),Df(3,K0)],Tl);let ij=class extends Tl{constructor(e,t,n,r,o,s,a,u){super(e,n,a,u),this._contextViewService=t,this._keybindingService=r,this._themeService=o,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return X1(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const r=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":o=!!r&&r.startLineNumber!==r.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||o,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new i7(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new n7(this._editor,this._state,this._keybindingService,this._themeService))}};ij=cme([Df(1,Hp),Df(2,cn),Df(3,Er),Df(4,xr),Df(5,po),Df(6,Dg),Df(7,K0)],ij);const KQe=Mue(new Rue({id:lr.StartFindAction,label:C("startFindAction","Find"),alias:"Find",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Rt.MenubarEditMenu,group:"3_find",title:C({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));KQe.addImplementation(0,(i,e,t)=>{const n=Tl.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const GQe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:C("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:C("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:C("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:C("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class qQe extends Lt{constructor(){super({id:lr.StartFindWithArgs,label:C("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:GQe})}run(e,t,n){return X1(this,void 0,void 0,function*(){let r=Tl.get(t);if(r){const o=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(35).loop},o),r.setGlobalBufferTerm(r.getState().searchString)}})}}class YQe extends Lt{constructor(){super({id:lr.StartFindWithSelection,label:C("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return X1(this,void 0,void 0,function*(){let n=Tl.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class hme extends Lt{run(e,t){return X1(this,void 0,void 0,function*(){let n=Tl.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class ZQe extends hme{constructor(){super({id:lr.NextMatchFindAction,label:C("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:_t.and(de.focus,t7),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class XQe extends hme{constructor(){super({id:lr.PreviousMatchFindAction,label:C("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:_t.and(de.focus,t7),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class fme extends Lt{run(e,t){return X1(this,void 0,void 0,function*(){let n=Tl.get(t);if(!n)return;const r=t.getOption(35).seedSearchStringFromSelection==="selection";let o=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(o=nj(t,"single",r)),o&&n.setSearchString(o),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:r,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class QQe extends fme{constructor(){super({id:lr.NextSelectionMatchFindAction,label:C("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class JQe extends fme{constructor(){super({id:lr.PreviousSelectionMatchFindAction,label:C("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const eJe=Mue(new Rue({id:lr.StartFindReplaceAction,label:C("startReplace","Replace"),alias:"Replace",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Rt.MenubarEditMenu,group:"3_find",title:C({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));eJe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Tl.get(e);if(!n)return!1;const r=e.getSelection(),o=n.isFindInputFocused(),s=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!o,a=o||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});ki(Tl.ID,ij);it(qQe);it(YQe);it(ZQe);it(XQe);it(QQe);it(JQe);const df=Ps.bindToContribution(Tl.get);nt(new df({id:lr.CloseFindWidgetCommand,precondition:BC,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,_t.not("isComposing")),primary:9,secondary:[1033]}}));nt(new df({id:lr.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:vP.primary,mac:vP.mac,win:vP.win,linux:vP.linux}}));nt(new df({id:lr.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:bP.primary,mac:bP.mac,win:bP.win,linux:bP.linux}}));nt(new df({id:lr.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:CP.primary,mac:CP.mac,win:CP.win,linux:CP.linux}}));nt(new df({id:lr.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:yP.primary,mac:yP.mac,win:yP.win,linux:yP.linux}}));nt(new df({id:lr.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:wP.primary,mac:wP.mac,win:wP.win,linux:wP.linux}}));nt(new df({id:lr.ReplaceOneAction,precondition:BC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:3094}}));nt(new df({id:lr.ReplaceOneAction,precondition:BC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,iZ),primary:3}}));nt(new df({id:lr.ReplaceAllAction,precondition:BC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:2563}}));nt(new df({id:lr.ReplaceAllAction,precondition:BC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,iZ),primary:void 0,mac:{primary:2051}}}));nt(new df({id:lr.SelectAllMatchesAction,precondition:BC,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:515}}));const Xie=65535,sp=16777215,Qie=4278190080;class DO{constructor(e,t,n){if(e.length!==t.length||e.length>Xie)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,r)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=r};for(let n=0,r=this._startIndexes.length;n<r;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>sp||s>sp)throw new Error("startLineNumber or endLineNumber must not exceed "+sp);for(;e.length>0&&!t(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&sp}getEndLineNumber(e){return this._endIndexes[e]&sp}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,r=e%32,o=this._collapseStates[n];t?this._collapseStates[n]=o|1<<r:this._collapseStates[n]=o&~(1<<r)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),n=!0);return n}toRegion(e){return new tJe(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Qie)>>>24)+((this._endIndexes[e]&Qie)>>>16);return t===Xie?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let r=Math.floor((t+n)/2);e<this.getStartLineNumber(r)?n=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class tJe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class nJe{constructor(e,t){this._updateEventEmitter=new Ce,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new DO(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,r)=>n.regionIndex-r.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let r=0,o=-1,s=-1;const a=u=>{for(;r<u;){const d=this._regions.getEndLineNumber(r),h=this._regions.isCollapsed(r);d<=o&&n.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(h,d<=s)),h&&d>s&&(s=d),r++}};for(let u of e){let d=u.regionIndex,h=this._editorDecorationIds[d];if(h&&!t[h]){t[h]=!0,a(d);let f=!this._regions.isCollapsed(d);this._regions.setCollapsed(d,f),o=Math.max(o,this._regions.getEndLineNumber(d))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],r=(f,p)=>{for(let m of t)if(f<m&&m<=p)return!0;return!1},o=-1,s=(f,p)=>{const m=e.getStartLineNumber(f),v=e.getEndLineNumber(f);p||(p=e.isCollapsed(f)),p&&r(m,v)&&(p=!1),e.setCollapsed(f,p);const b=this._textModel.getLineMaxColumn(m),E={startLineNumber:m,startColumn:Math.max(b-1,1),endLineNumber:m,endColumn:b};n.push({range:E,options:this._decorationProvider.getDecorationOption(p,v<=o)}),p&&v>o&&(o=v)},a=0,u=()=>{for(;a<this._regions.length;){let f=this._regions.isCollapsed(a);if(a++,f)return a-1}return-1},d=0,h=u();for(;h!==-1&&d<e.length;){let f=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(f){let p=f.startLineNumber;if(f.startColumn===Math.max(f.endColumn-1,1)&&this._textModel.getLineMaxColumn(p)===f.endColumn)for(;d<e.length;){let m=e.getStartLineNumber(d);if(p>=m)s(d,p===m),d++;else break}}h=u()}for(;d<e.length;)s(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let r=n.startLineNumber,o=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:r,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let r=this.getRegionAtLine(n.startLineNumber);r&&!r.isCollapsed&&t.push(r)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let r=this._regions.findRange(e),o=1;for(;r>=0;){let s=this._regions.toRegion(r);(!t||t(s,o))&&n.push(s),o++,r=s.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],r=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const s=[];for(let a=r,u=this._regions.length;a<u;a++){let d=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;s.length>0&&!d.containedBy(s[s.length-1]);)s.pop();s.push(d),t(d,s.length)&&n.push(d)}else break}}else for(let s=r,a=this._regions.length;s<a;s++){let u=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<o)(!t||t(u))&&n.push(u);else break}return n}}function iJe(i,e,t){let n=[];for(let r of t){let o=i.getRegionAtLine(r);if(o){const s=!o.isCollapsed;if(n.push(o),e>1){let a=i.getRegionsInside(o,(u,d)=>u.isCollapsed!==s&&d<e);n.push(...a)}}}i.toggleCollapseState(n)}function aE(i,e,t=Number.MAX_VALUE,n){let r=[];if(n&&n.length>0)for(let o of n){let s=i.getRegionAtLine(o);if(s&&(s.isCollapsed!==e&&r.push(s),t>1)){let a=i.getRegionsInside(s,(u,d)=>u.isCollapsed!==e&&d<t);r.push(...a)}}else{let o=i.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);r.push(...o)}i.toggleCollapseState(r)}function gme(i,e,t,n){let r=[];for(let o of n){let s=i.getAllRegionsAtLine(o,(a,u)=>a.isCollapsed!==e&&u<=t);r.push(...s)}i.toggleCollapseState(r)}function rJe(i,e,t){let n=[];for(let r of t){let o=i.getAllRegionsAtLine(r,s=>s.isCollapsed!==e);o.length>0&&n.push(o[0])}i.toggleCollapseState(n)}function oJe(i,e,t,n){let r=(s,a)=>a===e&&s.isCollapsed!==t&&!n.some(u=>s.containsLine(u)),o=i.getRegionsInside(null,r);i.toggleCollapseState(o)}function pme(i,e,t){let n=[];for(let s of t)n.push(i.getAllRegionsAtLine(s,void 0)[0]);let r=s=>n.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,o=i.getRegionsInside(null,r);i.toggleCollapseState(o)}function rZ(i,e,t){let n=i.textModel,r=i.regions,o=[];for(let s=r.length-1;s>=0;s--)if(t!==r.isCollapsed(s)){let a=r.getStartLineNumber(s);e.test(n.getLineContent(a))&&o.push(r.toRegion(s))}i.toggleCollapseState(o)}function oZ(i,e,t){let n=i.regions,r=[];for(let o=n.length-1;o>=0;o--)t!==n.isCollapsed(o)&&e===n.getType(o)&&r.push(n.toRegion(o));i.toggleCollapseState(r)}function sJe(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let r=n.parentIndex;r!==-1?t=e.regions.getStartLineNumber(r):t=null}return t}function aJe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,r=0;for(n!==-1&&(r=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function lJe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,r=0;if(n!==-1)r=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;r=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class uJe{constructor(e){this._updateEventEmitter=new Ce,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||A1(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,r=0,o=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let u=a.getStartLineNumber(n)+1,d=a.getEndLineNumber(n);o<=u&&d<=s||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===u&&this._hiddenRanges[r].endLineNumber===d?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new Q(u,1,d,1))),o=u,s=d)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new Q(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Jie(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,r=null,o=s=>((!r||!cJe(s,r))&&(r=Jie(this._hiddenRanges,s)),r?r.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let u=e[s],d=o(u.startLineNumber);d&&(u=u.setStartPosition(d,n.getLineMaxColumn(d)),t=!0);let h=o(u.endLineNumber);h&&(u=u.setEndPosition(h,n.getLineMaxColumn(h)),t=!0),e[s]=u}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function cJe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function Jie(i,e){let t=Hue(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const dJe=5e3,hJe="indent";class fJe{constructor(e){this.editorModel=e,this.id=hJe}dispose(){}compute(e){let t=_i.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(pJe(this.editorModel,n,r))}}let gJe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>sp||t>sp)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,o=0;r>=0;r--,o++)t[o]=this._startIndexes[r],n[o]=this._endIndexes[r];return new DO(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let u=this._indentOccurrences[a];if(u){if(u+t>this._foldingRangesLimit){n=a;break}t+=u}}const r=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,u=0;a>=0;a--){let d=this._startIndexes[a],h=e.getLineContent(d),f=El.computeIndentLevel(h,r);(f<n||f===n&&t++<this._foldingRangesLimit)&&(o[u]=d,s[u]=this._endIndexes[a],u++)}return new DO(o,s)}}};function pJe(i,e,t,n=dJe){const r=i.getOptions().tabSize;let o=new gJe(n),s;t&&(s=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],u=i.getLineCount()+1;a.push({indent:-1,endAbove:u,line:u});for(let d=i.getLineCount();d>0;d--){let h=i.getLineContent(d),f=El.computeIndentLevel(h,r),p=a[a.length-1];if(f===-1){e&&(p.endAbove=d);continue}let m;if(s&&(m=h.match(s)))if(m[1]){let v=a.length-1;for(;v>0&&a[v].indent!==-2;)v--;if(v>0){a.length=v+1,p=a[v],o.insertFirst(d,p.line,f),p.line=d,p.indent=f,p.endAbove=d;continue}}else{a.push({indent:-2,endAbove:d,line:d});continue}if(p.indent>f){do a.pop(),p=a[a.length-1];while(p.indent>f);let v=p.endAbove-1;v-d>=1&&o.insertFirst(d,v,f)}p.indent===f?p.endAbove=d:a.push({indent:f,endAbove:d,line:d})}return o.toIndentRanges(i)}const mJe=5e3,_Je={},mme="syntax";class vJe{constructor(e,t,n,r=mJe){this.editorModel=e,this.providers=t,this.limit=r,this.id=mme;for(const o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new Je),this.disposables.add(o.onDidChange(n)))}compute(e){return bJe(this.providers,this.editorModel,e).then(t=>t?_me(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function bJe(i,e,t){let n=null,r=i.map((o,s)=>Promise.resolve(o.provideFoldingRanges(e,_Je,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let u=e.getLineCount();for(let d of a)d.start>0&&d.end>d.start&&d.end<=u&&n.push({start:d.start,end:d.end,rank:s,kind:d.kind})}},Ms));return Promise.all(r).then(o=>n)}class CJe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,r){if(e>sp||t>sp)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=r,this._types[o]=n,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new DO(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let a=this._nestingLevelCounts[s];if(a){if(a+e>this._foldingRangesLimit){t=s;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit),o=[];for(let s=0,a=0;s<this._length;s++){let u=this._nestingLevels[s];(u<t||u===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[s],r[a]=this._endIndexes[s],o[a]=this._types[s],a++)}return new DO(n,r,o)}}}function _me(i,e){let t=i.sort((s,a)=>{let u=s.start-a.start;return u===0&&(u=s.rank-a.rank),u}),n=new CJe(e),r,o=[];for(let s of t)if(!r)r=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else if(s.start>r.start)if(s.end<=r.end)o.push(r),r=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else{if(s.start>r.end){do r=o.pop();while(r&&s.start>r.end);r&&o.push(r),r=s}n.add(s.start,s.end,s.kind&&s.kind.value,o.length)}return n.toIndentRanges()}const vme="init";class yJe{constructor(e,t,n,r){if(this.editorModel=e,this.id=vme,t.length){let o=s=>({range:{startLineNumber:s.startLineNumber,startColumn:0,endLineNumber:s.endLineNumber,endColumn:e.getLineLength(s.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(n,r)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let r=this.editorModel.getDecorationRange(n);r&&t.push({start:r.startLineNumber,end:r.endLineNumber,rank:1})}return Promise.resolve(_me(t,Number.MAX_VALUE))}}const sZ=ds("folding-expanded",_e.chevronDown,C("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),aZ=ds("folding-collapsed",_e.chevronRight,C("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class zc{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?zc.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?zc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:zc.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?zc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:zc.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}zc.COLLAPSED_VISUAL_DECORATION=Ln.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:mr.asClassName(aZ)});zc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ln.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:mr.asClassName(aZ)});zc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ln.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:mr.asClassName(sZ)});zc.EXPANDED_VISUAL_DECORATION=Ln.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+mr.asClassName(sZ)});zc.HIDDEN_RANGE_DECORATION=Ln.register({description:"folding-hidden-range-decoration",stickiness:1});var wJe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},SJe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Fa=new Dt("foldingEnabled",!1);let _S=class bme extends Oe{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new Je),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new zc(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=Fa.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(r=>{if(r.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),r.hasChanged(98)||r.hasChanged(39)){const o=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=o.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=o.get(39),this.triggerFoldingModelChanged()}r.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),r.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),r.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(bme.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===mme||e.provider===vme)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const r=this.getFoldingModel();r&&r.then(o=>{if(o){this._restoringViewState=!0;try{o.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,gn)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new nJe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new uJe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Np(200),this.cursorChangedScheduler=new tr(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add($H.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new fJe(e),this._useFoldingProviders&&this.foldingModel){let t=$H.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new yJe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new vJe(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=cs(r=>t.compute(r));return n.then(r=>{if(r&&n===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const u=r.setCollapsedAllOfType(ef.Imports.value,!0);u&&(o=L0.capture(this.editor),this._currentModelHasFoldedImports=u)}let s=this.editor.getSelections(),a=s?s.map(u=>u.startLineNumber):[];e.update(r,a),o&&o.restore(this.editor)}return e})}).then(void 0,e=>(gn(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let r=[];for(let o of n){let s=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&r.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}r.length&&(t.toggleCollapseState(r),this.reveal(n[0].getPosition()))}}}).then(void 0,gn)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const r=e.target.detail,o=e.target.element.offsetLeft;if(r.offsetX-o<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,o=e.target.range;if(!(!o||o.startLineNumber!==n)){if(r){if(e.target.type!==4)return}else{let s=this.editor.getModel();if(!s||o.startColumn!==s.getLineMaxColumn(n))return}t.then(s=>{if(s){let a=s.getRegionAtLine(n);if(a&&a.startLineNumber===n){let u=a.isCollapsed;if(r||u){let d=e.event.altKey,h=[];if(d){let f=m=>!m.containedBy(a)&&!a.containedBy(m),p=s.getRegionsInside(null,f);for(const m of p)m.isCollapsed&&h.push(m);h.length===0&&(h=p)}else{let f=e.event.middleButton||e.event.shiftKey;if(f)for(const p of s.getRegionsInside(a))p.isCollapsed===u&&h.push(p);(u||!f||h.length===0)&&h.push(a)}s.toggleCollapseState(h),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,gn)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};_S.ID="editor.contrib.folding";_S=wJe([SJe(1,cn)],_S);class ol extends Lt{runEditorCommand(e,t,n){let r=_S.get(t);if(!r)return;let o=r.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(s=>{if(s){this.invoke(r,s,t,n);const a=t.getSelection();a&&r.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function Cme(i){if(!ml(i)){if(!Ya(i))return!1;const e=i;if(!ml(e.levels)&&!E1(e.levels)||!ml(e.direction)&&!cc(e.direction)||!ml(e.selectionLines)&&(!mue(e.selectionLines)||!e.selectionLines.every(E1)))return!1}return!0}class EJe extends ol{constructor(){super({id:"editor.unfold",label:C("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Cme,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let o=r&&r.levels||1,s=this.getLineNumbers(r,n);r&&r.direction==="up"?gme(t,!1,o,s):aE(t,!1,o,s)}}class LJe extends ol{constructor(){super({id:"editor.unfoldRecursively",label:C("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2137),weight:100}})}invoke(e,t,n,r){aE(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class xJe extends ol{constructor(){super({id:"editor.fold",label:C("foldAction.label","Fold"),alias:"Fold",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Cme,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let o=this.getLineNumbers(r,n);const s=r&&r.levels,a=r&&r.direction;typeof s!="number"&&typeof a!="string"?rJe(t,!0,o):a==="up"?gme(t,!0,s||1,o):aE(t,!0,s||1,o)}}class DJe extends ol{constructor(){super({id:"editor.toggleFold",label:C("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2090),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);iJe(t,1,r)}}class TJe extends ol{constructor(){super({id:"editor.foldRecursively",label:C("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2135),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);aE(t,!0,Number.MAX_VALUE,r)}}class IJe extends ol{constructor(){super({id:"editor.foldAllBlockComments",label:C("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())oZ(t,ef.Comment.value,!0);else{const r=n.getModel();if(!r)return;const o=_i.getComments(r.getLanguageId());if(o&&o.blockCommentStartToken){let s=new RegExp("^\\s*"+dc(o.blockCommentStartToken));rZ(t,s,!0)}}}}class kJe extends ol{constructor(){super({id:"editor.foldAllMarkerRegions",label:C("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())oZ(t,ef.Region.value,!0);else{const r=n.getModel();if(!r)return;const o=_i.getFoldingRules(r.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);rZ(t,s,!0)}}}}class NJe extends ol{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:C("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())oZ(t,ef.Region.value,!1);else{const r=n.getModel();if(!r)return;const o=_i.getFoldingRules(r.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);rZ(t,s,!1)}}}}class AJe extends ol{constructor(){super({id:"editor.foldAllExcept",label:C("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2131),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);pme(t,!0,r)}}class OJe extends ol{constructor(){super({id:"editor.unfoldAllExcept",label:C("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2129),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);pme(t,!1,r)}}class RJe extends ol{constructor(){super({id:"editor.foldAll",label:C("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2069),weight:100}})}invoke(e,t,n){aE(t,!0)}}class MJe extends ol{constructor(){super({id:"editor.unfoldAll",label:C("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2088),weight:100}})}invoke(e,t,n){aE(t,!1)}}class Q1 extends ol{getFoldingLevel(){return parseInt(this.id.substr(Q1.ID_PREFIX.length))}invoke(e,t,n){oJe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Q1.ID_PREFIX="editor.foldLevel";Q1.ID=i=>Q1.ID_PREFIX+i;class PJe extends ol{constructor(){super({id:"editor.gotoParentFold",label:C("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=sJe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class FJe extends ol{constructor(){super({id:"editor.gotoPreviousFold",label:C("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=aJe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class BJe extends ol{constructor(){super({id:"editor.gotoNextFold",label:C("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=lJe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}ki(_S.ID,_S);it(EJe);it(LJe);it(xJe);it(TJe);it(RJe);it(MJe);it(IJe);it(kJe);it(NJe);it(AJe);it(OJe);it(DJe);it(PJe);it(FJe);it(BJe);for(let i=1;i<=7;i++)Pue(new Q1({id:Q1.ID(i),label:C("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Fa,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2048|21+i),weight:100}}));const WJe=ye("editor.foldBackground",{light:nr(o0,.3),dark:nr(o0,.3),hc:null},C("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),VJe=ye("editorGutter.foldingControlForeground",{dark:L9,light:L9,hc:L9},C("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));fr((i,e)=>{const t=i.getColor(WJe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(VJe);n&&e.addRule(`
		.monaco-editor .cldr${mr.asCSSSelector(sZ)},
		.monaco-editor .cldr${mr.asCSSSelector(aZ)} {
			color: ${n} !important;
		}
		`)});class HJe extends Lt{constructor(){super({id:"editor.action.fontZoomIn",label:C("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Ap.setZoomLevel(Ap.getZoomLevel()+1)}}class $Je extends Lt{constructor(){super({id:"editor.action.fontZoomOut",label:C("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Ap.setZoomLevel(Ap.getZoomLevel()-1)}}class zJe extends Lt{constructor(){super({id:"editor.action.fontZoomReset",label:C("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Ap.setZoomLevel(0)}}it(HJe);it($Je);it(zJe);var yme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wme=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let TO=class{constructor(e,t){this._workerService=t,this._callOnDispose=new Je,this._callOnModel=new Je,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(QF.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=QF.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new Py;for(let r of t.autoFormatTriggerCharacters)n.add(r.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(r=>{let o=r.charCodeAt(r.length-1);n.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition();let r=!1;const o=this._editor.onDidChangeModelContent(s=>{if(s.isFlush){r=!0,o.dispose();return}for(let a=0,u=s.changes.length;a<u;a++)if(s.changes[a].range.endLineNumber<=n.lineNumber){r=!0,o.dispose();return}});uge(this._workerService,t,n,e,t.getFormattingOptions()).then(s=>{o.dispose(),!r&&bl(s)&&(aS.execute(this._editor,s,!0),RY(s))},s=>{throw o.dispose(),s})}};TO.ID="editor.contrib.autoFormat";TO=yme([wme(1,Hu)],TO);let IO=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new Je,this._callOnModel=new Je,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(Oh.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&Oh.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(lge,this.editor,e,2,DC.None,Fn.None).catch(gn))}};IO.ID="editor.contrib.formatOnPaste";IO=yme([wme(1,Nn)],IO);class UJe extends Lt{constructor(){super({id:"editor.action.formatDocument",label:C("formatDocument.label","Format Document"),alias:"Format Document",precondition:_t.and(de.notInCompositeEditor,de.writable,de.hasDocumentFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return lZ(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Nn);yield e.get($p).showWhile(n.invokeFunction(Qje,t,1,DC.None,Fn.None),250)}})}}class jJe extends Lt{constructor(){super({id:"editor.action.formatSelection",label:C("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:_t.and(de.writable,de.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2084),weight:100},contextMenuOpts:{when:de.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return lZ(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Nn),r=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new Q(a.startLineNumber,1,a.startLineNumber,r.getLineMaxColumn(a.startLineNumber)):a);yield e.get($p).showWhile(n.invokeFunction(lge,t,o,1,DC.None,Fn.None),250)})}}ki(TO.ID,TO);ki(IO.ID,IO);it(UJe);it(jJe);Xn.registerCommand("editor.action.format",i=>lZ(void 0,void 0,void 0,function*(){const e=i.get(Ii).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=i.get(Ir);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));class Gy{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let o=0;t.children.get(r)!==void 0;o++)r=`${n}_${o}`;return r}static empty(e){return e.children.size===0}}class ere extends Gy{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class KJe extends Gy{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}}class Ta extends Gy{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let n=this._keys.for(e,!0),r=Ta._requests.get(n);if(!r){let o=new aa;r={promiseCnt:0,source:o,promise:Ta._create(e,o.token),model:void 0},Ta._requests.set(n,r);const s=Date.now();r.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return r.model?Promise.resolve(r.model):(r.promiseCnt+=1,t.onCancellationRequested(()=>{--r.promiseCnt===0&&(r.source.cancel(),Ta._requests.delete(n))}),new Promise((o,s)=>{r.promise.then(a=>{r.model=a,o(a)},a=>{Ta._requests.delete(n),s(a)})}))}static _create(e,t){const n=new aa(t),r=new Ta(e.uri),o=Gc.ordered(e),s=o.map((u,d)=>{var h;let f=Gy.findId(`provider_${d}`,r),p=new KJe(f,r,(h=u.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(u.provideDocumentSymbols(e,n.token)).then(m=>{for(const v of m||[])Ta._makeOutlineElement(v,p);return p},m=>(Ms(m),p)).then(m=>{Gy.empty(m)?m.remove():r._groups.set(f,m)})}),a=Gc.onDidChange(()=>{const u=Gc.ordered(e);rc(u,o)||n.cancel()});return Promise.all(s).then(()=>n.token.isCancellationRequested&&!t.isCancellationRequested?Ta._create(e,t):r._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let n=Gy.findId(e,t),r=new ere(n,t,e);if(e.children)for(const o of e.children)Ta._makeOutlineElement(o,r);t.children.set(r.id,r)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Qn.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof ere?e.push(t.symbol):e.push(...Qn.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Ta._flattenDocumentSymbols(t,e,""),t.sort((n,r)=>Q.compareRangesUsingStarts(n.range,r.range))}static _flattenDocumentSymbols(e,t,n){for(const r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||n,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&Ta._flattenDocumentSymbols(e,r.children,r.name)}}Ta._requestDurations=new UF(Gc,350);Ta._requests=new z0(9,.75);Ta._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(i,e){return`${i.id}/${e?i.getVersionId():""}/${this._hash(Gc.all(i))}`}_hash(i){let e="";for(const t of i){let n=this._data.get(t);typeof n>"u"&&(n=this._counter++,this._data.set(t,n)),e+=n}return e}};var Sme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function tre(i,e,t){return Sme(this,void 0,void 0,function*(){const n=yield Ta.create(i,t);return e?n.asListOfDocumentSymbols():n.getTopLevelSymbols()})}Xn.registerCommand("_executeDocumentSymbolProvider",function(i,...e){return Sme(this,void 0,void 0,function*(){const[t]=e;Yi(rn.isUri(t));const n=i.get(To).getModel(t);if(n)return tre(n,!1,Fn.None);const r=yield i.get(Ja).createModelReference(t);try{return yield tre(r.object.textEditorModel,!1,Fn.None)}finally{r.dispose()}})});function cl(i,e){let t=0;for(let n=0;n<i.length;n++)i.charAt(n)==="	"?t+=e:t++;return t}function X2(i,e,t){i=i<0?0:i;let n="";if(!t){let r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}function Eme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];const r=_i.getIndentationRules(i.getLanguageId());if(!r)return[];for(t=Math.min(t,i.getLineCount());e<=t&&r.unIndentedLinePattern;){let b=i.getLineContent(e);if(!r.unIndentedLinePattern.test(b))break;e++}if(e>t-1)return[];const{tabSize:o,indentSize:s,insertSpaces:a}=i.getOptions(),u=(b,E)=>(E=E||1,Tu.shiftIndent(b,b.length+E,o,s,a)),d=(b,E)=>(E=E||1,Tu.unshiftIndent(b,b.length+E,o,s,a));let h=[],f,p=i.getLineContent(e),m=p;if(n!=null){f=n;let b=zi(p);m=f+p.substring(b.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(m)&&(f=d(f),m=f+p.substring(b.length)),p!==m&&h.push(jr.replaceMove(new wt(e,1,e,b.length+1),El.normalizeIndentation(f,s,a)))}else f=zi(p);let v=f;r.increaseIndentPattern&&r.increaseIndentPattern.test(m)?(v=u(v),f=u(f)):r.indentNextLinePattern&&r.indentNextLinePattern.test(m)&&(v=u(v)),e++;for(let b=e;b<=t;b++){let E=i.getLineContent(b),S=zi(E),w=v+E.substring(S.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(w)&&(v=d(v),f=d(f)),S!==v&&h.push(jr.replaceMove(new wt(b,1,b,S.length+1),El.normalizeIndentation(v,s,a))),!(r.unIndentedLinePattern&&r.unIndentedLinePattern.test(E))&&(r.increaseIndentPattern&&r.increaseIndentPattern.test(w)?(f=u(f),v=f):r.indentNextLinePattern&&r.indentNextLinePattern.test(w)?v=u(v):v=f)}return h}class r7 extends Lt{constructor(){super({id:r7.ID,label:C("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),o=t.getSelection();if(!o)return;const s=new ZJe(o,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}r7.ID="editor.action.indentationToSpaces";class o7 extends Lt{constructor(){super({id:o7.ID,label:C("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),o=t.getSelection();if(!o)return;const s=new XJe(o,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}o7.ID="editor.action.indentationToTabs";class Lme extends Lt{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Cc),r=e.get(To);let o=t.getModel();if(!o)return;const s=r.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===s.tabSize?C("configuredTabSize","Configured Tab Size"):void 0})),u=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:C({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[u]}).then(d=>{d&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(d.label,10),insertSpaces:this.insertSpaces})})},50)}}class s7 extends Lme{constructor(){super(!1,{id:s7.ID,label:C("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}s7.ID="editor.action.indentUsingTabs";class a7 extends Lme{constructor(){super(!0,{id:a7.ID,label:C("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}a7.ID="editor.action.indentUsingSpaces";class l7 extends Lt{constructor(){super({id:l7.ID,label:C("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(To);let r=t.getModel();if(!r)return;const o=n.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(o.insertSpaces,o.tabSize)}}l7.ID="editor.action.detectIndentation";class GJe extends Lt{constructor(){super({id:"editor.action.reindentlines",label:C("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=Eme(n,1,n.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class qJe extends Lt{constructor(){super({id:"editor.action.reindentselectedlines",label:C("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=t.getSelections();if(r===null)return;let o=[];for(let s of r){let a=s.startLineNumber,u=s.endLineNumber;if(a!==u&&s.endColumn===1&&u--,a===1){if(a===u)continue}else a--;let d=Eme(n,a,u);o.push(...d)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class YJe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let r of this._edits)t.addEditOperation(Q.lift(r.range),r.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class rj{constructor(e){this.callOnDispose=new Je,this.callOnModel=new Je,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const r=this.editor.getOption(9),{tabSize:o,indentSize:s,insertSpaces:a}=n.getOptions();let u=[],d={shiftIndent:m=>Tu.shiftIndent(m,m.length+1,o,s,a),unshiftIndent:m=>Tu.unshiftIndent(m,m.length+1,o,s,a)},h=e.startLineNumber;for(;h<=e.endLineNumber;){if(this.shouldIgnoreLine(n,h)){h++;continue}break}if(h>e.endLineNumber)return;let f=n.getLineContent(h);if(!/\S/.test(f.substring(0,e.startColumn-1))){const m=_i.getGoodIndentForLine(r,n,n.getLanguageId(),h,d);if(m!==null){let v=zi(f),b=cl(m,o),E=cl(v,o);if(b!==E){let S=X2(b,o,a);u.push({range:new Q(h,1,h,v.length+1),text:S}),f=S+f.substr(v.length)}else{let S=_i.getIndentMetadata(n,h);if(S===0||S===8)return}}}const p=h;for(;h<e.endLineNumber;){if(!/\S/.test(n.getLineContent(h+1))){h++;continue}break}if(h!==e.endLineNumber){let m={getLineTokens:b=>n.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,E)=>n.getLanguageIdAtPosition(b,E),getLineContent:b=>b===p?f:n.getLineContent(b)},v=_i.getGoodIndentForLine(r,m,n.getLanguageId(),h+1,d);if(v!==null){let b=cl(v,o),E=cl(zi(n.getLineContent(h+1)),o);if(b!==E){let S=b-E;for(let w=h+1;w<=e.endLineNumber;w++){let L=n.getLineContent(w),A=zi(L),H=cl(A,o)+S,M=X2(H,o,a);M!==A&&u.push({range:new Q(w,1,w,A.length+1),text:M})}}}}if(u.length>0){this.editor.pushUndoStop();let m=new YJe(u,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let r=e.getLineTokens(t);if(r.getCount()>0){let o=r.findTokenIndexAtOffset(n);if(o>=0&&r.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}rj.ID="editor.contrib.autoIndentOnPaste";function xme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r="";for(let s=0;s<t;s++)r+=" ";let o=new RegExp(r,"gi");for(let s=1,a=i.getLineCount();s<=a;s++){let u=i.getLineFirstNonWhitespaceColumn(s);if(u===0&&(u=i.getLineMaxColumn(s)),u===1)continue;const d=new Q(s,1,s,u),h=i.getValueInRange(d),f=n?h.replace(/\t/ig,r):h.replace(o,"	");e.addEditOperation(d,f)}}class ZJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),xme(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class XJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),xme(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}ki(rj.ID,rj);it(r7);it(o7);it(s7);it(a7);it(l7);it(GJe);it(qJe);var l5=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const QJe=1500;class Dme{constructor(){this._data=new na}push(e,t){const n=this._data.get(e.uri);n===void 0?this._data.set(e.uri,new Set([t])):n.add(t)}pop(e,t){const n=this._data.get(e.uri);n&&(n.delete(t),n.size===0&&this._data.delete(e.uri))}has(e,t){var n;return!!(!((n=this._data.get(e.uri))===null||n===void 0)&&n.has(t))}}function Tme(i,e,t,n){return l5(this,void 0,void 0,function*(){const r=[],s=Hv.ordered(i).reverse().map(a=>e.map(u=>l5(this,void 0,void 0,function*(){try{t.push(i,a);const d=yield a.provideInlayHints(i,u,n);d!=null&&d.length&&r.push(d.filter(h=>u.containsPosition(h.position)))}catch(d){Ms(d)}finally{t.pop(i,a)}})));return yield Promise.all(s.flat()),r.flat().sort((a,u)=>Ee.compare(a.position,u.position))})}class u5{constructor(){this._entries=new z0(50)}get(e){const t=u5._key(e);return this._entries.get(t)}set(e,t){const n=u5._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}class vS{constructor(e){this._editor=e,this._decorationOwnerId=++vS._decorationOwnerIdPool,this._disposables=new Je,this._sessionDisposables=new Je,this._getInlayHintsDelays=new UF(Hv,25,500),this._cache=new u5,this._decorationsMetadata=new Map,this._ruleFactory=new Ece(this._editor),this._disposables.add(Hv.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(t=>{t.hasChanged(126)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(126).enabled)return;const e=this._editor.getModel();if(!e||!Hv.has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const n=new Dme,r=new tr(()=>l5(this,void 0,void 0,function*(){const s=Date.now(),a=new aa;this._sessionDisposables.add(Un(()=>a.dispose(!0)));const u=this._getHintsRanges(),d=yield Tme(e,u,n,a.token);r.delay=this._getInlayHintsDelays.update(e,Date.now()-s),!a.token.isCancellationRequested&&(this._updateHintsDecorators(u,d),this._cache.set(e,Array.from(this._decorationsMetadata.values()).map(h=>h.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(r),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>r.schedule())),this._sessionDisposables.add(this._editor.onDidScrollChange(()=>r.schedule())),r.schedule();const o=new Je;this._sessionDisposables.add(o);for(const s of Hv.all(e))typeof s.onDidChangeInlayHints=="function"&&o.add(s.onDidChangeInlayHints(()=>{n.has(e,s)||r.schedule()}))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=[];for(const o of n.sort(Q.compareRangesUsingStarts)){const s=t.validateRange(new Q(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));r.length===0||!Q.areIntersectingOrTouching(r[r.length-1],s)?r.push(s):r[r.length-1]=Q.plusRange(r[r.length-1],s)}return r}_updateHintsDecorators(e,t){const{fontSize:n,fontFamily:r}=this._getLayoutInfo(),o=this._editor.getModel(),s=[],a="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,r);for(const h of t){const{text:f,position:p,whitespaceBefore:m,whitespaceAfter:v}=h,b=m?n/3|0:0,E=v?n/3|0:0;let S,w;h.kind===jF.Parameter?(S=Lr(wTe),w=Lr(yTe)):h.kind===jF.Type?(S=Lr(CTe),w=Lr(bTe)):(S=Lr(Xb),w=Lr(Zb));const L=this._ruleFactory.createClassNameRef({fontSize:`${n}px`,margin:`0px ${E}px 0px ${b}px`,fontFamily:`var(${a}), ${js.fontFamily}`,padding:`1px ${Math.max(1,n/4)|0}px`,borderRadius:`${n/4|0}px`,verticalAlign:"middle",backgroundColor:S,color:w});let A="before",N=Q.fromPositions(p),H=o.getWordAtPosition(p),M=!1;if(H&&(H.endColumn===p.column?(A="after",M=!0,N=nre(H,p.lineNumber)):H.startColumn===p.column&&(M=!0,N=nre(H,p.lineNumber))),s.push({decoration:{range:N,options:{[A]:{content:JJe(f),inlineClassNameAffectsLetterSpacing:!0,inlineClassName:L.className},description:"InlayHint",showIfCollapsed:!M,stickiness:0}},classNameRef:L}),s.length>QJe)break}const u=[];for(const h of e)for(const{id:f}of o.getDecorationsInRange(h,this._decorationOwnerId,!0)){const p=this._decorationsMetadata.get(f);p&&(u.push(f),p.classNameRef.dispose(),this._decorationsMetadata.delete(f))}const d=o.deltaDecorations(u,s.map(h=>h.decoration),this._decorationOwnerId);for(let h=0;h<d.length;h++)this._decorationsMetadata.set(d[h],{hint:t[h],classNameRef:s[h].classNameRef})}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(45);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const r=e.fontFamily||this._editor.getOption(42);return{fontSize:n,fontFamily:r}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}}vS.ID="editor.contrib.InlayHints";vS._decorationOwnerIdPool=0;function nre(i,e){return new Q(e,i.startColumn,e,i.endColumn)}function JJe(i){const e=" ";return i.replace(/[ \t]/g,e)}ki(vS.ID,vS);Xn.registerCommand("_executeInlayHintProvider",(i,...e)=>l5(void 0,void 0,void 0,function*(){const[t,n]=e;Yi(rn.isUri(t)),Yi(Q.isIRange(n));const r=yield i.get(Ja).createModelReference(t);try{return yield Tme(r.object.textEditorModel,[Q.lift(n)],new Dme,Fn.None)}finally{r.dispose()}}));class eet{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new wt(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):new wt(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)}}var tet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},net=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let R0=class oj{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(oj.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),r=this.editor.getModel();if(!r||!n)return;let o=n;if(o.startLineNumber!==o.endLineNumber)return;const s=new Ode(this.editor,5),a=r.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=cs(u=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(u=>{if(!u||!u.range||!u.value||!s.validate(this.editor))return;let d=Q.lift(u.range),h=u.range,f=u.value.length-(o.endColumn-o.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+u.value.length},f>1&&(o=new wt(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+f-1));const p=new eet(d,o,u.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:h,options:oj.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=m0(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(gn)}).catch(gn)):Promise.resolve(void 0)}};R0.ID="editor.contrib.inPlaceReplaceController";R0.DECORATION=Ln.register({description:"in-place-replace",className:"valueSetReplacement"});R0=tet([net(1,Hu)],R0);class iet extends Lt{constructor(){super({id:"editor.action.inPlaceReplace.up",label:C("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=R0.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class ret extends Lt{constructor(){super({id:"editor.action.inPlaceReplace.down",label:C("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=R0.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}ki(R0.ID,R0);it(iet);it(ret);fr((i,e)=>{const t=i.getColor(ade);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class oet extends Lt{constructor(){super({id:"expandLineSelection",label:C("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:de.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(n.source,3,os.expandLineSelection(r,r.getCursorStates())),r.revealPrimaryCursor(n.source,!0)}}it(oet);class set{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=aet(e,this._cursors);for(let r=0,o=n.length;r<o;r++){let s=n[r];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function aet(i,e){e.sort((s,a)=>s.lineNumber===a.lineNumber?s.column-a.column:s.lineNumber-a.lineNumber);for(let s=e.length-2;s>=0;s--)e[s].lineNumber===e[s+1].lineNumber&&e.splice(s,1);let t=[],n=0,r=0,o=e.length;for(let s=1,a=i.getLineCount();s<=a;s++){let u=i.getLineContent(s),d=u.length+1,h=0;if(r<o&&e[r].lineNumber===s&&(h=e[r].column,r++,h===d)||u.length===0)continue;let f=Qf(u),p=0;if(f===-1)p=1;else if(f!==u.length-1)p=f+2;else continue;p=Math.max(h,p),t[n++]=jr.delete(new Q(s,p,s,d))}return t}class Ime{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let r=[];for(let s=n.startLineNumber;s<=n.endLineNumber;s++)r.push(e.getLineContent(s));const o=r.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new Q(n.startLineNumber,1,n.startLineNumber,1),o+`
`):t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let r=n.startLineNumber,o=n.startColumn,s=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(r=r+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),n=wt.createWithDirection(r,o,s,a,this._selectionDirection)}return n}}class uet{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:a}=e.getOptions();let u=this.buildIndentConverter(o,s,a),d={getLineTokens:h=>e.getLineTokens(h),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(h,f)=>e.getLanguageIdAtPosition(h,f),getLineContent:null};if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){let h=r.startLineNumber,f=this._isMovingDown?h+1:h-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new Q(1,1,1,1),null):(t.addEditOperation(new Q(h,1,h,1),e.getLineContent(f)),t.addEditOperation(new Q(f,1,f,e.getLineMaxColumn(f)),null)),r=new wt(f,1,f,1)}else{let h,f;if(this._isMovingDown){h=r.endLineNumber+1,f=e.getLineContent(h),t.addEditOperation(new Q(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);let p=f;if(this.shouldAutoIndent(e,r)){let m=this.matchEnterRule(e,u,o,h,r.startLineNumber-1);if(m!==null){let b=zi(e.getLineContent(h)),E=m+cl(b,o);p=X2(E,o,a)+this.trimLeft(f)}else{d.getLineContent=E=>E===r.startLineNumber?e.getLineContent(h):e.getLineContent(E);let b=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber,u);if(b!==null){let E=zi(e.getLineContent(h)),S=cl(b,o),w=cl(E,o);S!==w&&(p=X2(S,o,a)+this.trimLeft(f))}}t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`);let v=this.matchEnterRuleMovingDown(e,u,o,r.startLineNumber,h,p);if(v!==null)v!==0&&this.getIndentEditsOfMovingBlock(e,t,r,o,a,v);else{d.getLineContent=E=>E===r.startLineNumber?p:E>=r.startLineNumber+1&&E<=r.endLineNumber+1?e.getLineContent(E-1):e.getLineContent(E);let b=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber+1,u);if(b!==null){const E=zi(e.getLineContent(r.startLineNumber)),S=cl(b,o),w=cl(E,o);if(S!==w){const L=S-w;this.getIndentEditsOfMovingBlock(e,t,r,o,a,L)}}}}else t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`)}else if(h=r.startLineNumber-1,f=e.getLineContent(h),t.addEditOperation(new Q(h,1,h+1,1),null),t.addEditOperation(new Q(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+f),this.shouldAutoIndent(e,r)){d.getLineContent=m=>m===h?e.getLineContent(r.startLineNumber):e.getLineContent(m);let p=this.matchEnterRule(e,u,o,r.startLineNumber,r.startLineNumber-2);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,r,o,a,p);else{let m=_i.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(r.startLineNumber,1),h,u);if(m!==null){let v=zi(e.getLineContent(r.startLineNumber)),b=cl(m,o),E=cl(v,o);if(b!==E){let S=b-E;this.getIndentEditsOfMovingBlock(e,t,r,o,a,S)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,n){return{shiftIndent:r=>Tu.shiftIndent(r,r.length+1,e,t,n),unshiftIndent:r=>Tu.unshiftIndent(r,r.length+1,e,t,n)}}parseEnterResult(e,t,n,r,o){if(o){let s=o.indentation;o.indentAction===co.None||o.indentAction===co.Indent?s=o.indentation+o.appendText:o.indentAction===co.IndentOutdent?s=o.indentation:o.indentAction===co.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);let a=e.getLineContent(r);if(this.trimLeft(a).indexOf(this.trimLeft(s))>=0){let u=zi(e.getLineContent(r)),d=zi(s),h=_i.getIndentMetadata(e,r);h!==null&&h&2&&(d=t.unshiftIndent(d));let f=cl(d,n),p=cl(u,n);return f-p}}return null}matchEnterRuleMovingDown(e,t,n,r,o,s){if(Qf(s)>=0){let a=e.getLineMaxColumn(o),u=_i.getEnterAction(this._autoIndent,e,new Q(o,a,o,a));return this.parseEnterResult(e,t,n,r,u)}else{let a=r-1;for(;a>=1;){let h=e.getLineContent(a);if(Qf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=_i.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}}matchEnterRule(e,t,n,r,o,s){let a=o;for(;a>=1;){let h;if(a===o&&s!==void 0?h=s:h=e.getLineContent(a),Qf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=_i.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),r=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==r||_i.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,r,o,s){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let u=e.getLineContent(a),d=zi(u),f=cl(d,r)+s,p=X2(f,r,o);p!==d&&(t.addEditOperation(new Q(a,1,a,d.length+1),p),a===n.endLineNumber&&n.endColumn<=d.length+1&&p===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}class c0{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return c0._COLLATOR||(c0._COLLATOR=new Intl.Collator),c0._COLLATOR}getEditOperations(e,t){let n=cet(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let r=kme(e,t,n);if(!r)return!1;for(let o=0,s=r.before.length;o<s;o++)if(r.before[o]!==r.after[o])return!0;return!1}}c0._COLLATOR=null;function kme(i,e,t){let n=e.startLineNumber,r=e.endLineNumber;if(e.endColumn===1&&r--,n>=r)return null;let o=[];for(let a=n;a<=r;a++)o.push(i.getLineContent(a));let s=o.slice(0);return s.sort(c0.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:n,endLineNumber:r,before:o,after:s}}function cet(i,e,t){let n=kme(i,e,t);return n?jr.replace(new Q(n.startLineNumber,1,n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class Nme extends Lt{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));n.sort((s,a)=>Q.compareRangesUsingStarts(s.selection,a.selection));let r=n[0];for(let s=1;s<n.length;s++){const a=n[s];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}const o=[];for(const s of n)o.push(new Ime(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class det extends Nme{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:C("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class het extends Nme{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:C("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class fet extends Lt{constructor(){super({id:"editor.action.duplicateSelection",label:C("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:de.writable,menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"2_line",title:C({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const r=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())r.push(new Ime(a,!0));else{const u=new wt(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new TAe(u,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class Ame extends Lt{constructor(e,t){super(t),this.down=e}run(e,t){let n=[],r=t.getSelections()||[];const o=t.getOption(9);for(const s of r)n.push(new uet(s,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class get extends Ame{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:C("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class pet extends Ame{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:C("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Ome extends Lt{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const o of n)if(!c0.canRun(t.getModel(),o,this.descending))return;let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new c0(n[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class met extends Ome{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:C("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:de.writable})}}class _et extends Ome{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:C("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:de.writable})}}class vet extends Lt{constructor(){super({id:"editor.action.removeDuplicateLines",label:C("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:de.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let r=[],o=[],s=0;for(let a of t.getSelections()){let u=new Set,d=[];for(let m=a.startLineNumber;m<=a.endLineNumber;m++){let v=n.getLineContent(m);u.has(v)||(d.push(v),u.add(v))}let h=new wt(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),f=a.startLineNumber-s,p=new wt(f,1,f+d.length-1,d[d.length-1].length);r.push(jr.replace(h,d.join(`
`))),o.push(p),s+=a.endLineNumber-a.startLineNumber+1-d.length}t.pushUndoStop(),t.executeEdits(this.id,r,o),t.pushUndoStop()}}class u7 extends Lt{constructor(){super({id:u7.ID,label:C("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Zr(2089,2102),weight:100}})}run(e,t,n){let r=[];n.reason==="auto-save"&&(r=(t.getSelections()||[]).map(a=>new Ee(a.positionLineNumber,a.positionColumn)));let o=t.getSelection();if(o===null)return;let s=new set(o,r);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}u7.ID="editor.action.trimTrailingWhitespace";class bet extends Lt{constructor(){super({id:"editor.action.deleteLines",label:C("lines.delete","Delete Line"),alias:"Delete Line",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let o=0,s=[],a=[];for(let u=0,d=n.length;u<d;u++){const h=n[u];let f=h.startLineNumber,p=h.endLineNumber,m=1,v=r.getLineMaxColumn(p);p<r.getLineCount()?(p+=1,v=1):f>1&&(f-=1,m=r.getLineMaxColumn(f)),s.push(jr.replace(new wt(f,m,p,v),"")),a.push(new wt(f-o,h.positionColumn,f-o,h.positionColumn)),o+=h.endLineNumber-h.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(o=>{let s=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(s-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:s,positionColumn:o.positionColumn}});t.sort((o,s)=>o.startLineNumber===s.startLineNumber?o.endLineNumber-s.endLineNumber:o.startLineNumber-s.startLineNumber);let n=[],r=t[0];for(let o=1;o<t.length;o++)r.endLineNumber+1>=t[o].startLineNumber?r.endLineNumber=t[o].endLineNumber:(n.push(r),r=t[o]);return n.push(r),n}}class Cet extends Lt{constructor(){super({id:"editor.action.indentLines",label:C("lines.indent","Indent Line"),alias:"Indent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Dr.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class yet extends Lt{constructor(){super({id:"editor.action.outdentLines",label:C("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2135,weight:100}})}run(e,t){Cw.Outdent.runEditorCommand(e,t,null)}}class wet extends Lt{constructor(){super({id:"editor.action.insertLineBefore",label:C("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Dr.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class Eet extends Lt{constructor(){super({id:"editor.action.insertLineAfter",label:C("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,Dr.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class Rme extends Lt{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let r=this._getRangesToDelete(t),o=[];for(let u=0,d=r.length-1;u<d;u++){let h=r[u],f=r[u+1];Q.intersectRanges(h,f)===null?o.push(h):r[u+1]=Q.plusRange(h,f)}o.push(r[r.length-1]);let s=this._getEndCursorState(n,o),a=o.map(u=>jr.replace(u,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}}class Let extends Rme{constructor(){super({id:"deleteAllLeft",label:C("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,r=[],o=0;return t.forEach(s=>{let a;if(s.endColumn===1&&o>0){let u=s.startLineNumber-o;a=new wt(u,s.startColumn,u,s.startColumn)}else a=new wt(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);o+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?n=a:r.push(a)}),n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,r=e.getModel();return r===null?[]:(n.sort(Q.compareRangesUsingStarts),n=n.map(o=>{if(o.isEmpty())if(o.startColumn===1){let s=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:r.getLineContent(s).length+1;return new Q(s,a,o.startLineNumber,1)}else return new Q(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new Q(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),n)}}class xet extends Rme{constructor(){super({id:"deleteAllRight",label:C("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,r=[];for(let o=0,s=t.length,a=0;o<s;o++){let u=t[o],d=new wt(u.startLineNumber-a,u.startColumn,u.startLineNumber-a,u.startColumn);u.intersectRanges(e)?n=d:r.push(d)}return n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let r=n.map(o=>{if(o.isEmpty()){const s=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===s?new Q(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new Q(o.startLineNumber,o.startColumn,o.startLineNumber,s)}return o});return r.sort(Q.compareRangesUsingStarts),r}}class Det extends Lt{constructor(){super({id:"editor.action.joinLines",label:C("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getSelection();if(r===null)return;n.sort(Q.compareRangesUsingStarts);let o=[],s=n.reduce((p,m)=>p.isEmpty()?p.endLineNumber===m.startLineNumber?(r.equalsSelection(p)&&(r=m),m):m.startLineNumber>p.endLineNumber+1?(o.push(p),m):new wt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>p.endLineNumber?(o.push(p),m):new wt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn));o.push(s);let a=t.getModel();if(a===null)return;let u=[],d=[],h=r,f=0;for(let p=0,m=o.length;p<m;p++){let v=o[p],b=v.startLineNumber,E=1,S=0,w,L,A=a.getLineContent(v.endLineNumber).length-v.endColumn;if(v.isEmpty()||v.startLineNumber===v.endLineNumber){let M=v.getStartPosition();M.lineNumber<a.getLineCount()?(w=b+1,L=a.getLineMaxColumn(w)):(w=M.lineNumber,L=a.getLineMaxColumn(M.lineNumber))}else w=v.endLineNumber,L=a.getLineMaxColumn(w);let N=a.getLineContent(b);for(let M=b+1;M<=w;M++){let R=a.getLineContent(M),q=a.getLineFirstNonWhitespaceColumn(M);if(q>=1){let X=!0;N===""&&(X=!1),X&&(N.charAt(N.length-1)===" "||N.charAt(N.length-1)==="	")&&(X=!1,N=N.replace(/[\s\uFEFF\xA0]+$/g," "));let $=R.substr(q-1);N+=(X?" ":"")+$,X?S=$.length+1:S=$.length}else S=0}let H=new Q(b,E,w,L);if(!H.isEmpty()){let M;v.isEmpty()?(u.push(jr.replace(H,N)),M=new wt(H.startLineNumber-f,N.length-S+1,b-f,N.length-S+1)):v.startLineNumber===v.endLineNumber?(u.push(jr.replace(H,N)),M=new wt(v.startLineNumber-f,v.startColumn,v.endLineNumber-f,v.endColumn)):(u.push(jr.replace(H,N)),M=new wt(v.startLineNumber-f,v.startColumn,v.startLineNumber-f,N.length-A)),Q.intersectRanges(H,r)!==null?h=M:d.push(M)}f+=H.endLineNumber-H.startLineNumber}d.unshift(h),t.pushUndoStop(),t.executeEdits(this.id,u,d),t.pushUndoStop()}}class Tet extends Lt{constructor(){super({id:"editor.action.transpose",label:C("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:de.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getModel();if(r===null)return;let o=[];for(let s=0,a=n.length;s<a;s++){let u=n[s];if(!u.isEmpty())continue;let d=u.getStartPosition(),h=r.getLineMaxColumn(d.lineNumber);if(d.column>=h){if(d.lineNumber===r.getLineCount())continue;let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p=r.getValueInRange(f).split("").reverse().join("");o.push(new xs(new wt(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p))}else{let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),p=r.getValueInRange(f).split("").reverse().join("");o.push(new cq(f,p,new wt(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class c7 extends Lt{run(e,t){const n=t.getSelections();if(n===null)return;const r=t.getModel();if(r===null)return;const o=t.getOption(116),s=[];for(const a of n)if(a.isEmpty()){const u=a.getStartPosition(),d=t.getConfiguredWordAtPosition(u);if(!d)continue;const h=new Q(u.lineNumber,d.startColumn,u.lineNumber,d.endColumn),f=r.getValueInRange(h);s.push(jr.replace(h,this._modifyText(f,o)))}else{const u=r.getValueInRange(a);s.push(jr.replace(a,this._modifyText(u,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class Iet extends c7{constructor(){super({id:"editor.action.transformToUppercase",label:C("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class ket extends c7{constructor(){super({id:"editor.action.transformToLowercase",label:C("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class uZ{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class kO extends c7{constructor(){super({id:"editor.action.transformToTitlecase",label:C("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:de.writable})}_modifyText(e,t){const n=kO.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,r=>r.toLocaleUpperCase()):e}}kO.titleBoundary=new uZ("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class d0 extends c7{constructor(){super({id:"editor.action.transformToSnakecase",label:C("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:de.writable})}_modifyText(e,t){const n=d0.caseBoundary.get(),r=d0.singleLetters.get();return!n||!r?e:e.replace(n,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase()}}d0.caseBoundary=new uZ("(\\p{Ll})(\\p{Lu})","gmu");d0.singleLetters=new uZ("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");it(det);it(het);it(fet);it(get);it(pet);it(met);it(_et);it(vet);it(u7);it(bet);it(Cet);it(yet);it(wet);it(Eet);it(Let);it(xet);it(Det);it(Tet);it(Iet);it(ket);d0.caseBoundary.isSupported()&&d0.singleLetters.isSupported()&&it(d0);kO.titleBoundary.isSupported()&&it(kO);var Net=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Aet=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},sj=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Mme=new Dt("LinkedEditingInputVisible",!1),Pme="linked-editing-decoration";let M0=class aj extends Oe{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new Je),this._editor=e,this._enabled=!1,this._visibleContextKey=Mme.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Je),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(n=>{(n.hasChanged(61)||n.hasChanged(81))&&this.reinitialize(!1)})),this._register(qF.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(aj.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&qF.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._languageWordPattern=_i.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=_i.getWordDefinition(t.getLanguageId())}));const r=new Np(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),this._debounceDuration)},s=new Np(0),a=u=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(u))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(u=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const d=t.getDecorationRange(this._currentDecorations[0]);if(d&&u.changes.every(h=>d.intersectRanges(h.range))){a(this._currentDecorations);return}}o()})),this._localToDispose.add({dispose:()=>{r.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const r=t.getValueInRange(n);if(this._currentWordPattern){const s=r.match(this._currentWordPattern);if((s?s[0].length:0)!==r.length)return this.clearRanges()}let o=[];for(let s=1,a=e.length;s<a;s++){const u=t.getDecorationRange(e[s]);if(u)if(u.startLineNumber!==u.endLineNumber)o.push({range:u,text:r});else{let d=t.getValueInRange(u),h=r,f=u.startColumn,p=u.endColumn;const m=Uw(d,h);f+=m,d=d.substr(m),h=h.substr(m);const v=kF(d,h);p-=v,d=d.substr(0,d.length-v),h=h.substr(0,h.length-v),(f!==p||h.length!==0)&&o.push({range:new Q(u.startLineNumber,f,u.endLineNumber,p),text:h})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return sj(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const s=n.getDecorationRange(this._currentDecorations[0]);if(s&&s.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=r;const o=cs(s=>sj(this,void 0,void 0,function*(){try{const a=yield Fme(n,t,s);if(o!==this._currentRequest||(this._currentRequest=null,r!==n.getVersionId()))return;let u=[];a!=null&&a.ranges&&(u=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let d=!1;for(let f=0,p=u.length;f<p;f++)if(Q.containsPosition(u[f],t)){if(d=!0,f!==0){const m=u[f];u.splice(f,1),u.unshift(m)}break}if(!d){this.clearRanges();return}const h=u.map(f=>({range:f,options:aj.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,h)}catch(a){Cg(a)||gn(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}};M0.ID="editor.contrib.linkedEditing";M0.DECORATION=Ln.register({description:"linked-editing",stickiness:0,className:Pme});M0=Net([Aet(1,cn)],M0);class Oet extends Lt{constructor(){super({id:"editor.action.linkedEditing",label:C("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(Ii),[r,o]=Array.isArray(t)&&t||[void 0,void 0];return rn.isUri(r)&&Ee.isIPosition(o)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},gn):super.runCommand(e,t)}run(e,t){const n=M0.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const Ret=Ps.bindToContribution(M0.get);nt(new Ret({id:"cancelLinkedEditingInput",precondition:Mme,handler:i=>i.clearRanges(),kbOpts:{kbExpr:de.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function Fme(i,e,t){const n=qF.ordered(i);return qle(n.map(r=>()=>sj(this,void 0,void 0,function*(){try{return yield r.provideLinkedEditingRanges(i,e,t)}catch(o){Ms(o);return}})),r=>!!r&&bl(r==null?void 0:r.ranges))}const Met=ye("editor.linkedEditingBackground",{dark:we.fromHex("#f00").transparent(.3),light:we.fromHex("#f00").transparent(.3),hc:we.fromHex("#f00").transparent(.3)},C("editorLinkedEditingBackground","Background color when the editor auto renames on type."));fr((i,e)=>{const t=i.getColor(Met);t&&e.addRule(`.monaco-editor .${Pme} { background: ${t}; border-left-color: ${t}; }`)});Sg("_executeLinkedEditingProvider",(i,e)=>Fme(i,e,Fn.None));ki(M0.ID,M0);it(Oet);var Bme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Pet{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return Bme(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class c5{constructor(e){this._disposables=new Je;let t=[];for(const[n,r]of e){const o=n.links.map(s=>new Pet(s,r));t=c5._union(t,o),JK(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],r,o,s,a;for(r=0,s=0,o=e.length,a=t.length;r<o&&s<a;){const u=e[r],d=t[s];if(Q.areIntersectingOrTouching(u.range,d.range)){r++;continue}Q.compareRangesUsingStarts(u.range,d.range)<0?(n.push(u),r++):(n.push(d),s++)}for(;r<o;r++)n.push(e[r]);for(;s<a;s++)n.push(t[s]);return n}}function Wme(i,e){const t=[],n=NA.ordered(i).reverse().map((r,o)=>Promise.resolve(r.provideLinks(i,e)).then(s=>{s&&(t[o]=[s,r])},Ms));return Promise.all(n).then(()=>{const r=new c5(BS(t));return e.isCancellationRequested?(r.dispose(),new c5([])):r})}Xn.registerCommand("_executeLinkProvider",(i,...e)=>Bme(void 0,void 0,void 0,function*(){let[t,n]=e;Yi(t instanceof rn),typeof n!="number"&&(n=0);const r=i.get(To).getModel(t);if(!r)return[];const o=yield Wme(r,Fn.None);if(!o)return[];for(let a=0;a<Math.min(n,o.links.length);a++)yield o.links[a].resolve(Fn.None);const s=o.links.slice(0);return o.dispose(),s}));var Fet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ire=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Bet=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function Wet(i,e){const t=i.url&&/^command:/i.test(i.url.toString()),n=i.tooltip?i.tooltip:t?C("links.navigate.executeCmd","Execute command"):C("links.navigate.follow","Follow link"),r=e?Gn?C("links.navigate.kb.meta.mac","cmd + click"):C("links.navigate.kb.meta","ctrl + click"):Gn?C("links.navigate.kb.alt.mac","option + click"):C("links.navigate.kb.alt","alt + click");if(i.url){let o="";if(/^command:/i.test(i.url.toString())){const a=i.url.toString().match(/^command:([^?#]+)/);if(a){const u=a[1];o=` "${C("tooltip.explanation","Execute command {0}",u)}"`}}return new Rp("",!0).appendMarkdown(`[${n}](${i.url.toString(!0).replace(/ /g,"%20")}${o}) (${r})`)}else return new Rp().appendText(`${n} (${r})`)}const rre={general:Ln.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Ln.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Tw{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:Tw._getOptions(e,t,!1)}}static _getOptions(e,t,n){const r=Object.assign({},n?rre.active:rre.general);return r.hoverMessage=Wet(e,t),r}activate(e,t){e.changeDecorationOptions(this.decorationId,Tw._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Tw._getOptions(this.link,t,!1))}}let J1=class lj{constructor(e,t,n){this.listenersToRemove=new Je,this.editor=e,this.openerService=t,this.notificationService=n;let r=new Uge(e);this.listenersToRemove.add(r),this.listenersToRemove.add(r.onMouseMoveOrRelevantKeyDown(([o,s])=>{this._onEditorMouseMove(o,s)})),this.listenersToRemove.add(r.onExecute(o=>{this.onEditorMouseUp(o)})),this.listenersToRemove.add(r.onCancel(o=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(o=>{const s=e.getOption(62);this.enabled!==s&&(this.enabled=s,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(o=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(o=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(o=>this.onModelModeChanged())),this.listenersToRemove.add(NA.onDidChange(o=>this.onModelModeChanged())),this.timeout=new Ma,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(lj.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),lj.RECOMPUTE_TIME)}beginCompute(){return Bet(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(NA.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=cs(t=>Wme(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){gn(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(69)==="altKey";let n=[],r=Object.keys(this.currentOccurrences);for(let a=0,u=r.length;a<u;a++){let d=r[a],h=this.currentOccurrences[d];n.push(h.decorationId)}let o=[];if(e)for(const a of e)o.push(Tw.decoration(a,t));let s=this.editor.deltaDecorations(n,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,u=s.length;a<u;a++){let d=new Tw(e[a],s[a]);this.currentOccurrences[d.decorationId]=d}}_onEditorMouseMove(e,t){const n=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations(o=>{r.activate(o,n),this.activeLinkDecorationId=r.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:r}=e;r.resolve(Fn.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const s=this.editor.getModel().uri;if(s.scheme===In.file&&o.startsWith(`${In.file}:`)){const a=rn.parse(o);if(a.scheme===In.file){const u=n4(a);let d=null;u.startsWith("/./")?d=`.${u.substr(1)}`:u.startsWith("//./")&&(d=`.${u.substr(2)}`),d&&(o=rke(s,d))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},o=>{const s=o instanceof Error?o.message:o;s==="invalid"?this.notificationService.warn(C("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):s==="missing"?this.notificationService.warn(C("missing.url","Failed to open this link because its target is missing.")):gn(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const r=this.currentOccurrences[n.id];if(r)return r}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};J1.ID="editor.linkDetector";J1.RECOMPUTE_TIME=1e3;J1=Fet([ire(1,Ll),ire(2,po)],J1);class Vet extends Lt{constructor(){super({id:"editor.action.openLink",label:C("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=J1.get(t);if(!n||!t.hasModel())return;let r=t.getSelections();for(let o of r){let s=n.getLinkOccurrence(o.getEndPosition());s&&n.openLinkOccurrence(s,!1)}}}ki(J1.ID,J1);it(Vet);fr((i,e)=>{const t=i.getColor(gce);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function lE(i,e){const t=e.filter(n=>!i.find(r=>r.equals(n)));if(t.length>=1){const n=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),r=t.length===1?C("cursorAdded","Cursor added: {0}",n):C("cursorsAdded","Cursors added: {0}",n);LF(r)}}class Het extends Lt{constructor(){super({id:"editor.action.insertCursorAbove",label:C("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,os.addCursorUp(o,s,r)),o.revealTopMostCursor(n.source),lE(s,o.getCursorStates())}}class $et extends Lt{constructor(){super({id:"editor.action.insertCursorBelow",label:C("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,os.addCursorDown(o,s,r)),o.revealBottomMostCursor(n.source),lE(s,o.getCursorStates())}}class zet extends Lt{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:C("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){let o=t.getLineMaxColumn(r);n.push(new wt(r,o,r,o))}e.endColumn>1&&n.push(new wt(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates();let a=[];r.forEach(u=>this.getCursorsForSelection(u,n,a)),a.length>0&&t.setSelections(a),lE(s,o.getCursorStates())}}class Uet extends Lt{constructor(){super({id:"editor.action.addCursorsToBottom",label:C("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),r=t.getModel().getLineCount();let o=[];for(let u=n[0].startLineNumber;u<=r;u++)o.push(new wt(u,n[0].startColumn,u,n[0].endColumn));const s=t._getViewModel(),a=s.getCursorStates();o.length>0&&t.setSelections(o),lE(a,s.getCursorStates())}}class jet extends Lt{constructor(){super({id:"editor.action.addCursorsToTop",label:C("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let r=[];for(let a=n[0].startLineNumber;a>=1;a--)r.push(new wt(a,n[0].startColumn,a,n[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();r.length>0&&t.setSelections(r),lE(s,o.getCursorStates())}}class EP{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class NO{constructor(e,t,n,r,o,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=r,this.wholeWord=o,this.matchCase=s,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new NO(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let r=!1,o,s;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(r=!0,o=!0,s=!0):(o=n.wholeWord,s=n.matchCase);const u=e.getSelection();let d,h=null;if(u.isEmpty()){const f=e.getConfiguredWordAtPosition(u.getStartPosition());if(!f)return null;d=f.word,h=new wt(u.startLineNumber,f.startColumn,u.startLineNumber,f.endColumn)}else d=e.getModel().getValueInRange(u).replace(/\r\n/g,`
`);return new NO(e,t,r,d,o,s,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new EP(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new EP(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new wt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new EP(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new EP(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new wt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}class eC extends Oe{constructor(e){super(),this._sessionDispose=this._register(new Je),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(eC.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=NO.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(r=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(r=>{(r.matchCase||r.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new wt(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const r=e.getState().matchCase;if(!Vme(this._editor.getModel(),t,r)){const s=this._editor.getModel();let a=[];for(let u=0,d=t.length;u<d;u++)a[u]=this._expandEmptyToWord(s,t[u]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const r=n.searchScope;let o=[];t.forEach(s=>{r.forEach(a=>{s.range.endLineNumber<=a.endLineNumber&&s.range.startLineNumber>=a.startLineNumber&&o.push(s)})}),t=o}if(t.length>0){const r=this._editor.getSelection();for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a.range.intersectRanges(r)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new wt(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}eC.ID="editor.contrib.multiCursorController";class uE extends Lt{run(e,t){const n=eC.get(t);if(!n)return;const r=Tl.get(t);if(!r)return;const o=t._getViewModel();if(o){const s=o.getCursorStates();this._run(n,r),lE(s,o.getCursorStates())}}}class Ket extends uE{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:C("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2082,weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class Get extends uE{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:C("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class qet extends uE{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:C("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:Zr(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class Yet extends uE{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:C("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class Zet extends uE{constructor(){super({id:"editor.action.selectHighlights",label:C("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3114,weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class Xet extends uE{constructor(){super({id:"editor.action.changeAll",label:C("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_t.and(de.writable,de.editorTextFocus),kbOpts:{kbExpr:de.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class Qet{constructor(e,t,n,r,o){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(Q.compareRangesUsingStarts)),this._cachedFindMatches}}class wp extends Oe{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new tr(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Tl.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(wp._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const r=n.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;const o=eC.get(n);if(!o)return null;const s=Tl.get(n);if(!s)return null;let a=o.getSession(s);if(!a){const h=n.getSelections();if(h.length>1){const p=s.getState().matchCase;if(!Vme(n.getModel(),h,p))return null}a=NO.create(n,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const u=s.getState(),d=u.matchCase;if(u.isRevealed){let h=u.searchString;d||(h=h.toLowerCase());let f=a.searchText;if(d||(f=f.toLowerCase()),h===f&&a.matchCase===u.matchCase&&a.wholeWord===u.wholeWord&&!u.isRegex)return null}return new Qet(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(116):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),r=this.editor.getSelections();r.sort(Q.compareRangesUsingStarts);const o=[];for(let u=0,d=0,h=n.length,f=r.length;u<h;){const p=n[u];if(d>=f)o.push(p),u++;else{const m=Q.compareRangesUsingStarts(p,r[d]);m<0?((r[d].isEmpty()||!Q.areIntersecting(p,r[d]))&&o.push(p),u++):(m>0||u++,d++)}}const s=Gw.has(t)&&this.editor.getOption(71),a=o.map(u=>({range:u,options:s?wp._SELECTION_HIGHLIGHT:wp._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}wp.ID="editor.contrib.selectionHighlighter";wp._SELECTION_HIGHLIGHT_OVERVIEW=Ln.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Lr(NB),position:Cl.Inline},overviewRuler:{color:Lr(_ce),position:Sl.Center}});wp._SELECTION_HIGHLIGHT=Ln.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function Vme(i,e,t){const n=ore(i,e[0],!t);for(let r=1,o=e.length;r<o;r++){const s=e[r];if(s.isEmpty())return!1;const a=ore(i,s,!t);if(n!==a)return!1}return!0}function ore(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}ki(eC.ID,eC);ki(wp.ID,wp);it(Het);it($et);it(zet);it(Ket);it(Get);it(qet);it(Yet);it(Zet);it(Xet);it(Uet);it(jet);var Hme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const tC={Visible:new Dt("parameterHintsVisible",!1),MultipleSignatures:new Dt("parameterHintsMultipleSignatures",!1)};function $me(i,e,t,n){return Hme(this,void 0,void 0,function*(){const r=e1.ordered(i);for(const o of r)try{const s=yield o.provideSignatureHelp(i,e,n,t);if(s)return s}catch(s){Ms(s)}})}Xn.registerCommand("_executeSignatureHelpProvider",(i,...e)=>Hme(void 0,void 0,void 0,function*(){const[t,n,r]=e;Yi(rn.isUri(t)),Yi(Ee.isIPosition(n)),Yi(typeof r=="string"||!r);const o=yield i.get(Ja).createModelReference(t);try{const s=yield $me(o.object.textEditorModel,Ee.lift(n),{triggerKind:eg.Invoke,isRetrigger:!1,triggerCharacter:r},Fn.None);return s?(setTimeout(()=>s.dispose(),0),s.value):void 0}finally{o.dispose()}}));var Jet=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},kv;(function(i){i.Default={type:0};class e{constructor(r,o){this.request=r,this.previouslyActiveHints=o,this.type=2}}i.Pending=e;class t{constructor(r){this.hints=r,this.type=1}}i.Active=t})(kv||(kv={}));class d7 extends Oe{constructor(e,t=d7.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Ce),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=kv.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Ra),this.triggerChars=new Py,this.retriggerChars=new Py,this.triggerId=0,this.editor=e,this.throttledDelayer=new Np(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(e1.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=kv.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!e1.has(n))return;const r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(r),t).catch(gn)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new kv.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return Jet(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const r=this._pendingTriggers.reduce(ett);this._pendingTriggers=[];const o={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const s=this.editor.getModel(),a=this.editor.getPosition();this.state=new kv.Pending(cs(u=>$me(s,a,o,u)),n);try{const u=yield this.state.request;return e!==this.triggerId?(u==null||u.dispose(),!1):!u||!u.value.signatures||u.value.signatures.length===0?(u==null||u.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new kv.Active(u.value),this._lastSignatureHelpResult.value=u,this._onChangedHints.fire(this.state.hints),!0)}catch(u){return e===this.triggerId&&(this.state=kv.Default),gn(u),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new Py,this.retriggerChars=new Py;const e=this.editor.getModel();if(e)for(const t of e1.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:eg.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:eg.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:eg.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}d7.DEFAULT_DELAY=120;function ett(i,e){switch(e.triggerKind){case eg.Invoke:return e;case eg.ContentChange:return i;case eg.TriggerCharacter:default:return e}}var ttt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},yW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const yu=Ge,ntt=ds("parameter-hints-next",_e.chevronDown,C("parameterHintsNextIcon","Icon for show next parameter hint.")),itt=ds("parameter-hints-previous",_e.chevronUp,C("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let d5=class zme extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.renderDisposeables=this._register(new Je),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Fp({editor:e},r,n)),this.model=this._register(new d7(e)),this.keyVisible=tC.Visible.bindTo(t),this.keyMultipleSignatures=tC.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(o=>{o?(this.show(),this.render(o)):this.hide()}))}createParameterHintDOMNodes(){const e=yu(".editor-widget.parameter-hints-widget"),t=Be(e,yu(".phwrapper"));t.tabIndex=-1;const n=Be(t,yu(".controls")),r=Be(n,yu(".button"+mr.asCSSSelector(itt))),o=Be(n,yu(".overloads")),s=Be(n,yu(".button"+mr.asCSSSelector(ntt)));this._register(qe(r,"click",p=>{Ni.stop(p),this.previous()})),this._register(qe(s,"click",p=>{Ni.stop(p),this.next()}));const a=yu(".body"),u=new pR(a,{});this._register(u),t.appendChild(u.getDomNode());const d=Be(a,yu(".signature")),h=Be(a,yu(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:o,docs:h,scrollbar:u},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(p=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const p=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${p.fontSize}px`,this.domNodes.element.style.lineHeight=`${p.lineHeight/p.fontSize}`};f(),this._register(Mt.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(p=>p.hasChanged(43)).on(f,null)),this._register(this.editor.onDidLayoutChange(p=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const r=e.signatures[e.activeSignature];if(!r)return;const o=Be(this.domNodes.signature,yu(".code")),s=this.editor.getOption(43);o.style.fontSize=`${s.fontSize}px`,o.style.fontFamily=s.fontFamily;const a=r.parameters.length>0,u=(t=r.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,r,u);else{const f=Be(o,yu("span"));f.textContent=r.label}const d=r.parameters[u];if(d!=null&&d.documentation){const f=yu("span.documentation");if(typeof d.documentation=="string")f.textContent=d.documentation;else{const p=this.renderMarkdownDocs(d.documentation);f.appendChild(p.element)}Be(this.domNodes.docs,yu("p",{},f))}if(r.documentation!==void 0)if(typeof r.documentation=="string")Be(this.domNodes.docs,yu("p",{},r.documentation));else{const f=this.renderMarkdownDocs(r.documentation);Be(this.domNodes.docs,f.element)}const h=this.hasDocs(r,d);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let f="";const p=r.parameters[u];Array.isArray(p.label)?f=r.label.substring(p.label[0],p.label[1]):f=p.label,p.documentation&&(f+=typeof p.documentation=="string"?`, ${p.documentation}`:`, ${p.documentation.value}`),r.documentation&&(f+=typeof r.documentation=="string"?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==f&&(Is(C("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&SM(t.documentation).length>0||t&&typeof t.documentation=="object"&&SM(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&SM(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&SM(e.documentation.value).length>0)}renderParameters(e,t,n){const[r,o]=this.getParameterLabelOffsets(t,n),s=document.createElement("span");s.textContent=t.label.substring(0,r);const a=document.createElement("span");a.textContent=t.label.substring(r,o),a.className="parameter active";const u=document.createElement("span");u.textContent=t.label.substring(o),Be(e,s,a,u)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const r=new RegExp(`(\\W|^)${dc(n.label)}(?=\\W|$)`,"g");r.test(e.label);const o=r.lastIndex-n.label.length;return o>=0?[o,r.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return zme.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};d5.ID="editor.widget.parameterHintsWidget";d5=ttt([yW(1,cn),yW(2,Ll),yW(3,Fs)],d5);const rtt=ye("editorHoverWidget.highlightForeground",{dark:D9,light:D9,hc:D9},C("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));fr((i,e)=>{const t=i.getColor(WG);if(t){const d=i.type===Xc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${d}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=i.getColor(I1);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const r=i.getColor(DB);r&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${r}; }`);const o=i.getColor(TB);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);const s=i.getColor(BG);s&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);const a=i.getColor(ice);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const u=i.getColor(rtt);u&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${u}}`)});var ott=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},stt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let nC=class Ume extends Oe{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(d5,this.editor))}static get(e){return e.getContribution(Ume.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};nC.ID="editor.controller.parameterHints";nC=ott([stt(1,Nn)],nC);class att extends Lt{constructor(){super({id:"editor.action.triggerParameterHints",label:C("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:de.hasSignatureHelpProvider,kbOpts:{kbExpr:de.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=nC.get(t);n&&n.trigger({triggerKind:eg.Invoke})}}ki(nC.ID,nC);it(att);const cZ=100+75,dZ=Ps.bindToContribution(nC.get);nt(new dZ({id:"closeParameterHints",precondition:tC.Visible,handler:i=>i.cancel(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:9,secondary:[1033]}}));nt(new dZ({id:"showPrevParameterHint",precondition:_t.and(tC.Visible,tC.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));nt(new dZ({id:"showNextParameterHint",precondition:_t.and(tC.Visible,tC.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:cZ,kbExpr:de.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var ltt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const h7=new Dt("renameInputVisible",!1,C("renameInputVisible","Whether the rename input widget is visible"));let uj=class{constructor(e,t,n,r,o){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=r,this._disposables=new Je,this.allowEditorOverflow=!0,this._visibleContextKey=h7.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",C("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[r,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(r),this._label.innerText=C({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(o))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,r,o;if(!this._input||!this._domNode)return;const s=e.getColor(y0);this._domNode.style.backgroundColor=String((t=e.getColor(qh))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=s?` 0 0 8px 2px ${s}`:"",this._domNode.style.color=String((n=e.getColor(OG))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((r=e.getColor(AG))!==null&&r!==void 0?r:"");const a=e.getColor(RG);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a==null?void 0:a.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,r,o,s){this._domNode.classList.toggle("preview",o),this._position=new Ee(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",r.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Je;return new Promise(u=>{this._currentCancelInput=d=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u(d),!0),this._currentAcceptInput=d=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u({newName:this._input.value,wantsPreview:o&&d})},s.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};uj=ltt([wW(2,xr),wW(3,Er),wW(4,cn)],uj);var utt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},cy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},u1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class hZ{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=GF.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return u1(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const r=this._providers[this._providerRenameIdx];if(!r.resolveRenameLocation)break;let o=yield r.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}const n=this.model.getWordAtPosition(this.position);return n?{range:new Q(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return u1(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,r){return u1(this,void 0,void 0,function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:n.join(`
`)};const s=yield o.provideRenameEdits(this.model,this.position,e,r);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(s.rejectReason),r)}else return this._provideRenameEdits(e,t+1,n.concat(C("no result","No result.")),r);return s})}}function ctt(i,e,t){return u1(this,void 0,void 0,function*(){const n=new hZ(i,e),r=yield n.resolveRenameLocation(Fn.None);return r!=null&&r.rejectReason?{edits:[],rejectReason:r.rejectReason}:n.provideRenameEdits(t,Fn.None)})}let iC=class jme{constructor(e,t,n,r,o,s,a){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=r,this._progressService=o,this._logService=s,this._configService=a,this._dispoableStore=new Je,this._cts=new aa,this._renameInputField=this._dispoableStore.add(new ow(()=>this._dispoableStore.add(this._instaService.createInstance(uj,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(jme.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return u1(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new hZ(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new YA(this.editor,5);let n;try{const h=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(h,250),n=yield h}catch(h){Bu.get(this.editor).showMessage(h||C("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!n)return;if(n.rejectReason){Bu.get(this.editor).showMessage(n.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new YA(this.editor,5,n.range);let r=this.editor.getSelection(),o=0,s=n.text.length;!Q.isEmpty(r)&&!Q.spansMultipleLines(r)&&Q.containsRange(n.range,r)&&(o=Math.max(0,r.startColumn-n.range.startColumn),s=Math.min(n.range.endColumn,r.endColumn)-n.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),u=yield this._renameInputField.value.getInput(n.range,n.text,o,s,a,this._cts.token);if(typeof u=="boolean"){u&&this.editor.focus();return}this.editor.focus();const d=aG(t.provideRenameEdits(u.newName,this._cts.token),this._cts.token).then(h=>u1(this,void 0,void 0,function*(){if(!(!h||!this.editor.hasModel())){if(h.rejectReason){this._notificationService.info(h.rejectReason);return}this.editor.setSelection(Q.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(XB.convert(h),{editor:this.editor,showPreview:u.wantsPreview,label:C("label","Renaming '{0}'",n==null?void 0:n.text),quotableLabel:C("quotableLabel","Renaming {0}",n==null?void 0:n.text)}).then(f=>{f.ariaSummary&&Is(C("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",n.text,u.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(C("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),h=>{this._notificationService.error(C("rename.failed","Rename failed to compute edits")),this._logService.error(h)});return this._progressService.showWhile(d,250),d})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};iC.ID="editor.contrib.renameController";iC=utt([cy(1,Nn),cy(2,po),cy(3,xq),cy(4,$p),cy(5,wg),cy(6,Nq)],iC);class dtt extends Lt{constructor(){super({id:"editor.action.rename",label:C("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(Ii),[r,o]=Array.isArray(t)&&t||[void 0,void 0];return rn.isUri(r)&&Ee.isIPosition(o)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},gn):super.runCommand(e,t)}run(e,t){const n=iC.get(t);return n?n.run():Promise.resolve()}}ki(iC.ID,iC);it(dtt);const fZ=Ps.bindToContribution(iC.get);nt(new fZ({id:"acceptRenameInput",precondition:h7,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:de.focus,primary:3}}));nt(new fZ({id:"acceptRenameInputWithPreview",precondition:_t.and(h7,_t.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:de.focus,primary:1024+3}}));nt(new fZ({id:"cancelRenameInput",precondition:h7,handler:i=>i.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:de.focus,primary:9,secondary:[1033]}}));Sg("_executeDocumentRenameProvider",function(i,e,...t){const[n]=t;return Yi(typeof n=="string"),ctt(i,e,n)});Sg("_executePrepareRename",function(i,e){return u1(this,void 0,void 0,function*(){const n=yield new hZ(i,e).resolveRenameLocation(Fn.None);if(n!=null&&n.rejectReason)throw new Error(n.rejectReason);return n})});Xr.as(SC.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:C("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class htt{provideSelectionRanges(e,t){const n=[];for(const r of t){const o=[];n.push(o),this._addInWordRanges(o,e,r),this._addWordRanges(o,e,r),this._addWhitespaceLine(o,e,r),o.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const r=t.getWordAtPosition(n);if(!r)return;let{word:o,startColumn:s}=r,a=n.column-s,u=a,d=a,h=0;for(;u>=0;u--){let f=o.charCodeAt(u);if(u!==a&&(f===95||f===45))break;if(Wv(f)&&Tf(h))break;h=f}for(u+=1;d<o.length;d++){let f=o.charCodeAt(d);if(Tf(f)&&Wv(h))break;if(f===95||f===45)break;h=f}u<d&&e.push({range:new Q(n.lineNumber,s+u,n.lineNumber,s+d)})}_addWordRanges(e,t,n){const r=t.getWordAtPosition(n);r&&e.push({range:new Q(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new Q(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var gZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class pZ{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new pZ(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}class bS{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(bS.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return gZ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(!BB.has(n)||(this._state||(yield Gme(n,t.map(o=>o.getPosition()),this._editor.getOption(101),Fn.None).then(o=>{var s;if(!(!bl(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!rc(this._editor.getSelections(),t,(a,u)=>a.equalsSelection(u)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(u=>u.containsPosition(t[a].getStartPosition())&&u.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new pZ(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(o=>o.mov(e));const r=this._state.map(o=>wt.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}})}}bS.ID="editor.contrib.smartSelectController";class Kme extends Lt{constructor(e,t){super(t),this._forward=e}run(e,t){return gZ(this,void 0,void 0,function*(){let n=bS.get(t);n&&(yield n.run(this._forward))})}}class ftt extends Kme{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:C("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Xn.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class gtt extends Kme{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:C("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Rt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}ki(bS.ID,bS);it(ftt);it(gtt);BB.register("*",new htt);function Gme(i,e,t,n){return gZ(this,void 0,void 0,function*(){const r=BB.all(i);r.length===1&&r.unshift(new Su);let o=[],s=[];for(const a of r)o.push(Promise.resolve(a.provideSelectionRanges(i,e,n)).then(u=>{if(bl(u)&&u.length===e.length)for(let d=0;d<e.length;d++){s[d]||(s[d]=[]);for(const h of u[d])Q.isIRange(h.range)&&Q.containsPosition(h.range,e[d])&&s[d].push(Q.lift(h.range))}},Ms));return yield Promise.all(o),s.map(a=>{if(a.length===0)return[];a.sort((f,p)=>Ee.isBefore(f.getStartPosition(),p.getStartPosition())?1:Ee.isBefore(p.getStartPosition(),f.getStartPosition())||Ee.isBefore(f.getEndPosition(),p.getEndPosition())?-1:Ee.isBefore(p.getEndPosition(),f.getEndPosition())?1:0);let u=[],d;for(const f of a)(!d||Q.containsRange(f,d)&&!Q.equalsRange(f,d))&&(u.push(f),d=f);if(!t.selectLeadingAndTrailingWhitespace)return u;let h=[u[0]];for(let f=1;f<u.length;f++){const p=u[f-1],m=u[f];if(m.startLineNumber!==p.startLineNumber||m.endLineNumber!==p.endLineNumber){const v=new Q(p.startLineNumber,i.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,i.getLineLastNonWhitespaceColumn(p.endLineNumber));v.containsRange(p)&&!v.equalsRange(p)&&m.containsRange(v)&&!m.equalsRange(v)&&h.push(v);const b=new Q(p.startLineNumber,1,p.endLineNumber,i.getLineMaxColumn(p.endLineNumber));b.containsRange(p)&&!b.equalsRange(v)&&m.containsRange(b)&&!m.equalsRange(b)&&h.push(b)}h.push(m)}return h})})}Sxe("_executeSelectionRangeProvider",function(i,...e){const[t]=e;return Gme(i,t,{selectLeadingAndTrailingWhitespace:!0},Fn.None)});class ptt extends Lt{constructor(){super({id:"editor.action.forceRetokenize",label:C("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const r=new ig(!0);n.forceTokenization(n.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}}it(ptt);class CS extends Lt{constructor(){super({id:CS.ID,label:C({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const r=!HF.getTabFocusMode();HF.setTabFocusMode(r),Is(r?C("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):C("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}CS.ID="editor.action.toggleTabFocusMode";it(CS);var mtt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},sre=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_tt=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const qme="ignoreUnusualLineTerminators";function vtt(i,e,t){i.setModelProperty(e.uri,qme,t)}function btt(i,e){return i.getModelProperty(e.uri,qme)}let AO=class extends Oe{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return _tt(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||btt(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:C("unusualLineTerminators.title","Unusual Line Terminators"),message:C("unusualLineTerminators.message","Detected unusual line terminators"),detail:C("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",fc(e.uri)),primaryButton:C("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:C("unusualLineTerminators.ignore","Ignore")})).confirmed){vtt(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};AO.ID="editor.contrib.unusualLineTerminatorsDetector";AO=mtt([sre(1,yR),sre(2,Ii)],AO);ki(AO.ID,AO);var Ctt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},SW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let OO=class extends Oe{constructor(e,t,n,r){super(),this._modelService=t,this._themeService=n,this._configurationService=r,this._editor=e,this._tokenizeViewport=new tr(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(o=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(WB.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration(Oq)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!Q$(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!CPe(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),r=cs(o=>Promise.resolve(Aq(e,t,o)));return r.then(o=>{if(!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:s,tokens:a}=o,u=this._modelService.getSemanticTokensProviderStyling(s);e.setPartialSemanticTokens(t,ohe(a,u,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};OO.ID="editor.contrib.viewportSemanticTokens";OO=Ctt([SW(1,To),SW(2,xr),SW(3,ir)],OO);ki(OO.ID,OO);var ytt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wtt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Stt=ye("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},C("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Ett=ye("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},C("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Ltt=ye("editor.wordHighlightBorder",{light:null,dark:null,hc:el},C("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),xtt=ye("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:el},C("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),Dtt=ye("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Ttt=ye("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},C("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),f7=new Dt("hasWordHighlights",!1);function Yme(i,e,t){const n=Gw.ordered(i);return qle(n.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(i,e,t)).then(void 0,Ms)),bl)}class Zme{constructor(e,t,n){this._wordRange=this._getCurrentWordRange(e,t),this.result=cs(r=>this._compute(e,t,n,r))}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new Q(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const r=t.startLineNumber,o=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t);let u=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let d=0,h=n.length;!u&&d<h;d++){let f=e.getDecorationRange(n[d]);f&&f.startLineNumber===r&&f.startColumn<=o&&f.endColumn>=s&&(u=!0)}return u}cancel(){this.result.cancel()}}class Itt extends Zme{_compute(e,t,n,r){return Yme(e,t.getPosition(),r).then(o=>o||[])}}class ktt extends Zme{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,r){return m0(250,r).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:TA.Text}))})}isValid(e,t,n){const r=t.isEmpty();return this._selectionIsEmpty!==r?!1:super.isValid(e,t,n)}}function Ntt(i,e,t){return Gw.has(i)?new Itt(i,e,t):new ktt(i,e,t)}Sg("_executeDocumentHighlights",(i,e)=>Yme(i,e,Fn.None));class cE{constructor(e,t){this.toUnhook=new Je,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=f7.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{let r=this.editor.getOption(71);this.occurrencesHighlight!==r&&(this.occurrencesHighlight=r,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return BS(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(Q.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(r.startLineNumber);Is(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(r.startLineNumber);Is(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const r=this._getWord();if(!r||r.startColumn>t||r.endColumn<n){this._stopAll();return}const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let s=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=Ntt(this.model,this.editor.getSelection(),this.editor.getOption(116)),this.workerRequest.result.then(a=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},gn)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:cE._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===TA.Write?this._WRITE_OPTIONS:e===TA.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}cE._WRITE_OPTIONS=Ln.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Lr(Ttt),position:Sl.Center},minimap:{color:Lr(NB),position:Cl.Inline}});cE._TEXT_OPTIONS=Ln.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Lr(_ce),position:Sl.Center},minimap:{color:Lr(NB),position:Cl.Inline}});cE._REGULAR_OPTIONS=Ln.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Lr(Dtt),position:Sl.Center},minimap:{color:Lr(NB),position:Cl.Inline}});let rC=class Xme extends Oe{constructor(e,t){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new cE(e,t))};this._register(e.onDidChangeModel(r=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(Xme.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};rC.ID="editor.contrib.wordHighlighter";rC=ytt([wtt(1,cn)],rC);class Qme extends Lt{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=rC.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class Att extends Qme{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:C("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:f7,kbOpts:{kbExpr:de.editorTextFocus,primary:65,weight:100}})}}class Ott extends Qme{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:C("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:f7,kbOpts:{kbExpr:de.editorTextFocus,primary:1089,weight:100}})}}class Rtt extends Lt{constructor(){super({id:"editor.action.wordHighlight.trigger",label:C("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:f7.toNegated(),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const r=rC.get(t);r&&r.restoreViewState(!0)}}ki(rC.ID,rC);it(Att);it(Ott);it(Rtt);fr((i,e)=>{const t=i.getColor(FG);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=i.getColor(Stt);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const r=i.getColor(Ett);r&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${r}; }`);const o=i.getColor(dTe);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=i.getColor(Ltt);s&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; box-sizing: border-box; }`);const a=i.getColor(xtt);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class g7 extends Ps{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(u=>{const d=new Ee(u.positionLineNumber,u.positionColumn),h=this._move(r,o,d,this._wordNavigationType);return this._moveTo(u,h,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(u=>Mn.fromModelSelection(u))),a.length===1){const u=new Ee(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(u,0)}}_moveTo(e,t,n){return n?new wt(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new wt(t.lineNumber,t.column,t.lineNumber,t.column)}}class Z0 extends g7{_move(e,t,n,r){return ni.moveWordLeft(e,t,n,r)}}class X0 extends g7{_move(e,t,n,r){return ni.moveWordRight(e,t,n,r)}}class Mtt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Ptt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Ftt extends Z0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vR,u8))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class Btt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class Wtt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class Vtt extends Z0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vR,u8))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class Htt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class $tt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class ztt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class Utt extends X0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vR,u8))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class jtt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class Ktt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class Gtt extends X0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vR,u8))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class qtt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class Ytt extends X0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class Ztt extends X0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,r){return super._move(gc(af.wordSeparators.defaultValue),t,n,r)}}class p7 extends Ps{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),o=t.getModel(),s=t.getSelections(),a=t.getOption(5),u=t.getOption(8),d=_i.getAutoClosingPairs(o.getLanguageId()),h=t._getViewModel(),f=s.map(p=>{const m=this._delete({wordSeparators:r,model:o,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:u,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new xs(m,"")});t.pushUndoStop(),t.executeCommands(this.id,f),t.pushUndoStop()}}class mZ extends p7{_delete(e,t){let n=ni.deleteWordLeft(e,t);return n||new Q(1,1,1,1)}}class _Z extends p7{_delete(e,t){let n=ni.deleteWordRight(e,t);if(n)return n;const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return new Q(r,o,r,o)}}class Xtt extends mZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:de.writable})}}class Qtt extends mZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:de.writable})}}class Jtt extends mZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class ent extends _Z{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:de.writable})}}class tnt extends _Z{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:de.writable})}}class nnt extends _Z{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class int extends Lt{constructor(){super({id:"deleteInsideWord",precondition:de.writable,label:C("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const r=gc(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(u=>{const d=ni.deleteInsideWord(r,o,u);return new xs(d,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}nt(new Mtt);nt(new Ptt);nt(new Ftt);nt(new Btt);nt(new Wtt);nt(new Vtt);nt(new ztt);nt(new Utt);nt(new jtt);nt(new Ktt);nt(new Gtt);nt(new qtt);nt(new Htt);nt(new $tt);nt(new Ytt);nt(new Ztt);nt(new Xtt);nt(new Qtt);nt(new Jtt);nt(new ent);nt(new tnt);nt(new nnt);it(int);class rnt extends p7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=GB.deleteWordPartLeft(e);return n||new Q(1,1,1,1)}}class ont extends p7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=GB.deleteWordPartRight(e);if(n)return n;const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return new Q(r,o,r,o)}}class Jme extends g7{_move(e,t,n,r){return GB.moveWordPartLeft(e,t,n)}}class snt extends Jme{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Xn.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class ant extends Jme{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Xn.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class e_e extends g7{_move(e,t,n,r){return GB.moveWordPartRight(e,t,n)}}class lnt extends e_e{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class unt extends e_e{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}nt(new rnt);nt(new ont);nt(new snt);nt(new ant);nt(new lnt);nt(new unt);var t_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},T4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const n_e=new Dt("accessibilityHelpWidgetVisible",!1);let oC=class i_e extends Oe{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(yS,this._editor))}static get(e){return e.getContribution(i_e.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};oC.ID="editor.contrib.accessibilityHelpController";oC=t_e([T4(1,Nn)],oC);function cnt(i,e){return!i||i.length===0?bo.noSelection:i.length===1?e?ec(bo.singleSelectionRange,i[0].positionLineNumber,i[0].positionColumn,e):ec(bo.singleSelection,i[0].positionLineNumber,i[0].positionColumn):e?ec(bo.multiSelectionRange,i.length,e):i.length>0?ec(bo.multiSelection,i.length):""}let yS=class I4 extends Vu{constructor(e,t,n,r){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=r,this._editor=e,this._isVisibleKey=n_e.bindTo(this._contextKeyService),this._domNode=ii(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=ii(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(ts(this._contentDomNode.domNode,"keydown",o=>{if(this._isVisible&&(o.equals(2083)&&(Is(bo.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),$o(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),o.preventDefault(),o.stopPropagation()),o.equals(2086))){Is(bo.openingDocs);let s=this._editor.getRawOptions().accessibilityHelpUrl;typeof s>"u"&&(s="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(rn.parse(s)),o.preventDefault(),o.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return I4.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let r=this._keybindingService.lookupKeybinding(e);return r?ec(t,r.getAriaLabel()):ec(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(u=>{n+=a.getValueLengthInRange(u)})}let r=cnt(t,n);e.get(53)?e.get(80)?r+=bo.readonlyDiffEditor:r+=bo.editableDiffEditor:e.get(80)?r+=bo.readonlyEditor:r+=bo.editableEditor;const o=Gn?bo.changeConfigToOnMac:bo.changeConfigToOnWinLinux;switch(e.get(2)){case 0:r+=`

 - `+o;break;case 2:r+=`

 - `+bo.auto_on;break;case 1:r+=`

 - `+bo.auto_off,r+=" "+o;break}e.get(129)?r+=`

 - `+this._descriptionForCommand(CS.ID,bo.tabFocusModeOnMsg,bo.tabFocusModeOnMsgNoKb):r+=`

 - `+this._descriptionForCommand(CS.ID,bo.tabFocusModeOffMsg,bo.tabFocusModeOffMsgNoKb);const s=Gn?bo.openDocMac:bo.openDocWinLinux;r+=`

 - `+s,r+=`

`+bo.outroMsg,this._contentDomNode.domNode.appendChild(qhe(r)),this._contentDomNode.domNode.setAttribute("aria-label",r)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,$o(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(I4.WIDTH,e.width-40)),n=Math.max(5,Math.min(I4.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let r=Math.round((e.height-n)/2);this._domNode.setTop(r);let o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}};yS.ID="editor.contrib.accessibilityHelpWidget";yS.WIDTH=500;yS.HEIGHT=300;yS=t_e([T4(1,cn),T4(2,Er),T4(3,Ll)],yS);class dnt extends Lt{constructor(){super({id:"editor.action.showAccessibilityHelp",label:bo.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=oC.get(t);n&&n.show()}}ki(oC.ID,oC);it(dnt);const hnt=Ps.bindToContribution(oC.get);nt(new hnt({id:"closeAccessibilityHelp",precondition:n_e,handler:i=>i.hide(),kbOpts:{weight:100+100,kbExpr:de.focus,primary:9,secondary:[1033]}}));fr((i,e)=>{const t=i.getColor(qh);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=i.getColor(bp);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const r=i.getColor(y0);r&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${r}; }`);const o=i.getColor(go);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${o}; }`)});class cj extends Oe{constructor(e){super(),this.editor=e,this.widget=null,ng&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new m7(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}cj.ID="editor.contrib.iPadShowKeyboard";class m7 extends Oe{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(qe(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(qe(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return m7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}m7.ID="editor.contrib.ShowKeyboardWidget";ki(cj.ID,cj);var fnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},are=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let wS=class r_e extends Oe{constructor(e,t,n){super(),this._editor=e,this._modeService=n,this._widget=null,this._register(this._editor.onDidChangeModel(r=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(r=>this.stop())),this._register(Wr.onDidChange(r=>this.stop())),this._register(this._editor.onKeyUp(r=>r.keyCode===9&&this.stop()))}static get(e){return e.getContribution(r_e.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new _7(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};wS.ID="editor.contrib.inspectTokens";wS=fnt([are(1,G0),are(2,Fs)],wS);class gnt extends Lt{constructor(){super({id:"editor.action.inspectTokens",label:i$.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=wS.get(t);n&&n.launch()}}function pnt(i){let e="";for(let t=0,n=i.length;t<n;t++){let r=i.charCodeAt(t);switch(r){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(r)}}return e}function mnt(i,e){const t=Wr.get(e);if(t)return t;const n=i.encodeLanguageId(e);return{getInitialState:()=>dR,tokenize:(r,o,s,a)=>Yce(e,r,s,a),tokenize2:(r,o,s,a)=>tq(n,r,s,a)}}class _7 extends Oe{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=mnt(this._modeService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return _7._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let u=t.tokens1.length-1;u>=0;u--){let d=t.tokens1[u];if(e.column-1>=d.offset){n=u;break}}let r=0;for(let u=t.tokens2.length>>>1;u>=0;u--)if(e.column-1>=t.tokens2[u<<1]){r=u;break}let o=this._model.getLineContent(e.lineNumber),s="";if(n<t.tokens1.length){let u=t.tokens1[n].offset,d=n+1<t.tokens1.length?t.tokens1[n+1].offset:o.length;s=o.substring(u,d)}v0(this._domNode,Ge("h2.tm-token",void 0,pnt(s),Ge("span.tm-token-length",void 0,`${s.length} ${s.length===1?"char":"chars"}`))),Be(this._domNode,Ge("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;Be(this._domNode,Ge("table.tm-metadata-table",void 0,Ge("tbody",void 0,Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"language"),Ge("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"token type"),Ge("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"font style"),Ge("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"foreground"),Ge("td.tm-metadata-value",void 0,`${a?we.Format.CSS.formatHex(a.foreground):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"background"),Ge("td.tm-metadata-value",void 0,`${a?we.Format.CSS.formatHex(a.background):"-?-"}`))))),Be(this._domNode,Ge("hr.tokens-inspect-separator")),n<t.tokens1.length&&Be(this._domNode,Ge("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=Wr.getColorMap(),n=ia.getLanguageId(e),r=ia.getTokenType(e),o=ia.getFontStyle(e),s=ia.getForeground(e),a=ia.getBackground(e);return{languageId:this._modeService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:o,foreground:t[s],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),r=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}_7._ID="editor.contrib.inspectTokensWidget";ki(wS.ID,wS);it(gnt);fr((i,e)=>{const t=i.getColor(WG);if(t){let o=i.type===Xc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${o}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=i.getColor(I1);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const r=i.getColor(BG);r&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${r}; }`)});var _nt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},vnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let h5=class k4{constructor(e){this.quickInputService=e,this.registry=Xr.as(q0.Quickaccess)}provide(e){const t=new Je;t.add(e.onDidAccept(()=>{const[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(o=>{const s=this.registry.getQuickAccessProvider(o.substr(k4.PREFIX.length));s&&s.prefix&&s.prefix!==k4.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:r}=this.getQuickAccessProviders();return e.items=n.length===0||r.length===0?[...n.length===0?r:n]:[{label:C("globalCommands","global commands"),type:"separator"},...r,{label:C("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((r,o)=>r.prefix.localeCompare(o.prefix)))if(n.prefix!==k4.PREFIX)for(const r of n.helpEntries){const o=r.prefix||n.prefix,s=o||"…";(r.needsEditor?t:e).push({prefix:o,label:s,ariaLabel:C("helpPickAriaLabel","{0}, {1}",s,r.description),description:r.description})}return{editorProviders:t,globalProviders:e}}};h5.PREFIX="?";h5=_nt([vnt(0,Cc)],h5);Xr.as(q0.Quickaccess).registerQuickAccessProvider({ctor:h5,prefix:"",helpEntries:[{description:r$.helpQuickAccessActionLabel,needsEditor:!0}]});class o_e{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const r=new Je;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=r.add(new Ra);return o.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),r}doProvide(e,t){const n=new Je,r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){const o={editor:r},s=zde(r);if(s){let a=_l(r.saveViewState());n.add(s.onDidChangeCursorPosition(()=>{a=_l(r.saveViewState())})),o.restoreViewState=()=>{a&&r===this.activeTextEditorControl&&r.restoreViewState(a)},n.add(kp(t.onCancellationRequested)(()=>{var u;return(u=o.restoreViewState)===null||u===void 0?void 0:u.call(o)}))}n.add(Un(()=>this.clearDecorations(r))),n.add(this.provideWithTextEditor(o,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return $de(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Lr(N2e),position:Sl.Full}}}],[s,a]=n.deltaDecorations(r,o);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class v7 extends o_e{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=C("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,o=new Je;o.add(t.onDidAccept(u=>{const[d]=t.selectedItems;if(d){if(!this.isValidLineNumber(r,d.lineNumber))return;this.gotoLocation(e,{range:this.toRange(d.lineNumber,d.column),keyMods:t.keyMods,preserveFocus:u.inBackground}),u.inBackground||t.hide()}}));const s=()=>{const u=this.parsePosition(r,t.value.trim().substr(v7.PREFIX.length)),d=this.getPickLabel(r,u.lineNumber,u.column);if(t.items=[{lineNumber:u.lineNumber,column:u.column,label:d}],t.ariaLabel=d,!this.isValidLineNumber(r,u.lineNumber)){this.clearDecorations(r);return}const h=this.toRange(u.lineNumber,u.column);r.revealRangeInCenter(h,0),this.addDecorations(r,h)};s(),o.add(t.onDidChangeValue(()=>s()));const a=zde(r);return a&&a.getOptions().get(59).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(Un(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?C("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):C("gotoLineLabel","Go to line {0}.",t);const r=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?C("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,o):C("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const r=this.getModel(e);if(!r)return!1;const o={lineNumber:t,column:n};return r.validatePosition(o).equals(o)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}v7.PREFIX=":";var bnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Cnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let RO=class extends v7{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Mt.None}get activeTextEditorControl(){return _l(this.editorService.getFocusedCodeEditor())}};RO=bnt([Cnt(0,Ii)],RO);Xr.as(q0.Quickaccess).registerQuickAccessProvider({ctor:RO,prefix:RO.PREFIX,helpEntries:[{description:w3.gotoLineActionLabel,needsEditor:!0}]});let ynt=class extends Lt{constructor(){super({id:"editor.action.gotoLine",label:w3.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Cc).quickAccess.show(RO.PREFIX)}};it(ynt);const s_e=[void 0,[]];function EW(i,e,t=0,n=0){const r=e;return r.values&&r.values.length>1?wnt(i,r.values,t,n):a_e(i,e,t,n)}function wnt(i,e,t,n){let r=0;const o=[];for(const s of e){const[a,u]=a_e(i,s,t,n);if(typeof a!="number")return s_e;r+=a,o.push(...u)}return[r,Snt(o)]}function a_e(i,e,t,n){const r=iS(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,!0);return r?[r[0],s8(r)]:s_e}function Snt(i){const e=i.sort((r,o)=>r.start-o.start),t=[];let n;for(const r of e)!n||!Ent(n,r)?(n=r,t.push(r)):(n.start=Math.min(n.start,r.start),n.end=Math.max(n.end,r.end));return t}function Ent(i,e){return!(i.end<e.start||e.end<i.start)}function lre(i){return i.startsWith('"')&&i.endsWith('"')}const l_e=" ";function dj(i){typeof i!="string"&&(i="");const e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:r}=ure(i),o=t.indexOf(qb)>=0,s=lre(i);let a;const u=i.split(l_e);if(u.length>1)for(const d of u){const h=lre(d),{pathNormalized:f,normalized:p,normalizedLowercase:m}=ure(d);p&&(a||(a=[]),a.push({original:d,originalLowercase:d.toLowerCase(),pathNormalized:f,normalized:p,normalizedLowercase:m,expectContiguousMatch:h}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:r,values:a,containsPathSeparator:o,expectContiguousMatch:s}}function ure(i){let e;As?e=i.replace(/\//g,qb):e=i.replace(/\\/g,qb);const t=ZLe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function cre(i){return Array.isArray(i)?dj(i.map(e=>e.original).join(l_e)):dj(i.original)}var $N=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class ac extends o_e{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,C("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,o=this.getModel(r);return o?Gc.has(o)?this.doProvideWithEditorSymbols(e,o,t,n):this.doProvideWithoutEditorSymbols(e,o,t,n):Oe.None}doProvideWithoutEditorSymbols(e,t,n,r){const o=new Je;return this.provideLabelPick(n,C("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),$N(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,o))||r.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,n,r))}),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return $N(this,void 0,void 0,function*(){if(Gc.has(e))return!0;const n=new Yle,r=t.add(Gc.onDidChange(()=>{Gc.has(e)&&(r.dispose(),n.complete(!0))}));return t.add(Un(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,r){const o=e.editor,s=new Je;s.add(n.onDidAccept(f=>{const[p]=n.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:n.keyMods,preserveFocus:f.inBackground}),f.inBackground||n.hide())})),s.add(n.onDidTriggerItemButton(({item:f})=>{f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,r);let u;const d=()=>$N(this,void 0,void 0,function*(){u==null||u.dispose(!0),n.busy=!1,u=new aa(r),n.busy=!0;try{const f=dj(n.value.substr(ac.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(a,f,void 0,u.token);if(r.isCancellationRequested)return;p.length>0?n.items=p:f.original.length>0?this.provideLabelPick(n,C("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,C("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(n.busy=!1)}});s.add(n.onDidChangeValue(()=>d())),d();let h=!0;return s.add(n.onDidChangeActive(()=>{const[f]=n.activeItems;if(f&&f.range){if(h){h=!1;return}o.revealRangeInCenter(f.range.selection,0),this.addDecorations(o,f.range.decoration)}})),s}doGetSymbolPicks(e,t,n,r){return $N(this,void 0,void 0,function*(){const o=yield e;if(r.isCancellationRequested)return[];const s=t.original.indexOf(ac.SCOPE_PREFIX)===0,a=s?1:0;let u,d;t.values&&t.values.length>1?(u=cre(t.values[0]),d=cre(t.values.slice(1))):u=t;const h=[];for(let m=0;m<o.length;m++){const v=o[m],b=qLe(v.name),E=`$(symbol-${HH.toString(v.kind)||"property"}) ${b}`,S=E.length-b.length;let w=v.containerName;n!=null&&n.extraContainerLabel&&(w?w=`${n.extraContainerLabel} • ${w}`:w=n.extraContainerLabel);let L,A,N,H;if(t.original.length>a){let R=!1;if(u!==t&&([L,A]=EW(E,Object.assign(Object.assign({},t),{values:void 0}),a,S),typeof L=="number"&&(R=!0)),typeof L!="number"&&([L,A]=EW(E,u,a,S),typeof L!="number"))continue;if(!R&&d){if(w&&d.original.length>0&&([N,H]=EW(w,d)),typeof N!="number")continue;typeof L=="number"&&(L+=N)}}const M=v.tags&&v.tags.indexOf(1)>=0;h.push({index:m,kind:v.kind,score:L,label:E,ariaLabel:b,description:w,highlights:M?void 0:{label:A,description:H},range:{selection:Q.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:M,buttons:(()=>{var R,q;const X=!((R=this.options)===null||R===void 0)&&R.openSideBySideDirection?(q=this.options)===null||q===void 0?void 0:q.openSideBySideDirection():void 0;if(X)return[{iconClass:X==="right"?_e.splitHorizontal.classNames:_e.splitVertical.classNames,tooltip:X==="right"?C("openToSide","Open to the Side"):C("openToBottom","Open to the Bottom")}]})()})}const f=h.sort((m,v)=>s?this.compareByKindAndScore(m,v):this.compareByScore(m,v));let p=[];if(s){let E=function(){v&&typeof m=="number"&&b>0&&(v.label=ec(xW[m]||LW,b))},m,v,b=0;for(const S of f)m!==S.kind?(E(),m=S.kind,b=1,v={type:"separator"},p.push(v)):b++,p.push(S);E()}else f.length>0&&(p=[{label:C("symbols","symbols ({0})",h.length),type:"separator"},...f]);return p})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=xW[e.kind]||LW,r=xW[t.kind]||LW,o=n.localeCompare(r);return o===0?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return $N(this,void 0,void 0,function*(){const n=yield Ta.create(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}}ac.PREFIX="@";ac.SCOPE_PREFIX=":";ac.PREFIX_BY_CATEGORY=`${ac.PREFIX}${ac.SCOPE_PREFIX}`;const LW=C("property","properties ({0})"),xW={5:C("method","methods ({0})"),11:C("function","functions ({0})"),8:C("_constructor","constructors ({0})"),12:C("variable","variables ({0})"),4:C("class","classes ({0})"),22:C("struct","structs ({0})"),23:C("event","events ({0})"),24:C("operator","operators ({0})"),10:C("interface","interfaces ({0})"),2:C("namespace","namespaces ({0})"),3:C("package","packages ({0})"),25:C("typeParameter","type parameters ({0})"),1:C("modules","modules ({0})"),6:C("property","properties ({0})"),9:C("enum","enumerations ({0})"),21:C("enumMember","enumeration members ({0})"),14:C("string","strings ({0})"),0:C("file","files ({0})"),17:C("array","arrays ({0})"),15:C("number","numbers ({0})"),16:C("boolean","booleans ({0})"),18:C("object","objects ({0})"),19:C("key","keys ({0})"),7:C("field","fields ({0})"),13:C("constant","constants ({0})")};var Lnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},xnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let hj=class extends ac{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Mt.None}get activeTextEditorControl(){return _l(this.editorService.getFocusedCodeEditor())}};hj=Lnt([xnt(0,Ii)],hj);Xr.as(q0.Quickaccess).registerQuickAccessProvider({ctor:hj,prefix:ac.PREFIX,helpEntries:[{description:eO.quickOutlineActionLabel,prefix:ac.PREFIX,needsEditor:!0},{description:eO.quickOutlineByCategoryActionLabel,prefix:ac.PREFIX_BY_CATEGORY,needsEditor:!0}]});let Dnt=class extends Lt{constructor(){super({id:"editor.action.quickOutline",label:eO.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:de.hasDocumentSymbolProvider,kbOpts:{kbExpr:de.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Cc).quickAccess.show(ac.PREFIX)}};it(Dnt);function DW(i,e){return e&&(i.stack||i.stacktrace)?C("stackTrace.format","{0}: {1}",hre(i),dre(i.stack)||dre(i.stacktrace)):hre(i)}function dre(i){return Array.isArray(i)?i.join(`
`):i}function hre(i){return typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?C("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function u_e(i=null,e=!1){if(!i)return C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=BS(i),n=u_e(t[0],e);return t.length>1?C("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(cc(i))return i;if(i.detail){const t=i.detail;if(t.error)return DW(t.error,e);if(t.exception)return DW(t.exception,e)}return i.stack?DW(i,e):i.message?i.message:C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var LP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Ub;(function(i){i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM"})(Ub||(Ub={}));function TW(i){const e=i;return Array.isArray(e.items)}function Tnt(i){const e=i;return!!e.picks&&e.additionalPicks instanceof Promise}class b7 extends Oe{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const r=new Je;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const s=r.add(new Ra),a=()=>LP(this,void 0,void 0,function*(){const u=s.value=new Je;o==null||o.dispose(!0),e.busy=!1,o=new aa(t);const d=o.token,h=e.value.substr(this.prefix.length).trim(),f=this._getPicks(h,u,d),p=(m,v)=>{var b;let E,S;if(TW(m)?(E=m.items,S=m.active):E=m,E.length===0){if(v)return!1;h.length>0&&(!((b=this.options)===null||b===void 0)&&b.noResultsPick)&&(E=[this.options.noResultsPick])}return e.items=E,S&&(e.activeItems=[S]),!0};if(f!==null)if(Tnt(f)){let m=!1,v=!1;yield Promise.all([(()=>LP(this,void 0,void 0,function*(){yield m0(b7.FAST_PICKS_RACE_DELAY),!d.isCancellationRequested&&(v||(m=p(f.picks,!0)))}))(),(()=>LP(this,void 0,void 0,function*(){e.busy=!0;try{const b=yield f.additionalPicks;if(d.isCancellationRequested)return;let E,S;TW(f.picks)?(E=f.picks.items,S=f.picks.active):E=f.picks;let w,L;if(TW(b)?(w=b.items,L=b.active):w=b,w.length>0||!m){let A;if(!S&&!L){const N=e.activeItems[0];N&&E.indexOf(N)!==-1&&(A=N)}p({items:[...E,...w],active:S||L||A})}}finally{d.isCancellationRequested||(e.busy=!1),v=!0}}))()])}else if(!(f instanceof Promise))p(f);else{e.busy=!0;try{const m=yield f;if(d.isCancellationRequested)return;p(m)}finally{d.isCancellationRequested||(e.busy=!1)}}});return r.add(e.onDidChangeValue(()=>a())),a(),r.add(e.onDidAccept(u=>{const[d]=e.selectedItems;typeof(d==null?void 0:d.accept)=="function"&&(u.inBackground||e.hide(),d.accept(e.keyMods,u))})),r.add(e.onDidTriggerItemButton(({button:u,item:d})=>LP(this,void 0,void 0,function*(){var h,f;if(typeof d.trigger=="function"){const p=(f=(h=d.buttons)===null||h===void 0?void 0:h.indexOf(u))!==null&&f!==void 0?f:-1;if(p>=0){const m=d.trigger(p,e.keyMods),v=typeof m=="number"?m:yield m;if(t.isCancellationRequested)return;switch(v){case Ub.NO_ACTION:break;case Ub.CLOSE_PICKER:e.hide();break;case Ub.REFRESH_PICKER:a();break;case Ub.REMOVE_ITEM:const b=e.items.indexOf(d);if(b!==-1){const E=e.items.slice(),S=E.splice(b,1),w=e.activeItems.filter(A=>A!==S[0]),L=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=E,w&&(e.activeItems=w),e.keepScrollPosition=L}break}}}}))),r}}b7.FAST_PICKS_RACE_DELAY=200;var c_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},kb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fre=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let MO=class N4 extends b7{constructor(e,t,n,r,o,s){super(N4.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=r,this.telemetryService=o,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(sC)),this.options=e}_getPicks(e,t,n){return fre(this,void 0,void 0,function*(){const r=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const o=[];for(const d of r){const h=_l(N4.WORD_FILTER(e,d.label)),f=d.commandAlias?_l(N4.WORD_FILTER(e,d.commandAlias)):void 0;h||f?(d.highlights={label:h,detail:this.options.showAlias?f:void 0},o.push(d)):e===d.commandId&&o.push(d)}const s=new Map;for(const d of o){const h=s.get(d.label);h?(d.description=d.commandId,h.description=h.commandId):s.set(d.label,d)}o.sort((d,h)=>{const f=this.commandsHistory.peek(d.commandId),p=this.commandsHistory.peek(h.commandId);return f&&p?f>p?-1:1:f?-1:p?1:d.label.localeCompare(h.label)});const a=[];let u=!1;for(let d=0;d<o.length;d++){const h=o[d],f=this.keybindingService.lookupKeybinding(h.commandId),p=f?C("commandPickAriaLabelWithKeybinding","{0}, {1}",h.label,f.getAriaLabel()):h.label;d===0&&this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("recentlyUsed","recently used")}),u=!0),d!==0&&u&&!this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("morecCommands","other commands")}),u=!1),a.push(Object.assign(Object.assign({},h),{ariaLabel:p,detail:this.options.showAlias&&h.commandAlias!==h.label?h.commandAlias:void 0,keybinding:f,accept:()=>fre(this,void 0,void 0,function*(){this.commandsHistory.push(h.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:h.commandId,from:"quick open"});try{yield this.commandService.executeCommand(h.commandId)}catch(m){Cg(m)||this.dialogService.show(Ur.Error,C("canNotRun","Command '{0}' resulted in an error ({1})",h.label,u_e(m)))}})}))}return a})}};MO.PREFIX=">";MO.WORD_FILTER=Fq(r8,i4e,phe);MO=c_e([kb(1,Nn),kb(2,Er),kb(3,Ir),kb(4,yg),kb(5,yR)],MO);let sC=class Ko extends Oe{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Ko.getConfiguredCommandHistoryLength(this.configurationService),Ko.cache&&Ko.cache.limit!==this.configuredCommandsHistoryLength&&(Ko.cache.limit=this.configuredCommandsHistoryLength,Ko.saveState(this.storageService))}load(){const e=this.storageService.get(Ko.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Ko.cache=new z0(this.configuredCommandsHistoryLength,1);if(t){let r;t.usesLRU?r=t.entries:r=t.entries.sort((o,s)=>o.value-s.value),r.forEach(o=>n.set(o.key,o.value))}Ko.counter=this.storageService.getNumber(Ko.PREF_KEY_COUNTER,0,Ko.counter)}push(e){Ko.cache&&(Ko.cache.set(e,Ko.counter++),Ko.saveState(this.storageService))}peek(e){var t;return(t=Ko.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Ko.cache)return;const t={usesLRU:!0,entries:[]};Ko.cache.forEach((n,r)=>t.entries.push({key:r,value:n})),e.store(Ko.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Ko.PREF_KEY_COUNTER,Ko.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const o=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof o=="number"?o:Ko.DEFAULT_COMMANDS_HISTORY_LENGTH}};sC.DEFAULT_COMMANDS_HISTORY_LENGTH=50;sC.PREF_KEY_CACHE="commandPalette.mru.cache";sC.PREF_KEY_COUNTER="commandPalette.mru.counter";sC.counter=1;sC=c_e([kb(0,Dg),kb(1,ir)],sC);class d_e extends MO{constructor(e,t,n,r,o,s){super(e,t,n,r,o,s)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:zq(n.label)||n.id});return t}}var Int=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},dy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},knt=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let PO=class extends d_e{constructor(e,t,n,r,o,s){super({showAlias:!1},e,n,r,o,s),this.codeEditorService=t}get activeTextEditorControl(){return _l(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return knt(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};PO=Int([dy(0,Nn),dy(1,Ii),dy(2,Er),dy(3,Ir),dy(4,yg),dy(5,yR)],PO);Xr.as(q0.Quickaccess).registerQuickAccessProvider({ctor:PO,prefix:PO.PREFIX,helpEntries:[{description:JA.quickCommandHelp,needsEditor:!0}]});class Nnt extends Lt{constructor(){super({id:"editor.action.quickCommand",label:JA.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Cc).quickAccess.show(PO.PREFIX)}}it(Nnt);var Ant=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},hy=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let fj=class extends k0{constructor(e,t,n,r,o,s,a){super(!0,e,t,n,r,o,s,a)}};fj=Ant([hy(1,cn),hy(2,Ii),hy(3,po),hy(4,Nn),hy(5,Dg),hy(6,ir)],fj);ki(k0.ID,fj);class Ont extends Lt{constructor(){super({id:"editor.action.toggleHighContrast",label:o$.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(G0);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}it(Ont);var Iw;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Iw||(Iw={}));var kw;(function(i){i.dark="dark",i.light="light"})(kw||(kw={}));var FO;(function(i){i.onChange="colorTheme.onChange"})(FO||(FO={}));const Rnt={workbenchBackground:"#F3F3F3",foreground:"#616161",errorForeground:"#A1260D",descriptionForeground:"#717171","icon.foreground":"#424242",focusBorder:"#0090F1","widget.shadow":"#A8A8A8","textSeparator.foreground":"#0000002e","textLink.foreground":"#006AB1","textLink.activeForeground":"#006AB1","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#dcdcdc66","input.background":we.white,"input.foreground":"#616161","input.border":"#616161","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":we.fromHex("#007ACC").transparent(.3),"input.placeholderForeground":we.fromHex("#616161").transparent(.5),"dropdown.background":we.white,"dropdown.border":we.white,"checkbox.background":we.white,"checkbox.border":we.white,"button.background":"#007ACC","button.foreground":we.white,"badge.background":"#C4C4C4","badge.foreground":"#333","scrollbar.shadow":"#DDDDDD","scrollbarSlider.background":we.fromHex("#646464").transparent(.4),"scrollbarSlider.hoverBackground":we.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":we.fromHex("#000000").transparent(.6),"progressBar.background":we.fromHex("#0E70C0"),"editorError.background":"#E51400","editorWarning.foreground":"#E51400","editorInfo.foreground":"#E9A700","editorHint.foreground":"#6c6c6c","editor.background":"#fffffe","editor.foreground":"#333333","editor.selectionBackground":"#ADD6FF","editor.findMatchBackground":"#A8AC94","list.dropBackground":"#E4E6F1","list.hoverBackground":"#F0F0F0","list.activeSelectionBackground":"#0074E8","list.activeSelectionForeground":we.white,"menu.foreground":"#616161","menu.background":we.white,"menu.separatorBackground":"#888888","panel.background":we.white,"panel.border":"rgba(128, 128, 128, 0.35)","panelTitle.activeForeground":"rgb(66, 66, 66)","panelTitle.activeBorder":"rgb(66, 66, 66)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Mnt={workbenchBackground:"#252526",foreground:"#CCCCCC","widget.shadow":"#000000",errorForeground:"#F48771",descriptionForeground:we.fromHex("#CCCCCC").transparent(.7),"icon.foreground":"#C5C5C5",focusBorder:"#007FD4","textSeparator.foreground":"#ffffff2e","textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#0a0a0a66","input.background":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":we.fromHex("#0E639C").transparent(.5),"input.placeholderForeground":we.fromHex("#616161").transparent(.5),"dropdown.background":"#3C3C3C","dropdown.foreground":"#F0F0F0","dropdown.border":"#CECECE","checkbox.border":"#CECECE","button.background":"#0E639C","button.foreground":we.white,"badge.background":"#4D4D4D","badge.foreground":we.white,"scrollbar.shadow":"#000000","scrollbarSlider.background":we.fromHex("#797979").transparent(.4),"scrollbarSlider.hoverBackground":we.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":we.fromHex("#BFBFBF").transparent(.4),"progressBar.background":we.fromHex("#0E70C0"),"editorError.background":"#F48771","editorWarning.foreground":"#CCA700","editorInfo.foreground":"#75BEFF","editorHint.foreground":we.fromHex("#eeeeee").transparent(.7),"editor.background":"#1E1E1E","editor.foreground":"#BBBBBB","editor.selectionBackground":"#264F78","editor.selectionForeground":"#000000","list.dropBackground":"#37373D","list.hoverBackground":"#2A2D2E","list.activeSelectionBackground":"#37373D","list.activeSelectionForeground":we.white,"menu.foreground":"#F0F0F0","menu.background":"#3C3C3C","menu.separatorBackground":"#BBBBBB","panel.background":"rgb(30, 30, 30)","panel.border":"#3C3C3C","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Pnt={workbenchBackground:"#000000",foreground:"#FFFFFF",errorForeground:"#F48771",descriptionForeground:we.fromHex("#FFFFFF").transparent(.7),"icon.foreground":"#FFFFFF",focusBorder:"#F38518",contrastBorder:"#6FC3DF",contrastActiveBorder:"#F38518","textSeparator.foreground":we.black,"textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.border":we.white,"textCodeBlock.background":we.black,"input.background":we.black,"input.foreground":"#FFFFFF","input.border":"#6FC3DF","inputOption.activeBorder":"#6FC3DF","input.placeholderForeground":we.fromHex("#616161").transparent(.7),"dropdown.background":we.black,"dropdown.listBackground":we.black,"dropdown.foreground":we.white,"dropdown.border":"#6FC3DF","checkbox.border":"#6FC3DF","button.foreground":we.white,"badge.background":we.black,"badge.foreground":we.white,"scrollbarSlider.background":we.fromHex("#6FC3DF").transparent(.6),"scrollbarSlider.hoverBackground":we.fromHex("#6FC3DF").transparent(.8),"scrollbarSlider.activeBackground":"#6FC3DF","progressBar.background":"#6FC3DF","editorError.border":we.fromHex("#E47777").transparent(.8),"editorWarning.border":we.fromHex("#FFCC00").transparent(.8),"editorInfo.border":we.fromHex("#FFCC00").transparent(.8),"editorHint.border":we.fromHex("#eeeeee").transparent(.8),"editor.background":we.black,"editor.foreground":we.white,"editor.selectionForeground":"#000000","menu.foreground":we.white,"menu.background":we.black,"menu.separatorBackground":"#6FC3DF","panel.border":"#6FC3DF","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"};function Fnt(i){switch(i.uiTheme){case"vs-dark":return Object.assign({},Mnt);case"vs":return Object.assign({},Rnt);default:return Object.assign({},Pnt)}}function Bnt(i){let e="";for(const t in i)if(t){const n=i[t];if(n){const r=t.replace(".","-");e+=`--${r}: ${n}; 
`}}return`
        :root {
            ${e}
        }
    `}function Wnt(i){const e=wr.cloneDeep(i);return[["minimap.background","editor.background"],["minimapSlider.background","scrollbarSlider.background"],["minimapSlider.hoverBackground","scrollbarSlider.hoverBackground"],["minimapSlider.activeBackground","scrollbarSlider.activeBackground"],["panel.background","workbenchBackground"],["sash.hoverBorder","focusBorder"],["button.background","textLink.foreground"],["menu.selectionBackground","button.background"],["button.hoverBackground","button.background",n=>we.fromHex(n).lighten(.2)]].forEach(([n,r,o])=>{!e[n]&&e[r]&&(o?e[n]=o(e[r]):e[n]=e[r])}),e}function Vnt(i){const e=Fnt(i),t=Wnt(Object.assign(e,i.colors)),n={};for(const a in t)if(a){const u=t[a];u&&typeof u=="object"?n[a]=u.toString():typeof u=="string"&&(n[a]=u)}const r=i.tokenColors,o=[],s=(a,u)=>{const d=o.findIndex(h=>h.token===a);d>=0?Object.assign(o[d],Object.assign({},u.settings)):a&&o.push(Object.assign({token:a},u.settings))};return r==null||r.forEach(a=>{Array.isArray(a.scope)?a.scope.forEach(u=>s(u,a)):s(a.scope,a)}),{base:i.uiTheme,rules:o,inherit:!0,colors:n}}var Hnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$nt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const h2={id:"Default Dark+",name:"Default Dark+",label:"Default Dark+",uiTheme:"vs-dark"},A4=Bn("customize-theme");let aC=class extends NS{constructor(){super(),this.colorThemes=[h2],this.colorTheme=h2,this.colorTheme&&this.setTheme(this.colorTheme.id)}addThemes(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.getThemeById(n.id)?(Pn.warn(`There has ${n.name} already in theme, it'll update this theme otherwise please don't add the duplicated theme`),this.updateTheme(n)):this.colorThemes.push(Object.assign({},n))})}updateTheme(e){e.id||Pn.error("Update the theme failed!  The 'id' is required in the theme data.");const t=this.colorThemes.findIndex(di(e.id));t>-1?(Object.assign(this.colorThemes[t],e),this.colorThemes[t].id===this.getColorTheme().id&&this.reload()):Pn.error(`Update the theme failed! There is no theme found via '${e.id}'`)}getThemeById(e){const t=this.colorThemes.find(di(e));return t?Object.assign({},t):void 0}getColorTheme(){return Object.assign({},this.colorTheme)}setTheme(e){const t=this.getColorTheme(),n=this.getThemeById(e);if(n){this.colorTheme=Object.assign({},n);const r=Vnt(n),o=Bnt(r.colors);j1e(o,A4),sa.defineTheme(A4,r),sa.setTheme(A4);const s=this.getColorThemeMode();this.emit(FO.onChange,t,Object.assign({},this.colorTheme),s)}else Pn.error("Can't get the theme by id:"+e)}getThemes(){return this.colorThemes}reload(){this.setTheme(this.getColorTheme().id)}reset(){this.colorThemes=[h2],this.setTheme(h2.id)}getColorThemeMode(){const{colors:e,type:t}=this.colorTheme;if(t===Iw.DARK||t===Iw.HIGH_CONTRAST)return kw.dark;if(t===Iw.LIGHT)return kw.light;const n=(e==null?void 0:e["editor.background"])||(e==null?void 0:e["tab.activeBackground"])||(e==null?void 0:e["molecule.welcomeBackground"]);return n?z1e(n):kw.dark}onChange(e){this.subscribe(FO.onChange,e)}};aC=Hnt([Gi(),$nt("design:paramtypes",[])],aC);var lC;(function(i){i.OnClick="activityBar.onClick",i.OnChange="activityBar.onChange",i.DataChanged="activityBar.data",i.ReRender="activityBar.reRender"})(lC||(lC={}));class h_e{constructor(e=[],t=[],n=""){this.data=e,this.contextMenu=t,this.selected=n}}class f_e{constructor(e=[],t=""){this.panes=e,this.current=t}}var znt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Unt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let pg=class extends nl{constructor(){super(),this.state=je.resolve(f_e)}getPane(e){const{panes:t}=this.state;return t.find(di(e))}get(e){const t=this.getPane(e);return t?Zh(t):void 0}add(e,t=!1){if(this.getPane(e.id)){Pn.error(`There already has a pane which id is ${e.id}, if you want to modify it, please use the update method`);return}const r=this.state.panes.concat();r.push(Zh(e)),t&&this.setState({current:e.id}),this.setState({panes:r})}update(e){const{panes:t}=this.state,n=this.getPane(e.id);if(!n){Pn.error(`There is no pane found via the ${e.id} id`);return}Object.assign(n,e),this.setState({panes:Zh(t)})}remove(e){var t,n;const{panes:r,current:o}=this.state,s=r.findIndex(di(e));if(s===-1){Pn.error(`There is no pane found via the ${e} id`);return}if(e===o){const a=((t=r[s+1])===null||t===void 0?void 0:t.id)||((n=r[s-1])===null||n===void 0?void 0:n.id)||"";this.setActive(a)}r.splice(s,1),this.setState({panes:r.concat()})}setActive(e){if(!e)this.setState({current:""});else{if(!this.getPane(e)){Pn.error(`There is no pane found via the ${e} id`);return}this.setState({current:e})}}reset(){this.setState({panes:[],current:""})}};pg=znt([Gi(),Unt("design:paramtypes",[])],pg);var jnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Knt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let mg=class extends nl{constructor(){super(),this.state=je.resolve(h_e),this.sidebarService=je.resolve(pg)}setActive(e){this.setState({selected:e})}reset(){this.setState({data:[],selected:"",contextMenu:[]})}add(e,t=!1){let n=[...this.state.data];Array.isArray(e)?n=n==null?void 0:n.concat(e):(n==null||n.push(e),t&&this.setActive(e.id)),n.sort((r,o)=>{const s=r.sortIndex||Number.MAX_SAFE_INTEGER,a=o.sortIndex||Number.MAX_SAFE_INTEGER;return s-a}),this.setState({data:n})}getRemoveList(e,t){return t.reduce((n,r,o)=>{const s=r.id.toString();return Array.isArray(e)&&e.includes(s)||e===s?n.concat(o):n},[])}remove(e){const{data:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((o,s)=>!r.includes(s)),this.setState({data:n})):Pn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}toggleBar(e){const{data:t=[],selected:n}=this.state,r=t.concat(),o=r.findIndex(di(e)),s=r[o];if(s){if(s.hidden=!s.hidden,e===n){const a=(o+1)%r.length;this.setActive(r[a].id),this.sidebarService.setActive(r[a].id)}this.setState({data:r})}else Pn.error("Toggle activity bar failed, please check your id")}toggleContextMenuChecked(e){const{contextMenu:t=[]}=this.state,n=t.concat(),r=n.find(di(e));r?(r.icon=r.icon==="check"?"":"check",this.setState({contextMenu:n})):Pn.error(`Toggle the contextmenu failed, can not found any menu by id ${e}`)}addContextMenu(e){let t=[...this.state.contextMenu];Array.isArray(e)?t=t==null?void 0:t.concat(e):t==null||t.push(e),this.setState({contextMenu:t})}removeContextMenu(e){const{contextMenu:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((o,s)=>!r.includes(s)),this.setState({contextMenu:n})):Pn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}onClick(e){this.subscribe(lC.OnClick,e)}onChange(e){this.subscribe(lC.OnChange,e)}};mg=jnt([Gi(),Knt("design:paramtypes",[])],mg);var BO;(function(i){i.onTabClick="AuxiliaryBar.onClick"})(BO||(BO={}));class gj{constructor(e="default",t=[],n,r){this.mode="default",this.data=[],this.mode=e,this.children=r,this.data=t,this.current=n}}var Sp;(function(i){i.left="left",i.right="right"})(Sp||(Sp={}));var WO;(function(i){i.onClick="statusBar.onClick",i.DataChanged="statusBar.data"})(WO||(WO={}));class g_e{constructor(e=[],t=[],n=[]){this.leftItems=[],this.rightItems=[],this.leftItems=e,this.rightItems=t,this.contextMenu=n}}var uC;(function(i){i.onSelect="menuBar.onSelect",i.onChangeMode="menuBar.onChangeMode"})(uC||(uC={}));class p_e{constructor(e=[]){this.data=e}}var Uc;(function(i){i.onClick="explorer.onClick",i.onPanelToolbarClick="explorer.onPanelToolbarClick",i.onCollapseChange="explorer.onCollapseChange",i.onRemovePanel="explorer.onRemovePanel",i.onCollapseAllFolders="explorer.onCollapseAllFolders"})(Uc||(Uc={}));class m_e{constructor(e=[],t,n){this.data=e,this.headerToolBar=t,this.activePanelKeys=n}}var ea;(function(i){i.File="File",i.Folder="Folder",i.RootFolder="RootFolder"})(ea||(ea={}));var yo;(function(i){i.onSelectFile="folderTree.onSelectFile",i.onDelete="folderTree.onDelete",i.onRename="folderTree.onRename",i.onUpdateFileName="folderTree.onUpdateFileName",i.onRightClick="folderTree.onRightClick",i.onContextMenuClick="folderTree.onContextMenuClick",i.onCreate="folderTree.onCreate",i.onLoadData="folderTree.onLoadData",i.onDrop="folderTree.onDrop",i.onExpandKeys="folderTree.onExpandKeys"})(yo||(yo={}));class Gnt{constructor(e){this.fileType=ea.File;const{id:t,name:n="",location:r="",fileType:o=ea.File,children:s=[],icon:a="",isEditable:u=!1,content:d="",isLeaf:h=!0,data:f}=e;this.fileType=o,this.isEditable=u,this.name=n,this.id=t,this.location=r,this.children=s,this.icon=a,this.content=d,this.data=f,this.isLeaf=h}}class __e{constructor(e={contextMenu:[],current:null,folderPanelContextMenu:[],data:[],expandKeys:[]},t=!1,n){this.folderTree=e,this.entry=n,this.autoSort=t}}var Lo;(function(i){i.onClose="editorTree.close",i.onSelect="editorTree.select",i.onCloseOthers="editorTree.closeOthers",i.onCloseSaved="editorTree.closeSaved",i.onCloseAll="editorTree.closeAll",i.onSaveAll="editorTree.saveAll",i.onSplitEditorLayout="editorTree.splitEditorLayout",i.onToolbarClick="editorTree.toolbarClick",i.onContextMenu="editorTree.contextMenuClick"})(Lo||(Lo={}));let qnt=class{constructor(){}};var Wh;(function(i){i.onChange="search.onChange",i.onSearch="search.onSearch",i.onReplaceAll="search.onReplaceAll",i.onResultClick="search.onResultClick"})(Wh||(Wh={}));class v_e{constructor(e=[],t=[],n=[],r=[],o="",s="",a=!1,u=!1,d=!1,h=!1,f=!1,p={type:"info",text:""}){this.result=[],this.value="",this.replaceValue="",this.replaceMode=!1,this.isRegex=!1,this.isCaseSensitive=!1,this.isWholeWords=!1,this.preserveCase=!1,this.validationInfo={type:"info",text:""},this.headerToolBar=e,this.searchAddons=t,this.replaceAddons=n,this.value=o,this.replaceValue=s,this.replaceMode=a,this.isCaseSensitive=u,this.isWholeWords=d,this.isRegex=h,this.preserveCase=f,this.result=r,this.validationInfo=p}}var Ep;(function(i){i.onTabChange="panel.onTabChange",i.onToolbarClick="panel.onToolbarClick",i.onTabClose="panel.onTabClose"})(Ep||(Ep={}));class b_e{constructor(e=null,t=[],n=[]){this.hidden=!1,this.maximize=!1,this.current=e,this.data=t,this.toolbox=n}}var VO;(function(i){i.OnChange="settings.onchange"})(VO||(VO={}));class C_e{constructor(e,t,n){this.colorTheme=e,this.editor=t,this.locale=n}}var f5;(function(i){i[i.Read=1]="Read",i[i.WaitRead=2]="WaitRead"})(f5||(f5={}));class y_e{constructor(e="",t="",n=[],r=1,o=!1,s=[],a){this.id=e,this.name=t,this.sortIndex=r,this.render=a,this.showNotifications=o,this.data=n,this.actionBar=s}}var Qh;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Qh||(Qh={}));var HO;(function(i){i.onSelect="problems.onSelect"})(HO||(HO={}));class w_e{constructor(e="",t="",n=[],r=!1){this.id=e,this.name=t,this.show=r,this.data=n}}const S_e={[an.Unknown]:"",[an.Backspace]:"⌫",[an.Tab]:"⇥",[an.Enter]:"↩",[an.PageUp]:"↑",[an.PageDown]:"↓",[an.Digit0]:"0",[an.Digit1]:"1",[an.Digit2]:"2",[an.Digit3]:"3",[an.Digit4]:"4",[an.Digit5]:"5",[an.Digit6]:"6",[an.Digit7]:"7",[an.Digit8]:"8",[an.Digit9]:"9",[an.KeyA]:"A",[an.KeyB]:"B",[an.KeyC]:"C",[an.KeyD]:"D",[an.KeyE]:"E",[an.KeyF]:"F",[an.KeyG]:"G",[an.KeyH]:"H",[an.KeyI]:"I",[an.KeyJ]:"J",[an.KeyK]:"K",[an.KeyL]:"L",[an.KeyM]:"M",[an.KeyN]:"N",[an.KeyO]:"O",[an.KeyP]:"P",[an.KeyQ]:"Q",[an.KeyR]:"R",[an.KeyS]:"S",[an.KeyT]:"T",[an.KeyU]:"U",[an.KeyV]:"V",[an.KeyW]:"W",[an.KeyX]:"X",[an.KeyY]:"Y",[an.KeyZ]:"Z",[an.Semicolon]:";",[an.Equal]:"+",[an.Comma]:",",[an.Minus]:"-",[an.Period]:".",[an.Slash]:"/",[an.Backquote]:"~",[an.BracketLeft]:"[",[an.Backslash]:"\\",[an.BracketRight]:"]",[an.Quote]:'"'},Ynt=Object.freeze(Object.defineProperty({__proto__:null,get ActivityBarEvent(){return lC},ActivityBarModel:h_e,get AuxiliaryEventKind(){return BO},AuxiliaryModel:gj,get ColorScheme(){return Iw},get ColorThemeEvent(){return FO},get ColorThemeMode(){return kw},get EditorEvent(){return Gr},EditorGroupModel:tge,EditorModel:nge,EditorTree:qnt,get EditorTreeEvent(){return Lo},get ExplorerEvent(){return Uc},get FileTypes(){return ea},get Float(){return Sp},get FolderTreeEvent(){return yo},get IContributeType(){return sS},IExplorerModel:m_e,get IExtensionType(){return qz},IFolderTreeModel:__e,KeyCodeString:S_e,get MarkerSeverity(){return Qh},get MenuBarEvent(){return uC},MenuBarModel:p_e,NotificationModel:y_e,get NotificationStatus(){return f5},get PanelEvent(){return Ep},PanelModel:b_e,get ProblemsEvent(){return HO},ProblemsModel:w_e,get SearchEvent(){return Wh},SearchModel:v_e,get SettingsEvent(){return VO},SettingsModel:C_e,SidebarModel:f_e,get StatusBarEvent(){return WO},StatusBarModel:g_e,TreeNodeModel:Gnt},Symbol.toStringTag,{value:"Module"}));var Znt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Xnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let SS=class extends nl{constructor(){super(),this.getCurrentTab=()=>{const{current:e,data:t}=this.getState();return t==null?void 0:t.find(r=>r.key===e)},this.addAuxiliaryBar=e=>{const t=Array.isArray(e)?e:[e];this.setState({data:this.state.data.concat(t)})},this.setActive=e=>{this.setState({current:e})},this.setChildren=e=>{this.setState({children:e})},this.setMode=e=>{if(typeof e=="string")return this.setState({mode:e}),e;const t=e(this.state.mode);return this.setState({mode:t}),t},this.reset=()=>{this.setState(je.resolve(gj))},this.state=je.resolve(gj)}onTabClick(e){this.subscribe(BO.onTabClick,e)}};SS=Znt([Gi(),Xnt("design:paramtypes",[])],SS);var Qnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Jnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let P0=class extends nl{constructor(){super(),this.sperator="-",this.setMenus=e=>{this.setState({data:wr.cloneDeep(e)})},this.onSelect=e=>{this.subscribe(uC.onSelect,e)},this.state=je.resolve(p_e)}getReferenceMenu(e){const{data:t}=this.state,n=t.map((o,s)=>({source:o,path:`${s}`}));let r;for(;n.length;){const{source:o,path:s}=n.shift();o.id===e?r={source:o,path:s}:n.push(...(o.data||[]).map((a,u)=>({source:a,path:`${s}${this.sperator}${u}`})))}return r}getMenuById(e){const t=this.getReferenceMenu(e);return t&&wr.cloneDeep(t.source)}append(e,t){const{data:n}=this.state,r=this.getReferenceMenu(t);if(!r){Pn.error(`There is no menu found by ${t}`);return}const{source:o}=r;Array.isArray(o.data)?o.data.push(e):o.data=[e];const s=wr.cloneDeep(n);this.setState({data:s})}remove(e){const{data:t}=this.state,n=this.getReferenceMenu(e);if(!n){Pn.error(`There is no menu found by ${e}`);return}const{path:r}=n,o=r.split(this.sperator);o.length=o.length-1;const s=o.reduce((u,d)=>{const{data:h}=u;return h[d]},{data:t}),a=s.data.findIndex(u=>u.id===e);s.data.splice(a,1),this.setState({data:wr.cloneDeep(t)})}update(e,t={}){const{data:n}=this.state,r=this.getReferenceMenu(e);if(!r){Pn.error(`There is no menu found by ${e}`);return}const o=r.source;Object.assign(o,t);const s=wr.cloneDeep(n);this.setState({data:s})}reset(){this.setState({data:[]})}};P0=Qnt([Gi(),Jnt("design:paramtypes",[])],P0);var eit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},tit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Bp=class extends nl{constructor(){super(),this.state=je.resolve(m_e)}setExpandedPanels(e){this.setState({activePanelKeys:e})}toggleIcon(e){return e==="check"?"":"check"}getAction(e){var t;const{headerToolBar:n}=this.state,r=(t=n==null?void 0:n.contextMenu)===null||t===void 0?void 0:t.find(di(e));return r&&Zh(r)}updatePanel(e){if(!e.id){Pn.error("Must provide id property in update data");return}const t=this.state.data.concat(),n=t.find(di(e.id));if(!n){Pn.error(`There is no panel found in state whose id is ${e.id}`);return}Object.assign(n,e),this.setState({data:t}),this.updateAction({id:e.id.toString(),name:e.name,title:e.title,sortIndex:e.sortIndex})}updateAction(e){var t;if(!e.id){Pn.error("Must provide id property in action data");return}const{headerToolBar:n}=this.state;if(!n){Pn.error("Molecule can' update the action, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=r.find(di(e.id));if(!o){Pn.error(`There is no action found in actions whose id is ${e.id}`);return}Object.assign(o,e),this.setState({headerToolBar:Object.assign(Object.assign({},n),{contextMenu:r})})}addPanel(e){const t=Array.isArray(e)?e:[e],n=[...this.state.data],r=[];t.forEach(o=>{n.findIndex(di(o.id))!==-1?Pn.error(`There is already a panel whose id is ${o.id}`):(n.push(Zh(o)),r.push({id:o.id.toString(),name:o.name,title:o.name,icon:"check",sortIndex:o.sortIndex}))}),n.sort(({sortIndex:o=0},{sortIndex:s=0})=>s-o),this.setState({data:n}),this.addAction(r)}addAction(e){var t;const n=Array.isArray(e)?e:[e],{headerToolBar:r}=this.state;if(!r){Pn.error("Molecule can't add the action, because there is no headerToolBar in Explorer");return}const o=((t=r.contextMenu)===null||t===void 0?void 0:t.concat())||[];n.forEach(a=>{o.findIndex(di(a.id))!==-1?Pn.error(`There is already an action whose id is ${a.id}`):o.push(a)}),o.sort(({sortIndex:a=0},{sortIndex:u=0})=>u-a);const s=Object.assign(Object.assign({},r),{contextMenu:o});this.setState({headerToolBar:s})}removePanel(e){const{data:t}=this.state,n=[...t],r=n.findIndex(di(e));r>-1&&n.splice(r,1),this.setState({data:n}),this.removeAction(e)}removeAction(e){const{headerToolBar:t}=this.state;if(!t){Pn.error("Molecule can' remove the action, because there is no headerToolBar in Explorer");return}const n=t.contextMenu||[],r=n==null?void 0:n.findIndex(di(e));r>-1&&n.splice(r,1);const o=Object.assign(Object.assign({},t),{contextMenu:n});this.setState({headerToolBar:o})}togglePanel(e){const{data:t}=this.state,n=t.concat(),r=n.find(di(e));r&&(r.hidden=!r.hidden,this.setState({data:n}),this.toggleHeaderBar(e))}toggleHeaderBar(e){var t;const{headerToolBar:n}=this.state;if(!n){Pn.error("Molecule can' toggle the header bar, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=r.find(di(e));if(o){o.icon=this.toggleIcon(o.icon);const s=Object.assign(Object.assign({},n),{contextMenu:r});this.setState({headerToolBar:s})}}reset(){this.setState({data:[],headerToolBar:void 0})}onClick(e){this.subscribe(Uc.onClick,e)}onRemovePanel(e){this.subscribe(Uc.onRemovePanel,e)}onCollapseAllFolders(e){this.subscribe(Uc.onCollapseAllFolders,e)}onPanelToolbarClick(e){this.subscribe(Uc.onPanelToolbarClick,e)}};Bp=eit([Gi(),tit("design:paramtypes",[])],Bp);const vZ="molecule",E_e="activityBar",zR="sidebar",nit="explorer",gre="statusBar",iit="folderTree",rit="editorTree";var g5;(function(i){i.left="left",i.right="right"})(g5||(g5={}));var qa;(function(i){i.horizontal="horizontal",i.vertical="vertical"})(qa||(qa={}));var p5;(function(i){i.OnWorkbenchDidMount="workbench.didMount"})(p5||(p5={}));class oit{constructor(e=[300,"auto",300],t=["auto","150px"],n=[],r={hidden:!1},o={hidden:!0},s={hidden:!1,panelMaximized:!1},a={hidden:!1},u={hidden:!1,position:g5.left},d={hidden:!1,mode:qa.vertical},h=qa.vertical){this.splitPanePos=e,this.horizontalSplitPanePos=t,this.groupSplitPos=n,this.activityBar=r,this.auxiliaryBar=o,this.panel=s,this.statusBar=a,this.sidebar=u,this.menuBar=d,this.editorGroupDirection=h}}var sit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ait=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Wu=class extends nl{constructor(){super(),this.state=je.resolve(oit)}onWorkbenchDidMount(e){this.subscribe(p5.OnWorkbenchDidMount,e)}get container(){return this._container=document.getElementById(vZ)||document.body,this._container}toggleMenuBarVisibility(){const{menuBar:e}=this.state,t=e.hidden;return this.setState({menuBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}togglePanelVisibility(){const{panel:e}=this.state,t=e.hidden;return this.setState({panel:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleSidebarVisibility(){const{sidebar:e}=this.state,t=e.hidden;return this.setState({sidebar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleActivityBarVisibility(){const{activityBar:e}=this.state,t=e.hidden;return this.setState({activityBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleStatusBarVisibility(){const{statusBar:e}=this.state,t=e.hidden;return this.setState({statusBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}setSideBarPosition(e){const{sidebar:t}=this.state,{position:n}=t;n!==e&&this.setState({sidebar:{position:e,hidden:!1}})}togglePanelMaximized(){const e=this.state.panel;return this.setState({panel:Object.assign(Object.assign({},e),{panelMaximized:!e.panelMaximized})}),!e.panelMaximized}setPaneSize(e){this.setState({splitPanePos:e})}setHorizontalPaneSize(e){this.setState({horizontalSplitPanePos:e})}setGroupSplitSize(e){this.setState({groupSplitPos:e})}setMenuBarMode(e){const{menuBar:t}=this.state,{mode:n}=t;n!==e&&(this.setState({menuBar:Object.assign(Object.assign({},t),{mode:e,hidden:!1})}),this.emit(uC.onChangeMode,e))}getMenuBarMode(){const{menuBar:e}=this.state;return e.mode}setEditorGroupDirection(e){typeof e=="function"?this.setState({editorGroupDirection:e(this.state.editorGroupDirection)}):this.setState({editorGroupDirection:e})}setAuxiliaryBar(e){if(typeof e=="boolean")return this.setState({auxiliaryBar:{hidden:e}}),e;const t=e(this.state.auxiliaryBar.hidden);return this.setState({auxiliaryBar:{hidden:t}}),t}reset(){this.setState({splitPanePos:["300px","auto"],horizontalSplitPanePos:["70%","auto"],activityBar:{hidden:!1},panel:{hidden:!1,panelMaximized:!1},statusBar:{hidden:!1},sidebar:{hidden:!1,position:g5.left},menuBar:{hidden:!1,mode:qa.vertical}})}};Wu=sit([Gi(),ait("design:paramtypes",[])],Wu);var lit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Il=class extends nl{constructor(){super(),this.defaultActions=[],this.defaultMenus=[],this.updateActions=(e,t)=>{var n;const{current:r,groups:o}=this.getState();if(!r)return;const s=(o==null?void 0:o.concat())||[],a=s.find(di(t||r.id));if(a){const u=((n=a.actions)===null||n===void 0?void 0:n.concat())||[];u.forEach(d=>{const h=e.find(f=>f.id===d.id);h&&Object.assign(d,h)}),a.actions=u,this.setState({current:a.id===r.id?a:r,groups:s})}},this.state=je.resolve(nge),this.explorerService=je.resolve(Bp),this.layoutService=je.resolve(Wu)}updateEditorOptions(e){var t;const n=Object.assign({},this.state.editorOptions,e);this.setState({editorOptions:n}),(t=this.editorInstance)===null||t===void 0||t.updateOptions(n)}getDefaultActions(){return wr.cloneDeep(this.defaultActions)}getDefaultMenus(){return wr.cloneDeep(this.defaultMenus)}disposeModel(e){(Array.isArray(e)?e:[e]).forEach(n=>{var r;(r=sa.getModel(u0.parse(n.id.toString())))===null||r===void 0||r.dispose()})}isOpened(e,t){return(t||this.state.groups||[]).some(r=>this.getTabById(e,r.id))}setDefaultActions(e){this.defaultActions=e}setDefaultMenus(e){this.defaultMenus=e}setEntry(e){this.setState({entry:e})}getTabById(e,t){var n;const r=this.getGroupById(t);if(r)return(n=r.data)===null||n===void 0?void 0:n.find(di(e))}get editorInstance(){var e;return(e=this.state.current)===null||e===void 0?void 0:e.editorInstance}updateTab(e,t){var n,r,o;let s;const a=(n=e==null?void 0:e.data)===null||n===void 0?void 0:n.value;if(t){const u=this.getGroupById(t);if(!((r=u==null?void 0:u.data)===null||r===void 0)&&r.length){const d=u.data.find(di(e.id));d&&(s=Object.assign(d,e)),u.activeTab===e.id&&(s=Object.assign(u.tab,e));const h=sa.getModel(u0.parse(e.id.toString())),f=h==null?void 0:h.getValue();h&&wr.isString(a)&&f!==a&&h.setValue(a),this.updateGroup(t,u),t===((o=this.state.current)===null||o===void 0?void 0:o.id)&&this.updateCurrentGroup(u)}}else{const{groups:u=[],current:d}=this.state;u.forEach(h=>{const f=this.getTabById(e.id,h.id);f&&(s=Object.assign(f,e)),h.activeTab===e.id&&(s=Object.assign(h.tab,e));const p=sa.getModel(u0.parse(e.id.toString())),m=p==null?void 0:p.getValue();p&&wr.isString(a)&&m!==a&&p.setValue(a)}),(d==null?void 0:d.activeTab)===e.id&&(s=Object.assign(d.tab,e)),this.setState({current:d&&Object.assign({},d),groups:[...u]})}return s}setGroupEditorValue(e,t){var n;const r=(n=e.editorInstance)===null||n===void 0?void 0:n.getModel();if(!r)return;(r==null?void 0:r.getValue())!==t&&(r==null||r.setValue(t))}closeTab(e,t){const n=this.getGroupIndexById(t);if(n===-1)return;const{groups:r=[]}=this.state,o=[...r],s=o[n],a=s.data.findIndex(di(e)),u=wr.cloneDeep(s.data[a]);if(a!==-1){if(s.data.length===1&&a===0){const d=o[n+1]||o[n-1];o.splice(n,1),this.setState({groups:o,current:(o==null?void 0:o.length)===0?void 0:d},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(o.length?new Array(o.length+1).fill("auto"):[]);return}if(e===s.activeTab){const d=s.data[a+1]||s.data[a-1];s.tab=Object.assign({},d),s.activeTab=d==null?void 0:d.id}s.data.splice(a,1),o[n]=s,this.setState({current:s,groups:o},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()})}}closeOther(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.filter(di(s)),h=wr.cloneDeep(u.filter(f=>f.id!==s&&!this.isOpened(f.id,o.filter(p=>p.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,s),this.disposeModel(h),this.explorerService.forceUpdate()}closeToRight(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.findIndex(di(s));if(d<=-1)return;const h=u==null?void 0:u.slice(0,d+1),f=wr.cloneDeep(u==null?void 0:u.slice(d+1).filter(p=>!this.isOpened(p.id,o.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,s),this.disposeModel(f||[]),this.explorerService.forceUpdate()}closeToLeft(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.findIndex(di(s));if(d<=-1)return;const h=u==null?void 0:u.slice(d,u.length),f=wr.cloneDeep(u==null?void 0:u.slice(0,d).filter(p=>!this.isOpened(p.id,o.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,s),this.disposeModel(f||[]),this.explorerService.forceUpdate()}getGroupById(e){const{groups:t}=this.state;return t.find(di(e))}getGroupIndexById(e){const{groups:t}=this.state;return t.findIndex(di(e))}getGroupIdByTab(e){const{groups:t=[]}=this.state;return this.isOpened(e,t)?t.find(o=>this.getTabById(e,o.id)).id:null}setActive(e,t){const{groups:n=[]}=this.state,r=this.getGroupIndexById(e);if(r>-1){const o=[...n],s=o[r],a=this.getTabById(t,s.id);if(a){const u=Object.assign({},s);u.tab=Object.assign({},a),u.activeTab=t,o[r]=u,this.setState({current:u,groups:o})}}}updateGroup(e,t){const{groups:n=[]}=this.state,r=[...n],o=this.getGroupIndexById(e);if(o>-1){const s=Object.assign({},r[o],t);r[o]=s,this.setState({groups:r})}}updateCurrentGroup(e){const{current:t}=this.state,n=Object.assign({},t,e);this.setState({current:n})}open(e,t){const{current:n,groups:r=[]}=this.state;let o=n;if(t&&(o=this.getGroupById(t)),o){const{id:s}=e,a=o==null?void 0:o.data.find(di(s));if(a&&s===(o==null?void 0:o.activeTab))return;const u=this.getGroupIndexById(o.id),d=r[u];a||o.data.push(e),o.tab=e,o.activeTab=s,r[u]=Object.assign(Object.assign({},d),{tab:e,activeTab:s})}else o=new tge(r.length+1,e,e.id,[e],this.defaultActions,this.defaultMenus),r.push(o);this.emit(Gr.OpenTab,e),this.setState({current:o,groups:[...r]}),this.explorerService.forceUpdate()}onOpenTab(e){this.subscribe(Gr.OpenTab,e)}closeAll(e){var t;const{current:n,groups:r=[]}=this.state,o=this.getGroupIndexById(e);if(o>-1){const s=[...r];let a=n;const u=s.splice(o,1),d=wr.cloneDeep(((t=u[0].data)===null||t===void 0?void 0:t.filter(h=>!this.isOpened(h.id,s)))||[]);n&&n.id===e&&(a=r[o+1]||r[o-1]),this.setState({groups:s,current:a},()=>{this.disposeModel(d),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(s.length?new Array(s.length+1).fill("auto"):[])}}cloneGroup(e){const{current:t,groups:n=[]}=this.state,r=Object.assign({},e?this.getGroupById(e):t),o=fae(),s=Object.assign({},r.tab);return r.data=[s],r.tab=s,r.activeTab=s.id,r.id=o,this.setState({current:r,groups:[...n,r]}),r}onUpdateTab(e){this.subscribe(Gr.OnUpdateTab,e)}onMoveTab(e){this.subscribe(Gr.OnMoveTab,e)}onSelectTab(e){this.subscribe(Gr.OnSelectTab,e)}onCloseAll(e){this.subscribe(Gr.OnCloseAll,e)}onCloseTab(e){this.subscribe(Gr.OnCloseTab,e)}onCloseOther(e){this.subscribe(Gr.OnCloseOther,e)}onCloseToLeft(e){this.subscribe(Gr.OnCloseToLeft,e)}onCloseToRight(e){this.subscribe(Gr.OnCloseToRight,e)}onActionsClick(e){this.subscribe(Gr.onActionsClick,e)}onEditorInstanceMount(e){this.subscribe(Gr.onEditorInstanceMount,e)}};Il=lit([Gi(),uit("design:paramtypes",[])],Il);var cit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},dit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _g=class extends nl{constructor(){super(),this.state=je.resolve(g_e)}getItem(e,t){const{rightItems:n,leftItems:r}=this.state;if(!t){let a=r.findIndex(di(e.id));return a>-1?{index:a,item:r[a],source:"leftItems"}:(a=n.findIndex(di(e.id)),a>-1?{index:a,item:n[a],source:"rightItems"}:{index:-1,item:null,source:null})}const o=t===Sp.left?r:n,s=o.findIndex(di(e.id));return{index:s,item:o[s]||null,source:t===Sp.left?"leftItems":"rightItems"}}add(e,t){if(this.getItem(e,t).item){Pn.error(`There is already a status whose id is ${e.id}, if you want to update it, please use the update method`);return}const r=t===Sp.left?"leftItems":"rightItems",o=this.state[r].concat();o.push(e),this.setState({[r]:o})}update(e,t){const n=this.getItem(e,t);if(!n.source){Pn.error(`There is no status found whose id is ${e.id}`);return}const{index:r,item:o,source:s}=n,a=this.state[s].concat();a[r]=Object.assign({},o,e),this.setState({[s]:a})}getStatusBarItem(e,t){const n=this.getItem({id:e},t);return n.source?Zh(n.item):n.item}remove(e,t){const n=this.getItem({id:e},t);if(!n.source){Pn.error(`There is no status item found whose id is ${e}`);return}const{index:r,source:o}=n,s=this.state[o].concat();s.splice(r,1),this.setState({[o]:s})}reset(){this.setState({rightItems:[],leftItems:[],contextMenu:[]})}onClick(e){this.subscribe(WO.onClick,e)}};_g=cit([Gi(),dit("design:paramtypes",[])],_g);var hit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},fit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},git=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let ES=class extends nl{constructor(){super(),this.fileContextMenu=[],this.folderContextMenu=[],this.onDropTree=e=>{this.subscribe(yo.onDrop,e)},this.onRightClick=e=>{this.subscribe(yo.onRightClick,e)},this.onCreate=e=>{this.subscribe(yo.onCreate,e)},this.onContextMenu=e=>{this.subscribe(yo.onContextMenuClick,e)},this.onLoadData=e=>{this.subscribe(yo.onLoadData,e)},this.onExpandKeys=e=>{this.subscribe(yo.onExpandKeys,e)},this.state=je.resolve(__e),this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(Uo)}isHiddenFile(e){var t;return!!(!((t=e.name)===null||t===void 0)&&t.startsWith("."))}sortTree(e){e.sort((t,n)=>{if(t.isLeaf!==n.isLeaf)return t.isLeaf>n.isLeaf?1:-1;if(t.name&&n.name){const r=Number(this.isHiddenFile(t)),o=Number(this.isHiddenFile(n));return r^o?r?-1:1:r&r?t.name.substring(1).localeCompare(n.name.substring(1)):t.name.localeCompare(n.name)}return t.isEditable?-1:1}),e.forEach(t=>this.sortTree(t.children||[]))}reset(){this.setState({folderTree:{contextMenu:[],current:null,folderPanelContextMenu:[],data:[]},entry:void 0})}getFileContextMenu(){return this.fileContextMenu}getParentNode(e){var t,n;const r=(n=(t=this.state.folderTree)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n[0];if(!r)return null;const o=new y4(r),s=o.getHashMap(e);return s&&s.parent?o.getNode(s.parent):null}setFileContextMenu(e){this.fileContextMenu=e}getFolderContextMenu(){return this.folderContextMenu}setFolderContextMenu(e){this.folderContextMenu=e}getExpandKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.expandKeys)||[]}setExpandKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{expandKeys:e})})}getLoadedKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.loadedKeys)||[]}setLoadedKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{loadedKeys:e})})}setCurrentFolderLocation(e,t){const n=e.children,{tree:r}=this.getCurrentRootFolderInfo(t),o=r.getHashMap(t);e.location=`${o.node.location}/${e.name}`,n!=null&&n.length&&n.forEach(s=>{s.location=`${e.location}/${s.name}`})}getRootFolderById(e){var t;const n=((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[];for(let r=0;r<n.length;r++){const o=n[r];if(new y4(o).getNode(e))return o}return null}addRootFolder(e){var t;const{folderTree:n,autoSort:r}=this.state;if(!((t=n==null?void 0:n.data)===null||t===void 0)&&t.length)return;r&&this.sortTree(e.children||[]),this.setState({folderTree:Object.assign(Object.assign({},n),{data:[e]})});const{SAMPLE_FOLDER_PANEL_ID:o}=this.builtinService.getConstants();this.explorerService.updatePanel({id:o,name:e.name||"Default Root Folder"})}getRootFolderIndex(e){var t;return(((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[]).findIndex(o=>o.id===e)}getCurrentRootFolderInfo(e){const t=this.getRootFolderById(e);if(!t)return{currentRootFolder:null,index:-1,tree:null};const n=this.getRootFolderIndex(t.id),r=new y4(t);return{currentRootFolder:t,index:n,tree:r}}getPosOfType(e,t){if(!t.length||e===ea.Folder||e===ea.RootFolder)return 0;const n=t.findIndex(r=>r.fileType===ea.File);return n===-1?t.length:n}add(e,t){var n,r;const o=e.fileType==="RootFolder",{autoSort:s}=this.state;if(o){this.addRootFolder(e);return}if(!t&&t!==0)throw new Error("File node or folder node both need id");const a=((n=this.state.folderTree)===null||n===void 0?void 0:n.data)||[],{tree:u,index:d}=this.getCurrentRootFolderInfo(t);if(d<=-1){Pn.error("Please check id again, there is not folder tree");return}const h=u.getHashMap(t);if(h.node.fileType===ea.File){e.location=((r=h.node.location)===null||r===void 0?void 0:r.replace(/[^\/]+$/,`${e.name}`))||"";const f=u.getNode(h.parent),p=this.getPosOfType(e.fileType,f.children||[]);u.insertNode(e,h.parent,p)}else{this.setCurrentFolderLocation(e,t);const f=this.getPosOfType(e.fileType,h.node.children||[]);u==null||u.insertNode(e,h.id,f)}a[d]=u.obj,s&&this.sortTree(a[d].children||[]),this.setState({folderTree:Object.assign(Object.assign({},this.state.folderTree),{data:Zh(a)})})}remove(e){var t;const n=Zh(this.getState().folderTree||{}),r=n.data||[],{tree:o,index:s}=this.getCurrentRootFolderInfo(e);if(!o||s===-1){Pn.error(`There is unable to find a tree node whose id is ${e}`);return}o.removeNode(e),s>-1&&(r[s]=o.obj),!((t=n.loadedKeys)===null||t===void 0)&&t.includes(e.toString())&&(n.loadedKeys=n.loadedKeys.filter(a=>a!==e.toString())),this.setState({folderTree:n})}update(e){const{id:t}=e,n=git(e,["id"]),{autoSort:r}=this.state;if(!t&&t!==0)throw new Error("Id is required in updating data");const o=Zh(this.getState().folderTree||{}),s=o.data||[],{tree:a,index:u}=this.getCurrentRootFolderInfo(t);if(!a){Pn.error(`There is unable to find a tree node whose id is ${t}`);return}a.updateNode(t,n),u>-1&&(s[u]=a.obj,r&&this.sortTree(s[u].children||[])),this.setState({folderTree:o})}get(e){const{tree:t}=this.getCurrentRootFolderInfo(e);return t?t.getNode(e):null}setActive(e){const{folderTree:t}=this.state,n=typeof e>"u"?null:this.get(e);this.setState({folderTree:Object.assign(Object.assign({},t),{current:n})})}setEntry(e){this.setState({entry:e})}onRename(e){this.subscribe(yo.onRename,e)}onRemove(e){this.subscribe(yo.onDelete,e)}onUpdateFileName(e){this.subscribe(yo.onUpdateFileName,e)}onSelectFile(e){this.subscribe(yo.onSelectFile,e)}toggleAutoSort(){this.setState({autoSort:!this.state.autoSort})}};ES=hit([Gi(),fit("design:paramtypes",[])],ES);var pit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},mit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let m5=class extends nl{constructor(){super(),this.editorService=je.resolve(Il),this.state=this.editorService.getState()}onClose(e){this.subscribe(Lo.onClose,e)}onCloseOthers(e){this.subscribe(Lo.onCloseOthers,e)}onCloseSaved(e){this.subscribe(Lo.onCloseSaved,e)}onSelect(e){this.subscribe(Lo.onSelect,e)}onCloseAll(e){this.subscribe(Lo.onCloseAll,e)}onSaveAll(e){this.subscribe(Lo.onSaveAll,e)}onToolbarClick(e){this.subscribe(Lo.onToolbarClick,e)}onLayout(e){this.subscribe(Lo.onSplitEditorLayout,e)}onContextMenu(e){this.subscribe(Lo.onContextMenu,e)}};m5=pit([Gi(),mit("design:paramtypes",[])],m5);const Ke={PANEL_PROBLEMS:"panel.problems.title",STATUS_PROBLEMS:"statusbar.problems.title",SAMPLE_FOLDER_PANEL_ID:"sidebar.explore.folders",EDITOR_PANEL_ID:"sidebar.explore.openEditor",OUTLINE_PANEL_ID:"sidebar.explore.outline",OUTLINE_PANEL_MORE_DESC:"sidebar.explore.outlineMore",EXPLORER_ACTIVITY_ITEM:"sidebar.explore.title",EXPLORER_ACTION_TITLE:"sidebar.explore.actionDesc",EXPLORER_TOGGLE_VERTICAL:"sidebar.explore.toggleVertical",EXPLORER_TOGGLE_SAVE_ALL:"sidebar.explore.saveALL",EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:"sidebar.explore.closeAllEditors",EXPLORER_TOGGLE_SAVE_GROUP:"sidebar.explore.saveGroup",EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:"sidebar.explore.closeGroupEditors",NEW_FILE_COMMAND_ID:"explorer.newFile",NEW_FOLDER_COMMAND_ID:"explorer.newFolder",COLLAPSE_COMMAND_ID:"explorer.collapse",RENAME_COMMAND_ID:"explorer.rename",REMOVE_COMMAND_ID:"explorer.remove",DELETE_COMMAND_ID:"explorer.delete",OPEN_TO_SIDE_COMMAND_ID:"explorer.openToSide",FIND_IN_WORKSPACE_ID:"filesExplorer.findInWorkspace",DOWNLOAD_COMMAND_ID:"explorer.download",EDITOR_MENU_CLOSE_TO_RIGHT:"editor.closeToRight",EDITOR_MENU_CLOSE_TO_LEFT:"editor.closeToLeft",EDITOR_MENU_CLOSE_ALL:"editor.closeAll",EDITOR_MENU_CLOSE_OTHERS:"editor.closeOthers",EDITOR_MENU_CLOSE_SAVED:"editor.closeSaved",EDITOR_MENU_CLOSE:"editor.close",EDITOR_MENU_SHOW_OPENEDITORS:"editor.showOpenEditors",EDITOR_MENU_SPILIT:"editor.split",SETTING_ID:"Setting",PROBLEM_MODEL_ID:"MO_PROBLEMS",PROBLEM_MODEL_NAME:"Problems",NOTIFICATION_CLEAR_ALL_ID:"ClearAll",NOTIFICATION_HIDE_ID:"HideNotifications",NOTIFICATION_MODEL_ID:"MO_NOTIFICATION",NOTIFICATION_MODEL_NAME:"Notification",STATUS_BAR_HIDE_ID:"hide",SEARCH_CASE_SENSITIVE_COMMAND_ID:"search.matchCase",SEARCH_WHOLE_WORD_COMMAND_ID:"search.matchWholeWord",SEARCH_REGULAR_EXPRESSION_COMMAND_ID:"search.useRegularExpression",SEARCH_PRESERVE_CASE_COMMAND_ID:"search.preserveCase",SEARCH_REPLACE_ALL_COMMAND_ID:"search.replaceAll",SEARCH_ACTIVITY_ITEM:"sidebar.search.title",SEARCH_TOOLBAR_REFRESH:"search.toolbar.refresh",SEARCH_TOOLBAR_CLEAR:"search.toolbar.clearAll",SEARCH_TOOLBAR_COLLAPSE:"search.toolbar.collapseAll",PANEL_TOOLBOX_CLOSE:"panel.toolbox.closePanel",PANEL_TOOLBOX_RESIZE:"panel.toolbox.maximize",PANEL_TOOLBOX_RESTORE_SIZE:"panel.toolbox.restoreSize",PANEL_OUTPUT:"panel.output.title",MENU_APPEARANCE_ID:"Appearance",MENU_FILE_OPEN:"openFile",MENU_QUICK_COMMAND:"editor.action.quickCommand",MENU_VIEW_MENUBAR:"workbench.action.showMenuBar",MENU_VIEW_AUXILIARY:"workbench.action.showAuxiliary",MENU_VIEW_ACTIVITYBAR:"workbench.action.showActivityBar",MENU_VIEW_STATUSBAR:"workbench.action.showStatusBar",MENU_VIEW_PANEL:"workbench.action.showPanel",ACTION_QUICK_COMMAND:"editor.action.quickCommand",ACTION_QUICK_SELECT_ALL:"editor.action.quickSelectAll",ACTION_QUICK_COPY_LINE_UP:"editor.action.copyLinesUpAction",ACTION_QUICK_UNDO:"editor.action.undo",ACTION_QUICK_REDO:"editor.action.redo",ACTION_QUICK_CREATE_FILE:"workbench.action.quickCreateFile",ACTION_QUICK_CREATE_FOLDER:"workbench.action.quickCreateFolder",ACTION_QUICK_ACCESS_SETTINGS:"workbench.action.quickAccessSettings",ACTION_SELECT_THEME:"workbench.action.selectTheme",ACTION_SELECT_LOCALE:"workbench.action.selectLocale",ACTIVITY_BAR_GLOBAL_SETTINGS:"global.menu.settings",ACTIVITY_BAR_GLOBAL_ACCOUNT:"global.menu.account",CONTEXT_MENU_MENU:"menubar",CONTEXT_MENU_EXPLORER:"sidebar.explore.title",CONTEXT_MENU_SEARCH:"sidebar.search.title",CONTEXT_MENU_HIDE:"menu.hideActivityBar",MENUBAR_MODE_HORIZONTAL:"menuBar.mode.horizontal",MENUBAR_MODE_VERTICAL:"menuBar.mode.vertical",MENUBAR_MENU_MODE_DIVIDER:"menuBar.modeDivider"},pre={builtInExplorerActivityItem:()=>({id:Ke.EXPLORER_ACTIVITY_ITEM,name:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),icon:"files",title:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),sortIndex:1}),builtInExplorerFolderPanel:()=>({id:Ke.SAMPLE_FOLDER_PANEL_ID,sortIndex:8,name:ft("menu.defaultProjectName","No Open Folder"),toolbar:[{id:Ke.NEW_FILE_COMMAND_ID,title:ft("menu.newFile","New File"),icon:"new-file"},{id:Ke.NEW_FOLDER_COMMAND_ID,title:ft("menu.newFolder","New Folder"),icon:"new-folder"},{id:"refresh",title:ft("sidebar.explore.refresh","Refresh Explorer"),icon:"refresh"},{id:Ke.COLLAPSE_COMMAND_ID,title:ft("sidebar.explore.collapseFolders","Collapse Folders in Explorer"),icon:"collapse-all"}],config:{grow:2}}),builtInExplorerHeaderToolbar:()=>({id:Ke.EXPLORER_ACTION_TITLE,title:ft(Ke.EXPLORER_ACTION_TITLE,"View and More Actions..."),icon:"ellipsis",contextMenu:[]}),builtInExplorerEditorPanel:()=>({id:Ke.EDITOR_PANEL_ID,sortIndex:9,name:ft(Ke.EDITOR_PANEL_ID,"OPEN EDITORS"),toolbar:[{id:Ke.EXPLORER_TOGGLE_VERTICAL,title:ft(Ke.EXPLORER_TOGGLE_VERTICAL,"Toggle Vertical"),icon:"editor-layout"},{id:Ke.EXPLORER_TOGGLE_SAVE_ALL,title:ft(Ke.EXPLORER_TOGGLE_SAVE_ALL,"Save All"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,"Close All Editors"),icon:"close-all"}],groupToolbar:[{id:Ke.EXPLORER_TOGGLE_SAVE_GROUP,title:ft(Ke.EXPLORER_TOGGLE_SAVE_GROUP,"Save Group"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,"Close Group Editors"),icon:"close-all"}],config:{grow:0}}),builtInExplorerOutlinePanel:()=>({id:"outline",name:ft("sidebar.explore.outline","OUTLINE"),toolbar:[{id:"outline-collapse",title:ft("toolbar.collapseAll","Collapse All"),icon:"collapse-all"},{id:"outline-more",title:ft("sidebar.explore.outlineMore","More Actions..."),icon:"ellipsis"}]}),BuiltInEditorOptions:()=>({renderWhitespace:"none",tabSize:4,fontSize:12}),builtInEditorInitialActions:()=>[{id:Ke.EDITOR_MENU_SPILIT,name:"Split Editor Right",title:ft("editor.actions.splitRight","Split Editor Right"),icon:"split-horizontal",place:"outer"},{id:Ke.EDITOR_MENU_SHOW_OPENEDITORS,name:"Show Opened Editors"},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorInitialMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_TO_RIGHT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_RIGHT,"Close To Right")},{id:Ke.EDITOR_MENU_CLOSE_TO_LEFT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_LEFT,"Close To Left")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeHeaderContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],BuiltInSettingsTab:()=>({id:Ke.SETTING_ID,name:"settings.json",data:{language:"json",value:""}}),builtInStatusProblems:()=>({id:Ke.STATUS_PROBLEMS,sortIndex:1,data:{warnings:0,errors:0,infos:0},name:"Problems"}),builtInPanelProblems:()=>({id:Ke.PANEL_PROBLEMS,name:ft(Ke.PANEL_PROBLEMS,"problems"),data:null,sortIndex:1,closable:!1}),NOTIFICATION_CLEAR_ALL:()=>({id:Ke.NOTIFICATION_CLEAR_ALL_ID,title:"Clear All Notifications",icon:"clear-all"}),NOTIFICATION_HIDE:()=>({id:Ke.NOTIFICATION_HIDE_ID,title:"Hide Notifications",icon:"chevron-down"}),builtInNotification:()=>({id:Ke.NOTIFICATION_MODEL_ID,name:Ke.NOTIFICATION_MODEL_NAME,sortIndex:1}),STATUS_EDITOR_INFO:()=>({id:"MoEditorInfo",sortIndex:2,data:{ln:0,col:0},name:"Go to Line/Column"}),CONTEXT_MENU_HIDE_STATUS_BAR:()=>({id:Ke.STATUS_BAR_HIDE_ID,name:"Hide Status Bar"}),builtInSearchActivityItem:()=>({id:Ke.SEARCH_ACTIVITY_ITEM,name:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),title:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),sortIndex:2,icon:"search"}),builtInHeaderToolbar:()=>[{id:Ke.SEARCH_TOOLBAR_REFRESH,title:ft(Ke.SEARCH_TOOLBAR_REFRESH,"Refresh"),disabled:!0,icon:"refresh"},{id:Ke.SEARCH_TOOLBAR_CLEAR,disabled:!0,title:ft(Ke.SEARCH_TOOLBAR_CLEAR,"Clear all"),icon:"clear-all"},{id:Ke.SEARCH_TOOLBAR_COLLAPSE,title:ft(Ke.SEARCH_TOOLBAR_COLLAPSE,"Collapse all"),disabled:!0,icon:"collapse-all"}],builtInSearchAddons:()=>[{id:Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,title:ft(Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,"Match Case"),disabled:!1,checked:!1,icon:"case-sensitive"},{id:Ke.SEARCH_WHOLE_WORD_COMMAND_ID,title:ft(Ke.SEARCH_WHOLE_WORD_COMMAND_ID,"Match Whole Word"),disabled:!1,checked:!1,icon:"whole-word"},{id:Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,disabled:!1,checked:!1,title:ft(Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,"Use Regular Expression"),icon:"regex"}],builtInReplaceAddons:()=>[{id:Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,title:ft(Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,"Preserve Case"),disabled:!1,checked:!1,icon:"preserve-case"},{id:Ke.SEARCH_REPLACE_ALL_COMMAND_ID,title:ft(Ke.SEARCH_REPLACE_ALL_COMMAND_ID,"Replace All"),disabled:!1,checked:!1,icon:"replace-all"}],builtInOutputPanel:()=>({id:Ke.PANEL_OUTPUT,name:ft(Ke.PANEL_OUTPUT,"output"),data:"",sortIndex:2,closable:!1}),builtInPanelToolboxResize:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESIZE,"Maximize Panel Size"),icon:"chevron-up"}),builtInPanelToolboxReStore:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESTORE_SIZE,"Restore Panel Siz"),icon:"chevron-down"}),builtInPanelToolbox:()=>({id:Ke.PANEL_TOOLBOX_CLOSE,title:ft(Ke.PANEL_TOOLBOX_CLOSE,"Close Panel"),icon:"close"}),builtInMenuBarData:()=>[{id:"File",name:ft("menu.file","File"),data:[{id:Ke.ACTION_QUICK_CREATE_FILE,name:ft("menu.newFile","New File")},{id:Ke.MENU_FILE_OPEN,name:ft("menu.open","Open")}]},{id:"Edit",name:ft("menu.edit","Edit"),data:[{id:Ke.ACTION_QUICK_UNDO,name:ft("menu.undo","Undo")},{id:Ke.ACTION_QUICK_REDO,name:ft("menu.redo","Redo")}]},{id:"Selection",name:ft("menu.selection","Selection"),data:[{id:Ke.ACTION_QUICK_SELECT_ALL,name:ft("menu.selectAll","Select All")},{id:Ke.ACTION_QUICK_COPY_LINE_UP,name:ft("menu.copyLineUp","Copy Line Up")}]},{id:"View",name:ft("menu.view","View"),data:[{id:Ke.MENU_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:"OpenView",name:ft("menu.openView","Open View")},{id:Ke.MENU_APPEARANCE_ID,name:ft("menu.appearance","Appearance"),data:[{icon:"check",id:Ke.MENU_VIEW_MENUBAR,name:ft("menu.showMenuBar","Show Menu Bar")},{icon:"check",id:zR,name:ft("menu.showSideBar","Show Side Bar")},{id:Ke.MENU_VIEW_AUXILIARY,name:ft("menu.showAuxiliaryBar","Show Auxiliary Bar")},{icon:"check",id:Ke.MENU_VIEW_STATUSBAR,name:ft("menu.showStatusBar","Show Status Bar")},{icon:"check",id:Ke.MENU_VIEW_ACTIVITYBAR,name:ft("menu.showActivityBar","Show Activity Bar")},{icon:"check",id:Ke.MENU_VIEW_PANEL,name:ft("menu.showPanel","Show Panel")},{id:Ke.MENUBAR_MENU_MODE_DIVIDER,type:"divider"},{id:Ke.MENUBAR_MODE_HORIZONTAL,name:ft("menu.menuBarHorizontal","Menu Bar Horizontal Mode")},{id:Ke.MENUBAR_MODE_VERTICAL,name:ft("menu.menuBarVertical","Menu Bar Vertical Mode")}]}]},{id:"Run",name:ft("menu.run","Run"),data:[{id:"RunTask",name:ft("menu.runTask","Run Task")}]},{id:"Help",name:ft("menu.help","Help"),data:[{id:"About",name:ft("menu.about","About")}]}],quickAcessViewAction:()=>({id:Ke.ACTION_QUICK_COMMAND}),quickSelectColorThemeAction:()=>({id:Ke.ACTION_SELECT_THEME}),quickAccessSettingsAction:()=>({id:Ke.ACTION_QUICK_ACCESS_SETTINGS}),quickSelectLocaleAction:()=>({id:Ke.ACTION_SELECT_LOCALE}),quickTogglePanelAction:()=>({id:Ke.MENU_VIEW_PANEL}),quickSelectAllAction:()=>({id:Ke.ACTION_QUICK_SELECT_ALL}),quickCopyLineUpAction:()=>({id:Ke.ACTION_QUICK_COPY_LINE_UP}),quickUndoAction:()=>({id:Ke.ACTION_QUICK_UNDO}),quickRedoAction:()=>({id:Ke.ACTION_QUICK_REDO}),quickCreateFileAction:()=>({id:Ke.ACTION_QUICK_CREATE_FILE}),COMMON_CONTEXT_MENU:()=>[{id:Ke.RENAME_COMMAND_ID,name:ft("contextmenu.rename","Rename")},{id:Ke.DELETE_COMMAND_ID,name:ft("contextmenu.delete","Delete")}],BASE_CONTEXT_MENU:()=>[{id:Ke.NEW_FILE_COMMAND_ID,name:ft("contextmenu.newFile","New File")},{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.newFolder","New Folder")}],ROOT_FOLDER_CONTEXT_MENU:()=>[{id:Ke.REMOVE_COMMAND_ID,name:ft("contextmenu.removeFolder","Remove Folder")}],FILE_CONTEXT_MENU:()=>[{id:Ke.OPEN_TO_SIDE_COMMAND_ID,name:ft("contextmenu.openToTheSide","Open to the Side")}],FOLDER_PANEL_CONTEXT_MENU:()=>[{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.addFolderToSpace","Add Folder to Workspace...")},{id:Ke.FIND_IN_WORKSPACE_ID,name:ft("contextmenu.findInSpace","Find in Workspace...")},{id:Ke.DOWNLOAD_COMMAND_ID,name:ft("contextmenu.download","Download...")}],activityBarData:()=>[{id:Ke.ACTIVITY_BAR_GLOBAL_ACCOUNT,name:ft("menu.account","Account"),title:ft("menu.account","Account"),icon:"account",type:"global"},{id:Ke.ACTIVITY_BAR_GLOBAL_SETTINGS,name:ft("menu.settings","Settings"),title:ft("menu.settings","Settings"),icon:"settings-gear",type:"global",contextMenu:[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}]}],contextMenuData:()=>[{id:Ke.CONTEXT_MENU_MENU,name:ft("menubar","Menu"),icon:"check"},{id:Ke.CONTEXT_MENU_EXPLORER,name:ft("sidebar.explore.title","Explorer"),icon:"check"},{id:Ke.CONTEXT_MENU_SEARCH,name:ft("sidebar.search.title","Search"),icon:"check"},{id:Ke.CONTEXT_MENU_HIDE,name:ft("menu.hideActivityBar","Hide Activity Bar")}]};var _it=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},vit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Uo=class{constructor(){this.builtinConstants=new Map,this.builtinModules=new Map,this.initialize()}initialize(){Object.keys(Ke).forEach(e=>{this.addConstant({id:e,value:Ke[e]})}),Object.keys(pre).forEach(e=>{this.addModules({id:e,module:pre[e]})})}addConstant(e){const t=e.id;this.builtinConstants.set(t,Object.assign(Object.assign({},e),{active:!0}))}addModules(e){const t=e.id;this.builtinModules.set(t,Object.assign(Object.assign({},e),{active:!0}))}getConstant(e){return this.builtinConstants.get(e)}getConstants(){const e={};return this.builtinConstants.forEach(t=>{t.active&&(e[t.id]=t.value)}),e}inactiveConstant(e){if(!this.builtinConstants.has(e))return Pn.error(`Can't find constant which is ${e}`),!1;const n=this.builtinConstants.get(e);return this.builtinConstants.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}inactiveModule(e){if(!this.builtinModules.has(e))return Pn.error(`Can't find module which is ${e}`),!1;const n=this.builtinModules.get(e);return this.builtinModules.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}getModule(e){const t=this.builtinModules.get(e);if(!t)return t;t.value||(t.value=t.module());const n=Object.assign({},t);return Reflect.deleteProperty(n,"module"),wr.cloneDeep(n)}getModules(){const e={};return this.builtinModules.forEach(t=>{t.active&&(t.value||(t.value=t.module()),e[t.id]=wr.cloneDeep(t.value))}),e}reset(){this.builtinModules.clear(),this.builtinConstants.clear(),this.initialize()}};Uo=_it([Gi(),vit("design:paramtypes",[])],Uo);var bit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Cit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let $O=class extends nl{constructor(){super(),this.state=je.resolve(v_e),this.builtinService=je.resolve(Uo)}setValidateInfo(e){this.setState({validationInfo:typeof e=="string"?{type:"info",text:e}:e})}setSearchValue(e){this.setState({value:e})}setReplaceValue(e){this.setState({replaceValue:e})}setResult(e){this.setState({result:e||[]})}toggleMode(e){this.setState({replaceMode:e})}toggleCaseSensitive(){const{isCaseSensitive:e}=this.state,{SEARCH_CASE_SENSITIVE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isCaseSensitive:!e}),this.updateStatus(t,!e))}toggleWholeWord(){const{isWholeWords:e}=this.state,{SEARCH_WHOLE_WORD_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isWholeWords:!e}),this.updateStatus(t,!e))}toggleRegex(){const{isRegex:e}=this.state,{SEARCH_REGULAR_EXPRESSION_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isRegex:!e}),this.updateStatus(t,!e))}togglePreserveCase(){const{preserveCase:e}=this.state,{SEARCH_PRESERVE_CASE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({preserveCase:!e}),this.updateStatus(t,!e))}updateStatus(e,t){const{replaceAddons:n=[],searchAddons:r=[]}=this.state,o=n.find(di(e))||r.find(di(e));o&&(o.checked=t,this.setState({replaceAddons:n.concat(),searchAddons:r.concat()}))}reset(){this.setState({headerToolBar:[],searchAddons:[],replaceAddons:[],result:[],value:"",replaceValue:"",replaceMode:!1,isRegex:!1,isCaseSensitive:!1,isWholeWords:!1,preserveCase:!1,validationInfo:{type:"info",text:""}})}onReplaceAll(e){this.subscribe(Wh.onReplaceAll,e)}onChange(e){this.subscribe(Wh.onChange,e)}onSearch(e){this.subscribe(Wh.onSearch,e)}onResultClick(e){this.subscribe(Wh.onResultClick,e)}};$O=bit([Gi(),Cit("design:paramtypes",[])],$O);function yit(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var L_e=yit,wit="__lodash_hash_undefined__";function Sit(i){return this.__data__.set(i,wit),this}var Eit=Sit;function Lit(i){return this.__data__.has(i)}var xit=Lit,Dit=yY,Tit=Eit,Iit=xit;function _5(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new Dit;++e<t;)this.add(i[e])}_5.prototype.add=_5.prototype.push=Tit;_5.prototype.has=Iit;var kit=_5;function Nit(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var Ait=Nit;function Oit(i,e){return i.has(e)}var Rit=Oit,Mit=kit,Pit=Ait,Fit=Rit,Bit=1,Wit=2;function Vit(i,e,t,n,r,o){var s=t&Bit,a=i.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var d=o.get(i),h=o.get(e);if(d&&h)return d==e&&h==i;var f=-1,p=!0,m=t&Wit?new Mit:void 0;for(o.set(i,e),o.set(e,i);++f<a;){var v=i[f],b=e[f];if(n)var E=s?n(b,v,f,e,i,o):n(v,b,f,i,e,o);if(E!==void 0){if(E)continue;p=!1;break}if(m){if(!Pit(e,function(S,w){if(!Fit(m,w)&&(v===S||r(v,S,t,n,o)))return m.push(w)})){p=!1;break}}else if(!(v===b||r(v,b,t,n,o))){p=!1;break}}return o.delete(i),o.delete(e),p}var x_e=Vit;function Hit(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var $it=Hit;function zit(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var Uit=zit,mre=kR,_re=qfe,jit=bY,Kit=x_e,Git=$it,qit=Uit,Yit=1,Zit=2,Xit="[object Boolean]",Qit="[object Date]",Jit="[object Error]",ert="[object Map]",trt="[object Number]",nrt="[object RegExp]",irt="[object Set]",rrt="[object String]",ort="[object Symbol]",srt="[object ArrayBuffer]",art="[object DataView]",vre=mre?mre.prototype:void 0,IW=vre?vre.valueOf:void 0;function lrt(i,e,t,n,r,o,s){switch(t){case art:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case srt:return!(i.byteLength!=e.byteLength||!o(new _re(i),new _re(e)));case Xit:case Qit:case trt:return jit(+i,+e);case Jit:return i.name==e.name&&i.message==e.message;case nrt:case rrt:return i==e+"";case ert:var a=Git;case irt:var u=n&Yit;if(a||(a=qit),i.size!=e.size&&!u)return!1;var d=s.get(i);if(d)return d==e;n|=Zit,s.set(i,e);var h=Kit(a(i),a(e),n,r,o,s);return s.delete(i),h;case ort:if(IW)return IW.call(i)==IW.call(e)}return!1}var urt=lrt,bre=jfe,crt=1,drt=Object.prototype,hrt=drt.hasOwnProperty;function frt(i,e,t,n,r,o){var s=t&crt,a=bre(i),u=a.length,d=bre(e),h=d.length;if(u!=h&&!s)return!1;for(var f=u;f--;){var p=a[f];if(!(s?p in e:hrt.call(e,p)))return!1}var m=o.get(i),v=o.get(e);if(m&&v)return m==e&&v==i;var b=!0;o.set(i,e),o.set(e,i);for(var E=s;++f<u;){p=a[f];var S=i[p],w=e[p];if(n)var L=s?n(w,S,p,e,i,o):n(S,w,p,i,e,o);if(!(L===void 0?S===w||r(S,w,t,n,o):L)){b=!1;break}E||(E=p=="constructor")}if(b&&!E){var A=i.constructor,N=e.constructor;A!=N&&"constructor"in i&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof N=="function"&&N instanceof N)&&(b=!1)}return o.delete(i),o.delete(e),b}var grt=frt,kW=wY,prt=x_e,mrt=urt,_rt=grt,Cre=N8,yre=zp,wre=EY,vrt=Pfe,brt=1,Sre="[object Arguments]",Ere="[object Array]",xP="[object Object]",Crt=Object.prototype,Lre=Crt.hasOwnProperty;function yrt(i,e,t,n,r,o){var s=yre(i),a=yre(e),u=s?Ere:Cre(i),d=a?Ere:Cre(e);u=u==Sre?xP:u,d=d==Sre?xP:d;var h=u==xP,f=d==xP,p=u==d;if(p&&wre(i)){if(!wre(e))return!1;s=!0,h=!1}if(p&&!h)return o||(o=new kW),s||vrt(i)?prt(i,e,t,n,r,o):mrt(i,e,u,t,n,r,o);if(!(t&brt)){var m=h&&Lre.call(i,"__wrapped__"),v=f&&Lre.call(e,"__wrapped__");if(m||v){var b=m?i.value():i,E=v?e.value():e;return o||(o=new kW),r(b,E,t,n,o)}}return p?(o||(o=new kW),_rt(i,e,t,n,r,o)):!1}var wrt=yrt,Srt=wrt,xre=OC;function D_e(i,e,t,n,r){return i===e?!0:i==null||e==null||!xre(i)&&!xre(e)?i!==i&&e!==e:Srt(i,e,t,n,D_e,r)}var T_e=D_e,Ert=wY,Lrt=T_e,xrt=1,Drt=2;function Trt(i,e,t,n){var r=t.length,o=r,s=!n;if(i==null)return!o;for(i=Object(i);r--;){var a=t[r];if(s&&a[2]?a[1]!==i[a[0]]:!(a[0]in i))return!1}for(;++r<o;){a=t[r];var u=a[0],d=i[u],h=a[1];if(s&&a[2]){if(d===void 0&&!(u in i))return!1}else{var f=new Ert;if(n)var p=n(d,h,u,i,e,f);if(!(p===void 0?Lrt(h,d,xrt|Drt,n,f):p))return!1}}return!0}var Irt=Trt,krt=NC;function Nrt(i){return i===i&&!krt(i)}var I_e=Nrt,Art=I_e,Ort=k8;function Rrt(i){for(var e=Ort(i),t=e.length;t--;){var n=e[t],r=i[n];e[t]=[n,r,Art(r)]}return e}var Mrt=Rrt;function Prt(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}var k_e=Prt,Frt=Irt,Brt=Mrt,Wrt=k_e;function Vrt(i){var e=Brt(i);return e.length==1&&e[0][2]?Wrt(e[0][0],e[0][1]):function(t){return t===i||Frt(t,i,e)}}var Hrt=Vrt,$rt=NR,zrt=OC,Urt="[object Symbol]";function jrt(i){return typeof i=="symbol"||zrt(i)&&$rt(i)==Urt}var bZ=jrt,Krt=zp,Grt=bZ,qrt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yrt=/^\w*$/;function Zrt(i,e){if(Krt(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Grt(i)?!0:Yrt.test(i)||!qrt.test(i)||e!=null&&i in Object(e)}var CZ=Zrt,N_e=yY,Xrt="Expected a function";function yZ(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(Xrt);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=t.cache;if(o.has(r))return o.get(r);var s=i.apply(this,n);return t.cache=o.set(r,s)||o,s};return t.cache=new(yZ.Cache||N_e),t}yZ.Cache=N_e;var Qrt=yZ,Jrt=Qrt,eot=500;function tot(i){var e=Jrt(i,function(n){return t.size===eot&&t.clear(),n}),t=e.cache;return e}var not=tot,iot=not,rot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oot=/\\(\\)?/g,sot=iot(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(rot,function(t,n,r,o){e.push(r?o.replace(oot,"$1"):n||t)}),e}),aot=sot,Dre=kR,lot=L_e,uot=zp,cot=bZ,dot=1/0,Tre=Dre?Dre.prototype:void 0,Ire=Tre?Tre.toString:void 0;function A_e(i){if(typeof i=="string")return i;if(uot(i))return lot(i,A_e)+"";if(cot(i))return Ire?Ire.call(i):"";var e=i+"";return e=="0"&&1/i==-dot?"-0":e}var hot=A_e,fot=hot;function got(i){return i==null?"":fot(i)}var pot=got,mot=zp,_ot=CZ,vot=aot,bot=pot;function Cot(i,e){return mot(i)?i:_ot(i,e)?[i]:vot(bot(i))}var C7=Cot,yot=bZ,wot=1/0;function Sot(i){if(typeof i=="string"||yot(i))return i;var e=i+"";return e=="0"&&1/i==-wot?"-0":e}var UR=Sot,Eot=C7,Lot=UR;function xot(i,e){e=Eot(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[Lot(e[t++])];return t&&t==n?i:void 0}var wZ=xot,Dot=wZ;function Tot(i,e,t){var n=i==null?void 0:Dot(i,e);return n===void 0?t:n}var Iot=Tot;function kot(i,e){return i!=null&&e in Object(i)}var Not=kot,Aot=C7,Oot=Mfe,Rot=zp,Mot=LY,Pot=xY,Fot=UR;function Bot(i,e,t){e=Aot(e,i);for(var n=-1,r=e.length,o=!1;++n<r;){var s=Fot(e[n]);if(!(o=i!=null&&t(i,s)))break;i=i[s]}return o||++n!=r?o:(r=i==null?0:i.length,!!r&&Pot(r)&&Mot(s,r)&&(Rot(i)||Oot(i)))}var Wot=Bot,Vot=Not,Hot=Wot;function $ot(i,e){return i!=null&&Hot(i,e,Vot)}var zot=$ot,Uot=T_e,jot=Iot,Kot=zot,Got=CZ,qot=I_e,Yot=k_e,Zot=UR,Xot=1,Qot=2;function Jot(i,e){return Got(i)&&qot(e)?Yot(Zot(i),e):function(t){var n=jot(t,i);return n===void 0&&n===e?Kot(t,i):Uot(e,n,Xot|Qot)}}var est=Jot;function tst(i){return i}var nst=tst;function ist(i){return function(e){return e==null?void 0:e[i]}}var rst=ist,ost=wZ;function sst(i){return function(e){return ost(e,i)}}var ast=sst,lst=rst,ust=ast,cst=CZ,dst=UR;function hst(i){return cst(i)?lst(dst(i)):ust(i)}var fst=hst,gst=Hrt,pst=est,mst=nst,_st=zp,vst=fst;function bst(i){return typeof i=="function"?i:i==null?mst:typeof i=="object"?_st(i)?pst(i[0],i[1]):gst(i):vst(i)}var Cst=bst,yst=SY,wst=C7,Sst=LY,kre=NC,Est=UR;function Lst(i,e,t,n){if(!kre(i))return i;e=wst(e,i);for(var r=-1,o=e.length,s=o-1,a=i;a!=null&&++r<o;){var u=Est(e[r]),d=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return i;if(r!=s){var h=a[u];d=n?n(h,u,a):void 0,d===void 0&&(d=kre(h)?h:Sst(e[r+1])?[]:{})}yst(a,u,d),a=a[u]}return i}var xst=Lst,Dst=wZ,Tst=xst,Ist=C7;function kst(i,e,t){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=Dst(i,s);t(a,s)&&Tst(o,Ist(s,i),a)}return o}var Nst=kst,Ast=L_e,Ost=Cst,Rst=Nst,Mst=Kfe;function Pst(i,e){if(i==null)return{};var t=Ast(Mst(i),function(n){return[n]});return e=Ost(e),Rst(i,t,function(n,r){return e(n,r[0])})}var Fst=Pst;const Bst=Wp(Fst);var Wst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Vst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let cC=class extends nl{constructor(){super(),this.state=je.resolve(b_e),this.layoutService=je.resolve(Wu),this.builtinService=je.resolve(Uo)}updateOutputProperty(e){const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=Bst(e,r=>r!==void 0);return this.update(Object.assign(this.getPanel(t),n))}get outputEditorInstance(){var e;const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=(e=this.state.data)===null||e===void 0?void 0:e.find(di(t));return n==null?void 0:n.outputEditorInstance}setActive(e){const t=this.getPanel(e);t?this.open(t):Pn.error(`There is no panel found in data via ${e}. If you want to open a brand-new panel, please use the open method`)}toggleMaximize(){const{PANEL_TOOLBOX_RESIZE:e}=this.builtinService.getConstants(),{builtInPanelToolboxResize:t,builtInPanelToolboxReStore:n}=this.builtinService.getModules(),{toolbox:r=[]}=this.state;if(t&&n){const o=r==null?void 0:r.findIndex(di(e));if(r[o]){const a=this.layoutService.togglePanelMaximized();r[o]=a?n:t}}}open(e){const{data:t=[]}=this.state;let n=wr.cloneDeep(e);const r=t.findIndex(di(n.id));r>-1?n=t[r]:this.add(n),this.setState({current:n})}getPanel(e){const{data:t=[]}=this.state;return wr.cloneDeepWith(t.find(di(e)),n=>{if(n&&typeof n=="object"&&n instanceof tO)return n})}getOutputValue(){const{PANEL_OUTPUT:e=""}=this.builtinService.getConstants(),t=this.getPanel(e);return(t==null?void 0:t.data)||""}updateOutput(e){const{title:t,name:n,sortIndex:r,active:o,closable:s,editable:a}=e;return this.updateOutputProperty({title:t,name:n,sortIndex:r,active:o,closable:s,editable:a})}appendOutput(e){var t;const n=this.getOutputValue();this.updateOutputProperty({data:n+e}),(t=this.outputEditorInstance)===null||t===void 0||t.setValue(n+e)}cleanOutput(){var e;(e=this.outputEditorInstance)===null||e===void 0||e.setValue("")}add(e){let t=this.state.data||[];const n=wr.cloneDeep(e);Array.isArray(n)?t=t.concat(n):t.push(n),this.setState({data:t})}update(e){const t=this.state.data||[],n=t==null?void 0:t.findIndex(di(e.id));if(n!==void 0&&n>-1)return Object.assign(t[n],e),this.setState({data:[...t]}),t[n];Pn.error(`There is no panel found in data via the ${e.id}`)}remove(e){const{data:t}=this.state,n=t==null?void 0:t.findIndex(di(e));if(n!==void 0&&n>-1){const r=(t==null?void 0:t.splice(n,1))||[];return this.setState({data:t}),r[0]}else{Pn.error(`There is no panel found in data via the ${e}`);return}}reset(){this.setState({data:[],current:null,toolbox:[]}),this.cleanOutput()}onTabChange(e){this.subscribe(Ep.onTabChange,e)}onToolbarClick(e){this.subscribe(Ep.onToolbarClick,e)}onTabClose(e){this.subscribe(Ep.onTabClose,e)}};cC=Wst([Gi(),Vst("design:paramtypes",[])],cC);var Hst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$st=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let dC=class extends NS{constructor(){super(),this.editorService=je.resolve(Il),this.localeService=je.resolve(rf),this.colorThemeService=je.resolve(aC),this.builtinService=je.resolve(Uo),this.settings=this.getBuiltInSettings()}getBuiltInSettings(){const e=this.editorService.getState().editorOptions,t=this.colorThemeService.getColorTheme(),n=this.localeService.getCurrentLocale();return new C_e(t.id,e,n==null?void 0:n.id)}getDefaultSettingsTab(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();return Object.assign({},e)}onChangeSettings(e){this.subscribe(VO.OnChange,e)}update(e){this.applySettings(e);const t=wr.cloneDeep(this.settings);this.settings=SK(t,e)}append(e){this.update(e)}getSettings(){const e=this.getBuiltInSettings();return Object.assign({},this.settings,e)}applySettings(e){const t=this.settings,{colorTheme:n,locale:r,editor:o}=e;n&&n!==t.colorTheme&&this.colorThemeService.setTheme(n),r&&r!==t.locale&&this.localeService.setCurrentLocale(r),o&&!wr.isEqual(o,t.editor)&&this.editorService.updateEditorOptions(o)}openSettingsInEditor(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();e&&(e.data.value=this.flatObject2JSONString(this.getSettings()),this.editorService.open(e))}normalizeFlatObject(e){try{const t=JSON.parse(e);return $1e(t)}catch(t){throw new Error(`SettingsService.normalizeFlatJSONObject error: ${t}`)}}flatObject(e){return H1e(e)}flatObject2JSONString(e){return this.toJSONString(this.flatObject(e))}toJSONString(e,t=4){try{return JSON.stringify(e,null,t)}catch(n){throw new Error(`SettingsService.toJSONString error: ${n}`)}}};dC=Hst([Gi(),$st("design:paramtypes",[])],dC);var zst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ust=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let LS=class extends nl{constructor(){super(),this.state=je.resolve(y_e)}toggleNotification(){const e=wr.cloneDeep(this.state);e.showNotifications=!this.state.showNotifications,this.setState(e)}update(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e.id));if(n>-1){const r=t[n];return t[n]=Object.assign(r,e),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]})),t[n]}else Pn.error("There is no notification be found, please check the id")}return null}remove(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e));n>-1?(t.splice(n,1),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]}))):Pn.error("There is no notification be found, please check the id")}else Pn.error("You can't remove notification because there is no notifications in data.")}add(e){const{data:t=[]}=this.state;if(e&&e.length){e.forEach(r=>{r.id===void 0&&(r.id=fae()),r.status=f5.WaitRead});const n=[...t,...e];return this.setState({data:n}),e}return null}clear(){this.setState({data:[]})}reset(){this.setState({id:"",name:"",data:[],sortIndex:1,showNotifications:!1,actionBar:[],render:void 0})}};LS=zst([Gi(),Ust("design:paramtypes",[])],LS);var jst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Kst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let zO=class extends nl{constructor(){super(),this.getProblemsMarkers=e=>{let t=0,n=0,r=0;const o=s=>{s.forEach(a=>{switch(a.value.status){case Qh.Info:r+=1;break;case Qh.Error:n+=1;break;case Qh.Warning:t+=1;break}a.children&&a.children.length&&o(a.children)})};return o(e),{warnings:t,errors:n,infos:r}},this.state=je.resolve(w_e),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(Uo)}toggleProblems(){this.setState(Object.assign(Object.assign({},this.state),{show:!this.state.show}))}add(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const o=n.findIndex(di(r.id));o>-1?n.splice(o,1,r):n.push(r)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}update(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const o=n.findIndex(di(r.id));o>-1?n.splice(o,1,r):Pn.error(`Update problems failed, because there is no problem found via ${r.id}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}remove(e){const t=Array.isArray(e)?e:[e],{data:n=[]}=this.state;t.forEach(r=>{const o=n.findIndex(di(r));o>-1?n.splice(o,1):Pn.error(`Remove problems failed, because there is no problem found via ${r}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}reset(){const{builtInStatusProblems:e}=this.builtinService.getModules();this.setState(Object.assign(Object.assign({},this.state),{data:[]})),e&&this.updateStatus(e)}onSelect(e){this.subscribe(HO.onSelect,e)}updateStatusBar(){const{data:e=[]}=this.state,t=this.getProblemsMarkers(e),{builtInStatusProblems:n}=this.builtinService.getModules();n&&this.updateStatus(Object.assign(n,{data:t}))}updateStatus(e){this.statusBarService.update(e)}};zO=jst([Gi(),Kst("design:paramtypes",[])],zO);const Gst={LoadExtensionFail:"Load Extension failed",NotFoundActivateMethod:"Not found activate function, the extension must export an activate function as entry."};var qst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Yst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let UO=class{constructor(){this.extensions=[],this._isLoaded=!1,this.colorThemeService=je.resolve(aC),this.monacoService=je.resolve(gg),this.localeService=je.resolve(rf)}setLoaded(e){this._isLoaded=e!==void 0?e:!0}isLoaded(){return this._isLoaded}getExtension(e){return this.extensions.find(di(e))}reset(){this.extensions=[]}getAllExtensions(){return this.extensions.concat()}add(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=e.filter(n=>{const r=this.extensions.find(di(n.id));return r&&Pn.warn("Warning: Unable to load the existed Extension:"+n.id),!r});return t.length>0&&(this.extensions=this.extensions.concat(t)),t}load(e){try{const t=this.add(e);if(!t)return;this.activate(t)}catch(t){Pn.error(Gst.LoadExtensionFail,t)}}loadContributes(e){Object.keys(e).forEach(n=>{switch(n){case sS.Themes:{const r=e[n];return r?this.colorThemeService.addThemes(r):void 0}case sS.Languages:{const r=e[n];return r?this.localeService.addLocales(r):void 0}}})}registerAction(e){return rUe(e)}executeCommand(e,...t){this.monacoService.commandService.executeCommand(e,...t)}activate(e){if(e.length===0)return;const t=this;e==null||e.forEach((n,r)=>{!n||this.isInactive(n)||(n.activate&&n.activate(t),n.contributes&&this.loadContributes(n.contributes))})}dispose(e){var t;const n=this,r=this.extensions.findIndex(di(e));if(r>-1){const o=this.extensions[r];(t=o.dispose)===null||t===void 0||t.call(o,n),this.extensions.splice(r,1)}}disposeAll(){this.extensions.forEach(e=>{var t;(t=e.dispose)===null||t===void 0||t.call(e,this)}),this.reset()}inactive(e){this._inactive=e}isInactive(e){return this._inactive&&typeof this._inactive=="function"?this._inactive(e):!1}splitLanguagesExts(e){const t=[],n=[];return e.forEach(r=>{var o;!((o=r.contributes)===null||o===void 0)&&o.languages?t.push(r):n.push(r)}),[t,n]}};UO=qst([Gi(),Yst("design:paramtypes",[])],UO);var Zst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Xst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let v5=class extends ua{constructor(){super(),this.editorStates=new Map,this.onClickContextMenu=(e,t,n)=>{const r=t==null?void 0:t.id,o=n==null?void 0:n.id,{current:s}=this.editorService.getState(),a=s==null?void 0:s.id,{EDITOR_MENU_CLOSE:u,EDITOR_MENU_CLOSE_OTHERS:d,EDITOR_MENU_CLOSE_ALL:h,EDITOR_MENU_CLOSE_TO_RIGHT:f,EDITOR_MENU_CLOSE_TO_LEFT:p}=this.builtinService.getConstants();switch(r){case u:{this.onCloseTab(o,a);break}case d:{this.onCloseOther(n,a);break}case h:{this.onCloseAll(a);break}case f:{this.onCloseToRight(n,a);break}case p:{this.onCloseToLeft(n,a);break}default:this.emit(Gr.onActionsClick,r,s)}},this.onCloseAll=e=>{this.emit(Gr.OnCloseAll,e)},this.onCloseTab=(e,t)=>{e&&t&&this.emit(Gr.OnCloseTab,e,t)},this.onCloseToRight=(e,t)=>{this.emit(Gr.OnCloseToRight,e,t)},this.onCloseToLeft=(e,t)=>{this.emit(Gr.OnCloseToLeft,e,t)},this.onCloseOther=(e,t)=>{this.emit(Gr.OnCloseOther,e,t)},this.onMoveTab=(e,t)=>{this.editorService.updateGroup(t,{data:e}),this.emit(Gr.OnMoveTab,e,t)},this.onSelectTab=(e,t)=>{this.editorService.setActive(t,e),this.emit(Gr.OnSelectTab,e,t)},this.onUpdateEditorIns=(e,t)=>{var n,r;if(!e)return;this.initEditorEvents(e,t),this.editorService.updateGroup(t,{editorInstance:e}),this.editorService.updateCurrentGroup({editorInstance:e});const{current:o}=this.editorService.getState(),s=o==null?void 0:o.tab;this.openTab(e,s.id.toString(),(n=s==null?void 0:s.data)===null||n===void 0?void 0:n.value,(r=s==null?void 0:s.data)===null||r===void 0?void 0:r.language),this.onEditorInstanceMount(e)},this.onClickActions=e=>{const{current:t}=this.editorService.getState();if(!t)return;const{EDITOR_MENU_CLOSE_ALL:n,EDITOR_MENU_SHOW_OPENEDITORS:r,EDITOR_MENU_SPILIT:o}=this.builtinService.getConstants();switch(e.id){case n:{this.onCloseAll(t.id);break}case r:break;case o:{this.editorService.cloneGroup();const{groupSplitPos:s}=this.layoutService.getState();this.layoutService.setGroupSplitSize(new Array(s.length+1).fill("auto")),this.emit(Gr.OnSplitEditorRight);break}default:this.emit(Gr.onActionsClick,e.id,t)}},this.onPaneSizeChange=e=>{this.layoutService.setGroupSplitSize(e)},this.getViewState=e=>this.editorStates.get(e),this.onChangeEditorProps=(e,t)=>{const{path:n,options:r}=t;if((e==null?void 0:e.path)!==n){const{current:o}=this.editorService.getState(),s=o==null?void 0:o.editorInstance;this.editorStates.set(e.path,s==null?void 0:s.saveViewState()),this.openTab(s,n,r==null?void 0:r.value,r==null?void 0:r.language)}},this.editorService=je.resolve(Il),this.layoutService=je.resolve(Wu),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(Uo)}initView(){const{builtInEditorInitialActions:e,builtInEditorInitialMenu:t,BuiltInEditorOptions:n}=this.builtinService.getModules();if(!this.editorService.getDefaultActions().length){const s=e||[];this.editorService.setDefaultActions(s)}if(!this.editorService.getDefaultMenus().length){const s=t||[];this.editorService.setDefaultMenus(s)}this.editorService.setState({editorOptions:n||{}})}open(e,t){this.editorService.open(e,t)}initEditorEvents(e,t){e&&(e.onDidChangeModelContent(n=>{var r,o,s,a;const{current:u}=this.editorService.getState(),d=u==null?void 0:u.tab;if(!d)return;const h=(o=(r=u.editorInstance)===null||r===void 0?void 0:r.getModel())===null||o===void 0?void 0:o.uri,f=(s=e==null?void 0:e.getModel())===null||s===void 0?void 0:s.uri;if((h==null?void 0:h.path)!==(f==null?void 0:f.path))return;const p=(a=e.getModel())===null||a===void 0?void 0:a.getValue(),m=Object.assign(Object.assign({},d),{data:Object.assign(Object.assign({},d.data),{value:p})});this.editorService.updateTab(m,t),this.updateStatusBar(e),this.emit(Gr.OnUpdateTab,m)}),e.onDidFocusEditorText(()=>{const n=this.editorService.getGroupById(t);n!=null&&n.tab.id&&(this.editorService.setActive(t,n.tab.id),this.updateEditorLineColumnInfo(e))}),e.onDidChangeCursorSelection(()=>{this.updateEditorLineColumnInfo(e)}),e.onDidBlurEditorText(()=>{var n;const{current:r}=this.editorService.getState(),o=r==null?void 0:r.tab;if(o!=null&&o.id){const s=e==null?void 0:e.saveViewState();this.editorStates.set((n=o.id)===null||n===void 0?void 0:n.toString(),s)}}))}openTab(e,t,n,r){let o=sa.getModel(u0.parse(t));o||(o=sa.createModel(n,r,u0.parse(t))),e.setModel(o);const s=this.editorStates.get(t);s&&e.restoreViewState(s),e==null||e.focus()}updateStatusBar(e){}updateEditorLineColumnInfo(e){if(e){const t=e.getPosition(),{STATUS_EDITOR_INFO:n}=this.builtinService.getModules();n&&this.statusBarService.update(Object.assign(n,{data:{ln:t==null?void 0:t.lineNumber,col:t==null?void 0:t.column}}))}}onEditorInstanceMount(e){this.emit(Gr.onEditorInstanceMount,e)}};v5=Zst([Gi(),Xst("design:paramtypes",[])],v5);const Q0=Bn("editor"),Qst=gt(Q0,"group"),Jst=gt(Q0,"group-container"),eat=gt(Q0,"group-header"),tat=gt(Q0,"group-tabs"),nat=gt(Q0,"group-actions"),pj=gt(Q0,"group-actions-item"),iat=_n(pj,"disabled"),rat=gt(Q0,"group-breadcrumb"),Nre=6;function oat(i){const e=[],t=[];return i.forEach(n=>{n.place==="outer"?e.push(n):t.push(n)}),e.length>Nre&&e.splice(0,Nre-e.length),[e,t]}function sat(i){const{actions:e=[],isActiveGroup:t,onClickActions:n}=i,[r,o]=oat(e),s=he.useRef(null),a=(h,f)=>{var p;n(f),(p=s.current)===null||p===void 0||p.dispose()},u=h=>{n(h)},d=o.length>0?re.createElement(Xa,{style:{width:200},data:o,onClick:a}):re.createElement("span",{style:{padding:15,fontSize:14}},"No more actions");return re.createElement("div",{className:nat},t&&r.map(h=>re.createElement(PK,{key:h.id,overlay:h.title},re.createElement("div",{onClick:()=>!h.disabled&&u(h),className:mn(pj,h.disabled&&iat)},h.icon?typeof h.icon=="string"?re.createElement(hr,{type:h.icon}):h.icon:h.name))),!!o.length&&re.createElement(UK,{ref:s,placement:"bottom",className:pj,trigger:"click",title:"More Actions...",overlay:d},re.createElement(hr,{type:"ellipsis"})))}const aat=he.memo(sat);function lat(i){const{breadcrumbs:e=[]}=i;return re.createElement("div",{className:rat},re.createElement(lle,{role:"breadcrumb",routes:e}))}const uat=he.memo(lat);function O_e(i){var e,t;const{id:n,data:r,tab:o,currentGroup:s,group:a,actions:u=[],menu:d=[],onMoveTab:h,onCloseTab:f,onClickContextMenu:p,onChangeEditorProps:m,onSelectTab:v,onClickActions:b,editorOptions:E,onUpdateEditorIns:S}=i,w=n===(s==null?void 0:s.id),L=AS(),A=(N,H)=>{const M=(R,q)=>{p==null||p(R,q,H),L.hide()};L==null||L.show(cF(N),()=>re.createElement(Xa,{data:d,onClick:M}))};return he.useEffect(()=>function(){L==null||L.dispose()}),re.createElement("div",{className:Qst},re.createElement("div",{className:eat},re.createElement("div",{className:tat},re.createElement(_Y,{editable:!0,type:"card",data:r,onMoveTab:h,onSelectTab:v,onContextMenu:A,activeTab:w?o==null?void 0:o.id:"",onCloseTab:f})),re.createElement(aat,{isActiveGroup:w,actions:u,menu:d,onClickActions:b})),re.createElement(uat,{breadcrumbs:(o==null?void 0:o.breadcrumb)||[]}),re.createElement("div",{className:Jst},o!=null&&o.renderPane?typeof o.renderPane=="function"?o.renderPane(Object.assign({},o.data),o,a):o.renderPane:re.createElement(uY,{options:Object.assign(Object.assign({},E),{value:(e=o==null?void 0:o.data)===null||e===void 0?void 0:e.value,language:(t=o==null?void 0:o.data)===null||t===void 0?void 0:t.language,automaticLayout:!0}),path:o==null?void 0:o.id.toString(),editorInstanceRef:N=>{S==null||S(N,n)},onChangeEditorProps:(N,H)=>{m==null||m(N,H)}})))}const Are=he.memo(O_e);function cat({className:i}){return re.createElement("span",{style:{fontSize:0}},re.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 120 120",className:i},re.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",opacity:"0.48"},re.createElement("g",{fill:"#A2A2A2",transform:"translate(-660 -152)"},re.createElement("g",{transform:"translate(660 152)"},re.createElement("path",{d:"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z"}))))))}const Rh={_isMac:sae.isMacOs(),queryGlobalKeybinding:i=>{const n=Os.getDefaultKeybindings().filter(r=>!r.when).filter(r=>r.command===i);return n.length?n[n.length-1].keybinding:null},convertSimpleKeybindingToString:(i=[])=>i.map(e=>{const t=[];return e.altKey&&t.push(Rh._isMac?"⌥":"Alt"),e.ctrlKey&&t.push(Rh._isMac?"⌃":"Ctrl"),e.metaKey&&t.push(Rh._isMac?"⌘":"Meta"),e.shiftKey&&t.push(Rh._isMac?"⇧":"Shift"),e.keyCode&&t.push(S_e[e.keyCode]||""),t.join(Rh._isMac?"":"+")}).join(" ")},dat=()=>[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}],hat=()=>{const[i,e]=he.useState([]);return he.useEffect(()=>{const t=dat().map(n=>{const r=Rh.queryGlobalKeybinding(n.id);if(r!=null&&r.length){const o=Rh.convertSimpleKeybindingToString(r);return Object.assign(Object.assign({},n),{keybindings:o})}return null}).filter(Boolean);e(t)},[]),i};function fat(){const i=hat();return re.createElement("div",{className:Bn("welcome")},re.createElement(cat,{className:"logo"}),re.createElement("h1",{className:"title"},"Molecule"),re.createElement("div",{className:"keybindings"},re.createElement("ul",null,i.map(e=>re.createElement("li",{className:"keys",key:e.id},re.createElement("span",null,e.name),re.createElement("span",null,e.keybindings.split("").join(" ")))))))}function SZ(i){const{onClickContextMenu:e,onCloseTab:t,onMoveTab:n,onSelectTab:r,onChangeEditorProps:o,onClickActions:s,onUpdateEditorIns:a,onPaneSizeChange:u,editor:d,layout:h}=i,{groups:f=[],current:p,entry:m=re.createElement(fat,null),editorOptions:v}=d||{},{groupSplitPos:b,editorGroupDirection:E}=h||{},S=L=>({onMoveTab:A=>n==null?void 0:n(A,L),onCloseTab:A=>t==null?void 0:t(A,L),onSelectTab:A=>r==null?void 0:r(A,L),onClickActions:s,onUpdateEditorIns:a,onChangeEditorProps:o,onClickContextMenu:e}),w=()=>f.length===1?re.createElement(Are,Object.assign({editorOptions:v,currentGroup:p,group:f[0]},f[0],S(f[0].id))):f.length>1?re.createElement(_A,{sizes:b,split:E,onChange:u},f.map((L,A)=>re.createElement(gp,{key:`group-${A}${L.id}`,minSize:"220px"},re.createElement(Are,Object.assign({editorOptions:v,currentGroup:p,group:L},L,S(L.id)))))):null;return re.createElement("div",{className:Q0},p?w():m)}he.memo(SZ);function R_e(i){const{data:e={ln:0,col:0}}=i;return re.createElement("span",null,`Ln ${e.ln}, Col ${e.col}`)}he.memo(R_e);const gat=je.resolve(Il),pat=je.resolve(Wu),mat=je.resolve(v5),_at=il({editor:gat,layout:pat},SZ,mat),dE=Bn("sidebar"),vat=gt(dE,"pane"),bat=gt(dE,"header"),Cat=gt(dE,"title"),yat=gt(dE,"content"),wat=gt(dE,"toolbar"),M_e=he.memo(function(e){return re.createElement("header",{className:bat},re.createElement("div",{className:Cat},re.createElement("h2",null,e.title)),re.createElement("div",{className:wat},e.toolbar||null))});function P_e(i){return re.createElement("div",{className:yat},i.children)}function F_e(i){const{panes:e=[],current:t}=i,n=e==null?void 0:e.map(r=>re.createElement("div",{key:r.id,"data-id":r.id,style:{visibility:r.id===t?"visible":"hidden",zIndex:r.id===t?1:-1},className:vat},r.render?r.render():null));return re.createElement("div",{className:dE},n)}var Sat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Eat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let b5=class extends ua{constructor(){super(),this.onClick=e=>{console.log("onClick:",this.sidebarService)},this.sidebarService=je.resolve(pg)}initView(){}};b5=Sat([Gi(),Eat("design:paramtypes",[])],b5);const Lat=je.resolve(pg),xat=je.resolve(b5),Dat=il(Lat,F_e,xat);function Tat({className:i}){return re.createElement("img",{className:i,src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA
B3RJTUUH5QwPAyYJr4pYHwAAF6hJREFUeNrtnXm0VMW1xn/79L19GhUTnBAxGNfTuKKJeSsOaBxw
QF5QURzRTODwUIw4RI1RHJ5RUROcgkHFRDEaNUEBjaISUZzBDPqSOORFo0EJkmeMaIQe7qn9/uju
03WGvn243O7Tr8Neq1f3Pd236qv9naratfeuOqKqrJPOFSdtAOukubKO4A6XdQR3uKwjuMNlHcEd
Ll1pA2iFyLOl8XjmXJAtgGfpzp6uu/N62rha0vZOXybJs8VxeHqPf6Hc3LfJuZ/T4XyYNr5mS+cP
0UZPBcrEGsAoKJ9idfGQtKG1QjqfYJWNCQxSUiYa3SRtaK2QzicYfRyjZVIVUAXEoM4TaSNrhXQ+
wca9AHGWoFqZfx0P0e/ovt3/nTa0VkjHG1kAAhke7xkBOpQus1j3dv+UNqaWtf1fgeB/Zen8Ifpf
XNYR3OHSlp4sgS6eL56H4WugWXDmMbD7At2Rj1PH9mDpi3jmKpQdUX0NuqboYV3PpI2rLt52nIPl
+dI1GHOmv35VQGSu7pk9PFVcv8hvjef8DjUb1NbWThFlFz0i+7s0sdWTthui5Td0Y/SUALkKeHqY
PMuwVMEZTkB1A1QAARUwJgs6KWW11ZW2Ixj4BEbdgGvRl9JmqSIzMri8nrZeZaIHp4qrF2k7gnUn
3kPkldoQKFUP1N8pdf8hXXSyqNx7odaLAaOL0sVVX9qOYABUjgP+VvM+yT9BJug+5FPFdVj2LkTu
8l2e5cDFfDZzZ6StsnrSlkYWgLzAxqwqHoAjLt3dj+nuLEsbk49tTs8eeLojGXlND+9qa5922xK8
TvpH+rQOliU9+6LekagMR3UIkAf+gsgCNHu3fom/pN2w/28id7EV+eKxqI5C2ArVHCrLUZageq9O
zPVppFijHiyLi59F9SaUvev/SIqITGeT7im6DYW0FdfuIg/j8m7hcpTJGM0CBA3Mih0iPIXjnKwn
Zl9do/KTEiyLe0ai5j5UN0xY9PMMzB6kn+cfaSuxXUXuYhD5/EMouwfIrL6q4vsE5EPgCJ3kPpa4
jiQEy5Li9ngsBh24Ri1QHmMP98sKXtrKbDeR2WT4qPAIysjaaoFeyKXq0fsIR3bTk7KvJKkn2TLJ
cOsakVu7C0fyTOnkdFXZpvJR4WSMjqwstcpSXhLWPvtZKNbL6EA8c2vSahr2YHmucBDwYGLgRoMg
lRXs7W6p0JOmPmV+4TMUdQvIvaRj+SBVLIvo4vX8MpSaZ85U3uPm3+p1tXUrB+tk96FGdTXuwSJH
J0YevgPLMpine0akoUgAeZ4Bcn9xLgX+iMoTmMI7Mqf09bTwAPBGfkSZ3EoCYJjcck+NmY+l1rPR
RLwkGKL1S71/Ta3SKtDw0ILpvYxmyor8hRgda3me1kf1RzK38JnUMOHsUeuRFQkPxeFrhuDcbCSR
ThMQLFvU/SrOMAiAqN6FWr+MZovKwTV81WHPZOlxRqWGyeiQgK7qkRqePW2ihUQ6TWJklaJKC7/U
AqDWMFIZrr2YMlomsroW9am8G0C9VelhohQY5ewhOtxRAsaWredkOm1MsPJOnesWKInOE0HL8B3S
EpXbI3Oa8He6c8kNx/4Wr6KPOHLjXtXvsfXM20mqauyqdGQhRncIgqj2CFuR9nW7pyg4zsJG1chC
BtOTH4ORL6C6GY58iJE3cJivX16LbInDu29kjm6Ep+cAGwK/x8n8px7G3/papMxmAKsKB6DsCToU
HA8174A8zo7uk7pTg96lstDXWUB/1ueITkPXRB5PhLXxMqm0C5gX/DstAiB0LXJdXtX9s9vXLX8h
g+kpXIrK8ahmov+vIM5zOHKWju5e3GdSQHiYgTq67xvOZBFdLC2chtEpKBvFLmWQZaAX6om523ot
68bCK6h+ti6xcXqwVyiZzK56evevGmJO5Ml6tngvqkckAhC+0zJyqO7rPhBb7oLSTnje/SBDI72/
FgsuF6aOh+iZOsad3leC1kZkNhvxcWE2sJ+fZVLvpi7//TMG5Y7To1gdW96NhUPw9P7a7+voL3Ct
SrLcp99yj0yCO5knK5c9GeXNQKMijQsBKbvVZtQl91G2wegvQYYGFSR2QyrlCajJYPiBzMuf0E+c
JRaZTZaP8w+gGiLXsjeiRtE43i/8RPxGBEUnuQ+AzKj9v1WW0WD5VK8JqLyJuom9g4kI1p14jy53
FCqv1RqgITA2OAFhJhn39FiFgaCFn6E6qLw+tRrjN8SqI3AnOzPkwcK2LeQXVuX/C2UP/6azbZHA
jUlYF0dyc+GkuuV+zj0dZWZ0RBT7RqnpR+Q1HEbpWbyXFHrilB3dnddZP7sbcC0ixVqPDTVM5C0c
+Yru756k+9RxTz5SHIfhi8G1abhCaoT7v9FyFmNJLmsSlRGROxmCyhk+FvuGDrhkbc+Tdd3T/5LZ
DIjV6T706Gm5kxDnK6i8FV37avXmLoJcywbubnqmu0YnE/Qpo0OeZlN6SmPADEcZArIaw1JEF/BJ
d1EjK1IeLszH6Oi6c27AoLB6b+1zkW53Ez2Ej5rAaRDrbYXTUL2+fEOH5t7asqsXKxhwnMN0UnZe
r/XMpJvVhX1QRqE6DGQAhuWILqE79wudzP/2CX+rU3YEHOYXV6GV1NiwdegrpqpMS7FIrUc7HKyH
N3a2rzXeHxceQHWMf6FuMCB0AwTUKj/Ub7qntlTRFWn91pX5bIYxbnzvtRQX6bWVH0iFZM18qiV4
lU/5dQbwVWwHv/dqtAdXPwutwRojaexNcmsGU9xwbCkoYFyFhnFj3JagFdyA5RzGaGL+JzpUtwZr
jLQ+L/rTLAfRSHqK7/0KXTdaM7CC7tHlLcGrLK+bRhPAaeEN/L+CaRHWGGk5wbo9RVRfjK4hQ+tf
u2dX9wHZyyfJ9tmrtYaIny+/Vf+EiFcvzl/sBwgEpFJGCpLOzgaR2bE91Y8nx/Ru/yUgzgt6FEtb
glUz90ZjsmESiYmB+5+LdMU7e1qi6j4tk54o7kCRI1CGA+W8aGUpKo+i3fP0oN4zKeUBBmIKb6C6
acSYguBwTVWhtkEmo/VY95GGOO9gfSiOQTkQNVujMhB4F3gJx5mj3+h+IVF7by7MxejYMrbKxUR+
eAVxfqCnxzt8AnXcyCA+zo/F8B8YhiGSQ3U54iwB7tNzsy+vMVGsaV704wylp3gdxpT9oBqzVoWV
CJdzoHu1xpsg5bLmFceiOgdFYq1p3w9NmeiqJSvOLD0me1xDrHfkT8BwGcjmkRum5pR5DEcm64Ts
a72WdRufopD/FYbBERKr+OLW7cgfWc8drhNZWbdscPje6rNQZwroJ+pHj5x7UfcMnbJmW3iS50X/
srQzxvwC2Dxyl4bJKAN8CMc9Wg+mbmBd5pVOxTPXo+oEFFRdU0rIZSnyIBn3CD2KYt0yZ5MhX5yJ
McdHco2rKg2OBh/iME5P6H1EkBmlXVDvIWDT2F4c/lvlTVxG6Sn1PU8yk/X4R/7noAfFLwttL6GC
yrs4mTE6pfvXSQlONAfL42yFZ+ajbB5w11X9xrYfubZmPQhTuL2esx1Ax3bfAJkDEXmjljMlwSG6
3GtXIc5FHOMe2hu5AKwqTMMzx5c3Z8eMIQHsALohntwnM0tf7K1YPaX7V2TYFZXHgj7yarnW30Zn
k3V36ZVcED5YfTvQC7lKwOEDm2N65svl+a2SEpwsXPho4TGM7h/vcap8sHudnaXgOBP0kO7bey3/
N3TzVnEcno5F+ALKYAwrEf0zxnkIN3uHHk7DpYb8JL8vKo/HDvW9OSLKo8OrDHI/r0c1TtKX6T0j
wBuHslcl38wDeQflCXB+qmd0/7ZhGd8rjUe9WY3jwSFHjwqILNSL3JH9QrA82rMvxitnD/Q2V9aL
54osZay7dW/zcX+J3J5/DhPaBlKVyHKM4PcGIDNBJ/V+M/YLTnC4Kv8mRof5V6pTE2Ed19GtI/vp
RY03pCXIyfKOKb9Xe2mlUvsVXs8Gh+5hzO1petqs3MGwMrkEh85IGM8mN/ydOabZOAG4qudLGIbV
1vc2BolOffY1/10SYU1AsIyoVUjQu2Ssz9U7KxLeA9Ts3bCetRWvNCJ2PRoOCBDzXS3nuPk4AejZ
OzCPB262kC7DS8jadyOS1NSYYKNDgxVWAdgVYvVsQte1UkazRbcIKoGg18nHQmjEsf/W9eRGBjUf
qgyNEBZ2fdYl3Cc7kU4TBBsqfuOAgVVnfghf80MtLRCvqgzr3c/nIp5QYt4HtACwMcHpTHrRX6Qt
/veJcCbJi14WcPb7xkDM3Gsrzx5iWpEX7YQcAPFDcO/kIqt0Qgs2pklmWdSZYc/HEj/1aYD8RA6P
BJvP9MlajjMEh5SY+QLrd7U8qiebrjSyT9bvqRJ/3X6V91Ytaj5OwHiLIn6DcCeq6q/mOArrP5FO
E8zBmbuDBYdMdhPTo30lKiBvcWRX0yM/ehxvozwTsErjLOe4nXx+IXJ3s3ECMGXAYoy8FdCfWvaL
f9NVdRzSf7knJ8LakGAd0/UkyoKa0mIMGAiZ8RZIlQtasQYGINM1pVZ/TMQnzpip4XyZLbItIVjB
IHph1Nq3AyzVH4d7N4As0Km5furBALgnIqyIzAcVtCEXJTXjwblHx2V/2gqlAegJXU8h8n1fMZZG
fdKrf/vXFVQ+xnG+msSL1W9YL8zdCdwT76K0e3ZFn7U88RU45sSk9STLiz6UtxFnNKrLAtZddF6o
gROZh2SPb5XCfDnJ/Q4qN9VfClX+9m0K5wMcxurkFJ7hsGHueIR50aWSNaUEDFZdRlfXaL1sQKKN
Z7Cm4cI5DEHz00COjQ/zCSDvY/RSjnWvt8yulovcVPo6nncFSm3nhK208q/mI5yhp6X3DAcB4aLC
6WAuRGWjWP8zjoLejeTO1ssb++QD5fcp4D+7sB0ih6M6HGQIalajLEWcBQzMPrA2G7z6VXmzyPHP
4kGgo4GtMWYgOCsw+iKZzFyd3P1i2hh9rJewIV7+EAyjUIaBlvOiySxB9D6d6v5Pn8ptl6MMBRxm
lU5GzWiMfojDj/W4XKItkqlhnk2WP60+E5UR4KxAZLqe3ziS1FKMbUPwbflZGMYDVKJQisqxemL2
Z2lji8ULwuX5BcBIa37vIdO1v07peiptfFVpi+OE5c7CdhjGBxPaVDA6NW1sdeXKwv745PoTfBem
57tpQ7OlLQimxLY16zZgQX5aFrXng0PoYduAO7HmB2jtzscG0h4EG/f3qJjIEkZ4ue4OxbQlk3kp
EM+F6rKr9cutXqQtCNYT+AuOTA16xySPo2ekja0u5vO6nke5PeC+FVaCfDttbLb0bZk0hyGsLhyK
VM6LVlYjLEVZwMbuYzq6b8cIyy2F0cDoyqmqd+rE3tNZG5Y3mwxv5/cGORDD1pTP21yByIuoztOz
c2+utQIvLR6N8UZAZgVkb9WL6VPkTKbjsqwwEs+MQpxhGAaALgdZguvev6brX7/cNXJ03MUgKFyK
YSJoNxD1ZAnvQOYC/Ubzc5t6xXp94WAM0zC6nY8zGGBQ4C66c+fqmek+LkDOLY1Hey5D2TKI1Xdf
lhCZSda9UK9Ys+OZk+dFzy5sR5EHUd2mcsXyYNl/V9+dWXwhO7HhkULNUNh1+al4el4kMR/iD0vN
ZMbqt/t+gk+fcc6km9fzM1GdEJ88QfDGFHkdlYP1OvePSetIlhc9l80o6IIyuXGbxgjmD5WzPibw
u8INLVfatcUL8PS8YAZKTMZEbXkzmB7zsFyRwtmVr+dvQJkQrz9Lz+LreBvQBXIOiZ8flczIWl24
GWRYMOSmQWJtZVL53tOJ8qNiyx5HJ9eWdkX1u4FdiDauyOk1foz1kyh39Zak3+9Yzy0ejjIxEIEL
hGMtvdpBf0+HUVh9c9J6GhIs95SG41VOa62XIWFnfNhKLGt3assU55nL8YwEwoP22ZmR+KvVBmN2
4vJiorOn1lYEBGOmBiJwsflkMXgBVMbKqaXhSepq3INL5quRCm0S/cfPhdaDtS0i23FLaeemK+06
hgD7B0aQKu6AnVD9Ljaf+6vNxgnA2aWdUd2uVzyBeDAx8feeRFiTDNH7R3tmaAisKrReDNbofk1X
mlfcB1PpveGztnx8oYSEiEJbgBNAdL/gvEt0+ohkoGgoL04SYU1C8JbR3hvTYyPgqH0vumXTleZp
DadtMduZin5GCgStVh/rQJlOwqfKrIUYb8uoB8zCFNFlzHZSkh3s0tjPa6QLNZZCCPXeagYHUfO+
+m5a4E92pAsvfPNZRPsn5YQ2cgEBf/L7LcCq0hWcQuxRxv+RpUPbWPR1mkmklsZgdFlwuJDgHRYM
DoReUjXz/9p0pZlqHb1Y0IEebpHrL0ecvF7M+03Hqvw1urys4vJ/Q+yI6OuURDpNcqT/s7UKbYWE
nRzE9N6qoWWa/wh0Mc9E9vIEjh60FGq/7JRfT59rOk4Ah2cCy8sw2ZEVSZz+eTZZVY3E6M/jc42t
90iqbOC377J97ulm60zPcd9And8G15JWjwjs6wlkKdrTTWuSCzbMPQ28G2us1tuDbRO/Blgb50Uf
7z4MlTs7PGyEt4TEARO5pGUhP+HCiNWsElzGqf2d2obYn8m4s1oBUy+mB5xLAj00fM5WnLFaI/c5
vanxITSQ1JPlOCdgZGVk2IidIyywIo+wiXtLK5QGoOe585HMrYGh18epoffA90UM4/XiBsdD9Kfs
6d6COI/EEhjeJqD2NVkJTuIzs5PlRU/IvoboWMT5IFBh2Btkf4an6HKPaWUyOQDbZichzpyoW9Uy
Dv3T8wCVPMZ8TS/LNd9OsHV6FB7ruceAPBXrHbQ7Sk2n5Rzum5OHUZOfF31ibhFduqv/QInAlzYQ
yaNcSXduZG/HBzVRcUUucI9E5ByQlYFdeYEN6oDya7oye+llA2a3GieAXslKdsyNBLkSU3l8fcCG
oEauyEIcZ1e9MbdoTeroW8B/Zs+eGO9I0OGYynnRsBRYgOPeoyf3Lb4q1xQ+Q/lpnB+yfu4hnbR2
j6aVK9iYUuFoDAeiVsBfeRGROVziLrAnnD7V8e3Sv2PMXhizgk8MeFAvpk/PY5JJDMWsPgZkFDAM
rQT8HZagcq/e3LcRpn3SZq/JH4+RmzDaXRlWl9OVGaVnZ/+QNra6mM/KT8FwKZVnGKD8CSe3r16T
bgKBLW2RkyXT2AyPGyxyARmCZ25MG1tdzOcUP4fyXcDyf+u2mPz308ZmS1sQjBZ2Ru3DE6qOB3Zr
27RZo3ug6sRkX+yVNjRb2oPgjLM8egIdILzXtmmznnWOdCDwoqmdDR0n7UHwt7pfQpyFUR+3XJ02
tLryb+6j4LwcE89tK8xtQbCCIu5hoNNBXgf9LY5zCue5baWsAObJFOh29wOZBfImqotRxun0AW21
l6ptrOimNfD84vY4Wj4v2shAVFaAvsiA3Hy9ON1Hvbek/Z1KsFxQ2g31pmHYI/asR6SAyA9Zz720
k4nuSIJlSuF0jF4NlaB4vfztssP8DRxnjF6VfTVt3E3RRacRLOcXJqFmRmwudN1jhWU5mtulnRwU
/SVtYWT1l8hFxR2AH9QNtUXirn48dgiavzNt/M2QjiKYHm8qxnRFemogwGBnT9hpSLqPnFU4MO0m
9Ld0DMFyPhtj5KDIDobwoZ7ho3mr1xTo0fFpt6O/pT3dgH0RLe6HaiY454bi1ZGEvIjxdUDazehv
6ZgeDN6w4A6Z8AGeWHlZ1vXq53LPHiSXsEHaLelP6RyCjeSC/mxrKA4My4Rys6xrRuEjcmk3pT+l
g4boyg54tQ0su7fGDdehIRpKTOPvaTelP6WDerCzOJAnFt4fHH7uYHiLSDmb8YW1zfBoN+kYgnVa
9hWQVwPDsp+0Zi+TQmmpwSzRe9NuR39LxxBcFr0ksj85PN/aa+Gg/JVN3Zlpt6C/pbMIvnrAzxHm
RreQQuz+5loqrUGdiX1NmGtn6SiCFZTMgK+jUj4N3e61sQn7CioeKt/UGe5DaeNvhnQUwQD6fT5m
h9wB4EwDqexUsHsv9l6kP5OR0TrDvSlt3M2SjosmBRo3Ob81MB6jBwJbgwxEWYHqizgyh81y97R0
u0oaOuhkgtdJBw7R6yQo6wjucFlHcIfLOoI7XNYR3OHyf7iqrvn/gHCwAAAAJXRFWHRkYXRlOmNy
ZWF0ZQAyMDIxLTEyLTE0VDE5OjM4OjA5KzA4OjAwmXMYFgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy
MS0xMi0xNFQxOTozODowOSswODowMOguoKoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAA
ABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADI2UxuiZQAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24A
MTIwdAQi7wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMTIw6QvDmQAAACB0RVh0c29mdHdh
cmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBh
Z2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMjBNp8myAAAAF3RFWHRUaHVt
Yjo6SW1hZ2U6OldpZHRoADEyMN5Wme8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/
slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYzOTQ4MTg4ObVTMPUAAAASdEVYdFRodW1iOjpTaXpl
ADc2MjBCQiI6F3sAAABGdEVYdFRodW1iOjpVUkkAZmlsZTovLy9hcHAvdG1wL2ltYWdlbGMvaW1n
dmlldzJfOV8xNjM4ODQ4MDI1NDI2MTE4Ml8zOF9bMF0TNSl1AAAAAElFTkSuQmCC`})}const Iat=Bn("menuBar"),O4=_n(Iat,"horizontal"),B_e=gt(O4,"logo"),kat=gt(B_e,"content");function Nat(i){const{data:e,onClick:t,logo:n}=i,r=he.useRef(null),[o,s]=he.useState(!1),a=h=>{var f;const m=h.target.closest("li"),v=(f=m==null?void 0:m.parentElement)===null||f===void 0?void 0:f.parentElement;return!!v&&v.classList.contains(O4)};he.useEffect(()=>{const h=document.getElementsByClassName(O4)[0],f=m=>{var v,b;const E=a(m),S=m.target;if(E)o&&((b=(v=r.current)===null||v===void 0?void 0:v.dispose)===null||b===void 0||b.call(v)),setTimeout(()=>s(!o));else{const w=S.closest("li"),L=w&&h.contains(w)&&!(w!=null&&w.dataset.submenu);(!w||L)&&s(!1)}},p=m=>{if(!o)return;const v=m.target;h.contains(v)||s(!1)};return document.addEventListener("click",p),h==null||h.addEventListener("click",f),()=>{document.removeEventListener("click",p),h==null||h.removeEventListener("click",f)}},[o]);const u=o?"hover":"click",d=(h,f)=>{t==null||t(h,f),r.current.dispose()};return re.createElement("div",{className:O4},re.createElement("div",{className:B_e},n||re.createElement(Tat,{className:kat})),re.createElement(Xa,{ref:r,role:"menu",mode:p0.Horizontal,trigger:u,onClick:d,style:{width:"100%"},data:e}))}const W_e=Bn("menuBar"),Aat=gt(W_e,"action");function V_e(i){const{data:e,mode:t=qa.vertical,onClick:n,updateFocusinEle:r,logo:o}=i,s=he.useRef(null),a=(f=[])=>{const p=f.concat(),m=[...p];for(;m.length;){const v=m.pop();if(v)if(v!=null&&v.data)m.push(...v.data);else{const b=Rh.queryGlobalKeybinding(v.id)||[];b.length&&(v.keybinding=Rh.convertSimpleKeybindingToString(b))}}return p},u=(f,p)=>{n==null||n(f,p),s.current.dispose()},d=re.createElement(Xa,{role:"menu",onClick:u,style:{width:200},data:a(e)}),h=he.useCallback(f=>{r==null||r(f.target)},[]);return he.useEffect(()=>(document.body.addEventListener("focusin",h),()=>{document.body.removeEventListener("focusin",h)}),[]),t===qa.horizontal?re.createElement(Nat,{data:a(e),onClick:n,logo:o}):re.createElement("div",{className:W_e},re.createElement(UK,{ref:s,trigger:"click",className:Aat,placement:"right",overlay:d},re.createElement(hr,{type:"menu"})))}class Vh extends rd{constructor(){super({id:Vh.ID,label:Vh.LABEL,title:Vh.LABEL,category:Qfe.View,alias:"Toggle Side Bar",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(tl.CtrlCmd|an.KeyB)}}),this.layoutService=je.resolve(Wu),this.activityBarService=je.resolve(mg),this.menuBarService=je.resolve(P0),this.sideBarService=je.resolve(pg)}run(e,...t){const n=t[0],{selected:r}=this.activityBarService.getState(),o=this.layoutService.toggleSidebarVisibility(),s=n||this._preActivityBar;this.activityBarService.setActive(o?void 0:s),this.sideBarService.setActive(o?void 0:s),this.menuBarService.update(Vh.ID,{icon:o?"":"check"}),o&&(this._preActivityBar=r)}}Vh.ID=zR;Vh.LABEL=ft("menu.showSideBar.label","Toggle Side Bar Visibility");class Hh extends rd{constructor(){super({id:Hh.ID,label:Hh.LABEL,title:Hh.LABEL,category:Qfe.View,alias:"Toggle Panel",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(tl.CtrlCmd|an.KeyJ)}}),this.layoutService=je.resolve(Wu),this.menuBarService=je.resolve(P0)}run(e){const t=this.layoutService.togglePanelVisibility();this.menuBarService.update(Hh.ID,{icon:t?"":"check"})}}Hh.ID=Ke.MENU_VIEW_PANEL;Hh.LABEL=ft("menu.showPanel.title","Toggle Panel");var Oat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Rat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let xS=class extends ua{constructor(){super(),this._focusinEle=null,this._automation={},this.updateFocusinEle=e=>{(e==null?void 0:e.id)!=vZ&&(this._focusinEle=e)},this.onClick=(e,t)=>{var n,r;const o=t.id||"";this.emit(uC.onSelect,o),(r=(n=this._automation)[o])===null||r===void 0||r.call(n),this.updateActivityBarContextMenu(o)},this.createFile=()=>{const{ACTION_QUICK_CREATE_FILE:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.undo=()=>{const{ACTION_QUICK_UNDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.redo=()=>{const{ACTION_QUICK_REDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.gotoQuickCommand=()=>{const{ACTION_QUICK_COMMAND:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateActivityBar=()=>{const e=this.layoutService.toggleActivityBarVisibility(),{MENU_VIEW_ACTIVITYBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.selectAll=()=>{const{ACTION_QUICK_SELECT_ALL:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.copyLineUp=()=>{const{ACTION_QUICK_COPY_LINE_UP:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateMenuBar=()=>{const e=this.layoutService.toggleMenuBarVisibility(),{MENU_VIEW_MENUBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateMenuBarMode=e=>{this.layoutService.setMenuBarMode(e)},this.updateMenuBarDataByMode=e=>{const{builtInMenuBarData:t}=this.builtinService.getModules(),{MENUBAR_MODE_HORIZONTAL:n,MENUBAR_MODE_VERTICAL:r,MENU_APPEARANCE_ID:o}=this.builtinService.getConstants();let s=n,a=r;e===qa.vertical&&(s=r,a=n);const u=this.getMenuBarItem(t,a);this.menuBarService.remove(s),this.menuBarService.append(u,o)},this.getMenuBarItem=(e,t)=>{let n;for(n of e){if(n.id===t)return Object.assign({},n);if(Array.isArray(n.data)&&n.data.length>0){const r=this.getMenuBarItem(n.data,t);if(r)return r}}return null},this.updateStatusBar=()=>{const e=this.layoutService.toggleStatusBarVisibility(),{MENU_VIEW_STATUSBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateSideBar=()=>{this.monacoService.commandService.executeCommand(Vh.ID)},this.updateAuxiliaryBar=()=>{const e=this.layoutService.setAuxiliaryBar(n=>!n),{MENU_VIEW_AUXILIARY:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updatePanel=()=>{this.monacoService.commandService.executeCommand(Hh.ID)},this.menuBarService=je.resolve(P0),this.layoutService=je.resolve(Wu),this.monacoService=je.resolve(gg),this.builtinService=je.resolve(Uo),this.activityBarService=je.resolve(mg)}initView(){const{builtInMenuBarData:e}=this.builtinService.getModules(),{ACTION_QUICK_CREATE_FILE:t,ACTION_QUICK_UNDO:n,ACTION_QUICK_REDO:r,ACTION_QUICK_SELECT_ALL:o,ACTION_QUICK_COPY_LINE_UP:s,MENU_VIEW_ACTIVITYBAR:a,MENU_VIEW_AUXILIARY:u,MENU_VIEW_MENUBAR:d,MENU_VIEW_STATUSBAR:h,MENU_QUICK_COMMAND:f,MENU_VIEW_PANEL:p,MENUBAR_MODE_HORIZONTAL:m,MENUBAR_MODE_VERTICAL:v}=this.builtinService.getConstants();if(e){const b=this.layoutService.getMenuBarMode(),E=this.getMenuBarDataByMode(b,e);this.menuBarService.setMenus(E)}[[t,()=>this.createFile()],[n,()=>this.undo()],[r,()=>this.redo()],[o,()=>this.selectAll()],[s,()=>this.copyLineUp()],[a,()=>this.updateActivityBar()],[d,()=>this.updateMenuBar()],[h,()=>this.updateStatusBar()],[f,()=>this.gotoQuickCommand()],[zR,()=>this.updateSideBar()],[u,()=>this.updateAuxiliaryBar()],[p,()=>this.updatePanel()],[m,()=>this.updateMenuBarMode(qa.horizontal)],[v,()=>this.updateMenuBarMode(qa.vertical)]].forEach(([b,E])=>{b&&(this._automation[b]=E)}),this.subscribe(uC.onChangeMode,this.updateMenuBarDataByMode)}getFilteredMenuBarData(e,t){const n=[];return Array.isArray(e)&&e.forEach(r=>{if(t.includes(r.id))return;const o=Object.assign({},r);Array.isArray(r.data)&&r.data.length>0&&(o.data=this.getFilteredMenuBarData(r.data,t)),n.push(o)}),n}getMenuBarDataByMode(e,t){const{MENUBAR_MODE_VERTICAL:n,MENUBAR_MODE_HORIZONTAL:r}=this.builtinService.getConstants(),o=[];return e===qa.horizontal?o.push(r):e===qa.vertical&&o.push(n),this.getFilteredMenuBarData(t,o)}updateActivityBarContextMenu(e){const{MENU_VIEW_MENUBAR:t,CONTEXT_MENU_MENU:n}=this.builtinService.getConstants();n&&e===t&&this.activityBarService.toggleContextMenuChecked(n)}};xS=Oat([Gi(),Rat("design:paramtypes",[])],xS);const Mat=je.resolve(P0),Pat=je.resolve(xS),Ore=il(Mat,V_e,Pat);class h0 extends rd{constructor(){super({id:h0.ID,label:h0.LABEL,title:h0.LABEL,alias:"Color Theme",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(tl.CtrlCmd|an.KeyK)}}),this.colorThemeService=je.resolve(aC)}run(e){const t=e.get(Cc),n=this.colorThemeService.getThemes(),r=this.colorThemeService.getColorTheme(),o=[...Fat(n)];let s;const a=(u,d)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0;const h=u&&u.id!==void 0?u.id:r.id;this.colorThemeService.setTheme(h)},d?0:200)};return new Promise(u=>{let d=!1;const h=o.findIndex(p=>p.id===r.id),f=t.createQuickPick();f.items=o,f.placeholder=C("themes.selectTheme","Select Color Theme (Up/Down Keys to Preview)"),f.activeItems=[o[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidChangeActive(p=>a(p[0],!1)),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}h0.ID=Ke.ACTION_SELECT_THEME;h0.LABEL=C("selectTheme.label","Color Theme");function Fat(i,e){const t=o=>({id:o.id,label:o.label,description:o.description}),n=(o,s)=>{var a;return(a=o.label)===null||a===void 0?void 0:a.localeCompare(s.label)},r=i.map(t).sort(n);return r.length>0&&e&&r.unshift({type:"separator",label:e}),r}const mj=Xr.as(q0.Quickaccess);function Bat(i){Wat(i.prefix),mj.registerQuickAccessProvider(i)}function Wat(i){const e=mj.providers.findIndex(t=>t.prefix===i);e>-1&&mj.providers.splice(e,1)}var Vat=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Vf extends d_e{constructor(){super({showAlias:!1,noResultsPick:{label:C("noCommandResults","No matching commands"),commandId:""}},Vf.services.get(Nn),Vf.services.get(Er),Vf.services.get(Ir),Vf.services.get(yg),Vf.services.get(po)),this.editorService=je.resolve(Il)}get activeTextEditorControl(){var e;return(e=this.editorService)===null||e===void 0?void 0:e.editorInstance}static get services(){return je.resolve(gg).services}getCommandPicks(e,t){return Vat(this,void 0,void 0,function*(){return t.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks(e)].map(n=>Object.assign(Object.assign({},n),{buttons:[{iconClass:"codicon codicon-gear",tooltip:C("configure keybinding","Configure Keybinding")}],trigger:()=>Ub.CLOSE_PICKER}))})}getGlobalCommandPicks(e){var t;const n=[],r=ra.getMenuItems(Rt.CommandPalette);for(const o of r){let s=(typeof o.command.title=="string"?o.command.title:o.command.title.value)||o.command.id;const a=typeof o.command.category=="string"?o.command.category:(t=o.command.category)===null||t===void 0?void 0:t.value;a&&(s=C("commandWithCategory","{0}: {1}",a,s));const u=typeof o.command.title!="string"?o.command.title.original:void 0,d=a&&o.command.category&&typeof o.command.category!="string"?o.command.category.original:void 0,h=u&&a?d?`${d}: ${u}`:`${a}: ${u}`:u;n.push({commandId:o.command.id,commandAlias:h,label:zq(s)})}return n}}Vf.PREFIX=">";Bat({ctor:Vf,prefix:Vf.PREFIX,placeholder:C("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:C("commandsQuickAccess","Show and Run Commands"),needsEditor:!1}]});class jR extends rd{constructor(){super({id:jR.ID,label:JA.quickCommandActionLabel,alias:"Command Palette",title:{value:C("showTriggerActions","Command Palette"),original:"Command Palette"},f1:!1,keybinding:{weight:pc.WorkbenchContrib,when:void 0,primary:tl.CtrlCmd|tl.Shift|an.KeyP,secondary:[an.F1]}})}run(e){e.get(Cc).quickAccess.show(Vf.PREFIX)}}jR.ID=Ke.ACTION_QUICK_COMMAND;var Hat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$at=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let C5=class extends ua{constructor(){super(),this.onClick=(e,t)=>{this.emit(lC.OnClick,e,t)},this.onChange=(e,t)=>{this.emit(lC.OnChange,e,t)},this.onSelectColorTheme=()=>{this.monacoService.commandService.executeCommand(h0.ID)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{ACTION_QUICK_COMMAND:r="",ACTION_QUICK_ACCESS_SETTINGS:o="",ACTION_SELECT_THEME:s="",CONTEXT_MENU_MENU:a="",CONTEXT_MENU_EXPLORER:u="",CONTEXT_MENU_SEARCH:d="",CONTEXT_MENU_HIDE:h}=this.builtinService.getConstants();switch(n){case a:{this.menuBarController.updateMenuBar(),this.activityBarService.toggleContextMenuChecked(n);break}case u:case d:{this.activityBarService.toggleBar(n),this.activityBarService.toggleContextMenuChecked(n);break}case h:{this.menuBarController.updateActivityBar();break}case r:{this.gotoQuickCommand();break}case o:{this.settingsService.openSettingsInEditor();break}case s:{this.onSelectColorTheme();break}}},this.activityBarService=je.resolve(mg),this.settingsService=je.resolve(dC),this.monacoService=je.resolve(gg),this.menuBarController=je.resolve(xS),this.builtinService=je.resolve(Uo)}initView(){const{activityBarData:e,contextMenuData:t}=this.builtinService.getModules();e&&this.activityBarService.add(e),t&&this.activityBarService.addContextMenu(t)}gotoQuickCommand(){this.monacoService.commandService.executeCommand(jR.ID)}};C5=Hat([Gi(),$at("design:paramtypes",[])],C5);var zat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Uat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let y5=class extends ua{constructor(){super(),this.initView=()=>{},this.onClick=e=>{this.auxiliaryService.setActive(this.auxiliaryService.getState().current===e?void 0:e),this.emit(BO.onTabClick,e)},this.auxiliaryService=je.resolve(SS)}};y5=zat([Gi(),Uat("design:paramtypes",[])],y5);const KR=Bn("notification"),jat=gt(KR,"header"),Kat=gt(KR,"body"),Gat=gt(KR,"item"),qat=_n(KR,"close");function H_e(i){const{data:e=[],actionBar:t=[],showNotifications:n,onActionBarClick:r,onCloseNotification:o}=i,a=e.length>0?ft("notification.title","notifications"):ft("notification.title.no","no new notifications"),u=n?"block":"none";return re.createElement("div",{className:mn(KR,hae),style:{display:u}},re.createElement("header",{className:jat},re.createElement("span",null,a),re.createElement(eR,{data:t,onClick:r})),re.createElement("div",{className:Kat},e.map(d=>re.createElement("div",{className:Gat,key:d.id},re.createElement(hr,{title:"Clear Notification",onClick:()=>o==null?void 0:o(d),className:qat,type:"close"}),typeof d.render=="function"?d.render(d):d.value))))}he.memo(H_e);const $_e=Bn("bell"),Yat=_n($_e,"active");function Zat(i){const{data:e=[],onClick:t,showNotifications:n,id:r,actionBar:o,onActionBarClick:s,onCloseNotification:a}=i,u=he.useRef(),h=e.length>0?"bell-dot":"bell";return he.useEffect(()=>{const f=nw(`.${Bn("workbench")}`);f&&(u.current=u.current||document.createElement("div"),f.appendChild(u.current),uF(re.createElement(H_e,{id:r,data:e,actionBar:o,showNotifications:n,onActionBarClick:s,onCloseNotification:a}),u.current))},[r,e,o,n,s,a]),re.createElement(hr,{className:mn($_e,n&&Yat),onClick:t,type:h})}const Xat=he.memo(Zat);var Qat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Jat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _j=class extends ua{constructor(){super(),this.onCloseNotification=e=>{this.notificationService.remove(e.id)},this.onClick=(e,t)=>{this.toggleNotifications()},this.onActionBarClick=(e,t)=>{const n=t.id,{NOTIFICATION_CLEAR_ALL_ID:r,NOTIFICATION_HIDE_ID:o}=this.builtinService.getConstants();n===r?this.notificationService.clear():n===o&&this.toggleNotifications()},this.notificationService=je.resolve(LS),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(Uo)}toggleNotifications(){this.notificationService.toggleNotification()}initView(){const{builtInNotification:e,NOTIFICATION_CLEAR_ALL:t,NOTIFICATION_HIDE:n}=this.builtinService.getModules();if(e){const r=il(this.notificationService,Xat),o=Object.assign(Object.assign({},e),{actionBar:[t,n].filter(Boolean),render:()=>re.createElement(r,{onClick:this.onClick,onActionBarClick:this.onActionBarClick,onCloseNotification:this.onCloseNotification})});this.notificationService.setState(Object.assign({},o)),this.statusBarService.add(o,Sp.right)}}};_j=Qat([Gi(),Jat("design:paramtypes",[])],_j);const elt=Bn("output");function tlt(i){const{id:e,data:t="",onUpdateEditorIns:n}=i;return re.createElement("div",{className:elt},re.createElement(uY,{key:e,options:{value:t,readOnly:!0,lineDecorationsWidth:0,lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0},editorInstanceRef:r=>{n==null||n(r)}}))}var nlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ilt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let w5=class extends ua{constructor(){super(),this.onTabChange=e=>{e&&this.panelService.setActive(e),this.emit(Ep.onTabChange,e)},this.onClose=e=>{e&&this.emit(Ep.onTabClose,e)},this.onToolbarClick=(e,t)=>{const{PANEL_TOOLBOX_CLOSE:n,PANEL_TOOLBOX_RESIZE:r}=this.builtinService.getConstants();t.id===n?this.monacoService.commandService.executeCommand(Hh.ID):t.id===r&&this.panelService.toggleMaximize(),this.emit(Ep.onToolbarClick,e,t)},this.panelService=je.resolve(cC),this.monacoService=je.resolve(gg),this.builtinService=je.resolve(Uo)}initView(){const{builtInOutputPanel:e,builtInPanelToolbox:t,builtInPanelToolboxResize:n}=this.builtinService.getModules();if(e){const o=e;o.renderPane=s=>re.createElement(tlt,Object.assign({onUpdateEditorIns:a=>{s.outputEditorInstance=a}},s)),this.panelService.add(o),this.panelService.setActive(o.id)}const r=[n,t].filter(Boolean);this.panelService.setState({toolbox:r})}};w5=nlt([Gi(),ilt("design:paramtypes",[])],w5);function rlt(i){const{data:e={errors:0,warnings:0,infos:0}}=i;return re.createElement(re.Fragment,null,re.createElement(hr,{type:"error"}),` ${e.errors} `,re.createElement(hr,{type:"warning"}),` ${e.warnings} `,re.createElement(hr,{type:"info"}),` ${e.infos}`)}const olt=re.memo(rlt),z_e=Bn("problems"),EZ=gt(z_e,"treeview"),U_e=gt(EZ,"treeNode"),slt=gt(U_e,"badge"),j_e=gt(EZ,"treeLeaf"),Rre=gt(j_e,"subInfo");function alt(i){const{data:e,onSelect:t}=i;if(!(e!=null&&e.length))return re.createElement("div",{style:{margin:"0 18px",userSelect:"none"}},ft("panel.problems.empty","No problems have been detected in the workspace."));const n=r=>{switch(r){case Qh.Error:return re.createElement(hr,{type:"error"});case Qh.Warning:return re.createElement(hr,{type:"warning"});case Qh.Info:return re.createElement(hr,{type:"info"});default:return""}};return re.createElement(GS,null,re.createElement("div",{className:z_e},re.createElement(A8,{className:EZ,data:e,renderTitle:({children:r,name:o,value:s},a,u)=>u?re.createElement("span",{className:j_e},n(s.status),re.createElement("span",null,s.message),re.createElement("span",{className:Rre},s.code),re.createElement("span",{className:Rre},"[",s.startLineNumber,","," ",s.startColumn,"]")):re.createElement("span",{className:U_e},s.code,re.createElement("span",{className:slt},r==null?void 0:r.length)),onSelect:t,onRightClick:r=>r.preventDefault()})))}const llt=he.memo(alt);var ult=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},clt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let vj=class extends ua{constructor(){super(),this.onClick=(e,t)=>{this.showHideProblems()},this.onSelect=e=>{this.emit(HO.onSelect,e)},this.panelService=je.resolve(cC),this.statusBarService=je.resolve(_g),this.monacoService=je.resolve(gg),this.layoutService=je.resolve(Wu),this.problemsService=je.resolve(zO),this.builtinService=je.resolve(Uo)}showHideProblems(){const{panel:e}=this.layoutService.getState(),{current:t}=this.panelService.getState(),{builtInPanelProblems:n}=this.builtinService.getModules();n&&((e.hidden||(t==null?void 0:t.id)===n.id)&&this.monacoService.commandService.executeCommand(Hh.ID),this.panelService.open(n))}initView(){const{builtInStatusProblems:e,builtInPanelProblems:t}=this.builtinService.getModules();if(e&&(e.render=o=>re.createElement(olt,Object.assign({},o)),e.onClick=this.onClick,this.statusBarService.add(e,Sp.left)),t){const o=il(this.problemsService,llt),s=t;s.renderPane=()=>re.createElement(o,{onSelect:this.onSelect}),this.panelService.add(s),this.panelService.setActive(s.id)}const{PROBLEM_MODEL_ID:n,PROBLEM_MODEL_NAME:r}=this.builtinService.getConstants();this.problemsService.setState({id:n,name:r})}};vj=ult([Gi(),clt("design:paramtypes",[])],vj);function K_e({locale:i}){const e=he.useRef(null),t=()=>{window.location.reload()};return he.useEffect(()=>{var n;(n=e.current)===null||n===void 0||n.focus()},[]),re.createElement("div",{style:{lineHeight:"1.5"}},re.createElement("div",{style:{direction:"ltr",width:440,whiteSpace:"normal",textAlign:"left"}},re.createElement("p",{style:{fontWeight:"bold"}},ft("notification.locale.title","")),re.createElement("p",null,ft("notification.locale.description",""))),re.createElement("div",{style:{marginBottom:2}},re.createElement(b1,{ref:e,style:{width:150,margin:"0 0 0 auto"},onClick:t},ft("notification.locale.button",""))))}re.memo(K_e);var dlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},hlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let bj=class extends ua{constructor(){super(),this.onChangeSettings=wr.debounce(e=>{this.settingsService.update(e),this.emit(VO.OnChange,e)},600),this.editorService=je.resolve(Il),this.settingsService=je.resolve(dC),this.localeService=je.resolve(rf),this.notificationService=je.resolve(LS),this.builtinService=je.resolve(Uo)}initView(){const{SETTING_ID:e}=this.builtinService.getConstants();this.editorService.onUpdateTab(t=>{var n;if(t.id===e){const r=this.settingsService.normalizeFlatObject(((n=t.data)===null||n===void 0?void 0:n.value)||"");this.onChangeSettings(r)}}),this.localeService.onChange((t,n)=>{this.notifyLocaleChanged(t,n)})}notifyLocaleChanged(e,t){const{SETTING_ID:n}=this.builtinService.getConstants(),r={id:n,value:t,render(o){return re.createElement(K_e,{key:t.id,locale:t.name})}};this.notificationService.getState().showNotifications||this.notificationService.toggleNotification(),this.notificationService.add([r])}};bj=dlt([Gi(),hlt("design:paramtypes",[])],bj);var flt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},glt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let S5=class extends ua{constructor(){super(),this.onClick=(e,t)=>{this.emit(WO.onClick,e,t)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{STATUS_BAR_HIDE_ID:r}=this.builtinService.getConstants();switch(n){case r:this.menuBarController.updateStatusBar();break}},this.menuBarController=je.resolve(xS),this.statusBarService=je.resolve(_g),this.builtinService=je.resolve(Uo)}initView(){const{STATUS_EDITOR_INFO:e,CONTEXT_MENU_HIDE_STATUS_BAR:t}=this.builtinService.getModules(),n=wr.cloneDeep(this.statusBarService.getState().rightItems),r=wr.cloneDeep(this.statusBarService.getState().contextMenu||[]);e&&n.push(Object.assign(Object.assign({},e),{render:o=>re.createElement(R_e,Object.assign({},o))})),t&&r.push(t),this.statusBarService.setState({rightItems:n,contextMenu:r})}};S5=flt([Gi(),glt("design:paramtypes",[])],S5);var plt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},mlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let E5=class extends ua{constructor(){super(),this.onPaneSizeChange=e=>{this.layoutService.setPaneSize(e)},this.onHorizontalPaneSizeChange=e=>{this.layoutService.setHorizontalPaneSize(e)},this.onWorkbenchDidMount=()=>{this.layoutService.emit(p5.OnWorkbenchDidMount)},this.layoutService=je.resolve(Wu)}initView(){}};E5=plt([Gi(),mlt("design:paramtypes",[])],E5);const _lt=Bn(zR),vlt=Bn(nit,_lt),L5=Bn(iit),blt=_n(L5,"input"),Clt=_n(L5,"editable"),GR=Bn(rit),y7=gt(GR,"item"),ylt=gt(GR,"group"),wlt=gt(y7,"fileName"),Slt=gt(y7,"filePath"),Mre=_n(y7,"active"),Elt=gt(GR,"close"),Llt=gt(GR,"file"),xlt=i=>{const{activePanelKeys:e,data:t=[],headerToolBar:n,onClick:r,onActionsContextMenuClick:o,onCollapseChange:s,onToolbarClick:a}=i;return re.createElement("div",{className:vlt},re.createElement(M_e,{title:ft("sidebar.explore.title","Explorer"),toolbar:re.createElement(tR,{data:[n],onClick:r,onContextMenuClick:o})}),re.createElement(P_e,null,re.createElement(dle,{data:t,activePanelKeys:e,onCollapseChange:s,onToolbarClick:a})))};var Dlt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Tlt=i=>{const e=[...i];let t=!1;for(;e.length;){const n=e.pop();if(n!=null&&n.isEditable){t=!0;break}else e.push(...(n==null?void 0:n.children)||[])}return t},Ilt=re.forwardRef((i,e)=>{const t=he.useRef(null);return he.useLayoutEffect(()=>{if(t.current){const n=(i.defaultValue||"").lastIndexOf(".");t.current.selectionStart=0,t.current.selectionEnd=n>0?n:(i.defaultValue||"").length}},[]),re.createElement("input",Object.assign({},i,{ref:t}))}),klt=i=>{var e;const{folderTree:t={},entry:n,panel:r,onUpdateFileName:o,onSelectFile:s,onDropTree:a,onClickContextMenu:u,onRightClick:d,onLoadData:h,createTreeNode:f,onExpandKeys:p}=i,m=Dlt(i,["folderTree","entry","panel","onUpdateFileName","onSelectFile","onDropTree","onClickContextMenu","onRightClick","onLoadData","createTreeNode","onExpandKeys"]),{data:v=[],folderPanelContextMenu:b=[],expandKeys:E,loadedKeys:S,current:w}=t,L=he.useRef(null),A=he.useRef(),N=XO(),H=Tlt(v),M=(z,k)=>{var K;u==null||u(k),(K=A.current)===null||K===void 0||K.hide()},R=()=>G5({anchor:nw(`.${L5}`),render:()=>re.createElement(Xa,{role:"menu",onClick:M,data:b})}),q=(z,k)=>{u==null||u(z,k),N==null||N.hide()},X=(z,k)=>{if(z.target.nodeName!=="INPUT"){z.preventDefault();const K=(d==null?void 0:d(k))||[];K.length&&(N==null||N.show(cF(z),()=>re.createElement(Xa,{role:"menu",onClick:(fe,ne)=>q(ne,k),data:K})))}},$=(z,k)=>{const K=z.value;o==null||o(Object.assign(Object.assign({},k),{name:K}))},I=(z,k)=>{$(z.target,k)},O=(z,k)=>{(z.keyCode===13||z.keyCode===27)&&$(z.target,k)},B=z=>{const{isEditable:k,name:K}=z;return k?re.createElement(Ilt,{role:"input",className:blt,type:"text",defaultValue:K,ref:L,onKeyDown:fe=>O(fe,z),autoComplete:"off",autoFocus:!0,onBlur:fe=>I(fe,z),onClick:fe=>fe.stopPropagation()}):K},W=()=>{s==null||s()},j=(z,k)=>{a==null||a(z,k)},U=()=>{f==null||f("RootFolder")};he.useEffect(()=>(b.length>0&&(A.current=R()),()=>{var z;(z=A.current)===null||z===void 0||z.dispose()}),[v.length]);const G=re.createElement("div",{"data-content":r.id},n?re.createElement(re.Fragment,null,n):re.createElement("div",{style:{padding:"10px 5px"}},"you have not yet opened a folder",re.createElement(b1,{onClick:U},"Add Folder")));return v.length?re.createElement(GS,{isShowShadow:!0},re.createElement("div",{"data-content":r.id,style:{height:"100%"}},re.createElement(A8,Object.assign({activeKey:w==null?void 0:w.id,expandKeys:E,loadedKeys:S,data:((e=v[0])===null||e===void 0?void 0:e.children)||[],className:mn(L5,H&&Clt),draggable:!H,onDropTree:j,onSelect:s,onTreeClick:W,onRightClick:X,renderTitle:B,onLoadData:h,onExpand:p},m)))):G},Nlt=he.memo(klt);var Alt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Olt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let DS=class extends ua{constructor(){super(),this.getContextMenu=e=>{var t;const n=Zh(((t=this.folderTreeService.getState().folderTree)===null||t===void 0?void 0:t.contextMenu)||[]),r=this.folderTreeService.getFileContextMenu(),o=this.folderTreeService.getFolderContextMenu(),{ROOT_FOLDER_CONTEXT_MENU:s}=this.builtinService.getModules();switch(e.fileType){case ea.File:{n.unshift(...r);break}case ea.Folder:{n.unshift(...o);break}case ea.RootFolder:return o.concat(s||[])}return n},this.createTreeNode=(e,t)=>{var n;if(typeof t>"u"){const r=this.folderTreeService.getState(),{data:o,current:s}=(r==null?void 0:r.folderTree)||{},a=typeof(s==null?void 0:s.id)>"u"?(n=o==null?void 0:o[0])===null||n===void 0?void 0:n.id:s==null?void 0:s.id;this.emit(yo.onCreate,e,a)}else this.emit(yo.onCreate,e,t)},this.onClickContextMenu=(e,t)=>{const n=e.id,{RENAME_COMMAND_ID:r,DELETE_COMMAND_ID:o,NEW_FILE_COMMAND_ID:s,NEW_FOLDER_COMMAND_ID:a,OPEN_TO_SIDE_COMMAND_ID:u}=this.builtinService.getConstants();switch(n){case r:{const{id:d}=t;this.onRename(d);break}case o:{const{id:d}=t;this.onDelete(d);break}case s:{const{id:d}=t;this.createTreeNode(ea.File,d);break}case a:{const{id:d}=t;this.createTreeNode(ea.Folder,d);break}case u:{this.onSelectFile(t);break}default:this.onContextMenuClick(e,t)}},this.onRightClick=e=>{const t=this.getContextMenu(e);return this.emit(yo.onRightClick,e,t),t},this.onDropTree=(e,t)=>{this.emit(yo.onDrop,e,t)},this.onUpdateFileName=e=>{this.emit(yo.onUpdateFileName,e)},this.onSelectFile=e=>{this.folderTreeService.setActive(e==null?void 0:e.id),e&&!e.isEditable&&e.fileType===ea.File&&this.emit(yo.onSelectFile,e)},this.onContextMenuClick=(e,t)=>{this.emit(yo.onContextMenuClick,e,t)},this.onRename=e=>{this.emit(yo.onRename,e)},this.onDelete=e=>{this.emit(yo.onDelete,e)},this.onLoadData=e=>this.count(yo.onLoadData)?(this.folderTreeService.setLoadedKeys([...this.folderTreeService.getLoadedKeys(),e.id.toString()]),new Promise((n,r)=>{const o=s=>{this.folderTreeService.update(s),n()};this.emit(yo.onLoadData,e,o)})):Promise.resolve(),this.onExpandKeys=e=>{this.emit(yo.onExpandKeys,e)},this.folderTreeService=je.resolve(ES),this.builtinService=je.resolve(Uo)}initView(){const{FILE_CONTEXT_MENU:e,BASE_CONTEXT_MENU:t,COMMON_CONTEXT_MENU:n,FOLDER_PANEL_CONTEXT_MENU:r}=this.builtinService.getModules();e&&this.folderTreeService.setFileContextMenu(e),t&&this.folderTreeService.setFolderContextMenu(t),this.folderTreeService.setState({folderTree:{contextMenu:n||[],current:null,folderPanelContextMenu:r||[],data:[],expandKeys:[]}})}};DS=Alt([Gi(),Olt("design:paramtypes",[])],DS);const Rlt=i=>{var e;const{current:t,groups:n,groupToolbar:r,contextMenu:o=[],headerContextMenu:s,panel:a,onSelect:u,onSaveGroup:d,onContextMenu:h,onCloseGroup:f,onClose:p,onToolbarClick:m}=i,v=he.useRef(null),b=he.useRef(null);if(he.useLayoutEffect(()=>{var R,q,X;if((((R=b.current)===null||R===void 0?void 0:R.scrollHeight)||0)>$P-Hg){const I=(q=v.current)===null||q===void 0?void 0:q.querySelector(`.${Mre}`);if(I){const O=I.offsetTop;(X=b.current)===null||X===void 0||X.scrollTo(O)}}},[(t==null?void 0:t.id)&&((e=t.tab)===null||e===void 0?void 0:e.id)]),!n||!n.length)return null;const E=AS(),S=(R,q)=>{p==null||p(q.id,R.id)},w=(R,q)=>{var X;(R.id!==(t==null?void 0:t.id)||q.id!==((X=t==null?void 0:t.tab)===null||X===void 0?void 0:X.id))&&(u==null||u(q.id,R.id))},L=(R,q,X)=>{E.hide(),h==null||h(R,q.id,X)},A=(R,q,X)=>{R.preventDefault(),E.show(cF(R),()=>re.createElement(Xa,{role:"menu",onClick:($,I)=>L(I,q,X),data:o}))},N=(R,q)=>{R.preventDefault();const X=s||o;E.show(cF(R),()=>re.createElement(Xa,{role:"menu",onClick:($,I)=>L(I,q),data:X}))},H=(R,q)=>{var X;const{target:$}=R,I=(X=q.data)===null||X===void 0?void 0:X[0];$.nextElementSibling&&I&&(u==null||u(I.id,q.id),$.nextElementSibling.focus())},M=(R,q,X)=>{switch(R.stopPropagation(),q.id){case Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:f==null||f(X.id);break;case Ke.EXPLORER_TOGGLE_SAVE_GROUP:d==null||d(X.id);break;default:m==null||m(q,X.id);break}};return re.createElement(GS,{ref:b,isShowShadow:!0},re.createElement("div",{className:GR,ref:v,"data-content":a.id},n.map((R,q)=>{var X;return re.createElement(re.Fragment,{key:q},n.length!==1&&re.createElement("div",{className:ylt,onClick:$=>H($,R),onContextMenu:$=>N($,R),key:q},ft("sidebar.explore.openEditor.group","Group",(q+1).toString()),r&&re.createElement(tR,{data:r,onClick:($,I)=>M($,I,R)})),(X=R.data)===null||X===void 0?void 0:X.map($=>{var I,O,B,W,j;const U=R.id===(t==null?void 0:t.id)&&$.id===((I=t==null?void 0:t.tab)===null||I===void 0?void 0:I.id);return re.createElement("div",{title:((O=$.data)===null||O===void 0?void 0:O.path)&&`${(B=$.data)===null||B===void 0?void 0:B.path}/${$.name}`,className:mn(y7,U&&Mre),tabIndex:0,key:`${q}_${$.id}`,onClick:()=>w(R,$),onContextMenu:G=>A(G,R,$)},re.createElement(hr,{className:Elt,onClick:()=>S(R,$),type:"close"}),re.createElement(hr,{className:Llt,type:((W=$.data)===null||W===void 0?void 0:W.icon)||$.icon}),re.createElement("span",{className:wlt},$.name),re.createElement("span",{className:Slt},(j=$.data)===null||j===void 0?void 0:j.path))}))})))},Mlt=je.resolve(ES),Plt=je.resolve(DS),Flt=il(Mlt,Nlt,Plt);var Blt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Cj=class extends ua{constructor(){super(),this.onClick=(e,t)=>{this.emit(Uc.onClick,e,t)},this.onActionsContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id;n&&this.explorerService.togglePanel(n)},this.onCollapseChange=e=>{this.emit(Uc.onCollapseChange,e)},this.onToolbarClick=(e,t)=>{var n,r,o,s;const a=e.id,{NEW_FILE_COMMAND_ID:u,NEW_FOLDER_COMMAND_ID:d,REMOVE_COMMAND_ID:h,COLLAPSE_COMMAND_ID:f,EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:p,EXPLORER_TOGGLE_SAVE_ALL:m,EXPLORER_TOGGLE_VERTICAL:v}=this.builtinService.getConstants();switch(a){case u:{(r=(n=this.folderTreeController).createTreeNode)===null||r===void 0||r.call(n,ea.File);break}case d:{(s=(o=this.folderTreeController).createTreeNode)===null||s===void 0||s.call(o,ea.Folder);break}case h:{this.emit(Uc.onRemovePanel,t);break}case f:{this.emit(Uc.onCollapseAllFolders);break}case p:{this.emit(Lo.onCloseAll);break}case m:{this.emit(Lo.onSaveAll);break}case v:{this.emit(Lo.onSplitEditorLayout);break}default:this.emit(Uc.onPanelToolbarClick,t,a)}},this.renderFolderTree=e=>re.createElement(Flt,{panel:e}),this.activityBarService=je.resolve(mg),this.sidebarService=je.resolve(pg),this.explorerService=je.resolve(Bp),this.folderTreeController=je.resolve(DS),this.builtinService=je.resolve(Uo)}initView(){const e={onClick:this.onClick,onCollapseChange:this.onCollapseChange,onActionsContextMenuClick:this.onActionsContextMenuClick,onToolbarClick:this.onToolbarClick},t=il(this.explorerService,xlt),n=this.builtinService.getConstants().EXPLORER_ACTIVITY_ITEM;if(!n)return;const r={id:n,title:"EXPLORER",render(){return re.createElement(t,Object.assign({},e))}},{builtInExplorerActivityItem:o,builtInExplorerFolderPanel:s,builtInExplorerHeaderToolbar:a}=this.builtinService.getModules();a&&this.explorerService.setState({headerToolBar:a}),o&&s&&(this.activityBarService.add(o,!0),this.sidebarService.add(r,!0),this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:this.renderFolderTree})))}};Cj=Blt([Gi(),Wlt("design:paramtypes",[])],Cj);var Vlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Hlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},$lt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let yj=class extends ua{constructor(){super(),this.onContextMenu=(e,t,n)=>{const{EDITOR_MENU_CLOSE:r,EDITOR_MENU_CLOSE_OTHERS:o,EDITOR_MENU_CLOSE_SAVED:s,EDITOR_MENU_CLOSE_ALL:a}=this.builtinService.getConstants();switch(e.id){case r:this.onClose(n==null?void 0:n.id,t);break;case o:this.emit(Lo.onCloseOthers,n,t);break;case s:this.emit(Lo.onCloseSaved,t);break;case a:this.emit(Lo.onCloseAll,t);break;default:this.emit(Lo.onContextMenu,e,n,t);break}},this.onClose=(e,t)=>{this.emit(Lo.onClose,e,t)},this.onSelect=(e,t)=>{this.emit(Lo.onSelect,e,t)},this.onCloseGroup=e=>{this.emit(Lo.onCloseAll,e)},this.onSaveGroup=e=>{this.emit(Lo.onSaveAll,e)},this.onToolbarClick=(e,t)=>{this.emit(Lo.onToolbarClick,e,t)},this.editService=je.resolve(Il),this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(Uo)}initView(){const e=il(this.editService,Rlt),{builtInExplorerEditorPanel:t,builtInEditorTreeContextMenu:n,builtInEditorTreeHeaderContextMenu:r}=this.builtinService.getModules();if(t){const{groupToolbar:o}=t,s=$lt(t,["groupToolbar"]),a=n||[],u=r||[];this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:d=>re.createElement(e,{panel:d,contextMenu:a,headerContextMenu:u,groupToolbar:o,onClose:this.onClose,onSelect:this.onSelect,onCloseGroup:this.onCloseGroup,onSaveGroup:this.onSaveGroup,onContextMenu:this.onContextMenu,onToolbarClick:this.onToolbarClick})}))}}};yj=Vlt([Gi(),Hlt("design:paramtypes",[])],yj);var zlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ult=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let wj=class extends ua{constructor(){super(),this.onClick=e=>{},this.explorerService=je.resolve(Bp),this.builtinService=je.resolve(Uo)}initView(){const{builtInExplorerOutlinePanel:e}=this.builtinService.getModules();e&&this.explorerService.addPanel(e)}};wj=zlt([Gi(),Ult("design:paramtypes",[])],wj);const jlt=_n(gt(Bn("search"),"treeNode"),"empty"),Klt=_n(gt(Bn("search"),"treeNode"),"match"),Glt=_n(gt(Bn("search"),"treeNode"),"delete"),qlt=_n(gt(Bn("search"),"treeNode"),"replace"),Ylt=gt(Bn("search"),"tree"),Zlt=i=>{const{data:e=[],onSelect:t,renderTitle:n}=i;return re.createElement(A8,{draggable:!1,className:Ylt,data:e,renderTitle:n,onSelect:t,onRightClick:r=>r.preventDefault()})},Xlt=he.memo(Zlt),Qlt=({value:i="",replaceValue:e,searchAddons:t,replaceAddons:n,validationInfo:r,headerToolBar:o,result:s,toggleAddon:a,onResultClick:u,validateValue:d,setValidateInfo:h,onSearch:f,getSearchIndex:p,setSearchValue:m,setReplaceValue:v,onChange:b,toggleMode:E})=>{const S=(M,R)=>{console.log("onClick:",M,R)},w=(M=[])=>{const[R,q]=M;m==null||m(R),v==null||v(q),b==null||b(R||"",q||"")},L=M=>{E==null||E(M)},A=(M,R,q)=>{const{name:X=""}=M;if(!q)return X;const $=p?p(X,i):-1,I=X.substr(0,$),O=X.substr($,i.length),B=X.substr($+i.length);return $>-1?re.createElement("span",null,I,re.createElement("span",{className:mn(Klt,e&&Glt)},O),e&&re.createElement("span",{className:qlt},e),B):X},N=(M=[])=>{const[R,q]=M;d==null||d(R||"",X=>{X?h==null||h({type:"error",text:X.message}):f==null||f(R||"",q||"")})},H=M=>{M.isLeaf&&(u==null||u(M,s))};return re.createElement("div",{className:Bn("search-pane","sidebar")},re.createElement(M_e,{title:ft("sidebar.search.title","Search"),toolbar:re.createElement(tR,{data:o||[],onClick:S})}),re.createElement(P_e,null,re.createElement(sfe,{values:[i,e],addons:[t,n],validationInfo:r,onChange:w,onSearch:N,onAddonClick:a,onButtonClick:L}),i&&s.length===0?re.createElement("div",{className:jlt},"未找到结果，请重新修改您的搜索条件"):re.createElement(Xlt,{data:s,renderTitle:A,onSelect:H})))};var Jlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},eut=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Sj=class extends ua{constructor(){super(),this.validateValue=(e,t)=>{const{isRegex:n}=this.searchService.getState();if(n)try{return new RegExp(e),t()}catch(r){if(r instanceof Error)return t(r)}return t()},this.getSearchIndex=(e,t="")=>{let n=-1;const{isCaseSensitive:r,isWholeWords:o,isRegex:s}=this.searchService.getState(),a=r,u=o,d=r&&o,h=!r&&!o;try{if(s)a&&(n=e.search(new RegExp(t))),u&&(n=e.search(new RegExp("\\b"+t+"\\b","i"))),d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().search(new RegExp(t,"i")));else{if(a&&(n=e.indexOf(t)),u){const f=new RegExp("\\b"+(t==null?void 0:t.toLowerCase())+"\\b");n=e.toLowerCase().search(f)}d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))}}catch(f){console.error(f)}return n},this.setValidateInfo=e=>{this.searchService.setValidateInfo(e)},this.setSearchValue=e=>{this.searchService.setSearchValue(e)},this.setReplaceValue=e=>{this.searchService.setReplaceValue(e)},this.toggleAddon=e=>{const t=e==null?void 0:e.id,{SEARCH_CASE_SENSITIVE_COMMAND_ID:n,SEARCH_WHOLE_WORD_COMMAND_ID:r,SEARCH_REGULAR_EXPRESSION_COMMAND_ID:o,SEARCH_PRESERVE_CASE_COMMAND_ID:s,SEARCH_REPLACE_ALL_COMMAND_ID:a}=this.builtinService.getConstants();switch(t){case n:{this.searchService.toggleCaseSensitive();break}case r:{this.searchService.toggleWholeWord();break}case o:{this.searchService.toggleRegex();break}case s:{this.searchService.togglePreserveCase();break}case a:{this.emit(Wh.onReplaceAll);break}default:console.log("no addon")}},this.toggleMode=e=>{this.searchService.toggleMode(e)},this.onChange=(e="",t="")=>{this.emit(Wh.onChange,e,t)},this.onSearch=(e="",t="")=>{const{isRegex:n,isCaseSensitive:r,isWholeWords:o,preserveCase:s}=this.searchService.getState();this.emit(Wh.onSearch,e,t,{isRegex:n,isCaseSensitive:r,isWholeWords:o,preserveCase:s})},this.onResultClick=(e,t)=>{this.emit(Wh.onResultClick,e,t)},this.activityBarService=je.resolve(mg),this.sidebarService=je.resolve(pg),this.searchService=je.resolve($O),this.builtinService=je.resolve(Uo)}initView(){const{builtInSearchActivityItem:e,builtInHeaderToolbar:t,builtInSearchAddons:n,builtInReplaceAddons:r}=this.builtinService.getModules();if(e){const o=il(this.searchService,Qlt,this),s={id:e.id,title:"SEARCH",render(){return re.createElement(o,null)}};this.searchService.setState({headerToolBar:t||[],searchAddons:n||[],replaceAddons:r||[]}),this.sidebarService.add(s),this.activityBarService.add(e)}}};Sj=Jlt([Gi(),eut("design:paramtypes",[])],Sj);class c1 extends rd{constructor(){super({id:c1.ID,label:c1.LABEL,title:c1.LABEL,alias:"Open Settings (JSON)",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:Zr(tl.CtrlCmd|an.Comma)}}),this.settingsService=je.resolve(dC)}run(e){this.settingsService.openSettingsInEditor()}}c1.ID=Ke.ACTION_QUICK_ACCESS_SETTINGS;c1.LABEL=C("quickAccessSettings.label","Open Settings (JSON)");class d1 extends rd{constructor(){super({id:d1.ID,label:d1.LABEL,title:d1.LABEL,alias:"Select Display Language",precondition:void 0,f1:!0,keybinding:{when:void 0,primary:tl.CtrlCmd|tl.Shift|an.KeyL}})}get localeService(){return je.resolve(rf)}run(e){const t=e.get(Cc),n=this.localeService.getLocales(),r=this.localeService.getCurrentLocale(),o=n.map(u=>({id:u.id,label:u.name,description:u.description}));let s;const a=(u,d)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0,u&&u.id&&this.localeService.setCurrentLocale(u.id)},d?0:200)};return new Promise(u=>{let d=!1;const h=o.findIndex(p=>p.id===(r==null?void 0:r.id)),f=t.createQuickPick();f.items=o,f.placeholder=ft("locale.select","Select Display Language (Up/Down Keys to Preview)"),f.activeItems=[o[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}d1.ID=Ke.ACTION_SELECT_LOCALE;d1.LABEL=ft("select.locale","Select Display Language");class Hf extends rd{constructor(){super({id:Hf.ID,alias:Hf.DESC,title:{value:Hf.LABEL,original:Hf.DESC},f1:!0,label:Hf.LABEL,keybinding:{weight:pc.BuiltinExtension,when:void 0,primary:tl.CtrlCmd|an.KeyA}}),this.editorService=je.resolve(Il)}selectEditorAll(){const e=this.editorService.editorInstance;e&&(e.focus(),e.setSelection(e.getModel().getFullModelRange()))}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;r&&this.isTextdom(r)&&!r.className.includes("monaco")?r.select():this.selectEditorAll()}}Hf.ID=Ke.ACTION_QUICK_SELECT_ALL;Hf.DESC="Select All";Hf.LABEL=ft("menu.selectAll","Select All");class $f extends rd{constructor(){super({id:$f.ID,title:{value:$f.LABEL,original:$f.DESC},label:$f.LABEL,alias:$f.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:tl.Alt|tl.Shift|an.PageUp}}),this.editorService=je.resolve(Il)}run(){var e;(e=this.editorService.editorInstance)===null||e===void 0||e.getAction(Ke.ACTION_QUICK_COPY_LINE_UP).run()}}$f.ID=Ke.ACTION_QUICK_COPY_LINE_UP;$f.LABEL=ft("menu.copyLineUp","Copy Line Up");$f.DESC="Copy Line Up";class zf extends rd{constructor(){super({id:zf.ID,title:{value:zf.LABEL,original:zf.DESC},label:zf.LABEL,alias:zf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:tl.CtrlCmd|an.KeyZ}}),this.editorService=je.resolve(Il)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("undo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),sa.getModel(u0.parse(a.id.toString())).undo()}}}}}zf.ID=Ke.ACTION_QUICK_UNDO;zf.LABEL=ft("menu.undo","Undo");zf.DESC="Undo";class Uf extends rd{constructor(){super({id:Uf.ID,title:{value:Uf.LABEL,original:Uf.DESC},label:Uf.LABEL,alias:Uf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:tl.CtrlCmd|tl.Shift|an.KeyZ}}),this.editorService=je.resolve(Il)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("redo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),sa.getModel(u0.parse(a.id.toString())).redo()}}}}}Uf.ID=Ke.ACTION_QUICK_REDO;Uf.LABEL=ft("menu.redo","Redo");Uf.DESC="Redo";class jf extends rd{constructor(){super({id:jf.ID,title:{value:jf.LABEL,original:jf.DESC},label:jf.LABEL,alias:jf.DESC,f1:!0,keybinding:{when:void 0,weight:pc.WorkbenchContrib,primary:tl.CtrlCmd|an.KeyN}}),this.folderTreeController=je.resolve(DS)}run(){var e,t;(t=(e=this.folderTreeController).createTreeNode)===null||t===void 0||t.call(e,ea.File)}}jf.ID=Ke.ACTION_QUICK_CREATE_FILE;jf.LABEL=ft("menu.newFile","New File");jf.DESC="New File";var tut=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},nut=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Ej=class extends ua{constructor(){super(),this.extensionService=je.resolve(UO),this.builtinService=je.resolve(Uo)}initView(){const{quickAcessViewAction:e,quickSelectColorThemeAction:t,quickAccessSettingsAction:n,quickSelectLocaleAction:r,quickTogglePanelAction:o,quickSelectAllAction:s,quickCopyLineUpAction:a,quickUndoAction:u,quickRedoAction:d,quickCreateFileAction:h}=this.builtinService.getModules();[[e,jR],[t,h0],[n,c1],[r,d1],[zR,Vh],[o,Hh],[s,Hf],[a,$f],[u,zf],[d,Uf],[h,jf]].forEach(([f,p])=>{f&&this.extensionService.registerAction(p)})}};Ej=tut([Gi(),nut("design:paramtypes",[])],Ej);const WC=Bn(E_e),iut=gt(WC,"container"),rut=gt(WC,"normal"),out=gt(WC,"global"),w7=gt(WC,"item"),sut=_n(w7,"checked"),aut=_n(w7,"disabled"),lut=gt(WC,"label"),uut=gt(WC,"indicator");function G_e(i){const{checked:e=!1,disabled:t=!1,title:n="",data:r={},render:o,icon:s,id:a,onClick:u,contextMenu:d=[],className:h,onContextMenuClick:f}=i,m=XO({render:()=>re.createElement(Xa,{onClick:v,role:"menu",data:d.map(S=>{if(S.id){const w=Rh.queryGlobalKeybinding(S.id.toString());w&&(S.keybinding=Rh.convertSimpleKeybindingToString(w))}return S})})}),v=(S,w)=>{f==null||f(S,w),m==null||m.hide()},b=function(S){u&&u(i.id,i),d.length>0&&(m==null||m.show({x:S.pageX,y:S.pageY}))},E=re.createElement(hr,{type:s,className:lut,title:n},(o==null?void 0:o())||null);return re.createElement("li",{id:a.toString(),onClick:b,className:mn(h,w7,e?sut:"",t?aut:""),"data-id":r.id},E,e?re.createElement("div",{className:uut}):null)}function q_e(i){const{data:e=[],contextMenu:t=[],selected:n,onClick:r,onChange:o,onContextMenuClick:s}=i,a=(b,E)=>{r&&r(b,E),o&&E.type!=="global"&&o(n,b)},u=e.filter(b=>b.type!=="global"&&!b.hidden),d=e.filter(b=>b.type==="global"&&!b.hidden),h=(b,E)=>re.createElement(G_e,Object.assign({key:b.id},b,{onContextMenuClick:s,onClick:a,"data-index":E,checked:n===b.id})),p=XO({render:()=>re.createElement(Xa,{role:"menu",onClick:m,data:t})}),m=he.useCallback((b,E)=>{s==null||s(b,E),p==null||p.hide()},[t]),v=b=>{if(b.preventDefault(),b.stopPropagation(),!p)return;const S=document.elementsFromPoint(b.pageX,b.pageY).find(w=>w.classList.contains(w7));if(S){const w=S.getBoundingClientRect(),L=t.concat(),A=t.find(N=>N.id===(S==null?void 0:S.id));A&&L.unshift({id:S.id,icon:"check",name:A.name},{type:"divider"}),p.show({x:w.x+w.width/2,y:w.y+w.height},()=>re.createElement(Xa,{role:"menu",onClick:m,data:L}))}else p.show({x:b.pageX,y:b.pageY})};return re.createElement("div",{className:WC,onContextMenu:v,id:E_e},re.createElement("div",{className:iut},re.createElement(GS,{className:rut},re.createElement("ul",null,u.map(h))),re.createElement("ul",{className:out},d.map(h))))}const cut=je.resolve(mg),dut=je.resolve(C5),hut=il(cut,q_e,dut),S7=Bn("statusBar"),fut=gt(S7,"left-items"),gut=gt(S7,"right-items"),put=gt(S7,"item");function mut(i,e){return i.sortIndex!==void 0&&e.sortIndex!==void 0?i.sortIndex-e.sortIndex:0}var _ut=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function Y_e(i){const{className:e,onClick:t,id:n,name:r,data:o,render:s,style:a,role:u,title:d}=i,h=_ut(i,["className","onClick","id","name","data","render","style","role","title"]),f=mn(put,e),p={onClick:function(v){t==null||t(v,i)}},m=v1(h);return re.createElement("div",Object.assign({className:f,style:a,role:u,title:d,id:n.toString()},m),re.createElement("a",Object.assign({tabIndex:-1,title:r},p),s?s(i):r))}function Z_e(i){const{leftItems:e=[],contextMenu:t=[],onContextMenuClick:n,onClick:r,rightItems:o=[]}=i;let s;const a=he.useCallback((h,f)=>{n==null||n(h,f),s==null||s.dispose()},[t]),u=()=>re.createElement(Xa,{role:"menu",onClick:a,data:t});he.useEffect(()=>(t.length>0&&(s=G5({anchor:nw(`#${gre}`),render:u})),function(){s==null||s.dispose()}));const d=h=>h.sort(mut).map(f=>re.createElement(Y_e,Object.assign({key:f.id},f,{onClick:wK(f.onClick,r)})));return re.createElement("div",{className:S7,id:gre},re.createElement("div",{className:fut},d(e)),re.createElement("div",{className:gut},d(o)))}const vut=je.resolve(_g),but=je.resolve(S5),Cut=il(vut,Z_e,but),E7=Bn("panel"),yut=gt(E7,"header"),wut=gt(E7,"toolbar"),Sut=gt(E7,"container");function X_e(i){var e;const{data:t,current:n,toolbox:r,onTabChange:o,onToolbarClick:s,onClose:a}=i;let u=r||[];n&&n.toolbox&&(u=n.toolbox.concat(u));const d=typeof(n==null?void 0:n.renderPane)=="function"?(e=n==null?void 0:n.renderPane)===null||e===void 0?void 0:e.call(n,n):n==null?void 0:n.renderPane,h=t==null?void 0:t.sort((f,p)=>f.sortIndex&&p.sortIndex?f.sortIndex-p.sortIndex:0);return re.createElement("div",{className:E7},re.createElement("div",{className:yut},re.createElement(_Y,{activeTab:n==null?void 0:n.id,data:h,onSelectTab:o,onCloseTab:a}),re.createElement(eR,{className:wut,data:u,onClick:s})),re.createElement("div",{className:Sut,tabIndex:0},d))}const Eut=je.resolve(cC),Lut=je.resolve(w5),xut=il(Eut,X_e,Lut),Q_e=Bn("auxiliaryBar"),Dut=gt(Q_e,"container"),J_e=gt(Q_e,"tabs"),eve=gt(J_e,"tab"),Tut=_n(eve,"active");function Iut({children:i}){return re.createElement("div",{className:Dut},i)}function kut({mode:i,data:e,current:t,onClick:n}){return i==="default"?null:re.createElement("ul",{className:J_e},e==null?void 0:e.map(r=>re.createElement("li",{key:r.key,className:mn(eve,t===r.key&&Tut),onClick:()=>n==null?void 0:n(r.key)},r.title)))}const tve=je.resolve(SS),Nut=je.resolve(y5),Aut=il(tve,Iut),Out=il(tve,kut,Nut),Rut=Bn("mainBench"),L7=Bn("workbench"),Mut=Bn("compositeBar"),Put=mn(j5,aae()),Fut=_n(L7,"with-horizontal-menuBar"),But=_n(L7,"with-hidden-statusBar"),Wut=gt(L7,"display-activityBar"),Vut=je.resolve(E5),Hut=je.resolve(Wu);function nve(i){const{activityBar:e,auxiliaryBar:t,menuBar:n,panel:r,sidebar:o,statusBar:s,onPaneSizeChange:a,onWorkbenchDidMount:u,onHorizontalPaneSizeChange:d,splitPanePos:h,horizontalSplitPanePos:f}=i,p=()=>r.hidden?["100%",0]:r.panelMaximized?[0,"100%"]:f,m=()=>!o.hidden&&!t.hidden?h:o.hidden?t.hidden?[0,"100%",0]:[0,"auto",h[2]]:[h[0],"auto",0],v=()=>!o.hidden&&!t.hidden?!0:o.hidden?t.hidden?!1:[!1,!0]:[!0,!1],b=N=>{const H=[];H[0]=o.hidden?Number(h[0]):N[0],H[2]=t.hidden?Number(h[2]):N[2],H[1]=N.reduce((M,R)=>M+R,0)-H[0]-H[2],a==null||a(H)},E=!n.hidden&&n.mode===qa.vertical,S=!n.hidden&&n.mode===qa.horizontal,w=S?Fut:null,L=s.hidden?But:null,A=mn(L7,w,L);return he.useEffect(()=>{u==null||u()},[]),re.createElement("div",{id:vZ,className:Put,tabIndex:0},re.createElement("div",{className:A},re.createElement(s2,{visible:S},re.createElement(Ore,{mode:qa.horizontal})),re.createElement("div",{className:Rut},re.createElement("div",{className:Mut},re.createElement(s2,{visible:E},re.createElement(Ore,{mode:qa.vertical})),re.createElement(s2,{visible:!e.hidden,className:Wut},re.createElement(hut,null))),re.createElement(_A,{sizes:m(),split:"vertical",showSashes:v(),onChange:b},re.createElement(gp,{minSize:170,maxSize:"80%"},re.createElement(Dat,null)),re.createElement(_A,{sizes:p(),showSashes:!r.hidden&&!r.panelMaximized,allowResize:[!0,!1],split:"horizontal",onChange:d},re.createElement(gp,{minSize:"10%",maxSize:"80%"},re.createElement(_at,null)),re.createElement(xut,null)),re.createElement(gp,{minSize:100,maxSize:"80%"},re.createElement(Aut,null))),re.createElement(Out,null))),re.createElement(s2,{visible:!s.hidden},re.createElement(Cut,null)))}const $ut=il(Hut,nve,Vut),zut=je.resolve(rf),Uut=je.resolve(Wu),jut=je.resolve(mg),Kut=je.resolve(SS),Gut=je.resolve(Bp),qut=je.resolve(ES),Yut=je.resolve(m5),Zut=je.resolve($O),Xut=je.resolve(pg),Qut=je.resolve(P0),Jut=je.resolve(Il),ect=je.resolve(_g),tct=je.resolve(cC),nct=je.resolve(LS),ict=je.resolve(zO),rct=je.resolve(aC),oct=je.resolve(dC),sct=je.resolve(Uo),act=je.resolve(UO),lct=je.resolve(gg),nn=Object.freeze(Object.defineProperty({__proto__:null,ActivityBar:q_e,ActivityBarItem:G_e,get ActivityBarService(){return mg},get AuxiliaryBarService(){return SS},BuiltInColorTheme:h2,get BuiltinService(){return Uo},get ColorThemeService(){return aC},DEFAULT_THEME_CLASS_NAME:A4,Editor:SZ,EditorGroup:O_e,get EditorService(){return Il},get EditorTreeService(){return m5},get ExplorerService(){return Bp},get ExtensionService(){return UO},get FolderTreeService(){return ES},get LayoutService(){return Wu},get LocaleService(){return rf},MenuBar:V_e,get MenuBarService(){return P0},get NotificationService(){return LS},Panel:X_e,get PanelService(){return cC},get ProblemsService(){return zO},get SearchService(){return $O},get SettingsService(){return dC},Sidebar:F_e,get SidebarService(){return pg},StatusBar:Z_e,get StatusBarService(){return _g},StatusItem:Y_e,Workbench:nve,activityBar:jut,auxiliaryBar:Kut,builtin:sct,colorTheme:rct,component:nUe,editor:Jut,editorTree:Yut,event:b1e,explorer:Gut,extension:act,folderTree:qut,i18n:zut,layout:Uut,localize:ft,menuBar:Qut,model:Ynt,monaco:oUe,monacoService:lct,notification:nct,panel:tct,problems:ict,react:C1e,search:Zut,settings:oct,sidebar:Xut,statusBar:ect},Symbol.toStringTag,{value:"Module"})),uct={id:"ExtendsFolderTree",name:"Extends FolderTree",activate(){nn.folderTree.onRename(i=>{nn.folderTree.update({id:i,isEditable:!0})}),nn.folderTree.onUpdateFileName(i=>{const{id:e,name:t,location:n}=i;if(t){const r=(n==null?void 0:n.split("/"))||[];r[r.length-1]=t;const o=r.join("/");nn.folderTree.update(Object.assign(Object.assign({},i),{id:e,location:o,isEditable:!1}));const s=nn.editor.getGroupIdByTab(e.toString());if(!!s||s===0){const u=nn.editor.getTabById(e.toString(),s),d={id:e.toString(),name:t},h=u==null?void 0:u.data;h&&h.path&&(d.data=Object.assign(Object.assign({},h),{path:o})),nn.editor.updateTab(d)}}else{const r=nn.folderTree.get(e);r!=null&&r.name?nn.folderTree.update({id:e,isEditable:!1}):nn.folderTree.remove(e)}}),nn.folderTree.onExpandKeys(i=>{nn.folderTree.setExpandKeys(i)})},dispose(){}},cct={id:"ExtendsActivityBar",name:"Extend The Default ActivityBar",activate(i){nn.activityBar.onChange((e,t)=>{if(t!==e){nn.activityBar.setActive(t),nn.sidebar.setActive(t);const{sidebar:n}=nn.layout.getState();n.hidden&&i.executeCommand(Vh.ID,t)}else i.executeCommand(Vh.ID,t)})},dispose(){}},dct={id:"ExtendsPanel",name:"Extends Panel",activate(i){nn.panel.onTabClose(e=>{const{data:t=[],current:n}=nn.panel.getState();if((n==null?void 0:n.id)===e){const r=t.findIndex(a=>a.id===e),o=r===t.length-1?t.length-2:r+1,s=t[o];s&&nn.panel.open(s)}nn.panel.remove(e)})},dispose(){}},hct=function(i){nn.explorer.removePanel(i.id)},fct={id:"ExtendsExplorer",name:"Extends Explorer",activate(){nn.explorer.onRemovePanel(hct)},dispose(){}},gct={id:"ExtendsEditorTree",name:"Extends Editor Tree",dispose(){},activate(){nn.editorTree.onSelect((i,e)=>{nn.editor.setActive(e,i)}),nn.editorTree.onClose((i,e)=>{nn.editor.closeTab(i,e)}),nn.editorTree.onCloseOthers((i,e)=>{nn.editor.closeOther(i,e)}),nn.editorTree.onCloseAll(i=>{if(i)nn.editor.closeAll(i);else{const{groups:e}=nn.editor.getState();e==null||e.forEach(t=>{nn.editor.closeAll(t.id)})}})}},pct="theme-defaults",mct="%displayName%",_ct="%description%",vct=["Themes"],bct="1.0.0",Cct="vscode",yct="MIT",wct={vscode:"*"},Sct={themes:[{id:"Default Dark+",label:"Dark+ (default dark)",uiTheme:"vs-dark",path:"./themes/dark_plus.json"},{id:"Default Light+",label:"Light+ (default light)",uiTheme:"vs",path:"./themes/light_plus.json"},{id:"Visual Studio Dark",label:"Dark (Visual Studio)",uiTheme:"vs-dark",path:"./themes/dark_vs.json"},{id:"Visual Studio Light",label:"Light (Visual Studio)",uiTheme:"vs",path:"./themes/light_vs.json"},{id:"Default High Contrast",label:"High Contrast",uiTheme:"hc-black",path:"./themes/hc_black.json"}],iconThemes:[{id:"vs-minimal",label:"Minimal (Visual Studio Code)",path:"./fileicons/vs_minimal-icon-theme.json"}]},Ect={name:pct,displayName:mct,description:_ct,categories:vct,version:bct,publisher:Cct,license:yct,engines:wct,contributes:Sct},Lct="vscode://schemas/color-theme",xct="Dark Default Colors",Dct={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#1E1E1E","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroupHeader.tabsBackground":"#252526","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","icon.foreground":"#C5C5C5","input.placeholderForeground":"#A6A6A6","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#094771","list.dropBackground":"#383B3D","list.focusOutline":"#007FD4","list.hoverBackground":"#2A2D2E","list.inactiveSelectionBackground":"#37373D","menu.background":"#252526","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.separatorBackground":"#BBBBBB","minimapSlider.activeBackground":"#bfbfbf66","minimapSlider.background":"#79797980","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#393939","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#e7e7e799","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","sash.hoverBorder":"#007FD4","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","sideBarTitle.foreground":"#BBBBBB","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#1E1E1E","tab.activeForeground":"#fff","tab.border":"#252526","tab.inactiveBackground":"#2d2d2d","tab.inactiveForeground":"#ffffff80","tree.indentGuidesStroke":"#585858"},Tct=!0,Ict={$schema:Lct,name:xct,colors:Dct,semanticHighlighting:Tct},kct="vscode://schemas/color-theme",Nct="Light Default Colors",Act={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#FFFFFF","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","icon.foreground":"#424242","input.placeholderForeground":"#767676","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#0060C0","list.focusOutline":"#0090F1","list.hoverBackground":"#E8E8E8","list.inactiveSelectionBackground":"#E4E6F1","menu.selectionBackground":"#0060C0","menu.separatorBackground":"#888888","minimapSlider.activeBackground":"#00000099","minimapSlider.background":"#64646480","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#fff","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242bf","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#BF8803","sash.hoverBorder":"#0090F1","searchEditor.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#61616130","sideBarTitle.foreground":"#6F6F6F","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#fffffe","tab.activeForeground":"#333333","tab.border":"#f3f3f3","tab.inactiveBackground":"#ececec","tab.inactiveForeground":"#333333b3","tree.indentGuidesStroke":"#a9a9a9"},Oct=!0,Rct={$schema:kct,name:Nct,colors:Act,semanticHighlighting:Oct},Mct="vscode://schemas/color-theme",Pct="High Contrast Default Colors",Fct={"editor.background":"#000000","editor.foreground":"#FFFFFF","editorIndentGuide.activeBackground":"#FFFFFF","editorIndentGuide.background":"#FFFFFF","sash.hoverBorder":"#F38518","sideBarTitle.foreground":"#FFFFFF","statusBarItem.remoteBackground":"#00000000","tree.indentGuidesStroke":"#a9a9a9"},Bct=[{settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#7ca668"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#b46695"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold"}},{scope:"markup.heading",settings:{foreground:"#6796e6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{name:"brackets of XML/HTML tags",scope:["punctuation.definition.tag"],settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#ffffff"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#d4d4d4"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:"support.function.git-rebase",settings:{foreground:"#d4d4d4"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"coloring of the TS this",scope:"variable.language.this",settings:{foreground:"#569cd6"}}],Wct=!0,Vct={$schema:Mct,name:Pct,colors:Fct,settings:Bct,semanticHighlighting:Wct},Hct="vscode://schemas/color-theme",$ct="Dark+ (default dark)",zct="./dark_vs.json",Uct=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#51B6C4"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}],jct={$schema:Hct,name:$ct,include:zct,tokenColors:Uct},Kct="vscode://schemas/color-theme",Gct="Dark (Visual Studio)",qct="./dark_defaults.json",Yct=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}}],Zct={$schema:Kct,name:Gct,include:qct,tokenColors:Yct},Xct="vscode://schemas/color-theme",Qct="Light+ (default light)",Jct="./light_vs.json",edt=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#267f99"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#001080"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#328267"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#ff0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#ff0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}}],tdt={$schema:Xct,name:Qct,include:Jct,tokenColors:edt},ndt="vscode://schemas/color-theme",idt="Light (Visual Studio)",rdt="./light_defaults.json",odt=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#008000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#098658"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}}],sdt={$schema:ndt,name:idt,include:rdt,tokenColors:odt},adt="vscode://schemas/color-theme",ldt="Dark High Contrast",udt="./hc_black_defaults.json",cdt={"editor.selectionBackground":"#FFFFFF","selection.background":"#008000","statusBarItem.remoteBackground":"#00000000"},ddt=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.name.scope-resolution","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"HC Search Editor context line override",scope:"meta.resultLinePrefix.contextLinePrefix.search",settings:{foreground:"#CBEDCB"}}],hdt={$schema:adt,name:ldt,include:udt,colors:cdt,tokenColors:ddt};var NW;const ive=Ect,rve=Ict,ove=Rct,fdt=Vct,sve=jct;Object.assign(sve,rve);const ave=Zct;Object.assign(ave,rve);const lve=tdt;Object.assign(lve,ove);const uve=sdt;Object.assign(uve,ove);const cve=hdt;Object.assign(cve,fdt);const Ng=((NW=ive.contributes)===null||NW===void 0?void 0:NW.themes)||[],gdt=Ng[0],pdt=Ng[1],mdt=Ng[2],_dt=Ng[3],vdt=Ng[4];Ng[0]=Object.assign({},gdt,sve);Ng[1]=Object.assign({},pdt,lve);Ng[2]=Object.assign({},mdt,ave);Ng[3]=Object.assign({},_dt,uve);Ng[4]=Object.assign({},vdt,cve);const bdt="theme-monokai",Cdt="%displayName%",ydt="%description%",wdt="1.0.0",Sdt="vscode",Edt="MIT",Ldt={vscode:"*"},xdt={themes:[{id:"Monokai",label:"Monokai",uiTheme:"vs-dark",path:"./themes/monokai-color-theme.json"}]},Ddt={name:bdt,displayName:Cdt,description:ydt,version:wdt,publisher:Sdt,license:Edt,engines:Ldt,contributes:xdt},Tdt="dark",Idt={"dropdown.background":"#414339","list.activeSelectionBackground":"#75715E","quickInput.list.focusBackground":"#414339","dropdown.listBackground":"#1e1f1c","list.inactiveSelectionBackground":"#414339","list.hoverBackground":"#3e3d32","list.dropBackground":"#414339","list.highlightForeground":"#f8f8f2","button.background":"#75715E","editor.background":"#272822","editor.foreground":"#f8f8f2","selection.background":"#ccccc7","editor.selectionHighlightBackground":"#575b6180","editor.selectionBackground":"#878b9180","minimap.selectionHighlight":"#878b9180","minimap.background":"#272822","editor.wordHighlightBackground":"#4a4a7680","editor.wordHighlightStrongBackground":"#6a6a9680","editor.lineHighlightBackground":"#3e3d32","editorLineNumber.activeForeground":"#c2c2bf","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#464741","editorIndentGuide.background":"#464741","editorIndentGuide.activeBackground":"#767771","editorGroupHeader.tabsBackground":"#1e1f1c","editorGroup.dropBackground":"#41433980","tab.inactiveBackground":"#34352f","tab.border":"#1e1f1c","tab.inactiveForeground":"#ccccc7","tab.lastPinnedBorder":"#414339","widget.shadow":"#00000098","progressBar.background":"#75715E","badge.background":"#75715E","badge.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","panelTitle.activeForeground":"#f8f8f2","panelTitle.activeBorder":"#75715E","panelTitle.inactiveForeground":"#75715E","panel.border":"#414339","settings.focusedRowBackground":"#4143395A","titleBar.activeBackground":"#1e1f1c","statusBar.background":"#414339","statusBar.noFolderBackground":"#414339","statusBar.debuggingBackground":"#75715E","statusBarItem.remoteBackground":"#AC6218","activityBar.background":"#272822","activityBar.foreground":"#f8f8f2","sideBar.background":"#1e1f1c","sideBarSectionHeader.background":"#272822","menu.background":"#1e1f1c","menu.foreground":"#cccccc","pickerGroup.foreground":"#75715E","input.background":"#414339","inputOption.activeBorder":"#75715E",focusBorder:"#75715E","editorWidget.background":"#1e1f1c","debugToolBar.background":"#1e1f1c","diffEditor.insertedTextBackground":"#4b661680","diffEditor.removedTextBackground":"#90274A70","inputValidation.errorBackground":"#90274A","inputValidation.errorBorder":"#f92672","inputValidation.warningBackground":"#848528","inputValidation.warningBorder":"#e2e22e","inputValidation.infoBackground":"#546190","inputValidation.infoBorder":"#819aff","editorHoverWidget.background":"#414339","editorHoverWidget.border":"#75715E","editorSuggestWidget.background":"#272822","editorSuggestWidget.border":"#75715E","editorGroup.border":"#34352f","peekView.border":"#75715E","peekViewEditor.background":"#272822","peekViewResult.background":"#1e1f1c","peekViewTitle.background":"#1e1f1c","peekViewResult.selectionBackground":"#414339","peekViewResult.matchHighlightBackground":"#75715E","peekViewEditor.matchHighlightBackground":"#75715E","terminal.ansiBlack":"#333333","terminal.ansiRed":"#C4265E","terminal.ansiGreen":"#86B42B","terminal.ansiYellow":"#B3B42B","terminal.ansiBlue":"#6A7EC8","terminal.ansiMagenta":"#8C6BC8","terminal.ansiCyan":"#56ADBC","terminal.ansiWhite":"#e3e3dd","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightRed":"#f92672","terminal.ansiBrightGreen":"#A6E22E","terminal.ansiBrightYellow":"#e2e22e","terminal.ansiBrightBlue":"#819aff","terminal.ansiBrightMagenta":"#AE81FF","terminal.ansiBrightCyan":"#66D9EF","terminal.ansiBrightWhite":"#f8f8f2"},kdt=[{settings:{foreground:"#F8F8F2"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#F8F8F2"}},{name:"Comment",scope:"comment",settings:{foreground:"#88846f"}},{name:"String",scope:"string",settings:{foreground:"#E6DB74"}},{name:"Template Definition",scope:["punctuation.definition.template-expression","punctuation.section.embedded"],settings:{foreground:"#F92672"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#F8F8F2"}},{name:"Number",scope:"constant.numeric",settings:{foreground:"#AE81FF"}},{name:"Built-in constant",scope:"constant.language",settings:{foreground:"#AE81FF"}},{name:"User-defined constant",scope:"constant.character, constant.other",settings:{foreground:"#AE81FF"}},{name:"Variable",scope:"variable",settings:{fontStyle:"",foreground:"#F8F8F2"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#F92672"}},{name:"Storage",scope:"storage",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Storage type",scope:"storage.type",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Class name",scope:"entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution",settings:{fontStyle:"underline",foreground:"#A6E22E"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#A6E22E"}},{name:"Function name",scope:"entity.name.function",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Function argument",scope:"variable.parameter",settings:{fontStyle:"italic",foreground:"#FD971F"}},{name:"Tag name",scope:"entity.name.tag",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Library function",scope:"support.function",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library constant",scope:"support.constant",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library class/type",scope:"support.type, support.class",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Library variable",scope:"support.other.variable",settings:{fontStyle:""}},{name:"Invalid",scope:"invalid",settings:{fontStyle:"",foreground:"#F44747"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#F44747"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"constant.numeric.line-number.find-in-files - match",settings:{foreground:"#AE81FFA0"}},{scope:"entity.name.filename.find-in-files",settings:{foreground:"#E6DB74"}},{name:"Markup Quote",scope:"markup.quote",settings:{foreground:"#F92672"}},{name:"Markup Lists",scope:"markup.list",settings:{foreground:"#E6DB74"}},{name:"Markup Styling",scope:"markup.bold, markup.italic",settings:{foreground:"#66D9EF"}},{name:"Markup Inline",scope:"markup.inline.raw",settings:{fontStyle:"",foreground:"#FD971F"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#A6E22E"}},{name:"Markup Setext Header",scope:"markup.heading.setext",settings:{foreground:"#A6E22E",fontStyle:"bold"}},{name:"Markup Headings",scope:"markup.heading.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Quote",scope:"markup.quote.markdown",settings:{fontStyle:"italic",foreground:"#75715E"}},{name:"Markdown Bold",scope:"markup.bold.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Link Title/Description",scope:"string.other.link.title.markdown,string.other.link.description.markdown",settings:{foreground:"#AE81FF"}},{name:"Markdown Underline Link/Image",scope:"markup.underline.link.markdown,markup.underline.link.image.markdown",settings:{foreground:"#E6DB74"}},{name:"Markdown Emphasis",scope:"markup.italic.markdown",settings:{fontStyle:"italic"}},{name:"Markdown Punctuation Definition Link",scope:"markup.list.unnumbered.markdown, markup.list.numbered.markdown",settings:{foreground:"#f8f8f2"}},{name:"Markdown List Punctuation",scope:["punctuation.definition.list.begin.markdown"],settings:{foreground:"#A6E22E"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#FD971F"}}],Ndt=!0,Adt={type:Tdt,colors:Idt,tokenColors:kdt,semanticHighlighting:Ndt};var AW;const dve=Ddt,Odt=Adt,hve=((AW=dve.contributes)===null||AW===void 0?void 0:AW.themes)||[],Rdt=hve[0];hve[0]=Object.assign({},Rdt,Odt);const Mdt="material-palenight-theme",Pdt="whizkydee",Fdt="Olaolu Olawuyi <mrolaolu@gmail.com> (http://twitter.com/mrolaolu)",Bdt="Palenight Theme",Wdt="2.0.1",Vdt="An elegant and juicy material-inspired theme for Visual Studio Code.",Hdt={color:"#31364A",theme:"dark"},$dt="icon.png",zdt=["material theme","palenight","material","purple","dark"],Udt={url:"https://github.com/whizkydee/vscode-palenight-theme",type:"git"},jdt={url:"https://github.com/whizkydee/vscode-palenight-theme/issues"},Kdt="MIT",Gdt={vscode:"^1.12.0"},qdt={start:"nodemon --exec vsce package",build:"nodemon --watch src src"},Ydt=["Themes","Other"],Zdt={themes:[{id:"Palenight Mild Contrast",label:"Palenight (Mild Contrast)",uiTheme:"vs-dark",path:"./themes/palenight-mild-contrast.json"}]},Xdt={nodemon:"^1.12.1",vsce:"^1.31.0"},Qdt={publisherDisplayName:"Olaolu Olawuyi"},Jdt={name:Mdt,publisher:Pdt,author:Fdt,displayName:Bdt,version:Wdt,description:Vdt,galleryBanner:Hdt,icon:$dt,keywords:zdt,repository:Udt,bugs:jdt,license:Kdt,engines:Gdt,scripts:qdt,categories:Ydt,contributes:Zdt,devDependencies:Xdt,__metadata:Qdt},eht="Palenight (Mild Contrast)",tht="Olaolu Olawuyi",nht=["Olaolu Olawuyi <mrolaolu@gmail.com>"],iht="dark",rht="palenight-mild-contrast",oht={contrastActiveBorder:null,contrastBorder:"#2C2F40",focusBorder:"#2C2F40",foreground:"#ffffff","widget.shadow":"#232635","selection.background":"#3C435E",descriptionForeground:null,errorForeground:"#EF5350","button.background":"#7e57c2cc","button.foreground":"#ffffffcc","button.hoverBackground":"#7e57c2","dropdown.background":"#292D3E","dropdown.border":"#7e57c2","dropdown.foreground":"#ffffffcc","input.background":"#414863","input.border":"#7e57c2","input.foreground":"#ffffffcc","input.placeholderForeground":"#ffffffcc","inputOption.activeBorder":"#ffffffcc","inputValidation.errorBackground":"#ef5350f2","inputValidation.errorBorder":"#EF5350","inputValidation.infoBackground":"#64b5f6f2","inputValidation.infoBorder":"#64B5F6","inputValidation.warningBackground":"#ffca28f2","inputValidation.warningBorder":"#FFCA28","scrollbar.shadow":"#292D3E00","scrollbarSlider.activeBackground":"#694CA4cc","scrollbarSlider.background":"#694CA466","scrollbarSlider.hoverBackground":"#694CA4cc","badge.background":"#7e57c2","badge.foreground":"#ffffff","progress.background":"#7e57c2","list.activeSelectionBackground":"#7e57c2","list.activeSelectionForeground":"#ffffff","list.dropBackground":"#2E3245","list.focusBackground":"#0000002e","list.focusForeground":"#ffffff","list.highlightForeground":"#ffffff","list.hoverBackground":"#0000001a","list.hoverForeground":"#ffffff","list.inactiveSelectionBackground":"#929ac90d","list.inactiveSelectionForeground":"#929ac9","activityBar.background":"#242839","activityBar.dropBackground":"#7e57c2e3","activityBar.foreground":"#eeffff","activityBar.border":"#2E3243","activityBarBadge.background":"#7e57c2","activityBarBadge.foreground":"#ffffff","sideBar.background":"#25293A","sideBar.foreground":"#6C739A","sideBar.border":"#2C2F40","sideBarTitle.foreground":"#eeffff","sideBarSectionHeader.background":"#25293A","sideBarSectionHeader.foreground":"#eeffff","editorGroup.background":"#32374C","editorGroup.border":"#2E3245","editorGroup.dropBackground":"#7e57c273","editorGroupHeader.noTabsBackground":"#32374C","editorGroupHeader.tabsBackground":"#31364a","editorGroupHeader.tabsBorder":"#2C3041","tab.activeBackground":"#25293A","tab.activeForeground":"#eeffff","tab.border":"#272B3B","tab.activeBorder":"#2C3041","tab.unfocusedActiveBorder":"#2C3041","tab.inactiveBackground":"#31364A","tab.inactiveForeground":"#929ac9","tab.unfocusedActiveForeground":null,"tab.unfocusedInactiveForeground":null,"editor.background":"#292D3E","editor.foreground":"#BFC7D5","editorLineNumber.foreground":"#4c5374","editorLineNumber.activeForeground":"#eeffff","editorCursor.foreground":"#7e57c2","editorCursor.background":null,"editor.selectionBackground":"#7580B850","editor.selectionHighlightBackground":"#383D51","editor.inactiveSelectionBackground":"#7e57c25a","editor.wordHighlightBackground":"#32374D","editor.wordHighlightStrongBackground":"#2E3250","editor.findMatchBackground":"#7e57c25a","editor.findMatchHighlightBackground":"#2E3248","editor.findRangeHighlightBackground":null,"editor.hoverHighlightBackground":"#7e57c25a","editor.lineHighlightBackground":"#0003","editor.lineHighlightBorder":null,"editorLink.activeForeground":null,"editor.rangeHighlightBackground":"#7e57c25a","editorWhitespace.foreground":null,"editorIndentGuide.background":"#4E557980","editorRuler.foreground":null,"editorCodeLens.foreground":"#FFCA28","editorBracketMatch.background":null,"editorBracketMatch.border":null,"editorOverviewRuler.currentContentForeground":"#7e57c2","editorOverviewRuler.incomingContentForeground":"#7e57c2","editorOverviewRuler.commonContentForeground":"#7e57c2","editorError.foreground":"#EF5350","editorError.border":null,"editorWarning.foreground":"#FFCA28","editorWarning.border":null,"editorGutter.background":null,"editorGutter.modifiedBackground":"#e2b93d","editorGutter.addedBackground":"#9CCC65","editorGutter.deletedBackground":"#EF5350","diffEditor.insertedTextBackground":"#99b76d23","diffEditor.removedTextBackground":"#ef535033","editorWidget.background":"#31364a","editorWidget.border":null,"editorSuggestWidget.background":"#2C3043","editorSuggestWidget.border":"#2B2F40","editorSuggestWidget.foreground":"#bfc7d5","editorSuggestWidget.highlightForeground":"#ffffff","editorSuggestWidget.selectedBackground":"#7e57c2","editorHoverWidget.background":"#292D3E","editorHoverWidget.border":"#7e57c2","debugExceptionWidget.background":"#292D3E","debugExceptionWidget.border":"#7e57c2","editorMarkerNavigation.background":"#31364a","editorMarkerNavigationError.background":"#EF5350","editorMarkerNavigationWarning.background":"#FFCA28","peekView.border":"#7e57c2","peekViewEditor.background":"#232635","peekViewEditor.matchHighlightBackground":"#7e57c25a","peekViewResult.background":"#2E3245","peekViewResult.fileForeground":"#eeffff","peekViewResult.lineForeground":"#eeffff","peekViewResult.matchHighlightBackground":"#7e57c25a","peekViewResult.selectionBackground":"#2E3250","peekViewResult.selectionForeground":"#eeffff","peekViewTitle.background":"#292D3E","peekViewTitleDescription.foreground":"#697098","peekViewTitleLabel.foreground":"#eeffff","merge.currentHeaderBackground":"#7e57c25a","merge.currentContentBackground":null,"merge.incomingHeaderBackground":"#7e57c25a","merge.incomingContentBackground":null,"merge.border":null,"panel.background":"#25293A","panel.border":"#2C2F40","panelTitle.activeBorder":"#7e57c2","panelTitle.activeForeground":"#eeffff","panelTitle.inactiveForeground":"#bfc7d580","statusBar.background":"#25293A","statusBar.foreground":"#676E95","statusBar.border":"#2C3041","statusBar.debuggingBackground":"#202431","statusBar.debuggingForeground":null,"statusBar.debuggingBorder":"#1F2330","statusBar.noFolderForeground":null,"statusBar.noFolderBackground":"#292D3E","statusBar.noFolderBorder":"#25293A","statusBarItem.activeBackground":"#202431","statusBarItem.hoverBackground":"#202431","statusBarItem.prominentBackground":"#202431","statusBarItem.prominentHoverBackground":"#202431","titleBar.activeBackground":"#25293A","titleBar.activeForeground":"#eeefff","titleBar.border":"#2C3041","titleBar.inactiveBackground":"#30364c","titleBar.inactiveForeground":null,"notifications.background":"#292D3E","notifications.foreground":"#ffffffcc","notificationLink.foreground":"#80CBC4","extensionButton.prominentForeground":"#ffffffcc","extensionButton.prominentBackground":"#7e57c2cc","extensionButton.prominentHoverBackground":"#7e57c2","pickerGroup.foreground":"#d1aaff","pickerGroup.border":"#2E3245","terminal.ansiWhite":"#ffffff","terminal.ansiBlack":"#676E95","terminal.ansiBlue":"#82AAFF","terminal.ansiCyan":"#89DDFF","terminal.ansiGreen":"#a9c77d","terminal.ansiMagenta":"#C792EA","terminal.ansiRed":"#ff5572","terminal.ansiYellow":"#FFCB6B","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightBlack":"#676E95","terminal.ansiBrightBlue":"#82AAFF","terminal.ansiBrightCyan":"#89DDFF","terminal.ansiBrightGreen":"#C3E88D","terminal.ansiBrightMagenta":"#C792EA","terminal.ansiBrightRed":"#ff5572","terminal.ansiBrightYellow":"#FFCB6B","debugToolBar.background":"#292D3E","welcomePage.buttonBackground":null,"welcomePage.buttonHoverBackground":null,"walkThrough.embeddedEditorBackground":"#232635","gitDecoration.modifiedResourceForeground":"#e2c08de6","gitDecoration.deletedResourceForeground":"#EF535090","gitDecoration.untrackedResourceForeground":"#a9c77dff","gitDecoration.ignoredResourceForeground":"#69709890","gitDecoration.conflictingResourceForeground":"#FFEB95CC","editorActiveLineNumber.foreground":"#eeffff","breadcrumb.foreground":"#6c739a","breadcrumb.focusForeground":"#bfc7d5","breadcrumb.activeSelectionForeground":"#eeffff","breadcrumbPicker.background":"#292D3E"},sht=[{name:"Global settings",settings:{background:"#292D3E",foreground:"#bfc7d5"}},{name:"Comment",scope:"comment",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"String",scope:"string",settings:{foreground:"#C3E88D"}},{name:"String Quoted",scope:"string.quoted",settings:{foreground:"#C3E88D"}},{name:"String Unquoted",scope:"string.unquoted",settings:{foreground:"#bfc7d5"}},{name:"Support Constant Math",scope:"support.constant.math",settings:{foreground:"#ffcb6b"}},{name:"Number",scope:["constant.numeric","constant.character.numeric"],settings:{foreground:"#F78C6C"}},{name:"Built-in constant",scope:["constant.language","punctuation.definition.constant","variable.other.constant"],settings:{foreground:"#82AAFF"}},{name:"User-defined constant",scope:["constant.character","constant.other"],settings:{foreground:"#82AAFF"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#F78C6C"}},{name:"RegExp String",scope:["string.regexp","string.regexp keyword.other"],settings:{foreground:"#80CBC4"}},{name:"Comma in functions",scope:"meta.function punctuation.separator.comma",settings:{foreground:"#eeffff"}},{name:"Variable",scope:"variable",settings:{foreground:"#ffcb6b"}},{name:"Keyword",scope:["punctuation.accessor","keyword"],settings:{foreground:"#c792ea"}},{name:"Storage",scope:["storage","storage.type","meta.var.expr storage.type","storage.type.property.js","storage.type.property.ts","storage.type.property.tsx","meta.class meta.method.declaration meta.var.expr storage.type.js"],settings:{foreground:"#c792ea"}},{name:"Class name",scope:["entity.name.class","meta.class entity.name.type.class"],settings:{foreground:"#ffcb6b"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{foreground:"#a9c77d"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Function Parameters",scope:"variable.parameter",settings:{foreground:"#7986E7"}},{name:"Meta Tag",scope:["punctuation.definition.tag","meta.tag"],settings:{foreground:"#89DDFF"}},{name:"HTML Tag names",scope:["entity.name.tag support.class.component","meta.tag.other.html","meta.tag.other.js","meta.tag.other.tsx","entity.name.tag.tsx","entity.name.tag.js","entity.name.tag","meta.tag.js","meta.tag.tsx","meta.tag.html"],settings:{foreground:"#ff5572"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{foreground:"#ffcb6b"}},{name:"Entity Name Tag Custom",scope:"entity.name.tag.custom",settings:{foreground:"#ffcb6b"}},{name:"Library (function & constant)",scope:["support.function","support.constant"],settings:{foreground:"#82AAFF"}},{name:"Support Constant Property Value meta",scope:"support.constant.meta.property-value",settings:{foreground:"#89DDFF"}},{name:"Library class/type",scope:["support.type","support.class"],settings:{foreground:"#ffcb6b"}},{name:"Support Variable DOM",scope:"support.variable.dom",settings:{foreground:"#ffcb6b"}},{name:"Invalid",scope:"invalid",settings:{background:"#ff2c83",foreground:"#ffffff"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#ffffff",background:"#d3423e"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Relational",scope:"keyword.operator.relational",settings:{foreground:"#c792ea"}},{name:"Keyword Operator Assignment",scope:"keyword.operator.assignment",settings:{foreground:"#c792ea"}},{name:"Double-Slashed Comment",scope:"comment.line.double-slash",settings:{foreground:"#697098"}},{name:"Object",scope:"object",settings:{foreground:"#cdebf7"}},{name:"Null",scope:"constant.language.null",settings:{foreground:"#ff5874"}},{name:"Meta Brace",scope:"meta.brace",settings:{foreground:"#bfc7d5"}},{name:"Meta Delimiter Period",scope:"meta.delimiter.period",settings:{foreground:"#c792ea"}},{name:"Punctuation Definition String",scope:"punctuation.definition.string",settings:{foreground:"#d9f5dd"}},{name:"Boolean",scope:"constant.language.boolean",settings:{foreground:"#ff5874"}},{name:"Object Comma",scope:"object.comma",settings:{foreground:"#ffffff"}},{name:"Variable Parameter Function",scope:"variable.parameter.function",settings:{foreground:"#89DDFF"}},{name:"Support Type Property Name & entity name tags",scope:["support.type.vendored.property-name","support.constant.vendored.property-value","support.type.property-name","meta.property-list entity.name.tag"],settings:{foreground:"#80CBC4"}},{name:"Entity Name tag reference in stylesheets",scope:"meta.property-list entity.name.tag.reference",settings:{foreground:"#ff5572"}},{name:"Constant Other Color RGB Value Punctuation Definition Constant",scope:"constant.other.color.rgb-value punctuation.definition.constant",settings:{foreground:"#F78C6C"}},{name:"Constant Other Color",scope:"constant.other.color",settings:{foreground:"#FFEB95"}},{name:"Keyword Other Unit",scope:"keyword.other.unit",settings:{foreground:"#FFEB95"}},{name:"Meta Selector",scope:"meta.selector",settings:{foreground:"#c792ea"}},{name:"Entity Other Attribute Name Id",scope:"entity.other.attribute-name.id",settings:{foreground:"#FAD430"}},{name:"Meta Property Name",scope:"meta.property-name",settings:{foreground:"#80CBC4"}},{name:"Doctypes",scope:["entity.name.tag.doctype","meta.tag.sgml.doctype"],settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Punctuation Definition Parameters",scope:"punctuation.definition.parameters",settings:{foreground:"#d9f5dd"}},{name:"Keyword Control Operator",scope:"keyword.control.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Logical",scope:"keyword.operator.logical",settings:{foreground:"#c792ea"}},{name:"Variable Instances",scope:["variable.instance","variable.other.instance","variable.reaedwrite.instance","variable.other.readwrite.instance"],settings:{foreground:"#ff5572"}},{name:"Variable Property Other",scope:["variable.other.property","variable.other.object.property"],settings:{foreground:"#89DDFF"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Keyword Operator Comparison",scope:"keyword.operator.comparison",settings:{foreground:"#c792ea"}},{name:"Support Constant, `new` keyword, Special Method Keyword",scope:["support.constant","keyword.other.special-method","keyword.other.new"],settings:{foreground:"#89DDFF"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#89DDFF"}},{name:"Invalid Broken",scope:"invalid.broken",settings:{foreground:"#020e14",background:"#F78C6C"}},{name:"Invalid Unimplemented",scope:"invalid.unimplemented",settings:{background:"#8BD649",foreground:"#ffffff"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#ffffff",background:"#ec5f67"}},{name:"Language Variable",scope:"variable.language",settings:{foreground:"#ff5572"}},{name:"Support Variable Property",scope:"support.variable.property",settings:{foreground:"#89DDFF"}},{name:"Variable Function",scope:"variable.function",settings:{foreground:"#82AAFF"}},{name:"Variable Interpolation",scope:"variable.interpolation",settings:{foreground:"#ec5f67"}},{name:"Meta Function Call",scope:"meta.function-call",settings:{foreground:"#82AAFF"}},{name:"Punctuation Section Embedded",scope:"punctuation.section.embedded",settings:{foreground:"#d3423e"}},{name:"Punctuation Tweaks",scope:["punctuation.terminator.expression","punctuation.definition.arguments","punctuation.definition.array","punctuation.section.array","meta.array"],settings:{foreground:"#bfc7d5"}},{name:"More Punctuation Tweaks",scope:["punctuation.definition.list.begin","punctuation.definition.list.end","punctuation.separator.arguments","punctuation.definition.list"],settings:{foreground:"#d9f5dd"}},{name:"Template Strings",scope:"string.template meta.template.expression",settings:{foreground:"#d3423e"}},{name:"Backtics(``) in Template Strings",scope:"string.template punctuation.definition.string",settings:{foreground:"#bfc7d5"}},{name:"Italics",scope:"italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Bold",scope:"bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Quote",scope:"quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Raw Code",scope:"raw",settings:{foreground:"#80CBC4"}},{name:"CoffeScript Variable Assignment",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"CoffeScript Parameter Function",scope:"variable.parameter.function.coffee",settings:{foreground:"#bfc7d5"}},{name:"CoffeeScript Assignments",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"C# Readwrite Variables",scope:"variable.other.readwrite.cs",settings:{foreground:"#bfc7d5"}},{name:"C# Classes & Storage types",scope:["entity.name.type.class.cs","storage.type.cs"],settings:{foreground:"#82AAFF"}},{name:"C# Namespaces",scope:"entity.name.type.namespace.cs",settings:{foreground:"#B2CCD6"}},{name:"Tag names in Stylesheets",scope:["entity.name.tag.css","entity.name.tag.less","entity.name.tag.custom.css"],settings:{foreground:"#ff5572"}},{name:"Wildcard(*) selector in Stylesheets",scope:["entity.name.tag.wildcard.css","entity.name.tag.wildcard.less","entity.name.tag.wildcard.scss","entity.name.tag.wildcard.sass"],settings:{foreground:"#ff5572"}},{name:"(C|SC|SA|LE)SS property value unit",scope:["keyword.other.unit.css","constant.length.units.css","keyword.other.unit.less","constant.length.units.less","keyword.other.unit.scss","constant.length.units.scss","keyword.other.unit.sass","constant.length.units.sass"],settings:{foreground:"#FFEB95"}},{name:"Attribute Name for CSS",scope:"meta.attribute-selector.css entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"punctuations in styled components",scope:["source.js source.css meta.property-list","source.js source.css punctuation.section","source.js source.css punctuation.terminator.rule","source.js source.css punctuation.definition.entity.end.bracket","source.js source.css punctuation.definition.entity.begin.bracket","source.js source.css punctuation.separator.key-value","source.js source.css punctuation.definition.attribute-selector","source.js source.css meta.property-list","source.js source.css meta.property-list punctuation.separator.comma","source.ts source.css punctuation.section","source.ts source.css punctuation.terminator.rule","source.ts source.css punctuation.definition.entity.end.bracket","source.ts source.css punctuation.definition.entity.begin.bracket","source.ts source.css punctuation.separator.key-value","source.ts source.css punctuation.definition.attribute-selector","source.ts source.css meta.property-list","source.ts source.css meta.property-list punctuation.separator.comma"],settings:{foreground:"#bfc7d5"}},{name:"Elixir Classes",scope:["source.elixir support.type.elixir","source.elixir meta.module.elixir entity.name.class.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir Functions",scope:"source.elixir entity.name.function",settings:{foreground:"#ffcb6b"}},{name:"Elixir Constants",scope:["source.elixir constant.other.symbol.elixir","source.elixir constant.other.keywords.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir String Punctuations",scope:"source.elixir punctuation.definition.string",settings:{foreground:"#a9c77d"}},{name:"Elixir",scope:["source.elixir variable.other.readwrite.module.elixir","source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir"],settings:{foreground:"#ffcb6b"}},{name:"Elixir Binary Punctuations",scope:"source.elixir .punctuation.binary.elixir",settings:{foreground:"#c792ea"}},{name:"Go Function Calls",scope:"source.go meta.function-call.go",settings:{foreground:"#DDDDDD"}},{name:"GraphQL Variables",scope:"variable.qraphql",settings:{foreground:"#bfc7d5"}},{name:"ID Attribute Name in HTML",scope:"entity.other.attribute-name.id.html",settings:{foreground:"#ffcb6b"}},{name:"HTML Punctuation Definition Tag",scope:"punctuation.definition.tag.html",settings:{foreground:"#89DDFF"}},{name:"HTML Doctype",scope:"meta.tag.sgml.doctype.html",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"JavaScript Classes",scope:"meta.class entity.name.type.class.js",settings:{foreground:"#ffcb8b"}},{name:"JavaScript Method Declaration e.g. `constructor`",scope:"meta.method.declaration storage.type.js",settings:{foreground:"#82AAFF",fontStyle:"normal"}},{name:"JavaScript Terminator",scope:"terminator.js",settings:{foreground:"#bfc7d5"}},{name:"JavaScript Meta Punctuation Definition",scope:"meta.js punctuation.definition.js",settings:{foreground:"#bfc7d5"}},{name:"Entity Names in Code Documentations",scope:["entity.name.type.instance.jsdoc","entity.name.type.instance.phpdoc"],settings:{foreground:"#eeffff"}},{name:"Other Variables in Code Documentations",scope:["variable.other.jsdoc","variable.other.phpdoc"],settings:{foreground:"#78ccf0"}},{name:"JavaScript module imports and exports",scope:["variable.other.meta.import.js","meta.import.js variable.other","variable.other.meta.export.js","meta.export.js variable.other"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variable Parameter Function",scope:"variable.parameter.function.js",settings:{foreground:"#7986E7"}},{name:"JavaScript Variable Other ReadWrite",scope:"variable.other.readwrite.js",settings:{foreground:"#bfc7d5"}},{name:"Text nested in React tags",scope:["meta.jsx.children","meta.jsx.children.js","meta.jsx.children.tsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript[React] Variable Other Object",scope:["variable.other.object.js","variable.other.object.jsx","meta.object-literal.key.js","meta.object-literal.key.jsx","variable.object.property.js","variable.object.property.jsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variables",scope:["variable.js","variable.other.js"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Entity Name Type",scope:["entity.name.type.js","entity.name.type.module.js"],settings:{foreground:"#ffcb8b"}},{name:"JavaScript Support Classes",scope:"support.class.js",settings:{foreground:"#bfc7d5"}},{name:"JSON Property Names",scope:"support.type.property-name.json",settings:{foreground:"#C3E88D",fontStyle:"normal"}},{name:"JSON Support Constants",scope:"support.constant.json",settings:{foreground:"#ffcb6b"}},{name:"JSON Property values (string)",scope:"meta.structure.dictionary.value.json string.quoted.double",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Strings in JSON values",scope:"string.quoted.double.json punctuation.definition.string.json",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Specific JSON Property values like null",scope:"meta.structure.dictionary.json meta.structure.dictionary.value constant.language",settings:{foreground:"#ff5874"}},{name:"Ruby Variables",scope:"variable.other.ruby",settings:{foreground:"#bfc7d5"}},{name:"Ruby Hashkeys",scope:"constant.language.symbol.hashkey.ruby",settings:{foreground:"#89DDFF"}},{name:"LESS Tag names",scope:"entity.name.tag.less",settings:{foreground:"#ff5572"}},{name:"Attribute Name for LESS",scope:"meta.attribute-selector.less entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#82b1ff"}},{name:"Markup Italics",scope:"markup.italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Markup Bold",scope:"markup.bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Markup Quote + others",scope:"markup.quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Markup Raw Code + others",scope:"markup.inline.raw",settings:{foreground:"#80CBC4"}},{name:"Markup Links",scope:["markup.underline.link","markup.underline.link.image"],settings:{foreground:"#ff869a"}},{name:"Markup Attributes",scope:["markup.meta.attribute-list"],settings:{foreground:"#a9c77d"}},{name:"Markup Admonitions",scope:"markup.admonition",settings:{fontStyle:"bold"}},{name:"Markup Lists",scope:"markup.list.bullet",settings:{foreground:"#D9F5DD"}},{name:"Markup Superscript and Subscript",scope:["markup.superscript","markup.subscript"],settings:{fontStyle:"italic"}},{name:"Markdown Link Title and Description",scope:["string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:"#bfc7d5"}},{name:"Markdown Punctuation",scope:["punctuation.definition.string.markdown","punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","meta.link.inline.markdown punctuation.definition.string"],settings:{foreground:"#82b1ff"}},{name:"Markdown MetaData Punctuation",scope:["punctuation.definition.metadata.markdown"],settings:{foreground:"#ff5572"}},{name:"Markdown List Punctuation",scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:"#82b1ff"}},{name:"Asciidoc Function",scope:"entity.name.function.asciidoc",settings:{foreground:"#F78C6C"}},{name:"PHP Variables",scope:"variable.other.php",settings:{foreground:"#bec5d4"}},{name:"Support Classes in PHP",scope:"support.class.php",settings:{foreground:"#ffcb8b"}},{name:"Punctuations in PHP function calls",scope:"meta.function-call.php punctuation",settings:{foreground:"#bfc7d5"}},{name:"PHP Global Variables",scope:"variable.other.global.php",settings:{foreground:"#ffcb6b"}},{name:"Declaration Punctuation in PHP Global Variables",scope:"variable.other.global.php punctuation.definition.variable",settings:{foreground:"#ffcb6b"}},{name:"Language Constants in Python",scope:"constant.language.python",settings:{foreground:"#ff5874"}},{name:"Python Function Parameter and Arguments",scope:["variable.parameter.function.python","meta.function-call.arguments.python"],settings:{foreground:"#7986E7"}},{name:"Python Function Call",scope:["meta.function-call.python","meta.function-call.generic.python"],settings:{foreground:"#B2CCD6"}},{name:"Punctuations in Python",scope:"punctuation.python",settings:{foreground:"#bfc7d5"}},{name:"Decorator Functions in Python",scope:"entity.name.function.decorator.python",settings:{foreground:"#ffcb6b"}},{name:"Python Language Variable",scope:"source.python variable.language.special",settings:{foreground:"#8EACE3"}},{name:"SCSS Variable",scope:["variable.scss","variable.sass","variable.parameter.url.scss","variable.parameter.url.sass"],settings:{foreground:"#DDDDDD"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#82AAFF"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#bec5d4"}},{name:"Attribute Name for SASS",scope:["meta.attribute-selector.scss entity.other.attribute-name.attribute","meta.attribute-selector.sass entity.other.attribute-name.attribute"],settings:{foreground:"#F78C6C"}},{name:"Tag names in SASS",scope:["entity.name.tag.scss","entity.name.tag.sass"],settings:{foreground:"#ff5572"}},{name:"TypeScript[React] Variables and Object Properties",scope:["variable.other.readwrite.alias.ts","variable.other.readwrite.alias.tsx","variable.other.readwrite.ts","variable.other.readwrite.tsx","variable.other.object.ts","variable.other.object.tsx","variable.object.property.ts","variable.object.property.tsx","variable.other.ts","variable.other.tsx","variable.tsx","variable.ts"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Entity Name Types",scope:["entity.name.type.ts","entity.name.type.tsx"],settings:{foreground:"#78ccf0"}},{name:"TypeScript[React] Node Classes",scope:["support.class.node.ts","support.class.node.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Entity Name Types as Parameters",scope:["meta.type.parameters.ts entity.name.type","meta.type.parameters.tsx entity.name.type"],settings:{foreground:"#eeffff"}},{name:"TypeScript[React] Import/Export Punctuations",scope:["meta.import.ts punctuation.definition.block","meta.import.tsx punctuation.definition.block","meta.export.ts punctuation.definition.block","meta.export.tsx punctuation.definition.block"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Punctuation Decorators",scope:["meta.decorator punctuation.decorator.ts","meta.decorator punctuation.decorator.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Punctuation Decorators",scope:"meta.tag.js meta.jsx.children.tsx",settings:{foreground:"#82AAFF"}},{name:"YAML Entity Name Tags",scope:"entity.name.tag.yaml",settings:{foreground:"#89DDFF"}},{name:"handlebars variables",scope:"variable.parameter.handlebars",settings:{foreground:"#bec5d4"}},{name:"handlebars parameters",scope:"entity.other.attribute-name.handlebars variable.parameter.handlebars",settings:{foreground:"#ffcb6b"}},{name:"handlebars enitity attribute names",scope:"entity.other.attribute-name.handlebars",settings:{foreground:"#89DDFF"}},{name:"handlebars enitity attribute values",scope:"entity.other.attribute-value.handlebars variable.parameter.handlebars",settings:{foreground:"#7986E7"}},{name:"normalize font style of certain components",scope:["meta.tag.js meta.embedded.expression.js punctuation.section.embedded.begin.js","meta.tag.js meta.embedded.expression.js punctuation.section.embedded.end.js","meta.property-list.css meta.property-value.css variable.other.less","punctuation.section.embedded.begin.js.jsx","punctuation.section.embedded.end.js.jsx","meta.property-list.scss variable.scss","meta.property-list.sass variable.sass","keyword.operator.logical","keyword.operator.arithmetic","keyword.operator.bitwise","keyword.operator.increment","keyword.operator.ternary","keyword.operator.comparison","keyword.operator.assignment","keyword.operator.operator","keyword.operator.or.regexp","keyword.operator.expression.in","keyword.operator.type","punctuation.section.embedded.js","punctuation.definintion.string","punctuation"],settings:{fontStyle:"normal"}}],aht={name:eht,author:tht,maintainers:nht,type:iht,semanticClass:rht,colors:oht,tokenColors:sht};var OW;const fve=Jdt,lht=aht,gve=((OW=fve.contributes)===null||OW===void 0?void 0:OW.themes)||[],uht=gve[0];gve[0]=Object.assign({},uht,lht);const cht="webstorm-intellij-darcula-theme",dht="Webstorm IntelliJ Darcula Theme",hht="A Darcula Theme designed by IntelliJ",fht="1.1.1",ght="xr0master",pht="MIT",mht="view.png",_ht={url:"https://github.com/xr0master/vscode-intellij-darcula-theme",type:"git"},vht={vscode:"^1.27.0"},bht=["Themes"],Cht={themes:[{id:"Webstorm IntelliJ Darcula Theme",label:"Webstorm IntelliJ Darcula Theme",uiTheme:"vs-dark",path:"./themes/darcula-color-theme.json"}]},yht={name:cht,displayName:dht,description:hht,version:fht,publisher:ght,license:pht,icon:mht,repository:_ht,engines:vht,categories:bht,contributes:Cht},wht="Webstorm IntelliJ Darcula Theme",Sht="dark",Eht={"activityBar.background":"#3c3f41","activityBar.border":"#4b4b4b","activityBar.foreground":"#ffffff","activityBarBadge.background":"#cc7832","dropdown.background":"#3c3f41","dropdown.border":"#4b4b4b","dropdown.foreground":"#bababa","editor.background":"#2b2b2b","editor.foreground":"#a9b7c6","editor.inactiveSelectionBackground":"#3a3d41","editor.lineHighlightBackground":"#323232","editor.selectionHighlightBackground":"#415a41","editorIndentGuide.activeBackground":"#606060","editorIndentGuide.background":"#4b4b4b","editorLineNumber.activeForeground":"#999999","editorLineNumber.foreground":"#606366","input.background":"#3c3f41","input.border":"#4b4b4b","input.foreground":"#bababa","input.placeholderForeground":"#a6a6a6","list.dropBackground":"#373a3c","menu.background":"#3c3f41","menu.foreground":"#bababa","panel.background":"#3c3f41","panel.border":"#4b4b4b","panelTitle.activeBorder":"#bababa","panelTitle.activeForeground":"#bababa","panelTitle.inactiveForeground":"#888888","scrollbarSlider.activeBackground":"#707070","scrollbarSlider.background":"#505050","scrollbarSlider.hoverBackground":"#676767","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBar.background":"#3c3f41","sideBar.border":"#4b4b4b","sideBar.foreground":"#bababa","sideBarSectionHeader.foreground":"#bababa","sideBarTitle.foreground":"#bababa","statusBar.background":"#3c3f41","statusBar.border":"#4b4b4b","statusBar.foreground":"#bababa","tab.activeBackground":"#515658","tab.activeBorder":"#bababa","tab.activeForeground":"#bababa","tab.border":"#4b4b4b","tab.inactiveBackground":"#3c3e3f","tab.inactiveForeground":"#a1a1a1","terminal.ansiBlack":"#ffffff","terminal.ansiBlue":"#5394ec","terminal.ansiBrightBlue":"#7eaef1","terminal.ansiBrightCyan":"#6cdada","terminal.ansiBrightGreen":"#a8c023","terminal.ansiBrightMagenta":"#ff99ff","terminal.ansiBrightRed":"#ff8785","terminal.ansiBrightYellow":"#ffff00","terminal.ansiCyan":"#299999","terminal.ansiGreen":"#a8c023","terminal.ansiMagenta":"#ae8abe","terminal.ansiRed":"#ff6b68","terminal.ansiWhite":"#1f1f1f","terminal.ansiYellow":"#d6bf55","terminal.background":"#2b2b2b","terminal.border":"#4b4b4b","widget.shadow":"#1a1a1aaa"},Lht=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.instanceof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow keywords",scope:"keyword.control",settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{scope:"string",settings:{foreground:"#6A8759"}},{scope:"keyword - keyword.operator",settings:{foreground:"#CC7832"}},{scope:"keyword.control",settings:{foreground:"#CC7832"}},{scope:"storage",settings:{foreground:"#CC7832"}},{scope:"storage.type",settings:{foreground:"#CC7832"}},{scope:"constant.numeric",settings:{foreground:"#6897BB"}},{scope:"entity.name.type",settings:{foreground:"#CC7832"}},{scope:"entity.name.class",settings:{foreground:"#CC7832"}},{scope:"support.type",settings:{foreground:"#CC7832"}},{scope:"support.class",settings:{foreground:"#CC7832"}},{scope:"entity.name.function",settings:{foreground:"#FFC66D"}},{scope:"support.function",settings:{foreground:"#FFC66D"}},{scope:"variable",settings:{foreground:"#9876AA"}},{scope:"entity.name.variable",settings:{foreground:"#9876AA"}},{name:"Comments",scope:["comment","comment.block","comment.line"],settings:{foreground:"#808080",fontStyle:"italic"}},{scope:["punctuation.terminator.statement","punctuation.separator.comma","punctuation.separator.parameter","punctuation.separator.dictionary.key-value.json","punctuation.separator.dictionary.key-value.json.comments","punctuation.separator.dictionary.pair.json","punctuation.separator.dictionary.pair.json.comments","punctuation.separator.array.json","punctuation.separator.array.json.comments","constant.character.escape","keyword.control.anchor.regexp"],settings:{foreground:"#CC7832"}},{name:"Global keywords",scope:["constant.language","keyword.control","keyword.operator.expression","keyword.operator.new","keyword.other.debugger","support.type","storage.type","storage.modifier","variable.language.super","variable.language.this"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"String",scope:["punctuation.definition.string","string.regexp","constant.other.character-class"],settings:{foreground:"#6A8759"}},{name:"Comment Documentation",scope:["comment.block.documentation","entity.name.type.instance.jsdoc","variable.other.jsdoc"],settings:{foreground:"#6A8759"}},{name:"JsDocs",scope:"storage.type.class.jsdoc",settings:{foreground:"#6A8759",fontStyle:"italic bold underline"}},{name:"Main Text Color",scope:["punctuation.accessor","punctuation.separator.key-value","punctuation.definition.block","variable.other.readwrite","variable.other.constant","variable.parameter","variable.other.object","variable.language.arguments","support.variable","support.variable.object","support.class","keyword","keyword.operator.logical","keyword.operator.optional","keyword.operator.type.annotation","entity.name.type","entity.other.inherited-class","constant.language.import-export-all","storage.type.function.arrow","meta.function.expression","meta.object.member","meta.brace.round","meta.brace.square"],settings:{foreground:"#A9B7C6"}},{name:"Veriables",scope:["meta.function-call","meta.object.member","variable.other.property","variable.other.object.property","meta.object-literal.key","support.variable.property"],settings:{foreground:"#9876AA"}},{name:"Constants",scope:["variable.other.constant.property","variable.other.constant.object.property"],settings:{foreground:"#9876AA",fontStyle:"italic"}},{name:"JSON",scope:["support.type.property-name","support.type.property-name.json.comments","punctuation.support.type.property-name.end.json.comments","punctuation.support.type.property-name.begin.json.comments"],settings:{foreground:"#9876AA",fontStyle:""}},{name:"Regexp Blocks",scope:["punctuation.definition.group.regexp","punctuation.definition.character-class.regexp","punctuation.definition.group.no-capture.regexp","punctuation.definition.group.assertion.regexp","constant.other.character-class.regexp"],settings:{foreground:"#FFC66D"}},{name:"Regex set and etc",scope:["constant.regexp","keyword.operator.quantifier.regexp"],settings:{foreground:"#6897BB"}},{name:"XML/HTML tags",scope:["keyword.other.doctype.xml","entity.name.tag","support.class","punctuation.definition.tag"],settings:{foreground:"#E8BF6A"}},{name:"XML/HTML attribute name",scope:["variable.language.documentroot.xml","entity.other.attribute-name","support.variable.dom.js"],settings:{foreground:"#BABABA"}},{name:"XML/HTML embedded section",scope:["punctuation.section.embedded"],settings:{foreground:"#a9b7c6"}},{name:"HTML attribute value",scope:"text.html.basic string",settings:{foreground:"#A5C261"}},{name:"Constant characters",scope:"constant.character.entity",settings:{foreground:"#6D9CBE"}},{name:"YAML comments",scope:"comment.line.number-sign.yaml",settings:{foreground:"#629755",fontStyle:"italic"}},{name:"YAML key",scope:"entity.name.tag.yaml",settings:{foreground:"#CC7832"}},{name:"YAML block/text",scope:["source.yaml keyword.control","source.yaml constant.language","source.yaml storage.modifier.chomping-indicator","string.unquoted.plain.out.yaml","constant.numeric.integer.yaml"],settings:{foreground:"#A9B7C6",fontStyle:""}},{name:"YAML Anchor/Alias",scope:["entity.name.type.anchor.yaml","variable.other.alias.yaml"],settings:{foreground:"#E8BF6A"}},{name:"CSS/SCSS global key",scope:["keyword.other.important","keyword.other.default"],settings:{foreground:"#CC7832",fontStyle:""}},{name:"CSS atribute/selector",scope:["entity.other.attribute-name.css","entity.other.attribute-name.id.css","entity.other.attribute-name.class.css","entity.other.attribute-name.pseudo-element.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.class.mixin.css","support.function.url.css","constant.other.unicode-range.css","support.constant.language-range.css","punctuation.definition.entity.css"],settings:{foreground:"#E8BF6A"}},{name:"CSS URL",scope:"variable.parameter.url.css",settings:{foreground:"#287BDE"}},{name:"CSS property name",scope:["support.type.property-name.css","support.type.vendored.property-name"],settings:{foreground:"#BABABA",fontStyle:""}},{name:"CSS tag name",scope:["entity.name.tag.css"],settings:{foreground:"#CC7832"}},{name:"CSS terminator",scope:["punctuation.terminator.rule.css"],settings:{foreground:"#CC7832"}},{name:"CSS colon/braces and etc",scope:["keyword.other.unit.percentage.css","punctuation.section.function.end.bracket.round.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.property-list.begin.bracket.curly.css","punctuation.section.property-list.end.bracket.curly.css","punctuation.definition.entity.begin.bracket.square.css","punctuation.definition.entity.end.bracket.square.css"],settings:{foreground:"#A9B7C6"}},{name:"CSS property value",scope:["support.constant.font-name.css","support.constant.color.w3c-standard-color-name.css","support.constant.property-value.css","keyword.other.unit.px.css","keyword.other.unit.em.css"],settings:{foreground:"#A5C261"}},{name:"CSS hex color",scope:"constant.other.color.rgb-value.hex.css",settings:{foreground:"#6897BB"}},{name:"CSS comma",scope:"punctuation.separator.list.comma.css",settings:{foreground:"#CC7832"}},{name:"Sass/SCSS variable",scope:"variable.scss",settings:{foreground:"#6D9CBE"}},{name:"Markdown",scope:["entity.name.section.markdown","punctuation.definition.heading"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"Markdown link",scope:"markup.underline.link",settings:{foreground:"#6D9CBE",fontStyle:"italic"}}],xht={name:wht,type:Sht,colors:Eht,tokenColors:Lht};var RW;const pve=yht,Dht=xht,mve=((RW=pve.contributes)===null||RW===void 0?void 0:RW.themes)||[],Tht=mve[0];mve[0]=Object.assign({},Tht,Dht);const Iht="github-plus-theme",kht="GitHub Plus Theme",Nht="A GitHub inspired color theme for VSCode code and interface!",Aht="1.4.2",Oht="thenikso",Rht="icon.png",Mht={type:"git",url:"https://github.com/thenikso/github-plus-theme"},Pht={url:"https://github.com/thenikso/github-plus-theme/issues"},Fht={vscode:"^1.16.0"},Bht=["Themes"],Wht={themes:[{id:"GitHub Plus",label:"GitHub Plus",uiTheme:"vs",path:"./themes/github-plus-theme.json"}]},Vht={publish:"vsce publish"},Hht={id:"d0db9e58-8cdf-49c5-87bf-02f037e10bb0",publisherDisplayName:"thenikso",publisherId:"e748af4a-d17d-4c3b-a7e1-2592de9a7e09"},$ht={name:Iht,displayName:kht,description:Nht,version:Aht,publisher:Oht,icon:Rht,repository:Mht,bugs:Pht,engines:Fht,categories:Bht,contributes:Wht,scripts:Vht,__metadata:Hht},zht="light",Uht={focusBorder:"#fafbfc","inputOption.activeBorder":"#e36209","editor.background":"#ffffff","editor.foreground":"#24292e","editor.lineHighlightBackground":"#fffbdd","editorIndentGuide.background":"#eeeeee","editorLineNumber.foreground":"#cccccc","editorBracketMatch.background":"#f1f8ff","editorBracketMatch.border":"#c8e1ff","titleBar.activeBackground":"#fafbfc","titleBar.border":"#e1e4e8","statusBar.foreground":"#24292e","statusBar.noFolderForeground":"#24292e","statusBar.background":"#fafbfc","statusBar.noFolderBackground":"#fafbfc","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#fafbfc","statusBar.debuggingForeground":"#24292e","activityBar.background":"#24292e","activityBar.foreground":"#fafbfc","activityBarBadge.background":"#54a3ff","sideBar.background":"#fafbfc","sideBar.foreground":"#586069","sideBar.border":"#e1e4e8","sideBarTitle.foreground":"#24292e","sideBarSectionHeader.background":"#F1F2F3","sideBarSectionHeader.foreground":"#24292e","notification.background":"#54a3ff","editorGroupHeader.tabsBackground":"#fafbfc","editorGroupHeader.tabsBorder":"#e1e4e8","tab.activeBackground":"#ffffff","tab.activeBorder":"#e36209","tab.inactiveBackground":"#fafbfc","tab.border":"#e1e4e8","tab.inactiveForeground":"#586069","scrollbar.shadow":"#00000000","quickInputList.focusBackground":"#e7e6e5","quickInputList.focusForeground":"#24292e","list.focusOutline":"#ffffff","list.highlightForeground":"#0066BF","list.focusHighlightForeground":"#0066BF","terminal.background":"#ffffff","terminal.foreground":"#333333","terminal.ansiBlack":"#414141","terminal.ansiRed":"#D73A49","terminal.ansiGreen":"#90D259","terminal.ansiYellow":"#F7C400","terminal.ansiBlue":"#005CC5","terminal.ansiMagenta":"#FF73FD","terminal.ansiCyan":"#0BC7D7","terminal.ansiWhite":"#BFBFBF","terminal.ansiBrightBlack":"#989898","terminal.ansiBrightRed":"#FA6F71","terminal.ansiBrightGreen":"#35D61C","terminal.ansiBrightYellow":"#FFCA39","terminal.ansiBrightBlue":"#1C23D6","terminal.ansiBrightMagenta":"#FF00FF","terminal.ansiBrightCyan":"#3CD7E7","terminal.ansiBrightWhite":"#E0E0E0","terminalCursor.foreground":"#363636"},jht=[{settings:{foreground:"#24292eff",background:"#ffffffff"}},{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:"#24292eff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:"#005cc5"}},{scope:["comment","markup.fenced_code","markup.inline"],settings:{foreground:"#6a737d"}},{scope:"string",settings:{foreground:"#032f62"}},{scope:["constant.numeric","constant.language","variable.language.this","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:"#005cc5"}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression","support.constant.property-value.css"],settings:{foreground:"#d73a49"}},{scope:"variable.parameter.function",settings:{foreground:"#E27F2D"}},{scope:["entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:"#6f42c1"}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","keyword.other.template"],settings:{foreground:"#22863a"}},{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:["token.error-token","invalid"],settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}},{scope:"markup.inserted",settings:{foreground:"#22863a"}},{scope:"markup.deleted",settings:{foreground:"#d73a49"}},{scope:"markup.changed",settings:{foreground:"#005cc5"}},{scope:"meta.diff.header",settings:{foreground:"#6a737d"}},{scope:["constant.numeric.css","support.function.misc.css","constant.other.color.rgb-value.hex.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.function.end.bracket.round.css"],settings:{foreground:"#353535"}}],Kht={type:zht,colors:Uht,tokenColors:jht};var MW;const _ve=$ht,Ght=Kht,vve=((MW=_ve.contributes)===null||MW===void 0?void 0:MW.themes)||[],qht=vve[0];vve[0]=Object.assign({},qht,Ght);const Yht={id:"ExtendsEditor",name:"Extends Editor",dispose(){},activate(){nn.editor.onCloseTab((i,e)=>{i!==void 0&&e!==void 0&&nn.editor.closeTab(i,e)}),nn.editor.onCloseAll(i=>{i!==void 0&&nn.editor.closeAll(i)}),nn.editor.onCloseOther((i,e)=>{i&&e!==void 0&&nn.editor.closeOther(i,e)}),nn.editor.onCloseToLeft((i,e)=>{i&&e!==void 0&&nn.editor.closeToLeft(i,e)}),nn.editor.onCloseToRight((i,e)=>{i&&e!==void 0&&nn.editor.closeToRight(i,e)})}},Zht=[dct,Yht,cct,fct,gct,CUe,ive,dve,fve,pve,_ve,uct];var qy;(function(i){i.beforeInit="before.init",i.beforeLoad="before.load"})(qy||(qy={}));class Xht extends NS{constructor(e){super(),this._config={extensions:Zht.concat(),defaultLocale:"en"},this.rendered=!1,this.initialLocaleService=t=>{const n=t.reduce((r,o)=>{var s;const a=((s=o.contributes)===null||s===void 0?void 0:s.languages)||[];return r.concat(a)},[]);nn.i18n.initialize(n,localStorage.getItem(Zz)||this._config.defaultLocale)},this.getConfig=()=>Object.assign({},this._config),this.render=t=>{if(!this.rendered){this.emit(qy.beforeInit);const[n,r]=nn.extension.splitLanguagesExts(this._config.extensions);this.initialLocaleService(n);const o=[C5,y5,v5,Cj,yj,Ej,DS,E5,xS,_j,wj,w5,vj,Sj,bj,b5,S5];nn.layout.onWorkbenchDidMount(()=>{this.rendered||(nn.monacoService.initWorkspace(nn.layout.container),Object.keys(o).forEach(s=>{var a;const u=o[s],d=je.resolve(u);(a=d.initView)===null||a===void 0||a.call(d)}),this.emit(qy.beforeLoad),nn.extension.load(r),this.rendered=!0)})}return t},this.onBeforeInit=t=>{this.subscribe(qy.beforeInit,t)},this.onBeforeLoad=t=>{this.subscribe(qy.beforeLoad,t)},e.defaultLocale&&(this._config.defaultLocale=e.defaultLocale),Array.isArray(e.extensions)&&this._config.extensions.push(...e.extensions)}}var Lj;(function(i){let e=null;function t(r){return e||(e=new Xht(r),e)}i.create=t;function n(){e=null}i.clearInstance=n})(Lj||(Lj={}));function Qht(i){return Lj.create(i)}function Pre(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bve={exports:{}},R4={exports:{}};const Jht={},eft=Object.freeze(Object.defineProperty({__proto__:null,default:Jht},Symbol.toStringTag,{value:"Module"})),Cve=Ive(eft);R4.exports;var Fre;function tft(){return Fre||(Fre=1,function(i){(function(e,t){function n($,I){if(!$)throw new Error(I||"Assertion failed")}function r($,I){$.super_=I;var O=function(){};O.prototype=I.prototype,$.prototype=new O,$.prototype.constructor=$}function o($,I,O){if(o.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((I==="le"||I==="be")&&(O=I,I=10),this._init($||0,I||10,O||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Cve.Buffer}catch{}o.isBN=function(I){return I instanceof o?!0:I!==null&&typeof I=="object"&&I.constructor.wordSize===o.wordSize&&Array.isArray(I.words)},o.max=function(I,O){return I.cmp(O)>0?I:O},o.min=function(I,O){return I.cmp(O)<0?I:O},o.prototype._init=function(I,O,B){if(typeof I=="number")return this._initNumber(I,O,B);if(typeof I=="object")return this._initArray(I,O,B);O==="hex"&&(O=16),n(O===(O|0)&&O>=2&&O<=36),I=I.toString().replace(/\s+/g,"");var W=0;I[0]==="-"&&(W++,this.negative=1),W<I.length&&(O===16?this._parseHex(I,W,B):(this._parseBase(I,O,W),B==="le"&&this._initArray(this.toArray(),O,B)))},o.prototype._initNumber=function(I,O,B){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[I&67108863],this.length=1):I<4503599627370496?(this.words=[I&67108863,I/67108864&67108863],this.length=2):(n(I<9007199254740992),this.words=[I&67108863,I/67108864&67108863,1],this.length=3),B==="le"&&this._initArray(this.toArray(),O,B)},o.prototype._initArray=function(I,O,B){if(n(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var j,U,G=0;if(B==="be")for(W=I.length-1,j=0;W>=0;W-=3)U=I[W]|I[W-1]<<8|I[W-2]<<16,this.words[j]|=U<<G&67108863,this.words[j+1]=U>>>26-G&67108863,G+=24,G>=26&&(G-=26,j++);else if(B==="le")for(W=0,j=0;W<I.length;W+=3)U=I[W]|I[W+1]<<8|I[W+2]<<16,this.words[j]|=U<<G&67108863,this.words[j+1]=U>>>26-G&67108863,G+=24,G>=26&&(G-=26,j++);return this.strip()};function a($,I){var O=$.charCodeAt(I);return O>=65&&O<=70?O-55:O>=97&&O<=102?O-87:O-48&15}function u($,I,O){var B=a($,O);return O-1>=I&&(B|=a($,O-1)<<4),B}o.prototype._parseHex=function(I,O,B){this.length=Math.ceil((I.length-O)/6),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var j=0,U=0,G;if(B==="be")for(W=I.length-1;W>=O;W-=2)G=u(I,O,W)<<j,this.words[U]|=G&67108863,j>=18?(j-=18,U+=1,this.words[U]|=G>>>26):j+=8;else{var z=I.length-O;for(W=z%2===0?O+1:O;W<I.length;W+=2)G=u(I,O,W)<<j,this.words[U]|=G&67108863,j>=18?(j-=18,U+=1,this.words[U]|=G>>>26):j+=8}this.strip()};function d($,I,O,B){for(var W=0,j=Math.min($.length,O),U=I;U<j;U++){var G=$.charCodeAt(U)-48;W*=B,G>=49?W+=G-49+10:G>=17?W+=G-17+10:W+=G}return W}o.prototype._parseBase=function(I,O,B){this.words=[0],this.length=1;for(var W=0,j=1;j<=67108863;j*=O)W++;W--,j=j/O|0;for(var U=I.length-B,G=U%W,z=Math.min(U,U-G)+B,k=0,K=B;K<z;K+=W)k=d(I,K,K+W,O),this.imuln(j),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k);if(G!==0){var fe=1;for(k=d(I,K,I.length,O),K=0;K<G;K++)fe*=O;this.imuln(fe),this.words[0]+k<67108864?this.words[0]+=k:this._iaddn(k)}this.strip()},o.prototype.copy=function(I){I.words=new Array(this.length);for(var O=0;O<this.length;O++)I.words[O]=this.words[O];I.length=this.length,I.negative=this.negative,I.red=this.red},o.prototype.clone=function(){var I=new o(null);return this.copy(I),I},o.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(I,O){I=I||10,O=O|0||1;var B;if(I===16||I==="hex"){B="";for(var W=0,j=0,U=0;U<this.length;U++){var G=this.words[U],z=((G<<W|j)&16777215).toString(16);j=G>>>24-W&16777215,j!==0||U!==this.length-1?B=h[6-z.length]+z+B:B=z+B,W+=2,W>=26&&(W-=26,U--)}for(j!==0&&(B=j.toString(16)+B);B.length%O!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}if(I===(I|0)&&I>=2&&I<=36){var k=f[I],K=p[I];B="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var ne=fe.modn(K).toString(I);fe=fe.idivn(K),fe.isZero()?B=ne+B:B=h[k-ne.length]+ne+B}for(this.isZero()&&(B="0"+B);B.length%O!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=this.words[1]*67108864:this.length===3&&this.words[2]===1?I+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(I,O){return n(typeof s<"u"),this.toArrayLike(s,I,O)},o.prototype.toArray=function(I,O){return this.toArrayLike(Array,I,O)},o.prototype.toArrayLike=function(I,O,B){var W=this.byteLength(),j=B||Math.max(1,W);n(W<=j,"byte array longer than desired length"),n(j>0,"Requested array length <= 0"),this.strip();var U=O==="le",G=new I(j),z,k,K=this.clone();if(U){for(k=0;!K.isZero();k++)z=K.andln(255),K.iushrn(8),G[k]=z;for(;k<j;k++)G[k]=0}else{for(k=0;k<j-W;k++)G[k]=0;for(k=0;!K.isZero();k++)z=K.andln(255),K.iushrn(8),G[j-k-1]=z}return G},Math.clz32?o.prototype._countBits=function(I){return 32-Math.clz32(I)}:o.prototype._countBits=function(I){var O=I,B=0;return O>=4096&&(B+=13,O>>>=13),O>=64&&(B+=7,O>>>=7),O>=8&&(B+=4,O>>>=4),O>=2&&(B+=2,O>>>=2),B+O},o.prototype._zeroBits=function(I){if(I===0)return 26;var O=I,B=0;return O&8191||(B+=13,O>>>=13),O&127||(B+=7,O>>>=7),O&15||(B+=4,O>>>=4),O&3||(B+=2,O>>>=2),O&1||B++,B},o.prototype.bitLength=function(){var I=this.words[this.length-1],O=this._countBits(I);return(this.length-1)*26+O};function m($){for(var I=new Array($.bitLength()),O=0;O<I.length;O++){var B=O/26|0,W=O%26;I[O]=($.words[B]&1<<W)>>>W}return I}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,O=0;O<this.length;O++){var B=this._zeroBits(this.words[O]);if(I+=B,B!==26)break}return I},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},o.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var O=0;O<I.length;O++)this.words[O]=this.words[O]|I.words[O];return this.strip()},o.prototype.ior=function(I){return n((this.negative|I.negative)===0),this.iuor(I)},o.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},o.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},o.prototype.iuand=function(I){var O;this.length>I.length?O=I:O=this;for(var B=0;B<O.length;B++)this.words[B]=this.words[B]&I.words[B];return this.length=O.length,this.strip()},o.prototype.iand=function(I){return n((this.negative|I.negative)===0),this.iuand(I)},o.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},o.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},o.prototype.iuxor=function(I){var O,B;this.length>I.length?(O=this,B=I):(O=I,B=this);for(var W=0;W<B.length;W++)this.words[W]=O.words[W]^B.words[W];if(this!==O)for(;W<O.length;W++)this.words[W]=O.words[W];return this.length=O.length,this.strip()},o.prototype.ixor=function(I){return n((this.negative|I.negative)===0),this.iuxor(I)},o.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},o.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},o.prototype.inotn=function(I){n(typeof I=="number"&&I>=0);var O=Math.ceil(I/26)|0,B=I%26;this._expand(O),B>0&&O--;for(var W=0;W<O;W++)this.words[W]=~this.words[W]&67108863;return B>0&&(this.words[W]=~this.words[W]&67108863>>26-B),this.strip()},o.prototype.notn=function(I){return this.clone().inotn(I)},o.prototype.setn=function(I,O){n(typeof I=="number"&&I>=0);var B=I/26|0,W=I%26;return this._expand(B+1),O?this.words[B]=this.words[B]|1<<W:this.words[B]=this.words[B]&~(1<<W),this.strip()},o.prototype.iadd=function(I){var O;if(this.negative!==0&&I.negative===0)return this.negative=0,O=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,O=this.isub(I),I.negative=1,O._normSign();var B,W;this.length>I.length?(B=this,W=I):(B=I,W=this);for(var j=0,U=0;U<W.length;U++)O=(B.words[U]|0)+(W.words[U]|0)+j,this.words[U]=O&67108863,j=O>>>26;for(;j!==0&&U<B.length;U++)O=(B.words[U]|0)+j,this.words[U]=O&67108863,j=O>>>26;if(this.length=B.length,j!==0)this.words[this.length]=j,this.length++;else if(B!==this)for(;U<B.length;U++)this.words[U]=B.words[U];return this},o.prototype.add=function(I){var O;return I.negative!==0&&this.negative===0?(I.negative=0,O=this.sub(I),I.negative^=1,O):I.negative===0&&this.negative!==0?(this.negative=0,O=I.sub(this),this.negative=1,O):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},o.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var O=this.iadd(I);return I.negative=1,O._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var B=this.cmp(I);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;var W,j;B>0?(W=this,j=I):(W=I,j=this);for(var U=0,G=0;G<j.length;G++)O=(W.words[G]|0)-(j.words[G]|0)+U,U=O>>26,this.words[G]=O&67108863;for(;U!==0&&G<W.length;G++)O=(W.words[G]|0)+U,U=O>>26,this.words[G]=O&67108863;if(U===0&&G<W.length&&W!==this)for(;G<W.length;G++)this.words[G]=W.words[G];return this.length=Math.max(this.length,G),W!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(I){return this.clone().isub(I)};function v($,I,O){O.negative=I.negative^$.negative;var B=$.length+I.length|0;O.length=B,B=B-1|0;var W=$.words[0]|0,j=I.words[0]|0,U=W*j,G=U&67108863,z=U/67108864|0;O.words[0]=G;for(var k=1;k<B;k++){for(var K=z>>>26,fe=z&67108863,ne=Math.min(k,I.length-1),be=Math.max(0,k-$.length+1);be<=ne;be++){var De=k-be|0;W=$.words[De]|0,j=I.words[be]|0,U=W*j+fe,K+=U/67108864|0,fe=U&67108863}O.words[k]=fe|0,z=K|0}return z!==0?O.words[k]=z|0:O.length--,O.strip()}var b=function(I,O,B){var W=I.words,j=O.words,U=B.words,G=0,z,k,K,fe=W[0]|0,ne=fe&8191,be=fe>>>13,De=W[1]|0,Ve=De&8191,rt=De>>>13,At=W[2]|0,Re=At&8191,ut=At>>>13,Ct=W[3]|0,Xe=Ct&8191,on=Ct>>>13,Kt=W[4]|0,dn=Kt&8191,Sn=Kt>>>13,Wn=W[5]|0,Jn=Wn&8191,oi=Wn>>>13,jn=W[6]|0,Pt=jn&8191,pn=jn>>>13,Ci=W[7]|0,Ie=Ci&8191,Fe=Ci>>>13,pt=W[8]|0,at=pt&8191,bt=pt>>>13,yi=W[9]|0,Vt=yi&8191,It=yi>>>13,Gt=j[0]|0,qt=Gt&8191,Bt=Gt>>>13,gr=j[1]|0,ei=gr&8191,He=gr>>>13,Ba=j[2]|0,Vn=Ba&8191,ti=Ba>>>13,qs=j[3]|0,vn=qs&8191,rr=qs>>>13,sl=j[4]|0,qi=sl&8191,Ye=sl>>>13,is=j[5]|0,ke=is&8191,Le=is>>>13,Ae=j[6]|0,se=Ae&8191,ae=Ae>>>13,pe=j[7]|0,J=pe&8191,ve=pe>>>13,$e=j[8]|0,Me=$e&8191,dt=$e>>>13,Yt=j[9]|0,T=Yt&8191,F=Yt>>>13;B.negative=I.negative^O.negative,B.length=19,z=Math.imul(ne,qt),k=Math.imul(ne,Bt),k=k+Math.imul(be,qt)|0,K=Math.imul(be,Bt);var te=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(te>>>26)|0,te&=67108863,z=Math.imul(Ve,qt),k=Math.imul(Ve,Bt),k=k+Math.imul(rt,qt)|0,K=Math.imul(rt,Bt),z=z+Math.imul(ne,ei)|0,k=k+Math.imul(ne,He)|0,k=k+Math.imul(be,ei)|0,K=K+Math.imul(be,He)|0;var ie=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(ie>>>26)|0,ie&=67108863,z=Math.imul(Re,qt),k=Math.imul(Re,Bt),k=k+Math.imul(ut,qt)|0,K=Math.imul(ut,Bt),z=z+Math.imul(Ve,ei)|0,k=k+Math.imul(Ve,He)|0,k=k+Math.imul(rt,ei)|0,K=K+Math.imul(rt,He)|0,z=z+Math.imul(ne,Vn)|0,k=k+Math.imul(ne,ti)|0,k=k+Math.imul(be,Vn)|0,K=K+Math.imul(be,ti)|0;var me=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(me>>>26)|0,me&=67108863,z=Math.imul(Xe,qt),k=Math.imul(Xe,Bt),k=k+Math.imul(on,qt)|0,K=Math.imul(on,Bt),z=z+Math.imul(Re,ei)|0,k=k+Math.imul(Re,He)|0,k=k+Math.imul(ut,ei)|0,K=K+Math.imul(ut,He)|0,z=z+Math.imul(Ve,Vn)|0,k=k+Math.imul(Ve,ti)|0,k=k+Math.imul(rt,Vn)|0,K=K+Math.imul(rt,ti)|0,z=z+Math.imul(ne,vn)|0,k=k+Math.imul(ne,rr)|0,k=k+Math.imul(be,vn)|0,K=K+Math.imul(be,rr)|0;var le=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(le>>>26)|0,le&=67108863,z=Math.imul(dn,qt),k=Math.imul(dn,Bt),k=k+Math.imul(Sn,qt)|0,K=Math.imul(Sn,Bt),z=z+Math.imul(Xe,ei)|0,k=k+Math.imul(Xe,He)|0,k=k+Math.imul(on,ei)|0,K=K+Math.imul(on,He)|0,z=z+Math.imul(Re,Vn)|0,k=k+Math.imul(Re,ti)|0,k=k+Math.imul(ut,Vn)|0,K=K+Math.imul(ut,ti)|0,z=z+Math.imul(Ve,vn)|0,k=k+Math.imul(Ve,rr)|0,k=k+Math.imul(rt,vn)|0,K=K+Math.imul(rt,rr)|0,z=z+Math.imul(ne,qi)|0,k=k+Math.imul(ne,Ye)|0,k=k+Math.imul(be,qi)|0,K=K+Math.imul(be,Ye)|0;var Te=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Te>>>26)|0,Te&=67108863,z=Math.imul(Jn,qt),k=Math.imul(Jn,Bt),k=k+Math.imul(oi,qt)|0,K=Math.imul(oi,Bt),z=z+Math.imul(dn,ei)|0,k=k+Math.imul(dn,He)|0,k=k+Math.imul(Sn,ei)|0,K=K+Math.imul(Sn,He)|0,z=z+Math.imul(Xe,Vn)|0,k=k+Math.imul(Xe,ti)|0,k=k+Math.imul(on,Vn)|0,K=K+Math.imul(on,ti)|0,z=z+Math.imul(Re,vn)|0,k=k+Math.imul(Re,rr)|0,k=k+Math.imul(ut,vn)|0,K=K+Math.imul(ut,rr)|0,z=z+Math.imul(Ve,qi)|0,k=k+Math.imul(Ve,Ye)|0,k=k+Math.imul(rt,qi)|0,K=K+Math.imul(rt,Ye)|0,z=z+Math.imul(ne,ke)|0,k=k+Math.imul(ne,Le)|0,k=k+Math.imul(be,ke)|0,K=K+Math.imul(be,Le)|0;var Pe=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,z=Math.imul(Pt,qt),k=Math.imul(Pt,Bt),k=k+Math.imul(pn,qt)|0,K=Math.imul(pn,Bt),z=z+Math.imul(Jn,ei)|0,k=k+Math.imul(Jn,He)|0,k=k+Math.imul(oi,ei)|0,K=K+Math.imul(oi,He)|0,z=z+Math.imul(dn,Vn)|0,k=k+Math.imul(dn,ti)|0,k=k+Math.imul(Sn,Vn)|0,K=K+Math.imul(Sn,ti)|0,z=z+Math.imul(Xe,vn)|0,k=k+Math.imul(Xe,rr)|0,k=k+Math.imul(on,vn)|0,K=K+Math.imul(on,rr)|0,z=z+Math.imul(Re,qi)|0,k=k+Math.imul(Re,Ye)|0,k=k+Math.imul(ut,qi)|0,K=K+Math.imul(ut,Ye)|0,z=z+Math.imul(Ve,ke)|0,k=k+Math.imul(Ve,Le)|0,k=k+Math.imul(rt,ke)|0,K=K+Math.imul(rt,Le)|0,z=z+Math.imul(ne,se)|0,k=k+Math.imul(ne,ae)|0,k=k+Math.imul(be,se)|0,K=K+Math.imul(be,ae)|0;var Ze=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,z=Math.imul(Ie,qt),k=Math.imul(Ie,Bt),k=k+Math.imul(Fe,qt)|0,K=Math.imul(Fe,Bt),z=z+Math.imul(Pt,ei)|0,k=k+Math.imul(Pt,He)|0,k=k+Math.imul(pn,ei)|0,K=K+Math.imul(pn,He)|0,z=z+Math.imul(Jn,Vn)|0,k=k+Math.imul(Jn,ti)|0,k=k+Math.imul(oi,Vn)|0,K=K+Math.imul(oi,ti)|0,z=z+Math.imul(dn,vn)|0,k=k+Math.imul(dn,rr)|0,k=k+Math.imul(Sn,vn)|0,K=K+Math.imul(Sn,rr)|0,z=z+Math.imul(Xe,qi)|0,k=k+Math.imul(Xe,Ye)|0,k=k+Math.imul(on,qi)|0,K=K+Math.imul(on,Ye)|0,z=z+Math.imul(Re,ke)|0,k=k+Math.imul(Re,Le)|0,k=k+Math.imul(ut,ke)|0,K=K+Math.imul(ut,Le)|0,z=z+Math.imul(Ve,se)|0,k=k+Math.imul(Ve,ae)|0,k=k+Math.imul(rt,se)|0,K=K+Math.imul(rt,ae)|0,z=z+Math.imul(ne,J)|0,k=k+Math.imul(ne,ve)|0,k=k+Math.imul(be,J)|0,K=K+Math.imul(be,ve)|0;var st=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(st>>>26)|0,st&=67108863,z=Math.imul(at,qt),k=Math.imul(at,Bt),k=k+Math.imul(bt,qt)|0,K=Math.imul(bt,Bt),z=z+Math.imul(Ie,ei)|0,k=k+Math.imul(Ie,He)|0,k=k+Math.imul(Fe,ei)|0,K=K+Math.imul(Fe,He)|0,z=z+Math.imul(Pt,Vn)|0,k=k+Math.imul(Pt,ti)|0,k=k+Math.imul(pn,Vn)|0,K=K+Math.imul(pn,ti)|0,z=z+Math.imul(Jn,vn)|0,k=k+Math.imul(Jn,rr)|0,k=k+Math.imul(oi,vn)|0,K=K+Math.imul(oi,rr)|0,z=z+Math.imul(dn,qi)|0,k=k+Math.imul(dn,Ye)|0,k=k+Math.imul(Sn,qi)|0,K=K+Math.imul(Sn,Ye)|0,z=z+Math.imul(Xe,ke)|0,k=k+Math.imul(Xe,Le)|0,k=k+Math.imul(on,ke)|0,K=K+Math.imul(on,Le)|0,z=z+Math.imul(Re,se)|0,k=k+Math.imul(Re,ae)|0,k=k+Math.imul(ut,se)|0,K=K+Math.imul(ut,ae)|0,z=z+Math.imul(Ve,J)|0,k=k+Math.imul(Ve,ve)|0,k=k+Math.imul(rt,J)|0,K=K+Math.imul(rt,ve)|0,z=z+Math.imul(ne,Me)|0,k=k+Math.imul(ne,dt)|0,k=k+Math.imul(be,Me)|0,K=K+Math.imul(be,dt)|0;var kt=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(kt>>>26)|0,kt&=67108863,z=Math.imul(Vt,qt),k=Math.imul(Vt,Bt),k=k+Math.imul(It,qt)|0,K=Math.imul(It,Bt),z=z+Math.imul(at,ei)|0,k=k+Math.imul(at,He)|0,k=k+Math.imul(bt,ei)|0,K=K+Math.imul(bt,He)|0,z=z+Math.imul(Ie,Vn)|0,k=k+Math.imul(Ie,ti)|0,k=k+Math.imul(Fe,Vn)|0,K=K+Math.imul(Fe,ti)|0,z=z+Math.imul(Pt,vn)|0,k=k+Math.imul(Pt,rr)|0,k=k+Math.imul(pn,vn)|0,K=K+Math.imul(pn,rr)|0,z=z+Math.imul(Jn,qi)|0,k=k+Math.imul(Jn,Ye)|0,k=k+Math.imul(oi,qi)|0,K=K+Math.imul(oi,Ye)|0,z=z+Math.imul(dn,ke)|0,k=k+Math.imul(dn,Le)|0,k=k+Math.imul(Sn,ke)|0,K=K+Math.imul(Sn,Le)|0,z=z+Math.imul(Xe,se)|0,k=k+Math.imul(Xe,ae)|0,k=k+Math.imul(on,se)|0,K=K+Math.imul(on,ae)|0,z=z+Math.imul(Re,J)|0,k=k+Math.imul(Re,ve)|0,k=k+Math.imul(ut,J)|0,K=K+Math.imul(ut,ve)|0,z=z+Math.imul(Ve,Me)|0,k=k+Math.imul(Ve,dt)|0,k=k+Math.imul(rt,Me)|0,K=K+Math.imul(rt,dt)|0,z=z+Math.imul(ne,T)|0,k=k+Math.imul(ne,F)|0,k=k+Math.imul(be,T)|0,K=K+Math.imul(be,F)|0;var Ft=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,z=Math.imul(Vt,ei),k=Math.imul(Vt,He),k=k+Math.imul(It,ei)|0,K=Math.imul(It,He),z=z+Math.imul(at,Vn)|0,k=k+Math.imul(at,ti)|0,k=k+Math.imul(bt,Vn)|0,K=K+Math.imul(bt,ti)|0,z=z+Math.imul(Ie,vn)|0,k=k+Math.imul(Ie,rr)|0,k=k+Math.imul(Fe,vn)|0,K=K+Math.imul(Fe,rr)|0,z=z+Math.imul(Pt,qi)|0,k=k+Math.imul(Pt,Ye)|0,k=k+Math.imul(pn,qi)|0,K=K+Math.imul(pn,Ye)|0,z=z+Math.imul(Jn,ke)|0,k=k+Math.imul(Jn,Le)|0,k=k+Math.imul(oi,ke)|0,K=K+Math.imul(oi,Le)|0,z=z+Math.imul(dn,se)|0,k=k+Math.imul(dn,ae)|0,k=k+Math.imul(Sn,se)|0,K=K+Math.imul(Sn,ae)|0,z=z+Math.imul(Xe,J)|0,k=k+Math.imul(Xe,ve)|0,k=k+Math.imul(on,J)|0,K=K+Math.imul(on,ve)|0,z=z+Math.imul(Re,Me)|0,k=k+Math.imul(Re,dt)|0,k=k+Math.imul(ut,Me)|0,K=K+Math.imul(ut,dt)|0,z=z+Math.imul(Ve,T)|0,k=k+Math.imul(Ve,F)|0,k=k+Math.imul(rt,T)|0,K=K+Math.imul(rt,F)|0;var Ot=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,z=Math.imul(Vt,Vn),k=Math.imul(Vt,ti),k=k+Math.imul(It,Vn)|0,K=Math.imul(It,ti),z=z+Math.imul(at,vn)|0,k=k+Math.imul(at,rr)|0,k=k+Math.imul(bt,vn)|0,K=K+Math.imul(bt,rr)|0,z=z+Math.imul(Ie,qi)|0,k=k+Math.imul(Ie,Ye)|0,k=k+Math.imul(Fe,qi)|0,K=K+Math.imul(Fe,Ye)|0,z=z+Math.imul(Pt,ke)|0,k=k+Math.imul(Pt,Le)|0,k=k+Math.imul(pn,ke)|0,K=K+Math.imul(pn,Le)|0,z=z+Math.imul(Jn,se)|0,k=k+Math.imul(Jn,ae)|0,k=k+Math.imul(oi,se)|0,K=K+Math.imul(oi,ae)|0,z=z+Math.imul(dn,J)|0,k=k+Math.imul(dn,ve)|0,k=k+Math.imul(Sn,J)|0,K=K+Math.imul(Sn,ve)|0,z=z+Math.imul(Xe,Me)|0,k=k+Math.imul(Xe,dt)|0,k=k+Math.imul(on,Me)|0,K=K+Math.imul(on,dt)|0,z=z+Math.imul(Re,T)|0,k=k+Math.imul(Re,F)|0,k=k+Math.imul(ut,T)|0,K=K+Math.imul(ut,F)|0;var yt=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(yt>>>26)|0,yt&=67108863,z=Math.imul(Vt,vn),k=Math.imul(Vt,rr),k=k+Math.imul(It,vn)|0,K=Math.imul(It,rr),z=z+Math.imul(at,qi)|0,k=k+Math.imul(at,Ye)|0,k=k+Math.imul(bt,qi)|0,K=K+Math.imul(bt,Ye)|0,z=z+Math.imul(Ie,ke)|0,k=k+Math.imul(Ie,Le)|0,k=k+Math.imul(Fe,ke)|0,K=K+Math.imul(Fe,Le)|0,z=z+Math.imul(Pt,se)|0,k=k+Math.imul(Pt,ae)|0,k=k+Math.imul(pn,se)|0,K=K+Math.imul(pn,ae)|0,z=z+Math.imul(Jn,J)|0,k=k+Math.imul(Jn,ve)|0,k=k+Math.imul(oi,J)|0,K=K+Math.imul(oi,ve)|0,z=z+Math.imul(dn,Me)|0,k=k+Math.imul(dn,dt)|0,k=k+Math.imul(Sn,Me)|0,K=K+Math.imul(Sn,dt)|0,z=z+Math.imul(Xe,T)|0,k=k+Math.imul(Xe,F)|0,k=k+Math.imul(on,T)|0,K=K+Math.imul(on,F)|0;var si=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(si>>>26)|0,si&=67108863,z=Math.imul(Vt,qi),k=Math.imul(Vt,Ye),k=k+Math.imul(It,qi)|0,K=Math.imul(It,Ye),z=z+Math.imul(at,ke)|0,k=k+Math.imul(at,Le)|0,k=k+Math.imul(bt,ke)|0,K=K+Math.imul(bt,Le)|0,z=z+Math.imul(Ie,se)|0,k=k+Math.imul(Ie,ae)|0,k=k+Math.imul(Fe,se)|0,K=K+Math.imul(Fe,ae)|0,z=z+Math.imul(Pt,J)|0,k=k+Math.imul(Pt,ve)|0,k=k+Math.imul(pn,J)|0,K=K+Math.imul(pn,ve)|0,z=z+Math.imul(Jn,Me)|0,k=k+Math.imul(Jn,dt)|0,k=k+Math.imul(oi,Me)|0,K=K+Math.imul(oi,dt)|0,z=z+Math.imul(dn,T)|0,k=k+Math.imul(dn,F)|0,k=k+Math.imul(Sn,T)|0,K=K+Math.imul(Sn,F)|0;var Hn=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,z=Math.imul(Vt,ke),k=Math.imul(Vt,Le),k=k+Math.imul(It,ke)|0,K=Math.imul(It,Le),z=z+Math.imul(at,se)|0,k=k+Math.imul(at,ae)|0,k=k+Math.imul(bt,se)|0,K=K+Math.imul(bt,ae)|0,z=z+Math.imul(Ie,J)|0,k=k+Math.imul(Ie,ve)|0,k=k+Math.imul(Fe,J)|0,K=K+Math.imul(Fe,ve)|0,z=z+Math.imul(Pt,Me)|0,k=k+Math.imul(Pt,dt)|0,k=k+Math.imul(pn,Me)|0,K=K+Math.imul(pn,dt)|0,z=z+Math.imul(Jn,T)|0,k=k+Math.imul(Jn,F)|0,k=k+Math.imul(oi,T)|0,K=K+Math.imul(oi,F)|0;var or=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(or>>>26)|0,or&=67108863,z=Math.imul(Vt,se),k=Math.imul(Vt,ae),k=k+Math.imul(It,se)|0,K=Math.imul(It,ae),z=z+Math.imul(at,J)|0,k=k+Math.imul(at,ve)|0,k=k+Math.imul(bt,J)|0,K=K+Math.imul(bt,ve)|0,z=z+Math.imul(Ie,Me)|0,k=k+Math.imul(Ie,dt)|0,k=k+Math.imul(Fe,Me)|0,K=K+Math.imul(Fe,dt)|0,z=z+Math.imul(Pt,T)|0,k=k+Math.imul(Pt,F)|0,k=k+Math.imul(pn,T)|0,K=K+Math.imul(pn,F)|0;var $i=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+($i>>>26)|0,$i&=67108863,z=Math.imul(Vt,J),k=Math.imul(Vt,ve),k=k+Math.imul(It,J)|0,K=Math.imul(It,ve),z=z+Math.imul(at,Me)|0,k=k+Math.imul(at,dt)|0,k=k+Math.imul(bt,Me)|0,K=K+Math.imul(bt,dt)|0,z=z+Math.imul(Ie,T)|0,k=k+Math.imul(Ie,F)|0,k=k+Math.imul(Fe,T)|0,K=K+Math.imul(Fe,F)|0;var Wa=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,z=Math.imul(Vt,Me),k=Math.imul(Vt,dt),k=k+Math.imul(It,Me)|0,K=Math.imul(It,dt),z=z+Math.imul(at,T)|0,k=k+Math.imul(at,F)|0,k=k+Math.imul(bt,T)|0,K=K+Math.imul(bt,F)|0;var al=(G+z|0)+((k&8191)<<13)|0;G=(K+(k>>>13)|0)+(al>>>26)|0,al&=67108863,z=Math.imul(Vt,T),k=Math.imul(Vt,F),k=k+Math.imul(It,T)|0,K=Math.imul(It,F);var Ag=(G+z|0)+((k&8191)<<13)|0;return G=(K+(k>>>13)|0)+(Ag>>>26)|0,Ag&=67108863,U[0]=te,U[1]=ie,U[2]=me,U[3]=le,U[4]=Te,U[5]=Pe,U[6]=Ze,U[7]=st,U[8]=kt,U[9]=Ft,U[10]=Ot,U[11]=yt,U[12]=si,U[13]=Hn,U[14]=or,U[15]=$i,U[16]=Wa,U[17]=al,U[18]=Ag,G!==0&&(U[19]=G,B.length++),B};Math.imul||(b=v);function E($,I,O){O.negative=I.negative^$.negative,O.length=$.length+I.length;for(var B=0,W=0,j=0;j<O.length-1;j++){var U=W;W=0;for(var G=B&67108863,z=Math.min(j,I.length-1),k=Math.max(0,j-$.length+1);k<=z;k++){var K=j-k,fe=$.words[K]|0,ne=I.words[k]|0,be=fe*ne,De=be&67108863;U=U+(be/67108864|0)|0,De=De+G|0,G=De&67108863,U=U+(De>>>26)|0,W+=U>>>26,U&=67108863}O.words[j]=G,B=U,U=W}return B!==0?O.words[j]=B:O.length--,O.strip()}function S($,I,O){var B=new w;return B.mulp($,I,O)}o.prototype.mulTo=function(I,O){var B,W=this.length+I.length;return this.length===10&&I.length===10?B=b(this,I,O):W<63?B=v(this,I,O):W<1024?B=E(this,I,O):B=S(this,I,O),B};function w($,I){this.x=$,this.y=I}w.prototype.makeRBT=function(I){for(var O=new Array(I),B=o.prototype._countBits(I)-1,W=0;W<I;W++)O[W]=this.revBin(W,B,I);return O},w.prototype.revBin=function(I,O,B){if(I===0||I===B-1)return I;for(var W=0,j=0;j<O;j++)W|=(I&1)<<O-j-1,I>>=1;return W},w.prototype.permute=function(I,O,B,W,j,U){for(var G=0;G<U;G++)W[G]=O[I[G]],j[G]=B[I[G]]},w.prototype.transform=function(I,O,B,W,j,U){this.permute(U,I,O,B,W,j);for(var G=1;G<j;G<<=1)for(var z=G<<1,k=Math.cos(2*Math.PI/z),K=Math.sin(2*Math.PI/z),fe=0;fe<j;fe+=z)for(var ne=k,be=K,De=0;De<G;De++){var Ve=B[fe+De],rt=W[fe+De],At=B[fe+De+G],Re=W[fe+De+G],ut=ne*At-be*Re;Re=ne*Re+be*At,At=ut,B[fe+De]=Ve+At,W[fe+De]=rt+Re,B[fe+De+G]=Ve-At,W[fe+De+G]=rt-Re,De!==z&&(ut=k*ne-K*be,be=k*be+K*ne,ne=ut)}},w.prototype.guessLen13b=function(I,O){var B=Math.max(O,I)|1,W=B&1,j=0;for(B=B/2|0;B;B=B>>>1)j++;return 1<<j+1+W},w.prototype.conjugate=function(I,O,B){if(!(B<=1))for(var W=0;W<B/2;W++){var j=I[W];I[W]=I[B-W-1],I[B-W-1]=j,j=O[W],O[W]=-O[B-W-1],O[B-W-1]=-j}},w.prototype.normalize13b=function(I,O){for(var B=0,W=0;W<O/2;W++){var j=Math.round(I[2*W+1]/O)*8192+Math.round(I[2*W]/O)+B;I[W]=j&67108863,j<67108864?B=0:B=j/67108864|0}return I},w.prototype.convert13b=function(I,O,B,W){for(var j=0,U=0;U<O;U++)j=j+(I[U]|0),B[2*U]=j&8191,j=j>>>13,B[2*U+1]=j&8191,j=j>>>13;for(U=2*O;U<W;++U)B[U]=0;n(j===0),n((j&-8192)===0)},w.prototype.stub=function(I){for(var O=new Array(I),B=0;B<I;B++)O[B]=0;return O},w.prototype.mulp=function(I,O,B){var W=2*this.guessLen13b(I.length,O.length),j=this.makeRBT(W),U=this.stub(W),G=new Array(W),z=new Array(W),k=new Array(W),K=new Array(W),fe=new Array(W),ne=new Array(W),be=B.words;be.length=W,this.convert13b(I.words,I.length,G,W),this.convert13b(O.words,O.length,K,W),this.transform(G,U,z,k,W,j),this.transform(K,U,fe,ne,W,j);for(var De=0;De<W;De++){var Ve=z[De]*fe[De]-k[De]*ne[De];k[De]=z[De]*ne[De]+k[De]*fe[De],z[De]=Ve}return this.conjugate(z,k,W),this.transform(z,k,be,U,W,j),this.conjugate(be,U,W),this.normalize13b(be,W),B.negative=I.negative^O.negative,B.length=I.length+O.length,B.strip()},o.prototype.mul=function(I){var O=new o(null);return O.words=new Array(this.length+I.length),this.mulTo(I,O)},o.prototype.mulf=function(I){var O=new o(null);return O.words=new Array(this.length+I.length),S(this,I,O)},o.prototype.imul=function(I){return this.clone().mulTo(I,this)},o.prototype.imuln=function(I){n(typeof I=="number"),n(I<67108864);for(var O=0,B=0;B<this.length;B++){var W=(this.words[B]|0)*I,j=(W&67108863)+(O&67108863);O>>=26,O+=W/67108864|0,O+=j>>>26,this.words[B]=j&67108863}return O!==0&&(this.words[B]=O,this.length++),this},o.prototype.muln=function(I){return this.clone().imuln(I)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(I){var O=m(I);if(O.length===0)return new o(1);for(var B=this,W=0;W<O.length&&O[W]===0;W++,B=B.sqr());if(++W<O.length)for(var j=B.sqr();W<O.length;W++,j=j.sqr())O[W]!==0&&(B=B.mul(j));return B},o.prototype.iushln=function(I){n(typeof I=="number"&&I>=0);var O=I%26,B=(I-O)/26,W=67108863>>>26-O<<26-O,j;if(O!==0){var U=0;for(j=0;j<this.length;j++){var G=this.words[j]&W,z=(this.words[j]|0)-G<<O;this.words[j]=z|U,U=G>>>26-O}U&&(this.words[j]=U,this.length++)}if(B!==0){for(j=this.length-1;j>=0;j--)this.words[j+B]=this.words[j];for(j=0;j<B;j++)this.words[j]=0;this.length+=B}return this.strip()},o.prototype.ishln=function(I){return n(this.negative===0),this.iushln(I)},o.prototype.iushrn=function(I,O,B){n(typeof I=="number"&&I>=0);var W;O?W=(O-O%26)/26:W=0;var j=I%26,U=Math.min((I-j)/26,this.length),G=67108863^67108863>>>j<<j,z=B;if(W-=U,W=Math.max(0,W),z){for(var k=0;k<U;k++)z.words[k]=this.words[k];z.length=U}if(U!==0)if(this.length>U)for(this.length-=U,k=0;k<this.length;k++)this.words[k]=this.words[k+U];else this.words[0]=0,this.length=1;var K=0;for(k=this.length-1;k>=0&&(K!==0||k>=W);k--){var fe=this.words[k]|0;this.words[k]=K<<26-j|fe>>>j,K=fe&G}return z&&K!==0&&(z.words[z.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(I,O,B){return n(this.negative===0),this.iushrn(I,O,B)},o.prototype.shln=function(I){return this.clone().ishln(I)},o.prototype.ushln=function(I){return this.clone().iushln(I)},o.prototype.shrn=function(I){return this.clone().ishrn(I)},o.prototype.ushrn=function(I){return this.clone().iushrn(I)},o.prototype.testn=function(I){n(typeof I=="number"&&I>=0);var O=I%26,B=(I-O)/26,W=1<<O;if(this.length<=B)return!1;var j=this.words[B];return!!(j&W)},o.prototype.imaskn=function(I){n(typeof I=="number"&&I>=0);var O=I%26,B=(I-O)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=B)return this;if(O!==0&&B++,this.length=Math.min(B,this.length),O!==0){var W=67108863^67108863>>>O<<O;this.words[this.length-1]&=W}return this.strip()},o.prototype.maskn=function(I){return this.clone().imaskn(I)},o.prototype.iaddn=function(I){return n(typeof I=="number"),n(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(this.words[0]|0)<I?(this.words[0]=I-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},o.prototype._iaddn=function(I){this.words[0]+=I;for(var O=0;O<this.length&&this.words[O]>=67108864;O++)this.words[O]-=67108864,O===this.length-1?this.words[O+1]=1:this.words[O+1]++;return this.length=Math.max(this.length,O+1),this},o.prototype.isubn=function(I){if(n(typeof I=="number"),n(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var O=0;O<this.length&&this.words[O]<0;O++)this.words[O]+=67108864,this.words[O+1]-=1;return this.strip()},o.prototype.addn=function(I){return this.clone().iaddn(I)},o.prototype.subn=function(I){return this.clone().isubn(I)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(I,O,B){var W=I.length+B,j;this._expand(W);var U,G=0;for(j=0;j<I.length;j++){U=(this.words[j+B]|0)+G;var z=(I.words[j]|0)*O;U-=z&67108863,G=(U>>26)-(z/67108864|0),this.words[j+B]=U&67108863}for(;j<this.length-B;j++)U=(this.words[j+B]|0)+G,G=U>>26,this.words[j+B]=U&67108863;if(G===0)return this.strip();for(n(G===-1),G=0,j=0;j<this.length;j++)U=-(this.words[j]|0)+G,G=U>>26,this.words[j]=U&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(I,O){var B=this.length-I.length,W=this.clone(),j=I,U=j.words[j.length-1]|0,G=this._countBits(U);B=26-G,B!==0&&(j=j.ushln(B),W.iushln(B),U=j.words[j.length-1]|0);var z=W.length-j.length,k;if(O!=="mod"){k=new o(null),k.length=z+1,k.words=new Array(k.length);for(var K=0;K<k.length;K++)k.words[K]=0}var fe=W.clone()._ishlnsubmul(j,1,z);fe.negative===0&&(W=fe,k&&(k.words[z]=1));for(var ne=z-1;ne>=0;ne--){var be=(W.words[j.length+ne]|0)*67108864+(W.words[j.length+ne-1]|0);for(be=Math.min(be/U|0,67108863),W._ishlnsubmul(j,be,ne);W.negative!==0;)be--,W.negative=0,W._ishlnsubmul(j,1,ne),W.isZero()||(W.negative^=1);k&&(k.words[ne]=be)}return k&&k.strip(),W.strip(),O!=="div"&&B!==0&&W.iushrn(B),{div:k||null,mod:W}},o.prototype.divmod=function(I,O,B){if(n(!I.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var W,j,U;return this.negative!==0&&I.negative===0?(U=this.neg().divmod(I,O),O!=="mod"&&(W=U.div.neg()),O!=="div"&&(j=U.mod.neg(),B&&j.negative!==0&&j.iadd(I)),{div:W,mod:j}):this.negative===0&&I.negative!==0?(U=this.divmod(I.neg(),O),O!=="mod"&&(W=U.div.neg()),{div:W,mod:U.mod}):this.negative&I.negative?(U=this.neg().divmod(I.neg(),O),O!=="div"&&(j=U.mod.neg(),B&&j.negative!==0&&j.isub(I)),{div:U.div,mod:j}):I.length>this.length||this.cmp(I)<0?{div:new o(0),mod:this}:I.length===1?O==="div"?{div:this.divn(I.words[0]),mod:null}:O==="mod"?{div:null,mod:new o(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new o(this.modn(I.words[0]))}:this._wordDiv(I,O)},o.prototype.div=function(I){return this.divmod(I,"div",!1).div},o.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},o.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},o.prototype.divRound=function(I){var O=this.divmod(I);if(O.mod.isZero())return O.div;var B=O.div.negative!==0?O.mod.isub(I):O.mod,W=I.ushrn(1),j=I.andln(1),U=B.cmp(W);return U<0||j===1&&U===0?O.div:O.div.negative!==0?O.div.isubn(1):O.div.iaddn(1)},o.prototype.modn=function(I){n(I<=67108863);for(var O=(1<<26)%I,B=0,W=this.length-1;W>=0;W--)B=(O*B+(this.words[W]|0))%I;return B},o.prototype.idivn=function(I){n(I<=67108863);for(var O=0,B=this.length-1;B>=0;B--){var W=(this.words[B]|0)+O*67108864;this.words[B]=W/I|0,O=W%I}return this.strip()},o.prototype.divn=function(I){return this.clone().idivn(I)},o.prototype.egcd=function(I){n(I.negative===0),n(!I.isZero());var O=this,B=I.clone();O.negative!==0?O=O.umod(I):O=O.clone();for(var W=new o(1),j=new o(0),U=new o(0),G=new o(1),z=0;O.isEven()&&B.isEven();)O.iushrn(1),B.iushrn(1),++z;for(var k=B.clone(),K=O.clone();!O.isZero();){for(var fe=0,ne=1;!(O.words[0]&ne)&&fe<26;++fe,ne<<=1);if(fe>0)for(O.iushrn(fe);fe-- >0;)(W.isOdd()||j.isOdd())&&(W.iadd(k),j.isub(K)),W.iushrn(1),j.iushrn(1);for(var be=0,De=1;!(B.words[0]&De)&&be<26;++be,De<<=1);if(be>0)for(B.iushrn(be);be-- >0;)(U.isOdd()||G.isOdd())&&(U.iadd(k),G.isub(K)),U.iushrn(1),G.iushrn(1);O.cmp(B)>=0?(O.isub(B),W.isub(U),j.isub(G)):(B.isub(O),U.isub(W),G.isub(j))}return{a:U,b:G,gcd:B.iushln(z)}},o.prototype._invmp=function(I){n(I.negative===0),n(!I.isZero());var O=this,B=I.clone();O.negative!==0?O=O.umod(I):O=O.clone();for(var W=new o(1),j=new o(0),U=B.clone();O.cmpn(1)>0&&B.cmpn(1)>0;){for(var G=0,z=1;!(O.words[0]&z)&&G<26;++G,z<<=1);if(G>0)for(O.iushrn(G);G-- >0;)W.isOdd()&&W.iadd(U),W.iushrn(1);for(var k=0,K=1;!(B.words[0]&K)&&k<26;++k,K<<=1);if(k>0)for(B.iushrn(k);k-- >0;)j.isOdd()&&j.iadd(U),j.iushrn(1);O.cmp(B)>=0?(O.isub(B),W.isub(j)):(B.isub(O),j.isub(W))}var fe;return O.cmpn(1)===0?fe=W:fe=j,fe.cmpn(0)<0&&fe.iadd(I),fe},o.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var O=this.clone(),B=I.clone();O.negative=0,B.negative=0;for(var W=0;O.isEven()&&B.isEven();W++)O.iushrn(1),B.iushrn(1);do{for(;O.isEven();)O.iushrn(1);for(;B.isEven();)B.iushrn(1);var j=O.cmp(B);if(j<0){var U=O;O=B,B=U}else if(j===0||B.cmpn(1)===0)break;O.isub(B)}while(!0);return B.iushln(W)},o.prototype.invm=function(I){return this.egcd(I).a.umod(I)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(I){return this.words[0]&I},o.prototype.bincn=function(I){n(typeof I=="number");var O=I%26,B=(I-O)/26,W=1<<O;if(this.length<=B)return this._expand(B+1),this.words[B]|=W,this;for(var j=W,U=B;j!==0&&U<this.length;U++){var G=this.words[U]|0;G+=j,j=G>>>26,G&=67108863,this.words[U]=G}return j!==0&&(this.words[U]=j,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(I){var O=I<0;if(this.negative!==0&&!O)return-1;if(this.negative===0&&O)return 1;this.strip();var B;if(this.length>1)B=1;else{O&&(I=-I),n(I<=67108863,"Number is too big");var W=this.words[0]|0;B=W===I?0:W<I?-1:1}return this.negative!==0?-B|0:B},o.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var O=this.ucmp(I);return this.negative!==0?-O|0:O},o.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var O=0,B=this.length-1;B>=0;B--){var W=this.words[B]|0,j=I.words[B]|0;if(W!==j){W<j?O=-1:W>j&&(O=1);break}}return O},o.prototype.gtn=function(I){return this.cmpn(I)===1},o.prototype.gt=function(I){return this.cmp(I)===1},o.prototype.gten=function(I){return this.cmpn(I)>=0},o.prototype.gte=function(I){return this.cmp(I)>=0},o.prototype.ltn=function(I){return this.cmpn(I)===-1},o.prototype.lt=function(I){return this.cmp(I)===-1},o.prototype.lten=function(I){return this.cmpn(I)<=0},o.prototype.lte=function(I){return this.cmp(I)<=0},o.prototype.eqn=function(I){return this.cmpn(I)===0},o.prototype.eq=function(I){return this.cmp(I)===0},o.red=function(I){return new q(I)},o.prototype.toRed=function(I){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(I){return this.red=I,this},o.prototype.forceRed=function(I){return n(!this.red,"Already a number in reduction context"),this._forceRed(I)},o.prototype.redAdd=function(I){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},o.prototype.redIAdd=function(I){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},o.prototype.redSub=function(I){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},o.prototype.redISub=function(I){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},o.prototype.redShl=function(I){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},o.prototype.redMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},o.prototype.redIMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(I){return n(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var L={k256:null,p224:null,p192:null,p25519:null};function A($,I){this.name=$,this.p=new o(I,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var I=new o(null);return I.words=new Array(Math.ceil(this.n/13)),I},A.prototype.ireduce=function(I){var O=I,B;do this.split(O,this.tmp),O=this.imulK(O),O=O.iadd(this.tmp),B=O.bitLength();while(B>this.n);var W=B<this.n?-1:O.ucmp(this.p);return W===0?(O.words[0]=0,O.length=1):W>0?O.isub(this.p):O.strip!==void 0?O.strip():O._strip(),O},A.prototype.split=function(I,O){I.iushrn(this.n,0,O)},A.prototype.imulK=function(I){return I.imul(this.k)};function N(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(N,A),N.prototype.split=function(I,O){for(var B=4194303,W=Math.min(I.length,9),j=0;j<W;j++)O.words[j]=I.words[j];if(O.length=W,I.length<=9){I.words[0]=0,I.length=1;return}var U=I.words[9];for(O.words[O.length++]=U&B,j=10;j<I.length;j++){var G=I.words[j]|0;I.words[j-10]=(G&B)<<4|U>>>22,U=G}U>>>=22,I.words[j-10]=U,U===0&&I.length>10?I.length-=10:I.length-=9},N.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var O=0,B=0;B<I.length;B++){var W=I.words[B]|0;O+=W*977,I.words[B]=O&67108863,O=W*64+(O/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I};function H(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(H,A);function M(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(M,A);function R(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(R,A),R.prototype.imulK=function(I){for(var O=0,B=0;B<I.length;B++){var W=(I.words[B]|0)*19+O,j=W&67108863;W>>>=26,I.words[B]=j,O=W}return O!==0&&(I.words[I.length++]=O),I},o._prime=function(I){if(L[I])return L[I];var O;if(I==="k256")O=new N;else if(I==="p224")O=new H;else if(I==="p192")O=new M;else if(I==="p25519")O=new R;else throw new Error("Unknown prime "+I);return L[I]=O,O};function q($){if(typeof $=="string"){var I=o._prime($);this.m=I.p,this.prime=I}else n($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}q.prototype._verify1=function(I){n(I.negative===0,"red works only with positives"),n(I.red,"red works only with red numbers")},q.prototype._verify2=function(I,O){n((I.negative|O.negative)===0,"red works only with positives"),n(I.red&&I.red===O.red,"red works only with red numbers")},q.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},q.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},q.prototype.add=function(I,O){this._verify2(I,O);var B=I.add(O);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},q.prototype.iadd=function(I,O){this._verify2(I,O);var B=I.iadd(O);return B.cmp(this.m)>=0&&B.isub(this.m),B},q.prototype.sub=function(I,O){this._verify2(I,O);var B=I.sub(O);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},q.prototype.isub=function(I,O){this._verify2(I,O);var B=I.isub(O);return B.cmpn(0)<0&&B.iadd(this.m),B},q.prototype.shl=function(I,O){return this._verify1(I),this.imod(I.ushln(O))},q.prototype.imul=function(I,O){return this._verify2(I,O),this.imod(I.imul(O))},q.prototype.mul=function(I,O){return this._verify2(I,O),this.imod(I.mul(O))},q.prototype.isqr=function(I){return this.imul(I,I.clone())},q.prototype.sqr=function(I){return this.mul(I,I)},q.prototype.sqrt=function(I){if(I.isZero())return I.clone();var O=this.m.andln(3);if(n(O%2===1),O===3){var B=this.m.add(new o(1)).iushrn(2);return this.pow(I,B)}for(var W=this.m.subn(1),j=0;!W.isZero()&&W.andln(1)===0;)j++,W.iushrn(1);n(!W.isZero());var U=new o(1).toRed(this),G=U.redNeg(),z=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new o(2*k*k).toRed(this);this.pow(k,z).cmp(G)!==0;)k.redIAdd(G);for(var K=this.pow(k,W),fe=this.pow(I,W.addn(1).iushrn(1)),ne=this.pow(I,W),be=j;ne.cmp(U)!==0;){for(var De=ne,Ve=0;De.cmp(U)!==0;Ve++)De=De.redSqr();n(Ve<be);var rt=this.pow(K,new o(1).iushln(be-Ve-1));fe=fe.redMul(rt),K=rt.redSqr(),ne=ne.redMul(K),be=Ve}return fe},q.prototype.invm=function(I){var O=I._invmp(this.m);return O.negative!==0?(O.negative=0,this.imod(O).redNeg()):this.imod(O)},q.prototype.pow=function(I,O){if(O.isZero())return new o(1).toRed(this);if(O.cmpn(1)===0)return I.clone();var B=4,W=new Array(1<<B);W[0]=new o(1).toRed(this),W[1]=I;for(var j=2;j<W.length;j++)W[j]=this.mul(W[j-1],I);var U=W[0],G=0,z=0,k=O.bitLength()%26;for(k===0&&(k=26),j=O.length-1;j>=0;j--){for(var K=O.words[j],fe=k-1;fe>=0;fe--){var ne=K>>fe&1;if(U!==W[0]&&(U=this.sqr(U)),ne===0&&G===0){z=0;continue}G<<=1,G|=ne,z++,!(z!==B&&(j!==0||fe!==0))&&(U=this.mul(U,W[G]),z=0,G=0)}k=26}return U},q.prototype.convertTo=function(I){var O=I.umod(this.m);return O===I?O.clone():O},q.prototype.convertFrom=function(I){var O=I.clone();return O.red=null,O},o.mont=function(I){return new X(I)};function X($){q.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(X,q),X.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},X.prototype.convertFrom=function(I){var O=this.imod(I.mul(this.rinv));return O.red=null,O},X.prototype.imul=function(I,O){if(I.isZero()||O.isZero())return I.words[0]=0,I.length=1,I;var B=I.imul(O),W=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=B.isub(W).iushrn(this.shift),U=j;return j.cmp(this.m)>=0?U=j.isub(this.m):j.cmpn(0)<0&&(U=j.iadd(this.m)),U._forceRed(this)},X.prototype.mul=function(I,O){if(I.isZero()||O.isZero())return new o(0)._forceRed(this);var B=I.mul(O),W=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=B.isub(W).iushrn(this.shift),U=j;return j.cmp(this.m)>=0?U=j.isub(this.m):j.cmpn(0)<0&&(U=j.iadd(this.m)),U._forceRed(this)},X.prototype.invm=function(I){var O=this.imod(I._invmp(this.m).mul(this.r2));return O._forceRed(this)}})(i,ta)}(R4)),R4.exports}/**@license
 * LIPS is Pretty Simple - simple scheme like lisp in JavaScript
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * includes:
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 */(function(i){(function(e,t){i.exports?i.exports=t(e,tft()):e.lips=t(e,e.BN)})(typeof ta<"u"?ta:window,function(e,t,n){function r(T,F){var te=!1,ie=!0,me=T.document,le=me.documentElement,Te=me.addEventListener,Pe=Te?"addEventListener":"attachEvent",Ze=Te?"removeEventListener":"detachEvent",st=Te?"":"on",kt=function(Ot){Ot.type=="readystatechange"&&me.readyState!="complete"||((Ot.type=="load"?T:me)[Ze](st+Ot.type,kt,!1),!te&&(te=!0)&&F.call(T,Ot.type||Ot))},Ft=function(){try{le.doScroll("left")}catch{setTimeout(Ft,50);return}kt("poll")};if(me.readyState=="complete")F.call(T,"lazy");else{if(!Te&&le.doScroll){try{ie=!T.frameElement}catch{}ie&&Ft()}me[Pe](st+"DOMContentLoaded",kt,!1),me[Pe](st+"readystatechange",kt,!1),T[Pe](st+"load",kt,!1)}}e.fetch||(e.fetch=function(T,F){return F=F||{},new Promise((te,ie)=>{let me=new XMLHttpRequest;me.open(F.method||"get",T,!0);for(let Te in F.headers)me.setRequestHeader(Te,F.headers[Te]);me.withCredentials=F.credentials=="include",me.onload=()=>{te(le())},me.onerror=ie,me.send(F.body||null);function le(){let Te=[],Pe=[],Ze={},st;return me.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(kt,Ft,Ot)=>{Te.push(Ft=Ft.toLowerCase()),Pe.push([Ft,Ot]),st=Ze[Ft],Ze[Ft]=st?`${st},${Ot}`:Ot}),{ok:(me.status/100|0)==2,status:me.status,statusText:me.statusText,url:me.responseURL,clone:le,text:()=>Promise.resolve(me.responseText),json:()=>Promise.resolve(me.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([me.response])),headers:{keys:()=>Te,entries:()=>Pe,get:kt=>Ze[kt.toLowerCase()],has:kt=>kt.toLowerCase()in Ze}}}})});var o=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,s=/^[-+]?[0-9]+([eE][-+]?[0-9]+)?$/,a=/^([-+]?((\.[0-9]+|[0-9]+\.[0-9]+)([eE][-+]?[0-9]+)?)|[0-9]+\.)$/;function u(T){function F(ie){if(ie.match(/^['"]/)){if(ie==='""'||ie==="''")return"";var me=ie[0],le=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+me,"g");ie=ie.replace(le,"$1")}return JSON.parse('"'+ie.replace(/\n/g,"\\n")+'"')}var te=T.match(o);return te?new RegExp(te[1],te[2]):T.match(/['"]/)?F(T):T.match(s)?He(parseFloat(T)):T.match(a)?He(parseFloat(T),!0):T==="nil"?fe:T==="true"?!0:T==="false"?!1:new k(T)}function d(T){return!(["(",")"].includes(T)||T.match(o)||T.match(/['"]/)||T.match(s)||T.match(a)||["nil","true","false"].includes(T))}var h=/("(?:\\[\S\s]|[^"])*"|\/(?! )[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|\(|\)|$)|;.*)/g,f=/"(?:\\[\S\s]|[^"])*"/g;function p(){var T=Object.keys(S).map(v).join("|");return new RegExp(`("(?:\\\\[\\S\\s]|[^"])*"|\\/(?! )[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|\\(|\\)|$)|\\(|\\)|'|"(?:\\\\[\\S\\s]|[^"])+|\\n|(?:\\\\[\\S\\s]|[^"])*"|;.*|(?:[-+]?(?:(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)[0-9]|\\.{2,}|${T}|[^(\\s)]+)`,"gim")}function m(T,F=1){return T[T.length-F]}function v(T){if(typeof T=="string"){var F=/([-\\^$[\]()+{}?*.|])/g;return T.replace(F,"\\$1")}}function b(T){var F=p();T=T.replace(/\n\r|\r/g,`
`);var te=0,ie=0,me=[],le=[],Te=0;return T.split(h).filter(Boolean).forEach(function(Pe){if(Pe.match(h)){if(Te=0,le.length){var Ze=m(le);if(Ze.token.match(/\n/)){var st=Ze.token.split(`
`).pop();Te+=st.length}else Te+=Ze.token.length;Te+=Ze.col}var kt={col:Te,line:ie,token:Pe,offset:te};me.push(kt),le.push(kt),te+=Pe.length,Te+=Pe.length,ie+=(Pe.match(`
`)||[]).length;return}Pe.split(F).filter(Boolean).forEach(function(Ft){var Ot={col:Te,line:ie,token:Ft,offset:te};Te+=Ft.length,te+=Ft.length,me.push(Ot),le.push(Ot),Ft===`
`&&(++ie,le=[],Te=0)})}),me}function E(T,F){return F?b(T):b(T).map(function(te){return te.token.trim()}).filter(function(te){return te&&!te.match(/^;/)})}var S={"'":new k("quote"),"`":new k("quasiquote"),",@":new k("unquote-splicing"),",":new k("unquote")};function w(T){typeof T=="string"&&(T=E(T));var F=[],te=[],ie=null,me=Object.keys(S),le=me.map(Ot=>S[Ot].name),Te=0,Pe=!1,Ze=[],st=[],kt=0;function Ft(){var Ot=F[F.length-1];Ot instanceof Array&&Ot[0]instanceof k&&le.includes(Ot[0].name)&&F.length>1&&!Ot[0].literal&&(F.pop(),F[F.length-1].length===1&&F[F.length-1][0]instanceof k?F[F.length-1].push(Ot):F[F.length-1]instanceof ne?F[F.length-1].cdr instanceof ne?F[F.length-1]=new ne(F[F.length-1],ne.fromArray(Ot)):F[F.length-1].cdr=ne.fromArray(Ot):F[F.length-1].push(Ot))}if(T.forEach(function(Ot){var yt=F[F.length-1];if(me.indexOf(Ot)!==-1)kt++,ie=Ot,F.push([S[ie]]),ie||(st=[]),st.push(ie);else if(ie&&(Ze.push(st),st=[]),Ot==="(")Pe=!0,Te++,F.push([]),ie=null,kt=0;else if(Ot==="."&&!Pe)F[F.length-1]=ne.fromArray(yt);else if(Ot===")"){if(Te--,!F.length)throw new Error("Unbalanced parenthesis");if(F.length===1)te.push(F.pop());else if(F.length>1){var si=F.pop();if(yt=F[F.length-1],yt instanceof Array?yt.push(si):yt instanceof ne&&yt.append(ne.fromArray(si)),Ze.length)for(st=Ze.pop();st.length;)Ft(),st.pop();else Ft()}Te===0&&F.length&&te.push(F.pop())}else{Pe=!1;var Hn=u(Ot);if(ie){for(;kt--;)F[F.length-1].push(Hn),Hn=F.pop();Ze.pop(),kt=0,ie=!1}else Hn instanceof k&&le.includes(Hn.name)&&(Hn.literal=!0);if(yt=F[F.length-1],yt instanceof ne)for(var or=yt;;)if(or.cdr===fe){Hn instanceof Array?or.cdr=ne.fromArray(Hn):or.cdr=Hn;break}else or=or.cdr;else F.length?yt.push(Hn):te.push(Hn)}}),!T.filter(Ot=>Ot.match(/^[()]$/)).length&&F.length&&(te=te.concat(F),F=[]),F.length)throw new Error("Unbalanced parenthesis 2");return te.map(Ot=>Ot instanceof Array?ne.fromArray(Ot):Ot)}function L(T,F=ie=>ie,te=null){if(Kt(T)){var ie=T.then(F);return te===null?ie:ie.catch(te)}return F(T)}function A(T,F){if(F instanceof RegExp)return te=>String(te).match(F);if(typeof F!="function")throw new Error(`${T} argument need to be a function or RegExp`);return F}function N(T,F,te){return F&&(te?T.__doc__=F:T.__doc__=H(F)),T}function H(T){return T.split(`
`).map(F=>F.trim()).join(`
`)}function M(T,F=1){var te=T.length;if(F<=0)throw Error(`previousSexp: Invlaid argument sexp = ${F}`);e:for(;F--&&te>=0;){for(var ie=1;ie>0;){var me=T[--te];if(!me)break e;me==="("||me.token==="("?ie--:(me===")"||me.token===")")&&ie++}te--}return T.slice(te+1)}function R(T){if(!T||!T.length)return 0;var F=T.length;if(T[F-1].token===`
`)return 0;for(;--F;)if(T[F].token===`
`){var te=(T[F+1]||{}).token;if(te)return te.length}return 0}function q(T,F){return te(T,F)===F.length;function te(ie,me){function le(){return Pe>0&&st>0&&ie[Pe-1]===me[st-1]&&ie[Pe+1]===me[st]}function Te(){return ie[Pe]===Symbol.for("symbol")&&!d(me[st])}for(var Pe=0,Ze={},st=0;st<me.length;++st){if(typeof ie[Pe]>"u")return st;if(me[st].trim()){if(ie[Pe]instanceof I){if(ie[Pe].flag==="+"){for(var kt;st<me.length&&(kt=te(ie[Pe].pattern,me.slice(st)),kt!==-1);)st+=kt;if(kt===-1&&me[st]&&!ie[Pe+1])return-1;Pe++,st-=1;continue}else if(ie[Pe].flag==="?"){kt=te(ie[Pe].pattern,me.slice(st)),kt===-1?st-=2:Pe++;continue}}if(ie[Pe]instanceof RegExp){if(!me[st].match(ie[Pe]))return-1}else if(typeof ie[Pe]=="string"){if(ie[Pe]!==me[st])return-1}else if(typeof ie[Pe]=="symbol"){if(ie[Pe]===Symbol.for("*")){if(Ze[Pe]=Ze[Pe]||0,me[st]==="("?Ze[Pe]++:me[st]===")"&&Ze[Pe]--,le())st-=1;else if(typeof ie[Pe+1]<"u"&&Ze[Pe]===0&&ie[Pe+1]!==me[st+1]||Ze[Pe]>0)continue}else if(Te())return-1}else if(ie[Pe]instanceof Array){var Ft=te(ie[Pe],me.slice(st));if(Ft===-1||Ft+st>me.length)return-1;st+=Ft-1,Pe++;continue}else return-1;Pe++}}return ie.length!==Pe?-1:me.length}}function X(T){this._code=T.replace(/\r/g,"")}X.defaults={offset:0,indent:2,specials:[/^define/,"lambda","let","let*"]},X.match=q,X.prototype._options=function(F){var te=X.defaults;if(typeof F>"u")return Object.assign({},te);var ie=F&&F.specials||[];return Object.assign({},te,F,{specials:te.specials.concat(ie)})},X.prototype.indent=function(F){var te=E(this._code,!0);return this._indent(te,F)},X.matchSpecial=function(T,F){var te=F.specials;if(te.indexOf(T)!==-1)return!0;var ie=te.filter(me=>me instanceof RegExp);for(let me of ie)if(T.match(me))return!0;return!1},X.prototype._indent=function(F,te){var ie=this._options(te),me=R(F),le=M(F);if(le&&le.length){if(le[0].line>0&&(ie.offset=0),le.toString()===F.toString()&&$e(le))return ie.offset+le[0].col;if(le.length===1)return ie.offset+le[0].col+1;if(X.matchSpecial(le[1].token,ie))return ie.offset+le[0].col+ie.indent;if(le[0].line<le[1].line)return ie.offset+le[0].col+1;if(le.length>3&&le[1].line===le[3].line)return le[1].token==="("?ie.offset+le[1].col:ie.offset+le[3].col;if(le[0].line===le[1].line)return ie.offset+ie.indent+le[0].col;for(var Te=le.slice(2),Pe=0;Pe<Te.length;++Pe){var Ze=Te[Pe];if(Ze.token.trim())return Ze.col}}else return 0;return me+ie.indent};function $(T){this.pattern=T}$.prototype.match=function(T){return T.match(this.pattern)};function I(T,F){this.pattern=T,this.flag=F}X.Pattern=I,X.Ahead=$;const O=new $(/[^)]/),B=Symbol.for("*"),W=new I(["(",B,")"],"+"),j=new I([Symbol.for("symbol")],"?"),U=new I(["(",Symbol.for("symbol"),B,")"],"+");X.rules=[[["(","begin"],1],[["(","begin",W],1,O],[["(",/^let\*?$/,j,"(",U,")"],1],[["(",/^let\*?$/,j,"(",U],2,O],[["(",/^let\*?$/,j,["(",U,")"],W],1,O],[[/(?!lambda)/,"(",B,")"],1,O],[["(","if",/[^()]/],1],[["(","if",/[^()]/,B],1],[["(","if",["(",B,")"]],1],[["(","if",["(",B,")"],/[^()]/],1],[["(","if",["(",B,")"],["(",B,")"]],1,O],[["(",/^(define|lambda)/,["(",B,")"],f],1],[["(",/^(define|lambda)/,"(",B,")"],1],[["(",/^(define|lambda)/,["(",B,")"],f,W],1,O],[["(",/^(define|lambda)/,["(",B,")"],W],1,O]],X.prototype.break=function(){var T=this._code.replace(/\n[ \t]*/g,`
 `);const F=Ze=>Ze.token.match(f)?Ze.token:Ze.token.replace(/\s+/," ");var te=E(T,!0).map(F).filter(Ze=>Ze!==`
`);const{rules:ie}=X;for(let Ze=0;Ze<te.length;++Ze)if(te[Ze].trim()){var me=te.slice(0,Ze),le={};ie.map(st=>st[1]).forEach(st=>{le[st]||(le[st]=M(me,st))});for(let[st,kt,Ft]of ie){var Te=q(st,le[kt].filter(Ot=>Ot.trim())),Pe=te.slice(Ze).find(Ot=>Ot.trim());if(Te&&(Ft instanceof $&&Ft.match(Pe)||!Ft)){te.splice(Ze,0,`
`),Ze++;continue}}}return this._code=te.join(""),this},X.prototype._spaces=function(T){return new Array(T+1).join(" ")},X.prototype.format=function(F){for(var te=this._code.replace(/[ \t]*\n[ \t]*/g,`
 `),ie=E(te,!0),me=this._options(F),le=0,Te=0,Pe=0;Pe<ie.length;++Pe){var Ze=ie[Pe];if(Ze.token===`
`&&(le=this._indent(ie.slice(0,Pe),me),Te+=le,ie[Pe+1])){ie[Pe+1].token=this._spaces(le),le--,Te--;for(var st=Pe+2;st<ie.length;++st)if(ie[st].offset+=Te,ie[st].col+=le,ie[st].token===`
`){Pe=st-1;break}}}return ie.map(kt=>{if(kt.token.match(f)&&kt.token.match(/\n/)){var Ft=new Array(kt.col+1).join(" "),Ot=kt.token.split(`
`);kt.token=[Ot[0]].concat(Ot.slice(1).map(yt=>Ft+yt)).join(`
`)}return kt.token}).join("")};function G(T,F){var te=Object.prototype.toString,ie="[object Array]",me=[],le=F&&T||T.slice(),Te;if(!T.length)return me;Te=le.pop();do te.call(Te)===ie?le.push.apply(le,Te):me.push(Te);while(le.length&&(Te=le.pop())!==n);return me.reverse(),me}function z(T){return typeof T=="symbol"||typeof T=="object"&&Object.prototype.toString.call(T)==="[object Symbol]"}function k(T){if(typeof this<"u"&&this.constructor!==k||typeof this>"u")return new k(T);this.name=T}k.is=function(T,F){return T instanceof k&&(typeof F=="string"&&T.name===F||F instanceof RegExp&&F.test(T.name))},k.prototype.toJSON=k.prototype.toString=function(){return z(this.name)?this.name.toString().replace(/^Symbol\(([^)]+)\)/,"$1"):this.name};function K(){}K.prototype.toString=function(){return"()"};var fe=new K;function ne(T,F){if(typeof this<"u"&&this.constructor!==ne||typeof this>"u")return new ne(T,F);this.car=T,this.cdr=F}function be(){return new ne(n,fe)}function De(T,F){return function(ie){if(Ye(T,ie,["pair","nil"]),ie instanceof ne&&ie.isEmptyList())return[];for(var me=[],le=ie;le instanceof ne;){if(le.haveCycles("cdr"))break;var Te=le.car;F&&Te instanceof ne&&(Te=this.get(T).call(this,Te)),me.push(Te),le=le.cdr}return me}}ne.prototype.flatten=function(){return ne.fromArray(G(this.toArray()))},ne.prototype.length=function(){if(Re(this))return 0;for(var T=0,F=this;!(!F||F===fe||!(F instanceof ne)||F.haveCycles("cdr"));)T++,F=F.cdr;return T},ne.prototype.clone=function(){var T=new Map;function F(te){if(te instanceof ne){if(T.has(te))return T.get(te);var ie=new ne;return T.set(te,ie),ie.car=F(te.car),ie.cdr=F(te.cdr),ie.cycles=te.cycles,ie}return te}return F(this)},ne.prototype.toArray=function(){if(this.isEmptyList())return[];var T=[];return this.car instanceof ne?T.push(this.car.toArray()):T.push(this.car),this.cdr instanceof ne&&(T=T.concat(this.cdr.toArray())),T},ne.prototype.isEmptyList=function(){return typeof this.car>"u"&&this.cdr===fe},ne.fromArray=function(T){if(T instanceof ne)return T;if(T.length&&!(T instanceof Array)&&(T=[...T]),T.length===0)return be();var F;return T[0]instanceof Array?F=ne.fromArray(T[0]):F=T[0],T.length===1?new ne(F,fe):new ne(F,ne.fromArray(T.slice(1)))},ne.prototype.toObject=function(){for(var T=this,F={};T instanceof ne&&T.car instanceof ne;){var te=T.car,ie=te.car;ie instanceof k&&(ie=ie.name);var me=te.cdr;me instanceof ne&&(me=me.toObject()),me instanceof He&&(me=me.valueOf()),F[ie]=me,T=T.cdr}return F},ne.fromPairs=function(T){return T.reduce((F,te)=>new ne(new ne(new k(te[0]),te[1]),F),fe)},ne.fromObject=function(T){var F=Object.keys(T).map(te=>[te,T[te]]);return ne.fromPairs(F)},ne.prototype.reduce=function(T){for(var F=this,te=fe;F!==fe;)te=T(te,F.car),F=F.cdr;return te},ne.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var T=this,F=fe;T!==fe;){var te=T.cdr;T.cdr=F,F=T,T=te}return F},ne.prototype.transform=function(T){function F(te){if(te instanceof ne){if(te.replace)return delete te.replace,te;var ie=T(te.car);ie instanceof ne&&(ie=F(ie));var me=T(te.cdr);return me instanceof ne&&(me=F(me)),new ne(ie,me)}return te}return F(this)},ne.prototype.map=function(T){return typeof this.car<"u"?new ne(T(this.car),Re(this.cdr)?fe:this.cdr.map(T)):fe};function Ve(T){if(typeof T=="function")return"<#function "+(T.name||"anonymous")+">";if(typeof T=="string")return JSON.stringify(T).replace(/\\n/g,`
`);if(Kt(T))return"<#Promise>";if(T instanceof k||T instanceof He||T instanceof RegExp||T instanceof ne||T===fe)return T.toString();if(T instanceof Array)return T.map(Ve);if(typeof T=="object"){if(T===null)return"null";var F=T.constructor.name;return F==="Object"?JSON.stringify(T):"<#object("+T.constructor.name+")>"}else if(typeof T<"u")return T}ne.prototype.markCycles=function(){return rt(this),this},ne.prototype.haveCycles=function(T=null){return T?!!(this.cycles&&this.cycles[T]):this.haveCycles("car")||this.haveCycles("cdr")};function rt(T){var F=[],te=[];function ie(le){if(le instanceof ne&&F.includes(le))return te.includes(le)||te.push(le),`#${te.length-1}#`}function me(le){if(le instanceof ne){F.push(le);var Te={},Pe=ie(le.car),Ze=ie(le.cdr);Pe?Te.car=Pe:me(le.car),Ze?Te.cdr=Ze:me(le.cdr),Pe||Ze?le.cycles=Te:le.cycles&&delete le.cycles}}me(T)}ne.prototype.toString=function(){var T=["("];if(this.car!==n){var F;if(this.cycles&&this.cycles.car?F=this.cycles.car:F=Ve(this.car),F!==n&&T.push(F),this.cdr instanceof ne)if(this.cycles&&this.cycles.cdr)T.push(" . "),T.push(this.cycles.cdr);else{var te;this.cycles&&this.cycles.cdr&&(te=this.cycles.cdr);var ie=this.cdr.toString(te).replace(/^\(|\)$/g,"");T.push(" "),T.push(ie)}else typeof this.cdr<"u"&&this.cdr!==fe&&(T=T.concat([" . ",Ve(this.cdr)]))}return T.push(")"),T.join("")},ne.prototype.set=function(T,F){this[T]=F,F instanceof ne&&this.markCycles()},ne.prototype.append=function(T){if(T instanceof Array)return this.append(ne.fromArray(T));var F=this;if(F.car===n)T instanceof ne?(this.car=T.car,this.cdr=T.cdr):this.car=T;else if(T!==fe){for(;F instanceof ne&&F.cdr!==fe;)F=F.cdr;F.cdr=T}return this};function At(T,F){return T instanceof He&&F instanceof He?T.cmp(F)===0:typeof T=="number"||typeof F=="number"?He(T).cmp(He(F)):T instanceof k&&F instanceof k?T.name===F.name:T===F}function Re(T){return T instanceof ne&&T.isEmptyList()||T===fe}function ut(T,F,te){if(typeof this<"u"&&this.constructor!==ut||typeof this>"u")return new ut(T,F);Ye("Macro",T,"string",1),Ye("Macro",F,"function",2),te&&(this.__doc__=H(te)),this.name=T,this.fn=F}ut.defmacro=function(T,F,te){var ie=new ut(T,F,te);return ie.defmacro=!0,ie},ut.prototype.invoke=function(T,{env:F,dynamic_scope:te,error:ie},me){var le={dynamic_scope:te,error:ie,macro_expand:me},Te=this.fn.call(F,T,le,this.name);return me?ti(Te):Te},ut.prototype.toString=function(){return"#<Macro "+this.name+">"};var Ct="define-macro";function Xe(T){return async function(F,te){var ie=te.env=this;async function me(Te){if(Te instanceof ne&&Te.car instanceof k)try{var Pe=ie.get(Te.car);if(Pe instanceof ut&&Pe.defmacro){var Ze=await Pe.invoke(Te.cdr,te,!0);if(Ze instanceof ne)return Ze}}catch{}var st=Te.car;st instanceof ne&&(st=await me(st));var kt=Te.cdr;kt instanceof ne&&(kt=await me(kt));var Ft=new ne(st,kt);return Ft}var le=F;if(T)return ti((await me(F)).car);for(;le=await me(F),F.toString()!==le.toString();)F=le;return ti(le.car)}}function on(T){return typeof T>"u"||T===fe||T===null}function Kt(T){return T instanceof Promise||T&&typeof T<"u"&&typeof T.then=="function"}function dn(T,F,...te){let ie=function(...me){const le=[...ie.__bind.args,...me];return ie.__bind.fn.apply(F,le)};return oi(ie,"name",T.name),oi(ie,"__bound__",!0),T.__doc__&&(ie.__doc__=T.__doc__),T.__code__&&(ie.__code__=T.__code__),ie.__bind={args:T.__bind?T.__bind.args.concat(te):te,fn:T.__bind?T.__bind.fn:T},ie.toString=function(){return ie.__bind.fn.toString()},ie.apply=function(me,le){return ie.__bind.fn.apply(me,le)},ie.call=function(me,...le){return ie.__bind.fn.call(me,...le)},ie.bind=function(me,...le){return dn(ie,me,...le)},pn(ie,ie.__bind.fn.length)}function Sn(T){return typeof T=="function"&&T.__bind?T.__bind.fn:T}var Wn=["name","length","caller","callee","arguments","prototype"];function Jn(T){return!Wn.includes(T)}function oi(T,F,te){Object.defineProperty(T,Symbol.for(F),{get:()=>te,set:()=>{},configurable:!1,enumerable:!1})}function jn(T,F){const te=T.bind(F);return Object.getOwnPropertyNames(T).filter(Jn).forEach(me=>{te[me]=T[me]}),oi(te,"__bound__",!0),Ci(T)&&oi(te,"__native__",!0),te}function Pt(T){if(typeof T=="fuction")return T.__bound__=!1,T.__bound__===!0}function pn(T,F){try{return Object.defineProperty(T,"length",{get:function(){return F}}),T}catch{var te=new Array(F).fill(0).map((le,Te)=>"a"+Te).join(","),ie=new Function("f",`return function(${te}) {
                return f.apply(this, arguments);
            };`);return ie(T)}}function Ci(T){var F=Symbol.for("__native__");return typeof T=="function"&&T.toString().match(/\{\s*\[native code\]\s*\}/)&&(T.name.match(/^bound /)&&T[F]===!0||!T.name.match(/^bound /)&&!T[F])}function Ie(T){var F="let"+(T?"*":"");return ut.defmacro(F,function(te,ie){var{dynamic_scope:me,error:le,macro_expand:Te}=ie,Pe;if(te.car instanceof k){if(!(te.cdr.car instanceof ne))throw new Error("let require list of pairs");var Ze=te.cdr.car.map(Ot=>Ot.car);return Pe=te.cdr.car.map(Ot=>Ot.cdr.car),ne.fromArray([k("let*"),[[te.car,ne(k("lambda"),ne(Ze,te.cdr.cdr))]],ne(te.car,Pe)])}else if(Te)return;var st=this;Pe=this.get("list->array")(te.car);var kt=st.inherit("let"),Ft=0;return function Ot(){var yt=Pe[Ft++];function si($i){if(Kt($i))return $i.then(si);typeof $i>"u"?kt.set(yt.car,fe):kt.set(yt.car,$i)}if(me&&(me=T?kt:st),yt){var or=ae(yt.cdr.car,{env:T?kt:st,dynamic_scope:me,error:le});return L(si(or),Ot)}else{var Hn=new ne(new k("begin"),te.cdr);return ae(Hn,{env:kt,dynamic_scope:me,error:le})}}()})}function Fe(T,F){return new ut(T,function(te,{dynamic_scope:ie,error:me}={}){var le=this;ie&&(ie=this);for(var Te=te,Pe=[];Te instanceof ne&&!Re(Te);)Pe.push(ae(Te.car,{env:le,dynamic_scope:ie,error:me})),Te=Te.cdr;var Ze=Pe.filter(Kt).length;return Ze?Promise.all(Pe).then(F.bind(this)):F.call(this,Pe)})}function pt(T,...F){return F.forEach(te=>{Ye("",te,"number")}),T(...F)}function at(...T){return T.forEach((F,te)=>{Ye("pipe",F,"function",te+1)}),function(...F){return T.reduce((te,ie)=>[ie(...te)],F)[0]}}function bt(...T){return T.forEach((F,te)=>{Ye("compose",F,"function",te+1)}),at(...T.reverse())}function yi(T,F){var te=this;return function ie(me,le,...Te){return Ye(T,me,"function"),Te.some(Pe=>Re(Pe)||on(Pe))?typeof le=="number"?He(le):le:F.call(te,ie,me,le,...Te)}}function Vt(T,F){return gr(T+1,Bt(pt,F))}var It=Bt(Vt,1),Gt=Bt(Vt,2);function qt(T){return function(...F){if(F.length)return F.reduce(Gt(T))}}function Bt(T,...F){Ye("curry",T,"function");var te=T.length;return function(){var ie=F.slice();function me(...le){return ie=ie.concat(le),ie.length>=te?T.apply(this,ie):me}return me.apply(this,arguments)}}function gr(T,F){return Ye("limit",F,"function",2),function(...te){return F(...te.slice(0,T))}}var ei=N(function(F,...te){typeof F=="function"&&F.__bind&&(F=F.__bind.fn);for(let le of te){var ie=le instanceof k?le.name:le,me=F[ie];typeof me=="function"&&(me=jn(me,F)),F=me}return me},`(. obj . args)
        (get obj . args)

        Function use object as based and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, you can't
        pass it as argument`);function He(T,F){if(typeof this<"u"&&this.constructor!==He||typeof this>"u")return new He(T,F===!0?!0:n);if(T instanceof He)return He(T.value,T.float);if(!He.isNumber(T))throw new Error(`You can't create LNumber from ${ke(T)}`);T===null&&(T=0),He.isFloat(T)?this.value=T:F?(this.value=T,this.float=!0):typeof BigInt<"u"?typeof T!="bigint"?this.value=BigInt(T):this.value=T:typeof t<"u"&&!(T instanceof t)?this.value=new t(T):this.value=T}He.isFloat=function(F){return Number(F)===F&&F%1!==0},He.isNumber=function(T){return T instanceof He||!Number.isNaN(T)&&He.isNative(T)||He.isBN(T)},He.isNative=function(T){return typeof T=="bigint"||typeof T=="number"},He.isBN=function(T){return typeof t<"u"&&T instanceof t},He.prototype.toString=He.prototype.toJSON=function(){return this.value.toString()},He.prototype.isBigNumber=function(){return typeof this.value=="bigint"||typeof t<"u"&&!(this.value instanceof t)},["floor","ceil","round"].forEach(T=>{He.prototype[T]=function(){return this.float||He.isFloat(this.value)?He(Math[T](this.value)):He(this.value)}}),He.prototype.valueOf=function(){if(He.isNative(this.value))return Number(this.value);if(He.isBN(this.value))return this.value.toNumber()},He.prototype.coerce=function(T){T===null&&(T=0);var F;return T instanceof He?F=T.value:F=T,He.isFloat(F)||(typeof this.value=="bigint"&&typeof F!="bigint"?F=BigInt(F):typeof t<"u"&&this.value instanceof t&&!F instanceof t&&(F=new t(F))),He(F)},He.prototype.isFloat=function(){return!!(He.isFloat(this.value)||this.float)},He.prototype.op=function(T,F){var te={"*":function(le,Te){return le*Te},"+":function(le,Te){return le+Te},"-":function(le,Te){return le-Te},"/":function(le,Te){return le/Te},"%":function(le,Te){return le%Te},"|":function(le,Te){return le|Te},"&":function(le,Te){return le&Te},"~":function(le){return~le},">>":function(le,Te){return le>>Te},"<<":function(le,Te){return le<<Te}};if(He.isFloat(F)||F instanceof He&&F.isFloat()||this.isFloat()){var ie=F instanceof He?F.valueOf():F;return He(te[T](this.valueOf(),ie),!0)}if(F=this.coerce(F),He.isNative(F.value)&&He.isNative(this.value))return He(te[T](this.value,F.value));if(He.isBN(this.value)&&He.isBN(F.value)){var me={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};return T=me[T],He(this.value.clone()[T](F,ie))}};var Ba={"+":"add","-":"sub","*":"mul","/":"div","%":"mod","|":"or","&":"and","~":"neg","<<":"shl",">>":"shr"};Object.keys(Ba).forEach(T=>{He.prototype[Ba[T]]=function(F){return this.op(T,F)}}),He.prototype.sqrt=function(){var T;return He.isNative(this.value)?T=Math.sqrt(this.value):He.isBN(this.value)&&(T=this.value.sqrt()),new He(T)},He.prototype.pow=function(T){if(T=this.coerce(T),He.isNative(this.value))try{var F=new Function("a,b","return a**b;");T.value=F(this.value,T.value)}catch{throw new Error("Power operator not supported")}else He.isBN(this.value)?T.value=this.value.pow(T.value):T.value=Math.pow(this.value,T.value);return T},He.prototype.neg=function(){var T=this.value;return He.isNative(T)?T=-T:He.isBN(T)&&(T=T.neg()),new He(T)},He.prototype.abs=function(){var T=this.value;return He.isNative(this.value)?T<0&&(T=-T):He.isBN(T)&&T.iabs(),new He(T)},He.prototype.isOdd=function(){if(He.isNative(this.value))return this.isBigNumber()?this.value%BigInt(2)===BigInt(1):this.value%2===1;if(He.isBN(this.value))return this.value.isOdd()},He.prototype.isEven=function(){return!this.isOdd()},He.prototype.cmp=function(T){if(T=this.coerce(T),He.isNative(this.value))return this.value<T.value?-1:this.value===T.value?0:1;if(He.isBN(this.value))return this.value.cmp(T.value)};function Vn(T,F,te){arguments.length===1&&(typeof arguments[0]=="object"?(T=arguments[0],this.parent=null):typeof arguments[0]=="string"&&(T={},F={},te=arguments[0])),this.env=T,this.parent=F,this.name=te||"anonymous"}Vn.prototype.inherit=function(T,F={}){return typeof T=="object"&&(F=T),(!T||typeof T=="object")&&(T="child of "+(this.name||"unknown")),new Vn(F||{},this,T)},Vn.prototype.get=function(T,F={}){const{weak:te,context:ie=this,throwError:me=!0}=F;var le,Te=!1;if(T instanceof k?T.name in this.env&&(le=this.env[T.name],Te=!0):typeof T=="string"&&typeof this.env[T]<"u"&&(le=this.env[T],Te=!0),Te)return He.isNumber(le)?He(le):le instanceof ne?le.markCycles():typeof le=="function"&&Pt(le)?te?dn(le,ie):jn(le,ie):le;if(this.parent instanceof Vn)return this.parent.get(T,{weak:te,context:ie,throwError:me});var Pe;if(T instanceof k?Pe=T.name:typeof T=="string"&&(Pe=T),Pe){var Ze=typeof e[Pe];if(Ze==="function")return Ci(e[Pe])?jn(e[Pe],e):e[Pe];if(Ze!=="undefined")return e[Pe]}if(me)throw Pe=(Pe.name||Pe).toString(),new Error("Unbound variable `"+Pe+"'")},Vn.prototype.set=function(T,F){He.isNumber(F)&&(F=He(F)),T instanceof k&&(T=T.name),this.env[T]=F},Vn.prototype.has=function(T){return typeof this.env[T]<"u"},Vn.prototype.ref=function(T){for(var F=this;F;){if(F.has(T))return F;F=F.parent}},Vn.prototype.parents=function(){for(var T=this,F=[];T;)F.unshift(T),T=T.parent;return F};function ti(T){return Kt(T)?T.then(ti):((T instanceof ne||T instanceof k)&&(T.data=!0),T)}var qs=function(){var T=0;return function(F=null){return F!==null?new k(Symbol(`#:${F}`)):(T++,new k(Symbol(`#:g${T}`)))}}(),vn=new Vn({nil:fe,undefined:n,true:!0,false:!1,NaN:NaN,stdout:{write:function(...T){console.log(...T)}},stdin:{read:function(){return new Promise(T=>{T(prompt(""))})}},help:N(new ut("help",function(T,{dynamic_scope:F,error:te}){var ie;if(T.car instanceof k)ie=T.car;else if(T.car instanceof ne&&T.car.car instanceof k)ie=T.car.car;else{var me=this;F&&(F=this);var le=ae(T.car,{env:me,error:te,dynamic_scope:F});if(le&&le.__doc__)return le.__doc__}return this.get(ie).__doc__}),`(help object)

             Macro returns documentation for function or macros including parser
             macros but only if called with parser macro symbol like (help \`).
             For normal functions and macros you can save the function in variable.`),cons:N(function(T,F){return Re(F)&&(F=fe),new ne(T,F)},`(cons left right)

            Function return new Pair out of two arguments.`),car:N(function(T){return T===fe||(Ye("car",T,"pair"),Re(T))?fe:T.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:N(function(T){return T===fe||(Ye("cdr",T,"pair"),Re(T))?fe:T.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":N(new ut("set!",function(T,{dynamic_scope:F,error:te}={}){F&&(F=this);var ie=ae(T.cdr.car,{env:this,dynamic_scope:F,error:te});ie=Le(ie);var me;function le(kt,Ft){return Kt(kt)?kt.then(Ot=>le(Ot,Ft)):Kt(Ft)?Ft.then(Ot=>le(kt,Ot)):(Ze[kt]=Ft,Ft)}if(T.car instanceof ne&&k.is(T.car.car,".")){var Te=T.car.cdr.car,Pe=T.car.cdr.cdr.car,Ze=ae(Te,{env:this,dynamic_scope:F,error:te}),st=ae(Pe,{env:this,dynamic_scope:F,error:te});return le(st,ie)}if(!(T.car instanceof k))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");return me=this.ref(T.car.name),me||(me=this),L(ie,kt=>{me.set(T.car,kt)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"set-car!":N(function(T,F){Ye("set-car!",T,"pair"),T.car=F},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":N(function(T,F){Ye("set-cdr!",T,"pair"),T.cdr=F},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":N(function(T){return typeof T>"u"||Re(T)},`(empty? object)

            Function return true if value is undfined empty list.`),assoc:N(function(T,F){if(T instanceof ne&&!(F instanceof ne))throw new Error("First argument to assoc ned to be a key");Ye("assoc",F,"pair");for(var te=F;!(!(te instanceof ne)||this.get("empty?")(te));){var ie=te.car.car;if(At(ie,T))return te.car;te.haveCycles("cdr")||(te=te.cdr)}return fe},`(assoc key alist)

            Function search Alist (list of pairs) until it find the one that
            have head set equal to key, and return found pair.`),gensym:N(qs,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),"require.resolve":N(function(T){var F=require.resolve(T);return F},`(require.resolve path)

           Return path relative the current module.`),require:N(function(T){return Pre(T)},`(require module)

            Function to be used inside Node.js to import the module.`),load:N(function(T){Ye("load",T,"string");var F=this;return F.name==="__frame__"&&(F=F.parent),typeof this.get("global",{throwError:!1})<"u"?new Promise((te,ie)=>{Cve.readFile(T,function(me,le){me?ie(me):pe(le.toString(),F).then(()=>{te()})})}):e.fetch(T).then(te=>te.text()).then(te=>pe(te,F)).then(()=>{})},`(load filename)

            Function fetch the file and evaluate its content as LIPS code.`),while:N(new ut("while",function(T,{dynamic_scope:F,error:te}){var ie=this,me=new ne(new k("begin"),T.cdr),le;return F&&(F=ie),function Te(){var Pe=ae(T.car,{env:ie,dynamic_scope:F,error:te});function Ze(st){return st&&!on(st)&&!Re(st)?(le=ae(me,{env:ie,dynamic_scope:F,error:te}),Kt(le)?le.then(kt=>(le=kt,Te())):Te()):le}return L(Pe,Ze)}()}),`(while cond . body)

            Macro that create a loop, it exectue body untill cond expression is false`),if:N(new ut("if",function(T,{dynamic_scope:F,error:te}){F&&(F=this);var ie=this,me=Te=>(Ye("if",Te,"boolean"),Te?ae(T.cdr.car,{env:ie,dynamic_scope:F,error:te}):ae(T.cdr.cdr.car,{env:ie,dynamic_scope:F,error:te})),le=ae(T.car,{env:ie,dynamic_scope:F,error:te});return L(le,me)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let*":N(Ie(!0),`(let* ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),let:N(Ie(!1),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":N(Fe("begin*",function(T){return T.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:N(new ut("begin",function(T,F){var te=Object.assign({},F),ie=this.get("list->array")(T);te.dynamic_scope&&(te.dynamic_scope=this),te.env=this;var me;return function le(){if(ie.length){var Te=ie.shift(),Pe=ae(Te,te);return L(Pe,Ze=>(me=Ze,le()))}else return me}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new ut("ignore",function(T,{dynamic_scope:F,error:te}){var ie={env:this,error:te};F&&(ie.dynamic_scope=this),ae(new ne(new k("begin"),T),ie)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:N(ut.defmacro("define",function(T,F){var te=this;if(T.car instanceof ne&&T.car.car instanceof k){var ie=new ne(new k("define"),new ne(T.car.car,new ne(new ne(new k("lambda"),new ne(T.car.cdr,T.cdr)))));return ie}else if(F.macro_expand)return;F.dynamic_scope&&(F.dynamic_scope=this),F.env=te;var me=T.cdr.car;me instanceof ne?me=ae(me,F):me instanceof k&&(me=te.get(me)),T.car instanceof k&&L(me,le=>{te.set(T.car,le)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":N(function(T,F,te){var ie=typeof T;if(on(T)||ie!=="object"&&ie!=="function"){var me=qi("set-obj!",ke(T),["object","function"]);throw new Error(me)}Sn(T)[F]=te},`(set-obj! obj key value)

            Function set property of JavaScript object`),"current-environment":N(function(){return this},`(current-environment)

            Function return current environement.`),eval:N(function(T,F){if(Ye("eval",T,["symbol","pair","array"]),F=F||this,T instanceof k)return F.get(T);if(T instanceof ne)return ae(T,{env:F,error:ie=>{if(this.get("error")(ie.message),ie.code){var me=ie.code.map((le,Te)=>`[${Te+1}]: ${le}`).join(`
`);this.get("error")(me)}}});if(T instanceof Array){var te=this.get("eval");return T.reduce((ie,me)=>te(me,F))}},`(eval list)

            Function evalute LIPS code as list structure.`),lambda:new ut("lambda",function(T,{dynamic_scope:F,error:te}={}){var ie=this,me;T.cdr instanceof ne&&typeof T.cdr.car=="string"&&T.cdr.cdr!==fe&&(me=H(T.cdr.car));function le(...Pe){var Ze;F&&this instanceof Vn?Ze=this:Ze=ie,Ze=Ze.inherit("lambda");var st=T.car,kt=0,Ft;if(typeof this<"u"&&Ze.set("this",this),this instanceof Vn)Ze.set("arguments",this.get("arguments")),Ze.set("parent.frame",this.get("parent.frame"));else{var Ot=Pe.slice();Ot.callee=le,Ot.env=Ze,Ze.set("parent.frame",function(){return fe}),Ze.set("arguments",Ot)}if(st instanceof k||!Re(st))for(;;){if(st.car!==fe)if(st instanceof k){Ft=ne.fromArray(Pe.slice(kt)),Ze.env[st.name]=Ft;break}else typeof Pe[kt]>"u"?Ft=fe:Ft=Pe[kt],Ze.env[st.car.name]=Ft;if(st.cdr===fe)break;kt++,st=st.cdr}F&&(F=Ze);var yt=me?T.cdr.cdr:T.cdr,si=new ne(new k("begin"),yt);return ae(si,{env:Ze,dynamic_scope:F,error:te})}var Te=T.car instanceof ne?T.car.length():null;return le.__code__=new ne(new k("lambda"),T),T.car instanceof ne?N(pn(le,Te),me,!0):N(le,me,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new ut("macroexpand",Xe()),"macroexpand-1":new ut("macroexpand-1",Xe(!0)),"define-macro":N(new ut(Ct,function(T,{dynamic_scope:F,error:te}){if(T.car instanceof ne&&T.car.car instanceof k){var ie=T.car.car.name,me;typeof T.cdr.car=="string"&&T.cdr.cdr!==fe&&(me=T.cdr.car),this.env[ie]=ut.defmacro(ie,function(le){for(var Te=new Vn({},this,"defmacro"),Pe=T.car.cdr,Ze=le;Pe!==fe;){if(Pe instanceof k){Te.env[Pe.name]=Ze;break}else Pe.car!==fe&&(Ze===fe?Te.env[Pe.car.name]=fe:(Ze.car instanceof ne&&(Ze.car.data=!0),Te.env[Pe.car.name]=Ze.car));if(Pe.cdr===fe)break;Ze!==fe&&(Ze=Ze.cdr),Pe=Pe.cdr}F&&(F=Te);var st={env:Te,dynamic_scope:F,error:te};if(T.cdr instanceof ne){var kt=me?T.cdr.cdr:T.cdr,Ft=kt.reduce(function(Ot,yt){return ae(yt,st)});return L(Ft,function(Ot){return typeof Ot=="object"&&delete Ot.data,Ot})}},me),this.env[ie].__code__=new ne(new k("define-macro"),T)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),quote:N(new ut("quote",function(T){return ti(T.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":N(function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:N(function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:ut.defmacro("quasiquote",function(T,F){var{dynamic_scope:te,error:ie}=F,me=this;te&&(te=me);function le(yt){return yt instanceof ne}function Te(yt,si,Hn=le){if(yt instanceof ne&&!Re(yt)){var or=yt.car,$i=yt.cdr;return Hn(or)&&(or=si(or)),Hn($i)&&($i=si($i)),Kt(or)||Kt($i)?Promise.all([or,$i]).then(([Wa,al])=>new ne(Wa,al)):new ne(or,$i)}return yt}function Pe(yt,si){if(yt instanceof ne){if(Re(yt)&&si===fe)return fe;yt.append(si)}else yt=new ne(yt,si);return yt}function Ze(yt,si,Hn){if(si<Hn)return new ne(new ne(yt.car.car,kt(yt.car.cdr,si,Hn)),fe);var or=ae(yt.car.cdr.car,{env:me,dynamic_scope:te,error:ie});return L(or,function($i){if(!($i instanceof ne)){if(yt.cdr!==fe){const al="You can't splice atom inside list";throw new Error(al)}return $i}st.has($i)?$i=$i.clone():st.add($i);const Wa=kt(yt.cdr,0,1);return Wa===fe&&$i===fe?n:L(Wa,al=>Pe($i,al))})}var st=new Set;function kt(yt,si,Hn){if(yt instanceof ne&&!Re(yt)){if(k.is(yt.car.car,"unquote-splicing"))return Ze(yt,si+1,Hn);if(k.is(yt.car,"quasiquote")){var or=kt(yt.cdr,si,Hn+1);return new ne(yt.car,or)}if(k.is(yt.car.car,"unquote")){if(si+2===Hn&&yt.car.cdr instanceof ne&&yt.car.cdr.car instanceof ne&&k.is(yt.car.cdr.car.car,"unquote-splicing"))return new ne(new k("unquote"),Ze(yt.car.cdr,si+2,Hn));if(yt.car.cdr instanceof ne&&yt.car.cdr.cdr!==fe&&!(yt.car.cdr.car instanceof ne))return yt.car.cdr}if(k.is(yt.car,"quote"))return new ne(yt.car,kt(yt.cdr,si,Hn));if(k.is(yt.car,"unquote")){if(si++,si<Hn)return new ne(new k("unquote"),kt(yt.cdr,si,Hn));if(si>Hn)throw new Error("You can't call `unquote` outside of quasiquote");return yt.cdr instanceof ne?yt.cdr.cdr!==fe?yt.cdr.car instanceof ne?L(kt(yt.cdr.cdr,si,Hn),function($i){var Wa=ae(yt.cdr.car,{env:me,dynamic_scope:te,error:ie});return new ne(Wa,$i)}):yt.cdr:ae(yt.cdr.car,{env:me,dynamic_scope:te,error:ie}):yt.cdr}return Te(yt,$i=>kt($i,si,Hn))}return yt}function Ft(yt){yt instanceof ne&&(delete yt.data,yt.haveCycles("car")||Ft(yt.car),yt.haveCycles("cdr")||Ft(yt.cdr))}var Ot=kt(T.car,0,1);return L(Ot,yt=>(Ft(yt),ti(yt)))},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:N(function(T){return Ye("clone",T,"pair"),T.clone()},`(clone list)

            Function return clone of the list.`),append:N(function(T,F){return Ye("append",T,"pair"),this.get("append!")(T.clone(),F)},`(append list item)

            Function will create new list with value appended to the end. It return
            New list.`),"append!":N(function(T,F){return Ye("append!",T,"pair"),on(F)||Re(F)?T:T.append(F)},`(append! name expression)

             Destructive version of append, it modify the list in place. It return
             original list.`),reverse:N(function(T){if(Ye("reverse",T,["array","pair"]),T instanceof ne){var F=this.get("list->array")(T).reverse();return this.get("array->list")(F)}else{if(T instanceof Array)return T.reverse();throw new Error(qi("reverse",ke(T),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:N(function(T,F){if(Ye("nth",T,"number"),Ye("nth",F,["array","pair"]),F instanceof ne){for(var te=F,ie=0;ie<T;){if(!te.cdr||te.cdr===fe||te.haveCycles("cdr"))return fe;te=te.cdr,ie++}return te.car}else{if(F instanceof Array)return F[T];throw new Error(qi("nth",ke(F),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:N(function(...T){return ne.fromArray(T)},`(list . args)

            Function create new list out of its arguments.`),substring:N(function(T,F,te){return Ye("substring",T,"string"),Ye("substring",F,"number"),Ye("substring",te,["number","undefined"]),T.substring(F.valueOf(),te&&te.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:N(function(...T){return T.forEach((F,te)=>Ye("concat",F,"string",te+1)),T.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:N(function(T,F){return Ye("join",T,"string"),Ye("join",F,"pair"),this.get("list->array")(F).join(T)},`(join separator list)

            Function return string by joining elements of the list`),split:N(function(T,F){return Ye("split",T,["regex","string"]),Ye("split",F,"string"),this.get("array->list")(F.split(T))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:N(function(T,F,te){return Ye("replace",T,["regex","string"]),Ye("replace",F,["string","function"]),Ye("replace",te,"string"),te.replace(T,F)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:N(function(T,F){Ye("match",T,["regex","string"]),Ye("match",F,"string");var te=F.match(T);return te?this.get("array->list")(te):fe},`(match pattern string)

            function return match object from JavaScript as list.`),search:N(function(T,F){return Ye("search",T,["regex","string"]),Ye("search",F,"string"),F.search(T)},`(search pattern string)

            Function return first found index of the pattern inside a string`),string:N(function T(F,te){if(typeof jQuery<"u"&&F instanceof jQuery.fn.init)return"<#jQuery("+F.length+")>";if(F instanceof He)return F.value.toString();if(typeof F>"u")return"<#undefined>";if(typeof F=="function")return Ci(F)?"<#function(native)>":"<#function>";if(F instanceof RegExp)return F.toString();if(F===fe)return"nil";if(F instanceof Array)return"["+F.map(le=>T(le,!0)).join(", ")+"]";if(F===null||typeof F=="string"&&te)return JSON.stringify(F).replace(/\\n/g,`
`);if(F instanceof ne||F instanceof k)return F.toString();if(e.HTMLElement&&F instanceof e.HTMLElement)return`<#HTMLElement(${F.tagName.toLowerCase()})>`;if(typeof F=="object"){var ie=F.constructor,me;return typeof ie.__className=="string"?me=ie.__className:ke(F)==="instance"?me="instance":me=ie.name,me!==""?"<#"+me+">":"<#Object>"}return typeof F!="string"?F.toString():F},`(string obj)

            Function return string LIPS representation of an object as string.`),env:N(function(T){T=T||this;var F=Object.keys(T.env),te;return F.length?te=ne.fromArray(F):te=fe,T.parent!==n?this.get("env").call(this,T.parent).append(te):te},`(env obj)

            Function return list values (functions and variables) inside environment.`),new:N(function(T,...F){var te=new(Sn(T))(...F);return Object.defineProperty(te,"__instance__",{enumerable:!1,get:()=>!0,set:()=>{},configurable:!1}),te},`(new obj . args)

            Function create new JavaScript instance of an object.`),"unset!":N(function(T){Ye("unset!",T,"symbol"),delete this.env[T.name]},`(unset! name)

            Function delete specified name from environment.`),"remove-special!":N(function(T){Ye("remove-special!",T,"string"),delete S[T]},"(remove-special! symbol)\n\n            Function remove special symbol from parser. Added by `add-special!`"),"add-special!":N(function(T,F){Ye("remove-special!",T,"string",1),Ye("remove-special!",F,"symbol",2),Yt.specials[T]=F},"(add-special! symbol name)\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! '#)` will allow to use `#(1 2 3)` and it will be\n            transformed into (# (1 2 3)) so you can write # macro that will process\n            the list. It's main purpose to to allow to use `define-symbol-macro`"),get:ei,".":ei,unbind:N(Sn,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:N(ke,`(type object)

             Function return type of an object as string.`),instanceof:N(function(T,F){return F instanceof T},`(instanceof type obj)

            Function check of object is instance of object.`),"macro?":N(function(T){return T instanceof ut},`(macro? expression)

            Function check if value is a macro.`),"function?":N(function(T){return typeof T=="function"},`(function? expression)

            Function check if value is a function.`),"real?":N(function(T){return ke(T)!=="number"?!1:T instanceof He?T.isFloat():He.isFloat(T)},`(real? number)

            Function check if value is real number.`),"number?":N(He.isNumber,`(number? expression)

             Function check if value is a number`),"string?":N(function(T){return typeof T=="string"},`(string? expression)

            Function check if value is a string.`),"pair?":N(function(T){return T instanceof ne},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":N(function(T){return T instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":N(function(T){return on(T)||T instanceof ne&&T.isEmptyList()},`(null? expression)

            Function check if value is nulish.`),"boolean?":N(function(T){return typeof T=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":N(function(T){return T instanceof k},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":N(function(T){return T instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":N(function(T){return T!==fe&&T!==null&&!(T instanceof He)&&typeof T=="object"&&!(T instanceof Array)},`(object? expression)

            Function check if value is an object.`),read:N(function T(F){return typeof F=="string"?w(E(F))[0]:this.get("stdin").read().then(te=>T.call(this,te))},`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:N(function(T){T instanceof ne?(T=new Yt.Formatter(T.toString()).break().format(),this.get("stdout").write(T)):this.get("display").call(this,T)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:N(function(){throw new Error("Function print was removed in version 0.20.0 use display insided")},`(print . args)

            defunct function, we keep it to show proper error when used.`),display:N(function(...T){this.get("stdout").write(...T.map(F=>this.get("string")(F,typeof F=="string")))},`(display . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code)`),error:N(function(...T){this.get("display").apply(this,T)},`(error . args)

            Display error message.`),flatten:N(function(T){return Ye("flatten",T,"pair"),T.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":N(function(T){return Ye("array->list",T,"array"),ne.fromArray(T)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":N(De("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":N(De("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:N(function(T,F){return Ye("call",T,"function",1),Ye("call",F,"pair",2),T(...this.get("list->array")(F))},`(apply fn list)

            Function that call function with list of arguments.`),length:N(function(T){if(!T)return He(0);if(T instanceof ne)return He(T.length());if("length"in T)return He(T.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),try:N(new ut("try",function(T,{dynamic_scope:F,error:te}){return new Promise(ie=>{var me={env:this,error:Te=>{var Pe=this.inherit("try");Pe.set(T.cdr.car.cdr.car.car,Te);var Ze={env:Pe,error:te};F&&(Ze.dynamic_scope=this),L(ae(new ne(new k("begin"),T.cdr.car.cdr.cdr),Ze),function(st){ie(st)})}};F&&(me.dynamic_scope=this);var le=ae(T.car,me);Kt(le)?le.catch(me.error).then(ie):ie(le)})}),"(try expr (catch (e) code)"),find:N(function T(F,te){if(Ye("find",F,["regex","function"]),Ye("find",te,"pair"),on(te))return fe;var ie=A("find",F);return L(ie(te.car),function(me){return me&&me!==fe?te.car:T(F,te.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":N(function(T,...F){Ye("for-each",T,"function"),F.forEach((ie,me)=>{Ye("for-each",ie,["pair","nil"],me+1)});var te=this.get("map").call(this,T,...F);if(Kt(te))return te.then(()=>{})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:N(function T(F,...te){if(Ye("map",F,"function"),te.forEach((le,Te)=>{Ye("map",le,["pair","nil"],Te+1)}),te.some(le=>le===fe))return fe;if(te.some(Re))return be();var ie=te.map(le=>le.car),me=this;return ie.callee=F,me.set("arguments",ie),L(F.call(me,...ie),le=>L(T.call(this,F,...te.map(Te=>Te.cdr)),Te=>new ne(le,Te)))},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),some:N(function T(F,te){return Ye("some",F,"function"),Ye("some",te,["pair","nil"]),on(te)?!1:L(F(te.car),ie=>ie||T(F,te.cdr))},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If it don't find the value it will return false`),fold:N(yi("fold",function(T,F,te,...ie){if(Ye("fold",F,"function"),ie.forEach((le,Te)=>{Ye("fold",le,["pair","nil"],Te+1)}),ie.some(Re))return te;const me=T.call(this,F,te,...ie.map(le=>le.cdr));return L(me,le=>F(...ie.map(Te=>Te.car),le))}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements on the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist`),pluck:N(function(...T){return function(F){if(T=T.map(ie=>ie instanceof k?ie.name:ie),T.length===0)return fe;if(T.length===1){const[ie]=T;return F[ie]}var te={};return T.forEach(ie=>{te[ie]=F[ie]}),te}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:N(yi("reduce",function(T,F,te,...ie){return Ye("reduce",F,"function"),ie.forEach((me,le)=>{Ye("reduce",me,["pair","nil"],le+1)}),ie.some(Re)?te:L(F(...ie.map(me=>me.car),te),me=>T.call(this,F,me,...ie.map(le=>le.cdr)))}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist`),filter:N(function(T,F){Ye("filter",T,["regex","function"]),Ye("filter",F,["pair","nil"]);var te=this.get("list->array")(F),ie=[],me=A("filter",T);return function le(Te){function Pe(st){return st&&st!==fe&&ie.push(Ze),le(++Te)}if(Te===te.length)return ne.fromArray(ie);var Ze=te[Te];return L(me(Ze,Te),Pe)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),range:N(function(T){return Ye("range",T,"number"),T instanceof He&&(T=T.valueOf()),ne.fromArray(new Array(T).fill(0).map((F,te)=>He(te)))},`(range n)

            Function return list of n numbers from 0 to n - 1`),compose:N(bt,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:N(at,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:N(Bt,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),odd:N(It(function(T){return He(T).isOdd()}),`(odd number)
             Function check if number os odd.`),even:N(It(function(T){return He(T).isEvent()}),`(even number)

             Function check if number is even.`),"*":N(qt(function(T,F){return He(T).mul(F)}),`(* . numbers)

             Multiplicate all numbers passed as arguments. If single value is passed
              it will return that value.`),"+":N(qt(function(T,F){return He(T).add(F)}),`(+ . numbers)

             Sum all numbers passed as arguments. If single value is passed it will
             return that value.`),"-":N(function(...T){if(T.length===1)return He(T[0]).neg();if(T.length)return T.reduce(Gt(function(F,te){return He(F).sub(te)}))},`(- . numbers)
            (- number)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":N(qt(function(T,F){return He(T).div(F)}),`(/ . numbers)

             Divide number passed as arguments one by one. If single argument
             is passed it will return that value.`),abs:N(It(function(T){return He(T).abs()}),`(abs number)

             Function create absolute value from number.`),sqrt:N(It(function(T){return Math.sqrt(T)}),`(sqrt number)

             Function return square root of the number.`),"**":N(Gt(function(T,F){return He(T).pow(F)}),`(** a b)

            Function calculate number a to to the power of b. It can throw
            exception when ** native operator is not supported.`),"1+":N(It(function(T){return He(T).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":N(It(function(T){return He(T).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"++":N(new ut("++",function(T){Ye("++",T.car,"symbol");var F=this.get(T.car),te=He(F).add(1);return this.set(T.car,te),te}),`(++ variable)

             Macro that work only on variables and increment the value by one.`),"--":N(new ut("--",function(T){Ye("--",T.car,"symbol");var F=this.get(T.car),te=He(F).sub(1);return this.set(T.car,te),te}),`(-- variable)

             Macro that decrement the value it work only on symbols`),"%":N(qt(function(T,F){return He(T).mod(F)}),`(% . numbers)

             Function use modulo operation on each of the numbers. It return
             single number.`),"==":N(function(T,F){return He(T).cmp(F)===0},`(== a b)

            Function compare two numbers and check if they are equal.`),">":N(function(T,F){return He(T).cmp(F)===1},`(> a b)

            Function compare two numbers and check if first argument is greater
            than the second one`),"<":N(function(T,F){return He(T).cmp(F)===-1},`(< a b)

            Function compare two numbers and check if first argument is less
            than the second one`),"<=":N(function(T,F){return[0,-1].includes(He(T).cmp(F))},`(<= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),">=":N(function(T,F){return[0,1].includes(He(T).cmp(F))},`(>= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),"eq?":N(At,`(eq? a b)

             Function compare two values if they are identical.`),or:N(new ut("or",function(T,{dynamic_scope:F,error:te}){var ie=this.get("list->array")(T),me=this;F&&(F=me);var le;return function Te(){function Pe(kt){return le=kt,le||Te()}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var st=ae(Ze,{env:me,dynamic_scope:F,error:te});return L(st,Pe)}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:N(new ut("and",function(T,{dynamic_scope:F,error:te}={}){var ie=this.get("list->array")(T),me=this;if(F&&(F=me),!ie.length)return!0;var le;return function Te(){function Pe(kt){return le=kt,le?Te():!1}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var st=ae(Ze,{env:me,dynamic_scope:F,error:te});return L(st,Pe)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":N(function(T,F){return He(T).or(F)},`(& a b)

            Function calculate or bit operation.`),"&":N(function(T,F){return He(T).and(F)},`(& a b)

            Function calculate and bit operation.`),"~":N(function(T){return He(T).neg()},`(~ number)

            Function negate the value.`),">>":N(function(T,F){return He(T).shr(F)},`(>> a b)

            Function right shit the value a by value b.`),"<<":N(function(T,F){return He(T).shl(F)},`(<< a b)

            Function left shit the value a by value b.`),not:N(function(T){return Re(T)?!0:!T},`(not object)

            Function return negation of the argument.`),"->":N(function(T,F,...te){return T[F](...te)},`(-> obj name . args)

            Function get function from object and call it with arguments.`)},n,"global");["floor","round","ceil"].forEach(T=>{vn.set(T,N(function(F){if(Ye(T,F,"number"),F instanceof He)return F[T]()},`(${T} number)

            Function calculate ${T} of a number.`))});function rr(T){if(T.length===1)return T[0];for(var F=[],te=rr(T.slice(1)),ie=0;ie<te.length;ie++)for(var me=0;me<T[0].length;me++)F.push(T[0][me]+te[ie]);return F}function sl(T,F,te){for(var ie=[],me=F;me<=te;++me){for(var le=[],Te=0;Te<me;++Te)le.push(T);ie=ie.concat(rr(le))}return ie}sl(["d","a"],2,5).forEach(T=>{const F=T.split(""),te=F.slice().reverse(),ie=F.map(le=>`(c${le}r`).join(" ")+" arg"+")".repeat(F.length),me="c"+T+"r";vn.set(me,N(function(le){return te.reduce(function(Te,Pe){return Te===fe?fe:(Ye(me,Te,"pair"),Pe==="a"?Te.car:Te.cdr)},le)},`(${me} arg)

            Function calculate ${ie}`))}),typeof ta<"u"?(vn.set("global",ta),vn.set("require.resolve",N(function(T){return require.resolve(T)},`(require.resolve path)

           Return path relative the current module.`)),vn.set("require",N(function(T){return Pre(T)},`(require module)

            Function to be used inside Node.js to import the module.`))):typeof window<"u"&&vn.set("window",window);function qi(T,F,te,ie=null){let me=T?` in function \`${T}\``:"";if(ie!==null&&(me+=` argument ${ie}`),te instanceof Array){const le=te[te.length-1];te=te.slice(0,-1).join(", ")+" or "+le}return`Expecting ${te} got ${F}${me}`}function Ye(T,F,te,ie=null){const me=ke(F);var le=!1;if(te instanceof Array&&te.includes(me)&&(le=!0),!le&&me!==te)throw new Error(qi(T,me,te,ie))}function is(T){var F=typeof T;return["string","function"].includes(F)||T instanceof He||T instanceof RegExp}function ke(T){var F={pair:ne,symbol:k,macro:ut,array:Array,native_symbol:Symbol};if(T===fe)return"nil";if(T===null)return"null";for(let[te,ie]of Object.entries(F))if(T instanceof ie)return te;return T instanceof He?"number":T instanceof RegExp?"regex":typeof T=="object"?T.__instance__&&(T.__instance__=!1,T.__instance__)?"instance":T.constructor.name:typeof T}function Le(T){var F=[];if(te(T),F.length)return me(T);return T;function te(le){Kt(le)?F.push(le):le instanceof ne?(le.haveCycles("car")||te(le.car),le.haveCycles("cdr")||te(le.cdr)):le instanceof Array&&le.forEach(te)}async function ie(le){var Te=new ne(le.haveCycles("car")?le.car:await me(le.car),le.haveCycles("cdr")?le.cdr:await me(le.cdr));return le.data&&(Te.data=!0),Te}function me(le){return le instanceof Array?Promise.all(le.map(me)):le instanceof ne&&F.length?ie(le):le}}function Ae(T,{env:F,dynamic_scope:te,error:ie}){var me=[],le=T;for(rt(le);le instanceof ne&&!Re(le);){var Te=ae(le.car,{env:F,dynamic_scope:te,error:ie});if(te&&(Te=L(Te,Pe=>typeof Pe=="function"&&Ci(Pe)?Pe.bind(te):Pe)),me.push(Te),le.haveCycles("cdr"))break;le=le.cdr}return Le(me)}function se(T,F,te){var ie=T.invoke(F,te);return L(Le(ie),function(le){return le&&le.data||!le||is(le)?le:ti(ae(le,te))})}function ae(T,{env:F,dynamic_scope:te,error:ie=()=>{}}={}){try{te===!0?F=te=F||vn:F===!0?F=te=vn:F=F||vn;var me={env:F,dynamic_scope:te,error:ie},le;if(on(T))return T;if(Re(T))return be();if(T instanceof k)return F.get(T,{weak:!0});var Te=T.car,Pe=T.cdr;if(Te instanceof ne){if(le=Le(ae(Te,me)),Kt(le))return le.then(Ft=>ae(new ne(Ft,T.cdr),me));if(typeof le!="function")throw new Error(ke(le)+" "+F.get("string")(le)+" is not a function while evaluating "+T.toString())}if(Te instanceof k){if(le=F.get(Te,{weak:!0}),le instanceof ut){var Ze=se(le,Pe,me);return L(Ze,Ft=>Ft instanceof ne?Ft.markCycles():Ft)}else if(typeof le!="function"){if(le){var st=`${ke(le)} \`${le}' is not a function`;throw new Error(st)}throw new Error(`Unknown function \`${Te.name}'`)}}else typeof Te=="function"&&(le=Te);if(typeof le=="function"){var kt=Ae(Pe,me);return L(kt,function(Ft){var Ot=(te||F).inherit("__frame__");Ot.set("parent.frame",function(Hn=1){if(Hn===0)return Ot;if(!(Ot.parent instanceof Vn))return fe;var or=Ot.parent.get("parent.frame",{throwError:!1});return typeof or=="function"?or(Hn-1):fe});var yt=Ft.slice();yt.callee=le,Ot.set("arguments",yt);var si=Le(le.apply(Ot,Ft));return L(si,Hn=>Hn instanceof ne?ti(Hn.markCycles()):Hn,ie)})}else if(T instanceof k){if(le=F.get(T),le==="undefined")throw new Error("Unbound variable `"+T.name+"'");return le}else{if(T instanceof ne)throw le=Te&&Te.toString(),new Error(`${ke(Te)} ${le} is not a function`);return T}}catch(Ft){ie&&ie(Ft,T)}}async function pe(T,F,te){te===!0?F=te=F||vn:F===!0?F=te=vn:F=F||vn;for(var ie=w(T),me=[];;){var le=ie.shift();if(le){var Te=await ae(le,{env:F,dynamic_scope:te,error:(Pe,Ze)=>{throw Ze&&(Pe.code instanceof Array||(Pe.code=[]),Pe.code.push(Ze.toString())),Pe}});me.push(Te)}else return me}}function J(T){return function(F){return F?(F.token||F).match(T):!1}}var ve=J(/[()]/);function $e(T){var F=typeof T=="string"?E(T):T,te=F.filter(ve),ie=te.filter(le=>(le.token||le)===")"),me=te.filter(le=>(le.token||le)==="(");return ie.length===me.length}ne.unDry=function(T){return new ne(T.car,T.cdr)},ne.prototype.toDry=function(){return{value:{car:this.car,cdr:this.cdr}}},K.prototype.toDry=function(){return{value:null}},K.unDry=function(){return fe},k.prototype.toDry=function(){return{value:{name:this.name}}},k.unDry=function(T){return new k(T.name)};function Me(T){console.error(T.message||T),T.code&&console.error(T.code.map((F,te)=>`[${te+1}]: ${F}`))}function dt(){var T="text/x-lips";if(window.document){var F=Array.from(document.querySelectorAll("script"));return function te(){var ie=F.shift();if(ie){var me=ie.getAttribute("type");if(me===T){var le=ie.getAttribute("src");return le?e.fetch(le).then(Te=>Te.text()).then(pe).then(te).catch(Te=>{Me(Te),te()}):pe(ie.innerHTML).then(te).catch(Te=>{Me(Te),te()})}else me&&me.match(/lips|lisp/)&&console.warn("Expecting "+T+" found "+me);return te()}}()}}typeof window<"u"&&r(window,dt),$.__className="Ahead",I.__className="Pattern",X.__className="Formatter",ut.__className="Macro",Vn.__className="Environment";var Yt={version:"{{VER}}",exec:pe,parse:w,tokenize:E,evaluate:ae,Environment:Vn,global_environment:vn,globalEnvironment:vn,env:vn,balanced_parenthesis:$e,balancedParenthesis:$e,Macro:ut,quote:ti,Pair:ne,Formatter:X,specials:S,nil:fe,resolvePromises:Le,LSymbol:k,LNumber:He};return vn.set("lips",Yt),Yt})})(bve);var nft=bve.exports;const ift=Wp(nft),yve=["FlinkSQL","SparkSQL","HiveSQL","MySQL","PGSQL","TrinoSQL","ImpalaSQL"],x5=yve[0],wve={id:"fixedTab",name:x5,data:{value:"",language:x5.toLowerCase()}},Sve={id:"fixedStatusItem",name:x5,sortIndex:3};class Eve{constructor(e,t,n){this._onDidChange=new cge,this._languageId=e,this.setModeConfiguration(t),this._preprocessCode=n??null}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get completionService(){return this._modeConfiguration.completionItems.completionService}get completionSnippets(){return this._modeConfiguration.completionItems.snippets}get triggerCharacters(){return this._modeConfiguration.completionItems.triggerCharacters}get preprocessCode(){return this._preprocessCode}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}const rft=function(i,e,t,n,r,o){if(!n)return Promise.resolve([]);const{keywords:s}=n,a=s.map(d=>({label:d,kind:Ia.CompletionItemKind.Keyword,detail:"keyword"})),u=(o==null?void 0:o.map(d=>({label:d.label||d.prefix,kind:Ia.CompletionItemKind.Snippet,filterText:d.prefix,insertText:d.insertText,insertTextRules:Ia.CompletionItemInsertTextRule.InsertAsSnippet,detail:d.description||"snippet",documentation:d.insertText})))||[];return Promise.resolve([...a,...u])},mb={completionItems:{snippets:[],enable:!0,completionService:rft,triggerCharacters:["."," "]},diagnostics:!0,definitions:!0,references:!0},oft=2*60*1e3;class sft{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>oft&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=sa.createWebWorker({moduleId:this._defaults.languageId,label:this._defaults.languageId,createData:{languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){const t=e==null?void 0:e.filter(Boolean);return this._getClient().then(n=>(t&&(t!=null&&t.length)&&this._worker&&this._worker.withSyncedResources(t),n))}}class aft{constructor(){this.workerClients=new Map}valid(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(s=>s.doValidation(n))}parserTreeToString(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(s=>s.parserTreeToString(n))}getAllEntities(e,t,n){const r=typeof t=="string"?t:t.getValue(),o=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,o).then(a=>a.getAllEntities(r,n))}dispose(e){var t;e?this.workerClients.has(e)&&((t=this.workerClients.get(e))===null||t===void 0||t.dispose(),this.workerClients.delete(e)):(this.workerClients.forEach(n=>{n.dispose()}),this.workerClients.clear())}getClientWorker(e,...t){let n=this.workerClients.get(e);if(!n){const r=new sft(this.getLanguageServiceDefault(e));return this.workerClients.set(e,r),r.getLanguageServiceWorker(...t)}return n.getLanguageServiceWorker(...t)}getLanguageServiceDefault(e){return new Eve(e,mb)}}function lft(i,e,t){let n=null;return(...r)=>{if(n&&clearTimeout(n),t&&!n)return i==null?void 0:i(...r);n=setTimeout(()=>{n&&clearTimeout(n),n=null,i==null||i(...r)},e)}}class uft extends re.Component{constructor(t){super(t);hv(this,"_language",x5);hv(this,"languageService");hv(this,"onClick",(t,n)=>{console.log("onClick:",t,n)});hv(this,"onChangeLanguage",(t,n)=>{n&&n.value&&(this._language=n.value,this.updateLanguage(n.value))});hv(this,"analyseProblems",lft(t=>{const n=t.data.value;this.languageService.valid(this.language,n).then(r=>{nn.problems.reset();const o=this.convertMsgToProblemItem(t,n,r);nn.problems.add(o)})},200));hv(this,"convertMsgToProblemItem",(t,n,r=[])=>{const o=t.id,s=`${t.name||""}`,a={id:o,name:s,isLeaf:!1,value:{code:s,message:"",startLineNumber:0,startColumn:1,endLineNumber:0,endColumn:1,status:Qh.Hint},children:[]};return a.children=r.map((u,d)=>({id:`${o}-${d}`,name:u.code||"",isLeaf:!0,value:{code:u.code,message:u.message,startLineNumber:Number(u.startLine),startColumn:Number(u.startCol),endLineNumber:Number(u.endLine),endColumn:Number(u.endCol),status:Qh.Error},children:[]})),a});hv(this,"parse",()=>{this.setupOutputLanguage();const t=nn.editor.editorInstance.getValue();nn.panel.cleanOutput(),this.languageService.parserTreeToString(this.language,t).then(n=>{const r=n==null?void 0:n.replace(/(\(|\))/g,`$1
`),s=new ift.Formatter(r).format({indent:2,offset:2}),a=nn.panel.getPanel(nn.builtin.getConstants().PANEL_OUTPUT??"")??{};nn.panel.update({...a,data:s}),nn.panel.appendOutput("")})});this.languageService=new aft}componentDidMount(){nn.editor.onUpdateTab(this.analyseProblems),sa.setTheme("sql-dark")}get language(){return this._language.toLowerCase()}updateLanguage(t){var u;const n=this.language,r=Object.assign(wve,{name:t,data:{language:n,value:""}}),o=((u=nn.editor.getState().current)==null?void 0:u.id)||-1;nn.editor.updateTab(r,o);const s=nn.editor.editorInstance.getModel();s&&sa.setModelLanguage(s,n);const a=Object.assign(Sve,{name:t,sortIndex:3});this.analyseProblems(r),nn.statusBar.update(a)}async setupOutputLanguage(){var n;const t=await((n=nn.panel.outputEditorInstance)==null?void 0:n.getModel());t&&sa.setModelLanguage(t,"clojure")}renderColorThemes(){const t=yve.map(n=>Mc.jsx(lfe,{value:n,children:n},n));return Mc.jsx(gO,{style:{margin:"10px 4px 20px 4px"},defaultValue:this._language,onSelect:this.onChangeLanguage,children:t})}render(){return Mc.jsx("div",{children:Mc.jsxs("div",{style:{margin:"20px 20px"},children:[Mc.jsxs("h1",{style:{fontSize:20,textTransform:"uppercase"},children:["Select a language:"," "]}),this.renderColorThemes(),Mc.jsx(b1,{onClick:this.parse,children:"Parse"})]})})}}const cft={id:"ExtendWorkbench",name:"ExtendWorkbench",activate(){const i={id:"ParserSidebar",title:"Sidebar",render(){return Mc.jsx(uft,{})}};nn.sidebar.add(i),nn.sidebar.setState({current:i.id});const e={id:"OnlineParser",icon:"beaker",title:"SQL Languages Online Parse"},t={id:"GotoGithub",icon:"github",title:"Go To Github"};nn.activityBar.remove("sidebar.explore.title"),nn.activityBar.remove("sidebar.search.title"),nn.activityBar.add([e,t]),nn.activityBar.setState({selected:e.id}),nn.activityBar.onClick(n=>{n===t.id&&(window.location.href="https://github.com/DTStack/monaco-sql-languages")}),nn.editor.open(wve),nn.statusBar.add(Sve,Sp.right)},dispose(){}},dft="0.15.1",hft={"dt-sql-parser":"4.3.1"};var fft=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Lve={},PW={};class LZ{static getOrCreate(e){return PW[e]||(PW[e]=new LZ(e)),PW[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Lve[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}function VC(i){const e=i.id;Lve[e]=i,Ia.register(i);const t=LZ.getOrCreate(e);Ia.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),Ia.onLanguage(e,()=>fft(this,void 0,void 0,function*(){const n=yield t.load();Ia.setLanguageConfiguration(e,n.conf)}))}const Xt={BINARY:"binary",BINARY_ESCAPE:"binary.escape",COMMENT:"comment",COMMENT_QUOTE:"comment.quote",DELIMITER:"delimiter",DELIMITER_CURLY:"delimiter.curly",DELIMITER_PAREN:"delimiter.paren",DELIMITER_SQUARE:"delimiter.square",IDENTIFIER:"identifier",IDENTIFIER_QUOTE:"identifier.quote",KEYWORD:"keyword",KEYWORD_SCOPE:"keyword.scope",NUMBER:"number",NUMBER_FLOAT:"number.float",NUMBER_BINARY:"number.binary",NUMBER_OCTAL:"number.octal",NUMBER_HEX:"number.hex",OPERATOR:"operator",OPERATOR_KEYWORD:"operator.keyword",OPERATOR_SYMBOL:"operator.symbol",PREDEFINED:"predefined",STRING:"string",STRING_DOUBLE:"string.double",STRING_ESCAPE:"string.escape",TYPE:"type",VARIABLE:"variable",WHITE:"white"},Qt=i=>i+".sql";var ji;(function(i){i.FLINK="flinksql",i.HIVE="hivesql",i.MYSQL="mysql",i.PG="pgsql",i.SPARK="sparksql",i.TRINO="trinosql",i.IMPALA="impalasql"})(ji||(ji={}));const gft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:table_name} ${2:t1}","${3:LEFT} JOIN ${4:table2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDERBY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO TABLE ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"insert-overwrite-table",prefix:"INSERT-OVERWRITE-TABLE",body:["INSERT OVERWRITE TABLE ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","COMMENT '${6:table_comment}'","ROW FORMAT ${7:DELIMITED}","FIELDS TERMINATED BY '${8:\\t}'","STORED AS ${9:PARQUET};\n$10"]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE IF NOT EXISTS ${1:table_name}","AS","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]},{label:"create-partition-table",prefix:"CREATE-PARTITION-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","COMMENT '${6:table_comment}'","PARTITIONED BY (${7:part_column_name} STRING)","ROW FORMAT ${8:DELIMITED}","FIELDS TERMINATED BY '${9:\\t}'","STORED AS ${10:PARQUET};\n$11"]},{label:"create-bucket-table",prefix:"CREATE-BUCKET-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","COMMENT '${6:table_comment}'","PARTITIONED BY (${7:part_column_name} STRING)","CLUSTERED BY (${8:bucket_column_name}) INTO ${9:1} BUCKETS","ROW FORMAT ${10:DELIMITED}","FIELDS TERMINATED BY '${11:\\t}'","STORED AS ${12:PARQUET};\n$13"]},{label:"alter-table-partition",prefix:"ALTER-TABLE-PARTITION",body:["ALTER TABLE ${1:table_name} ${2:ADD} PARTITION (${3:part_column}='${4:part_value}');\n$5"]},{label:"alter-table-properties",prefix:"ALTER-TABLE-PROPERTIES",body:["ALTER TABLE ${1:table_name} SET TBLPROPERTIES ('${2:property_name}'='${3:property_value}');\n$4"]},{label:"alter-table-columns",prefix:"ALTER-TABLE-COLUMNS",body:["ALTER TABLE ${1:table_name} ADD COLUMNS (","	${2:column_name} ${3:STRING} COMMENT '${4:desc}'",`);
$5`]}],pft=[{label:"create-source-table",prefix:"CREATE-SOURCE-TABLE",body:["CREATE TABLE ${1:source_table} (","	id STRING,","	val BIGINT,","	ts TIMESTAMP(3),","	WATERMARK FOR ts AS ts - INTERVAL '5' SECOND",") WITH (","	'connector' = 'kafka',","	'topic' = 'input_topic',","	'properties.bootstrap.servers' = 'localhost:9092',","	'format' = 'json',","	'scan.startup.mode' = 'earliest-offset'",");"]},{label:"create-sink-table",prefix:"CREATE-SINK-TABLE",body:["CREATE TABLE ${1:sink_table} (","	id STRING,","	cnt BIGINT",") WITH (","	'connector' = 'jdbc',","	'url' = 'jdbc:mysql://localhost:3306/test',","	'table-name' = 'output_table',","	'username' = 'root',","	'password' = 'password'",");"]},{label:"tumble-window",prefix:"TUMBLE-WINDOW",body:["SELECT","	window_start,","	window_end,","	SUM(price) as total_price","FROM","	TABLE(TUMBLE(TABLE table_name2,","	DESCRIPTOR(create_time),","	INTERVAL '1' MINUTE))","GROUP BY","	window_start,","	window_end;"]},{label:"hop-window",prefix:"HOP-WINDOW",body:["SELECT","	window_start,","	window_end,","	SUM(price) as total_price","FROM","	TABLE(HOP(TABLE table_name2,","	DESCRIPTOR(create_time),","	INTERVAL '30' SECONDS,","	INTERVAL '1' MINUTE))","GROUP BY","	window_start,","	window_end;"]},{label:"comulate-window",prefix:"CUMULATE-WINDOW",body:["SELECT","	window_start,","	window_end,","	SUM(price) as total_price","FROM","	TABLE(CUMULATE(TABLE table_name2,","	DESCRIPTOR(create_time),","	INTERVAL '30' SECONDS,","	INTERVAL '1' MINUTE))","GROUP BY","	window_start,","	window_end;"]},{label:"session-window",prefix:"SESSION-WINDOW",body:["SELECT","	SESSION_START(create_time, INTERVAL '10' SECOND) AS session_beg,","	SESSION_ROWTIME(create_time, INTERVAL '10' SECOND) AS session_end,","	SUM(price) AS total_price","FROM","	table_name","GROUP BY","	SESSION(create_time, INTERVAL '10' SECOND);"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:table_name}","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]}],mft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:hive.schema_name.table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:hive.schema_name.table_name1} ${2:t1}","${3:LEFT} JOIN ${4:hive.schema_name.table_name2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDER-BY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:hive.schema_name.table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:hive.schema_name.table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:hive.schema_name.table_name}","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:hive.schema_name.table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:hive.schema_name.table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-catalog",prefix:"CREATE-CATALOG",body:["CREATE CATALOG ${1:catalog_name} USING ${2:hive}","WITH (","	${3:property_name} = '${4:property_value}'",`);
$5`]},{label:"create-schema",prefix:"CREATE-SCHEMA",body:["CREATE SCHEMA ${1:hive.schema_name} WITH (LOCATION = '${2:/hive/data/web}');\n$3"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:hive.schema_name.table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","COMMENT '${6:table_comment}'","WITH (","	format = '${7:PARQUET}'",`);
$8`]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE IF NOT EXISTS ${1:hive.schema_name.table_name}","AS","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"alter-table-properties",prefix:"ALTER-TABLE-PROPERTIES",body:["ALTER TABLE ${1:hive.schema_name.table_name} SET PROPERTIES ${2:property_name} = '${3:property_value}';\n$4"]},{label:"alter-table-columns",prefix:"ALTER-TABLE-COLUMNS",body:["ALTER TABLE ${1:hive.schema_name.table_name} ADD COLUMN ${2:column_name} ${3:STRING} COMMENT '${4:desc}';\n$5"]}],_ft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:table_name} ${2:t1}","${3:LEFT} JOIN ${4:table2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDER-BY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE  ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",`);
$6`]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE ${1:table_name}","AS","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"create-table-partitioned-by-range",prefix:"CREATE-TABLE-PARTITIONED-BY-RANGE",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT}",")","PARTITION BY RANGE (${2:column1});\n","CREATE TABLE ${6:p0} PARTITION OF ${1:table_name}","	FOR VALUES FROM (${7:start_value}) TO (${8:end_value});\n$9"]},{label:"create-table-partitioned-by-list",prefix:"CREATE-TABLE-PARTITIONED-BY-LIST",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT}",")","PARTITION BY LIST (${2:column1});\n","CREATE TABLE ${6:p0} PARTITION OF ${1:table_name}","	FOR VALUES IN (${7:range_values});\n$8"]},{label:"create-table-partitioned-by-hash",prefix:"CREATE-TABLE-PARTITIONED-BY-HASH",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT}",")","PARTITION BY HASH (${2:column1});\n","CREATE TABLE ${6:p0} PARTITION OF ${1:table_name}","	FOR VALUES WITH (MODULUS ${7:4}, REMAINDER ${8:0});\n$9"]},{label:"alter-table-add-column",prefix:"ALTER-TABLE-ADD-COLUMN",body:["ALTER TABLE ${1:table_name} ADD COLUMN ${2:column_name} ${3:INT};\n$4"]},{label:"alter-table-add-primary-key",prefix:"ALTER-TABLE-ADD-PRIMARY-KEY",body:["ALTER TABLE ${1:table_name} ADD CONSTRAINT ${2:pk_name} PRIMARY KEY (${3:column_name});\n$4"]},{label:"alter-table-add-foreign-key",prefix:"ALTER-TABLE-ADD-FOREIGN-KEY",body:["ALTER TABLE ${1:table_name}","ADD CONSTRAINT ${2:fk_name}","FOREIGN KEY (${3:foreign_column}) REFERENCES ${4:ref_table} (${5:ref_column});\n$6"]}],vft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:table_name} ${2:t1}","${3:LEFT} JOIN ${4:table2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDER-BY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:table_name}","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]},{label:"insert-overwrite-table",prefix:"INSERT-OVERWRITE-TABLE",body:["INSERT OVERWRITE TABLE ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","USING ${6:parquet}","COMMENT '${7:table_comment}';\n$8"]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE IF NOT EXISTS ${1:table_name}","AS","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]},{label:"create-partition-table",prefix:"CREATE-PARTITION-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","USING ${6:parquet}","PARTITIONED BY (${7:part_column_name} ${8:STRING})","COMMENT '${9:table_comment}';\n$10"]},{label:"create-bucket-table",prefix:"CREATE-BUCKET-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","USING ${6:parquet}","CLUSTERED BY (${7:bucket_column}) INTO ${8:1} BUCKETS","COMMENT '${9:table_comment}';\n$10"]},{label:"alter-table-partition",prefix:"ALTER-TABLE-PARTITION",body:["ALTER TABLE ${1:table_name} ${2:ADD} PARTITION (${3:part_column}='${4:part_value}');\n$5"]},{label:"alter-table-properties",prefix:"ALTER-TABLE-PROPERTIES",body:["ALTER TABLE ${1:table_name} SET TBLPROPERTIES ('${2:property_name}'='${3:property_value}');\n$4"]},{label:"alter-table-column",prefix:"ALTER-TABLE-COLUMN",body:["ALTER TABLE ${1:table_name} ADD COLUMN ${2:column_name} ${3:STRING} COMMENT '${4:desc}';\n$5"]}],bft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:table_name} ${2:t1}","${3:LEFT} JOIN ${4:table2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDER-BY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"replace-into-table",prefix:"REPLACE-INTO-TABLE",body:["REPLACE INTO ${1:table_name} (${2:column1}, ${3:column2})","VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",")","COMMENT '${6:table_comment}';\n$7"]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE ${1:table_name}","AS","SELECT ${2:column1}, ${3:column2}","FROM ${4:source_table}","WHERE ${5:conditions};\n$6"]},{label:"create-table-partitioned-by-range",prefix:"CREATE-TABLE-PARTITIONED-BY-RANGE",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",")","PARTITION BY RANGE (${2:column1}) (","	PARTITION ${6:p0} VALUES LESS THAN ($7)",`);
$8`]},{label:"create-table-partitioned-by-list",prefix:"CREATE-TABLE-PARTITIONED-BY-LIST",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",")","PARTITION BY LIST (${2:column1}) (","	PARTITION ${6:p0} VALUES IN ($7)",`);
$8`]},{label:"create-table-partitioned-by-hash",prefix:"CREATE-TABLE-PARTITIONED-BY-HASH",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",")","PARTITION BY HASH (${2:column1})","PARTITIONS ${6:4};\n$7"]},{label:"create-table-partitioned-by-key",prefix:"CREATE-TABLE-PARTITIONED-BY-KEY",body:["CREATE TABLE ${1:table_name} (","	${2:column1} ${3:INT},","	${4:column2} ${5:INT},","	PRIMARY KEY (${2:column1})",")","PARTITION BY KEY (${2:column1})","PARTITIONS ${6:4};\n$7"]},{label:"alter-table-add-column",prefix:"ALTER-TABLE-ADD-COLUMN",body:["ALTER TABLE ${1:table_name} ADD ${2:column_name} ${3:INT} COMMENT '${4:desc}';\n$5"]},{label:"alter-table-add-partition",prefix:"ALTER-TABLE-ADD-PARTITION",body:["ALTER TABLE ${1:table_name} ADD PARTITION (","	$2",`);
$4`]},{label:"alter-table-add-index",prefix:"ALTER-TABLE-ADD-INDEX",body:["ALTER TABLE ${1:table_name} ADD INDEX ${2:index_name} (${3:column_name});\n$4"]},{label:"alter-table-add-primary-key",prefix:"ALTER-TABLE-ADD-PRIMARY-KEY",body:["ALTER TABLE ${1:table_name} ADD PRIMARY KEY (${2:column_name});\n$3"]},{label:"alter-table-add-constraint",prefix:"ALTER-TABLE-ADD-CONSTRAINT",body:["ALTER TABLE ${1:table_name}","ADD CONSTRAINT ${2:constraint_name}","FOREIGN KEY (${3:foreign_column}) REFERENCES ${4:ref_table} (${5:ref_column});\n$6"]}],Cft=[{label:"select",prefix:"SELECT",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name};\n$4"]},{label:"select-join",prefix:"SELECT-JOIN",body:["SELECT ${8:column1} FROM ${1:table_name} ${2:t1}","${3:LEFT} JOIN ${4:table2} ${5:t2} ON ${2:t1}.${6:column1} = ${5:t2}.${7:column2};\n$9"]},{label:"select-order-by",prefix:"SELECT-ORDER-BY",body:["SELECT ${2:column1}, ${3:column2} FROM ${1:table_name} ORDER BY ${4:column1} ${5:desc};\n$6"]},{label:"insert",prefix:"INSERT-INTO",body:["INSERT INTO ${1:table_name} (${2:column1}, ${3:column2}) VALUES (${4:value1}, ${5:value2});\n$6"]},{label:"insert-into-select",prefix:"INSERT-INTO-SELECT",body:["INSERT INTO ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"insert-overwrite-table",prefix:"INSERT-OVERWRITE-TABLE",body:["INSERT OVERWRITE TABLE ${1:table_name}","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"update",prefix:"UPDATE",body:["UPDATE ${1:table_name}","SET ${2:column1} = ${3:value1}","WHERE ${4:column2} = ${5:value2};\n$6"]},{label:"delete",prefix:"DELETE",body:["DELETE FROM ${1:table_name}","WHERE ${2:column1} = ${3:value1};\n$4"]},{label:"create-table",prefix:"CREATE-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","COMMENT '${6:table_comment}'","STORED AS ${7:PARQUET};\n$8"]},{label:"create-table-as-select",prefix:"CREATE-TABLE-AS-SELECT",body:["CREATE TABLE IF NOT EXISTS ${1:table_name}","AS","SELECT ${3:column1}, ${4:column2}","FROM ${2:source_table}","WHERE ${5:conditions};\n$6"]},{label:"create-partition-table",prefix:"CREATE-PARTITION-TABLE",body:["CREATE TABLE IF NOT EXISTS ${1:table_name} (","	${2:column1} ${3:STRING},","	${4:column2} ${5:STRING}",")","PARTITIONED BY (${6:part_column_name} ${7:STRING})","COMMENT '${8:table_comment}'","STORED AS ${9:PARQUET};\n$10"]},{label:"alter-table-partition",prefix:"ALTER-TABLE-PARTITION",body:["ALTER TABLE ${1:table_name} ${2:ADD} PARTITION (${3:part_column} = '${4:part_value}');\n$5"]},{label:"alter-table-properties",prefix:"ALTER-TABLE-PROPERTIES",body:["ALTER TABLE ${1:table_name} SET TBLPROPERTIES ('${2:property_name}' = '${3:property_value}');\n$4"]},{label:"alter-table-column",prefix:"ALTER-TABLE-COLUMN",body:["ALTER TABLE ${1:table_name} ADD COLUMN ${2:column_name} ${3:STRING} COMMENT '${4:desc}';\n$5"]}];var yft=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Bre=new Map,FW=new Map,BW=new Map,xve=new Map;function Wre(i){const e=i.languageId;Tt(()=>import("./setupLanguageMode-74f4d227.js"),[]).then(t=>{var n;FW.has(e)&&((n=FW.get(e))===null||n===void 0||n.dispose()),FW.set(e,t.setupLanguageMode(i))})}function $u(i,e){var t;if(typeof e!="object")return;const{preprocessCode:n}=e,r=yft(e,["preprocessCode"]),o=Sft(i,r),s=new Eve(i,o,n);xve.set(i,s),Bre.get(i)?Wre(s):(BW.has(i)&&((t=BW.get(i))===null||t===void 0||t.dispose()),BW.set(i,Ia.onLanguage(i,()=>{Wre(s),Bre.set(i,!0)})))}function wft(i){switch(i){case ji.HIVE:return gft;case ji.FLINK:return pft;case ji.IMPALA:return Cft;case ji.MYSQL:return bft;case ji.PG:return _ft;case ji.SPARK:return vft;case ji.TRINO:return mft;default:return[]}}function Sft(i,e){var t,n,r,o,s,a,u,d,h,f,p;const m=xve.get(i),v=typeof e.diagnostics=="boolean"?e.diagnostics:(t=m==null?void 0:m.modeConfiguration.diagnostics)!==null&&t!==void 0?t:mb.diagnostics,b=typeof e.completionItems=="boolean"?e.completionItems:(n=m==null?void 0:m.modeConfiguration.completionItems.enable)!==null&&n!==void 0?n:mb.completionItems.enable,E=typeof e.completionItems!="boolean"&&typeof((r=e.completionItems)===null||r===void 0?void 0:r.completionService)=="function"?(o=e.completionItems)===null||o===void 0?void 0:o.completionService:(s=m==null?void 0:m.modeConfiguration.completionItems.completionService)!==null&&s!==void 0?s:mb.completionItems.completionService,S=typeof e.completionItems!="boolean"&&Array.isArray((a=e.completionItems)===null||a===void 0?void 0:a.triggerCharacters)?e.completionItems.triggerCharacters:(u=m==null?void 0:m.modeConfiguration.completionItems.triggerCharacters)!==null&&u!==void 0?u:mb.completionItems.triggerCharacters,w=typeof e.references=="boolean"?e.references:(d=m==null?void 0:m.modeConfiguration.references)!==null&&d!==void 0?d:mb.references,L=typeof e.definitions=="boolean"?e.definitions:(h=m==null?void 0:m.modeConfiguration.definitions)!==null&&h!==void 0?h:mb.definitions,A=typeof e.completionItems!="boolean"&&Array.isArray((f=e.completionItems)===null||f===void 0?void 0:f.snippets)?e.completionItems.snippets:(p=m==null?void 0:m.modeConfiguration.completionItems.snippets)!==null&&p!==void 0?p:wft(i);return{diagnostics:v,completionItems:{enable:b,completionService:E,triggerCharacters:S,snippets:A},references:w,definitions:L}}VC({id:ji.FLINK,extensions:[".flinksql"],aliases:["FlinkSQL","flink","Flink"],loader:()=>Tt(()=>import("./flink-61b54d32.js"),[])});$u(ji.FLINK,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.SPARK,extensions:[".sparksql"],aliases:["SparkSQL","spark","Spark"],loader:()=>Tt(()=>import("./spark-a6837fcb.js"),[])});$u(ji.SPARK,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.HIVE,extensions:[".hivesql"],aliases:["HiveSQL","hive","Hive"],loader:()=>Tt(()=>import("./hive-c0db1c93.js"),[])});$u(ji.HIVE,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.TRINO,extensions:[".trinosql"],aliases:["TrinoSQL","trino","Trino","prestosql","PrestoSQL","presto","Presto"],loader:()=>Tt(()=>import("./trino-146abb96.js"),[])});$u(ji.TRINO,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.MYSQL,extensions:[".mysql"],aliases:["MySQL","mysql"],loader:()=>Tt(()=>import("./mysql-4f9cfc96.js"),[])});$u(ji.MYSQL,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.PG,extensions:[".pgsql"],aliases:["PgSQL","postgresql","PostgreSQL"],loader:()=>Tt(()=>import("./pgsql-92644b48.js"),[])});$u(ji.PG,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});VC({id:ji.IMPALA,extensions:[".impalasql"],aliases:["impalaSQL","impala","Impala"],loader:()=>Tt(()=>import("./impala-671dca3e.js"),[])});$u(ji.IMPALA,{completionItems:!0,diagnostics:!0,references:!0,definitions:!0});const Eft={base:"vs",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"45AB5A"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"45AB5A"},{token:Qt(Xt.NUMBER),foreground:"45AB5A"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"45AB5A"},{token:Qt(Xt.NUMBER_BINARY),foreground:"45AB5A"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"45AB5A"},{token:Qt(Xt.NUMBER_HEX),foreground:"45AB5A"},{token:Qt(Xt.COMMENT),foreground:"B1B4C5"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"B1B4C5"},{token:Qt(Xt.DELIMITER),foreground:"7D98B1"},{token:Qt(Xt.OPERATOR),foreground:"7D98B1"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"7D98B1"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"B1BB86"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"B1BB86"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"B1BB86"},{token:Qt(Xt.IDENTIFIER),foreground:"201A1A"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"201A1A"},{token:Qt(Xt.KEYWORD),foreground:"3300FF"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"3300FF"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"E221DA"},{token:Qt(Xt.PREDEFINED),foreground:"C3771C"},{token:Qt(Xt.STRING),foreground:"BC1313"},{token:Qt(Xt.STRING_ESCAPE),foreground:"BC1313"},{token:Qt(Xt.TYPE),foreground:"256FC6"},{token:Qt(Xt.VARIABLE),foreground:"00AD84"}],colors:{}},Lft={base:"vs-dark",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"6a9955"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"6a9955"},{token:Qt(Xt.DELIMITER),foreground:"d4d4d4"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"d4d4d4"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"d4d4d4"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},xft={base:"hc-black",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"7ca668"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"7ca668"},{token:Qt(Xt.DELIMITER),foreground:"ffffff"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"ffffff"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"ffffff"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},xZ={lightThemeData:Eft,darkThemeData:Lft,hcBlackThemeData:xft};var Yg;(function(i){i.CATALOG="catalog",i.CATALOG_CREATE="catalogCreate",i.DATABASE="database",i.DATABASE_CREATE="databaseCreate",i.TABLE="table",i.TABLE_CREATE="tableCreate",i.VIEW="view",i.VIEW_CREATE="viewCreate",i.FUNCTION="function",i.FUNCTION_CREATE="functionCreate",i.PROCEDURE="procedure",i.PROCEDURE_CREATE="procedureCreate",i.COLUMN="column",i.COLUMN_CREATE="columnCreate",i.TABLE_PROPERTY_KEY="tablePropertyKey",i.TABLE_PROPERTY_VALUE="tablePropertyValue"})(Yg||(Yg={}));var Vre;(function(i){i[i.STRICT=0]="STRICT",i[i.LOOSE=1]="LOOSE"})(Vre||(Vre={}));function Dft(){return new Worker("/monaco-sql-languages/assets/editor.worker-a4e6c28c.js")}function Tft(){return new Worker("/monaco-sql-languages/assets/flink.worker-7b922603.js")}function Ift(){return new Worker("/monaco-sql-languages/assets/spark.worker-578b538b.js")}function kft(){return new Worker("/monaco-sql-languages/assets/hive.worker-3b3d9479.js")}function Nft(){return new Worker("/monaco-sql-languages/assets/pgsql.worker-a66e81bb.js")}function Aft(){return new Worker("/monaco-sql-languages/assets/mysql.worker-3c3a225d.js")}function Oft(){return new Worker("/monaco-sql-languages/assets/trino.worker-e4051ab7.js")}function Rft(){return new Worker("/monaco-sql-languages/assets/impala.worker-06b15b9d.js")}globalThis.MonacoEnvironment={getWorker(i,e){return e===ji.FLINK?new Tft:e===ji.HIVE?new kft:e===ji.SPARK?new Ift:e===ji.PG?new Nft:e===ji.MYSQL?new Aft:e===ji.TRINO?new Oft:e===ji.IMPALA?new Rft:new Dft}};sa.defineTheme("sql-dark",xZ.darkThemeData);sa.defineTheme("sql-light",xZ.lightThemeData);sa.defineTheme("sql-hc",xZ.hcBlackThemeData);const Mft=["mock_catalog_1","mock_catalog_2","mock_catalog_3"],Pft=["mock_schema_1","mock_schema_2","mock_schema_3"],Fft=["mock_database_1","mock_database_2","mock_database_3"],Bft=["mock_table1","mock_table2","mock_table3"],Wft=["mock_view1","mock_view2","mock_view3"],Vft=["current_catalog_db1","current_catalog_db2","current_catalog_db3"],Hft=["current_catalog_schema1","current_catalog_schema2","current_catalog_schema3"],$ft=["current_db_table1","current_db_table2","current_db_table3"],zft=["current_db_view1","current_db_view2","current_db_view3"],vg=(i,e)=>{const t=i?i.replace(/sql/gi,"").toLocaleLowerCase():"";return t?`${t}_${e}`:e};function DP(i){const e=Mft.map(t=>({label:vg(i,t),kind:Ia.CompletionItemKind.Field,detail:"catalog",sortText:"1"+vg(i,t)}));return Promise.resolve(e)}function Uft(i,e){const n=(e?Fft:Vft).map(r=>({label:vg(i,r),kind:Ia.CompletionItemKind.Field,detail:"database",sortText:"1"+vg(i,r)}));return Promise.resolve(n)}function jft(i,e){const n=(e?Pft:Hft).map(r=>({label:vg(i,r),kind:Ia.CompletionItemKind.Field,detail:"schema",sortText:"1"+vg(i,r)}));return Promise.resolve(n)}function WW(i,e,t){const r=(e&&t?Bft:$ft).map(o=>({label:vg(i,o),kind:Ia.CompletionItemKind.Field,detail:"table",sortText:"1"+vg(i,o)}));return Promise.resolve(r)}function VW(i,e,t){const r=(e&&t?Wft:zft).map(o=>({label:vg(i,o),kind:Ia.CompletionItemKind.Field,detail:"view",sortText:"1"+vg(i,o)}));return Promise.resolve(r)}const Kft=i=>["flinksql","trinosql"].includes(i.toLowerCase()),Gft=i=>["trinosql","hivesql","sparksql"].includes(i),HC=async function(i,e,t,n,r,o){if(!n)return Promise.resolve([]);const s=i.getLanguageId(),a=Kft(s),u=Gft(s)?jft:Uft,{keywords:d,syntax:h}=n,f=d.map(N=>({label:N,kind:Ia.CompletionItemKind.Keyword,detail:"关键字",sortText:"2"+N}));let p=[],m=!1,v=!1,b=!1,E=!1,S=!1,w=!1,L=!1;for(let N=0;N<h.length;N++){const{syntaxContextType:H,wordRanges:M}=h[N],R=M.map(X=>X.text),q=R.length;if((H===Yg.CATALOG||H===Yg.DATABASE_CREATE)&&!m&&q<=1&&(p=p.concat(await DP(s)),m=!0),(H===Yg.DATABASE||H===Yg.TABLE_CREATE||H===Yg.VIEW_CREATE)&&(!m&&a&&q<=1&&(p=p.concat(await DP(s)),m=!0),!v&&q<=1&&(p=p.concat(await u(s)),v=!0),!b&&a&&q>=2&&q<=3&&(p=p.concat(await u(s,R[0])),b=!0)),H===Yg.TABLE)if(q<=1){if(!m&&a){const X=await DP(s);p=p.concat(X),m=!0}v||(p=p.concat(await u(s)),v=!0),E||(p=p.concat(await WW(s)),E=!0)}else q>=2&&q<=3?(!b&&a&&(p=p.concat(await u(s,R[0])),b=!0),S||(p=p.concat(await WW(s,void 0,R[0])),S=!0)):q>=4&&q<=5&&(S||(p=p.concat(await WW(s,R[0],R[2])),S=!0));H===Yg.VIEW&&(q<=1?(!m&&a&&(p=p.concat(await DP(s)),m=!0),v||(p=p.concat(await u(s)),v=!0),w||(p=p.concat(await VW(s)),w=!0)):q>=2&&q<=3?(!b&&a&&(p=p.concat(await u(s,R[0])),b=!0),L||(p=p.concat(await VW(s,void 0,R[0])),L=!0)):q>=4&&q<=5&&(L||(p=p.concat(await VW(s,R[0],R[2])),L=!0)))}const A=(o==null?void 0:o.map(N=>({label:N.label||N.prefix,kind:Ia.CompletionItemKind.Snippet,filterText:N.prefix,insertText:N.insertText,insertTextRules:Ia.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"3"+N.prefix,detail:N.description!==void 0?N.description:"SQL模板",documentation:N.insertText})))||[];return[...p,...f,...A]},hE=i=>{const e=/@@{[A-Za-z0-9._-]*}/g,t=/\${[A-Za-z0-9._-]*}/g;let n=i;return e.test(i)&&(n=n.replace(e,r=>r.replace(/@|{|}|\.|-/g,"_"))),t.test(i)&&(n=n.replace(t,r=>r.replace(/\$|{|}|\.|-/g,"_"))),n},qft=(i,e)=>{const t=/@@{[A-Za-z0-9._-]*}/g,n=/\${[A-Za-z0-9._-]*}/g;let r=i;return t.test(i)&&(r=r.replace(t,o=>e?o.replace(/@/,e).replace(/}/,e).replace(/@|{|\.|-/g,"_"):o.replace(/@|{|}|\.|-/g,"_"))),n.test(i)&&(r=r.replace(n,o=>e?o.replace(/\$|}/g,e).replace(/{|\.|-/g,"_"):o.replace(/\$|{|}|\.|-/g,"_"))),r};$u(ji.FLINK,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});$u(ji.SPARK,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});$u(ji.HIVE,{completionItems:{enable:!0,completionService:HC},preprocessCode:i=>qft(i,"`")});$u(ji.MYSQL,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});$u(ji.TRINO,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});$u(ji.PG,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});$u(ji.IMPALA,{completionItems:{enable:!0,completionService:HC},preprocessCode:hE});sa.onDidCreateEditor(i=>{i.updateOptions({suggest:{snippetsPreventQuickSuggestions:!1}})});function Yft(){const i=he.useRef(),[e,t]=he.useState();return he.useEffect(()=>{i.current||(i.current=Qht({extensions:[cft]}),i.current&&t(()=>{var r;return(r=i.current)==null?void 0:r.render(Mc.jsx($ut,{}))}))},[]),Mc.jsx("div",{children:e})}window.console.log(`%c dt-sql-parser: ${hft["dt-sql-parser"]} 

 monaco-sql-languages: ${dft}`,"font-family: Cabin, Helvetica, Arial, sans-serif;text-align: left;font-size:26px;color:#B21212;");HW.createRoot(document.getElementById("root")).render(Mc.jsx(re.StrictMode,{children:Mc.jsx(Yft,{})}));export{aKe as M,rKe as R,Xt as T,sft as W,Tt as _,sa as e,Ia as l,AR as m};

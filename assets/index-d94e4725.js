var ife=Object.defineProperty;var rfe=(r,e,t)=>e in r?ife(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var H1=(r,e,t)=>(rfe(r,typeof e!="symbol"?e+"":e,t),t);function nne(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ofe(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var l3={exports:{}},rk={},u3={exports:{}},Wr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tq;function sfe(){if(Tq)return Wr;Tq=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(A){return A===null||typeof A!="object"?null:(A=h&&A[h]||A["@@iterator"],typeof A=="function"?A:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function x(A,te,_e){this.props=A,this.context=te,this.refs=S,this.updater=_e||_}x.prototype.isReactComponent={},x.prototype.setState=function(A,te){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,te,"setState")},x.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function T(){}T.prototype=x.prototype;function k(A,te,_e){this.props=A,this.context=te,this.refs=S,this.updater=_e||_}var M=k.prototype=new T;M.constructor=k,C(M,x.prototype),M.isPureReactComponent=!0;var W=Array.isArray,F=Object.prototype.hasOwnProperty,Q={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function $(A,te,_e){var de,Me={},He=null,st=null;if(te!=null)for(de in te.ref!==void 0&&(st=te.ref),te.key!==void 0&&(He=""+te.key),te)F.call(te,de)&&!z.hasOwnProperty(de)&&(Me[de]=te[de]);var Dt=arguments.length-2;if(Dt===1)Me.children=_e;else if(1<Dt){for(var Rt=Array(Dt),lt=0;lt<Dt;lt++)Rt[lt]=arguments[lt+2];Me.children=Rt}if(A&&A.defaultProps)for(de in Dt=A.defaultProps,Dt)Me[de]===void 0&&(Me[de]=Dt[de]);return{$$typeof:r,type:A,key:He,ref:st,props:Me,_owner:Q.current}}function G(A,te){return{$$typeof:r,type:A.type,key:te,ref:A.ref,props:A.props,_owner:A._owner}}function Y(A){return typeof A=="object"&&A!==null&&A.$$typeof===r}function I(A){var te={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(_e){return te[_e]})}var D=/\/+/g;function O(A,te){return typeof A=="object"&&A!==null&&A.key!=null?I(""+A.key):te.toString(36)}function V(A,te,_e,de,Me){var He=typeof A;(He==="undefined"||He==="boolean")&&(A=null);var st=!1;if(A===null)st=!0;else switch(He){case"string":case"number":st=!0;break;case"object":switch(A.$$typeof){case r:case e:st=!0}}if(st)return st=A,Me=Me(st),A=de===""?"."+O(st,0):de,W(Me)?(_e="",A!=null&&(_e=A.replace(D,"$&/")+"/"),V(Me,te,_e,"",function(lt){return lt})):Me!=null&&(Y(Me)&&(Me=G(Me,_e+(!Me.key||st&&st.key===Me.key?"":(""+Me.key).replace(D,"$&/")+"/")+A)),te.push(Me)),1;if(st=0,de=de===""?".":de+":",W(A))for(var Dt=0;Dt<A.length;Dt++){He=A[Dt];var Rt=de+O(He,Dt);st+=V(He,te,_e,Rt,Me)}else if(Rt=p(A),typeof Rt=="function")for(A=Rt.call(A),Dt=0;!(He=A.next()).done;)He=He.value,Rt=de+O(He,Dt++),st+=V(He,te,_e,Rt,Me);else if(He==="object")throw te=String(A),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return st}function j(A,te,_e){if(A==null)return A;var de=[],Me=0;return V(A,de,"","",function(He){return te.call(_e,He,Me++)}),de}function ne(A){if(A._status===-1){var te=A._result;te=te(),te.then(function(_e){(A._status===0||A._status===-1)&&(A._status=1,A._result=_e)},function(_e){(A._status===0||A._status===-1)&&(A._status=2,A._result=_e)}),A._status===-1&&(A._status=0,A._result=te)}if(A._status===1)return A._result.default;throw A._result}var re={current:null},se={transition:null},ie={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:se,ReactCurrentOwner:Q};return Wr.Children={map:j,forEach:function(A,te,_e){j(A,function(){te.apply(this,arguments)},_e)},count:function(A){var te=0;return j(A,function(){te++}),te},toArray:function(A){return j(A,function(te){return te})||[]},only:function(A){if(!Y(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Wr.Component=x,Wr.Fragment=t,Wr.Profiler=i,Wr.PureComponent=k,Wr.StrictMode=n,Wr.Suspense=l,Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Wr.cloneElement=function(A,te,_e){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var de=C({},A.props),Me=A.key,He=A.ref,st=A._owner;if(te!=null){if(te.ref!==void 0&&(He=te.ref,st=Q.current),te.key!==void 0&&(Me=""+te.key),A.type&&A.type.defaultProps)var Dt=A.type.defaultProps;for(Rt in te)F.call(te,Rt)&&!z.hasOwnProperty(Rt)&&(de[Rt]=te[Rt]===void 0&&Dt!==void 0?Dt[Rt]:te[Rt])}var Rt=arguments.length-2;if(Rt===1)de.children=_e;else if(1<Rt){Dt=Array(Rt);for(var lt=0;lt<Rt;lt++)Dt[lt]=arguments[lt+2];de.children=Dt}return{$$typeof:r,type:A.type,key:Me,ref:He,props:de,_owner:st}},Wr.createContext=function(A){return A={$$typeof:s,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:o,_context:A},A.Consumer=A},Wr.createElement=$,Wr.createFactory=function(A){var te=$.bind(null,A);return te.type=A,te},Wr.createRef=function(){return{current:null}},Wr.forwardRef=function(A){return{$$typeof:a,render:A}},Wr.isValidElement=Y,Wr.lazy=function(A){return{$$typeof:d,_payload:{_status:-1,_result:A},_init:ne}},Wr.memo=function(A,te){return{$$typeof:u,type:A,compare:te===void 0?null:te}},Wr.startTransition=function(A){var te=se.transition;se.transition={};try{A()}finally{se.transition=te}},Wr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Wr.useCallback=function(A,te){return re.current.useCallback(A,te)},Wr.useContext=function(A){return re.current.useContext(A)},Wr.useDebugValue=function(){},Wr.useDeferredValue=function(A){return re.current.useDeferredValue(A)},Wr.useEffect=function(A,te){return re.current.useEffect(A,te)},Wr.useId=function(){return re.current.useId()},Wr.useImperativeHandle=function(A,te,_e){return re.current.useImperativeHandle(A,te,_e)},Wr.useInsertionEffect=function(A,te){return re.current.useInsertionEffect(A,te)},Wr.useLayoutEffect=function(A,te){return re.current.useLayoutEffect(A,te)},Wr.useMemo=function(A,te){return re.current.useMemo(A,te)},Wr.useReducer=function(A,te,_e){return re.current.useReducer(A,te,_e)},Wr.useRef=function(A){return re.current.useRef(A)},Wr.useState=function(A){return re.current.useState(A)},Wr.useSyncExternalStore=function(A,te,_e){return re.current.useSyncExternalStore(A,te,_e)},Wr.useTransition=function(){return re.current.useTransition()},Wr.version="18.2.0",Wr}var Nq;function qx(){return Nq||(Nq=1,u3.exports=sfe()),u3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aq;function afe(){if(Aq)return rk;Aq=1;var r=qx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var d,h={},p=null,_=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(_=l.ref);for(d in l)n.call(l,d)&&!o.hasOwnProperty(d)&&(h[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)h[d]===void 0&&(h[d]=l[d]);return{$$typeof:e,type:a,key:p,ref:_,props:h,_owner:i.current}}return rk.Fragment=t,rk.jsx=s,rk.jsxs=s,rk}var Oq;function lfe(){return Oq||(Oq=1,l3.exports=afe()),l3.exports}var Ug=lfe(),De=qx();const me=xm(De),ufe=nne({__proto__:null,default:me},[De]);var eA={},c3={exports:{}},bh={},d3={exports:{}},h3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rq;function cfe(){return Rq||(Rq=1,function(r){function e(se,ie){var A=se.length;se.push(ie);e:for(;0<A;){var te=A-1>>>1,_e=se[te];if(0<i(_e,ie))se[te]=ie,se[A]=_e,A=te;else break e}}function t(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var ie=se[0],A=se.pop();if(A!==ie){se[0]=A;e:for(var te=0,_e=se.length,de=_e>>>1;te<de;){var Me=2*(te+1)-1,He=se[Me],st=Me+1,Dt=se[st];if(0>i(He,A))st<_e&&0>i(Dt,He)?(se[te]=Dt,se[st]=A,te=st):(se[te]=He,se[Me]=A,te=Me);else if(st<_e&&0>i(Dt,A))se[te]=Dt,se[st]=A,te=st;else break e}}return ie}function i(se,ie){var A=se.sortIndex-ie.sortIndex;return A!==0?A:se.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();r.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,h=null,p=3,_=!1,C=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(se){for(var ie=t(u);ie!==null;){if(ie.callback===null)n(u);else if(ie.startTime<=se)n(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=t(u)}}function W(se){if(S=!1,M(se),!C)if(t(l)!==null)C=!0,ne(F);else{var ie=t(u);ie!==null&&re(W,ie.startTime-se)}}function F(se,ie){C=!1,S&&(S=!1,T($),$=-1),_=!0;var A=p;try{for(M(ie),h=t(l);h!==null&&(!(h.expirationTime>ie)||se&&!I());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var _e=te(h.expirationTime<=ie);ie=r.unstable_now(),typeof _e=="function"?h.callback=_e:h===t(l)&&n(l),M(ie)}else n(l);h=t(l)}if(h!==null)var de=!0;else{var Me=t(u);Me!==null&&re(W,Me.startTime-ie),de=!1}return de}finally{h=null,p=A,_=!1}}var Q=!1,z=null,$=-1,G=5,Y=-1;function I(){return!(r.unstable_now()-Y<G)}function D(){if(z!==null){var se=r.unstable_now();Y=se;var ie=!0;try{ie=z(!0,se)}finally{ie?O():(Q=!1,z=null)}}else Q=!1}var O;if(typeof k=="function")O=function(){k(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,j=V.port2;V.port1.onmessage=D,O=function(){j.postMessage(null)}}else O=function(){x(D,0)};function ne(se){z=se,Q||(Q=!0,O())}function re(se,ie){$=x(function(){se(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(se){se.callback=null},r.unstable_continueExecution=function(){C||_||(C=!0,ne(F))},r.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<se?Math.floor(1e3/se):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(se){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var A=p;p=ie;try{return se()}finally{p=A}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(se,ie){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var A=p;p=se;try{return ie()}finally{p=A}},r.unstable_scheduleCallback=function(se,ie,A){var te=r.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?te+A:te):A=te,se){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=A+_e,se={id:d++,callback:ie,priorityLevel:se,startTime:A,expirationTime:_e,sortIndex:-1},A>te?(se.sortIndex=A,e(u,se),t(l)===null&&se===t(u)&&(S?(T($),$=-1):S=!0,re(W,A-te))):(se.sortIndex=_e,e(l,se),C||_||(C=!0,ne(F))),se},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(se){var ie=p;return function(){var A=p;p=ie;try{return se.apply(this,arguments)}finally{p=A}}}}(h3)),h3}var Mq;function dfe(){return Mq||(Mq=1,d3.exports=cfe()),d3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pq;function hfe(){if(Pq)return bh;Pq=1;var r=qx(),e=dfe();function t(g){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+g,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(g,m){s(g,m),s(g+"Capture",m)}function s(g,m){for(i[g]=m,g=0;g<m.length;g++)n.add(m[g])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},h={};function p(g){return l.call(h,g)?!0:l.call(d,g)?!1:u.test(g)?h[g]=!0:(d[g]=!0,!1)}function _(g,m,w,N){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return N?!1:w!==null?!w.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function C(g,m,w,N){if(m===null||typeof m>"u"||_(g,m,w,N))return!0;if(N)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function S(g,m,w,N,H,J,ge){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=N,this.attributeNamespace=H,this.mustUseProperty=w,this.propertyName=g,this.type=m,this.sanitizeURL=J,this.removeEmptyString=ge}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){x[g]=new S(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var m=g[0];x[m]=new S(m,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){x[g]=new S(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){x[g]=new S(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){x[g]=new S(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){x[g]=new S(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){x[g]=new S(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){x[g]=new S(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){x[g]=new S(g,5,!1,g.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var m=g.replace(T,k);x[m]=new S(m,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var m=g.replace(T,k);x[m]=new S(m,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var m=g.replace(T,k);x[m]=new S(m,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){x[g]=new S(g,1,!1,g.toLowerCase(),null,!1,!1)}),x.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){x[g]=new S(g,1,!1,g.toLowerCase(),null,!0,!0)});function M(g,m,w,N){var H=x.hasOwnProperty(m)?x[m]:null;(H!==null?H.type!==0:N||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(C(m,w,H,N)&&(w=null),N||H===null?p(m)&&(w===null?g.removeAttribute(m):g.setAttribute(m,""+w)):H.mustUseProperty?g[H.propertyName]=w===null?H.type===3?!1:"":w:(m=H.attributeName,N=H.attributeNamespace,w===null?g.removeAttribute(m):(H=H.type,w=H===3||H===4&&w===!0?"":""+w,N?g.setAttributeNS(N,m,w):g.setAttribute(m,w))))}var W=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),Q=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),I=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),se=Symbol.iterator;function ie(g){return g===null||typeof g!="object"?null:(g=se&&g[se]||g["@@iterator"],typeof g=="function"?g:null)}var A=Object.assign,te;function _e(g){if(te===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);te=m&&m[1]||""}return`
`+te+g}var de=!1;function Me(g,m){if(!g||de)return"";de=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(_t){var N=_t}Reflect.construct(g,[],m)}else{try{m.call()}catch(_t){N=_t}g.call(m.prototype)}else{try{throw Error()}catch(_t){N=_t}g()}}catch(_t){if(_t&&N&&typeof _t.stack=="string"){for(var H=_t.stack.split(`
`),J=N.stack.split(`
`),ge=H.length-1,Re=J.length-1;1<=ge&&0<=Re&&H[ge]!==J[Re];)Re--;for(;1<=ge&&0<=Re;ge--,Re--)if(H[ge]!==J[Re]){if(ge!==1||Re!==1)do if(ge--,Re--,0>Re||H[ge]!==J[Re]){var Ke=`
`+H[ge].replace(" at new "," at ");return g.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",g.displayName)),Ke}while(1<=ge&&0<=Re);break}}}finally{de=!1,Error.prepareStackTrace=w}return(g=g?g.displayName||g.name:"")?_e(g):""}function He(g){switch(g.tag){case 5:return _e(g.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return g=Me(g.type,!1),g;case 11:return g=Me(g.type.render,!1),g;case 1:return g=Me(g.type,!0),g;default:return""}}function st(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case z:return"Fragment";case Q:return"Portal";case G:return"Profiler";case $:return"StrictMode";case O:return"Suspense";case V:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case I:return(g.displayName||"Context")+".Consumer";case Y:return(g._context.displayName||"Context")+".Provider";case D:var m=g.render;return g=g.displayName,g||(g=m.displayName||m.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case j:return m=g.displayName||null,m!==null?m:st(g.type)||"Memo";case ne:m=g._payload,g=g._init;try{return st(g(m))}catch{}}return null}function Dt(g){var m=g.type;switch(g.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=m.render,g=g.displayName||g.name||"",m.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return st(m);case 8:return m===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Rt(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function lt(g){var m=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function xt(g){var m=lt(g)?"checked":"value",w=Object.getOwnPropertyDescriptor(g.constructor.prototype,m),N=""+g[m];if(!g.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var H=w.get,J=w.set;return Object.defineProperty(g,m,{configurable:!0,get:function(){return H.call(this)},set:function(ge){N=""+ge,J.call(this,ge)}}),Object.defineProperty(g,m,{enumerable:w.enumerable}),{getValue:function(){return N},setValue:function(ge){N=""+ge},stopTracking:function(){g._valueTracker=null,delete g[m]}}}}function zt(g){g._valueTracker||(g._valueTracker=xt(g))}function wt(g){if(!g)return!1;var m=g._valueTracker;if(!m)return!0;var w=m.getValue(),N="";return g&&(N=lt(g)?g.checked?"true":"false":g.value),g=N,g!==w?(m.setValue(g),!0):!1}function dn(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function sn(g,m){var w=m.checked;return A({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??g._wrapperState.initialChecked})}function Pt(g,m){var w=m.defaultValue==null?"":m.defaultValue,N=m.checked!=null?m.checked:m.defaultChecked;w=Rt(m.value!=null?m.value:w),g._wrapperState={initialChecked:N,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function ei(g,m){m=m.checked,m!=null&&M(g,"checked",m,!1)}function xn(g,m){ei(g,m);var w=Rt(m.value),N=m.type;if(w!=null)N==="number"?(w===0&&g.value===""||g.value!=w)&&(g.value=""+w):g.value!==""+w&&(g.value=""+w);else if(N==="submit"||N==="reset"){g.removeAttribute("value");return}m.hasOwnProperty("value")?Ft(g,m.type,w):m.hasOwnProperty("defaultValue")&&Ft(g,m.type,Rt(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(g.defaultChecked=!!m.defaultChecked)}function un(g,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var N=m.type;if(!(N!=="submit"&&N!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+g._wrapperState.initialValue,w||m===g.value||(g.value=m),g.defaultValue=m}w=g.name,w!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,w!==""&&(g.name=w)}function Ft(g,m,w){(m!=="number"||dn(g.ownerDocument)!==g)&&(w==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+w&&(g.defaultValue=""+w))}var Bt=Array.isArray;function Tt(g,m,w,N){if(g=g.options,m){m={};for(var H=0;H<w.length;H++)m["$"+w[H]]=!0;for(w=0;w<g.length;w++)H=m.hasOwnProperty("$"+g[w].value),g[w].selected!==H&&(g[w].selected=H),H&&N&&(g[w].defaultSelected=!0)}else{for(w=""+Rt(w),m=null,H=0;H<g.length;H++){if(g[H].value===w){g[H].selected=!0,N&&(g[H].defaultSelected=!0);return}m!==null||g[H].disabled||(m=g[H])}m!==null&&(m.selected=!0)}}function mt(g,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return A({},m,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Qt(g,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(t(92));if(Bt(w)){if(1<w.length)throw Error(t(93));w=w[0]}m=w}m==null&&(m=""),w=m}g._wrapperState={initialValue:Rt(w)}}function fn(g,m){var w=Rt(m.value),N=Rt(m.defaultValue);w!=null&&(w=""+w,w!==g.value&&(g.value=w),m.defaultValue==null&&g.defaultValue!==w&&(g.defaultValue=w)),N!=null&&(g.defaultValue=""+N)}function We(g){var m=g.textContent;m===g._wrapperState.initialValue&&m!==""&&m!==null&&(g.value=m)}function dt(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(g,m){return g==null||g==="http://www.w3.org/1999/xhtml"?dt(m):g==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var U,X=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,N,H){MSApp.execUnsafeLocalFunction(function(){return g(m,w,N,H)})}:g}(function(g,m){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=m;else{for(U=U||document.createElement("div"),U.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=U.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;m.firstChild;)g.appendChild(m.firstChild)}});function we(g,m){if(m){var w=g.firstChild;if(w&&w===g.lastChild&&w.nodeType===3){w.nodeValue=m;return}}g.textContent=m}var Te={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qe=["Webkit","ms","Moz","O"];Object.keys(Te).forEach(function(g){qe.forEach(function(m){m=m+g.charAt(0).toUpperCase()+g.substring(1),Te[m]=Te[g]})});function ze(g,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||Te.hasOwnProperty(g)&&Te[g]?(""+m).trim():m+"px"}function bt(g,m){g=g.style;for(var w in m)if(m.hasOwnProperty(w)){var N=w.indexOf("--")===0,H=ze(w,m[w],N);w==="float"&&(w="cssFloat"),N?g.setProperty(w,H):g[w]=H}}var bn=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(g,m){if(m){if(bn[g]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function nt(g,m){if(g.indexOf("-")===-1)return typeof m.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mi=null;function ni(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var bi=null,Qs=null,Vn=null;function Dr(g){if(g=Ei(g)){if(typeof bi!="function")throw Error(t(280));var m=g.stateNode;m&&(m=Xm(m),bi(g.stateNode,g.type,m))}}function ru(g){Qs?Vn?Vn.push(g):Vn=[g]:Qs=g}function lr(){if(Qs){var g=Qs,m=Vn;if(Vn=Qs=null,Dr(g),m)for(g=0;g<m.length;g++)Dr(m[g])}}function Ct(g,m){return g(m)}function as(){}var et=!1;function Ye(g,m,w){if(et)return g(m,w);et=!0;try{return Ct(g,m,w)}finally{et=!1,(Qs!==null||Vn!==null)&&(as(),lr())}}function it(g,m){var w=g.stateNode;if(w===null)return null;var N=Xm(w);if(N===null)return null;w=N[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(g=g.type,N=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!N;break e;default:g=!1}if(g)return null;if(w&&typeof w!="function")throw Error(t(231,m,typeof w));return w}var ve=!1;if(a)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){ve=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{ve=!1}function Ie(g,m,w,N,H,J,ge,Re,Ke){var _t=Array.prototype.slice.call(arguments,3);try{m.apply(w,_t)}catch(Yt){this.onError(Yt)}}var ue=!1,Oe=null,pt=!1,at=null,Ut={onError:function(g){ue=!0,Oe=g}};function kn(g,m,w,N,H,J,ge,Re,Ke){ue=!1,Oe=null,Ie.apply(Ut,arguments)}function R(g,m,w,N,H,J,ge,Re,Ke){if(kn.apply(this,arguments),ue){if(ue){var _t=Oe;ue=!1,Oe=null}else throw Error(t(198));pt||(pt=!0,at=_t)}}function K(g){var m=g,w=g;if(g.alternate)for(;m.return;)m=m.return;else{g=m;do m=g,m.flags&4098&&(w=m.return),g=m.return;while(g)}return m.tag===3?w:null}function ce(g){if(g.tag===13){var m=g.memoizedState;if(m===null&&(g=g.alternate,g!==null&&(m=g.memoizedState)),m!==null)return m.dehydrated}return null}function pe(g){if(K(g)!==g)throw Error(t(188))}function Ne(g){var m=g.alternate;if(!m){if(m=K(g),m===null)throw Error(t(188));return m!==g?null:g}for(var w=g,N=m;;){var H=w.return;if(H===null)break;var J=H.alternate;if(J===null){if(N=H.return,N!==null){w=N;continue}break}if(H.child===J.child){for(J=H.child;J;){if(J===w)return pe(H),g;if(J===N)return pe(H),m;J=J.sibling}throw Error(t(188))}if(w.return!==N.return)w=H,N=J;else{for(var ge=!1,Re=H.child;Re;){if(Re===w){ge=!0,w=H,N=J;break}if(Re===N){ge=!0,N=H,w=J;break}Re=Re.sibling}if(!ge){for(Re=J.child;Re;){if(Re===w){ge=!0,w=J,N=H;break}if(Re===N){ge=!0,N=J,w=H;break}Re=Re.sibling}if(!ge)throw Error(t(189))}}if(w.alternate!==N)throw Error(t(190))}if(w.tag!==3)throw Error(t(188));return w.stateNode.current===w?g:m}function Se(g){return g=Ne(g),g!==null?Je(g):null}function Je(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var m=Je(g);if(m!==null)return m;g=g.sibling}return null}var ht=e.unstable_scheduleCallback,It=e.unstable_cancelCallback,Vt=e.unstable_shouldYield,pn=e.unstable_requestPaint,tn=e.unstable_now,mn=e.unstable_getCurrentPriorityLevel,Jt=e.unstable_ImmediatePriority,qi=e.unstable_UserBlockingPriority,Ci=e.unstable_NormalPriority,Rr=e.unstable_LowPriority,Er=e.unstable_IdlePriority,da=null,Cs=null;function ap(g){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(da,g,void 0,(g.current.flags&128)===128)}catch{}}var Pu=Math.clz32?Math.clz32:c0,l0=Math.log,u0=Math.LN2;function c0(g){return g>>>=0,g===0?32:31-(l0(g)/u0|0)|0}var Fd=64,Am=4194304;function Bd(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function hc(g,m){var w=g.pendingLanes;if(w===0)return 0;var N=0,H=g.suspendedLanes,J=g.pingedLanes,ge=w&268435455;if(ge!==0){var Re=ge&~H;Re!==0?N=Bd(Re):(J&=ge,J!==0&&(N=Bd(J)))}else ge=w&~H,ge!==0?N=Bd(ge):J!==0&&(N=Bd(J));if(N===0)return 0;if(m!==0&&m!==N&&!(m&H)&&(H=N&-N,J=m&-m,H>=J||H===16&&(J&4194240)!==0))return m;if(N&4&&(N|=w&16),m=g.entangledLanes,m!==0)for(g=g.entanglements,m&=N;0<m;)w=31-Pu(m),H=1<<w,N|=g[w],m&=~H;return N}function d0(g,m){switch(g){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ay(g,m){for(var w=g.suspendedLanes,N=g.pingedLanes,H=g.expirationTimes,J=g.pendingLanes;0<J;){var ge=31-Pu(J),Re=1<<ge,Ke=H[ge];Ke===-1?(!(Re&w)||Re&N)&&(H[ge]=d0(Re,m)):Ke<=m&&(g.expiredLanes|=Re),J&=~Re}}function lp(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Om(){var g=Fd;return Fd<<=1,!(Fd&4194240)&&(Fd=64),g}function Bh(g){for(var m=[],w=0;31>w;w++)m.push(g);return m}function Wd(g,m,w){g.pendingLanes|=m,m!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,m=31-Pu(m),g[m]=w}function h0(g,m){var w=g.pendingLanes&~m;g.pendingLanes=m,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=m,g.mutableReadLanes&=m,g.entangledLanes&=m,m=g.entanglements;var N=g.eventTimes;for(g=g.expirationTimes;0<w;){var H=31-Pu(w),J=1<<H;m[H]=0,N[H]=-1,g[H]=-1,w&=~J}}function fc(g,m){var w=g.entangledLanes|=m;for(g=g.entanglements;w;){var N=31-Pu(w),H=1<<N;H&m|g[N]&m&&(g[N]|=m),w&=~H}}var Lr=0;function ou(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Rm,Yf,f0,up,Mm,cp=!1,Zf=[],Vd=null,$c=null,jc=null,Hd=new Map,Wh=new Map,Ud=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dp(g,m){switch(g){case"focusin":case"focusout":Vd=null;break;case"dragenter":case"dragleave":$c=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":Hd.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wh.delete(m.pointerId)}}function gc(g,m,w,N,H,J){return g===null||g.nativeEvent!==J?(g={blockedOn:m,domEventName:w,eventSystemFlags:N,nativeEvent:J,targetContainers:[H]},m!==null&&(m=Ei(m),m!==null&&Yf(m)),g):(g.eventSystemFlags|=N,m=g.targetContainers,H!==null&&m.indexOf(H)===-1&&m.push(H),g)}function ly(g,m,w,N,H){switch(m){case"focusin":return Vd=gc(Vd,g,m,w,N,H),!0;case"dragenter":return $c=gc($c,g,m,w,N,H),!0;case"mouseover":return jc=gc(jc,g,m,w,N,H),!0;case"pointerover":var J=H.pointerId;return Hd.set(J,gc(Hd.get(J)||null,g,m,w,N,H)),!0;case"gotpointercapture":return J=H.pointerId,Wh.set(J,gc(Wh.get(J)||null,g,m,w,N,H)),!0}return!1}function g0(g){var m=zl(g.target);if(m!==null){var w=K(m);if(w!==null){if(m=w.tag,m===13){if(m=ce(w),m!==null){g.blockedOn=m,Mm(g.priority,function(){f0(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){g.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}g.blockedOn=null}function hp(g){if(g.blockedOn!==null)return!1;for(var m=g.targetContainers;0<m.length;){var w=Xf(g.domEventName,g.eventSystemFlags,m[0],g.nativeEvent);if(w===null){w=g.nativeEvent;var N=new w.constructor(w.type,w);Mi=N,w.target.dispatchEvent(N),Mi=null}else return m=Ei(w),m!==null&&Yf(m),g.blockedOn=w,!1;m.shift()}return!0}function Pm(g,m,w){hp(g)&&w.delete(m)}function uy(){cp=!1,Vd!==null&&hp(Vd)&&(Vd=null),$c!==null&&hp($c)&&($c=null),jc!==null&&hp(jc)&&(jc=null),Hd.forEach(Pm),Wh.forEach(Pm)}function ui(g,m){g.blockedOn===m&&(g.blockedOn=null,cp||(cp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uy)))}function ii(g){function m(H){return ui(H,g)}if(0<Zf.length){ui(Zf[0],g);for(var w=1;w<Zf.length;w++){var N=Zf[w];N.blockedOn===g&&(N.blockedOn=null)}}for(Vd!==null&&ui(Vd,g),$c!==null&&ui($c,g),jc!==null&&ui(jc,g),Hd.forEach(m),Wh.forEach(m),w=0;w<Ud.length;w++)N=Ud[w],N.blockedOn===g&&(N.blockedOn=null);for(;0<Ud.length&&(w=Ud[0],w.blockedOn===null);)g0(w),w.blockedOn===null&&Ud.shift()}var zd=W.ReactCurrentBatchConfig,qc=!0;function o1(g,m,w,N){var H=Lr,J=zd.transition;zd.transition=null;try{Lr=1,p0(g,m,w,N)}finally{Lr=H,zd.transition=J}}function s1(g,m,w,N){var H=Lr,J=zd.transition;zd.transition=null;try{Lr=4,p0(g,m,w,N)}finally{Lr=H,zd.transition=J}}function p0(g,m,w,N){if(qc){var H=Xf(g,m,w,N);if(H===null)Mr(g,m,N,fp,w),dp(g,N);else if(ly(H,g,m,w,N))N.stopPropagation();else if(dp(g,N),m&4&&-1<r1.indexOf(g)){for(;H!==null;){var J=Ei(H);if(J!==null&&Rm(J),J=Xf(g,m,w,N),J===null&&Mr(g,m,N,fp,w),J===H)break;H=J}H!==null&&N.stopPropagation()}else Mr(g,m,N,null,w)}}var fp=null;function Xf(g,m,w,N){if(fp=null,g=ni(N),g=zl(g),g!==null)if(m=K(g),m===null)g=null;else if(w=m.tag,w===13){if(g=ce(m),g!==null)return g;g=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;g=null}else m!==g&&(g=null);return fp=g,null}function m0(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mn()){case Jt:return 1;case qi:return 4;case Ci:case Rr:return 16;case Er:return 536870912;default:return 16}default:return 16}}var Ki=null,Vh=null,Ea=null;function Fm(){if(Ea)return Ea;var g,m=Vh,w=m.length,N,H="value"in Ki?Ki.value:Ki.textContent,J=H.length;for(g=0;g<w&&m[g]===H[g];g++);var ge=w-g;for(N=1;N<=ge&&m[w-N]===H[J-N];N++);return Ea=H.slice(g,1<N?1-N:void 0)}function Kc(g){var m=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&m===13&&(g=13)):g=m,g===10&&(g=13),32<=g||g===13?g:0}function Eo(){return!0}function Bm(){return!1}function ja(g){function m(w,N,H,J,ge){this._reactName=w,this._targetInst=H,this.type=N,this.nativeEvent=J,this.target=ge,this.currentTarget=null;for(var Re in g)g.hasOwnProperty(Re)&&(w=g[Re],this[Re]=w?w(J):J[Re]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Eo:Bm,this.isPropagationStopped=Bm,this}return A(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),m}var $d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hh=ja($d),Uh=A({},$d,{view:0,detail:0}),_0=ja(Uh),_o,v0,vo,eo=A({},Uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hm,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==vo&&(vo&&g.type==="mousemove"?(_o=g.screenX-vo.screenX,v0=g.screenY-vo.screenY):v0=_o=0,vo=g),_o)},movementY:function(g){return"movementY"in g?g.movementY:v0}}),qr=ja(eo),qa=A({},eo,{dataTransfer:0}),zh=ja(qa),gp=A({},Uh,{relatedTarget:0}),mi=ja(gp),Ka=A({},$d,{animationName:0,elapsedTime:0,pseudoElement:0}),pp=ja(Ka),a1=A({},$d,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),mp=ja(a1),ha=A({},$d,{data:0}),Wm=ja(ha),$h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ts(g){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(g):(g=Gc[g])?!!m[g]:!1}function Hm(){return ts}var Um=A({},Uh,{key:function(g){if(g.key){var m=$h[g.key]||g.key;if(m!=="Unidentified")return m}return g.type==="keypress"?(g=Kc(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?Vm[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hm,charCode:function(g){return g.type==="keypress"?Kc(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Kc(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),zm=ja(Um),Qf=A({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jh=ja(Qf),$m=A({},Uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hm}),Wl=ja($m),_p=A({},$d,{propertyName:0,elapsedTime:0,pseudoElement:0}),La=ja(_p),cy=A({},eo,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=ja(cy),Ir=[9,13,27,32],pc=a&&"CompositionEvent"in window,Ga=null;a&&"documentMode"in document&&(Ga=document.documentMode);var Lo=a&&"TextEvent"in window&&!Ga,Fu=a&&(!pc||Ga&&8<Ga&&11>=Ga),qm=String.fromCharCode(32),l1=!1;function Km(g,m){switch(g){case"keyup":return Ir.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u1(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Jf=!1;function Bu(g,m){switch(g){case"compositionend":return u1(m);case"keypress":return m.which!==32?null:(l1=!0,qm);case"textInput":return g=m.data,g===qm&&l1?null:g;default:return null}}function c1(g,m){if(Jf)return g==="compositionend"||!pc&&Km(g,m)?(g=Fm(),Ea=Vh=Ki=null,Jf=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Fu&&m.locale!=="ko"?null:m.data;default:return null}}var Gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wu(g){var m=g&&g.nodeName&&g.nodeName.toLowerCase();return m==="input"?!!Gm[g.type]:m==="textarea"}function Ym(g,m,w,N){ru(N),m=bp(m,"onChange"),0<m.length&&(w=new Hh("onChange","change",null,w,N),g.push({event:w,listeners:m}))}var ys=null,su=null;function b0(g){Vl(g,0)}function eg(g){var m=an(g);if(wt(m))return g}function d1(g,m){if(g==="change")return m}var au=!1;if(a){var Mo;if(a){var qh="oninput"in document;if(!qh){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),qh=typeof h1.oninput=="function"}Mo=qh}else Mo=!1;au=Mo&&(!document.documentMode||9<document.documentMode)}function C0(){ys&&(ys.detachEvent("onpropertychange",pl),su=ys=null)}function pl(g){if(g.propertyName==="value"&&eg(su)){var m=[];Ym(m,su,g,ni(g)),Ye(b0,m)}}function y0(g,m,w){g==="focusin"?(C0(),ys=m,su=w,ys.attachEvent("onpropertychange",pl)):g==="focusout"&&C0()}function vp(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return eg(su)}function lu(g,m){if(g==="click")return eg(m)}function be(g,m){if(g==="input"||g==="change")return eg(m)}function Pe(g,m){return g===m&&(g!==0||1/g===1/m)||g!==g&&m!==m}var ke=typeof Object.is=="function"?Object.is:Pe;function Et(g,m){if(ke(g,m))return!0;if(typeof g!="object"||g===null||typeof m!="object"||m===null)return!1;var w=Object.keys(g),N=Object.keys(m);if(w.length!==N.length)return!1;for(N=0;N<w.length;N++){var H=w[N];if(!l.call(m,H)||!ke(g[H],m[H]))return!1}return!0}function hn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Kn(g,m){var w=hn(g);g=0;for(var N;w;){if(w.nodeType===3){if(N=g+w.textContent.length,g<=m&&N>=m)return{node:w,offset:m-g};g=N}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=hn(w)}}function Pi(g,m){return g&&m?g===m?!0:g&&g.nodeType===3?!1:m&&m.nodeType===3?Pi(g,m.parentNode):"contains"in g?g.contains(m):g.compareDocumentPosition?!!(g.compareDocumentPosition(m)&16):!1:!1}function ci(){for(var g=window,m=dn();m instanceof g.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)g=m.contentWindow;else break;m=dn(g.document)}return m}function Kh(g){var m=g&&g.nodeName&&g.nodeName.toLowerCase();return m&&(m==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||m==="textarea"||g.contentEditable==="true")}function w0(g){var m=ci(),w=g.focusedElem,N=g.selectionRange;if(m!==w&&w&&w.ownerDocument&&Pi(w.ownerDocument.documentElement,w)){if(N!==null&&Kh(w)){if(m=N.start,g=N.end,g===void 0&&(g=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(g,w.value.length);else if(g=(m=w.ownerDocument||document)&&m.defaultView||window,g.getSelection){g=g.getSelection();var H=w.textContent.length,J=Math.min(N.start,H);N=N.end===void 0?J:Math.min(N.end,H),!g.extend&&J>N&&(H=N,N=J,J=H),H=Kn(w,J);var ge=Kn(w,N);H&&ge&&(g.rangeCount!==1||g.anchorNode!==H.node||g.anchorOffset!==H.offset||g.focusNode!==ge.node||g.focusOffset!==ge.offset)&&(m=m.createRange(),m.setStart(H.node,H.offset),g.removeAllRanges(),J>N?(g.addRange(m),g.extend(ge.node,ge.offset)):(m.setEnd(ge.node,ge.offset),g.addRange(m)))}}for(m=[],g=w;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)g=m[w],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var Uo=a&&"documentMode"in document&&11>=document.documentMode,Os=null,tg=null,Ya=null,Yc=!1;function jd(g,m,w){var N=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Yc||Os==null||Os!==dn(N)||(N=Os,"selectionStart"in N&&Kh(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Ya&&Et(Ya,N)||(Ya=N,N=bp(tg,"onSelect"),0<N.length&&(m=new Hh("onSelect","select",null,m,w),g.push({event:m,listeners:N}),m.target=Os)))}function $n(g,m){var w={};return w[g.toLowerCase()]=m.toLowerCase(),w["Webkit"+g]="webkit"+m,w["Moz"+g]="moz"+m,w}var xa={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionend:$n("Transition","TransitionEnd")},ng={},qd={};a&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function Zm(g){if(ng[g])return ng[g];if(!xa[g])return g;var m=xa[g],w;for(w in m)if(m.hasOwnProperty(w)&&w in qd)return ng[g]=m[w];return g}var f1=Zm("animationend"),g1=Zm("animationiteration"),Kd=Zm("animationstart"),ls=Zm("transitionend"),tt=new Map,At="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gt(g,m){tt.set(g,m),o(m,[g])}for(var Rn=0;Rn<At.length;Rn++){var vi=At[Rn],ur=vi.toLowerCase(),us=vi[0].toUpperCase()+vi.slice(1);gt(ur,"on"+us)}gt(f1,"onAnimationEnd"),gt(g1,"onAnimationIteration"),gt(Kd,"onAnimationStart"),gt("dblclick","onDoubleClick"),gt("focusin","onFocus"),gt("focusout","onBlur"),gt(ls,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Za=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Gd(g,m,w){var N=g.type||"unknown-event";g.currentTarget=w,R(N,m,void 0,g),g.currentTarget=null}function Vl(g,m){m=(m&4)!==0;for(var w=0;w<g.length;w++){var N=g[w],H=N.event;N=N.listeners;e:{var J=void 0;if(m)for(var ge=N.length-1;0<=ge;ge--){var Re=N[ge],Ke=Re.instance,_t=Re.currentTarget;if(Re=Re.listener,Ke!==J&&H.isPropagationStopped())break e;Gd(H,Re,_t),J=Ke}else for(ge=0;ge<N.length;ge++){if(Re=N[ge],Ke=Re.instance,_t=Re.currentTarget,Re=Re.listener,Ke!==J&&H.isPropagationStopped())break e;Gd(H,Re,_t),J=Ke}}}if(pt)throw g=at,pt=!1,at=null,g}function to(g,m){var w=m[yp];w===void 0&&(w=m[yp]=new Set);var N=g+"__bubble";w.has(N)||(Zc(m,g,2,!1),w.add(N))}function S0(g,m,w){var N=0;m&&(N|=4),Zc(w,g,N,m)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function ml(g){if(!g[Xa]){g[Xa]=!0,n.forEach(function(w){w!=="selectionchange"&&(Za.has(w)||S0(w,!1,g),S0(w,!0,g))});var m=g.nodeType===9?g:g.ownerDocument;m===null||m[Xa]||(m[Xa]=!0,S0("selectionchange",!1,m))}}function Zc(g,m,w,N){switch(m0(m)){case 1:var H=o1;break;case 4:H=s1;break;default:H=p0}w=H.bind(null,m,w,g),H=void 0,!ve||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(H=!0),N?H!==void 0?g.addEventListener(m,w,{capture:!0,passive:H}):g.addEventListener(m,w,!0):H!==void 0?g.addEventListener(m,w,{passive:H}):g.addEventListener(m,w,!1)}function Mr(g,m,w,N,H){var J=N;if(!(m&1)&&!(m&2)&&N!==null)e:for(;;){if(N===null)return;var ge=N.tag;if(ge===3||ge===4){var Re=N.stateNode.containerInfo;if(Re===H||Re.nodeType===8&&Re.parentNode===H)break;if(ge===4)for(ge=N.return;ge!==null;){var Ke=ge.tag;if((Ke===3||Ke===4)&&(Ke=ge.stateNode.containerInfo,Ke===H||Ke.nodeType===8&&Ke.parentNode===H))return;ge=ge.return}for(;Re!==null;){if(ge=zl(Re),ge===null)return;if(Ke=ge.tag,Ke===5||Ke===6){N=J=ge;continue e}Re=Re.parentNode}}N=N.return}Ye(function(){var _t=J,Yt=ni(w),en=[];e:{var Zt=tt.get(g);if(Zt!==void 0){var Nn=Hh,Hn=g;switch(g){case"keypress":if(Kc(w)===0)break e;case"keydown":case"keyup":Nn=zm;break;case"focusin":Hn="focus",Nn=mi;break;case"focusout":Hn="blur",Nn=mi;break;case"beforeblur":case"afterblur":Nn=mi;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nn=qr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nn=zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nn=Wl;break;case f1:case g1:case Kd:Nn=pp;break;case ls:Nn=La;break;case"scroll":Nn=_0;break;case"wheel":Nn=jm;break;case"copy":case"cut":case"paste":Nn=mp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nn=jh}var Gn=(m&4)!==0,fs=!Gn&&g==="scroll",ct=Gn?Zt!==null?Zt+"Capture":null:Zt;Gn=[];for(var Qe=_t,ut;Qe!==null;){ut=Qe;var cn=ut.stateNode;if(ut.tag===5&&cn!==null&&(ut=cn,ct!==null&&(cn=it(Qe,ct),cn!=null&&Gn.push(Gh(Qe,cn,ut)))),fs)break;Qe=Qe.return}0<Gn.length&&(Zt=new Nn(Zt,Hn,null,w,Yt),en.push({event:Zt,listeners:Gn}))}}if(!(m&7)){e:{if(Zt=g==="mouseover"||g==="pointerover",Nn=g==="mouseout"||g==="pointerout",Zt&&w!==Mi&&(Hn=w.relatedTarget||w.fromElement)&&(zl(Hn)||Hn[Rs]))break e;if((Nn||Zt)&&(Zt=Yt.window===Yt?Yt:(Zt=Yt.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,Nn?(Hn=w.relatedTarget||w.toElement,Nn=_t,Hn=Hn?zl(Hn):null,Hn!==null&&(fs=K(Hn),Hn!==fs||Hn.tag!==5&&Hn.tag!==6)&&(Hn=null)):(Nn=null,Hn=_t),Nn!==Hn)){if(Gn=qr,cn="onMouseLeave",ct="onMouseEnter",Qe="mouse",(g==="pointerout"||g==="pointerover")&&(Gn=jh,cn="onPointerLeave",ct="onPointerEnter",Qe="pointer"),fs=Nn==null?Zt:an(Nn),ut=Hn==null?Zt:an(Hn),Zt=new Gn(cn,Qe+"leave",Nn,w,Yt),Zt.target=fs,Zt.relatedTarget=ut,cn=null,zl(Yt)===_t&&(Gn=new Gn(ct,Qe+"enter",Hn,w,Yt),Gn.target=ut,Gn.relatedTarget=fs,cn=Gn),fs=cn,Nn&&Hn)t:{for(Gn=Nn,ct=Hn,Qe=0,ut=Gn;ut;ut=Xc(ut))Qe++;for(ut=0,cn=ct;cn;cn=Xc(cn))ut++;for(;0<Qe-ut;)Gn=Xc(Gn),Qe--;for(;0<ut-Qe;)ct=Xc(ct),ut--;for(;Qe--;){if(Gn===ct||ct!==null&&Gn===ct.alternate)break t;Gn=Xc(Gn),ct=Xc(ct)}Gn=null}else Gn=null;Nn!==null&&ir(en,Zt,Nn,Gn,!1),Hn!==null&&fs!==null&&ir(en,fs,Hn,Gn,!0)}}e:{if(Zt=_t?an(_t):window,Nn=Zt.nodeName&&Zt.nodeName.toLowerCase(),Nn==="select"||Nn==="input"&&Zt.type==="file")var Zn=d1;else if(Wu(Zt))if(au)Zn=be;else{Zn=vp;var ai=y0}else(Nn=Zt.nodeName)&&Nn.toLowerCase()==="input"&&(Zt.type==="checkbox"||Zt.type==="radio")&&(Zn=lu);if(Zn&&(Zn=Zn(g,_t))){Ym(en,Zn,w,Yt);break e}ai&&ai(g,Zt,_t),g==="focusout"&&(ai=Zt._wrapperState)&&ai.controlled&&Zt.type==="number"&&Ft(Zt,"number",Zt.value)}switch(ai=_t?an(_t):window,g){case"focusin":(Wu(ai)||ai.contentEditable==="true")&&(Os=ai,tg=_t,Ya=null);break;case"focusout":Ya=tg=Os=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,jd(en,w,Yt);break;case"selectionchange":if(Uo)break;case"keydown":case"keyup":jd(en,w,Yt)}var hi;if(pc)e:{switch(g){case"compositionstart":var yi="onCompositionStart";break e;case"compositionend":yi="onCompositionEnd";break e;case"compositionupdate":yi="onCompositionUpdate";break e}yi=void 0}else Jf?Km(g,w)&&(yi="onCompositionEnd"):g==="keydown"&&w.keyCode===229&&(yi="onCompositionStart");yi&&(Fu&&w.locale!=="ko"&&(Jf||yi!=="onCompositionStart"?yi==="onCompositionEnd"&&Jf&&(hi=Fm()):(Ki=Yt,Vh="value"in Ki?Ki.value:Ki.textContent,Jf=!0)),ai=bp(_t,yi),0<ai.length&&(yi=new Wm(yi,g,null,w,Yt),en.push({event:yi,listeners:ai}),hi?yi.data=hi:(hi=u1(w),hi!==null&&(yi.data=hi)))),(hi=Lo?Bu(g,w):c1(g,w))&&(_t=bp(_t,"onBeforeInput"),0<_t.length&&(Yt=new Wm("onBeforeInput","beforeinput",null,w,Yt),en.push({event:Yt,listeners:_t}),Yt.data=hi))}Vl(en,m)})}function Gh(g,m,w){return{instance:g,listener:m,currentTarget:w}}function bp(g,m){for(var w=m+"Capture",N=[];g!==null;){var H=g,J=H.stateNode;H.tag===5&&J!==null&&(H=J,J=it(g,w),J!=null&&N.unshift(Gh(g,J,H)),J=it(g,m),J!=null&&N.push(Gh(g,J,H))),g=g.return}return N}function Xc(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function ir(g,m,w,N,H){for(var J=m._reactName,ge=[];w!==null&&w!==N;){var Re=w,Ke=Re.alternate,_t=Re.stateNode;if(Ke!==null&&Ke===N)break;Re.tag===5&&_t!==null&&(Re=_t,H?(Ke=it(w,J),Ke!=null&&ge.unshift(Gh(w,Ke,Re))):H||(Ke=it(w,J),Ke!=null&&ge.push(Gh(w,Ke,Re)))),w=w.return}ge.length!==0&&g.push({event:m,listeners:ge})}var Pr=/\r\n?/g,dy=/\u0000|\uFFFD/g;function Cp(g){return(typeof g=="string"?g:""+g).replace(Pr,`
`).replace(dy,"")}function Hl(g,m,w){if(m=Cp(m),Cp(g)!==m&&w)throw Error(t(425))}function Yh(){}var Yd=null,_l=null;function Zd(g,m){return g==="textarea"||g==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var vl=typeof setTimeout=="function"?setTimeout:void 0,uu=typeof clearTimeout=="function"?clearTimeout:void 0,Vu=typeof Promise=="function"?Promise:void 0,Hu=typeof queueMicrotask=="function"?queueMicrotask:typeof Vu<"u"?function(g){return Vu.resolve(null).then(g).catch(fa)}:vl;function fa(g){setTimeout(function(){throw g})}function ig(g,m){var w=m,N=0;do{var H=w.nextSibling;if(g.removeChild(w),H&&H.nodeType===8)if(w=H.data,w==="/$"){if(N===0){g.removeChild(H),ii(m);return}N--}else w!=="$"&&w!=="$?"&&w!=="$!"||N++;w=H}while(w);ii(m)}function Xd(g){for(;g!=null;g=g.nextSibling){var m=g.nodeType;if(m===1||m===3)break;if(m===8){if(m=g.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return g}function p1(g){g=g.previousSibling;for(var m=0;g;){if(g.nodeType===8){var w=g.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return g;m--}else w==="/$"&&m++}g=g.previousSibling}return null}var rg=Math.random().toString(36).slice(2),Ul="__reactFiber$"+rg,bl="__reactProps$"+rg,Rs="__reactContainer$"+rg,yp="__reactEvents$"+rg,q="__reactListeners$"+rg,Uu="__reactHandles$"+rg;function zl(g){var m=g[Ul];if(m)return m;for(var w=g.parentNode;w;){if(m=w[Rs]||w[Ul]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(g=p1(g);g!==null;){if(w=g[Ul])return w;g=p1(g)}return m}g=w,w=g.parentNode}return null}function Ei(g){return g=g[Ul]||g[Rs],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function an(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function Xm(g){return g[bl]||null}var E0=[],Zh=-1;function ws(g){return{current:g}}function bo(g){0>Zh||(g.current=E0[Zh],E0[Zh]=null,Zh--)}function zr(g,m){Zh++,E0[Zh]=g.current,g.current=m}var mc={},cs=ws(mc),Js=ws(!1),Co=mc;function Qc(g,m){var w=g.type.contextTypes;if(!w)return mc;var N=g.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===m)return N.__reactInternalMemoizedMaskedChildContext;var H={},J;for(J in w)H[J]=m[J];return N&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=m,g.__reactInternalMemoizedMaskedChildContext=H),H}function Ms(g){return g=g.childContextTypes,g!=null}function Qm(){bo(Js),bo(cs)}function m1(g,m,w){if(cs.current!==mc)throw Error(t(168));zr(cs,m),zr(Js,w)}function _1(g,m,w){var N=g.stateNode;if(m=m.childContextTypes,typeof N.getChildContext!="function")return w;N=N.getChildContext();for(var H in N)if(!(H in m))throw Error(t(108,Dt(g)||"Unknown",H));return A({},w,N)}function Ss(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||mc,Co=cs.current,zr(cs,g),zr(Js,Js.current),!0}function v1(g,m,w){var N=g.stateNode;if(!N)throw Error(t(169));w?(g=_1(g,m,Co),N.__reactInternalMemoizedMergedChildContext=g,bo(Js),bo(cs),zr(cs,g)):bo(Js),zr(Js,w)}var cu=null,Qd=!1,Jm=!1;function Ee(g){cu===null?cu=[g]:cu.push(g)}function ea(g){Qd=!0,Ee(g)}function zu(){if(!Jm&&cu!==null){Jm=!0;var g=0,m=Lr;try{var w=cu;for(Lr=1;g<w.length;g++){var N=w[g];do N=N(!0);while(N!==null)}cu=null,Qd=!1}catch(H){throw cu!==null&&(cu=cu.slice(g+1)),ht(Jt,zu),H}finally{Lr=m,Jm=!1}}return null}var ga=[],Yn=0,e_=null,t_=0,du=[],ta=0,Xh=null,$u=1,ju="";function Qh(g,m){ga[Yn++]=t_,ga[Yn++]=e_,e_=g,t_=m}function b1(g,m,w){du[ta++]=$u,du[ta++]=ju,du[ta++]=Xh,Xh=g;var N=$u;g=ju;var H=32-Pu(N)-1;N&=~(1<<H),w+=1;var J=32-Pu(m)+H;if(30<J){var ge=H-H%5;J=(N&(1<<ge)-1).toString(32),N>>=ge,H-=ge,$u=1<<32-Pu(m)+H|w<<H|N,ju=J+g}else $u=1<<J|w<<H|N,ju=g}function Qa(g){g.return!==null&&(Qh(g,1),b1(g,1,0))}function qu(g){for(;g===e_;)e_=ga[--Yn],ga[Yn]=null,t_=ga[--Yn],ga[Yn]=null;for(;g===Xh;)Xh=du[--ta],du[ta]=null,ju=du[--ta],du[ta]=null,$u=du[--ta],du[ta]=null}var Ps=null,$l=null,xo=!1,Ku=null;function Do(g,m){var w=xl(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=g,m=g.deletions,m===null?(g.deletions=[w],g.flags|=16):m.push(w)}function og(g,m){switch(g.tag){case 5:var w=g.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(g.stateNode=m,Ps=g,$l=Xd(m.firstChild),!0):!1;case 6:return m=g.pendingProps===""||m.nodeType!==3?null:m,m!==null?(g.stateNode=m,Ps=g,$l=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=Xh!==null?{id:$u,overflow:ju}:null,g.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=xl(18,null,null,0),w.stateNode=m,w.return=g,g.child=w,Ps=g,$l=null,!0):!1;default:return!1}}function Ja(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Po(g){if(xo){var m=$l;if(m){var w=m;if(!og(g,m)){if(Ja(g))throw Error(t(418));m=Xd(w.nextSibling);var N=Ps;m&&og(g,m)?Do(N,w):(g.flags=g.flags&-4097|2,xo=!1,Ps=g)}}else{if(Ja(g))throw Error(t(418));g.flags=g.flags&-4097|2,xo=!1,Ps=g}}}function C1(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Ps=g}function sg(g){if(g!==Ps)return!1;if(!xo)return C1(g),xo=!0,!1;var m;if((m=g.tag!==3)&&!(m=g.tag!==5)&&(m=g.type,m=m!=="head"&&m!=="body"&&!Zd(g.type,g.memoizedProps)),m&&(m=$l)){if(Ja(g))throw _c(),Error(t(418));for(;m;)Do(g,m),m=Xd(m.nextSibling)}if(C1(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,m=0;g;){if(g.nodeType===8){var w=g.data;if(w==="/$"){if(m===0){$l=Xd(g.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}g=g.nextSibling}$l=null}}else $l=Ps?Xd(g.stateNode.nextSibling):null;return!0}function _c(){for(var g=$l;g;)g=Xd(g.nextSibling)}function Cl(){$l=Ps=null,xo=!1}function pa(g){Ku===null?Ku=[g]:Ku.push(g)}var jl=W.ReactCurrentBatchConfig;function Gu(g,m){if(g&&g.defaultProps){m=A({},m),g=g.defaultProps;for(var w in g)m[w]===void 0&&(m[w]=g[w]);return m}return m}var vc=ws(null),n_=null,Jd=null,mr=null;function eh(){mr=Jd=n_=null}function ag(g){var m=vc.current;bo(vc),g._currentValue=m}function ds(g,m,w){for(;g!==null;){var N=g.alternate;if((g.childLanes&m)!==m?(g.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),g===w)break;g=g.return}}function bc(g,m){n_=g,mr=Jd=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&m&&(Vs=!0),g.firstContext=null)}function Es(g){var m=g._currentValue;if(mr!==g)if(g={context:g,memoizedValue:m,next:null},Jd===null){if(n_===null)throw Error(t(308));Jd=g,n_.dependencies={lanes:0,firstContext:g}}else Jd=Jd.next=g;return m}var Yo=null;function th(g){Yo===null?Yo=[g]:Yo.push(g)}function $r(g,m,w,N){var H=m.interleaved;return H===null?(w.next=w,th(m)):(w.next=H.next,H.next=w),m.interleaved=w,yl(g,N)}function yl(g,m){g.lanes|=m;var w=g.alternate;for(w!==null&&(w.lanes|=m),w=g,g=g.return;g!==null;)g.childLanes|=m,w=g.alternate,w!==null&&(w.childLanes|=m),w=g,g=g.return;return w.tag===3?w.stateNode:null}var nh=!1;function Yu(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(g,m){g=g.updateQueue,m.updateQueue===g&&(m.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Fs(g,m){return{eventTime:g,lane:m,tag:0,payload:null,callback:null,next:null}}function Bs(g,m,w){var N=g.updateQueue;if(N===null)return null;if(N=N.shared,yr&2){var H=N.pending;return H===null?m.next=m:(m.next=H.next,H.next=m),N.pending=m,yl(g,w)}return H=N.interleaved,H===null?(m.next=m,th(N)):(m.next=H.next,H.next=m),N.interleaved=m,yl(g,w)}function hu(g,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var N=m.lanes;N&=g.pendingLanes,w|=N,m.lanes=w,fc(g,w)}}function wp(g,m){var w=g.updateQueue,N=g.alternate;if(N!==null&&(N=N.updateQueue,w===N)){var H=null,J=null;if(w=w.firstBaseUpdate,w!==null){do{var ge={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};J===null?H=J=ge:J=J.next=ge,w=w.next}while(w!==null);J===null?H=J=m:J=J.next=m}else H=J=m;w={baseState:N.baseState,firstBaseUpdate:H,lastBaseUpdate:J,shared:N.shared,effects:N.effects},g.updateQueue=w;return}g=w.lastBaseUpdate,g===null?w.firstBaseUpdate=m:g.next=m,w.lastBaseUpdate=m}function Sp(g,m,w,N){var H=g.updateQueue;nh=!1;var J=H.firstBaseUpdate,ge=H.lastBaseUpdate,Re=H.shared.pending;if(Re!==null){H.shared.pending=null;var Ke=Re,_t=Ke.next;Ke.next=null,ge===null?J=_t:ge.next=_t,ge=Ke;var Yt=g.alternate;Yt!==null&&(Yt=Yt.updateQueue,Re=Yt.lastBaseUpdate,Re!==ge&&(Re===null?Yt.firstBaseUpdate=_t:Re.next=_t,Yt.lastBaseUpdate=Ke))}if(J!==null){var en=H.baseState;ge=0,Yt=_t=Ke=null,Re=J;do{var Zt=Re.lane,Nn=Re.eventTime;if((N&Zt)===Zt){Yt!==null&&(Yt=Yt.next={eventTime:Nn,lane:0,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null});e:{var Hn=g,Gn=Re;switch(Zt=m,Nn=w,Gn.tag){case 1:if(Hn=Gn.payload,typeof Hn=="function"){en=Hn.call(Nn,en,Zt);break e}en=Hn;break e;case 3:Hn.flags=Hn.flags&-65537|128;case 0:if(Hn=Gn.payload,Zt=typeof Hn=="function"?Hn.call(Nn,en,Zt):Hn,Zt==null)break e;en=A({},en,Zt);break e;case 2:nh=!0}}Re.callback!==null&&Re.lane!==0&&(g.flags|=64,Zt=H.effects,Zt===null?H.effects=[Re]:Zt.push(Re))}else Nn={eventTime:Nn,lane:Zt,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},Yt===null?(_t=Yt=Nn,Ke=en):Yt=Yt.next=Nn,ge|=Zt;if(Re=Re.next,Re===null){if(Re=H.shared.pending,Re===null)break;Zt=Re,Re=Zt.next,Zt.next=null,H.lastBaseUpdate=Zt,H.shared.pending=null}}while(1);if(Yt===null&&(Ke=en),H.baseState=Ke,H.firstBaseUpdate=_t,H.lastBaseUpdate=Yt,m=H.shared.interleaved,m!==null){H=m;do ge|=H.lane,H=H.next;while(H!==m)}else J===null&&(H.shared.lanes=0);ld|=ge,g.lanes=ge,g.memoizedState=en}}function lg(g,m,w){if(g=m.effects,m.effects=null,g!==null)for(m=0;m<g.length;m++){var N=g[m],H=N.callback;if(H!==null){if(N.callback=null,N=w,typeof H!="function")throw Error(t(191,H));H.call(N)}}}var ma=new r.Component().refs;function r_(g,m,w,N){m=g.memoizedState,w=w(N,m),w=w==null?m:A({},m,w),g.memoizedState=w,g.lanes===0&&(g.updateQueue.baseState=w)}var o_={isMounted:function(g){return(g=g._reactInternals)?K(g)===g:!1},enqueueSetState:function(g,m,w){g=g._reactInternals;var N=rl(),H=ph(g),J=Fs(N,H);J.payload=m,w!=null&&(J.callback=w),m=Bs(g,J,H),m!==null&&(Ju(m,g,H,N),hu(m,g,H))},enqueueReplaceState:function(g,m,w){g=g._reactInternals;var N=rl(),H=ph(g),J=Fs(N,H);J.tag=1,J.payload=m,w!=null&&(J.callback=w),m=Bs(g,J,H),m!==null&&(Ju(m,g,H,N),hu(m,g,H))},enqueueForceUpdate:function(g,m){g=g._reactInternals;var w=rl(),N=ph(g),H=Fs(w,N);H.tag=2,m!=null&&(H.callback=m),m=Bs(g,H,N),m!==null&&(Ju(m,g,N,w),hu(m,g,N))}};function Jc(g,m,w,N,H,J,ge){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(N,J,ge):m.prototype&&m.prototype.isPureReactComponent?!Et(w,N)||!Et(H,J):!0}function s_(g,m,w){var N=!1,H=mc,J=m.contextType;return typeof J=="object"&&J!==null?J=Es(J):(H=Ms(m)?Co:cs.current,N=m.contextTypes,J=(N=N!=null)?Qc(g,H):mc),m=new m(w,J),g.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=o_,g.stateNode=m,m._reactInternals=g,N&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=H,g.__reactInternalMemoizedMaskedChildContext=J),m}function L0(g,m,w,N){g=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,N),m.state!==g&&o_.enqueueReplaceState(m,m.state,null)}function Ws(g,m,w,N){var H=g.stateNode;H.props=w,H.state=g.memoizedState,H.refs=ma,Yu(g);var J=m.contextType;typeof J=="object"&&J!==null?H.context=Es(J):(J=Ms(m)?Co:cs.current,H.context=Qc(g,J)),H.state=g.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(r_(g,m,J,w),H.state=g.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(m=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),m!==H.state&&o_.enqueueReplaceState(H,H.state,null),Sp(g,w,H,N),H.state=g.memoizedState),typeof H.componentDidMount=="function"&&(g.flags|=4194308)}function Jh(g,m,w){if(g=w.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(t(309));var N=w.stateNode}if(!N)throw Error(t(147,g));var H=N,J=""+g;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===J?m.ref:(m=function(ge){var Re=H.refs;Re===ma&&(Re=H.refs={}),ge===null?delete Re[J]:Re[J]=ge},m._stringRef=J,m)}if(typeof g!="string")throw Error(t(284));if(!w._owner)throw Error(t(290,g))}return g}function ef(g,m){throw g=Object.prototype.toString.call(m),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":g))}function el(g){var m=g._init;return m(g._payload)}function a_(g){function m(ct,Qe){if(g){var ut=ct.deletions;ut===null?(ct.deletions=[Qe],ct.flags|=16):ut.push(Qe)}}function w(ct,Qe){if(!g)return null;for(;Qe!==null;)m(ct,Qe),Qe=Qe.sibling;return null}function N(ct,Qe){for(ct=new Map;Qe!==null;)Qe.key!==null?ct.set(Qe.key,Qe):ct.set(Qe.index,Qe),Qe=Qe.sibling;return ct}function H(ct,Qe){return ct=mh(ct,Qe),ct.index=0,ct.sibling=null,ct}function J(ct,Qe,ut){return ct.index=ut,g?(ut=ct.alternate,ut!==null?(ut=ut.index,ut<Qe?(ct.flags|=2,Qe):ut):(ct.flags|=2,Qe)):(ct.flags|=1048576,Qe)}function ge(ct){return g&&ct.alternate===null&&(ct.flags|=2),ct}function Re(ct,Qe,ut,cn){return Qe===null||Qe.tag!==6?(Qe=U0(ut,ct.mode,cn),Qe.return=ct,Qe):(Qe=H(Qe,ut),Qe.return=ct,Qe)}function Ke(ct,Qe,ut,cn){var Zn=ut.type;return Zn===z?Yt(ct,Qe,ut.props.children,cn,ut.key):Qe!==null&&(Qe.elementType===Zn||typeof Zn=="object"&&Zn!==null&&Zn.$$typeof===ne&&el(Zn)===Qe.type)?(cn=H(Qe,ut.props),cn.ref=Jh(ct,Qe,ut),cn.return=ct,cn):(cn=A_(ut.type,ut.key,ut.props,null,ct.mode,cn),cn.ref=Jh(ct,Qe,ut),cn.return=ct,cn)}function _t(ct,Qe,ut,cn){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==ut.containerInfo||Qe.stateNode.implementation!==ut.implementation?(Qe=z0(ut,ct.mode,cn),Qe.return=ct,Qe):(Qe=H(Qe,ut.children||[]),Qe.return=ct,Qe)}function Yt(ct,Qe,ut,cn,Zn){return Qe===null||Qe.tag!==7?(Qe=vf(ut,ct.mode,cn,Zn),Qe.return=ct,Qe):(Qe=H(Qe,ut),Qe.return=ct,Qe)}function en(ct,Qe,ut){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Qe=U0(""+Qe,ct.mode,ut),Qe.return=ct,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case F:return ut=A_(Qe.type,Qe.key,Qe.props,null,ct.mode,ut),ut.ref=Jh(ct,null,Qe),ut.return=ct,ut;case Q:return Qe=z0(Qe,ct.mode,ut),Qe.return=ct,Qe;case ne:var cn=Qe._init;return en(ct,cn(Qe._payload),ut)}if(Bt(Qe)||ie(Qe))return Qe=vf(Qe,ct.mode,ut,null),Qe.return=ct,Qe;ef(ct,Qe)}return null}function Zt(ct,Qe,ut,cn){var Zn=Qe!==null?Qe.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Zn!==null?null:Re(ct,Qe,""+ut,cn);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case F:return ut.key===Zn?Ke(ct,Qe,ut,cn):null;case Q:return ut.key===Zn?_t(ct,Qe,ut,cn):null;case ne:return Zn=ut._init,Zt(ct,Qe,Zn(ut._payload),cn)}if(Bt(ut)||ie(ut))return Zn!==null?null:Yt(ct,Qe,ut,cn,null);ef(ct,ut)}return null}function Nn(ct,Qe,ut,cn,Zn){if(typeof cn=="string"&&cn!==""||typeof cn=="number")return ct=ct.get(ut)||null,Re(Qe,ct,""+cn,Zn);if(typeof cn=="object"&&cn!==null){switch(cn.$$typeof){case F:return ct=ct.get(cn.key===null?ut:cn.key)||null,Ke(Qe,ct,cn,Zn);case Q:return ct=ct.get(cn.key===null?ut:cn.key)||null,_t(Qe,ct,cn,Zn);case ne:var ai=cn._init;return Nn(ct,Qe,ut,ai(cn._payload),Zn)}if(Bt(cn)||ie(cn))return ct=ct.get(ut)||null,Yt(Qe,ct,cn,Zn,null);ef(Qe,cn)}return null}function Hn(ct,Qe,ut,cn){for(var Zn=null,ai=null,hi=Qe,yi=Qe=0,ra=null;hi!==null&&yi<ut.length;yi++){hi.index>yi?(ra=hi,hi=null):ra=hi.sibling;var Nr=Zt(ct,hi,ut[yi],cn);if(Nr===null){hi===null&&(hi=ra);break}g&&hi&&Nr.alternate===null&&m(ct,hi),Qe=J(Nr,Qe,yi),ai===null?Zn=Nr:ai.sibling=Nr,ai=Nr,hi=ra}if(yi===ut.length)return w(ct,hi),xo&&Qh(ct,yi),Zn;if(hi===null){for(;yi<ut.length;yi++)hi=en(ct,ut[yi],cn),hi!==null&&(Qe=J(hi,Qe,yi),ai===null?Zn=hi:ai.sibling=hi,ai=hi);return xo&&Qh(ct,yi),Zn}for(hi=N(ct,hi);yi<ut.length;yi++)ra=Nn(hi,ct,yi,ut[yi],cn),ra!==null&&(g&&ra.alternate!==null&&hi.delete(ra.key===null?yi:ra.key),Qe=J(ra,Qe,yi),ai===null?Zn=ra:ai.sibling=ra,ai=ra);return g&&hi.forEach(function(vh){return m(ct,vh)}),xo&&Qh(ct,yi),Zn}function Gn(ct,Qe,ut,cn){var Zn=ie(ut);if(typeof Zn!="function")throw Error(t(150));if(ut=Zn.call(ut),ut==null)throw Error(t(151));for(var ai=Zn=null,hi=Qe,yi=Qe=0,ra=null,Nr=ut.next();hi!==null&&!Nr.done;yi++,Nr=ut.next()){hi.index>yi?(ra=hi,hi=null):ra=hi.sibling;var vh=Zt(ct,hi,Nr.value,cn);if(vh===null){hi===null&&(hi=ra);break}g&&hi&&vh.alternate===null&&m(ct,hi),Qe=J(vh,Qe,yi),ai===null?Zn=vh:ai.sibling=vh,ai=vh,hi=ra}if(Nr.done)return w(ct,hi),xo&&Qh(ct,yi),Zn;if(hi===null){for(;!Nr.done;yi++,Nr=ut.next())Nr=en(ct,Nr.value,cn),Nr!==null&&(Qe=J(Nr,Qe,yi),ai===null?Zn=Nr:ai.sibling=Nr,ai=Nr);return xo&&Qh(ct,yi),Zn}for(hi=N(ct,hi);!Nr.done;yi++,Nr=ut.next())Nr=Nn(hi,ct,yi,Nr.value,cn),Nr!==null&&(g&&Nr.alternate!==null&&hi.delete(Nr.key===null?yi:Nr.key),Qe=J(Nr,Qe,yi),ai===null?Zn=Nr:ai.sibling=Nr,ai=Nr);return g&&hi.forEach(function(Ey){return m(ct,Ey)}),xo&&Qh(ct,yi),Zn}function fs(ct,Qe,ut,cn){if(typeof ut=="object"&&ut!==null&&ut.type===z&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case F:e:{for(var Zn=ut.key,ai=Qe;ai!==null;){if(ai.key===Zn){if(Zn=ut.type,Zn===z){if(ai.tag===7){w(ct,ai.sibling),Qe=H(ai,ut.props.children),Qe.return=ct,ct=Qe;break e}}else if(ai.elementType===Zn||typeof Zn=="object"&&Zn!==null&&Zn.$$typeof===ne&&el(Zn)===ai.type){w(ct,ai.sibling),Qe=H(ai,ut.props),Qe.ref=Jh(ct,ai,ut),Qe.return=ct,ct=Qe;break e}w(ct,ai);break}else m(ct,ai);ai=ai.sibling}ut.type===z?(Qe=vf(ut.props.children,ct.mode,cn,ut.key),Qe.return=ct,ct=Qe):(cn=A_(ut.type,ut.key,ut.props,null,ct.mode,cn),cn.ref=Jh(ct,Qe,ut),cn.return=ct,ct=cn)}return ge(ct);case Q:e:{for(ai=ut.key;Qe!==null;){if(Qe.key===ai)if(Qe.tag===4&&Qe.stateNode.containerInfo===ut.containerInfo&&Qe.stateNode.implementation===ut.implementation){w(ct,Qe.sibling),Qe=H(Qe,ut.children||[]),Qe.return=ct,ct=Qe;break e}else{w(ct,Qe);break}else m(ct,Qe);Qe=Qe.sibling}Qe=z0(ut,ct.mode,cn),Qe.return=ct,ct=Qe}return ge(ct);case ne:return ai=ut._init,fs(ct,Qe,ai(ut._payload),cn)}if(Bt(ut))return Hn(ct,Qe,ut,cn);if(ie(ut))return Gn(ct,Qe,ut,cn);ef(ct,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"?(ut=""+ut,Qe!==null&&Qe.tag===6?(w(ct,Qe.sibling),Qe=H(Qe,ut),Qe.return=ct,ct=Qe):(w(ct,Qe),Qe=U0(ut,ct.mode,cn),Qe.return=ct,ct=Qe),ge(ct)):w(ct,Qe)}return fs}var ql=a_(!0),Cc=a_(!1),ih={},Io=ws(ih),Kl=ws(ih),Ep=ws(ih);function ed(g){if(g===ih)throw Error(t(174));return g}function Lp(g,m){switch(zr(Ep,m),zr(Kl,g),zr(Io,ih),g=m.nodeType,g){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:oe(null,"");break;default:g=g===8?m.parentNode:m,m=g.namespaceURI||null,g=g.tagName,m=oe(m,g)}bo(Io),zr(Io,m)}function rh(){bo(Io),bo(Kl),bo(Ep)}function l_(g){ed(Ep.current);var m=ed(Io.current),w=oe(m,g.type);m!==w&&(zr(Kl,g),zr(Io,w))}function tf(g){Kl.current===g&&(bo(Io),bo(Kl))}var no=ws(0);function ug(g){for(var m=g;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break;for(;m.sibling===null;){if(m.return===null||m.return===g)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var nf=[];function rf(){for(var g=0;g<nf.length;g++)nf[g]._workInProgressVersionPrimary=null;nf.length=0}var oh=W.ReactCurrentDispatcher,Ln=W.ReactCurrentBatchConfig,td=0,zo=null,yo=null,Ls=null,u_=!1,cg=!1,Kr=0,hy=0;function $o(){throw Error(t(321))}function sh(g,m){if(m===null)return!1;for(var w=0;w<m.length&&w<g.length;w++)if(!ke(g[w],m[w]))return!1;return!0}function dg(g,m,w,N,H,J){if(td=J,zo=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,oh.current=g===null||g.memoizedState===null?ka:fy,g=w(N,H),cg){J=0;do{if(cg=!1,Kr=0,25<=J)throw Error(t(301));J+=1,Ls=yo=null,m.updateQueue=null,oh.current=wc,g=w(N,H)}while(cg)}if(oh.current=Ia,m=yo!==null&&yo.next!==null,td=0,Ls=yo=zo=null,u_=!1,m)throw Error(t(300));return g}function hg(){var g=Kr!==0;return Kr=0,g}function cr(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?zo.memoizedState=Ls=g:Ls=Ls.next=g,Ls}function ko(){if(yo===null){var g=zo.alternate;g=g!==null?g.memoizedState:null}else g=yo.next;var m=Ls===null?zo.memoizedState:Ls.next;if(m!==null)Ls=m,yo=g;else{if(g===null)throw Error(t(310));yo=g,g={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},Ls===null?zo.memoizedState=Ls=g:Ls=Ls.next=g}return Ls}function yc(g,m){return typeof m=="function"?m(g):m}function fg(g){var m=ko(),w=m.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=g;var N=yo,H=N.baseQueue,J=w.pending;if(J!==null){if(H!==null){var ge=H.next;H.next=J.next,J.next=ge}N.baseQueue=H=J,w.pending=null}if(H!==null){J=H.next,N=N.baseState;var Re=ge=null,Ke=null,_t=J;do{var Yt=_t.lane;if((td&Yt)===Yt)Ke!==null&&(Ke=Ke.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),N=_t.hasEagerState?_t.eagerState:g(N,_t.action);else{var en={lane:Yt,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};Ke===null?(Re=Ke=en,ge=N):Ke=Ke.next=en,zo.lanes|=Yt,ld|=Yt}_t=_t.next}while(_t!==null&&_t!==J);Ke===null?ge=N:Ke.next=Re,ke(N,m.memoizedState)||(Vs=!0),m.memoizedState=N,m.baseState=ge,m.baseQueue=Ke,w.lastRenderedState=N}if(g=w.interleaved,g!==null){H=g;do J=H.lane,zo.lanes|=J,ld|=J,H=H.next;while(H!==g)}else H===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function nd(g){var m=ko(),w=m.queue;if(w===null)throw Error(t(311));w.lastRenderedReducer=g;var N=w.dispatch,H=w.pending,J=m.memoizedState;if(H!==null){w.pending=null;var ge=H=H.next;do J=g(J,ge.action),ge=ge.next;while(ge!==H);ke(J,m.memoizedState)||(Vs=!0),m.memoizedState=J,m.baseQueue===null&&(m.baseState=J),w.lastRenderedState=J}return[J,N]}function xp(){}function gg(g,m){var w=zo,N=ko(),H=m(),J=!ke(N.memoizedState,H);if(J&&(N.memoizedState=H,Vs=!0),N=N.queue,x0(ah.bind(null,w,N,g),[g]),N.getSnapshot!==m||J||Ls!==null&&Ls.memoizedState.tag&1){if(w.flags|=2048,sf(9,of.bind(null,w,N,H,m),void 0,null),Us===null)throw Error(t(349));td&30||pg(w,m,H)}return H}function pg(g,m,w){g.flags|=16384,g={getSnapshot:m,value:w},m=zo.updateQueue,m===null?(m={lastEffect:null,stores:null},zo.updateQueue=m,m.stores=[g]):(w=m.stores,w===null?m.stores=[g]:w.push(g))}function of(g,m,w,N){m.value=w,m.getSnapshot=N,Da(m)&&c_(g)}function ah(g,m,w){return w(function(){Da(m)&&c_(g)})}function Da(g){var m=g.getSnapshot;g=g.value;try{var w=m();return!ke(g,w)}catch{return!0}}function c_(g){var m=yl(g,1);m!==null&&Ju(m,g,1,-1)}function di(g){var m=cr();return typeof g=="function"&&(g=g()),m.memoizedState=m.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:g},m.queue=g,g=g.dispatch=f_.bind(null,zo,g),[m.memoizedState,g]}function sf(g,m,w,N){return g={tag:g,create:m,destroy:w,deps:N,next:null},m=zo.updateQueue,m===null?(m={lastEffect:null,stores:null},zo.updateQueue=m,m.lastEffect=g.next=g):(w=m.lastEffect,w===null?m.lastEffect=g.next=g:(N=w.next,w.next=g,g.next=N,m.lastEffect=g)),g}function d_(){return ko().memoizedState}function fu(g,m,w,N){var H=cr();zo.flags|=g,H.memoizedState=sf(1|m,w,void 0,N===void 0?null:N)}function Dp(g,m,w,N){var H=ko();N=N===void 0?null:N;var J=void 0;if(yo!==null){var ge=yo.memoizedState;if(J=ge.destroy,N!==null&&sh(N,ge.deps)){H.memoizedState=sf(m,w,J,N);return}}zo.flags|=g,H.memoizedState=sf(1|m,w,J,N)}function y1(g,m){return fu(8390656,8,g,m)}function x0(g,m){return Dp(2048,8,g,m)}function tl(g,m){return Dp(4,2,g,m)}function h_(g,m){return Dp(4,4,g,m)}function Ip(g,m){if(typeof m=="function")return g=g(),m(g),function(){m(null)};if(m!=null)return g=g(),m.current=g,function(){m.current=null}}function mg(g,m,w){return w=w!=null?w.concat([g]):null,Dp(4,4,Ip.bind(null,m,g),w)}function _g(){}function Gr(g,m){var w=ko();m=m===void 0?null:m;var N=w.memoizedState;return N!==null&&m!==null&&sh(m,N[1])?N[0]:(w.memoizedState=[g,m],g)}function kr(g,m){var w=ko();m=m===void 0?null:m;var N=w.memoizedState;return N!==null&&m!==null&&sh(m,N[1])?N[0]:(g=g(),w.memoizedState=[g,m],g)}function id(g,m,w){return td&21?(ke(w,m)||(w=Om(),zo.lanes|=w,ld|=w,g.baseState=!0),m):(g.baseState&&(g.baseState=!1,Vs=!0),g.memoizedState=w)}function D0(g,m){var w=Lr;Lr=w!==0&&4>w?w:4,g(!0);var N=Ln.transition;Ln.transition={};try{g(!1),m()}finally{Lr=w,Ln.transition=N}}function rd(){return ko().memoizedState}function wl(g,m,w){var N=ph(g);if(w={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null},vg(g))I0(m,w);else if(w=$r(g,m,w,N),w!==null){var H=rl();Ju(w,g,N,H),bg(w,m,N)}}function f_(g,m,w){var N=ph(g),H={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null};if(vg(g))I0(m,H);else{var J=g.alternate;if(g.lanes===0&&(J===null||J.lanes===0)&&(J=m.lastRenderedReducer,J!==null))try{var ge=m.lastRenderedState,Re=J(ge,w);if(H.hasEagerState=!0,H.eagerState=Re,ke(Re,ge)){var Ke=m.interleaved;Ke===null?(H.next=H,th(m)):(H.next=Ke.next,Ke.next=H),m.interleaved=H;return}}catch{}finally{}w=$r(g,m,H,N),w!==null&&(H=rl(),Ju(w,g,N,H),bg(w,m,N))}}function vg(g){var m=g.alternate;return g===zo||m!==null&&m===zo}function I0(g,m){cg=u_=!0;var w=g.pending;w===null?m.next=m:(m.next=w.next,w.next=m),g.pending=m}function bg(g,m,w){if(w&4194240){var N=m.lanes;N&=g.pendingLanes,w|=N,m.lanes=w,fc(g,w)}}var Ia={readContext:Es,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useInsertionEffect:$o,useLayoutEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useDeferredValue:$o,useTransition:$o,useMutableSource:$o,useSyncExternalStore:$o,useId:$o,unstable_isNewReconciler:!1},ka={readContext:Es,useCallback:function(g,m){return cr().memoizedState=[g,m===void 0?null:m],g},useContext:Es,useEffect:y1,useImperativeHandle:function(g,m,w){return w=w!=null?w.concat([g]):null,fu(4194308,4,Ip.bind(null,m,g),w)},useLayoutEffect:function(g,m){return fu(4194308,4,g,m)},useInsertionEffect:function(g,m){return fu(4,2,g,m)},useMemo:function(g,m){var w=cr();return m=m===void 0?null:m,g=g(),w.memoizedState=[g,m],g},useReducer:function(g,m,w){var N=cr();return m=w!==void 0?w(m):m,N.memoizedState=N.baseState=m,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:m},N.queue=g,g=g.dispatch=wl.bind(null,zo,g),[N.memoizedState,g]},useRef:function(g){var m=cr();return g={current:g},m.memoizedState=g},useState:di,useDebugValue:_g,useDeferredValue:function(g){return cr().memoizedState=g},useTransition:function(){var g=di(!1),m=g[0];return g=D0.bind(null,g[1]),cr().memoizedState=g,[m,g]},useMutableSource:function(){},useSyncExternalStore:function(g,m,w){var N=zo,H=cr();if(xo){if(w===void 0)throw Error(t(407));w=w()}else{if(w=m(),Us===null)throw Error(t(349));td&30||pg(N,m,w)}H.memoizedState=w;var J={value:w,getSnapshot:m};return H.queue=J,y1(ah.bind(null,N,J,g),[g]),N.flags|=2048,sf(9,of.bind(null,N,J,w,m),void 0,null),w},useId:function(){var g=cr(),m=Us.identifierPrefix;if(xo){var w=ju,N=$u;w=(N&~(1<<32-Pu(N)-1)).toString(32)+w,m=":"+m+"R"+w,w=Kr++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=hy++,m=":"+m+"r"+w.toString(32)+":";return g.memoizedState=m},unstable_isNewReconciler:!1},fy={readContext:Es,useCallback:Gr,useContext:Es,useEffect:x0,useImperativeHandle:mg,useInsertionEffect:tl,useLayoutEffect:h_,useMemo:kr,useReducer:fg,useRef:d_,useState:function(){return fg(yc)},useDebugValue:_g,useDeferredValue:function(g){var m=ko();return id(m,yo.memoizedState,g)},useTransition:function(){var g=fg(yc)[0],m=ko().memoizedState;return[g,m]},useMutableSource:xp,useSyncExternalStore:gg,useId:rd,unstable_isNewReconciler:!1},wc={readContext:Es,useCallback:Gr,useContext:Es,useEffect:x0,useImperativeHandle:mg,useInsertionEffect:tl,useLayoutEffect:h_,useMemo:kr,useReducer:nd,useRef:d_,useState:function(){return nd(yc)},useDebugValue:_g,useDeferredValue:function(g){var m=ko();return yo===null?m.memoizedState=g:id(m,yo.memoizedState,g)},useTransition:function(){var g=nd(yc)[0],m=ko().memoizedState;return[g,m]},useMutableSource:xp,useSyncExternalStore:gg,useId:rd,unstable_isNewReconciler:!1};function od(g,m){try{var w="",N=m;do w+=He(N),N=N.return;while(N);var H=w}catch(J){H=`
Error generating stack: `+J.message+`
`+J.stack}return{value:g,source:m,stack:H,digest:null}}function Sc(g,m,w){return{value:g,source:null,stack:w??null,digest:m??null}}function af(g,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var lf=typeof WeakMap=="function"?WeakMap:Map;function Cg(g,m,w){w=Fs(-1,w),w.tag=3,w.payload={element:null};var N=m.value;return w.callback=function(){Rp||(Rp=!0,bu=N),af(g,m)},w}function lh(g,m,w){w=Fs(-1,w),w.tag=3;var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var H=m.value;w.payload=function(){return N(H)},w.callback=function(){af(g,m)}}var J=g.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(w.callback=function(){af(g,m),typeof N!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var ge=m.stack;this.componentDidCatch(m.value,{componentStack:ge!==null?ge:""})}),w}function k0(g,m,w){var N=g.pingCache;if(N===null){N=g.pingCache=new lf;var H=new Set;N.set(m,H)}else H=N.get(m),H===void 0&&(H=new Set,N.set(m,H));H.has(w)||(H.add(w),g=my.bind(null,g,m,w),m.then(g,g))}function kp(g){do{var m;if((m=g.tag===13)&&(m=g.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return g;g=g.return}while(g!==null);return null}function uh(g,m,w,N,H){return g.mode&1?(g.flags|=65536,g.lanes=H,g):(g===m?g.flags|=65536:(g.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=Fs(-1,1),m.tag=2,Bs(w,m,1))),w.lanes|=1),g)}var g_=W.ReactCurrentOwner,Vs=!1;function io(g,m,w,N){m.child=g===null?Cc(m,null,w,N):ql(m,g.child,w,N)}function Gl(g,m,w,N,H){w=w.render;var J=m.ref;return bc(m,H),N=dg(g,m,w,N,J,H),w=hg(),g!==null&&!Vs?(m.updateQueue=g.updateQueue,m.flags&=-2053,g.lanes&=~H,gu(g,m,H)):(xo&&w&&Qa(m),m.flags|=1,io(g,m,N,H),m.child)}function na(g,m,w,N,H){if(g===null){var J=w.type;return typeof J=="function"&&!H0(J)&&J.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=J,p_(g,m,J,N,H)):(g=A_(w.type,null,N,m,m.mode,H),g.ref=m.ref,g.return=m,m.child=g)}if(J=g.child,!(g.lanes&H)){var ge=J.memoizedProps;if(w=w.compare,w=w!==null?w:Et,w(ge,N)&&g.ref===m.ref)return gu(g,m,H)}return m.flags|=1,g=mh(J,N),g.ref=m.ref,g.return=m,m.child=g}function p_(g,m,w,N,H){if(g!==null){var J=g.memoizedProps;if(Et(J,N)&&g.ref===m.ref)if(Vs=!1,m.pendingProps=N=J,(g.lanes&H)!==0)g.flags&131072&&(Vs=!0);else return m.lanes=g.lanes,gu(g,m,H)}return yg(g,m,w,N,H)}function uf(g,m,w){var N=m.pendingProps,H=N.children,J=g!==null?g.memoizedState:null;if(N.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},zr(Lg,Yl),Yl|=w;else{if(!(w&1073741824))return g=J!==null?J.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:g,cachePool:null,transitions:null},m.updateQueue=null,zr(Lg,Yl),Yl|=g,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=J!==null?J.baseLanes:w,zr(Lg,Yl),Yl|=N}else J!==null?(N=J.baseLanes|w,m.memoizedState=null):N=w,zr(Lg,Yl),Yl|=N;return io(g,m,H,w),m.child}function cf(g,m){var w=m.ref;(g===null&&w!==null||g!==null&&g.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function yg(g,m,w,N,H){var J=Ms(w)?Co:cs.current;return J=Qc(m,J),bc(m,H),w=dg(g,m,w,N,J,H),N=hg(),g!==null&&!Vs?(m.updateQueue=g.updateQueue,m.flags&=-2053,g.lanes&=~H,gu(g,m,H)):(xo&&N&&Qa(m),m.flags|=1,io(g,m,w,H),m.child)}function T0(g,m,w,N,H){if(Ms(w)){var J=!0;Ss(m)}else J=!1;if(bc(m,H),m.stateNode===null)dh(g,m),s_(m,w,N),Ws(m,w,N,H),N=!0;else if(g===null){var ge=m.stateNode,Re=m.memoizedProps;ge.props=Re;var Ke=ge.context,_t=w.contextType;typeof _t=="object"&&_t!==null?_t=Es(_t):(_t=Ms(w)?Co:cs.current,_t=Qc(m,_t));var Yt=w.getDerivedStateFromProps,en=typeof Yt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";en||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Re!==N||Ke!==_t)&&L0(m,ge,N,_t),nh=!1;var Zt=m.memoizedState;ge.state=Zt,Sp(m,N,ge,H),Ke=m.memoizedState,Re!==N||Zt!==Ke||Js.current||nh?(typeof Yt=="function"&&(r_(m,w,Yt,N),Ke=m.memoizedState),(Re=nh||Jc(m,w,Re,N,Zt,Ke,_t))?(en||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=Ke),ge.props=N,ge.state=Ke,ge.context=_t,N=Re):(typeof ge.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{ge=m.stateNode,i_(g,m),Re=m.memoizedProps,_t=m.type===m.elementType?Re:Gu(m.type,Re),ge.props=_t,en=m.pendingProps,Zt=ge.context,Ke=w.contextType,typeof Ke=="object"&&Ke!==null?Ke=Es(Ke):(Ke=Ms(w)?Co:cs.current,Ke=Qc(m,Ke));var Nn=w.getDerivedStateFromProps;(Yt=typeof Nn=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Re!==en||Zt!==Ke)&&L0(m,ge,N,Ke),nh=!1,Zt=m.memoizedState,ge.state=Zt,Sp(m,N,ge,H);var Hn=m.memoizedState;Re!==en||Zt!==Hn||Js.current||nh?(typeof Nn=="function"&&(r_(m,w,Nn,N),Hn=m.memoizedState),(_t=nh||Jc(m,w,_t,N,Zt,Hn,Ke)||!1)?(Yt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(N,Hn,Ke),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(N,Hn,Ke)),typeof ge.componentDidUpdate=="function"&&(m.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Re===g.memoizedProps&&Zt===g.memoizedState||(m.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Re===g.memoizedProps&&Zt===g.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=Hn),ge.props=N,ge.state=Hn,ge.context=Ke,N=_t):(typeof ge.componentDidUpdate!="function"||Re===g.memoizedProps&&Zt===g.memoizedState||(m.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Re===g.memoizedProps&&Zt===g.memoizedState||(m.flags|=1024),N=!1)}return N0(g,m,w,N,J,H)}function N0(g,m,w,N,H,J){cf(g,m);var ge=(m.flags&128)!==0;if(!N&&!ge)return H&&v1(m,w,!1),gu(g,m,J);N=m.stateNode,g_.current=m;var Re=ge&&typeof w.getDerivedStateFromError!="function"?null:N.render();return m.flags|=1,g!==null&&ge?(m.child=ql(m,g.child,null,J),m.child=ql(m,null,Re,J)):io(g,m,Re,J),m.memoizedState=N.state,H&&v1(m,w,!0),m.child}function Hs(g){var m=g.stateNode;m.pendingContext?m1(g,m.pendingContext,m.pendingContext!==m.context):m.context&&m1(g,m.context,!1),Lp(g,m.containerInfo)}function Zu(g,m,w,N,H){return Cl(),pa(H),m.flags|=256,io(g,m,w,N),m.child}var Xu={dehydrated:null,treeContext:null,retryLane:0};function df(g){return{baseLanes:g,cachePool:null,transitions:null}}function sd(g,m,w){var N=m.pendingProps,H=no.current,J=!1,ge=(m.flags&128)!==0,Re;if((Re=ge)||(Re=g!==null&&g.memoizedState===null?!1:(H&2)!==0),Re?(J=!0,m.flags&=-129):(g===null||g.memoizedState!==null)&&(H|=1),zr(no,H&1),g===null)return Po(m),g=m.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(m.mode&1?g.data==="$!"?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(ge=N.children,g=N.fallback,J?(N=m.mode,J=m.child,ge={mode:"hidden",children:ge},!(N&1)&&J!==null?(J.childLanes=0,J.pendingProps=ge):J=O_(ge,N,0,null),g=vf(g,N,w,null),J.return=m,g.return=m,J.sibling=g,m.child=J,m.child.memoizedState=df(w),m.memoizedState=Xu,g):Sl(m,ge));if(H=g.memoizedState,H!==null&&(Re=H.dehydrated,Re!==null))return ch(g,m,ge,N,Re,H,w);if(J){J=N.fallback,ge=m.mode,H=g.child,Re=H.sibling;var Ke={mode:"hidden",children:N.children};return!(ge&1)&&m.child!==H?(N=m.child,N.childLanes=0,N.pendingProps=Ke,m.deletions=null):(N=mh(H,Ke),N.subtreeFlags=H.subtreeFlags&14680064),Re!==null?J=mh(Re,J):(J=vf(J,ge,w,null),J.flags|=2),J.return=m,N.return=m,N.sibling=J,m.child=N,N=J,J=m.child,ge=g.child.memoizedState,ge=ge===null?df(w):{baseLanes:ge.baseLanes|w,cachePool:null,transitions:ge.transitions},J.memoizedState=ge,J.childLanes=g.childLanes&~w,m.memoizedState=Xu,N}return J=g.child,g=J.sibling,N=mh(J,{mode:"visible",children:N.children}),!(m.mode&1)&&(N.lanes=w),N.return=m,N.sibling=null,g!==null&&(w=m.deletions,w===null?(m.deletions=[g],m.flags|=16):w.push(g)),m.child=N,m.memoizedState=null,N}function Sl(g,m){return m=O_({mode:"visible",children:m},g.mode,0,null),m.return=g,g.child=m}function qt(g,m,w,N){return N!==null&&pa(N),ql(m,g.child,null,w),g=Sl(m,m.pendingProps.children),g.flags|=2,m.memoizedState=null,g}function ch(g,m,w,N,H,J,ge){if(w)return m.flags&256?(m.flags&=-257,N=Sc(Error(t(422))),qt(g,m,ge,N)):m.memoizedState!==null?(m.child=g.child,m.flags|=128,null):(J=N.fallback,H=m.mode,N=O_({mode:"visible",children:N.children},H,0,null),J=vf(J,H,ge,null),J.flags|=2,N.return=m,J.return=m,N.sibling=J,m.child=N,m.mode&1&&ql(m,g.child,null,ge),m.child.memoizedState=df(ge),m.memoizedState=Xu,J);if(!(m.mode&1))return qt(g,m,ge,null);if(H.data==="$!"){if(N=H.nextSibling&&H.nextSibling.dataset,N)var Re=N.dgst;return N=Re,J=Error(t(419)),N=Sc(J,N,void 0),qt(g,m,ge,N)}if(Re=(ge&g.childLanes)!==0,Vs||Re){if(N=Us,N!==null){switch(ge&-ge){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=H&(N.suspendedLanes|ge)?0:H,H!==0&&H!==J.retryLane&&(J.retryLane=H,yl(g,H),Ju(N,g,H,-1))}return V0(),N=Sc(Error(t(421))),qt(g,m,ge,N)}return H.data==="$?"?(m.flags|=128,m.child=g.child,m=_y.bind(null,g),H._reactRetry=m,null):(g=J.treeContext,$l=Xd(H.nextSibling),Ps=m,xo=!0,Ku=null,g!==null&&(du[ta++]=$u,du[ta++]=ju,du[ta++]=Xh,$u=g.id,ju=g.overflow,Xh=m),m=Sl(m,N.children),m.flags|=4096,m)}function ad(g,m,w){g.lanes|=m;var N=g.alternate;N!==null&&(N.lanes|=m),ds(g.return,m,w)}function _a(g,m,w,N,H){var J=g.memoizedState;J===null?g.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:w,tailMode:H}:(J.isBackwards=m,J.rendering=null,J.renderingStartTime=0,J.last=N,J.tail=w,J.tailMode=H)}function Tp(g,m,w){var N=m.pendingProps,H=N.revealOrder,J=N.tail;if(io(g,m,N.children,w),N=no.current,N&2)N=N&1|2,m.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=m.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&ad(g,w,m);else if(g.tag===19)ad(g,w,m);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}N&=1}if(zr(no,N),!(m.mode&1))m.memoizedState=null;else switch(H){case"forwards":for(w=m.child,H=null;w!==null;)g=w.alternate,g!==null&&ug(g)===null&&(H=w),w=w.sibling;w=H,w===null?(H=m.child,m.child=null):(H=w.sibling,w.sibling=null),_a(m,!1,H,w,J);break;case"backwards":for(w=null,H=m.child,m.child=null;H!==null;){if(g=H.alternate,g!==null&&ug(g)===null){m.child=H;break}g=H.sibling,H.sibling=w,w=H,H=g}_a(m,!0,w,null,J);break;case"together":_a(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function dh(g,m){!(m.mode&1)&&g!==null&&(g.alternate=null,m.alternate=null,m.flags|=2)}function gu(g,m,w){if(g!==null&&(m.dependencies=g.dependencies),ld|=m.lanes,!(w&m.childLanes))return null;if(g!==null&&m.child!==g.child)throw Error(t(153));if(m.child!==null){for(g=m.child,w=mh(g,g.pendingProps),m.child=w,w.return=m;g.sibling!==null;)g=g.sibling,w=w.sibling=mh(g,g.pendingProps),w.return=m;w.sibling=null}return m.child}function Cr(g,m,w){switch(m.tag){case 3:Hs(m),Cl();break;case 5:l_(m);break;case 1:Ms(m.type)&&Ss(m);break;case 4:Lp(m,m.stateNode.containerInfo);break;case 10:var N=m.type._context,H=m.memoizedProps.value;zr(vc,N._currentValue),N._currentValue=H;break;case 13:if(N=m.memoizedState,N!==null)return N.dehydrated!==null?(zr(no,no.current&1),m.flags|=128,null):w&m.child.childLanes?sd(g,m,w):(zr(no,no.current&1),g=gu(g,m,w),g!==null?g.sibling:null);zr(no,no.current&1);break;case 19:if(N=(w&m.childLanes)!==0,g.flags&128){if(N)return Tp(g,m,w);m.flags|=128}if(H=m.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),zr(no,no.current),N)break;return null;case 22:case 23:return m.lanes=0,uf(g,m,w)}return gu(g,m,w)}var A0,Np,m_,O0;A0=function(g,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Np=function(){},m_=function(g,m,w,N){var H=g.memoizedProps;if(H!==N){g=m.stateNode,ed(Io.current);var J=null;switch(w){case"input":H=sn(g,H),N=sn(g,N),J=[];break;case"select":H=A({},H,{value:void 0}),N=A({},N,{value:void 0}),J=[];break;case"textarea":H=mt(g,H),N=mt(g,N),J=[];break;default:typeof H.onClick!="function"&&typeof N.onClick=="function"&&(g.onclick=Yh)}En(w,N);var ge;w=null;for(_t in H)if(!N.hasOwnProperty(_t)&&H.hasOwnProperty(_t)&&H[_t]!=null)if(_t==="style"){var Re=H[_t];for(ge in Re)Re.hasOwnProperty(ge)&&(w||(w={}),w[ge]="")}else _t!=="dangerouslySetInnerHTML"&&_t!=="children"&&_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&_t!=="autoFocus"&&(i.hasOwnProperty(_t)?J||(J=[]):(J=J||[]).push(_t,null));for(_t in N){var Ke=N[_t];if(Re=H!=null?H[_t]:void 0,N.hasOwnProperty(_t)&&Ke!==Re&&(Ke!=null||Re!=null))if(_t==="style")if(Re){for(ge in Re)!Re.hasOwnProperty(ge)||Ke&&Ke.hasOwnProperty(ge)||(w||(w={}),w[ge]="");for(ge in Ke)Ke.hasOwnProperty(ge)&&Re[ge]!==Ke[ge]&&(w||(w={}),w[ge]=Ke[ge])}else w||(J||(J=[]),J.push(_t,w)),w=Ke;else _t==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Re=Re?Re.__html:void 0,Ke!=null&&Re!==Ke&&(J=J||[]).push(_t,Ke)):_t==="children"?typeof Ke!="string"&&typeof Ke!="number"||(J=J||[]).push(_t,""+Ke):_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&(i.hasOwnProperty(_t)?(Ke!=null&&_t==="onScroll"&&to("scroll",g),J||Re===Ke||(J=[])):(J=J||[]).push(_t,Ke))}w&&(J=J||[]).push("style",w);var _t=J;(m.updateQueue=_t)&&(m.flags|=4)}},O0=function(g,m,w,N){w!==N&&(m.flags|=4)};function nl(g,m){if(!xo)switch(g.tailMode){case"hidden":m=g.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?g.tail=null:w.sibling=null;break;case"collapsed":w=g.tail;for(var N=null;w!==null;)w.alternate!==null&&(N=w),w=w.sibling;N===null?m||g.tail===null?g.tail=null:g.tail.sibling=null:N.sibling=null}}function va(g){var m=g.alternate!==null&&g.alternate.child===g.child,w=0,N=0;if(m)for(var H=g.child;H!==null;)w|=H.lanes|H.childLanes,N|=H.subtreeFlags&14680064,N|=H.flags&14680064,H.return=g,H=H.sibling;else for(H=g.child;H!==null;)w|=H.lanes|H.childLanes,N|=H.subtreeFlags,N|=H.flags,H.return=g,H=H.sibling;return g.subtreeFlags|=N,g.childLanes=w,m}function w1(g,m,w){var N=m.pendingProps;switch(qu(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(m),null;case 1:return Ms(m.type)&&Qm(),va(m),null;case 3:return N=m.stateNode,rh(),bo(Js),bo(cs),rf(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(g===null||g.child===null)&&(sg(m)?m.flags|=4:g===null||g.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Ku!==null&&(D_(Ku),Ku=null))),Np(g,m),va(m),null;case 5:tf(m);var H=ed(Ep.current);if(w=m.type,g!==null&&m.stateNode!=null)m_(g,m,w,N,H),g.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!N){if(m.stateNode===null)throw Error(t(166));return va(m),null}if(g=ed(Io.current),sg(m)){N=m.stateNode,w=m.type;var J=m.memoizedProps;switch(N[Ul]=m,N[bl]=J,g=(m.mode&1)!==0,w){case"dialog":to("cancel",N),to("close",N);break;case"iframe":case"object":case"embed":to("load",N);break;case"video":case"audio":for(H=0;H<Xi.length;H++)to(Xi[H],N);break;case"source":to("error",N);break;case"img":case"image":case"link":to("error",N),to("load",N);break;case"details":to("toggle",N);break;case"input":Pt(N,J),to("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!J.multiple},to("invalid",N);break;case"textarea":Qt(N,J),to("invalid",N)}En(w,J),H=null;for(var ge in J)if(J.hasOwnProperty(ge)){var Re=J[ge];ge==="children"?typeof Re=="string"?N.textContent!==Re&&(J.suppressHydrationWarning!==!0&&Hl(N.textContent,Re,g),H=["children",Re]):typeof Re=="number"&&N.textContent!==""+Re&&(J.suppressHydrationWarning!==!0&&Hl(N.textContent,Re,g),H=["children",""+Re]):i.hasOwnProperty(ge)&&Re!=null&&ge==="onScroll"&&to("scroll",N)}switch(w){case"input":zt(N),un(N,J,!0);break;case"textarea":zt(N),We(N);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(N.onclick=Yh)}N=H,m.updateQueue=N,N!==null&&(m.flags|=4)}else{ge=H.nodeType===9?H:H.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=dt(w)),g==="http://www.w3.org/1999/xhtml"?w==="script"?(g=ge.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof N.is=="string"?g=ge.createElement(w,{is:N.is}):(g=ge.createElement(w),w==="select"&&(ge=g,N.multiple?ge.multiple=!0:N.size&&(ge.size=N.size))):g=ge.createElementNS(g,w),g[Ul]=m,g[bl]=N,A0(g,m,!1,!1),m.stateNode=g;e:{switch(ge=nt(w,N),w){case"dialog":to("cancel",g),to("close",g),H=N;break;case"iframe":case"object":case"embed":to("load",g),H=N;break;case"video":case"audio":for(H=0;H<Xi.length;H++)to(Xi[H],g);H=N;break;case"source":to("error",g),H=N;break;case"img":case"image":case"link":to("error",g),to("load",g),H=N;break;case"details":to("toggle",g),H=N;break;case"input":Pt(g,N),H=sn(g,N),to("invalid",g);break;case"option":H=N;break;case"select":g._wrapperState={wasMultiple:!!N.multiple},H=A({},N,{value:void 0}),to("invalid",g);break;case"textarea":Qt(g,N),H=mt(g,N),to("invalid",g);break;default:H=N}En(w,H),Re=H;for(J in Re)if(Re.hasOwnProperty(J)){var Ke=Re[J];J==="style"?bt(g,Ke):J==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Ke!=null&&X(g,Ke)):J==="children"?typeof Ke=="string"?(w!=="textarea"||Ke!=="")&&we(g,Ke):typeof Ke=="number"&&we(g,""+Ke):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?Ke!=null&&J==="onScroll"&&to("scroll",g):Ke!=null&&M(g,J,Ke,ge))}switch(w){case"input":zt(g),un(g,N,!1);break;case"textarea":zt(g),We(g);break;case"option":N.value!=null&&g.setAttribute("value",""+Rt(N.value));break;case"select":g.multiple=!!N.multiple,J=N.value,J!=null?Tt(g,!!N.multiple,J,!1):N.defaultValue!=null&&Tt(g,!!N.multiple,N.defaultValue,!0);break;default:typeof H.onClick=="function"&&(g.onclick=Yh)}switch(w){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return va(m),null;case 6:if(g&&m.stateNode!=null)O0(g,m,g.memoizedProps,N);else{if(typeof N!="string"&&m.stateNode===null)throw Error(t(166));if(w=ed(Ep.current),ed(Io.current),sg(m)){if(N=m.stateNode,w=m.memoizedProps,N[Ul]=m,(J=N.nodeValue!==w)&&(g=Ps,g!==null))switch(g.tag){case 3:Hl(N.nodeValue,w,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&Hl(N.nodeValue,w,(g.mode&1)!==0)}J&&(m.flags|=4)}else N=(w.nodeType===9?w:w.ownerDocument).createTextNode(N),N[Ul]=m,m.stateNode=N}return va(m),null;case 13:if(bo(no),N=m.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(xo&&$l!==null&&m.mode&1&&!(m.flags&128))_c(),Cl(),m.flags|=98560,J=!1;else if(J=sg(m),N!==null&&N.dehydrated!==null){if(g===null){if(!J)throw Error(t(318));if(J=m.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(t(317));J[Ul]=m}else Cl(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;va(m),J=!1}else Ku!==null&&(D_(Ku),Ku=null),J=!0;if(!J)return m.flags&65536?m:null}return m.flags&128?(m.lanes=w,m):(N=N!==null,N!==(g!==null&&g.memoizedState!==null)&&N&&(m.child.flags|=8192,m.mode&1&&(g===null||no.current&1?Ds===0&&(Ds=3):V0())),m.updateQueue!==null&&(m.flags|=4),va(m),null);case 4:return rh(),Np(g,m),g===null&&ml(m.stateNode.containerInfo),va(m),null;case 10:return ag(m.type._context),va(m),null;case 17:return Ms(m.type)&&Qm(),va(m),null;case 19:if(bo(no),J=m.memoizedState,J===null)return va(m),null;if(N=(m.flags&128)!==0,ge=J.rendering,ge===null)if(N)nl(J,!1);else{if(Ds!==0||g!==null&&g.flags&128)for(g=m.child;g!==null;){if(ge=ug(g),ge!==null){for(m.flags|=128,nl(J,!1),N=ge.updateQueue,N!==null&&(m.updateQueue=N,m.flags|=4),m.subtreeFlags=0,N=w,w=m.child;w!==null;)J=w,g=N,J.flags&=14680066,ge=J.alternate,ge===null?(J.childLanes=0,J.lanes=g,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=ge.childLanes,J.lanes=ge.lanes,J.child=ge.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=ge.memoizedProps,J.memoizedState=ge.memoizedState,J.updateQueue=ge.updateQueue,J.type=ge.type,g=ge.dependencies,J.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),w=w.sibling;return zr(no,no.current&1|2),m.child}g=g.sibling}J.tail!==null&&tn()>ff&&(m.flags|=128,N=!0,nl(J,!1),m.lanes=4194304)}else{if(!N)if(g=ug(ge),g!==null){if(m.flags|=128,N=!0,w=g.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),nl(J,!0),J.tail===null&&J.tailMode==="hidden"&&!ge.alternate&&!xo)return va(m),null}else 2*tn()-J.renderingStartTime>ff&&w!==1073741824&&(m.flags|=128,N=!0,nl(J,!1),m.lanes=4194304);J.isBackwards?(ge.sibling=m.child,m.child=ge):(w=J.last,w!==null?w.sibling=ge:m.child=ge,J.last=ge)}return J.tail!==null?(m=J.tail,J.rendering=m,J.tail=m.sibling,J.renderingStartTime=tn(),m.sibling=null,w=no.current,zr(no,N?w&1|2:w&1),m):(va(m),null);case 22:case 23:return I_(),N=m.memoizedState!==null,g!==null&&g.memoizedState!==null!==N&&(m.flags|=8192),N&&m.mode&1?Yl&1073741824&&(va(m),m.subtreeFlags&6&&(m.flags|=8192)):va(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function gy(g,m){switch(qu(m),m.tag){case 1:return Ms(m.type)&&Qm(),g=m.flags,g&65536?(m.flags=g&-65537|128,m):null;case 3:return rh(),bo(Js),bo(cs),rf(),g=m.flags,g&65536&&!(g&128)?(m.flags=g&-65537|128,m):null;case 5:return tf(m),null;case 13:if(bo(no),g=m.memoizedState,g!==null&&g.dehydrated!==null){if(m.alternate===null)throw Error(t(340));Cl()}return g=m.flags,g&65536?(m.flags=g&-65537|128,m):null;case 19:return bo(no),null;case 4:return rh(),null;case 10:return ag(m.type._context),null;case 22:case 23:return I_(),null;case 24:return null;default:return null}}var hs=!1,Di=!1,Ap=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function pu(g,m){var w=g.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(N){ns(g,m,N)}else w.current=null}function Op(g,m,w){try{w()}catch(N){ns(g,m,N)}}var __=!1;function mu(g,m){if(Yd=qc,g=ci(),Kh(g)){if("selectionStart"in g)var w={start:g.selectionStart,end:g.selectionEnd};else e:{w=(w=g.ownerDocument)&&w.defaultView||window;var N=w.getSelection&&w.getSelection();if(N&&N.rangeCount!==0){w=N.anchorNode;var H=N.anchorOffset,J=N.focusNode;N=N.focusOffset;try{w.nodeType,J.nodeType}catch{w=null;break e}var ge=0,Re=-1,Ke=-1,_t=0,Yt=0,en=g,Zt=null;t:for(;;){for(var Nn;en!==w||H!==0&&en.nodeType!==3||(Re=ge+H),en!==J||N!==0&&en.nodeType!==3||(Ke=ge+N),en.nodeType===3&&(ge+=en.nodeValue.length),(Nn=en.firstChild)!==null;)Zt=en,en=Nn;for(;;){if(en===g)break t;if(Zt===w&&++_t===H&&(Re=ge),Zt===J&&++Yt===N&&(Ke=ge),(Nn=en.nextSibling)!==null)break;en=Zt,Zt=en.parentNode}en=Nn}w=Re===-1||Ke===-1?null:{start:Re,end:Ke}}else w=null}w=w||{start:0,end:0}}else w=null;for(_l={focusedElem:g,selectionRange:w},qc=!1,Tn=m;Tn!==null;)if(m=Tn,g=m.child,(m.subtreeFlags&1028)!==0&&g!==null)g.return=m,Tn=g;else for(;Tn!==null;){m=Tn;try{var Hn=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Hn!==null){var Gn=Hn.memoizedProps,fs=Hn.memoizedState,ct=m.stateNode,Qe=ct.getSnapshotBeforeUpdate(m.elementType===m.type?Gn:Gu(m.type,Gn),fs);ct.__reactInternalSnapshotBeforeUpdate=Qe}break;case 3:var ut=m.stateNode.containerInfo;ut.nodeType===1?ut.textContent="":ut.nodeType===9&&ut.documentElement&&ut.removeChild(ut.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(cn){ns(m,m.return,cn)}if(g=m.sibling,g!==null){g.return=m.return,Tn=g;break}Tn=m.return}return Hn=__,__=!1,Hn}function _u(g,m,w){var N=m.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var H=N=N.next;do{if((H.tag&g)===g){var J=H.destroy;H.destroy=void 0,J!==void 0&&Op(m,w,J)}H=H.next}while(H!==N)}}function si(g,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&g)===g){var N=w.create;w.destroy=N()}w=w.next}while(w!==m)}}function wg(g){var m=g.ref;if(m!==null){var w=g.stateNode;switch(g.tag){case 5:g=w;break;default:g=w}typeof m=="function"?m(g):m.current=g}}function v_(g){var m=g.alternate;m!==null&&(g.alternate=null,v_(m)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(m=g.stateNode,m!==null&&(delete m[Ul],delete m[bl],delete m[yp],delete m[q],delete m[Uu])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function hh(g){return g.tag===5||g.tag===3||g.tag===4}function S1(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||hh(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function hf(g,m,w){var N=g.tag;if(N===5||N===6)g=g.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(g,m):w.insertBefore(g,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(g,w)):(m=w,m.appendChild(g)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=Yh));else if(N!==4&&(g=g.child,g!==null))for(hf(g,m,w),g=g.sibling;g!==null;)hf(g,m,w),g=g.sibling}function Sg(g,m,w){var N=g.tag;if(N===5||N===6)g=g.stateNode,m?w.insertBefore(g,m):w.appendChild(g);else if(N!==4&&(g=g.child,g!==null))for(Sg(g,m,w),g=g.sibling;g!==null;)Sg(g,m,w),g=g.sibling}var Tr=null,il=!1;function Ec(g,m,w){for(w=w.child;w!==null;)Qu(g,m,w),w=w.sibling}function Qu(g,m,w){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(da,w)}catch{}switch(w.tag){case 5:Di||pu(w,m);case 6:var N=Tr,H=il;Tr=null,Ec(g,m,w),Tr=N,il=H,Tr!==null&&(il?(g=Tr,w=w.stateNode,g.nodeType===8?g.parentNode.removeChild(w):g.removeChild(w)):Tr.removeChild(w.stateNode));break;case 18:Tr!==null&&(il?(g=Tr,w=w.stateNode,g.nodeType===8?ig(g.parentNode,w):g.nodeType===1&&ig(g,w),ii(g)):ig(Tr,w.stateNode));break;case 4:N=Tr,H=il,Tr=w.stateNode.containerInfo,il=!0,Ec(g,m,w),Tr=N,il=H;break;case 0:case 11:case 14:case 15:if(!Di&&(N=w.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){H=N=N.next;do{var J=H,ge=J.destroy;J=J.tag,ge!==void 0&&(J&2||J&4)&&Op(w,m,ge),H=H.next}while(H!==N)}Ec(g,m,w);break;case 1:if(!Di&&(pu(w,m),N=w.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=w.memoizedProps,N.state=w.memoizedState,N.componentWillUnmount()}catch(Re){ns(w,m,Re)}Ec(g,m,w);break;case 21:Ec(g,m,w);break;case 22:w.mode&1?(Di=(N=Di)||w.memoizedState!==null,Ec(g,m,w),Di=N):Ec(g,m,w);break;default:Ec(g,m,w)}}function Eg(g){var m=g.updateQueue;if(m!==null){g.updateQueue=null;var w=g.stateNode;w===null&&(w=g.stateNode=new Ap),m.forEach(function(N){var H=vy.bind(null,g,N);w.has(N)||(w.add(N),N.then(H,H))})}}function El(g,m){var w=m.deletions;if(w!==null)for(var N=0;N<w.length;N++){var H=w[N];try{var J=g,ge=m,Re=ge;e:for(;Re!==null;){switch(Re.tag){case 5:Tr=Re.stateNode,il=!1;break e;case 3:Tr=Re.stateNode.containerInfo,il=!0;break e;case 4:Tr=Re.stateNode.containerInfo,il=!0;break e}Re=Re.return}if(Tr===null)throw Error(t(160));Qu(J,ge,H),Tr=null,il=!1;var Ke=H.alternate;Ke!==null&&(Ke.return=null),H.return=null}catch(_t){ns(H,m,_t)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)b_(m,g),m=m.sibling}function b_(g,m){var w=g.alternate,N=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(El(m,g),Ta(g),N&4){try{_u(3,g,g.return),si(3,g)}catch(Gn){ns(g,g.return,Gn)}try{_u(5,g,g.return)}catch(Gn){ns(g,g.return,Gn)}}break;case 1:El(m,g),Ta(g),N&512&&w!==null&&pu(w,w.return);break;case 5:if(El(m,g),Ta(g),N&512&&w!==null&&pu(w,w.return),g.flags&32){var H=g.stateNode;try{we(H,"")}catch(Gn){ns(g,g.return,Gn)}}if(N&4&&(H=g.stateNode,H!=null)){var J=g.memoizedProps,ge=w!==null?w.memoizedProps:J,Re=g.type,Ke=g.updateQueue;if(g.updateQueue=null,Ke!==null)try{Re==="input"&&J.type==="radio"&&J.name!=null&&ei(H,J),nt(Re,ge);var _t=nt(Re,J);for(ge=0;ge<Ke.length;ge+=2){var Yt=Ke[ge],en=Ke[ge+1];Yt==="style"?bt(H,en):Yt==="dangerouslySetInnerHTML"?X(H,en):Yt==="children"?we(H,en):M(H,Yt,en,_t)}switch(Re){case"input":xn(H,J);break;case"textarea":fn(H,J);break;case"select":var Zt=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!J.multiple;var Nn=J.value;Nn!=null?Tt(H,!!J.multiple,Nn,!1):Zt!==!!J.multiple&&(J.defaultValue!=null?Tt(H,!!J.multiple,J.defaultValue,!0):Tt(H,!!J.multiple,J.multiple?[]:"",!1))}H[bl]=J}catch(Gn){ns(g,g.return,Gn)}}break;case 6:if(El(m,g),Ta(g),N&4){if(g.stateNode===null)throw Error(t(162));H=g.stateNode,J=g.memoizedProps;try{H.nodeValue=J}catch(Gn){ns(g,g.return,Gn)}}break;case 3:if(El(m,g),Ta(g),N&4&&w!==null&&w.memoizedState.isDehydrated)try{ii(m.containerInfo)}catch(Gn){ns(g,g.return,Gn)}break;case 4:El(m,g),Ta(g);break;case 13:El(m,g),Ta(g),H=g.child,H.flags&8192&&(J=H.memoizedState!==null,H.stateNode.isHidden=J,!J||H.alternate!==null&&H.alternate.memoizedState!==null||(xg=tn())),N&4&&Eg(g);break;case 22:if(Yt=w!==null&&w.memoizedState!==null,g.mode&1?(Di=(_t=Di)||Yt,El(m,g),Di=_t):El(m,g),Ta(g),N&8192){if(_t=g.memoizedState!==null,(g.stateNode.isHidden=_t)&&!Yt&&g.mode&1)for(Tn=g,Yt=g.child;Yt!==null;){for(en=Tn=Yt;Tn!==null;){switch(Zt=Tn,Nn=Zt.child,Zt.tag){case 0:case 11:case 14:case 15:_u(4,Zt,Zt.return);break;case 1:pu(Zt,Zt.return);var Hn=Zt.stateNode;if(typeof Hn.componentWillUnmount=="function"){N=Zt,w=Zt.return;try{m=N,Hn.props=m.memoizedProps,Hn.state=m.memoizedState,Hn.componentWillUnmount()}catch(Gn){ns(N,w,Gn)}}break;case 5:pu(Zt,Zt.return);break;case 22:if(Zt.memoizedState!==null){C_(en);continue}}Nn!==null?(Nn.return=Zt,Tn=Nn):C_(en)}Yt=Yt.sibling}e:for(Yt=null,en=g;;){if(en.tag===5){if(Yt===null){Yt=en;try{H=en.stateNode,_t?(J=H.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(Re=en.stateNode,Ke=en.memoizedProps.style,ge=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null,Re.style.display=ze("display",ge))}catch(Gn){ns(g,g.return,Gn)}}}else if(en.tag===6){if(Yt===null)try{en.stateNode.nodeValue=_t?"":en.memoizedProps}catch(Gn){ns(g,g.return,Gn)}}else if((en.tag!==22&&en.tag!==23||en.memoizedState===null||en===g)&&en.child!==null){en.child.return=en,en=en.child;continue}if(en===g)break e;for(;en.sibling===null;){if(en.return===null||en.return===g)break e;Yt===en&&(Yt=null),en=en.return}Yt===en&&(Yt=null),en.sibling.return=en.return,en=en.sibling}}break;case 19:El(m,g),Ta(g),N&4&&Eg(g);break;case 21:break;default:El(m,g),Ta(g)}}function Ta(g){var m=g.flags;if(m&2){try{e:{for(var w=g.return;w!==null;){if(hh(w)){var N=w;break e}w=w.return}throw Error(t(160))}switch(N.tag){case 5:var H=N.stateNode;N.flags&32&&(we(H,""),N.flags&=-33);var J=S1(g);Sg(g,J,H);break;case 3:case 4:var ge=N.stateNode.containerInfo,Re=S1(g);hf(g,Re,ge);break;default:throw Error(t(161))}}catch(Ke){ns(g,g.return,Ke)}g.flags&=-3}m&4096&&(g.flags&=-4097)}function R0(g,m,w){Tn=g,ro(g)}function ro(g,m,w){for(var N=(g.mode&1)!==0;Tn!==null;){var H=Tn,J=H.child;if(H.tag===22&&N){var ge=H.memoizedState!==null||hs;if(!ge){var Re=H.alternate,Ke=Re!==null&&Re.memoizedState!==null||Di;Re=hs;var _t=Di;if(hs=ge,(Di=Ke)&&!_t)for(Tn=H;Tn!==null;)ge=Tn,Ke=ge.child,ge.tag===22&&ge.memoizedState!==null?y_(H):Ke!==null?(Ke.return=ge,Tn=Ke):y_(H);for(;J!==null;)Tn=J,ro(J),J=J.sibling;Tn=H,hs=Re,Di=_t}oo(g)}else H.subtreeFlags&8772&&J!==null?(J.return=H,Tn=J):oo(g)}}function oo(g){for(;Tn!==null;){var m=Tn;if(m.flags&8772){var w=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Di||si(5,m);break;case 1:var N=m.stateNode;if(m.flags&4&&!Di)if(w===null)N.componentDidMount();else{var H=m.elementType===m.type?w.memoizedProps:Gu(m.type,w.memoizedProps);N.componentDidUpdate(H,w.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var J=m.updateQueue;J!==null&&lg(m,J,N);break;case 3:var ge=m.updateQueue;if(ge!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}lg(m,ge,w)}break;case 5:var Re=m.stateNode;if(w===null&&m.flags&4){w=Re;var Ke=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ke.autoFocus&&w.focus();break;case"img":Ke.src&&(w.src=Ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var _t=m.alternate;if(_t!==null){var Yt=_t.memoizedState;if(Yt!==null){var en=Yt.dehydrated;en!==null&&ii(en)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Di||m.flags&512&&wg(m)}catch(Zt){ns(m,m.return,Zt)}}if(m===g){Tn=null;break}if(w=m.sibling,w!==null){w.return=m.return,Tn=w;break}Tn=m.return}}function C_(g){for(;Tn!==null;){var m=Tn;if(m===g){Tn=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Tn=w;break}Tn=m.return}}function y_(g){for(;Tn!==null;){var m=Tn;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{si(4,m)}catch(Ke){ns(m,w,Ke)}break;case 1:var N=m.stateNode;if(typeof N.componentDidMount=="function"){var H=m.return;try{N.componentDidMount()}catch(Ke){ns(m,H,Ke)}}var J=m.return;try{wg(m)}catch(Ke){ns(m,J,Ke)}break;case 5:var ge=m.return;try{wg(m)}catch(Ke){ns(m,ge,Ke)}}}catch(Ke){ns(m,m.return,Ke)}if(m===g){Tn=null;break}var Re=m.sibling;if(Re!==null){Re.return=m.return,Tn=Re;break}Tn=m.return}}var M0=Math.ceil,w_=W.ReactCurrentDispatcher,P0=W.ReactCurrentOwner,Na=W.ReactCurrentBatchConfig,yr=0,Us=null,xs=null,ba=0,Yl=0,Lg=ws(0),Ds=0,fh=null,ld=0,gh=0,S_=0,ud=null,Aa=null,xg=0,ff=1/0,vu=null,Rp=!1,bu=null,Ll=null,E_=!1,Fr=null,L_=0,Mp=0,F0=null,Dg=-1,x_=0;function rl(){return yr&6?tn():Dg!==-1?Dg:Dg=tn()}function ph(g){return g.mode&1?yr&2&&ba!==0?ba&-ba:jl.transition!==null?(x_===0&&(x_=Om()),x_):(g=Lr,g!==0||(g=window.event,g=g===void 0?16:m0(g.type)),g):1}function Ju(g,m,w,N){if(50<Mp)throw Mp=0,F0=null,Error(t(185));Wd(g,w,N),(!(yr&2)||g!==Us)&&(g===Us&&(!(yr&2)&&(gh|=w),Ds===4&&cd(g,ba)),ia(g,N),w===1&&yr===0&&!(m.mode&1)&&(ff=tn()+500,Qd&&zu()))}function ia(g,m){var w=g.callbackNode;ay(g,m);var N=hc(g,g===Us?ba:0);if(N===0)w!==null&&It(w),g.callbackNode=null,g.callbackPriority=0;else if(m=N&-N,g.callbackPriority!==m){if(w!=null&&It(w),m===1)g.tag===0?ea(x1.bind(null,g)):Ee(x1.bind(null,g)),Hu(function(){!(yr&6)&&zu()}),w=null;else{switch(ou(N)){case 1:w=Jt;break;case 4:w=qi;break;case 16:w=Ci;break;case 536870912:w=Er;break;default:w=Ci}w=O1(w,E1.bind(null,g))}g.callbackPriority=m,g.callbackNode=w}}function E1(g,m){if(Dg=-1,x_=0,yr&6)throw Error(t(327));var w=g.callbackNode;if(Lc()&&g.callbackNode!==w)return null;var N=hc(g,g===Us?ba:0);if(N===0)return null;if(N&30||N&g.expiredLanes||m)m=k_(g,N);else{m=N;var H=yr;yr|=2;var J=I1();(Us!==g||ba!==m)&&(vu=null,ff=tn()+500,pf(g,m));do try{Cu();break}catch(Re){D1(g,Re)}while(1);eh(),w_.current=J,yr=H,xs!==null?m=0:(Us=null,ba=0,m=Ds)}if(m!==0){if(m===2&&(H=lp(g),H!==0&&(N=H,m=B0(g,H))),m===1)throw w=fh,pf(g,0),cd(g,N),ia(g,tn()),w;if(m===6)cd(g,N);else{if(H=g.current.alternate,!(N&30)&&!L1(H)&&(m=k_(g,N),m===2&&(J=lp(g),J!==0&&(N=J,m=B0(g,J))),m===1))throw w=fh,pf(g,0),cd(g,N),ia(g,tn()),w;switch(g.finishedWork=H,g.finishedLanes=N,m){case 0:case 1:throw Error(t(345));case 2:mf(g,Aa,vu);break;case 3:if(cd(g,N),(N&130023424)===N&&(m=xg+500-tn(),10<m)){if(hc(g,0)!==0)break;if(H=g.suspendedLanes,(H&N)!==N){rl(),g.pingedLanes|=g.suspendedLanes&H;break}g.timeoutHandle=vl(mf.bind(null,g,Aa,vu),m);break}mf(g,Aa,vu);break;case 4:if(cd(g,N),(N&4194240)===N)break;for(m=g.eventTimes,H=-1;0<N;){var ge=31-Pu(N);J=1<<ge,ge=m[ge],ge>H&&(H=ge),N&=~J}if(N=H,N=tn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*M0(N/1960))-N,10<N){g.timeoutHandle=vl(mf.bind(null,g,Aa,vu),N);break}mf(g,Aa,vu);break;case 5:mf(g,Aa,vu);break;default:throw Error(t(329))}}}return ia(g,tn()),g.callbackNode===w?E1.bind(null,g):null}function B0(g,m){var w=ud;return g.current.memoizedState.isDehydrated&&(pf(g,m).flags|=256),g=k_(g,m),g!==2&&(m=Aa,Aa=w,m!==null&&D_(m)),g}function D_(g){Aa===null?Aa=g:Aa.push.apply(Aa,g)}function L1(g){for(var m=g;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var N=0;N<w.length;N++){var H=w[N],J=H.getSnapshot;H=H.value;try{if(!ke(J(),H))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===g)break;for(;m.sibling===null;){if(m.return===null||m.return===g)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function cd(g,m){for(m&=~S_,m&=~gh,g.suspendedLanes|=m,g.pingedLanes&=~m,g=g.expirationTimes;0<m;){var w=31-Pu(m),N=1<<w;g[w]=-1,m&=~N}}function x1(g){if(yr&6)throw Error(t(327));Lc();var m=hc(g,0);if(!(m&1))return ia(g,tn()),null;var w=k_(g,m);if(g.tag!==0&&w===2){var N=lp(g);N!==0&&(m=N,w=B0(g,N))}if(w===1)throw w=fh,pf(g,0),cd(g,m),ia(g,tn()),w;if(w===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=m,mf(g,Aa,vu),ia(g,tn()),null}function W0(g,m){var w=yr;yr|=1;try{return g(m)}finally{yr=w,yr===0&&(ff=tn()+500,Qd&&zu())}}function gf(g){Fr!==null&&Fr.tag===0&&!(yr&6)&&Lc();var m=yr;yr|=1;var w=Na.transition,N=Lr;try{if(Na.transition=null,Lr=1,g)return g()}finally{Lr=N,Na.transition=w,yr=m,!(yr&6)&&zu()}}function I_(){Yl=Lg.current,bo(Lg)}function pf(g,m){g.finishedWork=null,g.finishedLanes=0;var w=g.timeoutHandle;if(w!==-1&&(g.timeoutHandle=-1,uu(w)),xs!==null)for(w=xs.return;w!==null;){var N=w;switch(qu(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Qm();break;case 3:rh(),bo(Js),bo(cs),rf();break;case 5:tf(N);break;case 4:rh();break;case 13:bo(no);break;case 19:bo(no);break;case 10:ag(N.type._context);break;case 22:case 23:I_()}w=w.return}if(Us=g,xs=g=mh(g.current,null),ba=Yl=m,Ds=0,fh=null,S_=gh=ld=0,Aa=ud=null,Yo!==null){for(m=0;m<Yo.length;m++)if(w=Yo[m],N=w.interleaved,N!==null){w.interleaved=null;var H=N.next,J=w.pending;if(J!==null){var ge=J.next;J.next=H,N.next=ge}w.pending=N}Yo=null}return g}function D1(g,m){do{var w=xs;try{if(eh(),oh.current=Ia,u_){for(var N=zo.memoizedState;N!==null;){var H=N.queue;H!==null&&(H.pending=null),N=N.next}u_=!1}if(td=0,Ls=yo=zo=null,cg=!1,Kr=0,P0.current=null,w===null||w.return===null){Ds=1,fh=m,xs=null;break}e:{var J=g,ge=w.return,Re=w,Ke=m;if(m=ba,Re.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var _t=Ke,Yt=Re,en=Yt.tag;if(!(Yt.mode&1)&&(en===0||en===11||en===15)){var Zt=Yt.alternate;Zt?(Yt.updateQueue=Zt.updateQueue,Yt.memoizedState=Zt.memoizedState,Yt.lanes=Zt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var Nn=kp(ge);if(Nn!==null){Nn.flags&=-257,uh(Nn,ge,Re,J,m),Nn.mode&1&&k0(J,_t,m),m=Nn,Ke=_t;var Hn=m.updateQueue;if(Hn===null){var Gn=new Set;Gn.add(Ke),m.updateQueue=Gn}else Hn.add(Ke);break e}else{if(!(m&1)){k0(J,_t,m),V0();break e}Ke=Error(t(426))}}else if(xo&&Re.mode&1){var fs=kp(ge);if(fs!==null){!(fs.flags&65536)&&(fs.flags|=256),uh(fs,ge,Re,J,m),pa(od(Ke,Re));break e}}J=Ke=od(Ke,Re),Ds!==4&&(Ds=2),ud===null?ud=[J]:ud.push(J),J=ge;do{switch(J.tag){case 3:J.flags|=65536,m&=-m,J.lanes|=m;var ct=Cg(J,Ke,m);wp(J,ct);break e;case 1:Re=Ke;var Qe=J.type,ut=J.stateNode;if(!(J.flags&128)&&(typeof Qe.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Ll===null||!Ll.has(ut)))){J.flags|=65536,m&=-m,J.lanes|=m;var cn=lh(J,Re,m);wp(J,cn);break e}}J=J.return}while(J!==null)}T1(w)}catch(Zn){m=Zn,xs===w&&w!==null&&(xs=w=w.return);continue}break}while(1)}function I1(){var g=w_.current;return w_.current=Ia,g===null?Ia:g}function V0(){(Ds===0||Ds===3||Ds===2)&&(Ds=4),Us===null||!(ld&268435455)&&!(gh&268435455)||cd(Us,ba)}function k_(g,m){var w=yr;yr|=2;var N=I1();(Us!==g||ba!==m)&&(vu=null,pf(g,m));do try{py();break}catch(H){D1(g,H)}while(1);if(eh(),yr=w,w_.current=N,xs!==null)throw Error(t(261));return Us=null,ba=0,Ds}function py(){for(;xs!==null;)k1(xs)}function Cu(){for(;xs!==null&&!Vt();)k1(xs)}function k1(g){var m=A1(g.alternate,g,Yl);g.memoizedProps=g.pendingProps,m===null?T1(g):xs=m,P0.current=null}function T1(g){var m=g;do{var w=m.alternate;if(g=m.return,m.flags&32768){if(w=gy(w,m),w!==null){w.flags&=32767,xs=w;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Ds=6,xs=null;return}}else if(w=w1(w,m,Yl),w!==null){xs=w;return}if(m=m.sibling,m!==null){xs=m;return}xs=m=g}while(m!==null);Ds===0&&(Ds=5)}function mf(g,m,w){var N=Lr,H=Na.transition;try{Na.transition=null,Lr=1,N1(g,m,w,N)}finally{Na.transition=H,Lr=N}return null}function N1(g,m,w,N){do Lc();while(Fr!==null);if(yr&6)throw Error(t(327));w=g.finishedWork;var H=g.finishedLanes;if(w===null)return null;if(g.finishedWork=null,g.finishedLanes=0,w===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var J=w.lanes|w.childLanes;if(h0(g,J),g===Us&&(xs=Us=null,ba=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||E_||(E_=!0,O1(Ci,function(){return Lc(),null})),J=(w.flags&15990)!==0,w.subtreeFlags&15990||J){J=Na.transition,Na.transition=null;var ge=Lr;Lr=1;var Re=yr;yr|=4,P0.current=null,mu(g,w),b_(w,g),w0(_l),qc=!!Yd,_l=Yd=null,g.current=w,R0(w),pn(),yr=Re,Lr=ge,Na.transition=J}else g.current=w;if(E_&&(E_=!1,Fr=g,L_=H),J=g.pendingLanes,J===0&&(Ll=null),ap(w.stateNode),ia(g,tn()),m!==null)for(N=g.onRecoverableError,w=0;w<m.length;w++)H=m[w],N(H.value,{componentStack:H.stack,digest:H.digest});if(Rp)throw Rp=!1,g=bu,bu=null,g;return L_&1&&g.tag!==0&&Lc(),J=g.pendingLanes,J&1?g===F0?Mp++:(Mp=0,F0=g):Mp=0,zu(),null}function Lc(){if(Fr!==null){var g=ou(L_),m=Na.transition,w=Lr;try{if(Na.transition=null,Lr=16>g?16:g,Fr===null)var N=!1;else{if(g=Fr,Fr=null,L_=0,yr&6)throw Error(t(331));var H=yr;for(yr|=4,Tn=g.current;Tn!==null;){var J=Tn,ge=J.child;if(Tn.flags&16){var Re=J.deletions;if(Re!==null){for(var Ke=0;Ke<Re.length;Ke++){var _t=Re[Ke];for(Tn=_t;Tn!==null;){var Yt=Tn;switch(Yt.tag){case 0:case 11:case 15:_u(8,Yt,J)}var en=Yt.child;if(en!==null)en.return=Yt,Tn=en;else for(;Tn!==null;){Yt=Tn;var Zt=Yt.sibling,Nn=Yt.return;if(v_(Yt),Yt===_t){Tn=null;break}if(Zt!==null){Zt.return=Nn,Tn=Zt;break}Tn=Nn}}}var Hn=J.alternate;if(Hn!==null){var Gn=Hn.child;if(Gn!==null){Hn.child=null;do{var fs=Gn.sibling;Gn.sibling=null,Gn=fs}while(Gn!==null)}}Tn=J}}if(J.subtreeFlags&2064&&ge!==null)ge.return=J,Tn=ge;else e:for(;Tn!==null;){if(J=Tn,J.flags&2048)switch(J.tag){case 0:case 11:case 15:_u(9,J,J.return)}var ct=J.sibling;if(ct!==null){ct.return=J.return,Tn=ct;break e}Tn=J.return}}var Qe=g.current;for(Tn=Qe;Tn!==null;){ge=Tn;var ut=ge.child;if(ge.subtreeFlags&2064&&ut!==null)ut.return=ge,Tn=ut;else e:for(ge=Qe;Tn!==null;){if(Re=Tn,Re.flags&2048)try{switch(Re.tag){case 0:case 11:case 15:si(9,Re)}}catch(Zn){ns(Re,Re.return,Zn)}if(Re===ge){Tn=null;break e}var cn=Re.sibling;if(cn!==null){cn.return=Re.return,Tn=cn;break e}Tn=Re.return}}if(yr=H,zu(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(da,g)}catch{}N=!0}return N}finally{Lr=w,Na.transition=m}}return!1}function T_(g,m,w){m=od(w,m),m=Cg(g,m,1),g=Bs(g,m,1),m=rl(),g!==null&&(Wd(g,1,m),ia(g,m))}function ns(g,m,w){if(g.tag===3)T_(g,g,w);else for(;m!==null;){if(m.tag===3){T_(m,g,w);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Ll===null||!Ll.has(N))){g=od(w,g),g=lh(m,g,1),m=Bs(m,g,1),g=rl(),m!==null&&(Wd(m,1,g),ia(m,g));break}}m=m.return}}function my(g,m,w){var N=g.pingCache;N!==null&&N.delete(m),m=rl(),g.pingedLanes|=g.suspendedLanes&w,Us===g&&(ba&w)===w&&(Ds===4||Ds===3&&(ba&130023424)===ba&&500>tn()-xg?pf(g,0):S_|=w),ia(g,m)}function N_(g,m){m===0&&(g.mode&1?(m=Am,Am<<=1,!(Am&130023424)&&(Am=4194304)):m=1);var w=rl();g=yl(g,m),g!==null&&(Wd(g,m,w),ia(g,w))}function _y(g){var m=g.memoizedState,w=0;m!==null&&(w=m.retryLane),N_(g,w)}function vy(g,m){var w=0;switch(g.tag){case 13:var N=g.stateNode,H=g.memoizedState;H!==null&&(w=H.retryLane);break;case 19:N=g.stateNode;break;default:throw Error(t(314))}N!==null&&N.delete(m),N_(g,w)}var A1;A1=function(g,m,w){if(g!==null)if(g.memoizedProps!==m.pendingProps||Js.current)Vs=!0;else{if(!(g.lanes&w)&&!(m.flags&128))return Vs=!1,Cr(g,m,w);Vs=!!(g.flags&131072)}else Vs=!1,xo&&m.flags&1048576&&b1(m,t_,m.index);switch(m.lanes=0,m.tag){case 2:var N=m.type;dh(g,m),g=m.pendingProps;var H=Qc(m,cs.current);bc(m,w),H=dg(null,m,N,g,H,w);var J=hg();return m.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ms(N)?(J=!0,Ss(m)):J=!1,m.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Yu(m),H.updater=o_,m.stateNode=H,H._reactInternals=m,Ws(m,N,g,w),m=N0(null,m,N,!0,J,w)):(m.tag=0,xo&&J&&Qa(m),io(null,m,H,w),m=m.child),m;case 16:N=m.elementType;e:{switch(dh(g,m),g=m.pendingProps,H=N._init,N=H(N._payload),m.type=N,H=m.tag=_f(N),g=Gu(N,g),H){case 0:m=yg(null,m,N,g,w);break e;case 1:m=T0(null,m,N,g,w);break e;case 11:m=Gl(null,m,N,g,w);break e;case 14:m=na(null,m,N,Gu(N.type,g),w);break e}throw Error(t(306,N,""))}return m;case 0:return N=m.type,H=m.pendingProps,H=m.elementType===N?H:Gu(N,H),yg(g,m,N,H,w);case 1:return N=m.type,H=m.pendingProps,H=m.elementType===N?H:Gu(N,H),T0(g,m,N,H,w);case 3:e:{if(Hs(m),g===null)throw Error(t(387));N=m.pendingProps,J=m.memoizedState,H=J.element,i_(g,m),Sp(m,N,null,w);var ge=m.memoizedState;if(N=ge.element,J.isDehydrated)if(J={element:N,isDehydrated:!1,cache:ge.cache,pendingSuspenseBoundaries:ge.pendingSuspenseBoundaries,transitions:ge.transitions},m.updateQueue.baseState=J,m.memoizedState=J,m.flags&256){H=od(Error(t(423)),m),m=Zu(g,m,N,w,H);break e}else if(N!==H){H=od(Error(t(424)),m),m=Zu(g,m,N,w,H);break e}else for($l=Xd(m.stateNode.containerInfo.firstChild),Ps=m,xo=!0,Ku=null,w=Cc(m,null,N,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Cl(),N===H){m=gu(g,m,w);break e}io(g,m,N,w)}m=m.child}return m;case 5:return l_(m),g===null&&Po(m),N=m.type,H=m.pendingProps,J=g!==null?g.memoizedProps:null,ge=H.children,Zd(N,H)?ge=null:J!==null&&Zd(N,J)&&(m.flags|=32),cf(g,m),io(g,m,ge,w),m.child;case 6:return g===null&&Po(m),null;case 13:return sd(g,m,w);case 4:return Lp(m,m.stateNode.containerInfo),N=m.pendingProps,g===null?m.child=ql(m,null,N,w):io(g,m,N,w),m.child;case 11:return N=m.type,H=m.pendingProps,H=m.elementType===N?H:Gu(N,H),Gl(g,m,N,H,w);case 7:return io(g,m,m.pendingProps,w),m.child;case 8:return io(g,m,m.pendingProps.children,w),m.child;case 12:return io(g,m,m.pendingProps.children,w),m.child;case 10:e:{if(N=m.type._context,H=m.pendingProps,J=m.memoizedProps,ge=H.value,zr(vc,N._currentValue),N._currentValue=ge,J!==null)if(ke(J.value,ge)){if(J.children===H.children&&!Js.current){m=gu(g,m,w);break e}}else for(J=m.child,J!==null&&(J.return=m);J!==null;){var Re=J.dependencies;if(Re!==null){ge=J.child;for(var Ke=Re.firstContext;Ke!==null;){if(Ke.context===N){if(J.tag===1){Ke=Fs(-1,w&-w),Ke.tag=2;var _t=J.updateQueue;if(_t!==null){_t=_t.shared;var Yt=_t.pending;Yt===null?Ke.next=Ke:(Ke.next=Yt.next,Yt.next=Ke),_t.pending=Ke}}J.lanes|=w,Ke=J.alternate,Ke!==null&&(Ke.lanes|=w),ds(J.return,w,m),Re.lanes|=w;break}Ke=Ke.next}}else if(J.tag===10)ge=J.type===m.type?null:J.child;else if(J.tag===18){if(ge=J.return,ge===null)throw Error(t(341));ge.lanes|=w,Re=ge.alternate,Re!==null&&(Re.lanes|=w),ds(ge,w,m),ge=J.sibling}else ge=J.child;if(ge!==null)ge.return=J;else for(ge=J;ge!==null;){if(ge===m){ge=null;break}if(J=ge.sibling,J!==null){J.return=ge.return,ge=J;break}ge=ge.return}J=ge}io(g,m,H.children,w),m=m.child}return m;case 9:return H=m.type,N=m.pendingProps.children,bc(m,w),H=Es(H),N=N(H),m.flags|=1,io(g,m,N,w),m.child;case 14:return N=m.type,H=Gu(N,m.pendingProps),H=Gu(N.type,H),na(g,m,N,H,w);case 15:return p_(g,m,m.type,m.pendingProps,w);case 17:return N=m.type,H=m.pendingProps,H=m.elementType===N?H:Gu(N,H),dh(g,m),m.tag=1,Ms(N)?(g=!0,Ss(m)):g=!1,bc(m,w),s_(m,N,H),Ws(m,N,H,w),N0(null,m,N,!0,g,w);case 19:return Tp(g,m,w);case 22:return uf(g,m,w)}throw Error(t(156,m.tag))};function O1(g,m){return ht(g,m)}function by(g,m,w,N){this.tag=g,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xl(g,m,w,N){return new by(g,m,w,N)}function H0(g){return g=g.prototype,!(!g||!g.isReactComponent)}function _f(g){if(typeof g=="function")return H0(g)?1:0;if(g!=null){if(g=g.$$typeof,g===D)return 11;if(g===j)return 14}return 2}function mh(g,m){var w=g.alternate;return w===null?(w=xl(g.tag,m,g.key,g.mode),w.elementType=g.elementType,w.type=g.type,w.stateNode=g.stateNode,w.alternate=g,g.alternate=w):(w.pendingProps=m,w.type=g.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=g.flags&14680064,w.childLanes=g.childLanes,w.lanes=g.lanes,w.child=g.child,w.memoizedProps=g.memoizedProps,w.memoizedState=g.memoizedState,w.updateQueue=g.updateQueue,m=g.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=g.sibling,w.index=g.index,w.ref=g.ref,w}function A_(g,m,w,N,H,J){var ge=2;if(N=g,typeof g=="function")H0(g)&&(ge=1);else if(typeof g=="string")ge=5;else e:switch(g){case z:return vf(w.children,H,J,m);case $:ge=8,H|=8;break;case G:return g=xl(12,w,m,H|2),g.elementType=G,g.lanes=J,g;case O:return g=xl(13,w,m,H),g.elementType=O,g.lanes=J,g;case V:return g=xl(19,w,m,H),g.elementType=V,g.lanes=J,g;case re:return O_(w,H,J,m);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case Y:ge=10;break e;case I:ge=9;break e;case D:ge=11;break e;case j:ge=14;break e;case ne:ge=16,N=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return m=xl(ge,w,m,H),m.elementType=g,m.type=N,m.lanes=J,m}function vf(g,m,w,N){return g=xl(7,g,N,m),g.lanes=w,g}function O_(g,m,w,N){return g=xl(22,g,N,m),g.elementType=re,g.lanes=w,g.stateNode={isHidden:!1},g}function U0(g,m,w){return g=xl(6,g,null,m),g.lanes=w,g}function z0(g,m,w){return m=xl(4,g.children!==null?g.children:[],g.key,m),m.lanes=w,m.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},m}function Cy(g,m,w,N,H){this.tag=m,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bh(0),this.expirationTimes=Bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bh(0),this.identifierPrefix=N,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function $0(g,m,w,N,H,J,ge,Re,Ke){return g=new Cy(g,m,w,Re,Ke),m===1?(m=1,J===!0&&(m|=8)):m=0,J=xl(3,null,null,m),g.current=J,J.stateNode=g,J.memoizedState={element:N,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(J),g}function yy(g,m,w){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:N==null?null:""+N,children:g,containerInfo:m,implementation:w}}function R1(g){if(!g)return mc;g=g._reactInternals;e:{if(K(g)!==g||g.tag!==1)throw Error(t(170));var m=g;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ms(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(g.tag===1){var w=g.type;if(Ms(w))return _1(g,w,m)}return m}function M1(g,m,w,N,H,J,ge,Re,Ke){return g=$0(w,N,!0,g,H,J,ge,Re,Ke),g.context=R1(null),w=g.current,N=rl(),H=ph(w),J=Fs(N,H),J.callback=m??null,Bs(w,J,H),g.current.lanes=H,Wd(g,H,N),ia(g,N),g}function R_(g,m,w,N){var H=m.current,J=rl(),ge=ph(H);return w=R1(w),m.context===null?m.context=w:m.pendingContext=w,m=Fs(J,ge),m.payload={element:g},N=N===void 0?null:N,N!==null&&(m.callback=N),g=Bs(H,m,ge),g!==null&&(Ju(g,H,ge,J),hu(g,H,ge)),ge}function Ig(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function j0(g,m){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var w=g.retryLane;g.retryLane=w!==0&&w<m?w:m}}function q0(g,m){j0(g,m),(g=g.alternate)&&j0(g,m)}function wy(){return null}var M_=typeof reportError=="function"?reportError:function(g){console.error(g)};function Pp(g){this._internalRoot=g}P_.prototype.render=Pp.prototype.render=function(g){var m=this._internalRoot;if(m===null)throw Error(t(409));R_(g,m,null,null)},P_.prototype.unmount=Pp.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var m=g.containerInfo;gf(function(){R_(null,g,null,null)}),m[Rs]=null}};function P_(g){this._internalRoot=g}P_.prototype.unstable_scheduleHydration=function(g){if(g){var m=up();g={blockedOn:null,target:g,priority:m};for(var w=0;w<Ud.length&&m!==0&&m<Ud[w].priority;w++);Ud.splice(w,0,g),w===0&&g0(g)}};function K0(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function F_(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function P1(){}function _h(g,m,w,N,H){if(H){if(typeof N=="function"){var J=N;N=function(){var _t=Ig(ge);J.call(_t)}}var ge=M1(m,N,g,0,null,!1,!1,"",P1);return g._reactRootContainer=ge,g[Rs]=ge.current,ml(g.nodeType===8?g.parentNode:g),gf(),ge}for(;H=g.lastChild;)g.removeChild(H);if(typeof N=="function"){var Re=N;N=function(){var _t=Ig(Ke);Re.call(_t)}}var Ke=$0(g,0,!1,null,null,!1,!1,"",P1);return g._reactRootContainer=Ke,g[Rs]=Ke.current,ml(g.nodeType===8?g.parentNode:g),gf(function(){R_(m,Ke,w,N)}),Ke}function B_(g,m,w,N,H){var J=w._reactRootContainer;if(J){var ge=J;if(typeof H=="function"){var Re=H;H=function(){var Ke=Ig(ge);Re.call(Ke)}}R_(m,ge,g,H)}else ge=_h(w,m,g,H,N);return Ig(ge)}Rm=function(g){switch(g.tag){case 3:var m=g.stateNode;if(m.current.memoizedState.isDehydrated){var w=Bd(m.pendingLanes);w!==0&&(fc(m,w|1),ia(m,tn()),!(yr&6)&&(ff=tn()+500,zu()))}break;case 13:gf(function(){var N=yl(g,1);if(N!==null){var H=rl();Ju(N,g,1,H)}}),q0(g,1)}},Yf=function(g){if(g.tag===13){var m=yl(g,134217728);if(m!==null){var w=rl();Ju(m,g,134217728,w)}q0(g,134217728)}},f0=function(g){if(g.tag===13){var m=ph(g),w=yl(g,m);if(w!==null){var N=rl();Ju(w,g,m,N)}q0(g,m)}},up=function(){return Lr},Mm=function(g,m){var w=Lr;try{return Lr=g,m()}finally{Lr=w}},bi=function(g,m,w){switch(m){case"input":if(xn(g,w),m=w.name,w.type==="radio"&&m!=null){for(w=g;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var N=w[m];if(N!==g&&N.form===g.form){var H=Xm(N);if(!H)throw Error(t(90));wt(N),xn(N,H)}}}break;case"textarea":fn(g,w);break;case"select":m=w.value,m!=null&&Tt(g,!!w.multiple,m,!1)}},Ct=W0,as=gf;var W_={usingClientEntryPoint:!1,Events:[Ei,an,Xm,ru,lr,W0]},Fp={findFiberByHostInstance:zl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Sy={bundleType:Fp.bundleType,version:Fp.version,rendererPackageName:Fp.rendererPackageName,rendererConfig:Fp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=Se(g),g===null?null:g.stateNode},findFiberByHostInstance:Fp.findFiberByHostInstance||wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var V_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!V_.isDisabled&&V_.supportsFiber)try{da=V_.inject(Sy),Cs=V_}catch{}}return bh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W_,bh.createPortal=function(g,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K0(m))throw Error(t(200));return yy(g,m,null,w)},bh.createRoot=function(g,m){if(!K0(g))throw Error(t(299));var w=!1,N="",H=M_;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(H=m.onRecoverableError)),m=$0(g,1,!1,null,null,w,!1,N,H),g[Rs]=m.current,ml(g.nodeType===8?g.parentNode:g),new Pp(m)},bh.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var m=g._reactInternals;if(m===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=Se(m),g=g===null?null:g.stateNode,g},bh.flushSync=function(g){return gf(g)},bh.hydrate=function(g,m,w){if(!F_(m))throw Error(t(200));return B_(null,g,m,!0,w)},bh.hydrateRoot=function(g,m,w){if(!K0(g))throw Error(t(405));var N=w!=null&&w.hydratedSources||null,H=!1,J="",ge=M_;if(w!=null&&(w.unstable_strictMode===!0&&(H=!0),w.identifierPrefix!==void 0&&(J=w.identifierPrefix),w.onRecoverableError!==void 0&&(ge=w.onRecoverableError)),m=M1(m,null,g,1,w??null,H,!1,J,ge),g[Rs]=m.current,ml(g),N)for(g=0;g<N.length;g++)w=N[g],H=w._getVersion,H=H(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,H]:m.mutableSourceEagerHydrationData.push(w,H);return new P_(m)},bh.render=function(g,m,w){if(!F_(m))throw Error(t(200));return B_(null,g,m,!1,w)},bh.unmountComponentAtNode=function(g){if(!F_(g))throw Error(t(40));return g._reactRootContainer?(gf(function(){B_(null,null,g,!1,function(){g._reactRootContainer=null,g[Rs]=null})}),!0):!1},bh.unstable_batchedUpdates=W0,bh.unstable_renderSubtreeIntoContainer=function(g,m,w,N){if(!F_(w))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return B_(g,m,w,!1,N)},bh.version="18.2.0-next-9e3b772b8-20220608",bh}var Fq;function ine(){if(Fq)return c3.exports;Fq=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),c3.exports=hfe(),c3.exports}var Bq;function ffe(){if(Bq)return eA;Bq=1;var r=ine();return eA.createRoot=r.createRoot,eA.hydrateRoot=r.hydrateRoot,eA}var gfe=ffe();const pfe=xm(gfe),Sv={},mfe=Object.freeze(Object.defineProperty({__proto__:null,default:Sv},Symbol.toStringTag,{value:"Module"}));var Wq={},Vq;function _fe(){if(Vq)return Wq;Vq=1;var r;return function(e){(function(t){var n=typeof ku=="object"?ku:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=o(e);typeof n.Reflect>"u"?n.Reflect=e:i=o(n.Reflect,i),t(i);function o(s,a){return function(l,u){typeof s[l]!="function"&&Object.defineProperty(s,l,{configurable:!0,writable:!0,value:u}),a&&a(l,u)}}})(function(t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",o=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!a&&!l,d={create:a?function(){return fn(Object.create(null))}:l?function(){return fn({__proto__:null})}:function(){return fn({})},has:u?function(We,dt){return n.call(We,dt)}:function(We,dt){return dt in We},get:u?function(We,dt){return n.call(We,dt)?We[dt]:void 0}:function(We,dt){return We[dt]}},h=Object.getPrototypeOf(Function),p=typeof Sv=="object"&&{NVM_INC:"/Users/hayden/.nvm/versions/node/v16.20.0/include/node",MANPATH:"/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Applications/Wireshark.app/Contents/Resources/share/man:/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",INIT_CWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.aliyun.com/homebrew/homebrew-bottles",npm_config_metrics_registry:"https://registry.npmmirror.com/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/",npm_config_global_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",GOBIN:"/usr/local/go/bin",TERM_PROGRAM_VERSION:"1.83.1",ZDOTDIR:"/Users/hayden",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_home:"https://npm.taobao.org",npm_config_registry:"https://registry.npmmirror.com/",npm_config_local_prefix:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",ZSH:"/Users/hayden/.oh-my-zsh",NVM_DIR:"/Users/hayden/.nvm",USER:"hayden",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/hayden/.nvm/versions/node/v16.20.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.deqApZuelA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:./node_modules/.bin:./node_modules/.bin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS",npm_package_json:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/package.json",LaunchInstanceID:"186383FA-0E30-4AF9-AE3C-1A884F1F8B58",npm_config_userconfig:"/Users/hayden/.npmrc",npm_config_init_module:"/Users/hayden/.npm-init.js",USER_ZDOTDIR:"/Users/hayden",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"preview",LANG:"en_US.UTF-8",NODE_PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules:/Users/hayden/Desktop/dt-works/node_modules:/Users/hayden/Desktop/node_modules:/Users/hayden/node_modules:/Users/node_modules:/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/node_modules",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_electron_mirror:"https://npmmirror.com/mirrors/electron/",npm_config_node_gyp:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"3",HOME:"/Users/hayden",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",GOROOT:"/usr/local/go",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/hayden/.npm",LESS:"-R",LOGNAME:"hayden",npm_lifecycle_script:"tsc && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/vscode-git-f424a81e89.sock",NVM_BIN:"/Users/hayden/.nvm/versions/node/v16.20.0/bin",npm_config_user_agent:"npm/8.19.4 node/v16.20.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",SECURITYSESSIONID:"186a6",npm_node_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",npm_config_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",COLORTERM:"truecolor",NODE_ENV:"production"}&&{NVM_INC:"/Users/hayden/.nvm/versions/node/v16.20.0/include/node",MANPATH:"/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Applications/Wireshark.app/Contents/Resources/share/man:/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",INIT_CWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.aliyun.com/homebrew/homebrew-bottles",npm_config_metrics_registry:"https://registry.npmmirror.com/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/",npm_config_global_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",GOBIN:"/usr/local/go/bin",TERM_PROGRAM_VERSION:"1.83.1",ZDOTDIR:"/Users/hayden",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_home:"https://npm.taobao.org",npm_config_registry:"https://registry.npmmirror.com/",npm_config_local_prefix:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",ZSH:"/Users/hayden/.oh-my-zsh",NVM_DIR:"/Users/hayden/.nvm",USER:"hayden",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/hayden/.nvm/versions/node/v16.20.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.deqApZuelA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:./node_modules/.bin:./node_modules/.bin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS",npm_package_json:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/package.json",LaunchInstanceID:"186383FA-0E30-4AF9-AE3C-1A884F1F8B58",npm_config_userconfig:"/Users/hayden/.npmrc",npm_config_init_module:"/Users/hayden/.npm-init.js",USER_ZDOTDIR:"/Users/hayden",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"preview",LANG:"en_US.UTF-8",NODE_PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules:/Users/hayden/Desktop/dt-works/node_modules:/Users/hayden/Desktop/node_modules:/Users/hayden/node_modules:/Users/node_modules:/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/node_modules",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_electron_mirror:"https://npmmirror.com/mirrors/electron/",npm_config_node_gyp:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"3",HOME:"/Users/hayden",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",GOROOT:"/usr/local/go",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/hayden/.npm",LESS:"-R",LOGNAME:"hayden",npm_lifecycle_script:"tsc && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/vscode-git-f424a81e89.sock",NVM_BIN:"/Users/hayden/.nvm/versions/node/v16.20.0/bin",npm_config_user_agent:"npm/8.19.4 node/v16.20.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",SECURITYSESSIONID:"186a6",npm_node_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",npm_config_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",COLORTERM:"truecolor",NODE_ENV:"production"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",_=!p&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Tt(),C=!p&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:mt(),S=!p&&typeof WeakMap=="function"?WeakMap:Qt(),x=new S;function T(We,dt,oe,U){if(_e(oe)){if(!zt(We))throw new TypeError;if(!dn(dt))throw new TypeError;return I(We,dt)}else{if(!zt(We))throw new TypeError;if(!He(dt))throw new TypeError;if(!He(U)&&!_e(U)&&!de(U))throw new TypeError;return de(U)&&(U=void 0),oe=xt(oe),D(We,dt,oe,U)}}t("decorate",T);function k(We,dt){function oe(U,X){if(!He(U))throw new TypeError;if(!_e(X)&&!sn(X))throw new TypeError;se(We,dt,U,X)}return oe}t("metadata",k);function M(We,dt,oe,U){if(!He(oe))throw new TypeError;return _e(U)||(U=xt(U)),se(We,dt,oe,U)}t("defineMetadata",M);function W(We,dt,oe){if(!He(dt))throw new TypeError;return _e(oe)||(oe=xt(oe)),V(We,dt,oe)}t("hasMetadata",W);function F(We,dt,oe){if(!He(dt))throw new TypeError;return _e(oe)||(oe=xt(oe)),j(We,dt,oe)}t("hasOwnMetadata",F);function Q(We,dt,oe){if(!He(dt))throw new TypeError;return _e(oe)||(oe=xt(oe)),ne(We,dt,oe)}t("getMetadata",Q);function z(We,dt,oe){if(!He(dt))throw new TypeError;return _e(oe)||(oe=xt(oe)),re(We,dt,oe)}t("getOwnMetadata",z);function $(We,dt){if(!He(We))throw new TypeError;return _e(dt)||(dt=xt(dt)),ie(We,dt)}t("getMetadataKeys",$);function G(We,dt){if(!He(We))throw new TypeError;return _e(dt)||(dt=xt(dt)),A(We,dt)}t("getOwnMetadataKeys",G);function Y(We,dt,oe){if(!He(dt))throw new TypeError;_e(oe)||(oe=xt(oe));var U=O(dt,oe,!1);if(_e(U)||!U.delete(We))return!1;if(U.size>0)return!0;var X=x.get(dt);return X.delete(oe),X.size>0||x.delete(dt),!0}t("deleteMetadata",Y);function I(We,dt){for(var oe=We.length-1;oe>=0;--oe){var U=We[oe],X=U(dt);if(!_e(X)&&!de(X)){if(!dn(X))throw new TypeError;dt=X}}return dt}function D(We,dt,oe,U){for(var X=We.length-1;X>=0;--X){var we=We[X],Te=we(dt,oe,U);if(!_e(Te)&&!de(Te)){if(!He(Te))throw new TypeError;U=Te}}return U}function O(We,dt,oe){var U=x.get(We);if(_e(U)){if(!oe)return;U=new _,x.set(We,U)}var X=U.get(dt);if(_e(X)){if(!oe)return;X=new _,U.set(dt,X)}return X}function V(We,dt,oe){var U=j(We,dt,oe);if(U)return!0;var X=Bt(dt);return de(X)?!1:V(We,X,oe)}function j(We,dt,oe){var U=O(dt,oe,!1);return _e(U)?!1:Rt(U.has(We))}function ne(We,dt,oe){var U=j(We,dt,oe);if(U)return re(We,dt,oe);var X=Bt(dt);if(!de(X))return ne(We,X,oe)}function re(We,dt,oe){var U=O(dt,oe,!1);if(!_e(U))return U.get(We)}function se(We,dt,oe,U){var X=O(oe,U,!0);X.set(We,dt)}function ie(We,dt){var oe=A(We,dt),U=Bt(We);if(U===null)return oe;var X=ie(U,dt);if(X.length<=0)return oe;if(oe.length<=0)return X;for(var we=new C,Te=[],qe=0,ze=oe;qe<ze.length;qe++){var bt=ze[qe],bn=we.has(bt);bn||(we.add(bt),Te.push(bt))}for(var En=0,nt=X;En<nt.length;En++){var bt=nt[En],bn=we.has(bt);bn||(we.add(bt),Te.push(bt))}return Te}function A(We,dt){var oe=[],U=O(We,dt,!1);if(_e(U))return oe;for(var X=U.keys(),we=ei(X),Te=0;;){var qe=un(we);if(!qe)return oe.length=Te,oe;var ze=xn(qe);try{oe[Te]=ze}catch(bt){try{Ft(we)}finally{throw bt}}Te++}}function te(We){if(We===null)return 1;switch(typeof We){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return We===null?1:6;default:return 6}}function _e(We){return We===void 0}function de(We){return We===null}function Me(We){return typeof We=="symbol"}function He(We){return typeof We=="object"?We!==null:typeof We=="function"}function st(We,dt){switch(te(We)){case 0:return We;case 1:return We;case 2:return We;case 3:return We;case 4:return We;case 5:return We}var oe=dt===3?"string":dt===5?"number":"default",U=Pt(We,o);if(U!==void 0){var X=U.call(We,oe);if(He(X))throw new TypeError;return X}return Dt(We,oe==="default"?"number":oe)}function Dt(We,dt){if(dt==="string"){var oe=We.toString;if(wt(oe)){var U=oe.call(We);if(!He(U))return U}var X=We.valueOf;if(wt(X)){var U=X.call(We);if(!He(U))return U}}else{var X=We.valueOf;if(wt(X)){var U=X.call(We);if(!He(U))return U}var we=We.toString;if(wt(we)){var U=we.call(We);if(!He(U))return U}}throw new TypeError}function Rt(We){return!!We}function lt(We){return""+We}function xt(We){var dt=st(We,3);return Me(dt)?dt:lt(dt)}function zt(We){return Array.isArray?Array.isArray(We):We instanceof Object?We instanceof Array:Object.prototype.toString.call(We)==="[object Array]"}function wt(We){return typeof We=="function"}function dn(We){return typeof We=="function"}function sn(We){switch(te(We)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(We,dt){var oe=We[dt];if(oe!=null){if(!wt(oe))throw new TypeError;return oe}}function ei(We){var dt=Pt(We,s);if(!wt(dt))throw new TypeError;var oe=dt.call(We);if(!He(oe))throw new TypeError;return oe}function xn(We){return We.value}function un(We){var dt=We.next();return dt.done?!1:dt}function Ft(We){var dt=We.return;dt&&dt.call(We)}function Bt(We){var dt=Object.getPrototypeOf(We);if(typeof We!="function"||We===h||dt!==h)return dt;var oe=We.prototype,U=oe&&Object.getPrototypeOf(oe);if(U==null||U===Object.prototype)return dt;var X=U.constructor;return typeof X!="function"||X===We?dt:X}function Tt(){var We={},dt=[],oe=function(){function Te(qe,ze,bt){this._index=0,this._keys=qe,this._values=ze,this._selector=bt}return Te.prototype["@@iterator"]=function(){return this},Te.prototype[s]=function(){return this},Te.prototype.next=function(){var qe=this._index;if(qe>=0&&qe<this._keys.length){var ze=this._selector(this._keys[qe],this._values[qe]);return qe+1>=this._keys.length?(this._index=-1,this._keys=dt,this._values=dt):this._index++,{value:ze,done:!1}}return{value:void 0,done:!0}},Te.prototype.throw=function(qe){throw this._index>=0&&(this._index=-1,this._keys=dt,this._values=dt),qe},Te.prototype.return=function(qe){return this._index>=0&&(this._index=-1,this._keys=dt,this._values=dt),{value:qe,done:!0}},Te}();return function(){function Te(){this._keys=[],this._values=[],this._cacheKey=We,this._cacheIndex=-2}return Object.defineProperty(Te.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Te.prototype.has=function(qe){return this._find(qe,!1)>=0},Te.prototype.get=function(qe){var ze=this._find(qe,!1);return ze>=0?this._values[ze]:void 0},Te.prototype.set=function(qe,ze){var bt=this._find(qe,!0);return this._values[bt]=ze,this},Te.prototype.delete=function(qe){var ze=this._find(qe,!1);if(ze>=0){for(var bt=this._keys.length,bn=ze+1;bn<bt;bn++)this._keys[bn-1]=this._keys[bn],this._values[bn-1]=this._values[bn];return this._keys.length--,this._values.length--,qe===this._cacheKey&&(this._cacheKey=We,this._cacheIndex=-2),!0}return!1},Te.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=We,this._cacheIndex=-2},Te.prototype.keys=function(){return new oe(this._keys,this._values,U)},Te.prototype.values=function(){return new oe(this._keys,this._values,X)},Te.prototype.entries=function(){return new oe(this._keys,this._values,we)},Te.prototype["@@iterator"]=function(){return this.entries()},Te.prototype[s]=function(){return this.entries()},Te.prototype._find=function(qe,ze){return this._cacheKey!==qe&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=qe)),this._cacheIndex<0&&ze&&(this._cacheIndex=this._keys.length,this._keys.push(qe),this._values.push(void 0)),this._cacheIndex},Te}();function U(Te,qe){return Te}function X(Te,qe){return qe}function we(Te,qe){return[Te,qe]}}function mt(){return function(){function We(){this._map=new _}return Object.defineProperty(We.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),We.prototype.has=function(dt){return this._map.has(dt)},We.prototype.add=function(dt){return this._map.set(dt,dt),this},We.prototype.delete=function(dt){return this._map.delete(dt)},We.prototype.clear=function(){this._map.clear()},We.prototype.keys=function(){return this._map.keys()},We.prototype.values=function(){return this._map.values()},We.prototype.entries=function(){return this._map.entries()},We.prototype["@@iterator"]=function(){return this.keys()},We.prototype[s]=function(){return this.keys()},We}()}function Qt(){var We=16,dt=d.create(),oe=U();return function(){function ze(){this._key=U()}return ze.prototype.has=function(bt){var bn=X(bt,!1);return bn!==void 0?d.has(bn,this._key):!1},ze.prototype.get=function(bt){var bn=X(bt,!1);return bn!==void 0?d.get(bn,this._key):void 0},ze.prototype.set=function(bt,bn){var En=X(bt,!0);return En[this._key]=bn,this},ze.prototype.delete=function(bt){var bn=X(bt,!1);return bn!==void 0?delete bn[this._key]:!1},ze.prototype.clear=function(){this._key=U()},ze}();function U(){var ze;do ze="@@WeakMap@@"+qe();while(d.has(dt,ze));return dt[ze]=!0,ze}function X(ze,bt){if(!n.call(ze,oe)){if(!bt)return;Object.defineProperty(ze,oe,{value:d.create()})}return ze[oe]}function we(ze,bt){for(var bn=0;bn<bt;++bn)ze[bn]=Math.random()*255|0;return ze}function Te(ze){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(ze)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(ze)):we(new Uint8Array(ze),ze):we(new Array(ze),ze)}function qe(){var ze=Te(We);ze[6]=ze[6]&79|64,ze[8]=ze[8]&191|128;for(var bt="",bn=0;bn<We;++bn){var En=ze[bn];(bn===4||bn===6||bn===8)&&(bt+="-"),En<16&&(bt+="0"),bt+=En.toString(16).toLowerCase()}return bt}}function fn(We){return We.__=void 0,delete We.__,We}})}(r||(r={})),Wq}_fe();var G6;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(G6||(G6={}));const Ch=G6;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y6=function(r,e){return Y6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Y6(r,e)};function TU(r,e){Y6(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function tA(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _R(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function aw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(_R(arguments[e]));return r}var vfe="injectionTokens";function bfe(r){var e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(vfe,r)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function rne(r){return!!r.useClass}function Z6(r){return!!r.useFactory}var one=function(){function r(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return r.prototype.createProxy=function(e){var t=this,n={},i=!1,o,s=function(){return i||(o=e(t.wrap()),i=!0),o};return new Proxy(n,this.createHandler(s))},r.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=e();var a=Reflect[i];return a.apply(void 0,aw(o))}};return this.reflectMethods.forEach(n),t},r}();function RE(r){return typeof r=="string"||typeof r=="symbol"}function Cfe(r){return typeof r=="object"&&"token"in r&&"multiple"in r}function Hq(r){return typeof r=="object"&&"token"in r&&"transform"in r}function yfe(r){return typeof r=="function"||r instanceof one}function SO(r){return!!r.useToken}function EO(r){return r.useValue!=null}function wfe(r){return rne(r)||EO(r)||SO(r)||Z6(r)}var NU=function(){function r(){this._registryMap=new Map}return r.prototype.entries=function(){return this._registryMap.entries()},r.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},r.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},r.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},r.prototype.setAll=function(e,t){this._registryMap.set(e,t)},r.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},r.prototype.clear=function(){this._registryMap.clear()},r.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},r}(),Sfe=function(r){TU(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(NU),Uq=function(){function r(){this.scopedResolutions=new Map}return r}();function Efe(r,e){if(r===null)return"at position #"+e;var t=r.split(",")[e].trim();return'"'+t+'" at position #'+e}function Lfe(r,e,t){return t===void 0&&(t="    "),aw([r],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function xfe(r,e,t){var n=_R(r.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],o=i===void 0?null:i,s=Efe(o,e);return Lfe("Cannot inject the dependency "+s+' of "'+r.name+'" constructor. Reason:',t)}var Dfe=function(r){TU(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(NU),Ife=function(r){TU(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(NU),kfe=function(){function r(){this.preResolution=new Dfe,this.postResolution=new Ife}return r}(),sne=new Map,Tfe=function(){function r(e){this.parent=e,this._registry=new Sfe,this.interceptors=new kfe}return r.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:Ch.Transient});var i;if(wfe(t)?i=t:i={useClass:t},SO(i))for(var o=[e],s=i;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+aw(o,[a]).join(" -> "));o.push(a);var l=this._registry.get(a);l&&SO(l.provider)?s=l.provider:s=null}if((n.lifecycle===Ch.Singleton||n.lifecycle==Ch.ContainerScoped||n.lifecycle==Ch.ResolutionScoped)&&(EO(i)||Z6(i)))throw new Error('Cannot use lifecycle "'+Ch[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},r.prototype.registerType=function(e,t){return RE(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},r.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},r.prototype.registerSingleton=function(e,t){if(RE(e)){if(RE(t))return this.register(e,{useToken:t},{lifecycle:Ch.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:Ch.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!RE(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:Ch.Singleton})},r.prototype.resolve=function(e,t){t===void 0&&(t=new Uq);var n=this.getRegistration(e);if(!n&&RE(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(yfe(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},r.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var s=tA(this.interceptors.preResolution.getAll(e)),a=s.next();!a.done;a=s.next()){var l=a.value;l.options.frequency!="Once"&&o.push(l),l.callback(e,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},r.prototype.executePostResolutionInterceptor=function(e,t,n){var i,o;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var a=tA(this.interceptors.postResolution.getAll(e)),l=a.next();!l.done;l=a.next()){var u=l.value;u.options.frequency!="Once"&&s.push(u),u.callback(e,t,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,s)}},r.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===Ch.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===Ch.Singleton,i=e.options.lifecycle===Ch.ContainerScoped,o=n||i,s;return EO(e.provider)?s=e.provider.useValue:SO(e.provider)?s=o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):rne(e.provider)?s=o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Z6(e.provider)?s=e.provider.useFactory(this):s=this.construct(e.provider,t),e.options.lifecycle===Ch.ResolutionScoped&&t.scopedResolutions.set(e,s),s},r.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new Uq);var i=this.getAllRegistrations(e);if(!i&&RE(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var o=i.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,o,"All"),o}var s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s},r.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},r.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},r.prototype.clearInstances=function(){var e,t;try{for(var n=tA(this._registry.entries()),i=n.next();!i.done;i=n.next()){var o=_R(i.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(l){return!EO(l.provider)}).map(function(l){return l.instance=void 0,l}))}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.createChildContainer=function(){var e,t,n=new r(this);try{for(var i=tA(this._registry.entries()),o=i.next();!o.done;o=i.next()){var s=_R(o.value,2),a=s[0],l=s[1];l.some(function(u){var d=u.options;return d.lifecycle===Ch.ContainerScoped})&&n._registry.setAll(a,l.map(function(u){return u.options.lifecycle===Ch.ContainerScoped?{provider:u.provider,options:u.options}:u}))}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},r.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},r.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},r.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},r.prototype.construct=function(e,t){var n=this;if(e instanceof one)return e.createProxy(function(s){return n.resolve(s,t)});var i=sne.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=i.map(this.resolveParams(t,e));return new(e.bind.apply(e,aw([void 0],o)))},r.prototype.resolveParams=function(e,t){var n=this;return function(i,o){var s,a,l;try{return Cfe(i)?Hq(i)?i.multiple?(s=n.resolve(i.transform)).transform.apply(s,aw([n.resolveAll(i.token)],i.transformArgs)):(a=n.resolve(i.transform)).transform.apply(a,aw([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):Hq(i)?(l=n.resolve(i.transform,e)).transform.apply(l,aw([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(u){throw new Error(xfe(t,o,u))}}},r}(),yt=new Tfe;function Nfe(){return function(r){sne.set(r,bfe(r))}}function Ur(){return function(r){Nfe()(r),yt.registerSingleton(r)}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);class MP{constructor(){this._events=new Map}count(e){return(this._events.get(e)||[]).length}emit(e,...t){const n=this._events.get(e);if(n&&n.length>0){let i=!0;for(let o=n.length-1;o>=0;o--)i&&n[o].call({stopDelivery:()=>i=!1},...t)}}subscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.assignEvent(n,t)}):this.assignEvent(e,t)}unsubscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.deleteEvent(n,t)}):this.deleteEvent(e,t)}deleteEvent(e,t){if(t){const n=this._events.get(e);n&&n.splice(n.indexOf(t),1)}else this._events.delete(e)}assignEvent(e,t){const n=this._events.get(e);n?n.push(t):this._events.set(e,[t])}}const yw=new MP;class Kx{subscribe(e,t){yw.subscribe(e,t)}emit(e,...t){yw.emit(e,...t)}count(e){return yw.count(e)}unsubscribe(e,t){yw.unsubscribe(e,t)}}function Afe(r){return function(e,t,n){const i=n.value;return typeof i=="function"&&(n.value=function(...o){try{const s=i.apply(this,o);return yw.emit(r,o),s}catch(s){throw s}}),n}}function Ofe(r){return function(e,t,n){const i=n.value;return typeof i=="function"&&yw.subscribe(r,i),n}}const Rfe=Object.freeze(Object.defineProperty({__proto__:null,EventBus:yw,EventEmitter:MP,GlobalEvent:Kx,emit:Afe,subscribe:Ofe},Symbol.toStringTag,{value:"Module"}));var xk={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */xk.exports;var zq;function Mfe(){return zq||(zq=1,function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,p=2,_=4,C=1,S=2,x=1,T=2,k=4,M=8,W=16,F=32,Q=64,z=128,$=256,G=512,Y=30,I="...",D=800,O=16,V=1,j=2,ne=3,re=1/0,se=9007199254740991,ie=17976931348623157e292,A=0/0,te=4294967295,_e=te-1,de=te>>>1,Me=[["ary",z],["bind",x],["bindKey",T],["curry",M],["curryRight",W],["flip",G],["partial",F],["partialRight",Q],["rearg",$]],He="[object Arguments]",st="[object Array]",Dt="[object AsyncFunction]",Rt="[object Boolean]",lt="[object Date]",xt="[object DOMException]",zt="[object Error]",wt="[object Function]",dn="[object GeneratorFunction]",sn="[object Map]",Pt="[object Number]",ei="[object Null]",xn="[object Object]",un="[object Promise]",Ft="[object Proxy]",Bt="[object RegExp]",Tt="[object Set]",mt="[object String]",Qt="[object Symbol]",fn="[object Undefined]",We="[object WeakMap]",dt="[object WeakSet]",oe="[object ArrayBuffer]",U="[object DataView]",X="[object Float32Array]",we="[object Float64Array]",Te="[object Int8Array]",qe="[object Int16Array]",ze="[object Int32Array]",bt="[object Uint8Array]",bn="[object Uint8ClampedArray]",En="[object Uint16Array]",nt="[object Uint32Array]",Mi=/\b__p \+= '';/g,ni=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qs=/&(?:amp|lt|gt|quot|#39);/g,Vn=/[&<>"']/g,Dr=RegExp(Qs.source),ru=RegExp(Vn.source),lr=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,as=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ye=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,Ce=RegExp(ve.source),Ie=/^\s+/,ue=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pt=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kn=/[()=,{}\[\]\/\s]/,R=/\\(\\)?/g,K=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,Je=/^0o[0-7]+$/i,ht=/^(?:0|[1-9]\d*)$/,It=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vt=/($^)/,pn=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",mn="\\u0300-\\u036f",Jt="\\ufe20-\\ufe2f",qi="\\u20d0-\\u20ff",Ci=mn+Jt+qi,Rr="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",da="\\xac\\xb1\\xd7\\xf7",Cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ap="\\u2000-\\u206f",Pu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l0="A-Z\\xc0-\\xd6\\xd8-\\xde",u0="\\ufe0e\\ufe0f",c0=da+Cs+ap+Pu,Fd="[']",Am="["+tn+"]",Bd="["+c0+"]",hc="["+Ci+"]",d0="\\d+",ay="["+Rr+"]",lp="["+Er+"]",Om="[^"+tn+c0+d0+Rr+Er+l0+"]",Bh="\\ud83c[\\udffb-\\udfff]",Wd="(?:"+hc+"|"+Bh+")",h0="[^"+tn+"]",fc="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",ou="["+l0+"]",Rm="\\u200d",Yf="(?:"+lp+"|"+Om+")",f0="(?:"+ou+"|"+Om+")",up="(?:"+Fd+"(?:d|ll|m|re|s|t|ve))?",Mm="(?:"+Fd+"(?:D|LL|M|RE|S|T|VE))?",cp=Wd+"?",Zf="["+u0+"]?",Vd="(?:"+Rm+"(?:"+[h0,fc,Lr].join("|")+")"+Zf+cp+")*",$c="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hd=Zf+cp+Vd,Wh="(?:"+[ay,fc,Lr].join("|")+")"+Hd,Ud="(?:"+[h0+hc+"?",hc,fc,Lr,Am].join("|")+")",r1=RegExp(Fd,"g"),dp=RegExp(hc,"g"),gc=RegExp(Bh+"(?="+Bh+")|"+Ud+Hd,"g"),ly=RegExp([ou+"?"+lp+"+"+up+"(?="+[Bd,ou,"$"].join("|")+")",f0+"+"+Mm+"(?="+[Bd,ou+Yf,"$"].join("|")+")",ou+"?"+Yf+"+"+up,ou+"+"+Mm,jc,$c,d0,Wh].join("|"),"g"),g0=RegExp("["+Rm+tn+Ci+u0+"]"),hp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uy=-1,ui={};ui[X]=ui[we]=ui[Te]=ui[qe]=ui[ze]=ui[bt]=ui[bn]=ui[En]=ui[nt]=!0,ui[He]=ui[st]=ui[oe]=ui[Rt]=ui[U]=ui[lt]=ui[zt]=ui[wt]=ui[sn]=ui[Pt]=ui[xn]=ui[Bt]=ui[Tt]=ui[mt]=ui[We]=!1;var ii={};ii[He]=ii[st]=ii[oe]=ii[U]=ii[Rt]=ii[lt]=ii[X]=ii[we]=ii[Te]=ii[qe]=ii[ze]=ii[sn]=ii[Pt]=ii[xn]=ii[Bt]=ii[Tt]=ii[mt]=ii[Qt]=ii[bt]=ii[bn]=ii[En]=ii[nt]=!0,ii[zt]=ii[wt]=ii[We]=!1;var zd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},qc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},p0=parseFloat,fp=parseInt,Xf=typeof ku=="object"&&ku&&ku.Object===Object&&ku,m0=typeof self=="object"&&self&&self.Object===Object&&self,Ki=Xf||m0||Function("return this")(),Vh=e&&!e.nodeType&&e,Ea=Vh&&!0&&r&&!r.nodeType&&r,Fm=Ea&&Ea.exports===Vh,Kc=Fm&&Xf.process,Eo=function(){try{var be=Ea&&Ea.require&&Ea.require("util").types;return be||Kc&&Kc.binding&&Kc.binding("util")}catch{}}(),Bm=Eo&&Eo.isArrayBuffer,ja=Eo&&Eo.isDate,$d=Eo&&Eo.isMap,Hh=Eo&&Eo.isRegExp,Uh=Eo&&Eo.isSet,_0=Eo&&Eo.isTypedArray;function _o(be,Pe,ke){switch(ke.length){case 0:return be.call(Pe);case 1:return be.call(Pe,ke[0]);case 2:return be.call(Pe,ke[0],ke[1]);case 3:return be.call(Pe,ke[0],ke[1],ke[2])}return be.apply(Pe,ke)}function v0(be,Pe,ke,Et){for(var hn=-1,Kn=be==null?0:be.length;++hn<Kn;){var Pi=be[hn];Pe(Et,Pi,ke(Pi),be)}return Et}function vo(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et&&Pe(be[ke],ke,be)!==!1;);return be}function eo(be,Pe){for(var ke=be==null?0:be.length;ke--&&Pe(be[ke],ke,be)!==!1;);return be}function qr(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et;)if(!Pe(be[ke],ke,be))return!1;return!0}function qa(be,Pe){for(var ke=-1,Et=be==null?0:be.length,hn=0,Kn=[];++ke<Et;){var Pi=be[ke];Pe(Pi,ke,be)&&(Kn[hn++]=Pi)}return Kn}function zh(be,Pe){var ke=be==null?0:be.length;return!!ke&&ts(be,Pe,0)>-1}function gp(be,Pe,ke){for(var Et=-1,hn=be==null?0:be.length;++Et<hn;)if(ke(Pe,be[Et]))return!0;return!1}function mi(be,Pe){for(var ke=-1,Et=be==null?0:be.length,hn=Array(Et);++ke<Et;)hn[ke]=Pe(be[ke],ke,be);return hn}function Ka(be,Pe){for(var ke=-1,Et=Pe.length,hn=be.length;++ke<Et;)be[hn+ke]=Pe[ke];return be}function pp(be,Pe,ke,Et){var hn=-1,Kn=be==null?0:be.length;for(Et&&Kn&&(ke=be[++hn]);++hn<Kn;)ke=Pe(ke,be[hn],hn,be);return ke}function a1(be,Pe,ke,Et){var hn=be==null?0:be.length;for(Et&&hn&&(ke=be[--hn]);hn--;)ke=Pe(ke,be[hn],hn,be);return ke}function mp(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et;)if(Pe(be[ke],ke,be))return!0;return!1}var ha=Qf("length");function Wm(be){return be.split("")}function $h(be){return be.match(Ut)||[]}function Vm(be,Pe,ke){var Et;return ke(be,function(hn,Kn,Pi){if(Pe(hn,Kn,Pi))return Et=Kn,!1}),Et}function Gc(be,Pe,ke,Et){for(var hn=be.length,Kn=ke+(Et?1:-1);Et?Kn--:++Kn<hn;)if(Pe(be[Kn],Kn,be))return Kn;return-1}function ts(be,Pe,ke){return Pe===Pe?eg(be,Pe,ke):Gc(be,Um,ke)}function Hm(be,Pe,ke,Et){for(var hn=ke-1,Kn=be.length;++hn<Kn;)if(Et(be[hn],Pe))return hn;return-1}function Um(be){return be!==be}function zm(be,Pe){var ke=be==null?0:be.length;return ke?_p(be,Pe)/ke:A}function Qf(be){return function(Pe){return Pe==null?t:Pe[be]}}function jh(be){return function(Pe){return be==null?t:be[Pe]}}function $m(be,Pe,ke,Et,hn){return hn(be,function(Kn,Pi,ci){ke=Et?(Et=!1,Kn):Pe(ke,Kn,Pi,ci)}),ke}function Wl(be,Pe){var ke=be.length;for(be.sort(Pe);ke--;)be[ke]=be[ke].value;return be}function _p(be,Pe){for(var ke,Et=-1,hn=be.length;++Et<hn;){var Kn=Pe(be[Et]);Kn!==t&&(ke=ke===t?Kn:ke+Kn)}return ke}function La(be,Pe){for(var ke=-1,Et=Array(be);++ke<be;)Et[ke]=Pe(ke);return Et}function cy(be,Pe){return mi(Pe,function(ke){return[ke,be[ke]]})}function jm(be){return be&&be.slice(0,qh(be)+1).replace(Ie,"")}function Ir(be){return function(Pe){return be(Pe)}}function pc(be,Pe){return mi(Pe,function(ke){return be[ke]})}function Ga(be,Pe){return be.has(Pe)}function Lo(be,Pe){for(var ke=-1,Et=be.length;++ke<Et&&ts(Pe,be[ke],0)>-1;);return ke}function Fu(be,Pe){for(var ke=be.length;ke--&&ts(Pe,be[ke],0)>-1;);return ke}function qm(be,Pe){for(var ke=be.length,Et=0;ke--;)be[ke]===Pe&&++Et;return Et}var l1=jh(zd),Km=jh(qc);function u1(be){return"\\"+s1[be]}function Jf(be,Pe){return be==null?t:be[Pe]}function Bu(be){return g0.test(be)}function c1(be){return hp.test(be)}function Gm(be){for(var Pe,ke=[];!(Pe=be.next()).done;)ke.push(Pe.value);return ke}function Wu(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et,hn){ke[++Pe]=[hn,Et]}),ke}function Ym(be,Pe){return function(ke){return be(Pe(ke))}}function ys(be,Pe){for(var ke=-1,Et=be.length,hn=0,Kn=[];++ke<Et;){var Pi=be[ke];(Pi===Pe||Pi===d)&&(be[ke]=d,Kn[hn++]=ke)}return Kn}function su(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et){ke[++Pe]=Et}),ke}function b0(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et){ke[++Pe]=[Et,Et]}),ke}function eg(be,Pe,ke){for(var Et=ke-1,hn=be.length;++Et<hn;)if(be[Et]===Pe)return Et;return-1}function d1(be,Pe,ke){for(var Et=ke+1;Et--;)if(be[Et]===Pe)return Et;return Et}function au(be){return Bu(be)?C0(be):ha(be)}function Mo(be){return Bu(be)?pl(be):Wm(be)}function qh(be){for(var Pe=be.length;Pe--&&ue.test(be.charAt(Pe)););return Pe}var h1=jh(o1);function C0(be){for(var Pe=gc.lastIndex=0;gc.test(be);)++Pe;return Pe}function pl(be){return be.match(gc)||[]}function y0(be){return be.match(ly)||[]}var vp=function be(Pe){Pe=Pe==null?Ki:lu.defaults(Ki.Object(),Pe,lu.pick(Ki,Pm));var ke=Pe.Array,Et=Pe.Date,hn=Pe.Error,Kn=Pe.Function,Pi=Pe.Math,ci=Pe.Object,Kh=Pe.RegExp,w0=Pe.String,Uo=Pe.TypeError,Os=ke.prototype,tg=Kn.prototype,Ya=ci.prototype,Yc=Pe["__core-js_shared__"],jd=tg.toString,$n=Ya.hasOwnProperty,xa=0,ng=function(){var c=/[^.]+$/.exec(Yc&&Yc.keys&&Yc.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),qd=Ya.toString,Zm=jd.call(ci),f1=Ki._,g1=Kh("^"+jd.call($n).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kd=Fm?Pe.Buffer:t,ls=Pe.Symbol,tt=Pe.Uint8Array,At=Kd?Kd.allocUnsafe:t,gt=Ym(ci.getPrototypeOf,ci),Rn=ci.create,vi=Ya.propertyIsEnumerable,ur=Os.splice,us=ls?ls.isConcatSpreadable:t,Xi=ls?ls.iterator:t,Za=ls?ls.toStringTag:t,Gd=function(){try{var c=_a(ci,"defineProperty");return c({},"",{}),c}catch{}}(),Vl=Pe.clearTimeout!==Ki.clearTimeout&&Pe.clearTimeout,to=Et&&Et.now!==Ki.Date.now&&Et.now,S0=Pe.setTimeout!==Ki.setTimeout&&Pe.setTimeout,Xa=Pi.ceil,ml=Pi.floor,Zc=ci.getOwnPropertySymbols,Mr=Kd?Kd.isBuffer:t,Gh=Pe.isFinite,bp=Os.join,Xc=Ym(ci.keys,ci),ir=Pi.max,Pr=Pi.min,dy=Et.now,Cp=Pe.parseInt,Hl=Pi.random,Yh=Os.reverse,Yd=_a(Pe,"DataView"),_l=_a(Pe,"Map"),Zd=_a(Pe,"Promise"),vl=_a(Pe,"Set"),uu=_a(Pe,"WeakMap"),Vu=_a(ci,"create"),Hu=uu&&new uu,fa={},ig=oo(Yd),Xd=oo(_l),p1=oo(Zd),rg=oo(vl),Ul=oo(uu),bl=ls?ls.prototype:t,Rs=bl?bl.valueOf:t,yp=bl?bl.toString:t;function q(c){if(Gi(c)&&!Cn(c)&&!(c instanceof an)){if(c instanceof Ei)return c;if($n.call(c,"__wrapped__"))return y_(c)}return new Ei(c)}var Uu=function(){function c(){}return function(f){if(!Fi(f))return{};if(Rn)return Rn(f);c.prototype=f;var b=new c;return c.prototype=t,b}}();function zl(){}function Ei(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}q.templateSettings={escape:lr,evaluate:Ct,interpolate:as,variable:"",imports:{_:q}},q.prototype=zl.prototype,q.prototype.constructor=q,Ei.prototype=Uu(zl.prototype),Ei.prototype.constructor=Ei;function an(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Xm(){var c=new an(this.__wrapped__);return c.__actions__=Gr(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Gr(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Gr(this.__views__),c}function E0(){if(this.__filtered__){var c=new an(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Zh(){var c=this.__wrapped__.value(),f=this.__dir__,b=Cn(c),L=f<0,B=b?c.length:0,Z=A0(0,B,this.__views__),ae=Z.start,he=Z.end,ye=he-ae,Ue=L?he:ae-1,$e=this.__iteratees__,Ze=$e.length,vt=0,Ht=Pr(ye,this.__takeCount__);if(!b||!L&&B==ye&&Ht==ye)return xp(c,this.__actions__);var nn=[];e:for(;ye--&&vt<Ht;){Ue+=f;for(var Dn=-1,rn=c[Ue];++Dn<Ze;){var Mn=$e[Dn],Un=Mn.iteratee,Qo=Mn.type,wo=Un(rn);if(Qo==j)rn=wo;else if(!wo){if(Qo==V)continue e;break e}}nn[vt++]=rn}return nn}an.prototype=Uu(zl.prototype),an.prototype.constructor=an;function ws(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function bo(){this.__data__=Vu?Vu(null):{},this.size=0}function zr(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function mc(c){var f=this.__data__;if(Vu){var b=f[c];return b===l?t:b}return $n.call(f,c)?f[c]:t}function cs(c){var f=this.__data__;return Vu?f[c]!==t:$n.call(f,c)}function Js(c,f){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=Vu&&f===t?l:f,this}ws.prototype.clear=bo,ws.prototype.delete=zr,ws.prototype.get=mc,ws.prototype.has=cs,ws.prototype.set=Js;function Co(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function Qc(){this.__data__=[],this.size=0}function Ms(c){var f=this.__data__,b=Ps(f,c);if(b<0)return!1;var L=f.length-1;return b==L?f.pop():ur.call(f,b,1),--this.size,!0}function Qm(c){var f=this.__data__,b=Ps(f,c);return b<0?t:f[b][1]}function m1(c){return Ps(this.__data__,c)>-1}function _1(c,f){var b=this.__data__,L=Ps(b,c);return L<0?(++this.size,b.push([c,f])):b[L][1]=f,this}Co.prototype.clear=Qc,Co.prototype.delete=Ms,Co.prototype.get=Qm,Co.prototype.has=m1,Co.prototype.set=_1;function Ss(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function v1(){this.size=0,this.__data__={hash:new ws,map:new(_l||Co),string:new ws}}function cu(c){var f=ch(this,c).delete(c);return this.size-=f?1:0,f}function Qd(c){return ch(this,c).get(c)}function Jm(c){return ch(this,c).has(c)}function Ee(c,f){var b=ch(this,c),L=b.size;return b.set(c,f),this.size+=b.size==L?0:1,this}Ss.prototype.clear=v1,Ss.prototype.delete=cu,Ss.prototype.get=Qd,Ss.prototype.has=Jm,Ss.prototype.set=Ee;function ea(c){var f=-1,b=c==null?0:c.length;for(this.__data__=new Ss;++f<b;)this.add(c[f])}function zu(c){return this.__data__.set(c,l),this}function ga(c){return this.__data__.has(c)}ea.prototype.add=ea.prototype.push=zu,ea.prototype.has=ga;function Yn(c){var f=this.__data__=new Co(c);this.size=f.size}function e_(){this.__data__=new Co,this.size=0}function t_(c){var f=this.__data__,b=f.delete(c);return this.size=f.size,b}function du(c){return this.__data__.get(c)}function ta(c){return this.__data__.has(c)}function Xh(c,f){var b=this.__data__;if(b instanceof Co){var L=b.__data__;if(!_l||L.length<i-1)return L.push([c,f]),this.size=++b.size,this;b=this.__data__=new Ss(L)}return b.set(c,f),this.size=b.size,this}Yn.prototype.clear=e_,Yn.prototype.delete=t_,Yn.prototype.get=du,Yn.prototype.has=ta,Yn.prototype.set=Xh;function $u(c,f){var b=Cn(c),L=!b&&yu(c),B=!b&&!L&&Zl(c),Z=!b&&!L&&!B&&hd(c),ae=b||L||B||Z,he=ae?La(c.length,w0):[],ye=he.length;for(var Ue in c)(f||$n.call(c,Ue))&&!(ae&&(Ue=="length"||B&&(Ue=="offset"||Ue=="parent")||Z&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||hs(Ue,ye)))&&he.push(Ue);return he}function ju(c){var f=c.length;return f?c[nf(0,f-1)]:t}function Qh(c,f){return Ta(Gr(c),Ja(f,0,c.length))}function b1(c){return Ta(Gr(c))}function Qa(c,f,b){(b!==t&&!Is(c[f],b)||b===t&&!(f in c))&&Do(c,f,b)}function qu(c,f,b){var L=c[f];(!($n.call(c,f)&&Is(L,b))||b===t&&!(f in c))&&Do(c,f,b)}function Ps(c,f){for(var b=c.length;b--;)if(Is(c[b][0],f))return b;return-1}function $l(c,f,b,L){return pa(c,function(B,Z,ae){f(L,B,b(B),ae)}),L}function xo(c,f){return c&&kr(f,wr(f),c)}function Ku(c,f){return c&&kr(f,Bo(f),c)}function Do(c,f,b){f=="__proto__"&&Gd?Gd(c,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):c[f]=b}function og(c,f){for(var b=-1,L=f.length,B=ke(L),Z=c==null;++b<L;)B[b]=Z?t:Z0(c,f[b]);return B}function Ja(c,f,b){return c===c&&(b!==t&&(c=c<=b?c:b),f!==t&&(c=c>=f?c:f)),c}function Po(c,f,b,L,B,Z){var ae,he=f&h,ye=f&p,Ue=f&_;if(b&&(ae=B?b(c,L,B,Z):b(c)),ae!==t)return ae;if(!Fi(c))return c;var $e=Cn(c);if($e){if(ae=O0(c),!he)return Gr(c,ae)}else{var Ze=Cr(c),vt=Ze==wt||Ze==dn;if(Zl(c))return d_(c,he);if(Ze==xn||Ze==He||vt&&!B){if(ae=ye||vt?{}:nl(c),!he)return ye?D0(c,Ku(ae,c)):id(c,xo(ae,c))}else{if(!ii[Ze])return B?c:{};ae=va(c,Ze,he)}}Z||(Z=new Yn);var Ht=Z.get(c);if(Ht)return Ht;Z.set(c,ae),ky(c)?c.forEach(function(rn){ae.add(Po(rn,f,b,rn,c,Z))}):Iy(c)&&c.forEach(function(rn,Mn){ae.set(Mn,Po(rn,f,b,Mn,c,Z))});var nn=Ue?ye?Xu:Zu:ye?Bo:wr,Dn=$e?t:nn(c);return vo(Dn||c,function(rn,Mn){Dn&&(Mn=rn,rn=c[Mn]),qu(ae,Mn,Po(rn,f,b,Mn,c,Z))}),ae}function C1(c){var f=wr(c);return function(b){return sg(b,c,f)}}function sg(c,f,b){var L=b.length;if(c==null)return!L;for(c=ci(c);L--;){var B=b[L],Z=f[B],ae=c[B];if(ae===t&&!(B in c)||!Z(ae))return!1}return!0}function _c(c,f,b){if(typeof c!="function")throw new Uo(s);return Qu(function(){c.apply(t,b)},f)}function Cl(c,f,b,L){var B=-1,Z=zh,ae=!0,he=c.length,ye=[],Ue=f.length;if(!he)return ye;b&&(f=mi(f,Ir(b))),L?(Z=gp,ae=!1):f.length>=i&&(Z=Ga,ae=!1,f=new ea(f));e:for(;++B<he;){var $e=c[B],Ze=b==null?$e:b($e);if($e=L||$e!==0?$e:0,ae&&Ze===Ze){for(var vt=Ue;vt--;)if(f[vt]===Ze)continue e;ye.push($e)}else Z(f,Ze,L)||ye.push($e)}return ye}var pa=f_(ds),jl=f_(bc,!0);function Gu(c,f){var b=!0;return pa(c,function(L,B,Z){return b=!!f(L,B,Z),b}),b}function vc(c,f,b){for(var L=-1,B=c.length;++L<B;){var Z=c[L],ae=f(Z);if(ae!=null&&(he===t?ae===ae&&!Zo(ae):b(ae,he)))var he=ae,ye=Z}return ye}function n_(c,f,b,L){var B=c.length;for(b=yn(b),b<0&&(b=-b>B?0:B+b),L=L===t||L>B?B:yn(L),L<0&&(L+=B),L=b>L?0:Xo(L);b<L;)c[b++]=f;return c}function Jd(c,f){var b=[];return pa(c,function(L,B,Z){f(L,B,Z)&&b.push(L)}),b}function mr(c,f,b,L,B){var Z=-1,ae=c.length;for(b||(b=gy),B||(B=[]);++Z<ae;){var he=c[Z];f>0&&b(he)?f>1?mr(he,f-1,b,L,B):Ka(B,he):L||(B[B.length]=he)}return B}var eh=vg(),ag=vg(!0);function ds(c,f){return c&&eh(c,f,wr)}function bc(c,f){return c&&ag(c,f,wr)}function Es(c,f){return qa(f,function(b){return ol(c[b])})}function Yo(c,f){f=Da(f,c);for(var b=0,L=f.length;c!=null&&b<L;)c=c[ro(f[b++])];return b&&b==L?c:t}function th(c,f,b){var L=f(c);return Cn(c)?L:Ka(L,b(c))}function $r(c){return c==null?c===t?fn:ei:Za&&Za in ci(c)?Tp(c):S1(c)}function yl(c,f){return c>f}function nh(c,f){return c!=null&&$n.call(c,f)}function Yu(c,f){return c!=null&&f in ci(c)}function i_(c,f,b){return c>=Pr(f,b)&&c<ir(f,b)}function Fs(c,f,b){for(var L=b?gp:zh,B=c[0].length,Z=c.length,ae=Z,he=ke(Z),ye=1/0,Ue=[];ae--;){var $e=c[ae];ae&&f&&($e=mi($e,Ir(f))),ye=Pr($e.length,ye),he[ae]=!b&&(f||B>=120&&$e.length>=120)?new ea(ae&&$e):t}$e=c[0];var Ze=-1,vt=he[0];e:for(;++Ze<B&&Ue.length<ye;){var Ht=$e[Ze],nn=f?f(Ht):Ht;if(Ht=b||Ht!==0?Ht:0,!(vt?Ga(vt,nn):L(Ue,nn,b))){for(ae=Z;--ae;){var Dn=he[ae];if(!(Dn?Ga(Dn,nn):L(c[ae],nn,b)))continue e}vt&&vt.push(nn),Ue.push(Ht)}}return Ue}function Bs(c,f,b,L){return ds(c,function(B,Z,ae){f(L,b(B),Z,ae)}),L}function hu(c,f,b){f=Da(f,c),c=Sg(c,f);var L=c==null?c:c[ro(Fr(f))];return L==null?t:_o(L,c,b)}function wp(c){return Gi(c)&&$r(c)==He}function Sp(c){return Gi(c)&&$r(c)==oe}function lg(c){return Gi(c)&&$r(c)==lt}function ma(c,f,b,L,B){return c===f?!0:c==null||f==null||!Gi(c)&&!Gi(f)?c!==c&&f!==f:r_(c,f,b,L,ma,B)}function r_(c,f,b,L,B,Z){var ae=Cn(c),he=Cn(f),ye=ae?st:Cr(c),Ue=he?st:Cr(f);ye=ye==He?xn:ye,Ue=Ue==He?xn:Ue;var $e=ye==xn,Ze=Ue==xn,vt=ye==Ue;if(vt&&Zl(c)){if(!Zl(f))return!1;ae=!0,$e=!1}if(vt&&!$e)return Z||(Z=new Yn),ae||hd(c)?yg(c,f,b,L,B,Z):T0(c,f,ye,b,L,B,Z);if(!(b&C)){var Ht=$e&&$n.call(c,"__wrapped__"),nn=Ze&&$n.call(f,"__wrapped__");if(Ht||nn){var Dn=Ht?c.value():c,rn=nn?f.value():f;return Z||(Z=new Yn),B(Dn,rn,b,L,Z)}}return vt?(Z||(Z=new Yn),N0(c,f,b,L,B,Z)):!1}function o_(c){return Gi(c)&&Cr(c)==sn}function Jc(c,f,b,L){var B=b.length,Z=B,ae=!L;if(c==null)return!Z;for(c=ci(c);B--;){var he=b[B];if(ae&&he[2]?he[1]!==c[he[0]]:!(he[0]in c))return!1}for(;++B<Z;){he=b[B];var ye=he[0],Ue=c[ye],$e=he[1];if(ae&&he[2]){if(Ue===t&&!(ye in c))return!1}else{var Ze=new Yn;if(L)var vt=L(Ue,$e,ye,c,f,Ze);if(!(vt===t?ma($e,Ue,C|S,L,Ze):vt))return!1}}return!0}function s_(c){if(!Fi(c)||Op(c))return!1;var f=ol(c)?g1:Se;return f.test(oo(c))}function L0(c){return Gi(c)&&$r(c)==Bt}function Ws(c){return Gi(c)&&Cr(c)==Tt}function Jh(c){return Gi(c)&&Bp(c.length)&&!!ui[$r(c)]}function ef(c){return typeof c=="function"?c:c==null?Wo:typeof c=="object"?Cn(c)?Io(c[0],c[1]):ih(c):Wy(c)}function el(c){if(!mu(c))return Xc(c);var f=[];for(var b in ci(c))$n.call(c,b)&&b!="constructor"&&f.push(b);return f}function a_(c){if(!Fi(c))return hh(c);var f=mu(c),b=[];for(var L in c)L=="constructor"&&(f||!$n.call(c,L))||b.push(L);return b}function ql(c,f){return c<f}function Cc(c,f){var b=-1,L=Fo(c)?ke(c.length):[];return pa(c,function(B,Z,ae){L[++b]=f(B,Z,ae)}),L}function ih(c){var f=ad(c);return f.length==1&&f[0][2]?si(f[0][0],f[0][1]):function(b){return b===c||Jc(b,c,f)}}function Io(c,f){return Ap(c)&&_u(f)?si(ro(c),f):function(b){var L=Z0(b,c);return L===t&&L===f?tc(b,c):ma(f,L,C|S)}}function Kl(c,f,b,L,B){c!==f&&eh(f,function(Z,ae){if(B||(B=new Yn),Fi(Z))Ep(c,f,ae,b,Kl,L,B);else{var he=L?L(il(c,ae),Z,ae+"",c,f,B):t;he===t&&(he=Z),Qa(c,ae,he)}},Bo)}function Ep(c,f,b,L,B,Z,ae){var he=il(c,b),ye=il(f,b),Ue=ae.get(ye);if(Ue){Qa(c,b,Ue);return}var $e=Z?Z(he,ye,b+"",c,f,ae):t,Ze=$e===t;if(Ze){var vt=Cn(ye),Ht=!vt&&Zl(ye),nn=!vt&&!Ht&&hd(ye);$e=ye,vt||Ht||nn?Cn(he)?$e=he:Ui(he)?$e=Gr(he):Ht?(Ze=!1,$e=d_(ye,!0)):nn?(Ze=!1,$e=tl(ye,!0)):$e=[]:bf(ye)||yu(ye)?($e=he,yu(he)?$e=W1(he):(!Fi(he)||ol(he))&&($e=nl(ye))):Ze=!1}Ze&&(ae.set(ye,$e),B($e,ye,L,Z,ae),ae.delete(ye)),Qa(c,b,$e)}function ed(c,f){var b=c.length;if(b)return f+=f<0?b:0,hs(f,b)?c[f]:t}function Lp(c,f,b){f.length?f=mi(f,function(Z){return Cn(Z)?function(ae){return Yo(ae,Z.length===1?Z[0]:Z)}:Z}):f=[Wo];var L=-1;f=mi(f,Ir(qt()));var B=Cc(c,function(Z,ae,he){var ye=mi(f,function(Ue){return Ue(Z)});return{criteria:ye,index:++L,value:Z}});return Wl(B,function(Z,ae){return Ip(Z,ae,b)})}function rh(c,f){return l_(c,f,function(b,L){return tc(c,L)})}function l_(c,f,b){for(var L=-1,B=f.length,Z={};++L<B;){var ae=f[L],he=Yo(c,ae);b(he,ae)&&yo(Z,Da(ae,c),he)}return Z}function tf(c){return function(f){return Yo(f,c)}}function no(c,f,b,L){var B=L?Hm:ts,Z=-1,ae=f.length,he=c;for(c===f&&(f=Gr(f)),b&&(he=mi(c,Ir(b)));++Z<ae;)for(var ye=0,Ue=f[Z],$e=b?b(Ue):Ue;(ye=B(he,$e,ye,L))>-1;)he!==c&&ur.call(he,ye,1),ur.call(c,ye,1);return c}function ug(c,f){for(var b=c?f.length:0,L=b-1;b--;){var B=f[b];if(b==L||B!==Z){var Z=B;hs(B)?ur.call(c,B,1):yc(c,B)}}return c}function nf(c,f){return c+ml(Hl()*(f-c+1))}function rf(c,f,b,L){for(var B=-1,Z=ir(Xa((f-c)/(b||1)),0),ae=ke(Z);Z--;)ae[L?Z:++B]=c,c+=b;return ae}function oh(c,f){var b="";if(!c||f<1||f>se)return b;do f%2&&(b+=c),f=ml(f/2),f&&(c+=c);while(f);return b}function Ln(c,f){return Eg(hf(c,f,Wo),c+"")}function td(c){return ju(nc(c))}function zo(c,f){var b=nc(c);return Ta(b,Ja(f,0,b.length))}function yo(c,f,b,L){if(!Fi(c))return c;f=Da(f,c);for(var B=-1,Z=f.length,ae=Z-1,he=c;he!=null&&++B<Z;){var ye=ro(f[B]),Ue=b;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return c;if(B!=ae){var $e=he[ye];Ue=L?L($e,ye,he):t,Ue===t&&(Ue=Fi($e)?$e:hs(f[B+1])?[]:{})}qu(he,ye,Ue),he=he[ye]}return c}var Ls=Hu?function(c,f){return Hu.set(c,f),c}:Wo,u_=Gd?function(c,f){return Gd(c,"toString",{configurable:!0,enumerable:!1,value:Q0(f),writable:!0})}:Wo;function cg(c){return Ta(nc(c))}function Kr(c,f,b){var L=-1,B=c.length;f<0&&(f=-f>B?0:B+f),b=b>B?B:b,b<0&&(b+=B),B=f>b?0:b-f>>>0,f>>>=0;for(var Z=ke(B);++L<B;)Z[L]=c[L+f];return Z}function hy(c,f){var b;return pa(c,function(L,B,Z){return b=f(L,B,Z),!b}),!!b}function $o(c,f,b){var L=0,B=c==null?L:c.length;if(typeof f=="number"&&f===f&&B<=de){for(;L<B;){var Z=L+B>>>1,ae=c[Z];ae!==null&&!Zo(ae)&&(b?ae<=f:ae<f)?L=Z+1:B=Z}return B}return sh(c,f,Wo,b)}function sh(c,f,b,L){var B=0,Z=c==null?0:c.length;if(Z===0)return 0;f=b(f);for(var ae=f!==f,he=f===null,ye=Zo(f),Ue=f===t;B<Z;){var $e=ml((B+Z)/2),Ze=b(c[$e]),vt=Ze!==t,Ht=Ze===null,nn=Ze===Ze,Dn=Zo(Ze);if(ae)var rn=L||nn;else Ue?rn=nn&&(L||vt):he?rn=nn&&vt&&(L||!Ht):ye?rn=nn&&vt&&!Ht&&(L||!Dn):Ht||Dn?rn=!1:rn=L?Ze<=f:Ze<f;rn?B=$e+1:Z=$e}return Pr(Z,_e)}function dg(c,f){for(var b=-1,L=c.length,B=0,Z=[];++b<L;){var ae=c[b],he=f?f(ae):ae;if(!b||!Is(he,ye)){var ye=he;Z[B++]=ae===0?0:ae}}return Z}function hg(c){return typeof c=="number"?c:Zo(c)?A:+c}function cr(c){if(typeof c=="string")return c;if(Cn(c))return mi(c,cr)+"";if(Zo(c))return yp?yp.call(c):"";var f=c+"";return f=="0"&&1/c==-re?"-0":f}function ko(c,f,b){var L=-1,B=zh,Z=c.length,ae=!0,he=[],ye=he;if(b)ae=!1,B=gp;else if(Z>=i){var Ue=f?null:io(c);if(Ue)return su(Ue);ae=!1,B=Ga,ye=new ea}else ye=f?[]:he;e:for(;++L<Z;){var $e=c[L],Ze=f?f($e):$e;if($e=b||$e!==0?$e:0,ae&&Ze===Ze){for(var vt=ye.length;vt--;)if(ye[vt]===Ze)continue e;f&&ye.push(Ze),he.push($e)}else B(ye,Ze,b)||(ye!==he&&ye.push(Ze),he.push($e))}return he}function yc(c,f){return f=Da(f,c),c=Sg(c,f),c==null||delete c[ro(Fr(f))]}function fg(c,f,b,L){return yo(c,f,b(Yo(c,f)),L)}function nd(c,f,b,L){for(var B=c.length,Z=L?B:-1;(L?Z--:++Z<B)&&f(c[Z],Z,c););return b?Kr(c,L?0:Z,L?Z+1:B):Kr(c,L?Z+1:0,L?B:Z)}function xp(c,f){var b=c;return b instanceof an&&(b=b.value()),pp(f,function(L,B){return B.func.apply(B.thisArg,Ka([L],B.args))},b)}function gg(c,f,b){var L=c.length;if(L<2)return L?ko(c[0]):[];for(var B=-1,Z=ke(L);++B<L;)for(var ae=c[B],he=-1;++he<L;)he!=B&&(Z[B]=Cl(Z[B]||ae,c[he],f,b));return ko(mr(Z,1),f,b)}function pg(c,f,b){for(var L=-1,B=c.length,Z=f.length,ae={};++L<B;){var he=L<Z?f[L]:t;b(ae,c[L],he)}return ae}function of(c){return Ui(c)?c:[]}function ah(c){return typeof c=="function"?c:Wo}function Da(c,f){return Cn(c)?c:Ap(c,f)?[c]:R0(ri(c))}var c_=Ln;function di(c,f,b){var L=c.length;return b=b===t?L:b,!f&&b>=L?c:Kr(c,f,b)}var sf=Vl||function(c){return Ki.clearTimeout(c)};function d_(c,f){if(f)return c.slice();var b=c.length,L=At?At(b):new c.constructor(b);return c.copy(L),L}function fu(c){var f=new c.constructor(c.byteLength);return new tt(f).set(new tt(c)),f}function Dp(c,f){var b=f?fu(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function y1(c){var f=new c.constructor(c.source,ce.exec(c));return f.lastIndex=c.lastIndex,f}function x0(c){return Rs?ci(Rs.call(c)):{}}function tl(c,f){var b=f?fu(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function h_(c,f){if(c!==f){var b=c!==t,L=c===null,B=c===c,Z=Zo(c),ae=f!==t,he=f===null,ye=f===f,Ue=Zo(f);if(!he&&!Ue&&!Z&&c>f||Z&&ae&&ye&&!he&&!Ue||L&&ae&&ye||!b&&ye||!B)return 1;if(!L&&!Z&&!Ue&&c<f||Ue&&b&&B&&!L&&!Z||he&&b&&B||!ae&&B||!ye)return-1}return 0}function Ip(c,f,b){for(var L=-1,B=c.criteria,Z=f.criteria,ae=B.length,he=b.length;++L<ae;){var ye=h_(B[L],Z[L]);if(ye){if(L>=he)return ye;var Ue=b[L];return ye*(Ue=="desc"?-1:1)}}return c.index-f.index}function mg(c,f,b,L){for(var B=-1,Z=c.length,ae=b.length,he=-1,ye=f.length,Ue=ir(Z-ae,0),$e=ke(ye+Ue),Ze=!L;++he<ye;)$e[he]=f[he];for(;++B<ae;)(Ze||B<Z)&&($e[b[B]]=c[B]);for(;Ue--;)$e[he++]=c[B++];return $e}function _g(c,f,b,L){for(var B=-1,Z=c.length,ae=-1,he=b.length,ye=-1,Ue=f.length,$e=ir(Z-he,0),Ze=ke($e+Ue),vt=!L;++B<$e;)Ze[B]=c[B];for(var Ht=B;++ye<Ue;)Ze[Ht+ye]=f[ye];for(;++ae<he;)(vt||B<Z)&&(Ze[Ht+b[ae]]=c[B++]);return Ze}function Gr(c,f){var b=-1,L=c.length;for(f||(f=ke(L));++b<L;)f[b]=c[b];return f}function kr(c,f,b,L){var B=!b;b||(b={});for(var Z=-1,ae=f.length;++Z<ae;){var he=f[Z],ye=L?L(b[he],c[he],he,b,c):t;ye===t&&(ye=c[he]),B?Do(b,he,ye):qu(b,he,ye)}return b}function id(c,f){return kr(c,dh(c),f)}function D0(c,f){return kr(c,gu(c),f)}function rd(c,f){return function(b,L){var B=Cn(b)?v0:$l,Z=f?f():{};return B(b,c,qt(L,2),Z)}}function wl(c){return Ln(function(f,b){var L=-1,B=b.length,Z=B>1?b[B-1]:t,ae=B>2?b[2]:t;for(Z=c.length>3&&typeof Z=="function"?(B--,Z):t,ae&&Di(b[0],b[1],ae)&&(Z=B<3?t:Z,B=1),f=ci(f);++L<B;){var he=b[L];he&&c(f,he,L,Z)}return f})}function f_(c,f){return function(b,L){if(b==null)return b;if(!Fo(b))return c(b,L);for(var B=b.length,Z=f?B:-1,ae=ci(b);(f?Z--:++Z<B)&&L(ae[Z],Z,ae)!==!1;);return b}}function vg(c){return function(f,b,L){for(var B=-1,Z=ci(f),ae=L(f),he=ae.length;he--;){var ye=ae[c?he:++B];if(b(Z[ye],ye,Z)===!1)break}return f}}function I0(c,f,b){var L=f&x,B=ka(c);function Z(){var ae=this&&this!==Ki&&this instanceof Z?B:c;return ae.apply(L?b:this,arguments)}return Z}function bg(c){return function(f){f=ri(f);var b=Bu(f)?Mo(f):t,L=b?b[0]:f.charAt(0),B=b?di(b,1).join(""):f.slice(1);return L[c]()+B}}function Ia(c){return function(f){return pp(Fy(Dl(f).replace(r1,"")),c,"")}}function ka(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=Uu(c.prototype),L=c.apply(b,f);return Fi(L)?L:b}}function fy(c,f,b){var L=ka(c);function B(){for(var Z=arguments.length,ae=ke(Z),he=Z,ye=Sl(B);he--;)ae[he]=arguments[he];var Ue=Z<3&&ae[0]!==ye&&ae[Z-1]!==ye?[]:ys(ae,ye);if(Z-=Ue.length,Z<b)return g_(c,f,Sc,B.placeholder,t,ae,Ue,t,t,b-Z);var $e=this&&this!==Ki&&this instanceof B?L:c;return _o($e,this,ae)}return B}function wc(c){return function(f,b,L){var B=ci(f);if(!Fo(f)){var Z=qt(b,3);f=wr(f),b=function(he){return Z(B[he],he,B)}}var ae=c(f,b,L);return ae>-1?B[Z?f[ae]:ae]:t}}function od(c){return Hs(function(f){var b=f.length,L=b,B=Ei.prototype.thru;for(c&&f.reverse();L--;){var Z=f[L];if(typeof Z!="function")throw new Uo(s);if(B&&!ae&&sd(Z)=="wrapper")var ae=new Ei([],!0)}for(L=ae?L:b;++L<b;){Z=f[L];var he=sd(Z),ye=he=="wrapper"?df(Z):t;ye&&pu(ye[0])&&ye[1]==(z|M|F|$)&&!ye[4].length&&ye[9]==1?ae=ae[sd(ye[0])].apply(ae,ye[3]):ae=Z.length==1&&pu(Z)?ae[he]():ae.thru(Z)}return function(){var Ue=arguments,$e=Ue[0];if(ae&&Ue.length==1&&Cn($e))return ae.plant($e).value();for(var Ze=0,vt=b?f[Ze].apply(this,Ue):$e;++Ze<b;)vt=f[Ze].call(this,vt);return vt}})}function Sc(c,f,b,L,B,Z,ae,he,ye,Ue){var $e=f&z,Ze=f&x,vt=f&T,Ht=f&(M|W),nn=f&G,Dn=vt?t:ka(c);function rn(){for(var Mn=arguments.length,Un=ke(Mn),Qo=Mn;Qo--;)Un[Qo]=arguments[Qo];if(Ht)var wo=Sl(rn),Jo=qm(Un,wo);if(L&&(Un=mg(Un,L,B,Ht)),Z&&(Un=_g(Un,Z,ae,Ht)),Mn-=Jo,Ht&&Mn<Ue){var Ji=ys(Un,wo);return g_(c,f,Sc,rn.placeholder,b,Un,Ji,he,ye,Ue-Mn)}var $s=Ze?b:this,sl=vt?$s[c]:c;return Mn=Un.length,he?Un=Tr(Un,he):nn&&Mn>1&&Un.reverse(),$e&&ye<Mn&&(Un.length=ye),this&&this!==Ki&&this instanceof rn&&(sl=Dn||ka(sl)),sl.apply($s,Un)}return rn}function af(c,f){return function(b,L){return Bs(b,c,f(L),{})}}function lf(c,f){return function(b,L){var B;if(b===t&&L===t)return f;if(b!==t&&(B=b),L!==t){if(B===t)return L;typeof b=="string"||typeof L=="string"?(b=cr(b),L=cr(L)):(b=hg(b),L=hg(L)),B=c(b,L)}return B}}function Cg(c){return Hs(function(f){return f=mi(f,Ir(qt())),Ln(function(b){var L=this;return c(f,function(B){return _o(B,L,b)})})})}function lh(c,f){f=f===t?" ":cr(f);var b=f.length;if(b<2)return b?oh(f,c):f;var L=oh(f,Xa(c/au(f)));return Bu(f)?di(Mo(L),0,c).join(""):L.slice(0,c)}function k0(c,f,b,L){var B=f&x,Z=ka(c);function ae(){for(var he=-1,ye=arguments.length,Ue=-1,$e=L.length,Ze=ke($e+ye),vt=this&&this!==Ki&&this instanceof ae?Z:c;++Ue<$e;)Ze[Ue]=L[Ue];for(;ye--;)Ze[Ue++]=arguments[++he];return _o(vt,B?b:this,Ze)}return ae}function kp(c){return function(f,b,L){return L&&typeof L!="number"&&Di(f,b,L)&&(b=L=t),f=Ra(f),b===t?(b=f,f=0):b=Ra(b),L=L===t?f<b?1:-1:Ra(L),rf(f,b,L,c)}}function uh(c){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=zi(f),b=zi(b)),c(f,b)}}function g_(c,f,b,L,B,Z,ae,he,ye,Ue){var $e=f&M,Ze=$e?ae:t,vt=$e?t:ae,Ht=$e?Z:t,nn=$e?t:Z;f|=$e?F:Q,f&=~($e?Q:F),f&k||(f&=~(x|T));var Dn=[c,f,B,Ht,Ze,nn,vt,he,ye,Ue],rn=b.apply(t,Dn);return pu(c)&&Ec(rn,Dn),rn.placeholder=L,El(rn,c,f)}function Vs(c){var f=Pi[c];return function(b,L){if(b=zi(b),L=L==null?0:Pr(yn(L),292),L&&Gh(b)){var B=(ri(b)+"e").split("e"),Z=f(B[0]+"e"+(+B[1]+L));return B=(ri(Z)+"e").split("e"),+(B[0]+"e"+(+B[1]-L))}return f(b)}}var io=vl&&1/su(new vl([,-0]))[1]==re?function(c){return new vl(c)}:tb;function Gl(c){return function(f){var b=Cr(f);return b==sn?Wu(f):b==Tt?b0(f):cy(f,c(f))}}function na(c,f,b,L,B,Z,ae,he){var ye=f&T;if(!ye&&typeof c!="function")throw new Uo(s);var Ue=L?L.length:0;if(Ue||(f&=~(F|Q),L=B=t),ae=ae===t?ae:ir(yn(ae),0),he=he===t?he:yn(he),Ue-=B?B.length:0,f&Q){var $e=L,Ze=B;L=B=t}var vt=ye?t:df(c),Ht=[c,f,b,L,B,$e,Ze,Z,ae,he];if(vt&&v_(Ht,vt),c=Ht[0],f=Ht[1],b=Ht[2],L=Ht[3],B=Ht[4],he=Ht[9]=Ht[9]===t?ye?0:c.length:ir(Ht[9]-Ue,0),!he&&f&(M|W)&&(f&=~(M|W)),!f||f==x)var nn=I0(c,f,b);else f==M||f==W?nn=fy(c,f,he):(f==F||f==(x|F))&&!B.length?nn=k0(c,f,b,L):nn=Sc.apply(t,Ht);var Dn=vt?Ls:Ec;return El(Dn(nn,Ht),c,f)}function p_(c,f,b,L){return c===t||Is(c,Ya[b])&&!$n.call(L,b)?f:c}function uf(c,f,b,L,B,Z){return Fi(c)&&Fi(f)&&(Z.set(f,c),Kl(c,f,t,uf,Z),Z.delete(f)),c}function cf(c){return bf(c)?t:c}function yg(c,f,b,L,B,Z){var ae=b&C,he=c.length,ye=f.length;if(he!=ye&&!(ae&&ye>he))return!1;var Ue=Z.get(c),$e=Z.get(f);if(Ue&&$e)return Ue==f&&$e==c;var Ze=-1,vt=!0,Ht=b&S?new ea:t;for(Z.set(c,f),Z.set(f,c);++Ze<he;){var nn=c[Ze],Dn=f[Ze];if(L)var rn=ae?L(Dn,nn,Ze,f,c,Z):L(nn,Dn,Ze,c,f,Z);if(rn!==t){if(rn)continue;vt=!1;break}if(Ht){if(!mp(f,function(Mn,Un){if(!Ga(Ht,Un)&&(nn===Mn||B(nn,Mn,b,L,Z)))return Ht.push(Un)})){vt=!1;break}}else if(!(nn===Dn||B(nn,Dn,b,L,Z))){vt=!1;break}}return Z.delete(c),Z.delete(f),vt}function T0(c,f,b,L,B,Z,ae){switch(b){case U:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case oe:return!(c.byteLength!=f.byteLength||!Z(new tt(c),new tt(f)));case Rt:case lt:case Pt:return Is(+c,+f);case zt:return c.name==f.name&&c.message==f.message;case Bt:case mt:return c==f+"";case sn:var he=Wu;case Tt:var ye=L&C;if(he||(he=su),c.size!=f.size&&!ye)return!1;var Ue=ae.get(c);if(Ue)return Ue==f;L|=S,ae.set(c,f);var $e=yg(he(c),he(f),L,B,Z,ae);return ae.delete(c),$e;case Qt:if(Rs)return Rs.call(c)==Rs.call(f)}return!1}function N0(c,f,b,L,B,Z){var ae=b&C,he=Zu(c),ye=he.length,Ue=Zu(f),$e=Ue.length;if(ye!=$e&&!ae)return!1;for(var Ze=ye;Ze--;){var vt=he[Ze];if(!(ae?vt in f:$n.call(f,vt)))return!1}var Ht=Z.get(c),nn=Z.get(f);if(Ht&&nn)return Ht==f&&nn==c;var Dn=!0;Z.set(c,f),Z.set(f,c);for(var rn=ae;++Ze<ye;){vt=he[Ze];var Mn=c[vt],Un=f[vt];if(L)var Qo=ae?L(Un,Mn,vt,f,c,Z):L(Mn,Un,vt,c,f,Z);if(!(Qo===t?Mn===Un||B(Mn,Un,b,L,Z):Qo)){Dn=!1;break}rn||(rn=vt=="constructor")}if(Dn&&!rn){var wo=c.constructor,Jo=f.constructor;wo!=Jo&&"constructor"in c&&"constructor"in f&&!(typeof wo=="function"&&wo instanceof wo&&typeof Jo=="function"&&Jo instanceof Jo)&&(Dn=!1)}return Z.delete(c),Z.delete(f),Dn}function Hs(c){return Eg(hf(c,t,gh),c+"")}function Zu(c){return th(c,wr,dh)}function Xu(c){return th(c,Bo,gu)}var df=Hu?function(c){return Hu.get(c)}:tb;function sd(c){for(var f=c.name+"",b=fa[f],L=$n.call(fa,f)?b.length:0;L--;){var B=b[L],Z=B.func;if(Z==null||Z==c)return B.name}return f}function Sl(c){var f=$n.call(q,"placeholder")?q:c;return f.placeholder}function qt(){var c=q.iteratee||J0;return c=c===J0?ef:c,arguments.length?c(arguments[0],arguments[1]):c}function ch(c,f){var b=c.__data__;return Tn(f)?b[typeof f=="string"?"string":"hash"]:b.map}function ad(c){for(var f=wr(c),b=f.length;b--;){var L=f[b],B=c[L];f[b]=[L,B,_u(B)]}return f}function _a(c,f){var b=Jf(c,f);return s_(b)?b:t}function Tp(c){var f=$n.call(c,Za),b=c[Za];try{c[Za]=t;var L=!0}catch{}var B=qd.call(c);return L&&(f?c[Za]=b:delete c[Za]),B}var dh=Zc?function(c){return c==null?[]:(c=ci(c),qa(Zc(c),function(f){return vi.call(c,f)}))}:$_,gu=Zc?function(c){for(var f=[];c;)Ka(f,dh(c)),c=gt(c);return f}:$_,Cr=$r;(Yd&&Cr(new Yd(new ArrayBuffer(1)))!=U||_l&&Cr(new _l)!=sn||Zd&&Cr(Zd.resolve())!=un||vl&&Cr(new vl)!=Tt||uu&&Cr(new uu)!=We)&&(Cr=function(c){var f=$r(c),b=f==xn?c.constructor:t,L=b?oo(b):"";if(L)switch(L){case ig:return U;case Xd:return sn;case p1:return un;case rg:return Tt;case Ul:return We}return f});function A0(c,f,b){for(var L=-1,B=b.length;++L<B;){var Z=b[L],ae=Z.size;switch(Z.type){case"drop":c+=ae;break;case"dropRight":f-=ae;break;case"take":f=Pr(f,c+ae);break;case"takeRight":c=ir(c,f-ae);break}}return{start:c,end:f}}function Np(c){var f=c.match(pt);return f?f[1].split(at):[]}function m_(c,f,b){f=Da(f,c);for(var L=-1,B=f.length,Z=!1;++L<B;){var ae=ro(f[L]);if(!(Z=c!=null&&b(c,ae)))break;c=c[ae]}return Z||++L!=B?Z:(B=c==null?0:c.length,!!B&&Bp(B)&&hs(ae,B)&&(Cn(c)||yu(c)))}function O0(c){var f=c.length,b=new c.constructor(f);return f&&typeof c[0]=="string"&&$n.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function nl(c){return typeof c.constructor=="function"&&!mu(c)?Uu(gt(c)):{}}function va(c,f,b){var L=c.constructor;switch(f){case oe:return fu(c);case Rt:case lt:return new L(+c);case U:return Dp(c,b);case X:case we:case Te:case qe:case ze:case bt:case bn:case En:case nt:return tl(c,b);case sn:return new L;case Pt:case mt:return new L(c);case Bt:return y1(c);case Tt:return new L;case Qt:return x0(c)}}function w1(c,f){var b=f.length;if(!b)return c;var L=b-1;return f[L]=(b>1?"& ":"")+f[L],f=f.join(b>2?", ":" "),c.replace(Oe,`{
/* [wrapped with `+f+`] */
`)}function gy(c){return Cn(c)||yu(c)||!!(us&&c&&c[us])}function hs(c,f){var b=typeof c;return f=f??se,!!f&&(b=="number"||b!="symbol"&&ht.test(c))&&c>-1&&c%1==0&&c<f}function Di(c,f,b){if(!Fi(b))return!1;var L=typeof f;return(L=="number"?Fo(b)&&hs(f,b.length):L=="string"&&f in b)?Is(b[f],c):!1}function Ap(c,f){if(Cn(c))return!1;var b=typeof c;return b=="number"||b=="symbol"||b=="boolean"||c==null||Zo(c)?!0:Ye.test(c)||!et.test(c)||f!=null&&c in ci(f)}function Tn(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function pu(c){var f=sd(c),b=q[f];if(typeof b!="function"||!(f in an.prototype))return!1;if(c===b)return!0;var L=df(b);return!!L&&c===L[0]}function Op(c){return!!ng&&ng in c}var __=Yc?ol:nb;function mu(c){var f=c&&c.constructor,b=typeof f=="function"&&f.prototype||Ya;return c===b}function _u(c){return c===c&&!Fi(c)}function si(c,f){return function(b){return b==null?!1:b[c]===f&&(f!==t||c in ci(b))}}function wg(c){var f=Qe(c,function(L){return b.size===u&&b.clear(),L}),b=f.cache;return f}function v_(c,f){var b=c[1],L=f[1],B=b|L,Z=B<(x|T|z),ae=L==z&&b==M||L==z&&b==$&&c[7].length<=f[8]||L==(z|$)&&f[7].length<=f[8]&&b==M;if(!(Z||ae))return c;L&x&&(c[2]=f[2],B|=b&x?0:k);var he=f[3];if(he){var ye=c[3];c[3]=ye?mg(ye,he,f[4]):he,c[4]=ye?ys(c[3],d):f[4]}return he=f[5],he&&(ye=c[5],c[5]=ye?_g(ye,he,f[6]):he,c[6]=ye?ys(c[5],d):f[6]),he=f[7],he&&(c[7]=he),L&z&&(c[8]=c[8]==null?f[8]:Pr(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=B,c}function hh(c){var f=[];if(c!=null)for(var b in ci(c))f.push(b);return f}function S1(c){return qd.call(c)}function hf(c,f,b){return f=ir(f===t?c.length-1:f,0),function(){for(var L=arguments,B=-1,Z=ir(L.length-f,0),ae=ke(Z);++B<Z;)ae[B]=L[f+B];B=-1;for(var he=ke(f+1);++B<f;)he[B]=L[B];return he[f]=b(ae),_o(c,this,he)}}function Sg(c,f){return f.length<2?c:Yo(c,Kr(f,0,-1))}function Tr(c,f){for(var b=c.length,L=Pr(f.length,b),B=Gr(c);L--;){var Z=f[L];c[L]=hs(Z,b)?B[Z]:t}return c}function il(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var Ec=b_(Ls),Qu=S0||function(c,f){return Ki.setTimeout(c,f)},Eg=b_(u_);function El(c,f,b){var L=f+"";return Eg(c,w1(L,C_(Np(L),b)))}function b_(c){var f=0,b=0;return function(){var L=dy(),B=O-(L-b);if(b=L,B>0){if(++f>=D)return arguments[0]}else f=0;return c.apply(t,arguments)}}function Ta(c,f){var b=-1,L=c.length,B=L-1;for(f=f===t?L:f;++b<f;){var Z=nf(b,B),ae=c[Z];c[Z]=c[b],c[b]=ae}return c.length=f,c}var R0=wg(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(it,function(b,L,B,Z){f.push(B?Z.replace(R,"$1"):L||b)}),f});function ro(c){if(typeof c=="string"||Zo(c))return c;var f=c+"";return f=="0"&&1/c==-re?"-0":f}function oo(c){if(c!=null){try{return jd.call(c)}catch{}try{return c+""}catch{}}return""}function C_(c,f){return vo(Me,function(b){var L="_."+b[0];f&b[1]&&!zh(c,L)&&c.push(L)}),c.sort()}function y_(c){if(c instanceof an)return c.clone();var f=new Ei(c.__wrapped__,c.__chain__);return f.__actions__=Gr(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function M0(c,f,b){(b?Di(c,f,b):f===t)?f=1:f=ir(yn(f),0);var L=c==null?0:c.length;if(!L||f<1)return[];for(var B=0,Z=0,ae=ke(Xa(L/f));B<L;)ae[Z++]=Kr(c,B,B+=f);return ae}function w_(c){for(var f=-1,b=c==null?0:c.length,L=0,B=[];++f<b;){var Z=c[f];Z&&(B[L++]=Z)}return B}function P0(){var c=arguments.length;if(!c)return[];for(var f=ke(c-1),b=arguments[0],L=c;L--;)f[L-1]=arguments[L];return Ka(Cn(b)?Gr(b):[b],mr(f,1))}var Na=Ln(function(c,f){return Ui(c)?Cl(c,mr(f,1,Ui,!0)):[]}),yr=Ln(function(c,f){var b=Fr(f);return Ui(b)&&(b=t),Ui(c)?Cl(c,mr(f,1,Ui,!0),qt(b,2)):[]}),Us=Ln(function(c,f){var b=Fr(f);return Ui(b)&&(b=t),Ui(c)?Cl(c,mr(f,1,Ui,!0),t,b):[]});function xs(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),Kr(c,f<0?0:f,L)):[]}function ba(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),f=L-f,Kr(c,0,f<0?0:f)):[]}function Yl(c,f){return c&&c.length?nd(c,qt(f,3),!0,!0):[]}function Lg(c,f){return c&&c.length?nd(c,qt(f,3),!0):[]}function Ds(c,f,b,L){var B=c==null?0:c.length;return B?(b&&typeof b!="number"&&Di(c,f,b)&&(b=0,L=B),n_(c,f,b,L)):[]}function fh(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=b==null?0:yn(b);return B<0&&(B=ir(L+B,0)),Gc(c,qt(f,3),B)}function ld(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=L-1;return b!==t&&(B=yn(b),B=b<0?ir(L+B,0):Pr(B,L-1)),Gc(c,qt(f,3),B,!0)}function gh(c){var f=c==null?0:c.length;return f?mr(c,1):[]}function S_(c){var f=c==null?0:c.length;return f?mr(c,re):[]}function ud(c,f){var b=c==null?0:c.length;return b?(f=f===t?1:yn(f),mr(c,f)):[]}function Aa(c){for(var f=-1,b=c==null?0:c.length,L={};++f<b;){var B=c[f];L[B[0]]=B[1]}return L}function xg(c){return c&&c.length?c[0]:t}function ff(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=b==null?0:yn(b);return B<0&&(B=ir(L+B,0)),ts(c,f,B)}function vu(c){var f=c==null?0:c.length;return f?Kr(c,0,-1):[]}var Rp=Ln(function(c){var f=mi(c,of);return f.length&&f[0]===c[0]?Fs(f):[]}),bu=Ln(function(c){var f=Fr(c),b=mi(c,of);return f===Fr(b)?f=t:b.pop(),b.length&&b[0]===c[0]?Fs(b,qt(f,2)):[]}),Ll=Ln(function(c){var f=Fr(c),b=mi(c,of);return f=typeof f=="function"?f:t,f&&b.pop(),b.length&&b[0]===c[0]?Fs(b,t,f):[]});function E_(c,f){return c==null?"":bp.call(c,f)}function Fr(c){var f=c==null?0:c.length;return f?c[f-1]:t}function L_(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=L;return b!==t&&(B=yn(b),B=B<0?ir(L+B,0):Pr(B,L-1)),f===f?d1(c,f,B):Gc(c,Um,B,!0)}function Mp(c,f){return c&&c.length?ed(c,yn(f)):t}var F0=Ln(Dg);function Dg(c,f){return c&&c.length&&f&&f.length?no(c,f):c}function x_(c,f,b){return c&&c.length&&f&&f.length?no(c,f,qt(b,2)):c}function rl(c,f,b){return c&&c.length&&f&&f.length?no(c,f,t,b):c}var ph=Hs(function(c,f){var b=c==null?0:c.length,L=og(c,f);return ug(c,mi(f,function(B){return hs(B,b)?+B:B}).sort(h_)),L});function Ju(c,f){var b=[];if(!(c&&c.length))return b;var L=-1,B=[],Z=c.length;for(f=qt(f,3);++L<Z;){var ae=c[L];f(ae,L,c)&&(b.push(ae),B.push(L))}return ug(c,B),b}function ia(c){return c==null?c:Yh.call(c)}function E1(c,f,b){var L=c==null?0:c.length;return L?(b&&typeof b!="number"&&Di(c,f,b)?(f=0,b=L):(f=f==null?0:yn(f),b=b===t?L:yn(b)),Kr(c,f,b)):[]}function B0(c,f){return $o(c,f)}function D_(c,f,b){return sh(c,f,qt(b,2))}function L1(c,f){var b=c==null?0:c.length;if(b){var L=$o(c,f);if(L<b&&Is(c[L],f))return L}return-1}function cd(c,f){return $o(c,f,!0)}function x1(c,f,b){return sh(c,f,qt(b,2),!0)}function W0(c,f){var b=c==null?0:c.length;if(b){var L=$o(c,f,!0)-1;if(Is(c[L],f))return L}return-1}function gf(c){return c&&c.length?dg(c):[]}function I_(c,f){return c&&c.length?dg(c,qt(f,2)):[]}function pf(c){var f=c==null?0:c.length;return f?Kr(c,1,f):[]}function D1(c,f,b){return c&&c.length?(f=b||f===t?1:yn(f),Kr(c,0,f<0?0:f)):[]}function I1(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),f=L-f,Kr(c,f<0?0:f,L)):[]}function V0(c,f){return c&&c.length?nd(c,qt(f,3),!1,!0):[]}function k_(c,f){return c&&c.length?nd(c,qt(f,3)):[]}var py=Ln(function(c){return ko(mr(c,1,Ui,!0))}),Cu=Ln(function(c){var f=Fr(c);return Ui(f)&&(f=t),ko(mr(c,1,Ui,!0),qt(f,2))}),k1=Ln(function(c){var f=Fr(c);return f=typeof f=="function"?f:t,ko(mr(c,1,Ui,!0),t,f)});function T1(c){return c&&c.length?ko(c):[]}function mf(c,f){return c&&c.length?ko(c,qt(f,2)):[]}function N1(c,f){return f=typeof f=="function"?f:t,c&&c.length?ko(c,t,f):[]}function Lc(c){if(!(c&&c.length))return[];var f=0;return c=qa(c,function(b){if(Ui(b))return f=ir(b.length,f),!0}),La(f,function(b){return mi(c,Qf(b))})}function T_(c,f){if(!(c&&c.length))return[];var b=Lc(c);return f==null?b:mi(b,function(L){return _o(f,t,L)})}var ns=Ln(function(c,f){return Ui(c)?Cl(c,f):[]}),my=Ln(function(c){return gg(qa(c,Ui))}),N_=Ln(function(c){var f=Fr(c);return Ui(f)&&(f=t),gg(qa(c,Ui),qt(f,2))}),_y=Ln(function(c){var f=Fr(c);return f=typeof f=="function"?f:t,gg(qa(c,Ui),t,f)}),vy=Ln(Lc);function A1(c,f){return pg(c||[],f||[],qu)}function O1(c,f){return pg(c||[],f||[],yo)}var by=Ln(function(c){var f=c.length,b=f>1?c[f-1]:t;return b=typeof b=="function"?(c.pop(),b):t,T_(c,b)});function xl(c){var f=q(c);return f.__chain__=!0,f}function H0(c,f){return f(c),c}function _f(c,f){return f(c)}var mh=Hs(function(c){var f=c.length,b=f?c[0]:0,L=this.__wrapped__,B=function(Z){return og(Z,c)};return f>1||this.__actions__.length||!(L instanceof an)||!hs(b)?this.thru(B):(L=L.slice(b,+b+(f?1:0)),L.__actions__.push({func:_f,args:[B],thisArg:t}),new Ei(L,this.__chain__).thru(function(Z){return f&&!Z.length&&Z.push(t),Z}))});function A_(){return xl(this)}function vf(){return new Ei(this.value(),this.__chain__)}function O_(){this.__values__===t&&(this.__values__=fd(this.value()));var c=this.__index__>=this.__values__.length,f=c?t:this.__values__[this.__index__++];return{done:c,value:f}}function U0(){return this}function z0(c){for(var f,b=this;b instanceof zl;){var L=y_(b);L.__index__=0,L.__values__=t,f?B.__wrapped__=L:f=L;var B=L;b=b.__wrapped__}return B.__wrapped__=c,f}function Cy(){var c=this.__wrapped__;if(c instanceof an){var f=c;return this.__actions__.length&&(f=new an(this)),f=f.reverse(),f.__actions__.push({func:_f,args:[ia],thisArg:t}),new Ei(f,this.__chain__)}return this.thru(ia)}function $0(){return xp(this.__wrapped__,this.__actions__)}var yy=rd(function(c,f,b){$n.call(c,b)?++c[b]:Do(c,b,1)});function R1(c,f,b){var L=Cn(c)?qr:Gu;return b&&Di(c,f,b)&&(f=t),L(c,qt(f,3))}function M1(c,f){var b=Cn(c)?qa:Jd;return b(c,qt(f,3))}var R_=wc(fh),Ig=wc(ld);function j0(c,f){return mr(_h(c,f),1)}function q0(c,f){return mr(_h(c,f),re)}function wy(c,f,b){return b=b===t?1:yn(b),mr(_h(c,f),b)}function M_(c,f){var b=Cn(c)?vo:pa;return b(c,qt(f,3))}function Pp(c,f){var b=Cn(c)?eo:jl;return b(c,qt(f,3))}var P_=rd(function(c,f,b){$n.call(c,b)?c[b].push(f):Do(c,b,[f])});function K0(c,f,b,L){c=Fo(c)?c:nc(c),b=b&&!L?yn(b):0;var B=c.length;return b<0&&(b=ir(B+b,0)),wu(c)?b<=B&&c.indexOf(f,b)>-1:!!B&&ts(c,f,b)>-1}var F_=Ln(function(c,f,b){var L=-1,B=typeof f=="function",Z=Fo(c)?ke(c.length):[];return pa(c,function(ae){Z[++L]=B?_o(f,ae,b):hu(ae,f,b)}),Z}),P1=rd(function(c,f,b){Do(c,b,f)});function _h(c,f){var b=Cn(c)?mi:Cc;return b(c,qt(f,3))}function B_(c,f,b,L){return c==null?[]:(Cn(f)||(f=f==null?[]:[f]),b=L?t:b,Cn(b)||(b=b==null?[]:[b]),Lp(c,f,b))}var W_=rd(function(c,f,b){c[b?0:1].push(f)},function(){return[[],[]]});function Fp(c,f,b){var L=Cn(c)?pp:$m,B=arguments.length<3;return L(c,qt(f,4),b,B,pa)}function Sy(c,f,b){var L=Cn(c)?a1:$m,B=arguments.length<3;return L(c,qt(f,4),b,B,jl)}function V_(c,f){var b=Cn(c)?qa:Jd;return b(c,ut(qt(f,3)))}function g(c){var f=Cn(c)?ju:td;return f(c)}function m(c,f,b){(b?Di(c,f,b):f===t)?f=1:f=yn(f);var L=Cn(c)?Qh:zo;return L(c,f)}function w(c){var f=Cn(c)?b1:cg;return f(c)}function N(c){if(c==null)return 0;if(Fo(c))return wu(c)?au(c):c.length;var f=Cr(c);return f==sn||f==Tt?c.size:el(c).length}function H(c,f,b){var L=Cn(c)?mp:hy;return b&&Di(c,f,b)&&(f=t),L(c,qt(f,3))}var J=Ln(function(c,f){if(c==null)return[];var b=f.length;return b>1&&Di(c,f[0],f[1])?f=[]:b>2&&Di(f[0],f[1],f[2])&&(f=[f[0]]),Lp(c,mr(f,1),[])}),ge=to||function(){return Ki.Date.now()};function Re(c,f){if(typeof f!="function")throw new Uo(s);return c=yn(c),function(){if(--c<1)return f.apply(this,arguments)}}function Ke(c,f,b){return f=b?t:f,f=c&&f==null?c.length:f,na(c,z,t,t,t,t,f)}function _t(c,f){var b;if(typeof f!="function")throw new Uo(s);return c=yn(c),function(){return--c>0&&(b=f.apply(this,arguments)),c<=1&&(f=t),b}}var Yt=Ln(function(c,f,b){var L=x;if(b.length){var B=ys(b,Sl(Yt));L|=F}return na(c,L,f,b,B)}),en=Ln(function(c,f,b){var L=x|T;if(b.length){var B=ys(b,Sl(en));L|=F}return na(f,L,c,b,B)});function Zt(c,f,b){f=b?t:f;var L=na(c,M,t,t,t,t,t,f);return L.placeholder=Zt.placeholder,L}function Nn(c,f,b){f=b?t:f;var L=na(c,W,t,t,t,t,t,f);return L.placeholder=Nn.placeholder,L}function Hn(c,f,b){var L,B,Z,ae,he,ye,Ue=0,$e=!1,Ze=!1,vt=!0;if(typeof c!="function")throw new Uo(s);f=zi(f)||0,Fi(b)&&($e=!!b.leading,Ze="maxWait"in b,Z=Ze?ir(zi(b.maxWait)||0,f):Z,vt="trailing"in b?!!b.trailing:vt);function Ht(Ji){var $s=L,sl=B;return L=B=t,Ue=Ji,ae=c.apply(sl,$s),ae}function nn(Ji){return Ue=Ji,he=Qu(Mn,f),$e?Ht(Ji):ae}function Dn(Ji){var $s=Ji-ye,sl=Ji-Ue,v=f-$s;return Ze?Pr(v,Z-sl):v}function rn(Ji){var $s=Ji-ye,sl=Ji-Ue;return ye===t||$s>=f||$s<0||Ze&&sl>=Z}function Mn(){var Ji=ge();if(rn(Ji))return Un(Ji);he=Qu(Mn,Dn(Ji))}function Un(Ji){return he=t,vt&&L?Ht(Ji):(L=B=t,ae)}function Qo(){he!==t&&sf(he),Ue=0,L=ye=B=he=t}function wo(){return he===t?ae:Un(ge())}function Jo(){var Ji=ge(),$s=rn(Ji);if(L=arguments,B=this,ye=Ji,$s){if(he===t)return nn(ye);if(Ze)return sf(he),he=Qu(Mn,f),Ht(ye)}return he===t&&(he=Qu(Mn,f)),ae}return Jo.cancel=Qo,Jo.flush=wo,Jo}var Gn=Ln(function(c,f){return _c(c,1,f)}),fs=Ln(function(c,f,b){return _c(c,zi(f)||0,b)});function ct(c){return na(c,G)}function Qe(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new Uo(s);var b=function(){var L=arguments,B=f?f.apply(this,L):L[0],Z=b.cache;if(Z.has(B))return Z.get(B);var ae=c.apply(this,L);return b.cache=Z.set(B,ae)||Z,ae};return b.cache=new(Qe.Cache||Ss),b}Qe.Cache=Ss;function ut(c){if(typeof c!="function")throw new Uo(s);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function cn(c){return _t(2,c)}var Zn=c_(function(c,f){f=f.length==1&&Cn(f[0])?mi(f[0],Ir(qt())):mi(mr(f,1),Ir(qt()));var b=f.length;return Ln(function(L){for(var B=-1,Z=Pr(L.length,b);++B<Z;)L[B]=f[B].call(this,L[B]);return _o(c,this,L)})}),ai=Ln(function(c,f){var b=ys(f,Sl(ai));return na(c,F,t,f,b)}),hi=Ln(function(c,f){var b=ys(f,Sl(hi));return na(c,Q,t,f,b)}),yi=Hs(function(c,f){return na(c,$,t,t,t,f)});function ra(c,f){if(typeof c!="function")throw new Uo(s);return f=f===t?f:yn(f),Ln(c,f)}function Nr(c,f){if(typeof c!="function")throw new Uo(s);return f=f==null?0:ir(yn(f),0),Ln(function(b){var L=b[f],B=di(b,0,f);return L&&Ka(B,L),_o(c,this,B)})}function vh(c,f,b){var L=!0,B=!0;if(typeof c!="function")throw new Uo(s);return Fi(b)&&(L="leading"in b?!!b.leading:L,B="trailing"in b?!!b.trailing:B),Hn(c,f,{leading:L,maxWait:f,trailing:B})}function Ey(c){return Ke(c,1)}function ED(c,f){return ai(ah(f),c)}function LD(){if(!arguments.length)return[];var c=arguments[0];return Cn(c)?c:[c]}function F1(c){return Po(c,_)}function xD(c,f){return f=typeof f=="function"?f:t,Po(c,_,f)}function mE(c){return Po(c,h|_)}function _E(c,f){return f=typeof f=="function"?f:t,Po(c,h|_,f)}function Ly(c,f){return f==null||sg(c,f,wr(f))}function Is(c,f){return c===f||c!==c&&f!==f}var vE=uh(yl),bE=uh(function(c,f){return c>=f}),yu=wp(function(){return arguments}())?wp:function(c){return Gi(c)&&$n.call(c,"callee")&&!vi.call(c,"callee")},Cn=ke.isArray,DD=Bm?Ir(Bm):Sp;function Fo(c){return c!=null&&Bp(c.length)&&!ol(c)}function Ui(c){return Gi(c)&&Fo(c)}function B1(c){return c===!0||c===!1||Gi(c)&&$r(c)==Rt}var Zl=Mr||nb,ID=ja?Ir(ja):lg;function xy(c){return Gi(c)&&c.nodeType===1&&!bf(c)}function CE(c){if(c==null)return!0;if(Fo(c)&&(Cn(c)||typeof c=="string"||typeof c.splice=="function"||Zl(c)||hd(c)||yu(c)))return!c.length;var f=Cr(c);if(f==sn||f==Tt)return!c.size;if(mu(c))return!el(c).length;for(var b in c)if($n.call(c,b))return!1;return!0}function kD(c,f){return ma(c,f)}function TD(c,f,b){b=typeof b=="function"?b:t;var L=b?b(c,f):t;return L===t?ma(c,f,t,b):!!L}function G0(c){if(!Gi(c))return!1;var f=$r(c);return f==zt||f==xt||typeof c.message=="string"&&typeof c.name=="string"&&!bf(c)}function ND(c){return typeof c=="number"&&Gh(c)}function ol(c){if(!Fi(c))return!1;var f=$r(c);return f==wt||f==dn||f==Dt||f==Ft}function Dy(c){return typeof c=="number"&&c==yn(c)}function Bp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=se}function Fi(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function Gi(c){return c!=null&&typeof c=="object"}var Iy=$d?Ir($d):o_;function AD(c,f){return c===f||Jc(c,f,ad(f))}function OD(c,f,b){return b=typeof b=="function"?b:t,Jc(c,f,ad(f),b)}function dd(c){return Bi(c)&&c!=+c}function RD(c){if(__(c))throw new hn(o);return s_(c)}function MD(c){return c===null}function Wp(c){return c==null}function Bi(c){return typeof c=="number"||Gi(c)&&$r(c)==Pt}function bf(c){if(!Gi(c)||$r(c)!=xn)return!1;var f=gt(c);if(f===null)return!0;var b=$n.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&jd.call(b)==Zm}var Oa=Hh?Ir(Hh):L0;function zs(c){return Dy(c)&&c>=-se&&c<=se}var ky=Uh?Ir(Uh):Ws;function wu(c){return typeof c=="string"||!Cn(c)&&Gi(c)&&$r(c)==mt}function Zo(c){return typeof c=="symbol"||Gi(c)&&$r(c)==Qt}var hd=_0?Ir(_0):Jh;function PD(c){return c===t}function FD(c){return Gi(c)&&Cr(c)==We}function BD(c){return Gi(c)&&$r(c)==dt}var Ty=uh(ql),WD=uh(function(c,f){return c<=f});function fd(c){if(!c)return[];if(Fo(c))return wu(c)?Mo(c):Gr(c);if(Xi&&c[Xi])return Gm(c[Xi]());var f=Cr(c),b=f==sn?Wu:f==Tt?su:nc;return b(c)}function Ra(c){if(!c)return c===0?c:0;if(c=zi(c),c===re||c===-re){var f=c<0?-1:1;return f*ie}return c===c?c:0}function yn(c){var f=Ra(c),b=f%1;return f===f?b?f-b:f:0}function Xo(c){return c?Ja(yn(c),0,te):0}function zi(c){if(typeof c=="number")return c;if(Zo(c))return A;if(Fi(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Fi(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=jm(c);var b=Ne.test(c);return b||Je.test(c)?fp(c.slice(2),b?2:8):pe.test(c)?A:+c}function W1(c){return kr(c,Bo(c))}function VD(c){return c?Ja(yn(c),-se,se):c===0?c:0}function ri(c){return c==null?"":cr(c)}var HD=wl(function(c,f){if(mu(f)||Fo(f)){kr(f,wr(f),c);return}for(var b in f)$n.call(f,b)&&qu(c,b,f[b])}),Ny=wl(function(c,f){kr(f,Bo(f),c)}),Vp=wl(function(c,f,b,L){kr(f,Bo(f),c,L)}),UD=wl(function(c,f,b,L){kr(f,wr(f),c,L)}),yE=Hs(og);function Y0(c,f){var b=Uu(c);return f==null?b:xo(b,f)}var Ay=Ln(function(c,f){c=ci(c);var b=-1,L=f.length,B=L>2?f[2]:t;for(B&&Di(f[0],f[1],B)&&(L=1);++b<L;)for(var Z=f[b],ae=Bo(Z),he=-1,ye=ae.length;++he<ye;){var Ue=ae[he],$e=c[Ue];($e===t||Is($e,Ya[Ue])&&!$n.call(c,Ue))&&(c[Ue]=Z[Ue])}return c}),zD=Ln(function(c){return c.push(t,uf),_o(U_,t,c)});function wE(c,f){return Vm(c,qt(f,3),ds)}function V1(c,f){return Vm(c,qt(f,3),bc)}function ec(c,f){return c==null?c:eh(c,qt(f,3),Bo)}function H_(c,f){return c==null?c:ag(c,qt(f,3),Bo)}function $D(c,f){return c&&ds(c,qt(f,3))}function jD(c,f){return c&&bc(c,qt(f,3))}function qD(c){return c==null?[]:Es(c,wr(c))}function KD(c){return c==null?[]:Es(c,Bo(c))}function Z0(c,f,b){var L=c==null?t:Yo(c,f);return L===t?b:L}function SE(c,f){return c!=null&&m_(c,f,nh)}function tc(c,f){return c!=null&&m_(c,f,Yu)}var Qi=af(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=qd.call(f)),c[f]=b},Q0(Wo)),EE=af(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=qd.call(f)),$n.call(c,f)?c[f].push(b):c[f]=[b]},qt),xc=Ln(hu);function wr(c){return Fo(c)?$u(c):el(c)}function Bo(c){return Fo(c)?$u(c,!0):a_(c)}function so(c,f){var b={};return f=qt(f,3),ds(c,function(L,B,Z){Do(b,f(L,B,Z),L)}),b}function GD(c,f){var b={};return f=qt(f,3),ds(c,function(L,B,Z){Do(b,B,f(L,B,Z))}),b}var LE=wl(function(c,f,b){Kl(c,f,b)}),U_=wl(function(c,f,b,L){Kl(c,f,b,L)}),YD=Hs(function(c,f){var b={};if(c==null)return b;var L=!1;f=mi(f,function(Z){return Z=Da(Z,c),L||(L=Z.length>1),Z}),kr(c,Xu(c),b),L&&(b=Po(b,h|p|_,cf));for(var B=f.length;B--;)yc(b,f[B]);return b});function ZD(c,f){return Oy(c,ut(qt(f)))}var XD=Hs(function(c,f){return c==null?{}:rh(c,f)});function Oy(c,f){if(c==null)return{};var b=mi(Xu(c),function(L){return[L]});return f=qt(f),l_(c,b,function(L,B){return f(L,B[0])})}function QD(c,f,b){f=Da(f,c);var L=-1,B=f.length;for(B||(B=1,c=t);++L<B;){var Z=c==null?t:c[ro(f[L])];Z===t&&(L=B,Z=b),c=ol(Z)?Z.call(c):Z}return c}function JD(c,f,b){return c==null?c:yo(c,f,b)}function eI(c,f,b,L){return L=typeof L=="function"?L:t,c==null?c:yo(c,f,b,L)}var Ry=Gl(wr),My=Gl(Bo);function tI(c,f,b){var L=Cn(c),B=L||Zl(c)||hd(c);if(f=qt(f,4),b==null){var Z=c&&c.constructor;B?b=L?new Z:[]:Fi(c)?b=ol(Z)?Uu(gt(c)):{}:b={}}return(B?vo:ds)(c,function(ae,he,ye){return f(b,ae,he,ye)}),b}function nI(c,f){return c==null?!0:yc(c,f)}function iI(c,f,b){return c==null?c:fg(c,f,ah(b))}function rI(c,f,b,L){return L=typeof L=="function"?L:t,c==null?c:fg(c,f,ah(b),L)}function nc(c){return c==null?[]:pc(c,wr(c))}function oI(c){return c==null?[]:pc(c,Bo(c))}function Py(c,f,b){return b===t&&(b=f,f=t),b!==t&&(b=zi(b),b=b===b?b:0),f!==t&&(f=zi(f),f=f===f?f:0),Ja(zi(c),f,b)}function sI(c,f,b){return f=Ra(f),b===t?(b=f,f=0):b=Ra(b),c=zi(c),i_(c,f,b)}function aI(c,f,b){if(b&&typeof b!="boolean"&&Di(c,f,b)&&(f=b=t),b===t&&(typeof f=="boolean"?(b=f,f=t):typeof c=="boolean"&&(b=c,c=t)),c===t&&f===t?(c=0,f=1):(c=Ra(c),f===t?(f=c,c=0):f=Ra(f)),c>f){var L=c;c=f,f=L}if(b||c%1||f%1){var B=Hl();return Pr(c+B*(f-c+p0("1e-"+((B+"").length-1))),f)}return nf(c,f)}var lI=Ia(function(c,f,b){return f=f.toLowerCase(),c+(b?oa(f):f)});function oa(c){return X0(ri(c).toLowerCase())}function Dl(c){return c=ri(c),c&&c.replace(It,l1).replace(dp,"")}function uI(c,f,b){c=ri(c),f=cr(f);var L=c.length;b=b===t?L:Ja(yn(b),0,L);var B=b;return b-=f.length,b>=0&&c.slice(b,B)==f}function cI(c){return c=ri(c),c&&ru.test(c)?c.replace(Vn,Km):c}function dI(c){return c=ri(c),c&&Ce.test(c)?c.replace(ve,"\\$&"):c}var xE=Ia(function(c,f,b){return c+(b?"-":"")+f.toLowerCase()}),hI=Ia(function(c,f,b){return c+(b?" ":"")+f.toLowerCase()}),fI=bg("toLowerCase");function gI(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;if(!f||L>=f)return c;var B=(f-L)/2;return lh(ml(B),b)+c+lh(Xa(B),b)}function DE(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;return f&&L<f?c+lh(f-L,b):c}function pI(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;return f&&L<f?lh(f-L,b)+c:c}function mI(c,f,b){return b||f==null?f=0:f&&(f=+f),Cp(ri(c).replace(Ie,""),f||0)}function _I(c,f,b){return(b?Di(c,f,b):f===t)?f=1:f=yn(f),oh(ri(c),f)}function IE(){var c=arguments,f=ri(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var kE=Ia(function(c,f,b){return c+(b?"_":"")+f.toLowerCase()});function vI(c,f,b){return b&&typeof b!="number"&&Di(c,f,b)&&(f=b=t),b=b===t?te:b>>>0,b?(c=ri(c),c&&(typeof f=="string"||f!=null&&!Oa(f))&&(f=cr(f),!f&&Bu(c))?di(Mo(c),0,b):c.split(f,b)):[]}var bI=Ia(function(c,f,b){return c+(b?" ":"")+X0(f)});function CI(c,f,b){return c=ri(c),b=b==null?0:Ja(yn(b),0,c.length),f=cr(f),c.slice(b,b+f.length)==f}function yI(c,f,b){var L=q.templateSettings;b&&Di(c,f,b)&&(f=t),c=ri(c),f=Vp({},f,L,p_);var B=Vp({},f.imports,L.imports,p_),Z=wr(B),ae=pc(B,Z),he,ye,Ue=0,$e=f.interpolate||Vt,Ze="__p += '",vt=Kh((f.escape||Vt).source+"|"+$e.source+"|"+($e===as?K:Vt).source+"|"+(f.evaluate||Vt).source+"|$","g"),Ht="//# sourceURL="+($n.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uy+"]")+`
`;c.replace(vt,function(rn,Mn,Un,Qo,wo,Jo){return Un||(Un=Qo),Ze+=c.slice(Ue,Jo).replace(pn,u1),Mn&&(he=!0,Ze+=`' +
__e(`+Mn+`) +
'`),wo&&(ye=!0,Ze+=`';
`+wo+`;
__p += '`),Un&&(Ze+=`' +
((__t = (`+Un+`)) == null ? '' : __t) +
'`),Ue=Jo+rn.length,rn}),Ze+=`';
`;var nn=$n.call(f,"variable")&&f.variable;if(!nn)Ze=`with (obj) {
`+Ze+`
}
`;else if(kn.test(nn))throw new hn(a);Ze=(ye?Ze.replace(Mi,""):Ze).replace(ni,"$1").replace(bi,"$1;"),Ze="function("+(nn||"obj")+`) {
`+(nn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var Dn=By(function(){return Kn(Z,Ht+"return "+Ze).apply(t,ae)});if(Dn.source=Ze,G0(Dn))throw Dn;return Dn}function z_(c){return ri(c).toLowerCase()}function wI(c){return ri(c).toUpperCase()}function SI(c,f,b){if(c=ri(c),c&&(b||f===t))return jm(c);if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Mo(f),Z=Lo(L,B),ae=Fu(L,B)+1;return di(L,Z,ae).join("")}function EI(c,f,b){if(c=ri(c),c&&(b||f===t))return c.slice(0,qh(c)+1);if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Fu(L,Mo(f))+1;return di(L,0,B).join("")}function LI(c,f,b){if(c=ri(c),c&&(b||f===t))return c.replace(Ie,"");if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Lo(L,Mo(f));return di(L,B).join("")}function xI(c,f){var b=Y,L=I;if(Fi(f)){var B="separator"in f?f.separator:B;b="length"in f?yn(f.length):b,L="omission"in f?cr(f.omission):L}c=ri(c);var Z=c.length;if(Bu(c)){var ae=Mo(c);Z=ae.length}if(b>=Z)return c;var he=b-au(L);if(he<1)return L;var ye=ae?di(ae,0,he).join(""):c.slice(0,he);if(B===t)return ye+L;if(ae&&(he+=ye.length-he),Oa(B)){if(c.slice(he).search(B)){var Ue,$e=ye;for(B.global||(B=Kh(B.source,ri(ce.exec(B))+"g")),B.lastIndex=0;Ue=B.exec($e);)var Ze=Ue.index;ye=ye.slice(0,Ze===t?he:Ze)}}else if(c.indexOf(cr(B),he)!=he){var vt=ye.lastIndexOf(B);vt>-1&&(ye=ye.slice(0,vt))}return ye+L}function TE(c){return c=ri(c),c&&Dr.test(c)?c.replace(Qs,h1):c}var NE=Ia(function(c,f,b){return c+(b?" ":"")+f.toUpperCase()}),X0=bg("toUpperCase");function Fy(c,f,b){return c=ri(c),f=b?t:f,f===t?c1(c)?y0(c):$h(c):c.match(f)||[]}var By=Ln(function(c,f){try{return _o(c,t,f)}catch(b){return G0(b)?b:new hn(b)}}),DI=Hs(function(c,f){return vo(f,function(b){b=ro(b),Do(c,b,Yt(c[b],c))}),c});function II(c){var f=c==null?0:c.length,b=qt();return c=f?mi(c,function(L){if(typeof L[1]!="function")throw new Uo(s);return[b(L[0]),L[1]]}):[],Ln(function(L){for(var B=-1;++B<f;){var Z=c[B];if(_o(Z[0],this,L))return _o(Z[1],this,L)}})}function kI(c){return C1(Po(c,h))}function Q0(c){return function(){return c}}function TI(c,f){return c==null||c!==c?f:c}var NI=od(),AI=od(!0);function Wo(c){return c}function J0(c){return ef(typeof c=="function"?c:Po(c,h))}function OI(c){return ih(Po(c,h))}function RI(c,f){return Io(c,Po(f,h))}var MI=Ln(function(c,f){return function(b){return hu(b,c,f)}}),PI=Ln(function(c,f){return function(b){return hu(c,b,f)}});function eb(c,f,b){var L=wr(f),B=Es(f,L);b==null&&!(Fi(f)&&(B.length||!L.length))&&(b=f,f=c,c=this,B=Es(f,wr(f)));var Z=!(Fi(b)&&"chain"in b)||!!b.chain,ae=ol(c);return vo(B,function(he){var ye=f[he];c[he]=ye,ae&&(c.prototype[he]=function(){var Ue=this.__chain__;if(Z||Ue){var $e=c(this.__wrapped__),Ze=$e.__actions__=Gr(this.__actions__);return Ze.push({func:ye,args:arguments,thisArg:c}),$e.__chain__=Ue,$e}return ye.apply(c,Ka([this.value()],arguments))})}),c}function FI(){return Ki._===this&&(Ki._=f1),this}function tb(){}function BI(c){return c=yn(c),Ln(function(f){return ed(f,c)})}var WI=Cg(mi),VI=Cg(qr),HI=Cg(mp);function Wy(c){return Ap(c)?Qf(ro(c)):tf(c)}function UI(c){return function(f){return c==null?t:Yo(c,f)}}var Vy=kp(),AE=kp(!0);function $_(){return[]}function nb(){return!1}function zI(){return{}}function $I(){return""}function Hy(){return!0}function jI(c,f){if(c=yn(c),c<1||c>se)return[];var b=te,L=Pr(c,te);f=qt(f),c-=te;for(var B=La(L,f);++b<c;)f(b);return B}function qI(c){return Cn(c)?mi(c,ro):Zo(c)?[c]:Gr(R0(ri(c)))}function KI(c){var f=++xa;return ri(c)+f}var Su=lf(function(c,f){return c+f},0),Uy=Vs("ceil"),GI=lf(function(c,f){return c/f},1),YI=Vs("floor");function ZI(c){return c&&c.length?vc(c,Wo,yl):t}function XI(c,f){return c&&c.length?vc(c,qt(f,2),yl):t}function zy(c){return zm(c,Wo)}function QI(c,f){return zm(c,qt(f,2))}function $y(c){return c&&c.length?vc(c,Wo,ql):t}function JI(c,f){return c&&c.length?vc(c,qt(f,2),ql):t}var ek=lf(function(c,f){return c*f},1),tk=Vs("round"),nk=lf(function(c,f){return c-f},0);function OE(c){return c&&c.length?_p(c,Wo):0}function ik(c,f){return c&&c.length?_p(c,qt(f,2)):0}return q.after=Re,q.ary=Ke,q.assign=HD,q.assignIn=Ny,q.assignInWith=Vp,q.assignWith=UD,q.at=yE,q.before=_t,q.bind=Yt,q.bindAll=DI,q.bindKey=en,q.castArray=LD,q.chain=xl,q.chunk=M0,q.compact=w_,q.concat=P0,q.cond=II,q.conforms=kI,q.constant=Q0,q.countBy=yy,q.create=Y0,q.curry=Zt,q.curryRight=Nn,q.debounce=Hn,q.defaults=Ay,q.defaultsDeep=zD,q.defer=Gn,q.delay=fs,q.difference=Na,q.differenceBy=yr,q.differenceWith=Us,q.drop=xs,q.dropRight=ba,q.dropRightWhile=Yl,q.dropWhile=Lg,q.fill=Ds,q.filter=M1,q.flatMap=j0,q.flatMapDeep=q0,q.flatMapDepth=wy,q.flatten=gh,q.flattenDeep=S_,q.flattenDepth=ud,q.flip=ct,q.flow=NI,q.flowRight=AI,q.fromPairs=Aa,q.functions=qD,q.functionsIn=KD,q.groupBy=P_,q.initial=vu,q.intersection=Rp,q.intersectionBy=bu,q.intersectionWith=Ll,q.invert=Qi,q.invertBy=EE,q.invokeMap=F_,q.iteratee=J0,q.keyBy=P1,q.keys=wr,q.keysIn=Bo,q.map=_h,q.mapKeys=so,q.mapValues=GD,q.matches=OI,q.matchesProperty=RI,q.memoize=Qe,q.merge=LE,q.mergeWith=U_,q.method=MI,q.methodOf=PI,q.mixin=eb,q.negate=ut,q.nthArg=BI,q.omit=YD,q.omitBy=ZD,q.once=cn,q.orderBy=B_,q.over=WI,q.overArgs=Zn,q.overEvery=VI,q.overSome=HI,q.partial=ai,q.partialRight=hi,q.partition=W_,q.pick=XD,q.pickBy=Oy,q.property=Wy,q.propertyOf=UI,q.pull=F0,q.pullAll=Dg,q.pullAllBy=x_,q.pullAllWith=rl,q.pullAt=ph,q.range=Vy,q.rangeRight=AE,q.rearg=yi,q.reject=V_,q.remove=Ju,q.rest=ra,q.reverse=ia,q.sampleSize=m,q.set=JD,q.setWith=eI,q.shuffle=w,q.slice=E1,q.sortBy=J,q.sortedUniq=gf,q.sortedUniqBy=I_,q.split=vI,q.spread=Nr,q.tail=pf,q.take=D1,q.takeRight=I1,q.takeRightWhile=V0,q.takeWhile=k_,q.tap=H0,q.throttle=vh,q.thru=_f,q.toArray=fd,q.toPairs=Ry,q.toPairsIn=My,q.toPath=qI,q.toPlainObject=W1,q.transform=tI,q.unary=Ey,q.union=py,q.unionBy=Cu,q.unionWith=k1,q.uniq=T1,q.uniqBy=mf,q.uniqWith=N1,q.unset=nI,q.unzip=Lc,q.unzipWith=T_,q.update=iI,q.updateWith=rI,q.values=nc,q.valuesIn=oI,q.without=ns,q.words=Fy,q.wrap=ED,q.xor=my,q.xorBy=N_,q.xorWith=_y,q.zip=vy,q.zipObject=A1,q.zipObjectDeep=O1,q.zipWith=by,q.entries=Ry,q.entriesIn=My,q.extend=Ny,q.extendWith=Vp,eb(q,q),q.add=Su,q.attempt=By,q.camelCase=lI,q.capitalize=oa,q.ceil=Uy,q.clamp=Py,q.clone=F1,q.cloneDeep=mE,q.cloneDeepWith=_E,q.cloneWith=xD,q.conformsTo=Ly,q.deburr=Dl,q.defaultTo=TI,q.divide=GI,q.endsWith=uI,q.eq=Is,q.escape=cI,q.escapeRegExp=dI,q.every=R1,q.find=R_,q.findIndex=fh,q.findKey=wE,q.findLast=Ig,q.findLastIndex=ld,q.findLastKey=V1,q.floor=YI,q.forEach=M_,q.forEachRight=Pp,q.forIn=ec,q.forInRight=H_,q.forOwn=$D,q.forOwnRight=jD,q.get=Z0,q.gt=vE,q.gte=bE,q.has=SE,q.hasIn=tc,q.head=xg,q.identity=Wo,q.includes=K0,q.indexOf=ff,q.inRange=sI,q.invoke=xc,q.isArguments=yu,q.isArray=Cn,q.isArrayBuffer=DD,q.isArrayLike=Fo,q.isArrayLikeObject=Ui,q.isBoolean=B1,q.isBuffer=Zl,q.isDate=ID,q.isElement=xy,q.isEmpty=CE,q.isEqual=kD,q.isEqualWith=TD,q.isError=G0,q.isFinite=ND,q.isFunction=ol,q.isInteger=Dy,q.isLength=Bp,q.isMap=Iy,q.isMatch=AD,q.isMatchWith=OD,q.isNaN=dd,q.isNative=RD,q.isNil=Wp,q.isNull=MD,q.isNumber=Bi,q.isObject=Fi,q.isObjectLike=Gi,q.isPlainObject=bf,q.isRegExp=Oa,q.isSafeInteger=zs,q.isSet=ky,q.isString=wu,q.isSymbol=Zo,q.isTypedArray=hd,q.isUndefined=PD,q.isWeakMap=FD,q.isWeakSet=BD,q.join=E_,q.kebabCase=xE,q.last=Fr,q.lastIndexOf=L_,q.lowerCase=hI,q.lowerFirst=fI,q.lt=Ty,q.lte=WD,q.max=ZI,q.maxBy=XI,q.mean=zy,q.meanBy=QI,q.min=$y,q.minBy=JI,q.stubArray=$_,q.stubFalse=nb,q.stubObject=zI,q.stubString=$I,q.stubTrue=Hy,q.multiply=ek,q.nth=Mp,q.noConflict=FI,q.noop=tb,q.now=ge,q.pad=gI,q.padEnd=DE,q.padStart=pI,q.parseInt=mI,q.random=aI,q.reduce=Fp,q.reduceRight=Sy,q.repeat=_I,q.replace=IE,q.result=QD,q.round=tk,q.runInContext=be,q.sample=g,q.size=N,q.snakeCase=kE,q.some=H,q.sortedIndex=B0,q.sortedIndexBy=D_,q.sortedIndexOf=L1,q.sortedLastIndex=cd,q.sortedLastIndexBy=x1,q.sortedLastIndexOf=W0,q.startCase=bI,q.startsWith=CI,q.subtract=nk,q.sum=OE,q.sumBy=ik,q.template=yI,q.times=jI,q.toFinite=Ra,q.toInteger=yn,q.toLength=Xo,q.toLower=z_,q.toNumber=zi,q.toSafeInteger=VD,q.toString=ri,q.toUpper=wI,q.trim=SI,q.trimEnd=EI,q.trimStart=LI,q.truncate=xI,q.unescape=TE,q.uniqueId=KI,q.upperCase=NE,q.upperFirst=X0,q.each=M_,q.eachRight=Pp,q.first=xg,eb(q,function(){var c={};return ds(q,function(f,b){$n.call(q.prototype,b)||(c[b]=f)}),c}(),{chain:!1}),q.VERSION=n,vo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){q[c].placeholder=q}),vo(["drop","take"],function(c,f){an.prototype[c]=function(b){b=b===t?1:ir(yn(b),0);var L=this.__filtered__&&!f?new an(this):this.clone();return L.__filtered__?L.__takeCount__=Pr(b,L.__takeCount__):L.__views__.push({size:Pr(b,te),type:c+(L.__dir__<0?"Right":"")}),L},an.prototype[c+"Right"]=function(b){return this.reverse()[c](b).reverse()}}),vo(["filter","map","takeWhile"],function(c,f){var b=f+1,L=b==V||b==ne;an.prototype[c]=function(B){var Z=this.clone();return Z.__iteratees__.push({iteratee:qt(B,3),type:b}),Z.__filtered__=Z.__filtered__||L,Z}}),vo(["head","last"],function(c,f){var b="take"+(f?"Right":"");an.prototype[c]=function(){return this[b](1).value()[0]}}),vo(["initial","tail"],function(c,f){var b="drop"+(f?"":"Right");an.prototype[c]=function(){return this.__filtered__?new an(this):this[b](1)}}),an.prototype.compact=function(){return this.filter(Wo)},an.prototype.find=function(c){return this.filter(c).head()},an.prototype.findLast=function(c){return this.reverse().find(c)},an.prototype.invokeMap=Ln(function(c,f){return typeof c=="function"?new an(this):this.map(function(b){return hu(b,c,f)})}),an.prototype.reject=function(c){return this.filter(ut(qt(c)))},an.prototype.slice=function(c,f){c=yn(c);var b=this;return b.__filtered__&&(c>0||f<0)?new an(b):(c<0?b=b.takeRight(-c):c&&(b=b.drop(c)),f!==t&&(f=yn(f),b=f<0?b.dropRight(-f):b.take(f-c)),b)},an.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},an.prototype.toArray=function(){return this.take(te)},ds(an.prototype,function(c,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),L=/^(?:head|last)$/.test(f),B=q[L?"take"+(f=="last"?"Right":""):f],Z=L||/^find/.test(f);B&&(q.prototype[f]=function(){var ae=this.__wrapped__,he=L?[1]:arguments,ye=ae instanceof an,Ue=he[0],$e=ye||Cn(ae),Ze=function(Mn){var Un=B.apply(q,Ka([Mn],he));return L&&vt?Un[0]:Un};$e&&b&&typeof Ue=="function"&&Ue.length!=1&&(ye=$e=!1);var vt=this.__chain__,Ht=!!this.__actions__.length,nn=Z&&!vt,Dn=ye&&!Ht;if(!Z&&$e){ae=Dn?ae:new an(this);var rn=c.apply(ae,he);return rn.__actions__.push({func:_f,args:[Ze],thisArg:t}),new Ei(rn,vt)}return nn&&Dn?c.apply(this,he):(rn=this.thru(Ze),nn?L?rn.value()[0]:rn.value():rn)})}),vo(["pop","push","shift","sort","splice","unshift"],function(c){var f=Os[c],b=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",L=/^(?:pop|shift)$/.test(c);q.prototype[c]=function(){var B=arguments;if(L&&!this.__chain__){var Z=this.value();return f.apply(Cn(Z)?Z:[],B)}return this[b](function(ae){return f.apply(Cn(ae)?ae:[],B)})}}),ds(an.prototype,function(c,f){var b=q[f];if(b){var L=b.name+"";$n.call(fa,L)||(fa[L]=[]),fa[L].push({name:f,func:b})}}),fa[Sc(t,T).name]=[{name:"wrapper",func:t}],an.prototype.clone=Xm,an.prototype.reverse=E0,an.prototype.value=Zh,q.prototype.at=mh,q.prototype.chain=A_,q.prototype.commit=vf,q.prototype.next=O_,q.prototype.plant=z0,q.prototype.reverse=Cy,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=$0,q.prototype.first=q.prototype.head,Xi&&(q.prototype[Xi]=U0),q},lu=vp();Ea?((Ea.exports=lu)._=lu,Vh._=lu):Ki._=lu}).call(ku)}(xk,xk.exports)),xk.exports}var Ao=Mfe(),xL;(function(r){r.Update="Component.Update"})(xL||(xL={}));class Vc extends Kx{constructor(){super(),this._event=new MP}setState(e,t){const n=Object.assign(this.state,e);this.render(n),t==null||t(this.state,n)}render(e){this._event.emit(xL.Update,this.state,e)}onUpdateState(e){this._event.subscribe(xL.Update,e)}removeOnUpdateState(e){this._event.unsubscribe(xL.Update,e)}forceUpdate(){this.setState(Ao.cloneDeep(this.state))}getState(){return this.state}}function n2(r,e){return De.Children.map(r,t=>De.isValidElement(t)?De.cloneElement(t,e):t)}const Ai={info(...r){},error(...r){console.error(...r)},warn(...r){console.warn(...r)}};function Hc(r,e,t){return class extends De.Component{constructor(i){super(i),this._isMounted=!1,this.update=()=>{this._isMounted&&this.setState({lastUpdated:Date.now()})},this.onChange=this.onChange.bind(this),this.state={lastUpdated:Date.now()}}componentDidMount(){this._isMounted=!0,this.handleService(i=>{i.onUpdateState(this.onChange)})}componentWillUnmount(){this._isMounted=!1,this.handleService(i=>{i.removeOnUpdateState(this.onChange)})}onChange(i,o){Ai.info(i,o,yt._registry),this.update()}getServiceState(){const i={};return this.handleService((o,s)=>{s?Object.assign(i,{[s]:Object.assign({},o.getState())}):Object.assign(i,Object.assign({},o.getState()))}),i}handleService(i){if(this.isValidService(r))i(r);else for(const o in r)if(o){const s=r[o];this.isValidService(s)&&i(s,o)}}getControllerProperties(){const i={};return t&&this.handleController((o,s)=>{s?Object.assign(i,{[s]:this.getObjectPublicProperties(o)}):Object.assign(i,this.getObjectPublicProperties(o))}),i}handleController(i){if(this.isValidController(t))i(t);else for(const o in t)if(o){const s=t[o];this.isValidController(s)&&i(s,o)}}render(){return me.createElement(e,Object.assign({},this.state,this.props,this.getServiceState(),this.getControllerProperties()))}isValidService(i){return typeof i.onUpdateState=="function"}isValidController(i){return typeof i.initView=="function"}getObjectPublicProperties(i){const o=Object.keys(i),s={};return o.forEach(a=>{!a.endsWith("Service")&&!a.endsWith("Controller")&&!a.startsWith("_")&&(s[a]=i[a])}),s}}}class Mu extends Kx{}const Pfe=Object.freeze(Object.defineProperty({__proto__:null,Component:Vc,get ComponentEvents(){return xL},Controller:Mu,cloneReactChildren:n2,connect:Hc},Symbol.toStringTag,{value:"Module"}));var j_={},$q;function Ffe(){if($q)return j_;$q=1,Object.defineProperty(j_,"__esModule",{value:!0});function r(G,Y){var I=Object.keys(G);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(G);Y&&(D=D.filter(function(O){return Object.getOwnPropertyDescriptor(G,O).enumerable})),I.push.apply(I,D)}return I}function e(G){for(var Y=1;Y<arguments.length;Y++){var I=arguments[Y]!=null?arguments[Y]:{};Y%2?r(Object(I),!0).forEach(function(D){s(G,D,I[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(I)):r(Object(I)).forEach(function(D){Object.defineProperty(G,D,Object.getOwnPropertyDescriptor(I,D))})}return G}function t(G){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},t(G)}function n(G,Y){if(!(G instanceof Y))throw new TypeError("Cannot call a class as a function")}function i(G,Y){for(var I=0;I<Y.length;I++){var D=Y[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(G,D.key,D)}}function o(G,Y,I){return Y&&i(G.prototype,Y),I&&i(G,I),Object.defineProperty(G,"prototype",{writable:!1}),G}function s(G,Y,I){return Y in G?Object.defineProperty(G,Y,{value:I,enumerable:!0,configurable:!0,writable:!0}):G[Y]=I,G}function a(G,Y){return l(G)||u(G,Y)||d(G,Y)||p()}function l(G){if(Array.isArray(G))return G}function u(G,Y){var I=G==null?null:typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(I!=null){var D=[],O=!0,V=!1,j,ne;try{for(I=I.call(G);!(O=(j=I.next()).done)&&(D.push(j.value),!(Y&&D.length===Y));O=!0);}catch(re){V=!0,ne=re}finally{try{!O&&I.return!=null&&I.return()}finally{if(V)throw ne}}return D}}function d(G,Y){if(G){if(typeof G=="string")return h(G,Y);var I=Object.prototype.toString.call(G).slice(8,-1);if(I==="Object"&&G.constructor&&(I=G.constructor.name),I==="Map"||I==="Set")return Array.from(G);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return h(G,Y)}}function h(G,Y){(Y==null||Y>G.length)&&(Y=G.length);for(var I=0,D=new Array(Y);I<Y;I++)D[I]=G[I];return D}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(G,Y){var I=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!I){if(Array.isArray(G)||(I=d(G))||Y&&G&&typeof G.length=="number"){I&&(G=I);var D=0,O=function(){};return{s:O,n:function(){return D>=G.length?{done:!0}:{done:!1,value:G[D++]}},e:function(re){throw re},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V=!0,j=!1,ne;return{s:function(){I=I.call(G)},n:function(){var re=I.next();return V=re.done,re},e:function(re){j=!0,ne=re},f:function(){try{!V&&I.return!=null&&I.return()}finally{if(j)throw ne}}}}var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ku<"u"?ku:typeof self<"u"?self:{};function S(G,Y){return Y={exports:{}},G(Y,Y.exports),Y.exports}var x=S(function(G,Y){(function(){var I,D="4.17.21",O=200,V="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",j="Expected a function",ne="Invalid `variable` option passed into `_.template`",re="__lodash_hash_undefined__",se=500,ie="__lodash_placeholder__",A=1,te=2,_e=4,de=1,Me=2,He=1,st=2,Dt=4,Rt=8,lt=16,xt=32,zt=64,wt=128,dn=256,sn=512,Pt=30,ei="...",xn=800,un=16,Ft=1,Bt=2,Tt=3,mt=1/0,Qt=9007199254740991,fn=17976931348623157e292,We=0/0,dt=4294967295,oe=dt-1,U=dt>>>1,X=[["ary",wt],["bind",He],["bindKey",st],["curry",Rt],["curryRight",lt],["flip",sn],["partial",xt],["partialRight",zt],["rearg",dn]],we="[object Arguments]",Te="[object Array]",qe="[object AsyncFunction]",ze="[object Boolean]",bt="[object Date]",bn="[object DOMException]",En="[object Error]",nt="[object Function]",Mi="[object GeneratorFunction]",ni="[object Map]",bi="[object Number]",Qs="[object Null]",Vn="[object Object]",Dr="[object Promise]",ru="[object Proxy]",lr="[object RegExp]",Ct="[object Set]",as="[object String]",et="[object Symbol]",Ye="[object Undefined]",it="[object WeakMap]",ve="[object WeakSet]",Ce="[object ArrayBuffer]",Ie="[object DataView]",ue="[object Float32Array]",Oe="[object Float64Array]",pt="[object Int8Array]",at="[object Int16Array]",Ut="[object Int32Array]",kn="[object Uint8Array]",R="[object Uint8ClampedArray]",K="[object Uint16Array]",ce="[object Uint32Array]",pe=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,Se=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Je=/&(?:amp|lt|gt|quot|#39);/g,ht=/[&<>"']/g,It=RegExp(Je.source),Vt=RegExp(ht.source),pn=/<%-([\s\S]+?)%>/g,tn=/<%([\s\S]+?)%>/g,mn=/<%=([\s\S]+?)%>/g,Jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qi=/^\w*$/,Ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rr=/[\\^$.*+?()[\]{}|]/g,Er=RegExp(Rr.source),da=/^\s+/,Cs=/\s/,ap=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pu=/\{\n\/\* \[wrapped with (.+)\] \*/,l0=/,? & /,u0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,c0=/[()=,{}\[\]\/\s]/,Fd=/\\(\\)?/g,Am=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bd=/\w*$/,hc=/^[-+]0x[0-9a-f]+$/i,d0=/^0b[01]+$/i,ay=/^\[object .+?Constructor\]$/,lp=/^0o[0-7]+$/i,Om=/^(?:0|[1-9]\d*)$/,Bh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wd=/($^)/,h0=/['\n\r\u2028\u2029\\]/g,fc="\\ud800-\\udfff",Lr="\\u0300-\\u036f",ou="\\ufe20-\\ufe2f",Rm="\\u20d0-\\u20ff",Yf=Lr+ou+Rm,f0="\\u2700-\\u27bf",up="a-z\\xdf-\\xf6\\xf8-\\xff",Mm="\\xac\\xb1\\xd7\\xf7",cp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zf="\\u2000-\\u206f",Vd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$c="A-Z\\xc0-\\xd6\\xd8-\\xde",jc="\\ufe0e\\ufe0f",Hd=Mm+cp+Zf+Vd,Wh="[']",Ud="["+fc+"]",r1="["+Hd+"]",dp="["+Yf+"]",gc="\\d+",ly="["+f0+"]",g0="["+up+"]",hp="[^"+fc+Hd+gc+f0+up+$c+"]",Pm="\\ud83c[\\udffb-\\udfff]",uy="(?:"+dp+"|"+Pm+")",ui="[^"+fc+"]",ii="(?:\\ud83c[\\udde6-\\uddff]){2}",zd="[\\ud800-\\udbff][\\udc00-\\udfff]",qc="["+$c+"]",o1="\\u200d",s1="(?:"+g0+"|"+hp+")",p0="(?:"+qc+"|"+hp+")",fp="(?:"+Wh+"(?:d|ll|m|re|s|t|ve))?",Xf="(?:"+Wh+"(?:D|LL|M|RE|S|T|VE))?",m0=uy+"?",Ki="["+jc+"]?",Vh="(?:"+o1+"(?:"+[ui,ii,zd].join("|")+")"+Ki+m0+")*",Ea="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kc=Ki+m0+Vh,Eo="(?:"+[ly,ii,zd].join("|")+")"+Kc,Bm="(?:"+[ui+dp+"?",dp,ii,zd,Ud].join("|")+")",ja=RegExp(Wh,"g"),$d=RegExp(dp,"g"),Hh=RegExp(Pm+"(?="+Pm+")|"+Bm+Kc,"g"),Uh=RegExp([qc+"?"+g0+"+"+fp+"(?="+[r1,qc,"$"].join("|")+")",p0+"+"+Xf+"(?="+[r1,qc+s1,"$"].join("|")+")",qc+"?"+s1+"+"+fp,qc+"+"+Xf,Fm,Ea,gc,Eo].join("|"),"g"),_0=RegExp("["+o1+fc+Yf+jc+"]"),_o=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,v0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vo=-1,eo={};eo[ue]=eo[Oe]=eo[pt]=eo[at]=eo[Ut]=eo[kn]=eo[R]=eo[K]=eo[ce]=!0,eo[we]=eo[Te]=eo[Ce]=eo[ze]=eo[Ie]=eo[bt]=eo[En]=eo[nt]=eo[ni]=eo[bi]=eo[Vn]=eo[lr]=eo[Ct]=eo[as]=eo[it]=!1;var qr={};qr[we]=qr[Te]=qr[Ce]=qr[Ie]=qr[ze]=qr[bt]=qr[ue]=qr[Oe]=qr[pt]=qr[at]=qr[Ut]=qr[ni]=qr[bi]=qr[Vn]=qr[lr]=qr[Ct]=qr[as]=qr[et]=qr[kn]=qr[R]=qr[K]=qr[ce]=!0,qr[En]=qr[nt]=qr[it]=!1;var qa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},zh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gp={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ka=parseFloat,pp=parseInt,a1=typeof C=="object"&&C&&C.Object===Object&&C,mp=typeof self=="object"&&self&&self.Object===Object&&self,ha=a1||mp||Function("return this")(),Wm=Y&&!Y.nodeType&&Y,$h=Wm&&!0&&G&&!G.nodeType&&G,Vm=$h&&$h.exports===Wm,Gc=Vm&&a1.process,ts=function(){try{var tt=$h&&$h.require&&$h.require("util").types;return tt||Gc&&Gc.binding&&Gc.binding("util")}catch{}}(),Hm=ts&&ts.isArrayBuffer,Um=ts&&ts.isDate,zm=ts&&ts.isMap,Qf=ts&&ts.isRegExp,jh=ts&&ts.isSet,$m=ts&&ts.isTypedArray;function Wl(tt,At,gt){switch(gt.length){case 0:return tt.call(At);case 1:return tt.call(At,gt[0]);case 2:return tt.call(At,gt[0],gt[1]);case 3:return tt.call(At,gt[0],gt[1],gt[2])}return tt.apply(At,gt)}function _p(tt,At,gt,Rn){for(var vi=-1,ur=tt==null?0:tt.length;++vi<ur;){var us=tt[vi];At(Rn,us,gt(us),tt)}return Rn}function La(tt,At){for(var gt=-1,Rn=tt==null?0:tt.length;++gt<Rn&&At(tt[gt],gt,tt)!==!1;);return tt}function cy(tt,At){for(var gt=tt==null?0:tt.length;gt--&&At(tt[gt],gt,tt)!==!1;);return tt}function jm(tt,At){for(var gt=-1,Rn=tt==null?0:tt.length;++gt<Rn;)if(!At(tt[gt],gt,tt))return!1;return!0}function Ir(tt,At){for(var gt=-1,Rn=tt==null?0:tt.length,vi=0,ur=[];++gt<Rn;){var us=tt[gt];At(us,gt,tt)&&(ur[vi++]=us)}return ur}function pc(tt,At){var gt=tt==null?0:tt.length;return!!gt&&Wu(tt,At,0)>-1}function Ga(tt,At,gt){for(var Rn=-1,vi=tt==null?0:tt.length;++Rn<vi;)if(gt(At,tt[Rn]))return!0;return!1}function Lo(tt,At){for(var gt=-1,Rn=tt==null?0:tt.length,vi=Array(Rn);++gt<Rn;)vi[gt]=At(tt[gt],gt,tt);return vi}function Fu(tt,At){for(var gt=-1,Rn=At.length,vi=tt.length;++gt<Rn;)tt[vi+gt]=At[gt];return tt}function qm(tt,At,gt,Rn){var vi=-1,ur=tt==null?0:tt.length;for(Rn&&ur&&(gt=tt[++vi]);++vi<ur;)gt=At(gt,tt[vi],vi,tt);return gt}function l1(tt,At,gt,Rn){var vi=tt==null?0:tt.length;for(Rn&&vi&&(gt=tt[--vi]);vi--;)gt=At(gt,tt[vi],vi,tt);return gt}function Km(tt,At){for(var gt=-1,Rn=tt==null?0:tt.length;++gt<Rn;)if(At(tt[gt],gt,tt))return!0;return!1}var u1=b0("length");function Jf(tt){return tt.split("")}function Bu(tt){return tt.match(u0)||[]}function c1(tt,At,gt){var Rn;return gt(tt,function(vi,ur,us){if(At(vi,ur,us))return Rn=ur,!1}),Rn}function Gm(tt,At,gt,Rn){for(var vi=tt.length,ur=gt+(Rn?1:-1);Rn?ur--:++ur<vi;)if(At(tt[ur],ur,tt))return ur;return-1}function Wu(tt,At,gt){return At===At?Yc(tt,At,gt):Gm(tt,ys,gt)}function Ym(tt,At,gt,Rn){for(var vi=gt-1,ur=tt.length;++vi<ur;)if(Rn(tt[vi],At))return vi;return-1}function ys(tt){return tt!==tt}function su(tt,At){var gt=tt==null?0:tt.length;return gt?Mo(tt,At)/gt:We}function b0(tt){return function(At){return At==null?I:At[tt]}}function eg(tt){return function(At){return tt==null?I:tt[At]}}function d1(tt,At,gt,Rn,vi){return vi(tt,function(ur,us,Xi){gt=Rn?(Rn=!1,ur):At(gt,ur,us,Xi)}),gt}function au(tt,At){var gt=tt.length;for(tt.sort(At);gt--;)tt[gt]=tt[gt].value;return tt}function Mo(tt,At){for(var gt,Rn=-1,vi=tt.length;++Rn<vi;){var ur=At(tt[Rn]);ur!==I&&(gt=gt===I?ur:gt+ur)}return gt}function qh(tt,At){for(var gt=-1,Rn=Array(tt);++gt<tt;)Rn[gt]=At(gt);return Rn}function h1(tt,At){return Lo(At,function(gt){return[gt,tt[gt]]})}function C0(tt){return tt&&tt.slice(0,ng(tt)+1).replace(da,"")}function pl(tt){return function(At){return tt(At)}}function y0(tt,At){return Lo(At,function(gt){return tt[gt]})}function vp(tt,At){return tt.has(At)}function lu(tt,At){for(var gt=-1,Rn=tt.length;++gt<Rn&&Wu(At,tt[gt],0)>-1;);return gt}function be(tt,At){for(var gt=tt.length;gt--&&Wu(At,tt[gt],0)>-1;);return gt}function Pe(tt,At){for(var gt=tt.length,Rn=0;gt--;)tt[gt]===At&&++Rn;return Rn}var ke=eg(qa),Et=eg(zh);function hn(tt){return"\\"+mi[tt]}function Kn(tt,At){return tt==null?I:tt[At]}function Pi(tt){return _0.test(tt)}function ci(tt){return _o.test(tt)}function Kh(tt){for(var At,gt=[];!(At=tt.next()).done;)gt.push(At.value);return gt}function w0(tt){var At=-1,gt=Array(tt.size);return tt.forEach(function(Rn,vi){gt[++At]=[vi,Rn]}),gt}function Uo(tt,At){return function(gt){return tt(At(gt))}}function Os(tt,At){for(var gt=-1,Rn=tt.length,vi=0,ur=[];++gt<Rn;){var us=tt[gt];(us===At||us===ie)&&(tt[gt]=ie,ur[vi++]=gt)}return ur}function tg(tt){var At=-1,gt=Array(tt.size);return tt.forEach(function(Rn){gt[++At]=Rn}),gt}function Ya(tt){var At=-1,gt=Array(tt.size);return tt.forEach(function(Rn){gt[++At]=[Rn,Rn]}),gt}function Yc(tt,At,gt){for(var Rn=gt-1,vi=tt.length;++Rn<vi;)if(tt[Rn]===At)return Rn;return-1}function jd(tt,At,gt){for(var Rn=gt+1;Rn--;)if(tt[Rn]===At)return Rn;return Rn}function $n(tt){return Pi(tt)?Zm(tt):u1(tt)}function xa(tt){return Pi(tt)?f1(tt):Jf(tt)}function ng(tt){for(var At=tt.length;At--&&Cs.test(tt.charAt(At)););return At}var qd=eg(gp);function Zm(tt){for(var At=Hh.lastIndex=0;Hh.test(tt);)++At;return At}function f1(tt){return tt.match(Hh)||[]}function g1(tt){return tt.match(Uh)||[]}var Kd=function tt(At){At=At==null?ha:ls.defaults(ha.Object(),At,ls.pick(ha,v0));var gt=At.Array,Rn=At.Date,vi=At.Error,ur=At.Function,us=At.Math,Xi=At.Object,Za=At.RegExp,Gd=At.String,Vl=At.TypeError,to=gt.prototype,S0=ur.prototype,Xa=Xi.prototype,ml=At["__core-js_shared__"],Zc=S0.toString,Mr=Xa.hasOwnProperty,Gh=0,bp=function(){var v=/[^.]+$/.exec(ml&&ml.keys&&ml.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Xc=Xa.toString,ir=Zc.call(Xi),Pr=ha._,dy=Za("^"+Zc.call(Mr).replace(Rr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cp=Vm?At.Buffer:I,Hl=At.Symbol,Yh=At.Uint8Array,Yd=Cp?Cp.allocUnsafe:I,_l=Uo(Xi.getPrototypeOf,Xi),Zd=Xi.create,vl=Xa.propertyIsEnumerable,uu=to.splice,Vu=Hl?Hl.isConcatSpreadable:I,Hu=Hl?Hl.iterator:I,fa=Hl?Hl.toStringTag:I,ig=function(){try{var v=hh(Xi,"defineProperty");return v({},"",{}),v}catch{}}(),Xd=At.clearTimeout!==ha.clearTimeout&&At.clearTimeout,p1=Rn&&Rn.now!==ha.Date.now&&Rn.now,rg=At.setTimeout!==ha.setTimeout&&At.setTimeout,Ul=us.ceil,bl=us.floor,Rs=Xi.getOwnPropertySymbols,yp=Cp?Cp.isBuffer:I,q=At.isFinite,Uu=to.join,zl=Uo(Xi.keys,Xi),Ei=us.max,an=us.min,Xm=Rn.now,E0=At.parseInt,Zh=us.random,ws=to.reverse,bo=hh(At,"DataView"),zr=hh(At,"Map"),mc=hh(At,"Promise"),cs=hh(At,"Set"),Js=hh(At,"WeakMap"),Co=hh(Xi,"create"),Qc=Js&&new Js,Ms={},Qm=Ll(bo),m1=Ll(zr),_1=Ll(mc),Ss=Ll(cs),v1=Ll(Js),cu=Hl?Hl.prototype:I,Qd=cu?cu.valueOf:I,Jm=cu?cu.toString:I;function Ee(v){if(zi(v)&&!Bi(v)&&!(v instanceof Yn)){if(v instanceof ga)return v;if(Mr.call(v,"__wrapped__"))return Fr(v)}return new ga(v)}var ea=function(){function v(){}return function(y){if(!Xo(y))return{};if(Zd)return Zd(y);v.prototype=y;var P=new v;return v.prototype=I,P}}();function zu(){}function ga(v,y){this.__wrapped__=v,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=I}Ee.templateSettings={escape:pn,evaluate:tn,interpolate:mn,variable:"",imports:{_:Ee}},Ee.prototype=zu.prototype,Ee.prototype.constructor=Ee,ga.prototype=ea(zu.prototype),ga.prototype.constructor=ga;function Yn(v){this.__wrapped__=v,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function e_(){var v=new Yn(this.__wrapped__);return v.__actions__=io(this.__actions__),v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=io(this.__iteratees__),v.__takeCount__=this.__takeCount__,v.__views__=io(this.__views__),v}function t_(){if(this.__filtered__){var v=new Yn(this);v.__dir__=-1,v.__filtered__=!0}else v=this.clone(),v.__dir__*=-1;return v}function du(){var v=this.__wrapped__.value(),y=this.__dir__,P=Bi(v),ee=y<0,fe=P?v.length:0,xe=il(0,fe,this.__views__),Ve=xe.start,Xe=xe.end,rt=Xe-Ve,$t=ee?Xe:Ve-1,jt=this.__iteratees__,on=jt.length,Fn=0,fi=an(rt,this.__takeCount__);if(!P||!ee&&fe==rt&&fi==rt)return f_(v,this.__actions__);var Ii=[];e:for(;rt--&&Fn<fi;){$t+=y;for(var Sr=-1,ki=v[$t];++Sr<on;){var Br=jt[Sr],Yr=Br.iteratee,Cf=Br.type,gd=Yr(ki);if(Cf==Bt)ki=gd;else if(!gd){if(Cf==Ft)continue e;break e}}Ii[Fn++]=ki}return Ii}Yn.prototype=ea(zu.prototype),Yn.prototype.constructor=Yn;function ta(v){var y=-1,P=v==null?0:v.length;for(this.clear();++y<P;){var ee=v[y];this.set(ee[0],ee[1])}}function Xh(){this.__data__=Co?Co(null):{},this.size=0}function $u(v){var y=this.has(v)&&delete this.__data__[v];return this.size-=y?1:0,y}function ju(v){var y=this.__data__;if(Co){var P=y[v];return P===re?I:P}return Mr.call(y,v)?y[v]:I}function Qh(v){var y=this.__data__;return Co?y[v]!==I:Mr.call(y,v)}function b1(v,y){var P=this.__data__;return this.size+=this.has(v)?0:1,P[v]=Co&&y===I?re:y,this}ta.prototype.clear=Xh,ta.prototype.delete=$u,ta.prototype.get=ju,ta.prototype.has=Qh,ta.prototype.set=b1;function Qa(v){var y=-1,P=v==null?0:v.length;for(this.clear();++y<P;){var ee=v[y];this.set(ee[0],ee[1])}}function qu(){this.__data__=[],this.size=0}function Ps(v){var y=this.__data__,P=th(y,v);if(P<0)return!1;var ee=y.length-1;return P==ee?y.pop():uu.call(y,P,1),--this.size,!0}function $l(v){var y=this.__data__,P=th(y,v);return P<0?I:y[P][1]}function xo(v){return th(this.__data__,v)>-1}function Ku(v,y){var P=this.__data__,ee=th(P,v);return ee<0?(++this.size,P.push([v,y])):P[ee][1]=y,this}Qa.prototype.clear=qu,Qa.prototype.delete=Ps,Qa.prototype.get=$l,Qa.prototype.has=xo,Qa.prototype.set=Ku;function Do(v){var y=-1,P=v==null?0:v.length;for(this.clear();++y<P;){var ee=v[y];this.set(ee[0],ee[1])}}function og(){this.size=0,this.__data__={hash:new ta,map:new(zr||Qa),string:new ta}}function Ja(v){var y=wg(this,v).delete(v);return this.size-=y?1:0,y}function Po(v){return wg(this,v).get(v)}function C1(v){return wg(this,v).has(v)}function sg(v,y){var P=wg(this,v),ee=P.size;return P.set(v,y),this.size+=P.size==ee?0:1,this}Do.prototype.clear=og,Do.prototype.delete=Ja,Do.prototype.get=Po,Do.prototype.has=C1,Do.prototype.set=sg;function _c(v){var y=-1,P=v==null?0:v.length;for(this.__data__=new Do;++y<P;)this.add(v[y])}function Cl(v){return this.__data__.set(v,re),this}function pa(v){return this.__data__.has(v)}_c.prototype.add=_c.prototype.push=Cl,_c.prototype.has=pa;function jl(v){var y=this.__data__=new Qa(v);this.size=y.size}function Gu(){this.__data__=new Qa,this.size=0}function vc(v){var y=this.__data__,P=y.delete(v);return this.size=y.size,P}function n_(v){return this.__data__.get(v)}function Jd(v){return this.__data__.has(v)}function mr(v,y){var P=this.__data__;if(P instanceof Qa){var ee=P.__data__;if(!zr||ee.length<O-1)return ee.push([v,y]),this.size=++P.size,this;P=this.__data__=new Do(ee)}return P.set(v,y),this.size=P.size,this}jl.prototype.clear=Gu,jl.prototype.delete=vc,jl.prototype.get=n_,jl.prototype.has=Jd,jl.prototype.set=mr;function eh(v,y){var P=Bi(v),ee=!P&&Wp(v),fe=!P&&!ee&&wu(v),xe=!P&&!ee&&!fe&&H_(v),Ve=P||ee||fe||xe,Xe=Ve?qh(v.length,Gd):[],rt=Xe.length;for(var $t in v)(y||Mr.call(v,$t))&&!(Ve&&($t=="length"||fe&&($t=="offset"||$t=="parent")||xe&&($t=="buffer"||$t=="byteLength"||$t=="byteOffset")||ro($t,rt)))&&Xe.push($t);return Xe}function ag(v){var y=v.length;return y?v[ah(0,y-1)]:I}function ds(v,y){return vu(io(v),Fs(y,0,v.length))}function bc(v){return vu(io(v))}function Es(v,y,P){(P!==I&&!dd(v[y],P)||P===I&&!(y in v))&&Yu(v,y,P)}function Yo(v,y,P){var ee=v[y];(!(Mr.call(v,y)&&dd(ee,P))||P===I&&!(y in v))&&Yu(v,y,P)}function th(v,y){for(var P=v.length;P--;)if(dd(v[P][0],y))return P;return-1}function $r(v,y,P,ee){return ma(v,function(fe,xe,Ve){y(ee,fe,P(fe),Ve)}),ee}function yl(v,y){return v&&Gl(y,oa(y),v)}function nh(v,y){return v&&Gl(y,Dl(y),v)}function Yu(v,y,P){y=="__proto__"&&ig?ig(v,y,{configurable:!0,enumerable:!0,value:P,writable:!0}):v[y]=P}function i_(v,y){for(var P=-1,ee=y.length,fe=gt(ee),xe=v==null;++P<ee;)fe[P]=xe?I:nc(v,y[P]);return fe}function Fs(v,y,P){return v===v&&(P!==I&&(v=v<=P?v:P),y!==I&&(v=v>=y?v:y)),v}function Bs(v,y,P,ee,fe,xe){var Ve,Xe=y&A,rt=y&te,$t=y&_e;if(P&&(Ve=fe?P(v,ee,fe,xe):P(v)),Ve!==I)return Ve;if(!Xo(v))return v;var jt=Bi(v);if(jt){if(Ve=Eg(v),!Xe)return io(v,Ve)}else{var on=Tr(v),Fn=on==nt||on==Mi;if(wu(v))return Sc(v,Xe);if(on==Vn||on==we||Fn&&!fe){if(Ve=rt||Fn?{}:El(v),!Xe)return rt?p_(v,nh(Ve,v)):na(v,yl(Ve,v))}else{if(!qr[on])return fe?v:{};Ve=b_(v,on,Xe)}}xe||(xe=new jl);var fi=xe.get(v);if(fi)return fi;xe.set(v,Ve),wE(v)?v.forEach(function(ki){Ve.add(Bs(ki,y,P,ki,v,xe))}):W1(v)&&v.forEach(function(ki,Br){Ve.set(Br,Bs(ki,y,P,Br,v,xe))});var Ii=$t?rt?Op:pu:rt?Dl:oa,Sr=jt?I:Ii(v);return La(Sr||v,function(ki,Br){Sr&&(Br=ki,ki=v[Br]),Yo(Ve,Br,Bs(ki,y,P,Br,v,xe))}),Ve}function hu(v){var y=oa(v);return function(P){return wp(P,v,y)}}function wp(v,y,P){var ee=P.length;if(v==null)return!ee;for(v=Xi(v);ee--;){var fe=P[ee],xe=y[fe],Ve=v[fe];if(Ve===I&&!(fe in v)||!xe(Ve))return!1}return!0}function Sp(v,y,P){if(typeof v!="function")throw new Vl(j);return ud(function(){v.apply(I,P)},y)}function lg(v,y,P,ee){var fe=-1,xe=pc,Ve=!0,Xe=v.length,rt=[],$t=y.length;if(!Xe)return rt;P&&(y=Lo(y,pl(P))),ee?(xe=Ga,Ve=!1):y.length>=O&&(xe=vp,Ve=!1,y=new _c(y));e:for(;++fe<Xe;){var jt=v[fe],on=P==null?jt:P(jt);if(jt=ee||jt!==0?jt:0,Ve&&on===on){for(var Fn=$t;Fn--;)if(y[Fn]===on)continue e;rt.push(jt)}else xe(y,on,ee)||rt.push(jt)}return rt}var ma=yg(el),r_=yg(a_,!0);function o_(v,y){var P=!0;return ma(v,function(ee,fe,xe){return P=!!y(ee,fe,xe),P}),P}function Jc(v,y,P){for(var ee=-1,fe=v.length;++ee<fe;){var xe=v[ee],Ve=y(xe);if(Ve!=null&&(Xe===I?Ve===Ve&&!ec(Ve):P(Ve,Xe)))var Xe=Ve,rt=xe}return rt}function s_(v,y,P,ee){var fe=v.length;for(P=Qi(P),P<0&&(P=-P>fe?0:fe+P),ee=ee===I||ee>fe?fe:Qi(ee),ee<0&&(ee+=fe),ee=P>ee?0:EE(ee);P<ee;)v[P++]=y;return v}function L0(v,y){var P=[];return ma(v,function(ee,fe,xe){y(ee,fe,xe)&&P.push(ee)}),P}function Ws(v,y,P,ee,fe){var xe=-1,Ve=v.length;for(P||(P=R0),fe||(fe=[]);++xe<Ve;){var Xe=v[xe];y>0&&P(Xe)?y>1?Ws(Xe,y-1,P,ee,fe):Fu(fe,Xe):ee||(fe[fe.length]=Xe)}return fe}var Jh=T0(),ef=T0(!0);function el(v,y){return v&&Jh(v,y,oa)}function a_(v,y){return v&&ef(v,y,oa)}function ql(v,y){return Ir(y,function(P){return fd(v[P])})}function Cc(v,y){y=ka(y,v);for(var P=0,ee=y.length;v!=null&&P<ee;)v=v[bu(y[P++])];return P&&P==ee?v:I}function ih(v,y,P){var ee=y(v);return Bi(v)?ee:Fu(ee,P(v))}function Io(v){return v==null?v===I?Ye:Qs:fa&&fa in Xi(v)?S1(v):Lg(v)}function Kl(v,y){return v>y}function Ep(v,y){return v!=null&&Mr.call(v,y)}function ed(v,y){return v!=null&&y in Xi(v)}function Lp(v,y,P){return v>=an(y,P)&&v<Ei(y,P)}function rh(v,y,P){for(var ee=P?Ga:pc,fe=v[0].length,xe=v.length,Ve=xe,Xe=gt(xe),rt=1/0,$t=[];Ve--;){var jt=v[Ve];Ve&&y&&(jt=Lo(jt,pl(y))),rt=an(jt.length,rt),Xe[Ve]=!P&&(y||fe>=120&&jt.length>=120)?new _c(Ve&&jt):I}jt=v[0];var on=-1,Fn=Xe[0];e:for(;++on<fe&&$t.length<rt;){var fi=jt[on],Ii=y?y(fi):fi;if(fi=P||fi!==0?fi:0,!(Fn?vp(Fn,Ii):ee($t,Ii,P))){for(Ve=xe;--Ve;){var Sr=Xe[Ve];if(!(Sr?vp(Sr,Ii):ee(v[Ve],Ii,P)))continue e}Fn&&Fn.push(Ii),$t.push(fi)}}return $t}function l_(v,y,P,ee){return el(v,function(fe,xe,Ve){y(ee,P(fe),xe,Ve)}),ee}function tf(v,y,P){y=ka(y,v),v=fh(v,y);var ee=v==null?v:v[bu(Cu(y))];return ee==null?I:Wl(ee,v,P)}function no(v){return zi(v)&&Io(v)==we}function ug(v){return zi(v)&&Io(v)==Ce}function nf(v){return zi(v)&&Io(v)==bt}function rf(v,y,P,ee,fe){return v===y?!0:v==null||y==null||!zi(v)&&!zi(y)?v!==v&&y!==y:oh(v,y,P,ee,rf,fe)}function oh(v,y,P,ee,fe,xe){var Ve=Bi(v),Xe=Bi(y),rt=Ve?Te:Tr(v),$t=Xe?Te:Tr(y);rt=rt==we?Vn:rt,$t=$t==we?Vn:$t;var jt=rt==Vn,on=$t==Vn,Fn=rt==$t;if(Fn&&wu(v)){if(!wu(y))return!1;Ve=!0,jt=!1}if(Fn&&!jt)return xe||(xe=new jl),Ve||H_(v)?hs(v,y,P,ee,fe,xe):Di(v,y,rt,P,ee,fe,xe);if(!(P&de)){var fi=jt&&Mr.call(v,"__wrapped__"),Ii=on&&Mr.call(y,"__wrapped__");if(fi||Ii){var Sr=fi?v.value():v,ki=Ii?y.value():y;return xe||(xe=new jl),fe(Sr,ki,P,ee,xe)}}return Fn?(xe||(xe=new jl),Ap(v,y,P,ee,fe,xe)):!1}function Ln(v){return zi(v)&&Tr(v)==ni}function td(v,y,P,ee){var fe=P.length,xe=fe,Ve=!ee;if(v==null)return!xe;for(v=Xi(v);fe--;){var Xe=P[fe];if(Ve&&Xe[2]?Xe[1]!==v[Xe[0]]:!(Xe[0]in v))return!1}for(;++fe<xe;){Xe=P[fe];var rt=Xe[0],$t=v[rt],jt=Xe[1];if(Ve&&Xe[2]){if($t===I&&!(rt in v))return!1}else{var on=new jl;if(ee)var Fn=ee($t,jt,rt,v,y,on);if(!(Fn===I?rf(jt,$t,de|Me,ee,on):Fn))return!1}}return!0}function zo(v){if(!Xo(v)||w_(v))return!1;var y=fd(v)?dy:ay;return y.test(Ll(v))}function yo(v){return zi(v)&&Io(v)==lr}function Ls(v){return zi(v)&&Tr(v)==Ct}function u_(v){return zi(v)&&yn(v.length)&&!!eo[Io(v)]}function cg(v){return typeof v=="function"?v:v==null?Su:typeof v=="object"?Bi(v)?hg(v[0],v[1]):dg(v):OE(v)}function Kr(v){if(!Na(v))return zl(v);var y=[];for(var P in Xi(v))Mr.call(v,P)&&P!="constructor"&&y.push(P);return y}function hy(v){if(!Xo(v))return Yl(v);var y=Na(v),P=[];for(var ee in v)ee=="constructor"&&(y||!Mr.call(v,ee))||P.push(ee);return P}function $o(v,y){return v<y}function sh(v,y){var P=-1,ee=Oa(v)?gt(v.length):[];return ma(v,function(fe,xe,Ve){ee[++P]=y(fe,xe,Ve)}),ee}function dg(v){var y=v_(v);return y.length==1&&y[0][2]?Us(y[0][0],y[0][1]):function(P){return P===v||td(P,v,y)}}function hg(v,y){return C_(v)&&yr(y)?Us(bu(v),y):function(P){var ee=nc(P,v);return ee===I&&ee===y?Py(P,v):rf(y,ee,de|Me)}}function cr(v,y,P,ee,fe){v!==y&&Jh(y,function(xe,Ve){if(fe||(fe=new jl),Xo(xe))ko(v,y,Ve,P,cr,ee,fe);else{var Xe=ee?ee(gh(v,Ve),xe,Ve+"",v,y,fe):I;Xe===I&&(Xe=xe),Es(v,Ve,Xe)}},Dl)}function ko(v,y,P,ee,fe,xe,Ve){var Xe=gh(v,P),rt=gh(y,P),$t=Ve.get(rt);if($t){Es(v,P,$t);return}var jt=xe?xe(Xe,rt,P+"",v,y,Ve):I,on=jt===I;if(on){var Fn=Bi(rt),fi=!Fn&&wu(rt),Ii=!Fn&&!fi&&H_(rt);jt=rt,Fn||fi||Ii?Bi(Xe)?jt=Xe:zs(Xe)?jt=io(Xe):fi?(on=!1,jt=Sc(rt,!0)):Ii?(on=!1,jt=k0(rt,!0)):jt=[]:Y0(rt)||Wp(rt)?(jt=Xe,Wp(Xe)?jt=wr(Xe):(!Xo(Xe)||fd(Xe))&&(jt=El(rt))):on=!1}on&&(Ve.set(rt,jt),fe(jt,rt,ee,xe,Ve),Ve.delete(rt)),Es(v,P,jt)}function yc(v,y){var P=v.length;if(P)return y+=y<0?P:0,ro(y,P)?v[y]:I}function fg(v,y,P){y.length?y=Lo(y,function(xe){return Bi(xe)?function(Ve){return Cc(Ve,xe.length===1?xe[0]:xe)}:xe}):y=[Su];var ee=-1;y=Lo(y,pl(si()));var fe=sh(v,function(xe,Ve,Xe){var rt=Lo(y,function($t){return $t(xe)});return{criteria:rt,index:++ee,value:xe}});return au(fe,function(xe,Ve){return uh(xe,Ve,P)})}function nd(v,y){return xp(v,y,function(P,ee){return Py(v,ee)})}function xp(v,y,P){for(var ee=-1,fe=y.length,xe={};++ee<fe;){var Ve=y[ee],Xe=Cc(v,Ve);P(Xe,Ve)&&fu(xe,ka(Ve,v),Xe)}return xe}function gg(v){return function(y){return Cc(y,v)}}function pg(v,y,P,ee){var fe=ee?Ym:Wu,xe=-1,Ve=y.length,Xe=v;for(v===y&&(y=io(y)),P&&(Xe=Lo(v,pl(P)));++xe<Ve;)for(var rt=0,$t=y[xe],jt=P?P($t):$t;(rt=fe(Xe,jt,rt,ee))>-1;)Xe!==v&&uu.call(Xe,rt,1),uu.call(v,rt,1);return v}function of(v,y){for(var P=v?y.length:0,ee=P-1;P--;){var fe=y[P];if(P==ee||fe!==xe){var xe=fe;ro(fe)?uu.call(v,fe,1):D0(v,fe)}}return v}function ah(v,y){return v+bl(Zh()*(y-v+1))}function Da(v,y,P,ee){for(var fe=-1,xe=Ei(Ul((y-v)/(P||1)),0),Ve=gt(xe);xe--;)Ve[ee?xe:++fe]=v,v+=P;return Ve}function c_(v,y){var P="";if(!v||y<1||y>Qt)return P;do y%2&&(P+=v),y=bl(y/2),y&&(v+=v);while(y);return P}function di(v,y){return Aa(Ds(v,y,Su),v+"")}function sf(v){return ag(z_(v))}function d_(v,y){var P=z_(v);return vu(P,Fs(y,0,P.length))}function fu(v,y,P,ee){if(!Xo(v))return v;y=ka(y,v);for(var fe=-1,xe=y.length,Ve=xe-1,Xe=v;Xe!=null&&++fe<xe;){var rt=bu(y[fe]),$t=P;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return v;if(fe!=Ve){var jt=Xe[rt];$t=ee?ee(jt,rt,Xe):I,$t===I&&($t=Xo(jt)?jt:ro(y[fe+1])?[]:{})}Yo(Xe,rt,$t),Xe=Xe[rt]}return v}var Dp=Qc?function(v,y){return Qc.set(v,y),v}:Su,y1=ig?function(v,y){return ig(v,"toString",{configurable:!0,enumerable:!1,value:Hy(y),writable:!0})}:Su;function x0(v){return vu(z_(v))}function tl(v,y,P){var ee=-1,fe=v.length;y<0&&(y=-y>fe?0:fe+y),P=P>fe?fe:P,P<0&&(P+=fe),fe=y>P?0:P-y>>>0,y>>>=0;for(var xe=gt(fe);++ee<fe;)xe[ee]=v[ee+y];return xe}function h_(v,y){var P;return ma(v,function(ee,fe,xe){return P=y(ee,fe,xe),!P}),!!P}function Ip(v,y,P){var ee=0,fe=v==null?ee:v.length;if(typeof y=="number"&&y===y&&fe<=U){for(;ee<fe;){var xe=ee+fe>>>1,Ve=v[xe];Ve!==null&&!ec(Ve)&&(P?Ve<=y:Ve<y)?ee=xe+1:fe=xe}return fe}return mg(v,y,Su,P)}function mg(v,y,P,ee){var fe=0,xe=v==null?0:v.length;if(xe===0)return 0;y=P(y);for(var Ve=y!==y,Xe=y===null,rt=ec(y),$t=y===I;fe<xe;){var jt=bl((fe+xe)/2),on=P(v[jt]),Fn=on!==I,fi=on===null,Ii=on===on,Sr=ec(on);if(Ve)var ki=ee||Ii;else $t?ki=Ii&&(ee||Fn):Xe?ki=Ii&&Fn&&(ee||!fi):rt?ki=Ii&&Fn&&!fi&&(ee||!Sr):fi||Sr?ki=!1:ki=ee?on<=y:on<y;ki?fe=jt+1:xe=jt}return an(xe,oe)}function _g(v,y){for(var P=-1,ee=v.length,fe=0,xe=[];++P<ee;){var Ve=v[P],Xe=y?y(Ve):Ve;if(!P||!dd(Xe,rt)){var rt=Xe;xe[fe++]=Ve===0?0:Ve}}return xe}function Gr(v){return typeof v=="number"?v:ec(v)?We:+v}function kr(v){if(typeof v=="string")return v;if(Bi(v))return Lo(v,kr)+"";if(ec(v))return Jm?Jm.call(v):"";var y=v+"";return y=="0"&&1/v==-mt?"-0":y}function id(v,y,P){var ee=-1,fe=pc,xe=v.length,Ve=!0,Xe=[],rt=Xe;if(P)Ve=!1,fe=Ga;else if(xe>=O){var $t=y?null:m_(v);if($t)return tg($t);Ve=!1,fe=vp,rt=new _c}else rt=y?[]:Xe;e:for(;++ee<xe;){var jt=v[ee],on=y?y(jt):jt;if(jt=P||jt!==0?jt:0,Ve&&on===on){for(var Fn=rt.length;Fn--;)if(rt[Fn]===on)continue e;y&&rt.push(on),Xe.push(jt)}else fe(rt,on,P)||(rt!==Xe&&rt.push(on),Xe.push(jt))}return Xe}function D0(v,y){return y=ka(y,v),v=fh(v,y),v==null||delete v[bu(Cu(y))]}function rd(v,y,P,ee){return fu(v,y,P(Cc(v,y)),ee)}function wl(v,y,P,ee){for(var fe=v.length,xe=ee?fe:-1;(ee?xe--:++xe<fe)&&y(v[xe],xe,v););return P?tl(v,ee?0:xe,ee?xe+1:fe):tl(v,ee?xe+1:0,ee?fe:xe)}function f_(v,y){var P=v;return P instanceof Yn&&(P=P.value()),qm(y,function(ee,fe){return fe.func.apply(fe.thisArg,Fu([ee],fe.args))},P)}function vg(v,y,P){var ee=v.length;if(ee<2)return ee?id(v[0]):[];for(var fe=-1,xe=gt(ee);++fe<ee;)for(var Ve=v[fe],Xe=-1;++Xe<ee;)Xe!=fe&&(xe[fe]=lg(xe[fe]||Ve,v[Xe],y,P));return id(Ws(xe,1),y,P)}function I0(v,y,P){for(var ee=-1,fe=v.length,xe=y.length,Ve={};++ee<fe;){var Xe=ee<xe?y[ee]:I;P(Ve,v[ee],Xe)}return Ve}function bg(v){return zs(v)?v:[]}function Ia(v){return typeof v=="function"?v:Su}function ka(v,y){return Bi(v)?v:C_(v,y)?[v]:Rp(so(v))}var fy=di;function wc(v,y,P){var ee=v.length;return P=P===I?ee:P,!y&&P>=ee?v:tl(v,y,P)}var od=Xd||function(v){return ha.clearTimeout(v)};function Sc(v,y){if(y)return v.slice();var P=v.length,ee=Yd?Yd(P):new v.constructor(P);return v.copy(ee),ee}function af(v){var y=new v.constructor(v.byteLength);return new Yh(y).set(new Yh(v)),y}function lf(v,y){var P=y?af(v.buffer):v.buffer;return new v.constructor(P,v.byteOffset,v.byteLength)}function Cg(v){var y=new v.constructor(v.source,Bd.exec(v));return y.lastIndex=v.lastIndex,y}function lh(v){return Qd?Xi(Qd.call(v)):{}}function k0(v,y){var P=y?af(v.buffer):v.buffer;return new v.constructor(P,v.byteOffset,v.length)}function kp(v,y){if(v!==y){var P=v!==I,ee=v===null,fe=v===v,xe=ec(v),Ve=y!==I,Xe=y===null,rt=y===y,$t=ec(y);if(!Xe&&!$t&&!xe&&v>y||xe&&Ve&&rt&&!Xe&&!$t||ee&&Ve&&rt||!P&&rt||!fe)return 1;if(!ee&&!xe&&!$t&&v<y||$t&&P&&fe&&!ee&&!xe||Xe&&P&&fe||!Ve&&fe||!rt)return-1}return 0}function uh(v,y,P){for(var ee=-1,fe=v.criteria,xe=y.criteria,Ve=fe.length,Xe=P.length;++ee<Ve;){var rt=kp(fe[ee],xe[ee]);if(rt){if(ee>=Xe)return rt;var $t=P[ee];return rt*($t=="desc"?-1:1)}}return v.index-y.index}function g_(v,y,P,ee){for(var fe=-1,xe=v.length,Ve=P.length,Xe=-1,rt=y.length,$t=Ei(xe-Ve,0),jt=gt(rt+$t),on=!ee;++Xe<rt;)jt[Xe]=y[Xe];for(;++fe<Ve;)(on||fe<xe)&&(jt[P[fe]]=v[fe]);for(;$t--;)jt[Xe++]=v[fe++];return jt}function Vs(v,y,P,ee){for(var fe=-1,xe=v.length,Ve=-1,Xe=P.length,rt=-1,$t=y.length,jt=Ei(xe-Xe,0),on=gt(jt+$t),Fn=!ee;++fe<jt;)on[fe]=v[fe];for(var fi=fe;++rt<$t;)on[fi+rt]=y[rt];for(;++Ve<Xe;)(Fn||fe<xe)&&(on[fi+P[Ve]]=v[fe++]);return on}function io(v,y){var P=-1,ee=v.length;for(y||(y=gt(ee));++P<ee;)y[P]=v[P];return y}function Gl(v,y,P,ee){var fe=!P;P||(P={});for(var xe=-1,Ve=y.length;++xe<Ve;){var Xe=y[xe],rt=ee?ee(P[Xe],v[Xe],Xe,P,v):I;rt===I&&(rt=v[Xe]),fe?Yu(P,Xe,rt):Yo(P,Xe,rt)}return P}function na(v,y){return Gl(v,hf(v),y)}function p_(v,y){return Gl(v,Sg(v),y)}function uf(v,y){return function(P,ee){var fe=Bi(P)?_p:$r,xe=y?y():{};return fe(P,v,si(ee,2),xe)}}function cf(v){return di(function(y,P){var ee=-1,fe=P.length,xe=fe>1?P[fe-1]:I,Ve=fe>2?P[2]:I;for(xe=v.length>3&&typeof xe=="function"?(fe--,xe):I,Ve&&oo(P[0],P[1],Ve)&&(xe=fe<3?I:xe,fe=1),y=Xi(y);++ee<fe;){var Xe=P[ee];Xe&&v(y,Xe,ee,xe)}return y})}function yg(v,y){return function(P,ee){if(P==null)return P;if(!Oa(P))return v(P,ee);for(var fe=P.length,xe=y?fe:-1,Ve=Xi(P);(y?xe--:++xe<fe)&&ee(Ve[xe],xe,Ve)!==!1;);return P}}function T0(v){return function(y,P,ee){for(var fe=-1,xe=Xi(y),Ve=ee(y),Xe=Ve.length;Xe--;){var rt=Ve[v?Xe:++fe];if(P(xe[rt],rt,xe)===!1)break}return y}}function N0(v,y,P){var ee=y&He,fe=Xu(v);function xe(){var Ve=this&&this!==ha&&this instanceof xe?fe:v;return Ve.apply(ee?P:this,arguments)}return xe}function Hs(v){return function(y){y=so(y);var P=Pi(y)?xa(y):I,ee=P?P[0]:y.charAt(0),fe=P?wc(P,1).join(""):y.slice(1);return ee[v]()+fe}}function Zu(v){return function(y){return qm(AE(NE(y).replace(ja,"")),v,"")}}function Xu(v){return function(){var y=arguments;switch(y.length){case 0:return new v;case 1:return new v(y[0]);case 2:return new v(y[0],y[1]);case 3:return new v(y[0],y[1],y[2]);case 4:return new v(y[0],y[1],y[2],y[3]);case 5:return new v(y[0],y[1],y[2],y[3],y[4]);case 6:return new v(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new v(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var P=ea(v.prototype),ee=v.apply(P,y);return Xo(ee)?ee:P}}function df(v,y,P){var ee=Xu(v);function fe(){for(var xe=arguments.length,Ve=gt(xe),Xe=xe,rt=_u(fe);Xe--;)Ve[Xe]=arguments[Xe];var $t=xe<3&&Ve[0]!==rt&&Ve[xe-1]!==rt?[]:Os(Ve,rt);if(xe-=$t.length,xe<P)return A0(v,y,qt,fe.placeholder,I,Ve,$t,I,I,P-xe);var jt=this&&this!==ha&&this instanceof fe?ee:v;return Wl(jt,this,Ve)}return fe}function sd(v){return function(y,P,ee){var fe=Xi(y);if(!Oa(y)){var xe=si(P,3);y=oa(y),P=function(Xe){return xe(fe[Xe],Xe,fe)}}var Ve=v(y,P,ee);return Ve>-1?fe[xe?y[Ve]:Ve]:I}}function Sl(v){return Tn(function(y){var P=y.length,ee=P,fe=ga.prototype.thru;for(v&&y.reverse();ee--;){var xe=y[ee];if(typeof xe!="function")throw new Vl(j);if(fe&&!Ve&&mu(xe)=="wrapper")var Ve=new ga([],!0)}for(ee=Ve?ee:P;++ee<P;){xe=y[ee];var Xe=mu(xe),rt=Xe=="wrapper"?__(xe):I;rt&&M0(rt[0])&&rt[1]==(wt|Rt|xt|dn)&&!rt[4].length&&rt[9]==1?Ve=Ve[mu(rt[0])].apply(Ve,rt[3]):Ve=xe.length==1&&M0(xe)?Ve[Xe]():Ve.thru(xe)}return function(){var $t=arguments,jt=$t[0];if(Ve&&$t.length==1&&Bi(jt))return Ve.plant(jt).value();for(var on=0,Fn=P?y[on].apply(this,$t):jt;++on<P;)Fn=y[on].call(this,Fn);return Fn}})}function qt(v,y,P,ee,fe,xe,Ve,Xe,rt,$t){var jt=y&wt,on=y&He,Fn=y&st,fi=y&(Rt|lt),Ii=y&sn,Sr=Fn?I:Xu(v);function ki(){for(var Br=arguments.length,Yr=gt(Br),Cf=Br;Cf--;)Yr[Cf]=arguments[Cf];if(fi)var gd=_u(ki),yf=Pe(Yr,gd);if(ee&&(Yr=g_(Yr,ee,fe,fi)),xe&&(Yr=Vs(Yr,xe,Ve,fi)),Br-=yf,fi&&Br<$t){var al=Os(Yr,gd);return A0(v,y,qt,ki.placeholder,P,Yr,al,Xe,rt,$t-Br)}var Hp=on?P:this,ib=Fn?Hp[v]:v;return Br=Yr.length,Xe?Yr=ld(Yr,Xe):Ii&&Br>1&&Yr.reverse(),jt&&rt<Br&&(Yr.length=rt),this&&this!==ha&&this instanceof ki&&(ib=Sr||Xu(ib)),ib.apply(Hp,Yr)}return ki}function ch(v,y){return function(P,ee){return l_(P,v,y(ee),{})}}function ad(v,y){return function(P,ee){var fe;if(P===I&&ee===I)return y;if(P!==I&&(fe=P),ee!==I){if(fe===I)return ee;typeof P=="string"||typeof ee=="string"?(P=kr(P),ee=kr(ee)):(P=Gr(P),ee=Gr(ee)),fe=v(P,ee)}return fe}}function _a(v){return Tn(function(y){return y=Lo(y,pl(si())),di(function(P){var ee=this;return v(y,function(fe){return Wl(fe,ee,P)})})})}function Tp(v,y){y=y===I?" ":kr(y);var P=y.length;if(P<2)return P?c_(y,v):y;var ee=c_(y,Ul(v/$n(y)));return Pi(y)?wc(xa(ee),0,v).join(""):ee.slice(0,v)}function dh(v,y,P,ee){var fe=y&He,xe=Xu(v);function Ve(){for(var Xe=-1,rt=arguments.length,$t=-1,jt=ee.length,on=gt(jt+rt),Fn=this&&this!==ha&&this instanceof Ve?xe:v;++$t<jt;)on[$t]=ee[$t];for(;rt--;)on[$t++]=arguments[++Xe];return Wl(Fn,fe?P:this,on)}return Ve}function gu(v){return function(y,P,ee){return ee&&typeof ee!="number"&&oo(y,P,ee)&&(P=ee=I),y=tc(y),P===I?(P=y,y=0):P=tc(P),ee=ee===I?y<P?1:-1:tc(ee),Da(y,P,ee,v)}}function Cr(v){return function(y,P){return typeof y=="string"&&typeof P=="string"||(y=xc(y),P=xc(P)),v(y,P)}}function A0(v,y,P,ee,fe,xe,Ve,Xe,rt,$t){var jt=y&Rt,on=jt?Ve:I,Fn=jt?I:Ve,fi=jt?xe:I,Ii=jt?I:xe;y|=jt?xt:zt,y&=~(jt?zt:xt),y&Dt||(y&=~(He|st));var Sr=[v,y,fe,fi,on,Ii,Fn,Xe,rt,$t],ki=P.apply(I,Sr);return M0(v)&&S_(ki,Sr),ki.placeholder=ee,xg(ki,v,y)}function Np(v){var y=us[v];return function(P,ee){if(P=xc(P),ee=ee==null?0:an(Qi(ee),292),ee&&q(P)){var fe=(so(P)+"e").split("e"),xe=y(fe[0]+"e"+(+fe[1]+ee));return fe=(so(xe)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-ee))}return y(P)}}var m_=cs&&1/tg(new cs([,-0]))[1]==mt?function(v){return new cs(v)}:$y;function O0(v){return function(y){var P=Tr(y);return P==ni?w0(y):P==Ct?Ya(y):h1(y,v(y))}}function nl(v,y,P,ee,fe,xe,Ve,Xe){var rt=y&st;if(!rt&&typeof v!="function")throw new Vl(j);var $t=ee?ee.length:0;if($t||(y&=~(xt|zt),ee=fe=I),Ve=Ve===I?Ve:Ei(Qi(Ve),0),Xe=Xe===I?Xe:Qi(Xe),$t-=fe?fe.length:0,y&zt){var jt=ee,on=fe;ee=fe=I}var Fn=rt?I:__(v),fi=[v,y,P,ee,fe,jt,on,xe,Ve,Xe];if(Fn&&ba(fi,Fn),v=fi[0],y=fi[1],P=fi[2],ee=fi[3],fe=fi[4],Xe=fi[9]=fi[9]===I?rt?0:v.length:Ei(fi[9]-$t,0),!Xe&&y&(Rt|lt)&&(y&=~(Rt|lt)),!y||y==He)var Ii=N0(v,y,P);else y==Rt||y==lt?Ii=df(v,y,Xe):(y==xt||y==(He|xt))&&!fe.length?Ii=dh(v,y,P,ee):Ii=qt.apply(I,fi);var Sr=Fn?Dp:S_;return xg(Sr(Ii,fi),v,y)}function va(v,y,P,ee){return v===I||dd(v,Xa[P])&&!Mr.call(ee,P)?y:v}function w1(v,y,P,ee,fe,xe){return Xo(v)&&Xo(y)&&(xe.set(y,v),cr(v,y,I,w1,xe),xe.delete(y)),v}function gy(v){return Y0(v)?I:v}function hs(v,y,P,ee,fe,xe){var Ve=P&de,Xe=v.length,rt=y.length;if(Xe!=rt&&!(Ve&&rt>Xe))return!1;var $t=xe.get(v),jt=xe.get(y);if($t&&jt)return $t==y&&jt==v;var on=-1,Fn=!0,fi=P&Me?new _c:I;for(xe.set(v,y),xe.set(y,v);++on<Xe;){var Ii=v[on],Sr=y[on];if(ee)var ki=Ve?ee(Sr,Ii,on,y,v,xe):ee(Ii,Sr,on,v,y,xe);if(ki!==I){if(ki)continue;Fn=!1;break}if(fi){if(!Km(y,function(Br,Yr){if(!vp(fi,Yr)&&(Ii===Br||fe(Ii,Br,P,ee,xe)))return fi.push(Yr)})){Fn=!1;break}}else if(!(Ii===Sr||fe(Ii,Sr,P,ee,xe))){Fn=!1;break}}return xe.delete(v),xe.delete(y),Fn}function Di(v,y,P,ee,fe,xe,Ve){switch(P){case Ie:if(v.byteLength!=y.byteLength||v.byteOffset!=y.byteOffset)return!1;v=v.buffer,y=y.buffer;case Ce:return!(v.byteLength!=y.byteLength||!xe(new Yh(v),new Yh(y)));case ze:case bt:case bi:return dd(+v,+y);case En:return v.name==y.name&&v.message==y.message;case lr:case as:return v==y+"";case ni:var Xe=w0;case Ct:var rt=ee&de;if(Xe||(Xe=tg),v.size!=y.size&&!rt)return!1;var $t=Ve.get(v);if($t)return $t==y;ee|=Me,Ve.set(v,y);var jt=hs(Xe(v),Xe(y),ee,fe,xe,Ve);return Ve.delete(v),jt;case et:if(Qd)return Qd.call(v)==Qd.call(y)}return!1}function Ap(v,y,P,ee,fe,xe){var Ve=P&de,Xe=pu(v),rt=Xe.length,$t=pu(y),jt=$t.length;if(rt!=jt&&!Ve)return!1;for(var on=rt;on--;){var Fn=Xe[on];if(!(Ve?Fn in y:Mr.call(y,Fn)))return!1}var fi=xe.get(v),Ii=xe.get(y);if(fi&&Ii)return fi==y&&Ii==v;var Sr=!0;xe.set(v,y),xe.set(y,v);for(var ki=Ve;++on<rt;){Fn=Xe[on];var Br=v[Fn],Yr=y[Fn];if(ee)var Cf=Ve?ee(Yr,Br,Fn,y,v,xe):ee(Br,Yr,Fn,v,y,xe);if(!(Cf===I?Br===Yr||fe(Br,Yr,P,ee,xe):Cf)){Sr=!1;break}ki||(ki=Fn=="constructor")}if(Sr&&!ki){var gd=v.constructor,yf=y.constructor;gd!=yf&&"constructor"in v&&"constructor"in y&&!(typeof gd=="function"&&gd instanceof gd&&typeof yf=="function"&&yf instanceof yf)&&(Sr=!1)}return xe.delete(v),xe.delete(y),Sr}function Tn(v){return Aa(Ds(v,I,cd),v+"")}function pu(v){return ih(v,oa,hf)}function Op(v){return ih(v,Dl,Sg)}var __=Qc?function(v){return Qc.get(v)}:$y;function mu(v){for(var y=v.name+"",P=Ms[y],ee=Mr.call(Ms,y)?P.length:0;ee--;){var fe=P[ee],xe=fe.func;if(xe==null||xe==v)return fe.name}return y}function _u(v){var y=Mr.call(Ee,"placeholder")?Ee:v;return y.placeholder}function si(){var v=Ee.iteratee||Uy;return v=v===Uy?cg:v,arguments.length?v(arguments[0],arguments[1]):v}function wg(v,y){var P=v.__data__;return y_(y)?P[typeof y=="string"?"string":"hash"]:P.map}function v_(v){for(var y=oa(v),P=y.length;P--;){var ee=y[P],fe=v[ee];y[P]=[ee,fe,yr(fe)]}return y}function hh(v,y){var P=Kn(v,y);return zo(P)?P:I}function S1(v){var y=Mr.call(v,fa),P=v[fa];try{v[fa]=I;var ee=!0}catch{}var fe=Xc.call(v);return ee&&(y?v[fa]=P:delete v[fa]),fe}var hf=Rs?function(v){return v==null?[]:(v=Xi(v),Ir(Rs(v),function(y){return vl.call(v,y)}))}:b,Sg=Rs?function(v){for(var y=[];v;)Fu(y,hf(v)),v=_l(v);return y}:b,Tr=Io;(bo&&Tr(new bo(new ArrayBuffer(1)))!=Ie||zr&&Tr(new zr)!=ni||mc&&Tr(mc.resolve())!=Dr||cs&&Tr(new cs)!=Ct||Js&&Tr(new Js)!=it)&&(Tr=function(v){var y=Io(v),P=y==Vn?v.constructor:I,ee=P?Ll(P):"";if(ee)switch(ee){case Qm:return Ie;case m1:return ni;case _1:return Dr;case Ss:return Ct;case v1:return it}return y});function il(v,y,P){for(var ee=-1,fe=P.length;++ee<fe;){var xe=P[ee],Ve=xe.size;switch(xe.type){case"drop":v+=Ve;break;case"dropRight":y-=Ve;break;case"take":y=an(y,v+Ve);break;case"takeRight":v=Ei(v,y-Ve);break}}return{start:v,end:y}}function Ec(v){var y=v.match(Pu);return y?y[1].split(l0):[]}function Qu(v,y,P){y=ka(y,v);for(var ee=-1,fe=y.length,xe=!1;++ee<fe;){var Ve=bu(y[ee]);if(!(xe=v!=null&&P(v,Ve)))break;v=v[Ve]}return xe||++ee!=fe?xe:(fe=v==null?0:v.length,!!fe&&yn(fe)&&ro(Ve,fe)&&(Bi(v)||Wp(v)))}function Eg(v){var y=v.length,P=new v.constructor(y);return y&&typeof v[0]=="string"&&Mr.call(v,"index")&&(P.index=v.index,P.input=v.input),P}function El(v){return typeof v.constructor=="function"&&!Na(v)?ea(_l(v)):{}}function b_(v,y,P){var ee=v.constructor;switch(y){case Ce:return af(v);case ze:case bt:return new ee(+v);case Ie:return lf(v,P);case ue:case Oe:case pt:case at:case Ut:case kn:case R:case K:case ce:return k0(v,P);case ni:return new ee;case bi:case as:return new ee(v);case lr:return Cg(v);case Ct:return new ee;case et:return lh(v)}}function Ta(v,y){var P=y.length;if(!P)return v;var ee=P-1;return y[ee]=(P>1?"& ":"")+y[ee],y=y.join(P>2?", ":" "),v.replace(ap,`{
/* [wrapped with `+y+`] */
`)}function R0(v){return Bi(v)||Wp(v)||!!(Vu&&v&&v[Vu])}function ro(v,y){var P=typeof v;return y=y??Qt,!!y&&(P=="number"||P!="symbol"&&Om.test(v))&&v>-1&&v%1==0&&v<y}function oo(v,y,P){if(!Xo(P))return!1;var ee=typeof y;return(ee=="number"?Oa(P)&&ro(y,P.length):ee=="string"&&y in P)?dd(P[y],v):!1}function C_(v,y){if(Bi(v))return!1;var P=typeof v;return P=="number"||P=="symbol"||P=="boolean"||v==null||ec(v)?!0:qi.test(v)||!Jt.test(v)||y!=null&&v in Xi(y)}function y_(v){var y=typeof v;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?v!=="__proto__":v===null}function M0(v){var y=mu(v),P=Ee[y];if(typeof P!="function"||!(y in Yn.prototype))return!1;if(v===P)return!0;var ee=__(P);return!!ee&&v===ee[0]}function w_(v){return!!bp&&bp in v}var P0=ml?fd:L;function Na(v){var y=v&&v.constructor,P=typeof y=="function"&&y.prototype||Xa;return v===P}function yr(v){return v===v&&!Xo(v)}function Us(v,y){return function(P){return P==null?!1:P[v]===y&&(y!==I||v in Xi(P))}}function xs(v){var y=Ui(v,function(ee){return P.size===se&&P.clear(),ee}),P=y.cache;return y}function ba(v,y){var P=v[1],ee=y[1],fe=P|ee,xe=fe<(He|st|wt),Ve=ee==wt&&P==Rt||ee==wt&&P==dn&&v[7].length<=y[8]||ee==(wt|dn)&&y[7].length<=y[8]&&P==Rt;if(!(xe||Ve))return v;ee&He&&(v[2]=y[2],fe|=P&He?0:Dt);var Xe=y[3];if(Xe){var rt=v[3];v[3]=rt?g_(rt,Xe,y[4]):Xe,v[4]=rt?Os(v[3],ie):y[4]}return Xe=y[5],Xe&&(rt=v[5],v[5]=rt?Vs(rt,Xe,y[6]):Xe,v[6]=rt?Os(v[5],ie):y[6]),Xe=y[7],Xe&&(v[7]=Xe),ee&wt&&(v[8]=v[8]==null?y[8]:an(v[8],y[8])),v[9]==null&&(v[9]=y[9]),v[0]=y[0],v[1]=fe,v}function Yl(v){var y=[];if(v!=null)for(var P in Xi(v))y.push(P);return y}function Lg(v){return Xc.call(v)}function Ds(v,y,P){return y=Ei(y===I?v.length-1:y,0),function(){for(var ee=arguments,fe=-1,xe=Ei(ee.length-y,0),Ve=gt(xe);++fe<xe;)Ve[fe]=ee[y+fe];fe=-1;for(var Xe=gt(y+1);++fe<y;)Xe[fe]=ee[fe];return Xe[y]=P(Ve),Wl(v,this,Xe)}}function fh(v,y){return y.length<2?v:Cc(v,tl(y,0,-1))}function ld(v,y){for(var P=v.length,ee=an(y.length,P),fe=io(v);ee--;){var xe=y[ee];v[ee]=ro(xe,P)?fe[xe]:I}return v}function gh(v,y){if(!(y==="constructor"&&typeof v[y]=="function")&&y!="__proto__")return v[y]}var S_=ff(Dp),ud=rg||function(v,y){return ha.setTimeout(v,y)},Aa=ff(y1);function xg(v,y,P){var ee=y+"";return Aa(v,Ta(ee,E_(Ec(ee),P)))}function ff(v){var y=0,P=0;return function(){var ee=Xm(),fe=un-(ee-P);if(P=ee,fe>0){if(++y>=xn)return arguments[0]}else y=0;return v.apply(I,arguments)}}function vu(v,y){var P=-1,ee=v.length,fe=ee-1;for(y=y===I?ee:y;++P<y;){var xe=ah(P,fe),Ve=v[xe];v[xe]=v[P],v[P]=Ve}return v.length=y,v}var Rp=xs(function(v){var y=[];return v.charCodeAt(0)===46&&y.push(""),v.replace(Ci,function(P,ee,fe,xe){y.push(fe?xe.replace(Fd,"$1"):ee||P)}),y});function bu(v){if(typeof v=="string"||ec(v))return v;var y=v+"";return y=="0"&&1/v==-mt?"-0":y}function Ll(v){if(v!=null){try{return Zc.call(v)}catch{}try{return v+""}catch{}}return""}function E_(v,y){return La(X,function(P){var ee="_."+P[0];y&P[1]&&!pc(v,ee)&&v.push(ee)}),v.sort()}function Fr(v){if(v instanceof Yn)return v.clone();var y=new ga(v.__wrapped__,v.__chain__);return y.__actions__=io(v.__actions__),y.__index__=v.__index__,y.__values__=v.__values__,y}function L_(v,y,P){(P?oo(v,y,P):y===I)?y=1:y=Ei(Qi(y),0);var ee=v==null?0:v.length;if(!ee||y<1)return[];for(var fe=0,xe=0,Ve=gt(Ul(ee/y));fe<ee;)Ve[xe++]=tl(v,fe,fe+=y);return Ve}function Mp(v){for(var y=-1,P=v==null?0:v.length,ee=0,fe=[];++y<P;){var xe=v[y];xe&&(fe[ee++]=xe)}return fe}function F0(){var v=arguments.length;if(!v)return[];for(var y=gt(v-1),P=arguments[0],ee=v;ee--;)y[ee-1]=arguments[ee];return Fu(Bi(P)?io(P):[P],Ws(y,1))}var Dg=di(function(v,y){return zs(v)?lg(v,Ws(y,1,zs,!0)):[]}),x_=di(function(v,y){var P=Cu(y);return zs(P)&&(P=I),zs(v)?lg(v,Ws(y,1,zs,!0),si(P,2)):[]}),rl=di(function(v,y){var P=Cu(y);return zs(P)&&(P=I),zs(v)?lg(v,Ws(y,1,zs,!0),I,P):[]});function ph(v,y,P){var ee=v==null?0:v.length;return ee?(y=P||y===I?1:Qi(y),tl(v,y<0?0:y,ee)):[]}function Ju(v,y,P){var ee=v==null?0:v.length;return ee?(y=P||y===I?1:Qi(y),y=ee-y,tl(v,0,y<0?0:y)):[]}function ia(v,y){return v&&v.length?wl(v,si(y,3),!0,!0):[]}function E1(v,y){return v&&v.length?wl(v,si(y,3),!0):[]}function B0(v,y,P,ee){var fe=v==null?0:v.length;return fe?(P&&typeof P!="number"&&oo(v,y,P)&&(P=0,ee=fe),s_(v,y,P,ee)):[]}function D_(v,y,P){var ee=v==null?0:v.length;if(!ee)return-1;var fe=P==null?0:Qi(P);return fe<0&&(fe=Ei(ee+fe,0)),Gm(v,si(y,3),fe)}function L1(v,y,P){var ee=v==null?0:v.length;if(!ee)return-1;var fe=ee-1;return P!==I&&(fe=Qi(P),fe=P<0?Ei(ee+fe,0):an(fe,ee-1)),Gm(v,si(y,3),fe,!0)}function cd(v){var y=v==null?0:v.length;return y?Ws(v,1):[]}function x1(v){var y=v==null?0:v.length;return y?Ws(v,mt):[]}function W0(v,y){var P=v==null?0:v.length;return P?(y=y===I?1:Qi(y),Ws(v,y)):[]}function gf(v){for(var y=-1,P=v==null?0:v.length,ee={};++y<P;){var fe=v[y];ee[fe[0]]=fe[1]}return ee}function I_(v){return v&&v.length?v[0]:I}function pf(v,y,P){var ee=v==null?0:v.length;if(!ee)return-1;var fe=P==null?0:Qi(P);return fe<0&&(fe=Ei(ee+fe,0)),Wu(v,y,fe)}function D1(v){var y=v==null?0:v.length;return y?tl(v,0,-1):[]}var I1=di(function(v){var y=Lo(v,bg);return y.length&&y[0]===v[0]?rh(y):[]}),V0=di(function(v){var y=Cu(v),P=Lo(v,bg);return y===Cu(P)?y=I:P.pop(),P.length&&P[0]===v[0]?rh(P,si(y,2)):[]}),k_=di(function(v){var y=Cu(v),P=Lo(v,bg);return y=typeof y=="function"?y:I,y&&P.pop(),P.length&&P[0]===v[0]?rh(P,I,y):[]});function py(v,y){return v==null?"":Uu.call(v,y)}function Cu(v){var y=v==null?0:v.length;return y?v[y-1]:I}function k1(v,y,P){var ee=v==null?0:v.length;if(!ee)return-1;var fe=ee;return P!==I&&(fe=Qi(P),fe=fe<0?Ei(ee+fe,0):an(fe,ee-1)),y===y?jd(v,y,fe):Gm(v,ys,fe,!0)}function T1(v,y){return v&&v.length?yc(v,Qi(y)):I}var mf=di(N1);function N1(v,y){return v&&v.length&&y&&y.length?pg(v,y):v}function Lc(v,y,P){return v&&v.length&&y&&y.length?pg(v,y,si(P,2)):v}function T_(v,y,P){return v&&v.length&&y&&y.length?pg(v,y,I,P):v}var ns=Tn(function(v,y){var P=v==null?0:v.length,ee=i_(v,y);return of(v,Lo(y,function(fe){return ro(fe,P)?+fe:fe}).sort(kp)),ee});function my(v,y){var P=[];if(!(v&&v.length))return P;var ee=-1,fe=[],xe=v.length;for(y=si(y,3);++ee<xe;){var Ve=v[ee];y(Ve,ee,v)&&(P.push(Ve),fe.push(ee))}return of(v,fe),P}function N_(v){return v==null?v:ws.call(v)}function _y(v,y,P){var ee=v==null?0:v.length;return ee?(P&&typeof P!="number"&&oo(v,y,P)?(y=0,P=ee):(y=y==null?0:Qi(y),P=P===I?ee:Qi(P)),tl(v,y,P)):[]}function vy(v,y){return Ip(v,y)}function A1(v,y,P){return mg(v,y,si(P,2))}function O1(v,y){var P=v==null?0:v.length;if(P){var ee=Ip(v,y);if(ee<P&&dd(v[ee],y))return ee}return-1}function by(v,y){return Ip(v,y,!0)}function xl(v,y,P){return mg(v,y,si(P,2),!0)}function H0(v,y){var P=v==null?0:v.length;if(P){var ee=Ip(v,y,!0)-1;if(dd(v[ee],y))return ee}return-1}function _f(v){return v&&v.length?_g(v):[]}function mh(v,y){return v&&v.length?_g(v,si(y,2)):[]}function A_(v){var y=v==null?0:v.length;return y?tl(v,1,y):[]}function vf(v,y,P){return v&&v.length?(y=P||y===I?1:Qi(y),tl(v,0,y<0?0:y)):[]}function O_(v,y,P){var ee=v==null?0:v.length;return ee?(y=P||y===I?1:Qi(y),y=ee-y,tl(v,y<0?0:y,ee)):[]}function U0(v,y){return v&&v.length?wl(v,si(y,3),!1,!0):[]}function z0(v,y){return v&&v.length?wl(v,si(y,3)):[]}var Cy=di(function(v){return id(Ws(v,1,zs,!0))}),$0=di(function(v){var y=Cu(v);return zs(y)&&(y=I),id(Ws(v,1,zs,!0),si(y,2))}),yy=di(function(v){var y=Cu(v);return y=typeof y=="function"?y:I,id(Ws(v,1,zs,!0),I,y)});function R1(v){return v&&v.length?id(v):[]}function M1(v,y){return v&&v.length?id(v,si(y,2)):[]}function R_(v,y){return y=typeof y=="function"?y:I,v&&v.length?id(v,I,y):[]}function Ig(v){if(!(v&&v.length))return[];var y=0;return v=Ir(v,function(P){if(zs(P))return y=Ei(P.length,y),!0}),qh(y,function(P){return Lo(v,b0(P))})}function j0(v,y){if(!(v&&v.length))return[];var P=Ig(v);return y==null?P:Lo(P,function(ee){return Wl(y,I,ee)})}var q0=di(function(v,y){return zs(v)?lg(v,y):[]}),wy=di(function(v){return vg(Ir(v,zs))}),M_=di(function(v){var y=Cu(v);return zs(y)&&(y=I),vg(Ir(v,zs),si(y,2))}),Pp=di(function(v){var y=Cu(v);return y=typeof y=="function"?y:I,vg(Ir(v,zs),I,y)}),P_=di(Ig);function K0(v,y){return I0(v||[],y||[],Yo)}function F_(v,y){return I0(v||[],y||[],fu)}var P1=di(function(v){var y=v.length,P=y>1?v[y-1]:I;return P=typeof P=="function"?(v.pop(),P):I,j0(v,P)});function _h(v){var y=Ee(v);return y.__chain__=!0,y}function B_(v,y){return y(v),v}function W_(v,y){return y(v)}var Fp=Tn(function(v){var y=v.length,P=y?v[0]:0,ee=this.__wrapped__,fe=function(xe){return i_(xe,v)};return y>1||this.__actions__.length||!(ee instanceof Yn)||!ro(P)?this.thru(fe):(ee=ee.slice(P,+P+(y?1:0)),ee.__actions__.push({func:W_,args:[fe],thisArg:I}),new ga(ee,this.__chain__).thru(function(xe){return y&&!xe.length&&xe.push(I),xe}))});function Sy(){return _h(this)}function V_(){return new ga(this.value(),this.__chain__)}function g(){this.__values__===I&&(this.__values__=SE(this.value()));var v=this.__index__>=this.__values__.length,y=v?I:this.__values__[this.__index__++];return{done:v,value:y}}function m(){return this}function w(v){for(var y,P=this;P instanceof zu;){var ee=Fr(P);ee.__index__=0,ee.__values__=I,y?fe.__wrapped__=ee:y=ee;var fe=ee;P=P.__wrapped__}return fe.__wrapped__=v,y}function N(){var v=this.__wrapped__;if(v instanceof Yn){var y=v;return this.__actions__.length&&(y=new Yn(this)),y=y.reverse(),y.__actions__.push({func:W_,args:[N_],thisArg:I}),new ga(y,this.__chain__)}return this.thru(N_)}function H(){return f_(this.__wrapped__,this.__actions__)}var J=uf(function(v,y,P){Mr.call(v,P)?++v[P]:Yu(v,P,1)});function ge(v,y,P){var ee=Bi(v)?jm:o_;return P&&oo(v,y,P)&&(y=I),ee(v,si(y,3))}function Re(v,y){var P=Bi(v)?Ir:L0;return P(v,si(y,3))}var Ke=sd(D_),_t=sd(L1);function Yt(v,y){return Ws(ut(v,y),1)}function en(v,y){return Ws(ut(v,y),mt)}function Zt(v,y,P){return P=P===I?1:Qi(P),Ws(ut(v,y),P)}function Nn(v,y){var P=Bi(v)?La:ma;return P(v,si(y,3))}function Hn(v,y){var P=Bi(v)?cy:r_;return P(v,si(y,3))}var Gn=uf(function(v,y,P){Mr.call(v,P)?v[P].push(y):Yu(v,P,[y])});function fs(v,y,P,ee){v=Oa(v)?v:z_(v),P=P&&!ee?Qi(P):0;var fe=v.length;return P<0&&(P=Ei(fe+P,0)),V1(v)?P<=fe&&v.indexOf(y,P)>-1:!!fe&&Wu(v,y,P)>-1}var ct=di(function(v,y,P){var ee=-1,fe=typeof y=="function",xe=Oa(v)?gt(v.length):[];return ma(v,function(Ve){xe[++ee]=fe?Wl(y,Ve,P):tf(Ve,y,P)}),xe}),Qe=uf(function(v,y,P){Yu(v,P,y)});function ut(v,y){var P=Bi(v)?Lo:sh;return P(v,si(y,3))}function cn(v,y,P,ee){return v==null?[]:(Bi(y)||(y=y==null?[]:[y]),P=ee?I:P,Bi(P)||(P=P==null?[]:[P]),fg(v,y,P))}var Zn=uf(function(v,y,P){v[P?0:1].push(y)},function(){return[[],[]]});function ai(v,y,P){var ee=Bi(v)?qm:d1,fe=arguments.length<3;return ee(v,si(y,4),P,fe,ma)}function hi(v,y,P){var ee=Bi(v)?l1:d1,fe=arguments.length<3;return ee(v,si(y,4),P,fe,r_)}function yi(v,y){var P=Bi(v)?Ir:L0;return P(v,B1(si(y,3)))}function ra(v){var y=Bi(v)?ag:sf;return y(v)}function Nr(v,y,P){(P?oo(v,y,P):y===I)?y=1:y=Qi(y);var ee=Bi(v)?ds:d_;return ee(v,y)}function vh(v){var y=Bi(v)?bc:x0;return y(v)}function Ey(v){if(v==null)return 0;if(Oa(v))return V1(v)?$n(v):v.length;var y=Tr(v);return y==ni||y==Ct?v.size:Kr(v).length}function ED(v,y,P){var ee=Bi(v)?Km:h_;return P&&oo(v,y,P)&&(y=I),ee(v,si(y,3))}var LD=di(function(v,y){if(v==null)return[];var P=y.length;return P>1&&oo(v,y[0],y[1])?y=[]:P>2&&oo(y[0],y[1],y[2])&&(y=[y[0]]),fg(v,Ws(y,1),[])}),F1=p1||function(){return ha.Date.now()};function xD(v,y){if(typeof y!="function")throw new Vl(j);return v=Qi(v),function(){if(--v<1)return y.apply(this,arguments)}}function mE(v,y,P){return y=P?I:y,y=v&&y==null?v.length:y,nl(v,wt,I,I,I,I,y)}function _E(v,y){var P;if(typeof y!="function")throw new Vl(j);return v=Qi(v),function(){return--v>0&&(P=y.apply(this,arguments)),v<=1&&(y=I),P}}var Ly=di(function(v,y,P){var ee=He;if(P.length){var fe=Os(P,_u(Ly));ee|=xt}return nl(v,ee,y,P,fe)}),Is=di(function(v,y,P){var ee=He|st;if(P.length){var fe=Os(P,_u(Is));ee|=xt}return nl(y,ee,v,P,fe)});function vE(v,y,P){y=P?I:y;var ee=nl(v,Rt,I,I,I,I,I,y);return ee.placeholder=vE.placeholder,ee}function bE(v,y,P){y=P?I:y;var ee=nl(v,lt,I,I,I,I,I,y);return ee.placeholder=bE.placeholder,ee}function yu(v,y,P){var ee,fe,xe,Ve,Xe,rt,$t=0,jt=!1,on=!1,Fn=!0;if(typeof v!="function")throw new Vl(j);y=xc(y)||0,Xo(P)&&(jt=!!P.leading,on="maxWait"in P,xe=on?Ei(xc(P.maxWait)||0,y):xe,Fn="trailing"in P?!!P.trailing:Fn);function fi(al){var Hp=ee,ib=fe;return ee=fe=I,$t=al,Ve=v.apply(ib,Hp),Ve}function Ii(al){return $t=al,Xe=ud(Br,y),jt?fi(al):Ve}function Sr(al){var Hp=al-rt,ib=al-$t,kq=y-Hp;return on?an(kq,xe-ib):kq}function ki(al){var Hp=al-rt,ib=al-$t;return rt===I||Hp>=y||Hp<0||on&&ib>=xe}function Br(){var al=F1();if(ki(al))return Yr(al);Xe=ud(Br,Sr(al))}function Yr(al){return Xe=I,Fn&&ee?fi(al):(ee=fe=I,Ve)}function Cf(){Xe!==I&&od(Xe),$t=0,ee=rt=fe=Xe=I}function gd(){return Xe===I?Ve:Yr(F1())}function yf(){var al=F1(),Hp=ki(al);if(ee=arguments,fe=this,rt=al,Hp){if(Xe===I)return Ii(rt);if(on)return od(Xe),Xe=ud(Br,y),fi(rt)}return Xe===I&&(Xe=ud(Br,y)),Ve}return yf.cancel=Cf,yf.flush=gd,yf}var Cn=di(function(v,y){return Sp(v,1,y)}),DD=di(function(v,y,P){return Sp(v,xc(y)||0,P)});function Fo(v){return nl(v,sn)}function Ui(v,y){if(typeof v!="function"||y!=null&&typeof y!="function")throw new Vl(j);var P=function(){var ee=arguments,fe=y?y.apply(this,ee):ee[0],xe=P.cache;if(xe.has(fe))return xe.get(fe);var Ve=v.apply(this,ee);return P.cache=xe.set(fe,Ve)||xe,Ve};return P.cache=new(Ui.Cache||Do),P}Ui.Cache=Do;function B1(v){if(typeof v!="function")throw new Vl(j);return function(){var y=arguments;switch(y.length){case 0:return!v.call(this);case 1:return!v.call(this,y[0]);case 2:return!v.call(this,y[0],y[1]);case 3:return!v.call(this,y[0],y[1],y[2])}return!v.apply(this,y)}}function Zl(v){return _E(2,v)}var ID=fy(function(v,y){y=y.length==1&&Bi(y[0])?Lo(y[0],pl(si())):Lo(Ws(y,1),pl(si()));var P=y.length;return di(function(ee){for(var fe=-1,xe=an(ee.length,P);++fe<xe;)ee[fe]=y[fe].call(this,ee[fe]);return Wl(v,this,ee)})}),xy=di(function(v,y){var P=Os(y,_u(xy));return nl(v,xt,I,y,P)}),CE=di(function(v,y){var P=Os(y,_u(CE));return nl(v,zt,I,y,P)}),kD=Tn(function(v,y){return nl(v,dn,I,I,I,y)});function TD(v,y){if(typeof v!="function")throw new Vl(j);return y=y===I?y:Qi(y),di(v,y)}function G0(v,y){if(typeof v!="function")throw new Vl(j);return y=y==null?0:Ei(Qi(y),0),di(function(P){var ee=P[y],fe=wc(P,0,y);return ee&&Fu(fe,ee),Wl(v,this,fe)})}function ND(v,y,P){var ee=!0,fe=!0;if(typeof v!="function")throw new Vl(j);return Xo(P)&&(ee="leading"in P?!!P.leading:ee,fe="trailing"in P?!!P.trailing:fe),yu(v,y,{leading:ee,maxWait:y,trailing:fe})}function ol(v){return mE(v,1)}function Dy(v,y){return xy(Ia(y),v)}function Bp(){if(!arguments.length)return[];var v=arguments[0];return Bi(v)?v:[v]}function Fi(v){return Bs(v,_e)}function Gi(v,y){return y=typeof y=="function"?y:I,Bs(v,_e,y)}function Iy(v){return Bs(v,A|_e)}function AD(v,y){return y=typeof y=="function"?y:I,Bs(v,A|_e,y)}function OD(v,y){return y==null||wp(v,y,oa(y))}function dd(v,y){return v===y||v!==v&&y!==y}var RD=Cr(Kl),MD=Cr(function(v,y){return v>=y}),Wp=no(function(){return arguments}())?no:function(v){return zi(v)&&Mr.call(v,"callee")&&!vl.call(v,"callee")},Bi=gt.isArray,bf=Hm?pl(Hm):ug;function Oa(v){return v!=null&&yn(v.length)&&!fd(v)}function zs(v){return zi(v)&&Oa(v)}function ky(v){return v===!0||v===!1||zi(v)&&Io(v)==ze}var wu=yp||L,Zo=Um?pl(Um):nf;function hd(v){return zi(v)&&v.nodeType===1&&!Y0(v)}function PD(v){if(v==null)return!0;if(Oa(v)&&(Bi(v)||typeof v=="string"||typeof v.splice=="function"||wu(v)||H_(v)||Wp(v)))return!v.length;var y=Tr(v);if(y==ni||y==Ct)return!v.size;if(Na(v))return!Kr(v).length;for(var P in v)if(Mr.call(v,P))return!1;return!0}function FD(v,y){return rf(v,y)}function BD(v,y,P){P=typeof P=="function"?P:I;var ee=P?P(v,y):I;return ee===I?rf(v,y,I,P):!!ee}function Ty(v){if(!zi(v))return!1;var y=Io(v);return y==En||y==bn||typeof v.message=="string"&&typeof v.name=="string"&&!Y0(v)}function WD(v){return typeof v=="number"&&q(v)}function fd(v){if(!Xo(v))return!1;var y=Io(v);return y==nt||y==Mi||y==qe||y==ru}function Ra(v){return typeof v=="number"&&v==Qi(v)}function yn(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=Qt}function Xo(v){var y=typeof v;return v!=null&&(y=="object"||y=="function")}function zi(v){return v!=null&&typeof v=="object"}var W1=zm?pl(zm):Ln;function VD(v,y){return v===y||td(v,y,v_(y))}function ri(v,y,P){return P=typeof P=="function"?P:I,td(v,y,v_(y),P)}function HD(v){return yE(v)&&v!=+v}function Ny(v){if(P0(v))throw new vi(V);return zo(v)}function Vp(v){return v===null}function UD(v){return v==null}function yE(v){return typeof v=="number"||zi(v)&&Io(v)==bi}function Y0(v){if(!zi(v)||Io(v)!=Vn)return!1;var y=_l(v);if(y===null)return!0;var P=Mr.call(y,"constructor")&&y.constructor;return typeof P=="function"&&P instanceof P&&Zc.call(P)==ir}var Ay=Qf?pl(Qf):yo;function zD(v){return Ra(v)&&v>=-Qt&&v<=Qt}var wE=jh?pl(jh):Ls;function V1(v){return typeof v=="string"||!Bi(v)&&zi(v)&&Io(v)==as}function ec(v){return typeof v=="symbol"||zi(v)&&Io(v)==et}var H_=$m?pl($m):u_;function $D(v){return v===I}function jD(v){return zi(v)&&Tr(v)==it}function qD(v){return zi(v)&&Io(v)==ve}var KD=Cr($o),Z0=Cr(function(v,y){return v<=y});function SE(v){if(!v)return[];if(Oa(v))return V1(v)?xa(v):io(v);if(Hu&&v[Hu])return Kh(v[Hu]());var y=Tr(v),P=y==ni?w0:y==Ct?tg:z_;return P(v)}function tc(v){if(!v)return v===0?v:0;if(v=xc(v),v===mt||v===-mt){var y=v<0?-1:1;return y*fn}return v===v?v:0}function Qi(v){var y=tc(v),P=y%1;return y===y?P?y-P:y:0}function EE(v){return v?Fs(Qi(v),0,dt):0}function xc(v){if(typeof v=="number")return v;if(ec(v))return We;if(Xo(v)){var y=typeof v.valueOf=="function"?v.valueOf():v;v=Xo(y)?y+"":y}if(typeof v!="string")return v===0?v:+v;v=C0(v);var P=d0.test(v);return P||lp.test(v)?pp(v.slice(2),P?2:8):hc.test(v)?We:+v}function wr(v){return Gl(v,Dl(v))}function Bo(v){return v?Fs(Qi(v),-Qt,Qt):v===0?v:0}function so(v){return v==null?"":kr(v)}var GD=cf(function(v,y){if(Na(y)||Oa(y)){Gl(y,oa(y),v);return}for(var P in y)Mr.call(y,P)&&Yo(v,P,y[P])}),LE=cf(function(v,y){Gl(y,Dl(y),v)}),U_=cf(function(v,y,P,ee){Gl(y,Dl(y),v,ee)}),YD=cf(function(v,y,P,ee){Gl(y,oa(y),v,ee)}),ZD=Tn(i_);function XD(v,y){var P=ea(v);return y==null?P:yl(P,y)}var Oy=di(function(v,y){v=Xi(v);var P=-1,ee=y.length,fe=ee>2?y[2]:I;for(fe&&oo(y[0],y[1],fe)&&(ee=1);++P<ee;)for(var xe=y[P],Ve=Dl(xe),Xe=-1,rt=Ve.length;++Xe<rt;){var $t=Ve[Xe],jt=v[$t];(jt===I||dd(jt,Xa[$t])&&!Mr.call(v,$t))&&(v[$t]=xe[$t])}return v}),QD=di(function(v){return v.push(I,w1),Wl(xE,I,v)});function JD(v,y){return c1(v,si(y,3),el)}function eI(v,y){return c1(v,si(y,3),a_)}function Ry(v,y){return v==null?v:Jh(v,si(y,3),Dl)}function My(v,y){return v==null?v:ef(v,si(y,3),Dl)}function tI(v,y){return v&&el(v,si(y,3))}function nI(v,y){return v&&a_(v,si(y,3))}function iI(v){return v==null?[]:ql(v,oa(v))}function rI(v){return v==null?[]:ql(v,Dl(v))}function nc(v,y,P){var ee=v==null?I:Cc(v,y);return ee===I?P:ee}function oI(v,y){return v!=null&&Qu(v,y,Ep)}function Py(v,y){return v!=null&&Qu(v,y,ed)}var sI=ch(function(v,y,P){y!=null&&typeof y.toString!="function"&&(y=Xc.call(y)),v[y]=P},Hy(Su)),aI=ch(function(v,y,P){y!=null&&typeof y.toString!="function"&&(y=Xc.call(y)),Mr.call(v,y)?v[y].push(P):v[y]=[P]},si),lI=di(tf);function oa(v){return Oa(v)?eh(v):Kr(v)}function Dl(v){return Oa(v)?eh(v,!0):hy(v)}function uI(v,y){var P={};return y=si(y,3),el(v,function(ee,fe,xe){Yu(P,y(ee,fe,xe),ee)}),P}function cI(v,y){var P={};return y=si(y,3),el(v,function(ee,fe,xe){Yu(P,fe,y(ee,fe,xe))}),P}var dI=cf(function(v,y,P){cr(v,y,P)}),xE=cf(function(v,y,P,ee){cr(v,y,P,ee)}),hI=Tn(function(v,y){var P={};if(v==null)return P;var ee=!1;y=Lo(y,function(xe){return xe=ka(xe,v),ee||(ee=xe.length>1),xe}),Gl(v,Op(v),P),ee&&(P=Bs(P,A|te|_e,gy));for(var fe=y.length;fe--;)D0(P,y[fe]);return P});function fI(v,y){return DE(v,B1(si(y)))}var gI=Tn(function(v,y){return v==null?{}:nd(v,y)});function DE(v,y){if(v==null)return{};var P=Lo(Op(v),function(ee){return[ee]});return y=si(y),xp(v,P,function(ee,fe){return y(ee,fe[0])})}function pI(v,y,P){y=ka(y,v);var ee=-1,fe=y.length;for(fe||(fe=1,v=I);++ee<fe;){var xe=v==null?I:v[bu(y[ee])];xe===I&&(ee=fe,xe=P),v=fd(xe)?xe.call(v):xe}return v}function mI(v,y,P){return v==null?v:fu(v,y,P)}function _I(v,y,P,ee){return ee=typeof ee=="function"?ee:I,v==null?v:fu(v,y,P,ee)}var IE=O0(oa),kE=O0(Dl);function vI(v,y,P){var ee=Bi(v),fe=ee||wu(v)||H_(v);if(y=si(y,4),P==null){var xe=v&&v.constructor;fe?P=ee?new xe:[]:Xo(v)?P=fd(xe)?ea(_l(v)):{}:P={}}return(fe?La:el)(v,function(Ve,Xe,rt){return y(P,Ve,Xe,rt)}),P}function bI(v,y){return v==null?!0:D0(v,y)}function CI(v,y,P){return v==null?v:rd(v,y,Ia(P))}function yI(v,y,P,ee){return ee=typeof ee=="function"?ee:I,v==null?v:rd(v,y,Ia(P),ee)}function z_(v){return v==null?[]:y0(v,oa(v))}function wI(v){return v==null?[]:y0(v,Dl(v))}function SI(v,y,P){return P===I&&(P=y,y=I),P!==I&&(P=xc(P),P=P===P?P:0),y!==I&&(y=xc(y),y=y===y?y:0),Fs(xc(v),y,P)}function EI(v,y,P){return y=tc(y),P===I?(P=y,y=0):P=tc(P),v=xc(v),Lp(v,y,P)}function LI(v,y,P){if(P&&typeof P!="boolean"&&oo(v,y,P)&&(y=P=I),P===I&&(typeof y=="boolean"?(P=y,y=I):typeof v=="boolean"&&(P=v,v=I)),v===I&&y===I?(v=0,y=1):(v=tc(v),y===I?(y=v,v=0):y=tc(y)),v>y){var ee=v;v=y,y=ee}if(P||v%1||y%1){var fe=Zh();return an(v+fe*(y-v+Ka("1e-"+((fe+"").length-1))),y)}return ah(v,y)}var xI=Zu(function(v,y,P){return y=y.toLowerCase(),v+(P?TE(y):y)});function TE(v){return Vy(so(v).toLowerCase())}function NE(v){return v=so(v),v&&v.replace(Bh,ke).replace($d,"")}function X0(v,y,P){v=so(v),y=kr(y);var ee=v.length;P=P===I?ee:Fs(Qi(P),0,ee);var fe=P;return P-=y.length,P>=0&&v.slice(P,fe)==y}function Fy(v){return v=so(v),v&&Vt.test(v)?v.replace(ht,Et):v}function By(v){return v=so(v),v&&Er.test(v)?v.replace(Rr,"\\$&"):v}var DI=Zu(function(v,y,P){return v+(P?"-":"")+y.toLowerCase()}),II=Zu(function(v,y,P){return v+(P?" ":"")+y.toLowerCase()}),kI=Hs("toLowerCase");function Q0(v,y,P){v=so(v),y=Qi(y);var ee=y?$n(v):0;if(!y||ee>=y)return v;var fe=(y-ee)/2;return Tp(bl(fe),P)+v+Tp(Ul(fe),P)}function TI(v,y,P){v=so(v),y=Qi(y);var ee=y?$n(v):0;return y&&ee<y?v+Tp(y-ee,P):v}function NI(v,y,P){v=so(v),y=Qi(y);var ee=y?$n(v):0;return y&&ee<y?Tp(y-ee,P)+v:v}function AI(v,y,P){return P||y==null?y=0:y&&(y=+y),E0(so(v).replace(da,""),y||0)}function Wo(v,y,P){return(P?oo(v,y,P):y===I)?y=1:y=Qi(y),c_(so(v),y)}function J0(){var v=arguments,y=so(v[0]);return v.length<3?y:y.replace(v[1],v[2])}var OI=Zu(function(v,y,P){return v+(P?"_":"")+y.toLowerCase()});function RI(v,y,P){return P&&typeof P!="number"&&oo(v,y,P)&&(y=P=I),P=P===I?dt:P>>>0,P?(v=so(v),v&&(typeof y=="string"||y!=null&&!Ay(y))&&(y=kr(y),!y&&Pi(v))?wc(xa(v),0,P):v.split(y,P)):[]}var MI=Zu(function(v,y,P){return v+(P?" ":"")+Vy(y)});function PI(v,y,P){return v=so(v),P=P==null?0:Fs(Qi(P),0,v.length),y=kr(y),v.slice(P,P+y.length)==y}function eb(v,y,P){var ee=Ee.templateSettings;P&&oo(v,y,P)&&(y=I),v=so(v),y=U_({},y,ee,va);var fe=U_({},y.imports,ee.imports,va),xe=oa(fe),Ve=y0(fe,xe),Xe,rt,$t=0,jt=y.interpolate||Wd,on="__p += '",Fn=Za((y.escape||Wd).source+"|"+jt.source+"|"+(jt===mn?Am:Wd).source+"|"+(y.evaluate||Wd).source+"|$","g"),fi="//# sourceURL="+(Mr.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vo+"]")+`
`;v.replace(Fn,function(ki,Br,Yr,Cf,gd,yf){return Yr||(Yr=Cf),on+=v.slice($t,yf).replace(h0,hn),Br&&(Xe=!0,on+=`' +
__e(`+Br+`) +
'`),gd&&(rt=!0,on+=`';
`+gd+`;
__p += '`),Yr&&(on+=`' +
((__t = (`+Yr+`)) == null ? '' : __t) +
'`),$t=yf+ki.length,ki}),on+=`';
`;var Ii=Mr.call(y,"variable")&&y.variable;if(!Ii)on=`with (obj) {
`+on+`
}
`;else if(c0.test(Ii))throw new vi(ne);on=(rt?on.replace(pe,""):on).replace(Ne,"$1").replace(Se,"$1;"),on="function("+(Ii||"obj")+`) {
`+(Ii?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Xe?", __e = _.escape":"")+(rt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+on+`return __p
}`;var Sr=$_(function(){return ur(xe,fi+"return "+on).apply(I,Ve)});if(Sr.source=on,Ty(Sr))throw Sr;return Sr}function FI(v){return so(v).toLowerCase()}function tb(v){return so(v).toUpperCase()}function BI(v,y,P){if(v=so(v),v&&(P||y===I))return C0(v);if(!v||!(y=kr(y)))return v;var ee=xa(v),fe=xa(y),xe=lu(ee,fe),Ve=be(ee,fe)+1;return wc(ee,xe,Ve).join("")}function WI(v,y,P){if(v=so(v),v&&(P||y===I))return v.slice(0,ng(v)+1);if(!v||!(y=kr(y)))return v;var ee=xa(v),fe=be(ee,xa(y))+1;return wc(ee,0,fe).join("")}function VI(v,y,P){if(v=so(v),v&&(P||y===I))return v.replace(da,"");if(!v||!(y=kr(y)))return v;var ee=xa(v),fe=lu(ee,xa(y));return wc(ee,fe).join("")}function HI(v,y){var P=Pt,ee=ei;if(Xo(y)){var fe="separator"in y?y.separator:fe;P="length"in y?Qi(y.length):P,ee="omission"in y?kr(y.omission):ee}v=so(v);var xe=v.length;if(Pi(v)){var Ve=xa(v);xe=Ve.length}if(P>=xe)return v;var Xe=P-$n(ee);if(Xe<1)return ee;var rt=Ve?wc(Ve,0,Xe).join(""):v.slice(0,Xe);if(fe===I)return rt+ee;if(Ve&&(Xe+=rt.length-Xe),Ay(fe)){if(v.slice(Xe).search(fe)){var $t,jt=rt;for(fe.global||(fe=Za(fe.source,so(Bd.exec(fe))+"g")),fe.lastIndex=0;$t=fe.exec(jt);)var on=$t.index;rt=rt.slice(0,on===I?Xe:on)}}else if(v.indexOf(kr(fe),Xe)!=Xe){var Fn=rt.lastIndexOf(fe);Fn>-1&&(rt=rt.slice(0,Fn))}return rt+ee}function Wy(v){return v=so(v),v&&It.test(v)?v.replace(Je,qd):v}var UI=Zu(function(v,y,P){return v+(P?" ":"")+y.toUpperCase()}),Vy=Hs("toUpperCase");function AE(v,y,P){return v=so(v),y=P?I:y,y===I?ci(v)?g1(v):Bu(v):v.match(y)||[]}var $_=di(function(v,y){try{return Wl(v,I,y)}catch(P){return Ty(P)?P:new vi(P)}}),nb=Tn(function(v,y){return La(y,function(P){P=bu(P),Yu(v,P,Ly(v[P],v))}),v});function zI(v){var y=v==null?0:v.length,P=si();return v=y?Lo(v,function(ee){if(typeof ee[1]!="function")throw new Vl(j);return[P(ee[0]),ee[1]]}):[],di(function(ee){for(var fe=-1;++fe<y;){var xe=v[fe];if(Wl(xe[0],this,ee))return Wl(xe[1],this,ee)}})}function $I(v){return hu(Bs(v,A))}function Hy(v){return function(){return v}}function jI(v,y){return v==null||v!==v?y:v}var qI=Sl(),KI=Sl(!0);function Su(v){return v}function Uy(v){return cg(typeof v=="function"?v:Bs(v,A))}function GI(v){return dg(Bs(v,A))}function YI(v,y){return hg(v,Bs(y,A))}var ZI=di(function(v,y){return function(P){return tf(P,v,y)}}),XI=di(function(v,y){return function(P){return tf(v,P,y)}});function zy(v,y,P){var ee=oa(y),fe=ql(y,ee);P==null&&!(Xo(y)&&(fe.length||!ee.length))&&(P=y,y=v,v=this,fe=ql(y,oa(y)));var xe=!(Xo(P)&&"chain"in P)||!!P.chain,Ve=fd(v);return La(fe,function(Xe){var rt=y[Xe];v[Xe]=rt,Ve&&(v.prototype[Xe]=function(){var $t=this.__chain__;if(xe||$t){var jt=v(this.__wrapped__),on=jt.__actions__=io(this.__actions__);return on.push({func:rt,args:arguments,thisArg:v}),jt.__chain__=$t,jt}return rt.apply(v,Fu([this.value()],arguments))})}),v}function QI(){return ha._===this&&(ha._=Pr),this}function $y(){}function JI(v){return v=Qi(v),di(function(y){return yc(y,v)})}var ek=_a(Lo),tk=_a(jm),nk=_a(Km);function OE(v){return C_(v)?b0(bu(v)):gg(v)}function ik(v){return function(y){return v==null?I:Cc(v,y)}}var c=gu(),f=gu(!0);function b(){return[]}function L(){return!1}function B(){return{}}function Z(){return""}function ae(){return!0}function he(v,y){if(v=Qi(v),v<1||v>Qt)return[];var P=dt,ee=an(v,dt);y=si(y),v-=dt;for(var fe=qh(ee,y);++P<v;)y(P);return fe}function ye(v){return Bi(v)?Lo(v,bu):ec(v)?[v]:io(Rp(so(v)))}function Ue(v){var y=++Gh;return so(v)+y}var $e=ad(function(v,y){return v+y},0),Ze=Np("ceil"),vt=ad(function(v,y){return v/y},1),Ht=Np("floor");function nn(v){return v&&v.length?Jc(v,Su,Kl):I}function Dn(v,y){return v&&v.length?Jc(v,si(y,2),Kl):I}function rn(v){return su(v,Su)}function Mn(v,y){return su(v,si(y,2))}function Un(v){return v&&v.length?Jc(v,Su,$o):I}function Qo(v,y){return v&&v.length?Jc(v,si(y,2),$o):I}var wo=ad(function(v,y){return v*y},1),Jo=Np("round"),Ji=ad(function(v,y){return v-y},0);function $s(v){return v&&v.length?Mo(v,Su):0}function sl(v,y){return v&&v.length?Mo(v,si(y,2)):0}return Ee.after=xD,Ee.ary=mE,Ee.assign=GD,Ee.assignIn=LE,Ee.assignInWith=U_,Ee.assignWith=YD,Ee.at=ZD,Ee.before=_E,Ee.bind=Ly,Ee.bindAll=nb,Ee.bindKey=Is,Ee.castArray=Bp,Ee.chain=_h,Ee.chunk=L_,Ee.compact=Mp,Ee.concat=F0,Ee.cond=zI,Ee.conforms=$I,Ee.constant=Hy,Ee.countBy=J,Ee.create=XD,Ee.curry=vE,Ee.curryRight=bE,Ee.debounce=yu,Ee.defaults=Oy,Ee.defaultsDeep=QD,Ee.defer=Cn,Ee.delay=DD,Ee.difference=Dg,Ee.differenceBy=x_,Ee.differenceWith=rl,Ee.drop=ph,Ee.dropRight=Ju,Ee.dropRightWhile=ia,Ee.dropWhile=E1,Ee.fill=B0,Ee.filter=Re,Ee.flatMap=Yt,Ee.flatMapDeep=en,Ee.flatMapDepth=Zt,Ee.flatten=cd,Ee.flattenDeep=x1,Ee.flattenDepth=W0,Ee.flip=Fo,Ee.flow=qI,Ee.flowRight=KI,Ee.fromPairs=gf,Ee.functions=iI,Ee.functionsIn=rI,Ee.groupBy=Gn,Ee.initial=D1,Ee.intersection=I1,Ee.intersectionBy=V0,Ee.intersectionWith=k_,Ee.invert=sI,Ee.invertBy=aI,Ee.invokeMap=ct,Ee.iteratee=Uy,Ee.keyBy=Qe,Ee.keys=oa,Ee.keysIn=Dl,Ee.map=ut,Ee.mapKeys=uI,Ee.mapValues=cI,Ee.matches=GI,Ee.matchesProperty=YI,Ee.memoize=Ui,Ee.merge=dI,Ee.mergeWith=xE,Ee.method=ZI,Ee.methodOf=XI,Ee.mixin=zy,Ee.negate=B1,Ee.nthArg=JI,Ee.omit=hI,Ee.omitBy=fI,Ee.once=Zl,Ee.orderBy=cn,Ee.over=ek,Ee.overArgs=ID,Ee.overEvery=tk,Ee.overSome=nk,Ee.partial=xy,Ee.partialRight=CE,Ee.partition=Zn,Ee.pick=gI,Ee.pickBy=DE,Ee.property=OE,Ee.propertyOf=ik,Ee.pull=mf,Ee.pullAll=N1,Ee.pullAllBy=Lc,Ee.pullAllWith=T_,Ee.pullAt=ns,Ee.range=c,Ee.rangeRight=f,Ee.rearg=kD,Ee.reject=yi,Ee.remove=my,Ee.rest=TD,Ee.reverse=N_,Ee.sampleSize=Nr,Ee.set=mI,Ee.setWith=_I,Ee.shuffle=vh,Ee.slice=_y,Ee.sortBy=LD,Ee.sortedUniq=_f,Ee.sortedUniqBy=mh,Ee.split=RI,Ee.spread=G0,Ee.tail=A_,Ee.take=vf,Ee.takeRight=O_,Ee.takeRightWhile=U0,Ee.takeWhile=z0,Ee.tap=B_,Ee.throttle=ND,Ee.thru=W_,Ee.toArray=SE,Ee.toPairs=IE,Ee.toPairsIn=kE,Ee.toPath=ye,Ee.toPlainObject=wr,Ee.transform=vI,Ee.unary=ol,Ee.union=Cy,Ee.unionBy=$0,Ee.unionWith=yy,Ee.uniq=R1,Ee.uniqBy=M1,Ee.uniqWith=R_,Ee.unset=bI,Ee.unzip=Ig,Ee.unzipWith=j0,Ee.update=CI,Ee.updateWith=yI,Ee.values=z_,Ee.valuesIn=wI,Ee.without=q0,Ee.words=AE,Ee.wrap=Dy,Ee.xor=wy,Ee.xorBy=M_,Ee.xorWith=Pp,Ee.zip=P_,Ee.zipObject=K0,Ee.zipObjectDeep=F_,Ee.zipWith=P1,Ee.entries=IE,Ee.entriesIn=kE,Ee.extend=LE,Ee.extendWith=U_,zy(Ee,Ee),Ee.add=$e,Ee.attempt=$_,Ee.camelCase=xI,Ee.capitalize=TE,Ee.ceil=Ze,Ee.clamp=SI,Ee.clone=Fi,Ee.cloneDeep=Iy,Ee.cloneDeepWith=AD,Ee.cloneWith=Gi,Ee.conformsTo=OD,Ee.deburr=NE,Ee.defaultTo=jI,Ee.divide=vt,Ee.endsWith=X0,Ee.eq=dd,Ee.escape=Fy,Ee.escapeRegExp=By,Ee.every=ge,Ee.find=Ke,Ee.findIndex=D_,Ee.findKey=JD,Ee.findLast=_t,Ee.findLastIndex=L1,Ee.findLastKey=eI,Ee.floor=Ht,Ee.forEach=Nn,Ee.forEachRight=Hn,Ee.forIn=Ry,Ee.forInRight=My,Ee.forOwn=tI,Ee.forOwnRight=nI,Ee.get=nc,Ee.gt=RD,Ee.gte=MD,Ee.has=oI,Ee.hasIn=Py,Ee.head=I_,Ee.identity=Su,Ee.includes=fs,Ee.indexOf=pf,Ee.inRange=EI,Ee.invoke=lI,Ee.isArguments=Wp,Ee.isArray=Bi,Ee.isArrayBuffer=bf,Ee.isArrayLike=Oa,Ee.isArrayLikeObject=zs,Ee.isBoolean=ky,Ee.isBuffer=wu,Ee.isDate=Zo,Ee.isElement=hd,Ee.isEmpty=PD,Ee.isEqual=FD,Ee.isEqualWith=BD,Ee.isError=Ty,Ee.isFinite=WD,Ee.isFunction=fd,Ee.isInteger=Ra,Ee.isLength=yn,Ee.isMap=W1,Ee.isMatch=VD,Ee.isMatchWith=ri,Ee.isNaN=HD,Ee.isNative=Ny,Ee.isNil=UD,Ee.isNull=Vp,Ee.isNumber=yE,Ee.isObject=Xo,Ee.isObjectLike=zi,Ee.isPlainObject=Y0,Ee.isRegExp=Ay,Ee.isSafeInteger=zD,Ee.isSet=wE,Ee.isString=V1,Ee.isSymbol=ec,Ee.isTypedArray=H_,Ee.isUndefined=$D,Ee.isWeakMap=jD,Ee.isWeakSet=qD,Ee.join=py,Ee.kebabCase=DI,Ee.last=Cu,Ee.lastIndexOf=k1,Ee.lowerCase=II,Ee.lowerFirst=kI,Ee.lt=KD,Ee.lte=Z0,Ee.max=nn,Ee.maxBy=Dn,Ee.mean=rn,Ee.meanBy=Mn,Ee.min=Un,Ee.minBy=Qo,Ee.stubArray=b,Ee.stubFalse=L,Ee.stubObject=B,Ee.stubString=Z,Ee.stubTrue=ae,Ee.multiply=wo,Ee.nth=T1,Ee.noConflict=QI,Ee.noop=$y,Ee.now=F1,Ee.pad=Q0,Ee.padEnd=TI,Ee.padStart=NI,Ee.parseInt=AI,Ee.random=LI,Ee.reduce=ai,Ee.reduceRight=hi,Ee.repeat=Wo,Ee.replace=J0,Ee.result=pI,Ee.round=Jo,Ee.runInContext=tt,Ee.sample=ra,Ee.size=Ey,Ee.snakeCase=OI,Ee.some=ED,Ee.sortedIndex=vy,Ee.sortedIndexBy=A1,Ee.sortedIndexOf=O1,Ee.sortedLastIndex=by,Ee.sortedLastIndexBy=xl,Ee.sortedLastIndexOf=H0,Ee.startCase=MI,Ee.startsWith=PI,Ee.subtract=Ji,Ee.sum=$s,Ee.sumBy=sl,Ee.template=eb,Ee.times=he,Ee.toFinite=tc,Ee.toInteger=Qi,Ee.toLength=EE,Ee.toLower=FI,Ee.toNumber=xc,Ee.toSafeInteger=Bo,Ee.toString=so,Ee.toUpper=tb,Ee.trim=BI,Ee.trimEnd=WI,Ee.trimStart=VI,Ee.truncate=HI,Ee.unescape=Wy,Ee.uniqueId=Ue,Ee.upperCase=UI,Ee.upperFirst=Vy,Ee.each=Nn,Ee.eachRight=Hn,Ee.first=I_,zy(Ee,function(){var v={};return el(Ee,function(y,P){Mr.call(Ee.prototype,P)||(v[P]=y)}),v}(),{chain:!1}),Ee.VERSION=D,La(["bind","bindKey","curry","curryRight","partial","partialRight"],function(v){Ee[v].placeholder=Ee}),La(["drop","take"],function(v,y){Yn.prototype[v]=function(P){P=P===I?1:Ei(Qi(P),0);var ee=this.__filtered__&&!y?new Yn(this):this.clone();return ee.__filtered__?ee.__takeCount__=an(P,ee.__takeCount__):ee.__views__.push({size:an(P,dt),type:v+(ee.__dir__<0?"Right":"")}),ee},Yn.prototype[v+"Right"]=function(P){return this.reverse()[v](P).reverse()}}),La(["filter","map","takeWhile"],function(v,y){var P=y+1,ee=P==Ft||P==Tt;Yn.prototype[v]=function(fe){var xe=this.clone();return xe.__iteratees__.push({iteratee:si(fe,3),type:P}),xe.__filtered__=xe.__filtered__||ee,xe}}),La(["head","last"],function(v,y){var P="take"+(y?"Right":"");Yn.prototype[v]=function(){return this[P](1).value()[0]}}),La(["initial","tail"],function(v,y){var P="drop"+(y?"":"Right");Yn.prototype[v]=function(){return this.__filtered__?new Yn(this):this[P](1)}}),Yn.prototype.compact=function(){return this.filter(Su)},Yn.prototype.find=function(v){return this.filter(v).head()},Yn.prototype.findLast=function(v){return this.reverse().find(v)},Yn.prototype.invokeMap=di(function(v,y){return typeof v=="function"?new Yn(this):this.map(function(P){return tf(P,v,y)})}),Yn.prototype.reject=function(v){return this.filter(B1(si(v)))},Yn.prototype.slice=function(v,y){v=Qi(v);var P=this;return P.__filtered__&&(v>0||y<0)?new Yn(P):(v<0?P=P.takeRight(-v):v&&(P=P.drop(v)),y!==I&&(y=Qi(y),P=y<0?P.dropRight(-y):P.take(y-v)),P)},Yn.prototype.takeRightWhile=function(v){return this.reverse().takeWhile(v).reverse()},Yn.prototype.toArray=function(){return this.take(dt)},el(Yn.prototype,function(v,y){var P=/^(?:filter|find|map|reject)|While$/.test(y),ee=/^(?:head|last)$/.test(y),fe=Ee[ee?"take"+(y=="last"?"Right":""):y],xe=ee||/^find/.test(y);fe&&(Ee.prototype[y]=function(){var Ve=this.__wrapped__,Xe=ee?[1]:arguments,rt=Ve instanceof Yn,$t=Xe[0],jt=rt||Bi(Ve),on=function(Br){var Yr=fe.apply(Ee,Fu([Br],Xe));return ee&&Fn?Yr[0]:Yr};jt&&P&&typeof $t=="function"&&$t.length!=1&&(rt=jt=!1);var Fn=this.__chain__,fi=!!this.__actions__.length,Ii=xe&&!Fn,Sr=rt&&!fi;if(!xe&&jt){Ve=Sr?Ve:new Yn(this);var ki=v.apply(Ve,Xe);return ki.__actions__.push({func:W_,args:[on],thisArg:I}),new ga(ki,Fn)}return Ii&&Sr?v.apply(this,Xe):(ki=this.thru(on),Ii?ee?ki.value()[0]:ki.value():ki)})}),La(["pop","push","shift","sort","splice","unshift"],function(v){var y=to[v],P=/^(?:push|sort|unshift)$/.test(v)?"tap":"thru",ee=/^(?:pop|shift)$/.test(v);Ee.prototype[v]=function(){var fe=arguments;if(ee&&!this.__chain__){var xe=this.value();return y.apply(Bi(xe)?xe:[],fe)}return this[P](function(Ve){return y.apply(Bi(Ve)?Ve:[],fe)})}}),el(Yn.prototype,function(v,y){var P=Ee[y];if(P){var ee=P.name+"";Mr.call(Ms,ee)||(Ms[ee]=[]),Ms[ee].push({name:y,func:P})}}),Ms[qt(I,st).name]=[{name:"wrapper",func:I}],Yn.prototype.clone=e_,Yn.prototype.reverse=t_,Yn.prototype.value=du,Ee.prototype.at=Fp,Ee.prototype.chain=Sy,Ee.prototype.commit=V_,Ee.prototype.next=g,Ee.prototype.plant=w,Ee.prototype.reverse=N,Ee.prototype.toJSON=Ee.prototype.valueOf=Ee.prototype.value=H,Ee.prototype.first=Ee.prototype.head,Hu&&(Ee.prototype[Hu]=m),Ee},ls=Kd();$h?(($h.exports=ls)._=ls,Wm._=ls):ha._=ls}).call(C)}),T={browserCheck:function(){var Y={};if(T.isMobileDevice())return!0;var I=navigator.userAgent.toLowerCase(),D;return(D=I.match(/rv:([\d.]+)\) like gecko/))||(D=I.match(/msie ([\d\.]+)/))?Y.ie=D[1]:(D=I.match(/edge\/([\d\.]+)/))?Y.edge=D[1]:(D=I.match(/firefox\/([\d\.]+)/))?Y.firefox=D[1]:(D=I.match(/(?:opera|opr).([\d\.]+)/))?Y.opera=D[1]:(D=I.match(/chrome\/([\d\.]+)/))?Y.chrome=D[1]:(D=I.match(/version\/([\d\.]+).*safari/))&&(Y.safari=D[1]),!!(Y.chrome&&parseInt(Y.chrome.split(".")[0],10)>=66||Y.firefox)},checkExist:function(Y){return Y!=null&&Y!==""},convertBytes:function(Y){for(var I=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],D=0;Y>=1024;)Y=Number((Y/1024).toFixed(2)),D++;return"".concat(Y," ").concat(I[D])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(Y,I){I||(I=window.location.href),Y=Y.replace(/[\[\]]/g,"\\$&");var D=new RegExp("[?&]"+Y+"(=([^&#]*)|&|#|$)"),O=D.exec(I);return O?O[2]?decodeURIComponent(O[2].replace(/\+/g," ")):"":null},getBase64:function(Y,I){var D=new FileReader;D.addEventListener("load",function(){return I(D.result)}),D.readAsDataURL(Y)},percent:function(Y,I){return!Y||Y===1/0?"0%":(Y>1&&(Y=1),I=I||2,I=Math.pow(10,I),Math.round(Y*I*100)/I+"%")},getCssText:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I="";for(var D in Y)Y.hasOwnProperty(D)&&(I+=D+":"+Y[D]+";");return I},trim:function(Y){return typeof Y!="string"?Y:Y.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(Y){return typeof Y!="string"?Y:Y.replace(/\s/g,"")},getThousandth:function(Y){if(Y==null||Y==="")return"0";Y="".concat(Y);var I=Y.split("."),D=a(I,2),O=D[0],V=D[1];return"".concat(O.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(V?".".concat(V):"")},textOverflowExchange:function(Y,I){return Y&&Y.length>I?Y.substring(0,I)+"...":Y},jsonFormat:function(Y,I){if(!Y)return Y;try{var D=JSON.parse(Y),O=JSON.stringify(D,null,I||2);return O}catch{return null}},sortByCompareFunctions:function(Y){for(var I=arguments.length,D=new Array(I>1?I-1:0),O=1;O<I;O++)D[O-1]=arguments[O];Y.sort(function(V,j){var ne=0,re=_(D),se;try{for(re.s();!(se=re.n()).done;){var ie=se.value;if(ne=ie(V,j),ne!==0)return ne}}catch(A){re.e(A)}finally{re.f()}return ne})},exchangeOrder:function(Y){switch(Y){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(Y){return Y=T.trim(Y),Y.charAt(0)==="{"&&Y.charAt(Y.length-1)==="}"||Y.charAt(0)==="["&&Y.charAt(Y.length-1)==="]"},isPhoneNumber:function(Y){var I=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return I.test(Y)},isFunction:function(Y){return Y?typeof/./!="function"?typeof Y=="function":Object.prototype.toString.call(Y)==="[object Function]":!1},getRandomStr:function(Y){var I="0123456789",D="abcdefghijklmnopqrstuvwxyz",O="ABCDEFGHIJKLMNOPQRSTUVXYZ";function V(se){var ie=Math.random()*(se.length-1);return se.charAt(ie)}for(var j="num",ne="",re=0;re<Y;re++)j==="num"?(ne+=V(I),j="lower"):j==="lower"?(ne+=V(D),j="upper"):j==="upper"&&(ne+=V(O),j="num");return ne},isEqualArr:function(Y,I){var D=JSON.stringify;return D(Y.sort())===D(I.sort())},isEqual:function(Y,I){for(var D in Y)if({}.hasOwnProperty.call(Y,D)&&(!{}.hasOwnProperty.call(I,D)||Y[D]!==I[D]))return!1;for(var O in I)if({}.hasOwnProperty.call(I,O)&&!{}.hasOwnProperty.call(Y,O))return!1;return!0},shouldRender:function(Y){Y.prototype.shouldComponentUpdate=function(I,D){return!T.isEqual(this.state,D)||!T.isEqual(this.props,I)}},getStrlen:function(Y){for(var I=0,D=0;D<Y.length;D++){var O=Y.charCodeAt(D);O>=1&&O<=126||65376<=O&&O<=65439?I++:I+=2}return I},transformArray:function(Y,I){for(var D=Y.length,O=[],V=0;V*I<D;)O.push(Y.slice(V*I,(V+1)*I)),V++;return O},isEmpty:function(Y){return!!(Y===""||Y===null||Y===void 0||Array.prototype.isPrototypeOf(Y)&&Y.length===0||Object.prototype.isPrototypeOf(Y)&&Object.keys(Y).length===0)},isObj:function(Y){return Object.prototype.toString.call(Y)==="[object Object]"},removeEmpty:function(Y){if(!(!Y||!T.isObj(Y)))return Object.entries(Y).forEach(function(I){var D=a(I,2),O=D[0],V=D[1];V&&T.isObj(V)?T.removeEmpty(V):T.isEmpty(V)&&delete Y[O]}),Y},mergeDeep:function(Y,I){if(Y==null||I==null)return Y||I;if(!x.isPlainObject(Y)||!x.isPlainObject(I))return I;if(Y===I)return I;if("_isMergeAtom"in I){var D=I._isMergeAtom;if(delete I._isMergeAtom,D)return I}var O=e({},Y);return x.forEach(I,function(V,j){j in Y?O[j]=T.mergeDeep(Y[j],V):O[j]=V}),O},downLoadData:function(Y){var I=Y.url,D=Y.payload,O=Y.finallyCallback,V=Y.successCallback,j=Y.errorCallback;fetch(I,{method:"POST",body:JSON.stringify(D)}).then(function(ne){if(ne.status!==200)return j(ne);var re=ne.headers.get("Content-type")||"";if(re.includes("application/json"))return j(ne);var se=Y.fileName;if(!se){var ie=ne.headers.get("Content-disposition")||"";se=ie.split("filename=")[1]}ne.blob().then(function(A){var te=URL.createObjectURL(A),_e=document.createElement("a");_e.setAttribute("href",te),_e.setAttribute("download",decodeURIComponent(se||"")),_e.click(),URL.revokeObjectURL(te),V&&V(ne)})}).finally(function(){O&&O()})},isUtf8:function(Y){var I=["","","","","",""];return I.forEach(function(D){if(Y&&Y.indexOf(D)>-1)return!1}),!0},utf16to8:function(Y){if(typeof Y!="string"||!this.isUtf8(Y))return Y;var I,D,O;I="";var V=Y.length||0;for(D=0;D<V;D++)O=Y.charCodeAt(D),O>=1&&O<=127?I+=Y.charAt(D):O>2047?(I+=String.fromCharCode(224|O>>12&15),I+=String.fromCharCode(128|O>>6&63),I+=String.fromCharCode(128|O>>0&63)):(I+=String.fromCharCode(192|O>>6&31),I+=String.fromCharCode(128|O>>0&63));return I},base64Encode:function(Y){var I=Y;if(!I)return I;try{I=btoa(this.utf16to8(Y))}catch(D){console.log(D)}return I}},k={getCookie:function(Y){var I=document.cookie.match(new RegExp("(^| )"+Y+"=([^;]*)(;|$)"));if(I!=null)try{return unescape(decodeURI(I[2]))}catch{return I[2]}return null},getAllCookies:function(){var Y={};try{document.cookie.split("; ").forEach(function(I){var D=I.split("=");Y[D[0]]=D[1]})}catch{throw new Error("CookieCookie")}return Y},deleteCookie:function(Y,I,D){var O=new Date(0);I=I?"; domain=".concat(I):"",D=D||"/",document.cookie=Y+"=; expires="+O.toUTCString()+I+"; path="+D},deleteAllCookies:function(Y,I){for(var D=document.cookie.split(";"),O=0;O<D.length;O++)D[O]&&this.deleteCookie(D[O].split("=")[0],Y,I)},setCookie:function(Y,I,D,O){var V="";if(D){var j=new Date;j.setTime(j.getTime()+D*24*60*60*1e3),V="; expires="+j.toUTCString()}var ne="";O&&(ne="; domain="+O),document.cookie=Y+"="+I+V+ne+"; path=/"}},M=S(function(G,Y){(function(I,D){G.exports=D()})(C,function(){var I=1e3,D=6e4,O=36e5,V="millisecond",j="second",ne="minute",re="hour",se="day",ie="week",A="month",te="quarter",_e="year",de="date",Me="Invalid Date",He=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,st=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Dt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Rt=function(un,Ft,Bt){var Tt=String(un);return!Tt||Tt.length>=Ft?un:""+Array(Ft+1-Tt.length).join(Bt)+un},lt={s:Rt,z:function(un){var Ft=-un.utcOffset(),Bt=Math.abs(Ft),Tt=Math.floor(Bt/60),mt=Bt%60;return(Ft<=0?"+":"-")+Rt(Tt,2,"0")+":"+Rt(mt,2,"0")},m:function un(Ft,Bt){if(Ft.date()<Bt.date())return-un(Bt,Ft);var Tt=12*(Bt.year()-Ft.year())+(Bt.month()-Ft.month()),mt=Ft.clone().add(Tt,A),Qt=Bt-mt<0,fn=Ft.clone().add(Tt+(Qt?-1:1),A);return+(-(Tt+(Bt-mt)/(Qt?mt-fn:fn-mt))||0)},a:function(un){return un<0?Math.ceil(un)||0:Math.floor(un)},p:function(un){return{M:A,y:_e,w:ie,d:se,D:de,h:re,m:ne,s:j,ms:V,Q:te}[un]||String(un||"").toLowerCase().replace(/s$/,"")},u:function(un){return un===void 0}},xt="en",zt={};zt[xt]=Dt;var wt=function(un){return un instanceof ei},dn=function un(Ft,Bt,Tt){var mt;if(!Ft)return xt;if(typeof Ft=="string"){var Qt=Ft.toLowerCase();zt[Qt]&&(mt=Qt),Bt&&(zt[Qt]=Bt,mt=Qt);var fn=Ft.split("-");if(!mt&&fn.length>1)return un(fn[0])}else{var We=Ft.name;zt[We]=Ft,mt=We}return!Tt&&mt&&(xt=mt),mt||!Tt&&xt},sn=function(un,Ft){if(wt(un))return un.clone();var Bt=typeof Ft=="object"?Ft:{};return Bt.date=un,Bt.args=arguments,new ei(Bt)},Pt=lt;Pt.l=dn,Pt.i=wt,Pt.w=function(un,Ft){return sn(un,{locale:Ft.$L,utc:Ft.$u,x:Ft.$x,$offset:Ft.$offset})};var ei=function(){function un(Bt){this.$L=dn(Bt.locale,null,!0),this.parse(Bt)}var Ft=un.prototype;return Ft.parse=function(Bt){this.$d=function(Tt){var mt=Tt.date,Qt=Tt.utc;if(mt===null)return new Date(NaN);if(Pt.u(mt))return new Date;if(mt instanceof Date)return new Date(mt);if(typeof mt=="string"&&!/Z$/i.test(mt)){var fn=mt.match(He);if(fn){var We=fn[2]-1||0,dt=(fn[7]||"0").substring(0,3);return Qt?new Date(Date.UTC(fn[1],We,fn[3]||1,fn[4]||0,fn[5]||0,fn[6]||0,dt)):new Date(fn[1],We,fn[3]||1,fn[4]||0,fn[5]||0,fn[6]||0,dt)}}return new Date(mt)}(Bt),this.$x=Bt.x||{},this.init()},Ft.init=function(){var Bt=this.$d;this.$y=Bt.getFullYear(),this.$M=Bt.getMonth(),this.$D=Bt.getDate(),this.$W=Bt.getDay(),this.$H=Bt.getHours(),this.$m=Bt.getMinutes(),this.$s=Bt.getSeconds(),this.$ms=Bt.getMilliseconds()},Ft.$utils=function(){return Pt},Ft.isValid=function(){return this.$d.toString()!==Me},Ft.isSame=function(Bt,Tt){var mt=sn(Bt);return this.startOf(Tt)<=mt&&mt<=this.endOf(Tt)},Ft.isAfter=function(Bt,Tt){return sn(Bt)<this.startOf(Tt)},Ft.isBefore=function(Bt,Tt){return this.endOf(Tt)<sn(Bt)},Ft.$g=function(Bt,Tt,mt){return Pt.u(Bt)?this[Tt]:this.set(mt,Bt)},Ft.unix=function(){return Math.floor(this.valueOf()/1e3)},Ft.valueOf=function(){return this.$d.getTime()},Ft.startOf=function(Bt,Tt){var mt=this,Qt=!!Pt.u(Tt)||Tt,fn=Pt.p(Bt),We=function(ze,bt){var bn=Pt.w(mt.$u?Date.UTC(mt.$y,bt,ze):new Date(mt.$y,bt,ze),mt);return Qt?bn:bn.endOf(se)},dt=function(ze,bt){return Pt.w(mt.toDate()[ze].apply(mt.toDate("s"),(Qt?[0,0,0,0]:[23,59,59,999]).slice(bt)),mt)},oe=this.$W,U=this.$M,X=this.$D,we="set"+(this.$u?"UTC":"");switch(fn){case _e:return Qt?We(1,0):We(31,11);case A:return Qt?We(1,U):We(0,U+1);case ie:var Te=this.$locale().weekStart||0,qe=(oe<Te?oe+7:oe)-Te;return We(Qt?X-qe:X+(6-qe),U);case se:case de:return dt(we+"Hours",0);case re:return dt(we+"Minutes",1);case ne:return dt(we+"Seconds",2);case j:return dt(we+"Milliseconds",3);default:return this.clone()}},Ft.endOf=function(Bt){return this.startOf(Bt,!1)},Ft.$set=function(Bt,Tt){var mt,Qt=Pt.p(Bt),fn="set"+(this.$u?"UTC":""),We=(mt={},mt[se]=fn+"Date",mt[de]=fn+"Date",mt[A]=fn+"Month",mt[_e]=fn+"FullYear",mt[re]=fn+"Hours",mt[ne]=fn+"Minutes",mt[j]=fn+"Seconds",mt[V]=fn+"Milliseconds",mt)[Qt],dt=Qt===se?this.$D+(Tt-this.$W):Tt;if(Qt===A||Qt===_e){var oe=this.clone().set(de,1);oe.$d[We](dt),oe.init(),this.$d=oe.set(de,Math.min(this.$D,oe.daysInMonth())).$d}else We&&this.$d[We](dt);return this.init(),this},Ft.set=function(Bt,Tt){return this.clone().$set(Bt,Tt)},Ft.get=function(Bt){return this[Pt.p(Bt)]()},Ft.add=function(Bt,Tt){var mt,Qt=this;Bt=Number(Bt);var fn=Pt.p(Tt),We=function(U){var X=sn(Qt);return Pt.w(X.date(X.date()+Math.round(U*Bt)),Qt)};if(fn===A)return this.set(A,this.$M+Bt);if(fn===_e)return this.set(_e,this.$y+Bt);if(fn===se)return We(1);if(fn===ie)return We(7);var dt=(mt={},mt[ne]=D,mt[re]=O,mt[j]=I,mt)[fn]||1,oe=this.$d.getTime()+Bt*dt;return Pt.w(oe,this)},Ft.subtract=function(Bt,Tt){return this.add(-1*Bt,Tt)},Ft.format=function(Bt){var Tt=this,mt=this.$locale();if(!this.isValid())return mt.invalidDate||Me;var Qt=Bt||"YYYY-MM-DDTHH:mm:ssZ",fn=Pt.z(this),We=this.$H,dt=this.$m,oe=this.$M,U=mt.weekdays,X=mt.months,we=function(bt,bn,En,nt){return bt&&(bt[bn]||bt(Tt,Qt))||En[bn].slice(0,nt)},Te=function(bt){return Pt.s(We%12||12,bt,"0")},qe=mt.meridiem||function(bt,bn,En){var nt=bt<12?"AM":"PM";return En?nt.toLowerCase():nt},ze={YY:String(this.$y).slice(-2),YYYY:this.$y,M:oe+1,MM:Pt.s(oe+1,2,"0"),MMM:we(mt.monthsShort,oe,X,3),MMMM:we(X,oe),D:this.$D,DD:Pt.s(this.$D,2,"0"),d:String(this.$W),dd:we(mt.weekdaysMin,this.$W,U,2),ddd:we(mt.weekdaysShort,this.$W,U,3),dddd:U[this.$W],H:String(We),HH:Pt.s(We,2,"0"),h:Te(1),hh:Te(2),a:qe(We,dt,!0),A:qe(We,dt,!1),m:String(dt),mm:Pt.s(dt,2,"0"),s:String(this.$s),ss:Pt.s(this.$s,2,"0"),SSS:Pt.s(this.$ms,3,"0"),Z:fn};return Qt.replace(st,function(bt,bn){return bn||ze[bt]||fn.replace(":","")})},Ft.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ft.diff=function(Bt,Tt,mt){var Qt,fn=Pt.p(Tt),We=sn(Bt),dt=(We.utcOffset()-this.utcOffset())*D,oe=this-We,U=Pt.m(this,We);return U=(Qt={},Qt[_e]=U/12,Qt[A]=U,Qt[te]=U/3,Qt[ie]=(oe-dt)/6048e5,Qt[se]=(oe-dt)/864e5,Qt[re]=oe/O,Qt[ne]=oe/D,Qt[j]=oe/I,Qt)[fn]||oe,mt?U:Pt.a(U)},Ft.daysInMonth=function(){return this.endOf(A).$D},Ft.$locale=function(){return zt[this.$L]},Ft.locale=function(Bt,Tt){if(!Bt)return this.$L;var mt=this.clone(),Qt=dn(Bt,Tt,!0);return Qt&&(mt.$L=Qt),mt},Ft.clone=function(){return Pt.w(this.$d,this)},Ft.toDate=function(){return new Date(this.valueOf())},Ft.toJSON=function(){return this.isValid()?this.toISOString():null},Ft.toISOString=function(){return this.$d.toISOString()},Ft.toString=function(){return this.$d.toUTCString()},un}(),xn=ei.prototype;return sn.prototype=xn,[["$ms",V],["$s",j],["$m",ne],["$H",re],["$W",se],["$M",A],["$y",_e],["$D",de]].forEach(function(un){xn[un[1]]=function(Ft){return this.$g(Ft,un[0],un[1])}}),sn.extend=function(un,Ft){return un.$i||(un(Ft,ei,sn),un.$i=!0),sn},sn.locale=dn,sn.isDayjs=wt,sn.unix=function(un){return sn(1e3*un)},sn.en=zt[xt],sn.Ls=zt,sn.p={},sn})}),W={formatDateTime:function(Y){return M(Y).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(Y){return M(Y).format("YYYY-MM-DD")},formatDateHours:function(Y){return M(Y).format("YYYY-MM-DD HH:mm")},formatDayHours:function(Y){return M(Y).format("MM-DD HH:mm")},formatHours:function(Y){return M(Y).format("HH:mm")},formatMinute:function(Y){return M(Y).format("HH:mm:ss")},formatSecond:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=0,D=0,O=0;function V(re){return O=Math.floor(re/3600),re-O*3600}function j(re){return D=Math.floor(re/60),re-D*60}function ne(re){return I=re,I}return ne(j(V(Y))),"".concat(O?O+"h":"").concat(D?D+"m":"").concat(I?I+"s":"")||"0s"}},F={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},Q=function(){function G(){n(this,G),this.fakeHandler=null}return o(G,[{key:"copy",value:function(I,D){var O=this;this.removeFake(),this.fakeHandlerCallback=function(){return O.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px";var V=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top="".concat(V,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=I,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText(D)}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(I){var D;try{D=document.execCommand("copy")}catch{D=!1}I&&I(D)}}]),G}(),z=function(){function G(Y,I,D){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;n(this,G),"indexedDB"in window?(this._storeName=D,this._version=I,this._database=Y,this._openLog=O):console.log("This browser doesn't support IndexedDB")}return o(G,[{key:"open",value:function(){var I=this;return new Promise(function(D,O){try{var V=I;if(V._db)return D(V._db);var j=indexedDB.open(V._database,V._version);j.onsuccess=function(){V._db=j.result,V._db.onversionchange=function(ne){console.log("onversionchange",ne)},D(j.result),console.log("Open indexedDB success!")},j.onupgradeneeded=function(ne){console.log("openDb.onupgradeneeded",ne),V._db=j.result,V._db.objectStoreNames.contains(V._storeName)||V._db.createObjectStore(V._storeName),D(j.result)},j.onblocked=function(ne){console.log("openDb onblocked",ne)},j.onerror=function(ne){console.log("Maybe you not allow my web app to use IndexedDB!"),O(ne)}}catch(ne){console.error(ne),O(ne)}})}},{key:"getObjectStore",value:function(I,D){if(this._db){var O=this._db.transaction([I],D);return O.objectStore(I)}return null}},{key:"add",value:function(I,D){return this.wrapStoreOperationPromise(function(O){return O.add(I,D)})}},{key:"set",value:function(I,D){return this.log("IndexedDB set",I,D),this.wrapStoreOperationPromise(function(O){return O.put(D,I)})}},{key:"get",value:function(I){return this.log("IndexedDB get",I),this.wrapStoreOperationPromise(function(D){return D.get(I)})}},{key:"delete",value:function(I){return this.wrapStoreOperationPromise(function(D){return D.delete(I)})}},{key:"clear",value:function(){return this.wrapStoreOperationPromise(function(I){return I.clear()})}},{key:"getStore",value:function(){return this.getObjectStore(this._storeName,"readwrite")}},{key:"wrapStoreOperationPromise",value:function(I){var D=this;return new Promise(function(O,V){try{var j=D.getObjectStore(D._storeName,"readwrite");if(j){var ne=I(j);ne.onsuccess=function(re){return O(re.target.result)},ne.onerror=function(re){return V(re)}}}catch(re){console.error(re),V(re)}})}},{key:"log",value:function(){if(this._openLog){var I;(I=console).log.apply(I,arguments)}}}]),G}(),$={set:function(Y,I){if(!I)delete window.localStorage[Y];else{var D=t(I)==="object"?JSON.stringify(I):I;window.localStorage[Y]=D}},get:function(Y){var I=window.localStorage[Y]||"";return T.isJSONStr(I)?JSON.parse(I):I},remove:function(Y){delete window.localStorage[Y]},clear:function(){window.localStorage.clear()}};return j_.Cookie=k,j_.CopyUtils=Q,j_.DateTime=W,j_.Layout=F,j_.LocalDB=$,j_.LocalIndexedDB=z,j_.Utils=T,j_}var ane=Ffe();const PP="mo";function Ri(r,e=PP){return r?`${e}-${r}`:""}function oi(...r){if(Ao.isEmpty(r))return;const e=[];for(const t of r){if(!t)continue;const n=typeof t;if(n==="string"||n==="number"){e.push(`${t}`);continue}if(n==="object"){if(t.toString!==Object.prototype.toString){e.push(t.toString());continue}for(const i in t)Object.hasOwnProperty.call(t,i)&&t[i]&&e.push(i)}}return e.join(" ")}function Gt(r,e){return`${r}__${e}`}function li(r,e){return`${r}--${e}`}function lne(){return ane.Utils.isMacOs()?"mac":""}var AU=ine();const tx=xm(AU),Bfe=nne({__proto__:null,default:tx},[AU]),FP=Object.assign({},Bfe);let vR;const bR=Symbol("__molecule__root");AU.version.startsWith("18")&&(vR=FP.createRoot);function jq(r){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e}=FP;e&&typeof e=="object"&&(e.usingClientEntryPoint=r)}const CR=(r,e)=>{if(vR){jq(!0);const t=e[bR]||vR(e);jq(!1),t.render(r),e[bR]=t;return}FP.render(r,e)},une=r=>{var e;return vR?((e=r[bR])===null||e===void 0||e.unmount(),Reflect.deleteProperty(r,bR),!0):FP.unmountComponentAtNode(r)},DL=document.querySelector.bind(document);document.querySelectorAll.bind(document);function Wfe(){const r=document.body,e=document.documentElement,t=e.clientWidth,n=e.clientHeight,i=Math.max(r.scrollHeight,r.offsetHeight,n,e.scrollHeight,e.offsetHeight),o=Math.max(r.scrollWidth,r.offsetWidth,t,e.scrollWidth,e.offsetWidth);return{height:i,width:o,clientWidth:t,clientHeight:n}}function cne(r,e){const{clientWidth:t,clientHeight:n}=Wfe(),i=e.x,o=e.y,s=t-i,a=n-o,l=r.offsetHeight,u=r.offsetWidth,d=s<u?i-u:i,h=a<l?o-l:o;return{x:d,y:h}}function yR(r){return{x:r.clientX,y:r.clientY}}function dne(r){switch(r){case"click":return"onClick";case"hover":return"onMouseOver";case"contextmenu":return"onContextMenu";default:return r}}function qq(r,e){let t=e.x,n=e.y;return r==="top"?n=e.y-e.height:r==="right"?t=e.x+e.width:r==="bottom"?n=e.y+e.height:r==="left"?t=e.x-e.width:r==="rightBottom"&&(t=e.x+e.width,n=e.y+e.height),{x:t,y:n}}function nA(r,e){return r.getAttribute(e)||""}function Xw(r){return Object.keys(r).reduce((e,t)=>(t.startsWith("data-")&&(e[t]=r[t]),e),{})}const cm=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Kq(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vfe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(t),!0).forEach(function(n){Hfe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kq(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Hfe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Gq(r,e){return Ufe(r)||zfe(r,e)||hne(r,e)||$fe()}function Ufe(r){if(Array.isArray(r))return r}function zfe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,s,a;try{for(t=t.call(r);!(i=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function hne(r,e){if(r){if(typeof r=="string")return Yq(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Yq(r,e)}}function Yq(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function $fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jfe(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=hne(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}}}var iL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof cm<"u"?cm:typeof self<"u"?self:{};function fne(r,e){return e={exports:{}},r(e,e.exports),e.exports}var f3=fne(function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,p=2,_=4,C=1,S=2,x=1,T=2,k=4,M=8,W=16,F=32,Q=64,z=128,$=256,G=512,Y=30,I="...",D=800,O=16,V=1,j=2,ne=3,re=1/0,se=9007199254740991,ie=17976931348623157e292,A=0/0,te=4294967295,_e=te-1,de=te>>>1,Me=[["ary",z],["bind",x],["bindKey",T],["curry",M],["curryRight",W],["flip",G],["partial",F],["partialRight",Q],["rearg",$]],He="[object Arguments]",st="[object Array]",Dt="[object AsyncFunction]",Rt="[object Boolean]",lt="[object Date]",xt="[object DOMException]",zt="[object Error]",wt="[object Function]",dn="[object GeneratorFunction]",sn="[object Map]",Pt="[object Number]",ei="[object Null]",xn="[object Object]",un="[object Promise]",Ft="[object Proxy]",Bt="[object RegExp]",Tt="[object Set]",mt="[object String]",Qt="[object Symbol]",fn="[object Undefined]",We="[object WeakMap]",dt="[object WeakSet]",oe="[object ArrayBuffer]",U="[object DataView]",X="[object Float32Array]",we="[object Float64Array]",Te="[object Int8Array]",qe="[object Int16Array]",ze="[object Int32Array]",bt="[object Uint8Array]",bn="[object Uint8ClampedArray]",En="[object Uint16Array]",nt="[object Uint32Array]",Mi=/\b__p \+= '';/g,ni=/\b(__p \+=) '' \+/g,bi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qs=/&(?:amp|lt|gt|quot|#39);/g,Vn=/[&<>"']/g,Dr=RegExp(Qs.source),ru=RegExp(Vn.source),lr=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,as=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ye=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/[\\^$.*+?()[\]{}|]/g,Ce=RegExp(ve.source),Ie=/^\s+/,ue=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pt=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kn=/[()=,{}\[\]\/\s]/,R=/\\(\\)?/g,K=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,Je=/^0o[0-7]+$/i,ht=/^(?:0|[1-9]\d*)$/,It=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vt=/($^)/,pn=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",mn="\\u0300-\\u036f",Jt="\\ufe20-\\ufe2f",qi="\\u20d0-\\u20ff",Ci=mn+Jt+qi,Rr="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",da="\\xac\\xb1\\xd7\\xf7",Cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ap="\\u2000-\\u206f",Pu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l0="A-Z\\xc0-\\xd6\\xd8-\\xde",u0="\\ufe0e\\ufe0f",c0=da+Cs+ap+Pu,Fd="[']",Am="["+tn+"]",Bd="["+c0+"]",hc="["+Ci+"]",d0="\\d+",ay="["+Rr+"]",lp="["+Er+"]",Om="[^"+tn+c0+d0+Rr+Er+l0+"]",Bh="\\ud83c[\\udffb-\\udfff]",Wd="(?:"+hc+"|"+Bh+")",h0="[^"+tn+"]",fc="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",ou="["+l0+"]",Rm="\\u200d",Yf="(?:"+lp+"|"+Om+")",f0="(?:"+ou+"|"+Om+")",up="(?:"+Fd+"(?:d|ll|m|re|s|t|ve))?",Mm="(?:"+Fd+"(?:D|LL|M|RE|S|T|VE))?",cp=Wd+"?",Zf="["+u0+"]?",Vd="(?:"+Rm+"(?:"+[h0,fc,Lr].join("|")+")"+Zf+cp+")*",$c="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hd=Zf+cp+Vd,Wh="(?:"+[ay,fc,Lr].join("|")+")"+Hd,Ud="(?:"+[h0+hc+"?",hc,fc,Lr,Am].join("|")+")",r1=RegExp(Fd,"g"),dp=RegExp(hc,"g"),gc=RegExp(Bh+"(?="+Bh+")|"+Ud+Hd,"g"),ly=RegExp([ou+"?"+lp+"+"+up+"(?="+[Bd,ou,"$"].join("|")+")",f0+"+"+Mm+"(?="+[Bd,ou+Yf,"$"].join("|")+")",ou+"?"+Yf+"+"+up,ou+"+"+Mm,jc,$c,d0,Wh].join("|"),"g"),g0=RegExp("["+Rm+tn+Ci+u0+"]"),hp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uy=-1,ui={};ui[X]=ui[we]=ui[Te]=ui[qe]=ui[ze]=ui[bt]=ui[bn]=ui[En]=ui[nt]=!0,ui[He]=ui[st]=ui[oe]=ui[Rt]=ui[U]=ui[lt]=ui[zt]=ui[wt]=ui[sn]=ui[Pt]=ui[xn]=ui[Bt]=ui[Tt]=ui[mt]=ui[We]=!1;var ii={};ii[He]=ii[st]=ii[oe]=ii[U]=ii[Rt]=ii[lt]=ii[X]=ii[we]=ii[Te]=ii[qe]=ii[ze]=ii[sn]=ii[Pt]=ii[xn]=ii[Bt]=ii[Tt]=ii[mt]=ii[Qt]=ii[bt]=ii[bn]=ii[En]=ii[nt]=!0,ii[zt]=ii[wt]=ii[We]=!1;var zd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},qc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},p0=parseFloat,fp=parseInt,Xf=typeof iL=="object"&&iL&&iL.Object===Object&&iL,m0=typeof self=="object"&&self&&self.Object===Object&&self,Ki=Xf||m0||Function("return this")(),Vh=e&&!e.nodeType&&e,Ea=Vh&&!0&&r&&!r.nodeType&&r,Fm=Ea&&Ea.exports===Vh,Kc=Fm&&Xf.process,Eo=function(){try{var be=Ea&&Ea.require&&Ea.require("util").types;return be||Kc&&Kc.binding&&Kc.binding("util")}catch{}}(),Bm=Eo&&Eo.isArrayBuffer,ja=Eo&&Eo.isDate,$d=Eo&&Eo.isMap,Hh=Eo&&Eo.isRegExp,Uh=Eo&&Eo.isSet,_0=Eo&&Eo.isTypedArray;function _o(be,Pe,ke){switch(ke.length){case 0:return be.call(Pe);case 1:return be.call(Pe,ke[0]);case 2:return be.call(Pe,ke[0],ke[1]);case 3:return be.call(Pe,ke[0],ke[1],ke[2])}return be.apply(Pe,ke)}function v0(be,Pe,ke,Et){for(var hn=-1,Kn=be==null?0:be.length;++hn<Kn;){var Pi=be[hn];Pe(Et,Pi,ke(Pi),be)}return Et}function vo(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et&&Pe(be[ke],ke,be)!==!1;);return be}function eo(be,Pe){for(var ke=be==null?0:be.length;ke--&&Pe(be[ke],ke,be)!==!1;);return be}function qr(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et;)if(!Pe(be[ke],ke,be))return!1;return!0}function qa(be,Pe){for(var ke=-1,Et=be==null?0:be.length,hn=0,Kn=[];++ke<Et;){var Pi=be[ke];Pe(Pi,ke,be)&&(Kn[hn++]=Pi)}return Kn}function zh(be,Pe){var ke=be==null?0:be.length;return!!ke&&ts(be,Pe,0)>-1}function gp(be,Pe,ke){for(var Et=-1,hn=be==null?0:be.length;++Et<hn;)if(ke(Pe,be[Et]))return!0;return!1}function mi(be,Pe){for(var ke=-1,Et=be==null?0:be.length,hn=Array(Et);++ke<Et;)hn[ke]=Pe(be[ke],ke,be);return hn}function Ka(be,Pe){for(var ke=-1,Et=Pe.length,hn=be.length;++ke<Et;)be[hn+ke]=Pe[ke];return be}function pp(be,Pe,ke,Et){var hn=-1,Kn=be==null?0:be.length;for(Et&&Kn&&(ke=be[++hn]);++hn<Kn;)ke=Pe(ke,be[hn],hn,be);return ke}function a1(be,Pe,ke,Et){var hn=be==null?0:be.length;for(Et&&hn&&(ke=be[--hn]);hn--;)ke=Pe(ke,be[hn],hn,be);return ke}function mp(be,Pe){for(var ke=-1,Et=be==null?0:be.length;++ke<Et;)if(Pe(be[ke],ke,be))return!0;return!1}var ha=Qf("length");function Wm(be){return be.split("")}function $h(be){return be.match(Ut)||[]}function Vm(be,Pe,ke){var Et;return ke(be,function(hn,Kn,Pi){if(Pe(hn,Kn,Pi))return Et=Kn,!1}),Et}function Gc(be,Pe,ke,Et){for(var hn=be.length,Kn=ke+(Et?1:-1);Et?Kn--:++Kn<hn;)if(Pe(be[Kn],Kn,be))return Kn;return-1}function ts(be,Pe,ke){return Pe===Pe?eg(be,Pe,ke):Gc(be,Um,ke)}function Hm(be,Pe,ke,Et){for(var hn=ke-1,Kn=be.length;++hn<Kn;)if(Et(be[hn],Pe))return hn;return-1}function Um(be){return be!==be}function zm(be,Pe){var ke=be==null?0:be.length;return ke?_p(be,Pe)/ke:A}function Qf(be){return function(Pe){return Pe==null?t:Pe[be]}}function jh(be){return function(Pe){return be==null?t:be[Pe]}}function $m(be,Pe,ke,Et,hn){return hn(be,function(Kn,Pi,ci){ke=Et?(Et=!1,Kn):Pe(ke,Kn,Pi,ci)}),ke}function Wl(be,Pe){var ke=be.length;for(be.sort(Pe);ke--;)be[ke]=be[ke].value;return be}function _p(be,Pe){for(var ke,Et=-1,hn=be.length;++Et<hn;){var Kn=Pe(be[Et]);Kn!==t&&(ke=ke===t?Kn:ke+Kn)}return ke}function La(be,Pe){for(var ke=-1,Et=Array(be);++ke<be;)Et[ke]=Pe(ke);return Et}function cy(be,Pe){return mi(Pe,function(ke){return[ke,be[ke]]})}function jm(be){return be&&be.slice(0,qh(be)+1).replace(Ie,"")}function Ir(be){return function(Pe){return be(Pe)}}function pc(be,Pe){return mi(Pe,function(ke){return be[ke]})}function Ga(be,Pe){return be.has(Pe)}function Lo(be,Pe){for(var ke=-1,Et=be.length;++ke<Et&&ts(Pe,be[ke],0)>-1;);return ke}function Fu(be,Pe){for(var ke=be.length;ke--&&ts(Pe,be[ke],0)>-1;);return ke}function qm(be,Pe){for(var ke=be.length,Et=0;ke--;)be[ke]===Pe&&++Et;return Et}var l1=jh(zd),Km=jh(qc);function u1(be){return"\\"+s1[be]}function Jf(be,Pe){return be==null?t:be[Pe]}function Bu(be){return g0.test(be)}function c1(be){return hp.test(be)}function Gm(be){for(var Pe,ke=[];!(Pe=be.next()).done;)ke.push(Pe.value);return ke}function Wu(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et,hn){ke[++Pe]=[hn,Et]}),ke}function Ym(be,Pe){return function(ke){return be(Pe(ke))}}function ys(be,Pe){for(var ke=-1,Et=be.length,hn=0,Kn=[];++ke<Et;){var Pi=be[ke];(Pi===Pe||Pi===d)&&(be[ke]=d,Kn[hn++]=ke)}return Kn}function su(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et){ke[++Pe]=Et}),ke}function b0(be){var Pe=-1,ke=Array(be.size);return be.forEach(function(Et){ke[++Pe]=[Et,Et]}),ke}function eg(be,Pe,ke){for(var Et=ke-1,hn=be.length;++Et<hn;)if(be[Et]===Pe)return Et;return-1}function d1(be,Pe,ke){for(var Et=ke+1;Et--;)if(be[Et]===Pe)return Et;return Et}function au(be){return Bu(be)?C0(be):ha(be)}function Mo(be){return Bu(be)?pl(be):Wm(be)}function qh(be){for(var Pe=be.length;Pe--&&ue.test(be.charAt(Pe)););return Pe}var h1=jh(o1);function C0(be){for(var Pe=gc.lastIndex=0;gc.test(be);)++Pe;return Pe}function pl(be){return be.match(gc)||[]}function y0(be){return be.match(ly)||[]}var vp=function be(Pe){Pe=Pe==null?Ki:lu.defaults(Ki.Object(),Pe,lu.pick(Ki,Pm));var ke=Pe.Array,Et=Pe.Date,hn=Pe.Error,Kn=Pe.Function,Pi=Pe.Math,ci=Pe.Object,Kh=Pe.RegExp,w0=Pe.String,Uo=Pe.TypeError,Os=ke.prototype,tg=Kn.prototype,Ya=ci.prototype,Yc=Pe["__core-js_shared__"],jd=tg.toString,$n=Ya.hasOwnProperty,xa=0,ng=function(){var c=/[^.]+$/.exec(Yc&&Yc.keys&&Yc.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),qd=Ya.toString,Zm=jd.call(ci),f1=Ki._,g1=Kh("^"+jd.call($n).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kd=Fm?Pe.Buffer:t,ls=Pe.Symbol,tt=Pe.Uint8Array,At=Kd?Kd.allocUnsafe:t,gt=Ym(ci.getPrototypeOf,ci),Rn=ci.create,vi=Ya.propertyIsEnumerable,ur=Os.splice,us=ls?ls.isConcatSpreadable:t,Xi=ls?ls.iterator:t,Za=ls?ls.toStringTag:t,Gd=function(){try{var c=_a(ci,"defineProperty");return c({},"",{}),c}catch{}}(),Vl=Pe.clearTimeout!==Ki.clearTimeout&&Pe.clearTimeout,to=Et&&Et.now!==Ki.Date.now&&Et.now,S0=Pe.setTimeout!==Ki.setTimeout&&Pe.setTimeout,Xa=Pi.ceil,ml=Pi.floor,Zc=ci.getOwnPropertySymbols,Mr=Kd?Kd.isBuffer:t,Gh=Pe.isFinite,bp=Os.join,Xc=Ym(ci.keys,ci),ir=Pi.max,Pr=Pi.min,dy=Et.now,Cp=Pe.parseInt,Hl=Pi.random,Yh=Os.reverse,Yd=_a(Pe,"DataView"),_l=_a(Pe,"Map"),Zd=_a(Pe,"Promise"),vl=_a(Pe,"Set"),uu=_a(Pe,"WeakMap"),Vu=_a(ci,"create"),Hu=uu&&new uu,fa={},ig=oo(Yd),Xd=oo(_l),p1=oo(Zd),rg=oo(vl),Ul=oo(uu),bl=ls?ls.prototype:t,Rs=bl?bl.valueOf:t,yp=bl?bl.toString:t;function q(c){if(Gi(c)&&!Cn(c)&&!(c instanceof an)){if(c instanceof Ei)return c;if($n.call(c,"__wrapped__"))return y_(c)}return new Ei(c)}var Uu=function(){function c(){}return function(f){if(!Fi(f))return{};if(Rn)return Rn(f);c.prototype=f;var b=new c;return c.prototype=t,b}}();function zl(){}function Ei(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}q.templateSettings={escape:lr,evaluate:Ct,interpolate:as,variable:"",imports:{_:q}},q.prototype=zl.prototype,q.prototype.constructor=q,Ei.prototype=Uu(zl.prototype),Ei.prototype.constructor=Ei;function an(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Xm(){var c=new an(this.__wrapped__);return c.__actions__=Gr(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Gr(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Gr(this.__views__),c}function E0(){if(this.__filtered__){var c=new an(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Zh(){var c=this.__wrapped__.value(),f=this.__dir__,b=Cn(c),L=f<0,B=b?c.length:0,Z=A0(0,B,this.__views__),ae=Z.start,he=Z.end,ye=he-ae,Ue=L?he:ae-1,$e=this.__iteratees__,Ze=$e.length,vt=0,Ht=Pr(ye,this.__takeCount__);if(!b||!L&&B==ye&&Ht==ye)return xp(c,this.__actions__);var nn=[];e:for(;ye--&&vt<Ht;){Ue+=f;for(var Dn=-1,rn=c[Ue];++Dn<Ze;){var Mn=$e[Dn],Un=Mn.iteratee,Qo=Mn.type,wo=Un(rn);if(Qo==j)rn=wo;else if(!wo){if(Qo==V)continue e;break e}}nn[vt++]=rn}return nn}an.prototype=Uu(zl.prototype),an.prototype.constructor=an;function ws(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function bo(){this.__data__=Vu?Vu(null):{},this.size=0}function zr(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function mc(c){var f=this.__data__;if(Vu){var b=f[c];return b===l?t:b}return $n.call(f,c)?f[c]:t}function cs(c){var f=this.__data__;return Vu?f[c]!==t:$n.call(f,c)}function Js(c,f){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=Vu&&f===t?l:f,this}ws.prototype.clear=bo,ws.prototype.delete=zr,ws.prototype.get=mc,ws.prototype.has=cs,ws.prototype.set=Js;function Co(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function Qc(){this.__data__=[],this.size=0}function Ms(c){var f=this.__data__,b=Ps(f,c);if(b<0)return!1;var L=f.length-1;return b==L?f.pop():ur.call(f,b,1),--this.size,!0}function Qm(c){var f=this.__data__,b=Ps(f,c);return b<0?t:f[b][1]}function m1(c){return Ps(this.__data__,c)>-1}function _1(c,f){var b=this.__data__,L=Ps(b,c);return L<0?(++this.size,b.push([c,f])):b[L][1]=f,this}Co.prototype.clear=Qc,Co.prototype.delete=Ms,Co.prototype.get=Qm,Co.prototype.has=m1,Co.prototype.set=_1;function Ss(c){var f=-1,b=c==null?0:c.length;for(this.clear();++f<b;){var L=c[f];this.set(L[0],L[1])}}function v1(){this.size=0,this.__data__={hash:new ws,map:new(_l||Co),string:new ws}}function cu(c){var f=ch(this,c).delete(c);return this.size-=f?1:0,f}function Qd(c){return ch(this,c).get(c)}function Jm(c){return ch(this,c).has(c)}function Ee(c,f){var b=ch(this,c),L=b.size;return b.set(c,f),this.size+=b.size==L?0:1,this}Ss.prototype.clear=v1,Ss.prototype.delete=cu,Ss.prototype.get=Qd,Ss.prototype.has=Jm,Ss.prototype.set=Ee;function ea(c){var f=-1,b=c==null?0:c.length;for(this.__data__=new Ss;++f<b;)this.add(c[f])}function zu(c){return this.__data__.set(c,l),this}function ga(c){return this.__data__.has(c)}ea.prototype.add=ea.prototype.push=zu,ea.prototype.has=ga;function Yn(c){var f=this.__data__=new Co(c);this.size=f.size}function e_(){this.__data__=new Co,this.size=0}function t_(c){var f=this.__data__,b=f.delete(c);return this.size=f.size,b}function du(c){return this.__data__.get(c)}function ta(c){return this.__data__.has(c)}function Xh(c,f){var b=this.__data__;if(b instanceof Co){var L=b.__data__;if(!_l||L.length<i-1)return L.push([c,f]),this.size=++b.size,this;b=this.__data__=new Ss(L)}return b.set(c,f),this.size=b.size,this}Yn.prototype.clear=e_,Yn.prototype.delete=t_,Yn.prototype.get=du,Yn.prototype.has=ta,Yn.prototype.set=Xh;function $u(c,f){var b=Cn(c),L=!b&&yu(c),B=!b&&!L&&Zl(c),Z=!b&&!L&&!B&&hd(c),ae=b||L||B||Z,he=ae?La(c.length,w0):[],ye=he.length;for(var Ue in c)(f||$n.call(c,Ue))&&!(ae&&(Ue=="length"||B&&(Ue=="offset"||Ue=="parent")||Z&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||hs(Ue,ye)))&&he.push(Ue);return he}function ju(c){var f=c.length;return f?c[nf(0,f-1)]:t}function Qh(c,f){return Ta(Gr(c),Ja(f,0,c.length))}function b1(c){return Ta(Gr(c))}function Qa(c,f,b){(b!==t&&!Is(c[f],b)||b===t&&!(f in c))&&Do(c,f,b)}function qu(c,f,b){var L=c[f];(!($n.call(c,f)&&Is(L,b))||b===t&&!(f in c))&&Do(c,f,b)}function Ps(c,f){for(var b=c.length;b--;)if(Is(c[b][0],f))return b;return-1}function $l(c,f,b,L){return pa(c,function(B,Z,ae){f(L,B,b(B),ae)}),L}function xo(c,f){return c&&kr(f,wr(f),c)}function Ku(c,f){return c&&kr(f,Bo(f),c)}function Do(c,f,b){f=="__proto__"&&Gd?Gd(c,f,{configurable:!0,enumerable:!0,value:b,writable:!0}):c[f]=b}function og(c,f){for(var b=-1,L=f.length,B=ke(L),Z=c==null;++b<L;)B[b]=Z?t:Z0(c,f[b]);return B}function Ja(c,f,b){return c===c&&(b!==t&&(c=c<=b?c:b),f!==t&&(c=c>=f?c:f)),c}function Po(c,f,b,L,B,Z){var ae,he=f&h,ye=f&p,Ue=f&_;if(b&&(ae=B?b(c,L,B,Z):b(c)),ae!==t)return ae;if(!Fi(c))return c;var $e=Cn(c);if($e){if(ae=O0(c),!he)return Gr(c,ae)}else{var Ze=Cr(c),vt=Ze==wt||Ze==dn;if(Zl(c))return d_(c,he);if(Ze==xn||Ze==He||vt&&!B){if(ae=ye||vt?{}:nl(c),!he)return ye?D0(c,Ku(ae,c)):id(c,xo(ae,c))}else{if(!ii[Ze])return B?c:{};ae=va(c,Ze,he)}}Z||(Z=new Yn);var Ht=Z.get(c);if(Ht)return Ht;Z.set(c,ae),ky(c)?c.forEach(function(rn){ae.add(Po(rn,f,b,rn,c,Z))}):Iy(c)&&c.forEach(function(rn,Mn){ae.set(Mn,Po(rn,f,b,Mn,c,Z))});var nn=Ue?ye?Xu:Zu:ye?Bo:wr,Dn=$e?t:nn(c);return vo(Dn||c,function(rn,Mn){Dn&&(Mn=rn,rn=c[Mn]),qu(ae,Mn,Po(rn,f,b,Mn,c,Z))}),ae}function C1(c){var f=wr(c);return function(b){return sg(b,c,f)}}function sg(c,f,b){var L=b.length;if(c==null)return!L;for(c=ci(c);L--;){var B=b[L],Z=f[B],ae=c[B];if(ae===t&&!(B in c)||!Z(ae))return!1}return!0}function _c(c,f,b){if(typeof c!="function")throw new Uo(s);return Qu(function(){c.apply(t,b)},f)}function Cl(c,f,b,L){var B=-1,Z=zh,ae=!0,he=c.length,ye=[],Ue=f.length;if(!he)return ye;b&&(f=mi(f,Ir(b))),L?(Z=gp,ae=!1):f.length>=i&&(Z=Ga,ae=!1,f=new ea(f));e:for(;++B<he;){var $e=c[B],Ze=b==null?$e:b($e);if($e=L||$e!==0?$e:0,ae&&Ze===Ze){for(var vt=Ue;vt--;)if(f[vt]===Ze)continue e;ye.push($e)}else Z(f,Ze,L)||ye.push($e)}return ye}var pa=f_(ds),jl=f_(bc,!0);function Gu(c,f){var b=!0;return pa(c,function(L,B,Z){return b=!!f(L,B,Z),b}),b}function vc(c,f,b){for(var L=-1,B=c.length;++L<B;){var Z=c[L],ae=f(Z);if(ae!=null&&(he===t?ae===ae&&!Zo(ae):b(ae,he)))var he=ae,ye=Z}return ye}function n_(c,f,b,L){var B=c.length;for(b=yn(b),b<0&&(b=-b>B?0:B+b),L=L===t||L>B?B:yn(L),L<0&&(L+=B),L=b>L?0:Xo(L);b<L;)c[b++]=f;return c}function Jd(c,f){var b=[];return pa(c,function(L,B,Z){f(L,B,Z)&&b.push(L)}),b}function mr(c,f,b,L,B){var Z=-1,ae=c.length;for(b||(b=gy),B||(B=[]);++Z<ae;){var he=c[Z];f>0&&b(he)?f>1?mr(he,f-1,b,L,B):Ka(B,he):L||(B[B.length]=he)}return B}var eh=vg(),ag=vg(!0);function ds(c,f){return c&&eh(c,f,wr)}function bc(c,f){return c&&ag(c,f,wr)}function Es(c,f){return qa(f,function(b){return ol(c[b])})}function Yo(c,f){f=Da(f,c);for(var b=0,L=f.length;c!=null&&b<L;)c=c[ro(f[b++])];return b&&b==L?c:t}function th(c,f,b){var L=f(c);return Cn(c)?L:Ka(L,b(c))}function $r(c){return c==null?c===t?fn:ei:Za&&Za in ci(c)?Tp(c):S1(c)}function yl(c,f){return c>f}function nh(c,f){return c!=null&&$n.call(c,f)}function Yu(c,f){return c!=null&&f in ci(c)}function i_(c,f,b){return c>=Pr(f,b)&&c<ir(f,b)}function Fs(c,f,b){for(var L=b?gp:zh,B=c[0].length,Z=c.length,ae=Z,he=ke(Z),ye=1/0,Ue=[];ae--;){var $e=c[ae];ae&&f&&($e=mi($e,Ir(f))),ye=Pr($e.length,ye),he[ae]=!b&&(f||B>=120&&$e.length>=120)?new ea(ae&&$e):t}$e=c[0];var Ze=-1,vt=he[0];e:for(;++Ze<B&&Ue.length<ye;){var Ht=$e[Ze],nn=f?f(Ht):Ht;if(Ht=b||Ht!==0?Ht:0,!(vt?Ga(vt,nn):L(Ue,nn,b))){for(ae=Z;--ae;){var Dn=he[ae];if(!(Dn?Ga(Dn,nn):L(c[ae],nn,b)))continue e}vt&&vt.push(nn),Ue.push(Ht)}}return Ue}function Bs(c,f,b,L){return ds(c,function(B,Z,ae){f(L,b(B),Z,ae)}),L}function hu(c,f,b){f=Da(f,c),c=Sg(c,f);var L=c==null?c:c[ro(Fr(f))];return L==null?t:_o(L,c,b)}function wp(c){return Gi(c)&&$r(c)==He}function Sp(c){return Gi(c)&&$r(c)==oe}function lg(c){return Gi(c)&&$r(c)==lt}function ma(c,f,b,L,B){return c===f?!0:c==null||f==null||!Gi(c)&&!Gi(f)?c!==c&&f!==f:r_(c,f,b,L,ma,B)}function r_(c,f,b,L,B,Z){var ae=Cn(c),he=Cn(f),ye=ae?st:Cr(c),Ue=he?st:Cr(f);ye=ye==He?xn:ye,Ue=Ue==He?xn:Ue;var $e=ye==xn,Ze=Ue==xn,vt=ye==Ue;if(vt&&Zl(c)){if(!Zl(f))return!1;ae=!0,$e=!1}if(vt&&!$e)return Z||(Z=new Yn),ae||hd(c)?yg(c,f,b,L,B,Z):T0(c,f,ye,b,L,B,Z);if(!(b&C)){var Ht=$e&&$n.call(c,"__wrapped__"),nn=Ze&&$n.call(f,"__wrapped__");if(Ht||nn){var Dn=Ht?c.value():c,rn=nn?f.value():f;return Z||(Z=new Yn),B(Dn,rn,b,L,Z)}}return vt?(Z||(Z=new Yn),N0(c,f,b,L,B,Z)):!1}function o_(c){return Gi(c)&&Cr(c)==sn}function Jc(c,f,b,L){var B=b.length,Z=B,ae=!L;if(c==null)return!Z;for(c=ci(c);B--;){var he=b[B];if(ae&&he[2]?he[1]!==c[he[0]]:!(he[0]in c))return!1}for(;++B<Z;){he=b[B];var ye=he[0],Ue=c[ye],$e=he[1];if(ae&&he[2]){if(Ue===t&&!(ye in c))return!1}else{var Ze=new Yn;if(L)var vt=L(Ue,$e,ye,c,f,Ze);if(!(vt===t?ma($e,Ue,C|S,L,Ze):vt))return!1}}return!0}function s_(c){if(!Fi(c)||Op(c))return!1;var f=ol(c)?g1:Se;return f.test(oo(c))}function L0(c){return Gi(c)&&$r(c)==Bt}function Ws(c){return Gi(c)&&Cr(c)==Tt}function Jh(c){return Gi(c)&&Bp(c.length)&&!!ui[$r(c)]}function ef(c){return typeof c=="function"?c:c==null?Wo:typeof c=="object"?Cn(c)?Io(c[0],c[1]):ih(c):Wy(c)}function el(c){if(!mu(c))return Xc(c);var f=[];for(var b in ci(c))$n.call(c,b)&&b!="constructor"&&f.push(b);return f}function a_(c){if(!Fi(c))return hh(c);var f=mu(c),b=[];for(var L in c)L=="constructor"&&(f||!$n.call(c,L))||b.push(L);return b}function ql(c,f){return c<f}function Cc(c,f){var b=-1,L=Fo(c)?ke(c.length):[];return pa(c,function(B,Z,ae){L[++b]=f(B,Z,ae)}),L}function ih(c){var f=ad(c);return f.length==1&&f[0][2]?si(f[0][0],f[0][1]):function(b){return b===c||Jc(b,c,f)}}function Io(c,f){return Ap(c)&&_u(f)?si(ro(c),f):function(b){var L=Z0(b,c);return L===t&&L===f?tc(b,c):ma(f,L,C|S)}}function Kl(c,f,b,L,B){c!==f&&eh(f,function(Z,ae){if(B||(B=new Yn),Fi(Z))Ep(c,f,ae,b,Kl,L,B);else{var he=L?L(il(c,ae),Z,ae+"",c,f,B):t;he===t&&(he=Z),Qa(c,ae,he)}},Bo)}function Ep(c,f,b,L,B,Z,ae){var he=il(c,b),ye=il(f,b),Ue=ae.get(ye);if(Ue){Qa(c,b,Ue);return}var $e=Z?Z(he,ye,b+"",c,f,ae):t,Ze=$e===t;if(Ze){var vt=Cn(ye),Ht=!vt&&Zl(ye),nn=!vt&&!Ht&&hd(ye);$e=ye,vt||Ht||nn?Cn(he)?$e=he:Ui(he)?$e=Gr(he):Ht?(Ze=!1,$e=d_(ye,!0)):nn?(Ze=!1,$e=tl(ye,!0)):$e=[]:bf(ye)||yu(ye)?($e=he,yu(he)?$e=W1(he):(!Fi(he)||ol(he))&&($e=nl(ye))):Ze=!1}Ze&&(ae.set(ye,$e),B($e,ye,L,Z,ae),ae.delete(ye)),Qa(c,b,$e)}function ed(c,f){var b=c.length;if(b)return f+=f<0?b:0,hs(f,b)?c[f]:t}function Lp(c,f,b){f.length?f=mi(f,function(Z){return Cn(Z)?function(ae){return Yo(ae,Z.length===1?Z[0]:Z)}:Z}):f=[Wo];var L=-1;f=mi(f,Ir(qt()));var B=Cc(c,function(Z,ae,he){var ye=mi(f,function(Ue){return Ue(Z)});return{criteria:ye,index:++L,value:Z}});return Wl(B,function(Z,ae){return Ip(Z,ae,b)})}function rh(c,f){return l_(c,f,function(b,L){return tc(c,L)})}function l_(c,f,b){for(var L=-1,B=f.length,Z={};++L<B;){var ae=f[L],he=Yo(c,ae);b(he,ae)&&yo(Z,Da(ae,c),he)}return Z}function tf(c){return function(f){return Yo(f,c)}}function no(c,f,b,L){var B=L?Hm:ts,Z=-1,ae=f.length,he=c;for(c===f&&(f=Gr(f)),b&&(he=mi(c,Ir(b)));++Z<ae;)for(var ye=0,Ue=f[Z],$e=b?b(Ue):Ue;(ye=B(he,$e,ye,L))>-1;)he!==c&&ur.call(he,ye,1),ur.call(c,ye,1);return c}function ug(c,f){for(var b=c?f.length:0,L=b-1;b--;){var B=f[b];if(b==L||B!==Z){var Z=B;hs(B)?ur.call(c,B,1):yc(c,B)}}return c}function nf(c,f){return c+ml(Hl()*(f-c+1))}function rf(c,f,b,L){for(var B=-1,Z=ir(Xa((f-c)/(b||1)),0),ae=ke(Z);Z--;)ae[L?Z:++B]=c,c+=b;return ae}function oh(c,f){var b="";if(!c||f<1||f>se)return b;do f%2&&(b+=c),f=ml(f/2),f&&(c+=c);while(f);return b}function Ln(c,f){return Eg(hf(c,f,Wo),c+"")}function td(c){return ju(nc(c))}function zo(c,f){var b=nc(c);return Ta(b,Ja(f,0,b.length))}function yo(c,f,b,L){if(!Fi(c))return c;f=Da(f,c);for(var B=-1,Z=f.length,ae=Z-1,he=c;he!=null&&++B<Z;){var ye=ro(f[B]),Ue=b;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return c;if(B!=ae){var $e=he[ye];Ue=L?L($e,ye,he):t,Ue===t&&(Ue=Fi($e)?$e:hs(f[B+1])?[]:{})}qu(he,ye,Ue),he=he[ye]}return c}var Ls=Hu?function(c,f){return Hu.set(c,f),c}:Wo,u_=Gd?function(c,f){return Gd(c,"toString",{configurable:!0,enumerable:!1,value:Q0(f),writable:!0})}:Wo;function cg(c){return Ta(nc(c))}function Kr(c,f,b){var L=-1,B=c.length;f<0&&(f=-f>B?0:B+f),b=b>B?B:b,b<0&&(b+=B),B=f>b?0:b-f>>>0,f>>>=0;for(var Z=ke(B);++L<B;)Z[L]=c[L+f];return Z}function hy(c,f){var b;return pa(c,function(L,B,Z){return b=f(L,B,Z),!b}),!!b}function $o(c,f,b){var L=0,B=c==null?L:c.length;if(typeof f=="number"&&f===f&&B<=de){for(;L<B;){var Z=L+B>>>1,ae=c[Z];ae!==null&&!Zo(ae)&&(b?ae<=f:ae<f)?L=Z+1:B=Z}return B}return sh(c,f,Wo,b)}function sh(c,f,b,L){var B=0,Z=c==null?0:c.length;if(Z===0)return 0;f=b(f);for(var ae=f!==f,he=f===null,ye=Zo(f),Ue=f===t;B<Z;){var $e=ml((B+Z)/2),Ze=b(c[$e]),vt=Ze!==t,Ht=Ze===null,nn=Ze===Ze,Dn=Zo(Ze);if(ae)var rn=L||nn;else Ue?rn=nn&&(L||vt):he?rn=nn&&vt&&(L||!Ht):ye?rn=nn&&vt&&!Ht&&(L||!Dn):Ht||Dn?rn=!1:rn=L?Ze<=f:Ze<f;rn?B=$e+1:Z=$e}return Pr(Z,_e)}function dg(c,f){for(var b=-1,L=c.length,B=0,Z=[];++b<L;){var ae=c[b],he=f?f(ae):ae;if(!b||!Is(he,ye)){var ye=he;Z[B++]=ae===0?0:ae}}return Z}function hg(c){return typeof c=="number"?c:Zo(c)?A:+c}function cr(c){if(typeof c=="string")return c;if(Cn(c))return mi(c,cr)+"";if(Zo(c))return yp?yp.call(c):"";var f=c+"";return f=="0"&&1/c==-re?"-0":f}function ko(c,f,b){var L=-1,B=zh,Z=c.length,ae=!0,he=[],ye=he;if(b)ae=!1,B=gp;else if(Z>=i){var Ue=f?null:io(c);if(Ue)return su(Ue);ae=!1,B=Ga,ye=new ea}else ye=f?[]:he;e:for(;++L<Z;){var $e=c[L],Ze=f?f($e):$e;if($e=b||$e!==0?$e:0,ae&&Ze===Ze){for(var vt=ye.length;vt--;)if(ye[vt]===Ze)continue e;f&&ye.push(Ze),he.push($e)}else B(ye,Ze,b)||(ye!==he&&ye.push(Ze),he.push($e))}return he}function yc(c,f){return f=Da(f,c),c=Sg(c,f),c==null||delete c[ro(Fr(f))]}function fg(c,f,b,L){return yo(c,f,b(Yo(c,f)),L)}function nd(c,f,b,L){for(var B=c.length,Z=L?B:-1;(L?Z--:++Z<B)&&f(c[Z],Z,c););return b?Kr(c,L?0:Z,L?Z+1:B):Kr(c,L?Z+1:0,L?B:Z)}function xp(c,f){var b=c;return b instanceof an&&(b=b.value()),pp(f,function(L,B){return B.func.apply(B.thisArg,Ka([L],B.args))},b)}function gg(c,f,b){var L=c.length;if(L<2)return L?ko(c[0]):[];for(var B=-1,Z=ke(L);++B<L;)for(var ae=c[B],he=-1;++he<L;)he!=B&&(Z[B]=Cl(Z[B]||ae,c[he],f,b));return ko(mr(Z,1),f,b)}function pg(c,f,b){for(var L=-1,B=c.length,Z=f.length,ae={};++L<B;){var he=L<Z?f[L]:t;b(ae,c[L],he)}return ae}function of(c){return Ui(c)?c:[]}function ah(c){return typeof c=="function"?c:Wo}function Da(c,f){return Cn(c)?c:Ap(c,f)?[c]:R0(ri(c))}var c_=Ln;function di(c,f,b){var L=c.length;return b=b===t?L:b,!f&&b>=L?c:Kr(c,f,b)}var sf=Vl||function(c){return Ki.clearTimeout(c)};function d_(c,f){if(f)return c.slice();var b=c.length,L=At?At(b):new c.constructor(b);return c.copy(L),L}function fu(c){var f=new c.constructor(c.byteLength);return new tt(f).set(new tt(c)),f}function Dp(c,f){var b=f?fu(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function y1(c){var f=new c.constructor(c.source,ce.exec(c));return f.lastIndex=c.lastIndex,f}function x0(c){return Rs?ci(Rs.call(c)):{}}function tl(c,f){var b=f?fu(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function h_(c,f){if(c!==f){var b=c!==t,L=c===null,B=c===c,Z=Zo(c),ae=f!==t,he=f===null,ye=f===f,Ue=Zo(f);if(!he&&!Ue&&!Z&&c>f||Z&&ae&&ye&&!he&&!Ue||L&&ae&&ye||!b&&ye||!B)return 1;if(!L&&!Z&&!Ue&&c<f||Ue&&b&&B&&!L&&!Z||he&&b&&B||!ae&&B||!ye)return-1}return 0}function Ip(c,f,b){for(var L=-1,B=c.criteria,Z=f.criteria,ae=B.length,he=b.length;++L<ae;){var ye=h_(B[L],Z[L]);if(ye){if(L>=he)return ye;var Ue=b[L];return ye*(Ue=="desc"?-1:1)}}return c.index-f.index}function mg(c,f,b,L){for(var B=-1,Z=c.length,ae=b.length,he=-1,ye=f.length,Ue=ir(Z-ae,0),$e=ke(ye+Ue),Ze=!L;++he<ye;)$e[he]=f[he];for(;++B<ae;)(Ze||B<Z)&&($e[b[B]]=c[B]);for(;Ue--;)$e[he++]=c[B++];return $e}function _g(c,f,b,L){for(var B=-1,Z=c.length,ae=-1,he=b.length,ye=-1,Ue=f.length,$e=ir(Z-he,0),Ze=ke($e+Ue),vt=!L;++B<$e;)Ze[B]=c[B];for(var Ht=B;++ye<Ue;)Ze[Ht+ye]=f[ye];for(;++ae<he;)(vt||B<Z)&&(Ze[Ht+b[ae]]=c[B++]);return Ze}function Gr(c,f){var b=-1,L=c.length;for(f||(f=ke(L));++b<L;)f[b]=c[b];return f}function kr(c,f,b,L){var B=!b;b||(b={});for(var Z=-1,ae=f.length;++Z<ae;){var he=f[Z],ye=L?L(b[he],c[he],he,b,c):t;ye===t&&(ye=c[he]),B?Do(b,he,ye):qu(b,he,ye)}return b}function id(c,f){return kr(c,dh(c),f)}function D0(c,f){return kr(c,gu(c),f)}function rd(c,f){return function(b,L){var B=Cn(b)?v0:$l,Z=f?f():{};return B(b,c,qt(L,2),Z)}}function wl(c){return Ln(function(f,b){var L=-1,B=b.length,Z=B>1?b[B-1]:t,ae=B>2?b[2]:t;for(Z=c.length>3&&typeof Z=="function"?(B--,Z):t,ae&&Di(b[0],b[1],ae)&&(Z=B<3?t:Z,B=1),f=ci(f);++L<B;){var he=b[L];he&&c(f,he,L,Z)}return f})}function f_(c,f){return function(b,L){if(b==null)return b;if(!Fo(b))return c(b,L);for(var B=b.length,Z=f?B:-1,ae=ci(b);(f?Z--:++Z<B)&&L(ae[Z],Z,ae)!==!1;);return b}}function vg(c){return function(f,b,L){for(var B=-1,Z=ci(f),ae=L(f),he=ae.length;he--;){var ye=ae[c?he:++B];if(b(Z[ye],ye,Z)===!1)break}return f}}function I0(c,f,b){var L=f&x,B=ka(c);function Z(){var ae=this&&this!==Ki&&this instanceof Z?B:c;return ae.apply(L?b:this,arguments)}return Z}function bg(c){return function(f){f=ri(f);var b=Bu(f)?Mo(f):t,L=b?b[0]:f.charAt(0),B=b?di(b,1).join(""):f.slice(1);return L[c]()+B}}function Ia(c){return function(f){return pp(Fy(Dl(f).replace(r1,"")),c,"")}}function ka(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var b=Uu(c.prototype),L=c.apply(b,f);return Fi(L)?L:b}}function fy(c,f,b){var L=ka(c);function B(){for(var Z=arguments.length,ae=ke(Z),he=Z,ye=Sl(B);he--;)ae[he]=arguments[he];var Ue=Z<3&&ae[0]!==ye&&ae[Z-1]!==ye?[]:ys(ae,ye);if(Z-=Ue.length,Z<b)return g_(c,f,Sc,B.placeholder,t,ae,Ue,t,t,b-Z);var $e=this&&this!==Ki&&this instanceof B?L:c;return _o($e,this,ae)}return B}function wc(c){return function(f,b,L){var B=ci(f);if(!Fo(f)){var Z=qt(b,3);f=wr(f),b=function(he){return Z(B[he],he,B)}}var ae=c(f,b,L);return ae>-1?B[Z?f[ae]:ae]:t}}function od(c){return Hs(function(f){var b=f.length,L=b,B=Ei.prototype.thru;for(c&&f.reverse();L--;){var Z=f[L];if(typeof Z!="function")throw new Uo(s);if(B&&!ae&&sd(Z)=="wrapper")var ae=new Ei([],!0)}for(L=ae?L:b;++L<b;){Z=f[L];var he=sd(Z),ye=he=="wrapper"?df(Z):t;ye&&pu(ye[0])&&ye[1]==(z|M|F|$)&&!ye[4].length&&ye[9]==1?ae=ae[sd(ye[0])].apply(ae,ye[3]):ae=Z.length==1&&pu(Z)?ae[he]():ae.thru(Z)}return function(){var Ue=arguments,$e=Ue[0];if(ae&&Ue.length==1&&Cn($e))return ae.plant($e).value();for(var Ze=0,vt=b?f[Ze].apply(this,Ue):$e;++Ze<b;)vt=f[Ze].call(this,vt);return vt}})}function Sc(c,f,b,L,B,Z,ae,he,ye,Ue){var $e=f&z,Ze=f&x,vt=f&T,Ht=f&(M|W),nn=f&G,Dn=vt?t:ka(c);function rn(){for(var Mn=arguments.length,Un=ke(Mn),Qo=Mn;Qo--;)Un[Qo]=arguments[Qo];if(Ht)var wo=Sl(rn),Jo=qm(Un,wo);if(L&&(Un=mg(Un,L,B,Ht)),Z&&(Un=_g(Un,Z,ae,Ht)),Mn-=Jo,Ht&&Mn<Ue){var Ji=ys(Un,wo);return g_(c,f,Sc,rn.placeholder,b,Un,Ji,he,ye,Ue-Mn)}var $s=Ze?b:this,sl=vt?$s[c]:c;return Mn=Un.length,he?Un=Tr(Un,he):nn&&Mn>1&&Un.reverse(),$e&&ye<Mn&&(Un.length=ye),this&&this!==Ki&&this instanceof rn&&(sl=Dn||ka(sl)),sl.apply($s,Un)}return rn}function af(c,f){return function(b,L){return Bs(b,c,f(L),{})}}function lf(c,f){return function(b,L){var B;if(b===t&&L===t)return f;if(b!==t&&(B=b),L!==t){if(B===t)return L;typeof b=="string"||typeof L=="string"?(b=cr(b),L=cr(L)):(b=hg(b),L=hg(L)),B=c(b,L)}return B}}function Cg(c){return Hs(function(f){return f=mi(f,Ir(qt())),Ln(function(b){var L=this;return c(f,function(B){return _o(B,L,b)})})})}function lh(c,f){f=f===t?" ":cr(f);var b=f.length;if(b<2)return b?oh(f,c):f;var L=oh(f,Xa(c/au(f)));return Bu(f)?di(Mo(L),0,c).join(""):L.slice(0,c)}function k0(c,f,b,L){var B=f&x,Z=ka(c);function ae(){for(var he=-1,ye=arguments.length,Ue=-1,$e=L.length,Ze=ke($e+ye),vt=this&&this!==Ki&&this instanceof ae?Z:c;++Ue<$e;)Ze[Ue]=L[Ue];for(;ye--;)Ze[Ue++]=arguments[++he];return _o(vt,B?b:this,Ze)}return ae}function kp(c){return function(f,b,L){return L&&typeof L!="number"&&Di(f,b,L)&&(b=L=t),f=Ra(f),b===t?(b=f,f=0):b=Ra(b),L=L===t?f<b?1:-1:Ra(L),rf(f,b,L,c)}}function uh(c){return function(f,b){return typeof f=="string"&&typeof b=="string"||(f=zi(f),b=zi(b)),c(f,b)}}function g_(c,f,b,L,B,Z,ae,he,ye,Ue){var $e=f&M,Ze=$e?ae:t,vt=$e?t:ae,Ht=$e?Z:t,nn=$e?t:Z;f|=$e?F:Q,f&=~($e?Q:F),f&k||(f&=~(x|T));var Dn=[c,f,B,Ht,Ze,nn,vt,he,ye,Ue],rn=b.apply(t,Dn);return pu(c)&&Ec(rn,Dn),rn.placeholder=L,El(rn,c,f)}function Vs(c){var f=Pi[c];return function(b,L){if(b=zi(b),L=L==null?0:Pr(yn(L),292),L&&Gh(b)){var B=(ri(b)+"e").split("e"),Z=f(B[0]+"e"+(+B[1]+L));return B=(ri(Z)+"e").split("e"),+(B[0]+"e"+(+B[1]-L))}return f(b)}}var io=vl&&1/su(new vl([,-0]))[1]==re?function(c){return new vl(c)}:tb;function Gl(c){return function(f){var b=Cr(f);return b==sn?Wu(f):b==Tt?b0(f):cy(f,c(f))}}function na(c,f,b,L,B,Z,ae,he){var ye=f&T;if(!ye&&typeof c!="function")throw new Uo(s);var Ue=L?L.length:0;if(Ue||(f&=~(F|Q),L=B=t),ae=ae===t?ae:ir(yn(ae),0),he=he===t?he:yn(he),Ue-=B?B.length:0,f&Q){var $e=L,Ze=B;L=B=t}var vt=ye?t:df(c),Ht=[c,f,b,L,B,$e,Ze,Z,ae,he];if(vt&&v_(Ht,vt),c=Ht[0],f=Ht[1],b=Ht[2],L=Ht[3],B=Ht[4],he=Ht[9]=Ht[9]===t?ye?0:c.length:ir(Ht[9]-Ue,0),!he&&f&(M|W)&&(f&=~(M|W)),!f||f==x)var nn=I0(c,f,b);else f==M||f==W?nn=fy(c,f,he):(f==F||f==(x|F))&&!B.length?nn=k0(c,f,b,L):nn=Sc.apply(t,Ht);var Dn=vt?Ls:Ec;return El(Dn(nn,Ht),c,f)}function p_(c,f,b,L){return c===t||Is(c,Ya[b])&&!$n.call(L,b)?f:c}function uf(c,f,b,L,B,Z){return Fi(c)&&Fi(f)&&(Z.set(f,c),Kl(c,f,t,uf,Z),Z.delete(f)),c}function cf(c){return bf(c)?t:c}function yg(c,f,b,L,B,Z){var ae=b&C,he=c.length,ye=f.length;if(he!=ye&&!(ae&&ye>he))return!1;var Ue=Z.get(c),$e=Z.get(f);if(Ue&&$e)return Ue==f&&$e==c;var Ze=-1,vt=!0,Ht=b&S?new ea:t;for(Z.set(c,f),Z.set(f,c);++Ze<he;){var nn=c[Ze],Dn=f[Ze];if(L)var rn=ae?L(Dn,nn,Ze,f,c,Z):L(nn,Dn,Ze,c,f,Z);if(rn!==t){if(rn)continue;vt=!1;break}if(Ht){if(!mp(f,function(Mn,Un){if(!Ga(Ht,Un)&&(nn===Mn||B(nn,Mn,b,L,Z)))return Ht.push(Un)})){vt=!1;break}}else if(!(nn===Dn||B(nn,Dn,b,L,Z))){vt=!1;break}}return Z.delete(c),Z.delete(f),vt}function T0(c,f,b,L,B,Z,ae){switch(b){case U:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case oe:return!(c.byteLength!=f.byteLength||!Z(new tt(c),new tt(f)));case Rt:case lt:case Pt:return Is(+c,+f);case zt:return c.name==f.name&&c.message==f.message;case Bt:case mt:return c==f+"";case sn:var he=Wu;case Tt:var ye=L&C;if(he||(he=su),c.size!=f.size&&!ye)return!1;var Ue=ae.get(c);if(Ue)return Ue==f;L|=S,ae.set(c,f);var $e=yg(he(c),he(f),L,B,Z,ae);return ae.delete(c),$e;case Qt:if(Rs)return Rs.call(c)==Rs.call(f)}return!1}function N0(c,f,b,L,B,Z){var ae=b&C,he=Zu(c),ye=he.length,Ue=Zu(f),$e=Ue.length;if(ye!=$e&&!ae)return!1;for(var Ze=ye;Ze--;){var vt=he[Ze];if(!(ae?vt in f:$n.call(f,vt)))return!1}var Ht=Z.get(c),nn=Z.get(f);if(Ht&&nn)return Ht==f&&nn==c;var Dn=!0;Z.set(c,f),Z.set(f,c);for(var rn=ae;++Ze<ye;){vt=he[Ze];var Mn=c[vt],Un=f[vt];if(L)var Qo=ae?L(Un,Mn,vt,f,c,Z):L(Mn,Un,vt,c,f,Z);if(!(Qo===t?Mn===Un||B(Mn,Un,b,L,Z):Qo)){Dn=!1;break}rn||(rn=vt=="constructor")}if(Dn&&!rn){var wo=c.constructor,Jo=f.constructor;wo!=Jo&&"constructor"in c&&"constructor"in f&&!(typeof wo=="function"&&wo instanceof wo&&typeof Jo=="function"&&Jo instanceof Jo)&&(Dn=!1)}return Z.delete(c),Z.delete(f),Dn}function Hs(c){return Eg(hf(c,t,gh),c+"")}function Zu(c){return th(c,wr,dh)}function Xu(c){return th(c,Bo,gu)}var df=Hu?function(c){return Hu.get(c)}:tb;function sd(c){for(var f=c.name+"",b=fa[f],L=$n.call(fa,f)?b.length:0;L--;){var B=b[L],Z=B.func;if(Z==null||Z==c)return B.name}return f}function Sl(c){var f=$n.call(q,"placeholder")?q:c;return f.placeholder}function qt(){var c=q.iteratee||J0;return c=c===J0?ef:c,arguments.length?c(arguments[0],arguments[1]):c}function ch(c,f){var b=c.__data__;return Tn(f)?b[typeof f=="string"?"string":"hash"]:b.map}function ad(c){for(var f=wr(c),b=f.length;b--;){var L=f[b],B=c[L];f[b]=[L,B,_u(B)]}return f}function _a(c,f){var b=Jf(c,f);return s_(b)?b:t}function Tp(c){var f=$n.call(c,Za),b=c[Za];try{c[Za]=t;var L=!0}catch{}var B=qd.call(c);return L&&(f?c[Za]=b:delete c[Za]),B}var dh=Zc?function(c){return c==null?[]:(c=ci(c),qa(Zc(c),function(f){return vi.call(c,f)}))}:$_,gu=Zc?function(c){for(var f=[];c;)Ka(f,dh(c)),c=gt(c);return f}:$_,Cr=$r;(Yd&&Cr(new Yd(new ArrayBuffer(1)))!=U||_l&&Cr(new _l)!=sn||Zd&&Cr(Zd.resolve())!=un||vl&&Cr(new vl)!=Tt||uu&&Cr(new uu)!=We)&&(Cr=function(c){var f=$r(c),b=f==xn?c.constructor:t,L=b?oo(b):"";if(L)switch(L){case ig:return U;case Xd:return sn;case p1:return un;case rg:return Tt;case Ul:return We}return f});function A0(c,f,b){for(var L=-1,B=b.length;++L<B;){var Z=b[L],ae=Z.size;switch(Z.type){case"drop":c+=ae;break;case"dropRight":f-=ae;break;case"take":f=Pr(f,c+ae);break;case"takeRight":c=ir(c,f-ae);break}}return{start:c,end:f}}function Np(c){var f=c.match(pt);return f?f[1].split(at):[]}function m_(c,f,b){f=Da(f,c);for(var L=-1,B=f.length,Z=!1;++L<B;){var ae=ro(f[L]);if(!(Z=c!=null&&b(c,ae)))break;c=c[ae]}return Z||++L!=B?Z:(B=c==null?0:c.length,!!B&&Bp(B)&&hs(ae,B)&&(Cn(c)||yu(c)))}function O0(c){var f=c.length,b=new c.constructor(f);return f&&typeof c[0]=="string"&&$n.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function nl(c){return typeof c.constructor=="function"&&!mu(c)?Uu(gt(c)):{}}function va(c,f,b){var L=c.constructor;switch(f){case oe:return fu(c);case Rt:case lt:return new L(+c);case U:return Dp(c,b);case X:case we:case Te:case qe:case ze:case bt:case bn:case En:case nt:return tl(c,b);case sn:return new L;case Pt:case mt:return new L(c);case Bt:return y1(c);case Tt:return new L;case Qt:return x0(c)}}function w1(c,f){var b=f.length;if(!b)return c;var L=b-1;return f[L]=(b>1?"& ":"")+f[L],f=f.join(b>2?", ":" "),c.replace(Oe,`{
/* [wrapped with `+f+`] */
`)}function gy(c){return Cn(c)||yu(c)||!!(us&&c&&c[us])}function hs(c,f){var b=typeof c;return f=f??se,!!f&&(b=="number"||b!="symbol"&&ht.test(c))&&c>-1&&c%1==0&&c<f}function Di(c,f,b){if(!Fi(b))return!1;var L=typeof f;return(L=="number"?Fo(b)&&hs(f,b.length):L=="string"&&f in b)?Is(b[f],c):!1}function Ap(c,f){if(Cn(c))return!1;var b=typeof c;return b=="number"||b=="symbol"||b=="boolean"||c==null||Zo(c)?!0:Ye.test(c)||!et.test(c)||f!=null&&c in ci(f)}function Tn(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function pu(c){var f=sd(c),b=q[f];if(typeof b!="function"||!(f in an.prototype))return!1;if(c===b)return!0;var L=df(b);return!!L&&c===L[0]}function Op(c){return!!ng&&ng in c}var __=Yc?ol:nb;function mu(c){var f=c&&c.constructor,b=typeof f=="function"&&f.prototype||Ya;return c===b}function _u(c){return c===c&&!Fi(c)}function si(c,f){return function(b){return b==null?!1:b[c]===f&&(f!==t||c in ci(b))}}function wg(c){var f=Qe(c,function(L){return b.size===u&&b.clear(),L}),b=f.cache;return f}function v_(c,f){var b=c[1],L=f[1],B=b|L,Z=B<(x|T|z),ae=L==z&&b==M||L==z&&b==$&&c[7].length<=f[8]||L==(z|$)&&f[7].length<=f[8]&&b==M;if(!(Z||ae))return c;L&x&&(c[2]=f[2],B|=b&x?0:k);var he=f[3];if(he){var ye=c[3];c[3]=ye?mg(ye,he,f[4]):he,c[4]=ye?ys(c[3],d):f[4]}return he=f[5],he&&(ye=c[5],c[5]=ye?_g(ye,he,f[6]):he,c[6]=ye?ys(c[5],d):f[6]),he=f[7],he&&(c[7]=he),L&z&&(c[8]=c[8]==null?f[8]:Pr(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=B,c}function hh(c){var f=[];if(c!=null)for(var b in ci(c))f.push(b);return f}function S1(c){return qd.call(c)}function hf(c,f,b){return f=ir(f===t?c.length-1:f,0),function(){for(var L=arguments,B=-1,Z=ir(L.length-f,0),ae=ke(Z);++B<Z;)ae[B]=L[f+B];B=-1;for(var he=ke(f+1);++B<f;)he[B]=L[B];return he[f]=b(ae),_o(c,this,he)}}function Sg(c,f){return f.length<2?c:Yo(c,Kr(f,0,-1))}function Tr(c,f){for(var b=c.length,L=Pr(f.length,b),B=Gr(c);L--;){var Z=f[L];c[L]=hs(Z,b)?B[Z]:t}return c}function il(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var Ec=b_(Ls),Qu=S0||function(c,f){return Ki.setTimeout(c,f)},Eg=b_(u_);function El(c,f,b){var L=f+"";return Eg(c,w1(L,C_(Np(L),b)))}function b_(c){var f=0,b=0;return function(){var L=dy(),B=O-(L-b);if(b=L,B>0){if(++f>=D)return arguments[0]}else f=0;return c.apply(t,arguments)}}function Ta(c,f){var b=-1,L=c.length,B=L-1;for(f=f===t?L:f;++b<f;){var Z=nf(b,B),ae=c[Z];c[Z]=c[b],c[b]=ae}return c.length=f,c}var R0=wg(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(it,function(b,L,B,Z){f.push(B?Z.replace(R,"$1"):L||b)}),f});function ro(c){if(typeof c=="string"||Zo(c))return c;var f=c+"";return f=="0"&&1/c==-re?"-0":f}function oo(c){if(c!=null){try{return jd.call(c)}catch{}try{return c+""}catch{}}return""}function C_(c,f){return vo(Me,function(b){var L="_."+b[0];f&b[1]&&!zh(c,L)&&c.push(L)}),c.sort()}function y_(c){if(c instanceof an)return c.clone();var f=new Ei(c.__wrapped__,c.__chain__);return f.__actions__=Gr(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function M0(c,f,b){(b?Di(c,f,b):f===t)?f=1:f=ir(yn(f),0);var L=c==null?0:c.length;if(!L||f<1)return[];for(var B=0,Z=0,ae=ke(Xa(L/f));B<L;)ae[Z++]=Kr(c,B,B+=f);return ae}function w_(c){for(var f=-1,b=c==null?0:c.length,L=0,B=[];++f<b;){var Z=c[f];Z&&(B[L++]=Z)}return B}function P0(){var c=arguments.length;if(!c)return[];for(var f=ke(c-1),b=arguments[0],L=c;L--;)f[L-1]=arguments[L];return Ka(Cn(b)?Gr(b):[b],mr(f,1))}var Na=Ln(function(c,f){return Ui(c)?Cl(c,mr(f,1,Ui,!0)):[]}),yr=Ln(function(c,f){var b=Fr(f);return Ui(b)&&(b=t),Ui(c)?Cl(c,mr(f,1,Ui,!0),qt(b,2)):[]}),Us=Ln(function(c,f){var b=Fr(f);return Ui(b)&&(b=t),Ui(c)?Cl(c,mr(f,1,Ui,!0),t,b):[]});function xs(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),Kr(c,f<0?0:f,L)):[]}function ba(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),f=L-f,Kr(c,0,f<0?0:f)):[]}function Yl(c,f){return c&&c.length?nd(c,qt(f,3),!0,!0):[]}function Lg(c,f){return c&&c.length?nd(c,qt(f,3),!0):[]}function Ds(c,f,b,L){var B=c==null?0:c.length;return B?(b&&typeof b!="number"&&Di(c,f,b)&&(b=0,L=B),n_(c,f,b,L)):[]}function fh(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=b==null?0:yn(b);return B<0&&(B=ir(L+B,0)),Gc(c,qt(f,3),B)}function ld(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=L-1;return b!==t&&(B=yn(b),B=b<0?ir(L+B,0):Pr(B,L-1)),Gc(c,qt(f,3),B,!0)}function gh(c){var f=c==null?0:c.length;return f?mr(c,1):[]}function S_(c){var f=c==null?0:c.length;return f?mr(c,re):[]}function ud(c,f){var b=c==null?0:c.length;return b?(f=f===t?1:yn(f),mr(c,f)):[]}function Aa(c){for(var f=-1,b=c==null?0:c.length,L={};++f<b;){var B=c[f];L[B[0]]=B[1]}return L}function xg(c){return c&&c.length?c[0]:t}function ff(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=b==null?0:yn(b);return B<0&&(B=ir(L+B,0)),ts(c,f,B)}function vu(c){var f=c==null?0:c.length;return f?Kr(c,0,-1):[]}var Rp=Ln(function(c){var f=mi(c,of);return f.length&&f[0]===c[0]?Fs(f):[]}),bu=Ln(function(c){var f=Fr(c),b=mi(c,of);return f===Fr(b)?f=t:b.pop(),b.length&&b[0]===c[0]?Fs(b,qt(f,2)):[]}),Ll=Ln(function(c){var f=Fr(c),b=mi(c,of);return f=typeof f=="function"?f:t,f&&b.pop(),b.length&&b[0]===c[0]?Fs(b,t,f):[]});function E_(c,f){return c==null?"":bp.call(c,f)}function Fr(c){var f=c==null?0:c.length;return f?c[f-1]:t}function L_(c,f,b){var L=c==null?0:c.length;if(!L)return-1;var B=L;return b!==t&&(B=yn(b),B=B<0?ir(L+B,0):Pr(B,L-1)),f===f?d1(c,f,B):Gc(c,Um,B,!0)}function Mp(c,f){return c&&c.length?ed(c,yn(f)):t}var F0=Ln(Dg);function Dg(c,f){return c&&c.length&&f&&f.length?no(c,f):c}function x_(c,f,b){return c&&c.length&&f&&f.length?no(c,f,qt(b,2)):c}function rl(c,f,b){return c&&c.length&&f&&f.length?no(c,f,t,b):c}var ph=Hs(function(c,f){var b=c==null?0:c.length,L=og(c,f);return ug(c,mi(f,function(B){return hs(B,b)?+B:B}).sort(h_)),L});function Ju(c,f){var b=[];if(!(c&&c.length))return b;var L=-1,B=[],Z=c.length;for(f=qt(f,3);++L<Z;){var ae=c[L];f(ae,L,c)&&(b.push(ae),B.push(L))}return ug(c,B),b}function ia(c){return c==null?c:Yh.call(c)}function E1(c,f,b){var L=c==null?0:c.length;return L?(b&&typeof b!="number"&&Di(c,f,b)?(f=0,b=L):(f=f==null?0:yn(f),b=b===t?L:yn(b)),Kr(c,f,b)):[]}function B0(c,f){return $o(c,f)}function D_(c,f,b){return sh(c,f,qt(b,2))}function L1(c,f){var b=c==null?0:c.length;if(b){var L=$o(c,f);if(L<b&&Is(c[L],f))return L}return-1}function cd(c,f){return $o(c,f,!0)}function x1(c,f,b){return sh(c,f,qt(b,2),!0)}function W0(c,f){var b=c==null?0:c.length;if(b){var L=$o(c,f,!0)-1;if(Is(c[L],f))return L}return-1}function gf(c){return c&&c.length?dg(c):[]}function I_(c,f){return c&&c.length?dg(c,qt(f,2)):[]}function pf(c){var f=c==null?0:c.length;return f?Kr(c,1,f):[]}function D1(c,f,b){return c&&c.length?(f=b||f===t?1:yn(f),Kr(c,0,f<0?0:f)):[]}function I1(c,f,b){var L=c==null?0:c.length;return L?(f=b||f===t?1:yn(f),f=L-f,Kr(c,f<0?0:f,L)):[]}function V0(c,f){return c&&c.length?nd(c,qt(f,3),!1,!0):[]}function k_(c,f){return c&&c.length?nd(c,qt(f,3)):[]}var py=Ln(function(c){return ko(mr(c,1,Ui,!0))}),Cu=Ln(function(c){var f=Fr(c);return Ui(f)&&(f=t),ko(mr(c,1,Ui,!0),qt(f,2))}),k1=Ln(function(c){var f=Fr(c);return f=typeof f=="function"?f:t,ko(mr(c,1,Ui,!0),t,f)});function T1(c){return c&&c.length?ko(c):[]}function mf(c,f){return c&&c.length?ko(c,qt(f,2)):[]}function N1(c,f){return f=typeof f=="function"?f:t,c&&c.length?ko(c,t,f):[]}function Lc(c){if(!(c&&c.length))return[];var f=0;return c=qa(c,function(b){if(Ui(b))return f=ir(b.length,f),!0}),La(f,function(b){return mi(c,Qf(b))})}function T_(c,f){if(!(c&&c.length))return[];var b=Lc(c);return f==null?b:mi(b,function(L){return _o(f,t,L)})}var ns=Ln(function(c,f){return Ui(c)?Cl(c,f):[]}),my=Ln(function(c){return gg(qa(c,Ui))}),N_=Ln(function(c){var f=Fr(c);return Ui(f)&&(f=t),gg(qa(c,Ui),qt(f,2))}),_y=Ln(function(c){var f=Fr(c);return f=typeof f=="function"?f:t,gg(qa(c,Ui),t,f)}),vy=Ln(Lc);function A1(c,f){return pg(c||[],f||[],qu)}function O1(c,f){return pg(c||[],f||[],yo)}var by=Ln(function(c){var f=c.length,b=f>1?c[f-1]:t;return b=typeof b=="function"?(c.pop(),b):t,T_(c,b)});function xl(c){var f=q(c);return f.__chain__=!0,f}function H0(c,f){return f(c),c}function _f(c,f){return f(c)}var mh=Hs(function(c){var f=c.length,b=f?c[0]:0,L=this.__wrapped__,B=function(Z){return og(Z,c)};return f>1||this.__actions__.length||!(L instanceof an)||!hs(b)?this.thru(B):(L=L.slice(b,+b+(f?1:0)),L.__actions__.push({func:_f,args:[B],thisArg:t}),new Ei(L,this.__chain__).thru(function(Z){return f&&!Z.length&&Z.push(t),Z}))});function A_(){return xl(this)}function vf(){return new Ei(this.value(),this.__chain__)}function O_(){this.__values__===t&&(this.__values__=fd(this.value()));var c=this.__index__>=this.__values__.length,f=c?t:this.__values__[this.__index__++];return{done:c,value:f}}function U0(){return this}function z0(c){for(var f,b=this;b instanceof zl;){var L=y_(b);L.__index__=0,L.__values__=t,f?B.__wrapped__=L:f=L;var B=L;b=b.__wrapped__}return B.__wrapped__=c,f}function Cy(){var c=this.__wrapped__;if(c instanceof an){var f=c;return this.__actions__.length&&(f=new an(this)),f=f.reverse(),f.__actions__.push({func:_f,args:[ia],thisArg:t}),new Ei(f,this.__chain__)}return this.thru(ia)}function $0(){return xp(this.__wrapped__,this.__actions__)}var yy=rd(function(c,f,b){$n.call(c,b)?++c[b]:Do(c,b,1)});function R1(c,f,b){var L=Cn(c)?qr:Gu;return b&&Di(c,f,b)&&(f=t),L(c,qt(f,3))}function M1(c,f){var b=Cn(c)?qa:Jd;return b(c,qt(f,3))}var R_=wc(fh),Ig=wc(ld);function j0(c,f){return mr(_h(c,f),1)}function q0(c,f){return mr(_h(c,f),re)}function wy(c,f,b){return b=b===t?1:yn(b),mr(_h(c,f),b)}function M_(c,f){var b=Cn(c)?vo:pa;return b(c,qt(f,3))}function Pp(c,f){var b=Cn(c)?eo:jl;return b(c,qt(f,3))}var P_=rd(function(c,f,b){$n.call(c,b)?c[b].push(f):Do(c,b,[f])});function K0(c,f,b,L){c=Fo(c)?c:nc(c),b=b&&!L?yn(b):0;var B=c.length;return b<0&&(b=ir(B+b,0)),wu(c)?b<=B&&c.indexOf(f,b)>-1:!!B&&ts(c,f,b)>-1}var F_=Ln(function(c,f,b){var L=-1,B=typeof f=="function",Z=Fo(c)?ke(c.length):[];return pa(c,function(ae){Z[++L]=B?_o(f,ae,b):hu(ae,f,b)}),Z}),P1=rd(function(c,f,b){Do(c,b,f)});function _h(c,f){var b=Cn(c)?mi:Cc;return b(c,qt(f,3))}function B_(c,f,b,L){return c==null?[]:(Cn(f)||(f=f==null?[]:[f]),b=L?t:b,Cn(b)||(b=b==null?[]:[b]),Lp(c,f,b))}var W_=rd(function(c,f,b){c[b?0:1].push(f)},function(){return[[],[]]});function Fp(c,f,b){var L=Cn(c)?pp:$m,B=arguments.length<3;return L(c,qt(f,4),b,B,pa)}function Sy(c,f,b){var L=Cn(c)?a1:$m,B=arguments.length<3;return L(c,qt(f,4),b,B,jl)}function V_(c,f){var b=Cn(c)?qa:Jd;return b(c,ut(qt(f,3)))}function g(c){var f=Cn(c)?ju:td;return f(c)}function m(c,f,b){(b?Di(c,f,b):f===t)?f=1:f=yn(f);var L=Cn(c)?Qh:zo;return L(c,f)}function w(c){var f=Cn(c)?b1:cg;return f(c)}function N(c){if(c==null)return 0;if(Fo(c))return wu(c)?au(c):c.length;var f=Cr(c);return f==sn||f==Tt?c.size:el(c).length}function H(c,f,b){var L=Cn(c)?mp:hy;return b&&Di(c,f,b)&&(f=t),L(c,qt(f,3))}var J=Ln(function(c,f){if(c==null)return[];var b=f.length;return b>1&&Di(c,f[0],f[1])?f=[]:b>2&&Di(f[0],f[1],f[2])&&(f=[f[0]]),Lp(c,mr(f,1),[])}),ge=to||function(){return Ki.Date.now()};function Re(c,f){if(typeof f!="function")throw new Uo(s);return c=yn(c),function(){if(--c<1)return f.apply(this,arguments)}}function Ke(c,f,b){return f=b?t:f,f=c&&f==null?c.length:f,na(c,z,t,t,t,t,f)}function _t(c,f){var b;if(typeof f!="function")throw new Uo(s);return c=yn(c),function(){return--c>0&&(b=f.apply(this,arguments)),c<=1&&(f=t),b}}var Yt=Ln(function(c,f,b){var L=x;if(b.length){var B=ys(b,Sl(Yt));L|=F}return na(c,L,f,b,B)}),en=Ln(function(c,f,b){var L=x|T;if(b.length){var B=ys(b,Sl(en));L|=F}return na(f,L,c,b,B)});function Zt(c,f,b){f=b?t:f;var L=na(c,M,t,t,t,t,t,f);return L.placeholder=Zt.placeholder,L}function Nn(c,f,b){f=b?t:f;var L=na(c,W,t,t,t,t,t,f);return L.placeholder=Nn.placeholder,L}function Hn(c,f,b){var L,B,Z,ae,he,ye,Ue=0,$e=!1,Ze=!1,vt=!0;if(typeof c!="function")throw new Uo(s);f=zi(f)||0,Fi(b)&&($e=!!b.leading,Ze="maxWait"in b,Z=Ze?ir(zi(b.maxWait)||0,f):Z,vt="trailing"in b?!!b.trailing:vt);function Ht(Ji){var $s=L,sl=B;return L=B=t,Ue=Ji,ae=c.apply(sl,$s),ae}function nn(Ji){return Ue=Ji,he=Qu(Mn,f),$e?Ht(Ji):ae}function Dn(Ji){var $s=Ji-ye,sl=Ji-Ue,v=f-$s;return Ze?Pr(v,Z-sl):v}function rn(Ji){var $s=Ji-ye,sl=Ji-Ue;return ye===t||$s>=f||$s<0||Ze&&sl>=Z}function Mn(){var Ji=ge();if(rn(Ji))return Un(Ji);he=Qu(Mn,Dn(Ji))}function Un(Ji){return he=t,vt&&L?Ht(Ji):(L=B=t,ae)}function Qo(){he!==t&&sf(he),Ue=0,L=ye=B=he=t}function wo(){return he===t?ae:Un(ge())}function Jo(){var Ji=ge(),$s=rn(Ji);if(L=arguments,B=this,ye=Ji,$s){if(he===t)return nn(ye);if(Ze)return sf(he),he=Qu(Mn,f),Ht(ye)}return he===t&&(he=Qu(Mn,f)),ae}return Jo.cancel=Qo,Jo.flush=wo,Jo}var Gn=Ln(function(c,f){return _c(c,1,f)}),fs=Ln(function(c,f,b){return _c(c,zi(f)||0,b)});function ct(c){return na(c,G)}function Qe(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new Uo(s);var b=function(){var L=arguments,B=f?f.apply(this,L):L[0],Z=b.cache;if(Z.has(B))return Z.get(B);var ae=c.apply(this,L);return b.cache=Z.set(B,ae)||Z,ae};return b.cache=new(Qe.Cache||Ss),b}Qe.Cache=Ss;function ut(c){if(typeof c!="function")throw new Uo(s);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function cn(c){return _t(2,c)}var Zn=c_(function(c,f){f=f.length==1&&Cn(f[0])?mi(f[0],Ir(qt())):mi(mr(f,1),Ir(qt()));var b=f.length;return Ln(function(L){for(var B=-1,Z=Pr(L.length,b);++B<Z;)L[B]=f[B].call(this,L[B]);return _o(c,this,L)})}),ai=Ln(function(c,f){var b=ys(f,Sl(ai));return na(c,F,t,f,b)}),hi=Ln(function(c,f){var b=ys(f,Sl(hi));return na(c,Q,t,f,b)}),yi=Hs(function(c,f){return na(c,$,t,t,t,f)});function ra(c,f){if(typeof c!="function")throw new Uo(s);return f=f===t?f:yn(f),Ln(c,f)}function Nr(c,f){if(typeof c!="function")throw new Uo(s);return f=f==null?0:ir(yn(f),0),Ln(function(b){var L=b[f],B=di(b,0,f);return L&&Ka(B,L),_o(c,this,B)})}function vh(c,f,b){var L=!0,B=!0;if(typeof c!="function")throw new Uo(s);return Fi(b)&&(L="leading"in b?!!b.leading:L,B="trailing"in b?!!b.trailing:B),Hn(c,f,{leading:L,maxWait:f,trailing:B})}function Ey(c){return Ke(c,1)}function ED(c,f){return ai(ah(f),c)}function LD(){if(!arguments.length)return[];var c=arguments[0];return Cn(c)?c:[c]}function F1(c){return Po(c,_)}function xD(c,f){return f=typeof f=="function"?f:t,Po(c,_,f)}function mE(c){return Po(c,h|_)}function _E(c,f){return f=typeof f=="function"?f:t,Po(c,h|_,f)}function Ly(c,f){return f==null||sg(c,f,wr(f))}function Is(c,f){return c===f||c!==c&&f!==f}var vE=uh(yl),bE=uh(function(c,f){return c>=f}),yu=wp(function(){return arguments}())?wp:function(c){return Gi(c)&&$n.call(c,"callee")&&!vi.call(c,"callee")},Cn=ke.isArray,DD=Bm?Ir(Bm):Sp;function Fo(c){return c!=null&&Bp(c.length)&&!ol(c)}function Ui(c){return Gi(c)&&Fo(c)}function B1(c){return c===!0||c===!1||Gi(c)&&$r(c)==Rt}var Zl=Mr||nb,ID=ja?Ir(ja):lg;function xy(c){return Gi(c)&&c.nodeType===1&&!bf(c)}function CE(c){if(c==null)return!0;if(Fo(c)&&(Cn(c)||typeof c=="string"||typeof c.splice=="function"||Zl(c)||hd(c)||yu(c)))return!c.length;var f=Cr(c);if(f==sn||f==Tt)return!c.size;if(mu(c))return!el(c).length;for(var b in c)if($n.call(c,b))return!1;return!0}function kD(c,f){return ma(c,f)}function TD(c,f,b){b=typeof b=="function"?b:t;var L=b?b(c,f):t;return L===t?ma(c,f,t,b):!!L}function G0(c){if(!Gi(c))return!1;var f=$r(c);return f==zt||f==xt||typeof c.message=="string"&&typeof c.name=="string"&&!bf(c)}function ND(c){return typeof c=="number"&&Gh(c)}function ol(c){if(!Fi(c))return!1;var f=$r(c);return f==wt||f==dn||f==Dt||f==Ft}function Dy(c){return typeof c=="number"&&c==yn(c)}function Bp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=se}function Fi(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function Gi(c){return c!=null&&typeof c=="object"}var Iy=$d?Ir($d):o_;function AD(c,f){return c===f||Jc(c,f,ad(f))}function OD(c,f,b){return b=typeof b=="function"?b:t,Jc(c,f,ad(f),b)}function dd(c){return Bi(c)&&c!=+c}function RD(c){if(__(c))throw new hn(o);return s_(c)}function MD(c){return c===null}function Wp(c){return c==null}function Bi(c){return typeof c=="number"||Gi(c)&&$r(c)==Pt}function bf(c){if(!Gi(c)||$r(c)!=xn)return!1;var f=gt(c);if(f===null)return!0;var b=$n.call(f,"constructor")&&f.constructor;return typeof b=="function"&&b instanceof b&&jd.call(b)==Zm}var Oa=Hh?Ir(Hh):L0;function zs(c){return Dy(c)&&c>=-se&&c<=se}var ky=Uh?Ir(Uh):Ws;function wu(c){return typeof c=="string"||!Cn(c)&&Gi(c)&&$r(c)==mt}function Zo(c){return typeof c=="symbol"||Gi(c)&&$r(c)==Qt}var hd=_0?Ir(_0):Jh;function PD(c){return c===t}function FD(c){return Gi(c)&&Cr(c)==We}function BD(c){return Gi(c)&&$r(c)==dt}var Ty=uh(ql),WD=uh(function(c,f){return c<=f});function fd(c){if(!c)return[];if(Fo(c))return wu(c)?Mo(c):Gr(c);if(Xi&&c[Xi])return Gm(c[Xi]());var f=Cr(c),b=f==sn?Wu:f==Tt?su:nc;return b(c)}function Ra(c){if(!c)return c===0?c:0;if(c=zi(c),c===re||c===-re){var f=c<0?-1:1;return f*ie}return c===c?c:0}function yn(c){var f=Ra(c),b=f%1;return f===f?b?f-b:f:0}function Xo(c){return c?Ja(yn(c),0,te):0}function zi(c){if(typeof c=="number")return c;if(Zo(c))return A;if(Fi(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Fi(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=jm(c);var b=Ne.test(c);return b||Je.test(c)?fp(c.slice(2),b?2:8):pe.test(c)?A:+c}function W1(c){return kr(c,Bo(c))}function VD(c){return c?Ja(yn(c),-se,se):c===0?c:0}function ri(c){return c==null?"":cr(c)}var HD=wl(function(c,f){if(mu(f)||Fo(f)){kr(f,wr(f),c);return}for(var b in f)$n.call(f,b)&&qu(c,b,f[b])}),Ny=wl(function(c,f){kr(f,Bo(f),c)}),Vp=wl(function(c,f,b,L){kr(f,Bo(f),c,L)}),UD=wl(function(c,f,b,L){kr(f,wr(f),c,L)}),yE=Hs(og);function Y0(c,f){var b=Uu(c);return f==null?b:xo(b,f)}var Ay=Ln(function(c,f){c=ci(c);var b=-1,L=f.length,B=L>2?f[2]:t;for(B&&Di(f[0],f[1],B)&&(L=1);++b<L;)for(var Z=f[b],ae=Bo(Z),he=-1,ye=ae.length;++he<ye;){var Ue=ae[he],$e=c[Ue];($e===t||Is($e,Ya[Ue])&&!$n.call(c,Ue))&&(c[Ue]=Z[Ue])}return c}),zD=Ln(function(c){return c.push(t,uf),_o(U_,t,c)});function wE(c,f){return Vm(c,qt(f,3),ds)}function V1(c,f){return Vm(c,qt(f,3),bc)}function ec(c,f){return c==null?c:eh(c,qt(f,3),Bo)}function H_(c,f){return c==null?c:ag(c,qt(f,3),Bo)}function $D(c,f){return c&&ds(c,qt(f,3))}function jD(c,f){return c&&bc(c,qt(f,3))}function qD(c){return c==null?[]:Es(c,wr(c))}function KD(c){return c==null?[]:Es(c,Bo(c))}function Z0(c,f,b){var L=c==null?t:Yo(c,f);return L===t?b:L}function SE(c,f){return c!=null&&m_(c,f,nh)}function tc(c,f){return c!=null&&m_(c,f,Yu)}var Qi=af(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=qd.call(f)),c[f]=b},Q0(Wo)),EE=af(function(c,f,b){f!=null&&typeof f.toString!="function"&&(f=qd.call(f)),$n.call(c,f)?c[f].push(b):c[f]=[b]},qt),xc=Ln(hu);function wr(c){return Fo(c)?$u(c):el(c)}function Bo(c){return Fo(c)?$u(c,!0):a_(c)}function so(c,f){var b={};return f=qt(f,3),ds(c,function(L,B,Z){Do(b,f(L,B,Z),L)}),b}function GD(c,f){var b={};return f=qt(f,3),ds(c,function(L,B,Z){Do(b,B,f(L,B,Z))}),b}var LE=wl(function(c,f,b){Kl(c,f,b)}),U_=wl(function(c,f,b,L){Kl(c,f,b,L)}),YD=Hs(function(c,f){var b={};if(c==null)return b;var L=!1;f=mi(f,function(Z){return Z=Da(Z,c),L||(L=Z.length>1),Z}),kr(c,Xu(c),b),L&&(b=Po(b,h|p|_,cf));for(var B=f.length;B--;)yc(b,f[B]);return b});function ZD(c,f){return Oy(c,ut(qt(f)))}var XD=Hs(function(c,f){return c==null?{}:rh(c,f)});function Oy(c,f){if(c==null)return{};var b=mi(Xu(c),function(L){return[L]});return f=qt(f),l_(c,b,function(L,B){return f(L,B[0])})}function QD(c,f,b){f=Da(f,c);var L=-1,B=f.length;for(B||(B=1,c=t);++L<B;){var Z=c==null?t:c[ro(f[L])];Z===t&&(L=B,Z=b),c=ol(Z)?Z.call(c):Z}return c}function JD(c,f,b){return c==null?c:yo(c,f,b)}function eI(c,f,b,L){return L=typeof L=="function"?L:t,c==null?c:yo(c,f,b,L)}var Ry=Gl(wr),My=Gl(Bo);function tI(c,f,b){var L=Cn(c),B=L||Zl(c)||hd(c);if(f=qt(f,4),b==null){var Z=c&&c.constructor;B?b=L?new Z:[]:Fi(c)?b=ol(Z)?Uu(gt(c)):{}:b={}}return(B?vo:ds)(c,function(ae,he,ye){return f(b,ae,he,ye)}),b}function nI(c,f){return c==null?!0:yc(c,f)}function iI(c,f,b){return c==null?c:fg(c,f,ah(b))}function rI(c,f,b,L){return L=typeof L=="function"?L:t,c==null?c:fg(c,f,ah(b),L)}function nc(c){return c==null?[]:pc(c,wr(c))}function oI(c){return c==null?[]:pc(c,Bo(c))}function Py(c,f,b){return b===t&&(b=f,f=t),b!==t&&(b=zi(b),b=b===b?b:0),f!==t&&(f=zi(f),f=f===f?f:0),Ja(zi(c),f,b)}function sI(c,f,b){return f=Ra(f),b===t?(b=f,f=0):b=Ra(b),c=zi(c),i_(c,f,b)}function aI(c,f,b){if(b&&typeof b!="boolean"&&Di(c,f,b)&&(f=b=t),b===t&&(typeof f=="boolean"?(b=f,f=t):typeof c=="boolean"&&(b=c,c=t)),c===t&&f===t?(c=0,f=1):(c=Ra(c),f===t?(f=c,c=0):f=Ra(f)),c>f){var L=c;c=f,f=L}if(b||c%1||f%1){var B=Hl();return Pr(c+B*(f-c+p0("1e-"+((B+"").length-1))),f)}return nf(c,f)}var lI=Ia(function(c,f,b){return f=f.toLowerCase(),c+(b?oa(f):f)});function oa(c){return X0(ri(c).toLowerCase())}function Dl(c){return c=ri(c),c&&c.replace(It,l1).replace(dp,"")}function uI(c,f,b){c=ri(c),f=cr(f);var L=c.length;b=b===t?L:Ja(yn(b),0,L);var B=b;return b-=f.length,b>=0&&c.slice(b,B)==f}function cI(c){return c=ri(c),c&&ru.test(c)?c.replace(Vn,Km):c}function dI(c){return c=ri(c),c&&Ce.test(c)?c.replace(ve,"\\$&"):c}var xE=Ia(function(c,f,b){return c+(b?"-":"")+f.toLowerCase()}),hI=Ia(function(c,f,b){return c+(b?" ":"")+f.toLowerCase()}),fI=bg("toLowerCase");function gI(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;if(!f||L>=f)return c;var B=(f-L)/2;return lh(ml(B),b)+c+lh(Xa(B),b)}function DE(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;return f&&L<f?c+lh(f-L,b):c}function pI(c,f,b){c=ri(c),f=yn(f);var L=f?au(c):0;return f&&L<f?lh(f-L,b)+c:c}function mI(c,f,b){return b||f==null?f=0:f&&(f=+f),Cp(ri(c).replace(Ie,""),f||0)}function _I(c,f,b){return(b?Di(c,f,b):f===t)?f=1:f=yn(f),oh(ri(c),f)}function IE(){var c=arguments,f=ri(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var kE=Ia(function(c,f,b){return c+(b?"_":"")+f.toLowerCase()});function vI(c,f,b){return b&&typeof b!="number"&&Di(c,f,b)&&(f=b=t),b=b===t?te:b>>>0,b?(c=ri(c),c&&(typeof f=="string"||f!=null&&!Oa(f))&&(f=cr(f),!f&&Bu(c))?di(Mo(c),0,b):c.split(f,b)):[]}var bI=Ia(function(c,f,b){return c+(b?" ":"")+X0(f)});function CI(c,f,b){return c=ri(c),b=b==null?0:Ja(yn(b),0,c.length),f=cr(f),c.slice(b,b+f.length)==f}function yI(c,f,b){var L=q.templateSettings;b&&Di(c,f,b)&&(f=t),c=ri(c),f=Vp({},f,L,p_);var B=Vp({},f.imports,L.imports,p_),Z=wr(B),ae=pc(B,Z),he,ye,Ue=0,$e=f.interpolate||Vt,Ze="__p += '",vt=Kh((f.escape||Vt).source+"|"+$e.source+"|"+($e===as?K:Vt).source+"|"+(f.evaluate||Vt).source+"|$","g"),Ht="//# sourceURL="+($n.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uy+"]")+`
`;c.replace(vt,function(rn,Mn,Un,Qo,wo,Jo){return Un||(Un=Qo),Ze+=c.slice(Ue,Jo).replace(pn,u1),Mn&&(he=!0,Ze+=`' +
__e(`+Mn+`) +
'`),wo&&(ye=!0,Ze+=`';
`+wo+`;
__p += '`),Un&&(Ze+=`' +
((__t = (`+Un+`)) == null ? '' : __t) +
'`),Ue=Jo+rn.length,rn}),Ze+=`';
`;var nn=$n.call(f,"variable")&&f.variable;if(!nn)Ze=`with (obj) {
`+Ze+`
}
`;else if(kn.test(nn))throw new hn(a);Ze=(ye?Ze.replace(Mi,""):Ze).replace(ni,"$1").replace(bi,"$1;"),Ze="function("+(nn||"obj")+`) {
`+(nn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(he?", __e = _.escape":"")+(ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ze+`return __p
}`;var Dn=By(function(){return Kn(Z,Ht+"return "+Ze).apply(t,ae)});if(Dn.source=Ze,G0(Dn))throw Dn;return Dn}function z_(c){return ri(c).toLowerCase()}function wI(c){return ri(c).toUpperCase()}function SI(c,f,b){if(c=ri(c),c&&(b||f===t))return jm(c);if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Mo(f),Z=Lo(L,B),ae=Fu(L,B)+1;return di(L,Z,ae).join("")}function EI(c,f,b){if(c=ri(c),c&&(b||f===t))return c.slice(0,qh(c)+1);if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Fu(L,Mo(f))+1;return di(L,0,B).join("")}function LI(c,f,b){if(c=ri(c),c&&(b||f===t))return c.replace(Ie,"");if(!c||!(f=cr(f)))return c;var L=Mo(c),B=Lo(L,Mo(f));return di(L,B).join("")}function xI(c,f){var b=Y,L=I;if(Fi(f)){var B="separator"in f?f.separator:B;b="length"in f?yn(f.length):b,L="omission"in f?cr(f.omission):L}c=ri(c);var Z=c.length;if(Bu(c)){var ae=Mo(c);Z=ae.length}if(b>=Z)return c;var he=b-au(L);if(he<1)return L;var ye=ae?di(ae,0,he).join(""):c.slice(0,he);if(B===t)return ye+L;if(ae&&(he+=ye.length-he),Oa(B)){if(c.slice(he).search(B)){var Ue,$e=ye;for(B.global||(B=Kh(B.source,ri(ce.exec(B))+"g")),B.lastIndex=0;Ue=B.exec($e);)var Ze=Ue.index;ye=ye.slice(0,Ze===t?he:Ze)}}else if(c.indexOf(cr(B),he)!=he){var vt=ye.lastIndexOf(B);vt>-1&&(ye=ye.slice(0,vt))}return ye+L}function TE(c){return c=ri(c),c&&Dr.test(c)?c.replace(Qs,h1):c}var NE=Ia(function(c,f,b){return c+(b?" ":"")+f.toUpperCase()}),X0=bg("toUpperCase");function Fy(c,f,b){return c=ri(c),f=b?t:f,f===t?c1(c)?y0(c):$h(c):c.match(f)||[]}var By=Ln(function(c,f){try{return _o(c,t,f)}catch(b){return G0(b)?b:new hn(b)}}),DI=Hs(function(c,f){return vo(f,function(b){b=ro(b),Do(c,b,Yt(c[b],c))}),c});function II(c){var f=c==null?0:c.length,b=qt();return c=f?mi(c,function(L){if(typeof L[1]!="function")throw new Uo(s);return[b(L[0]),L[1]]}):[],Ln(function(L){for(var B=-1;++B<f;){var Z=c[B];if(_o(Z[0],this,L))return _o(Z[1],this,L)}})}function kI(c){return C1(Po(c,h))}function Q0(c){return function(){return c}}function TI(c,f){return c==null||c!==c?f:c}var NI=od(),AI=od(!0);function Wo(c){return c}function J0(c){return ef(typeof c=="function"?c:Po(c,h))}function OI(c){return ih(Po(c,h))}function RI(c,f){return Io(c,Po(f,h))}var MI=Ln(function(c,f){return function(b){return hu(b,c,f)}}),PI=Ln(function(c,f){return function(b){return hu(c,b,f)}});function eb(c,f,b){var L=wr(f),B=Es(f,L);b==null&&!(Fi(f)&&(B.length||!L.length))&&(b=f,f=c,c=this,B=Es(f,wr(f)));var Z=!(Fi(b)&&"chain"in b)||!!b.chain,ae=ol(c);return vo(B,function(he){var ye=f[he];c[he]=ye,ae&&(c.prototype[he]=function(){var Ue=this.__chain__;if(Z||Ue){var $e=c(this.__wrapped__),Ze=$e.__actions__=Gr(this.__actions__);return Ze.push({func:ye,args:arguments,thisArg:c}),$e.__chain__=Ue,$e}return ye.apply(c,Ka([this.value()],arguments))})}),c}function FI(){return Ki._===this&&(Ki._=f1),this}function tb(){}function BI(c){return c=yn(c),Ln(function(f){return ed(f,c)})}var WI=Cg(mi),VI=Cg(qr),HI=Cg(mp);function Wy(c){return Ap(c)?Qf(ro(c)):tf(c)}function UI(c){return function(f){return c==null?t:Yo(c,f)}}var Vy=kp(),AE=kp(!0);function $_(){return[]}function nb(){return!1}function zI(){return{}}function $I(){return""}function Hy(){return!0}function jI(c,f){if(c=yn(c),c<1||c>se)return[];var b=te,L=Pr(c,te);f=qt(f),c-=te;for(var B=La(L,f);++b<c;)f(b);return B}function qI(c){return Cn(c)?mi(c,ro):Zo(c)?[c]:Gr(R0(ri(c)))}function KI(c){var f=++xa;return ri(c)+f}var Su=lf(function(c,f){return c+f},0),Uy=Vs("ceil"),GI=lf(function(c,f){return c/f},1),YI=Vs("floor");function ZI(c){return c&&c.length?vc(c,Wo,yl):t}function XI(c,f){return c&&c.length?vc(c,qt(f,2),yl):t}function zy(c){return zm(c,Wo)}function QI(c,f){return zm(c,qt(f,2))}function $y(c){return c&&c.length?vc(c,Wo,ql):t}function JI(c,f){return c&&c.length?vc(c,qt(f,2),ql):t}var ek=lf(function(c,f){return c*f},1),tk=Vs("round"),nk=lf(function(c,f){return c-f},0);function OE(c){return c&&c.length?_p(c,Wo):0}function ik(c,f){return c&&c.length?_p(c,qt(f,2)):0}return q.after=Re,q.ary=Ke,q.assign=HD,q.assignIn=Ny,q.assignInWith=Vp,q.assignWith=UD,q.at=yE,q.before=_t,q.bind=Yt,q.bindAll=DI,q.bindKey=en,q.castArray=LD,q.chain=xl,q.chunk=M0,q.compact=w_,q.concat=P0,q.cond=II,q.conforms=kI,q.constant=Q0,q.countBy=yy,q.create=Y0,q.curry=Zt,q.curryRight=Nn,q.debounce=Hn,q.defaults=Ay,q.defaultsDeep=zD,q.defer=Gn,q.delay=fs,q.difference=Na,q.differenceBy=yr,q.differenceWith=Us,q.drop=xs,q.dropRight=ba,q.dropRightWhile=Yl,q.dropWhile=Lg,q.fill=Ds,q.filter=M1,q.flatMap=j0,q.flatMapDeep=q0,q.flatMapDepth=wy,q.flatten=gh,q.flattenDeep=S_,q.flattenDepth=ud,q.flip=ct,q.flow=NI,q.flowRight=AI,q.fromPairs=Aa,q.functions=qD,q.functionsIn=KD,q.groupBy=P_,q.initial=vu,q.intersection=Rp,q.intersectionBy=bu,q.intersectionWith=Ll,q.invert=Qi,q.invertBy=EE,q.invokeMap=F_,q.iteratee=J0,q.keyBy=P1,q.keys=wr,q.keysIn=Bo,q.map=_h,q.mapKeys=so,q.mapValues=GD,q.matches=OI,q.matchesProperty=RI,q.memoize=Qe,q.merge=LE,q.mergeWith=U_,q.method=MI,q.methodOf=PI,q.mixin=eb,q.negate=ut,q.nthArg=BI,q.omit=YD,q.omitBy=ZD,q.once=cn,q.orderBy=B_,q.over=WI,q.overArgs=Zn,q.overEvery=VI,q.overSome=HI,q.partial=ai,q.partialRight=hi,q.partition=W_,q.pick=XD,q.pickBy=Oy,q.property=Wy,q.propertyOf=UI,q.pull=F0,q.pullAll=Dg,q.pullAllBy=x_,q.pullAllWith=rl,q.pullAt=ph,q.range=Vy,q.rangeRight=AE,q.rearg=yi,q.reject=V_,q.remove=Ju,q.rest=ra,q.reverse=ia,q.sampleSize=m,q.set=JD,q.setWith=eI,q.shuffle=w,q.slice=E1,q.sortBy=J,q.sortedUniq=gf,q.sortedUniqBy=I_,q.split=vI,q.spread=Nr,q.tail=pf,q.take=D1,q.takeRight=I1,q.takeRightWhile=V0,q.takeWhile=k_,q.tap=H0,q.throttle=vh,q.thru=_f,q.toArray=fd,q.toPairs=Ry,q.toPairsIn=My,q.toPath=qI,q.toPlainObject=W1,q.transform=tI,q.unary=Ey,q.union=py,q.unionBy=Cu,q.unionWith=k1,q.uniq=T1,q.uniqBy=mf,q.uniqWith=N1,q.unset=nI,q.unzip=Lc,q.unzipWith=T_,q.update=iI,q.updateWith=rI,q.values=nc,q.valuesIn=oI,q.without=ns,q.words=Fy,q.wrap=ED,q.xor=my,q.xorBy=N_,q.xorWith=_y,q.zip=vy,q.zipObject=A1,q.zipObjectDeep=O1,q.zipWith=by,q.entries=Ry,q.entriesIn=My,q.extend=Ny,q.extendWith=Vp,eb(q,q),q.add=Su,q.attempt=By,q.camelCase=lI,q.capitalize=oa,q.ceil=Uy,q.clamp=Py,q.clone=F1,q.cloneDeep=mE,q.cloneDeepWith=_E,q.cloneWith=xD,q.conformsTo=Ly,q.deburr=Dl,q.defaultTo=TI,q.divide=GI,q.endsWith=uI,q.eq=Is,q.escape=cI,q.escapeRegExp=dI,q.every=R1,q.find=R_,q.findIndex=fh,q.findKey=wE,q.findLast=Ig,q.findLastIndex=ld,q.findLastKey=V1,q.floor=YI,q.forEach=M_,q.forEachRight=Pp,q.forIn=ec,q.forInRight=H_,q.forOwn=$D,q.forOwnRight=jD,q.get=Z0,q.gt=vE,q.gte=bE,q.has=SE,q.hasIn=tc,q.head=xg,q.identity=Wo,q.includes=K0,q.indexOf=ff,q.inRange=sI,q.invoke=xc,q.isArguments=yu,q.isArray=Cn,q.isArrayBuffer=DD,q.isArrayLike=Fo,q.isArrayLikeObject=Ui,q.isBoolean=B1,q.isBuffer=Zl,q.isDate=ID,q.isElement=xy,q.isEmpty=CE,q.isEqual=kD,q.isEqualWith=TD,q.isError=G0,q.isFinite=ND,q.isFunction=ol,q.isInteger=Dy,q.isLength=Bp,q.isMap=Iy,q.isMatch=AD,q.isMatchWith=OD,q.isNaN=dd,q.isNative=RD,q.isNil=Wp,q.isNull=MD,q.isNumber=Bi,q.isObject=Fi,q.isObjectLike=Gi,q.isPlainObject=bf,q.isRegExp=Oa,q.isSafeInteger=zs,q.isSet=ky,q.isString=wu,q.isSymbol=Zo,q.isTypedArray=hd,q.isUndefined=PD,q.isWeakMap=FD,q.isWeakSet=BD,q.join=E_,q.kebabCase=xE,q.last=Fr,q.lastIndexOf=L_,q.lowerCase=hI,q.lowerFirst=fI,q.lt=Ty,q.lte=WD,q.max=ZI,q.maxBy=XI,q.mean=zy,q.meanBy=QI,q.min=$y,q.minBy=JI,q.stubArray=$_,q.stubFalse=nb,q.stubObject=zI,q.stubString=$I,q.stubTrue=Hy,q.multiply=ek,q.nth=Mp,q.noConflict=FI,q.noop=tb,q.now=ge,q.pad=gI,q.padEnd=DE,q.padStart=pI,q.parseInt=mI,q.random=aI,q.reduce=Fp,q.reduceRight=Sy,q.repeat=_I,q.replace=IE,q.result=QD,q.round=tk,q.runInContext=be,q.sample=g,q.size=N,q.snakeCase=kE,q.some=H,q.sortedIndex=B0,q.sortedIndexBy=D_,q.sortedIndexOf=L1,q.sortedLastIndex=cd,q.sortedLastIndexBy=x1,q.sortedLastIndexOf=W0,q.startCase=bI,q.startsWith=CI,q.subtract=nk,q.sum=OE,q.sumBy=ik,q.template=yI,q.times=jI,q.toFinite=Ra,q.toInteger=yn,q.toLength=Xo,q.toLower=z_,q.toNumber=zi,q.toSafeInteger=VD,q.toString=ri,q.toUpper=wI,q.trim=SI,q.trimEnd=EI,q.trimStart=LI,q.truncate=xI,q.unescape=TE,q.uniqueId=KI,q.upperCase=NE,q.upperFirst=X0,q.each=M_,q.eachRight=Pp,q.first=xg,eb(q,function(){var c={};return ds(q,function(f,b){$n.call(q.prototype,b)||(c[b]=f)}),c}(),{chain:!1}),q.VERSION=n,vo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){q[c].placeholder=q}),vo(["drop","take"],function(c,f){an.prototype[c]=function(b){b=b===t?1:ir(yn(b),0);var L=this.__filtered__&&!f?new an(this):this.clone();return L.__filtered__?L.__takeCount__=Pr(b,L.__takeCount__):L.__views__.push({size:Pr(b,te),type:c+(L.__dir__<0?"Right":"")}),L},an.prototype[c+"Right"]=function(b){return this.reverse()[c](b).reverse()}}),vo(["filter","map","takeWhile"],function(c,f){var b=f+1,L=b==V||b==ne;an.prototype[c]=function(B){var Z=this.clone();return Z.__iteratees__.push({iteratee:qt(B,3),type:b}),Z.__filtered__=Z.__filtered__||L,Z}}),vo(["head","last"],function(c,f){var b="take"+(f?"Right":"");an.prototype[c]=function(){return this[b](1).value()[0]}}),vo(["initial","tail"],function(c,f){var b="drop"+(f?"":"Right");an.prototype[c]=function(){return this.__filtered__?new an(this):this[b](1)}}),an.prototype.compact=function(){return this.filter(Wo)},an.prototype.find=function(c){return this.filter(c).head()},an.prototype.findLast=function(c){return this.reverse().find(c)},an.prototype.invokeMap=Ln(function(c,f){return typeof c=="function"?new an(this):this.map(function(b){return hu(b,c,f)})}),an.prototype.reject=function(c){return this.filter(ut(qt(c)))},an.prototype.slice=function(c,f){c=yn(c);var b=this;return b.__filtered__&&(c>0||f<0)?new an(b):(c<0?b=b.takeRight(-c):c&&(b=b.drop(c)),f!==t&&(f=yn(f),b=f<0?b.dropRight(-f):b.take(f-c)),b)},an.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},an.prototype.toArray=function(){return this.take(te)},ds(an.prototype,function(c,f){var b=/^(?:filter|find|map|reject)|While$/.test(f),L=/^(?:head|last)$/.test(f),B=q[L?"take"+(f=="last"?"Right":""):f],Z=L||/^find/.test(f);B&&(q.prototype[f]=function(){var ae=this.__wrapped__,he=L?[1]:arguments,ye=ae instanceof an,Ue=he[0],$e=ye||Cn(ae),Ze=function(Mn){var Un=B.apply(q,Ka([Mn],he));return L&&vt?Un[0]:Un};$e&&b&&typeof Ue=="function"&&Ue.length!=1&&(ye=$e=!1);var vt=this.__chain__,Ht=!!this.__actions__.length,nn=Z&&!vt,Dn=ye&&!Ht;if(!Z&&$e){ae=Dn?ae:new an(this);var rn=c.apply(ae,he);return rn.__actions__.push({func:_f,args:[Ze],thisArg:t}),new Ei(rn,vt)}return nn&&Dn?c.apply(this,he):(rn=this.thru(Ze),nn?L?rn.value()[0]:rn.value():rn)})}),vo(["pop","push","shift","sort","splice","unshift"],function(c){var f=Os[c],b=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",L=/^(?:pop|shift)$/.test(c);q.prototype[c]=function(){var B=arguments;if(L&&!this.__chain__){var Z=this.value();return f.apply(Cn(Z)?Z:[],B)}return this[b](function(ae){return f.apply(Cn(ae)?ae:[],B)})}}),ds(an.prototype,function(c,f){var b=q[f];if(b){var L=b.name+"";$n.call(fa,L)||(fa[L]=[]),fa[L].push({name:f,func:b})}}),fa[Sc(t,T).name]=[{name:"wrapper",func:t}],an.prototype.clone=Xm,an.prototype.reverse=E0,an.prototype.value=Zh,q.prototype.at=mh,q.prototype.chain=A_,q.prototype.commit=vf,q.prototype.next=O_,q.prototype.plant=z0,q.prototype.reverse=Cy,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=$0,q.prototype.first=q.prototype.head,Xi&&(q.prototype[Xi]=U0),q},lu=vp();Ea?((Ea.exports=lu)._=lu,Vh._=lu):Ki._=lu}).call(iL)}),X_={browserCheck:function(){var e={};if(X_.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;e>=1024;)e=Number((e/1024).toFixed(2)),n++;return"".concat(e," ").concat(t[n])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){return!e||e===1/0?"0%":(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%")},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){if(e==null||e==="")return"0";e="".concat(e);var t=e.split("."),n=Gq(t,2),i=n[0],o=n[1];return"".concat(i.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),i=JSON.stringify(n,null,t||2);return i}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.sort(function(o,s){var a=0,l=jfe(n),u;try{for(l.s();!(u=l.n()).done;){var d=u.value;if(a=d(o,s),a!==0)return a}}catch(h){l.e(h)}finally{l.f()}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){return e=X_.trim(e),e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"||e.charAt(0)==="["&&e.charAt(e.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVXYZ";function o(u){var d=Math.random()*(u.length-1);return u.charAt(d)}for(var s="num",a="",l=0;l<e;l++)s==="num"?(a+=o(t),s="lower"):s==="lower"?(a+=o(n),s="upper"):s==="upper"&&(a+=o(i),s="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!X_.isEqual(this.state,n)||!X_.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i>=1&&i<=126||65376<=i&&i<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,i=[],o=0;o*t<n;)i.push(e.slice(o*t,(o+1)*t)),o++;return i},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!X_.isObj(e)))return Object.entries(e).forEach(function(t){var n=Gq(t,2),i=n[0],o=n[1];o&&X_.isObj(o)?X_.removeEmpty(o):X_.isEmpty(o)&&delete e[i]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!f3.isPlainObject(e)||!f3.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var i=Vfe({},e);return f3.forEach(t,function(o,s){s in e?i[s]=X_.mergeDeep(e[s],o):i[s]=o}),i},downLoadData:function(e){var t=e.url,n=e.payload,i=e.finallyCallback,o=e.successCallback,s=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return s(a);var l=a.headers.get("Content-type")||"";if(l.includes("application/json"))return s(a);var u=e.fileName;if(!u){var d=a.headers.get("Content-disposition")||"";u=d.split("filename=")[1]}a.blob().then(function(h){var p=URL.createObjectURL(h),_=document.createElement("a");_.setAttribute("href",p),_.setAttribute("download",decodeURIComponent(u||"")),_.click(),URL.revokeObjectURL(p),o&&o(a)})}).finally(function(){i&&i()})},isUtf8:function(e){var t=["","","","","",""];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,i;t="";var o=e.length||0;for(n=0;n<o;n++)i=e.charCodeAt(n),i>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}};fne(function(r,e){(function(t,n){r.exports=n()})(iL,function(){var t=1e3,n=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",u="day",d="week",h="month",p="quarter",_="year",C="date",S="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},M=function(O,V,j){var ne=String(O);return!ne||ne.length>=V?O:""+Array(V+1-ne.length).join(j)+O},W={s:M,z:function(O){var V=-O.utcOffset(),j=Math.abs(V),ne=Math.floor(j/60),re=j%60;return(V<=0?"+":"-")+M(ne,2,"0")+":"+M(re,2,"0")},m:function O(V,j){if(V.date()<j.date())return-O(j,V);var ne=12*(j.year()-V.year())+(j.month()-V.month()),re=V.clone().add(ne,h),se=j-re<0,ie=V.clone().add(ne+(se?-1:1),h);return+(-(ne+(j-re)/(se?re-ie:ie-re))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:h,y:_,w:d,d:u,D:C,h:l,m:a,s,ms:o,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},F="en",Q={};Q[F]=k;var z=function(O){return O instanceof I},$=function O(V,j,ne){var re;if(!V)return F;if(typeof V=="string"){var se=V.toLowerCase();Q[se]&&(re=se),j&&(Q[se]=j,re=se);var ie=V.split("-");if(!re&&ie.length>1)return O(ie[0])}else{var A=V.name;Q[A]=V,re=A}return!ne&&re&&(F=re),re||!ne&&F},G=function(O,V){if(z(O))return O.clone();var j=typeof V=="object"?V:{};return j.date=O,j.args=arguments,new I(j)},Y=W;Y.l=$,Y.i=z,Y.w=function(O,V){return G(O,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var I=function(){function O(j){this.$L=$(j.locale,null,!0),this.parse(j)}var V=O.prototype;return V.parse=function(j){this.$d=function(ne){var re=ne.date,se=ne.utc;if(re===null)return new Date(NaN);if(Y.u(re))return new Date;if(re instanceof Date)return new Date(re);if(typeof re=="string"&&!/Z$/i.test(re)){var ie=re.match(x);if(ie){var A=ie[2]-1||0,te=(ie[7]||"0").substring(0,3);return se?new Date(Date.UTC(ie[1],A,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,te)):new Date(ie[1],A,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,te)}}return new Date(re)}(j),this.$x=j.x||{},this.init()},V.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},V.$utils=function(){return Y},V.isValid=function(){return this.$d.toString()!==S},V.isSame=function(j,ne){var re=G(j);return this.startOf(ne)<=re&&re<=this.endOf(ne)},V.isAfter=function(j,ne){return G(j)<this.startOf(ne)},V.isBefore=function(j,ne){return this.endOf(ne)<G(j)},V.$g=function(j,ne,re){return Y.u(j)?this[ne]:this.set(re,j)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(j,ne){var re=this,se=!!Y.u(ne)||ne,ie=Y.p(j),A=function(Rt,lt){var xt=Y.w(re.$u?Date.UTC(re.$y,lt,Rt):new Date(re.$y,lt,Rt),re);return se?xt:xt.endOf(u)},te=function(Rt,lt){return Y.w(re.toDate()[Rt].apply(re.toDate("s"),(se?[0,0,0,0]:[23,59,59,999]).slice(lt)),re)},_e=this.$W,de=this.$M,Me=this.$D,He="set"+(this.$u?"UTC":"");switch(ie){case _:return se?A(1,0):A(31,11);case h:return se?A(1,de):A(0,de+1);case d:var st=this.$locale().weekStart||0,Dt=(_e<st?_e+7:_e)-st;return A(se?Me-Dt:Me+(6-Dt),de);case u:case C:return te(He+"Hours",0);case l:return te(He+"Minutes",1);case a:return te(He+"Seconds",2);case s:return te(He+"Milliseconds",3);default:return this.clone()}},V.endOf=function(j){return this.startOf(j,!1)},V.$set=function(j,ne){var re,se=Y.p(j),ie="set"+(this.$u?"UTC":""),A=(re={},re[u]=ie+"Date",re[C]=ie+"Date",re[h]=ie+"Month",re[_]=ie+"FullYear",re[l]=ie+"Hours",re[a]=ie+"Minutes",re[s]=ie+"Seconds",re[o]=ie+"Milliseconds",re)[se],te=se===u?this.$D+(ne-this.$W):ne;if(se===h||se===_){var _e=this.clone().set(C,1);_e.$d[A](te),_e.init(),this.$d=_e.set(C,Math.min(this.$D,_e.daysInMonth())).$d}else A&&this.$d[A](te);return this.init(),this},V.set=function(j,ne){return this.clone().$set(j,ne)},V.get=function(j){return this[Y.p(j)]()},V.add=function(j,ne){var re,se=this;j=Number(j);var ie=Y.p(ne),A=function(de){var Me=G(se);return Y.w(Me.date(Me.date()+Math.round(de*j)),se)};if(ie===h)return this.set(h,this.$M+j);if(ie===_)return this.set(_,this.$y+j);if(ie===u)return A(1);if(ie===d)return A(7);var te=(re={},re[a]=n,re[l]=i,re[s]=t,re)[ie]||1,_e=this.$d.getTime()+j*te;return Y.w(_e,this)},V.subtract=function(j,ne){return this.add(-1*j,ne)},V.format=function(j){var ne=this,re=this.$locale();if(!this.isValid())return re.invalidDate||S;var se=j||"YYYY-MM-DDTHH:mm:ssZ",ie=Y.z(this),A=this.$H,te=this.$m,_e=this.$M,de=re.weekdays,Me=re.months,He=function(lt,xt,zt,wt){return lt&&(lt[xt]||lt(ne,se))||zt[xt].slice(0,wt)},st=function(lt){return Y.s(A%12||12,lt,"0")},Dt=re.meridiem||function(lt,xt,zt){var wt=lt<12?"AM":"PM";return zt?wt.toLowerCase():wt},Rt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:_e+1,MM:Y.s(_e+1,2,"0"),MMM:He(re.monthsShort,_e,Me,3),MMMM:He(Me,_e),D:this.$D,DD:Y.s(this.$D,2,"0"),d:String(this.$W),dd:He(re.weekdaysMin,this.$W,de,2),ddd:He(re.weekdaysShort,this.$W,de,3),dddd:de[this.$W],H:String(A),HH:Y.s(A,2,"0"),h:st(1),hh:st(2),a:Dt(A,te,!0),A:Dt(A,te,!1),m:String(te),mm:Y.s(te,2,"0"),s:String(this.$s),ss:Y.s(this.$s,2,"0"),SSS:Y.s(this.$ms,3,"0"),Z:ie};return se.replace(T,function(lt,xt){return xt||Rt[lt]||ie.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(j,ne,re){var se,ie=Y.p(ne),A=G(j),te=(A.utcOffset()-this.utcOffset())*n,_e=this-A,de=Y.m(this,A);return de=(se={},se[_]=de/12,se[h]=de,se[p]=de/3,se[d]=(_e-te)/6048e5,se[u]=(_e-te)/864e5,se[l]=_e/i,se[a]=_e/n,se[s]=_e/t,se)[ie]||_e,re?de:Y.a(de)},V.daysInMonth=function(){return this.endOf(h).$D},V.$locale=function(){return Q[this.$L]},V.locale=function(j,ne){if(!j)return this.$L;var re=this.clone(),se=$(j,ne,!0);return se&&(re.$L=se),re},V.clone=function(){return Y.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},O}(),D=I.prototype;return G.prototype=D,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",u],["$M",h],["$y",_],["$D",C]].forEach(function(O){D[O[1]]=function(V){return this.$g(V,O[0],O[1])}}),G.extend=function(O,V){return O.$i||(O(V,I,G),O.$i=!0),G},G.locale=$,G.isDayjs=z,G.unix=function(O){return G(1e3*O)},G.en=Q[F],G.Ls=Q,G.p={},G})});const xT=Ri("context-view"),g3=Gt(xT,"content"),qfe=Gt(xT,"block"),gne=li(xT,"shadow");var Zk;(function(r){r.onHide="onHide"})(Zk||(Zk={}));const p3=new MP;function i2(r){const[e,t]=De.useState();return De.useEffect(()=>{t(Gx(r))},[]),e}function Gx(r={}){const{shadowOutline:e=!0}=r,t=oi(xT,"fade-in");let n=DL(`.${xT}`);const i=(u,d)=>{const h=DL("."+g3),p=d||(r==null?void 0:r.render);if(!p)throw new Error("ContextView show Error: the render parameter is required!");CR(me.createElement("div",{ref:()=>{if(n){const _=cne(n,u);n.style.cssText=`
                    visibility: visible;
                    top: ${_.y}px;
                    left: ${_.x}px;
                `}}},p()),h)},o=()=>{if(n){const u=DL(`.${g3}`);u&&une(u),n.style.visibility="hidden",p3.emit(Zk.onHide)}},s=u=>{p3.subscribe(Zk.onHide,u)},a=u=>{u.preventDefault(),u.stopPropagation(),o()},l=()=>{p3.unsubscribe(Zk.onHide),o()};if(!n){n=document.createElement("div"),n.className=oi(t,X_.isMacOs()?"mac":""),n.style.visibility="hidden";const u=document.getElementById("molecule");u?u.appendChild(n):document.body.appendChild(n);const d=e===!1?"":gne;CR(me.createElement(me.Fragment,null,me.createElement("div",{className:qfe,onClick:a,onContextMenu:a}),me.createElement("div",{className:oi(g3,d)})),n)}return{view:n,show:i,hide:o,onHide:s,dispose:l}}function BP(r){const{anchor:e,render:t}=r;if(!e)return;const n=Gx({render:t}),i=s=>{s.target===s.currentTarget&&(s.preventDefault(),n.show({x:s.clientX,y:s.clientY},t))};e.addEventListener("contextmenu",i);const o=()=>{n.hide(),e.removeEventListener("contextmenu",i)};return Object.assign(Object.assign({},n),{dispose:o})}function rr(r){return e=>e.id===r}function OU(...r){return function(...e){r.filter(t=>!!t).forEach(t=>t==null?void 0:t(...e))}}function pne(){return Date.now()+Math.round(Math.random()*1e3)}function RU(r,e){for(const t in e)typeof r[t]=="object"&&e[t]?r[t]=RU(r[t],e[t]):r[t]=e[t];return r}function Kfe(r){const e={},t=(n,i)=>{for(const o in i)if(o){const s=i[o],a=n?`${n}.${o}`:o;typeof s=="object"?t(a,s):e[a]=s}};return t("",r),e}function Gfe(r){let e={};for(const t in r)if(t){const n=t.split(".");let i="",o={},s=o;for(let a=0;a<n.length&&a!==n.length;++a){const l=n[a],u={[l]:""};i&&(s[i]=u),s=u,i=l,a===0&&(o=u)}s[i]=r[t],e=RU(e,o)}return e}function Yfe(r){let e,t,n;if(r.match(/^rgb/)){const o=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];e=+o[1],t=+o[2],n=+o[3]}else{let o=+("0x"+r.slice(1,7));r.length<5&&(o=+("0x"+r.slice(1).replace(/./g,"$&$&").slice(0,6))),e=o>>16,t=o>>8&255,n=o&255}return Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(n*n))>127.5?"light":"dark"}function Zfe(r,e){return r*e}function Xfe(r,e){const t=document.head.getElementsByClassName(e);if(t.length===0){const n=document.createElement("style");n.type="text/css",n.className=e,n.innerHTML=r,document.head.appendChild(n)}else t[0].innerHTML=r}const Yv=Ri("menu"),mne=Ri("sub-menu"),Qfe=li(Yv,"vertical"),Jfe=li(Yv,"horizontal"),r2=Gt(Yv,"item"),ege=Gt(Yv,"divider"),_ne=Gt(Yv,"check"),MU=li(r2,"disabled"),Dk=li(r2,"active"),vne=Gt(Yv,"label"),bne=Gt(Yv,"content"),tge=Gt(Yv,"keybinding"),nge=Gt(Yv,"indicator"),ige=()=>me.createElement("li",{className:oi(r2,MU),role:"separator"},me.createElement("a",{className:ege}));var rge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function go(r){const{className:e,type:t,children:n}=r,i=rge(r,["className","type","children"]);return t?typeof t=="string"?me.createElement("span",Object.assign({className:oi(e,"codicon",t.includes("~spin")&&"codicon-spin",Ri(t.split("~spin")[0],"codicon"))},i)):t:n?me.createElement("span",Object.assign({className:e},i),n):null}var oge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Cne(r){const{icon:e,disabled:t=!1,className:n,onClick:i,keybinding:o,render:s,children:a,name:l,title:u,id:d,sortIndex:h}=r,p=oge(r,["icon","disabled","className","onClick","keybinding","render","children","name","title","id","sortIndex"]),_={onClick:function(C){i==null||i(C,r)}};return me.createElement("li",Object.assign({className:oi(r2,n,t?MU:null),id:d==null?void 0:d.toString(),"data-sort":h},typeof u=="string"?{title:u}:{},_,p),me.createElement("div",{className:bne},me.createElement(go,{type:e,className:_ne}),me.createElement("span",{className:vne,title:typeof l=="string"?l:""},s?s(r):a),o?me.createElement("span",{className:tge},o):null))}var sge=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},LC;(function(r){r.Vertical="vertical",r.Horizontal="horizontal"})(LC||(LC={}));function yne(r){return r===LC.Horizontal}function wne(r){const{className:e,name:t,render:n,data:i=[],mode:o=LC.Vertical,icon:s,disabled:a=!1,children:l,onClick:u,title:d,sortIndex:h}=r,p=sge(r,["className","name","render","data","mode","icon","disabled","children","onClick","title","sortIndex"]),_=oi(mne,e),S=yne(o)?"down":"right",x=i.length>0?me.createElement(Rc,Object.assign({className:_,style:{opacity:"0",pointerEvents:"none"},data:i,onClick:u},p)):me.createElement(Rc,{className:_,style:{opacity:"0",pointerEvents:"none"},onClick:u},l);return me.createElement("li",Object.assign({className:oi(r2,a?MU:null),"data-submenu":!0,"data-mode":o,"data-sort":h},typeof d=="string"?{title:d}:{},p),me.createElement("div",{className:bne},typeof s=="string"?me.createElement(go,{className:_ne,type:s||""}):s,me.createElement("span",{className:vne},n?n(r):t),me.createElement(go,{className:nge,type:`chevron-${S}`})),x)}var age=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const lge=r=>{if(r&&r!=null&&r.dataset.submenu){const e=Array.prototype.find.call(r.children,t=>t.nodeName==="UL");e.style.opacity="1",e.style.pointerEvents="auto",r.classList.add(Dk)}},uge=(r,e,t=!1)=>{if(!r||!e)return;const n=r.getBoundingClientRect(),i=cne(e,n);if(t)i.y=i.y+n.height;else{i.x=i.x+n.width;const o=getComputedStyle(e).getPropertyValue("font-size"),s=Zfe(.5,parseInt(o.replace(/px/g,"")));i.y=i.y-s}e.style.top=`${i.y}px`,e.style.left=`${i.x}px`};function cge(r,e){const{className:t,mode:n=LC.Vertical,data:i=[],children:o,onClick:s,trigger:a="hover",title:l}=r,u=age(r,["className","mode","data","children","onClick","trigger","title"]),d=De.useRef(null),h=De.useRef(!1);let p=n2(o,{onClick:s});const _=a==="hover"?200:0,C=n===LC.Horizontal?Jfe:Qfe,S=oi(Yv,C,t);if(i.length>0){const Q=z=>z.map($=>{if($.type==="divider")return me.createElement(ige,{key:$.id});const G=OU(s,$.onClick);return $.data&&$.data.length>0?me.createElement(wne,Object.assign({key:$.id,mode:$.mode||n},$,{onClick:G}),Q($.data)):me.createElement(Cne,Object.assign({},$,{key:$.id,onClick:G}),$.name)});p=Q(i)}const x=()=>{var Q,z;(Q=d.current)===null||Q===void 0||Q.querySelectorAll("ul").forEach($=>{$.style.opacity="0",$.style.pointerEvents="none"}),(z=d.current)===null||z===void 0||z.querySelectorAll(`li.${Dk}`).forEach($=>{$.classList.remove(Dk)})},T=Ao.debounce(Q=>{if(h.current){const z=document.elementsFromPoint(Q.pageX,Q.pageY),$=z.find(D=>D.nodeName==="UL"),G=z.find(D=>D.nodeName==="LI");$&&($.querySelectorAll("ul").forEach(D=>{D.style.opacity="0",D.style.pointerEvents="none"}),$.querySelectorAll(`li.${Dk}`).forEach(D=>{D.classList.remove(Dk)})),lge(G);const Y=(G==null?void 0:G.querySelector("ul"))||void 0,I=(G==null?void 0:G.dataset.mode)||n;uge(G,Y,yne(I))}},_),k=Q=>{Q.preventDefault(),Q.persist(),Q.stopPropagation(),h.current=!0,T(Q)},M=()=>{h.current=!1},W=()=>S!=null&&S.includes(mne)?{}:{onContextMenu:Q=>{Q.preventDefault(),Q.persist(),Q.stopPropagation()},onClick:Q=>{Q.preventDefault(),Q.persist(),Q.stopPropagation()},[dne(a)]:k,onMouseOut:M},F=De.useCallback(()=>{document.hidden&&x()},[]);return De.useEffect(()=>(window.addEventListener("contextmenu",x),window.addEventListener("click",x),window.addEventListener("visibilitychange",F),()=>{document.removeEventListener("contextmenu",x),window.removeEventListener("click",x),window.removeEventListener("visibilitychange",F)}),[]),De.useImperativeHandle(e,()=>({dispose:()=>{x()}})),me.createElement("ul",Object.assign({className:S,ref:d},typeof l=="string"?{title:l}:{},W(),u),p)}const Rc=De.forwardRef(cge);function hl(){return hl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hl.apply(this,arguments)}function Mc(r){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(r)}function dge(r,e){if(Mc(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Mc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Sne(r){var e=dge(r,"string");return Mc(e)==="symbol"?e:String(e)}function zn(r,e,t){return e=Sne(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zq(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _i(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(t),!0).forEach(function(n){zn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Zq(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function hge(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function wR(r,e){if(r==null)return{};var t=hge(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function KC(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Xq(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Sne(n.key),n)}}function GC(r,e,t){return e&&Xq(r.prototype,e),t&&Xq(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function wi(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function X6(r,e){return X6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},X6(r,e)}function jS(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&X6(r,e)}function SR(r){return SR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SR(r)}function fge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gge(r,e){if(e&&(Mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(r)}function qS(r){var e=fge();return function(){var n=SR(r),i;if(e){var o=SR(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return gge(this,i)}}var Ene=function(e){return+setTimeout(e,16)},Lne=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Ene=function(e){return window.requestAnimationFrame(e)},Lne=function(e){return window.cancelAnimationFrame(e)});var Qq=0,PU=new Map;function xne(r){PU.delete(r)}var dm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Qq+=1;var n=Qq;function i(o){if(o===0)xne(n),e();else{var s=Ene(function(){i(o-1)});PU.set(n,s)}}return i(t),n};dm.cancel=function(r){var e=PU.get(r);return xne(e),Lne(e)};function Xk(r,e){if(!r)return!1;if(r.contains)return r.contains(e);for(var t=e;t;){if(t===r)return!0;t=t.parentNode}return!1}function pge(r){return r instanceof HTMLElement||r instanceof SVGElement}function ER(r){return pge(r)?r:r instanceof me.Component?tx.findDOMNode(r):null}var m3={exports:{}},jo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jq;function mge(){if(Jq)return jo;Jq=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,s=r?Symbol.for("react.provider"):60109,a=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,_=r?Symbol.for("react.memo"):60115,C=r?Symbol.for("react.lazy"):60116,S=r?Symbol.for("react.block"):60121,x=r?Symbol.for("react.fundamental"):60117,T=r?Symbol.for("react.responder"):60118,k=r?Symbol.for("react.scope"):60119;function M(F){if(typeof F=="object"&&F!==null){var Q=F.$$typeof;switch(Q){case e:switch(F=F.type,F){case l:case u:case n:case o:case i:case h:return F;default:switch(F=F&&F.$$typeof,F){case a:case d:case C:case _:case s:return F;default:return Q}}case t:return Q}}}function W(F){return M(F)===u}return jo.AsyncMode=l,jo.ConcurrentMode=u,jo.ContextConsumer=a,jo.ContextProvider=s,jo.Element=e,jo.ForwardRef=d,jo.Fragment=n,jo.Lazy=C,jo.Memo=_,jo.Portal=t,jo.Profiler=o,jo.StrictMode=i,jo.Suspense=h,jo.isAsyncMode=function(F){return W(F)||M(F)===l},jo.isConcurrentMode=W,jo.isContextConsumer=function(F){return M(F)===a},jo.isContextProvider=function(F){return M(F)===s},jo.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===e},jo.isForwardRef=function(F){return M(F)===d},jo.isFragment=function(F){return M(F)===n},jo.isLazy=function(F){return M(F)===C},jo.isMemo=function(F){return M(F)===_},jo.isPortal=function(F){return M(F)===t},jo.isProfiler=function(F){return M(F)===o},jo.isStrictMode=function(F){return M(F)===i},jo.isSuspense=function(F){return M(F)===h},jo.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===n||F===u||F===o||F===i||F===h||F===p||typeof F=="object"&&F!==null&&(F.$$typeof===C||F.$$typeof===_||F.$$typeof===s||F.$$typeof===a||F.$$typeof===d||F.$$typeof===x||F.$$typeof===T||F.$$typeof===k||F.$$typeof===S)},jo.typeOf=M,jo}var eK;function _ge(){return eK||(eK=1,m3.exports=mge()),m3.exports}var Dne=_ge();function Ine(r,e){typeof r=="function"?r(e):Mc(r)==="object"&&r&&"current"in r&&(r.current=e)}function FU(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=e.filter(function(i){return i});return n.length<=1?n[0]:function(i){e.forEach(function(o){Ine(o,i)})}}function BU(r){var e,t,n=Dne.isMemo(r)?r.type.type:r.type;return!(typeof n=="function"&&!((e=n.prototype)!==null&&e!==void 0&&e.render)||typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render))}function Ik(r,e,t,n){var i=tx.unstable_batchedUpdates?function(s){tx.unstable_batchedUpdates(t,s)}:t;return r!=null&&r.addEventListener&&r.addEventListener(e,i,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(e,i,n)}}}function Yx(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var kne=De.forwardRef(function(r,e){var t=r.didUpdate,n=r.getContainer,i=r.children,o=De.useRef(),s=De.useRef();De.useImperativeHandle(e,function(){return{}});var a=De.useRef(!1);return!a.current&&Yx()&&(s.current=n(),o.current=s.current.parentNode,a.current=!0),De.useEffect(function(){t==null||t(r)}),De.useEffect(function(){return s.current.parentNode===null&&o.current!==null&&o.current.appendChild(s.current),function(){var l,u;(l=s.current)===null||l===void 0||(u=l.parentNode)===null||u===void 0||u.removeChild(s.current)}},[]),s.current?tx.createPortal(i,s.current):null}),_3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var tK;function vge(){return tK||(tK=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var l in o)e.call(o,l)&&o[l]&&n.push(l)}}}return n.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(_3)),_3.exports}var bge=vge();const rp=xm(bge);function Cge(r,e,t){return t?r[0]===e[0]:r[0]===e[0]&&r[1]===e[1]}function yge(r,e,t){var n=r[e]||{};return _i(_i({},n),t)}function wge(r,e,t,n){for(var i=t.points,o=Object.keys(r),s=0;s<o.length;s+=1){var a=o[s];if(Cge(r[a].points,i,n))return"".concat(e,"-placement-").concat(a)}return""}function Sge(r){if(Array.isArray(r))return r}function Ege(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,s,a=[],l=!0,u=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=o.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Q6(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Tne(r,e){if(r){if(typeof r=="string")return Q6(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q6(r,e)}}function Lge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xs(r,e){return Sge(r)||Ege(r,e)||Tne(r,e)||Lge()}const xge=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};var Dge=De.createContext({}),Ige=function(r){jS(t,r);var e=qS(t);function t(){return KC(this,t),e.apply(this,arguments)}return GC(t,[{key:"render",value:function(){return this.props.children}}]),t}(De.Component);function Qk(r){var e=De.useRef(!1),t=De.useState(r),n=Xs(t,2),i=n[0],o=n[1];De.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,l){l&&e.current||o(a)}return[i,s]}var nw="none",iA="appear",rA="enter",oA="leave",nK="none",Kp="prepare",uL="start",cL="active",WU="end",Nne="prepared";function iK(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(r)]="webkit".concat(e),t["Moz".concat(r)]="moz".concat(e),t["ms".concat(r)]="MS".concat(e),t["O".concat(r)]="o".concat(e.toLowerCase()),t}function kge(r,e){var t={animationend:iK("Animation","AnimationEnd"),transitionend:iK("Transition","TransitionEnd")};return r&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Tge=kge(Yx(),typeof window<"u"?window:{}),Ane={};if(Yx()){var Nge=document.createElement("div");Ane=Nge.style}var sA={};function One(r){if(sA[r])return sA[r];var e=Tge[r];if(e)for(var t=Object.keys(e),n=t.length,i=0;i<n;i+=1){var o=t[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Ane)return sA[r]=e[o],sA[r]}return""}var Rne=One("animationend"),Mne=One("transitionend"),Pne=!!(Rne&&Mne),rK=Rne||"animationend",oK=Mne||"transitionend";function sK(r,e){if(!r)return null;if(Mc(r)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return r[t]}return"".concat(r,"-").concat(e)}const Age=function(r){var e=De.useRef(),t=De.useRef(r);t.current=r;var n=De.useCallback(function(s){t.current(s)},[]);function i(s){s&&(s.removeEventListener(oK,n),s.removeEventListener(rK,n))}function o(s){e.current&&e.current!==s&&i(e.current),s&&s!==e.current&&(s.addEventListener(oK,n),s.addEventListener(rK,n),e.current=s)}return De.useEffect(function(){return function(){i(e.current)}},[]),[o,i]};var Fne=Yx()?De.useLayoutEffect:De.useEffect;const Oge=function(){var r=De.useRef(null);function e(){dm.cancel(r.current)}function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=dm(function(){i<=1?n({isCanceled:function(){return o!==r.current}}):t(n,i-1)});r.current=o}return De.useEffect(function(){return function(){e()}},[]),[t,e]};var Rge=[Kp,uL,cL,WU],Mge=[Kp,Nne],Bne=!1,Pge=!0;function Wne(r){return r===cL||r===WU}const Fge=function(r,e,t){var n=Qk(nK),i=Xs(n,2),o=i[0],s=i[1],a=Oge(),l=Xs(a,2),u=l[0],d=l[1];function h(){s(Kp,!0)}var p=e?Mge:Rge;return Fne(function(){if(o!==nK&&o!==WU){var _=p.indexOf(o),C=p[_+1],S=t(o);S===Bne?s(C,!0):C&&u(function(x){function T(){x.isCanceled()||s(C,!0)}S===!0?T():Promise.resolve(S).then(T)})}},[r,o]),De.useEffect(function(){return function(){d()}},[]),[h,o]};function Bge(r,e,t,n){var i=n.motionEnter,o=i===void 0?!0:i,s=n.motionAppear,a=s===void 0?!0:s,l=n.motionLeave,u=l===void 0?!0:l,d=n.motionDeadline,h=n.motionLeaveImmediately,p=n.onAppearPrepare,_=n.onEnterPrepare,C=n.onLeavePrepare,S=n.onAppearStart,x=n.onEnterStart,T=n.onLeaveStart,k=n.onAppearActive,M=n.onEnterActive,W=n.onLeaveActive,F=n.onAppearEnd,Q=n.onEnterEnd,z=n.onLeaveEnd,$=n.onVisibleChanged,G=Qk(),Y=Xs(G,2),I=Y[0],D=Y[1],O=Qk(nw),V=Xs(O,2),j=V[0],ne=V[1],re=Qk(null),se=Xs(re,2),ie=se[0],A=se[1],te=De.useRef(!1),_e=De.useRef(null);function de(){return t()}var Me=De.useRef(!1);function He(){ne(nw,!0),A(null,!0)}function st(Ft){var Bt=de();if(!(Ft&&!Ft.deadline&&Ft.target!==Bt)){var Tt=Me.current,mt;j===iA&&Tt?mt=F==null?void 0:F(Bt,Ft):j===rA&&Tt?mt=Q==null?void 0:Q(Bt,Ft):j===oA&&Tt&&(mt=z==null?void 0:z(Bt,Ft)),j!==nw&&Tt&&mt!==!1&&He()}}var Dt=Age(st),Rt=Xs(Dt,1),lt=Rt[0],xt=function(Bt){var Tt,mt,Qt;switch(Bt){case iA:return Tt={},zn(Tt,Kp,p),zn(Tt,uL,S),zn(Tt,cL,k),Tt;case rA:return mt={},zn(mt,Kp,_),zn(mt,uL,x),zn(mt,cL,M),mt;case oA:return Qt={},zn(Qt,Kp,C),zn(Qt,uL,T),zn(Qt,cL,W),Qt;default:return{}}},zt=De.useMemo(function(){return xt(j)},[j]),wt=Fge(j,!r,function(Ft){if(Ft===Kp){var Bt=zt[Kp];return Bt?Bt(de()):Bne}if(Pt in zt){var Tt;A(((Tt=zt[Pt])===null||Tt===void 0?void 0:Tt.call(zt,de(),null))||null)}return Pt===cL&&(lt(de()),d>0&&(clearTimeout(_e.current),_e.current=setTimeout(function(){st({deadline:!0})},d))),Pt===Nne&&He(),Pge}),dn=Xs(wt,2),sn=dn[0],Pt=dn[1],ei=Wne(Pt);Me.current=ei,Fne(function(){D(e);var Ft=te.current;te.current=!0;var Bt;!Ft&&e&&a&&(Bt=iA),Ft&&e&&o&&(Bt=rA),(Ft&&!e&&u||!Ft&&h&&!e&&u)&&(Bt=oA);var Tt=xt(Bt);Bt&&(r||Tt[Kp])?(ne(Bt),sn()):ne(nw)},[e]),De.useEffect(function(){(j===iA&&!a||j===rA&&!o||j===oA&&!u)&&ne(nw)},[a,o,u]),De.useEffect(function(){return function(){te.current=!1,clearTimeout(_e.current)}},[]);var xn=De.useRef(!1);De.useEffect(function(){I&&(xn.current=!0),I!==void 0&&j===nw&&((xn.current||I)&&($==null||$(I)),xn.current=!0)},[I,j]);var un=ie;return zt[Kp]&&Pt===uL&&(un=_i({transition:"none"},un)),[j,Pt,un,I??e]}function Wge(r){var e=r;Mc(r)==="object"&&(e=r.transitionSupport);function t(i,o){return!!(i.motionName&&e&&o!==!1)}var n=De.forwardRef(function(i,o){var s=i.visible,a=s===void 0?!0:s,l=i.removeOnLeave,u=l===void 0?!0:l,d=i.forceRender,h=i.children,p=i.motionName,_=i.leavedClassName,C=i.eventProps,S=De.useContext(Dge),x=S.motion,T=t(i,x),k=De.useRef(),M=De.useRef();function W(){try{return k.current instanceof HTMLElement?k.current:ER(M.current)}catch{return null}}var F=Bge(T,a,W,i),Q=Xs(F,4),z=Q[0],$=Q[1],G=Q[2],Y=Q[3],I=De.useRef(Y);Y&&(I.current=!0);var D=De.useCallback(function(A){k.current=A,Ine(o,A)},[o]),O,V=_i(_i({},C),{},{visible:a});if(!h)O=null;else if(z===nw)Y?O=h(_i({},V),D):!u&&I.current&&_?O=h(_i(_i({},V),{},{className:_}),D):d||!u&&!_?O=h(_i(_i({},V),{},{style:{display:"none"}}),D):O=null;else{var j,ne;$===Kp?ne="prepare":Wne($)?ne="active":$===uL&&(ne="start");var re=sK(p,"".concat(z,"-").concat(ne));O=h(_i(_i({},V),{},{className:rp(sK(p,z),(j={},zn(j,re,re&&ne),zn(j,p,typeof p=="string"),j)),style:G}),D)}if(De.isValidElement(O)&&BU(O)){var se=O,ie=se.ref;ie||(O=De.cloneElement(O,{ref:D}))}return De.createElement(Ige,{ref:M},O)});return n.displayName="CSSMotion",n}const Zx=Wge(Pne);var J6="add",e9="keep",t9="remove",v3="removed";function Vge(r){var e;return r&&Mc(r)==="object"&&"key"in r?e=r:e={key:r},_i(_i({},e),{},{key:String(e.key)})}function n9(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(Vge)}function Hge(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,i=e.length,o=n9(r),s=n9(e);o.forEach(function(u){for(var d=!1,h=n;h<i;h+=1){var p=s[h];if(p.key===u.key){n<h&&(t=t.concat(s.slice(n,h).map(function(_){return _i(_i({},_),{},{status:J6})})),n=h),t.push(_i(_i({},p),{},{status:e9})),n+=1,d=!0;break}}d||t.push(_i(_i({},u),{},{status:t9}))}),n<i&&(t=t.concat(s.slice(n).map(function(u){return _i(_i({},u),{},{status:J6})})));var a={};t.forEach(function(u){var d=u.key;a[d]=(a[d]||0)+1});var l=Object.keys(a).filter(function(u){return a[u]>1});return l.forEach(function(u){t=t.filter(function(d){var h=d.key,p=d.status;return h!==u||p!==t9}),t.forEach(function(d){d.key===u&&(d.status=e9)})}),t}var Uge=["component","children","onVisibleChanged","onAllRemoved"],zge=["status"],$ge=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function jge(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zx,t=function(n){jS(o,n);var i=qS(o);function o(){var s;KC(this,o);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return s=i.call.apply(i,[this].concat(l)),zn(wi(s),"state",{keyEntities:[]}),zn(wi(s),"removeKey",function(d){var h=s.state.keyEntities,p=h.map(function(_){return _.key!==d?_:_i(_i({},_),{},{status:v3})});return s.setState({keyEntities:p}),p.filter(function(_){var C=_.status;return C!==v3}).length}),s}return GC(o,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,u=this.props,d=u.component,h=u.children,p=u.onVisibleChanged,_=u.onAllRemoved,C=wR(u,Uge),S=d||De.Fragment,x={};return $ge.forEach(function(T){x[T]=C[T],delete C[T]}),delete C.keys,De.createElement(S,C,l.map(function(T){var k=T.status,M=wR(T,zge),W=k===J6||k===e9;return De.createElement(e,hl({},x,{key:M.key,visible:W,eventProps:M,onVisibleChanged:function(Q){if(p==null||p(Q,{key:M.key}),!Q){var z=a.removeKey(M.key);z===0&&_&&_()}}}),h)}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var u=a.keys,d=l.keyEntities,h=n9(u),p=Hge(d,h);return{keyEntities:p.filter(function(_){var C=d.find(function(S){var x=S.key;return _.key===x});return!(C&&C.status===v3&&_.status===t9)})}}}]),o}(De.Component);return zn(t,"defaultProps",{component:"div"}),t}jge(Pne);function Vne(r){var e=r.prefixCls,t=r.motion,n=r.animation,i=r.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function qge(r){var e=r.prefixCls,t=r.visible,n=r.zIndex,i=r.mask,o=r.maskMotion,s=r.maskAnimation,a=r.maskTransitionName;if(!i)return null;var l={};return(o||a||s)&&(l=_i({motionAppear:!0},Vne({motion:o,prefixCls:e,transitionName:a,animation:s}))),De.createElement(Zx,hl({},l,{visible:t,removeOnLeave:!0}),function(u){var d=u.className;return De.createElement("div",{style:{zIndex:n},className:rp("".concat(e,"-mask"),d)})})}function aK(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function lK(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(t),!0).forEach(function(n){Kge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aK(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function i9(r){"@babel/helpers - typeof";return i9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i9(r)}function Kge(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ok,Gge={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function LR(){if(ok!==void 0)return ok;ok="";var r=document.createElement("p").style,e="Transform";for(var t in Gge)t+e in r&&(ok=t);return ok}function Hne(){return LR()?"".concat(LR(),"TransitionProperty"):"transitionProperty"}function WP(){return LR()?"".concat(LR(),"Transform"):"transform"}function uK(r,e){var t=Hne();t&&(r.style[t]=e,t!=="transitionProperty"&&(r.style.transitionProperty=e))}function b3(r,e){var t=WP();t&&(r.style[t]=e,t!=="transform"&&(r.style.transform=e))}function Yge(r){return r.style.transitionProperty||r.style[Hne()]}function Zge(r){var e=window.getComputedStyle(r,null),t=e.getPropertyValue("transform")||e.getPropertyValue(WP());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var Xge=/matrix\((.*)\)/,Qge=/matrix3d\((.*)\)/;function Jge(r,e){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(WP());if(n&&n!=="none"){var i,o=n.match(Xge);if(o)o=o[1],i=o.split(",").map(function(a){return parseFloat(a,10)}),i[4]=e.x,i[5]=e.y,b3(r,"matrix(".concat(i.join(","),")"));else{var s=n.match(Qge)[1];i=s.split(",").map(function(a){return parseFloat(a,10)}),i[12]=e.x,i[13]=e.y,b3(r,"matrix3d(".concat(i.join(","),")"))}}else b3(r,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var epe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,o2;function cK(r){var e=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=e}function IL(r,e,t){var n=t;if(i9(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&IL(r,i,e[i]);return}if(typeof n<"u"){typeof n=="number"&&(n="".concat(n,"px")),r.style[e]=n;return}return o2(r,e)}function tpe(r){var e,t,n,i=r.ownerDocument,o=i.body,s=i&&i.documentElement;return e=r.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=s.clientLeft||o.clientLeft||0,n-=s.clientTop||o.clientTop||0,{left:t,top:n}}function Une(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function zne(r){return Une(r)}function $ne(r){return Une(r,!0)}function DT(r){var e=tpe(r),t=r.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=zne(n),e.top+=$ne(n),e}function VU(r){return r!=null&&r==r.window}function jne(r){return VU(r)?r.document:r.nodeType===9?r:r.ownerDocument}function npe(r,e,t){var n=t,i="",o=jne(r);return n=n||o.defaultView.getComputedStyle(r,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var ipe=new RegExp("^(".concat(epe,")(?!px)[a-z%]+$"),"i"),rpe=/^(top|right|bottom|left)$/,C3="currentStyle",y3="runtimeStyle",jy="left",ope="px";function spe(r,e){var t=r[C3]&&r[C3][e];if(ipe.test(t)&&!rpe.test(e)){var n=r.style,i=n[jy],o=r[y3][jy];r[y3][jy]=r[C3][jy],n[jy]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+ope,n[jy]=i,r[y3][jy]=o}return t===""?"auto":t}typeof window<"u"&&(o2=window.getComputedStyle?npe:spe);function aA(r,e){return r==="left"?e.useCssRight?"right":r:e.useCssBottom?"bottom":r}function dK(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function hK(r,e,t){IL(r,"position")==="static"&&(r.style.position="relative");var n=-999,i=-999,o=aA("left",t),s=aA("top",t),a=dK(o),l=dK(s);o!=="left"&&(n=999),s!=="top"&&(i=999);var u="",d=DT(r);("left"in e||"top"in e)&&(u=Yge(r)||"",uK(r,"none")),"left"in e&&(r.style[a]="",r.style[o]="".concat(n,"px")),"top"in e&&(r.style[l]="",r.style[s]="".concat(i,"px")),cK(r);var h=DT(r),p={};for(var _ in e)if(e.hasOwnProperty(_)){var C=aA(_,t),S=_==="left"?n:i,x=d[_]-h[_];C===_?p[C]=S+x:p[C]=S-x}IL(r,p),cK(r),("left"in e||"top"in e)&&uK(r,u);var T={};for(var k in e)if(e.hasOwnProperty(k)){var M=aA(k,t),W=e[k]-d[k];k===M?T[M]=p[M]+W:T[M]=p[M]-W}IL(r,T)}function ape(r,e){var t=DT(r),n=Zge(r),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-t.left),"top"in e&&(i.y=n.y+e.top-t.top),Jge(r,i)}function lpe(r,e,t){if(t.ignoreShake){var n=DT(r),i=n.left.toFixed(0),o=n.top.toFixed(0),s=e.left.toFixed(0),a=e.top.toFixed(0);if(i===s&&o===a)return}t.useCssRight||t.useCssBottom?hK(r,e,t):t.useCssTransform&&WP()in document.body.style?ape(r,e):hK(r,e,t)}function HU(r,e){for(var t=0;t<r.length;t++)e(r[t])}function qne(r){return o2(r,"boxSizing")==="border-box"}var upe=["margin","border","padding"],r9=-1,cpe=2,o9=1,dpe=0;function hpe(r,e,t){var n={},i=r.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);t.call(r);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function kk(r,e,t){var n=0,i,o,s;for(o=0;o<e.length;o++)if(i=e[o],i)for(s=0;s<t.length;s++){var a=void 0;i==="border"?a="".concat(i).concat(t[s],"Width"):a=i+t[s],n+=parseFloat(o2(r,a))||0}return n}var Ev={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};HU(["Width","Height"],function(r){Ev["doc".concat(r)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(r)],t.body["scroll".concat(r)],Ev["viewport".concat(r)](t))},Ev["viewport".concat(r)]=function(e){var t="client".concat(r),n=e.document,i=n.body,o=n.documentElement,s=o[t];return n.compatMode==="CSS1Compat"&&s||i&&i[t]||s}});function fK(r,e,t){var n=t;if(VU(r))return e==="width"?Ev.viewportWidth(r):Ev.viewportHeight(r);if(r.nodeType===9)return e==="width"?Ev.docWidth(r):Ev.docHeight(r);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height),s=qne(r),a=0;(o==null||o<=0)&&(o=void 0,a=o2(r,e),(a==null||Number(a)<0)&&(a=r.style[e]||0),a=Math.floor(parseFloat(a))||0),n===void 0&&(n=s?o9:r9);var l=o!==void 0||s,u=o||a;return n===r9?l?u-kk(r,["border","padding"],i):a:l?n===o9?u:u+(n===cpe?-kk(r,["border"],i):kk(r,["margin"],i)):a+kk(r,upe.slice(n),i)}var fpe={position:"absolute",visibility:"hidden",display:"block"};function gK(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,i=e[0];return i.offsetWidth!==0?n=fK.apply(void 0,e):hpe(i,fpe,function(){n=fK.apply(void 0,e)}),n}HU(["width","height"],function(r){var e=r.charAt(0).toUpperCase()+r.slice(1);Ev["outer".concat(e)]=function(n,i){return n&&gK(n,r,i?dpe:o9)};var t=r==="width"?["Left","Right"]:["Top","Bottom"];Ev[r]=function(n,i){var o=i;if(o!==void 0){if(n){var s=qne(n);return s&&(o+=kk(n,["padding","border"],t)),IL(n,r,o)}return}return n&&gK(n,r,r9)}});function Kne(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var or={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:jne,offset:function(e,t,n){if(typeof t<"u")lpe(e,t,n||{});else return DT(e)},isWindow:VU,each:HU,css:IL,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var i=e.overflow;if(i)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Kne,getWindowScrollLeft:function(e){return zne(e)},getWindowScrollTop:function(e){return $ne(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)or.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Kne(or,Ev);var w3=or.getParent;function s9(r){if(or.isWindow(r)||r.nodeType===9)return null;var e=or.getDocument(r),t=e.body,n,i=or.css(r,"position"),o=i==="fixed"||i==="absolute";if(!o)return r.nodeName.toLowerCase()==="html"?null:w3(r);for(n=w3(r);n&&n!==t&&n.nodeType!==9;n=w3(n))if(i=or.css(n,"position"),i!=="static")return n;return null}var pK=or.getParent;function gpe(r){if(or.isWindow(r)||r.nodeType===9)return!1;var e=or.getDocument(r),t=e.body,n=null;for(n=pK(r);n&&n!==t&&n!==e;n=pK(n)){var i=or.css(n,"position");if(i==="fixed")return!0}return!1}function UU(r,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=s9(r),i=or.getDocument(r),o=i.defaultView||i.parentWindow,s=i.body,a=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==s&&n!==a&&or.css(n,"overflow")!=="visible"){var l=or.offset(n);l.left+=n.clientLeft,l.top+=n.clientTop,t.top=Math.max(t.top,l.top),t.right=Math.min(t.right,l.left+n.clientWidth),t.bottom=Math.min(t.bottom,l.top+n.clientHeight),t.left=Math.max(t.left,l.left)}else if(n===s||n===a)break;n=s9(n)}var u=null;if(!or.isWindow(r)&&r.nodeType!==9){u=r.style.position;var d=or.css(r,"position");d==="absolute"&&(r.style.position="fixed")}var h=or.getWindowScrollLeft(o),p=or.getWindowScrollTop(o),_=or.viewportWidth(o),C=or.viewportHeight(o),S=a.scrollWidth,x=a.scrollHeight,T=window.getComputedStyle(s);if(T.overflowX==="hidden"&&(S=o.innerWidth),T.overflowY==="hidden"&&(x=o.innerHeight),r.style&&(r.style.position=u),e||gpe(r))t.left=Math.max(t.left,h),t.top=Math.max(t.top,p),t.right=Math.min(t.right,h+_),t.bottom=Math.min(t.bottom,p+C);else{var k=Math.max(S,h+_);t.right=Math.min(t.right,k);var M=Math.max(x,p+C);t.bottom=Math.min(t.bottom,M)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function ppe(r,e,t,n){var i=or.clone(r),o={width:e.width,height:e.height};return n.adjustX&&i.left<t.left&&(i.left=t.left),n.resizeWidth&&i.left>=t.left&&i.left+o.width>t.right&&(o.width-=i.left+o.width-t.right),n.adjustX&&i.left+o.width>t.right&&(i.left=Math.max(t.right-o.width,t.left)),n.adjustY&&i.top<t.top&&(i.top=t.top),n.resizeHeight&&i.top>=t.top&&i.top+o.height>t.bottom&&(o.height-=i.top+o.height-t.bottom),n.adjustY&&i.top+o.height>t.bottom&&(i.top=Math.max(t.bottom-o.height,t.top)),or.mix(i,o)}function zU(r){var e,t,n;if(!or.isWindow(r)&&r.nodeType!==9)e=or.offset(r),t=or.outerWidth(r),n=or.outerHeight(r);else{var i=or.getWindow(r);e={left:or.getWindowScrollLeft(i),top:or.getWindowScrollTop(i)},t=or.viewportWidth(i),n=or.viewportHeight(i)}return e.width=t,e.height=n,e}function mK(r,e){var t=e.charAt(0),n=e.charAt(1),i=r.width,o=r.height,s=r.left,a=r.top;return t==="c"?a+=o/2:t==="b"&&(a+=o),n==="c"?s+=i/2:n==="r"&&(s+=i),{left:s,top:a}}function lA(r,e,t,n,i){var o=mK(e,t[1]),s=mK(r,t[0]),a=[s.left-o.left,s.top-o.top];return{left:Math.round(r.left-a[0]+n[0]-i[0]),top:Math.round(r.top-a[1]+n[1]-i[1])}}function _K(r,e,t){return r.left<t.left||r.left+e.width>t.right}function vK(r,e,t){return r.top<t.top||r.top+e.height>t.bottom}function mpe(r,e,t){return r.left>t.right||r.left+e.width<t.left}function _pe(r,e,t){return r.top>t.bottom||r.top+e.height<t.top}function uA(r,e,t){var n=[];return or.each(r,function(i){n.push(i.replace(e,function(o){return t[o]}))}),n}function cA(r,e){return r[e]=-r[e],r}function bK(r,e){var t;return/%$/.test(r)?t=parseInt(r.substring(0,r.length-1),10)/100*e:t=parseInt(r,10),t||0}function CK(r,e){r[0]=bK(r[0],e.width),r[1]=bK(r[1],e.height)}function Gne(r,e,t,n){var i=t.points,o=t.offset||[0,0],s=t.targetOffset||[0,0],a=t.overflow,l=t.source||r;o=[].concat(o),s=[].concat(s),a=a||{};var u={},d=0,h=!!(a&&a.alwaysByViewport),p=UU(l,h),_=zU(l);CK(o,_),CK(s,e);var C=lA(_,e,i,o,s),S=or.merge(_,C);if(p&&(a.adjustX||a.adjustY)&&n){if(a.adjustX&&_K(C,_,p)){var x=uA(i,/[lr]/gi,{l:"r",r:"l"}),T=cA(o,0),k=cA(s,0),M=lA(_,e,x,T,k);mpe(M,_,p)||(d=1,i=x,o=T,s=k)}if(a.adjustY&&vK(C,_,p)){var W=uA(i,/[tb]/gi,{t:"b",b:"t"}),F=cA(o,1),Q=cA(s,1),z=lA(_,e,W,F,Q);_pe(z,_,p)||(d=1,i=W,o=F,s=Q)}d&&(C=lA(_,e,i,o,s),or.mix(S,C));var $=_K(C,_,p),G=vK(C,_,p);if($||G){var Y=i;$&&(Y=uA(i,/[lr]/gi,{l:"r",r:"l"})),G&&(Y=uA(i,/[tb]/gi,{t:"b",b:"t"})),i=Y,o=t.offset||[0,0],s=t.targetOffset||[0,0]}u.adjustX=a.adjustX&&$,u.adjustY=a.adjustY&&G,(u.adjustX||u.adjustY)&&(S=ppe(C,_,p,u))}return S.width!==_.width&&or.css(l,"width",or.width(l)+S.width-_.width),S.height!==_.height&&or.css(l,"height",or.height(l)+S.height-_.height),or.offset(l,{left:S.left,top:S.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:i,offset:o,targetOffset:s,overflow:u}}function vpe(r,e){var t=UU(r,e),n=zU(r);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function $U(r,e,t){var n=t.target||e,i=zU(n),o=!vpe(n,t.overflow&&t.overflow.alwaysByViewport);return Gne(r,i,t,o)}$U.__getOffsetParent=s9;$U.__getVisibleRectForElement=UU;function bpe(r,e,t){var n,i,o=or.getDocument(r),s=o.defaultView||o.parentWindow,a=or.getWindowScrollLeft(s),l=or.getWindowScrollTop(s),u=or.viewportWidth(s),d=or.viewportHeight(s);"pageX"in e?n=e.pageX:n=a+e.clientX,"pageY"in e?i=e.pageY:i=l+e.clientY;var h={left:n,top:i,width:0,height:0},p=n>=0&&n<=a+u&&i>=0&&i<=l+d,_=[t.points[0],"cc"];return Gne(r,h,lK(lK({},t),{},{points:_}),p)}var a9={},Cpe=function(e){};function ype(r,e){}function wpe(r,e){}function Spe(){a9={}}function Yne(r,e,t){!e&&!a9[t]&&(r(!1,t),a9[t]=!0)}function VP(r,e){Yne(ype,r,e)}function Epe(r,e){Yne(wpe,r,e)}VP.preMessage=Cpe;VP.resetWarned=Spe;VP.noteOnce=Epe;function Lpe(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=n.has(o);if(VP(!l,"Warning: There may be circular references"),l)return!1;if(o===s)return!0;if(t&&a>1)return!1;n.add(o);var u=a+1;if(Array.isArray(o)){if(!Array.isArray(s)||o.length!==s.length)return!1;for(var d=0;d<o.length;d++)if(!i(o[d],s[d],u))return!1;return!0}if(o&&s&&Mc(o)==="object"&&Mc(s)==="object"){var h=Object.keys(o);return h.length!==Object.keys(s).length?!1:h.every(function(p){return i(o[p],s[p],u)})}return!1}return i(r,e)}const xpe=function(r){if(!r)return!1;if(r instanceof Element){if(r.offsetParent)return!0;if(r.getBBox){var e=r.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(r.getBoundingClientRect){var i=r.getBoundingClientRect(),o=i.width,s=i.height;if(o||s)return!0}}return!1};var yK=Yx()?De.useLayoutEffect:De.useEffect,l9=function(e,t){var n=De.useRef(!0);yK(function(){return e(n.current)},t),yK(function(){return n.current=!1,function(){n.current=!0}},[])};const Dpe=function(r,e){var t=me.useRef(!1),n=me.useRef(null);function i(){window.clearTimeout(n.current)}function o(s){if(i(),!t.current||s===!0){if(r(s)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,i()}]};var Zne=function(){if(typeof Map<"u")return Map;function r(e,t){var n=-1;return e.some(function(i,o){return i[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var s=o[i];t.call(n,s[1],s[0])}},e}()}(),u9=typeof window<"u"&&typeof document<"u"&&window.document===document,xR=function(){return typeof cm<"u"&&cm.Math===Math?cm:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Ipe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(xR):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),kpe=2;function Tpe(r,e){var t=!1,n=!1,i=0;function o(){t&&(t=!1,r()),n&&a()}function s(){Ipe(o)}function a(){var l=Date.now();if(t){if(l-i<kpe)return;n=!0}else t=!0,n=!1,setTimeout(s,e);i=l}return a}var Npe=20,Ape=["top","right","bottom","left","width","height","size","weight"],Ope=typeof MutationObserver<"u",Rpe=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Tpe(this.refresh.bind(this),Npe)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!u9||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ope?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!u9||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=Ape.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),Xne=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},nx=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||xR},Qne=HP(0,0,0,0);function DR(r){return parseFloat(r)||0}function wK(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var o=r["border-"+i+"-width"];return n+DR(o)},0)}function Mpe(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var o=i[n],s=r["padding-"+o];t[o]=DR(s)}return t}function Ppe(r){var e=r.getBBox();return HP(0,0,e.width,e.height)}function Fpe(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return Qne;var n=nx(r).getComputedStyle(r),i=Mpe(n),o=i.left+i.right,s=i.top+i.bottom,a=DR(n.width),l=DR(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=wK(n,"left","right")+o),Math.round(l+s)!==t&&(l-=wK(n,"top","bottom")+s)),!Wpe(r)){var u=Math.round(a+o)-e,d=Math.round(l+s)-t;Math.abs(u)!==1&&(a-=u),Math.abs(d)!==1&&(l-=d)}return HP(i.left,i.top,a,l)}var Bpe=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof nx(r).SVGGraphicsElement}:function(r){return r instanceof nx(r).SVGElement&&typeof r.getBBox=="function"}}();function Wpe(r){return r===nx(r).document.documentElement}function Vpe(r){return u9?Bpe(r)?Ppe(r):Fpe(r):Qne}function Hpe(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Xne(s,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),s}function HP(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Upe=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=HP(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=Vpe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),zpe=function(){function r(e,t){var n=Hpe(t);Xne(this,{target:e,contentRect:n})}return r}(),$pe=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new Zne,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Upe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new zpe(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),Jne=typeof WeakMap<"u"?new WeakMap:new Zne,eie=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Rpe.getInstance(),n=new $pe(e,t,this);Jne.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){eie.prototype[r]=function(){var e;return(e=Jne.get(this))[r].apply(e,arguments)}});var tie=function(){return typeof xR.ResizeObserver<"u"?xR.ResizeObserver:eie}();function jpe(r,e){return r===e?!0:!r||!e?!1:"pageX"in e&&"pageY"in e?r.pageX===e.pageX&&r.pageY===e.pageY:"clientX"in e&&"clientY"in e?r.clientX===e.clientX&&r.clientY===e.clientY:!1}function qpe(r,e){r!==document.activeElement&&Xk(e,r)&&typeof r.focus=="function"&&r.focus()}function SK(r,e){var t=null,n=null;function i(s){var a=Xs(s,1),l=a[0].target;if(document.documentElement.contains(l)){var u=l.getBoundingClientRect(),d=u.width,h=u.height,p=Math.floor(d),_=Math.floor(h);(t!==p||n!==_)&&Promise.resolve().then(function(){e({width:p,height:_})}),t=p,n=_}}var o=new tie(i);return r&&o.observe(r),function(){o.disconnect()}}function EK(r){return typeof r!="function"?null:r()}function LK(r){return Mc(r)!=="object"||!r?null:r}var Kpe=function(e,t){var n=e.children,i=e.disabled,o=e.target,s=e.align,a=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,d=u===void 0?0:u,h=me.useRef({}),p=me.useRef(),_=me.Children.only(n),C=me.useRef({});C.current.disabled=i,C.current.target=o,C.current.align=s,C.current.onAlign=a;var S=Dpe(function(){var I=C.current,D=I.disabled,O=I.target,V=I.align,j=I.onAlign,ne=p.current;if(!D&&O&&ne){var re,se=EK(O),ie=LK(O);h.current.element=se,h.current.point=ie,h.current.align=V;var A=document,te=A.activeElement;return se&&xpe(se)?re=$U(ne,se,V):ie&&(re=bpe(ne,ie,V)),qpe(te,ne),j&&re&&j(ne,re),!0}return!1},d),x=Xs(S,2),T=x[0],k=x[1],M=me.useState(),W=Xs(M,2),F=W[0],Q=W[1],z=me.useState(),$=Xs(z,2),G=$[0],Y=$[1];return l9(function(){Q(EK(o)),Y(LK(o))}),me.useEffect(function(){(h.current.element!==F||!jpe(h.current.point,G)||!Lpe(h.current.align,s))&&T()}),me.useEffect(function(){var I=SK(p.current,T);return I},[p.current]),me.useEffect(function(){var I=SK(F,T);return I},[F]),me.useEffect(function(){i?k():T()},[i]),me.useEffect(function(){if(l){var I=Ik(window,"resize",T);return I.remove}},[l]),me.useEffect(function(){return function(){k()}},[]),me.useImperativeHandle(t,function(){return{forceAlign:function(){return T(!0)}}}),me.isValidElement(_)&&(_=me.cloneElement(_,{ref:FU(_.ref,p)})),_},nie=me.forwardRef(Kpe);nie.displayName="Align";function c9(){c9=function(){return r};var r={},e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(D,O,V){D[O]=V.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(D,O,V){return Object.defineProperty(D,O,{value:V,enumerable:!0,configurable:!0,writable:!0}),D[O]}try{l({},"")}catch{l=function(V,j,ne){return V[j]=ne}}function u(D,O,V,j){var ne=O&&O.prototype instanceof p?O:p,re=Object.create(ne.prototype),se=new G(j||[]);return n(re,"_invoke",{value:F(D,V,se)}),re}function d(D,O,V){try{return{type:"normal",arg:D.call(O,V)}}catch(j){return{type:"throw",arg:j}}}r.wrap=u;var h={};function p(){}function _(){}function C(){}var S={};l(S,o,function(){return this});var x=Object.getPrototypeOf,T=x&&x(x(Y([])));T&&T!==e&&t.call(T,o)&&(S=T);var k=C.prototype=p.prototype=Object.create(S);function M(D){["next","throw","return"].forEach(function(O){l(D,O,function(V){return this._invoke(O,V)})})}function W(D,O){function V(ne,re,se,ie){var A=d(D[ne],D,re);if(A.type!=="throw"){var te=A.arg,_e=te.value;return _e&&Mc(_e)=="object"&&t.call(_e,"__await")?O.resolve(_e.__await).then(function(de){V("next",de,se,ie)},function(de){V("throw",de,se,ie)}):O.resolve(_e).then(function(de){te.value=de,se(te)},function(de){return V("throw",de,se,ie)})}ie(A.arg)}var j;n(this,"_invoke",{value:function(re,se){function ie(){return new O(function(A,te){V(re,se,A,te)})}return j=j?j.then(ie,ie):ie()}})}function F(D,O,V){var j="suspendedStart";return function(ne,re){if(j==="executing")throw new Error("Generator is already running");if(j==="completed"){if(ne==="throw")throw re;return I()}for(V.method=ne,V.arg=re;;){var se=V.delegate;if(se){var ie=Q(se,V);if(ie){if(ie===h)continue;return ie}}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(j==="suspendedStart")throw j="completed",V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);j="executing";var A=d(D,O,V);if(A.type==="normal"){if(j=V.done?"completed":"suspendedYield",A.arg===h)continue;return{value:A.arg,done:V.done}}A.type==="throw"&&(j="completed",V.method="throw",V.arg=A.arg)}}}function Q(D,O){var V=O.method,j=D.iterator[V];if(j===void 0)return O.delegate=null,V==="throw"&&D.iterator.return&&(O.method="return",O.arg=void 0,Q(D,O),O.method==="throw")||V!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+V+"' method")),h;var ne=d(j,D.iterator,O.arg);if(ne.type==="throw")return O.method="throw",O.arg=ne.arg,O.delegate=null,h;var re=ne.arg;return re?re.done?(O[D.resultName]=re.value,O.next=D.nextLoc,O.method!=="return"&&(O.method="next",O.arg=void 0),O.delegate=null,h):re:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,h)}function z(D){var O={tryLoc:D[0]};1 in D&&(O.catchLoc=D[1]),2 in D&&(O.finallyLoc=D[2],O.afterLoc=D[3]),this.tryEntries.push(O)}function $(D){var O=D.completion||{};O.type="normal",delete O.arg,D.completion=O}function G(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(z,this),this.reset(!0)}function Y(D){if(D){var O=D[o];if(O)return O.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var V=-1,j=function ne(){for(;++V<D.length;)if(t.call(D,V))return ne.value=D[V],ne.done=!1,ne;return ne.value=void 0,ne.done=!0,ne};return j.next=j}}return{next:I}}function I(){return{value:void 0,done:!0}}return _.prototype=C,n(k,"constructor",{value:C,configurable:!0}),n(C,"constructor",{value:_,configurable:!0}),_.displayName=l(C,a,"GeneratorFunction"),r.isGeneratorFunction=function(D){var O=typeof D=="function"&&D.constructor;return!!O&&(O===_||(O.displayName||O.name)==="GeneratorFunction")},r.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,C):(D.__proto__=C,l(D,a,"GeneratorFunction")),D.prototype=Object.create(k),D},r.awrap=function(D){return{__await:D}},M(W.prototype),l(W.prototype,s,function(){return this}),r.AsyncIterator=W,r.async=function(D,O,V,j,ne){ne===void 0&&(ne=Promise);var re=new W(u(D,O,V,j),ne);return r.isGeneratorFunction(O)?re:re.next().then(function(se){return se.done?se.value:re.next()})},M(k),l(k,a,"Generator"),l(k,o,function(){return this}),l(k,"toString",function(){return"[object Generator]"}),r.keys=function(D){var O=Object(D),V=[];for(var j in O)V.push(j);return V.reverse(),function ne(){for(;V.length;){var re=V.pop();if(re in O)return ne.value=re,ne.done=!1,ne}return ne.done=!0,ne}},r.values=Y,G.prototype={constructor:G,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!O)for(var V in this)V.charAt(0)==="t"&&t.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=void 0)},stop:function(){this.done=!0;var O=this.tryEntries[0].completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var V=this;function j(te,_e){return se.type="throw",se.arg=O,V.next=te,_e&&(V.method="next",V.arg=void 0),!!_e}for(var ne=this.tryEntries.length-1;ne>=0;--ne){var re=this.tryEntries[ne],se=re.completion;if(re.tryLoc==="root")return j("end");if(re.tryLoc<=this.prev){var ie=t.call(re,"catchLoc"),A=t.call(re,"finallyLoc");if(ie&&A){if(this.prev<re.catchLoc)return j(re.catchLoc,!0);if(this.prev<re.finallyLoc)return j(re.finallyLoc)}else if(ie){if(this.prev<re.catchLoc)return j(re.catchLoc,!0)}else{if(!A)throw new Error("try statement without catch or finally");if(this.prev<re.finallyLoc)return j(re.finallyLoc)}}}},abrupt:function(O,V){for(var j=this.tryEntries.length-1;j>=0;--j){var ne=this.tryEntries[j];if(ne.tryLoc<=this.prev&&t.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var re=ne;break}}re&&(O==="break"||O==="continue")&&re.tryLoc<=V&&V<=re.finallyLoc&&(re=null);var se=re?re.completion:{};return se.type=O,se.arg=V,re?(this.method="next",this.next=re.finallyLoc,h):this.complete(se)},complete:function(O,V){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&V&&(this.next=V),h},finish:function(O){for(var V=this.tryEntries.length-1;V>=0;--V){var j=this.tryEntries[V];if(j.finallyLoc===O)return this.complete(j.completion,j.afterLoc),$(j),h}},catch:function(O){for(var V=this.tryEntries.length-1;V>=0;--V){var j=this.tryEntries[V];if(j.tryLoc===O){var ne=j.completion;if(ne.type==="throw"){var re=ne.arg;$(j)}return re}}throw new Error("illegal catch attempt")},delegateYield:function(O,V,j){return this.delegate={iterator:Y(O),resultName:V,nextLoc:j},this.method==="next"&&(this.arg=void 0),h}},r}function xK(r,e,t,n,i,o,s){try{var a=r[o](s),l=a.value}catch(u){t(u);return}a.done?e(l):Promise.resolve(l).then(n,i)}function Gpe(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function s(l){xK(o,n,i,s,a,"next",l)}function a(l){xK(o,n,i,s,a,"throw",l)}s(void 0)})}}var DK=["measure","alignPre","align",null,"motion"];const Ype=function(r,e){var t=Qk(null),n=Xs(t,2),i=n[0],o=n[1],s=De.useRef();function a(d){o(d,!0)}function l(){dm.cancel(s.current)}function u(d){l(),s.current=dm(function(){a(function(h){switch(i){case"align":return"motion";case"motion":return"stable"}return h}),d==null||d()})}return De.useEffect(function(){a("measure")},[r]),De.useEffect(function(){switch(i){case"measure":e();break}i&&(s.current=dm(Gpe(c9().mark(function d(){var h,p;return c9().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:h=DK.indexOf(i),p=DK[h+1],p&&h!==-1&&a(p);case 3:case"end":return C.stop()}},d)}))))},[i]),De.useEffect(function(){return function(){l()}},[]),[i,u]},Zpe=function(r){var e=De.useState({width:0,height:0}),t=Xs(e,2),n=t[0],i=t[1];function o(a){var l=a.offsetWidth,u=a.offsetHeight,d=a.getBoundingClientRect(),h=d.width,p=d.height;Math.abs(l-h)<1&&Math.abs(u-p)<1&&(l=h,u=p),i({width:l,height:u})}var s=De.useMemo(function(){var a={};if(r){var l=n.width,u=n.height;r.indexOf("height")!==-1&&u?a.height=u:r.indexOf("minHeight")!==-1&&u&&(a.minHeight=u),r.indexOf("width")!==-1&&l?a.width=l:r.indexOf("minWidth")!==-1&&l&&(a.minWidth=l)}return a},[r,n]);return[s,o]};var iie=De.forwardRef(function(r,e){var t=r.visible,n=r.prefixCls,i=r.className,o=r.style,s=r.children,a=r.zIndex,l=r.stretch,u=r.destroyPopupOnHide,d=r.forceRender,h=r.align,p=r.point,_=r.getRootDomNode,C=r.getClassNameFromAlign,S=r.onAlign,x=r.onMouseEnter,T=r.onMouseLeave,k=r.onMouseDown,M=r.onTouchStart,W=r.onClick,F=De.useRef(),Q=De.useRef(),z=De.useState(),$=Xs(z,2),G=$[0],Y=$[1],I=Zpe(l),D=Xs(I,2),O=D[0],V=D[1];function j(){l&&V(_())}var ne=Ype(t,j),re=Xs(ne,2),se=re[0],ie=re[1],A=De.useState(0),te=Xs(A,2),_e=te[0],de=te[1],Me=De.useRef();l9(function(){se==="alignPre"&&de(0)},[se]);function He(){return p||_}function st(){var dn;(dn=F.current)===null||dn===void 0||dn.forceAlign()}function Dt(dn,sn){var Pt=C(sn);G!==Pt&&Y(Pt),de(function(ei){return ei+1}),se==="align"&&(S==null||S(dn,sn))}l9(function(){se==="align"&&(_e<3?st():ie(function(){var dn;(dn=Me.current)===null||dn===void 0||dn.call(Me)}))},[_e]);var Rt=_i({},Vne(r));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(dn){var sn=Rt[dn];Rt[dn]=function(Pt,ei){return ie(),sn==null?void 0:sn(Pt,ei)}});function lt(){return new Promise(function(dn){Me.current=dn})}De.useEffect(function(){!Rt.motionName&&se==="motion"&&ie()},[Rt.motionName,se]),De.useImperativeHandle(e,function(){return{forceAlign:st,getElement:function(){return Q.current}}});var xt=_i(_i({},O),{},{zIndex:a,opacity:se==="motion"||se==="stable"||!t?void 0:0,pointerEvents:!t&&se!=="stable"?"none":void 0},o),zt=!0;h!=null&&h.points&&(se==="align"||se==="stable")&&(zt=!1);var wt=s;return De.Children.count(s)>1&&(wt=De.createElement("div",{className:"".concat(n,"-content")},s)),De.createElement(Zx,hl({visible:t,ref:Q,leavedClassName:"".concat(n,"-hidden")},Rt,{onAppearPrepare:lt,onEnterPrepare:lt,removeOnLeave:u,forceRender:d}),function(dn,sn){var Pt=dn.className,ei=dn.style,xn=rp(n,i,G,Pt);return De.createElement(nie,{target:He(),key:"popup",ref:F,monitorWindowResize:!0,disabled:zt,align:h,onAlign:Dt},De.createElement("div",{ref:sn,className:xn,onMouseEnter:x,onMouseLeave:T,onMouseDownCapture:k,onTouchStartCapture:M,onClick:W,style:_i(_i({},ei),xt)},wt))})});iie.displayName="PopupInner";var rie=De.forwardRef(function(r,e){var t=r.prefixCls,n=r.visible,i=r.zIndex,o=r.children,s=r.mobile;s=s===void 0?{}:s;var a=s.popupClassName,l=s.popupStyle,u=s.popupMotion,d=u===void 0?{}:u,h=s.popupRender,p=r.onClick,_=De.useRef();De.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return _.current}}});var C=_i({zIndex:i},l),S=o;return De.Children.count(o)>1&&(S=De.createElement("div",{className:"".concat(t,"-content")},o)),h&&(S=h(S)),De.createElement(Zx,hl({visible:n,ref:_,removeOnLeave:!0},d),function(x,T){var k=x.className,M=x.style,W=rp(t,a,k);return De.createElement("div",{ref:T,className:W,onClick:p,style:_i(_i({},M),C)},S)})});rie.displayName="MobilePopupInner";var Xpe=["visible","mobile"],oie=De.forwardRef(function(r,e){var t=r.visible,n=r.mobile,i=wR(r,Xpe),o=De.useState(t),s=Xs(o,2),a=s[0],l=s[1],u=De.useState(!1),d=Xs(u,2),h=d[0],p=d[1],_=_i(_i({},i),{},{visible:a});De.useEffect(function(){l(t),t&&n&&p(xge())},[t,n]);var C=h?De.createElement(rie,hl({},_,{mobile:n,ref:e})):De.createElement(iie,hl({},_,{ref:e}));return De.createElement("div",null,De.createElement(qge,_),C)});oie.displayName="Popup";var IK=De.createContext(null);function S3(){}function Qpe(){return""}function Jpe(r){return r?r.ownerDocument:window.document}var eme=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function tme(r){var e=function(t){jS(i,t);var n=qS(i);function i(o){var s;KC(this,i),s=n.call(this,o),zn(wi(s),"popupRef",De.createRef()),zn(wi(s),"triggerRef",De.createRef()),zn(wi(s),"portalContainer",void 0),zn(wi(s),"attachId",void 0),zn(wi(s),"clickOutsideHandler",void 0),zn(wi(s),"touchOutsideHandler",void 0),zn(wi(s),"contextMenuOutsideHandler1",void 0),zn(wi(s),"contextMenuOutsideHandler2",void 0),zn(wi(s),"mouseDownTimeout",void 0),zn(wi(s),"focusTime",void 0),zn(wi(s),"preClickTime",void 0),zn(wi(s),"preTouchTime",void 0),zn(wi(s),"delayTimer",void 0),zn(wi(s),"hasPopupMouseDown",void 0),zn(wi(s),"onMouseEnter",function(l){var u=s.props.mouseEnterDelay;s.fireEvents("onMouseEnter",l),s.delaySetPopupVisible(!0,u,u?null:l)}),zn(wi(s),"onMouseMove",function(l){s.fireEvents("onMouseMove",l),s.setPoint(l)}),zn(wi(s),"onMouseLeave",function(l){s.fireEvents("onMouseLeave",l),s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),zn(wi(s),"onPopupMouseEnter",function(){s.clearDelayTimer()}),zn(wi(s),"onPopupMouseLeave",function(l){var u;l.relatedTarget&&!l.relatedTarget.setTimeout&&Xk((u=s.popupRef.current)===null||u===void 0?void 0:u.getElement(),l.relatedTarget)||s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),zn(wi(s),"onFocus",function(l){s.fireEvents("onFocus",l),s.clearDelayTimer(),s.isFocusToShow()&&(s.focusTime=Date.now(),s.delaySetPopupVisible(!0,s.props.focusDelay))}),zn(wi(s),"onMouseDown",function(l){s.fireEvents("onMouseDown",l),s.preClickTime=Date.now()}),zn(wi(s),"onTouchStart",function(l){s.fireEvents("onTouchStart",l),s.preTouchTime=Date.now()}),zn(wi(s),"onBlur",function(l){s.fireEvents("onBlur",l),s.clearDelayTimer(),s.isBlurToHide()&&s.delaySetPopupVisible(!1,s.props.blurDelay)}),zn(wi(s),"onContextMenu",function(l){l.preventDefault(),s.fireEvents("onContextMenu",l),s.setPopupVisible(!0,l)}),zn(wi(s),"onContextMenuClose",function(){s.isContextMenuToShow()&&s.close()}),zn(wi(s),"onClick",function(l){if(s.fireEvents("onClick",l),s.focusTime){var u;if(s.preClickTime&&s.preTouchTime?u=Math.min(s.preClickTime,s.preTouchTime):s.preClickTime?u=s.preClickTime:s.preTouchTime&&(u=s.preTouchTime),Math.abs(u-s.focusTime)<20)return;s.focusTime=0}s.preClickTime=0,s.preTouchTime=0,s.isClickToShow()&&(s.isClickToHide()||s.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var d=!s.state.popupVisible;(s.isClickToHide()&&!d||d&&s.isClickToShow())&&s.setPopupVisible(!s.state.popupVisible,l)}),zn(wi(s),"onPopupMouseDown",function(){if(s.hasPopupMouseDown=!0,clearTimeout(s.mouseDownTimeout),s.mouseDownTimeout=window.setTimeout(function(){s.hasPopupMouseDown=!1},0),s.context){var l;(l=s.context).onPopupMouseDown.apply(l,arguments)}}),zn(wi(s),"onDocumentClick",function(l){if(!(s.props.mask&&!s.props.maskClosable)){var u=l.target,d=s.getRootDomNode(),h=s.getPopupDomNode();(!Xk(d,u)||s.isContextMenuOnly())&&!Xk(h,u)&&!s.hasPopupMouseDown&&s.close()}}),zn(wi(s),"getRootDomNode",function(){var l=s.props.getTriggerDOMNode;if(l)return l(s.triggerRef.current);try{var u=ER(s.triggerRef.current);if(u)return u}catch{}return tx.findDOMNode(wi(s))}),zn(wi(s),"getPopupClassNameFromAlign",function(l){var u=[],d=s.props,h=d.popupPlacement,p=d.builtinPlacements,_=d.prefixCls,C=d.alignPoint,S=d.getPopupClassNameFromAlign;return h&&p&&u.push(wge(p,_,l,C)),S&&u.push(S(l)),u.join(" ")}),zn(wi(s),"getComponent",function(){var l=s.props,u=l.prefixCls,d=l.destroyPopupOnHide,h=l.popupClassName,p=l.onPopupAlign,_=l.popupMotion,C=l.popupAnimation,S=l.popupTransitionName,x=l.popupStyle,T=l.mask,k=l.maskAnimation,M=l.maskTransitionName,W=l.maskMotion,F=l.zIndex,Q=l.popup,z=l.stretch,$=l.alignPoint,G=l.mobile,Y=l.forceRender,I=l.onPopupClick,D=s.state,O=D.popupVisible,V=D.point,j=s.getPopupAlign(),ne={};return s.isMouseEnterToShow()&&(ne.onMouseEnter=s.onPopupMouseEnter),s.isMouseLeaveToHide()&&(ne.onMouseLeave=s.onPopupMouseLeave),ne.onMouseDown=s.onPopupMouseDown,ne.onTouchStart=s.onPopupMouseDown,De.createElement(oie,hl({prefixCls:u,destroyPopupOnHide:d,visible:O,point:$&&V,className:h,align:j,onAlign:p,animation:C,getClassNameFromAlign:s.getPopupClassNameFromAlign},ne,{stretch:z,getRootDomNode:s.getRootDomNode,style:x,mask:T,zIndex:F,transitionName:S,maskAnimation:k,maskTransitionName:M,maskMotion:W,ref:s.popupRef,motion:_,mobile:G,forceRender:Y,onClick:I}),typeof Q=="function"?Q():Q)}),zn(wi(s),"attachParent",function(l){dm.cancel(s.attachId);var u=s.props,d=u.getPopupContainer,h=u.getDocument,p=s.getRootDomNode(),_;d?(p||d.length===0)&&(_=d(p)):_=h(s.getRootDomNode()).body,_?_.appendChild(l):s.attachId=dm(function(){s.attachParent(l)})}),zn(wi(s),"getContainer",function(){if(!s.portalContainer){var l=s.props.getDocument,u=l(s.getRootDomNode()).createElement("div");u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.width="100%",s.portalContainer=u}return s.attachParent(s.portalContainer),s.portalContainer}),zn(wi(s),"setPoint",function(l){var u=s.props.alignPoint;!u||!l||s.setState({point:{pageX:l.pageX,pageY:l.pageY}})}),zn(wi(s),"handlePortalUpdate",function(){s.state.prevPopupVisible!==s.state.popupVisible&&s.props.afterPopupVisibleChange(s.state.popupVisible)}),zn(wi(s),"triggerContextValue",{onPopupMouseDown:s.onPopupMouseDown});var a;return"popupVisible"in o?a=!!o.popupVisible:a=!!o.defaultPopupVisible,s.state={prevPopupVisible:a,popupVisible:a},eme.forEach(function(l){s["fire".concat(l)]=function(u){s.fireEvents(l,u)}}),s}return GC(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var s=this.props,a=this.state;if(a.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=s.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ik(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||s.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ik(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||s.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Ik(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Ik(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),dm.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var s;return((s=this.popupRef.current)===null||s===void 0?void 0:s.getElement())||null}},{key:"getPopupAlign",value:function(){var s=this.props,a=s.popupPlacement,l=s.popupAlign,u=s.builtinPlacements;return a&&u?yge(u,a,l):l}},{key:"setPopupVisible",value:function(s,a){var l=this.props.alignPoint,u=this.state.popupVisible;this.clearDelayTimer(),u!==s&&("popupVisible"in this.props||this.setState({popupVisible:s,prevPopupVisible:u}),this.props.onPopupVisibleChange(s)),l&&a&&s&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(s,a,l){var u=this,d=a*1e3;if(this.clearDelayTimer(),d){var h=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){u.setPopupVisible(s,h),u.clearDelayTimer()},d)}else this.setPopupVisible(s,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(s){var a=this.props.children.props,l=this.props;return a[s]&&l[s]?this["fire".concat(s)]:a[s]||l[s]}},{key:"isClickToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var s=this.props.action;return s==="contextMenu"||s.length===1&&s[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var s;(s=this.popupRef.current)===null||s===void 0||s.forceAlign()}}},{key:"fireEvents",value:function(s,a){var l=this.props.children.props[s];l&&l(a);var u=this.props[s];u&&u(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var s=this.state.popupVisible,a=this.props,l=a.children,u=a.forceRender,d=a.alignPoint,h=a.className,p=a.autoDestroy,_=De.Children.only(l),C={key:"trigger"};this.isContextMenuToShow()?C.onContextMenu=this.onContextMenu:C.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(C.onClick=this.onClick,C.onMouseDown=this.onMouseDown,C.onTouchStart=this.onTouchStart):(C.onClick=this.createTwoChains("onClick"),C.onMouseDown=this.createTwoChains("onMouseDown"),C.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(C.onMouseEnter=this.onMouseEnter,d&&(C.onMouseMove=this.onMouseMove)):C.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?C.onMouseLeave=this.onMouseLeave:C.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(C.onFocus=this.onFocus,C.onBlur=this.onBlur):(C.onFocus=this.createTwoChains("onFocus"),C.onBlur=this.createTwoChains("onBlur"));var S=rp(_&&_.props&&_.props.className,h);S&&(C.className=S);var x=_i({},C);BU(_)&&(x.ref=FU(this.triggerRef,_.ref));var T=De.cloneElement(_,x),k;return(s||this.popupRef.current||u)&&(k=De.createElement(r,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!s&&p&&(k=null),De.createElement(IK.Provider,{value:this.triggerContextValue},T,k)}}],[{key:"getDerivedStateFromProps",value:function(s,a){var l=s.popupVisible,u={};return l!==void 0&&a.popupVisible!==l&&(u.popupVisible=l,u.prevPopupVisible=a.popupVisible),u}}]),i}(De.Component);return zn(e,"contextType",IK),zn(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Qpe,getDocument:Jpe,onPopupVisibleChange:S3,afterPopupVisibleChange:S3,onPopupAlign:S3,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const nme=tme(kne);var kg={adjustX:1,adjustY:1},Tg=[0,0],ime={left:{points:["cr","cl"],overflow:kg,offset:[-4,0],targetOffset:Tg},right:{points:["cl","cr"],overflow:kg,offset:[4,0],targetOffset:Tg},top:{points:["bc","tc"],overflow:kg,offset:[0,-4],targetOffset:Tg},bottom:{points:["tc","bc"],overflow:kg,offset:[0,4],targetOffset:Tg},topLeft:{points:["bl","tl"],overflow:kg,offset:[0,-4],targetOffset:Tg},leftTop:{points:["tr","tl"],overflow:kg,offset:[-4,0],targetOffset:Tg},topRight:{points:["br","tr"],overflow:kg,offset:[0,-4],targetOffset:Tg},rightTop:{points:["tl","tr"],overflow:kg,offset:[4,0],targetOffset:Tg},bottomRight:{points:["tr","br"],overflow:kg,offset:[0,4],targetOffset:Tg},rightBottom:{points:["bl","br"],overflow:kg,offset:[4,0],targetOffset:Tg},bottomLeft:{points:["tl","bl"],overflow:kg,offset:[0,4],targetOffset:Tg},leftBottom:{points:["br","bl"],overflow:kg,offset:[-4,0],targetOffset:Tg}};function rme(r){var e=r.showArrow,t=r.arrowContent,n=r.children,i=r.prefixCls,o=r.id,s=r.overlayInnerStyle,a=r.className,l=r.style;return De.createElement("div",{className:rp("".concat(i,"-content"),a),style:l},e!==!1&&De.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},t),De.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:s},typeof n=="function"?n():n))}var ome=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],sme=function(e,t){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,s=e.mouseEnterDelay,a=s===void 0?0:s,l=e.mouseLeaveDelay,u=l===void 0?.1:l,d=e.overlayStyle,h=e.prefixCls,p=h===void 0?"rc-tooltip":h,_=e.children,C=e.onVisibleChange,S=e.afterVisibleChange,x=e.transitionName,T=e.animation,k=e.motion,M=e.placement,W=M===void 0?"right":M,F=e.align,Q=F===void 0?{}:F,z=e.destroyTooltipOnHide,$=z===void 0?!1:z,G=e.defaultVisible,Y=e.getTooltipContainer,I=e.overlayInnerStyle,D=e.arrowContent,O=e.overlay,V=e.id,j=e.showArrow,ne=j===void 0?!0:j,re=wR(e,ome),se=De.useRef(null);De.useImperativeHandle(t,function(){return se.current});var ie=_i({},re);"visible"in e&&(ie.popupVisible=e.visible);var A=function(){return De.createElement(rme,{showArrow:ne,arrowContent:D,key:"content",prefixCls:p,id:V,overlayInnerStyle:I},O)},te=!1,_e=!1;if(typeof $=="boolean")te=$;else if($&&Mc($)==="object"){var de=$.keepParent;te=de===!0,_e=de===!1}return De.createElement(nme,hl({popupClassName:n,prefixCls:p,popup:A,action:o,builtinPlacements:ime,popupPlacement:W,ref:se,popupAlign:Q,getPopupContainer:Y,onPopupVisibleChange:C,afterPopupVisibleChange:S,popupTransitionName:x,popupAnimation:T,popupMotion:k,defaultPopupVisible:G,destroyPopupOnHide:te,autoDestroy:_e,mouseLeaveDelay:u,popupStyle:d,mouseEnterDelay:a},ie),_)};const ame=De.forwardRef(sme);var lme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const jU=r=>{var{overlay:e,children:t,placement:n="bottom",trigger:i="hover",overlayClassName:o,mouseEnterDelay:s}=r,a=lme(r,["overlay","children","placement","trigger","overlayClassName","mouseEnterDelay"]);return e?me.createElement(ame,Object.assign({overlayClassName:oi(lne(),o),placement:n,trigger:i,overlay:e,mouseEnterDelay:s||.1},a),t):t||null};var sie=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const qU=Ri("action-bar"),ume=Gt(qU,"container"),KU=Gt(qU,"item"),cme=li(KU,"disabled"),dme=li(KU,"checked");function hme(r){const{title:e,name:t,contextMenu:n=[],onClick:i,icon:o,onContextMenuClick:s}=r,a=sie(r,["title","name","contextMenu","onClick","icon","onContextMenuClick"]),l=r.disabled?cme:null,u=r.checked?dme:null,d=De.useRef(null),h=De.useRef(),p=De.useCallback((x,T)=>{var k;s==null||s(x,T),(k=h.current)===null||k===void 0||k.hide()},[n]),_=()=>me.createElement(Rc,{onClick:p,data:n});De.useEffect(()=>(n.length>0&&(h.current=BP({anchor:d.current,render:_})),function(){var T;(T=h.current)===null||T===void 0||T.dispose()}));const C=function(x){if(r.disabled){x.preventDefault();return}i&&i(x,r),n.length>-1&&h.current&&h.current.show({x:x.clientX,y:x.clientY})},S=Xw(a);return me.createElement("li",Object.assign({ref:d,className:oi(KU,l,u),onClick:C},S),me.createElement(jU,{overlay:me.createElement("span",null,e)},me.createElement(go,{type:o},t)))}function s2(r){const{data:e=[],onClick:t,onContextMenuClick:n,className:i,style:o,title:s}=r,a=sie(r,["data","onClick","onContextMenuClick","className","style","title"]),l=oi(qU,i),u=e.map((h,p)=>me.createElement(hme,Object.assign({key:h.id},h,{onContextMenuClick:n,"data-index":p,onClick:OU(t,h.onClick)}))),d=Xw(a);return me.createElement("div",Object.assign({className:l,style:o,title:s},d),me.createElement("ul",{className:ume},u))}const GU=Ri("breadcrumb"),fme=Gt(GU,"item"),gme=Gt(GU,"label");var kK=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function aie(r){const{onClick:e,className:t,separator:n,routes:i=[],style:o,title:s,role:a}=r,l=kK(r,["onClick","className","separator","routes","style","title","role"]),u=oi(GU,t),d=i.length,h=n||me.createElement(go,{type:"chevron-right"}),p=Xw(l);return me.createElement("div",Object.assign({className:u,role:a,style:o,title:s},p),i.map((_,C)=>{const{id:S,className:x,title:T,style:k,href:M,icon:W,render:F,name:Q}=_,z=kK(_,["id","className","title","style","href","icon","render","name"]);return me.createElement("a",Object.assign({key:S,className:oi(fme,x),title:T,style:k,href:M,tabIndex:0,onContextMenu:$=>$.preventDefault(),onClick:$=>e==null?void 0:e($,_)},Xw(z)),me.createElement(go,{type:W}),me.createElement("span",{className:gme},F?F(_):Q),d-C>1?h:null)}))}var pme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const UP=Ri("btn"),mme=li(UP,"normal"),_me=li(UP,"large"),vme=li(UP,"disabled"),Qw=De.forwardRef(function(r,e){const{className:t,children:n,size:i="normal"}=r,o=pme(r,["className","children","size"]),s=r.disabled?vme:null,l=oi(t,UP,i==="large"?_me:mme,s);return me.createElement("button",Object.assign({ref:e,className:l},o),n)});var bme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const YU=Ri("checkbox"),Cme=Gt(YU,"label"),yme=Gt(YU,"input");function wme(r){const{className:e,id:t,children:n,value:i,onChange:o,title:s,role:a,style:l}=r,u=bme(r,["className","id","children","value","onChange","title","role","style"]),d=oi(YU,e),h=_=>{o==null||o(_,{id:t,value:_.target.value})},p=Xw(u);return me.createElement("div",Object.assign({className:d,role:a,style:l,title:s},p),me.createElement("input",{id:t.toString(),type:"checkbox",className:yme,value:i,onChange:h}),me.createElement("label",{htmlFor:t.toString(),className:oi(Cme,"codicon")},n))}const KS=Ri("collapse"),Sme=Gt(KS,"item"),lie=Gt(KS,"pane"),Eme=li(lie,"collapsing"),Lme=li(KS,"active"),uie=Gt(KS,"header"),xme=Gt(uie,"title"),TK=Gt(KS,"content"),Dme=Gt(KS,"extra");var Ime=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const kme="tool-bar",Tme=Ri(kme);function a2(r){const{className:e}=r,t=Ime(r,["className"]);return me.createElement("div",{className:oi(Tme,e)},me.createElement(s2,Object.assign({},t)))}function Rb({children:r,style:e,className:t,role:n,title:i}){return me.createElement("div",{role:n,title:i,className:t,style:e},r)}const Xx=Ri("split"),Nme=li(Xx,"dragging"),Ame=li(Xx,"vertical"),Ome=li(Xx,"horizontal"),Rme=Gt(Xx,"pane"),l2=Gt(Xx,"sash"),Mme=li(l2,"vertical"),Pme=li(l2,"horizontal"),Fme=li(l2,"disabled"),Bme=li(l2,"hover");var Wme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Vme(r){var{className:e,onDragStart:t,onDragging:n,onDragEnd:i}=r,o=Wme(r,["className","onDragStart","onDragging","onDragEnd"]);const s=De.useRef(),[a,l]=De.useState(!1),[u,d]=De.useState(!1);return De.useEffect(function(){return function(){clearTimeout(s.current)}},[]),me.createElement("div",Object.assign({role:"Resizer",className:oi(l2,(u||a)&&Bme,e),onMouseEnter:()=>{s.current=setTimeout(()=>{l(!0)},150)},onMouseLeave:()=>{s.current&&(l(!1),clearTimeout(s.current))},onMouseDown:h=>{d(!0),t(h);const p=function(C){n(C)},_=function(C){d(!1),i(C),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",_)}},o))}var Hme=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const E3=function(r,e,t=1/0){return typeof r>"u"?t:typeof r=="number"?r:r.endsWith("%")?e*(+r.replace("%","")/100):r.endsWith("px")?+r.replace("px",""):t},IT=r=>{var e,{children:t,sizes:n,allowResize:i=!0,showSashes:o=!0,split:s="vertical",className:a,sashClassName:l,paneClassName:u,resizerSize:d=4,onChange:h}=r,p=Hme(r,["children","sizes","allowResize","showSashes","split","className","sashClassName","paneClassName","resizerSize","onChange"]);const _=De.useRef({x:0,y:0}),C=De.useRef(null),[S,x]=De.useState({}),[T,k]=De.useState(!1);De.useEffect(()=>{const O=new ResizeObserver(()=>{x(C.current.getBoundingClientRect())});return O.observe(C.current),()=>{O.disconnect()}},[]);const{sizeName:M,sPos:W,sAxis:F}=De.useMemo(function(){return{sizeName:s==="vertical"?"width":"height",sPos:s==="vertical"?"left":"top",sAxis:s==="vertical"?"x":"y"}},[s]),Q=(e=S[M])!==null&&e!==void 0?e:0,z=De.useMemo(function(){return t.map(O=>{const V=[0,1/0];if(O.type===Rb){const{minSize:j,maxSize:ne}=O.props;V[0]=E3(j,Q,0),V[1]=E3(ne,Q)}return V})},[t,Q]),$=De.useMemo(()=>typeof i=="boolean"?new Array(t.length).fill(i):t.map((O,V)=>{var j;return(j=i[V])!==null&&j!==void 0?j:!0}),[t.length,i]),G=De.useMemo(function(){let O=0,V=0,j=0;const ne=t.map((se,ie)=>{const A=E3(n[ie],Q);return A===1/0?O++:(V+=A,$[ie]&&(j+=A)),A});if($.filter(se=>se===!0).length===0)return ne;if(V>Q||!O&&V<Q){const se=(V-Q)/j;return ne.map((ie,A)=>ie===1/0?0:$[A]?ie-ie*se:ie)}if(O>0){const se=(Q-V)/O;return ne.map(ie=>ie===1/0?se:ie)}return ne},[...n,t.length,Q,...$]),Y=De.useMemo(function(){return G.reduce(function(O,V){return[...O,O[O.length-1]+V]},[0])},[...G]),I=De.useCallback(function(O){var V,j;_.current={x:(V=O.pageX)!==null&&V!==void 0?V:O.screenX,y:(j=O.pageY)!==null&&j!==void 0?j:O.screenY},k(!0)},[]),D=De.useCallback(function(O,V){var j,ne;let se={x:(j=O.pageX)!==null&&j!==void 0?j:O.screenX,y:(ne=O.pageY)!==null&&ne!==void 0?ne:O.screenY}[F]-_.current[F];const ie=-Math.min(G[V]-z[V][0],z[V+1][1]-G[V+1]),A=Math.min(G[V+1]-z[V+1][0],z[V][1]-G[V]);se<ie&&(se=ie),se>A&&(se=A);const te=[...G];te[V]+=se,te[V+1]-=se,h==null||h(te)},[z,h,G]);return me.createElement("div",Object.assign({className:oi(Xx,T&&Nme,s==="vertical"&&Ame,s==="horizontal"&&Ome,a),ref:C},p),t.map((O,V)=>{const j=oi(Rme,u),ne={[M]:G[V],[W]:Y[V]};let re=null;if(V>0){const se=o===!1||(o==null?void 0:o[V-1])===!1;re=me.createElement(Vme,{className:oi(se&&Fme,s==="vertical"?Mme:Pme,l),style:{[M]:d,[W]:Y[V]-d/2},onDragStart:I,onDragging:ie=>D(ie,V-1),onDragEnd:()=>{k(!1)}})}if(O.type===Rb){const{className:se="",style:ie={}}=O.props;return me.createElement(me.Fragment,{key:V},re,n2(O,{className:oi(j,se),style:Object.assign(Object.assign({},ie),ne)}))}return me.createElement(me.Fragment,{key:V},re,me.createElement(Rb,{className:j,style:ne},O))}))};var Ume=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const LO=220,hb=26;function cie(r){var{data:e=[],activePanelKeys:t,className:n,title:i,style:o,role:s,onCollapseChange:a,onToolbarClick:l,onResize:u}=r,d=Ume(r,["data","activePanelKeys","className","title","style","role","onCollapseChange","onToolbarClick","onResize"]);const[h,p]=De.useState(new Array(e.length)),[_,C]=De.useState(!1),S=De.useRef(null),[x,T]=De.useState(e.map(j=>j.hidden?0:hb)),k=De.useRef([]),M=De.useRef(!0),W=j=>j===void 0,F=(j,ne)=>{for(let re=0;re<j.length;re++)if(j[re]!==ne[re])return re+1;return-1},Q=j=>{const ne=F(x,j);ne!==-1&&(k.current[ne]=j[ne],u==null||u(j),T(j))},z=(j,ne,re)=>{j.stopPropagation(),l==null||l(ne,re)},$=(j,ne)=>ne?ne(j):null,G=(j,ne)=>{const re=[...h];W(re[ne])?re[ne]=j:delete re[ne],a==null||a(re),p(re.concat())},Y=()=>{C(!0),I(),setTimeout(()=>{C(!1)},300)},I=()=>{if(h.filter(ne=>!W(ne)).length){const{height:ne}=S.current.getBoundingClientRect();let re=ne,se=0;const ie=e.map((_e,de)=>{var Me,He,st,Dt;if(_e.hidden)return 0;if(!h.includes(_e.id))return re=re-hb,hb;if(((Me=_e.config)===null||Me===void 0?void 0:Me.grow)===0){const xt=(st=(He=S.current)===null||He===void 0?void 0:He.querySelector(`.${TK}[data-collapse-index='${de}']`))===null||st===void 0?void 0:st.querySelector(`[data-content='${_e.id}']`);if(!xt)return re=re-hb,hb;const{height:zt}=xt.getBoundingClientRect(),wt=zt+hb;return wt>LO?(re=re-LO,LO):(re=re-wt,wt)}return typeof k.current[de]<"u"?(re=re-k.current[de],k.current[de]):(se=se+(((Dt=_e.config)===null||Dt===void 0?void 0:Dt.grow)||1),"auto")}),A=re/se,te=ie.map((_e,de)=>{var Me;return _e==="auto"?A*(((Me=e[de].config)===null||Me===void 0?void 0:Me.grow)||1):_e});u==null||u(te),T(te)}else{const ne=e.map(re=>re.hidden?0:hb);u==null||u(ne),T(ne)}},{nextSashes:D,allowResize:O}=De.useMemo(function(){var j,ne;const re=[];for(let se=1;se<h.length;se++){const ie=!W(h[se-1]),A=((ne=(j=e[se-1])===null||j===void 0?void 0:j.config)===null||ne===void 0?void 0:ne.grow)!==0,te=!W(h[se]),_e=ie&&A&&te;re.push(_e)}return{nextSashes:re,allowResize:e.map((se,ie)=>{var A;return((A=se==null?void 0:se.config)===null||A===void 0?void 0:A.grow)===0?!1:!W(h[ie])})}},[h,e]);De.useLayoutEffect(()=>{M.current||Y(),M.current=!1},[h,e]),De.useLayoutEffect(()=>{Array.isArray(t)&&p(t)},[t]);const V=Xw(d);return me.createElement("div",Object.assign({ref:S,className:oi(KS,n),title:i,style:o,role:s},V),me.createElement(IT,{sizes:x,onChange:Q,split:"horizontal",allowResize:O,showSashes:D,paneClassName:oi(lie,_&&Eme)},e.map((j,ne)=>{const re=h.includes(j.id);return me.createElement(Rb,{key:j.id,minSize:hb},me.createElement("div",{className:oi(j.className,Sme,re&&Lme),"data-collapse-id":j.id},me.createElement("div",{className:uie,tabIndex:0,onClick:()=>G(j.id,ne)},me.createElement(go,{type:re?"chevron-down":"chevron-right"}),me.createElement("span",{className:xme},j.name),me.createElement("div",{className:Dme},re&&me.createElement(a2,{key:j.id,data:j.toolbar||[],onClick:(se,ie)=>z(se,ie,j)}))),me.createElement("div",{className:TK,tabIndex:0,"data-collapse-index":ne},$(j,j.renderPanel))))})))}var L3;function die(r){if(typeof document>"u")return 0;if(r||L3===void 0){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div"),n=t.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;i===o&&(o=t.clientWidth),document.body.removeChild(t),L3=i-o}return L3}function ix(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r)return{};var t=e.element,n=t===void 0?document.body:t,i={},o=Object.keys(r);return o.forEach(function(s){i[s]=n.style[s]}),o.forEach(function(s){n.style[s]=r[s]}),i}function zme(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var x3={};const NK=function(r){if(!(!zme()&&!r)){var e="ant-scrolling-effect",t=new RegExp("".concat(e),"g"),n=document.body.className;if(r){if(!t.test(n))return;ix(x3),x3={},document.body.className=n.replace(t,"").trim();return}var i=die();if(i&&(x3=ix({position:"relative",width:"calc(100% - ".concat(i,"px)")}),!t.test(n))){var o="".concat(n," ").concat(e);document.body.className=o.trim()}}};function $me(r){if(Array.isArray(r))return Q6(r)}function jme(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function qme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AK(r){return $me(r)||jme(r)||Tne(r)||qme()}var Kme=0,Ng=[],hie="ant-scrolling-effect",D3=new RegExp("".concat(hie),"g"),I3=new Map,Gme=GC(function r(e){var t=this;KC(this,r),zn(this,"lockTarget",void 0),zn(this,"options",void 0),zn(this,"getContainer",function(){var n;return(n=t.options)===null||n===void 0?void 0:n.container}),zn(this,"reLock",function(n){var i=Ng.find(function(o){var s=o.target;return s===t.lockTarget});i&&t.unLock(),t.options=n,i&&(i.options=n,t.lock())}),zn(this,"lock",function(){var n;if(!Ng.some(function(l){var u=l.target;return u===t.lockTarget})){if(Ng.some(function(l){var u,d=l.options;return(d==null?void 0:d.container)===((u=t.options)===null||u===void 0?void 0:u.container)})){Ng=[].concat(AK(Ng),[{target:t.lockTarget,options:t.options}]);return}var i=0,o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&getComputedStyle(o).overflow!=="hidden"&&(i=die());var s=o.className;if(Ng.filter(function(l){var u,d=l.options;return(d==null?void 0:d.container)===((u=t.options)===null||u===void 0?void 0:u.container)}).length===0&&I3.set(o,ix({width:i!==0?"calc(100% - ".concat(i,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!D3.test(s)){var a="".concat(s," ").concat(hie);o.className=a.trim()}Ng=[].concat(AK(Ng),[{target:t.lockTarget,options:t.options}])}}),zn(this,"unLock",function(){var n,i=Ng.find(function(a){var l=a.target;return l===t.lockTarget});if(Ng=Ng.filter(function(a){var l=a.target;return l!==t.lockTarget}),!(!i||Ng.some(function(a){var l,u=a.options;return(u==null?void 0:u.container)===((l=i.options)===null||l===void 0?void 0:l.container)}))){var o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body,s=o.className;D3.test(s)&&(ix(I3.get(o),{element:o}),I3.delete(o),o.className=o.className.replace(D3,"").trim())}}),this.lockTarget=Kme++,this.options=e}),rb=0,Tk=Yx(),dA={},ME=function(e){if(!Tk)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(Mc(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},Yme=function(r){jS(t,r);var e=qS(t);function t(n){var i;return KC(this,t),i=e.call(this,n),zn(wi(i),"container",void 0),zn(wi(i),"componentRef",De.createRef()),zn(wi(i),"rafId",void 0),zn(wi(i),"scrollLocker",void 0),zn(wi(i),"renderComponent",void 0),zn(wi(i),"updateScrollLocker",function(o){var s=o||{},a=s.visible,l=i.props,u=l.getContainer,d=l.visible;d&&d!==a&&Tk&&ME(u)!==i.scrollLocker.getContainer()&&i.scrollLocker.reLock({container:ME(u)})}),zn(wi(i),"updateOpenCount",function(o){var s=o||{},a=s.visible,l=s.getContainer,u=i.props,d=u.visible,h=u.getContainer;d!==a&&Tk&&ME(h)===document.body&&(d&&!a?rb+=1:o&&(rb-=1));var p=typeof h=="function"&&typeof l=="function";(p?h.toString()!==l.toString():h!==l)&&i.removeCurrentContainer()}),zn(wi(i),"attachToParent",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(o||i.container&&!i.container.parentNode){var s=ME(i.props.getContainer);return s?(s.appendChild(i.container),!0):!1}return!0}),zn(wi(i),"getContainer",function(){return Tk?(i.container||(i.container=document.createElement("div"),i.attachToParent(!0)),i.setWrapperClassName(),i.container):null}),zn(wi(i),"setWrapperClassName",function(){var o=i.props.wrapperClassName;i.container&&o&&o!==i.container.className&&(i.container.className=o)}),zn(wi(i),"removeCurrentContainer",function(){var o,s;(o=i.container)===null||o===void 0||(s=o.parentNode)===null||s===void 0||s.removeChild(i.container)}),zn(wi(i),"switchScrollingEffect",function(){rb===1&&!Object.keys(dA).length?(NK(),dA=ix({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):rb||(ix(dA),dA={},NK(!0))}),i.scrollLocker=new Gme({container:ME(n.getContainer)}),i}return GC(t,[{key:"componentDidMount",value:function(){var i=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=dm(function(){i.forceUpdate()}))}},{key:"componentDidUpdate",value:function(i){this.updateOpenCount(i),this.updateScrollLocker(i),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var i=this.props,o=i.visible,s=i.getContainer;Tk&&ME(s)===document.body&&(rb=o&&rb?rb-1:rb),this.removeCurrentContainer(),dm.cancel(this.rafId)}},{key:"render",value:function(){var i=this.props,o=i.children,s=i.forceRender,a=i.visible,l=null,u={getOpenCount:function(){return rb},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(s||a||this.componentRef.current)&&(l=De.createElement(kne,{getContainer:this.getContainer,ref:this.componentRef},o(u))),l}}]),t}(De.Component),Ti={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Ti.F1&&t<=Ti.F12)return!1;switch(t){case Ti.ALT:case Ti.CAPS_LOCK:case Ti.CONTEXT_MENU:case Ti.CTRL:case Ti.DOWN:case Ti.END:case Ti.ESC:case Ti.HOME:case Ti.INSERT:case Ti.LEFT:case Ti.MAC_FF_META:case Ti.META:case Ti.NUMLOCK:case Ti.NUM_CENTER:case Ti.PAGE_DOWN:case Ti.PAGE_UP:case Ti.PAUSE:case Ti.PRINT_SCREEN:case Ti.RIGHT:case Ti.SHIFT:case Ti.UP:case Ti.WIN_KEY:case Ti.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Ti.ZERO&&e<=Ti.NINE||e>=Ti.NUM_ZERO&&e<=Ti.NUM_MULTIPLY||e>=Ti.A&&e<=Ti.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Ti.SPACE:case Ti.QUESTION_MARK:case Ti.NUM_PLUS:case Ti.NUM_MINUS:case Ti.NUM_PERIOD:case Ti.NUM_DIVISION:case Ti.SEMICOLON:case Ti.DASH:case Ti.EQUALS:case Ti.COMMA:case Ti.PERIOD:case Ti.SLASH:case Ti.APOSTROPHE:case Ti.SINGLE_QUOTE:case Ti.OPEN_SQUARE_BRACKET:case Ti.BACKSLASH:case Ti.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Zme(){var r=_i({},ufe);return r.useId}var OK=0;function Xme(r){var e=De.useState("ssr-id"),t=Xs(e,2),n=t[0],i=t[1],o=Zme(),s=o==null?void 0:o();return De.useEffect(function(){if(!o){var a=OK;OK+=1,i("rc_unique_".concat(a))}},[]),r||s||n}var Qme=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Jme=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,e_e="".concat(Qme," ").concat(Jme).split(/[\s\n]+/),t_e="aria-",n_e="data-";function RK(r,e){return r.indexOf(e)===0}function i_e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=_i({},e);var n={};return Object.keys(r).forEach(function(i){(t.aria&&(i==="role"||RK(i,t_e))||t.data&&RK(i,n_e)||t.attr&&e_e.includes(i))&&(n[i]=r[i])}),n}function r_e(r){var e=r.prefixCls,t=r.style,n=r.visible,i=r.maskProps,o=r.motionName;return De.createElement(Zx,{key:"mask",visible:n,motionName:o,leavedClassName:"".concat(e,"-mask-hidden")},function(s){var a=s.className,l=s.style;return De.createElement("div",hl({style:_i(_i({},l),t),className:rp("".concat(e,"-mask"),a)},i))})}function MK(r,e,t){var n=e;return!n&&t&&(n="".concat(r,"-").concat(t)),n}function PK(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function o_e(r){var e=r.getBoundingClientRect(),t={left:e.left,top:e.top},n=r.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=PK(i),t.top+=PK(i,!0),t}const s_e=De.memo(function(r){var e=r.children;return e},function(r,e){var t=e.shouldUpdate;return!t});var FK={width:0,height:0,overflow:"hidden",outline:"none"},a_e=me.forwardRef(function(r,e){var t=r.prefixCls,n=r.className,i=r.style,o=r.title,s=r.ariaId,a=r.footer,l=r.closable,u=r.closeIcon,d=r.onClose,h=r.children,p=r.bodyStyle,_=r.bodyProps,C=r.modalRender,S=r.onMouseDown,x=r.onMouseUp,T=r.holderRef,k=r.visible,M=r.forceRender,W=r.width,F=r.height,Q=De.useRef(),z=De.useRef();me.useImperativeHandle(e,function(){return{focus:function(){var V;(V=Q.current)===null||V===void 0||V.focus()},changeActive:function(V){var j=document,ne=j.activeElement;V&&ne===z.current?Q.current.focus():!V&&ne===Q.current&&z.current.focus()}}});var $={};W!==void 0&&($.width=W),F!==void 0&&($.height=F);var G;a&&(G=me.createElement("div",{className:"".concat(t,"-footer")},a));var Y;o&&(Y=me.createElement("div",{className:"".concat(t,"-header")},me.createElement("div",{className:"".concat(t,"-title"),id:s},o)));var I;l&&(I=me.createElement("button",{type:"button",onClick:d,"aria-label":"Close",className:"".concat(t,"-close")},u||me.createElement("span",{className:"".concat(t,"-close-x")})));var D=me.createElement("div",{className:"".concat(t,"-content")},I,Y,me.createElement("div",hl({className:"".concat(t,"-body"),style:p},_),h),G);return me.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:T,style:_i(_i({},i),$),className:rp(t,n),onMouseDown:S,onMouseUp:x},me.createElement("div",{tabIndex:0,ref:Q,style:FK,"aria-hidden":"true"}),me.createElement(s_e,{shouldUpdate:k||M},C?C(D):D),me.createElement("div",{tabIndex:0,ref:z,style:FK,"aria-hidden":"true"}))}),fie=De.forwardRef(function(r,e){var t=r.prefixCls,n=r.title,i=r.style,o=r.className,s=r.visible,a=r.forceRender,l=r.destroyOnClose,u=r.motionName,d=r.ariaId,h=r.onVisibleChanged,p=r.mousePosition,_=De.useRef(),C=De.useState(),S=Xs(C,2),x=S[0],T=S[1],k={};x&&(k.transformOrigin=x);function M(){var W=o_e(_.current);T(p?"".concat(p.x-W.left,"px ").concat(p.y-W.top,"px"):"")}return De.createElement(Zx,{visible:s,onVisibleChanged:h,onAppearPrepare:M,onEnterPrepare:M,forceRender:a,motionName:u,removeOnLeave:l,ref:_},function(W,F){var Q=W.className,z=W.style;return De.createElement(a_e,hl({},r,{ref:e,title:n,ariaId:d,prefixCls:t,holderRef:F,style:_i(_i(_i({},z),i),k),className:rp(o,Q)}))})});fie.displayName="Content";function BK(r){var e=r.prefixCls,t=e===void 0?"rc-dialog":e,n=r.zIndex,i=r.visible,o=i===void 0?!1:i,s=r.keyboard,a=s===void 0?!0:s,l=r.focusTriggerAfterClose,u=l===void 0?!0:l,d=r.scrollLocker,h=r.wrapStyle,p=r.wrapClassName,_=r.wrapProps,C=r.onClose,S=r.afterClose,x=r.transitionName,T=r.animation,k=r.closable,M=k===void 0?!0:k,W=r.mask,F=W===void 0?!0:W,Q=r.maskTransitionName,z=r.maskAnimation,$=r.maskClosable,G=$===void 0?!0:$,Y=r.maskStyle,I=r.maskProps,D=r.rootClassName,O=De.useRef(),V=De.useRef(),j=De.useRef(),ne=De.useState(o),re=Xs(ne,2),se=re[0],ie=re[1],A=Xme();function te(lt){if(lt){if(!Xk(V.current,document.activeElement)){var xt;O.current=document.activeElement,(xt=j.current)===null||xt===void 0||xt.focus()}}else{if(ie(!1),F&&O.current&&u){try{O.current.focus({preventScroll:!0})}catch{}O.current=null}se&&(S==null||S())}}function _e(lt){C==null||C(lt)}var de=De.useRef(!1),Me=De.useRef(),He=function(){clearTimeout(Me.current),de.current=!0},st=function(){Me.current=setTimeout(function(){de.current=!1})},Dt=null;G&&(Dt=function(xt){de.current?de.current=!1:V.current===xt.target&&_e(xt)});function Rt(lt){if(a&&lt.keyCode===Ti.ESC){lt.stopPropagation(),_e(lt);return}o&&lt.keyCode===Ti.TAB&&j.current.changeActive(!lt.shiftKey)}return De.useEffect(function(){return o&&ie(!0),function(){}},[o]),De.useEffect(function(){return function(){clearTimeout(Me.current)}},[]),De.useEffect(function(){return se?(d==null||d.lock(),d==null?void 0:d.unLock):function(){}},[se,d]),De.createElement("div",hl({className:rp("".concat(t,"-root"),D)},i_e(r,{data:!0})),De.createElement(r_e,{prefixCls:t,visible:F&&o,motionName:MK(t,Q,z),style:_i({zIndex:n},Y),maskProps:I}),De.createElement("div",hl({tabIndex:-1,onKeyDown:Rt,className:rp("".concat(t,"-wrap"),p),ref:V,onClick:Dt,style:_i(_i({zIndex:n},h),{},{display:se?null:"none"})},_),De.createElement(fie,hl({},r,{onMouseDown:He,onMouseUp:st,ref:j,closable:M,ariaId:A,prefixCls:t,visible:o,onClose:_e,onVisibleChanged:te,motionName:MK(t,x,T)}))))}var gie=function(e){var t=e.visible,n=e.getContainer,i=e.forceRender,o=e.destroyOnClose,s=o===void 0?!1:o,a=e.afterClose,l=De.useState(t),u=Xs(l,2),d=u[0],h=u[1];return De.useEffect(function(){t&&h(!0)},[t]),n===!1?De.createElement(BK,hl({},e,{getOpenCount:function(){return 2}})):!i&&s&&!d?null:De.createElement(Yme,{visible:t,forceRender:i,getContainer:n},function(p){return De.createElement(BK,hl({},e,{destroyOnClose:s,afterClose:function(){a==null||a(),h(!1)}},p))})};gie.displayName="Dialog";const ZU=Ri("modal"),jb=Ri("confirm"),l_e=Gt(ZU,"close"),u_e=li(l_e,"x"),c_e=li(ZU,"centered"),d_e=Gt(jb,"container"),h_e=Gt(jb,"indicator"),f_e=r=>typeof r=="string"?Gt(jb,h9[r]):"",g_e=Gt(jb,"content"),XU=Gt(jb,"message"),p_e=Gt(jb,"btns"),m_e=li(jb,"centered"),__e=li(XU,"text"),v_e=li(XU,"detail");var b_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const dL=[];let d9;const WK=r=>{d9={x:r.pageX,y:r.pageY},setTimeout(()=>{d9=null},100)},C_e=me.createElement("span",{className:u_e},me.createElement(go,{type:"close"})),pie=r=>{De.useEffect(()=>(document.documentElement.addEventListener("click",WK,!0),()=>{document.documentElement.removeEventListener("click",WK,!0)}),[]);const e=C=>{const{onCancel:S}=r;S==null||S(C)},t=C=>{const{onOk:S}=r;S==null||S(C)},{footer:n,visible:i,wrapClassName:o,centered:s,getContainer:a,closeIcon:l,cancelText:u="Cancel",okText:d="Ok"}=r,h=b_e(r,["footer","visible","wrapClassName","centered","getContainer","closeIcon","cancelText","okText"]),p=oi(o,{[c_e]:!!s}),_=()=>{const{footer:C,cancelButtonProps:S,okButtonProps:x}=r;return C!==void 0?C:me.createElement(me.Fragment,null,me.createElement(Qw,Object.assign({onClick:e},S),u),me.createElement(Qw,Object.assign({onClick:t},x),d))};return me.createElement(gie,Object.assign({},h,{getContainer:a,prefixCls:ZU,wrapClassName:p,footer:_(),visible:i,mousePosition:d9,onClose:e,closeIcon:C_e}))},VK=r=>{const e=De.useRef(!1),{close:t}=r,n=a=>{!a||!a.then||a.then((...l)=>{t==null||t(...l)},l=>{console.error(l),e.current=!1})},i=()=>{const{actionFn:a,close:l}=r;if(e.current)return;if(e.current=!0,!a){l==null||l();return}let u;if(a.length)u=a(l),e.current=!1;else if(u=a(),!u){l==null||l();return}n(u)},{children:o,buttonProps:s}=r;return me.createElement(Qw,Object.assign({onClick:i},s),o)},y_e=r=>{const{actions:e,icon:t,onCancel:n,onOk:i,close:o,maskStyle:s,okText:a="Ok",okButtonProps:l,cancelText:u="Cancel",cancelButtonProps:d,okCancel:h,bodyStyle:p,closable:_=!1,className:C,width:S=520,style:x={},mask:T=!0,maskClosable:k=!1,transitionName:M="zoom",maskTransitionName:W="fade",type:F,visible:Q}=r,z=f_e(F),$=oi(jb,z,C),G=h&&me.createElement(VK,{actionFn:n,close:o,buttonProps:d},u);return me.createElement(pie,{prefixCls:jb,className:$,wrapClassName:oi({[m_e]:!!r.centered}),onCancel:()=>o({triggerCancel:!0}),transitionName:M,maskTransitionName:W,mask:T,maskClosable:k,style:x,width:S,closable:_,footer:"",title:"",maskStyle:s,visible:Q},me.createElement("div",{className:d_e,style:p},me.createElement("div",{className:g_e},me.createElement("div",{className:h_e}," ",t," "),me.createElement("div",{className:XU},r.title!==void 0&&me.createElement("span",{className:__e},r.title),me.createElement("div",{className:v_e},r.content))),me.createElement("div",{className:p_e},e===void 0?me.createElement(me.Fragment,null,G,me.createElement(VK,{actionFn:i,close:o,buttonProps:l},a)):e)))};var w_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function mie(r){const e=document.createElement("div");document.body.appendChild(e);const t=Object.assign(Object.assign({},r),{close:o,visible:!0});function n(...s){const a=s.some(u=>u&&u.triggerCancel);r.onCancel&&a&&r.onCancel(...s),une(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let u=0;u<dL.length;u++)if(dL[u]===o){dL.splice(u,1);break}}function i(s){var{okText:a,cancelText:l}=s,u=w_e(s,["okText","cancelText"]);CR(me.createElement(y_e,Object.assign({okText:a,cancelText:l},u)),e)}function o(...s){n(...s)}return i(t),dL.push(o),{destroy:o}}function S_e(r){return Object.assign({type:"warning",okCancel:!1,icon:me.createElement(go,{type:"warning"})},r)}function E_e(r){return Object.assign({type:"confirm",okCancel:!0,icon:me.createElement(go,{type:"warning"})},r)}function _ie(r){return mie(S_e(r))}const u2=pie;var h9;(function(r){r.warning="warning",r.confirm="confirm"})(h9||(h9={}));u2.warning=_ie;u2.warn=_ie;u2.confirm=function(e){return mie(E_e(e))};u2.destroyAll=function(){for(;dL.length;){const e=dL.pop();e&&e()}};var L_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const HK=Ri("drop-down"),QU=De.forwardRef((r,e)=>{const{className:t,overlay:n,children:i,placement:o="right",trigger:s="click"}=r,a=L_e(r,["className","overlay","children","placement","trigger"]),l=i2({render:()=>n});De.useImperativeHandle(e,()=>({contextView:l,dispose:()=>{l.hide()}}));const u=oi(HK,li(HK,o),t),d={[dne(s)]:function(h){if(!l)return;const _=h.currentTarget.getBoundingClientRect();let C=qq(o,_);if(l.show(C),o==="left"||o==="top"){const S=l.view.getBoundingClientRect();S.x=_.x,S.y=_.y,C=qq(o,S),l.show(C)}}};return me.createElement("div",Object.assign({className:u},d,a),i)});var f9;(function(r){r.ENTER="Enter"})(f9||(f9={}));var x_e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Qx=Ri("input"),D_e=li(Qx,"normal"),I_e=li(Qx,"lg"),k_e=li(Qx,"disabled");function T_e(r){return typeof r>"u"||r===null?"":r}function vie(r,e,t){t&&t(e)}function N_e(r,e){return oi(Qx,{[D_e]:r==="normal"},{[I_e]:r==="large"},{[k_e]:e})}let JU=class extends me.Component{constructor(e){super(e),this.input=null,this.saveInput=n=>{this.input=n},this.handleChange=n=>{const{onChange:i}=this.props;this.setValue(n.target.value),typeof i=="function"&&vie(this.input,n,i)},this.handleKeyDown=n=>{const{onPressEnter:i,onKeyDown:o}=this.props;n.key===f9.ENTER&&(i==null||i(n)),o==null||o(n)};const t=typeof e.value>"u"?e.defaultValue:e.value;this.state={value:t,prevValue:e.value}}static getDerivedStateFromProps(e,{prevValue:t}){const n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}setValue(e){this.props.value===void 0&&this.setState({value:e})}render(){const{value:e}=this.state,t=this.props,{className:n,size:i="normal",disabled:o=!1,placeholder:s,style:a}=t,l=x_e(t,["className","size","disabled","placeholder","style"]);return me.createElement("input",Object.assign({value:e,style:a,placeholder:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:oi(n,N_e(i,o)),ref:this.saveInput},l))}};JU.defaultProps={type:"text"};function g9(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return me.Children.forEach(r,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?t=t.concat(g9(n)):Dne.isFragment(n)&&n.props?t=t.concat(g9(n.props.children,e)):t.push(n))}),t}var oC=new Map;function A_e(r){r.forEach(function(e){var t,n=e.target;(t=oC.get(n))===null||t===void 0||t.forEach(function(i){return i(n)})})}var bie=new tie(A_e);function O_e(r,e){oC.has(r)||(oC.set(r,new Set),bie.observe(r)),oC.get(r).add(e)}function R_e(r,e){oC.has(r)&&(oC.get(r).delete(e),oC.get(r).size||(bie.unobserve(r),oC.delete(r)))}var M_e=function(r){jS(t,r);var e=qS(t);function t(){return KC(this,t),e.apply(this,arguments)}return GC(t,[{key:"render",value:function(){return this.props.children}}]),t}(De.Component),p9=De.createContext(null);function P_e(r){var e=r.children,t=r.onBatchResize,n=De.useRef(0),i=De.useRef([]),o=De.useContext(p9),s=De.useCallback(function(a,l,u){n.current+=1;var d=n.current;i.current.push({size:a,element:l,data:u}),Promise.resolve().then(function(){d===n.current&&(t==null||t(i.current),i.current=[])}),o==null||o(a,l,u)},[t,o]);return De.createElement(p9.Provider,{value:s},e)}function F_e(r,e){var t=r.children,n=r.disabled,i=De.useRef(null),o=De.useRef(null),s=De.useContext(p9),a=typeof t=="function",l=a?t(i):t,u=De.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!a&&De.isValidElement(l)&&BU(l),h=d?l.ref:null,p=De.useMemo(function(){return FU(h,i)},[h,i]),_=function(){return ER(i.current)||ER(o.current)};De.useImperativeHandle(e,function(){return _()});var C=De.useRef(r);C.current=r;var S=De.useCallback(function(x){var T=C.current,k=T.onResize,M=T.data,W=x.getBoundingClientRect(),F=W.width,Q=W.height,z=x.offsetWidth,$=x.offsetHeight,G=Math.floor(F),Y=Math.floor(Q);if(u.current.width!==G||u.current.height!==Y||u.current.offsetWidth!==z||u.current.offsetHeight!==$){var I={width:G,height:Y,offsetWidth:z,offsetHeight:$};u.current=I;var D=z===Math.round(F)?F:z,O=$===Math.round(Q)?Q:$,V=_i(_i({},I),{},{offsetWidth:D,offsetHeight:O});s==null||s(V,x,M),k&&Promise.resolve().then(function(){k(V,x)})}},[]);return De.useEffect(function(){var x=_();return x&&!n&&O_e(x,S),function(){return R_e(x,S)}},[i.current,n]),De.createElement(M_e,{ref:o},d?De.cloneElement(l,{ref:p}):l)}var B_e=De.forwardRef(F_e),W_e="rc-observer-key";function V_e(r,e){var t=r.children,n=typeof t=="function"?[t]:g9(t);return n.map(function(i,o){var s=(i==null?void 0:i.key)||"".concat(W_e,"-").concat(o);return De.createElement(B_e,hl({},r,{key:s,ref:o===0?e:void 0}),i)})}var Cie=De.forwardRef(V_e);Cie.Collection=P_e;function H_e(r,e){var t=_i({},r);return Array.isArray(e)&&e.forEach(function(n){delete t[n]}),t}var U_e=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,z_e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],k3={},Ag;function $_e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=r.getAttribute("id")||r.getAttribute("data-reactid")||r.getAttribute("name");if(e&&k3[t])return k3[t];var n=window.getComputedStyle(r),i=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),a=z_e.map(function(u){return"".concat(u,":").concat(n.getPropertyValue(u))}).join(";"),l={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:i};return e&&t&&(k3[t]=l),l}function j_e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ag||(Ag=document.createElement("textarea"),Ag.setAttribute("tab-index","-1"),Ag.setAttribute("aria-hidden","true"),document.body.appendChild(Ag)),r.getAttribute("wrap")?Ag.setAttribute("wrap",r.getAttribute("wrap")):Ag.removeAttribute("wrap");var i=$_e(r,e),o=i.paddingSize,s=i.borderSize,a=i.boxSizing,l=i.sizingStyle;Ag.setAttribute("style","".concat(l,";").concat(U_e)),Ag.value=r.value||r.placeholder||"";var u=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,h=Ag.scrollHeight,p;if(a==="border-box"?h+=s:a==="content-box"&&(h-=o),t!==null||n!==null){Ag.value=" ";var _=Ag.scrollHeight-o;t!==null&&(u=_*t,a==="border-box"&&(u=u+o+s),h=Math.max(u,h)),n!==null&&(d=_*n,a==="border-box"&&(d=d+o+s),p=h>d?"":"hidden",h=Math.min(d,h))}return{height:h,minHeight:u,maxHeight:d,overflowY:p,resize:"none"}}var T3,UK;function q_e(){return UK||(UK=1,T3=function(e,t,n,i){var o=n?n.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<s.length;u++){var d=s[u];if(!l(d))return!1;var h=e[d],p=t[d];if(o=n?n.call(i,h,p,d):void 0,o===!1||o===void 0&&h!==p)return!1}return!0}),T3}var K_e=q_e();const G_e=xm(K_e);var J1;(function(r){r[r.NONE=0]="NONE",r[r.RESIZING=1]="RESIZING",r[r.RESIZED=2]="RESIZED"})(J1||(J1={}));var Y_e=function(r){jS(t,r);var e=qS(t);function t(n){var i;return KC(this,t),i=e.call(this,n),i.nextFrameActionId=void 0,i.resizeFrameId=void 0,i.textArea=void 0,i.saveTextArea=function(o){i.textArea=o},i.handleResize=function(o){var s=i.state.resizeStatus,a=i.props,l=a.autoSize,u=a.onResize;s===J1.NONE&&(typeof u=="function"&&u(o),l&&i.resizeOnNextFrame())},i.resizeOnNextFrame=function(){cancelAnimationFrame(i.nextFrameActionId),i.nextFrameActionId=requestAnimationFrame(i.resizeTextarea)},i.resizeTextarea=function(){var o=i.props.autoSize;if(!(!o||!i.textArea)){var s=o.minRows,a=o.maxRows,l=j_e(i.textArea,!1,s,a);i.setState({textareaStyles:l,resizeStatus:J1.RESIZING},function(){cancelAnimationFrame(i.resizeFrameId),i.resizeFrameId=requestAnimationFrame(function(){i.setState({resizeStatus:J1.RESIZED},function(){i.resizeFrameId=requestAnimationFrame(function(){i.setState({resizeStatus:J1.NONE}),i.fixFirefoxAutoScroll()})})})})}},i.renderTextArea=function(){var o=i.props,s=o.prefixCls,a=s===void 0?"rc-textarea":s,l=o.autoSize,u=o.onResize,d=o.className,h=o.disabled,p=i.state,_=p.textareaStyles,C=p.resizeStatus,S=H_e(i.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),x=rp(a,d,zn({},"".concat(a,"-disabled"),h));"value"in S&&(S.value=S.value||"");var T=_i(_i(_i({},i.props.style),_),C===J1.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return De.createElement(Cie,{onResize:i.handleResize,disabled:!(l||u)},De.createElement("textarea",hl({},S,{className:x,style:T,ref:i.saveTextArea})))},i.state={textareaStyles:{},resizeStatus:J1.NONE},i}return GC(t,[{key:"componentDidUpdate",value:function(i){(i.value!==this.props.value||!G_e(i.autoSize,this.props.autoSize))&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var i=this.textArea.selectionStart,o=this.textArea.selectionEnd;this.textArea.setSelectionRange(i,o)}}catch{}}},{key:"render",value:function(){return this.renderTextArea()}}]),t}(De.Component),Z_e=function(r){jS(t,r);var e=qS(t);function t(n){var i;KC(this,t),i=e.call(this,n),i.resizableTextArea=void 0,i.focus=function(){i.resizableTextArea.textArea.focus()},i.saveTextArea=function(s){i.resizableTextArea=s},i.handleChange=function(s){var a=i.props.onChange;i.setValue(s.target.value,function(){i.resizableTextArea.resizeTextarea()}),a&&a(s)},i.handleKeyDown=function(s){var a=i.props,l=a.onPressEnter,u=a.onKeyDown;s.keyCode===13&&l&&l(s),u&&u(s)};var o=typeof n.value>"u"||n.value===null?n.defaultValue:n.value;return i.state={value:o},i}return GC(t,[{key:"setValue",value:function(i,o){"value"in this.props||this.setState({value:i},o)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return De.createElement(Y_e,hl({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(i){return"value"in i?{value:i.value}:null}}]),t}(De.Component),hA={},N3={exports:{}},zK;function ez(){return zK||(zK=1,function(r){function e(t){return t&&t.__esModule?t:{default:t}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(N3)),N3.exports}var A3={exports:{}},O3={exports:{}},$K;function X_e(){return $K||($K=1,function(r){function e(t){if(Array.isArray(t))return t}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(O3)),O3.exports}var R3={exports:{}},jK;function Q_e(){return jK||(jK=1,function(r){function e(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,s,a,l,u=[],d=!0,h=!1;try{if(a=(i=i.call(t)).next,n===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(o=a.call(i)).done)&&(u.push(o.value),u.length!==n);d=!0);}catch(p){h=!0,s=p}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(h)throw s}}return u}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(R3)),R3.exports}var M3={exports:{}},P3={exports:{}},qK;function J_e(){return qK||(qK=1,function(r){function e(t,n){(n==null||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(P3)),P3.exports}var KK;function eve(){return KK||(KK=1,function(r){var e=J_e();function t(n,i){if(n){if(typeof n=="string")return e(n,i);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(n,i)}}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports}(M3)),M3.exports}var F3={exports:{}},GK;function tve(){return GK||(GK=1,function(r){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(F3)),F3.exports}var YK;function yie(){return YK||(YK=1,function(r){var e=X_e(),t=Q_e(),n=eve(),i=tve();function o(s,a){return e(s)||t(s,a)||n(s,a)||i()}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports}(A3)),A3.exports}var fA={},B3={exports:{}},W3={exports:{}},ZK;function nve(){return ZK||(ZK=1,function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(W3)),W3.exports}var XK;function tz(){return XK||(XK=1,function(r){var e=nve().default;function t(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(t=function(l){return l?s:o})(i)}function n(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||e(i)!=="object"&&typeof i!="function")return{default:i};var s=t(o);if(s&&s.has(i))return s.get(i);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in i)if(u!=="default"&&Object.prototype.hasOwnProperty.call(i,u)){var d=l?Object.getOwnPropertyDescriptor(i,u):null;d&&(d.get||d.set)?Object.defineProperty(a,u,d):a[u]=i[u]}return a.default=i,s&&s.set(i,a),a}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports}(B3)),B3.exports}var QK;function ive(){if(QK)return fA;QK=1;var r=tz().default;Object.defineProperty(fA,"__esModule",{value:!0}),fA.default=t;var e=r(qx());function t(n){var i=e.useRef();i.current=n;var o=e.useCallback(function(){for(var s,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(s=i.current)===null||s===void 0?void 0:s.call.apply(s,[i].concat(l))},[]);return o}return fA}var qy={},gA={},JK;function rve(){if(JK)return gA;JK=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.default=r;function r(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return gA}var eG;function ove(){if(eG)return qy;eG=1;var r=ez().default,e=tz().default;Object.defineProperty(qy,"__esModule",{value:!0}),qy.useLayoutUpdateEffect=qy.default=void 0;var t=e(qx()),n=r(rve()),i=(0,n.default)()?t.useLayoutEffect:t.useEffect,o=function(u,d){var h=t.useRef(!0);i(function(){return u(h.current)},d),i(function(){return h.current=!1,function(){h.current=!0}},[])},s=function(u,d){o(function(h){if(!h)return u()},d)};qy.useLayoutUpdateEffect=s;var a=o;return qy.default=a,qy}var pA={},tG;function sve(){if(tG)return pA;tG=1;var r=tz().default,e=ez().default;Object.defineProperty(pA,"__esModule",{value:!0}),pA.default=i;var t=e(yie()),n=r(qx());function i(o){var s=n.useRef(!1),a=n.useState(o),l=(0,t.default)(a,2),u=l[0],d=l[1];n.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]);function h(p,_){_&&s.current||d(p)}return[u,h]}return pA}var nG;function ave(){if(nG)return hA;nG=1;var r=ez().default;Object.defineProperty(hA,"__esModule",{value:!0}),hA.default=s;var e=r(yie()),t=r(ive()),n=ove(),i=r(sve());function o(a){return a!==void 0}function s(a,l){var u=l||{},d=u.defaultValue,h=u.value,p=u.onChange,_=u.postState,C=(0,i.default)(function(){return o(h)?h:o(d)?typeof d=="function"?d():d:typeof a=="function"?a():a}),S=(0,e.default)(C,2),x=S[0],T=S[1],k=h!==void 0?h:x,M=_?_(k):k,W=(0,t.default)(p),F=(0,i.default)([k]),Q=(0,e.default)(F,2),z=Q[0],$=Q[1];(0,n.useLayoutUpdateEffect)(function(){var Y=z[0];x!==Y&&W(x,Y)},[z]),(0,n.useLayoutUpdateEffect)(function(){o(h)||T(h)},[h]);var G=(0,t.default)(function(Y,I){T(Y,I),$([k],I)});return[M,G]}return hA}var lve=ave();const uve=xm(lve);var cve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const wie=Gt(Qx,"textarea"),dve=li(wie,"show-count"),hve=r=>{var{showCount:e=!1,maxLength:t,className:n,style:i,onChange:o}=r,s=cve(r,["showCount","maxLength","className","style","onChange"]);const a=De.useRef(null),[l,u]=uve(s.defaultValue,{value:s.value}),d=De.useRef(s.value);De.useEffect(()=>{(s.value!==void 0||d.current!==s.value)&&(u(s.value),d.current=s.value)},[s.value,d.current]);const h=T=>{s.value===void 0&&u(T)},p=T=>{h(T.target.value),vie(a.current,T,o)},_=Ao.omit(s,["value"]),C=me.createElement(Z_e,Object.assign({},_,{value:l,maxLength:t,className:oi(n&&!e?[n]:""),style:e?{}:i,prefixCls:Qx,onChange:p,ref:a}));let S=T_e(l);const x=Number(t)>0;if(S=x?[...S].slice(0,t).join(""):S,e){const k=`${[...S].length}${x?` / ${t}`:""}`;return me.createElement("div",{className:oi(n,wie,dve),style:i,"data-count":k},C)}return C};JU.TextArea=hve;var fve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const c2=Ri("list"),gve=li(c2,"vertical"),pve=li(c2,"horizontal");function mve(r){const{children:e,current:t,disable:n,onClick:i,onSelect:o,className:s,mode:a}=r,l=fve(r,["children","current","disable","onClick","onSelect","className","mode"]),[u,d]=De.useState(t),[h,p]=De.useState(n);De.useEffect(()=>{u!==t&&d(t),n!==h&&p(n)},[t,n]);const _=(x,T)=>{i==null||i(x,T),T&&(T.id!==u&&d(T.id),o==null||o(x,T))},S=oi(c2,s,a==="horizontal"?pve:gve);return me.createElement("ul",Object.assign({},l,{className:S}),n2(e,{active:u,disable:h,onClick:_}))}var _ve=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const nz=Gt(c2,"item"),vve=Gt(c2,"label"),bve=li(nz,"active"),iG=li(nz,"disabled");function Cve(r){const{id:e,onClick:t,disabled:n,active:i,disable:o,className:s,children:a}=r,l=_ve(r,["id","onClick","disabled","active","disable","className","children"]),u=p=>{t==null||t(p,r)};let d="";(n!==void 0||n===!0)&&(d=iG),o===e&&(d=iG);const h=oi(nz,s,d,i===e?bve:"");return me.createElement("li",Object.assign({id:e.toString(),className:h},l,{onClick:u}),me.createElement("span",{className:vve},a))}class yve{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Sie=new yve;function ti(r){Zv(r)||Sie.onUnexpectedError(r)}function Pl(r){Zv(r)||Sie.onUnexpectedExternalError(r)}function rG(r){if(r instanceof Error){let{name:e,message:t}=r;const n=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:n}}return r}const m9="Canceled";function Zv(r){return r instanceof Error&&r.name===m9&&r.message===m9}function GS(){const r=new Error(m9);return r.name=r.message,r}function hm(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function wve(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}class Sve extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function qb(r){const e=this;let t=!1,n;return function(){return t||(t=!0,n=r.apply(e,arguments)),n}}var Zi;(function(r){function e(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function n(){return t}r.empty=n;function*i(k){yield k}r.single=i;function o(k){return k||t}r.from=o;function s(k){return!k||k[Symbol.iterator]().next().done===!0}r.isEmpty=s;function a(k){return k[Symbol.iterator]().next().value}r.first=a;function l(k,M){for(const W of k)if(M(W))return!0;return!1}r.some=l;function u(k,M){for(const W of k)if(M(W))return W}r.find=u;function*d(k,M){for(const W of k)M(W)&&(yield W)}r.filter=d;function*h(k,M){let W=0;for(const F of k)yield M(F,W++)}r.map=h;function*p(...k){for(const M of k)for(const W of M)yield W}r.concat=p;function*_(k){for(const M of k)for(const W of M)yield W}r.concatNested=_;function C(k,M,W){let F=W;for(const Q of k)F=M(F,Q);return F}r.reduce=C;function*S(k,M,W=k.length){for(M<0&&(M+=k.length),W<0?W+=k.length:W>k.length&&(W=k.length);M<W;M++)yield k[M]}r.slice=S;function x(k,M=Number.POSITIVE_INFINITY){const W=[];if(M===0)return[W,k];const F=k[Symbol.iterator]();for(let Q=0;Q<M;Q++){const z=F.next();if(z.done)return[W,r.empty()];W.push(z.value)}return[W,{[Symbol.iterator](){return F}}]}r.consume=x;function T(k,M,W=(F,Q)=>F===Q){const F=k[Symbol.iterator](),Q=M[Symbol.iterator]();for(;;){const z=F.next(),$=Q.next();if(z.done!==$.done)return!1;if(z.done)return!0;if(!W(z.value,$.value))return!1}}r.equals=T})(Zi||(Zi={}));class Eve extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function iz(r){return typeof r.dispose=="function"&&r.dispose.length===0}function nr(r){if(Zi.is(r)){let e=[];for(const t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new Eve(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function gC(...r){return Hi(()=>nr(r))}function Hi(r){return{dispose:qb(()=>{r()})}}class Nt{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{nr(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Nt.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Nt.DISABLE_DISPOSED_WARNING=!1;class ot{constructor(){this._store=new Nt,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}ot.None=Object.freeze({dispose(){}});class lc{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Lve{constructor(e){this.object=e}dispose(){}}let qs=class _9{constructor(e){this.element=e,this.next=_9.Undefined,this.prev=_9.Undefined}};qs.Undefined=new qs(void 0);class kh{constructor(){this._first=qs.Undefined,this._last=qs.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===qs.Undefined}clear(){let e=this._first;for(;e!==qs.Undefined;){const t=e.next;e.prev=qs.Undefined,e.next=qs.Undefined,e=t}this._first=qs.Undefined,this._last=qs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new qs(e);if(this._first===qs.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==qs.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==qs.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==qs.Undefined&&e.next!==qs.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===qs.Undefined&&e.next===qs.Undefined?(this._first=qs.Undefined,this._last=qs.Undefined):e.next===qs.Undefined?(this._last=this._last.prev,this._last.next=qs.Undefined):e.prev===qs.Undefined&&(this._first=this._first.next,this._first.prev=qs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==qs.Undefined;)yield e.element,e=e.next}}var V3;const xO="en";let IR=!1,kR=!1,DO=!1,Eie=!1,Lie=!1,rz=!1,Nk,IO=xO,xve,G1;const ms=typeof self=="object"?self:typeof cm=="object"?cm:{};let vd;typeof ms.vscode<"u"&&typeof ms.vscode.process<"u"?vd=ms.vscode.process:typeof Sv<"u"&&(vd=Sv);const Dve=typeof((V3=vd==null?void 0:vd.versions)===null||V3===void 0?void 0:V3.electron)=="string",Ive=Dve&&(vd==null?void 0:vd.type)==="renderer";if(typeof navigator=="object"&&!Ive)G1=navigator.userAgent,IR=G1.indexOf("Windows")>=0,kR=G1.indexOf("Macintosh")>=0,rz=(G1.indexOf("Macintosh")>=0||G1.indexOf("iPad")>=0||G1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,DO=G1.indexOf("Linux")>=0,Lie=!0,Nk=navigator.language,IO=Nk;else if(typeof vd=="object"){IR=vd.platform==="win32",kR=vd.platform==="darwin",DO=vd.platform==="linux",DO&&vd.env.SNAP&&vd.env.SNAP_REVISION,Nk=xO,IO=xO;const r=vd.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];Nk=e.locale,IO=t||xO,xve=e._translationsConfigFile}catch{}Eie=!0}else console.error("Unable to resolve platform.");const Ol=IR,ji=kR,Pc=DO,fm=Eie,Jx=Lie,Av=rz,kve=G1,Tve=IO,Nve=Nk,Ave=(()=>{if(typeof ms.postMessage=="function"&&!ms.importScripts){let r=[];ms.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){const o=r[n];if(o.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;r.push({id:n,callback:t}),ms.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})(),xf=kR||rz?2:IR?1:3;let oG=!0,sG=!1;function xie(){if(!sG){sG=!0;const r=new Uint8Array(2);r[0]=1,r[1]=2,oG=new Uint16Array(r.buffer)[0]===512+1}return oG}const Ove=ms.performance&&typeof ms.performance.now=="function";class Ov{constructor(e){this._highResolution=Ove&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new Ov(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ms.performance.now():Date.now()}}var Sn;(function(r){r.None=()=>ot.None;function e(k){return(M,W=null,F)=>{let Q=!1,z;return z=k($=>{if(!Q)return z?z.dispose():Q=!0,M.call(W,$)},null,F),Q&&z.dispose(),z}}r.once=e;function t(k,M){return l((W,F=null,Q)=>k(z=>W.call(F,M(z)),null,Q))}r.map=t;function n(k,M){return l((W,F=null,Q)=>k(z=>{M(z),W.call(F,z)},null,Q))}r.forEach=n;function i(k,M){return l((W,F=null,Q)=>k(z=>M(z)&&W.call(F,z),null,Q))}r.filter=i;function o(k){return k}r.signal=o;function s(...k){return(M,W=null,F)=>gC(...k.map(Q=>Q(z=>M.call(W,z),null,F)))}r.any=s;function a(k,M,W){let F=W;return t(k,Q=>(F=M(F,Q),F))}r.reduce=a;function l(k){let M;const W=new Fe({onFirstListenerAdd(){M=k(W.fire,W)},onLastListenerRemove(){M.dispose()}});return W.event}function u(k,M,W=100,F=!1,Q){let z,$,G,Y=0;const I=new Fe({leakWarningThreshold:Q,onFirstListenerAdd(){z=k(D=>{Y++,$=M($,D),F&&!G&&(I.fire($),$=void 0),clearTimeout(G),G=setTimeout(()=>{const O=$;$=void 0,G=void 0,(!F||Y>1)&&I.fire(O),Y=0},W)})},onLastListenerRemove(){z.dispose()}});return I.event}r.debounce=u;function d(k,M=(W,F)=>W===F){let W=!0,F;return i(k,Q=>{const z=W||!M(Q,F);return W=!1,F=Q,z})}r.latch=d;function h(k,M){return[r.filter(k,M),r.filter(k,W=>!M(W))]}r.split=h;function p(k,M=!1,W=[]){let F=W.slice(),Q=k(G=>{F?F.push(G):$.fire(G)});const z=()=>{F&&F.forEach(G=>$.fire(G)),F=null},$=new Fe({onFirstListenerAdd(){Q||(Q=k(G=>$.fire(G)))},onFirstListenerDidAdd(){F&&(M?setTimeout(z):z())},onLastListenerRemove(){Q&&Q.dispose(),Q=null}});return $.event}r.buffer=p;class _{constructor(M){this.event=M}map(M){return new _(t(this.event,M))}forEach(M){return new _(n(this.event,M))}filter(M){return new _(i(this.event,M))}reduce(M,W){return new _(a(this.event,M,W))}latch(){return new _(d(this.event))}debounce(M,W=100,F=!1,Q){return new _(u(this.event,M,W,F,Q))}on(M,W,F){return this.event(M,W,F)}once(M,W,F){return e(this.event)(M,W,F)}}function C(k){return new _(k)}r.chain=C;function S(k,M,W=F=>F){const F=(...G)=>$.fire(W(...G)),Q=()=>k.on(M,F),z=()=>k.removeListener(M,F),$=new Fe({onFirstListenerAdd:Q,onLastListenerRemove:z});return $.event}r.fromNodeEventEmitter=S;function x(k,M,W=F=>F){const F=(...G)=>$.fire(W(...G)),Q=()=>k.addEventListener(M,F),z=()=>k.removeEventListener(M,F),$=new Fe({onFirstListenerAdd:Q,onLastListenerRemove:z});return $.event}r.fromDOMEventEmitter=x;function T(k){return new Promise(M=>e(k)(M))}r.toPromise=T})(Sn||(Sn={}));class zP{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${zP._idPool++}`}start(e){this._stopWatch=new Ov(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}zP._idPool=0;let Fe=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new zP(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var i;this._listeners||(this._listeners=new kh);const o=this._listeners.isEmpty();o&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);o&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(i=this._leakageMon)===null||i===void 0?void 0:i.check(this._listeners.size),l=Hi(()=>{a&&a(),this._disposed||(s(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Nt?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new kh);for(let i of this._listeners)this._deliveryQueue.push([i,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[i,o]=this._deliveryQueue.shift();try{typeof i=="function"?i.call(void 0,o):i[0].call(i[1],o)}catch(s){ti(s)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,i,o;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(i=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||i===void 0||i.call(n),(o=this._leakageMon)===null||o===void 0||o.dispose())}};class TR extends Fe{constructor(e){super(e),this._isPaused=0,this._eventQueue=new kh,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Rve extends TR{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class oz{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(o=>{const s=this.buffers[this.buffers.length-1];s?s.push(()=>t.call(n,o)):t.call(n,o)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}class aG{constructor(){this.listening=!1,this.inputEvent=Sn.None,this.inputEventListener=ot.None,this.emitter=new Fe({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class Jw{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new Fe,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}Jw.INSTANCE=new Jw;function NR(){return Jw.INSTANCE.getZoomLevel()}function Die(){return Jw.INSTANCE.getTimeSinceLastZoomLevelChanged()}function sz(r){return Jw.INSTANCE.onDidChangeZoomLevel(r)}function Iie(){return Jw.INSTANCE.getZoomFactor()}function kT(){return Jw.INSTANCE.getPixelRatio()}const d2=navigator.userAgent,Id=d2.indexOf("Firefox")>=0,pC=d2.indexOf("AppleWebKit")>=0,az=d2.indexOf("Chrome")>=0,Zg=!az&&d2.indexOf("Safari")>=0,kie=!az&&!Zg&&pC,Tie=d2.indexOf("Android")>=0,lz=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,Mve=Object.freeze(Object.defineProperty({__proto__:null,getPixelRatio:kT,getTimeSinceLastZoomLevelChanged:Die,getZoomFactor:Iie,getZoomLevel:NR,isAndroid:Tie,isChrome:az,isFirefox:Id,isSafari:Zg,isStandalone:lz,isWebKit:pC,isWebkitWebView:kie,onDidChangeZoomLevel:sz},Symbol.toStringTag,{value:"Module"})),$P={clipboard:{writeText:fm||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:fm||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>fm||lz?0:navigator.keyboard||Zg?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};class uz{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const kO=new uz,v9=new uz,b9=new uz,Nie=new Array(230),Pve=Object.create(null),Fve=Object.create(null),cz=[];for(let r=0;r<=193;r++)cz[r]=-1;(function(){const r="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[0,1,1,"Hyper",0,r,0,r,r,r],[0,1,2,"Super",0,r,0,r,r,r],[0,1,3,"Fn",0,r,0,r,r,r],[0,1,4,"FnLock",0,r,0,r,r,r],[0,1,5,"Suspend",0,r,0,r,r,r],[0,1,6,"Resume",0,r,0,r,r,r],[0,1,7,"Turbo",0,r,0,r,r,r],[0,1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[0,1,9,"WakeUp",0,r,0,r,r,r],[31,0,10,"KeyA",31,"A",65,"VK_A",r,r],[32,0,11,"KeyB",32,"B",66,"VK_B",r,r],[33,0,12,"KeyC",33,"C",67,"VK_C",r,r],[34,0,13,"KeyD",34,"D",68,"VK_D",r,r],[35,0,14,"KeyE",35,"E",69,"VK_E",r,r],[36,0,15,"KeyF",36,"F",70,"VK_F",r,r],[37,0,16,"KeyG",37,"G",71,"VK_G",r,r],[38,0,17,"KeyH",38,"H",72,"VK_H",r,r],[39,0,18,"KeyI",39,"I",73,"VK_I",r,r],[40,0,19,"KeyJ",40,"J",74,"VK_J",r,r],[41,0,20,"KeyK",41,"K",75,"VK_K",r,r],[42,0,21,"KeyL",42,"L",76,"VK_L",r,r],[43,0,22,"KeyM",43,"M",77,"VK_M",r,r],[44,0,23,"KeyN",44,"N",78,"VK_N",r,r],[45,0,24,"KeyO",45,"O",79,"VK_O",r,r],[46,0,25,"KeyP",46,"P",80,"VK_P",r,r],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[48,0,27,"KeyR",48,"R",82,"VK_R",r,r],[49,0,28,"KeyS",49,"S",83,"VK_S",r,r],[50,0,29,"KeyT",50,"T",84,"VK_T",r,r],[51,0,30,"KeyU",51,"U",85,"VK_U",r,r],[52,0,31,"KeyV",52,"V",86,"VK_V",r,r],[53,0,32,"KeyW",53,"W",87,"VK_W",r,r],[54,0,33,"KeyX",54,"X",88,"VK_X",r,r],[55,0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[22,0,36,"Digit1",22,"1",49,"VK_1",r,r],[23,0,37,"Digit2",23,"2",50,"VK_2",r,r],[24,0,38,"Digit3",24,"3",51,"VK_3",r,r],[25,0,39,"Digit4",25,"4",52,"VK_4",r,r],[26,0,40,"Digit5",26,"5",53,"VK_5",r,r],[27,0,41,"Digit6",27,"6",54,"VK_6",r,r],[28,0,42,"Digit7",28,"7",55,"VK_7",r,r],[29,0,43,"Digit8",29,"8",56,"VK_8",r,r],[30,0,44,"Digit9",30,"9",57,"VK_9",r,r],[21,0,45,"Digit0",21,"0",48,"VK_0",r,r],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[10,1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,r,0,r,r,r],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[59,1,64,"F1",59,"F1",112,"VK_F1",r,r],[60,1,65,"F2",60,"F2",113,"VK_F2",r,r],[61,1,66,"F3",61,"F3",114,"VK_F3",r,r],[62,1,67,"F4",62,"F4",115,"VK_F4",r,r],[63,1,68,"F5",63,"F5",116,"VK_F5",r,r],[64,1,69,"F6",64,"F6",117,"VK_F6",r,r],[65,1,70,"F7",65,"F7",118,"VK_F7",r,r],[66,1,71,"F8",66,"F8",119,"VK_F8",r,r],[67,1,72,"F9",67,"F9",120,"VK_F9",r,r],[68,1,73,"F10",68,"F10",121,"VK_F10",r,r],[69,1,74,"F11",69,"F11",122,"VK_F11",r,r],[70,1,75,"F12",70,"F12",123,"VK_F12",r,r],[0,1,76,"PrintScreen",0,r,0,r,r,r],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",r,r],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[14,1,80,"Home",14,"Home",36,"VK_HOME",r,r],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[13,1,83,"End",13,"End",35,"VK_END",r,r],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",r,r],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",r,r],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",r,r],[3,1,94,"NumpadEnter",3,r,0,r,r,r],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",r,r],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",r,r],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",r,r],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",r,r],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",r,r],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",r,r],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",r,r],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",r,r],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",r,r],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",r,r],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",r,r],[58,1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[0,1,108,"Power",0,r,0,r,r,r],[0,1,109,"NumpadEqual",0,r,0,r,r,r],[71,1,110,"F13",71,"F13",124,"VK_F13",r,r],[72,1,111,"F14",72,"F14",125,"VK_F14",r,r],[73,1,112,"F15",73,"F15",126,"VK_F15",r,r],[74,1,113,"F16",74,"F16",127,"VK_F16",r,r],[75,1,114,"F17",75,"F17",128,"VK_F17",r,r],[76,1,115,"F18",76,"F18",129,"VK_F18",r,r],[77,1,116,"F19",77,"F19",130,"VK_F19",r,r],[0,1,117,"F20",0,r,0,"VK_F20",r,r],[0,1,118,"F21",0,r,0,"VK_F21",r,r],[0,1,119,"F22",0,r,0,"VK_F22",r,r],[0,1,120,"F23",0,r,0,"VK_F23",r,r],[0,1,121,"F24",0,r,0,"VK_F24",r,r],[0,1,122,"Open",0,r,0,r,r,r],[0,1,123,"Help",0,r,0,r,r,r],[0,1,124,"Select",0,r,0,r,r,r],[0,1,125,"Again",0,r,0,r,r,r],[0,1,126,"Undo",0,r,0,r,r,r],[0,1,127,"Cut",0,r,0,r,r,r],[0,1,128,"Copy",0,r,0,r,r,r],[0,1,129,"Paste",0,r,0,r,r,r],[0,1,130,"Find",0,r,0,r,r,r],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",r,r],[0,1,136,"KanaMode",0,r,0,r,r,r],[0,0,137,"IntlYen",0,r,0,r,r,r],[0,1,138,"Convert",0,r,0,r,r,r],[0,1,139,"NonConvert",0,r,0,r,r,r],[0,1,140,"Lang1",0,r,0,r,r,r],[0,1,141,"Lang2",0,r,0,r,r,r],[0,1,142,"Lang3",0,r,0,r,r,r],[0,1,143,"Lang4",0,r,0,r,r,r],[0,1,144,"Lang5",0,r,0,r,r,r],[0,1,145,"Abort",0,r,0,r,r,r],[0,1,146,"Props",0,r,0,r,r,r],[0,1,147,"NumpadParenLeft",0,r,0,r,r,r],[0,1,148,"NumpadParenRight",0,r,0,r,r,r],[0,1,149,"NumpadBackspace",0,r,0,r,r,r],[0,1,150,"NumpadMemoryStore",0,r,0,r,r,r],[0,1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[0,1,152,"NumpadMemoryClear",0,r,0,r,r,r],[0,1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[0,1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[0,1,155,"NumpadClear",0,r,0,r,r,r],[0,1,156,"NumpadClearEntry",0,r,0,r,r,r],[5,1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[4,1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[6,1,0,r,6,"Alt",18,"VK_MENU",r,r],[57,1,0,r,57,"Meta",0,"VK_COMMAND",r,r],[5,1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[4,1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[6,1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[57,1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[5,1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[4,1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[6,1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[57,1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[0,1,165,"BrightnessUp",0,r,0,r,r,r],[0,1,166,"BrightnessDown",0,r,0,r,r,r],[0,1,167,"MediaPlay",0,r,0,r,r,r],[0,1,168,"MediaRecord",0,r,0,r,r,r],[0,1,169,"MediaFastForward",0,r,0,r,r,r],[0,1,170,"MediaRewind",0,r,0,r,r,r],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",r,r],[0,1,174,"Eject",0,r,0,r,r,r],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[0,1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[0,1,180,"SelectTask",0,r,0,r,r,r],[0,1,181,"LaunchScreenSaver",0,r,0,r,r,r],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[0,1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[0,1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[0,1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[0,1,189,"ZoomToggle",0,r,0,r,r,r],[0,1,190,"MailReply",0,r,0,r,r,r],[0,1,191,"MailForward",0,r,0,r,r,r],[0,1,192,"MailSend",0,r,0,r,r,r],[109,1,0,r,109,"KeyInComposition",229,r,r,r],[111,1,0,r,111,"ABNT_C2",194,"VK_ABNT_C2",r,r],[91,1,0,r,91,"OEM_8",223,"VK_OEM_8",r,r],[0,1,0,r,0,r,0,"VK_CLEAR",r,r],[0,1,0,r,0,r,0,"VK_KANA",r,r],[0,1,0,r,0,r,0,"VK_HANGUL",r,r],[0,1,0,r,0,r,0,"VK_JUNJA",r,r],[0,1,0,r,0,r,0,"VK_FINAL",r,r],[0,1,0,r,0,r,0,"VK_HANJA",r,r],[0,1,0,r,0,r,0,"VK_KANJI",r,r],[0,1,0,r,0,r,0,"VK_CONVERT",r,r],[0,1,0,r,0,r,0,"VK_NONCONVERT",r,r],[0,1,0,r,0,r,0,"VK_ACCEPT",r,r],[0,1,0,r,0,r,0,"VK_MODECHANGE",r,r],[0,1,0,r,0,r,0,"VK_SELECT",r,r],[0,1,0,r,0,r,0,"VK_PRINT",r,r],[0,1,0,r,0,r,0,"VK_EXECUTE",r,r],[0,1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[0,1,0,r,0,r,0,"VK_HELP",r,r],[0,1,0,r,0,r,0,"VK_APPS",r,r],[0,1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[0,1,0,r,0,r,0,"VK_PACKET",r,r],[0,1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_ATTN",r,r],[0,1,0,r,0,r,0,"VK_CRSEL",r,r],[0,1,0,r,0,r,0,"VK_EXSEL",r,r],[0,1,0,r,0,r,0,"VK_EREOF",r,r],[0,1,0,r,0,r,0,"VK_PLAY",r,r],[0,1,0,r,0,r,0,"VK_ZOOM",r,r],[0,1,0,r,0,r,0,"VK_NONAME",r,r],[0,1,0,r,0,r,0,"VK_PA1",r,r],[0,1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]];let t=[],n=[];for(const i of e){const[o,s,a,l,u,d,h,p,_,C]=i;if(n[a]||(n[a]=!0,Pve[l]=a,Fve[l.toLowerCase()]=a,s&&(cz[a]=u)),!t[u]){if(t[u]=!0,!d)throw new Error(`String representation missing for key code ${u} around scan code ${l}`);kO.define(u,d),v9.define(u,_||d),b9.define(u,C||_||d)}h&&(Nie[h]=u)}})();var ww;(function(r){function e(a){return kO.keyCodeToStr(a)}r.toString=e;function t(a){return kO.strToKeyCode(a)}r.fromString=t;function n(a){return v9.keyCodeToStr(a)}r.toUserSettingsUS=n;function i(a){return b9.keyCodeToStr(a)}r.toUserSettingsGeneral=i;function o(a){return v9.strToKeyCode(a)||b9.strToKeyCode(a)}r.fromUserSettings=o;function s(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return kO.keyCodeToStr(a)}r.toElectronAccelerator=s})(ww||(ww={}));function _s(r,e){const t=(e&65535)<<16>>>0;return(r|t)>>>0}function C9(r,e){if(r===0)return null;const t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new AR([H3(t,e),H3(n,e)]):new AR([H3(t,e)])}function H3(r,e){const t=!!(r&2048),n=!!(r&256),i=e===2?n:t,o=!!(r&1024),s=!!(r&512),a=e===2?t:n,l=r&255;return new eS(i,o,s,a,l)}class eS{constructor(e,t,n,i,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new AR([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class AR{constructor(e){if(e.length===0)throw hm("parts");this.parts=e}}class Bve{constructor(e,t,n,i,o,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=s}}class Wve{}function Vve(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return ww.fromString(t)}const e=r.keyCode;if(e===3)return 7;if(Id){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(ji&&e===224)return 57}else if(pC){if(e===91)return 57;if(ji&&e===93)return 57;if(!ji&&e===92)return 57}return Nie[e]||0}const Hve=ji?256:2048,Uve=512,zve=1024,$ve=ji?2048:256;class Oo{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=Vve(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Hve),this.altKey&&(t|=Uve),this.shiftKey&&(t|=zve),this.metaKey&&(t|=$ve),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new eS(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let y9=!1,PE=null;function jve(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return y9=!0,null}catch{return y9=!0,null}return r.parent}class w9{static getSameOriginWindowChain(){if(!PE){PE=[];let e=window,t;do t=jve(e),t?PE.push({window:e,iframeElement:e.frameElement||null}):PE.push({window:e,iframeElement:null}),e=t;while(e)}return PE.slice(0)}static hasDifferentOriginAncestor(){return PE||this.getSameOriginWindowChain(),y9}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,o=this.getSameOriginWindowChain();for(const s of o){if(n+=s.window.scrollY,i+=s.window.scrollX,s.window===t||!s.iframeElement)break;let a=s.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}class Tf{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=w9.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class rx{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let i=e,o=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?Id&&!ji?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")Zg&&Ol?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?Id&&!ji?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}const Aie=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var Oi;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof TO?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Sn.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Aie})})(Oi||(Oi={}));class TO{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Aie:(this._emitter||(this._emitter=new Fe),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Ou=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new TO),this._token}cancel(){this._token?this._token instanceof TO&&this._token.cancel():this._token=Oi.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof TO&&this._token.dispose():this._token=Oi.None}};var Ef=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},Ak=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,l){s=r[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}};function qve(r){return!!r&&typeof r.then=="function"}function fl(r){const e=new Ou,t=r(e.token),n=new Promise((i,o)=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),o(GS())});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function dz(r,e,t){return Promise.race([r,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class Kve{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}class Kb{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.doResolve=n,this.doReject=i}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(GS()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class Gve{constructor(e){this.delayer=new Kb(e),this.throttler=new Kve}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function xC(r,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{o.dispose(),t()},r),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(GS())})}):fl(t=>xC(r,t))}function tS(r,e=0){const t=setTimeout(r,e);return Hi(()=>clearTimeout(t))}function Oie(r,e=n=>!!n,t=null){let n=0;const i=r.length,o=()=>{if(n>=i)return Promise.resolve(t);const s=r[n++];return Promise.resolve(s()).then(l=>e(l)?Promise.resolve(l):o())};return o()}class uc{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class h2{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Xr{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let TT;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?TT=r=>{Ave(()=>{if(e)return;const t=Date.now()+3;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:TT=(r,e)=>{const t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class kL{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=TT(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Rie{constructor(){this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}}var S9;(function(r){function e(n){return Ef(this,void 0,void 0,function*(){let i;const o=yield Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o})}r.settled=e;function t(n){return new Promise((i,o)=>Ef(this,void 0,void 0,function*(){try{yield n(i,o)}catch(s){o(s)}}))}r.withAsyncBody=t})(S9||(S9={}));class Ba{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Fe,queueMicrotask(()=>Ef(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Ba(t=>{t.emitMany(e)})}static fromPromise(e){return new Ba(t=>Ef(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Ba(t=>Ef(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>Ef(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Ba(t=>Ef(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,o;return Ef(this,void 0,void 0,function*(){var s,a;try{for(i=Ak(n);o=yield i.next(),!o.done;){const l=o.value;t.emitOne(l)}}catch(l){s={error:l}}finally{try{o&&!o.done&&(a=i.return)&&(yield a.call(i))}finally{if(s)throw s.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Ef(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Sn.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Ba(n=>Ef(this,void 0,void 0,function*(){var i,o;try{for(var s=Ak(e),a;a=yield s.next(),!a.done;){const l=a.value;n.emitOne(t(l))}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(i)throw i.error}}}))}map(e){return Ba.map(this,e)}static filter(e,t){return new Ba(n=>Ef(this,void 0,void 0,function*(){var i,o;try{for(var s=Ak(e),a;a=yield s.next(),!a.done;){const l=a.value;t(l)&&n.emitOne(l)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(i)throw i.error}}}))}filter(e){return Ba.filter(this,e)}static coalesce(e){return Ba.filter(e,t=>!!t)}coalesce(){return Ba.coalesce(this)}static toPromise(e){var t,n,i,o;return Ef(this,void 0,void 0,function*(){const s=[];try{for(t=Ak(e);n=yield t.next(),!n.done;){const a=n.value;s.push(a)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}return s})}toPromise(){return Ba.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Ba.EMPTY=Ba.fromArray([]);class Yve extends Ba{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function Zve(r){const e=new Ou,t=r(e.token);return new Yve(e,n=>Ef(this,void 0,void 0,function*(){var i,o;const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(GS())});try{try{for(var a=Ak(t),l;l=yield a.next(),!l.done;){const u=l.value;if(e.token.isCancellationRequested)return;n.emitOne(u)}}catch(u){i={error:u}}finally{try{l&&!l.done&&(o=a.return)&&(yield o.call(a))}finally{if(i)throw i.error}}s.dispose(),e.dispose()}catch(u){s.dispose(),e.dispose(),n.reject(u)}}))}let TL;if(typeof ms.vscode<"u"&&typeof ms.vscode.process<"u"){const r=ms.vscode.process;TL={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof Sv<"u"?TL={get platform(){return Sv.platform},get arch(){return Sv.arch},get env(){return{NVM_INC:"/Users/hayden/.nvm/versions/node/v16.20.0/include/node",MANPATH:"/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Applications/Wireshark.app/Contents/Resources/share/man:/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",INIT_CWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.aliyun.com/homebrew/homebrew-bottles",npm_config_metrics_registry:"https://registry.npmmirror.com/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/",npm_config_global_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",GOBIN:"/usr/local/go/bin",TERM_PROGRAM_VERSION:"1.83.1",ZDOTDIR:"/Users/hayden",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_home:"https://npm.taobao.org",npm_config_registry:"https://registry.npmmirror.com/",npm_config_local_prefix:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",ZSH:"/Users/hayden/.oh-my-zsh",NVM_DIR:"/Users/hayden/.nvm",USER:"hayden",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/hayden/.nvm/versions/node/v16.20.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.deqApZuelA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:./node_modules/.bin:./node_modules/.bin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS",npm_package_json:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/package.json",LaunchInstanceID:"186383FA-0E30-4AF9-AE3C-1A884F1F8B58",npm_config_userconfig:"/Users/hayden/.npmrc",npm_config_init_module:"/Users/hayden/.npm-init.js",USER_ZDOTDIR:"/Users/hayden",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"preview",LANG:"en_US.UTF-8",NODE_PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules:/Users/hayden/Desktop/dt-works/node_modules:/Users/hayden/Desktop/node_modules:/Users/hayden/node_modules:/Users/node_modules:/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/node_modules",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_electron_mirror:"https://npmmirror.com/mirrors/electron/",npm_config_node_gyp:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"3",HOME:"/Users/hayden",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",GOROOT:"/usr/local/go",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/hayden/.npm",LESS:"-R",LOGNAME:"hayden",npm_lifecycle_script:"tsc && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/vscode-git-f424a81e89.sock",NVM_BIN:"/Users/hayden/.nvm/versions/node/v16.20.0/bin",npm_config_user_agent:"npm/8.19.4 node/v16.20.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",SECURITYSESSIONID:"186a6",npm_node_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",npm_config_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",COLORTERM:"truecolor",NODE_ENV:"production"}},cwd(){return{NVM_INC:"/Users/hayden/.nvm/versions/node/v16.20.0/include/node",MANPATH:"/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Applications/Wireshark.app/Contents/Resources/share/man:/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",INIT_CWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.aliyun.com/homebrew/homebrew-bottles",npm_config_metrics_registry:"https://registry.npmmirror.com/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/",npm_config_global_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",GOBIN:"/usr/local/go/bin",TERM_PROGRAM_VERSION:"1.83.1",ZDOTDIR:"/Users/hayden",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_home:"https://npm.taobao.org",npm_config_registry:"https://registry.npmmirror.com/",npm_config_local_prefix:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",ZSH:"/Users/hayden/.oh-my-zsh",NVM_DIR:"/Users/hayden/.nvm",USER:"hayden",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/hayden/.nvm/versions/node/v16.20.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.deqApZuelA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:./node_modules/.bin:./node_modules/.bin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS",npm_package_json:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/package.json",LaunchInstanceID:"186383FA-0E30-4AF9-AE3C-1A884F1F8B58",npm_config_userconfig:"/Users/hayden/.npmrc",npm_config_init_module:"/Users/hayden/.npm-init.js",USER_ZDOTDIR:"/Users/hayden",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"preview",LANG:"en_US.UTF-8",NODE_PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules:/Users/hayden/Desktop/dt-works/node_modules:/Users/hayden/Desktop/node_modules:/Users/hayden/node_modules:/Users/node_modules:/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/node_modules",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_electron_mirror:"https://npmmirror.com/mirrors/electron/",npm_config_node_gyp:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"3",HOME:"/Users/hayden",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",GOROOT:"/usr/local/go",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/hayden/.npm",LESS:"-R",LOGNAME:"hayden",npm_lifecycle_script:"tsc && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/vscode-git-f424a81e89.sock",NVM_BIN:"/Users/hayden/.nvm/versions/node/v16.20.0/bin",npm_config_user_agent:"npm/8.19.4 node/v16.20.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",SECURITYSESSIONID:"186a6",npm_node_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",npm_config_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",COLORTERM:"truecolor",NODE_ENV:"production"}.VSCODE_CWD||Sv.cwd()}}:TL={get platform(){return Ol?"win32":ji?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const E9=TL.cwd;TL.env;const YS=TL.platform,Xve=65,Qve=97,Jve=90,e0e=122,mC=46,Lu=47,Sh=92,U1=58,t0e=63;class Mie extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const o=e.indexOf(".")!==-1?"property":"argument";let s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function Wa(r,e){if(typeof r!="string")throw new Mie(e,"string",r)}function _r(r){return r===Lu||r===Sh}function L9(r){return r===Lu}function z1(r){return r>=Xve&&r<=Jve||r>=Qve&&r<=e0e}function OR(r,e,t,n){let i="",o=0,s=-1,a=0,l=0;for(let u=0;u<=r.length;++u){if(u<r.length)l=r.charCodeAt(u);else{if(n(l))break;l=Lu}if(n(l)){if(!(s===u-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==mC||i.charCodeAt(i.length-2)!==mC){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(t)),s=u,a=0;continue}else if(i.length!==0){i="",o=0,s=u,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${r.slice(s+1,u)}`:i=r.slice(s+1,u),o=u-s-1;s=u,a=0}else l===mC&&a!==-1?++a:a=-1}return i}function Pie(r,e){if(e===null||typeof e!="object")throw new Mie("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}const yd={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let o;if(i>=0){if(o=r[i],Wa(o,"path"),o.length===0)continue}else e.length===0?o=E9():(o={NVM_INC:"/Users/hayden/.nvm/versions/node/v16.20.0/include/node",MANPATH:"/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man:/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/Applications/Wireshark.app/Contents/Resources/share/man:/opt/homebrew/share/man:/Users/hayden/.nvm/versions/node/v16.20.0/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",INIT_CWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",HOMEBREW_BOTTLE_DOMAIN:"https://mirrors.aliyun.com/homebrew/homebrew-bottles",npm_config_metrics_registry:"https://registry.npmmirror.com/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/",npm_config_global_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",GOBIN:"/usr/local/go/bin",TERM_PROGRAM_VERSION:"1.83.1",ZDOTDIR:"/Users/hayden",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_home:"https://npm.taobao.org",npm_config_registry:"https://registry.npmmirror.com/",npm_config_local_prefix:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",ZSH:"/Users/hayden/.oh-my-zsh",NVM_DIR:"/Users/hayden/.nvm",USER:"hayden",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/hayden/.nvm/versions/node/v16.20.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.deqApZuelA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x19:0x34",npm_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/bin/npm-cli.js",PAGER:"less",LSCOLORS:"Gxfxcxdxbxegedabagacad",PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules/.bin:/Users/hayden/Desktop/dt-works/node_modules/.bin:/Users/hayden/Desktop/node_modules/.bin:/Users/hayden/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS:/opt/homebrew/opt/openjdk@11/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Users/hayden/.nvm/versions/node/v16.20.0/bin:./node_modules/.bin:./node_modules/.bin:/usr/local/go/bin:/Applications/Wireshark.app/Contents/MacOS",npm_package_json:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/package.json",LaunchInstanceID:"186383FA-0E30-4AF9-AE3C-1A884F1F8B58",npm_config_userconfig:"/Users/hayden/.npmrc",npm_config_init_module:"/Users/hayden/.npm-init.js",USER_ZDOTDIR:"/Users/hayden",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"preview",LANG:"en_US.UTF-8",NODE_PATH:"/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules/vite/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/vite@4.3.9_@types+node@20.2.5/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/.pnpm/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/node_modules:/Users/hayden/Desktop/dt-works/node_modules:/Users/hayden/Desktop/node_modules:/Users/hayden/node_modules:/Users/node_modules:/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/bin/node_modules:/Users/hayden/Desktop/dt-works/monaco-sql-languages/website/node_modules/vite/node_modules",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_electron_mirror:"https://npmmirror.com/mirrors/electron/",npm_config_node_gyp:"/Users/hayden/.nvm/versions/node/v16.20.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.0.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"3",HOME:"/Users/hayden",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",GOROOT:"/usr/local/go",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/hayden/.npm",LESS:"-R",LOGNAME:"hayden",npm_lifecycle_script:"tsc && vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/r1/j92gngkj21zg5j1_d17nm2fr0000gn/T/vscode-git-f424a81e89.sock",NVM_BIN:"/Users/hayden/.nvm/versions/node/v16.20.0/bin",npm_config_user_agent:"npm/8.19.4 node/v16.20.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",SECURITYSESSIONID:"186a6",npm_node_execpath:"/Users/hayden/.nvm/versions/node/v16.20.0/bin/node",npm_config_prefix:"/Users/hayden/.nvm/versions/node/v16.20.0",COLORTERM:"truecolor",NODE_ENV:"production"}[`=${e}`]||E9(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Sh)&&(o=`${e}\\`));const s=o.length;let a=0,l="",u=!1;const d=o.charCodeAt(0);if(s===1)_r(d)&&(a=1,u=!0);else if(_r(d))if(u=!0,_r(o.charCodeAt(1))){let h=2,p=h;for(;h<s&&!_r(o.charCodeAt(h));)h++;if(h<s&&h!==p){const _=o.slice(p,h);for(p=h;h<s&&_r(o.charCodeAt(h));)h++;if(h<s&&h!==p){for(p=h;h<s&&!_r(o.charCodeAt(h));)h++;(h===s||h!==p)&&(l=`\\\\${_}\\${o.slice(p,h)}`,a=h)}}}else a=1;else z1(d)&&o.charCodeAt(1)===U1&&(l=o.slice(0,2),a=2,s>2&&_r(o.charCodeAt(2))&&(u=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=u,u&&e.length>0)break}return t=OR(t,!n,"\\",_r),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Wa(r,"path");const e=r.length;if(e===0)return".";let t=0,n,i=!1;const o=r.charCodeAt(0);if(e===1)return L9(o)?"\\":r;if(_r(o))if(i=!0,_r(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){const u=r.slice(l,a);for(l=a;a<e&&_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_r(r.charCodeAt(a));)a++;if(a===e)return`\\\\${u}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${u}\\${r.slice(l,a)}`,t=a)}}}else t=1;else z1(o)&&r.charCodeAt(1)===U1&&(n=r.slice(0,2),t=2,e>2&&_r(r.charCodeAt(2))&&(i=!0,t=3));let s=t<e?OR(r.slice(t),!i,"\\",_r):"";return s.length===0&&!i&&(s="."),s.length>0&&_r(r.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(r){Wa(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return _r(t)||e>2&&z1(t)&&r.charCodeAt(1)===U1&&_r(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let o=0;o<r.length;++o){const s=r[o];Wa(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&_r(t.charCodeAt(0))){++i;const o=t.length;o>1&&_r(t.charCodeAt(1))&&(++i,o>2&&(_r(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&_r(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return yd.normalize(e)},relative(r,e){if(Wa(r,"from"),Wa(e,"to"),r===e)return"";const t=yd.resolve(r),n=yd.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===Sh;)i++;let o=r.length;for(;o-1>i&&r.charCodeAt(o-1)===Sh;)o--;const s=o-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===Sh;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Sh;)l--;const u=l-a,d=s<u?s:u;let h=-1,p=0;for(;p<d;p++){const C=r.charCodeAt(i+p);if(C!==e.charCodeAt(a+p))break;C===Sh&&(h=p)}if(p!==d){if(h===-1)return n}else{if(u>d){if(e.charCodeAt(a+p)===Sh)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>d&&(r.charCodeAt(i+p)===Sh?h=p:p===2&&(h=3)),h===-1&&(h=0)}let _="";for(p=i+h+1;p<=o;++p)(p===o||r.charCodeAt(p)===Sh)&&(_+=_.length===0?"..":"\\..");return a+=h,_.length>0?`${_}${n.slice(a,l)}`:(n.charCodeAt(a)===Sh&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";const e=yd.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===Sh){if(e.charCodeAt(1)===Sh){const t=e.charCodeAt(2);if(t!==t0e&&t!==mC)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(z1(e.charCodeAt(0))&&e.charCodeAt(1)===U1&&e.charCodeAt(2)===Sh)return`\\\\?\\${e}`;return r},dirname(r){Wa(r,"path");const e=r.length;if(e===0)return".";let t=-1,n=0;const i=r.charCodeAt(0);if(e===1)return _r(i)?r:".";if(_r(i)){if(t=n=1,_r(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&_r(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!_r(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else z1(i)&&r.charCodeAt(1)===U1&&(t=e>2&&_r(r.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(_r(r.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return r.slice(0,o)},basename(r,e){e!==void 0&&Wa(e,"ext"),Wa(r,"path");let t=0,n=-1,i=!0,o;if(r.length>=2&&z1(r.charCodeAt(0))&&r.charCodeAt(1)===U1&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=t;--o){const l=r.charCodeAt(o);if(_r(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=t;--o)if(_r(r.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Wa(r,"path");let e=0,t=-1,n=0,i=-1,o=!0,s=0;r.length>=2&&r.charCodeAt(1)===U1&&z1(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){const l=r.charCodeAt(a);if(_r(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===mC?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:Pie.bind(null,"\\"),parse(r){Wa(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let n=0,i=r.charCodeAt(0);if(t===1)return _r(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(_r(i)){if(n=1,_r(r.charCodeAt(1))){let h=2,p=h;for(;h<t&&!_r(r.charCodeAt(h));)h++;if(h<t&&h!==p){for(p=h;h<t&&_r(r.charCodeAt(h));)h++;if(h<t&&h!==p){for(p=h;h<t&&!_r(r.charCodeAt(h));)h++;h===t?n=h:h!==p&&(n=h+1)}}}}else if(z1(i)&&r.charCodeAt(1)===U1){if(t<=2)return e.root=e.dir=r,e;if(n=2,_r(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let o=-1,s=n,a=-1,l=!0,u=r.length-1,d=0;for(;u>=n;--u){if(i=r.charCodeAt(u),_r(i)){if(!l){s=u+1;break}continue}a===-1&&(l=!1,a=u+1),i===mC?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===s+1?e.base=e.name=r.slice(s,a):(e.name=r.slice(s,o),e.base=r.slice(s,a),e.ext=r.slice(o,a))),s>0&&s!==n?e.dir=r.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},la={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){const i=n>=0?r[n]:E9();Wa(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Lu)}return e=OR(e,!t,"/",L9),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Wa(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Lu,t=r.charCodeAt(r.length-1)===Lu;return r=OR(r,!e,"/",L9),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Wa(r,"path"),r.length>0&&r.charCodeAt(0)===Lu},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];Wa(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":la.normalize(e)},relative(r,e){if(Wa(r,"from"),Wa(e,"to"),r===e||(r=la.resolve(r),e=la.resolve(e),r===e))return"";const t=1,n=r.length,i=n-t,o=1,s=e.length-o,a=i<s?i:s;let l=-1,u=0;for(;u<a;u++){const h=r.charCodeAt(t+u);if(h!==e.charCodeAt(o+u))break;h===Lu&&(l=u)}if(u===a)if(s>a){if(e.charCodeAt(o+u)===Lu)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>a&&(r.charCodeAt(t+u)===Lu?l=u:u===0&&(l=0));let d="";for(u=t+l+1;u<=n;++u)(u===n||r.charCodeAt(u)===Lu)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(r){return r},dirname(r){if(Wa(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===Lu;let t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===Lu){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Wa(e,"ext"),Wa(r,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){const l=r.charCodeAt(o);if(l===Lu){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===Lu){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Wa(r,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let s=r.length-1;s>=0;--s){const a=r.charCodeAt(s);if(a===Lu){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===mC?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:Pie.bind(null,"/"),parse(r){Wa(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===Lu;let n;t?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,l=r.length-1,u=0;for(;l>=n;--l){const d=r.charCodeAt(l);if(d===Lu){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),d===mC?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(s!==-1){const d=o===0&&t?1:o;i===-1||u===0||u===1&&i===s-1&&i===o+1?e.base=e.name=r.slice(d,s):(e.name=r.slice(d,i),e.base=r.slice(d,s),e.ext=r.slice(i,s))}return o>0?e.dir=r.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};la.win32=yd.win32=yd;la.posix=yd.posix=la;const hz=YS==="win32"?yd.normalize:la.normalize,n0e=YS==="win32"?yd.resolve:la.resolve,i0e=YS==="win32"?yd.relative:la.relative,Fie=YS==="win32"?yd.dirname:la.dirname,Aw=YS==="win32"?yd.basename:la.basename,r0e=YS==="win32"?yd.extname:la.extname,Ow=YS==="win32"?yd.sep:la.sep,o0e=/^\w[\w\d+.-]*$/,s0e=/^\//,a0e=/^\/\//;function lG(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!o0e.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!s0e.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a0e.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function l0e(r,e){return!r&&!e?"file":r}function u0e(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==Qp&&(e=Qp+e):e=Qp;break}return e}const gs="",Qp="/",c0e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class qn{constructor(e,t,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||gs,this.authority=e.authority||gs,this.path=e.path||gs,this.query=e.query||gs,this.fragment=e.fragment||gs):(this.scheme=l0e(e,s),this.authority=t||gs,this.path=u0e(this.scheme,n||gs),this.query=i||gs,this.fragment=o||gs,lG(this,s))}static isUri(e){return e instanceof qn?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return RR(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=gs),n===void 0?n=this.authority:n===null&&(n=gs),i===void 0?i=this.path:i===null&&(i=gs),o===void 0?o=this.query:o===null&&(o=gs),s===void 0?s=this.fragment:s===null&&(s=gs),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new FE(t,n,i,o,s)}static parse(e,t=!1){const n=c0e.exec(e);return n?new FE(n[2]||gs,mA(n[4]||gs),mA(n[5]||gs),mA(n[7]||gs),mA(n[9]||gs),t):new FE(gs,gs,gs,gs,gs)}static file(e){let t=gs;if(Ol&&(e=e.replace(/\\/g,Qp)),e[0]===Qp&&e[1]===Qp){const n=e.indexOf(Qp,2);n===-1?(t=e.substring(2),e=Qp):(t=e.substring(2,n),e=e.substring(n)||Qp)}return new FE("file",t,e,gs,gs)}static from(e){const t=new FE(e.scheme,e.authority,e.path,e.query,e.fragment);return lG(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ol&&e.scheme==="file"?n=qn.file(yd.join(RR(e,!0),...t)).path:n=la.join(e.path,...t),e.with({path:n})}toString(e=!1){return x9(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof qn)return e;{const t=new FE(e);return t._formatted=e.external,t._fsPath=e._sep===Bie?e.fsPath:null,t}}else return e}}const Bie=Ol?1:void 0;let FE=class extends qn{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=RR(this,!1)),this._fsPath}toString(e=!1){return e?x9(this,!0):(this._formatted||(this._formatted=x9(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Bie),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Wie={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function uG(r,e){let t,n=-1;for(let i=0;i<r.length;i++){const o=r.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t!==void 0&&(t+=r.charAt(i));else{t===void 0&&(t=r.substr(0,i));const s=Wie[o];s!==void 0?(n!==-1&&(t+=encodeURIComponent(r.substring(n,i)),n=-1),t+=s):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(r.substring(n))),t!==void 0?t:r}function d0e(r){let e;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=Wie[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function RR(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,Ol&&(t=t.replace(/\//g,"\\")),t}function x9(r,e){const t=e?d0e:uG;let n="",{scheme:i,authority:o,path:s,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Qp,n+=Qp),o){let u=o.indexOf("@");if(u!==-1){const d=o.substr(0,u);o=o.substr(u+1),u=d.indexOf(":"),u===-1?n+=t(d,!1):(n+=t(d.substr(0,u),!1),n+=":",n+=t(d.substr(u+1),!1)),n+="@"}o=o.toLowerCase(),u=o.indexOf(":"),u===-1?n+=t(o,!1):(n+=t(o.substr(0,u),!1),n+=o.substr(u))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){const u=s.charCodeAt(1);u>=65&&u<=90&&(s=`/${String.fromCharCode(u+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){const u=s.charCodeAt(0);u>=65&&u<=90&&(s=`${String.fromCharCode(u+32)}:${s.substr(2)}`)}n+=t(s,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:uG(l,!1)),n}function Vie(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+Vie(r.substr(3)):r}}const cG=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function mA(r){return r.match(cG)?r.replace(cG,e=>Vie(e)):r}var Si;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.userData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebook="vscode-notebook",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractive="vscode-interactive",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp",r.vsls="vsls"})(Si||(Si={}));class h0e{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],o=this._connectionTokens[t];let s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&tkn=${encodeURIComponent(o)}`),qn.from({scheme:Jx?this._preferredWebSchema:Si.vscodeRemoteResource,authority:`${n}:${i}`,path:"/vscode-remote-resource",query:s})}}const Hie=new h0e;class NT{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===Si.vscodeRemote?Hie.rewrite(n):n.scheme===Si.file&&(fm||typeof ms.importScripts=="function"&&ms.origin===`${Si.vscodeFileResource}://${NT.FALLBACK_AUTHORITY}`)?n.with({scheme:Si.vscodeFileResource,authority:n.authority||NT.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return qn.isUri(e)?e:qn.parse(t.toUrl(e))}}NT.FALLBACK_AUTHORITY="vscode-app";const Uie=new NT;function ya(r){for(;r.firstChild;)r.firstChild.remove()}function fz(r){var e;return(e=r==null?void 0:r.isConnected)!==null&&e!==void 0?e:!1}class zie{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function kt(r,e,t,n){return new zie(r,e,t,n)}function $ie(r){return function(e){return r(new Tf(e))}}function f0e(r){return function(e){return r(new Oo(e))}}let za=function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"?o=$ie(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=f0e(n)),kt(e,t,o,i)},g0e=function(e,t,n){let i=$ie(t);return gz(e,i,n)};function gz(r,e,t){return kt(r,Av&&$P.pointerEvents?In.POINTER_DOWN:In.MOUSE_DOWN,e,t)}function jie(r,e,t){return kt(r,Av&&$P.pointerEvents?In.POINTER_UP:In.MOUSE_UP,e,t)}function pz(r,e){return kt(r,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}function p0e(r,e){return kt(r,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==r;)n=n.parentNode;n!==r&&e(t)})}function Up(r,e,t){let n=null;const i=l=>a.fire(l),o=()=>{n||(n=new zie(r,e,i,t))},s=()=>{n&&(n.dispose(),n=null)},a=new Fe({onFirstListenerAdd:o,onLastListenerRemove:s});return a}let U3=null;function m0e(r){if(!U3){const e=t=>setTimeout(()=>t(new Date().getTime()),0);U3=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return U3.call(self,r)}let qie,Rv;class z3{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){ti(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let r=[],e=null,t=!1,n=!1,i=()=>{for(t=!1,e=r,r=[],n=!0;e.length>0;)e.sort(z3.sort),e.shift().execute();n=!1};Rv=(o,s=0)=>{let a=new z3(o,s);return r.push(a),t||(t=!0,m0e(i)),a},qie=(o,s)=>{if(n){let a=new z3(o,s);return e.push(a),a}else return Rv(o,s)}})();const _0e=8,v0e=function(r,e){return e};class b0e extends ot{constructor(e,t,n,i=v0e,o=_0e){super();let s=null,a=0,l=this._register(new uc),u=()=>{a=new Date().getTime(),n(s),s=null};this._register(kt(e,t,d=>{s=i(s,d);let h=new Date().getTime()-a;h>=o?(l.cancel(),u()):l.setIfNotSet(u,o-h)}))}}function mz(r,e,t,n,i){return new b0e(r,e,t,n,i)}function _z(r){return document.defaultView.getComputedStyle(r,null)}function jP(r){if(r!==document.body)return new fo(r.clientWidth,r.clientHeight);if(Av&&window.visualViewport)return new fo(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new fo(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new fo(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new fo(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class rs{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=_z(e),o="0";return i&&(i.getPropertyValue?o=i.getPropertyValue(t):o=i.getAttribute(n)),rs.convertToPixels(e,o)}static getBorderLeftWidth(e){return rs.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return rs.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return rs.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return rs.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return rs.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return rs.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return rs.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return rs.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return rs.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return rs.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return rs.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return rs.getDimension(e,"margin-bottom","marginBottom")}}class fo{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new fo(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof fo?e:new fo(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function Kie(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==document.body&&r!==document.documentElement;){t-=r.scrollTop;const i=Yie(r)?null:_z(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=rs.getBorderLeftWidth(r),t+=rs.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function C0e(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function tu(r){let e=r.getBoundingClientRect();return{left:e.left+Mb.scrollX,top:e.top+Mb.scrollY,width:e.width,height:e.height}}const Mb=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Bg(r){let e=rs.getMarginLeft(r)+rs.getMarginRight(r);return r.offsetWidth+e}function $3(r){let e=rs.getBorderLeftWidth(r)+rs.getBorderRightWidth(r),t=rs.getPaddingLeft(r)+rs.getPaddingRight(r);return r.offsetWidth-e-t}function y0e(r){let e=rs.getBorderTopWidth(r)+rs.getBorderBottomWidth(r),t=rs.getPaddingTop(r)+rs.getPaddingBottom(r);return r.offsetHeight-e-t}function D9(r){let e=rs.getMarginTop(r)+rs.getMarginBottom(r);return r.offsetHeight+e}function Pb(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function Gie(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function dG(r,e,t){return!!Gie(r,e,t)}function Yie(r){return r&&!!r.host&&!!r.mode}function qP(r){return!!DC(r)}function DC(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return Yie(r)?r:null}function NL(){let r=document.activeElement;for(;r!=null&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function Bf(r=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",r.appendChild(e),e}let j3=null;function Zie(){return j3||(j3=Bf()),j3}function w0e(r){var e,t;return!((e=r==null?void 0:r.sheet)===null||e===void 0)&&e.rules?r.sheet.rules:!((t=r==null?void 0:r.sheet)===null||t===void 0)&&t.cssRules?r.sheet.cssRules:[]}function I9(r,e,t=Zie()){!t||!e||t.sheet.insertRule(r+"{"+e+"}",0)}function hG(r,e=Zie()){if(!e)return;let t=w0e(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(r)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}function Xie(r){return typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}const In={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:pC?"webkitAnimationStart":"animationstart",ANIMATION_END:pC?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:pC?"webkitAnimationIteration":"animationiteration"},xr={stop:function(r,e){r.preventDefault?r.preventDefault():r.returnValue=!1,e&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)}};function S0e(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function E0e(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}class MR extends ot{constructor(e){super(),this._onDidFocus=this._register(new Fe),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Fe),this.onDidBlur=this._onDidBlur.event;let t=MR.hasFocusWithin(e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{MR.hasFocusWithin(e)!==t&&(t?o():i())},this._register(kt(e,In.FOCUS,i,!0)),this._register(kt(e,In.BLUR,o,!0)),this._register(kt(e,In.FOCUS_IN,()=>this._refreshStateHandler())),this._register(kt(e,In.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=DC(e),n=t?t.activeElement:document.activeElement;return Pb(n,e)}}function ox(r){return new MR(r)}function ft(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function L0e(r,e){return r.insertBefore(e,r.firstChild),e}function IC(r,...e){r.innerText="",ft(r,...e)}const x0e=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var AT;(function(r){r.HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg"})(AT||(AT={}));function Qie(r,e,t,...n){let i=x0e.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let o=i[1]||"div",s;return r!==AT.HTML?s=document.createElementNS(r,o):s=document.createElement(o),i[3]&&(s.id=i[3]),i[4]&&(s.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function Lt(r,e,...t){return Qie(AT.HTML,r,e,...t)}Lt.SVG=function(r,e,...t){return Qie(AT.SVG,r,e,...t)};function Lh(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function kc(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function D0e(r){return Array.prototype.slice.call(document.getElementsByTagName(r),0)}function fG(r){const e=window.devicePixelRatio*r;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function Jie(r){window.open(r,"_blank","noopener")}function I0e(r){const e=()=>{r(),t=Rv(e)};let t=Rv(e);return Hi(()=>t.dispose())}Hie.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function nS(r){return r?`url('${Uie.asBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function gG(r){return`'${r.replace(/'/g,"%27")}'`}class Sw extends Fe{constructor(){super(),this._subscriptions=new Nt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(kt(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Oo(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(kt(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(kt(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(kt(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(kt(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(kt(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Sw.instance||(Sw.instance=new Sw),Sw.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function k0e(r,e){const t=window.matchMedia(r);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}const pG=2e4;let lw,NO,k9,AO,T9;function T0e(r){lw=document.createElement("div"),lw.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),lw.appendChild(n),n};NO=e(),k9=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),lw.appendChild(n),n};AO=t(),T9=t(),r.appendChild(lw)}function Tl(r){lw&&(NO.textContent!==r?(ya(k9),FR(NO,r)):(ya(NO),FR(k9,r)))}function PR(r){lw&&(ji?Tl(r):AO.textContent!==r?(ya(T9),FR(AO,r)):(ya(AO),FR(T9,r)))}function FR(r,e){ya(r),e.length>pG&&(e=e.substr(0,pG)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var im;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(im||(im={}));const xi=ar("instantiationService");function N0e(r,e,t,n){e[im.DI_TARGET]===e?e[im.DI_DEPENDENCIES].push({id:r,index:t,optional:n}):(e[im.DI_DEPENDENCIES]=[{id:r,index:t,optional:n}],e[im.DI_TARGET]=e)}function ar(r){if(im.serviceIds.has(r))return im.serviceIds.get(r);const e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");N0e(e,t,i,!1)};return e.toString=()=>r,im.serviceIds.set(r,e),e}const vr=ar("codeEditorService"),vz=ar("markerDecorationsService");function A0e(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(n,i){const o=i[0];return typeof e[o]<"u"?e[o]:n}),t}function E(r,e,...t){return A0e(e,t)}let Ge=class iw{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new iw(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return iw.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return iw.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return iw.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let o=e.column|0,s=t.column|0;return o-s}return n-i}clone(){return new iw(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new iw(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};const ua=ar("modelService");function O0e(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}const Fc=ar("textModelService");var BR=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Of extends ot{constructor(e,t="",n="",i=!0,o){super(),this._onDidChange=this._register(new Fe),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return BR(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class sx extends ot{constructor(){super(...arguments),this._onBeforeRun=this._register(new Fe),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Fe),this.onDidRun=this._onDidRun.event}run(e,t){return BR(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return BR(this,void 0,void 0,function*(){yield e.run(t)})}}class ep extends Of{constructor(e){super(ep.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}ep.ID="vs.actions.separator";class KP{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return BR(this,void 0,void 0,function*(){})}}class GP extends Of{constructor(){super(GP.ID,E("submenu.empty","(empty)"),void 0,!1)}}GP.ID="vs.actions.empty";let R0e=class{constructor(){this._icons=new Map,this._onDidRegister=new Fe}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const ere=new R0e,WR=ere;function M0e(r){return r?r.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class Ae{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,ere.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}Ae.add=new Ae("add",{fontCharacter:"\\ea60"});Ae.lightBulb=new Ae("light-bulb",{fontCharacter:"\\ea61"});Ae.warning=new Ae("warning",{fontCharacter:"\\ea6c"});Ae.info=new Ae("info",{fontCharacter:"\\ea74"});Ae.close=new Ae("close",{fontCharacter:"\\ea76"});Ae.symbolFolder=new Ae("symbol-folder",{fontCharacter:"\\ea83"});Ae.symbolEvent=new Ae("symbol-event",{fontCharacter:"\\ea86"});Ae.error=new Ae("error",{fontCharacter:"\\ea87"});Ae.symbolVariable=new Ae("symbol-variable",{fontCharacter:"\\ea88"});Ae.symbolArray=new Ae("symbol-array",{fontCharacter:"\\ea8a"});Ae.symbolModule=new Ae("symbol-module",{fontCharacter:"\\ea8b"});Ae.symbolPackage=new Ae("symbol-package",{fontCharacter:"\\ea8b"});Ae.symbolNamespace=new Ae("symbol-namespace",{fontCharacter:"\\ea8b"});Ae.symbolObject=new Ae("symbol-object",{fontCharacter:"\\ea8b"});Ae.symbolMethod=new Ae("symbol-method",{fontCharacter:"\\ea8c"});Ae.symbolFunction=new Ae("symbol-function",{fontCharacter:"\\ea8c"});Ae.symbolConstructor=new Ae("symbol-constructor",{fontCharacter:"\\ea8c"});Ae.symbolBoolean=new Ae("symbol-boolean",{fontCharacter:"\\ea8f"});Ae.symbolNull=new Ae("symbol-null",{fontCharacter:"\\ea8f"});Ae.symbolNumber=new Ae("symbol-number",{fontCharacter:"\\ea90"});Ae.symbolStruct=new Ae("symbol-struct",{fontCharacter:"\\ea91"});Ae.symbolTypeParameter=new Ae("symbol-type-parameter",{fontCharacter:"\\ea92"});Ae.symbolKey=new Ae("symbol-key",{fontCharacter:"\\ea93"});Ae.symbolText=new Ae("symbol-text",{fontCharacter:"\\ea93"});Ae.symbolReference=new Ae("symbol-reference",{fontCharacter:"\\ea94"});Ae.symbolEnum=new Ae("symbol-enum",{fontCharacter:"\\ea95"});Ae.symbolValue=new Ae("symbol-value",{fontCharacter:"\\ea95"});Ae.symbolUnit=new Ae("symbol-unit",{fontCharacter:"\\ea96"});Ae.arrowDown=new Ae("arrow-down",{fontCharacter:"\\ea9a"});Ae.arrowLeft=new Ae("arrow-left",{fontCharacter:"\\ea9b"});Ae.arrowUp=new Ae("arrow-up",{fontCharacter:"\\eaa1"});Ae.caseSensitive=new Ae("case-sensitive",{fontCharacter:"\\eab1"});Ae.check=new Ae("check",{fontCharacter:"\\eab2"});Ae.chevronDown=new Ae("chevron-down",{fontCharacter:"\\eab4"});Ae.chevronRight=new Ae("chevron-right",{fontCharacter:"\\eab6"});Ae.chevronUp=new Ae("chevron-up",{fontCharacter:"\\eab7"});Ae.lightbulbAutofix=new Ae("lightbulb-autofix",{fontCharacter:"\\eb13"});Ae.loading=new Ae("loading",{fontCharacter:"\\eb19"});Ae.preserveCase=new Ae("preserve-case",{fontCharacter:"\\eb2e"});Ae.regex=new Ae("regex",{fontCharacter:"\\eb38"});Ae.remove=new Ae("remove",{fontCharacter:"\\eb3b"});Ae.replaceAll=new Ae("replace-all",{fontCharacter:"\\eb3c"});Ae.replace=new Ae("replace",{fontCharacter:"\\eb3d"});Ae.splitHorizontal=new Ae("split-horizontal",{fontCharacter:"\\eb56"});Ae.splitVertical=new Ae("split-vertical",{fontCharacter:"\\eb57"});Ae.symbolClass=new Ae("symbol-class",{fontCharacter:"\\eb5b"});Ae.symbolColor=new Ae("symbol-color",{fontCharacter:"\\eb5c"});Ae.symbolConstant=new Ae("symbol-constant",{fontCharacter:"\\eb5d"});Ae.symbolEnumMember=new Ae("symbol-enum-member",{fontCharacter:"\\eb5e"});Ae.symbolField=new Ae("symbol-field",{fontCharacter:"\\eb5f"});Ae.symbolFile=new Ae("symbol-file",{fontCharacter:"\\eb60"});Ae.symbolInterface=new Ae("symbol-interface",{fontCharacter:"\\eb61"});Ae.symbolKeyword=new Ae("symbol-keyword",{fontCharacter:"\\eb62"});Ae.symbolOperator=new Ae("symbol-operator",{fontCharacter:"\\eb64"});Ae.symbolProperty=new Ae("symbol-property",{fontCharacter:"\\eb65"});Ae.symbolSnippet=new Ae("symbol-snippet",{fontCharacter:"\\eb66"});Ae.triangleDown=new Ae("triangle-down",{fontCharacter:"\\eb6e"});Ae.triangleLeft=new Ae("triangle-left",{fontCharacter:"\\eb6f"});Ae.triangleRight=new Ae("triangle-right",{fontCharacter:"\\eb70"});Ae.triangleUp=new Ae("triangle-up",{fontCharacter:"\\eb71"});Ae.wholeWord=new Ae("whole-word",{fontCharacter:"\\eb7e"});Ae.listFilter=new Ae("list-filter",{fontCharacter:"\\eb83"});Ae.listSelection=new Ae("list-selection",{fontCharacter:"\\eb85"});Ae.selection=new Ae("selection",{fontCharacter:"\\eb85"});Ae.symbolString=new Ae("symbol-string",{fontCharacter:"\\eb8d"});Ae.treeItemExpanded=new Ae("tree-item-expanded",Ae.chevronDown.definition);Ae.treeFilterOnTypeOn=new Ae("tree-filter-on-type-on",Ae.listFilter.definition);Ae.treeFilterOnTypeOff=new Ae("tree-filter-on-type-off",Ae.listSelection.definition);Ae.treeFilterClear=new Ae("tree-filter-clear",Ae.close.definition);Ae.treeItemLoading=new Ae("tree-item-loading",Ae.loading.definition);Ae.menuSelection=new Ae("menu-selection",Ae.check.definition);Ae.menuSubmenu=new Ae("menu-submenu",Ae.chevronRight.definition);Ae.scrollbarButtonLeft=new Ae("scrollbar-button-left",Ae.triangleLeft.definition);Ae.scrollbarButtonRight=new Ae("scrollbar-button-right",Ae.triangleRight.definition);Ae.scrollbarButtonUp=new Ae("scrollbar-button-up",Ae.triangleUp.definition);Ae.scrollbarButtonDown=new Ae("scrollbar-button-down",Ae.triangleDown.definition);Ae.quickInputBack=new Ae("quick-input-back",Ae.arrowLeft.definition);var Nc;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9-]+",r.iconModifierExpression="~[A-Za-z]+",r.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(o){if(o instanceof Ae)return["codicon","codicon-"+o.id];const s=e.exec(o.id);if(!s)return t(Ae.error);let[,a,l]=s;const u=["codicon","codicon-"+a];return l&&u.push("codicon-modifier-"+l.substr(1)),u}r.asClassNameArray=t;function n(o){return t(o).join(" ")}r.asClassName=n;function i(o){return"."+t(o).join(".")}r.asCSSSelector=i})(Nc||(Nc={}));function tre(r){return Array.isArray(r)}function Wf(r){return typeof r=="string"}function Oc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function iS(r){return typeof r=="number"&&!isNaN(r)}function nre(r){return r===!0||r===!1}function wd(r){return typeof r>"u"}function P0e(r){return!xh(r)}function xh(r){return wd(r)||r===null}function jr(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function _A(r){if(xh(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function VR(r){return typeof r=="function"}function F0e(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)B0e(r[n],e[n])}function B0e(r,e){if(Wf(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(VR(e)){try{if(r instanceof e)return}catch{}if(!xh(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function W0e(r){let e=[],t=Object.getPrototypeOf(r);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function bz(r){const e=[];for(const t of W0e(r))typeof r[t]=="function"&&e.push(t);return e}function V0e(r,e){const t=i=>function(){const o=Array.prototype.slice.call(arguments,0);return e(i,o)};let n={};for(const i of r)n[i]=t(i);return n}function Sd(r){return r===null?void 0:r}function ire(r,e="Unreachable"){throw new Error(e)}const Go=ar("commandService"),Yi=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Fe,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.description){const s=[];for(let l of r.description.args)s.push(l.constraint);const a=r.handler;r.handler=function(l,...u){return F0e(u,s),a(l,...u)}}const{id:t}=r;let n=this._commands.get(t);n||(n=new kh,this._commands.set(t,n));let i=n.unshift(r),o=Hi(()=>{i();const s=this._commands.get(t);s!=null&&s.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(r,e){return Yi.registerCommand(r,(t,...n)=>t.get(Go).executeCommand(e,...n))}getCommand(r){const e=this._commands.get(r);if(!(!e||e.isEmpty()))return Zi.first(e)}getCommands(){const r=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&r.set(e,t)}return r}};Yi.registerCommand("noop",()=>{});function rre(r){return!r||typeof r!="string"?!0:r.trim().length===0}const H0e=/{(\d+)}/g;function Nf(r,...e){return e.length===0?r:r.replace(H0e,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function Cz(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Vf(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function U0e(r,e=" "){const t=yz(r,e);return ore(t,e)}function yz(r,e){if(!r||!e)return r;const t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function ore(r,e){if(!r||!e)return r;const t=e.length,n=r.length;if(t===0||n===0)return r;let i=n,o=-1;for(;o=r.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return r.substring(0,i)}function z0e(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function $0e(r){return r.replace(/\*/g,"")}function sre(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Vf(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function j0e(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function q3(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")}function Mv(r){return r.split(/\r\n|\r|\n/)}function sc(r){for(let e=0,t=r.length;e<t;e++){const n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Vr(r,e=0,t=r.length){for(let n=e;n<t;n++){const i=r.charCodeAt(n);if(i!==32&&i!==9)return r.substring(e,n)}return r.substring(e,t)}function Iv(r,e=r.length-1){for(let t=e;t>=0;t--){const n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function OT(r,e){return r<e?-1:r>e?1:0}function wz(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l<u)return-1;if(l>u)return 1}const s=n-t,a=o-i;return s<a?-1:s>a?1:0}function N9(r,e){return f2(r,e,0,r.length,0,e.length)}function f2(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),u=e.charCodeAt(i);if(l===u)continue;if(l>=128||u>=128)return wz(r.toLowerCase(),e.toLowerCase(),t,n,i,o);sC(l)&&(l-=32),sC(u)&&(u-=32);const d=l-u;if(d!==0)return d}const s=n-t,a=o-i;return s<a?-1:s>a?1:0}function sC(r){return r>=97&&r<=122}function sv(r){return r>=65&&r<=90}function Ok(r,e){return r.length===e.length&&f2(r,e)===0}function Sz(r,e){const t=e.length;return e.length>r.length?!1:f2(r,e,0,t)===0}function ax(r,e){let t,n=Math.min(r.length,e.length);for(t=0;t<n;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function HR(r,e){let t,n=Math.min(r.length,e.length);const i=r.length-1,o=e.length-1;for(t=0;t<n;t++)if(r.charCodeAt(i-t)!==e.charCodeAt(o-t))return t;return n}function Ca(r){return 55296<=r&&r<=56319}function lx(r){return 56320<=r&&r<=57343}function Ez(r,e){return(r-55296<<10)+(e-56320)+65536}function Ew(r,e,t){const n=r.charCodeAt(t);if(Ca(n)&&t+1<e){const i=r.charCodeAt(t+1);if(lx(i))return Ez(n,i)}return n}function AL(r,e){const t=r.charCodeAt(e-1);if(lx(t)&&e>1){const n=r.charCodeAt(e-2);if(Ca(n))return Ez(n,t)}return t}function UR(r,e){const t=Tb.getInstance(),n=e,i=r.length,o=Ew(r,i,e);e+=o>=65536?2:1;let s=t.getGraphemeBreakType(o);for(;e<i;){const a=Ew(r,i,e),l=t.getGraphemeBreakType(a);if($R(s,l))break;e+=a>=65536?2:1,s=l}return e-n}function q0e(r,e){const t=Tb.getInstance(),n=e,i=AL(r,e);e-=i>=65536?2:1;let o=t.getGraphemeBreakType(i);for(;e>0;){const s=AL(r,e),a=t.getGraphemeBreakType(s);if($R(a,o))break;e-=s>=65536?2:1,o=a}return n-e}const K0e=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function YP(r){return K0e.test(r)}const G0e=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFF0]|\uD83E[\uDD00-\uDDFF\uDE70-\uDEF6])/;function Y0e(r){return G0e.test(r)}const Z0e=/^[\t\n\r\x20-\x7E]*$/;function Lz(r){return Z0e.test(r)}const are=/[\u2028\u2029]/;function lre(r){return are.test(r)}function X0e(r){for(let e=0,t=r.length;e<t;e++)if(Pv(r.charCodeAt(e)))return!0;return!1}function Pv(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function zR(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}const Q0e=String.fromCharCode(65279);function xz(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function J0e(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function ure(r){return r=r%(2*26),r<26?String.fromCharCode(97+r):String.fromCharCode(65+r-26)}function vA(r){return Tb.getInstance().getGraphemeBreakType(r)}function $R(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}class Tb{constructor(){this._data=ebe()}static getInstance(){return Tb._INSTANCE||(Tb._INSTANCE=new Tb),Tb._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}Tb._INSTANCE=null;function ebe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function tbe(r,e){if(r===0)return 0;const t=nbe(r,e);if(t!==void 0)return t;const n=AL(e,r);return r-=OO(n),r}function nbe(r,e){let t=AL(e,r);for(r-=OO(t);ibe(t)||t===65039||t===8419;){if(r===0)return;t=AL(e,r),r-=OO(t)}if(zR(t)){if(r>=0){const n=AL(e,r);n===8205&&(r-=OO(n))}return r}}function OO(r){return r>=65536?2:1}function ibe(r){return 127995<=r&&r<=127999}const rbe="";class Gp{static getData(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,40,10088,40,10098,40,12308,40,64830,40,65341,41,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,124,8739,124,9213,124,65512,124,1633,124,1777,124,66336,124,125127,124,120783,124,120793,124,120803,124,120813,124,120823,124,130033,124,65321,124,8544,124,8464,124,8465,124,119816,124,119868,124,119920,124,120024,124,120128,124,120180,124,120232,124,120284,124,120336,124,120388,124,120440,124,406,124,65356,124,8572,124,8467,124,119845,124,119897,124,119949,124,120001,124,120053,124,120105,124,120157,124,120209,124,120261,124,120313,124,120365,124,120417,124,120469,124,448,124,120496,124,120554,124,120612,124,120670,124,120728,124,11410,124,1030,124,1216,124,1493,124,1503,124,1575,124,126464,124,126592,124,65166,124,65165,124,1994,124,11599,124,5825,124,42226,124,93992,124,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90],"_default":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"cs":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"de":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"es":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"fr":[65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"it":[160,32,8211,45,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ko":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pl":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pt-BR":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"qps-ploc":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ru":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,124,1009,112,215,120],"tr":[160,32,8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hans":[65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hant":[8211,45,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')}static getConfusablesForCurrentLocale(){if(!Gp.map){let n=function(s){const a=new Map;for(let l=0;l<s.length;l+=2)a.set(s[l],s[l+1]);return a};const e=Gp.getData();let t=Nve;(!t||!(t in e))&&(t=Tve),(!t||!(t in e))&&(t="_default");const i=n(e._common),o=n(e[t]);for(const[s,a]of o)i.set(s,a);Gp.map=i}return Gp.map}static isAmbiguous(e){return Gp.getConfusablesForCurrentLocale().has(e)}static getPrimaryConfusable(e){return Gp.getConfusablesForCurrentLocale().get(e)}static getPrimaryConfusableCodePoints(){return new Set(Gp.getConfusablesForCurrentLocale().keys())}}class Fb{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Fb.getRawData())),this._data}static isInvisibleCharacter(e){return Fb.getData().has(e)}static get codePoints(){return Fb.getData()}}Fb._data=void 0;let ZP=kve||"";const iu=new Map;iu.set("false",!1);iu.set("true",!0);iu.set("isMac",ji);iu.set("isLinux",Pc);iu.set("isWindows",Ol);iu.set("isWeb",Jx);iu.set("isMacNative",ji&&!Jx);iu.set("isEdge",ZP.indexOf("Edg/")>=0);iu.set("isFirefox",ZP.indexOf("Firefox")>=0);iu.set("isChrome",ZP.indexOf("Chrome")>=0);iu.set("isSafari",ZP.indexOf("Safari")>=0);const obe=Object.prototype.hasOwnProperty;class Xt{static has(e){return kC.create(e)}static equals(e,t){return ux.create(e,t)}static regex(e,t){return jR.create(e,t)}static not(e){return rS.create(e)}static and(...e){return aC.create(e,null)}static or(...e){return Nb.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Nb.create(n.map(i=>this._deserializeAndExpression(i,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return aC.create(n.map(i=>this._deserializeOne(i,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return XP.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return ux.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return jR.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return Dz.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return e4.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return JP.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return n4.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return t4.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?rS.create(e.substr(1).trim()):kC.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(rre(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let o=e.slice(n+1,i),s=e[i+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function sbe(r,e){const t=r?r.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function OL(r,e){return r.cmp(e)}class Ah{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Hf.INSTANCE}}Ah.INSTANCE=new Ah;class Hf{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Ah.INSTANCE}}Hf.INSTANCE=new Hf;class kC{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=iu.get(e);return typeof n=="boolean"?n?Hf.INSTANCE:Ah.INSTANCE:new kC(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:dre(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=iu.get(this.key);return typeof e=="boolean"?e?Hf.INSTANCE:Ah.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=rS.create(this.key,this)),this.negated}}class ux{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?kC.create(e,n):rS.create(e,n);const i=iu.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Hf.INSTANCE:Ah.INSTANCE:new ux(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=iu.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Hf.INSTANCE:Ah.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=XP.create(this.key,this.value,this)),this.negated}}class Dz{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new Dz(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?obe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Iz.create(this)),this.negated}}class Iz{constructor(e){this._actual=e,this.type=11}static create(e){return new Iz(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class XP{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?rS.create(e,n):kC.create(e,n);const i=iu.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Ah.INSTANCE:Hf.INSTANCE:new XP(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=iu.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ah.INSTANCE:Hf.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ux.create(this.key,this.value,this)),this.negated}}class rS{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=iu.get(e);return typeof n=="boolean"?n?Ah.INSTANCE:Hf.INSTANCE:new rS(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:dre(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=iu.get(this.key);return typeof e=="boolean"?e?Ah.INSTANCE:Hf.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kC.create(this.key,this)),this.negated}}function QP(r,e){if(typeof r=="string"){const t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Ah.INSTANCE}class JP{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return QP(t,i=>new JP(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=n4.create(this.key,this.value,this)),this.negated}}class e4{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return QP(t,i=>new e4(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=t4.create(this.key,this.value,this)),this.negated}}class t4{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return QP(t,i=>new t4(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=e4.create(this.key,this.value,this)),this.negated}}class n4{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return QP(t,i=>new n4(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:ZS(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=JP.create(this.key,this.value,this)),this.negated}}class jR{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new jR(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kz.create(this)),this.negated}}class kz{constructor(e){this._actual=e,this.type=8}static create(e){return new kz(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function cre(r){let e=null;for(let t=0,n=r.length;t<n;t++){const i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=r[o]}e!==null&&(e[t]=i)}return e===null?r:e}class aC{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return aC._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=OL(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=cre(this.expr);return e===this.expr?this:aC.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let i=!1;for(const o of e)if(o){if(o.type===1){i=!0;continue}if(o.type===0)return Ah.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&i)return Hf.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(OL);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const s=n.pop(),a=n.length===0,l=Nb.create(o.expr.map(u=>aC.create([u,s],null)),null,a);l&&(n.push(l),n.sort(OL))}return n.length===1?n[0]:new aC(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Nb.create(e,this,!0)}return this.negated}}class Nb{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Nb._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=OL(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=cre(this.expr);return e===this.expr?this:Nb.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){const l=e[s];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return Hf.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return Ah.INSTANCE;i.sort(OL)}if(i.length!==0){if(i.length===1)return i[0];for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)hre(i[s],i[a])&&(i.splice(a,1),a--);if(i.length===1)return i[0]}return new Nb(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const s of qR(t))for(const a of qR(n))i.push(aC.create([s,a],null));const o=e.length===0;e.unshift(Nb.create(i,null,o))}this.negated=e[0]}return this.negated}}class _n extends kC{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?_n._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&_n._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return _n._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ux.create(this.key,e)}}_n._info=[];const Jn=ar("contextKeyService"),abe="setContext";function dre(r,e){return r<e?-1:r>e?1:0}function ZS(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function hre(r,e){if(e.type===6&&r.type!==9&&r.type!==6){for(const i of e.expr)if(r.equals(i))return!0}const t=r.negate(),n=qR(t).concat(qR(e));n.sort(OL);for(let i=0;i<n.length;i++){const s=n[i].negate();for(let a=i+1;a<n.length;a++){const l=n[a];if(s.equals(l))return!0}}return!1}function qR(r){return r.type===9?r.expr:[r]}function RO(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class lbe{constructor(){this.data=new Map}add(e,t){RO(Wf(e)),RO(Oc(t)),RO(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const vs=new lbe;var tp;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(tp||(tp={}));const Ho=ar("themeService");var A9;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(A9||(A9={}));function Vo(r){return{id:r}}var So;(function(r){function e(l){return l&&typeof l=="object"&&typeof l.id=="string"&&(typeof l.color>"u"||A9.isThemeColor(l.color))}r.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Nc.iconNameExpression}(?:${Nc.iconModifierExpression})?)\\)$`);function n(l){const u=t.exec(l);if(!u)return;let[,d]=u;return{id:d}}r.fromString=n;function i(l,u){let d=l.id;const h=d.lastIndexOf("~");return h!==-1&&(d=d.substring(0,h)),u&&(d=`${d}~${u}`),{id:d}}r.modify=i;function o(l){const u=l.id.lastIndexOf("~");if(u!==-1)return l.id.substring(u+1)}r.getModifier=o;function s(l,u){var d,h;return l.id===u.id&&((d=l.color)===null||d===void 0?void 0:d.id)===((h=u.color)===null||h===void 0?void 0:h.id)}r.isEqual=s;function a(l,u){return{id:l.id,color:u?Vo(u):void 0}}r.asThemeIcon=a,r.asClassNameArray=Nc.asClassNameArray,r.asClassName=Nc.asClassName,r.asCSSSelector=Nc.asCSSSelector})(So||(So={}));function KR(r){switch(r){case tp.DARK:return"vs-dark";case tp.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const fre={ThemingContribution:"base.contributions.theming"};class ube{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Fe}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Hi(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let gre=new ube;vs.add(fre.ThemingContribution,gre);function mo(r){return gre.onColorThemeChange(r)}class cbe extends ot{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var dbe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mG=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function Rk(r){return r.command!==void 0}class wn{constructor(e){this.id=wn._idPool++,this._debugName=e}}wn._idPool=0;wn.CommandPalette=new wn("CommandPalette");wn.EditorContext=new wn("EditorContext");wn.SimpleEditorContext=new wn("SimpleEditorContext");wn.EditorContextCopy=new wn("EditorContextCopy");wn.EditorContextPeek=new wn("EditorContextPeek");wn.MenubarEditMenu=new wn("MenubarEditMenu");wn.MenubarCopy=new wn("MenubarCopy");wn.MenubarGoMenu=new wn("MenubarGoMenu");wn.MenubarSelectionMenu=new wn("MenubarSelectionMenu");wn.InlineCompletionsActions=new wn("InlineCompletionsActions");const XS=ar("menuService"),Au=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Fe,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:r=>r===wn.CommandPalette}}addCommand(r){return this.addCommands(Zi.single(r))}addCommands(r){for(const e of r)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Hi(()=>{let e=!1;for(const t of r)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(r){return this._commands.get(r)}getCommands(){const r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){return this.appendMenuItems(Zi.single({id:r,item:e}))}appendMenuItems(r){const e=new Set,t=new kh;for(const{id:n,item:i}of r){let o=this._menuItems.get(n);o||(o=new kh,this._menuItems.set(n,o)),t.push(o.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),Hi(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===wn.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){const e=new Set;for(const t of r)Rk(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}};class Tz extends KP{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new ep));return e.length&&e.pop(),e}}let TC=class pre{constructor(e,t,n,i,o){var s,a;if(this._commandService=o,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(s=e.tooltip)===null||s===void 0?void 0:s.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||i.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=i.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new pre(t,void 0,n,i,o):void 0,this._options=n,So.isThemeIcon(e.icon)&&(this.class=Nc.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}};TC=dbe([mG(3,Jn),mG(4,Go)],TC);class GR{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(xf===1){if(e&&e.win)return e.win}else if(xf===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=GR.bindToCurrentPlatform(e);if(t&&t.primary){const n=C9(t.primary,xf);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const o=t.secondary[n],s=C9(o,xf);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Yi.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&GR._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,o,s){xf===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:s,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(fbe)),this._cachedMergedKeybindings.slice(0)}}const Rl=new GR,hbe={EditorModes:"platform.keybindingsRegistry"};vs.add(hbe.EditorModes,Rl);function fbe(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}const Xv=ar("telemetryService"),Qv=ar("logService");var rm;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off"})(rm||(rm={}));const mre=rm.Info;class gbe extends ot{constructor(){super(...arguments),this.level=mre,this._onDidChangeLogLevel=this._register(new Fe)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class pbe extends gbe{constructor(e=mre){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=rm.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=rm.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=rm.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=rm.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class mbe extends ot{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}class i4{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=Xt.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Rl.registerKeybindingRule(i)}}Yi.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Au.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class eD extends i4{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,o)=>o.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(Qv);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const o=i.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class _re extends i4{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Fl extends i4{static bindToContribution(e){return class extends Fl{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,o){e(i)&&this._callback(e(i),o)}}}runCommand(e,t){const n=e.get(vr),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(i)return i.invokeWithinContext(o=>{if(o.get(Jn).contextMatchesRules(Sd(this.precondition)))return this.runEditorCommand(o,i,t)})}}let gn=class vre extends Fl{constructor(e){super(vre.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=wn.EditorContext),i.title||(i.title=e.label),i.when=Xt.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Xv).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};class bre extends gn{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const o=i[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}function Jv(r,e){Yi.registerCommand(r,function(t,...n){const[i,o]=n;jr(qn.isUri(i)),jr(Ge.isIPosition(o));const s=t.get(ua).getModel(i);if(s){const a=Ge.lift(o);return e(s,a,...n.slice(2))}return t.get(Fc).createModelReference(i).then(a=>new Promise((l,u)=>{try{const d=e(a.object.textEditorModel,Ge.lift(o),n.slice(2));l(d)}catch(d){u(d)}}).finally(()=>{a.dispose()}))})}function _be(r,e){Yi.registerCommand(r,function(t,...n){const[i]=n;jr(qn.isUri(i));const o=t.get(ua).getModel(i);return o?e(o,...n.slice(1)):t.get(Fc).createModelReference(i).then(s=>new Promise((a,l)=>{try{const u=e(s.object.textEditorModel,n.slice(1));a(u)}catch(u){l(u)}}).finally(()=>{s.dispose()}))})}function Mt(r){return Df.INSTANCE.registerEditorCommand(r),r}function Wt(r){const e=new r;return Df.INSTANCE.registerEditorAction(e),e}function Cre(r){return Df.INSTANCE.registerEditorAction(r),r}function yre(r){Df.INSTANCE.registerEditorAction(r)}function br(r,e){Df.INSTANCE.registerEditorContribution(r,e)}var RL;(function(r){function e(s){return Df.INSTANCE.getEditorCommand(s)}r.getEditorCommand=e;function t(){return Df.INSTANCE.getEditorActions()}r.getEditorActions=t;function n(){return Df.INSTANCE.getEditorContributions()}r.getEditorContributions=n;function i(s){return Df.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}r.getSomeEditorContributions=i;function o(){return Df.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=o})(RL||(RL={}));const vbe={EditorCommonContributions:"editor.contributions"};class Df{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Df.INSTANCE=new Df;vs.add(vbe.EditorCommonContributions,Df.INSTANCE);function g2(r){return r.register(),r}const wre=g2(new eD({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:wn.MenubarEditMenu,group:"1_do",title:E({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:wn.CommandPalette,group:"",title:E("undo","Undo"),order:1}]}));g2(new _re(wre,{id:"default:undo",precondition:void 0}));const Sre=g2(new eD({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:wn.MenubarEditMenu,group:"1_do",title:E({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:wn.CommandPalette,group:"",title:E("redo","Redo"),order:1}]}));g2(new _re(Sre,{id:"default:redo",precondition:void 0}));const bbe=g2(new eD({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:wn.MenubarSelectionMenu,group:"1_basic",title:E({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:wn.CommandPalette,group:"",title:E("selectAll","Select All"),order:1}]}));var Cbe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ybe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let RT=class{constructor(e,t){}dispose(){}};RT.ID="editor.contrib.markerDecorations";RT=Cbe([ybe(1,vz)],RT);br(RT.ID,RT);const Ere="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function wbe(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Ere)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Lre=wbe();function YR(r){let e=Lre;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}const Sbe={maxLen:1e3,windowSize:15,timeBudget:150};function ZR(r,e,t,n,i=Sbe){if(t.length>i.maxLen){let u=r-i.maxLen/2;return u<0?u=0:n+=u,t=t.substring(u,r+i.maxLen/2),ZR(r,e,t,n,i)}const o=Date.now(),s=r-1-n;let a=-1,l=null;for(let u=1;!(Date.now()-o>=i.timeBudget);u++){const d=s-i.windowSize*u;e.lastIndex=Math.max(0,d);const h=Ebe(e,t,s,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){let u={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,u}return null}function Ebe(r,e,t,n){let i;for(;i=r.exec(e);){const o=i.index||0;if(o<=t&&r.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}function wf(r,e=0){return r[r.length-(1+e)]}function Lbe(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function Rf(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function Nz(r,e,t){let n=0,i=r.length-1;for(;n<=i;){const o=(n+i)/2|0,s=t(r[o],e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o}return-(n+1)}function xre(r,e){let t=0,n=r.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(r[i])?n=i:t=i+1}return t}function O9(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],i=[],o=[],s=[];for(let a of e){const l=t(a,n);l<0?i.push(a):l>0?o.push(a):s.push(a)}return r<i.length?O9(r,i,t):r<i.length+s.length?s[0]:O9(r-(i.length+s.length),o,t)}function _G(r,e){const t=[];let n;for(const i of r.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function tD(r){return r.filter(e=>!!e)}function Dre(r){return!Array.isArray(r)||r.length===0}function Ed(r){return Array.isArray(r)&&r.length>0}function oS(r,e=t=>t){const t=new Set;return r.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function xbe(r,e){const t=Dbe(r,e);if(t!==-1)return r[t]}function Dbe(r,e){for(let t=r.length-1;t>=0;t--){const n=r[t];if(e(n))return t}return-1}function R9(r,e){return r.length>0?r[0]:e}function Ire(r){return[].concat(...r)}function rc(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function MT(r,e,t){const n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function K3(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function bA(r,e){const t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function Az(r){return Array.isArray(r)?r:[r]}function Ibe(r,e,t){const n=kre(r,e),i=r.length,o=t.length;r.length=i+o;for(let s=i-1;s>=n;s--)r[s+o]=r[s];for(let s=0;s<o;s++)r[s+n]=t[s]}function vG(r,e,t,n){const i=kre(r,e),o=r.splice(i,t);return Ibe(r,i,n),o}function kre(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}class ML{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function Cb(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;const e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=Cb(r[t]):e[t]=r[t]}),e}function kbe(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Tre.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&e.push(i)}}return r}const Tre=Object.prototype.hasOwnProperty;function Tbe(r,e){return M9(r,e,new Set)}function M9(r,e,t){if(xh(r))return r;const n=e(r);if(typeof n<"u")return n;if(tre(r)){const i=[];for(const o of r)i.push(M9(o,e,t));return i}if(Oc(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);const i={};for(let o in r)Tre.call(r,o)&&(i[o]=M9(r[o],e,t));return t.delete(r),i}return r}function e0(r,e,t=!0){return Oc(r)?(Oc(e)&&Object.keys(e).forEach(n=>{n in r?t&&(Oc(r[n])&&Oc(e[n])?e0(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function np(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!np(r[t],e[t]))return!1}else{const i=[];for(n in r)i.push(n);i.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!np(i,o))return!1;for(t=0;t<i.length;t++)if(!np(r[i[t]],e[i[t]]))return!1}return!0}function q_(r,e,t){const n=e(r);return typeof n>"u"?t:n}const Y1=8;class Nre{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Nbe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Are{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Sa{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return r4(e,t)}compute(e,t,n){return n}}class Jk{constructor(e,t){this.newValue=e,this.didChange=t}}function r4(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new Jk(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){const n=Array.isArray(r)&&Array.isArray(e)&&Rf(r,e);return new Jk(e,n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){const i=r4(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new Jk(r,t)}class nD{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}applyUpdate(e,t){return r4(e,t)}validate(e){return this.defaultValue}}class QS{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return r4(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Pn(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}class $i extends QS{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Pn(e,this.defaultValue)}}function P9(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}class To extends QS{constructor(e,t,n,i,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=i,s.maximum=o),super(e,t,n,s),this.minimum=i,this.maximum=o}static clampedInt(e,t,n,i){return P9(e,t,n,i)}validate(e){return To.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Lv extends QS{constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(Lv.float(e,this.defaultValue))}}class bd extends QS{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return bd.string(e,this.defaultValue)}}function Tc(r,e,t){return typeof r!="string"||t.indexOf(r)===-1?e:r}class sa extends QS{constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n),super(e,t,n,o),this._allowedValues=i}validate(e){return Tc(e,this.defaultValue,this._allowedValues)}}class sk extends Sa{constructor(e,t,n,i,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Abe(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Obe extends Sa{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[E("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),E("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),E("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:E("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Rbe extends Sa{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:E("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:E("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Pn(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Pn(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Mbe(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var dl;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(dl||(dl={}));function Pbe(r){switch(r){case"line":return dl.Line;case"block":return dl.Block;case"underline":return dl.Underline;case"line-thin":return dl.LineThin;case"block-outline":return dl.BlockOutline;case"underline-thin":return dl.UnderlineThin}}class Fbe extends nD{constructor(){super(127,[65,33])}compute(e,t,n){const i=["monaco-editor"];return t.get(33)&&i.push(t.get(33)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(65)==="default"?i.push("mouse-default"):t.get(65)==="copy"&&i.push("mouse-copy"),t.get(99)&&i.push("showUnused"),t.get(125)&&i.push("showDeprecated"),i.join(" ")}}class Bbe extends $i{constructor(){super(32,"emptySelectionClipboard",!0,{description:E("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Wbe extends Sa{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:E("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[E("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),E("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),E("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:E("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[E("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),E("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),E("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:E("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:E("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ji},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:E("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:E("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Pn(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Tc(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Tc(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Pn(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Pn(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Pn(t.loop,this.defaultValue.loop)}}}class Dh extends Sa{constructor(){super(44,"fontLigatures",Dh.OFF,{anyOf:[{type:"boolean",description:E("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:E("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:E("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Dh.OFF:e==="true"?Dh.ON:e:e?Dh.ON:Dh.OFF}}Dh.OFF='"liga" off, "calt" off';Dh.ON='"liga" on, "calt" on';class Vbe extends nD{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Hbe extends QS{constructor(){super(45,"fontSize",nu.fontSize,{type:"number",minimum:6,maximum:100,default:nu.fontSize,description:E("fontSize","Controls the font size in pixels.")})}validate(e){let t=Lv.float(e,this.defaultValue);return t===0?nu.fontSize:Lv.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class dv extends Sa{constructor(){super(46,"fontWeight",nu.fontWeight,{anyOf:[{type:"number",minimum:dv.MINIMUM_VALUE,maximum:dv.MAXIMUM_VALUE,errorMessage:E("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:dv.SUGGESTION_VALUES}],default:nu.fontWeight,description:E("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(To.clampedInt(e,nu.fontWeight,dv.MINIMUM_VALUE,dv.MAXIMUM_VALUE))}}dv.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];dv.MINIMUM_VALUE=1;dv.MAXIMUM_VALUE=1e3;class Ube extends Sa{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[E("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),E("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),E("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:E("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:E("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:E("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:E("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:E("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:E("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:E("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:E("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:E("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:E("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:E("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,o,s;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Tc(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Tc(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Tc(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:Tc(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Tc(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(s=a.multipleReferences)!==null&&s!==void 0?s:Tc(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:bd.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:bd.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:bd.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:bd.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:bd.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class zbe extends Sa{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:E("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:E("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:E("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:E("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Pn(t.enabled,this.defaultValue.enabled),delay:To.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Pn(t.sticky,this.defaultValue.sticky),above:Pn(t.above,this.defaultValue.above)}}}class PL extends nD{constructor(){super(130,[49,57,37,64,91,59,60,93,117,120,121,122,2])}compute(e,t,n){return PL.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,u=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let p=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const _=e.minimap.maxColumn,C=e.minimap.size,S=e.minimap.side,x=e.verticalScrollbarWidth,T=e.viewLineCount,k=e.remainingWidth,M=e.isViewportWrapping,W=h?2:3;let F=Math.floor(o*i);const Q=F/o;let z=!1,$=!1,G=W*p,Y=p/o,I=1;if(C==="fill"||C==="fit"){const{typicalViewportLineCount:se,extraLinesBeyondLastLine:ie,desiredRatio:A,minimapLineCount:te}=PL.computeContainedMinimapLineCount({viewLineCount:T,scrollBeyondLastLine:d,height:i,lineHeight:l,pixelRatio:o});if(T/te>1)z=!0,$=!0,p=1,G=1,Y=p/o;else{let de=!1,Me=p+1;if(C==="fit"){const He=Math.ceil((T+ie)*G);M&&a&&k<=t.stableFitRemainingWidth?(de=!0,Me=t.stableFitMaxMinimapScale):de=He>F}if(C==="fill"||de){z=!0;const He=p;G=Math.min(l*o,Math.max(1,Math.floor(1/A))),M&&a&&k<=t.stableFitRemainingWidth&&(Me=t.stableFitMaxMinimapScale),p=Math.min(Me,Math.max(1,Math.floor(G/W))),p>He&&(I=Math.min(2,p/He)),Y=p/o/I,F=Math.ceil(Math.max(se,T+ie)*G),M?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=k,t.stableFitMaxMinimapScale=p):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const D=Math.floor(_*Y),O=Math.min(D,Math.max(0,Math.floor((k-x-2)*Y/(u+Y)))+Y1);let V=Math.floor(o*O);const j=V/o;V=Math.floor(V*I);const ne=h?1:2,re=S==="left"?0:n-O-x;return{renderMinimap:ne,minimapLeft:re,minimapWidth:O,minimapHeightIsEditorHeight:z,minimapIsSampling:$,minimapScale:p,minimapLineHeight:G,minimapCanvasInnerWidth:V,minimapCanvasInnerHeight:F,minimapCanvasOuterWidth:j,minimapCanvasOuterHeight:Q}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,u=t.pixelRatio,d=t.viewLineCount,h=e.get(122),p=h==="inherit"?e.get(121):h,_=p==="inherit"?e.get(117):p,C=e.get(120),S=e.get(2),x=t.isDominatedByLongLines,T=e.get(49),k=e.get(59).renderType!==0,M=e.get(60),W=e.get(93),F=e.get(64),Q=e.get(91),z=Q.verticalScrollbarSize,$=Q.verticalHasArrows,G=Q.arrowSize,Y=Q.horizontalScrollbarSize,I=e.get(57),D=e.get(37);let O;if(typeof I=="string"&&/^\d+(\.\d+)?ch$/.test(I)){const Rt=parseFloat(I.substr(0,I.length-2));O=To.clampedInt(Rt*a,0,0,1e3)}else O=To.clampedInt(I,0,0,1e3);D&&(O+=16);let V=0;if(k){const Rt=Math.max(s,M);V=Math.round(Rt*l)}let j=0;T&&(j=o);let ne=0,re=ne+j,se=re+V,ie=se+O;const A=n-j-V-O;let te=!1,_e=!1,de=-1;S!==2&&(p==="inherit"&&x?(te=!0,_e=!0):_==="on"||_==="bounded"?_e=!0:_==="wordWrapColumn"&&(de=C));const Me=PL._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:u,scrollBeyondLastLine:W,minimap:F,verticalScrollbarWidth:z,viewLineCount:d,remainingWidth:A,isViewportWrapping:_e},t.memory||new Are);Me.renderMinimap!==0&&Me.minimapLeft===0&&(ne+=Me.minimapWidth,re+=Me.minimapWidth,se+=Me.minimapWidth,ie+=Me.minimapWidth);const He=A-Me.minimapWidth,st=Math.max(1,Math.floor((He-z-2)/a)),Dt=$?G:0;return _e&&(de=Math.max(1,st),_==="bounded"&&(de=Math.min(de,C))),{width:n,height:i,glyphMarginLeft:ne,glyphMarginWidth:j,lineNumbersLeft:re,lineNumbersWidth:V,decorationsLeft:se,decorationsWidth:O,contentLeft:ie,contentWidth:He,minimap:Me,viewportColumn:st,isWordWrapMinified:te,isViewportWrapping:_e,wrappingColumn:de,verticalScrollbarWidth:z,horizontalScrollbarHeight:Y,overviewRuler:{top:Dt,width:z,height:i-2*Dt,right:0}}}}class $be extends Sa{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:E("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Pn(e.enabled,this.defaultValue.enabled)}}}class jbe extends Sa{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(126,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:E("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:E("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:E("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Pn(t.enabled,this.defaultValue.enabled),fontSize:To.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:bd.string(t.fontFamily,this.defaultValue.fontFamily)}}}class qbe extends Lv{constructor(){super(58,"lineHeight",nu.lineHeight,e=>Lv.clamp(e,0,150),{markdownDescription:E("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Kbe extends Sa{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:E("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[E("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),E("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),E("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:E("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:E("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:E("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:E("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:E("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:E("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Pn(t.enabled,this.defaultValue.enabled),size:Tc(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Tc(t.side,this.defaultValue.side,["right","left"]),showSlider:Tc(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Pn(t.renderCharacters,this.defaultValue.renderCharacters),scale:To.clampedInt(t.scale,1,1,3),maxColumn:To.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function Gbe(r){return r==="ctrlCmd"?ji?"metaKey":"ctrlKey":"altKey"}class Ybe extends Sa{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:E("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:E("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:To.clampedInt(t.top,0,0,1e3),bottom:To.clampedInt(t.bottom,0,0,1e3)}}}class Zbe extends Sa{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:E("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:E("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Pn(t.enabled,this.defaultValue.enabled),cycle:Pn(t.cycle,this.defaultValue.cycle)}}}class Xbe extends nD{constructor(){super(128)}compute(e,t,n){return e.pixelRatio}}class Qbe extends Sa{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:E("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:E("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:E("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:E("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Pn(t.other,this.defaultValue.other),comments:Pn(t.comments,this.defaultValue.comments),strings:Pn(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class Jbe extends Sa{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[E("lineNumbers.off","Line numbers are not rendered."),E("lineNumbers.on","Line numbers are rendered as absolute number."),E("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),E("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:E("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function Oz(r){const e=r.get(86);return e==="editable"?r.get(80):e!=="on"}class e1e extends Sa{constructor(){const e=[],t={type:"number",description:E("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:E("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:E("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:To.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:To.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}function bG(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}let t1e=class extends Sa{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[E("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),E("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),E("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:E("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[E("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),E("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),E("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:E("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:E("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:E("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:E("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=To.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=To.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:To.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:bG(t.vertical,this.defaultValue.vertical),horizontal:bG(t.horizontal,this.defaultValue.horizontal),useShadows:Pn(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Pn(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Pn(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Pn(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Pn(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:To.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:To.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Pn(t.scrollByPage,this.defaultValue.scrollByPage)}}};const tv="inUntrustedWorkspace",hv={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments"};class n1e extends Sa{constructor(){const e={nonBasicASCII:tv,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:tv,allowedCharacters:{}};super(112,"unicodeHighlight",e,{[hv.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,tv],default:e.nonBasicASCII,description:E("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[hv.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:E("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[hv.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:E("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[hv.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,tv],default:e.includeComments,description:E("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[hv.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:E("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(np(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0));const i=super.applyUpdate(e,t);return n?new Jk(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:XR(t.nonBasicASCII,tv,[!0,!1,tv]),invisibleCharacters:Pn(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Pn(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:XR(t.includeComments,tv,[!0,!1,tv]),allowedCharacters:this.validateAllowedCharacters(e.allowedCharacters,this.defaultValue.allowedCharacters)}}validateAllowedCharacters(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}}class i1e extends Sa{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:E("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Pn(t.enabled,this.defaultValue.enabled),mode:Tc(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class r1e extends Sa{constructor(){const e={enabled:Du.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:E("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Pn(e.enabled,this.defaultValue.enabled)}}}class o1e extends Sa{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[E("editor.guides.bracketPairs.true","Enables bracket pair guides."),E("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),E("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:E("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[E("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),E("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),E("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:E("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:E("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:E("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:E("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:XR(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:XR(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Pn(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Pn(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Pn(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function XR(r,e,t){const n=t.indexOf(r);return n===-1?e:t[n]}class s1e extends Sa{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[E("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),E("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:E("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:E("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:E("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:E("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:E("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:E("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:E("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:E("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:E("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:E("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:E("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:E("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Tc(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Pn(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Pn(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Pn(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Pn(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Pn(t.showIcons,this.defaultValue.showIcons),showStatusBar:Pn(t.showStatusBar,this.defaultValue.showStatusBar),preview:Pn(t.preview,this.defaultValue.preview),previewMode:Tc(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Pn(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Pn(t.showMethods,this.defaultValue.showMethods),showFunctions:Pn(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Pn(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Pn(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Pn(t.showFields,this.defaultValue.showFields),showVariables:Pn(t.showVariables,this.defaultValue.showVariables),showClasses:Pn(t.showClasses,this.defaultValue.showClasses),showStructs:Pn(t.showStructs,this.defaultValue.showStructs),showInterfaces:Pn(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Pn(t.showModules,this.defaultValue.showModules),showProperties:Pn(t.showProperties,this.defaultValue.showProperties),showEvents:Pn(t.showEvents,this.defaultValue.showEvents),showOperators:Pn(t.showOperators,this.defaultValue.showOperators),showUnits:Pn(t.showUnits,this.defaultValue.showUnits),showValues:Pn(t.showValues,this.defaultValue.showValues),showConstants:Pn(t.showConstants,this.defaultValue.showConstants),showEnums:Pn(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Pn(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Pn(t.showKeywords,this.defaultValue.showKeywords),showWords:Pn(t.showWords,this.defaultValue.showWords),showColors:Pn(t.showColors,this.defaultValue.showColors),showFiles:Pn(t.showFiles,this.defaultValue.showFiles),showReferences:Pn(t.showReferences,this.defaultValue.showReferences),showFolders:Pn(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Pn(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Pn(t.showSnippets,this.defaultValue.showSnippets),showUsers:Pn(t.showUsers,this.defaultValue.showUsers),showIssues:Pn(t.showIssues,this.defaultValue.showIssues)}}}class a1e extends Sa{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:E("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Pn(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class l1e extends nD{constructor(){super(129,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function u1e(r){switch(r){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class c1e extends nD{constructor(){super(131,[130])}compute(e,t,n){const i=t.get(130);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}const d1e="Consolas, 'Courier New', monospace",h1e="Menlo, Monaco, 'Courier New', monospace",f1e="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",nu={fontFamily:ji?h1e:Pc?f1e:d1e,fontWeight:"normal",fontSize:ji?12:14,lineHeight:0,letterSpacing:0},Du={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},uw=[];function Ot(r){return uw[r.id]=r,r}const Dm={acceptSuggestionOnCommitCharacter:Ot(new $i(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:E("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Ot(new sa(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",E("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:E("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Ot(new Obe),accessibilityPageSize:Ot(new To(3,"accessibilityPageSize",10,1,1073741824,{description:E("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:Ot(new bd(4,"ariaLabel",E("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:Ot(new sa(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",E("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),E("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:E("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:Ot(new sa(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",E("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:E("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Ot(new sa(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",E("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:E("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Ot(new sa(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",E("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),E("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:E("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Ot(new sk(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Abe,{enumDescriptions:[E("editor.autoIndent.none","The editor will not insert indentation automatically."),E("editor.autoIndent.keep","The editor will keep the current line's indentation."),E("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),E("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),E("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:E("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Ot(new $i(10,"automaticLayout",!1)),autoSurround:Ot(new sa(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[E("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),E("editor.autoSurround.quotes","Surround with quotes but not brackets."),E("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:E("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Ot(new r1e),bracketPairGuides:Ot(new o1e),stickyTabStops:Ot(new $i(103,"stickyTabStops",!1,{description:E("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Ot(new $i(14,"codeLens",!0,{description:E("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Ot(new bd(15,"codeLensFontFamily","",{description:E("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Ot(new To(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:E("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Ot(new $i(17,"colorDecorators",!0,{description:E("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:Ot(new $i(18,"columnSelection",!1,{description:E("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Ot(new Rbe),contextmenu:Ot(new $i(20,"contextmenu",!0)),copyWithSyntaxHighlighting:Ot(new $i(21,"copyWithSyntaxHighlighting",!0,{description:E("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Ot(new sk(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Mbe,{description:E("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Ot(new $i(23,"cursorSmoothCaretAnimation",!1,{description:E("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Ot(new sk(24,"cursorStyle",dl.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Pbe,{description:E("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Ot(new To(25,"cursorSurroundingLines",0,0,1073741824,{description:E("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Ot(new sa(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[E("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),E("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:E("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:Ot(new To(27,"cursorWidth",0,0,1073741824,{markdownDescription:E("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Ot(new $i(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:Ot(new $i(29,"disableMonospaceOptimizations",!1)),domReadOnly:Ot(new $i(30,"domReadOnly",!1)),dragAndDrop:Ot(new $i(31,"dragAndDrop",!0,{description:E("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Ot(new Bbe),extraEditorClassName:Ot(new bd(33,"extraEditorClassName","")),fastScrollSensitivity:Ot(new Lv(34,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:E("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Ot(new Wbe),fixedOverflowWidgets:Ot(new $i(36,"fixedOverflowWidgets",!1)),folding:Ot(new $i(37,"folding",!0,{description:E("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Ot(new sa(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[E("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),E("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:E("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Ot(new $i(39,"foldingHighlight",!0,{description:E("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Ot(new $i(40,"foldingImportsByDefault",!1,{description:E("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:Ot(new $i(41,"unfoldOnClickAfterEndOfLine",!1,{description:E("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Ot(new bd(42,"fontFamily",nu.fontFamily,{description:E("fontFamily","Controls the font family.")})),fontInfo:Ot(new Vbe),fontLigatures2:Ot(new Dh),fontSize:Ot(new Hbe),fontWeight:Ot(new dv),formatOnPaste:Ot(new $i(47,"formatOnPaste",!1,{description:E("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Ot(new $i(48,"formatOnType",!1,{description:E("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Ot(new $i(49,"glyphMargin",!0,{description:E("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Ot(new Ube),hideCursorInOverviewRuler:Ot(new $i(51,"hideCursorInOverviewRuler",!1,{description:E("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Ot(new zbe),inDiffEditor:Ot(new $i(53,"inDiffEditor",!1)),letterSpacing:Ot(new Lv(55,"letterSpacing",nu.letterSpacing,r=>Lv.clamp(r,-5,20),{description:E("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Ot(new $be),lineDecorationsWidth:Ot(new QS(57,"lineDecorationsWidth",10)),lineHeight:Ot(new qbe),lineNumbers:Ot(new Jbe),lineNumbersMinChars:Ot(new To(60,"lineNumbersMinChars",5,1,300)),linkedEditing:Ot(new $i(61,"linkedEditing",!1,{description:E("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:Ot(new $i(62,"links",!0,{description:E("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Ot(new sa(63,"matchBrackets","always",["always","near","never"],{description:E("matchBrackets","Highlight matching brackets.")})),minimap:Ot(new Kbe),mouseStyle:Ot(new sa(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Ot(new Lv(66,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:E("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Ot(new $i(67,"mouseWheelZoom",!1,{markdownDescription:E("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Ot(new $i(68,"multiCursorMergeOverlapping",!0,{description:E("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Ot(new sk(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Gbe,{markdownEnumDescriptions:[E("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),E("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:E({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Ot(new sa(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[E("multiCursorPaste.spread","Each cursor pastes a single line of the text."),E("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:E("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:Ot(new $i(71,"occurrencesHighlight",!0,{description:E("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:Ot(new $i(72,"overviewRulerBorder",!0,{description:E("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Ot(new To(73,"overviewRulerLanes",3,0,3)),padding:Ot(new Ybe),parameterHints:Ot(new Zbe),peekWidgetDefaultFocus:Ot(new sa(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[E("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),E("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:E("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Ot(new $i(77,"definitionLinkOpensInPeek",!1,{description:E("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Ot(new Qbe),quickSuggestionsDelay:Ot(new To(79,"quickSuggestionsDelay",10,0,1073741824,{description:E("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Ot(new $i(80,"readOnly",!1)),renameOnType:Ot(new $i(81,"renameOnType",!1,{description:E("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:E("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Ot(new $i(82,"renderControlCharacters",!0,{description:E("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Ot(new $i(83,"renderFinalNewline",!0,{description:E("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Ot(new sa(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",E("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:E("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Ot(new $i(85,"renderLineHighlightOnlyWhenFocus",!1,{description:E("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Ot(new sa(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Ot(new sa(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",E("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),E("renderWhitespace.selection","Render whitespace characters only on selected text."),E("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:E("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Ot(new To(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:Ot(new $i(89,"roundedSelection",!0,{description:E("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Ot(new e1e),scrollbar:Ot(new t1e),scrollBeyondLastColumn:Ot(new To(92,"scrollBeyondLastColumn",5,0,1073741824,{description:E("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Ot(new $i(93,"scrollBeyondLastLine",!0,{description:E("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Ot(new $i(94,"scrollPredominantAxis",!0,{description:E("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Ot(new $i(95,"selectionClipboard",!0,{description:E("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Pc})),selectionHighlight:Ot(new $i(96,"selectionHighlight",!0,{description:E("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Ot(new $i(97,"selectOnLineNumbers",!0)),showFoldingControls:Ot(new sa(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[E("showFoldingControls.always","Always show the folding controls."),E("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:E("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Ot(new $i(99,"showUnused",!0,{description:E("showUnused","Controls fading out of unused code.")})),showDeprecated:Ot(new $i(125,"showDeprecated",!0,{description:E("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Ot(new jbe),snippetSuggestions:Ot(new sa(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[E("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),E("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),E("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),E("snippetSuggestions.none","Do not show snippet suggestions.")],description:E("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Ot(new a1e),smoothScrolling:Ot(new $i(102,"smoothScrolling",!1,{description:E("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Ot(new To(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Ot(new s1e),inlineSuggest:Ot(new i1e),suggestFontSize:Ot(new To(106,"suggestFontSize",0,0,1e3,{markdownDescription:E("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:Ot(new To(107,"suggestLineHeight",0,0,1e3,{markdownDescription:E("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:Ot(new $i(108,"suggestOnTriggerCharacters",!0,{description:E("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Ot(new sa(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[E("suggestSelection.first","Always select the first suggestion."),E("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),E("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:E("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Ot(new sa(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[E("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),E("tabCompletion.off","Disable tab completions."),E("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:E("tabCompletion","Enables tab completions.")})),tabIndex:Ot(new To(111,"tabIndex",0,-1,1073741824)),unicodeHighlight:Ot(new n1e),unusualLineTerminators:Ot(new sa(113,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[E("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),E("unusualLineTerminators.off","Unusual line terminators are ignored."),E("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:E("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Ot(new $i(114,"useShadowDOM",!0)),useTabStops:Ot(new $i(115,"useTabStops",!0,{description:E("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:Ot(new bd(116,"wordSeparators",Ere,{description:E("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Ot(new sa(117,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[E("wordWrap.off","Lines will never wrap."),E("wordWrap.on","Lines will wrap at the viewport width."),E({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),E({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:E({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Ot(new bd(118,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:Ot(new bd(119,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:Ot(new To(120,"wordWrapColumn",80,1,1073741824,{markdownDescription:E({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Ot(new sa(121,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Ot(new sa(122,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:Ot(new sk(123,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],u1e,{enumDescriptions:[E("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),E("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),E("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),E("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:E("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:Ot(new sa(124,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[E("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),E("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:E("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:Ot(new Fbe),pixelRatio:Ot(new Xbe),tabFocusMode:Ot(new l1e),layoutInfo:Ot(new PL),wrappingInfo:Ot(new c1e)};class g1e{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class Rz{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(Zg?nu.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const i=document.createElement("div");i.style.fontFamily=e,i.style.fontWeight="bold",i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(i);const o=document.createElement("div");o.style.fontFamily=e,o.style.fontWeight=this._bareFontInfo.fontWeight,o.style.fontSize=this._bareFontInfo.fontSize+"px",o.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,o.style.lineHeight=this._bareFontInfo.lineHeight+"px",o.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",o.style.fontStyle="italic",t.appendChild(o);const s=[];for(const a of this._requests){let l;a.type===0&&(l=n),a.type===2&&(l=i),a.type===1&&(l=o),l.appendChild(document.createElement("br"));const u=document.createElement("span");Rz._render(u,a),l.appendChild(u),s.push(u)}this._container=t,this._testElements=s}static _render(e,t){if(t.chr===" "){let n="";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}function p1e(r,e){new Rz(r,e).read()}class Ore extends ot{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,i=this.referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this.width!==n||this.height!==i)&&(this.width=n,this.height=i,e&&this.changeCallback())}}const Gb=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Fe,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},m1e=ji?1.5:1.35,G3=8;class Rw{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,i){const o=e.get(42),s=e.get(46),a=e.get(45),l=e.get(44),u=e.get(58),d=e.get(55);return Rw._create(o,s,a,l,u,d,t,n,i)}static _create(e,t,n,i,o,s,a,l,u){o===0?o=m1e*n:o<G3&&(o=o*n),o=Math.round(o),o<G3&&(o=G3);const d=1+(u?0:Gb.getZoomLevel()*.1);return n*=d,o*=d,new Rw({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:o,letterSpacing:s})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Rw._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const _1e=1;class F9 extends Rw{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=_1e,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const o4={JSONContribution:"base.contributions.json"};function v1e(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}class b1e{constructor(){this._onDidChangeSchema=new Fe,this.schemasById={}}registerSchema(e,t){this.schemasById[v1e(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const C1e=new b1e;vs.add(o4.JSONContribution,C1e);const JS={Configuration:"base.contributions.configuration"},ak="vscode://schemas/settings/resourceLanguage",CG=vs.as(o4.JSONContribution);class y1e{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Fe,this._onDidUpdateConfiguration=new Fe,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:E("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},CG.registerSchema(ak,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);CG.registerSchema(ak,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],i=[];for(const{overrides:o,source:s}of e)for(const a in o)if(n.push(a),PT.test(a)){const l=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:s,value:l});const u={type:"object",default:l,description:E("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:ak,defaultDefaultValue:l,source:Wf(s)?void 0:s};i.push(...Mre(a)),this.configurationProperties[a]=u,this.defaultLanguageConfigurationOverridesNode.properties[a]=u}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:s});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),n}validateAndRegisterProperties(e,t=!0,n,i,o=3){o=xh(e.scope)?o:e.scope;let s=[],a=e.properties;if(a)for(let u in a){if(t&&E1e(u)){delete a[u];continue}const d=a[u];if(d.source=n,d.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,d),PT.test(u)?d.scope=void 0:(d.scope=xh(d.scope)?o:d.scope,d.restricted=xh(d.restricted)?!!(i!=null&&i.includes(u)):d.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u];!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),s.push(u)}let l=e.allOf;if(l)for(let u of l)s.push(...this.validateAndRegisterProperties(u,t,n,i,o));return s}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let i=n.properties;if(i)for(const s in i)this.updateSchema(s,i[s]);let o=n.allOf;o&&o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:E("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:E("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:ak};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){E("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),E("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n==null?void 0:n.value,o=n==null?void 0:n.source;wd(i)&&(i=t.defaultDefaultValue,o=void 0),wd(i)&&(i=S1e(t.type)),t.default=i,t.defaultValueSource=o}}const Rre="\\[([^\\]]+)\\]",yG=new RegExp(Rre,"g"),w1e=`^(${Rre})+$`,PT=new RegExp(w1e);function Mre(r){const e=[];if(PT.test(r)){let t=yG.exec(r);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=yG.exec(r)}}return oS(e)}function S1e(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Pre=new y1e;vs.add(JS.Configuration,Pre);function E1e(r){return r.trim()?PT.test(r)?E("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):Pre.getConfigurationProperties()[r]!==void 0?E("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):null:E("config.property.empty","Cannot register an empty property")}const L1e=Object.prototype.hasOwnProperty;function x1e(r,e){for(let t in r)if(L1e.call(r,t)&&e({key:t,value:r[t]},function(){delete r[t]})===!1)return}class D1e{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const QR=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Fe,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(r){this._tabFocus!==r&&(this._tabFocus=r,this._onDidChangeTabFocus.fire(this._tabFocus))}},I1e=Object.hasOwnProperty;class k1e{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class T1e{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class iv{static readOptions(e){const t=e,n=new T1e;for(const i of uw){const o=i.name==="_never_"?void 0:t[i.name];n._write(i.id,o)}return n}static validateOptions(e){const t=new Nbe;for(const n of uw)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new k1e;for(const i of uw)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Rf(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!iv._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const o of uw){const s=!iv._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=s,s&&(i=!0)}return i?new Nre(n):null}static applyUpdate(e,t){let n=!1;for(const i of uw)if(t.hasOwnProperty(i.name)){const o=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=o.newValue,n=n||o.didChange}return n}}function N1e(r){const e=r.wordWrap;e===!0?r.wordWrap="on":e===!1&&(r.wordWrap="off");const t=r.lineNumbers;t===!0?r.lineNumbers="on":t===!1&&(r.lineNumbers="off"),r.autoClosingBrackets===!1&&(r.autoClosingBrackets="never",r.autoClosingQuotes="never",r.autoSurround="never"),r.cursorBlinking==="visible"&&(r.cursorBlinking="solid");const o=r.renderWhitespace;o===!0?r.renderWhitespace="boundary":o===!1&&(r.renderWhitespace="none");const s=r.renderLineHighlight;s===!0?r.renderLineHighlight="line":s===!1&&(r.renderLineHighlight="none");const a=r.acceptSuggestionOnEnter;a===!0?r.acceptSuggestionOnEnter="on":a===!1&&(r.acceptSuggestionOnEnter="off");const l=r.tabCompletion;l===!1?r.tabCompletion="off":l===!0&&(r.tabCompletion="onlySnippets");const u=r.suggest;if(u&&typeof u.filteredTypes=="object"&&u.filteredTypes){const x={};x.method="showMethods",x.function="showFunctions",x.constructor="showConstructors",x.deprecated="showDeprecated",x.field="showFields",x.variable="showVariables",x.class="showClasses",x.struct="showStructs",x.interface="showInterfaces",x.module="showModules",x.property="showProperties",x.event="showEvents",x.operator="showOperators",x.unit="showUnits",x.value="showValues",x.constant="showConstants",x.enum="showEnums",x.enumMember="showEnumMembers",x.keyword="showKeywords",x.text="showWords",x.color="showColors",x.file="showFiles",x.reference="showReferences",x.folder="showFolders",x.typeParameter="showTypeParameters",x.snippet="showSnippets",x1e(x,T=>{const k=u.filteredTypes[T.key];k===!1&&(u[T.value]=k)})}const d=r.hover;d===!0?r.hover={enabled:!0}:d===!1&&(r.hover={enabled:!1});const h=r.parameterHints;h===!0?r.parameterHints={enabled:!0}:h===!1&&(r.parameterHints={enabled:!1});const p=r.autoIndent;p===!0?r.autoIndent="full":p===!1&&(r.autoIndent="advanced");const _=r.matchBrackets;_===!0?r.matchBrackets="always":_===!1&&(r.matchBrackets="never");const{renderIndentGuides:C,highlightActiveIndentGuide:S}=r;r.guides||(r.guides={}),C!==void 0&&(r.guides.indentation=!!C),S!==void 0&&(r.guides.highlightActiveIndentation=!!S)}function wG(r){const e=Cb(r);return N1e(e),e}class Mz extends ot{constructor(e,t){super(),this._onDidChange=this._register(new Fe),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Fe),this.onDidChangeFast=this._onDidChangeFast.event,this._reservedHeight=0,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new Are,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=wG(t),this._readOptions=iv.readOptions(this._rawOptions),this._validatedOptions=iv.validateOptions(this._readOptions),this._register(Gb.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(QR.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=iv.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Rw.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:QR.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return iv.computeOptions(this._validatedOptions,n)}updateOptions(e){if(typeof e>"u")return;const t=wG(e);iv.applyUpdate(this._rawOptions,t)&&(this._readOptions=iv.readOptions(this._rawOptions),this._validatedOptions=iv.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=Mz._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}reserveHeight(e){this._reservedHeight=e,this._recomputeOptions()}}const A1e=Object.freeze({id:"editor",order:5,type:"object",title:E("editorConfigurationTitle","Editor"),scope:5}),O1e=vs.as(JS.Configuration),JR=Object.assign(Object.assign({},A1e),{properties:{"editor.tabSize":{type:"number",default:Du.tabSize,minimum:1,markdownDescription:E("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Du.insertSpaces,markdownDescription:E("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Du.detectIndentation,markdownDescription:E("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Du.trimAutoWhitespace,description:E("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Du.largeFileOptimizations,description:E("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:E("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[E("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),E("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),E("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:E("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[E("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),E("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),E("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:E("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:E("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:E("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:E("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:E("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:E("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:E("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:E("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:E("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:E("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:E("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:E("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:E("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:E("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:E("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[E("wordWrap.off","Lines will never wrap."),E("wordWrap.on","Lines will wrap at the viewport width."),E("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function R1e(r){return typeof r.type<"u"||typeof r.anyOf<"u"}for(const r of uw){const e=r.schema;if(typeof e<"u")if(R1e(e))JR.properties[`editor.${r.name}`]=e;else for(let t in e)I1e.call(e,t)&&(JR.properties[t]=e[t])}let CA=null;function Fre(){return CA===null&&(CA=Object.create(null),Object.keys(JR.properties).forEach(r=>{CA[r]=!0})),CA}function M1e(r){return Fre()[`editor.${r}`]||!1}function P1e(r){return Fre()[`diffEditor.${r}`]||!1}O1e.registerConfiguration(JR);class SG{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function F1e(){sS.INSTANCE.clearCache()}class sS extends ot{constructor(){super(),this._onDidChange=this._register(new Fe),this.onDidChange=this._onDidChange.event,this._cache=new SG,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new SG,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=sS._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new F9({zoomLevel:NR(),pixelRatio:kT(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,i){const o=new g1e(e,t);return n.push(o),i&&i.push(o),o}static _actualReadConfiguration(e){const t=[],n=[],i=this.createRequest("n",0,t,n),o=this.createRequest("",0,t,null),s=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),u=this.createRequest("2",0,t,n),d=this.createRequest("3",0,t,n),h=this.createRequest("4",0,t,n),p=this.createRequest("5",0,t,n),_=this.createRequest("6",0,t,n),C=this.createRequest("7",0,t,n),S=this.createRequest("8",0,t,n),x=this.createRequest("9",0,t,n),T=this.createRequest("",0,t,n),k=this.createRequest("",0,t,null),M=this.createRequest("",0,t,n),W=this.createRequest(String.fromCharCode(11825),0,t,null),F="|/-_ilm%";for(let I=0,D=F.length;I<D;I++)this.createRequest(F.charAt(I),0,t,n),this.createRequest(F.charAt(I),1,t,n),this.createRequest(F.charAt(I),2,t,n);p1e(e,t);const Q=Math.max(a.width,l.width,u.width,d.width,h.width,p.width,_.width,C.width,S.width,x.width);let z=e.fontFeatureSettings===Dh.OFF;const $=n[0].width;for(let I=1,D=n.length;z&&I<D;I++){const O=$-n[I].width;if(O<-.001||O>.001){z=!1;break}}let G=!0;z&&k.width!==$&&(G=!1),k.width>T.width&&(G=!1);const Y=Die()>2e3;return new F9({zoomLevel:NR(),pixelRatio:kT(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:z,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:G,spaceWidth:s.width,middotWidth:M.width,wsmiddotWidth:W.width,maxDigitWidth:Q},Y)}}sS.INSTANCE=new sS;let ac=class Bre extends Mz{constructor(e,t,n=null,i){super(e,t),this.accessibilityService=i,this._elementSizeObserver=this._register(new Ore(n,t.dimension,()=>this._recomputeOptions())),this._register(sS.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(sz(o=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(Zg?nu.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(Zg?nu.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Zg&&!kie&&(e+="no-user-select "),Zg&&(e+="no-minimap-shadow "),ji&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Bre._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:pC||Id,pixelRatio:kT(),zoomLevel:NR(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return sS.INSTANCE.readConfiguration(e)}},le=class Eu{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return Eu.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Eu.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Eu.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Eu.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Eu.plusRange(this,e)}static plusRange(e,t){let n,i,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new Eu(n,i,o,s)}intersectRanges(e){return Eu.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,u=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>u?(o=u,s=d):o===u&&(s=Math.min(s,d)),n>o||n===o&&i>s?null:new Eu(n,i,o,s)}equalsRange(e){return Eu.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Eu.getEndPosition(this)}static getEndPosition(e){return new Ge(e.endLineNumber,e.endColumn)}getStartPosition(){return Eu.getStartPosition(this)}static getStartPosition(e){return new Ge(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Eu(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Eu(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Eu.collapseToStart(this)}static collapseToStart(e){return new Eu(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Eu(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Eu(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const u=e.endLineNumber|0,d=t.endLineNumber|0;if(u===d){const h=e.endColumn|0,p=t.endColumn|0;return h-p}return u-d}return a-l}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},ln=class Pg extends le{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Pg.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Pg(this.startLineNumber,this.startColumn,e,t):new Pg(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Ge(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ge(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Pg(e,t,this.endLineNumber,this.endColumn):new Pg(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Pg(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Pg(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Pg(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Pg(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new Pg(e,t,n,i):new Pg(n,i,e,t)}};class Wre{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function tr(r){return new Wre(r)}function ca(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}var B1e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},co;(function(r){r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"})(co||(co={}));class Or extends ot{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(kt(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(kt(document,"touchend",e=>this.onTouchEnd(e))),this._register(kt(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Or.isTouchDevice()?(Or.INSTANCE||(Or.INSTANCE=new Or),Or.INSTANCE.targets.push(e),{dispose:()=>{Or.INSTANCE.targets=Or.INSTANCE.targets.filter(t=>t!==e)}}):ot.None}static ignoreTarget(e){return Or.isTouchDevice()?(Or.INSTANCE||(Or.INSTANCE=new Or),Or.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Or.INSTANCE.ignoreTargets=Or.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):ot.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(co.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,o=e.changedTouches.length;i<o;i++){let s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],l=Date.now()-a.initialTimeStamp;if(l<Or.HOLD_DELAY&&Math.abs(a.initialPageX-wf(a.rollingPageX))<30&&Math.abs(a.initialPageY-wf(a.rollingPageY))<30){let u=this.newGestureEvent(co.Tap,a.initialTarget);u.pageX=wf(a.rollingPageX),u.pageY=wf(a.rollingPageY),this.dispatchEvent(u)}else if(l>=Or.HOLD_DELAY&&Math.abs(a.initialPageX-wf(a.rollingPageX))<30&&Math.abs(a.initialPageY-wf(a.rollingPageY))<30){let u=this.newGestureEvent(co.Contextmenu,a.initialTarget);u.pageX=wf(a.rollingPageX),u.pageY=wf(a.rollingPageY),this.dispatchEvent(u)}else if(n===1){let u=wf(a.rollingPageX),d=wf(a.rollingPageY),h=wf(a.rollingTimestamps)-a.rollingTimestamps[0],p=u-a.rollingPageX[0],_=d-a.rollingPageY[0];const C=this.targets.filter(S=>a.initialTarget instanceof Node&&S.contains(a.initialTarget));this.inertia(C,t,Math.abs(p)/h,p>0?1:-1,u,Math.abs(_)/h,_>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(co.End,a.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===co.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Or.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===co.Change||e.type===co.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,o,s,a,l){this.handle=Rv(()=>{let u=Date.now(),d=u-t,h=0,p=0,_=!0;n+=Or.SCROLL_FRICTION*d,s+=Or.SCROLL_FRICTION*d,n>0&&(_=!1,h=i*n*d),s>0&&(_=!1,p=a*s*d);let C=this.newGestureEvent(co.Change);C.translationX=h,C.translationY=p,e.forEach(S=>S.dispatchEvent(C)),_||this.inertia(e,u,n,i,o+h,s,a,l+p)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(co.Change,s.initialTarget);a.translationX=o.pageX-wf(s.rollingPageX),a.translationY=o.pageY-wf(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Or.SCROLL_FRICTION=-.005;Or.HOLD_DELAY=700;Or.CLEAR_TAP_COUNT_TIME=400;B1e([ca],Or,"isTouchDevice",null);function iD(r,e){let t=new Tf(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class eE{constructor(){this._hooks=new Nt,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,i,o){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=i,this._onStopCallback=o;const s=w9.getSameOriginWindowChain(),a=Av?"pointermove":"mousemove",l="mouseup",u=s.map(h=>h.window.document),d=DC(e);d&&u.unshift(d);for(const h of u)this._hooks.add(mz(h,a,p=>{if(p.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(p)},(p,_)=>this._mouseMoveEventMerger(p,_))),this._hooks.add(kt(h,l,p=>this.stopMonitoring(!0)));if(w9.hasDifferentOriginAncestor()){let h=s[s.length-1];this._hooks.add(kt(h.window.document,"mouseout",p=>{new Tf(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(kt(h.window.document,"mouseover",p=>{new Tf(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(kt(h.window.document.body,"mouseleave",p=>{this.stopMonitoring(!0)}))}}}function _C(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}class sr{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=_C(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Jp{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=_C(Math.max(Math.min(1,t),0),3),this.l=_C(Math.max(Math.min(1,n),0),3),this.a=_C(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,s=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,u=0;const d=(a+s)/2,h=s-a;if(h>0){switch(u=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),s){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new Jp(l,u,d,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:o}=e;let s,a,l;if(n===0)s=a=l=i;else{const u=i<.5?i*(1+n):i+n-i*n,d=2*i-u;s=Jp._hue2rgb(d,u,t+1/3),a=Jp._hue2rgb(d,u,t),l=Jp._hue2rgb(d,u,t-1/3)}return new sr(Math.round(s*255),Math.round(a*255),Math.round(l*255),o)}}class xv{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=_C(Math.max(Math.min(1,t),0),3),this.v=_C(Math.max(Math.min(1,n),0),3),this.a=_C(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=o-s,l=o===0?0:a/o;let u;return a===0?u=0:o===t?u=((n-i)/a%6+6)%6:o===n?u=(i-t)/a+2:u=(t-n)/a+4,new xv(Math.round(u*60),l,o,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:o}=e,s=i*n,a=s*(1-Math.abs(t/60%2-1)),l=i-s;let[u,d,h]=[0,0,0];return t<60?(u=s,d=a):t<120?(u=a,d=s):t<180?(d=s,h=a):t<240?(d=a,h=s):t<300?(u=a,h=s):t<=360&&(u=s,h=a),u=Math.round((u+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new sr(u,d,h,o)}}class je{constructor(e){if(e)if(e instanceof sr)this.rgba=e;else if(e instanceof Jp)this._hsla=e,this.rgba=Jp.toRGBA(e);else if(e instanceof xv)this._hsva=e,this.rgba=xv.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return je.Format.CSS.parseHex(e)||je.red}get hsla(){return this._hsla?this._hsla:Jp.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:xv.fromRGBA(this.rgba)}equals(e){return!!e&&sr.equals(this.rgba,e.rgba)&&Jp.equals(this.hsla,e.hsla)&&xv.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=je._relativeLuminanceForComponent(this.rgba.r),t=je._relativeLuminanceForComponent(this.rgba.g),n=je._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return _C(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new je(new Jp(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new je(new Jp(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:o}=this.rgba;return new je(new sr(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new je(new sr(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=je.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}}je.white=new je(new sr(255,255,255,1));je.black=new je(new sr(0,0,0,1));je.red=new je(new sr(255,0,0,1));je.blue=new je(new sr(0,0,255,1));je.cyan=new je(new sr(0,255,255,1));je.lightgrey=new je(new sr(211,211,211,1));je.transparent=new je(new sr(0,0,0,0));(function(r){(function(e){(function(t){function n(_){return _.rgba.a===1?`rgb(${_.rgba.r}, ${_.rgba.g}, ${_.rgba.b})`:r.Format.CSS.formatRGBA(_)}t.formatRGB=n;function i(_){return`rgba(${_.rgba.r}, ${_.rgba.g}, ${_.rgba.b}, ${+_.rgba.a.toFixed(2)})`}t.formatRGBA=i;function o(_){return _.hsla.a===1?`hsl(${_.hsla.h}, ${(_.hsla.s*100).toFixed(2)}%, ${(_.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(_)}t.formatHSL=o;function s(_){return`hsla(${_.hsla.h}, ${(_.hsla.s*100).toFixed(2)}%, ${(_.hsla.l*100).toFixed(2)}%, ${_.hsla.a.toFixed(2)})`}t.formatHSLA=s;function a(_){const C=_.toString(16);return C.length!==2?"0"+C:C}function l(_){return`#${a(_.rgba.r)}${a(_.rgba.g)}${a(_.rgba.b)}`}t.formatHex=l;function u(_,C=!1){return C&&_.rgba.a===1?r.Format.CSS.formatHex(_):`#${a(_.rgba.r)}${a(_.rgba.g)}${a(_.rgba.b)}${a(Math.round(_.rgba.a*255))}`}t.formatHexA=u;function d(_){return _.isOpaque()?r.Format.CSS.formatHex(_):r.Format.CSS.formatRGBA(_)}t.format=d;function h(_){const C=_.length;if(C===0||_.charCodeAt(0)!==35)return null;if(C===7){const S=16*p(_.charCodeAt(1))+p(_.charCodeAt(2)),x=16*p(_.charCodeAt(3))+p(_.charCodeAt(4)),T=16*p(_.charCodeAt(5))+p(_.charCodeAt(6));return new r(new sr(S,x,T,1))}if(C===9){const S=16*p(_.charCodeAt(1))+p(_.charCodeAt(2)),x=16*p(_.charCodeAt(3))+p(_.charCodeAt(4)),T=16*p(_.charCodeAt(5))+p(_.charCodeAt(6)),k=16*p(_.charCodeAt(7))+p(_.charCodeAt(8));return new r(new sr(S,x,T,k/255))}if(C===4){const S=p(_.charCodeAt(1)),x=p(_.charCodeAt(2)),T=p(_.charCodeAt(3));return new r(new sr(16*S+S,16*x+x,16*T+T))}if(C===5){const S=p(_.charCodeAt(1)),x=p(_.charCodeAt(2)),T=p(_.charCodeAt(3)),k=p(_.charCodeAt(4));return new r(new sr(16*S+S,16*x+x,16*T+T,(16*k+k)/255))}return null}t.parseHex=h;function p(_){switch(_){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(r.Format||(r.Format={}))})(je||(je={}));function Vre(r){return`--vscode-${r.replace(".","-")}`}const Hre={ColorContribution:"base.contributions.colors"};class W1e{constructor(){this._onDidChangeSchema=new Fe,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return gb(i,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const s4=new W1e;vs.add(Hre.ColorContribution,s4);function Be(r,e,t,n,i){return s4.registerColor(r,e,t,n,i)}const An=Be("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},E("foreground","Overall foreground color. This color is only used if not overridden by a component.")),V1e=Be("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},E("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Y3=Be("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},E("iconForeground","The default color for icons in the workbench.")),aS=Be("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},E("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ns=Be("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},E("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Bc=Be("contrastActiveBorder",{light:null,dark:null,hc:aS},E("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),a4=Be("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},E("textLinkForeground","Foreground color for links in text.")),l4=Be("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},E("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Ure=Be("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:je.black},E("textCodeBlockBackground","Background color for code blocks in text.")),NC=Be("widget.shadow",{dark:Qr(je.black,.36),light:Qr(je.black,.16),hc:null},E("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Pz=Be("input.background",{dark:"#3C3C3C",light:je.white,hc:je.black},E("inputBoxBackground","Input box background.")),Fz=Be("input.foreground",{dark:An,light:An,hc:An},E("inputBoxForeground","Input box foreground.")),Bz=Be("input.border",{dark:null,light:null,hc:Ns},E("inputBoxBorder","Input box border.")),B9=Be("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Ns},E("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),W9=Be("inputOption.activeBackground",{dark:Qr(aS,.4),light:Qr(aS,.2),hc:je.transparent},E("inputOption.activeBackground","Background hover color of options in input fields.")),V9=Be("inputOption.activeForeground",{dark:je.white,light:je.black,hc:null},E("inputOption.activeForeground","Foreground color of activated options in input fields.")),zre=Be("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:je.black},E("inputValidationInfoBackground","Input validation background color for information severity.")),$re=Be("inputValidation.infoForeground",{dark:null,light:null,hc:null},E("inputValidationInfoForeground","Input validation foreground color for information severity.")),jre=Be("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Ns},E("inputValidationInfoBorder","Input validation border color for information severity.")),qre=Be("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:je.black},E("inputValidationWarningBackground","Input validation background color for warning severity.")),Kre=Be("inputValidation.warningForeground",{dark:null,light:null,hc:null},E("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Gre=Be("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Ns},E("inputValidationWarningBorder","Input validation border color for warning severity.")),Yre=Be("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:je.black},E("inputValidationErrorBackground","Input validation background color for error severity.")),Zre=Be("inputValidation.errorForeground",{dark:null,light:null,hc:null},E("inputValidationErrorForeground","Input validation foreground color for error severity.")),Xre=Be("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Ns},E("inputValidationErrorBorder","Input validation border color for error severity.")),Z3=Be("dropdown.background",{dark:"#3C3C3C",light:je.white,hc:je.black},E("dropdownBackground","Dropdown background.")),EG=Be("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:je.white},E("dropdownForeground","Dropdown foreground.")),H1e=Be("button.foreground",{dark:je.white,light:je.white,hc:je.white},E("buttonForeground","Button foreground color.")),H9=Be("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},E("buttonBackground","Button background color.")),U1e=Be("button.hoverBackground",{dark:roe(H9,.2),light:ioe(H9,.2),hc:null},E("buttonHoverBackground","Button background color when hovering.")),eT=Be("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:je.black},E("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),tT=Be("badge.foreground",{dark:je.white,light:"#333",hc:je.white},E("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),rD=Be("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},E("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),FL=Be("scrollbarSlider.background",{dark:je.fromHex("#797979").transparent(.4),light:je.fromHex("#646464").transparent(.4),hc:Qr(Ns,.6)},E("scrollbarSliderBackground","Scrollbar slider background color.")),BL=Be("scrollbarSlider.hoverBackground",{dark:je.fromHex("#646464").transparent(.7),light:je.fromHex("#646464").transparent(.7),hc:Qr(Ns,.8)},E("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),WL=Be("scrollbarSlider.activeBackground",{dark:je.fromHex("#BFBFBF").transparent(.4),light:je.fromHex("#000000").transparent(.6),hc:Ns},E("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),z1e=Be("progressBar.background",{dark:je.fromHex("#0E70C0"),light:je.fromHex("#0E70C0"),hc:Ns},E("progressBarBackground","Background color of the progress bar that can show for long running operations.")),$1e=Be("editorError.background",{dark:null,light:null,hc:null},E("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),nT=Be("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},E("editorError.foreground","Foreground color of error squigglies in the editor.")),Qre=Be("editorError.border",{dark:null,light:null,hc:je.fromHex("#E47777").transparent(.8)},E("errorBorder","Border color of error boxes in the editor.")),j1e=Be("editorWarning.background",{dark:null,light:null,hc:null},E("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Bb=Be("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},E("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),u4=Be("editorWarning.border",{dark:null,light:null,hc:je.fromHex("#FFCC00").transparent(.8)},E("warningBorder","Border color of warning boxes in the editor.")),q1e=Be("editorInfo.background",{dark:null,light:null,hc:null},E("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),gm=Be("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},E("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Wz=Be("editorInfo.border",{dark:null,light:null,hc:je.fromHex("#3794FF").transparent(.8)},E("infoBorder","Border color of info boxes in the editor.")),K1e=Be("editorHint.foreground",{dark:je.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},E("editorHint.foreground","Foreground color of hint squigglies in the editor.")),G1e=Be("editorHint.border",{dark:null,light:null,hc:je.fromHex("#eeeeee").transparent(.8)},E("hintBorder","Border color of hint boxes in the editor.")),Mf=Be("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:je.black},E("editorBackground","Editor background color.")),p2=Be("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:je.white},E("editorForeground","Editor default foreground color.")),pm=Be("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},E("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Wb=Be("editorWidget.foreground",{dark:An,light:An,hc:An},E("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),MO=Be("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Ns},E("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Y1e=Be("editorWidget.resizeBorder",{light:null,dark:null,hc:null},E("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),LG=Be("quickInput.background",{dark:pm,light:pm,hc:pm},E("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Z1e=Be("quickInput.foreground",{dark:Wb,light:Wb,hc:Wb},E("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),X1e=Be("quickInputTitle.background",{dark:new je(new sr(255,255,255,.105)),light:new je(new sr(0,0,0,.06)),hc:"#000000"},E("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Q1e=Be("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:je.white},E("pickerGroupForeground","Quick picker color for grouping labels.")),J1e=Be("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:je.white},E("pickerGroupBorder","Quick picker color for grouping borders.")),eCe=Be("keybindingLabel.background",{dark:new je(new sr(128,128,128,.17)),light:new je(new sr(221,221,221,.4)),hc:je.transparent},E("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),tCe=Be("keybindingLabel.foreground",{dark:je.fromHex("#CCCCCC"),light:je.fromHex("#555555"),hc:je.white},E("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),nCe=Be("keybindingLabel.border",{dark:new je(new sr(51,51,51,.6)),light:new je(new sr(204,204,204,.4)),hc:new je(new sr(111,195,223))},E("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),iCe=Be("keybindingLabel.bottomBorder",{dark:new je(new sr(68,68,68,.6)),light:new je(new sr(187,187,187,.4)),hc:new je(new sr(111,195,223))},E("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),vC=Be("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},E("editorSelectionBackground","Color of the editor selection.")),rCe=Be("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},E("editorSelectionForeground","Color of the selected text for high contrast.")),Vz=Be("editor.inactiveSelectionBackground",{light:Qr(vC,.5),dark:Qr(vC,.5),hc:Qr(vC,.5)},E("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Hz=Be("editor.selectionHighlightBackground",{light:IG(vC,Mf,.3,.6),dark:IG(vC,Mf,.3,.6),hc:null},E("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),oCe=Be("editor.selectionHighlightBorder",{light:null,dark:null,hc:Bc},E("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),sCe=Be("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},E("editorFindMatch","Color of the current search match.")),U9=Be("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},E("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),aCe=Be("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},E("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),lCe=Be("editor.findMatchBorder",{light:null,dark:null,hc:Bc},E("editorFindMatchBorder","Border color of the current search match.")),uCe=Be("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Bc},E("findMatchHighlightBorder","Border color of the other search matches.")),cCe=Be("editor.findRangeHighlightBorder",{dark:null,light:null,hc:Qr(Bc,.4)},E("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),dCe=Be("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},E("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),lS=Be("editorHoverWidget.background",{light:pm,dark:pm,hc:pm},E("hoverBackground","Background color of the editor hover.")),Uz=Be("editorHoverWidget.foreground",{light:Wb,dark:Wb,hc:Wb},E("hoverForeground","Foreground color of the editor hover.")),zz=Be("editorHoverWidget.border",{light:MO,dark:MO,hc:MO},E("hoverBorder","Border color of the editor hover.")),hCe=Be("editorHoverWidget.statusBarBackground",{dark:roe(lS,.2),light:ioe(lS,.05),hc:pm},E("statusBarBackground","Background color of the editor hover status bar.")),Jre=Be("editorLink.activeForeground",{dark:"#4E94CE",light:je.blue,hc:je.cyan},E("activeLinkForeground","Color of active links.")),Mw=Be("editorInlayHint.foreground",{dark:Qr(tT,.8),light:Qr(tT,.8),hc:tT},E("editorInlayHintForeground","Foreground color of inline hints")),Pw=Be("editorInlayHint.background",{dark:Qr(eT,.6),light:Qr(eT,.3),hc:eT},E("editorInlayHintBackground","Background color of inline hints")),fCe=Be("editorInlayHint.typeForeground",{dark:Mw,light:Mw,hc:Mw},E("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),gCe=Be("editorInlayHint.typeBackground",{dark:Pw,light:Pw,hc:Pw},E("editorInlayHintBackgroundTypes","Background color of inline hints for types")),pCe=Be("editorInlayHint.parameterForeground",{dark:Mw,light:Mw,hc:Mw},E("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),mCe=Be("editorInlayHint.parameterBackground",{dark:Pw,light:Pw,hc:Pw},E("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),_Ce=Be("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},E("editorLightBulbForeground","The color used for the lightbulb actions icon.")),vCe=Be("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},E("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),z9=new je(new sr(155,185,85,.2)),$9=new je(new sr(255,0,0,.2)),eoe=Be("diffEditor.insertedTextBackground",{dark:z9,light:z9,hc:null},E("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),toe=Be("diffEditor.removedTextBackground",{dark:$9,light:$9,hc:null},E("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),bCe=Be("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},E("diffEditorInsertedOutline","Outline color for the text that got inserted.")),CCe=Be("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},E("diffEditorRemovedOutline","Outline color for text that got removed.")),yCe=Be("diffEditor.border",{dark:null,light:null,hc:Ns},E("diffEditorBorder","Border color between the two text editors.")),wCe=Be("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},E("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),SCe=Be("list.focusBackground",{dark:null,light:null,hc:null},E("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ECe=Be("list.focusForeground",{dark:null,light:null,hc:null},E("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),LCe=Be("list.focusOutline",{dark:aS,light:aS,hc:Bc},E("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fw=Be("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},E("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bC=Be("list.activeSelectionForeground",{dark:je.white,light:je.white,hc:null},E("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),PO=Be("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},E("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xCe=Be("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},E("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),DCe=Be("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},E("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ICe=Be("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},E("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kCe=Be("list.inactiveFocusBackground",{dark:null,light:null,hc:null},E("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),TCe=Be("list.inactiveFocusOutline",{dark:null,light:null,hc:null},E("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),NCe=Be("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},E("listHoverBackground","List/Tree background when hovering over items using the mouse.")),ACe=Be("list.hoverForeground",{dark:null,light:null,hc:null},E("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),OCe=Be("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},E("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),X3=Be("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:aS},E("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),RCe=Be("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:je.black},E("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),MCe=Be("listFilterWidget.outline",{dark:je.transparent,light:je.transparent,hc:"#f38518"},E("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),PCe=Be("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Ns},E("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),FCe=Be("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},E("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),BCe=Be("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},E("tableColumnsBorder","Table border color between columns.")),WCe=Be("tree.tableOddRowsBackground",{dark:Qr(An,.04),light:Qr(An,.04),hc:null},E("tableOddRowsBackgroundColor","Background color for odd table rows.")),xG=Be("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,E("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),VCe=Be("quickInputList.focusForeground",{dark:bC,light:bC,hc:bC},E("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),HCe=Be("quickInputList.focusIconForeground",{dark:PO,light:PO,hc:PO},E("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),FO=Be("quickInputList.focusBackground",{dark:FT(xG,Fw),light:FT(xG,Fw),hc:null},E("quickInput.listFocusBackground","Quick picker background color for the focused item.")),UCe=Be("menu.border",{dark:null,light:null,hc:Ns},E("menuBorder","Border color of menus.")),zCe=Be("menu.foreground",{dark:EG,light:An,hc:EG},E("menuForeground","Foreground color of menu items.")),$Ce=Be("menu.background",{dark:Z3,light:Z3,hc:Z3},E("menuBackground","Background color of menu items.")),jCe=Be("menu.selectionForeground",{dark:bC,light:bC,hc:bC},E("menuSelectionForeground","Foreground color of the selected menu item in menus.")),qCe=Be("menu.selectionBackground",{dark:Fw,light:Fw,hc:Fw},E("menuSelectionBackground","Background color of the selected menu item in menus.")),KCe=Be("menu.selectionBorder",{dark:null,light:null,hc:Bc},E("menuSelectionBorder","Border color of the selected menu item in menus.")),GCe=Be("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Ns},E("menuSeparatorBackground","Color of a separator menu item in menus.")),YCe=Be("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},E("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),c4=Be("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},E("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),noe=Be("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},E("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ZCe=Be("editorOverviewRuler.unicodeForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},E("overviewRulerUnicodeForeground","Overview ruler marker color for highlighted unicode characters. The color must not be opaque so as not to hide underlying decorations."),!0),$z=Be("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},E("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),d4=Be("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},E("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),DG=Be("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},E("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),XCe=Be("minimap.errorHighlight",{dark:new je(new sr(255,18,18,.7)),light:new je(new sr(255,18,18,.7)),hc:new je(new sr(255,50,50,1))},E("minimapError","Minimap marker color for errors.")),QCe=Be("minimap.warningHighlight",{dark:Bb,light:Bb,hc:u4},E("overviewRuleWarning","Minimap marker color for warnings.")),JCe=Be("minimap.background",{dark:null,light:null,hc:null},E("minimapBackground","Minimap background color.")),eye=Be("minimap.foregroundOpacity",{dark:je.fromHex("#000f"),light:je.fromHex("#000f"),hc:je.fromHex("#000f")},E("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),tye=Be("minimap.unicodeHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},E("minimapUnicodeHighlight","Minimap marker color for highlighted unicode characters.")),nye=Be("minimapSlider.background",{light:Qr(FL,.5),dark:Qr(FL,.5),hc:Qr(FL,.5)},E("minimapSliderBackground","Minimap slider background color.")),iye=Be("minimapSlider.hoverBackground",{light:Qr(BL,.5),dark:Qr(BL,.5),hc:Qr(BL,.5)},E("minimapSliderHoverBackground","Minimap slider background color when hovering.")),rye=Be("minimapSlider.activeBackground",{light:Qr(WL,.5),dark:Qr(WL,.5),hc:Qr(WL,.5)},E("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),oye=Be("problemsErrorIcon.foreground",{dark:nT,light:nT,hc:nT},E("problemsErrorIconForeground","The color used for the problems error icon.")),sye=Be("problemsWarningIcon.foreground",{dark:Bb,light:Bb,hc:Bb},E("problemsWarningIconForeground","The color used for the problems warning icon.")),aye=Be("problemsInfoIcon.foreground",{dark:gm,light:gm,hc:gm},E("problemsInfoIconForeground","The color used for the problems info icon."));function lye(r,e){var t,n,i;switch(r.op){case 0:return(t=gb(r.value,e))===null||t===void 0?void 0:t.darken(r.factor);case 1:return(n=gb(r.value,e))===null||n===void 0?void 0:n.lighten(r.factor);case 2:return(i=gb(r.value,e))===null||i===void 0?void 0:i.transparent(r.factor);case 3:for(const a of r.values){const l=gb(a,e);if(l)return l}return;case 5:return gb(e.defines(r.if)?r.then:r.else,e);case 4:const o=gb(r.value,e);if(!o)return;const s=gb(r.background,e);return s?o.isDarkerThan(s)?je.getLighterColor(o,s,r.factor).transparent(r.transparency):je.getDarkerColor(o,s,r.factor).transparent(r.transparency):o.transparent(r.factor*r.transparency);default:throw ire()}}function ioe(r,e){return{op:0,value:r,factor:e}}function roe(r,e){return{op:1,value:r,factor:e}}function Qr(r,e){return{op:2,value:r,factor:e}}function FT(...r){return{op:3,values:r}}function IG(r,e,t,n){return{op:4,value:r,background:e,factor:t,transparency:n}}function gb(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?je.fromHex(r):e.getColor(r);if(r instanceof je)return r;if(typeof r=="object")return lye(r,e)}}const ooe="vscode://schemas/workbench-colors";let soe=vs.as(o4.JSONContribution);soe.registerSchema(ooe,s4.getColorSchema());const kG=new Xr(()=>soe.notifySchemaChanged(ooe),200);s4.onDidChangeSchema(()=>{kG.isScheduled()||kG.schedule()});class jz{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new aoe(this.x-Mb.scrollX,this.y-Mb.scrollY)}}class aoe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new jz(this.clientX+Mb.scrollX,this.clientY+Mb.scrollY)}}class uye{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}function loe(r){const e=tu(r);return new uye(e.left,e.top,e.width,e.height)}class uS extends Tf{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new jz(this.posx,this.posy),this.editorPos=loe(t)}}class cye{constructor(e){this._editorViewDomNode=e}_create(e){return new uS(e,this._editorViewDomNode)}onContextMenu(e,t){return kt(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return kt(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return kt(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return pz(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,i){return mz(e,"mousemove",t,(s,a)=>n(s,this._create(a)),i)}}class dye{constructor(e){this._editorViewDomNode=e}_create(e){return new uS(e,this._editorViewDomNode)}onPointerUp(e,t){return kt(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return kt(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return p0e(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,i){return mz(e,"pointermove",t,(s,a)=>n(s,this._create(a)),i)}}class hye extends ot{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new eE),this._keydownListener=null}startMonitoring(e,t,n,i,o){this._keydownListener=za(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const s=(a,l)=>n(a,new uS(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,s,i,a=>{this._keydownListener.dispose(),o(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class uoe{constructor(e){this._editor=e,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Xr(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new fye(t,`dyn-rule-${i}`,qP(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class fye{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=Bf(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const o=t[i];let s;typeof o=="object"?s=`var(${Vre(o.id)})`:s=o;const a=gye(i);n+=`
	${a}: ${s};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function gye(r){return r.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class m2 extends ot{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){let o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class jf extends m2{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Fv{static write(e,t){e instanceof Wre,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(i);for(let s=0;s<i;s++)o[s]=n[i-s-1];return o}}class pye{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class mye extends pye{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class _ye{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class h4{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const o=e[n];t[n]=new h4(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}}class VL{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class vye{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class bye{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class Q3{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,o){const s=this._createRange();try{return s.setStart(e,t),s.setEnd(n,i),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(VL.compare);let t=[],n=0,i=e[0];for(let o=1,s=e.length;o<s;o++){const a=e[o];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];n[i]=new VL(Math.max(0,s.left-t),s.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,i,o,s,a){const u=e.children.length-1;if(0>u)return null;if(t=Math.min(u,Math.max(0,t)),i=Math.min(u,Math.max(0,i)),t===i&&n===o&&n===0&&!e.children[t].firstChild){const _=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(_,s)}t!==i&&i>0&&o===0&&(i--,o=1073741824);let d=e.children[t].firstChild,h=e.children[i].firstChild;if((!d||!h)&&(!d&&n===0&&t>0&&(d=e.children[t-1].firstChild,n=1073741824),!h&&o===0&&i>0&&(h=e.children[i-1].firstChild,o=1073741824)),!d||!h)return null;n=Math.min(d.textContent.length,Math.max(0,n)),o=Math.min(h.textContent.length,Math.max(0,o));const p=this._readClientRects(d,n,h,o,a);return this._createHorizontalRangesFromClientRects(p,s)}}class Th{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!Th._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,o=n+1,s=n-t,a=[];let l=0;for(const u of e)u.endColumn<=i||u.startColumn>=o||(a[l++]=new Th(Math.max(1,u.startColumn-i+1),Math.min(s+1,u.endColumn-i+1),u.className,u.type));return a}static filter(e,t,n,i){if(e.length===0)return[];let o=[],s=0;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(u.type===0||u.type===3))continue;const h=d.startLineNumber===t?d.startColumn:n,p=d.endLineNumber===t?d.endColumn:i;o[s++]=new Th(h,p,u.inlineClassName,u.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Th._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class TG{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class eM{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new TG(t,this.stopOffsets[i],this.classNames.join(" "),eM._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new TG(t,e-1,this.classNames.join(" "),eM._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class Cye{static normalize(e,t){if(t.length===0)return[];let n=[];const i=new eM;let o=0;for(let s=0,a=t.length;s<a;s++){const l=t[s];let u=l.startColumn,d=l.endColumn;const h=l.className,p=l.type===1?2:l.type===2?4:0;if(u>1){const S=e.charCodeAt(u-2);Ca(S)&&u--}if(d>1){const S=e.charCodeAt(d-2);Ca(S)&&d--}const _=u-1,C=d-2;o=i.consumeLowerThan(_,o,n),i.count===0&&(o=_),i.insert(C,h,p)}return i.consumeLowerThan(1073741824,o,n),n}}var J3={},lk={},NG;function yye(){if(NG)return lk;NG=1,lk.byteLength=a,lk.toByteArray=u,lk.fromByteArray=p;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function s(_){var C=_.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=C);var x=S===C?0:4-S%4;return[S,x]}function a(_){var C=s(_),S=C[0],x=C[1];return(S+x)*3/4-x}function l(_,C,S){return(C+S)*3/4-S}function u(_){var C,S=s(_),x=S[0],T=S[1],k=new t(l(_,x,T)),M=0,W=T>0?x-4:x,F;for(F=0;F<W;F+=4)C=e[_.charCodeAt(F)]<<18|e[_.charCodeAt(F+1)]<<12|e[_.charCodeAt(F+2)]<<6|e[_.charCodeAt(F+3)],k[M++]=C>>16&255,k[M++]=C>>8&255,k[M++]=C&255;return T===2&&(C=e[_.charCodeAt(F)]<<2|e[_.charCodeAt(F+1)]>>4,k[M++]=C&255),T===1&&(C=e[_.charCodeAt(F)]<<10|e[_.charCodeAt(F+1)]<<4|e[_.charCodeAt(F+2)]>>2,k[M++]=C>>8&255,k[M++]=C&255),k}function d(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function h(_,C,S){for(var x,T=[],k=C;k<S;k+=3)x=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(_[k+2]&255),T.push(d(x));return T.join("")}function p(_){for(var C,S=_.length,x=S%3,T=[],k=16383,M=0,W=S-x;M<W;M+=k)T.push(h(_,M,M+k>W?W:M+k));return x===1?(C=_[S-1],T.push(r[C>>2]+r[C<<4&63]+"==")):x===2&&(C=(_[S-2]<<8)+_[S-1],T.push(r[C>>10]+r[C>>4&63]+r[C<<2&63]+"=")),T.join("")}return lk}var yA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var AG;function wye(){return AG||(AG=1,yA.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,u=l>>1,d=-7,h=t?i-1:0,p=t?-1:1,_=r[e+h];for(h+=p,o=_&(1<<-d)-1,_>>=-d,d+=a;d>0;o=o*256+r[e+h],h+=p,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=n;d>0;s=s*256+r[e+h],h+=p,d-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(_?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(_?-1:1)*s*Math.pow(2,o-n)},yA.write=function(r,e,t,n,i,o){var s,a,l,u=o*8-i-1,d=(1<<u)-1,h=d>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,C=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?e+=p/l:e+=p*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=d?(a=0,s=d):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+_]=a&255,_+=C,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;r[t+_]=s&255,_+=C,s/=256,u-=8);r[t+_-C]|=S*128}),yA}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var OG;function Sye(){return OG||(OG=1,function(r){const e=yye(),t=wye(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=k,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const oe=new Uint8Array(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,Uint8Array.prototype),Object.setPrototypeOf(oe,U),oe.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');const U=new Uint8Array(oe);return Object.setPrototypeOf(U,a.prototype),U}function a(oe,U,X){if(typeof oe=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(oe)}return l(oe,U,X)}a.poolSize=8192;function l(oe,U,X){if(typeof oe=="string")return p(oe,U);if(ArrayBuffer.isView(oe))return C(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(mt(oe,ArrayBuffer)||oe&&mt(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mt(oe,SharedArrayBuffer)||oe&&mt(oe.buffer,SharedArrayBuffer)))return S(oe,U,X);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const we=oe.valueOf&&oe.valueOf();if(we!=null&&we!==oe)return a.from(we,U,X);const Te=x(oe);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return a.from(oe[Symbol.toPrimitive]("string"),U,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}a.from=function(oe,U,X){return l(oe,U,X)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function d(oe,U,X){return u(oe),oe<=0?s(oe):U!==void 0?typeof X=="string"?s(oe).fill(U,X):s(oe).fill(U):s(oe)}a.alloc=function(oe,U,X){return d(oe,U,X)};function h(oe){return u(oe),s(oe<0?0:T(oe)|0)}a.allocUnsafe=function(oe){return h(oe)},a.allocUnsafeSlow=function(oe){return h(oe)};function p(oe,U){if((typeof U!="string"||U==="")&&(U="utf8"),!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);const X=M(oe,U)|0;let we=s(X);const Te=we.write(oe,U);return Te!==X&&(we=we.slice(0,Te)),we}function _(oe){const U=oe.length<0?0:T(oe.length)|0,X=s(U);for(let we=0;we<U;we+=1)X[we]=oe[we]&255;return X}function C(oe){if(mt(oe,Uint8Array)){const U=new Uint8Array(oe);return S(U.buffer,U.byteOffset,U.byteLength)}return _(oe)}function S(oe,U,X){if(U<0||oe.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<U+(X||0))throw new RangeError('"length" is outside of buffer bounds');let we;return U===void 0&&X===void 0?we=new Uint8Array(oe):X===void 0?we=new Uint8Array(oe,U):we=new Uint8Array(oe,U,X),Object.setPrototypeOf(we,a.prototype),we}function x(oe){if(a.isBuffer(oe)){const U=T(oe.length)|0,X=s(U);return X.length===0||oe.copy(X,0,0,U),X}if(oe.length!==void 0)return typeof oe.length!="number"||Qt(oe.length)?s(0):_(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return _(oe.data)}function T(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return oe|0}function k(oe){return+oe!=oe&&(oe=0),a.alloc(+oe)}a.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==a.prototype},a.compare=function(U,X){if(mt(U,Uint8Array)&&(U=a.from(U,U.offset,U.byteLength)),mt(X,Uint8Array)&&(X=a.from(X,X.offset,X.byteLength)),!a.isBuffer(U)||!a.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===X)return 0;let we=U.length,Te=X.length;for(let qe=0,ze=Math.min(we,Te);qe<ze;++qe)if(U[qe]!==X[qe]){we=U[qe],Te=X[qe];break}return we<Te?-1:Te<we?1:0},a.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(U,X){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return a.alloc(0);let we;if(X===void 0)for(X=0,we=0;we<U.length;++we)X+=U[we].length;const Te=a.allocUnsafe(X);let qe=0;for(we=0;we<U.length;++we){let ze=U[we];if(mt(ze,Uint8Array))qe+ze.length>Te.length?(a.isBuffer(ze)||(ze=a.from(ze)),ze.copy(Te,qe)):Uint8Array.prototype.set.call(Te,ze,qe);else if(a.isBuffer(ze))ze.copy(Te,qe);else throw new TypeError('"list" argument must be an Array of Buffers');qe+=ze.length}return Te};function M(oe,U){if(a.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||mt(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);const X=oe.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&X===0)return 0;let Te=!1;for(;;)switch(U){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return xn(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return Bt(oe).length;default:if(Te)return we?-1:xn(oe).length;U=(""+U).toLowerCase(),Te=!0}}a.byteLength=M;function W(oe,U,X){let we=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,U>>>=0,X<=U))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return ie(this,U,X);case"utf8":case"utf-8":return V(this,U,X);case"ascii":return re(this,U,X);case"latin1":case"binary":return se(this,U,X);case"base64":return O(this,U,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,U,X);default:if(we)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),we=!0}}a.prototype._isBuffer=!0;function F(oe,U,X){const we=oe[U];oe[U]=oe[X],oe[X]=we}a.prototype.swap16=function(){const U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<U;X+=2)F(this,X,X+1);return this},a.prototype.swap32=function(){const U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<U;X+=4)F(this,X,X+3),F(this,X+1,X+2);return this},a.prototype.swap64=function(){const U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<U;X+=8)F(this,X,X+7),F(this,X+1,X+6),F(this,X+2,X+5),F(this,X+3,X+4);return this},a.prototype.toString=function(){const U=this.length;return U===0?"":arguments.length===0?V(this,0,U):W.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(U){if(!a.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:a.compare(this,U)===0},a.prototype.inspect=function(){let U="";const X=r.INSPECT_MAX_BYTES;return U=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(U+=" ... "),"<Buffer "+U+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(U,X,we,Te,qe){if(mt(U,Uint8Array)&&(U=a.from(U,U.offset,U.byteLength)),!a.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(X===void 0&&(X=0),we===void 0&&(we=U?U.length:0),Te===void 0&&(Te=0),qe===void 0&&(qe=this.length),X<0||we>U.length||Te<0||qe>this.length)throw new RangeError("out of range index");if(Te>=qe&&X>=we)return 0;if(Te>=qe)return-1;if(X>=we)return 1;if(X>>>=0,we>>>=0,Te>>>=0,qe>>>=0,this===U)return 0;let ze=qe-Te,bt=we-X;const bn=Math.min(ze,bt),En=this.slice(Te,qe),nt=U.slice(X,we);for(let Mi=0;Mi<bn;++Mi)if(En[Mi]!==nt[Mi]){ze=En[Mi],bt=nt[Mi];break}return ze<bt?-1:bt<ze?1:0};function Q(oe,U,X,we,Te){if(oe.length===0)return-1;if(typeof X=="string"?(we=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,Qt(X)&&(X=Te?0:oe.length-1),X<0&&(X=oe.length+X),X>=oe.length){if(Te)return-1;X=oe.length-1}else if(X<0)if(Te)X=0;else return-1;if(typeof U=="string"&&(U=a.from(U,we)),a.isBuffer(U))return U.length===0?-1:z(oe,U,X,we,Te);if(typeof U=="number")return U=U&255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(oe,U,X):Uint8Array.prototype.lastIndexOf.call(oe,U,X):z(oe,[U],X,we,Te);throw new TypeError("val must be string, number or Buffer")}function z(oe,U,X,we,Te){let qe=1,ze=oe.length,bt=U.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(oe.length<2||U.length<2)return-1;qe=2,ze/=2,bt/=2,X/=2}function bn(nt,Mi){return qe===1?nt[Mi]:nt.readUInt16BE(Mi*qe)}let En;if(Te){let nt=-1;for(En=X;En<ze;En++)if(bn(oe,En)===bn(U,nt===-1?0:En-nt)){if(nt===-1&&(nt=En),En-nt+1===bt)return nt*qe}else nt!==-1&&(En-=En-nt),nt=-1}else for(X+bt>ze&&(X=ze-bt),En=X;En>=0;En--){let nt=!0;for(let Mi=0;Mi<bt;Mi++)if(bn(oe,En+Mi)!==bn(U,Mi)){nt=!1;break}if(nt)return En}return-1}a.prototype.includes=function(U,X,we){return this.indexOf(U,X,we)!==-1},a.prototype.indexOf=function(U,X,we){return Q(this,U,X,we,!0)},a.prototype.lastIndexOf=function(U,X,we){return Q(this,U,X,we,!1)};function $(oe,U,X,we){X=Number(X)||0;const Te=oe.length-X;we?(we=Number(we),we>Te&&(we=Te)):we=Te;const qe=U.length;we>qe/2&&(we=qe/2);let ze;for(ze=0;ze<we;++ze){const bt=parseInt(U.substr(ze*2,2),16);if(Qt(bt))return ze;oe[X+ze]=bt}return ze}function G(oe,U,X,we){return Tt(xn(U,oe.length-X),oe,X,we)}function Y(oe,U,X,we){return Tt(un(U),oe,X,we)}function I(oe,U,X,we){return Tt(Bt(U),oe,X,we)}function D(oe,U,X,we){return Tt(Ft(U,oe.length-X),oe,X,we)}a.prototype.write=function(U,X,we,Te){if(X===void 0)Te="utf8",we=this.length,X=0;else if(we===void 0&&typeof X=="string")Te=X,we=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(we)?(we=we>>>0,Te===void 0&&(Te="utf8")):(Te=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const qe=this.length-X;if((we===void 0||we>qe)&&(we=qe),U.length>0&&(we<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let ze=!1;for(;;)switch(Te){case"hex":return $(this,U,X,we);case"utf8":case"utf-8":return G(this,U,X,we);case"ascii":case"latin1":case"binary":return Y(this,U,X,we);case"base64":return I(this,U,X,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,U,X,we);default:if(ze)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),ze=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(oe,U,X){return U===0&&X===oe.length?e.fromByteArray(oe):e.fromByteArray(oe.slice(U,X))}function V(oe,U,X){X=Math.min(oe.length,X);const we=[];let Te=U;for(;Te<X;){const qe=oe[Te];let ze=null,bt=qe>239?4:qe>223?3:qe>191?2:1;if(Te+bt<=X){let bn,En,nt,Mi;switch(bt){case 1:qe<128&&(ze=qe);break;case 2:bn=oe[Te+1],(bn&192)===128&&(Mi=(qe&31)<<6|bn&63,Mi>127&&(ze=Mi));break;case 3:bn=oe[Te+1],En=oe[Te+2],(bn&192)===128&&(En&192)===128&&(Mi=(qe&15)<<12|(bn&63)<<6|En&63,Mi>2047&&(Mi<55296||Mi>57343)&&(ze=Mi));break;case 4:bn=oe[Te+1],En=oe[Te+2],nt=oe[Te+3],(bn&192)===128&&(En&192)===128&&(nt&192)===128&&(Mi=(qe&15)<<18|(bn&63)<<12|(En&63)<<6|nt&63,Mi>65535&&Mi<1114112&&(ze=Mi))}}ze===null?(ze=65533,bt=1):ze>65535&&(ze-=65536,we.push(ze>>>10&1023|55296),ze=56320|ze&1023),we.push(ze),Te+=bt}return ne(we)}const j=4096;function ne(oe){const U=oe.length;if(U<=j)return String.fromCharCode.apply(String,oe);let X="",we=0;for(;we<U;)X+=String.fromCharCode.apply(String,oe.slice(we,we+=j));return X}function re(oe,U,X){let we="";X=Math.min(oe.length,X);for(let Te=U;Te<X;++Te)we+=String.fromCharCode(oe[Te]&127);return we}function se(oe,U,X){let we="";X=Math.min(oe.length,X);for(let Te=U;Te<X;++Te)we+=String.fromCharCode(oe[Te]);return we}function ie(oe,U,X){const we=oe.length;(!U||U<0)&&(U=0),(!X||X<0||X>we)&&(X=we);let Te="";for(let qe=U;qe<X;++qe)Te+=fn[oe[qe]];return Te}function A(oe,U,X){const we=oe.slice(U,X);let Te="";for(let qe=0;qe<we.length-1;qe+=2)Te+=String.fromCharCode(we[qe]+we[qe+1]*256);return Te}a.prototype.slice=function(U,X){const we=this.length;U=~~U,X=X===void 0?we:~~X,U<0?(U+=we,U<0&&(U=0)):U>we&&(U=we),X<0?(X+=we,X<0&&(X=0)):X>we&&(X=we),X<U&&(X=U);const Te=this.subarray(U,X);return Object.setPrototypeOf(Te,a.prototype),Te};function te(oe,U,X){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+U>X)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(U,X,we){U=U>>>0,X=X>>>0,we||te(U,X,this.length);let Te=this[U],qe=1,ze=0;for(;++ze<X&&(qe*=256);)Te+=this[U+ze]*qe;return Te},a.prototype.readUintBE=a.prototype.readUIntBE=function(U,X,we){U=U>>>0,X=X>>>0,we||te(U,X,this.length);let Te=this[U+--X],qe=1;for(;X>0&&(qe*=256);)Te+=this[U+--X]*qe;return Te},a.prototype.readUint8=a.prototype.readUInt8=function(U,X){return U=U>>>0,X||te(U,1,this.length),this[U]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(U,X){return U=U>>>0,X||te(U,2,this.length),this[U]|this[U+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(U,X){return U=U>>>0,X||te(U,2,this.length),this[U]<<8|this[U+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(U,X){return U=U>>>0,X||te(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(U,X){return U=U>>>0,X||te(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},a.prototype.readBigUInt64LE=We(function(U){U=U>>>0,dn(U,"offset");const X=this[U],we=this[U+7];(X===void 0||we===void 0)&&sn(U,this.length-8);const Te=X+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24,qe=this[++U]+this[++U]*2**8+this[++U]*2**16+we*2**24;return BigInt(Te)+(BigInt(qe)<<BigInt(32))}),a.prototype.readBigUInt64BE=We(function(U){U=U>>>0,dn(U,"offset");const X=this[U],we=this[U+7];(X===void 0||we===void 0)&&sn(U,this.length-8);const Te=X*2**24+this[++U]*2**16+this[++U]*2**8+this[++U],qe=this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+we;return(BigInt(Te)<<BigInt(32))+BigInt(qe)}),a.prototype.readIntLE=function(U,X,we){U=U>>>0,X=X>>>0,we||te(U,X,this.length);let Te=this[U],qe=1,ze=0;for(;++ze<X&&(qe*=256);)Te+=this[U+ze]*qe;return qe*=128,Te>=qe&&(Te-=Math.pow(2,8*X)),Te},a.prototype.readIntBE=function(U,X,we){U=U>>>0,X=X>>>0,we||te(U,X,this.length);let Te=X,qe=1,ze=this[U+--Te];for(;Te>0&&(qe*=256);)ze+=this[U+--Te]*qe;return qe*=128,ze>=qe&&(ze-=Math.pow(2,8*X)),ze},a.prototype.readInt8=function(U,X){return U=U>>>0,X||te(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},a.prototype.readInt16LE=function(U,X){U=U>>>0,X||te(U,2,this.length);const we=this[U]|this[U+1]<<8;return we&32768?we|4294901760:we},a.prototype.readInt16BE=function(U,X){U=U>>>0,X||te(U,2,this.length);const we=this[U+1]|this[U]<<8;return we&32768?we|4294901760:we},a.prototype.readInt32LE=function(U,X){return U=U>>>0,X||te(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},a.prototype.readInt32BE=function(U,X){return U=U>>>0,X||te(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},a.prototype.readBigInt64LE=We(function(U){U=U>>>0,dn(U,"offset");const X=this[U],we=this[U+7];(X===void 0||we===void 0)&&sn(U,this.length-8);const Te=this[U+4]+this[U+5]*2**8+this[U+6]*2**16+(we<<24);return(BigInt(Te)<<BigInt(32))+BigInt(X+this[++U]*2**8+this[++U]*2**16+this[++U]*2**24)}),a.prototype.readBigInt64BE=We(function(U){U=U>>>0,dn(U,"offset");const X=this[U],we=this[U+7];(X===void 0||we===void 0)&&sn(U,this.length-8);const Te=(X<<24)+this[++U]*2**16+this[++U]*2**8+this[++U];return(BigInt(Te)<<BigInt(32))+BigInt(this[++U]*2**24+this[++U]*2**16+this[++U]*2**8+we)}),a.prototype.readFloatLE=function(U,X){return U=U>>>0,X||te(U,4,this.length),t.read(this,U,!0,23,4)},a.prototype.readFloatBE=function(U,X){return U=U>>>0,X||te(U,4,this.length),t.read(this,U,!1,23,4)},a.prototype.readDoubleLE=function(U,X){return U=U>>>0,X||te(U,8,this.length),t.read(this,U,!0,52,8)},a.prototype.readDoubleBE=function(U,X){return U=U>>>0,X||te(U,8,this.length),t.read(this,U,!1,52,8)};function _e(oe,U,X,we,Te,qe){if(!a.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>Te||U<qe)throw new RangeError('"value" argument is out of bounds');if(X+we>oe.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(U,X,we,Te){if(U=+U,X=X>>>0,we=we>>>0,!Te){const bt=Math.pow(2,8*we)-1;_e(this,U,X,we,bt,0)}let qe=1,ze=0;for(this[X]=U&255;++ze<we&&(qe*=256);)this[X+ze]=U/qe&255;return X+we},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(U,X,we,Te){if(U=+U,X=X>>>0,we=we>>>0,!Te){const bt=Math.pow(2,8*we)-1;_e(this,U,X,we,bt,0)}let qe=we-1,ze=1;for(this[X+qe]=U&255;--qe>=0&&(ze*=256);)this[X+qe]=U/ze&255;return X+we},a.prototype.writeUint8=a.prototype.writeUInt8=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,1,255,0),this[X]=U&255,X+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,2,65535,0),this[X]=U&255,this[X+1]=U>>>8,X+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,2,65535,0),this[X]=U>>>8,this[X+1]=U&255,X+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,4,4294967295,0),this[X+3]=U>>>24,this[X+2]=U>>>16,this[X+1]=U>>>8,this[X]=U&255,X+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,4,4294967295,0),this[X]=U>>>24,this[X+1]=U>>>16,this[X+2]=U>>>8,this[X+3]=U&255,X+4};function de(oe,U,X,we,Te){wt(U,we,Te,oe,X,7);let qe=Number(U&BigInt(4294967295));oe[X++]=qe,qe=qe>>8,oe[X++]=qe,qe=qe>>8,oe[X++]=qe,qe=qe>>8,oe[X++]=qe;let ze=Number(U>>BigInt(32)&BigInt(4294967295));return oe[X++]=ze,ze=ze>>8,oe[X++]=ze,ze=ze>>8,oe[X++]=ze,ze=ze>>8,oe[X++]=ze,X}function Me(oe,U,X,we,Te){wt(U,we,Te,oe,X,7);let qe=Number(U&BigInt(4294967295));oe[X+7]=qe,qe=qe>>8,oe[X+6]=qe,qe=qe>>8,oe[X+5]=qe,qe=qe>>8,oe[X+4]=qe;let ze=Number(U>>BigInt(32)&BigInt(4294967295));return oe[X+3]=ze,ze=ze>>8,oe[X+2]=ze,ze=ze>>8,oe[X+1]=ze,ze=ze>>8,oe[X]=ze,X+8}a.prototype.writeBigUInt64LE=We(function(U,X=0){return de(this,U,X,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=We(function(U,X=0){return Me(this,U,X,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(U,X,we,Te){if(U=+U,X=X>>>0,!Te){const bn=Math.pow(2,8*we-1);_e(this,U,X,we,bn-1,-bn)}let qe=0,ze=1,bt=0;for(this[X]=U&255;++qe<we&&(ze*=256);)U<0&&bt===0&&this[X+qe-1]!==0&&(bt=1),this[X+qe]=(U/ze>>0)-bt&255;return X+we},a.prototype.writeIntBE=function(U,X,we,Te){if(U=+U,X=X>>>0,!Te){const bn=Math.pow(2,8*we-1);_e(this,U,X,we,bn-1,-bn)}let qe=we-1,ze=1,bt=0;for(this[X+qe]=U&255;--qe>=0&&(ze*=256);)U<0&&bt===0&&this[X+qe+1]!==0&&(bt=1),this[X+qe]=(U/ze>>0)-bt&255;return X+we},a.prototype.writeInt8=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,1,127,-128),U<0&&(U=255+U+1),this[X]=U&255,X+1},a.prototype.writeInt16LE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,2,32767,-32768),this[X]=U&255,this[X+1]=U>>>8,X+2},a.prototype.writeInt16BE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,2,32767,-32768),this[X]=U>>>8,this[X+1]=U&255,X+2},a.prototype.writeInt32LE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,4,2147483647,-2147483648),this[X]=U&255,this[X+1]=U>>>8,this[X+2]=U>>>16,this[X+3]=U>>>24,X+4},a.prototype.writeInt32BE=function(U,X,we){return U=+U,X=X>>>0,we||_e(this,U,X,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[X]=U>>>24,this[X+1]=U>>>16,this[X+2]=U>>>8,this[X+3]=U&255,X+4},a.prototype.writeBigInt64LE=We(function(U,X=0){return de(this,U,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=We(function(U,X=0){return Me(this,U,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(oe,U,X,we,Te,qe){if(X+we>oe.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function st(oe,U,X,we,Te){return U=+U,X=X>>>0,Te||He(oe,U,X,4),t.write(oe,U,X,we,23,4),X+4}a.prototype.writeFloatLE=function(U,X,we){return st(this,U,X,!0,we)},a.prototype.writeFloatBE=function(U,X,we){return st(this,U,X,!1,we)};function Dt(oe,U,X,we,Te){return U=+U,X=X>>>0,Te||He(oe,U,X,8),t.write(oe,U,X,we,52,8),X+8}a.prototype.writeDoubleLE=function(U,X,we){return Dt(this,U,X,!0,we)},a.prototype.writeDoubleBE=function(U,X,we){return Dt(this,U,X,!1,we)},a.prototype.copy=function(U,X,we,Te){if(!a.isBuffer(U))throw new TypeError("argument should be a Buffer");if(we||(we=0),!Te&&Te!==0&&(Te=this.length),X>=U.length&&(X=U.length),X||(X=0),Te>0&&Te<we&&(Te=we),Te===we||U.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),U.length-X<Te-we&&(Te=U.length-X+we);const qe=Te-we;return this===U&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(X,we,Te):Uint8Array.prototype.set.call(U,this.subarray(we,Te),X),qe},a.prototype.fill=function(U,X,we,Te){if(typeof U=="string"){if(typeof X=="string"?(Te=X,X=0,we=this.length):typeof we=="string"&&(Te=we,we=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!a.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(U.length===1){const ze=U.charCodeAt(0);(Te==="utf8"&&ze<128||Te==="latin1")&&(U=ze)}}else typeof U=="number"?U=U&255:typeof U=="boolean"&&(U=Number(U));if(X<0||this.length<X||this.length<we)throw new RangeError("Out of range index");if(we<=X)return this;X=X>>>0,we=we===void 0?this.length:we>>>0,U||(U=0);let qe;if(typeof U=="number")for(qe=X;qe<we;++qe)this[qe]=U;else{const ze=a.isBuffer(U)?U:a.from(U,Te),bt=ze.length;if(bt===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(qe=0;qe<we-X;++qe)this[qe+X]=ze[qe%bt]}return this};const Rt={};function lt(oe,U,X){Rt[oe]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:U.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${oe}]`,this.stack,delete this.name}get code(){return oe}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${oe}]: ${this.message}`}}}lt("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?`${oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),lt("ERR_INVALID_ARG_TYPE",function(oe,U){return`The "${oe}" argument must be of type number. Received type ${typeof U}`},TypeError),lt("ERR_OUT_OF_RANGE",function(oe,U,X){let we=`The value of "${oe}" is out of range.`,Te=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Te=xt(String(X)):typeof X=="bigint"&&(Te=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Te=xt(Te)),Te+="n"),we+=` It must be ${U}. Received ${Te}`,we},RangeError);function xt(oe){let U="",X=oe.length;const we=oe[0]==="-"?1:0;for(;X>=we+4;X-=3)U=`_${oe.slice(X-3,X)}${U}`;return`${oe.slice(0,X)}${U}`}function zt(oe,U,X){dn(U,"offset"),(oe[U]===void 0||oe[U+X]===void 0)&&sn(U,oe.length-(X+1))}function wt(oe,U,X,we,Te,qe){if(oe>X||oe<U){const ze=typeof U=="bigint"?"n":"";let bt;throw qe>3?U===0||U===BigInt(0)?bt=`>= 0${ze} and < 2${ze} ** ${(qe+1)*8}${ze}`:bt=`>= -(2${ze} ** ${(qe+1)*8-1}${ze}) and < 2 ** ${(qe+1)*8-1}${ze}`:bt=`>= ${U}${ze} and <= ${X}${ze}`,new Rt.ERR_OUT_OF_RANGE("value",bt,oe)}zt(we,Te,qe)}function dn(oe,U){if(typeof oe!="number")throw new Rt.ERR_INVALID_ARG_TYPE(U,"number",oe)}function sn(oe,U,X){throw Math.floor(oe)!==oe?(dn(oe,X),new Rt.ERR_OUT_OF_RANGE(X||"offset","an integer",oe)):U<0?new Rt.ERR_BUFFER_OUT_OF_BOUNDS:new Rt.ERR_OUT_OF_RANGE(X||"offset",`>= ${X?1:0} and <= ${U}`,oe)}const Pt=/[^+/0-9A-Za-z-_]/g;function ei(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(Pt,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function xn(oe,U){U=U||1/0;let X;const we=oe.length;let Te=null;const qe=[];for(let ze=0;ze<we;++ze){if(X=oe.charCodeAt(ze),X>55295&&X<57344){if(!Te){if(X>56319){(U-=3)>-1&&qe.push(239,191,189);continue}else if(ze+1===we){(U-=3)>-1&&qe.push(239,191,189);continue}Te=X;continue}if(X<56320){(U-=3)>-1&&qe.push(239,191,189),Te=X;continue}X=(Te-55296<<10|X-56320)+65536}else Te&&(U-=3)>-1&&qe.push(239,191,189);if(Te=null,X<128){if((U-=1)<0)break;qe.push(X)}else if(X<2048){if((U-=2)<0)break;qe.push(X>>6|192,X&63|128)}else if(X<65536){if((U-=3)<0)break;qe.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((U-=4)<0)break;qe.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return qe}function un(oe){const U=[];for(let X=0;X<oe.length;++X)U.push(oe.charCodeAt(X)&255);return U}function Ft(oe,U){let X,we,Te;const qe=[];for(let ze=0;ze<oe.length&&!((U-=2)<0);++ze)X=oe.charCodeAt(ze),we=X>>8,Te=X%256,qe.push(Te),qe.push(we);return qe}function Bt(oe){return e.toByteArray(ei(oe))}function Tt(oe,U,X,we){let Te;for(Te=0;Te<we&&!(Te+X>=U.length||Te>=oe.length);++Te)U[Te+X]=oe[Te];return Te}function mt(oe,U){return oe instanceof U||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===U.name}function Qt(oe){return oe!==oe}const fn=function(){const oe="0123456789abcdef",U=new Array(256);for(let X=0;X<16;++X){const we=X*16;for(let Te=0;Te<16;++Te)U[we+Te]=oe[X]+oe[Te]}return U}();function We(oe){return typeof BigInt>"u"?dt:oe}function dt(){throw new Error("BigInt not supported")}}(J3)),J3}var j9=Sye();const RG=typeof j9.Buffer<"u";let e5;class f4{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return RG&&!j9.Buffer.isBuffer(e)&&(e=j9.Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new f4(e)}toString(){return RG?this.buffer.toString():(e5||(e5=new TextDecoder),e5.decode(this.buffer))}}function Eye(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function Lye(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function $p(r,e){return r[e]*Math.pow(2,24)+r[e+1]*Math.pow(2,16)+r[e+2]*Math.pow(2,8)+r[e+3]}function jp(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function MG(r,e){return r[e]}function PG(r,e,t){r[t]=e}let t5;function coe(){return t5||(t5=new TextDecoder("UTF-16LE")),t5}let n5;function xye(){return n5||(n5=new TextDecoder("UTF-16BE")),n5}let i5;function doe(){return i5||(i5=xie()?coe():xye()),i5}const hoe=typeof TextDecoder<"u";let cS,q9;hoe?(cS=r=>new Iye(r),q9=Dye):(cS=r=>new kye,q9=foe);function Dye(r,e,t){const n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?foe(r,e,t):coe().decode(n)}function foe(r,e,t){let n=[],i=0;for(let o=0;o<t;o++){const s=Eye(r,e);e+=2,n[i++]=String.fromCharCode(s)}return n.join("")}class Iye{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return doe().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ca(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class kye{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Ha{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Tye{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class tE{constructor(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S,x,T,k,M){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=u.sort(Th.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=p,this.stopRenderingLineAfter=S,this.renderWhitespace=x==="all"?4:x==="boundary"?1:x==="selection"?2:x==="trailing"?3:0,this.renderControlCharacters=T,this.fontLigatures=k,this.selectionsOnLine=M&&M.sort((Q,z)=>Q.startOffset<z.startOffset?-1:1);const W=Math.abs(C-p),F=Math.abs(_-p);W<F?(this.renderSpaceWidth=C,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=_,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Th.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class qz{constructor(e,t){this.partIndex=e,this.charIndex=t}}class av{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=i+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=av.getPartIndex(t),i=av.getCharIndex(t);return new qz(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let i=(e<<16|n<<0)>>>0,o=0,s=this.length-1;for(;o+1<s;){let S=o+s>>>1,x=this._data[S];if(x===i)return S;x>i?s=S:o=S}if(o===s)return o;let a=this._data[o],l=this._data[s];if(a===i)return o;if(l===i)return s;let u=av.getPartIndex(a),d=av.getCharIndex(a),h=av.getPartIndex(l),p;u!==h?p=t:p=av.getCharIndex(l);let _=n-d,C=p-n;return _<=C?o:s}}class K9{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function g4(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const s of r.lineDecorations)(s.type===1||s.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(s.className),e.appendASCIIString('"></span>'),s.type===1&&(i|=1,t++),s.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const o=new av(1,t+n);return o.setColumnInfo(1,t,0,0),new K9(o,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new K9(new av(0,0),!1,0)}return Wye(Oye(r),e)}class Nye{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function p4(r){let e=cS(1e4),t=g4(r,e);return new Nye(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Aye{constructor(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=o,this.parts=s,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=u,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=p,this.renderSpaceCharCode=_,this.renderWhitespace=C,this.renderControlCharacters=S}}function Oye(r){const e=r.lineContent;let t,n;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,n=r.stopRenderingLineAfter):(t=!1,n=e.length);let i=Rye(r.lineTokens,r.fauxIndentLength,n);r.renderControlCharacters&&!r.isBasicASCII&&(i=Pye(e,i)),(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&r.selectionsOnLine||r.renderWhitespace===3)&&(i=Fye(r,e,n,i));let o=0;if(r.lineDecorations.length>0){for(let s=0,a=r.lineDecorations.length;s<a;s++){const l=r.lineDecorations[s];l.type===3||l.type===1?o|=1:l.type===2&&(o|=2)}i=Bye(e,n,i,r.lineDecorations)}return r.containsRTL||(i=Mye(e,i,!r.isBasicASCII||r.fontLigatures)),new Aye(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,n,t,i,o,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function Rye(r,e,t){let n=[],i=0;e>0&&(n[i++]=new Ha(e,"",0));for(let o=0,s=r.getCount();o<s;o++){const a=r.getEndOffset(o);if(a<=e)continue;const l=r.getClassName(o);if(a>=t){n[i++]=new Ha(t,l,0);break}n[i++]=new Ha(a,l,0)}return n}function Mye(r,e,t){let n=0,i=[],o=0;if(t)for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.endIndex;if(n+50<u){const d=l.type,h=l.metadata;let p=-1,_=n;for(let C=n;C<u;C++)r.charCodeAt(C)===32&&(p=C),p!==-1&&C-_>=50&&(i[o++]=new Ha(p+1,d,h),_=p+1,p=-1);_!==u&&(i[o++]=new Ha(u,d,h))}else i[o++]=l;n=u}else for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.endIndex;let d=u-n;if(d>50){const h=l.type,p=l.metadata,_=Math.ceil(d/50);for(let C=1;C<_;C++){let S=n+C*50;i[o++]=new Ha(S,h,p)}i[o++]=new Ha(u,h,p)}else i[o++]=l;n=u}return i}function goe(r){return r<32?r!==9:r===127||r>=8234&&r<=8238||r>=8294&&r<=8297||r>=8206&&r<=8207||r===1564}function Pye(r,e){let t=[],n=new Ha(0,"",0),i=0;for(const o of e){const s=o.endIndex;for(;i<s;i++){const a=r.charCodeAt(i);goe(a)&&(i>n.endIndex&&(n=new Ha(i,o.type,o.metadata),t.push(n)),n=new Ha(i+1,"mtkcontrol",o.metadata),t.push(n))}i>n.endIndex&&(n=new Ha(s,o.type,o.metadata),t.push(n))}return t}function Fye(r,e,t,n){const i=r.continuesWithWrappedLine,o=r.fauxIndentLength,s=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,u=r.selectionsOnLine,d=r.renderWhitespace===1,h=r.renderWhitespace===3,p=r.renderSpaceWidth!==r.spaceWidth;let _=[],C=0,S=0,x=n[S].type,T=n[S].endIndex;const k=n.length;let M=!1,W=sc(e),F;W===-1?(M=!0,W=t,F=t):F=Iv(e);let Q=!1,z=0,$=u&&u[z],G=a%s;for(let I=o;I<t;I++){const D=e.charCodeAt(I);$&&I>=$.endOffset&&(z++,$=u&&u[z]);let O;if(I<W||I>F)O=!0;else if(D===9)O=!0;else if(D===32)if(d)if(Q)O=!0;else{const V=I+1<t?e.charCodeAt(I+1):0;O=V===32||V===9}else O=!0;else O=!1;if(O&&u&&(O=!!$&&$.startOffset<=I&&$.endOffset>I),O&&h&&(O=M||I>F),Q){if(!O||!l&&G>=s){if(p){const V=C>0?_[C-1].endIndex:o;for(let j=V+1;j<=I;j++)_[C++]=new Ha(j,"mtkw",1)}else _[C++]=new Ha(I,"mtkw",1);G=G%s}}else(I===T||O&&I>o)&&(_[C++]=new Ha(I,x,0),G=G%s);for(D===9?G=s:Pv(D)?G+=2:G++,Q=O;I===T&&(S++,S<k);)x=n[S].type,T=n[S].endIndex}let Y=!1;if(Q)if(i&&d){let I=t>0?e.charCodeAt(t-1):0,D=t>1?e.charCodeAt(t-2):0;I===32&&D!==32&&D!==9||(Y=!0)}else Y=!0;if(Y)if(p){const I=C>0?_[C-1].endIndex:o;for(let D=I+1;D<=t;D++)_[C++]=new Ha(D,"mtkw",1)}else _[C++]=new Ha(t,"mtkw",1);else _[C++]=new Ha(t,x,0);return _}function Bye(r,e,t,n){n.sort(Th.compare);const i=Cye.normalize(r,n),o=i.length;let s=0,a=[],l=0,u=0;for(let h=0,p=t.length;h<p;h++){const _=t[h],C=_.endIndex,S=_.type,x=_.metadata;for(;s<o&&i[s].startOffset<C;){const T=i[s];if(T.startOffset>u&&(u=T.startOffset,a[l++]=new Ha(u,S,x)),T.endOffset+1<=C)u=T.endOffset+1,a[l++]=new Ha(u,S+" "+T.className,x|T.metadata),s++;else{u=C,a[l++]=new Ha(u,S+" "+T.className,x|T.metadata);break}}C>u&&(u=C,a[l++]=new Ha(u,S,x))}const d=t[t.length-1].endIndex;if(s<o&&i[s].startOffset===d)for(;s<o&&i[s].startOffset===d;){const h=i[s];a[l++]=new Ha(u,h.className,h.metadata),s++}return a}function Wye(r,e){const t=r.fontIsMonospace,n=r.canUseHalfwidthRightwardsArrow,i=r.containsForeignElements,o=r.lineContent,s=r.len,a=r.isOverflowing,l=r.parts,u=r.fauxIndentLength,d=r.tabSize,h=r.startVisibleColumn,p=r.containsRTL,_=r.spaceWidth,C=r.renderSpaceCharCode,S=r.renderWhitespace,x=r.renderControlCharacters,T=new av(s+1,l.length);let k=!1,M=0,W=h,F=0,Q=0,z=0,$=0;p?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let G=0,Y=l.length;G<Y;G++){$+=z;const I=l[G],D=I.endIndex,O=I.type,V=S!==0&&I.isWhitespace(),j=V&&!t&&(O==="mtkw"||!i),ne=M===D&&I.isPseudoAfter();if(F=0,e.appendASCIIString('<span class="'),e.appendASCIIString(j?"mtkz":O),e.appendASCII(34),V){let re=0;{let se=M,ie=W;for(;se<D;se++){const te=(o.charCodeAt(se)===9?d-ie%d:1)|0;re+=te,se>=u&&(ie+=te)}}for(j&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(_*re)),e.appendASCIIString('px"')),e.appendASCII(62);M<D;M++){T.setColumnInfo(M+1,G-Q,F,$),Q=0;const se=o.charCodeAt(M);let ie;if(se===9){ie=d-W%d|0,!n||ie>1?e.write1(8594):e.write1(65515);for(let A=2;A<=ie;A++)e.write1(160)}else ie=1,e.write1(C);F+=ie,M>=u&&(W+=ie)}z=re}else{let re=0;for(e.appendASCII(62);M<D;M++){T.setColumnInfo(M+1,G-Q,F,$),Q=0;const se=o.charCodeAt(M);let ie=1,A=1;switch(se){case 9:ie=d-W%d,A=ie;for(let te=1;te<=ie;te++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:x?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Pv(se)&&A++,x&&se<32?e.write1(9216+se):x&&se===127?e.write1(9249):x&&goe(se)?(e.appendASCIIString("[U+"),e.appendASCIIString(Vye(se)),e.appendASCIIString("]"),ie=8):e.write1(se)}F+=ie,re+=ie,M>=u&&(W+=A)}z=re}ne?Q++:Q=0,M>=s&&!k&&I.isPseudoAfter()&&(k=!0,T.setColumnInfo(M+1,G,F,$)),e.appendASCIIString("</span>")}return k||T.setColumnInfo(s+1,l.length-1,F,$),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new K9(T,p,i)}function Vye(r){return r.toString(16).toUpperCase().padStart(4,"0")}const Hye=function(){return fm?!0:!(Pc||Id||Zg)}();let HL=!0;class FG{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class BG{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class fv{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=tr(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===tp.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),s=this._options,a=Th.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let l=null;if(s.themeType===tp.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const p=n.selections;for(const _ of p){if(_.endLineNumber<e||_.startLineNumber>e)continue;const C=_.startLineNumber===e?_.startColumn:o.minColumn,S=_.endLineNumber===e?_.endColumn:o.maxColumn;C<S&&(s.themeType===tp.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new Th(C,S,"inline-selected-text",0)):(l||(l=[]),l.push(new Tye(C-1,S-1))))}}const u=new tE(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==Dh.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(fv.CLASS_NAME),i.appendASCIIString('">');const d=g4(u,i);i.appendASCIIString("</div>");let h=null;return HL&&Hye&&o.isBasicASCII&&s.useMonospaceOptimizations&&d.containsForeignElements===0&&o.content.length<300&&u.lineTokens.getCount()<100&&(h=new wA(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping)),h||(h=moe(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof wA:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof wA?this._renderedViewLine.monospaceAssumptionsAreValid():HL}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof wA&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;let s=!1;o!==-1&&t>o+1&&n>o+1&&(s=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return a&&a.length>0?new bye(s,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}fv.CLASS_NAME="view-line";class wA{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return HL;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),HL=!1),HL}toSlowRenderedLine(){return moe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const o=this._getCharPosition(t),s=this._getCharPosition(n);return[new VL(o,s-o)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new qz(o,n),i)}}class poe{constructor(e,t,n,i,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,i);if(o===-1)return null;const s=this._readPixelOffset(this.domNode,e,n,i);return s===-1?null:[new VL(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,o){if(n===i){const s=this._readPixelOffset(e,t,n,o);return s===-1?null:[new VL(s,0)]}else return this._readRawVisibleRangesForRange(e,n,i,o)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const s=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=Q3.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const o=this._characterMapping.getDomPosition(n),s=Q3.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,i.clientRectDeltaLeft,i.endNode);if(!s||s.length===0)return-1;const a=s[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),u=Math.round(this.input.spaceWidth*l);if(Math.abs(u-a)<=1)return u}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new VL(0,this.getWidth())];const o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(n);return Q3.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,i.clientRectDeltaLeft,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new qz(o,n),i)}}class Uye extends poe{_readVisibleRangesForRange(e,t,n,i,o){const s=super._readVisibleRangesForRange(e,t,n,i,o);if(!s||s.length===0||n===i||n===1&&i===this._characterMapping.length)return s;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,o);if(a!==-1){const l=s[s.length-1];l.left<a&&(l.width=a-l.left)}}return s}}const moe=function(){return pC?zye:$ye}();function zye(r,e,t,n,i){return new Uye(r,e,t,n,i)}function $ye(r,e,t,n,i){return new poe(r,e,t,n,i)}var kd;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(kd||(kd={}));var Ld;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(Ld||(Ld={}));class BO{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&np(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class BT{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Bw;(function(r){r[r.Disabled=0]="Disabled",r[r.EnabledForActive=1]="EnabledForActive",r[r.Enabled=2]="Enabled"})(Bw||(Bw={}));class hL{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class G9{constructor(e,t){this.top=e,this.endColumn=t}}class r5{constructor(e,t,n,i,o,s){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=o,this._isTracked=s}}class jye{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function SA(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class kl{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${SA(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${SA(this.oldText)}")`:`(replace@${this.oldPosition} "${SA(this.oldText)}" with "${SA(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;jp(e,i,n),n+=4;for(let o=0;o<i;o++)Lye(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=$p(e,t);return t+=4,q9(e,t,n)}writeSize(){return 4+4+kl._writeStringSize(this.oldText)+kl._writeStringSize(this.newText)}write(e,t){return jp(e,this.oldPosition,t),t+=4,jp(e,this.newPosition,t),t+=4,t=kl._writeString(e,this.oldText,t),t=kl._writeString(e,this.newText,t),t}static read(e,t,n){const i=$p(e,t);t+=4;const o=$p(e,t);t+=4;const s=kl._readString(e,t);t+=kl._writeStringSize(s);const a=kl._readString(e,t);return t+=kl._writeStringSize(a),n.push(new kl(i,s,o,a)),t}}function qye(r,e){return r===null||r.length===0?e:new nv(r,e).compress()}class nv{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[u,d]=nv._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(u),i=d;continue}if(n.newPosition<i.oldPosition){const[u,d]=nv._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(u),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[u,d]=nv._splitPrev(n,i.oldLength);a=u,l=i,n=d,i=this._getCurr(++t)}else{const[u,d]=nv._splitCurr(i,n.newLength);a=n,l=u,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new kl(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=nv._merge(this._result);return nv._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=nv._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=nv._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new kl(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new kl(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new kl(e.oldPosition,e.oldText,e.newPosition,n),new kl(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new kl(e.oldPosition,n,e.newPosition,e.newText),new kl(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let o=1;o<e.length;o++){const s=e[o];i.oldEnd===s.oldPosition?i=new kl(i.oldPosition,i.oldText+s.oldText,i.newPosition,i.newText+s.newText):(t[n++]=i,i=s)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){const o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}}function Kye(r){return r.replace(/[\\/]/g,la.sep)}function Gye(r){return r.indexOf("/")===-1&&(r=Kye(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function Yye(r,e,t,n=Ow){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!Sz(r,e))return!1;if(e.length===r.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,r.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function Zye(r){return r>=65&&r<=90||r>=97&&r<=122}function Xye(r){const e=hz(r);return Ol?r.length>3?!1:_oe(e)&&(r.length===2||e.charCodeAt(2)===92):e===la.sep}function _oe(r,e){return(e!==void 0?e:Ol)?Zye(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function WO(r){return RR(r,!0)}class Qye{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:OT(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return qn.joinPath(e,...t)}basenameOrAuthority(e){return Uf(e)||e.authority}basename(e){return la.basename(e.path)}extname(e){return la.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Si.file?t=qn.file(Fie(WO(e))).path:(t=la.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Si.file?t=qn.file(hz(WO(e))).path:t=la.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Si.file){const n=qn.file(n0e(WO(e),t));return e.with({authority:n.authority,path:n.path})}return t=Gye(t),e.with({path:la.resolve(e.path,t)})}}const Ru=new Qye(()=>!1),voe=Ru.isEqual.bind(Ru),boe=Ru.basenameOrAuthority.bind(Ru),Uf=Ru.basename.bind(Ru),Jye=Ru.extname.bind(Ru),Kz=Ru.dirname.bind(Ru),ewe=Ru.joinPath.bind(Ru),twe=Ru.normalizePath.bind(Ru),WG=Ru.resolvePath.bind(Ru);var AC;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(s=>{const[a,l]=s.split(":");a&&l&&n.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(r.META_DATA_MIME,o),n}r.parseMetaData=e})(AC||(AC={}));function BE(r){return r.toString()}class Fa{constructor(e,t,n,i,o,s,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=o,this.afterCursorState=s,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=Y9(e);return new Fa(n,n,i,i,t,t,[])}append(e,t,n,i,o){t.length>0&&(this.changes=qye(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(jp(e,t?t.length:0,n),n+=4,t)for(const i of t)jp(e,i.selectionStartLineNumber,n),n+=4,jp(e,i.selectionStartColumn,n),n+=4,jp(e,i.positionLineNumber,n),n+=4,jp(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=$p(e,t);t+=4;for(let o=0;o<i;o++){const s=$p(e,t);t+=4;const a=$p(e,t);t+=4;const l=$p(e,t);t+=4;const u=$p(e,t);t+=4,n.push(new ln(s,a,l,u))}return t}serialize(){let e=10+Fa._writeSelectionsSize(this.beforeCursorState)+Fa._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;jp(t,this.beforeVersionId,n),n+=4,jp(t,this.afterVersionId,n),n+=4,PG(t,this.beforeEOL,n),n+=1,PG(t,this.afterEOL,n),n+=1,n=Fa._writeSelections(t,this.beforeCursorState,n),n=Fa._writeSelections(t,this.afterCursorState,n),jp(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=$p(t,n);n+=4;const o=$p(t,n);n+=4;const s=MG(t,n);n+=1;const a=MG(t,n);n+=1;const l=[];n=Fa._readSelections(t,n,l);const u=[];n=Fa._readSelections(t,n,u);const d=$p(t,n);n+=4;const h=[];for(let p=0;p<d;p++)n=kl.read(t,n,h);return new Fa(i,o,s,a,l,u,h)}}class Coe{constructor(e,t){this.model=e,this._data=Fa.create(e,t)}get type(){return 0}get resource(){return qn.isUri(this.model)?this.model:this.model.uri}get label(){return E("edit","Typing")}toString(){return(this._data instanceof Fa?this._data:Fa.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(qn.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Fa}append(e,t,n,i,o){this._data instanceof Fa&&this._data.append(e,t,n,i,o)}close(){this._data instanceof Fa&&(this._data=this._data.serialize())}open(){this._data instanceof Fa||(this._data=Fa.deserialize(this._data))}undo(){if(qn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Fa&&(this._data=this._data.serialize());const e=Fa.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(qn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Fa&&(this._data=this._data.serialize());const e=Fa.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Fa&&(this._data=this._data.serialize()),this._data.byteLength+168}}class nwe{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const i=BE(n.resource);this._editStackElementsMap.set(i,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=BE(e);return this._editStackElementsMap.has(t)}setModel(e){const t=BE(qn.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=BE(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){const s=BE(e.uri);this._editStackElementsMap.get(s).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=BE(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Uf(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function Y9(r){return r.getEOL()===`
`?0:1}function yb(r){return r?r instanceof Coe||r instanceof nwe:!1}class Gz{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);yb(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);yb(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(yb(t)&&t.canAppend(this._model))return t;const n=new Coe(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],Y9(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),s=Gz._computeCursorState(n,o),a=o.map((l,u)=>({index:u,textChange:l.textChange}));return a.sort((l,u)=>l.textChange.oldPosition===u.textChange.oldPosition?l.index-u.index:l.textChange.oldPosition-u.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),Y9(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return ti(n),null}}}class iwe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function rwe(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=r.charCodeAt(o),_=t.charCodeAt(o);if(p!==_)break}let s=0,a=0;for(let p=o;p<e;p++)r.charCodeAt(p)===32?s++:a++;let l=0,u=0;for(let p=o;p<n;p++)t.charCodeAt(p)===32?l++:u++;if(s>0&&a>0||l>0&&u>0)return;let d=Math.abs(a-u),h=Math.abs(s-l);if(d===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%d===0){i.spacesDiff=h/d;return}}function VG(r,e,t){const n=Math.min(r.getLineCount(),1e4);let i=0,o=0,s="",a=0;const l=[2,4,6,8,3,5,7],u=8;let d=[0,0,0,0,0,0,0,0,0],h=new iwe;for(let C=1;C<=n;C++){let S=r.getLineLength(C),x=r.getLineContent(C);const T=S<=65536;let k=!1,M=0,W=0,F=0;for(let z=0,$=S;z<$;z++){let G=T?x.charCodeAt(z):r.getLineCharCode(C,z);if(G===9)F++;else if(G===32)W++;else{k=!0,M=z;break}}if(!k||(F>0?i++:W>1&&o++,rwe(s,a,x,M,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;let Q=h.spacesDiff;Q<=u&&d[Q]++,s=x,a=M}let p=t;i!==o&&(p=i<o);let _=e;if(p){let C=p?0:.1*n;l.forEach(S=>{let x=d[S];x>C&&(C=x,_=S)}),_===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(_=2)}return{insertSpaces:p,tabSize:_}}function Dc(r){return(r.metadata&1)>>>0}function ao(r,e){r.metadata=r.metadata&254|e<<0}function Al(r){return(r.metadata&2)>>>1===1}function Zr(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function yoe(r){return(r.metadata&4)>>>2===1}function HG(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function owe(r){return(r.metadata&24)>>>3}function UG(r,e){r.metadata=r.metadata&231|e<<3}function swe(r){return(r.metadata&32)>>>5===1}function zG(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}class woe{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,ao(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,HG(this,!1),UG(this,1),zG(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Zr(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;HG(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),UG(this,this.options.stickiness),zG(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const gi=new woe(null,0,0);gi.parent=gi;gi.left=gi;gi.right=gi;ao(gi,0);class o5{constructor(){this.root=gi,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o){return this.root===gi?[]:gwe(this,e,t,n,i,o)}search(e,t,n){return this.root===gi?[]:fwe(this,e,t,n)}collectNodesFromOwner(e){return dwe(this,e)}collectNodesPostOrder(){return hwe(this)}insert(e){$G(this,e),this._normalizeDeltaIfNecessary()}delete(e){jG(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const o=n.start+i,s=n.end+i;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,i){const o=uwe(this,e,e+t);for(let s=0,a=o.length;s<a;s++){const l=o[s];jG(this,l)}this._normalizeDeltaIfNecessary(),cwe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){const l=o[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,lwe(l,e,e+t,n,i),l.maxEnd=l.end,$G(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,awe(this))}}function awe(r){let e=r.root,t=0;for(;e!==gi;){if(e.left!==gi&&!Al(e.left)){e=e.left;continue}if(e.right!==gi&&!Al(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,OC(e),Zr(e,!0),Zr(e.left,!1),Zr(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Zr(r.root,!1)}function WE(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function lwe(r,e,t,n,i){const o=owe(r),s=o===0||o===2,a=o===1||o===2,l=t-e,u=n,d=Math.min(l,u),h=r.start;let p=!1;const _=r.end;let C=!1;e<=h&&_<=t&&swe(r)&&(r.start=e,p=!0,r.end=e,C=!0);{const x=i?1:l>0?2:0;!p&&WE(h,s,e,x)&&(p=!0),!C&&WE(_,a,e,x)&&(C=!0)}if(d>0&&!i){const x=l>u?2:0;!p&&WE(h,s,e+d,x)&&(p=!0),!C&&WE(_,a,e+d,x)&&(C=!0)}{const x=i?1:0;!p&&WE(h,s,t,x)&&(r.start=e+u,p=!0),!C&&WE(_,a,t,x)&&(r.end=e+u,C=!0)}const S=u-l;p||(r.start=Math.max(0,h+S)),C||(r.end=Math.max(0,_+S)),r.start>r.end&&(r.end=r.start)}function uwe(r,e,t){let n=r.root,i=0,o=0,s=0,a=0,l=[],u=0;for(;n!==gi;){if(Al(n)){Zr(n.left,!1),Zr(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!Al(n.left)){if(o=i+n.maxEnd,o<e){Zr(n,!0);continue}if(n.left!==gi){n=n.left;continue}}if(s=i+n.start,s>t){Zr(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[u++]=n),Zr(n,!0),n.right!==gi&&!Al(n.right)){i+=n.delta,n=n.right;continue}}return Zr(r.root,!1),l}function cwe(r,e,t,n){let i=r.root,o=0,s=0,a=0;const l=n-(t-e);for(;i!==gi;){if(Al(i)){Zr(i.left,!1),Zr(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),OC(i),i=i.parent;continue}if(!Al(i.left)){if(s=o+i.maxEnd,s<e){Zr(i,!0);continue}if(i.left!==gi){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Zr(i,!0);continue}if(Zr(i,!0),i.right!==gi&&!Al(i.right)){o+=i.delta,i=i.right;continue}}Zr(r.root,!1)}function dwe(r,e){let t=r.root,n=[],i=0;for(;t!==gi;){if(Al(t)){Zr(t.left,!1),Zr(t.right,!1),t=t.parent;continue}if(t.left!==gi&&!Al(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Zr(t,!0),t.right!==gi&&!Al(t.right)){t=t.right;continue}}return Zr(r.root,!1),n}function hwe(r){let e=r.root,t=[],n=0;for(;e!==gi;){if(Al(e)){Zr(e.left,!1),Zr(e.right,!1),e=e.parent;continue}if(e.left!==gi&&!Al(e.left)){e=e.left;continue}if(e.right!==gi&&!Al(e.right)){e=e.right;continue}t[n++]=e,Zr(e,!0)}return Zr(r.root,!1),t}function fwe(r,e,t,n){let i=r.root,o=0,s=0,a=0,l=[],u=0;for(;i!==gi;){if(Al(i)){Zr(i.left,!1),Zr(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),i=i.parent;continue}if(i.left!==gi&&!Al(i.left)){i=i.left;continue}s=o+i.start,a=o+i.end,i.setCachedOffsets(s,a,n);let d=!0;if(e&&i.ownerId&&i.ownerId!==e&&(d=!1),t&&yoe(i)&&(d=!1),d&&(l[u++]=i),Zr(i,!0),i.right!==gi&&!Al(i.right)){o+=i.delta,i=i.right;continue}}return Zr(r.root,!1),l}function gwe(r,e,t,n,i,o){let s=r.root,a=0,l=0,u=0,d=0,h=[],p=0;for(;s!==gi;){if(Al(s)){Zr(s.left,!1),Zr(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!Al(s.left)){if(l=a+s.maxEnd,l<e){Zr(s,!0);continue}if(s.left!==gi){s=s.left;continue}}if(u=a+s.start,u>t){Zr(s,!0);continue}if(d=a+s.end,d>=e){s.setCachedOffsets(u,d,o);let _=!0;n&&s.ownerId&&s.ownerId!==n&&(_=!1),i&&yoe(s)&&(_=!1),_&&(h[p++]=s)}if(Zr(s,!0),s.right!==gi&&!Al(s.right)){a+=s.delta,s=s.right;continue}}return Zr(r.root,!1),h}function $G(r,e){if(r.root===gi)return e.parent=gi,e.left=gi,e.right=gi,ao(e,0),r.root=e,r.root;pwe(r,e),Z1(e.parent);let t=e;for(;t!==r.root&&Dc(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Dc(n)===1?(ao(t.parent,0),ao(n,0),ao(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,iT(r,t)),ao(t.parent,0),ao(t.parent.parent,1),rT(r,t.parent.parent))}else{const n=t.parent.parent.left;Dc(n)===1?(ao(t.parent,0),ao(n,0),ao(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,rT(r,t)),ao(t.parent,0),ao(t.parent.parent,1),iT(r,t.parent.parent))}return ao(r.root,0),e}function pwe(r,e){let t=0,n=r.root;const i=e.start,o=e.end;for(;;)if(_we(i,o,n.start+t,n.end+t)<0)if(n.left===gi){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===gi){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=gi,e.right=gi,ao(e,1)}function jG(r,e){let t,n;if(e.left===gi?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===gi?(t=e.left,n=e):(n=mwe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,ao(t,0),e.detach(),s5(),OC(t),r.root.parent=gi;return}let i=Dc(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,ao(n,Dc(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==gi&&(n.left.parent=n),n.right!==gi&&(n.right.parent=n)),e.detach(),i){Z1(t.parent),n!==e&&(Z1(n),Z1(n.parent)),s5();return}Z1(t),Z1(t.parent),n!==e&&(Z1(n),Z1(n.parent));let o;for(;t!==r.root&&Dc(t)===0;)t===t.parent.left?(o=t.parent.right,Dc(o)===1&&(ao(o,0),ao(t.parent,1),iT(r,t.parent),o=t.parent.right),Dc(o.left)===0&&Dc(o.right)===0?(ao(o,1),t=t.parent):(Dc(o.right)===0&&(ao(o.left,0),ao(o,1),rT(r,o),o=t.parent.right),ao(o,Dc(t.parent)),ao(t.parent,0),ao(o.right,0),iT(r,t.parent),t=r.root)):(o=t.parent.left,Dc(o)===1&&(ao(o,0),ao(t.parent,1),rT(r,t.parent),o=t.parent.left),Dc(o.left)===0&&Dc(o.right)===0?(ao(o,1),t=t.parent):(Dc(o.left)===0&&(ao(o.right,0),ao(o,1),iT(r,o),o=t.parent.left),ao(o,Dc(t.parent)),ao(t.parent,0),ao(o.left,0),rT(r,t.parent),t=r.root));ao(t,0),s5()}function mwe(r){for(;r.left!==gi;)r=r.left;return r}function s5(){gi.parent=gi,gi.delta=0,gi.start=0,gi.end=0}function iT(r,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==gi&&(t.left.parent=e),t.parent=e.parent,e.parent===gi?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,OC(e),OC(t)}function rT(r,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==gi&&(t.right.parent=e),t.parent=e.parent,e.parent===gi?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,OC(e),OC(t)}function Soe(r){let e=r.end;if(r.left!==gi){const t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==gi){const t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function OC(r){r.maxEnd=Soe(r)}function Z1(r){for(;r!==gi;){const e=Soe(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function _we(r,e,t,n){return r===t?e-n:r-t}let Z9=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Qn)return Yz(this.right);let e=this;for(;e.parent!==Qn&&e.parent.left!==e;)e=e.parent;return e.parent===Qn?Qn:e.parent}prev(){if(this.left!==Qn)return Eoe(this.left);let e=this;for(;e.parent!==Qn&&e.parent.right!==e;)e=e.parent;return e.parent===Qn?Qn:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const Qn=new Z9(null,0);Qn.parent=Qn;Qn.left=Qn;Qn.right=Qn;Qn.color=0;function Yz(r){for(;r.left!==Qn;)r=r.left;return r}function Eoe(r){for(;r.right!==Qn;)r=r.right;return r}function Zz(r){return r===Qn?0:r.size_left+r.piece.length+Zz(r.right)}function Xz(r){return r===Qn?0:r.lf_left+r.piece.lineFeedCnt+Xz(r.right)}function a5(){Qn.parent=Qn}function oT(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Qn&&(t.left.parent=e),t.parent=e.parent,e.parent===Qn?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function sT(r,e){let t=e.left;e.left=t.right,t.right!==Qn&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Qn?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function EA(r,e){let t,n;if(e.left===Qn?(n=e,t=n.right):e.right===Qn?(n=e,t=n.left):(n=Yz(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),a5(),r.root.parent=Qn;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,Mk(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,Mk(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Qn&&(n.left.parent=n),n.right!==Qn&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,Mk(r,n)),e.detach(),t.parent.left===t){let s=Zz(t),a=Xz(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,u=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,fb(r,t.parent,l,u)}}if(Mk(r,t.parent),i){a5();return}let o;for(;t!==r.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,oT(r,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,sT(r,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,oT(r,t.parent),t=r.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,sT(r,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,oT(r,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,sT(r,t.parent),t=r.root));t.color=0,a5()}function qG(r,e){for(Mk(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,oT(r,e)),e.parent.color=0,e.parent.parent.color=1,sT(r,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,sT(r,e)),e.parent.color=0,e.parent.parent.color=1,oT(r,e.parent.parent))}r.root.color=0}function fb(r,e,t,n){for(;e!==r.root&&e!==Qn;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function Mk(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=Zz(e.left)-e.size_left,n=Xz(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}function tM(r){return r<0?0:r>255?255:r|0}function VE(r){return r<0?0:r>4294967295?4294967295:r|0}class oD{constructor(e){let t=tM(e);this._defaultValue=t,this._asciiMap=oD._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=tM(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class fL{constructor(){this._actual=new oD(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class vwe extends oD{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function bwe(r){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=r(t)),e[t])}const zf=bwe(r=>new vwe(r)),Cwe=999;class rw{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=ywe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=sre(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new wwe(t,this.wordSeparators?zf(this.wordSeparators):null,n?this.searchString:null)}}function ywe(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++)if(r.charCodeAt(e)===92){if(e++,e>=t)break;const i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}return!1}class wwe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function cw(r,e,t){if(!t)return new BT(r,null);let n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new BT(r,n)}class KG{constructor(e){let t=[],n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}}class LA{static findMatches(e,t,n,i,o){const s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new gL(s.wordSeparators,s.regex),i,o):this._doFindMatchesLineByLine(e,n,s,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,s){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let u;if(i){let _=i.findLineFeedCountBeforeOffset(o+s.length)-l;u=a+s.length+_}else u=a+s.length;const d=e.getPositionAt(a),h=e.getPositionAt(u);return new le(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,o){const s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new KG(a):null,u=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(u[d++]=cw(this._getMultilineMatchRange(e,s,a,l,h.index,h[0]),h,i),d>=o)return u;return u}static _doFindMatchesLineByLine(e,t,n,i,o){const s=[];let a=0;if(t.startLineNumber===t.endLineNumber){const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,s,i,o),s}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,i,o);for(let u=t.startLineNumber+1;u<t.endLineNumber&&a<o;u++)a=this._findMatchesInLine(n,e.getLineContent(u),u,0,a,s,i,o);if(a<o){const u=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,u,t.endLineNumber,0,a,s,i,o)}return s}static _findMatchesInLine(e,t,n,i,o,s,a,l){const u=e.wordSeparators;if(!a&&e.simpleSearch){const p=e.simpleSearch,_=p.length,C=t.length;let S=-_;for(;(S=t.indexOf(p,S+_))!==-1;)if((!u||Qz(u,t,C,S,_))&&(s[o++]=new BT(new le(n,S+1+i,n,S+1+_+i),null),o>=l))return o;return o}const d=new gL(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(s[o++]=cw(new le(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),o>=l))return o;while(h);return o}static findNextMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const s=new gL(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,i):this._doFindNextMatchLineByLine(e,n,s,i)}static _doFindNextMatchMultiline(e,t,n,i){const o=new Ge(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new le(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),u=e.getEOL()===`\r
`?new KG(l):null;n.reset(t.column-1);let d=n.next(l);return d?cw(this._getMultilineMatchRange(e,s,l,u,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Ge(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,i);if(l)return l;for(let u=1;u<=o;u++){const d=(s+u-1)%o,h=e.getLineContent(d+1),p=this._findFirstMatchInLine(n,h,d+1,1,i);if(p)return p}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);const s=e.next(t);return s?cw(new le(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const s=new gL(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,i):this._doFindPreviousMatchLineByLine(e,n,s,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const o=this._doFindMatchesMultiline(e,new le(1,1,t.lineNumber,t.column),n,i,10*Cwe);if(o.length>0)return o[o.length-1];const s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Ge(s,e.getLineMaxColumn(s)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,i);if(l)return l;for(let u=1;u<=o;u++){const d=(o+s-u-1)%o,h=e.getLineContent(d+1),p=this._findLastMatchInLine(n,h,d+1,i);if(p)return p}return null}static _findLastMatchInLine(e,t,n,i){let o=null,s;for(e.reset(0);s=e.next(t);)o=cw(new le(n,s.index+1,n,s.index+1+s[0].length),s,i);return o}}function Swe(r,e,t,n,i){if(n===0)return!0;const o=e.charCodeAt(n-1);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){const s=e.charCodeAt(n);if(r.get(s)!==0)return!0}return!1}function Ewe(r,e,t,n,i){if(n+i===t)return!0;const o=e.charCodeAt(n+i);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){const s=e.charCodeAt(n+i-1);if(r.get(s)!==0)return!0}return!1}function Qz(r,e,t,n,i){return Swe(r,e,t,n,i)&&Ewe(r,e,t,n,i)}class gL{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Ew(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||Qz(this._wordSeparators,e,t,i,o))return n}while(n);return null}}const ob=65535;function Loe(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}class Lwe{constructor(e,t,n,i,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=o}}function pb(r,e=!0){let t=[0],n=1;for(let i=0,o=r.length;i<o;i++){const s=r.charCodeAt(i);s===13?i+1<o&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:s===10&&(t[n++]=i+1)}return e?Loe(t):t}function xwe(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,o=0,s=!0;for(let l=0,u=e.length;l<u;l++){const d=e.charCodeAt(l);d===13?l+1<u&&e.charCodeAt(l+1)===10?(o++,r[t++]=l+2,l++):(n++,r[t++]=l+1):d===10?(i++,r[t++]=l+1):s&&d!==9&&(d<32||d>126)&&(s=!1)}const a=new Lwe(Loe(r),n,i,o,s);return r.length=0,a}class pd{constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}}class dw{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Dwe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Qn&&e.iterate(e.root,n=>(n!==Qn&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Iwe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(const o of n)o!==null&&i.push(o);this._cache=i}}}class kwe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new dw("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Qn,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=pb(e[o].buffer));let a=new pd(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new Iwe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=ob,n=t-Math.floor(t/3),i=n*2,o="",s=0,a=[];if(this.iterate(this.root,l=>{let u=this.getNodeContent(l),d=u.length;if(s<=n||s+d<i)return o+=u,s+=d,!0;let h=o.replace(/\r\n|\r|\n/g,e);return a.push(new dw(h,pb(h))),o=u,s=d,!0}),s>0){let l=o.replace(/\r\n|\r|\n/g,e);a.push(new dw(l,pb(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Dwe(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Qn;)if(i.left!==Qn&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let o=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==Qn;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=i-s;return new Ge(n+1,a+1)}return new Ge(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Qn){let o=this.getOffsetAt(n+1,1),s=i-e-o;return new Ge(n+1,s+1)}else t=t.right;return new Ge(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,u=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(u+e.remainder,u+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==Qn;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===Qn)return!0;const s=o.piece;let a=s.length;if(a===0)return!0;const l=this._buffers[s.bufferIndex].buffer,u=this._buffers[s.bufferIndex].lineStarts,d=s.start.line,h=s.end.line;let p=u[d]+s.start.column;if(i&&(l.charCodeAt(p)===10&&(p++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(p+a-1)===13?(i=!0,n+=l.substr(p,a-1)):n+=l.substr(p,a),!0;n+=this._EOLNormalized?l.substring(p,Math.max(p,u[d+1]-this._EOLLength)):l.substring(p,u[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let _=d+1;_<h;_++)n=this._EOLNormalized?l.substring(u[_],u[_+1]-this._EOLLength):l.substring(u[_],u[_+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(u[h]+s.end.column-1)===13?(i=!0,s.end.column===0?t--:n=l.substr(u[h],s.end.column-1)):n=l.substr(u[h],s.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,o,s,a,l,u,d,h){let p=this._buffers[e.piece.bufferIndex],_=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),C=this.offsetInBuffer(e.piece.bufferIndex,o),S=this.offsetInBuffer(e.piece.bufferIndex,s),x,T={line:0,column:0},k,M;t._wordSeparators?(k=p.buffer.substring(C,S),M=W=>W+C,t.reset(0)):(k=p.buffer,M=W=>W,t.reset(C));do if(x=t.next(k),x){if(M(x.index)>=S)return d;this.positionInBuffer(e,M(x.index)-_,T);let W=this.getLineFeedCnt(e.piece.bufferIndex,o,T),F=T.line===o.line?T.column-o.column+i:T.column+1,Q=F+x[0].length;if(h[d++]=cw(new le(n+W,F,n+W,Q),x,l),M(x.index)+x[0].length>=S||d>=u)return d}while(x);return d}findMatchesLineByLine(e,t,n,i){const o=[];let s=0;const a=new gL(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let u=this.nodeAt2(e.endLineNumber,e.endColumn);if(u===null)return[];let d=this.positionInBuffer(l.node,l.remainder),h=this.positionInBuffer(u.node,u.remainder);if(l.node===u.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,i,s,o),o;let p=e.startLineNumber,_=l.node;for(;_!==u.node;){let S=this.getLineFeedCnt(_.piece.bufferIndex,d,_.piece.end);if(S>=1){let T=this._buffers[_.piece.bufferIndex].lineStarts,k=this.offsetInBuffer(_.piece.bufferIndex,_.piece.start),M=T[d.line+S],W=p===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(_,a,p,W,d,this.positionInBuffer(_,M-k),t,n,i,s,o),s>=i)return o;p+=S}let x=p===e.startLineNumber?e.startColumn-1:0;if(p===e.endLineNumber){const T=this.getLineContent(p).substring(x,e.endColumn-1);return s=this._findMatchesInLine(t,a,T,e.endLineNumber,x,s,o,n,i),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(p).substr(x),p,x,s,o,n,i),s>=i)return o;p++,l=this.nodeAt2(p,1),_=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(p===e.endLineNumber){let S=p===e.startLineNumber?e.startColumn-1:0;const x=this.getLineContent(p).substring(S,e.endColumn-1);return s=this._findMatchesInLine(t,a,x,e.endLineNumber,S,s,o,n,i),o}let C=p===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(u.node,a,p,C,d,h,t,n,i,s,o),o}_findMatchesInLine(e,t,n,i,o,s,a,l,u){const d=e.wordSeparators;if(!l&&e.simpleSearch){const p=e.simpleSearch,_=p.length,C=n.length;let S=-_;for(;(S=n.indexOf(p,S+_))!==-1;)if((!d||Qz(d,n,C,S,_))&&(a[s++]=new BT(new le(i,S+1+o,i,S+1+_+o),null),s>=u))return s;return s}let h;t.reset(0);do if(h=t.next(n),h&&(a[s++]=cw(new le(i,h.index+1+o,i,h.index+1+h[0].length+o),h,l),s>=u))return s;while(h);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Qn){let{node:i,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,u=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<ob){this.appendToNode(i,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let d=[],h=new pd(a.bufferIndex,u,a.end,this.getLineFeedCnt(a.bufferIndex,u,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,u));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){let S={line:h.start.line+1,column:0};h=new pd(h.bufferIndex,S,h.end,this.getLineFeedCnt(h.bufferIndex,S,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){let S=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,S),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,u);else this.deleteNodeTail(i,u);let p=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let _=i;for(let C=0;C<p.length;C++)_=this.rbInsertRight(_,p[C]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),o=this.rbInsertLeft(null,i[0]);for(let s=1;s<i.length;s++)o=this.rbInsertRight(o,i[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Qn)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,s=i.node;if(o===s){let p=this.positionInBuffer(o,n.remainder),_=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let C=o.next();EA(this,o),this.validateCRLFWithPrevNode(C),this.computeBufferMetadata();return}this.deleteNodeHead(o,_),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,p),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,p,_),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let u=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,u),s.piece.length===0&&a.push(s);let d=o.next();for(let p=d;p!==Qn&&p!==s;p=p.next())a.push(p);let h=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new pd(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,fb(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),o=this.rbInsertLeft(t,i[i.length-1]);for(let s=i.length-2;s>=0;s--)o=this.rbInsertLeft(o,i[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),o=i;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,l=s[i.start.line]+i.start.column+t,u=i.start.line,d=i.end.line,h=0,p=0,_=0;for(;u<=d&&(h=u+(d-u)/2|0,_=s[h],h!==d);)if(p=s[h+1],l<_)d=h-1;else if(l>=p)u=h+1;else break;return n?(n.line=h,n.column=l-_,null):{line:h,column:l-_}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let o=i[n.line+1],s=i[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)EA(this,e[t])}createNewPieces(e){if(e.length>ob){let d=[];for(;e.length>ob;){const p=e.charCodeAt(ob-1);let _;p===13||p>=55296&&p<=56319?(_=e.substring(0,ob-1),e=e.substring(ob-1)):(_=e.substring(0,ob),e=e.substring(ob));let C=pb(_);d.push(new pd(this._buffers.length,{line:0,column:0},{line:C.length-1,column:_.length-C[C.length-1]},C.length-1,_.length)),this._buffers.push(new dw(_,C))}let h=pb(e);return d.push(new pd(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new dw(e,h)),d}let t=this._buffers[0].buffer.length;const n=pb(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length;let s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],l={line:s,column:a},u=new pd(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[u]}getLineRawContent(e,t=0){let n=this.root,i="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+s,l+n.piece.length);else{let u=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+s,l+u-t)}}else{let s=0;const a=e;for(;n!==Qn;)if(n.left!==Qn&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+u-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),u=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=u.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Qn;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Qn;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),u=l-i,d=a-o,h=n.length+d;e.piece=new pd(n.bufferIndex,n.start,s,l,h),fb(this,e,d,u)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),u=a-i,d=o-l,h=n.length+d;e.piece=new pd(n.bufferIndex,s,n.end,a,h),fb(this,e,d,u)}shrinkNode(e,t,n){const i=e.piece,o=i.start,s=i.end,a=i.length,l=i.lineFeedCnt,u=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,u),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new pd(i.bufferIndex,i.start,u,d,h),fb(this,e,h-a,d-l);let p=new pd(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),_=this.rbInsertRight(e,p);this.validateCRLFWithPrevNode(_)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=pb(t,!1);for(let _=0;_<o.length;_++)o[_]+=i;if(n){let _=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-_}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},u=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),p=h-d;e.piece=new pd(e.piece.bufferIndex,e.piece.start,l,h,u),this._lastChangeBufferPos=l,fb(this,e,t.length,p)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Qn;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Qn;)if(n.left!==Qn&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Qn;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Qn||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Qn||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new pd(e.piece.bufferIndex,e.piece.start,o,a,s),fb(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const u=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new pd(t.piece.bufferIndex,l,t.piece.end,d,u),fb(this,t,-1,-1),t.piece.length===0&&n.push(t);let h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let p=0;p<n.length;p++)EA(this,n[p])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)EA(this,n);else{const i=n.piece,o={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new pd(i.bufferIndex,o,i.end,a,s),fb(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Qn)return t(Qn);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Qn)return"";let t=this._buffers[e.piece.bufferIndex],n,i=e.piece,o=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return n=t.buffer.substring(o,s),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new Z9(t,1);if(n.left=Qn,n.right=Qn,n.parent=Qn,n.size_left=0,n.lf_left=0,this.root===Qn)this.root=n,n.color=0;else if(e.right===Qn)e.right=n,n.parent=e;else{let o=Yz(e.right);o.left=n,n.parent=o}return qG(this,n),n}rbInsertLeft(e,t){let n=new Z9(t,1);if(n.left=Qn,n.right=Qn,n.parent=Qn,n.size_left=0,n.lf_left=0,this.root===Qn)this.root=n,n.color=0;else if(e.left===Qn)e.left=n,n.parent=e;else{let i=Eoe(e.left);i.right=n,n.parent=i}return qG(this,n),n}}function xoe(r){return m4(r,0)}function m4(r,e){switch(typeof r){case"object":return r===null?Ab(349,e):Array.isArray(r)?Nwe(r,e):Awe(r,e);case"string":return Jz(r,e);case"boolean":return Twe(r,e);case"number":return Ab(r,e);case"undefined":return Ab(937,e);default:return Ab(617,e)}}function Ab(r,e){return(e<<5)-e+r|0}function Twe(r,e){return Ab(r?433:863,e)}function Jz(r,e){e=Ab(149417,e);for(let t=0,n=r.length;t<n;t++)e=Ab(r.charCodeAt(t),e);return e}function Nwe(r,e){return e=Ab(104579,e),r.reduce((t,n)=>m4(n,t),e)}function Awe(r,e){return e=Ab(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=Jz(n,t),m4(r[n],t)),e)}function l5(r,e,t=32){const n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function GG(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function Owe(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function uk(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):Owe((r>>>0).toString(16),e/4)}class _4{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(Ca(s))if(a+1<t){const u=e.charCodeAt(a+1);lx(u)?(a++,l=Ez(s,u)):l=65533}else{o=s;break}else lx(s)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),uk(this._h0)+uk(this._h1)+uk(this._h2)+uk(this._h3)+uk(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,GG(this._buff,this._buffLen),this._buffLen>56&&(this._step(),GG(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=_4._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,l5(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,s=this._h3,a=this._h4,l,u,d;for(let h=0;h<80;h++)h<20?(l=i&o|~i&s,u=1518500249):h<40?(l=i^o^s,u=1859775393):h<60?(l=i&o|i&s|o&s,u=2400959708):(l=i^o^s,u=3395469782),d=l5(n,5)+l+a+u+e.getUint32(h*4,!1)&4294967295,a=s,s=o,o=l5(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}}_4._bigBlock32=new DataView(new ArrayBuffer(320));var YG,ZG;class Rwe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class Mwe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?wz(e,this._value,0,e.length,this._from,this._to):f2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Pwe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?wz(e,this._value,0,e.length,this._from,this._to):f2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Fwe{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Pwe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return N9(e,this._value.scheme);if(this._states[this._stateIdx]===2)return N9(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return OT(e,this._value.query);if(this._states[this._stateIdx]===5)return OT(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class xA{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class UL{constructor(e){this._iter=e}static forUris(e=()=>!1){return new UL(new Fwe(e))}static forStrings(){return new UL(new Rwe)}static forConfigKeys(){return new UL(new Mwe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new xA,this._root.segment=n.value());const o=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new xA,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new xA,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new xA,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}const s=i.value;i.value=t,i.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const u=l.balanceFactor();if(u<-1||u>1){const d=o[a][0],h=o[a+1][0];if(d===1&&h===1)o[a][1]=l.rotateLeft();else if(d===-1&&h===-1)o[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),o=[];let s=this._root;for(;s;){const a=i.cmp(s.segment);if(a>0)o.push([-1,s]),s=s.left;else if(a<0)o.push([1,s]),s=s.right;else if(i.hasNext())i.next(),o.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const a=this._min(s.right),{key:l,value:u,segment:d}=a;this._delete(a.key,!1),s.key=l,s.value=u,s.segment=d}else{const a=(n=s.left)!==null&&n!==void 0?n:s.right;if(o.length>0){const[l,u]=o[o.length-1];switch(l){case-1:u.left=a;break;case 0:u.mid=a;break;case 1:u.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const u=l.balanceFactor();if(u>1?(l.right.balanceFactor()>=0||(l.right=o[a+1][1]=o[a+1][1].rotateRight()),o[a][1]=l.rotateLeft()):u<-1&&(l.left.balanceFactor()<=0||(l.left=o[a+1][1]=o[a+1][1].rotateLeft()),o[a][1]=l.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class Bwe{constructor(e,t){this.uri=e,this.value=t}}class Tu{constructor(e,t){this[YG]="ResourceMap",e instanceof Tu?(this.map=new Map(e.map),this.toKey=t??Tu.defaultToKey):(this.map=new Map,this.toKey=e??Tu.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new Bwe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(YG=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}Tu.defaultToKey=r=>r.toString();class Wwe{constructor(){this[ZG]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(ZG=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class YC extends Wwe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function Hg(r,e,t){return Math.min(Math.max(r,e),t)}class Vwe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}const u5="**",XG="/",VO="[/\\\\]",HO="[^/\\\\]",Hwe=/\//g;function QG(r){switch(r){case 0:return"";case 1:return`${HO}*?`;default:return`(?:${VO}|${HO}+${VO}|${VO}${HO}+)*?`}}function JG(r,e){if(!r)return[];const t=[];let n=!1,i=!1,o="";for(const s of r){switch(s){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=s}return o&&t.push(o),t}function Doe(r){if(!r)return"";let e="";const t=JG(r,XG);if(t.every(n=>n===u5))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===u5){n||(e+=QG(2),n=!0);return}let s=!1,a="",l=!1,u="";for(const d of i){if(d!=="}"&&s){a+=d;continue}if(l&&(d!=="]"||!u)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!u?h="^":d===XG?h="":h=Vf(d),u+=h;continue}switch(d){case"{":s=!0;continue;case"[":l=!0;continue;case"}":const p=`(?:${JG(a,",").map(_=>Doe(_)).join("|")})`;e+=p,s=!1,a="";break;case"]":e+="["+u+"]",l=!1,u="";break;case"?":e+=HO;continue;case"*":e+=QG(1);continue;default:e+=Vf(d)}}o<t.length-1&&(t[o+1]!==u5||o+2<t.length)&&(e+=VO),n=!1})}return e}const Uwe=/^\*\*\/\*\.[\w\.-]+$/,zwe=/^\*\*\/([\w\.-]+)\/?$/,$we=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,jwe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,qwe=/^\*\*((\/[\w\.-]+)+)\/?$/,Kwe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,eY=new YC(1e4),tY=function(){return!1},kv=function(){return null};function e$(r,e){if(!r)return kv;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=eY.get(n);if(i)return nY(i,r);let o;if(Uwe.test(t)){const s=t.substr(4);i=function(a,l){return typeof a=="string"&&a.endsWith(s)?t:null}}else(o=zwe.exec(c5(t,e)))?i=Gwe(o[1],t):(e.trimForExclusions?jwe:$we).test(t)?i=Ywe(t,e):(o=qwe.exec(c5(t,e)))?i=iY(o[1].substr(1),t,!0):(o=Kwe.exec(c5(t,e)))?i=iY(o[1],t,!1):i=Zwe(t);return eY.set(n,i),nY(i,r)}function nY(r,e){return typeof e=="string"?r:function(t,n){return Yye(t,e.base)?r(i0e(e.base,t),n):null}}function c5(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function Gwe(r,e){const t=`/${r}`,n=`\\${r}`,i=function(s,a){return typeof s!="string"?null:a?a===r?e:null:s===r||s.endsWith(t)||s.endsWith(n)?e:null},o=[r];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function Ywe(r,e){const t=koe(r.slice(1,-1).split(",").map(a=>e$(a,e)).filter(a=>a!==kv),r),n=t.length;if(!n)return kv;if(n===1)return t[0];const i=function(a,l){for(let u=0,d=t.length;u<d;u++)if(t[u](a,l))return r;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function iY(r,e,t){const n=Ow===la.sep,i=n?r:r.replace(Hwe,Ow),o=Ow+i,s=la.sep+r,a=t?function(l,u){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===r||l.endsWith(s)))?e:null}:function(l,u){return typeof l=="string"&&(l===i||!n&&l===r)?e:null};return a.allPaths=[(t?"*/":"./")+r],a}function Zwe(r){try{const e=new RegExp(`^${Doe(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return kv}}function Xwe(r,e,t){return!r||typeof e!="string"?!1:Ioe(r)(e,void 0,t)}function Ioe(r,e={}){if(!r)return tY;if(typeof r=="string"||Qwe(r)){const t=e$(r,e);if(t===kv)return tY;const n=function(i,o){return!!t(i,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return Jwe(r,e)}function Qwe(r){const e=r;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function Jwe(r,e){const t=koe(Object.getOwnPropertyNames(r).map(a=>eSe(a,r[a],e)).filter(a=>a!==kv)),n=t.length;if(!n)return kv;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(d,h){for(let p=0,_=t.length;p<_;p++){const C=t[p](d,h);if(C)return C}return null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const u=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return u.length&&(a.allPaths=u),a}const i=function(a,l,u){let d;for(let h=0,p=t.length;h<p;h++){const _=t[h];_.requiresSiblings&&u&&(l||(l=Aw(a)),d||(d=l.substr(0,l.length-r0e(a).length)));const C=_(a,l,d,u);if(C)return C}return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function eSe(r,e,t){if(e===!1)return kv;const n=e$(r,t);if(n===kv)return kv;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const o=(s,a,l,u)=>{if(!u||!n(s,a))return null;const d=i.replace("$(basename)",l),h=u(d);return qve(h)?h.then(p=>p?r:null):h?r:null};return o.requiresSiblings=!0,o}}return n}function koe(r,e){const t=r.filter(a=>!!a.basenames);if(t.length<2)return r;const n=t.reduce((a,l)=>{const u=l.basenames;return u?a.concat(u):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const u=l.patterns;return u?a.concat(u):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}const u=n.indexOf(l);return u!==-1?i[u]:null};o.basenames=n,o.patterns=i,o.allBasenames=n;const s=r.filter(a=>!a.basenames);return s.push(o),s}function Toe(r,e,t,n){if(Array.isArray(r)){let i=0;for(const o of r){const s=Toe(o,e,t,n);if(s===10)return s;s>i&&(i=s)}return i}else{if(typeof r=="string")return n?r==="*"?5:r===t?10:0:0;if(r){const{language:i,pattern:o,scheme:s,hasAccessToAllModels:a}=r;if(!n&&!a)return 0;let l=0;if(s)if(s===e.scheme)l=10;else if(s==="*")l=5;else return 0;if(i)if(i===t)l=10;else if(i==="*")l=Math.max(l,5);else return 0;if(o){let u;if(typeof o=="string"?u=o:u=Object.assign(Object.assign({},o),{base:hz(o.base)}),u===e.fsPath||Xwe(u,e.fsPath))l=10;else return 0}return l}else return 0}}function Noe(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(Noe):!!r.exclusive}class bs{constructor(){this._clock=0,this._entries=[],this._onDidChange=new Fe}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Hi(()=>{if(n){let i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,o=>{n&&i===o._score?n.push(o.provider):(i=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=Toe(n.selector,e.uri,e.getLanguageId(),O0e(e)),Noe(n.selector)&&n._score>0){for(let i of this._entries)i._score=0;n._score=1e3;break}this._entries.sort(bs._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const rY=new WeakMap;let tSe=0;function nSe(r){let e=rY.get(r);return e===void 0&&(e=++tSe,rY.set(r,e)),e}class nM{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new YC(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>m4(nSe(n),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let i=this._cache.get(n);return i||(i=new Vwe,this._cache.set(n,i)),i.update(t),this.get(e)}}class iSe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Hi(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,i=!1;return this._promises.set(e,t.then(o=>{this._promises.delete(e),!(i||!o)&&(n=this.register(e,o))})),Hi(()=>{i=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(i=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class Nu{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let o=`color: ${t[n]};`;return i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;"),i&4&&(o+="text-decoration: underline;"),o}}const rSe=function(){let r=Object.create(null);return r[0]="symbol-method",r[1]="symbol-function",r[2]="symbol-constructor",r[3]="symbol-field",r[4]="symbol-variable",r[5]="symbol-class",r[6]="symbol-struct",r[7]="symbol-interface",r[8]="symbol-module",r[9]="symbol-property",r[10]="symbol-event",r[11]="symbol-operator",r[12]="symbol-unit",r[13]="symbol-value",r[14]="symbol-constant",r[15]="symbol-enum",r[16]="symbol-enum-member",r[17]="symbol-keyword",r[27]="symbol-snippet",r[18]="symbol-text",r[19]="symbol-color",r[20]="symbol-file",r[21]="symbol-reference",r[22]="symbol-customcolor",r[23]="symbol-folder",r[24]="symbol-type-parameter",r[25]="account",r[26]="issues",function(e){const t=r[e];let n=t&&WR.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=Ae.symbolProperty),n.classNames}}();let Aoe=function(){let r=Object.create(null);return r.method=0,r.function=1,r.constructor=2,r.field=3,r.variable=4,r.class=5,r.struct=6,r.interface=7,r.module=8,r.property=9,r.event=10,r.operator=11,r.unit=12,r.value=13,r.constant=14,r.enum=15,r["enum-member"]=16,r.enumMember=16,r.keyword=17,r.snippet=27,r.text=18,r.color=19,r.file=20,r.reference=21,r.customcolor=22,r.folder=23,r["type-parameter"]=24,r.typeParameter=24,r.account=25,r.issue=26,function(e,t){let n=r[e];return typeof n>"u"&&!t&&(n=9),n}}();var If;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(If||(If={}));var Tv;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(Tv||(Tv={}));var WT;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(WT||(WT={}));function oSe(r){return r&&qn.isUri(r.uri)&&le.isIRange(r.range)&&(le.isIRange(r.originSelectionRange)||le.isIRange(r.targetSelectionRange))}var X9;(function(r){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(s){return e.get(s)}r.fromString=n;function i(s){return t.get(s)}r.toString=i;function o(s,a){const l=t.get(s);let u=l&&WR.get("symbol-"+l);return u||(console.info("No codicon found for SymbolKind "+s),u=Ae.symbolProperty),`${a?"inline":"block"} ${u.classNames}`}r.toCssClassName=o})(X9||(X9={}));class Cm{constructor(e){this.value=e}}Cm.Comment=new Cm("comment");Cm.Imports=new Cm("imports");Cm.Region=new Cm("region");var iM;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(iM||(iM={}));const rM=new bs,oM=new bs,em=new bs,t$=new bs,Ww=new bs,VT=new bs,Xg=new bs,cx=new bs,sM=new bs,HT=new bs,aM=new bs,lM=new bs,uM=new bs,xb=new bs,lC=new bs,Nv=new bs,aT=new bs,tm=new bs,cM=new bs,UT=new bs,dx=new bs,v4=new bs,Q9=new bs,hx=new bs,b4=new bs,es=new iSe;class Ua{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=Ua.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new Ua(i,e,t)}equals(e){return e instanceof Ua?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,o=i+(n<<1);for(let s=i;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Nu.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Nu.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Nu.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Nu.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Nu.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ua.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new n$(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const o=n+Math.floor((i-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(i=o)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const o=new Array;let s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(s,a);const u=this._tokens[(t<<1)+1];o.push(i.length,u),t++,s=a}else if(l){if(l.offset>s){i+=this._text.substring(s,l.offset);const u=this._tokens[(t<<1)+1];o.push(i.length,u),s=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new Ua(new Uint32Array(o),i,this._languageIdCodec)}}Ua.defaultTokenMetadata=(16384|2<<23)>>>0;class n${constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof n$?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}function dS(r){let e=0,t=0,n=0,i=0;for(let o=0,s=r.length;o<s;o++){const a=r.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&r.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}function oY(r){return(r<<0|0|0|16384|2<<23)>>>0}const sb=new Uint32Array(0).buffer;class d5{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new sSe(e,[t]))}}class dM{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new le(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),o=this._getDeltaLine(i);if(o<e)t=i+1;else if(o>e)n=i-1;else{let s=i;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new sY(this._tokens.subarray(4*s,4*a+4))}}return this._getDeltaLine(t)===e?new sY(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const o=this._tokens,s=this._tokenCount;let a=0,l=!1,u=0;for(let d=0;d<s;d++){const h=4*d,p=o[h],_=o[h+1],C=o[h+2],S=o[h+3];if((p>e||p===e&&C>=t)&&(p<n||p===n&&_<=i))l=!0;else{if(a===0&&(u=p),l){const x=4*a;o[x]=p-u,o[x+1]=_,o[x+2]=C,o[x+3]=S}a++}}return this._tokenCount=a,u}split(e,t,n,i){const o=this._tokens,s=this._tokenCount;let a=[],l=[],u=a,d=0,h=0;for(let p=0;p<s;p++){const _=4*p,C=o[_],S=o[_+1],x=o[_+2],T=o[_+3];if(C>e||C===e&&x>=t){if(C<n||C===n&&S<=i)continue;u!==l&&(u=l,d=0,h=C)}u[d++]=C-h,u[d++]=S,u[d++]=x,u[d++]=T}return[new dM(new Uint32Array(a)),new dM(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,o){const s=this._tokens,a=this._tokenCount,l=i-t;let u=0,d=!1;for(let h=0;h<a;h++){const p=4*h;let _=s[p],C=s[p+1],S=s[p+2];const x=s[p+3];if(_<t||_===t&&S<=n){u++;continue}else if(_===t&&C<n)_===i&&S>o?S-=o-n:S=n;else if(_===t&&C===n)if(_===i&&S>o)S-=o-n;else{d=!0;continue}else if(_<i||_===i&&C<o)if(_===i&&S>o)_===t?(C=n,S=C+(S-o)):(C=0,S=C+(S-o));else{d=!0;continue}else if(_>i){if(l===0&&!d){u=a;break}_-=l}else if(_===i&&C>=o)e&&_===0&&(C+=e,S+=e),_-=l,C-=o-n,S-=o-n;else throw new Error("Not possible!");const T=4*u;s[T]=_,s[T+1]=C,s[T+2]=S,s[T+3]=x,u++}this._tokenCount=u}acceptInsertText(e,t,n,i,o,s){const a=n===0&&i===1&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),l=this._tokens,u=this._tokenCount;for(let d=0;d<u;d++){const h=4*d;let p=l[h],_=l[h+1],C=l[h+2];if(!(p<e||p===e&&C<t)){if(p===e&&C===t)if(a)C+=1;else continue;else if(p===e&&_<t&&t<C)n===0?C+=i:C=t;else{if(p===e&&_===t&&a)continue;if(p===e)if(p+=n,n===0)_+=i,C+=i;else{const S=C-_;_=o+(_-t),C=_+S}else p+=n}l[h]=p,l[h+1]=_,l[h+2]=C}}}}class sY{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class hM{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new le(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[i,o,s]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new hM(this.startLineNumber,i),new hM(this.startLineNumber+s,o)]}applyEdit(e,t){const[n,i,o]=dS(t);this.acceptEdit(e,n,i,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,o){this._acceptDeleteRange(e),this._acceptInsertText(new Ge(e.startLineNumber,e.startColumn),t,n,i,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const o=n-t;this.startLineNumber-=o;return}const i=this.tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const o=-t;this.startLineNumber-=o,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,o){if(t===0&&n===0)return;const s=e.lineNumber-this.startLineNumber;if(s<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();s>=a+1||this.tokens.acceptInsertText(s,e.column-1,t,n,i,o)}}class sSe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function ab(r){return r instanceof Uint32Array?r:new Uint32Array(r)}class i${constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let i=null;for(let o=0,s=this._pieces.length;o<s;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}const[l,u]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}u.isEmpty()||(this._pieces.splice(o,1,l,u),o++,s++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=MT(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const i=i$._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;const s=t.getCount(),a=o.getCount();let l=0,u=[],d=0,h=0;const p=(_,C)=>{_!==h&&(h=_,u[d++]=_,u[d++]=C)};for(let _=0;_<a;_++){const C=o.getStartCharacter(_),S=o.getEndCharacter(_),x=o.getMetadata(_),T=((x&1?2048:0)|(x&2?4096:0)|(x&4?8192:0)|(x&8?8372224:0)|(x&16?4286578688:0))>>>0,k=~T>>>0;for(;l<s&&t.getEndOffset(l)<=C;)p(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<C&&p(C,t.getMetadata(l));l<s&&t.getEndOffset(l)<S;)p(t.getEndOffset(l),t.getMetadata(l)&k|x&T),l++;if(l<s)p(S,t.getMetadata(l)&k|x&T),t.getEndOffset(l)===S&&l++;else{const M=Math.min(Math.max(0,l-1),s-1);p(S,t.getMetadata(M)&k|x&T)}}for(;l<s;)p(t.getEndOffset(l),t.getMetadata(l)),l++;return new Ua(new Uint32Array(u),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(const s of this._pieces)s.acceptEdit(e,t,n,i,o)}}class Sf{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==sb)return new Ua(ab(i),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=oY(this._languageIdCodec.encodeLanguageId(e)),new Ua(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?ab(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=Nu.getLanguageId(i[1])!==e),!o)return sb}if(!i||i.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=oY(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=MT(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){const s=Sf._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=s,o?!Sf._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=ab(e),i=ab(t);if(n.length!==i.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Ge(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Sf._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Sf._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=Sf._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Sf._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=Sf._insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=Sf._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Sf._insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===sb?e:Sf._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===sb)return e;const n=ab(e),i=n[n.length-2];return Sf._delete(e,t,i)}static _delete(e,t,n){if(e===null||e===sb||t===n)return e;const i=ab(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return sb;const s=Ua.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,l=i[s<<1];if(n<l){const _=n-t;for(let C=s;C<o;C++)i[C<<1]-=_;return e}let u,d;a!==t?(i[s<<1]=t,u=s+1<<1,d=t):(u=s<<1,d=a);const h=n-t;for(let _=s+1;_<o;_++){const C=i[_<<1]-h;C>d&&(i[u++]=C,i[u++]=i[(_<<1)+1],d=C)}if(u===i.length)return e;let p=new Uint32Array(u);return p.set(i.subarray(0,u),0),p.buffer}static _append(e,t){if(t===sb)return e;if(e===sb)return t;if(e===null)return e;if(t===null)return null;const n=ab(e),i=ab(t),o=i.length>>>1;let s=new Uint32Array(n.length+i.length);s.set(n,0);let a=n.length;const l=n[n.length-2];for(let u=0;u<o;u++)s[a++]=i[u<<1]+l,s[a++]=i[(u<<1)+1];return s.buffer}static _insert(e,t,n){if(e===null||e===sb)return e;const i=ab(e),o=i.length>>>1;let s=Ua.findIndexInTokensArray(i,t);s>0&&i[s-1<<1]===t&&s--;for(let a=s;a<o;a++)i[a<<1]+=n;return e}}class zL extends ot{constructor(e,t,n,i,o,s,a){super(),this._onDidChangeContent=this._register(new Fe),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new kwe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const i=this.getPositionAt(e),o=this.getPositionAt(n);return new le(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,o=e.endLineNumber;for(let s=i;s<=o;s++){const a=this.getLineContent(s),l=s===i?e.startColumn-1:0,u=s===o?e.endColumn-1:a.length;for(let d=l;d<u;d++)Ca(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=sc(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Iv(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let S=0;S<e.length;S++){let x=e[S];a&&x._isTracked&&(a=!1);let T=x.range;if(x.text){let Q=!0;s||(Q=!Lz(x.text),s=Q),!i&&Q&&(i=YP(x.text)),!o&&Q&&(o=lre(x.text))}let k="",M=0,W=0,F=0;if(x.text){let Q;[M,W,F,Q]=dS(x.text);const z=this.getEOL();Q===0||Q===(z===`\r
`?2:1)?k=x.text:k=x.text.replace(/\r\n|\r|\n/g,z)}l[S]={sortIndex:S,identifier:x.identifier||null,range:T,rangeOffset:this.getOffsetAt(T.startLineNumber,T.startColumn),rangeLength:this.getValueLengthInRange(T),text:k,eolCount:M,firstLineLength:W,lastLineLength:F,forceMoveMarkers:!!x.forceMoveMarkers,isAutoWhitespaceEdit:x.isAutoWhitespaceEdit||!1}}l.sort(zL._sortOpsAscending);let u=!1;for(let S=0,x=l.length-1;S<x;S++){let T=l[S].range.getEndPosition(),k=l[S+1].range.getStartPosition();if(k.isBeforeOrEqual(T)){if(k.isBefore(T))throw new Error("Overlapping ranges are not allowed!");u=!0}}a&&(l=this._reduceOperations(l));let d=n||t?zL._getInverseEditRanges(l):[],h=[];if(t)for(let S=0;S<l.length;S++){let x=l[S],T=d[S];if(x.isAutoWhitespaceEdit&&x.range.isEmpty())for(let k=T.startLineNumber;k<=T.endLineNumber;k++){let M="";k===T.startLineNumber&&(M=this.getLineContent(x.range.startLineNumber),sc(M)!==-1)||h.push({lineNumber:k,oldContent:M})}}let p=null;if(n){let S=0;p=[];for(let x=0;x<l.length;x++){const T=l[x],k=d[x],M=this.getValueInRange(T.range),W=T.rangeOffset+S;S+=T.text.length-M.length,p[x]={sortIndex:T.sortIndex,identifier:T.identifier,range:k,text:M,textChange:new kl(T.rangeOffset,M,W,T.text)}}u||p.sort((x,T)=>x.sortIndex-T.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;const _=this._doApplyEdits(l);let C=null;if(t&&h.length>0){h.sort((S,x)=>x.lineNumber-S.lineNumber),C=[];for(let S=0,x=h.length;S<x;S++){let T=h[S].lineNumber;if(S>0&&h[S-1].lineNumber===T)continue;let k=h[S].oldContent,M=this.getLineContent(T);M.length===0||M===k||sc(M)!==-1||C.push(T)}}return this._onDidChangeContent.fire(),new jye(p,_,C)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,o=new le(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let s=n.startLineNumber,a=n.startColumn;const l=[];for(let _=0,C=e.length;_<C;_++){const S=e[_],x=S.range;t=t||S.forceMoveMarkers,l.push(this.getValueInRange(new le(s,a,x.startLineNumber,x.startColumn))),S.text.length>0&&l.push(S.text),s=x.endLineNumber,a=x.endColumn}const u=l.join(""),[d,h,p]=dS(u);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:u,eolCount:d,firstLineLength:h,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(zL._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n];const o=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&s===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const u=new le(o,s,a,l);t.push({range:u,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){let t=[],n=0,i=0,o=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],u,d;o?o.range.endLineNumber===l.range.startLineNumber?(u=n,d=i+(l.range.startColumn-o.range.endColumn)):(u=n+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(u=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const p=l.eolCount+1;p===1?h=new le(u,d,u,d+l.firstLineLength):h=new le(u,d,u+p-1,l.lastLineLength+1)}else h=new le(u,d,u,d);n=h.endLineNumber,i=h.endColumn,t.push(h),o=l}return t}static _sortOpsAscending(e,t){let n=le.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=le.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class aSe{constructor(e,t,n,i,o,s,a,l,u){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=o,this._containsRTL=s,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=u}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=pb(a);n[o]=new dw(a,l)}const i=new zL(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class lSe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&xz(e)&&(this.BOM=Q0e,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=xwe(this._tmpLineStarts,e);this.chunks.push(new dw(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=YP(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=lre(e))}finish(e=!0){return this._finish(),new aSe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=pb(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class uSe{constructor(){this.changeType=1}}class ym{constructor(e,t,n,i,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new ym(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new ym(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}class aY{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class cSe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class dSe{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class hSe{constructor(){this.changeType=5}}class Vw{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new Vw(n,i,o,s)}}class Ooe{constructor(e){this.changes=e}}class fM{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Vw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=fM._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new fM(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:o,isUndoing:s,isRedoing:a,isFlush:l}}}let C4=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class r${constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class y4{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}class fSe{clone(){return this}equals(e){return this===e}}const _2=new fSe,RC="vs.editor.nullMode";function Roe(r,e,t,n){return new r$([new C4(n,"",r)],t)}function o$(r,e,t,n){let i=new Uint32Array(2);return i[0]=n,i[1]=(r<<0|0|0|16384|2<<23)>>>0,new y4(i,t===null?_2:t)}class gSe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],i=[];for(let o=0;o<t;o++)n[o]=null,i[o]=!1;this._beginState=MT(this._beginState,e,n),this._valid=MT(this._valid,e,i),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const i=this.getBeginState(t+1);if(i===null||!n.equals(i)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let o=t+1;for(;o<e&&this._isValid(o);)o++;this._invalidLineStartIndex=o}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,o=Math.min(n,t);for(let s=o;s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new Ge(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class pSe extends ot{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=new gSe,this._tokenizationSupport=null,this._register(es.onDidChange(n=>{const i=this._textModel.getLanguageId();n.changedLanguages.indexOf(i)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let i=0,o=n.changes.length;i<o;i++){const s=n.changes[i],[a]=dS(s.text);this._tokenizationStateStore.applyEdits(s.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=mSe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,TT(e=>{this._isScheduled=!1,!this._isDisposed&&this._revalidateTokensNow(e)}))}_revalidateTokensNow(e){const t=this._textModel.getLineCount(),n=1,i=new d5,o=Ov.create(!1);let s=-1;do if(o.elapsed()>n||(s=this._tokenizeOneInvalidLine(i),s>=t))break;while(this._hasLinesToTokenize()&&e.timeRemaining()>0);this._beginBackgroundTokenization(),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new d5;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new d5;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationSupport)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const i=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),s=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=DA(this._languageIdCodec,i,this._tokenizationSupport,s,!0,n),l=new Ua(a.tokens,s,this._languageIdCodec);if(l.getCount()===0)return 0;const u=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(u)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),i=this._textModel.getLineCount(),o=t-1;for(let s=this._tokenizationStateStore.invalidLineStartIndex;s<=o;s++){const a=this._textModel.getLineContent(s+1),l=this._tokenizationStateStore.getBeginState(s),u=DA(this._languageIdCodec,n,this._tokenizationSupport,a,!0,l);e.add(s+1,u.tokens),this._tokenizationStateStore.setEndState(i,s,u.endState),s=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const o=[];let s=null;for(let u=t-1;i>1&&u>=1;u--){const d=this._textModel.getLineFirstNonWhitespaceColumn(u);if(d!==0&&d<i){if(s=this._tokenizationStateStore.getBeginState(u-1),s)break;o.push(this._textModel.getLineContent(u)),i=d}}s||(s=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=s;for(let u=o.length-1;u>=0;u--)l=DA(this._languageIdCodec,a,this._tokenizationSupport,o[u],!1,l).endState;for(let u=t;u<=n;u++){const d=this._textModel.getLineContent(u),h=DA(this._languageIdCodec,a,this._tokenizationSupport,d,!0,l);e.add(u,h.tokens),this._tokenizationStateStore.setFakeTokens(u-1),l=h.endState}}}function mSe(r){const e=r.getLanguageId();let t=r.isTooLargeForTokenization()?null:es.get(e),n=null;if(t)try{n=t.getInitialState()}catch(i){ti(i),t=null}return[t,n]}function DA(r,e,t,n,i,o){let s=null;if(t)try{s=t.tokenize2(n,i,o.clone(),0)}catch(a){ti(a)}return s||(s=o$(r.encodeLanguageId(e),n,o,0)),Ua.convertToEndOffset(s.tokens,n.length),s}var Ts;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(Ts||(Ts={}));class h5{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class _Se{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)ck(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),ck(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),ck(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),ck(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&ck(this.autoClosingPairsCloseSingleChar,t.close,t)}}function ck(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}function UO(r,e){let t=r.getCount(),n=r.findTokenIndexAtOffset(e),i=r.getLanguageId(n),o=n;for(;o+1<t&&r.getLanguageId(o+1)===i;)o++;let s=n;for(;s>0&&r.getLanguageId(s-1)===i;)s--;return new vSe(r,i,s,o+1,r.getStartOffset(s),r.getEndOffset(o))}class vSe{constructor(e,t,n,i,o,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=o,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Q_(r){return(r&7)!==0}class v2{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new h5(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new h5({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=lY(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=lY(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new h5({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:v2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}v2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function lY(r){return r.filter(([e,t])=>e!==""&&t!=="")}class gM{constructor(e,t,n,i,o,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=s,this._openSet=gM._toSet(this.open),this._closeSet=gM._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function bSe(r){const e=r.length;r=r.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);const t=[];for(let s=0;s<e;s++)t[s]=s;const n=(s,a)=>{const[l,u]=s,[d,h]=a;return l===d||l===h||u===d||u===h},i=(s,a)=>{const l=Math.min(s,a),u=Math.max(s,a);for(let d=0;d<e;d++)t[d]===u&&(t[d]=l)};for(let s=0;s<e;s++){const a=r[s];for(let l=s+1;l<e;l++){const u=r[l];n(a,u)&&i(t[s],t[l])}}const o=[];for(let s=0;s<e;s++){let a=[],l=[];for(let u=0;u<e;u++)if(t[u]===s){const[d,h]=r[u];a.push(d),l.push(h)}a.length>0&&o.push({open:a,close:l})}return o}class CSe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=bSe(t);this.brackets=n.map((i,o)=>new gM(e,o,i.open,i.close,ySe(i.open,i.close,n,o),wSe(i.open,i.close,n,o))),this.forwardRegex=SSe(this.brackets),this.reversedRegex=ESe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function Moe(r,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;const s=e[i];for(const a of s.open)a.indexOf(r)>=0&&n.push(a);for(const a of s.close)a.indexOf(r)>=0&&n.push(a)}}function Poe(r,e){return r.length-e.length}function w4(r){if(r.length<=1)return r;const e=[],t=new Set;for(const n of r)t.has(n)||(e.push(n),t.add(n));return e}function ySe(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)Moe(i[o],t,n,i);return i=w4(i),i.sort(Poe),i.reverse(),S4(i)}function wSe(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)Moe(i[o],t,n,i);return i=w4(i),i.sort(Poe),i.reverse(),S4(i.map(s$))}function SSe(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=w4(e),S4(e)}function ESe(r){let e=[];for(const t of r){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=w4(e),S4(e.map(s$))}function LSe(r){const e=/^[\w ]+$/.test(r);return r=Vf(r),e?`\\b${r}\\b`:r}function S4(r){let e=`(${r.map(LSe).join(")|(")})`;return sre(e,!0)}const s$=function(){function r(n){if(hoe){const i=new Uint16Array(n.length);let o=0;for(let s=n.length-1;s>=0;s--)i[o++]=n.charCodeAt(s);return doe().decode(i)}else{let i=[],o=0;for(let s=n.length-1;s>=0;s--)i[o++]=n.charAt(s);return i.join("")}}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}();class Fg{static _findPrevBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,l=i+s;return new le(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){const a=s$(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let l=i+s;return new le(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){const s=n.substring(i,o);return this.findNextBracketInText(e,t,s,i)}}class xSe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return oS(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(Q_(t.getStandardTokenType(i)))return null;const o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Fg.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;const l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function IA(r){return r.global&&(r.lastIndex=0),!0}class DSe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&IA(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&IA(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&IA(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&IA(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class pL{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=pL._createOpenBracketRegExp(t[0]),i=pL._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(u=>u.reg?(u.reg.lastIndex=0,u.reg.test(u.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:Ts.IndentOutdent}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:Ts.Indent}}return null}static _createOpenBracketRegExp(e){let t=Vf(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",pL._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Vf(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,pL._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return ti(t),null}}}const Jr=ar("configurationService");function Foe(r,e){const t=Object.create(null);for(let n in r)a$(t,n,r[n],e);return t}function a$(r,e,t,n){const i=e.split("."),o=i.pop();let s=r;for(let a=0;a<i.length;a++){let l=i[a],u=s[l];switch(typeof u){case"undefined":u=s[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(u)}`);return}s=u}if(typeof s=="object"&&s!==null)try{s[o]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(s)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(s)}`)}function ISe(r,e){const t=e.split(".");Boe(r,t)}function Boe(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const n=r[t];typeof n=="object"&&!Array.isArray(n)&&(Boe(n,e),Object.keys(n).length===0&&delete r[t])}}function kSe(r,e,t){function n(s,a){let l=s;for(const u of a){if(typeof l!="object"||l===null)return;l=l[u]}return l}const i=e.split("."),o=n(r,i);return typeof o>"u"?t:o}const Bl=ar("modeService");class eC{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const Woe=[];function ZC(r,e,t){e instanceof eC||(e=new eC(e,[],t)),Woe.push([r,e])}function TSe(){return Woe}var NSe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uY=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class f5{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const b2=ar("languageConfigurationService");let pM=class extends ot{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new Fe),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(J9));this._register(this.configurationService.onDidChangeConfiguration(i=>{const o=i.change.keys.some(a=>n.has(a)),s=i.change.overrides.filter(([a,l])=>l.some(u=>n.has(u))).map(([a])=>this.modeService.validateLanguageId(a));if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new f5(void 0));else for(const a of s)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new f5(a)))})),this._register(fr.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new f5(i.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=ASe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};pM=NSe([uY(0,Jr),uY(1,Bl)],pM);function ASe(r,e,t){let n=fr.getLanguageConfiguration(r);if(!n){const a=t.validateLanguageId(r);if(!a)throw new Error("Unexpected languageId");n=new zT(a,{})}const i=OSe(n.languageId,e),o=Voe([n.underlyingConfig,i]);return new zT(n.languageId,o)}const J9={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function OSe(r,e){const t=e.getValue(J9.brackets,{overrideIdentifier:r}),n=e.getValue(J9.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:cY(t),colorizedBracketPairs:cY(n)}}function cY(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class dY{constructor(e){this.languageId=e}}class RSe{constructor(){this._entries=new Map,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let i=this._entries.get(e);i||(i=new MSe(e),this._entries.set(e,i));const o=i.register(t,n);return this._onDidChange.fire(new dY(e)),Hi(()=>{o.dispose(),this._onDidChange.fire(new dY(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let i=UO(t,n-1),o=this._getElectricCharacterSupport(i.languageId);return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new _Se(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():v2.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return YR(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let i=e.getLanguageIdAtPosition(t,0);if(t>1){let o,s=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==i)return s;let a=e.getLineContent(o);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){s=o;continue}return o}}return-1}getInheritIndentForLine(e,t,n,i=!0){if(e<4)return null;const o=this.getIndentRulesSupport(t.getLanguageId());if(!o)return null;if(n<=1)return{indentation:"",action:null};const s=this.getPrecedingValidLine(t,n,o);if(s<0)return null;if(s<1)return{indentation:"",action:null};const a=t.getLineContent(s);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:Vr(a),action:Ts.Indent,line:s};if(o.shouldDecrease(a))return{indentation:Vr(a),action:null,line:s};{if(s===1)return{indentation:Vr(t.getLineContent(s)),action:null,line:s};const l=s-1,u=o.getIndentMetadata(t.getLineContent(l));if(!(u&3)&&u&4){let d=0;for(let h=l-1;h>0;h--)if(!o.shouldIndentNextLine(t.getLineContent(h))){d=h;break}return{indentation:Vr(t.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Vr(t.getLineContent(s)),action:null,line:s};for(let d=s;d>0;d--){const h=t.getLineContent(d);if(o.shouldIncrease(h))return{indentation:Vr(h),action:Ts.Indent,line:d};if(o.shouldIndentNextLine(h)){let p=0;for(let _=d-1;_>0;_--)if(!o.shouldIndentNextLine(t.getLineContent(d))){p=_;break}return{indentation:Vr(t.getLineContent(p+1)),action:null,line:p+1}}else if(o.shouldDecrease(h))return{indentation:Vr(h),action:null,line:d}}return{indentation:Vr(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,i,o){if(e<4)return null;const s=this.getLanguageConfiguration(n);if(!s)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,i),u=t.getLineContent(i);if(l){const d=l.line;if(d!==void 0){const h=s.onEnter(e,"",t.getLineContent(d),"");if(h){let p=Vr(t.getLineContent(d));return h.removeText&&(p=p.substring(0,p.length-h.removeText)),h.indentAction===Ts.Indent||h.indentAction===Ts.IndentOutdent?p=o.shiftIndent(p):h.indentAction===Ts.Outdent&&(p=o.unshiftIndent(p)),a.shouldDecrease(u)&&(p=o.unshiftIndent(p)),h.appendText&&(p+=h.appendText),Vr(p)}}return a.shouldDecrease(u)?l.action===Ts.Indent?l.indentation:o.unshiftIndent(l.indentation):l.action===Ts.Indent?o.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,i){if(e<4)return null;t.forceTokenization(n.startLineNumber);const o=t.getLineTokens(n.startLineNumber),s=UO(o,n.startColumn-1),a=s.getLineContent();let l=!1,u;s.firstCharOffset>0&&o.getLanguageId(0)!==s.languageId?(l=!0,u=a.substr(0,n.startColumn-1-s.firstCharOffset)):u=o.getLineContent().substring(0,n.startColumn-1);let d;n.isEmpty()?d=a.substr(n.startColumn-1-s.firstCharOffset):d=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);const h=this.getIndentRulesSupport(s.languageId);if(!h)return null;const p=u,_=Vr(u),C={getLineTokens:k=>t.getLineTokens(k),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(k,M)=>t.getLanguageIdAtPosition(k,M),getLineContent:k=>k===n.startLineNumber?p:t.getLineContent(k)},S=Vr(o.getLineContent()),x=this.getInheritIndentForLine(e,C,n.startLineNumber+1);if(!x){const k=l?S:_;return{beforeEnter:k,afterEnter:k}}let T=l?S:x.indentation;return x.action===Ts.Indent&&(T=i.shiftIndent(T)),h.shouldDecrease(d)&&(T=i.unshiftIndent(T)),{beforeEnter:l?S:_,afterEnter:T}}getIndentActionForType(e,t,n,i,o){if(e<4)return null;const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(s.firstCharOffset)return null;const a=this.getIndentRulesSupport(s.languageId);if(!a)return null;const l=s.getLineContent(),u=l.substr(0,n.startColumn-1-s.firstCharOffset);let d;if(n.isEmpty()?d=l.substr(n.startColumn-1-s.firstCharOffset):d=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset),!a.shouldDecrease(u+d)&&a.shouldDecrease(u+i+d)){const h=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!h)return null;let p=h.indentation;return h.action!==Ts.Indent&&(p=o.unshiftIndent(p)),p}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const i=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),o=this.getLanguageConfiguration(i.languageId);if(!o)return null;const s=i.getLineContent(),a=s.substr(0,n.startColumn-1-i.firstCharOffset);let l;n.isEmpty()?l=s.substr(n.startColumn-1-i.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-i.firstCharOffset);let u="";if(n.startLineNumber>1&&i.firstCharOffset===0){const S=this.getScopedLineTokens(t,n.startLineNumber-1);S.languageId===i.languageId&&(u=S.getLineContent())}const d=o.onEnter(e,u,a,l);if(!d)return null;const h=d.indentAction;let p=d.appendText;const _=d.removeText||0;p?h===Ts.Indent&&(p="	"+p):h===Ts.Indent||h===Ts.IndentOutdent?p="	":p="";let C=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return _&&(C=C.substring(0,C.length-_)),{indentAction:h,appendText:p,removeText:_,indentation:C}}getIndentationAtPosition(e,t,n){const i=e.getLineContent(t);let o=Vr(i);return o.length>n-1&&(o=o.substring(0,n-1)),o}getScopedLineTokens(e,t,n){e.forceTokenization(t);const i=e.getLineTokens(t),o=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return UO(i,o)}}const fr=new RSe;class MSe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new hY(e,t,++this._order);return this._entries.push(n),this._resolved=null,Hi(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new zT(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(hY.cmp),Voe(this._entries.map(e=>e.configuration)))}}function Voe(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class hY{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class zT{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new pL(this.underlyingConfig):null,this.comments=zT._handleComments(this.underlyingConfig),this.characterPair=new v2(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Lre,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new DSe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return YR(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new CSe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new xSe(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}}ZC(b2,pM);const C2=ar("undoRedoService");class Hoe{constructor(e,t){this.resource=e,this.elements=t}}class fx{constructor(){this.id=fx._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}fx._ID=0;fx.None=new fx;class gv{constructor(){this.id=gv._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}gv._ID=0;gv.None=new gv;class fY{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class PSe{constructor(e,t,n,i){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i}}class FSe extends PSe{constructor(e,t,n,i,o){super(e,t,n,i),this.minVisibleColumnIndentation=o}}class BSe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function WSe(r,e,t,n){return r!==t?ps(t-r,n):ps(0,n-e)}const Yb=0;function VSe(r){return r===0}const Nh=Math.pow(2,26);function ps(r,e){return r*Nh+e}function CC(r){const e=r,t=Math.floor(e/Nh),n=e-t*Nh;return new BSe(t,n)}function HSe(r){return Math.floor(r/Nh)}function Nl(r,e){return e<Nh?r+e:r-r%Nh+e}function USe(r,e){const t=r,n=e;if(n-t<=0)return Yb;const o=Math.floor(t/Nh),s=Math.floor(n/Nh),a=n-s*Nh;if(o===s){const l=t-o*Nh;return ps(0,a-l)}else return ps(s-o,a)}function zO(r,e){return r<e}function Lw(r,e){return r<=e}function kA(r,e){return r>=e}function TA(r){return ps(r.lineNumber-1,r.column-1)}function lT(r,e){const t=r,n=Math.floor(t/Nh),i=t-n*Nh,o=e,s=Math.floor(o/Nh),a=o-s*Nh;return new le(n+1,i+1,s+1,a+1)}function zSe(r){const e=Mv(r);return ps(e.length-1,e[e.length-1].length)}class gY{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class $Se{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>l$.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return USe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?ps(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):ps(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=CC(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?ps(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):ps(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Lw(n,e)){this.nextEditIdx++;const i=CC(n),o=CC(this.translateOldToCur(t.endOffsetBeforeObj)),s=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class l${constructor(e,t,n){this.endOffsetBeforeObj=CC(t),this.endOffsetAfterObj=CC(Nl(e,n)),this.offsetObj=CC(e)}static from(e){return new l$(e.startOffset,e.endOffset,e.newLength)}}class ho{static visibleColumnFromColumn(e,t,n){const i=e.length,o=t-1<i?t-1:i;let s=0,a=0;for(;a<o;){const l=Ew(e,o,a);if(a+=l>=65536?2:1,l===9)s=ho.nextRenderTabStop(s,n);else{let u=vA(l);for(;a<o;){const d=Ew(e,o,a),h=vA(d);if($R(u,h))break;a+=d>=65536?2:1,u=h}Pv(l)||zR(l)?s=s+2:s=s+1}}return s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length;let o=0,s=1,a=0;for(;a<i;){const l=Ew(e,i,a);a+=l>=65536?2:1;let u;if(l===9)u=ho.nextRenderTabStop(o,n);else{let h=vA(l);for(;a<i;){const p=Ew(e,i,a),_=vA(p);if($R(h,_))break;a+=p>=65536?2:1,h=_}Pv(l)||zR(l)?u=o+2:u=o+1}const d=a+1;if(u>=t){const h=t-o;return u-t<h?d:s}o=u,s=d}return i+1}static columnFromVisibleColumn2(e,t,n,i){let o=this.columnFromVisibleColumn(t.getLineContent(n),i,e.tabSize),s=t.getLineMinColumn(n);if(o<s)return s;let a=t.getLineMaxColumn(n);return o>a?a:o}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const $O=new Array;class Zs{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Zs.cache[e];return n||(n=new Zs(e,t),Zs.cache[e]=n),n}return new Zs(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const s=1<<n|this.items;return s===this.items?this:Zs.create(s,this.additionalItems)}i--;const o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),Zs.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===$O&&e.additionalItems===$O)return t===this.items?this:t===e.items?e:Zs.create(t,$O);const n=new Array;for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const o=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(o|s)}return Zs.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Zs.cache=new Array(129);Zs.empty=Zs.create(0,$O);const pY={getKey(r){return r}};class jSe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class u${constructor(e){this._length=e}get length(){return this._length}}class $T extends u${constructor(e,t,n,i,o){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=o}static create(e,t,n){let i=e.length;return t&&(i=Nl(i,t.length)),n&&(i=Nl(i,n.length)),new $T(i,e,t,n,t?t.missingOpeningBracketIds:Zs.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new $T(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Nl(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Bv extends u${constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,i=!1){let o=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=Nl(o,t.length),s=s.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=Nl(o,n.length),s=s.merge(n.missingOpeningBracketIds)}return i?new qSe(o,e.listHeight+1,e,t,n,s):new jT(o,e.listHeight+1,e,t,n,s)}static getEmpty(){return new KSe(Yb,0,[],Zs.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const o=this.getChild(i);t=Nl(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let o=0;o<this.childrenLength;o++){const s=this.getChild(o);s&&(n=Math.min(n,s.computeMinIndentation(i,t)),i=Nl(i,s.length))}return this.cachedMinIndentation=n,n}}class jT extends Bv{constructor(e,t,n,i,o,s){super(e,t,s),this._item1=n,this._item2=i,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new jT(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class qSe extends jT{toMutable(){return new jT(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class mM extends Bv{constructor(e,t,n,i){super(e,t,i),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new mM(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class KSe extends mM{toMutable(){return new mM(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const GSe=[];class c$ extends u${get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return GSe}deepClone(){return this}}class rL extends c${get kind(){return 0}get missingOpeningBracketIds(){return Zs.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=CC(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=HSe(Nl(e,this.length))+1;let s=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),u=t.getLineContent(a);if(l===0)continue;const d=ho.visibleColumnFromColumn(u,l,t.getOptions().tabSize);s=Math.min(s,d)}return s}}class Hw extends c${constructor(e){super(e)}static create(e){const t=e,n=Hw.cacheByLength.get(t);if(n)return n;const i=new Hw(e);return Hw.cacheByLength.set(t,i),i}get kind(){return 1}get missingOpeningBracketIds(){return Zs.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}Hw.cacheByLength=new Map;class YSe extends c${constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let nC=class{constructor(e,t,n,i,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=o}};class ZSe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new XSe(this.textModel,this.bracketTokens),this._offset=Yb,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return ps(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Nl(this._offset,e);const t=CC(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Nl(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class XSe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,s=o.getCount();let a=null;if(this.lineTokenOffset<s){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const u=Nu.getTokenType(l)===0,d=o.getEndOffset(this.lineTokenOffset);if(u&&d!==this.lineCharOffset){const h=o.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,d),_=this.bracketTokens.getSingleLanguageBracketTokens(h),C=_.regExpGlobal;if(C){C.lastIndex=0;const S=C.exec(p);S&&(a=_.getToken(S[0]),a&&(this.lineCharOffset+=S.index))}}if(n+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=WSe(e,t,this.lineIdx,this.lineCharOffset);return new nC(i,0,-1,Zs.getEmpty(),new rL(i))}}class QSe{constructor(e,t){this.text=e,this._offset=Yb,this.idx=0;const i=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,o=[];let s,a=0,l=0,u=0,d=0;const h=new Array;for(let C=0;C<60;C++)h.push(new nC(ps(0,C),0,-1,Zs.getEmpty(),new rL(ps(0,C))));const p=new Array;for(let C=0;C<60;C++)p.push(new nC(ps(1,C),0,-1,Zs.getEmpty(),new rL(ps(1,C))));if(i)for(i.lastIndex=0;(s=i.exec(e))!==null;){const C=s.index,S=s[0];if(S===`
`)a++,l=C+1;else{if(u!==C){let x;if(d===a){const T=C-u;if(T<h.length)x=h[T];else{const k=ps(0,T);x=new nC(k,0,-1,Zs.getEmpty(),new rL(k))}}else{const T=a-d,k=C-l;if(T===1&&k<p.length)x=p[k];else{const M=ps(T,k);x=new nC(M,0,-1,Zs.getEmpty(),new rL(M))}}o.push(x)}o.push(t.getToken(S)),u=C+S.length,d=a}}const _=e.length;if(u!==_){const C=d===a?ps(0,_-u):ps(a-d,_-l);o.push(new nC(C,0,-1,Zs.getEmpty(),new rL(C)))}this.length=ps(a,_-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Sve}}class _M{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,u){return t.getKey(`${l}:::${u}`)}const i=e.characterPair.getColorizedBrackets(),o=new Map,s=new Set;for(const[l,u]of i){s.add(l);let d=o.get(u);const h=n(e.languageId,l);d||(d={openingBrackets:Zs.getEmpty(),first:h},o.set(u,d)),d.openingBrackets=d.openingBrackets.add(h,pY)}const a=new Map;for(const[l,u]of o){const d=ps(0,l.length);a.set(l,new nC(d,2,u.first,u.openingBrackets,Hw.create(d)))}for(const l of s){const u=ps(0,l.length),d=n(e.languageId,l);a.set(l,new nC(u,1,d,Zs.getEmpty().add(d,pY),Hw.create(u)))}return new _M(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>JSe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function JSe(r){const e=Vf(r);return/^[\w ]+$/.test(r)?`\\b${e}\\b`:e}class eEe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=_M.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=_M.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function tEe(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;const s=e,a=r[s].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-s>=2?Uoe(s===0&&e===r.length?r:r.slice(s,e),!1):r[s]}let n=t(),i=t();if(!i)return n;for(let s=t();s;s=t())mY(n,i)<=mY(i,s)?(n=g5(n,i),i=s):i=g5(i,s);return g5(n,i)}function Uoe(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const o=i<<1;r[i]=Bv.create23(r[o],r[o+1],o+3===t?r[o+2]:null,e)}t=n}return Bv.create23(r[0],r[1],t>=3?r[2]:null,e)}function mY(r,e){return Math.abs(r.listHeight-e.listHeight)}function g5(r,e){return r.listHeight===e.listHeight?Bv.create23(r,e,null,!1):r.listHeight>e.listHeight?nEe(r,e):iEe(e,r)}function nEe(r,e){r=r.toMutable();let t=r;const n=new Array;let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const s=n[o];i?s.childrenLength>=3?i=Bv.create23(s.unappendChild(),i,null,!1):(s.appendChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?Bv.create23(r,i,null,!1):r}function iEe(r,e){r=r.toMutable();let t=r;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){const s=n[o];i?s.childrenLength>=3?i=Bv.create23(i,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?Bv.create23(i,r,null,!1):r}class rEe{constructor(e){this.lastOffset=Yb,this.nextNodes=[e],this.offsets=[Yb],this.idxs=[]}readLongestNodeAt(e,t){if(zO(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=dk(this.nextNodes);if(!n)return;const i=dk(this.offsets);if(zO(e,i))return;if(zO(i,e))if(Nl(i,n.length)<=e)this.nextNodeAfterCurrent();else{const o=p5(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=p5(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=dk(this.offsets),t=dk(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=dk(this.nextNodes),i=p5(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Nl(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}function p5(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function dk(r){return r.length>0?r[r.length-1]:void 0}function _Y(r,e,t,n){return new oEe(r,e,t,n).parseDocument()}class oEe{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new rEe(n):void 0,this.positionMapper=new $Se(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Zs.getEmpty());return e||(e=Bv.getEmpty()),e}parseList(e){const t=new Array;for(;;){const i=this.tokenizer.peek();if(!i||i.kind===2&&i.bracketIds.intersects(e))break;const o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?tEe(t):Uoe(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!VSe(n)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>zO(o.length,n)?o.canBeReused(e):!1);if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new YSe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),i=this.parseList(n),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),$T.create(t.astNode,i,o.astNode)):$T.create(t.astNode,i,null);default:throw new Error("unexpected")}}}class sEe extends ot{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Fe,this.denseKeyProvider=new jSe,this.brackets=new eEe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const i=n.map(o=>new gY(ps(o.fromLineNumber-1,0),ps(o.toLineNumber,0),ps(o.toLineNumber-o.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(i,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new QSe(this.textModel.getValue(),n);this.initialAstWithoutTokens=_Y(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const i=le.lift(n.range);return new gY(TA(i.getStartPosition()),TA(i.getEndPosition()),zSe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const i=t,o=new ZSe(this.textModel,this.brackets);return _Y(o,e,i,n)}getBracketsInRange(e){const t=ps(e.startLineNumber-1,e.startColumn-1),n=ps(e.endLineNumber-1,e.endColumn-1),i=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return Pk(o,Yb,o.length,t,n,i),i}getBracketPairsInRange(e,t){const n=new Array,i=TA(e.getStartPosition()),o=TA(e.getEndPosition()),s=this.initialAstWithoutTokens||this.astWithTokens,a=new aEe(n,t,this.textModel);return zoe(s,Yb,s.length,i,o,a),n}}function Pk(r,e,t,n,i,o,s=0){if(r.kind===1){const a=lT(e,t);o.push(new fY(a,s-1,!1))}else if(r.kind===3){const a=lT(e,t);o.push(new fY(a,s-1,!0))}else if(r.kind===4)for(const a of r.children)t=Nl(e,a.length),Lw(e,i)&&kA(t,n)&&Pk(a,e,t,n,i,o,s),e=t;else if(r.kind===2){s++;{const a=r.openingBracket;t=Nl(e,a.length),Lw(e,i)&&kA(t,n)&&Pk(a,e,t,n,i,o,s),e=t}if(r.child){const a=r.child;t=Nl(e,a.length),Lw(e,i)&&kA(t,n)&&Pk(a,e,t,n,i,o,s),e=t}if(r.closingBracket){const a=r.closingBracket;t=Nl(e,a.length),Lw(e,i)&&kA(t,n)&&Pk(a,e,t,n,i,o,s),e=t}}}class aEe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function zoe(r,e,t,n,i,o,s=0){var a;if(r.kind===2){const u=Nl(e,r.openingBracket.length);let d=-1;o.includeMinIndentation&&(d=r.computeMinIndentation(e,o.textModel)),o.result.push(new FSe(lT(e,t),lT(e,u),r.closingBracket?lT(Nl(u,((a=r.child)===null||a===void 0?void 0:a.length)||Yb),t):void 0,s,d)),s++}let l=e;for(const u of r.children){const d=l;l=Nl(l,u.length),Lw(d,i)&&Lw(n,l)&&zoe(u,d,l,n,i,o,s)}}class lEe extends ot{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new lc),this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(e.onDidChangeLanguage(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||!((i=this.bracketPairsTree.value)===null||i===void 0)&&i.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Nt;this.bracketPairsTree.value=uEe(e.add(new sEe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}handleContentChanged(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t){let n=e.toLowerCase(),i=this.textModel.validatePosition(t);const o=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);let s=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!s)return null;let a=s.textIsBracket[n];return a?NA(this._findMatchingBracketUp(a,i,null)):null}matchBracket(e){return this._matchBracket(this.textModel.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,i){const o=t.getCount(),s=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let u=i-1;u>=0;u--){const d=t.getEndOffset(u);if(d<=a)break;if(Q_(t.getStandardTokenType(u))||t.getLanguageId(u)!==s){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let u=i+1;u<o;u++){const d=t.getStartOffset(u);if(d>=l)break;if(Q_(t.getStandardTokenType(u))||t.getLanguageId(u)!==s){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this.textModel.getLineTokens(t),i=this.textModel.getLineContent(t),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(s&&!Q_(n.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,s,o),u=null;for(;;){const d=Fg.findNextBracketInRange(s.forwardRegex,t,i,a,l);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const h=i.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),p=this._matchFoundBracket(d,s.textIsBracket[h],s.textIsOpenBracket[h],null);if(p){if(p instanceof wb)return null;u=p}}a=d.endColumn-1}if(u)return u}if(o>0&&n.getStartOffset(o)===e.column-1){const a=o-1,l=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(l&&!Q_(n.getStandardTokenType(a))){let{searchStartOffset:u,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,l,a);const h=Fg.findPrevBracketInRange(l.reversedRegex,t,i,u,d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const p=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),_=this._matchFoundBracket(h,l.textIsBracket[p],l.textIsOpenBracket[p],null);if(_)return _ instanceof wb?null:_}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return o?o instanceof wb?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,o=e.reversedRegex;let s=-1,a=0;const l=(u,d,h,p)=>{for(;;){if(n&&++a%100===0&&!n())return wb.INSTANCE;const _=Fg.findPrevBracketInRange(o,u,d,h,p);if(!_)break;const C=d.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(C)?s++:e.isClose(C)&&s--,s===0)return _;p=_.startColumn-1}return null};for(let u=t.lineNumber;u>=1;u--){const d=this.textModel.getLineTokens(u),h=d.getCount(),p=this.textModel.getLineContent(u);let _=h-1,C=p.length,S=p.length;u===t.lineNumber&&(_=d.findTokenIndexAtOffset(t.column-1),C=t.column-1,S=t.column-1);let x=!0;for(;_>=0;_--){const T=d.getLanguageId(_)===i&&!Q_(d.getStandardTokenType(_));if(T)x?C=d.getStartOffset(_):(C=d.getStartOffset(_),S=d.getEndOffset(_));else if(x&&C!==S){const k=l(u,p,C,S);if(k)return k}x=T}if(x&&C!==S){const T=l(u,p,C,S);if(T)return T}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,o=e.forwardRegex;let s=1,a=0;const l=(d,h,p,_)=>{for(;;){if(n&&++a%100===0&&!n())return wb.INSTANCE;const C=Fg.findNextBracketInRange(o,d,h,p,_);if(!C)break;const S=h.substring(C.startColumn-1,C.endColumn-1).toLowerCase();if(e.isOpen(S)?s++:e.isClose(S)&&s--,s===0)return C;p=C.endColumn-1}return null},u=this.textModel.getLineCount();for(let d=t.lineNumber;d<=u;d++){const h=this.textModel.getLineTokens(d),p=h.getCount(),_=this.textModel.getLineContent(d);let C=0,S=0,x=0;d===t.lineNumber&&(C=h.findTokenIndexAtOffset(t.column-1),S=t.column-1,x=t.column-1);let T=!0;for(;C<p;C++){const k=h.getLanguageId(C)===i&&!Q_(h.getStandardTokenType(C));if(k)T||(S=h.getStartOffset(C)),x=h.getEndOffset(C);else if(T&&S!==x){const M=l(d,_,S,x);if(M)return M}T=k}if(T&&S!==x){const k=l(d,_,S,x);if(k)return k}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,i=null;for(let o=t.lineNumber;o>=1;o--){const s=this.textModel.getLineTokens(o),a=s.getCount(),l=this.textModel.getLineContent(o);let u=a-1,d=l.length,h=l.length;if(o===t.lineNumber){u=s.findTokenIndexAtOffset(t.column-1),d=t.column-1,h=t.column-1;const _=s.getLanguageId(u);n!==_&&(n=_,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let p=!0;for(;u>=0;u--){const _=s.getLanguageId(u);if(n!==_){if(i&&p&&d!==h){const S=Fg.findPrevBracketInRange(i.reversedRegex,o,l,d,h);if(S)return this._toFoundBracket(i,S);p=!1}n=_,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const C=!!i&&!Q_(s.getStandardTokenType(u));if(C)p?d=s.getStartOffset(u):(d=s.getStartOffset(u),h=s.getEndOffset(u));else if(i&&p&&d!==h){const S=Fg.findPrevBracketInRange(i.reversedRegex,o,l,d,h);if(S)return this._toFoundBracket(i,S)}p=C}if(i&&p&&d!==h){const _=Fg.findPrevBracketInRange(i.reversedRegex,o,l,d,h);if(_)return this._toFoundBracket(i,_)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let i=null,o=null;for(let s=t.lineNumber;s<=n;s++){const a=this.textModel.getLineTokens(s),l=a.getCount(),u=this.textModel.getLineContent(s);let d=0,h=0,p=0;if(s===t.lineNumber){d=a.findTokenIndexAtOffset(t.column-1),h=t.column-1,p=t.column-1;const C=a.getLanguageId(d);i!==C&&(i=C,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets)}let _=!0;for(;d<l;d++){const C=a.getLanguageId(d);if(i!==C){if(o&&_&&h!==p){const x=Fg.findNextBracketInRange(o.forwardRegex,s,u,h,p);if(x)return this._toFoundBracket(o,x);_=!1}i=C,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets}const S=!!o&&!Q_(a.getStandardTokenType(d));if(S)_||(h=a.getStartOffset(d)),p=a.getEndOffset(d);else if(o&&_&&h!==p){const x=Fg.findNextBracketInRange(o.forwardRegex,s,u,h,p);if(x)return this._toFoundBracket(o,x)}_=S}if(o&&_&&h!==p){const C=Fg.findNextBracketInRange(o.forwardRegex,s,u,h,p);if(C)return this._toFoundBracket(o,C)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const _=Date.now();n=()=>Date.now()-_<=t}const i=this.textModel.validatePosition(e),o=this.textModel.getLineCount(),s=new Map;let a=[];const l=(_,C)=>{if(!s.has(_)){let S=[];for(let x=0,T=C?C.brackets.length:0;x<T;x++)S[x]=0;s.set(_,S)}a=s.get(_)};let u=0;const d=(_,C,S,x,T)=>{for(;;){if(n&&++u%100===0&&!n())return wb.INSTANCE;const k=Fg.findNextBracketInRange(_.forwardRegex,C,S,x,T);if(!k)break;const M=S.substring(k.startColumn-1,k.endColumn-1).toLowerCase(),W=_.textIsBracket[M];if(W&&(W.isOpen(M)?a[W.index]++:W.isClose(M)&&a[W.index]--,a[W.index]===-1))return this._matchFoundBracket(k,W,!1,n);x=k.endColumn-1}return null};let h=null,p=null;for(let _=i.lineNumber;_<=o;_++){const C=this.textModel.getLineTokens(_),S=C.getCount(),x=this.textModel.getLineContent(_);let T=0,k=0,M=0;if(_===i.lineNumber){T=C.findTokenIndexAtOffset(i.column-1),k=i.column-1,M=i.column-1;const F=C.getLanguageId(T);h!==F&&(h=F,p=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,p))}let W=!0;for(;T<S;T++){const F=C.getLanguageId(T);if(h!==F){if(p&&W&&k!==M){const z=d(p,_,x,k,M);if(z)return NA(z);W=!1}h=F,p=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,p)}const Q=!!p&&!Q_(C.getStandardTokenType(T));if(Q)W||(k=C.getStartOffset(T)),M=C.getEndOffset(T);else if(p&&W&&k!==M){const z=d(p,_,x,k,M);if(z)return NA(z)}W=Q}if(p&&W&&k!==M){const F=d(p,_,x,k,M);if(F)return NA(F)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}}function uEe(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}class wb{constructor(){this._searchCanceledBrand=void 0}}wb.INSTANCE=new wb;function NA(r){return r instanceof wb?null:r}const cEe=Be("editor.lineHighlightBackground",{dark:null,light:null,hc:null},E("lineHighlight","Background color for the highlight of line at the cursor position.")),vY=Be("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},E("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),dEe=Be("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},E("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),hEe=Be("editor.rangeHighlightBorder",{dark:null,light:null,hc:Bc},E("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),fEe=Be("editor.symbolHighlightBackground",{dark:U9,light:U9,hc:null},E("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),gEe=Be("editor.symbolHighlightBorder",{dark:null,light:null,hc:Bc},E("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),$oe=Be("editorCursor.foreground",{dark:"#AEAFAD",light:je.black,hc:je.white},E("caret","Color of the editor cursor.")),pEe=Be("editorCursor.background",null,E("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Uw=Be("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},E("editorWhitespaces","Color of whitespace characters in the editor.")),E4=Be("editorIndentGuide.background",{dark:Uw,light:Uw,hc:Uw},E("editorIndentGuides","Color of the editor indentation guides.")),L4=Be("editorIndentGuide.activeBackground",{dark:Uw,light:Uw,hc:Uw},E("editorActiveIndentGuide","Color of the active editor indentation guides.")),joe=Be("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:je.white},E("editorLineNumbers","Color of editor line numbers.")),m5=Be("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Bc},E("editorActiveLineNumber","Color of editor active line number"),!1,E("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),mEe=Be("editorLineNumber.activeForeground",{dark:m5,light:m5,hc:m5},E("editorActiveLineNumber","Color of editor active line number")),_Ee=Be("editorRuler.foreground",{dark:"#5A5A5A",light:je.lightgrey,hc:je.white},E("editorRuler","Color of the editor rulers.")),vEe=Be("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},E("editorBracketMatchBackground","Background color behind matching brackets")),qoe=Be("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Ns},E("editorBracketMatchBorder","Color for matching brackets boxes")),bEe=Be("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},E("editorOverviewRulerBorder","Color of the overview ruler border.")),CEe=Be("editorOverviewRuler.background",null,E("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),yEe=Be("editorGutter.background",{dark:Mf,light:Mf,hc:Mf},E("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),wEe=Be("editorUnnecessaryCode.border",{dark:null,light:null,hc:je.fromHex("#fff").transparent(.8)},E("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),SEe=Be("editorUnnecessaryCode.opacity",{dark:je.fromHex("#000a"),light:je.fromHex("#0007"),hc:null},E("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),EEe=Be("editorGhostText.border",{dark:null,light:null,hc:je.fromHex("#fff").transparent(.8)},E("editorGhostTextBorder","Border color of ghost text in the editor.")),LEe=Be("editorGhostText.foreground",{dark:je.fromHex("#ffffff56"),light:je.fromHex("#0007"),hc:null},E("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),xEe=Be("editorGhostText.background",{dark:null,light:null,hc:null},E("editorGhostTextBackground","Background color of the ghost text in the editor.")),_5=new je(new sr(0,122,204,.6)),DEe=Be("editorOverviewRuler.rangeHighlightForeground",{dark:_5,light:_5,hc:_5},E("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),IEe=Be("editorOverviewRuler.errorForeground",{dark:new je(new sr(255,18,18,.7)),light:new je(new sr(255,18,18,.7)),hc:new je(new sr(255,50,50,1))},E("overviewRuleError","Overview ruler marker color for errors.")),kEe=Be("editorOverviewRuler.warningForeground",{dark:Bb,light:Bb,hc:u4},E("overviewRuleWarning","Overview ruler marker color for warnings.")),TEe=Be("editorOverviewRuler.infoForeground",{dark:gm,light:gm,hc:Wz},E("overviewRuleInfo","Overview ruler marker color for infos.")),Koe=Be("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},E("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Goe=Be("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},E("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Yoe=Be("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},E("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Zoe=Be("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Xoe=Be("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Qoe=Be("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),NEe=Be("editorBracketHighlight.unexpectedBracket.foreground",{dark:new je(new sr(255,18,18,.8)),light:new je(new sr(255,18,18,.8)),hc:new je(new sr(255,50,50,1))},E("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),AEe=Be("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),OEe=Be("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),REe=Be("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),MEe=Be("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),PEe=Be("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),FEe=Be("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),BEe=Be("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),WEe=Be("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),VEe=Be("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),HEe=Be("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),UEe=Be("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),zEe=Be("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},E("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));mo((r,e)=>{const t=r.getColor(Mf);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=r.getColor(p2);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const i=r.getColor(yEe);i&&e.addRule(`.monaco-editor .margin { background-color: ${i}; }`);const o=r.getColor(dEe);o&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${o}; }`);const s=r.getColor(hEe);s&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${s}; }`);const a=r.getColor(fEe);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=r.getColor(gEe);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${l}; }`);const u=r.getColor(Uw);u&&(e.addRule(`.monaco-editor .mtkw { color: ${u} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${u} !important; }`))});class $Ee extends ot{constructor(e){super(),this.textModel=e,this.colorProvider=new Joe,this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(const s of o)i.push({id:`bracket${s.range.toString()}-${s.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(s)},ownerId:0,range:s.range});return i}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new le(1,1,this.textModel.getLineCount(),1),e,t):[]}}class Joe{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}mo((r,e)=>{const t=[Koe,Goe,Yoe,Zoe,Xoe,Qoe],n=new Joe;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(NEe)}; }`);let i=t.map(o=>r.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const s=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});var jEe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},v5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function qEe(){return new lSe}function KEe(r){const e=qEe();return e.acceptChunk(r),e.finish()}function bY(r,e){return(typeof r=="string"?KEe(r):r).create(e)}let AA=0;const GEe=999,YEe=1e4;class ZEe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}const hk=()=>{throw new Error("Invalid change accessor")};let Td=class J_ extends ot{constructor(e,t,n,i=null,o,s,a){super(),this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onWillDispose=this._register(new Fe),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new eLe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new Fe),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Fe),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Fe),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new Fe),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Fe),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new Fe),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new tLe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Fe),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(p=>{this._onDidChangeContentOrInjectedText.fire(p.rawContentChangedEvent)})),AA++,this.id="$model"+AA,this.isForSimpleWidget=t.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=qn.parse("inmemory://model/"+AA):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:u}=bY(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=u,this._options=J_.resolveOptions(this._buffer,t);const d=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new le(1,1,d,this._buffer.getLineLength(d)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=h>J_.LARGE_FILE_SIZE_THRESHOLD||d>J_.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>J_.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||RC,this._languageRegistryListener=this._languageConfigurationService.onDidChange(p=>{p.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=ure(AA),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new CY,this._commandManager=new Gz(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Sf(this._modeService.languageIdCodec),this._tokens2=new i$(this._modeService.languageIdCodec),this._tokenization=new pSe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new lEe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new $Ee(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=VG(e,t.tabSize,t.insertSpaces);return new BO({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new BO({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new zL([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new fM(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=bY(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,o,s,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:s,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new CY,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Vw([new uSe],this._versionId,!1,!1),this._createContentChanged2(new le(1,1,o,s),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Vw([new hSe],this._versionId,!1,!1),this._createContentChanged2(new le(1,1,o,s),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const o=t[n],s=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),u=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=u,o.cachedVersionId=e,o.start=l-a,o.end=u-a,OC(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const o=this._buffer.getLineLength(i);o>=YEe?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new BO({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:s});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=VG(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let i=0;for(let s=0;s<e.length;s++)e.charAt(s)==="	"?i+=t:i++;let o="";if(!n){let s=Math.floor(i/t);i=i%t;for(let a=0;a<s;a++)o+="	"}for(let s=0;s<i;s++)o+=" ";return o}static normalizeIndentation(e,t,n){let i=sc(e);return i===-1&&(i=e.length),J_._normalizeIndentationFromWhitespace(e.substring(0,i),t,n)+e.substring(i)}normalizeIndentation(e){return this._assertNotDisposed(),J_.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(are.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new ZEe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(o<1)o=1,s=1;else if(o>t)o=t,s=this.getLineMaxColumn(o);else if(s<=1)s=1;else{const h=this.getLineMaxColumn(o);s>=h&&(s=h)}const a=e.endLineNumber,l=e.endColumn;let u=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(u<1)u=1,d=1;else if(u>t)u=t,d=this.getLineMaxColumn(u);else if(d<=1)d=1;else{const h=this.getLineMaxColumn(u);d>=h&&(d=h)}return n===o&&i===s&&a===u&&l===d&&e instanceof le&&!(e instanceof ln)?e:new le(o,s,u,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(n===1){const s=this._buffer.getLineCharCode(e,t-2);if(Ca(s))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=this._buffer.getLineCount();if(i<1)return new Ge(1,1);if(i>s)return new Ge(s,this.getLineMaxColumn(s));if(o<=1)return new Ge(i,1);const a=this.getLineMaxColumn(i);if(o>=a)return new Ge(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,o-2);if(Ca(l))return new Ge(i,o-1)}return new Ge(i,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof Ge&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(o,s,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,u=Ca(a),d=Ca(l);return!u&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof le&&!(e instanceof ln)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),o=n.lineNumber,s=n.column,a=i.lineNumber,l=i.column;{const u=s>1?this._buffer.getLineCharCode(o,s-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=Ca(u),p=Ca(d);return!h&&!p?new le(o,s,a,l):o===a&&s===l?new le(o,s-1,a,l-1):h&&p?new le(o,s-1,a,l+1):h?new le(o,s-1,a,l):new le(o,s,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new le(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,o,s,a=GEe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>le.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,p)=>h.startLineNumber-p.startLineNumber||h.startColumn-p.startColumn);const u=[];u.push(l.reduce((h,p)=>le.areIntersecting(h,p)?h.plusRange(p):(u.push(h),p)));let d;if(!n&&e.indexOf(`
`)<0){const p=new rw(e,n,i,o).parseSearchRequest();if(!p)return[];d=_=>this.findMatchesLineByLine(_,p,s,a)}else d=h=>LA.findMatches(this,new rw(e,n,i,o),h,s,a);return u.map(d).reduce((h,p)=>h.concat(p),[])}findNextMatch(e,t,n,i,o,s){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const u=new rw(e,n,i,o).parseSearchRequest();if(!u)return null;const d=this.getLineCount();let h=new le(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),p=this.findMatchesLineByLine(h,u,s,1);return LA.findNextMatch(this,new rw(e,n,i,o),a,s),p.length>0||(h=new le(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),p=this.findMatchesLineByLine(h,u,s,1),p.length>0)?p[0]:null}return LA.findNextMatch(this,new rw(e,n,i,o),a,s)}findPreviousMatch(e,t,n,i,o,s){this._assertNotDisposed();const a=this.validatePosition(t);return LA.findPreviousMatch(this,new rw(e,n,i,o),a,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof r5?e:new r5(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map(s=>({range:this.validateRange(s.range),text:s.text})),o=!0;if(e)for(let s=0,a=e.length;s<a;s++){let l=e[s],u=!1;for(let d=0,h=i.length;d<h;d++){let p=i[d].range,_=p.startLineNumber>l.endLineNumber,C=l.startLineNumber>p.endLineNumber;if(!_&&!C){u=!0;break}}if(!u){o=!1;break}}if(o)for(let s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){let l=this._trimAutoWhitespaceLines[s],u=this.getLineMaxColumn(l),d=!0;for(let h=0,p=i.length;h<p;h++){let _=i[h].range,C=i[h].text;if(!(l<_.startLineNumber||l>_.endLineNumber)&&!(l===_.startLineNumber&&_.startColumn===u&&_.isEmpty()&&C&&C.length>0&&C.charAt(0)===`
`)&&!(l===_.startLineNumber&&_.startColumn===1&&_.isEmpty()&&C&&C.length>0&&C.charAt(C.length-1)===`
`)){d=!1;break}}if(d){const h=new le(l,1,l,u);t.push(new r5(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const o=e.map(s=>{const a=this.getPositionAt(s.newPosition),l=this.getPositionAt(s.newEnd);return{range:new le(a.lineNumber,a.column,l.lineNumber,l.column),text:s.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const o=e.map(s=>{const a=this.getPositionAt(s.oldPosition),l=this.getPositionAt(s.oldEnd);return{range:new le(a.lineNumber,a.column,l.lineNumber,l.column),text:s.newText}});this._applyUndoRedoEdits(o,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,o,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),s=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,s.length!==0){for(let u=0,d=s.length;u<d;u++){const h=s[u],[p,_,C]=dS(h.text);this._tokens.acceptEdit(h.range,p,_),this._tokens2.acceptEdit(h.range,p,_,C,h.text.length>0?h.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let u=0,d=s.length;u<d;u++){const h=s[u],[p]=dS(h.text);this._onDidChangeDecorations.fire();const _=h.range.startLineNumber,C=h.range.endLineNumber,S=C-_,x=p,T=Math.min(S,x),k=x-S,M=o-l-k+_,W=M,F=M+x,Q=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Ge(W,1)),this.getOffsetAt(new Ge(F,this.getLineMaxColumn(F))),0),z=ym.fromDecorations(Q),$=new ML(z);for(let G=T;G>=0;G--){const Y=_+G,I=M+G;$.takeFromEndWhile(O=>O.lineNumber>I);const D=$.takeFromEndWhile(O=>O.lineNumber===I);a.push(new aY(Y,this.getLineContent(I),D))}if(T<S){const G=_+T;a.push(new cSe(G+1,C))}if(T<x){const G=new ML(z),Y=_+T,I=x-T,D=o-l-I+Y+1;let O=[],V=[];for(let j=0;j<I;j++){let ne=D+j;V[j]=this.getLineContent(ne),G.takeWhile(re=>re.lineNumber<ne),O[j]=G.takeWhile(re=>re.lineNumber===ne)}a.push(new dSe(Y+1,_+x,V,O))}l+=k}this._emitContentChangedEvent(new Vw(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(i=>new aY(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeContentOrInjectedText.fire(new Ooe(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(o,s)=>this._deltaDecorationsImpl(e,[],[{range:o,options:s}])[0],changeDecoration:(o,s)=>{this._changeDecorationImpl(o,s)},changeDecorationOptions:(o,s)=>{this._changeDecorationOptionsImpl(o,wY(s))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,s)=>o.length===0&&s.length===0?[]:this._deltaDecorationsImpl(e,o,s)},i=null;try{i=t(n)}catch(o){ti(o)}return n.addDecoration=hk,n.changeDecoration=hk,n.changeDecorationOptions=hk,n.removeDecoration=hk,n.deltaDecorations=hk,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:yY[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const o=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,o),i.setOptions(yY[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const o=t[n];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){let o=this.getLineCount(),s=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(a);const u=new le(s,1,a,l),d=this._getDecorationsInRange(u,n,i);return d.push(...this._decorationProvider.getDecorationsInRange(u,n,i)),d}getDecorationsInRange(e,t=0,n=!1){let i=this.validateRange(e);const o=this._getDecorationsInRange(i,t,n);return o.push(...this._decorationProvider.getDecorationsInRange(i,t,n)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return ym.fromDecorations(i).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,o,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),s=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,s,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber)}if(n.options.before||t.before){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}i!==o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),o=t.length;let s=0;const a=n.length;let l=0,u=new Array(a);for(;s<o||l<a;){let d=null;if(s<o){do d=this._decorations[t[s++]];while(!d&&s<o);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){const x=++this._lastDecorationId,T=`${this._instanceId};${x}`;d=new woe(T,0,0),this._decorations[T]=d}const h=n[l],p=this._validateRangeRelaxedNoAllocations(h.range),_=wY(h.options),C=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),S=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);d.ownerId=e,d.reset(i,C,S,p),d.setOptions(_),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(_),this._decorationsTree.insert(d),u[l]=d.id,l++}else d&&delete this._decorations[d.id]}return u}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];let a=0,l=0,u=!1;for(let d=0,h=s.tokens.length;d<h;d++){const p=s.startLineNumber+d;u?(this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[d],!1),l=p):this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[d],!0)&&(u=!0,a=p,l=p)}u&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new Ge(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const i=this.validatePosition(new Ge(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(i,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),o=i.findTokenIndexAtOffset(t.column-1),[s,a]=J_._findLanguageBoundaries(i,o),l=ZR(t.column,this.getLanguageConfiguration(i.getLanguageId(o)).getWordDefinition(),n.substring(s,a),s);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&s===t.column-1){const[u,d]=J_._findLanguageBoundaries(i,o-1),h=ZR(t.column,this.getLanguageConfiguration(i.getLanguageId(o-1)).getWordDefinition(),n.substring(u,d),u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let s=t;s>=0&&e.getLanguageId(s)===n;s--)i=e.getStartOffset(s);let o=e.getLineContent().length;for(let s=t,a=e.getCount();s<a&&e.getLanguageId(s)===n;s++)o=e.getEndOffset(s);return[i,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}static computeIndentLevel(e,t){let n=0,i=0,o=e.length;for(;i<o;){let s=e.charCodeAt(i);if(s===32)n++;else if(s===9)n=n-n%t+t;else break;i++}return i===o?-1:n}_computeIndentLevel(e){return J_.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this._languageId).foldingRules,s=!!(o&&o.offSide);let a=-2,l=-1,u=-2,d=-1;const h=z=>{if(a!==-1&&(a===-2||a>z-1)){a=-1,l=-1;for(let $=z-2;$>=0;$--){let G=this._computeIndentLevel($);if(G>=0){a=$,l=G;break}}}if(u===-2){u=-1,d=-1;for(let $=z;$<i;$++){let G=this._computeIndentLevel($);if(G>=0){u=$,d=G;break}}}};let p=-2,_=-1,C=-2,S=-1;const x=z=>{if(p===-2){p=-1,_=-1;for(let $=z-2;$>=0;$--){let G=this._computeIndentLevel($);if(G>=0){p=$,_=G;break}}}if(C!==-1&&(C===-2||C<z-1)){C=-1,S=-1;for(let $=z;$<i;$++){let G=this._computeIndentLevel($);if(G>=0){C=$,S=G;break}}}};let T=0,k=!0,M=0,W=!0,F=0,Q=0;for(let z=0;k||W;z++){const $=e-z,G=e+z;z>1&&($<1||$<t)&&(k=!1),z>1&&(G>i||G>n)&&(W=!1),z>5e4&&(k=!1,W=!1);let Y=-1;if(k){const D=this._computeIndentLevel($-1);D>=0?(u=$-1,d=D,Y=Math.ceil(D/this._options.indentSize)):(h($),Y=this._getIndentLevelForWhitespaceLine(s,l,d))}let I=-1;if(W){const D=this._computeIndentLevel(G-1);D>=0?(p=G-1,_=D,I=Math.ceil(D/this._options.indentSize)):(x(G),I=this._getIndentLevelForWhitespaceLine(s,_,S))}if(z===0){Q=Y;continue}if(z===1){if(G<=i&&I>=0&&Q+1===I){k=!1,T=G,M=G,F=I;continue}if($>=1&&Y>=0&&Y-1===Q){W=!1,T=$,M=$,F=Y;continue}if(T=e,M=e,F=Q,F===0)return{startLineNumber:T,endLineNumber:M,indent:F}}k&&(Y>=F?T=$:k=!1),W&&(I>=F?M=G:W=!1)}return{startLineNumber:T,endLineNumber:M,indent:F}}getLinesBracketGuides(e,t,n,i){var o,s,a,l,u;const d=[],h=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new le(e,1,t,this.getLineMaxColumn(t)));let p;if(n&&h.length>0){const T=e<=n.lineNumber&&n.lineNumber<=t?h.filter(k=>le.strictContainsPosition(k.range,n)):this._bracketPairColorizer.getBracketPairsInRange(le.fromPositions(n));p=(o=xbe(T,k=>k.range.startLineNumber!==k.range.endLineNumber))===null||o===void 0?void 0:o.range}const _=new ML(h),C=new Array,S=new Array,x=new ese;for(let T=e;T<=t;T++){let k=new Array;S.length>0&&(k=k.concat(S),S.length=0),d.push(k);for(const W of _.takeWhile(F=>F.openingBracketRange.startLineNumber<=T)||[]){if(W.range.startLineNumber===W.range.endLineNumber)continue;const F=Math.min(this.getVisibleColumnFromPosition(W.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(s=W.closingBracketRange)===null||s===void 0?void 0:s.getStartPosition())!==null&&a!==void 0?a:W.range.getEndPosition()),W.minVisibleColumnIndentation+1);let Q=!1;W.closingBracketRange&&sc(this.getLineContent(W.closingBracketRange.startLineNumber))<W.closingBracketRange.startColumn-1&&(Q=!0);const z=W.openingBracketRange.getStartPosition(),$=(u=(l=W.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&u!==void 0?u:W.range.getEndPosition();W.closingBracketRange===void 0?C[W.nestingLevel]=null:C[W.nestingLevel]={nestingLevel:W.nestingLevel,guideVisibleColumn:F,start:z,visibleStartColumn:this.getVisibleColumnFromPosition(z),end:$,visibleEndColumn:this.getVisibleColumnFromPosition($),bracketPair:W,renderHorizontalEndLineAtTheBottom:Q}}for(const W of C){if(!W)continue;const F=p&&W.bracketPair.range.equalsRange(p),Q=x.getInlineClassNameOfLevel(W.nestingLevel)+(i.highlightActive&&F?" "+x.activeClassName:"");(F&&i.horizontalGuides!==Bw.Disabled||i.includeInactive&&i.horizontalGuides===Bw.Enabled)&&(W.start.lineNumber===T&&W.guideVisibleColumn<W.visibleStartColumn&&k.push(new hL(W.guideVisibleColumn,Q,new G9(!1,W.start.column))),W.end.lineNumber===T+1&&W.guideVisibleColumn<W.visibleEndColumn&&S.push(new hL(W.guideVisibleColumn,Q,new G9(!W.renderHorizontalEndLineAtTheBottom,W.end.column))))}let M=Number.MAX_SAFE_INTEGER;for(let W=C.length-1;W>=0;W--){const F=C[W];if(!F)continue;const Q=i.highlightActive&&p&&F.bracketPair.range.equalsRange(p),z=x.getInlineClassNameOfLevel(F.nestingLevel)+(Q?" "+x.activeClassName:"");(Q||i.includeInactive)&&F.renderHorizontalEndLineAtTheBottom&&F.end.lineNumber===T+1&&S.push(new hL(F.guideVisibleColumn,z,null)),!(F.end.lineNumber<=T||F.start.lineNumber>=T)&&(F.guideVisibleColumn>=M&&!Q||(M=F.guideVisibleColumn,(Q||i.includeInactive)&&k.push(new hL(F.guideVisibleColumn,z,null))))}k.sort((W,F)=>W.visibleColumn-F.visibleColumn)}return d}getVisibleColumnFromPosition(e){return ho.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(i&&i.offSide);let s=new Array(t-e+1),a=-2,l=-1,u=-2,d=-1;for(let h=e;h<=t;h++){let p=h-e;const _=this._computeIndentLevel(h-1);if(_>=0){a=h-1,l=_,s[p]=Math.ceil(_/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let C=h-2;C>=0;C--){let S=this._computeIndentLevel(C);if(S>=0){a=C,l=S;break}}}if(u!==-1&&(u===-2||u<h-1)){u=-1,d=-1;for(let C=h;C<n;C++){let S=this._computeIndentLevel(C);if(S>=0){u=C,d=S;break}}}s[p]=this._getIndentLevelForWhitespaceLine(o,l,d)}return s}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return XEe(this.getLineContent(e))+1}};Td.MODEL_SYNC_LIMIT=50*1024*1024;Td.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Td.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Td.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Du.tabSize,indentSize:Du.indentSize,insertSpaces:Du.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Du.trimAutoWhitespace,largeFileOptimizations:Du.largeFileOptimizations,bracketPairColorizationOptions:Du.bracketPairColorizationOptions};Td=jEe([v5(4,C2),v5(5,Bl),v5(6,b2)],Td);function XEe(r){let e=0;for(const t of r)if(t===" "||t==="	")e++;else break;return e}class ese{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function b5(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function C5(r){return!!r.options.after||!!r.options.before}class CY{constructor(){this._decorationsTree0=new o5,this._decorationsTree1=new o5,this._injectedTextDecorationsTree=new o5}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o){const s=e.getVersionId(),a=this._intervalSearch(t,n,i,o,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,o){const s=this._decorationsTree0.intervalSearch(e,t,n,i,o),a=this._decorationsTree1.intervalSearch(e,t,n,i,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o);return s.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i){const o=e.getVersionId(),s=this._search(t,n,i,o);return this._ensureNodesHaveRanges(e,s)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const o=this._decorationsTree0.search(e,t,i),s=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return o.concat(s).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){C5(e)?this._injectedTextDecorationsTree.insert(e):b5(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){C5(e)?this._injectedTextDecorationsTree.delete(e):b5(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){C5(e)?this._injectedTextDecorationsTree.resolveNode(e,t):b5(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function $1(r){return r.replace(/[^a-z0-9\-_]/gi," ")}class tse{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class QEe extends tse{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:kd.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class JEe extends tse{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?je.fromHex(e):t.getColor(e.id)}}class qT{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof qT?e:new qT(e)}}class pi{constructor(e){var t;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?$1(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new QEe(e.overviewRuler):null,this.minimap=e.minimap?new JEe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?$1(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?$1(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?$1(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?$1(e.marginClassName):null,this.inlineClassName=e.inlineClassName?$1(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?$1(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?$1(e.afterContentClassName):null,this.after=e.after?qT.from(e.after):null,this.before=e.before?qT.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1}static register(e){return new pi(e)}static createDynamic(e){return new pi(e)}}pi.EMPTY=pi.register({description:"empty"});const yY=[pi.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),pi.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),pi.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),pi.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function wY(r){return r instanceof pi?r:pi.createDynamic(r)}class eLe extends ot{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Fe),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class tLe extends ot{constructor(){super(),this._fastEmitter=this._register(new Fe),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Fe),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const nLe=()=>!0,SY=()=>!1,iLe=r=>r===" "||r==="	";class zg{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const i=n.options,o=i.get(130);this.readOnly=i.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=i.get(103),this.lineHeight=i.get(58),this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=i.get(115),this.wordSeparators=i.get(116),this.emptySelectionClipboard=i.get(32),this.copyWithSyntaxHighlighting=i.get(21),this.multiCursorMergeOverlapping=i.get(68),this.multiCursorPaste=i.get(70),this.autoClosingBrackets=i.get(5),this.autoClosingQuotes=i.get(8),this.autoClosingDelete=i.get(6),this.autoClosingOvertype=i.get(7),this.autoSurround=i.get(11),this.autoIndent=i.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:zg._getShouldAutoClose(e,this.autoClosingQuotes),bracket:zg._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=fr.getAutoClosingPairs(e);let s=zg._getSurroundingPairs(e);if(s)for(const a of s)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(130)||e.hasChanged(116)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(115)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=zg._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Td.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return fr.getElectricCharacters(e)}catch(t){return ti(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return iLe;case"languageDefined":return zg._getLanguageDefinedShouldAutoClose(e);case"always":return nLe;case"never":return SY}}static _getLanguageDefinedShouldAutoClose(e){try{const t=fr.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return ti(t),SY}}static _getSurroundingPairs(e){try{return fr.getSurroundingPairs(e)}catch(t){return ti(t),null}}}class cl{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=cl._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new cl(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Ge(t,n),i):new cl(new le(t,n,t,n),i,new Ge(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?ln.fromPositions(e.getStartPosition(),t):ln.fromPositions(e.getEndPosition(),t)}}class EY{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}class rLe{constructor(e){this.modelState=e,this.viewState=null}}class oLe{constructor(e){this.modelState=null,this.viewState=e}}let Ni=class nse{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new rLe(e)}static fromViewState(e){return new oLe(e)}static fromModelSelection(e){const t=ln.liftSelection(e),n=new cl(le.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return nse.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class md{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function oL(r){return r==="'"||r==='"'||r==="`"}class KT{static whitespaceVisibleColumn(e,t,n){const i=e.length;let o=0,s=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[s,a,o];switch(o%n===0&&(s=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=ho.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===i?[s,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const o=e.length,[s,a,l]=KT.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let u;switch(i){case 0:u=!0;break;case 1:u=!1;break;case 2:if(l%n===0)return t;u=l%n<=n/2;break}if(u){if(s===-1)return-1;let p=a;for(let _=s;_<o;++_){if(p===a+n)return s;switch(e.charCodeAt(_)){case 32:p+=1;break;case 9:p=ho.nextRenderTabStop(p,n);break;default:return-1}}return p===a+n?s:-1}const d=ho.nextRenderTabStop(l,n);let h=l;for(let p=t;p<o;p++){if(h===d)return p;switch(e.charCodeAt(p)){case 32:h+=1;break;case 9:h=ho.nextRenderTabStop(h,n);break;default:return-1}}return h===d?o:-1}}class X1{constructor(e=null){this.hitTarget=e,this.type=0}}class eW{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var hw;(function(r){function e(t,n,i){const o=t.getPositionFromDOMInfo(n,i);return o?new eW(o,n,null):new X1(n)}r.createFromDOMInfo=e})(hw||(hw={}));class sLe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Yp{constructor(e,t,n=0,i=null,o=null,s=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,!o&&i&&(o=new le(i.lineNumber,i.column,i.lineNumber,i.column)),this.range=o,this.detail=s}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return Yp.toString(this)}}class Og{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class gx{constructor(e,t,n){this.model=e.model;const i=e.configuration.options;this.layoutInfo=i.get(130),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(58),this.stickyTabStops=i.get(103),this.typicalHalfwidthCharacterWidth=i.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return gx.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,o=e.model.getLineCount();let s=null,a,l=null;return n.afterLineNumber!==o&&(l=new Ge(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new Ge(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=s:s===null?a=l:t<i?a=s:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.model.getLineCount(),o=this._context.model.getLineMaxColumn(i);return{range:new le(i,o,i,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new le(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return gx._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class aLe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Ql._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class d$ extends aLe{constructor(e,t,n,i){super(e,t,n),this._ctx=e,i?(this.target=i,this.targetPath=Fv.collect(i,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,i=null){let o=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(o=ho.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new Yp(this.target,e,o,t,n,i)}withTarget(e){return new d$(this._ctx,this.editorPos,this.pos,e)}}const LY={isAfterLines:!0};function y5(r){return{isAfterLines:!1,horizontalDistanceToText:r}}class Ql{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Fv.collect(t,this._viewHelper.viewDomNode);return!!(Og.isChildOfContentWidgets(n)||Og.isChildOfOverflowingContentWidgets(n)||Og.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i){const o=new gx(this._context,this._viewHelper,e),s=new d$(o,t,n,i);try{return Ql._createMouseTarget(o,s,!1)}catch{return s.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const s=Ql._doHitTest(e,t);return s.type===1?Ql.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}const i=t;let o=null;return o=o||Ql._hitTestContentWidget(e,i),o=o||Ql._hitTestOverlayWidget(e,i),o=o||Ql._hitTestMinimap(e,i),o=o||Ql._hitTestScrollbarSlider(e,i),o=o||Ql._hitTestViewZone(e,i),o=o||Ql._hitTestMargin(e,i),o=o||Ql._hitTestViewCursor(e,i),o=o||Ql._hitTestTextArea(e,i),o=o||Ql._hitTestViewLines(e,i,n),o=o||Ql._hitTestScrollbar(e,i),o||t.fulfill(0)}static _hitTestContentWidget(e,t){if(Og.isChildOfContentWidgets(t.targetPath)||Og.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(Og.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfill(6,i.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const s of n){if(i<s.contentLeft||i>s.contentLeft+s.width)continue;const a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=o&&o<=a+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfill(i,n.position,null,n)}return null}static _hitTestTextArea(e,t){return Og.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let o=Math.abs(t.pos.x-t.editorPos.x);const s={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,i,n.range,s):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,i,n.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,i,n.range,s)))}return null}static _hitTestViewLines(e,t,n){if(!Og.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new Ge(1,1),null,LY);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.model.getLineCount(),s=e.model.getLineMaxColumn(o);return t.fulfill(7,new Ge(o,s),null,LY)}if(n){if(Og.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(o)===0){const a=e.getLineWidth(o),l=y5(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new Ge(o,1),null,l)}const s=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=s){const a=y5(t.mouseContentHorizontalOffset-s),l=new Ge(o,e.model.getLineMaxColumn(o));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const i=Ql._doHitTest(e,t);return i.type===1?Ql.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Og.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new Ge(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Og.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(i);return t.fulfill(11,new Ge(i,o))}}return null}static _hitTestScrollbar(e,t){if(Og.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.model.getLineMaxColumn(n);return t.fulfill(11,new Ge(n,i))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,i=n.get(130),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-i.contentLeft;return Ql._getMouseColumn(o,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,o){const s=i.lineNumber,a=i.column,l=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>l){const x=y5(t.mouseContentHorizontalOffset-l);return t.fulfill(7,i,null,x)}const u=e.visibleRangeForPosition(s,a);if(!u)return t.fulfill(0,i);const d=u.left;if(t.mouseContentHorizontalOffset===d)return t.fulfill(6,i,null,{mightBeForeignElement:!!o});const h=[];if(h.push({offset:u.left,column:a}),a>1){const x=e.visibleRangeForPosition(s,a-1);x&&h.push({offset:x.left,column:a-1})}const p=e.model.getLineMaxColumn(s);if(a<p){const x=e.visibleRangeForPosition(s,a+1);x&&h.push({offset:x.left,column:a+1})}h.sort((x,T)=>x.offset-T.offset);const _=t.pos.toClientCoordinates(),C=n.getBoundingClientRect(),S=C.left<=_.clientX&&_.clientX<=C.right;for(let x=1;x<h.length;x++){const T=h[x-1],k=h[x];if(T.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=k.offset){const M=new le(s,T.column,s,k.column);return t.fulfill(6,i,M,{mightBeForeignElement:!S||!!o})}}return t.fulfill(6,i,null,{mightBeForeignElement:!S||!!o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let s=t.pos.y+(o-t.mouseVerticalOffset);s<=t.editorPos.y&&(s=t.editorPos.y+1),s>=t.editorPos.y+e.layoutInfo.height&&(s=t.editorPos.y+e.layoutInfo.height-1);const a=new jz(t.pos.x,s),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=DC(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=lLe(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new X1;const o=i.startContainer;if(o.nodeType===o.TEXT_NODE){const s=o.parentNode,a=s?s.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===fv.CLASS_NAME?hw.createFromDOMInfo(e,s,i.startOffset):new X1(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const s=o.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===fv.CLASS_NAME?hw.createFromDOMInfo(e,o,o.textContent.length):new X1(o)}return new X1}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,o=i?i.parentNode:null,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===fv.CLASS_NAME?hw.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new X1(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,o=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,s=i?i.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(o===fv.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return hw.createFromDOMInfo(e,l,0)}else if(a===fv.CLASS_NAME)return hw.createFromDOMInfo(e,n.offsetNode,0)}return new X1(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.getTextModelOptions(),o=KT.atomicPosition(n,e.column-1,i,2);return o!==-1?new Ge(e.lineNumber,o+1):e}static _doHitTest(e,t){let n=new X1;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.model.getInjectedTextAt(n.position),o=e.model.normalizePosition(n.position,2);(i||!o.equals(n.position))&&(n=new eW(o,n.spanNode,i))}return n.type===1&&e.stickyTabStops&&(n=new eW(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function lLe(r,e,t){const n=document.createRange();let i=r.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const o=i.getBoundingClientRect(),s=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=o.left,u=0,d;if(e>o.left+o.width)u=a.length;else{const h=xw.getInstance();for(let p=0;p<a.length+1;p++){if(d=h.getCharWidth(a.charAt(p),s)/2,l+=d,e<l){u=p;break}l+=d}}n.setStart(i.firstChild,u),n.setEnd(i.firstChild,u)}return n}class xw{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return xw._INSTANCE||(xw._INSTANCE=new xw),xw._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const s=i.measureText(e).width;return this._cache[n]=s,s}}xw._INSTANCE=null;function vM(r){return function(e,t){let n=!1;return r&&(n=r.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class hS extends m2{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Ql(this._context,n),this._mouseDownOperation=this._register(new uLe(this._context,this.viewController,this.viewHelper,(s,a)=>this._createMouseTarget(s,a),s=>this._getMouseColumn(s))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(130).height;const i=new cye(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,s=>this._onContextMenu(s,!0))),this._register(i.onMouseMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),vM(this.mouseTargetFactory),hS.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onMouseUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)));const o=s=>{if(this.viewController.emitMouseWheel(s),!this._context.configuration.options.get(67))return;const a=new rx(s);if(ji?(s.metaKey||s.ctrlKey)&&!s.shiftKey&&!s.altKey:s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey){const u=Gb.getZoomLevel(),d=a.deltaY>0?1:-1;Gb.setZoomLevel(u+d),a.preventDefault(),a.stopPropagation()}};this._register(kt(this.viewHelper.viewDomNode,In.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(130)){const t=this._context.configuration.options.get(130).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new aoe(e,t).toPageCoordinates(),o=loe(this.viewHelper.viewDomNode);return i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=DC(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,i=t.type===2||t.type===3||t.type===4,o=t.type===3,s=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let u=e.leftButton||e.middleButton;ji&&e.leftButton&&e.ctrlKey&&(u=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||o&&s))d(),this._mouseDownOperation.start(t.type,e);else if(i)e.preventDefault();else if(a){const h=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}hS.MOUSE_MOVE_MINIMUM_TIME=100;class uLe extends ot{constructor(e,t,n,i,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new hye(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new uc),this._mouseState=new x4,this._currentSelection=new ln(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const i=this._context.configuration.options;if(!i.get(80)&&i.get(31)&&!i.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,vM(null),o=>this._onMouseDownThenMove(o),o=>{const s=this._findMousePosition(this._lastMouseEvent,!0);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:s?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,vM(null),o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,i=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=gx.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return new Yp(null,13,o,d)}const u=i.getLineNumberAtVerticalOffset(a);return new Yp(null,13,o,new Ge(u,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+(e.posy-t.y),l=gx.getZoneAtCoord(this._context,a);if(l){const d=this._helpPositionJumpOverViewZone(l);if(d)return new Yp(null,13,o,d)}const u=i.getLineNumberAtVerticalOffset(a);return new Yp(null,13,o,new Ge(u,n.getLineMaxColumn(u)))}const s=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new Yp(null,13,o,new Ge(s,1)):e.posx>t.x+t.width?new Yp(null,13,o,new Ge(s,n.getLineMaxColumn(s))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const s=this._helpPositionJumpOverViewZone(i.detail);if(s)return new Yp(i.element,i.type,i.mouseColumn,s,null,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new Ge(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class x4{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>x4.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}x4.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var jg;(function(r){r.text="text/plain",r.binary="application/octet-stream",r.unknown="application/unknown",r.markdown="text/markdown",r.latex="text/latex"})(jg||(jg={}));let zw=[],h$=[],bM=[];function OA(r,e=!1){const t=cLe(r);zw.push(t),t.userConfigured?bM.push(t):h$.push(t),e&&!t.userConfigured&&zw.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function cLe(r){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:r.userConfigured,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?Ioe(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(la.sep)>=0:!1}}function dLe(r){r?(zw=zw.filter(e=>!e.userConfigured),bM=[]):(zw=[],h$=[],bM=[])}function hLe(r,e){let t;if(r)switch(r.scheme){case Si.file:t=r.fsPath;break;case Si.data:t=AC.parseMetaData(r).get(AC.META_DATA_LABEL);break;default:t=r.path}if(!t)return[jg.unknown];t=t.toLowerCase();const n=Aw(t),i=xY(t,n,bM);if(i)return[i,jg.text];const o=xY(t,n,h$);if(o)return[o,jg.text];if(e){const s=fLe(e);if(s)return[s,jg.text]}return[jg.unknown]}function xY(r,e,t){var n;let i=null,o=null,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!o||l.filepattern.length>o.filepattern.length)){const u=l.filepatternOnPath?r:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,u)&&(o=l)}l.extension&&(!s||l.extension.length>s.extension.length)&&e.endsWith(l.extensionLowercase)&&(s=l)}return i?i.mime:o?o.mime:s?s.mime:null}function fLe(r){if(xz(r)&&(r=r.substr(1)),r.length>0)for(let e=zw.length-1;e>=0;e--){const t=zw[e];if(!t.firstline)continue;const n=r.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class Va{constructor(e,t,n,i,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=o}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new Va(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Va(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)i++;return[e,n*t.length,i]}static selectedText(e){return new Va(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let i=e.value,o=e.selectionStart,s=e.selectionEnd,a=t.value,l=t.selectionStart,u=t.selectionEnd;const d=i.substring(s),h=a.substring(u),p=HR(d,h);a=a.substring(0,a.length-p),i=i.substring(0,i.length-p);const _=i.substring(0,o),C=a.substring(0,l),S=ax(_,C);if(a=a.substring(S),i=i.substring(S),l-=S,o-=S,u-=S,s-=S,n&&l===u&&i.length>0){let T=null;if(l===a.length?a.startsWith(i)&&(T=a.substring(i.length)):a.endsWith(i)&&(T=a.substring(0,a.length-i.length)),T!==null&&T.length>0&&(/\uFE0F/.test(T)||Y0e(T)))return{text:T,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===u){if(i===a&&o===0&&s===i.length&&l===a.length&&a.indexOf(`
`)===-1&&X0e(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const T=_.length-S;return{text:a,replacePrevCharCnt:T,replaceNextCharCnt:0,positionDelta:0}}const x=s-o;return{text:a,replacePrevCharCnt:x,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(ax(e.value,t.value),e.selectionEnd),i=Math.min(HR(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-i),s=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:s,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-s.length}}}Va.EMPTY=new Va("",0,0,null,null);class mL{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,o=n+t;return new le(i,1,o+1,1)}static fromEditorSelection(e,t,n,i,o){const s=mL._getPageOfLine(n.startLineNumber,i),a=mL._getRangeForPage(s,i),l=mL._getPageOfLine(n.endLineNumber,i),u=mL._getRangeForPage(l,i),d=a.intersectRanges(new le(1,1,n.startLineNumber,n.startColumn));let h=t.getValueInRange(d,1);const p=t.getLineCount(),_=t.getLineMaxColumn(p),C=u.intersectRanges(new le(n.endLineNumber,n.endColumn,p,_));let S=t.getValueInRange(C,1),x;if(s===l||s+1===l)x=t.getValueInRange(n,1);else{const T=a.intersectRanges(n),k=u.intersectRanges(n);x=t.getValueInRange(T,1)+String.fromCharCode(8230)+t.getValueInRange(k,1)}return o&&(h.length>500&&(h=h.substring(h.length-500,h.length)),S.length>500&&(S=S.substring(0,500)),x.length>2*500&&(x=x.substring(0,500)+String.fromCharCode(8230)+x.substring(x.length-500,x.length))),new Va(h+x+S,h.length,h.length+x.length,new Ge(n.startLineNumber,n.startColumn),new Ge(n.endLineNumber,n.endColumn))}}var CM;(function(r){r.Tap="-monaco-textarea-synthetic-tap"})(CM||(CM={}));const tW={forceCopyWithSyntaxHighlighting:!1};class GT{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}GT.INSTANCE=new GT;class gLe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class pLe extends ot{constructor(e,t,n,i){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new Fe),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Fe),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Fe),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Fe),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Fe),this.onCut=this._onCut.event,this._onPaste=this._register(new Fe),this.onPaste=this._onPaste.event,this._onType=this._register(new Fe),this.onType=this._onType.event,this._onCompositionStart=this._register(new Fe),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Fe),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Fe),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Fe),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Xr(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Xr(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Va.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null,this._nextCommand=0;let o=null;this._register(this._textArea.onKeyDown(s=>{const a=new Oo(s);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(s=>{const a=new Oo(s);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(s=>{const a=new gLe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===s.data&&(o&&o.equals(109)&&(o.code==="ArrowRight"||o.code==="ArrowLeft")||this._browser.isFirefox)){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(this._browser.isAndroid){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._onCompositionStart.fire({revealDeltaColumns:0})})),this._register(this._textArea.onCompositionUpdate(s=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const u=Va.readFromTextArea(this._textArea),d=Va.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionUpdate.fire(s);return}const l=a.handleCompositionUpdate(s.data);this._textAreaState=Va.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(s)})),this._register(this._textArea.onCompositionEnd(s=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const u=Va.readFromTextArea(this._textArea),d=Va.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(s.data);this._textAreaState=Va.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Va.readFromTextArea(this._textArea),l=Va.deduceInput(this._textAreaState,a,this._OS===2);if(l.replacePrevCharCnt===0&&l.text.length===1&&Ca(l.text.charCodeAt(0)))return;this._textAreaState=a;const u=l.text===""&&l.replacePrevCharCnt===0&&l.replaceNextCharCnt===0&&l.positionDelta===0;this._nextCommand===0?u||this._onType.fire(l):(u||this._firePaste(l.text,null),this._nextCommand=0)})),this._register(this._textArea.onCut(s=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(s),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(s=>{this._ensureClipboardGetsEditorSelection(s)})),this._register(this._textArea.onPaste(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),fk.canUseTextData(s)){const[a,l]=fk.getTextData(s);a!==""&&this._firePaste(a,l)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",Va.EMPTY),this._nextCommand=1})),this._register(this._textArea.onFocus(()=>{const s=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!s&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return kt(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const o=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const u=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(u[0],u[1],u[2]),h=this._textAreaState.deduceEditorPosition(l),p=this._host.deduceModelPosition(h[0],h[1],h[2]),_=new ln(d.lineNumber,d.column,p.lineNumber,p.column);this._onSelectionChangeRequest.fire(_)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(fk.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(GT.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),!fk.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",Va.selectedText(t.text));return}fk.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=GT.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class fk{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(jg.text);let n=null;const i=e.clipboardData.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,i){if(e.clipboardData){e.clipboardData.setData(jg.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(i)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class mLe extends ot{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(Up(this._actual,"keydown")).event,this.onKeyUp=this._register(Up(this._actual,"keyup")).event,this.onCompositionStart=this._register(Up(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Up(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Up(this._actual,"compositionend")).event,this.onInput=this._register(Up(this._actual,"input")).event,this.onCut=this._register(Up(this._actual,"cut")).event,this.onCopy=this._register(Up(this._actual,"copy")).event,this.onPaste=this._register(Up(this._actual,"paste")).event,this.onFocus=this._register(Up(this._actual,"focus")).event,this.onBlur=this._register(Up(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Fe),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(kt(this._actual,CM.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=DC(this._actual);return e?e.activeElement===this._actual:fz(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let o=null;const s=DC(i);s?o=s.activeElement:o=document.activeElement;const a=o===i,l=i.selectionStart,u=i.selectionEnd;if(a&&l===t&&u===n){Id&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Id&&window.parent!==window&&i.focus();return}try{const d=S0e(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),E0e(i,d)}catch{}}}class _Le extends hS{constructor(e,t,n){super(e,t,n),this._register(Or.addTarget(this.viewHelper.linesContentDomNode)),this._register(kt(this.viewHelper.linesContentDomNode,co.Tap,o=>this.onTap(o))),this._register(kt(this.viewHelper.linesContentDomNode,co.Change,o=>this.onChange(o))),this._register(kt(this.viewHelper.linesContentDomNode,co.Contextmenu,o=>this._onContextMenu(new uS(o,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(kt(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const s=o.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new dye(this.viewHelper.viewDomNode);this._register(i.onPointerMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),vM(this.mouseTargetFactory),hS.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new uS(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class vLe extends hS{constructor(e,t,n){super(e,t,n),this._register(Or.addTarget(this.viewHelper.linesContentDomNode)),this._register(kt(this.viewHelper.linesContentDomNode,co.Tap,i=>this.onTap(i))),this._register(kt(this.viewHelper.linesContentDomNode,co.Change,i=>this.onChange(i))),this._register(kt(this.viewHelper.linesContentDomNode,co.Contextmenu,i=>this._onContextMenu(new uS(i,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new uS(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(CM.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class bLe extends ot{constructor(e,t,n){super(),Av&&$P.pointerEvents?this.handler=this._register(new _Le(e,t,n)):window.TouchEvent?this.handler=this._register(new vLe(e,t,n)):this.handler=this._register(new hS(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class sD extends m2{}class px extends sD{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Ge(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(130);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ge(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Pc?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o='<div class="'+px.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),a=[];for(let l=n;l<=i;l++){const u=l-n;if(!this._renderFinalNewline&&l===s&&this._context.model.getLineLength(l)===0){a[u]="";continue}const d=this._getLineRenderLineNumber(l);d?l===this._activeLineNumber?a[u]='<div class="active-line-number '+px.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+d+"</div>":a[u]=o+d+"</div>":a[u]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}px.CLASS_NAME="line-numbers";mo((r,e)=>{const t=r.getColor(joe);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=r.getColor(mEe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class fS extends jf{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=tr(document.createElement("div")),this._domNode.setClassName(fS.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=tr(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(fS.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}fS.CLASS_NAME="glyph-margin";fS.OUTER_CLASS_NAME="margin";const $w="monaco-mouse-cursor-text";class f${constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new f$(this.top,this.left,e)}}const gk=Id;class CLe extends jf{constructor(e,t,n){super(e),this._primaryCursorPosition=new Ge(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,o=i.get(130);this._setAccessibilityOptions(i),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=i.get(43),this._lineHeight=i.get(58),this._emptySelectionClipboard=i.get(32),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new ln(1,1,1,1)],this._modelSelections=[new ln(1,1,1,1)],this._lastRenderPosition=null,this.textArea=tr(document.createElement("textarea")),Fv.write(this.textArea,6),this.textArea.setClassName(`inputarea ${$w}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",E("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(30)&&i.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=tr(document.createElement("div")),this.textAreaCover.setPosition("absolute");const s={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:u=>this._context.model.getLineMaxColumn(u),getValueInRange:(u,d)=>this._context.model.getValueInRange(u,d)},a={getDataToCopy:u=>{const d=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Ol),h=this._context.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),_=Array.isArray(d)?d:null,C=Array.isArray(d)?d.join(h):d;let S,x=null;if(u&&(tW.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&C.length<65536)){const T=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);T&&(S=T.html,x=T.mode)}return{isFromEmptySelection:p,multicursorText:_,text:C,html:S,mode:x}},getScreenReaderContent:u=>{if(this._accessibilitySupport===1){if(ji){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition();let p=this._getWordBeforePosition(h);if(p.length===0&&(p=this._getCharacterBeforePosition(h)),p.length>0)return new Va(p,p.length,p.length,h,h)}}return Va.EMPTY}if(Tie){const d=this._selections[0];if(d.isEmpty()){const h=d.getStartPosition(),[p,_]=this._getAndroidWordAtPosition(h);if(p.length>0)return new Va(p,_,_,h,h)}return Va.EMPTY}return mL.fromEditorSelection(u,s,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(u,d,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(u,d,h)},l=this._register(new mLe(this.textArea.domNode));this._textAreaInput=this._register(new pLe(a,l,xf,Mve)),this._register(this._textAreaInput.onKeyDown(u=>{this._viewController.emitKeyDown(u)})),this._register(this._textAreaInput.onKeyUp(u=>{this._viewController.emitKeyUp(u)})),this._register(this._textAreaInput.onPaste(u=>{let d=!1,h=null,p=null;u.metadata&&(d=this._emptySelectionClipboard&&!!u.metadata.isFromEmptySelection,h=typeof u.metadata.multicursorText<"u"?u.metadata.multicursorText:null,p=u.metadata.mode),this._viewController.paste(u.text,d,h,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(u=>{u.replacePrevCharCnt||u.replaceNextCharCnt||u.positionDelta?this._viewController.compositionType(u.text,u.replacePrevCharCnt,u.replaceNextCharCnt,u.positionDelta):this._viewController.type(u.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(u=>{this._viewController.setSelection(u)})),this._register(this._textAreaInput.onCompositionStart(u=>{const d=this._selections[0].startLineNumber,h=this._selections[0].startColumn+u.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new le(d,h,d,h),0,1);const p=this._viewHelper.visibleRangeForPositionRelativeToEditor(d,h);p&&(this._visibleTextArea=new f$(this._context.viewLayout.getVerticalOffsetForLineNumber(d),p.left,gk?0:1),this.textArea.domNode.scrollLeft=0,this._render()),this.textArea.setClassName(`inputarea ${$w} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(u=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(yLe(u.data,this._fontInfo)),this.textArea.domNode.scrollLeft=0,this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${$w}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),i=zf(t);let o=!0,s=e.column,a=!0,l=e.column,u=0;for(;u<50&&(o||a);){if(o&&s<=1&&(o=!1),o){const d=n.charCodeAt(s-2);i.get(d)!==0?o=!1:s--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}u++}return[n.substring(s-1,l-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=zf(this._context.configuration.options.get(116));let i=e.column,o=0;for(;i>1;){const s=t.charCodeAt(i-2);if(n.get(s)!==0||o>50)return t.substring(i-1,e.column-1);o++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Ca(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?E("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Pc?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Dm.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new Ge(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(ji){this._renderInsideEditor(this._primaryCursorPosition,t,e,gk?0:1,this._lineHeight),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._renderInsideEditor(this._primaryCursorPosition,t,e,gk?0:1,gk?0:1)}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderInsideEditor(e,t,n,i,o){this._lastRenderPosition=e;const s=this.textArea,a=this.textAreaCover;ac.applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(n),s.setWidth(i),s.setHeight(o),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(ac.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),gk){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+fS.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+px.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function yLe(r,e){const n=document.createElement("canvas").getContext("2d");n.font=wLe(e);const i=n.measureText(r);return Id?i.width+2:i.width}function wLe(r){return SLe("normal",r.fontWeight,r.fontSize,r.lineHeight,r.fontFamily)}function SLe(r,e,t,n,i){return`${r} normal ${e} ${t}px / ${n}px ${i}`}class fw{static columnSelect(e,t,n,i,o,s){let a=Math.abs(o-n)+1,l=n>o,u=i>s,d=i<s,h=[];for(let p=0;p<a;p++){let _=n+(l?-p:p),C=ho.columnFromVisibleColumn2(e,t,_,i),S=ho.columnFromVisibleColumn2(e,t,_,s),x=ho.visibleColumnFromColumn2(e,t,new Ge(_,C)),T=ho.visibleColumnFromColumn2(e,t,new Ge(_,S));d&&(x>s||T<i)||u&&(T>i||x<s)||h.push(new cl(new le(_,C,_,C),0,new Ge(_,S),0))}if(h.length===0)for(let p=0;p<a;p++){const _=n+(l?-p:p),C=t.getLineMaxColumn(_);h.push(new cl(new le(_,C,_,C),0,new Ge(_,C),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:o,toVisualColumn:s}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,fw.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=o;l<=s;l++){const u=t.getLineMaxColumn(l),d=ho.visibleColumnFromColumn2(e,t,new Ge(l,u));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const o=i?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const o=i?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}}class Il{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ln.fromPositions(i.getEndPosition())}}class ELe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return ln.fromRange(i,0)}}class RA{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ln.fromPositions(i.getStartPosition())}}class jO{constructor(e,t,n,i,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ln.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class g${constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class w5{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class dr{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-q0e(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Ge(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=KT.atomicPosition(o,t.column-1,n,0);if(s!==-1&&s+1>=i)return new Ge(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?dr.leftPositionAtomicSoftTabs(t,n,e.tabSize):dr.leftPosition(t,n);return new w5(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let s,a;if(n.hasSelection()&&!i)s=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(o-1)),u=t.normalizePosition(dr.clipPositionColumn(l,t),0),d=dr.left(e,t,u);s=d.lineNumber,a=d.column}return n.move(i,s,a,0)}static clipPositionColumn(e,t){return new Ge(e.lineNumber,dr.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+UR(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new Ge(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){const s=e.getLineContent(t),a=KT.atomicPosition(s,n-1,i,1);if(a!==-1)return new Ge(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?dr.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):dr.rightPosition(t,n.lineNumber,n.column);return new w5(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let s,a;if(n.hasSelection()&&!i)s=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,o-1),u=t.normalizePosition(dr.clipPositionColumn(l,t),1),d=dr.right(e,t,u);s=d.lineNumber,a=d.column}return n.move(i,s,a,0)}static vertical(e,t,n,i,o,s,a){const l=ho.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+o,u=t.getLineCount(),d=n===1&&i===1,h=n===u&&i===t.getLineMaxColumn(n),p=s<n?d:h;return n=s,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>u?(n=u,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=ho.columnFromVisibleColumn2(e,t,n,l),p?o=0:o=l-ho.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),new w5(n,i,o)}static down(e,t,n,i,o,s,a){return this.vertical(e,t,n,i,o,n+s,a)}static moveDown(e,t,n,i,o){let s,a;n.hasSelection()&&!i?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let l=dr.down(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let i=n.selection,o=dr.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=dr.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new cl(new le(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Ge(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,i,o,s,a){return this.vertical(e,t,n,i,o,n-s,a)}static moveUp(e,t,n,i,o){let s,a;n.hasSelection()&&!i?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let l=dr.up(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let i=n.selection,o=dr.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=dr.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new cl(new le(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Ge(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){const o=t.getLineCount();let s=n.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,i){let o=n.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,l;return n.position.column===a?l=s:l=a,n.move(i,o,l,0)}static moveToEndOfLine(e,t,n,i,o){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(i,s,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return n.move(i,o,s,0)}}class gS{static deleteRight(e,t,n,i){let o=[],s=e!==3;for(let a=0,l=i.length;a<l;a++){const u=i[a];let d=u;if(d.isEmpty()){let h=u.getPosition(),p=dr.right(t,n,h);d=new le(p.lineNumber,p.column,h.lineNumber,h.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(s=!0),o[a]=new Il(d,"")}return[s,o]}static isAutoClosingPairDelete(e,t,n,i,o,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,u=s.length;l<u;l++){const d=s[l],h=d.getPosition();if(!d.isEmpty())return!1;const p=o.getLineContent(h.lineNumber);if(h.column<2||h.column>=p.length+1)return!1;const _=p.charAt(h.column-2),C=i.get(_);if(!C)return!1;if(oL(_)){if(n==="never")return!1}else if(t==="never")return!1;const S=p.charAt(h.column-1);let x=!1;for(const T of C)T.open===_&&T.close===S&&(x=!0);if(!x)return!1;if(e==="auto"){let T=!1;for(let k=0,M=a.length;k<M;k++){const W=a[k];if(h.lineNumber===W.startLineNumber&&h.column===W.startColumn){T=!0;break}}if(!T)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].getPosition(),l=new le(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[o]=new Il(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,o))return this._runAutoClosingPairDelete(t,n,i);const s=[];let a=e!==2;for(let l=0,u=i.length;l<u;l++){let d=gS.getDeleteRange(i[l],n,t);if(d.isEmpty()){s[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),s[l]=new Il(d,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const o=t.getLineContent(i.lineNumber),s=sc(o),a=s===-1?o.length+1:s+1;if(i.column<=a){const l=ho.visibleColumnFromColumn2(n,t,i),u=ho.prevIndentTabStop(l,n.indentSize),d=ho.columnFromVisibleColumn2(n,t,i.lineNumber,u);return new le(i.lineNumber,d,i.lineNumber,i.column)}}return le.fromPositions(gS.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=tbe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new Ge(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let i=[],o=null;n.sort((s,a)=>Ge.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){const l=n[s];if(l.isEmpty())if(e.emptySelectionClipboard){let u=l.getPosition(),d,h,p,_;u.lineNumber<t.getLineCount()?(d=u.lineNumber,h=1,p=u.lineNumber+1,_=1):u.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==u.lineNumber?(d=u.lineNumber-1,h=t.getLineMaxColumn(u.lineNumber-1),p=u.lineNumber,_=t.getLineMaxColumn(u.lineNumber)):(d=u.lineNumber,h=1,p=u.lineNumber,_=t.getLineMaxColumn(u.lineNumber));let C=new le(d,h,p,_);o=C,C.isEmpty()?i[s]=null:i[s]=new Il(C,"")}else i[s]=null;else i[s]=new Il(l,"")}return new md(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class er{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let o=n.column-2;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===0){if(i===2)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){let o=e.length;for(let s=i;s<o;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return s}return o}static _findNextWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0,o=e.length;for(let s=n.column-1;s<o;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,s-1),s);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,s-1),s);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,s-1),s)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){for(let o=i;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===1||n===1&&a===2||n===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,n,i){let o=n.lineNumber,s=n.column;s===1&&o>1&&(o=o-1,s=t.getLineMaxColumn(o));let a=er._findPreviousWordOnLine(e,t,new Ge(o,s));if(i===0)return new Ge(o,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=er._findPreviousWordOnLine(e,t,new Ge(o,a.start+1))),new Ge(o,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=er._findPreviousWordOnLine(e,t,new Ge(o,a.start+1));return new Ge(o,a?a.start+1:1)}return a&&s<=a.end+1&&(a=er._findPreviousWordOnLine(e,t,new Ge(o,a.start+1))),new Ge(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new Ge(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let s=t.column-1;s>1;s--){const a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a===95&&l!==95)return new Ge(n,s);if(sC(a)&&sv(l))return new Ge(n,s);if(sv(a)&&sv(l)&&s+1<i){const u=o.charCodeAt(s);if(sC(u))return new Ge(n,s)}}return new Ge(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);let l=er._findNextWordOnLine(e,t,new Ge(o,s));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=er._findNextWordOnLine(e,t,new Ge(o,l.end+1))),l?s=l.end+1:s=t.getLineMaxColumn(o);else if(i===3){for(a&&(s=0);l&&(l.wordType===2||l.start+1<=s);)l=er._findNextWordOnLine(e,t,new Ge(o,l.end+1));l?s=l.start+1:s=t.getLineMaxColumn(o)}else l&&!a&&s>=l.start+1&&(l=er._findNextWordOnLine(e,t,new Ge(o,l.end+1))),l?s=l.start+1:s=t.getLineMaxColumn(o);return new Ge(o,s)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new Ge(n+1,1):t;const o=e.getLineContent(n);for(let s=t.column+1;s<i;s++){const a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a!==95&&l===95)return new Ge(n,s);if(sC(a)&&sv(l))return new Ge(n,s);if(sv(a)&&sv(l)&&s+1<i){const u=o.charCodeAt(s);if(sC(u))return new Ge(n,s)}}return new Ge(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,o=Iv(n,i);return o+1<i?new le(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(gS.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new le(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new Ge(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,u=a.column;if(l===1&&u===1)return null;if(s){let h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let d=er._findPreviousWordOnLine(n,i,a);return t===0?d?u=d.start+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l)):(d&&u<=d.end+1&&(d=er._findPreviousWordOnLine(n,i,new Ge(l,d.start+1))),d?u=d.end+1:u>1?u=1:(l--,u=i.getLineMaxColumn(l))),new le(l,u,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new Ge(n.positionLineNumber,n.positionColumn);let o=this._deleteInsideWordWhitespace(t,i);return o||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let s=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,s))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;s+1<i&&this._charAtIsWhitespace(n,s+1);)s++;return new le(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),o=i.length;if(o===0)return n.lineNumber>1?new le(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new le(n.lineNumber,1,n.lineNumber+1,1):new le(n.lineNumber,1,n.lineNumber,1);const s=h=>h.start+1<=n.column&&n.column<=h.end+1,a=(h,p)=>(h=Math.min(h,n.column),p=Math.max(p,n.column),new le(n.lineNumber,h,n.lineNumber,p)),l=h=>{let p=h.start+1,_=h.end+1,C=!1;for(;_-1<o&&this._charAtIsWhitespace(i,_-1);)C=!0,_++;if(!C)for(;p>1&&this._charAtIsWhitespace(i,p-2);)p--;return a(p,_)},u=er._findPreviousWordOnLine(e,t,n);if(u&&s(u))return l(u);const d=er._findNextWordOnLine(e,t,n);return d&&s(d)?l(d):u&&d?a(u.end+1,d.start+1):u?a(u.start+1,u.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=er._moveWordPartLeft(e,n);return new le(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let i=t;i<n;i++){let o=e.charAt(i);if(o!==" "&&o!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new le(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new Ge(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,u=a.column;const d=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===d&&u===h)return null;if(s){let _=this._deleteWordRightWhitespace(i,a);if(_)return _}let p=er._findNextWordOnLine(n,i,a);return t===2?p?u=p.end+1:u<h||l===d?u=h:(l++,p=er._findNextWordOnLine(n,i,new Ge(l,1)),p?u=p.start+1:u=i.getLineMaxColumn(l)):(p&&u>=p.start+1&&(p=er._findNextWordOnLine(n,i,new Ge(l,p.end+1))),p?u=p.start+1:u<h||l===d?u=h:(l++,p=er._findNextWordOnLine(n,i,new Ge(l,1)),p?u=p.start+1:u=i.getLineMaxColumn(l))),new le(l,u,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=er._moveWordPartRight(e,n);return new le(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new le(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=zf(t),o=er._findPreviousWordOnLine(i,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return er._createWordAtPosition(e,n.lineNumber,o);const s=er._findNextWordOnLine(i,e,n);return s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end?er._createWordAtPosition(e,n.lineNumber,s):null}static word(e,t,n,i,o){const s=zf(e.wordSeparators);let a=er._findPreviousWordOnLine(s,t,o),l=er._findNextWordOnLine(s,t,o);if(!i){let _,C;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(_=a.start+1,C=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(_=l.start+1,C=l.end+1):(a?_=a.end+1:_=1,l?C=l.start+1:C=t.getLineMaxColumn(o.lineNumber)),new cl(new le(o.lineNumber,_,o.lineNumber,C),0,new Ge(o.lineNumber,C),0)}let u,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(u=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(u=l.start+1,d=l.end+1):(u=o.column,d=o.column);let h=o.lineNumber,p;if(n.selectionStart.containsPosition(o))p=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){p=u;let _=new Ge(h,p);n.selectionStart.containsPosition(_)&&(p=n.selectionStart.endColumn)}else{p=d;let _=new Ge(h,p);n.selectionStart.containsPosition(_)&&(p=n.selectionStart.startColumn)}return n.move(!0,h,p,0)}}class D4 extends er{static deleteWordPartLeft(e){const t=MA([er.deleteWordLeft(e,0),er.deleteWordLeft(e,2),er._deleteWordPartLeft(e.model,e.selection)]);return t.sort(le.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=MA([er.deleteWordRight(e,0),er.deleteWordRight(e,2),er._deleteWordPartRight(e.model,e.selection)]);return t.sort(le.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=MA([er.moveWordLeft(e,t,n,0),er.moveWordLeft(e,t,n,2),er._moveWordPartLeft(t,n)]);return i.sort(Ge.compare),i[2]}static moveWordPartRight(e,t,n){const i=MA([er.moveWordRight(e,t,n,0),er.moveWordRight(e,t,n,2),er._moveWordPartRight(t,n)]);return i.sort(Ge.compare),i[0]}}function MA(r){return r.filter(e=>!!e)}class ul{static addCursorDown(e,t,n){let i=[],o=0;for(let s=0,a=t.length;s<a;s++){const l=t[s];i[o++]=new Ni(l.modelState,l.viewState),n?i[o++]=Ni.fromModelState(dr.translateDown(e.cursorConfig,e.model,l.modelState)):i[o++]=Ni.fromViewState(dr.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){let i=[],o=0;for(let s=0,a=t.length;s<a;s++){const l=t[s];i[o++]=new Ni(l.modelState,l.viewState),n?i[o++]=Ni.fromModelState(dr.translateUp(e.cursorConfig,e.model,l.modelState)):i[o++]=Ni.fromViewState(dr.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];i[o]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,o=t.modelState.position.column,s=i===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Ni.fromViewState(dr.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Ni.fromModelState(dr.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){const l=t[s];o[s]=this._moveToLineEnd(e,l,n,i)}return o}static _moveToLineEnd(e,t,n,i){const o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),a=o.column===s,l=t.modelState.position,u=e.model.getLineMaxColumn(l.lineNumber),d=s-o.column===u-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return Ni.fromViewState(dr.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return Ni.fromModelState(dr.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){let n=[];for(let i=0,o=t.length;i<o;i++){const s=t[i],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount();let u=s.modelState.selection.endLineNumber,d;u===l?d=e.model.getLineMaxColumn(l):(u++,d=1),n[i]=Ni.fromModelState(new cl(new le(a,1,a,1),0,new Ge(u,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];i[o]=Ni.fromModelState(dr.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];i[o]=Ni.fromModelState(dr.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return Ni.fromModelState(new cl(new le(1,1,1,1),0,new Ge(n,i),0))}static line(e,t,n,i,o){const s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new Ge(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n||!t.modelState.hasSelection()){const u=e.model.getLineCount();let d=s.lineNumber+1,h=1;return d>u&&(d=u,h=e.model.getLineMaxColumn(d)),Ni.fromModelState(new cl(new le(s.lineNumber,1,d,h),0,new Ge(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return Ni.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>l){const u=e.getLineCount();let d=a.lineNumber+1,h=1;return d>u&&(d=u,h=e.getLineMaxColumn(d)),Ni.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,h,0))}else{const u=t.modelState.selectionStart.getEndPosition();return Ni.fromModelState(t.modelState.move(t.modelState.hasSelection(),u.lineNumber,u.column,0))}}static word(e,t,n,i){const o=e.model.validatePosition(i);return Ni.fromModelState(er.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ni(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return Ni.fromViewState(new cl(new le(n,i,n,i),0,new Ge(n,i),0))}static moveTo(e,t,n,i,o){const s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new Ge(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return Ni.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,o,s){switch(n){case 0:return s===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return s===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return s===2?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return s===2?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return s===2?t.map(a=>Ni.fromViewState(dr.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ni.fromModelState(dr.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return s===2?t.map(a=>Ni.fromViewState(dr.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Ni.fromModelState(dr.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){const s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),u=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,u)]}case 14:{let l=[];for(let u=0,d=t.length;u<d;u++){const h=t[u];l[u]=this.findPositionInViewportIfOutside(e,h,s,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){let o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new Ni(t.modelState,t.viewState);{let s;o>n.endLineNumber-1?s=n.endLineNumber-1:o<n.startLineNumber?s=n.startLineNumber:s=o;const a=dr.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return Ni.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(o=>Ni.fromViewState(dr.moveLeft(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[o]=Ni.fromViewState(dr.moveLeft(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveRight(e,t,n,i){return t.map(o=>Ni.fromViewState(dr.moveRight(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineRight(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[o]=Ni.fromViewState(dr.moveRight(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveDownByViewLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){const l=t[s];o[s]=Ni.fromViewState(dr.moveDown(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){const l=t[s];o[s]=Ni.fromModelState(dr.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){const l=t[s];o[s]=Ni.fromViewState(dr.moveUp(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){const l=t[s];o[s]=Ni.fromModelState(dr.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return Ni.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return Ni.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=e.getLineMinColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewCenterColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[o]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewMaxColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=e.getLineMaxColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,u)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.viewState.position.lineNumber,u=e.getLineLastNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,u)}return i}}var yM;(function(r){const e=function(n){if(!Oc(n))return!1;let i=n;return!(!Wf(i.to)||!wd(i.select)&&!nre(i.select)||!wd(i.by)&&!Wf(i.by)||!wd(i.value)&&!iS(i.value))};r.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},r.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case r.RawDirection.Left:i=0;break;case r.RawDirection.Right:i=1;break;case r.RawDirection.Up:i=2;break;case r.RawDirection.Down:i=3;break;case r.RawDirection.PrevBlankLine:i=4;break;case r.RawDirection.NextBlankLine:i=5;break;case r.RawDirection.WrappedLineStart:i=6;break;case r.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case r.RawDirection.WrappedLineColumnCenter:i=8;break;case r.RawDirection.WrappedLineEnd:i=9;break;case r.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case r.RawDirection.ViewPortTop:i=11;break;case r.RawDirection.ViewPortBottom:i=13;break;case r.RawDirection.ViewPortCenter:i=12;break;case r.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let o=0;switch(n.by){case r.RawUnit.Line:o=1;break;case r.RawUnit.WrappedLine:o=2;break;case r.RawUnit.Character:o=3;break;case r.RawUnit.HalfLine:o=4;break}return{direction:i,unit:o,select:!!n.select,value:n.value||1}}r.parse=t})(yM||(yM={}));const S5=Object.create(null);function Ky(r,e){if(e<=0)return"";S5[r]||(S5[r]=["",r]);const t=S5[r];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+r;return t[e]}class Ih{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,o){const s=ho.visibleColumnFromColumn(e,t,n);if(o){const a=Ky(" ",i),u=ho.prevIndentTabStop(s,i)/i;return Ky(a,u)}else{const a="	",u=ho.prevRenderTabStop(s,n)/n;return Ky(a,u)}}static shiftIndent(e,t,n,i,o){const s=ho.visibleColumnFromColumn(e,t,n);if(o){const a=Ky(" ",i),u=ho.nextIndentTabStop(s,i)/i;return Ky(a,u)}else{const a="	",u=ho.nextRenderTabStop(s,n)/n;return Ky(a,u)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:o,indentSize:s,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let u=0,d=0;for(let h=n;h<=i;h++,u=d){d=0;let p=e.getLineContent(h),_=sc(p);if(this._opts.isUnshift&&(p.length===0||_===0)||!l&&!this._opts.isUnshift&&p.length===0)continue;if(_===-1&&(_=p.length),h>1&&ho.visibleColumnFromColumn(p,_+1,o)%s!==0&&e.isCheapToTokenize(h-1)){let x=fr.getEnterAction(this._opts.autoIndent,e,new le(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)));if(x){if(d=u,x.appendText)for(let T=0,k=x.appendText.length;T<k&&d<s&&x.appendText.charCodeAt(T)===32;T++)d++;x.removeText&&(d=Math.max(0,d-x.removeText));for(let T=0;T<d&&!(_===0||p.charCodeAt(_-1)!==32);T++)_--}}if(this._opts.isUnshift&&_===0)continue;let C;this._opts.isUnshift?C=Ih.unshiftIndent(p,_+1,o,s,a):C=Ih.shiftIndent(p,_+1,o,s,a),this._addEditOperation(t,new le(h,1,h,_+1),C),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=_+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const u=a?Ky(" ",s):"	";for(let d=n;d<=i;d++){const h=e.getLineContent(d);let p=sc(h);if(!(this._opts.isUnshift&&(h.length===0||p===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(p===-1&&(p=h.length),!(this._opts.isUnshift&&p===0)))if(this._opts.isUnshift){p=Math.min(p,s);for(let _=0;_<p;_++)if(h.charCodeAt(_)===9){p=_+1;break}this._addEditOperation(t,new le(d,1,d,p+1),"")}else this._addEditOperation(t,new le(d,1,d,1),u),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let i=t.getInverseEditOperations()[0];return new ln(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new ln(n.startLineNumber,i,n.endLineNumber,n.endColumn):new ln(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}}class LLe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new le(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new le(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),i=n[0].range,o=n[1].range;return new ln(i.endLineNumber,i.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class qo{static indent(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=new Ih(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static outdent(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=new Ih(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static shiftIndent(e,t,n){return n=n||1,Ih.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Ih.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){let o=[];for(let s=0,a=n.length;s<a;s++)o[s]=new Il(n[s],i[s]);return new md(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){let s=[];for(let a=0,l=n.length;a<l;a++){const u=n[a];let d=u.getPosition();if(o&&!u.isEmpty()&&(o=!1),o&&i.indexOf(`
`)!==i.length-1&&(o=!1),o){let h=new le(d.lineNumber,1,d.lineNumber,1);s[a]=new g$(h,i,u,!0)}else s[a]=new Il(u,i)}return new md(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,o){if(i||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let s=Mv(n);if(s.length===t.length)return s}return null}static paste(e,t,n,i,o,s){const a=this._distributePasteToCursors(e,n,i,o,s);return a?(n=n.sort(le.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,o)}static _goodIndentForLine(e,t,n){let i=null,o="";const s=fr.getInheritIndentForLine(e.autoIndent,t,n,!1);if(s)i=s.action,o=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Iv(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),u=fr.getEnterAction(e.autoIndent,t,new le(a,l,a,l));u&&(o=u.indentation+u.appendText)}return i&&(i===Ts.Indent&&(o=qo.shiftIndent(e,o)),i===Ts.Outdent&&(o=qo.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,i){let o="",s=n.getStartPosition();if(e.insertSpaces){let a=ho.visibleColumnFromColumn2(e,t,s),l=e.indentSize,u=l-a%l;for(let d=0;d<u;d++)o+=" "}else o="	";return new Il(n,o,i)}static tab(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++){const a=n[o];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let u=this._goodIndentForLine(e,t,a.startLineNumber);u=u||"	";let d=e.normalizeIndentation(u);if(!l.startsWith(d)){i[o]=new Il(new le(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new Ih(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return i}static compositionType(e,t,n,i,o,s,a,l){const u=i.map(d=>this._compositionType(n,d,o,s,a,l));return new md(4,u,{shouldPushStackElementBefore:PA(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,s){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),u=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new le(a.lineNumber,l,a.lineNumber,u);return e.getValueInRange(d)===n&&s===0?null:new jO(d,n,0,s)}static _typeCommand(e,t,n){return n?new RA(e,t,!0):new Il(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return qo._typeCommand(i,`
`,n);if(!t.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(i.startLineNumber),u=Vr(l).substring(0,i.startColumn-1);return qo._typeCommand(i,`
`+e.normalizeIndentation(u),n)}const o=fr.getEnterAction(e.autoIndent,t,i);if(o){if(o.indentAction===Ts.None)return qo._typeCommand(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===Ts.Indent)return qo._typeCommand(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===Ts.IndentOutdent){const l=e.normalizeIndentation(o.indentation),u=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+u+`
`+l;return n?new RA(i,d,!0):new jO(i,d,-1,u.length-l.length,!0)}else if(o.indentAction===Ts.Outdent){const l=qo.unshiftIndent(e,o.indentation);return qo._typeCommand(i,`
`+e.normalizeIndentation(l+o.appendText),n)}}const s=t.getLineContent(i.startLineNumber),a=Vr(s).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=fr.getIndentForEnter(e.autoIndent,t,i,{unshiftIndent:u=>qo.unshiftIndent(e,u),shiftIndent:u=>qo.shiftIndent(e,u),normalizeIndentation:u=>e.normalizeIndentation(u)});if(l){let u=ho.visibleColumnFromColumn2(e,t,i.getEndPosition());const d=i.endColumn,h=t.getLineContent(i.endLineNumber),p=sc(h);if(p>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,p+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new RA(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let _=0;return d<=p+1&&(e.insertSpaces||(u=Math.ceil(u/e.indentSize)),_=Math.min(u+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new jO(i,`
`+e.normalizeIndentation(l.afterEnter),0,_,!0)}}}return qo._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,o=n.length;i<o;i++)if(!t.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const o=fr.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),s=fr.getIndentActionForType(e.autoIndent,t,n,i,{shiftIndent:a=>qo.shiftIndent(e,a),unshiftIndent:a=>qo.unshiftIndent(e,a)});if(s===null)return null;if(s!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?qo._typeCommand(new le(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+i,!1):qo._typeCommand(new le(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let s=0,a=n.length;s<a;s++){const l=n[s];if(!l.isEmpty())return!1;const u=l.getPosition(),d=t.getLineContent(u.lineNumber);if(d.charAt(u.column-1)!==o)return!1;const p=oL(o);if((u.column>2?d.charCodeAt(u.column-2):0)===92&&p)return!1;if(e.autoClosingOvertype==="auto"){let C=!1;for(let S=0,x=i.length;S<x;S++){const T=i[S];if(u.lineNumber===T.startLineNumber&&u.column===T.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,o){let s=[];for(let a=0,l=i.length;a<l;a++){const d=i[a].getPosition(),h=new le(d.lineNumber,d.column,d.lineNumber,d.column+1);s[a]=new Il(h,o)}return new md(4,s,{shouldPushStackElementBefore:PA(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=i.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!s&&a}static _findAutoClosingPairOpen(e,t,n,i){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let s=null;for(const a of o)if(s===null||a.open.length>s.open.length){let l=!0;for(const u of n)if(t.getValueInRange(new le(u.lineNumber,u.column-a.open.length+1,u.lineNumber,u.column))+i!==a.open){l=!1;break}l&&(s=a)}return s}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const s of i)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!o||s.open.length>o.open.length)&&(o=s);return o}static _getAutoClosingPairClose(e,t,n,i,o){const s=oL(i),a=s?e.autoClosingQuotes:e.autoClosingBrackets,l=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const C of n)if(!C.isEmpty())return null;const u=n.map(C=>{const S=C.getPosition();return o?{lineNumber:S.lineNumber,beforeColumn:S.column-i.length,afterColumn:S.column}:{lineNumber:S.lineNumber,beforeColumn:S.column,afterColumn:S.column}}),d=this._findAutoClosingPairOpen(e,t,u.map(C=>new Ge(C.lineNumber,C.beforeColumn)),i);if(!d)return null;const h=this._findContainedAutoClosingPair(e,d),p=h?h.close:"";let _=!0;for(const C of u){const{lineNumber:S,beforeColumn:x,afterColumn:T}=C,k=t.getLineContent(S),M=k.substring(0,x-1),W=k.substring(T-1);if(W.startsWith(p)||(_=!1),W.length>0){const $=W.charAt(0);if(!qo._isBeforeClosingBrace(e,W)&&!l($))return null}if(d.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const $=zf(e.wordSeparators);if(M.length>0){const G=M.charCodeAt(M.length-1);if($.get(G)===0)return null}}if(!t.isCheapToTokenize(S))return null;t.forceTokenization(S);const F=t.getLineTokens(S),Q=UO(F,x-1);if(!d.shouldAutoClose(Q,x-Q.firstCharOffset))return null;const z=d.findNeutralCharacter();if(z){const $=t.getTokenTypeIfInsertingCharacter(S,x,z);if(!d.isOK($))return null}}return _?d.close.substring(0,d.close.length-p.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,o,s,a){let l=[];for(let u=0,d=i.length;u<d;u++){const h=i[u];l[u]=new ise(h,o,!s,a)}return new md(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return oL(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!qo._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const o=oL(i);for(let s=0,a=n.length;s<a;s++){const l=n[s];if(l.isEmpty())return!1;let u=!0;for(let d=l.startLineNumber;d<=l.endLineNumber;d++){const h=t.getLineContent(d),p=d===l.startLineNumber?l.startColumn-1:0,_=d===l.endLineNumber?l.endColumn-1:h.length,C=h.substring(p,_);if(/[^ \t]/.test(C)){u=!1;break}}if(u)return!1;if(o&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const d=t.getValueInRange(l);if(oL(d))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,o){let s=[];for(let a=0,l=i.length;a<l;a++){const u=i[a],d=t.surroundingPairs[o];s[a]=new LLe(u,o,d)}return new md(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,o){if(!t.electricChars.hasOwnProperty(o)||!i.isEmpty())return null;let s=i.getPosition();n.forceTokenization(s.lineNumber);let a=n.getLineTokens(s.lineNumber),l;try{l=fr.onElectricCharacter(o,a,s.column)}catch(u){return ti(u),null}if(!l)return null;if(l.matchOpenBracket){let u=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:s.lineNumber,column:u});if(d){if(d.startLineNumber===s.lineNumber)return null;let h=n.getLineContent(d.startLineNumber),p=Vr(h),_=t.normalizeIndentation(p),C=n.getLineContent(s.lineNumber),S=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,x=C.substring(S-1,s.column-1),T=_+x+o,k=new le(s.lineNumber,1,s.lineNumber,s.column);const M=new Il(k,T);return new md(E5(T,e),[M],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,o,s){if(!i||ln.selectionsArrEqual(i,o))return null;let a=null;for(const u of o){if(!u.isEmpty())return null;const d=u.getPosition(),h=n.getValueInRange(new le(d.lineNumber,d.column-1,d.lineNumber,d.column));if(a===null)a=h;else if(a!==h)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,o,s,a)){const u=o.map(d=>new Il(new le(d.positionLineNumber,d.positionColumn,d.positionLineNumber,d.positionColumn+1),"",!1));return new md(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,o,a,!0);return l!==null?this._runAutoClosingOpenCharType(e,t,n,o,a,!0,l):null}static typeWithInterceptors(e,t,n,i,o,s,a){if(!e&&a===`
`){let d=[];for(let h=0,p=o.length;h<p;h++)d[h]=qo._enter(n,i,!1,o[h]);return new md(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,o)){let d=[],h=!1;for(let p=0,_=o.length;p<_;p++)if(d[p]=this._runAutoIndentType(n,i,o[p],a),!d[p]){h=!0;break}if(!h)return new md(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,i,o,s,a))return this._runAutoClosingOvertype(t,n,i,o,a);if(!e){const d=this._getAutoClosingPairClose(n,i,o,a,!1);if(d)return this._runAutoClosingOpenCharType(t,n,i,o,a,!1,d)}if(this._isSurroundSelectionType(n,i,o,a))return this._runSurroundSelectionType(t,n,i,o,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,o)){const d=this._typeInterceptorElectricChar(t,n,i,o[0],a);if(d)return d}let l=[];for(let d=0,h=o.length;d<h;d++)l[d]=new Il(o[d],a);const u=E5(a,t);return new md(u,l,{shouldPushStackElementBefore:PA(t,u),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,o){let s=[];for(let l=0,u=i.length;l<u;l++)s[l]=new Il(i[l],o);const a=E5(o,e);return new md(a,s,{shouldPushStackElementBefore:PA(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].positionLineNumber;if(a===1)i[o]=new RA(new le(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new le(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].positionLineNumber;let l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new le(a,l,a,l))}return i}static lineBreakInsert(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=this._enter(e,t,!0,n[o]);return i}}class ise extends jO{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new le(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new le(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}function E5(r,e){return r===" "?e===5||e===6?6:5:4}function PA(r,e){return IY(r)&&!IY(e)?!0:r===5?!1:DY(r)!==DY(e)}function DY(r){return r===6||r===5?"space":r}function IY(r){return r===4||r===5||r===6}var Le;(function(r){r.editorSimpleInput=new _n("editorSimpleInput",!1,!0),r.editorTextFocus=new _n("editorTextFocus",!1,E("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),r.focus=new _n("editorFocus",!1,E("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),r.textInputFocus=new _n("textInputFocus",!1,E("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),r.readOnly=new _n("editorReadonly",!1,E("editorReadonly","Whether the editor is read only")),r.inDiffEditor=new _n("inDiffEditor",!1,E("inDiffEditor","Whether the context is a diff editor")),r.columnSelection=new _n("editorColumnSelection",!1,E("editorColumnSelection","Whether `editor.columnSelection` is enabled")),r.writable=r.readOnly.toNegated(),r.hasNonEmptySelection=new _n("editorHasSelection",!1,E("editorHasSelection","Whether the editor has text selected")),r.hasOnlyEmptySelection=r.hasNonEmptySelection.toNegated(),r.hasMultipleSelections=new _n("editorHasMultipleSelections",!1,E("editorHasMultipleSelections","Whether the editor has multiple selections")),r.hasSingleSelection=r.hasMultipleSelections.toNegated(),r.tabMovesFocus=new _n("editorTabMovesFocus",!1,E("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),r.tabDoesNotMoveFocus=r.tabMovesFocus.toNegated(),r.isInWalkThroughSnippet=new _n("isInEmbeddedEditor",!1,!0),r.canUndo=new _n("canUndo",!1,!0),r.canRedo=new _n("canRedo",!1,!0),r.hoverVisible=new _n("editorHoverVisible",!1,E("editorHoverVisible","Whether the editor hover is visible")),r.inCompositeEditor=new _n("inCompositeEditor",void 0,E("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),r.notInCompositeEditor=r.inCompositeEditor.toNegated(),r.languageId=new _n("editorLangId","",E("editorLangId","The language identifier of the editor")),r.hasCompletionItemProvider=new _n("editorHasCompletionItemProvider",!1,E("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),r.hasCodeActionsProvider=new _n("editorHasCodeActionsProvider",!1,E("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),r.hasCodeLensProvider=new _n("editorHasCodeLensProvider",!1,E("editorHasCodeLensProvider","Whether the editor has a code lens provider")),r.hasDefinitionProvider=new _n("editorHasDefinitionProvider",!1,E("editorHasDefinitionProvider","Whether the editor has a definition provider")),r.hasDeclarationProvider=new _n("editorHasDeclarationProvider",!1,E("editorHasDeclarationProvider","Whether the editor has a declaration provider")),r.hasImplementationProvider=new _n("editorHasImplementationProvider",!1,E("editorHasImplementationProvider","Whether the editor has an implementation provider")),r.hasTypeDefinitionProvider=new _n("editorHasTypeDefinitionProvider",!1,E("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),r.hasHoverProvider=new _n("editorHasHoverProvider",!1,E("editorHasHoverProvider","Whether the editor has a hover provider")),r.hasDocumentHighlightProvider=new _n("editorHasDocumentHighlightProvider",!1,E("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),r.hasDocumentSymbolProvider=new _n("editorHasDocumentSymbolProvider",!1,E("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),r.hasReferenceProvider=new _n("editorHasReferenceProvider",!1,E("editorHasReferenceProvider","Whether the editor has a reference provider")),r.hasRenameProvider=new _n("editorHasRenameProvider",!1,E("editorHasRenameProvider","Whether the editor has a rename provider")),r.hasSignatureHelpProvider=new _n("editorHasSignatureHelpProvider",!1,E("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),r.hasInlayHintsProvider=new _n("editorHasInlayHintsProvider",!1,E("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),r.hasDocumentFormattingProvider=new _n("editorHasDocumentFormattingProvider",!1,E("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),r.hasDocumentSelectionFormattingProvider=new _n("editorHasDocumentSelectionFormattingProvider",!1,E("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),r.hasMultipleDocumentFormattingProvider=new _n("editorHasMultipleDocumentFormattingProvider",!1,E("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),r.hasMultipleDocumentSelectionFormattingProvider=new _n("editorHasMultipleDocumentSelectionFormattingProvider",!1,E("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Le||(Le={}));const hr=0;class js extends Fl{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}var wM;(function(r){const e=function(n){if(!Oc(n))return!1;const i=n;return!(!Wf(i.to)||!wd(i.by)&&!Wf(i.by)||!wd(i.value)&&!iS(i.value)||!wd(i.revealCursor)&&!nre(i.revealCursor))};r.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},r.RawDirection={Up:"up",Down:"down"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let i;switch(n.to){case r.RawDirection.Up:i=1;break;case r.RawDirection.Down:i=2;break;default:return null}let o;switch(n.by){case r.RawUnit.Line:o=1;break;case r.RawUnit.WrappedLine:o=2;break;case r.RawUnit.Page:o=3;break;case r.RawUnit.HalfPage:o=4;break;default:o=2}const s=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:o,value:s,revealCursor:a,select:!!n.select}}r.parse=t})(wM||(wM={}));var _L;(function(r){const e=function(t){if(!Oc(t))return!1;const n=t;return!(!iS(n.lineNumber)&&!Wf(n.lineNumber)||!wd(n.at)&&!Wf(n.at))};r.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},r.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(_L||(_L={}));class nW{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(vr).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(vr).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}var Pa;(function(r){class e extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,[ul.moveTo(k,k.getPrimaryCursorState(),this._inSelectionMode,M.position,M.viewPosition)]),k.revealPrimaryCursor(M.source,!0)}}r.MoveTo=Mt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),r.MoveToSelect=Mt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends js{runCoreEditorCommand(k,M){k.model.pushStackElement();const W=this._getColumnSelectResult(k,k.getPrimaryCursorState(),k.getCursorColumnSelectData(),M);k.setCursorStates(M.source,3,W.viewStates.map(F=>Ni.fromViewState(F))),k.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:W.fromLineNumber,fromViewVisualColumn:W.fromVisualColumn,toViewLineNumber:W.toLineNumber,toViewVisualColumn:W.toVisualColumn}),W.reversed?k.revealTopMostCursor(M.source):k.revealBottomMostCursor(M.source)}}r.ColumnSelect=Mt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(T,k,M,W){const F=T.model.validatePosition(W.position),Q=T.coordinatesConverter.validateViewPosition(new Ge(W.viewPosition.lineNumber,W.viewPosition.column),F);let z=W.doColumnSelect?M.fromViewLineNumber:Q.lineNumber,$=W.doColumnSelect?M.fromViewVisualColumn:W.mouseColumn-1;return fw.columnSelect(T.cursorConfig,T,z,$,Q.lineNumber,W.mouseColumn-1)}}),r.CursorColumnSelectLeft=Mt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(T,k,M,W){return fw.columnSelectLeft(T.cursorConfig,T,M)}}),r.CursorColumnSelectRight=Mt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(T,k,M,W){return fw.columnSelectRight(T.cursorConfig,T,M)}});class n extends t{constructor(k){super(k),this._isPaged=k.isPaged}_getColumnSelectResult(k,M,W,F){return fw.columnSelectUp(k.cursorConfig,k,W,this._isPaged)}}r.CursorColumnSelectUp=Mt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3600,linux:{primary:0}}})),r.CursorColumnSelectPageUp=Mt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(k){super(k),this._isPaged=k.isPaged}_getColumnSelectResult(k,M,W,F){return fw.columnSelectDown(k.cursorConfig,k,W,this._isPaged)}}r.CursorColumnSelectDown=Mt(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3602,linux:{primary:0}}})),r.CursorColumnSelectPageDown=Mt(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends js{constructor(){super({id:"cursorMove",precondition:void 0,description:yM.description})}runCoreEditorCommand(k,M){const W=yM.parse(M);W&&this._runCursorMove(k,M.source,W)}_runCursorMove(k,M,W){k.model.pushStackElement(),k.setCursorStates(M,3,o._move(k,k.getCursorStates(),W)),k.revealPrimaryCursor(M,!0)}static _move(k,M,W){const F=W.select,Q=W.value;switch(W.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ul.simpleMove(k,M,W.direction,F,Q,W.unit);case 11:case 13:case 12:case 14:return ul.viewportMove(k,M,W.direction,F,Q);default:return null}}}r.CursorMoveImpl=o,r.CursorMove=Mt(new o);class s extends js{constructor(k){super(k),this._staticArgs=k.args}runCoreEditorCommand(k,M){let W=this._staticArgs;this._staticArgs.value===-1&&(W={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:k.cursorConfig.pageSize}),k.model.pushStackElement(),k.setCursorStates(M.source,3,ul.simpleMove(k,k.getCursorStates(),W.direction,W.select,W.value,W.unit)),k.revealPrimaryCursor(M.source,!0)}}r.CursorLeft=Mt(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),r.CursorLeftSelect=Mt(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1039}})),r.CursorRight=Mt(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),r.CursorRightSelect=Mt(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1041}})),r.CursorUp=Mt(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),r.CursorUpSelect=Mt(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),r.CursorPageUp=Mt(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:11}})),r.CursorPageUpSelect=Mt(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1035}})),r.CursorDown=Mt(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),r.CursorDownSelect=Mt(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),r.CursorPageDown=Mt(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:12}})),r.CursorPageDownSelect=Mt(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1036}})),r.CreateCursor=Mt(new class extends js{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(T,k){let M;k.wholeLine?M=ul.line(T,T.getPrimaryCursorState(),!1,k.position,k.viewPosition):M=ul.moveTo(T,T.getPrimaryCursorState(),!1,k.position,k.viewPosition);const W=T.getCursorStates();if(W.length>1){const F=M.modelState?M.modelState.position:null,Q=M.viewState?M.viewState.position:null;for(let z=0,$=W.length;z<$;z++){const G=W[z];if(!(F&&!G.modelState.selection.containsPosition(F))&&!(Q&&!G.viewState.selection.containsPosition(Q))){W.splice(z,1),T.model.pushStackElement(),T.setCursorStates(k.source,3,W);return}}}W.push(M),T.model.pushStackElement(),T.setCursorStates(k.source,3,W)}}),r.LastCursorMoveToSelect=Mt(new class extends js{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(T,k){const M=T.getLastAddedCursorIndex(),W=T.getCursorStates(),F=W.slice(0);F[M]=ul.moveTo(T,W[M],!0,k.position,k.viewPosition),T.model.pushStackElement(),T.setCursorStates(k.source,3,F)}});class a extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,ul.moveToBeginningOfLine(k,k.getCursorStates(),this._inSelectionMode)),k.revealPrimaryCursor(M.source,!0)}}r.CursorHome=Mt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),r.CursorHomeSelect=Mt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,this._exec(k.getCursorStates())),k.revealPrimaryCursor(M.source,!0)}_exec(k){const M=[];for(let W=0,F=k.length;W<F;W++){const Q=k[W],z=Q.modelState.position.lineNumber;M[W]=Ni.fromModelState(Q.modelState.move(this._inSelectionMode,z,1,0))}return M}}r.CursorLineStart=Mt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:0,mac:{primary:287}}})),r.CursorLineStartSelect=Mt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:0,mac:{primary:1311}}}));class u extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,ul.moveToEndOfLine(k,k.getCursorStates(),this._inSelectionMode,M.sticky||!1)),k.revealPrimaryCursor(M.source,!0)}}r.CursorEnd=Mt(new u({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:hr,kbExpr:Le.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:E("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),r.CursorEndSelect=Mt(new u({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:hr,kbExpr:Le.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:E("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,this._exec(k,k.getCursorStates())),k.revealPrimaryCursor(M.source,!0)}_exec(k,M){const W=[];for(let F=0,Q=M.length;F<Q;F++){const z=M[F],$=z.modelState.position.lineNumber,G=k.model.getLineMaxColumn($);W[F]=Ni.fromModelState(z.modelState.move(this._inSelectionMode,$,G,0))}return W}}r.CursorLineEnd=Mt(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:0,mac:{primary:291}}})),r.CursorLineEndSelect=Mt(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,ul.moveToBeginningOfBuffer(k,k.getCursorStates(),this._inSelectionMode)),k.revealPrimaryCursor(M.source,!0)}}r.CursorTop=Mt(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2062,mac:{primary:2064}}})),r.CursorTopSelect=Mt(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,ul.moveToEndOfBuffer(k,k.getCursorStates(),this._inSelectionMode)),k.revealPrimaryCursor(M.source,!0)}}r.CursorBottom=Mt(new p({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2061,mac:{primary:2066}}})),r.CursorBottomSelect=Mt(new p({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:3085,mac:{primary:3090}}}));class _ extends js{constructor(){super({id:"editorScroll",precondition:void 0,description:wM.description})}runCoreEditorCommand(k,M){const W=wM.parse(M);W&&this._runEditorScroll(k,M.source,W)}_runEditorScroll(k,M,W){const F=this._computeDesiredScrollTop(k,W);if(W.revealCursor){const Q=k.getCompletelyVisibleViewRangeAtScrollTop(F);k.setCursorStates(M,3,[ul.findPositionInViewportIfOutside(k,k.getPrimaryCursorState(),Q,W.select)])}k.setScrollTop(F,0)}_computeDesiredScrollTop(k,M){if(M.unit===1){const Q=k.getCompletelyVisibleViewRange(),z=k.coordinatesConverter.convertViewRangeToModelRange(Q);let $;M.direction===1?$=Math.max(1,z.startLineNumber-M.value):$=Math.min(k.model.getLineCount(),z.startLineNumber+M.value);const G=k.coordinatesConverter.convertModelPositionToViewPosition(new Ge($,1));return k.getVerticalOffsetForLineNumber(G.lineNumber)}let W;M.unit===3?W=k.cursorConfig.pageSize*M.value:M.unit===4?W=Math.round(k.cursorConfig.pageSize/2)*M.value:W=M.value;const F=(M.direction===1?-1:1)*W;return k.getScrollTop()+F*k.cursorConfig.lineHeight}}r.EditorScrollImpl=_,r.EditorScroll=Mt(new _),r.ScrollLineUp=Mt(new class extends js{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(T,k){r.EditorScroll._runEditorScroll(T,k.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageUp=Mt(new class extends js{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(T,k){r.EditorScroll._runEditorScroll(T,k.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollLineDown=Mt(new class extends js{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(T,k){r.EditorScroll._runEditorScroll(T,k.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageDown=Mt(new class extends js{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(T,k){r.EditorScroll._runEditorScroll(T,k.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class C extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,[ul.word(k,k.getPrimaryCursorState(),this._inSelectionMode,M.position)]),k.revealPrimaryCursor(M.source,!0)}}r.WordSelect=Mt(new C({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),r.WordSelectDrag=Mt(new C({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),r.LastCursorWordSelect=Mt(new class extends js{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(T,k){const M=T.getLastAddedCursorIndex(),W=T.getCursorStates(),F=W.slice(0),Q=W[M];F[M]=ul.word(T,Q,Q.modelState.hasSelection(),k.position),T.model.pushStackElement(),T.setCursorStates(k.source,3,F)}});class S extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){k.model.pushStackElement(),k.setCursorStates(M.source,3,[ul.line(k,k.getPrimaryCursorState(),this._inSelectionMode,M.position,M.viewPosition)]),k.revealPrimaryCursor(M.source,!1)}}r.LineSelect=Mt(new S({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),r.LineSelectDrag=Mt(new S({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class x extends js{constructor(k){super(k),this._inSelectionMode=k.inSelectionMode}runCoreEditorCommand(k,M){const W=k.getLastAddedCursorIndex(),F=k.getCursorStates(),Q=F.slice(0);Q[W]=ul.line(k,F[W],this._inSelectionMode,M.position,M.viewPosition),k.model.pushStackElement(),k.setCursorStates(M.source,3,Q)}}r.LastCursorLineSelect=Mt(new x({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),r.LastCursorLineSelectDrag=Mt(new x({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),r.CancelSelection=Mt(new class extends js{constructor(){super({id:"cancelSelection",precondition:Le.hasNonEmptySelection,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(T,k){T.model.pushStackElement(),T.setCursorStates(k.source,3,[ul.cancelSelection(T,T.getPrimaryCursorState())]),T.revealPrimaryCursor(k.source,!0)}}),r.RemoveSecondaryCursors=Mt(new class extends js{constructor(){super({id:"removeSecondaryCursors",precondition:Le.hasMultipleSelections,kbOpts:{weight:hr+1,kbExpr:Le.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(T,k){T.model.pushStackElement(),T.setCursorStates(k.source,3,[T.getPrimaryCursorState()]),T.revealPrimaryCursor(k.source,!0),PR(E("removedCursor","Removed secondary cursors"))}}),r.RevealLine=Mt(new class extends js{constructor(){super({id:"revealLine",precondition:void 0,description:_L.description})}runCoreEditorCommand(T,k){const M=k,W=M.lineNumber||0;let F=typeof W=="number"?W+1:parseInt(W)+1;F<1&&(F=1);const Q=T.model.getLineCount();F>Q&&(F=Q);const z=new le(F,1,F,T.model.getLineMaxColumn(F));let $=0;if(M.at)switch(M.at){case _L.RawAtArgument.Top:$=3;break;case _L.RawAtArgument.Center:$=1;break;case _L.RawAtArgument.Bottom:$=4;break}const G=T.coordinatesConverter.convertModelRangeToViewRange(z);T.revealRange(k.source,!1,G,$,0)}}),r.SelectAll=new class extends nW{constructor(){super(bbe)}runDOMCommand(){Id&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(T,k,M){const W=k._getViewModel();W&&this.runCoreEditorCommand(W,M)}runCoreEditorCommand(T,k){T.model.pushStackElement(),T.setCursorStates("keyboard",3,[ul.selectAll(T,T.getPrimaryCursorState())])}},r.SetSelection=Mt(new class extends js{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(T,k){T.model.pushStackElement(),T.setCursorStates(k.source,3,[Ni.fromModelSelection(k.selection)])}})})(Pa||(Pa={}));const xLe=Xt.and(Le.textInputFocus,Le.columnSelection);function aD(r,e){Rl.registerKeybindingRule({id:r,primary:e,when:xLe,weight:hr+1})}aD(Pa.CursorColumnSelectLeft.id,1039);aD(Pa.CursorColumnSelectRight.id,1041);aD(Pa.CursorColumnSelectUp.id,1040);aD(Pa.CursorColumnSelectPageUp.id,1035);aD(Pa.CursorColumnSelectDown.id,1042);aD(Pa.CursorColumnSelectPageDown.id,1036);function kY(r){return r.register(),r}var $L;(function(r){class e extends Fl{runEditorCommand(n,i,o){const s=i._getViewModel();s&&this.runCoreEditingCommand(i,s,o||{})}}r.CoreEditingCommand=e,r.LineBreakInsert=Mt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Le.writable,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,qo.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),r.Outdent=Mt(new class extends e{constructor(){super({id:"outdent",precondition:Le.writable,kbOpts:{weight:hr,kbExpr:Xt.and(Le.editorTextFocus,Le.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,qo.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),r.Tab=Mt(new class extends e{constructor(){super({id:"tab",precondition:Le.writable,kbOpts:{weight:hr,kbExpr:Xt.and(Le.editorTextFocus,Le.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,qo.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),r.DeleteLeft=Mt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[o,s]=gS.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(2)}}),r.DeleteRight=Mt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:hr,kbExpr:Le.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[o,s]=gS.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(3)}}),r.Undo=new class extends nW{constructor(){super(wre)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},r.Redo=new class extends nW{constructor(){super(Sre)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})($L||($L={}));class TY extends i4{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(vr).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function nE(r,e){kY(new TY("default:"+r,r)),kY(new TY(r,r,e))}nE("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});nE("replacePreviousChar");nE("compositionType");nE("compositionStart");nE("compositionEnd");nE("paste");nE("cut");class DLe{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Pa.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Ge(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Pc&&t.get(95),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Pa.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Pa.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Pa.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Pa.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Pa.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Pa.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Pa.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Pa.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Pa.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Pa.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Pa.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Pa.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Pa.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class I4{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return I4.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new ILe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class ILe{constructor(e,t,n,i,o,s){this.element=e,this.type=t,this.mouseColumn=n,this.position=i,this.range=o,this.detail=s}toString(){return Yp.toString(this)}}var L5;class rse{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let o=0,s=0;for(let l=n;l<=i;l++){const u=l-this._rendLineNumberStart;e<=l&&l<=t&&(s===0?(o=u,s=1):s++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(o,s)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),i=this.getEndLineNumber();let o=!1;for(let s=e;s<=t;s++)s>=n&&s<=i&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const s=[];for(let h=0;h<n;h++)s[h]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),u=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(s).concat(u),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let o=0,s=e.length;o<s;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),u=Math.min(n,a.toLineNumber);for(let d=l;d<=u;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}}class ose{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new rse(()=>this._host.createVisibleLine())}_createDomNode(){const e=tr(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Db(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class Db{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let s=t;s<=n;s++)o.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){const s=t,a=Math.min(n,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,i,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){const s=Math.min(o.linesLength,t-o.rendLineNumberStart);s>0&&(this._removeLinesBefore(o,s),o.linesLength-=s)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const s=o.rendLineNumberStart+o.linesLength,a=n;s<=a&&(this._insertLinesAfter(o,s,a,i,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const s=Math.max(0,n-o.rendLineNumberStart+1),l=o.linesLength-1-s+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,i),o}_renderUntouchedLines(e,t,n,i,o){const s=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const u=s+l;a[l].layoutLine(u,i[u-o])}}_insertLinesBefore(e,t,n,i,o){const s=[];let a=0;for(let l=t;l<=n;l++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,o){const s=[];let a=0;for(let l=t;l<=n;l++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const o=e.lines[n+i].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){Db._ttPolicy&&(n=Db._ttPolicy.createHTML(n));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let s=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");Db._ttPolicy&&(t=Db._ttPolicy.createHTML(t)),i.innerHTML=t;for(let o=0;o<e.linesLength;o++){const s=e.lines[o];if(n[o]){const a=i.firstChild,l=s.getDomNode();l.parentNode.replaceChild(a,l),s.setDomNode(a)}}}_finishRendering(e,t,n){const i=Db._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let u=!1;for(let d=0;d<o;d++){const h=s[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this.viewportData,i))&&(l[d]=!0,u=!0)}u&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let u=!1;const d=[];for(let h=0;h<o;h++){const p=s[h];d[h]=!1,!(l[h]||!p.renderLine(h+a,n[h],this.viewportData,i))&&(d[h]=!0,u=!0)}u&&this._finishRenderingInvalidLines(e,i.build(),d)}}}Db._ttPolicy=(L5=window.trustedTypes)===null||L5===void 0?void 0:L5.createPolicy("editorViewLayer",{createHTML:r=>r});Db._sb=cS(1e5);class sse extends jf{constructor(e){super(e),this._visibleLines=new ose(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new kLe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class kLe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=tr(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,i){let o="";for(let s=0,a=this._dynamicOverlays.length;s<a;s++){const l=this._dynamicOverlays[s];o+=l.render(n.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(o),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class TLe extends sse{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class NLe extends sse{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),ac.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;ac.applyFontInfo(this.domNode,t.get(43));const n=t.get(130);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class pk{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class ALe extends jf{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=tr(document.createElement("div")),Fv.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=tr(document.createElement("div")),Fv.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new OLe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let OLe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=tr(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,o=i.get(130);this._fixedOverflowWidgets=i.get(36),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=i.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(130)){const n=t.get(130);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,i,o){const s=e.top,a=s,l=t.top+this._lineHeight,u=o.viewportHeight-l,d=s-i,h=a>=i,p=l,_=u>=i;let C=e.left,S=t.left;return C+n>o.scrollLeft+o.viewportWidth&&(C=o.scrollLeft+o.viewportWidth-n),S+n>o.scrollLeft+o.viewportWidth&&(S=o.scrollLeft+o.viewportWidth-n),C<o.scrollLeft&&(C=o.scrollLeft),S<o.scrollLeft&&(S=o.scrollLeft),{fitsAbove:h,aboveTop:d,aboveLeft:C,fitsBelow:_,belowTop:p,belowLeft:S}}_layoutHorizontalSegmentInPage(e,t,n,i){const o=Math.max(0,t.left-i),s=Math.min(t.left+t.width+i,e.width);let a=t.left+n-Mb.scrollX;if(a+i>s){const l=a-(s-i);a-=l,n-=l}if(a<o){const l=a-o;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,o){const s=e.top-i,a=t.top+this._lineHeight,l=tu(this._viewDomNode.domNode),u=l.top+s-Mb.scrollY,d=l.top+a-Mb.scrollY,h=jP(document.body),[p,_]=this._layoutHorizontalSegmentInPage(h,l,e.left-o.scrollLeft+this._contentLeft,n),[C,S]=this._layoutHorizontalSegmentInPage(h,l,t.left-o.scrollLeft+this._contentLeft,n),x=22,T=22,k=u>=x,M=d+i<=h.height-T;return this._fixedOverflowWidgets?{fitsAbove:k,aboveTop:Math.max(u,x),aboveLeft:_,fitsBelow:M,belowTop:d,belowLeft:S}:{fitsAbove:k,aboveTop:s,aboveLeft:p,fitsBelow:M,belowTop:a,belowLeft:C}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new pk(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const h of t)h.lineNumber<n.lineNumber&&(n=h),h.lineNumber>i.lineNumber&&(i=h);let o=1073741824;for(const h of n.ranges)h.left<o&&(o=h.left);let s=1073741824;for(const h of i.ranges)h.left<s&&(s=h.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new pk(a,o),u=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,d=new pk(u,s);return[l,d]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=x5(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeClientWidth=o.width,this._cachedDomNodeClientHeight=o.height;else{const s=this.domNode.domNode;this._cachedDomNodeClientWidth=s.clientWidth,this._cachedDomNodeClientHeight=s.clientHeight}}let i;this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e);for(let o=1;o<=2;o++)for(const s of this._preference)if(s===1){if(!i)return null;if(o===2||i.fitsAbove)return{coordinate:new pk(i.aboveTop,i.aboveLeft),position:1}}else if(s===2){if(!i)return null;if(o===2||i.fitsBelow)return{coordinate:new pk(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&x5(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&x5(this._actual.afterRender,this._actual,this._renderData.position)}};function x5(r,e,...t){try{return r.call(e,...t)}catch{return null}}let iW=!0;class ase extends sD{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ln(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=iW?this._selections.slice(0,1):this._selections,n=t.map(o=>o.positionLineNumber);n.sort((o,s)=>o-s),Rf(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const i=t.every(o=>o.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let s=0;const a=[];for(let l=n;l<=i;l++){const u=l-n;for(;s<o&&this._cursorLineNumbers[s]<l;)s++;s<o&&this._cursorLineNumbers[s]===l?a[u]=t:a[u]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class RLe extends ase{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class MLe extends ase{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}mo((r,e)=>{iW=!1;const t=r.getColor(cEe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(vY)){const n=r.getColor(vY);n&&(iW=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),r.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class PLe extends sD{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,u=t.length;l<u;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,u)=>{if(l.options.zIndex<u.options.zIndex)return-1;if(l.options.zIndex>u.options.zIndex)return 1;const d=l.options.className,h=u.options.className;return d<h?-1:d>h?1:le.compareRangesUsingStarts(l.range,u.range)});const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=s;l++){const u=l-o;a[u]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const u=t[a];if(!u.options.isWholeLine)continue;const d='<div class="cdr '+u.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',h=Math.max(u.range.startLineNumber,o),p=Math.min(u.range.endLineNumber,s);for(let _=h;_<=p;_++){const C=_-o;n[C]+=d}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),o=e.visibleRange.startLineNumber;let s=null,a=!1,l=null;for(let u=0,d=t.length;u<d;u++){const h=t[u];if(h.options.isWholeLine)continue;const p=h.options.className,_=!!h.options.showIfCollapsed;let C=h.range;if(_&&C.endColumn===1&&C.endLineNumber!==C.startLineNumber&&(C=new le(C.startLineNumber,C.startColumn,C.endLineNumber-1,this._context.model.getLineMaxColumn(C.endLineNumber-1))),s===p&&a===_&&le.areIntersectingOrTouching(l,C)){l=le.plusRange(l,C);continue}s!==null&&this._renderNormalDecoration(e,l,s,a,i,o,n),s=p,a=_,l=C}s!==null&&this._renderNormalDecoration(e,l,s,a,i,o,n)}_renderNormalDecoration(e,t,n,i,o,s,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let u=0,d=l.length;u<d;u++){const h=l[u];if(h.outsideRenderedLine)continue;const p=h.lineNumber-s;if(i&&h.ranges.length===1){const _=h.ranges[0];if(_.width<this._typicalHalfwidthCharacterWidth){const C=Math.round(_.left+_.width/2),S=Math.max(0,Math.round(C-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new h4(S,this._typicalHalfwidthCharacterWidth)}}for(let _=0,C=h.ranges.length;_<C;_++){const S=h.ranges[_],x='<div class="cdr '+n+'" style="left:'+String(S.left)+"px;width:"+String(S.width)+"px;height:"+o+'px;"></div>';a[p]+=x}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Ph extends ot{onclick(e,t){this._register(kt(e,In.CLICK,n=>t(new Tf(n))))}onmousedown(e,t){this._register(kt(e,In.MOUSE_DOWN,n=>t(new Tf(n))))}onmouseover(e,t){this._register(kt(e,In.MOUSE_OVER,n=>t(new Tf(n))))}onnonbubblingmouseout(e,t){this._register(pz(e,n=>t(new Tf(n))))}onkeydown(e,t){this._register(kt(e,In.KEY_DOWN,n=>t(new Oo(n))))}onkeyup(e,t){this._register(kt(e,In.KEY_UP,n=>t(new Oo(n))))}oninput(e,t){this._register(kt(e,In.INPUT,t))}onblur(e,t){this._register(kt(e,In.BLUR,t))}onfocus(e,t){this._register(kt(e,In.FOCUS,t))}ignoreGesture(e){Or.ignoreTarget(e)}}const mx=11;class FLe extends Ph{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=mx+"px",this.domNode.style.height=mx+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new eE),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new h2),this._mousedownScheduleRepeatTimer=this._register(new uc)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,iD,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class BLe extends ot{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new uc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const WLe=140;class lse extends Ph{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new BLe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new eE),this._shouldRender=!0,this.domNode=tr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new FLe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=tr(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,o=>{o.leftButton&&(o.preventDefault(),this._sliderMouseDown(o,()=>{}))}),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(e);n<=o&&o<=i?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const o=tu(this.domNode.domNode);t=e.posx-o.left,n=e.posy-o.top}const i=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),i=this._sliderOrthogonalMousePosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,iD,s=>{const a=this._sliderOrthogonalMousePosition(s),l=Math.abs(a-i);if(Ol&&l>WLe){this._setDesiredScrollPositionNow(o.getScrollPosition());return}const d=this._sliderMousePosition(s)-n;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const VLe=20;class YT{constructor(e,t,n,i,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new YT(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){const s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const u=Math.round(Math.max(VLe,Math.floor(n*a/i))),d=(a-u)/(i-n),h=o*d;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(u),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=YT._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class HLe extends lse{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new YT(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const s=(t.arrowSize-mx)/2,a=(t.horizontalScrollbarSize-mx)/2;this._createArrow({className:"scra",icon:Ae.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new rx(null,1,0))}),this._createArrow({className:"scra",icon:Ae.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new rx(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class ULe extends lse{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new YT(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const s=(t.arrowSize-mx)/2,a=(t.verticalScrollbarSize-mx)/2;this._createArrow({className:"scra",icon:Ae.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new rx(null,0,1))}),this._createArrow({className:"scra",icon:Ae.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new rx(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class SM{constructor(e,t,n,i,o,s){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,i=i|0,o=o|0,s=s|0,this.rawScrollLeft=n,this.rawScrollTop=s,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),i<0&&(i=0),s+i>o&&(s=o-i),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=i,this.scrollHeight=o,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new SM(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new SM(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}}class k4 extends ot{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Fe),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new SM(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new ZT(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=ZT.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class NY{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function D5(r,e){const t=e-r;return function(n){return r+t*jLe(n)}}function zLe(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}class ZT{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),zLe(D5(e,o),D5(s,t),.33)}return D5(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new NY(n,i,!1)}return new NY(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return ZT.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new ZT(e,t,i,n)}}function $Le(r){return Math.pow(r,3)}function jLe(r){return 1-$Le(1-r)}const qLe=500,AY=50;class KLe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class rW{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new KLe(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}rW.INSTANCE=new rW;class use extends Ph{constructor(e,t,n){super(),this._onScroll=this._register(new Fe),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Fe),e.style.overflow="hidden",this._options=GLe(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new ULe(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new HLe(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tr(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tr(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tr(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onnonbubblingmouseout(this._listenOnDomNode,o=>this._onMouseOut(o)),this._hideTimeout=this._register(new uc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=nr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ji&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=nr(this._mouseWheelToDispose),e)){const n=i=>{this._onMouseWheel(new rx(i))};this._mouseWheelToDispose.push(kt(this._listenOnDomNode,In.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=rW.INSTANCE;{const o=window.devicePixelRatio/Iie();Ol||Pc?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);const a=!ji&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let u={};if(o){const d=AY*o,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(u,h)}if(s){const d=AY*s,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(u,h)}u=this._scrollable.validateScrollPosition(u),(l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),qLe)}}class p$ extends use{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new k4(0,i=>Rv(i));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class m$ extends use{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class y2 extends p${constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function GLe(r){const e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,ji&&(e.className+=" mac"),e}class YLe extends jf{constructor(e,t,n,i){super(e);const o=this._context.configuration.options,s=o.get(91),a=o.get(66),l=o.get(34),u=o.get(94),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+KR(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:u,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new m$(t.domNode,d,this._context.viewLayout.getScrollable())),Fv.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=tr(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=(p,_,C)=>{const S={};if(_){const x=p.scrollTop;x&&(S.scrollTop=this._context.viewLayout.getCurrentScrollTop()+x,p.scrollTop=0)}if(C){const x=p.scrollLeft;x&&(S.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+x,p.scrollLeft=0)}this._context.model.setScrollPosition(S,1)};this._register(kt(n.domNode,"scroll",p=>h(n.domNode,!0,!0))),this._register(kt(t.domNode,"scroll",p=>h(t.domNode,!0,!1))),this._register(kt(i.domNode,"scroll",p=>h(i.domNode,!0,!1))),this._register(kt(this.scrollbarDomNode.domNode,"scroll",p=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(130);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),i=t.get(66),o=t.get(34),s=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:o,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(130)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+KR(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}mo((r,e)=>{const t=r.getColor(rD);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=r.getColor(FL);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=r.getColor(BL);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const o=r.getColor(WL);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});class EM{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class _$ extends sD{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,s=0;for(let a=0,l=n.length;a<l;a++){const u=n[a],d=u.className;let h=Math.max(u.startLineNumber,e)-e;const p=Math.min(u.endLineNumber,t)-e;o===d?(h=Math.max(s+1,h),s=Math.max(s,p)):(o=d,s=p);for(let _=h;_<=s;_++)i[_].push(o)}return i}}class ZLe extends _${constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.options.glyphMarginClassName;l&&(n[i++]=new EM(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._lineHeight.toString(),s=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+s+"px;width:"+a+"px;height:"+o+'px;"></div>',u=[];for(let d=t;d<=n;d++){const h=d-t,p=i[h];p.length===0?u[h]="":u[h]='<div class="cgmr codicon '+p.join(" ")+l}this._renderResult=u}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class XLe extends sD{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(131),i=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131),i=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,u=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(s,a,d),p=[];for(let _=s;_<=a;_++){const C=_-s,S=h[C];let x="";const T=(n=(t=e.visibleRangeForPosition(new Ge(_,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const k of S){const M=T+(k.visibleColumn-1)*this._spaceWidth;if(M>l||this._maxIndentLeft>0&&M>this._maxIndentLeft)break;const W=k.horizontalLine?k.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",F=k.horizontalLine?((o=(i=e.visibleRangeForPosition(new Ge(_,k.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&o!==void 0?o:M+this._spaceWidth)-M:this._spaceWidth;x+=`<div class="core-guide ${k.className} ${W}" style="left:${M}px;height:${u}px;width:${F}px"></div>`}p[C]=x}this._renderResult=p}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Bw.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Bw.EnabledForActive:Bw.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let s=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const h=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);s=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:u}=this._context.model.getTextModelOptions(),d=[];for(let h=e;h<=t;h++){const p=new Array;d.push(p);const _=i?i[h-e]:[],C=new ML(_),S=o?o[h-e]:[];for(let x=1;x<=S;x++){const T=(x-1)*u+1,k=_.length===0&&s<=h&&h<=a&&x===l;p.push(...C.takeWhile(W=>W.visibleColumn<T)||[]);const M=C.peek();(!M||M.visibleColumn!==T||M.horizontalLine)&&p.push(new hL(T,k?"core-guide-indent-active":"core-guide-indent",null))}p.push(...C.takeWhile(x=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function FA(r){if(!(r&&r.isTransparent()))return r}mo((r,e)=>{const t=r.getColor(E4);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=r.getColor(L4)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const i=[{bracketColor:Koe,guideColor:AEe,guideColorActive:BEe},{bracketColor:Goe,guideColor:OEe,guideColorActive:WEe},{bracketColor:Yoe,guideColor:REe,guideColorActive:VEe},{bracketColor:Zoe,guideColor:MEe,guideColorActive:HEe},{bracketColor:Xoe,guideColor:PEe,guideColorActive:UEe},{bracketColor:Qoe,guideColor:FEe,guideColorActive:zEe}],o=new ese;let s=i.map(a=>{var l,u;const d=r.getColor(a.bracketColor),h=r.getColor(a.guideColor),p=r.getColor(a.guideColorActive),_=FA((l=FA(h))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),C=FA((u=FA(p))!==null&&u!==void 0?u:d);if(!(!_||!C))return{guideColor:_,guideColorActive:C}}).filter(P0e);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class QLe{constructor(){this._currentVisibleRange=new le(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class JLe{constructor(e,t,n,i,o,s){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=i,this.stopScrollTop=o,this.scrollType=s,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class exe{constructor(e,t,n,i){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=i,this.type="selections";let o=e[0].startLineNumber,s=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const u=e[a];o=Math.min(o,u.startLineNumber),s=Math.max(s,u.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=s}}class T4 extends jf{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new ose(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,o=i.get(43),s=i.get(131);this._lineHeight=i.get(58),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=i.get(88),this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),this._viewLineOptions=new BG(n,this._context.theme.type),Fv.write(this.domNode,7),this.domNode.setClassName(`view-lines ${$w}`),ac.applyFontInfo(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Xr(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Xr(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new QLe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new fv(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(131)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),i=t.get(131);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),ac.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(130)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new BG(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let o=t;o<=n;o++)i=this._visibleLines.getVisibleLine(o).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new JLe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new exe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(i)===1)return new Ge(i,1);const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(i<o||i>s)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.model.getLineMinColumn(i);return a<l&&(a=l),new Ge(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===fv.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const o=this._visibleLines.getVisibleLine(i);if(e===o.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=le.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;let o=[],s=0;const a=new FG(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ge(i.startLineNumber,1)).lineNumber);const u=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<u||h>d)continue;const p=h===i.startLineNumber?i.startColumn:1,_=h===i.endLineNumber?i.endColumn:this._context.model.getLineMaxColumn(h),C=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,p,_,a);if(C){if(t&&h<n){const S=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Ge(h+1,1)).lineNumber,S!==l&&(C.ranges[C.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[s++]=new _ye(C.outsideRenderedLine,h,h4.from(C.ranges))}}return s===0?null:o}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new FG(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new vye(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,o=!0;for(let s=t;s<=n;s++){const a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){o=!1;continue}i=Math.max(i,a.getWidth())}return o&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++){const s=this._visibleLines.getVisibleLine(o);if(s.needsMonospaceFontCheck()){const a=s.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Pc&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,o){const s=e.top,a=e.height,l=s+a;let u,d,h;if(i&&i.length>0){let C=i[0].startLineNumber,S=i[0].endLineNumber;for(let x=1,T=i.length;x<T;x++){const k=i[x];C=Math.min(C,k.startLineNumber),S=Math.max(S,k.endLineNumber)}u=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(C),h=this._context.viewLayout.getVerticalOffsetForLineNumber(S)+this._lineHeight}else if(n)u=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const C=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);d-=C*this._lineHeight,h+=Math.max(0,C-1)*this._lineHeight}(o===0||o===4)&&(h+=this._lineHeight);let _;if(h-d>a){if(!u)return-1;_=d}else if(o===5||o===6)if(o===6&&s<=d&&h<=l)_=s;else{const C=Math.max(5*this._lineHeight,a*.2),S=d-C,x=h-a;_=Math.max(x,S)}else if(o===1||o===2)if(o===2&&s<=d&&h<=l)_=s;else{const C=(d+h)/2;_=Math.max(0,C-a/2)}else _=this._computeMinimumScrolling(s,l,d,h,o===3,o===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let o=1073741824,s=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const u of l.ranges)o=Math.min(o,Math.round(u.left)),s=Math.max(s,Math.round(u.left+u.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const u=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),s=Math.max(s,Math.round(d.left+d.width))}return o=Math.max(0,o-T4.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding,e.type==="selections"&&s-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,o,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,n,i,o,s){e=e|0,t=t|0,n=n|0,i=i|0,o=!!o,s=!!s;const a=t-e;if(i-n<a){if(o)return n;if(s)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}T4.HORIZONTAL_EXTRA_PX=30;class txe extends _${constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(130);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.options.linesDecorationsClassName;l&&(n[i++]=new EM(a.range.startLineNumber,a.range.endLineNumber,l));const u=a.options.firstLineDecorationClassName;u&&(n[i++]=new EM(a.range.startLineNumber,a.range.startLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+s+'px;"></div>',l=[];for(let u=t;u<=n;u++){const d=u-t,h=i[d];let p="";for(let _=0,C=h.length;_<C;_++)p+='<div class="cldr '+h[_]+a;l[d]=p}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class nxe extends _${constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],l=a.options.marginClassName;l&&(n[i++]=new EM(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=[];for(let s=t;s<=n;s++){const a=s-t,l=i[a];let u="";for(let d=0,h=l.length;d<h;d++)u+='<div class="cmdr '+l[d]+'" style=""></div>';o[a]=u}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Af{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=Af._clamp(e),this.g=Af._clamp(t),this.b=Af._clamp(n),this.a=Af._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Af.Empty=new Af(0,0,0,0);class w2 extends ot{constructor(){super(),this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(es.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new w2),this._INSTANCE}_updateColorMap(){const e=es.getColorMap();if(!e){this._colors=[Af.Empty],this._backgroundIsLight=!0;return}this._colors=[Af.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new Af(i.r,i.g,i.b,Math.round(i.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}w2._INSTANCE=null;class OY{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}class ixe{constructor(e,t){this.tabSize=e,this.data=t}}class v${constructor(e,t,n,i,o,s,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=o,this.tokens=s,this.inlineDecorations=a}}class Oh{constructor(e,t,n,i,o,s,a,l,u,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=Oh.isBasicASCII(n,s),this.containsRTL=Oh.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=u,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?Lz(e):!0}static containsRTL(e,t,n){return!t&&n?YP(e):!1}}class uT{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class rxe{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new uT(new le(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class cse{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class dse{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}const oxe=(()=>{const r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),sxe=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:96-1:r);class XT{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=XT.soften(e,12/15),this.charDataLight=XT.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let i=0,o=e.length;i<o;i++)n[i]=tM(e[i]*t);return n}renderChar(e,t,n,i,o,s,a,l,u,d,h){const p=1*this.scale,_=2*this.scale,C=h?1:_;if(t+p>e.width||n+C>e.height){console.warn("bad render request outside image data");return}const S=d?this.charDataLight:this.charDataNormal,x=sxe(i,u),T=e.width*4,k=a.r,M=a.g,W=a.b,F=o.r-k,Q=o.g-M,z=o.b-W,$=Math.max(s,l),G=e.data;let Y=x*p*_,I=n*T+t*4;for(let D=0;D<C;D++){let O=I;for(let V=0;V<p;V++){const j=S[Y++]/255*(s/255);G[O++]=k+F*j,G[O++]=M+Q*j,G[O++]=W+z*j,G[O++]=$}I+=T}}blockRenderChar(e,t,n,i,o,s,a,l){const u=1*this.scale,d=2*this.scale,h=l?1:d;if(t+u>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const p=e.width*4,_=.5*(o/255),C=s.r,S=s.g,x=s.b,T=i.r-C,k=i.g-S,M=i.b-x,W=C+T*_,F=S+k*_,Q=x+M*_,z=Math.max(o,a),$=e.data;let G=n*p+t*4;for(let Y=0;Y<h;Y++){let I=G;for(let D=0;D<u;D++)$[I++]=W,$[I++]=F,$[I++]=Q,$[I++]=z;G+=p}}}const RY={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},MY=r=>{const e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=RY[r[t]]<<4|RY[r[t+1]]&15;return e},PY={1:qb(()=>MY("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:qb(()=>MY("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class cT{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return PY[e]?n=new XT(PY[e](),e):n=cT.createFromSampleData(cT.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(const o of oxe)n.fillText(String.fromCharCode(o),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let i=cT._downsample(e,t);return new XT(i,t)}static _downsampleChar(e,t,n,i,o){const s=1*o,a=2*o;let l=i,u=0;for(let d=0;d<a;d++){const h=d/a*16,p=(d+1)/a*16;for(let _=0;_<s;_++){const C=_/s*10,S=(_+1)/s*10;let x=0,T=0;for(let M=h;M<p;M++){const W=t+Math.floor(M)*3840,F=1-(M-Math.floor(M));for(let Q=C;Q<S;Q++){const z=1-(Q-Math.floor(Q)),$=W+Math.floor(Q)*4,G=z*F;T+=G,x+=e[$]*e[$+3]/255*G}}const k=x/T;u=Math.max(u,k),n[l++]=tM(k)}}return u}static _downsample(e,t){const n=2*t*1*t,i=n*96,o=new Uint8ClampedArray(i);let s=0,a=0,l=0;for(let u=0;u<96;u++)l=Math.max(l,this._downsampleChar(e,a,o,s,t)),s+=n,a+=10*4;if(l>0){const u=255/l;for(let d=0;d<i;d++)o[d]*=u}return o}}const axe=140,lxe=2;class QT{constructor(e,t,n){const i=e.options,o=i.get(128),s=i.get(130),a=s.minimap,l=i.get(43),u=i.get(64);this.renderMinimap=a.renderMinimap,this.size=u.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(93),this.showSlider=u.showSlider,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=qb(()=>cT.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=QT._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=QT._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(JCe);return n?new Af(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(eye);return t?Af._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class dT{constructor(e,t,n,i,o,s,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=o,this.sliderHeight=s,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,o,s,a,l,u,d,h){const p=e.pixelRatio,_=e.minimapLineHeight,C=Math.floor(e.canvasInnerHeight/_),S=e.lineHeight;if(e.minimapHeightIsEditorHeight){const F=l*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),Q=Math.max(1,Math.floor(o*o/F)),z=Math.max(0,e.minimapHeight-Q),$=z/(d-o),G=u*$,Y=z>0,I=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new dT(u,d,Y,$,G,Q,1,Math.min(a,I))}let x;if(s&&n!==a){const F=n-t+1;x=Math.floor(F*_/p)}else{const F=o/S;x=Math.floor(F*_/p)}let T;e.scrollBeyondLastLine?T=(a-1)*_/p:T=Math.max(0,a*_/p-x),T=Math.min(e.minimapHeight-x,T);const k=T/(d-o),M=u*k;let W=0;if(e.scrollBeyondLastLine&&(W=o/S-1),C>=a+W){const Q=a,z=T>0;return new dT(u,d,z,k,M,x,1,Q)}else{let F=Math.max(1,Math.floor(t-M*p/_));h&&h.scrollHeight===d&&(h.scrollTop>u&&(F=Math.min(F,h.startLineNumber)),h.scrollTop<u&&(F=Math.max(F,h.startLineNumber)));const Q=Math.min(a,F+C-1),z=(u-i)/S,$=(t-F+z)*_/p;return new dT(u,d,!0,k,$,x,F,Q)}}}class LM{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}LM.INVALID=new LM(-1);class FY{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new rse(()=>LM.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,o=n.length;i<o;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class b${constructor(e,t,n,i){this._backgroundFillData=b$._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,o=n.g,s=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let u=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[u]=i,l[u+1]=o,l[u+2]=s,l[u+3]=a,u+=4;return l}}class JT{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,o=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:a}=PL.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:o,pixelRatio:i}),l=t/a,u=l/2;if(!n||n.minimapLines.length===0){let M=[];if(M[0]=1,a>1){for(let W=0,F=a-1;W<F;W++)M[W]=Math.round(W*l+u);M[a-1]=t}return[new JT(l,M),[]]}const d=n.minimapLines,h=d.length;let p=[],_=0,C=0,S=1;const x=10;let T=[],k=null;for(let M=0;M<a;M++){const W=Math.max(S,Math.round(M*l)),F=Math.max(W,Math.round((M+1)*l));for(;_<h&&d[_]<W;){if(T.length<x){const z=_+1+C;k&&k.type==="deleted"&&k._oldIndex===_-1?k.deleteToLineNumber++:(k={type:"deleted",_oldIndex:_,deleteFromLineNumber:z,deleteToLineNumber:z},T.push(k)),C--}_++}let Q;if(_<h&&d[_]<=F)Q=d[_],_++;else if(M===0?Q=1:M+1===a?Q=t:Q=Math.round(M*l+u),T.length<x){const z=_+1+C;k&&k.type==="inserted"&&k._i===M-1?k.insertToLineNumber++:(k={type:"inserted",_i:M,insertFromLineNumber:z,insertToLineNumber:z},T.push(k)),C++}p[M]=Q,S=Q}if(T.length<x)for(;_<h;){const M=_+1+C;k&&k.type==="deleted"&&k._oldIndex===_-1?k.deleteToLineNumber++:(k={type:"deleted",_oldIndex:_,deleteFromLineNumber:M,deleteToLineNumber:M},T.push(k)),C--,_++}else T=[{type:"flush"}];return[new JT(l,p),T]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),i=Math.max(i,o)):this.minimapLines[o]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class uxe extends jf{constructor(e){super(e),this.tokensColorTracker=w2.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new QT(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=JT.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new xM(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new QT(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=JT.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let i=[];for(let o=0,s=t-e+1;o<s;o++)n[o]?i[o]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+o-1]):i[o]=null;return i}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ln(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];n=new le(o,1,s,this._context.model.getLineMaxColumn(s))}else n=new le(e,1,t,this._context.model.getLineMaxColumn(t));const i=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let o=[];for(const s of i){if(!s.options.minimap)continue;const a=s.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),u=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new cse(new le(l,a.startColumn,u,a.endColumn),s.options))}return o}return i}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new le(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class xM extends ot{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(DG),this._domNode=tr(document.createElement("div")),Fv.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=tr(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=tr(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=tr(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=tr(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=tr(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=za(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const u=tu(this._slider.domNode),d=u.top+u.height/2;this._startSliderDragging(n.buttons,n.posx,d,n.posy,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,s=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(s/o)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new eE,this._sliderMouseDownListener=za(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Or.addTarget(this._domNode.domNode),this._sliderTouchStartListener=kt(this._domNode.domNode,co.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=kt(this._domNode.domNode,co.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=za(this._domNode.domNode,co.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,i,o){this._slider.toggleClassName("active",!0);const s=(a,l)=>{const u=Math.abs(l-t);if(Ol&&u>axe){this._model.setScrollTop(o.scrollTop);return}const d=a-n;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(d))};i!==n&&s(i,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,iD,a=>s(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new b$(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(DG),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=dT.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(le.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((p,_)=>(p.options.zIndex||0)-(_.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,u=this._decorationsCanvas.domNode.getContext("2d");u.clearRect(0,0,i,o);const d=new BY(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(u,t,d,e,s),this._renderDecorationsLineHighlights(u,n,d,e,s);const h=new BY(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(u,t,h,e,s,l,a,i),this._renderDecorationsHighlights(u,n,h,e,s,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(const l of t){const u=Math.max(i.startLineNumber,l.startLineNumber),d=Math.min(i.endLineNumber,l.endLineNumber);if(u>d)continue;for(let _=u;_<=d;_++)n.set(_,!0);const h=(u-i.startLineNumber)*o,p=(d-i.startLineNumber)*o+o;a>=h||(a>s&&e.fillRect(Y1,s,e.canvas.width,a-s),s=h),a=p}a>s&&e.fillRect(Y1,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,n,i,o){const s=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],u=l.options.minimap;if(!u||u.position!==Ld.Inline)continue;const d=Math.max(i.startLineNumber,l.range.startLineNumber),h=Math.min(i.endLineNumber,l.range.endLineNumber);if(d>h)continue;const p=u.getColor(this._theme);if(!p||p.isTransparent())continue;let _=s.get(p.toString());_||(_=p.transparent(.5).toString(),s.set(p.toString(),_)),e.fillStyle=_;for(let C=d;C<=h;C++){if(n.has(C))continue;n.set(C,!0);const S=(d-i.startLineNumber)*o;e.fillRect(Y1,S,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,i,o,s,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const u of t){const d=Math.max(i.startLineNumber,u.startLineNumber),h=Math.min(i.endLineNumber,u.endLineNumber);if(!(d>h))for(let p=d;p<=h;p++)this.renderDecorationOnLine(e,n,u,this._selectionColor,i,p,o,o,s,a,l)}}_renderDecorationsHighlights(e,t,n,i,o,s,a,l){for(const u of t){const d=u.options.minimap;if(!d)continue;const h=Math.max(i.startLineNumber,u.range.startLineNumber),p=Math.min(i.endLineNumber,u.range.endLineNumber);if(h>p)continue;const _=d.getColor(this._theme);if(!(!_||_.isTransparent()))for(let C=h;C<=p;C++)switch(d.position){case Ld.Inline:this.renderDecorationOnLine(e,n,u.range,_,i,C,o,o,s,a,l);continue;case Ld.Gutter:const S=(C-i.startLineNumber)*o,x=2;this.renderDecoration(e,_,x,S,lxe,o);continue}}}renderDecorationOnLine(e,t,n,i,o,s,a,l,u,d,h){const p=(s-o.startLineNumber)*l;if(p+a<0||p>this._model.options.canvasInnerHeight)return;const{startLineNumber:_,endLineNumber:C}=n,S=_===s?n.startColumn:1,x=C===s?n.endColumn:this._model.getLineMaxColumn(s),T=this.getXOffsetForPosition(t,s,S,u,d,h),k=this.getXOffsetForPosition(t,s,x,u,d,h);this.renderDecoration(e,i,T,p,k-T,a)}getXOffsetForPosition(e,t,n,i,o,s){if(n===1)return Y1;if((n-1)*o>=s)return s;let l=e.get(t);if(!l){const u=this._model.getLineContent(t);l=[Y1];let d=Y1;for(let h=1;h<u.length+1;h++){const p=u.charCodeAt(h-1),_=p===9?i*o:Pv(p)?2*o:o,C=d+_;if(C>=s){l[h]=s;break}l[h]=C,d=C}e.set(t,l)}return n-1<l.length?l[n-1]:s}renderDecoration(e,t,n,i,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,o,s)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const j=this._lastRenderData._get();return new FY(e,j.imageData,j.lines)}const o=this._getBuffer();if(!o)return null;let[s,a,l]=xM._renderUntouchedLines(o,t,n,i,this._lastRenderData);const u=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,p=this._model.options.backgroundColor,_=this._model.options.foregroundAlpha,C=this._model.tokensColorTracker,S=C.backgroundIsLight(),x=this._model.options.renderMinimap,T=this._model.options.charRenderer(),k=this._model.options.fontScale,M=this._model.options.minimapCharWidth,F=(x===1?2:2+1)*k,Q=i>F?Math.floor((i-F)/2):0,z=p.a/255,$=new Af(Math.round((p.r-h.r)*z+h.r),Math.round((p.g-h.g)*z+h.g),Math.round((p.b-h.b)*z+h.b),255);let G=0;const Y=[];for(let j=0,ne=n-t+1;j<ne;j++)l[j]&&xM._renderLine(o,$,p.a,S,x,M,C,_,T,G,Q,d,u[j],k,i),Y[j]=new LM(G),G+=i;const I=s===-1?0:s,O=(a===-1?o.height:a)-I;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,I,o.width,O),new FY(e,o,Y)}static _renderUntouchedLines(e,t,n,i,o){const s=[];if(!o){for(let $=0,G=n-t+1;$<G;$++)s[$]=!0;return[-1,-1,s]}const a=o._get(),l=a.imageData.data,u=a.rendLineNumberStart,d=a.lines,h=d.length,p=e.width,_=e.data,C=(n-t+1)*i*p*4;let S=-1,x=-1,T=-1,k=-1,M=-1,W=-1,F=0;for(let $=t;$<=n;$++){const G=$-t,Y=$-u,I=Y>=0&&Y<h?d[Y].dy:-1;if(I===-1){s[G]=!0,F+=i;continue}const D=I*p*4,O=(I+i)*p*4,V=F*p*4,j=(F+i)*p*4;k===D&&W===V?(k=O,W=j):(T!==-1&&(_.set(l.subarray(T,k),M),S===-1&&T===0&&T===M&&(S=k),x===-1&&k===C&&T===M&&(x=T)),T=D,k=O,M=V,W=j),s[G]=!1,F+=i}T!==-1&&(_.set(l.subarray(T,k),M),S===-1&&T===0&&T===M&&(S=k),x===-1&&k===C&&T===M&&(x=T));const Q=S===-1?-1:S/(p*4),z=x===-1?-1:x/(p*4);return[Q,z,s]}static _renderLine(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S){const x=_.content,T=_.tokens,k=e.width-s,M=S===1;let W=Y1,F=0,Q=0;for(let z=0,$=T.getCount();z<$;z++){const G=T.getEndOffset(z),Y=T.getForeground(z),I=a.getColor(Y);for(;F<G;F++){if(W>k)return;const D=x.charCodeAt(F);if(D===9){const O=p-(F+Q)%p;Q+=O-1,W+=O*s}else if(D===32)W+=s;else{const O=Pv(D)?2:1;for(let V=0;V<O;V++)if(o===2?u.blockRenderChar(e,W,d+h,I,l,t,n,M):u.renderChar(e,W,d+h,D,I,l,t,n,C,i,M),W+=s,W>k)return}}}}}class BY{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,o=this._endLineNumber-this._startLineNumber+1;i<o;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}mo((r,e)=>{const t=r.getColor(nye);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=r.getColor(iye);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const i=r.getColor(rye);i&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);const o=r.getColor(rD);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class cxe extends jf{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=tr(document.createElement("div")),Fv.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=tr(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const o=t[n];this._renderWidget(this._widgets[o])}}}class dxe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(128),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const i=t.getColor(bEe);this.borderColor=i?i.toString():null,this.hideCursor=n.get(51);const o=t.getColor($oe);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const s=n.get(64),a=s.enabled,l=s.side,u=a?t.getColor(CEe)||es.getDefaultBackground():null;u===null||l==="left"?this.backgroundColor=null:this.backgroundColor=je.Format.CSS.formatHex(u);const h=n.get(130).overviewRuler;this.top=h.top,this.right=h.right,this.domWidth=h.width,this.domHeight=h.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=_}_initLanes(e,t,n){const i=t-e;if(n>=3){const o=Math.floor(i/3),s=Math.floor(i/3),a=i-o-s,l=e,u=l+o,d=l+o+a;return[[0,l,u,l,d,l,u,l],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(n===2){const o=Math.floor(i/2),s=i-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,s,o+s,o+s,o+s]]}else{const o=e,s=i;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class hxe extends jf{constructor(e){super(e),this._domNode=tr(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=es.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new dxe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Ge.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),s=t/o,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,u=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));const h=this._settings.x,p=this._settings.w;a.sort(dse.cmp);for(const _ of a){const C=_.color,S=_.data;d.fillStyle=C;let x=0,T=0,k=0;for(let M=0,W=S.length/3;M<W;M++){const F=S[3*M],Q=S[3*M+1],z=S[3*M+2];let $=i.getVerticalOffsetForLineNumber(Q)*s|0,G=(i.getVerticalOffsetForLineNumber(z)+n)*s|0;if(G-$<l){let I=($+G)/2|0;I<u?I=u:I+u>t&&(I=t-u),$=I-u,G=I+u}$>k+1||F!==x?(M!==0&&d.fillRect(h[x],T,p[x],k-T),x=F,T=$,k=G):G>k&&(k=G)}d.fillRect(h[x],T,p[x],k-T)}if(!this._settings.hideCursor&&this._settings.cursorColor){const _=2*this._settings.pixelRatio|0,C=_/2|0,S=this._settings.x[7],x=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let T=-100,k=-100;for(let M=0,W=this._cursorPositions.length;M<W;M++){const F=this._cursorPositions[M];let Q=i.getVerticalOffsetForLineNumber(F.lineNumber)*s|0;Q<C?Q=C:Q+C>t&&(Q=t-C);const z=Q-C,$=z+_;z>k+1?(M!==0&&d.fillRect(S,T,x,k-T),T=z,k=$):$>k&&(k=$)}d.fillRect(S,T,x,k-T)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}}class WY{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class eN{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class fxe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(eN.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),o=n/i,s=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,u=this._zones.length;l<u;l++){const d=this._zones[l];if(!e){const k=d.getColorZones();if(k){a.push(k);continue}}const h=Math.floor(o*this._getVerticalOffsetForLine(d.startLineNumber)),p=Math.floor(o*(this._getVerticalOffsetForLine(d.endLineNumber)+t));let _=Math.floor((h+p)/2),C=p-_;C<s&&(C=s),_-C<0&&(_=C),_+C>n&&(_=n-C);const S=d.color;let x=this._color2Id[S];x||(x=++this._lastAssignedId,this._color2Id[S]=x,this._id2Color[x]=S);const T=new WY(_-C,_+C,x);d.setColorZone(T),a.push(T)}return this._colorZonesInvalid=!1,a.sort(WY.compare),a}}class gxe extends m2{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=tr(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new fxe(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(128)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(128)&&(this._zoneManager.setPixelRatio(t.get(128)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,i,e),!0}_renderOneLane(e,t,n,i){let o=0,s=0,a=0;for(const l of t){const u=l.colorId,d=l.from,h=l.to;u!==o?(e.fillRect(0,s,i,a-s),o=u,e.fillStyle=n[o],s=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,s,i,a-s),s=d,a=h)}e.fillRect(0,s,i,a-s)}}class pxe extends jf{constructor(e){super(e),this.domNode=tr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.model.getTextModelOptions(),o=i;let s=t-e;for(;s>0;){const a=tr(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],o=this._rulers[t];i.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}mo((r,e)=>{const t=r.getColor(_Ee);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class mxe extends jf{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=tr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(130);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}mo((r,e)=>{const t=r.getColor(rD);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class _xe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class vxe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function bxe(r){return new _xe(r)}function Cxe(r){return new vxe(r.lineNumber,r.ranges.map(bxe))}class is extends sD{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let o=null,s=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let u=0;!o&&u<n.length;u++)n[u].lineNumber===a&&(o=n[u].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let u=n.length-1;!s&&u>=0;u--)n[u].lineNumber===l&&(s=n[u].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let a=0,l=t.length;a<l;a++){const u=t[a].ranges[0],d=u.left,h=u.left+u.width,p={top:0,bottom:0},_={top:0,bottom:0};if(a>0){const C=t[a-1].ranges[0].left,S=t[a-1].ranges[0].left+t[a-1].ranges[0].width;BA(d-C)<i?p.top=2:d>C&&(p.top=1),BA(h-S)<i?_.top=2:C<h&&h<S&&(_.top=1)}else o&&(p.top=o.startStyle.top,_.top=o.endStyle.top);if(a+1<l){const C=t[a+1].ranges[0].left,S=t[a+1].ranges[0].left+t[a+1].ranges[0].width;BA(d-C)<i?p.bottom=2:C<d&&d<S&&(p.bottom=1),BA(h-S)<i?_.bottom=2:h<S&&(_.bottom=1)}else s&&(p.bottom=s.startStyle.bottom,_.bottom=s.endStyle.bottom);u.startStyle=p,u.endStyle=_}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(Cxe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,i,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const o=!!i[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,u=i[i.length-1].lineNumber;for(let d=0,h=i.length;d<h;d++){const p=i[d],_=p.lineNumber,C=_-t,S=n&&(_===u||_===l)?a:s,x=n&&_===l?1:0;let T="",k="";for(let M=0,W=p.ranges.length;M<W;M++){const F=p.ranges[M];if(o){const z=F.startStyle,$=F.endStyle;if(z.top===1||z.bottom===1){T+=this._createSelectionPiece(x,S,is.SELECTION_CLASS_NAME,F.left-is.ROUNDED_PIECE_WIDTH,is.ROUNDED_PIECE_WIDTH);let G=is.EDITOR_BACKGROUND_CLASS_NAME;z.top===1&&(G+=" "+is.SELECTION_TOP_RIGHT),z.bottom===1&&(G+=" "+is.SELECTION_BOTTOM_RIGHT),T+=this._createSelectionPiece(x,S,G,F.left-is.ROUNDED_PIECE_WIDTH,is.ROUNDED_PIECE_WIDTH)}if($.top===1||$.bottom===1){T+=this._createSelectionPiece(x,S,is.SELECTION_CLASS_NAME,F.left+F.width,is.ROUNDED_PIECE_WIDTH);let G=is.EDITOR_BACKGROUND_CLASS_NAME;$.top===1&&(G+=" "+is.SELECTION_TOP_LEFT),$.bottom===1&&(G+=" "+is.SELECTION_BOTTOM_LEFT),T+=this._createSelectionPiece(x,S,G,F.left+F.width,is.ROUNDED_PIECE_WIDTH)}}let Q=is.SELECTION_CLASS_NAME;if(o){const z=F.startStyle,$=F.endStyle;z.top===0&&(Q+=" "+is.SELECTION_TOP_LEFT),z.bottom===0&&(Q+=" "+is.SELECTION_BOTTOM_LEFT),$.top===0&&(Q+=" "+is.SELECTION_TOP_RIGHT),$.bottom===0&&(Q+=" "+is.SELECTION_BOTTOM_RIGHT)}k+=this._createSelectionPiece(x,S,Q,F.left,F.width)}e[C][0]+=T,e[C][1]+=k}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let s=n;s<=i;s++){const a=s-n;t[a]=["",""]}const o=[];for(let s=0,a=this._selections.length;s<a;s++){const l=this._selections[s];if(l.isEmpty()){o[s]=null;continue}const u=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);o[s]=u,this._actualRenderOneSelection(t,n,this._selections.length>1,u)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}is.SELECTION_CLASS_NAME="selected-text";is.SELECTION_TOP_LEFT="top-left-radius";is.SELECTION_BOTTOM_LEFT="bottom-left-radius";is.SELECTION_TOP_RIGHT="top-right-radius";is.SELECTION_BOTTOM_RIGHT="bottom-right-radius";is.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";is.ROUNDED_PIECE_WIDTH=10;mo((r,e)=>{const t=r.getColor(vC);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=r.getColor(Vz);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=r.getColor(rCe);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function BA(r){return r<0?-r:r}class VY{constructor(e,t,n,i,o,s){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=o,this.textContentClassName=s}}class HY{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=tr(document.createElement("div")),this._domNode.setClassName(`cursor ${$w}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),ac.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Ge(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),ac.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===dl.Line||this._cursorStyle===dl.LineThin){const p=e.visibleRangeForPosition(this._position);if(!p||p.outsideRenderedLine)return null;let _;if(this._cursorStyle===dl.Line){if(_=fG(this._lineCursorWidth>0?this._lineCursorWidth:2),_>2){const x=this._context.model.getLineContent(this._position.lineNumber),T=UR(x,this._position.column-1);t=x.substr(this._position.column-1,T)}}else _=fG(1);let C=p.left;_>=2&&C>=1&&(C-=1);const S=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new VY(S,C,_,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),i=UR(n,this._position.column-1),o=e.linesVisibleRangesForRange(new le(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+i),!1);if(!o||o.length===0)return null;const s=o[0];if(s.outsideRenderedLine||s.ranges.length===0)return null;const a=s.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let u="";if(this._cursorStyle===dl.Block){const p=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,i);const _=p.tokens.findTokenIndexAtOffset(this._position.column-1);u=p.tokens.getClassName(_)}let d=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===dl.Underline||this._cursorStyle===dl.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new VY(d,a.left,l,h,t,u)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${$w} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class tN extends jf{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new HY(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=tr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new uc,this._cursorFlatBlinkInterval=new h2,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const o=new HY(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,o=e.selections.length;i<o;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let i=0,o=e.ranges.length;i<o;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},tN.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},tN.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case dl.Line:e+=" cursor-line-style";break;case dl.Block:e+=" cursor-block-style";break;case dl.Underline:e+=" cursor-underline-style";break;case dl.LineThin:e+=" cursor-line-thin-style";break;case dl.BlockOutline:e+=" cursor-block-outline-style";break;case dl.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let o=0,s=this._secondaryCursors.length;o<s;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}tN.BLINK_INTERVAL=500;mo((r,e)=>{const t=r.getColor($oe);if(t){let n=r.getColor(pEe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),r.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const I5=()=>{throw new Error("Invalid change accessor")};class yxe extends jf{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=tr(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=tr(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.model.changeWhitespace(i=>{const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const l=o[s],u=this._zones[l],d=this._computeWhitespaceProps(u.delegate);u.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(u.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const s=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Ge(s,this._context.model.getModelLineMaxColumn(s))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),o=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:i.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const i={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{o&&(t=this._removeZone(n,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(n,o)||t)}};wxe(e,i),i.addZone=I5,i.removeZone=I5,i.layoutZone=I5}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:tr(t.domNode),marginDomNode:t.marginDomNode?tr(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){ti(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){ti(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const s of t)this._zones[s.id].isInHiddenArea||(n[s.id]=s,i=!0);const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const l=o[s],u=this._zones[l];let d=0,h=0,p="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,p="block",u.isVisible||(u.domNode.setAttribute("monaco-visible-view-zone","true"),u.isVisible=!0),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(u.isVisible&&(u.domNode.removeAttribute("monaco-visible-view-zone"),u.isVisible=!1),this._safeCallOnDomNodeTop(u.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),u.domNode.setTop(d),u.domNode.setHeight(h),u.domNode.setDisplay(p),u.marginDomNode&&(u.marginDomNode.setTop(d),u.marginDomNode.setHeight(h),u.marginDomNode.setDisplay(p))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function wxe(r,e){try{return r(e)}catch(t){ti(t)}}class Sxe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Exe{constructor(e,t,n){this.configuration=e,this.theme=new Sxe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class Lxe{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new le(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class xxe extends m2{constructor(e,t,n,i,o,s){super(),this._selections=[new ln(1,1,1,1)],this._renderAnimationFrame=null;const a=new DLe(t,i,o,e);this._context=new Exe(t,n.getColorTheme(),i),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(S=>{this._context.theme.update(S),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new CLe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=tr(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=tr(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=tr(document.createElement("div")),Fv.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new YLe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new T4(this._context,this._linesContent),this._viewZones=new yxe(this._context),this._viewParts.push(this._viewZones);const l=new hxe(this._context);this._viewParts.push(l);const u=new mxe(this._context);this._viewParts.push(u);const d=new TLe(this._context);this._viewParts.push(d),d.addDynamicOverlay(new RLe(this._context)),d.addDynamicOverlay(new is(this._context)),d.addDynamicOverlay(new XLe(this._context)),d.addDynamicOverlay(new PLe(this._context));const h=new NLe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new MLe(this._context)),h.addDynamicOverlay(new ZLe(this._context)),h.addDynamicOverlay(new nxe(this._context)),h.addDynamicOverlay(new txe(this._context)),h.addDynamicOverlay(new px(this._context));const p=new fS(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(p),this._contentWidgets=new ALe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new tN(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new cxe(this._context),this._viewParts.push(this._overlayWidgets);const _=new pxe(this._context);this._viewParts.push(_);const C=new uxe(this._context);if(this._viewParts.push(C),l){const S=this._scrollbar.getOverviewRulerLayoutInfo();S.parent.insertBefore(l.getDomNode(),S.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(_.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(C.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new bLe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new sLe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ge(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ge(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+KR(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=qie(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){Dxe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!fz(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new Lxe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new mye(this._context.viewLayout,n,this._viewLines);for(const o of e)o.prepareRender(i);for(const o of e)o.render(i),o.onDidRender();Math.abs(kT()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),i=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new Ge(i.lineNumber,i.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?I4.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new gxe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const i=e.position?e.position.position:null;i!==null&&(t=new le(i.lineNumber,i.column,i.lineNumber,i.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function Dxe(r){try{return r()}catch(e){ti(e)}}class DM{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new cl(new le(1,1,1,1),0,new Ge(1,1),0),new cl(new le(1,1,1,1),0,new Ge(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ni(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return ln.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,s),l=this._validatePositionWithCache(e,o,i,a);return n.equals(s)&&i.equals(a)&&o.equals(l)?t:new cl(le.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+i.column-a.column,s,t.leftoverVisibleColumns+n.column-s.column)}_setState(e,t,n){if(n&&(n=DM._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new cl(i,o,s,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new cl(i,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new cl(i,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new Ge(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new Ge(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new le(i.lineNumber,i.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new cl(s,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class UY{constructor(e){this.context=e,this.primaryCursor=new DM(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;i.isBefore(e)&&(e=i)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const i=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(i)&&(e=i)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Ni.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let i=n-t;for(let o=0;o<i;o++)this._addSecondaryCursor()}else if(t>n){let i=t-n;for(let o=0;o<i;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let i=0;i<n;i++)this.secondaryCursors[i].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new DM(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,i)=>n.selection.startLineNumber===i.selection.startLineNumber?n.selection.startColumn-i.selection.startColumn:n.selection.startLineNumber-i.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1],s=i.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||s.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):l=a.getStartPosition().isBefore(s.getEndPosition()),l){const u=i.index<o.index?n:n+1,d=i.index<o.index?n+1:n,h=t[d].index,p=t[u].index,_=t[d].selection,C=t[u].selection;if(!_.equalsSelection(C)){const S=_.plusRange(C),x=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn,T=C.selectionStartLineNumber===C.startLineNumber&&C.selectionStartColumn===C.startColumn;let k;h===this.lastAddedCursorIndex?(k=x,this.lastAddedCursorIndex=p):k=T;let M;k?M=new ln(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn):M=new ln(S.endLineNumber,S.endColumn,S.startLineNumber,S.startColumn),t[u].selection=M;const W=Ni.fromModelSelection(M);e[p].setState(this.context,W.modelState,W.viewState)}for(const S of t)S.index>h&&S.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}class Ixe{constructor(){this.type=0}}class kxe{constructor(){this.type=1}}class Txe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Nxe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class HE{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class WA{constructor(){this.type=5}}class Axe{constructor(e){this.type=6,this.isFocused=e}}class Oxe{constructor(){this.type=7}}class VA{constructor(){this.type=8}}class hse{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class oW{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class sW{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class qO{constructor(e,t,n,i,o,s){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=i,this.revealHorizontal=o,this.scrollType=s}}class Rxe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Mxe{constructor(){this.type=14}}class Pxe{constructor(e){this.type=15,this.ranges=e}}class Fxe{constructor(){this.type=16}}let Bxe=class{constructor(){this.type=17}};class Wxe extends ot{constructor(){super(),this._onEvent=this._register(new Fe),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Vxe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class Vxe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class C${constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new C$(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class y${constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new y$(this.oldHasFocus,e.hasFocus)}}class w${constructor(e,t,n,i,o,s,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=o,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new w$(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class zY{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class IM{constructor(e,t,n,i,o,s,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=o,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return IM._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new IM(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class Hxe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class k5{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class $Y{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(le.compareRangesUsingStarts),e.sort(le.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class _x extends ot{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new EY(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new UY(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=nr(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new EY(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1;i!==null&&i.length>_x.MAX_CURSOR_COUNT&&(i=i.slice(0,_x.MAX_CURSOR_COUNT),o=!0);const s=new k5(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i){const o=this._cursors.getViewPositions();if(o.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,i);return}else{const s=o[0],a=new le(s.lineNumber,s.column,s.lineNumber,s.column);this._emitCursorRevealRange(e,t,a,null,0,n,i)}}_revealPrimaryCursor(e,t,n,i,o){const s=this._cursors.getViewPositions();if(s.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,i,o);else{const a=s[0],l=new le(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,i,o)}}_emitCursorRevealRange(e,t,n,i,o,s,a){e.emitViewEvent(new qO(t,n,i,o,s,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){let n=[];for(let i=0,o=t.length;i<o;i++){const s=t[i];let a=1,l=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(l=s.position.column);let u=a,d=l;s.selectionStart&&s.selectionStart.lineNumber&&(u=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(d=s.selectionStart.column),n.push({selectionStartLineNumber:u,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ni.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof Ooe){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new UY(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const i=Ni.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,i)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const i=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ni.fromModelSelections(i))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:ho.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:ho.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,Ni.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],i);this._autoClosedActions.push(new $Y(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Uxe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],i=[];for(let o=0;o<e.commands.length;o++){const s=e.commands[o];s instanceof ise&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),i.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){const s=new k5(this._model,this);if(s.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Nxe(l,a)),!i||i.cursorState.length!==s.cursorState.length||s.cursorState.some((u,d)=>!u.modelState.equals(i.cursorState[d].modelState))){const u=i?i.cursorState.map(h=>h.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new IM(u,a,d,s.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const s=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;const a=s[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const u=l[0].open,d=o.text.length-s[2].length-1,h=o.text.lastIndexOf(u,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,i){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);let s=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,u=>{if(o)for(let h=0,p=o.length;h<p;h++){const[_,C]=o[h],S=u[h],x=S.range.startLineNumber,T=S.range.startColumn-1+_,k=S.range.startColumn-1+C;s.push(new le(x,k+1,x,k+2)),a.push(new le(x,T+1,x,k+2))}const d=i(u);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const o=new k5(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){ti(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,o,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return $Y.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(qo.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let o=0;for(;o<i;){const s=UR(t,o),a=t.substr(o,s);this._executeEditOperation(qo.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=s}}else this._executeEditOperation(qo.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,o,s){if(t.length===0&&n===0&&i===0){if(o!==0){const a=this.getSelections().map(l=>{const u=l.getPosition();return new ln(u.lineNumber,u.column+o,u.lineNumber,u.column+o)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(qo.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))},e,s)}paste(e,t,n,i,o){this._executeEdit(()=>{this._executeEditOperation(qo.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(gS.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new md(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new md(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}_x.MAX_CURSOR_COUNT=1e4;class Uxe{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let s=0,a=i.trackedRanges.length;s<a;s++)i.model._setTrackedRange(i.trackedRanges[s],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let u=0,d=i.length;u<d;u++)o.hasOwnProperty(i[u].identifier.major.toString())||s.push(i[u]);n.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,u=>{let d=[];for(let _=0;_<e.selectionsBefore.length;_++)d[_]=[];for(const _ of u)_.identifier&&d[_.identifier.major].push(_);const h=(_,C)=>_.identifier.minor-C.identifier.minor;let p=[];for(let _=0;_<e.selectionsBefore.length;_++)d[_].length>0?(d[_].sort(h),p[_]=t[_].computeCursorState(e.model,{getInverseEditOperations:()=>d[_],getTrackedSelection:C=>{const S=parseInt(C,10),x=e.model._getTrackedRange(e.trackedRanges[S]);return e.trackedRangesDirection[S]===0?new ln(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn):new ln(x.endLineNumber,x.endColumn,x.startLineNumber,x.startColumn)}})):p[_]=e.selectionsBefore[_];return p});a||(a=e.selectionsBefore);let l=[];for(let u in o)o.hasOwnProperty(u)&&l.push(parseInt(u,10));l.sort((u,d)=>d-u);for(const u of l)a.splice(u,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){let i=[],o=0;const s=(h,p,_=!1)=>{le.isEmpty(h)&&p===""||i.push({identifier:{major:t,minor:o++},range:h,text:p,forceMoveMarkers:_,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:s,addTrackedEditOperation:(h,p,_)=>{a=!0,s(h,p,_)},trackSelection:(h,p)=>{const _=ln.liftSelection(h);let C;if(_.isEmpty())if(typeof p=="boolean")p?C=2:C=3;else{const T=e.model.getLineMaxColumn(_.startLineNumber);_.startColumn===T?C=2:C=3}else C=1;const S=e.trackedRanges.length,x=e.model._setTrackedRange(null,_,C);return e.trackedRanges[S]=x,e.trackedRangesDirection[S]=_.getDirection(),S.toString()}};try{n.getEditOperations(e.model,d)}catch(h){return ti(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-le.compareRangesUsingEnds(n.range,i.range));let t={};for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(le.getStartPosition(i.range).isBefore(le.getEndPosition(o.range))){let s;i.identifier.major>o.identifier.major?s=i.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class fse{constructor(e,t,n,i,o,s){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=o,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const S2={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},jY={getInitialState:()=>_2,tokenize2:(r,e,t,n)=>o$(0,r,t,n)};function gse(r,e,t=jY){return $xe(r,e,t||jY)}function zxe(r,e,t,n,i,o,s){let a="<div>",l=n,u=0,d=!0;for(let h=0,p=e.getCount();h<p;h++){const _=e.getEndOffset(h);if(_<=n)continue;let C="";for(;l<_&&l<i;l++){const S=r.charCodeAt(l);switch(S){case 9:let x=o-(l+u)%o;for(u+=x-1;x>0;)s&&d?(C+="&#160;",d=!1):(C+=" ",d=!0),x--;break;case 60:C+="&lt;",d=!1;break;case 62:C+="&gt;",d=!1;break;case 38:C+="&amp;",d=!1;break;case 0:C+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:C+="",d=!1;break;case 13:C+="&#8203",d=!1;break;case 32:s&&d?(C+="&#160;",d=!1):(C+=" ",d=!0);break;default:C+=String.fromCharCode(S),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${C}</span>`,_>i||l>=i)break}return a+="</div>",a}function $xe(r,e,t){let n='<div class="monaco-tokenized-source">';const i=Mv(r);let o=t.getInitialState();for(let s=0,a=i.length;s<a;s++){const l=i[s];s>0&&(n+="<br/>");const u=t.tokenize2(l,!0,o,0);Ua.convertToEndOffset(u.tokens,l.length);const h=new Ua(u.tokens,l,e).inflate();let p=0;for(let _=0,C=h.getCount();_<C;_++){const S=h.getClassName(_),x=h.getEndOffset(_);n+=`<span class="${S}">${Cz(l.substring(p,x))}</span>`,p=x}o=u.endState}return n+="</div>",n}class jxe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class qxe{constructor(e,t,n,i,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=o,this.prefixSum=0}}class nN{constructor(e,t,n,i){this._instanceId=ure(++nN.INSTANCE_COUNT),this._pendingChanges=new jxe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,o=e.length;for(;i<o;){const s=i+o>>>1;t===e[s].afterLineNumber?n<e[s].ordinal?o=s:i=s+1:t<e[s].afterLineNumber?o=s:i=s+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,o,s,a)=>{t=!0,i=i|0,o=o|0,s=s|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new qxe(l,i,o,s,a)),l},changeOneWhitespace:(i,o,s)=>{t=!0,o=o|0,s=s|0,this._pendingChanges.change({id:i,newAfterLineNumber:o,newHeight:s})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const u=this._findWhitespaceIndex(l.id);u!==-1&&this._removeWhitespace(u)}return}const i=new Set;for(const l of n)i.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const s=l=>{let u=[];for(const d of l)if(!i.has(d.id)){if(o.has(d.id)){const h=o.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}u.push(d)}return u},a=s(this._arr).concat(s(e));a.sort((l,u)=>l.afterLineNumber===u.afterLineNumber?l.ordinal-u.ordinal:l.afterLineNumber-u.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=nN.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const o=this._arr[i];this._removeWhitespace(i),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const s=(i-n|0)/2|0,a=n+s|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,o=t;for(;i<o;){const s=(i+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+n)i=s+1;else{if(e>=a)return s;o=s}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(i)|0;let s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let u,d;a===-1?(a=l,d=s+1,u=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);let h=o,p=h;const _=5e5;let C=0;o>=_&&(C=Math.floor(o/_)*_,C=Math.floor(C/n)*n,p-=C);const S=[],x=e+(t-e)/2;let T=-1;for(let F=i;F<=s;F++){if(T===-1){const Q=h,z=h+n;(Q<=x&&x<z||Q>x)&&(T=F)}for(h+=n,S[F-i]=p,p+=n;d===F;)p+=u,h+=u,a++,a>=l?d=s+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,u=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){s=F;break}}T===-1&&(T=s);const k=this.getVerticalOffsetForLineNumber(s)|0;let M=i,W=s;return M<W&&o<e&&M++,M<W&&k+n>t&&W--,{bigNumbersDelta:C,startLineNumber:i,endLineNumber:s,relativeVerticalOffset:S,centeredLineNumber:T,completelyVisibleStartLineNumber:M,completelyVisibleEndLineNumber:W}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=i+o)return-1;for(;t<n;){const s=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(e>=a+l)t=s+1;else{if(e>=a)return s;n=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];let o=[];for(let s=n;s<=i;s++){const a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}nN.INSTANCE_COUNT=0;const Kxe=125;class Fk{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Gxe extends ot{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Fe),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Fk(0,0,0,0),this._scrollable=this._register(new k4(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new C$(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class Yxe extends ot{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,o=i.get(130),s=i.get(74);this._linesLayout=new nN(t,i.get(58),s.top,s.bottom),this._scrollable=this._register(new Gxe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Fk(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?Kxe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(130)){const n=t.get(130),i=n.contentWidth,o=n.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new Fk(i,s.contentWidth,o,this._getContentHeight(i,o,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(91);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return i.get(93)?o+=Math.max(0,t-i.get(58)-i.get(74).bottom):o+=this._getHorizontalScrollbarHeight(e,n),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new Fk(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new OY(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new OY(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(131),i=t.get(43);if(n.isViewportWrapping){const o=t.get(130),s=t.get(64);return e>o.contentWidth+i.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?e+o.verticalScrollbarWidth:e}else{const o=t.get(92)*i.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o,s)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Fk(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}function T5(r,e){return r===null?e?kM.INSTANCE:TM.INSTANCE:new Zxe(r,e)}class Zxe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.getOutputLineCount():0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,0)}getInputEndOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,this._lineBreakData.getMaxOutputOffset(e))}getViewLineContent(e,t,n){this.assertVisible();const i=n>0?this._lineBreakData.breakOffsets[n-1]:0,o=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let s;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,u)=>new ym(0,0,l+1,this._lineBreakData.injectionOptions[u],0));s=ym.applyInjectedText(e.getLineContent(t),a).substring(i,o)}else s=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});return n>0&&(s=qY(this._lineBreakData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,n){return this.assertVisible(),this._lineBreakData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){this.assertVisible();const i=this._lineBreakData,o=n>0?i.wrappedTextIndentLength:0,s=i.injectionOffsets,a=i.injectionOptions;let l,u;if(s){const S=e.getLineTokens(t).withInserted(s.map((M,W)=>({offset:M,text:a[W].content,tokenMetadata:Ua.defaultTokenMetadata}))),x=n>0?i.breakOffsets[n-1]:0,T=i.breakOffsets[n];l=S.sliceAndInflate(x,T,o),u=new Array;let k=0;for(let M=0;M<s.length;M++){const W=a[M].content.length,F=s[M]+k,Q=s[M]+k+W;if(F>T)break;if(x<Q){const z=a[M];if(z.inlineClassName){const $=n>0?i.wrappedTextIndentLength:0,G=$+Math.max(F-x,0),Y=$+Math.min(Q-x,T);G!==Y&&u.push(new rxe(G,Y,z.inlineClassName,z.inlineClassNameAffectsLetterSpacing))}}k+=W}}else{const S=this.getInputStartOffsetOfOutputLineIndex(n),x=this.getInputEndOffsetOfOutputLineIndex(n);l=e.getLineTokens(t).sliceAndInflate(S,x,o),u=null}let d=l.getLineContent();n>0&&(d=qY(i.wrappedTextIndentLength)+d);const h=this._lineBreakData.getMinOutputOffset(n)+1,p=d.length+1,_=n+1<this.getViewLineCount(),C=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new v$(d,_,h,p,C,l,u)}getViewLinesData(e,t,n,i,o,s,a){this.assertVisible();for(let l=n;l<i;l++){let u=o+l-n;if(!s[u]){a[u]=null;continue}a[u]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){return this.assertVisible(),this._lineBreakData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this.assertVisible(),this._lineBreakData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this.assertVisible();const n=this._lineBreakData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._lineBreakData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class kM{constructor(){}isVisible(){return!0}setVisible(e){return e?this:TM.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let i=e.getLineTokens(t),o=i.getLineContent();return new v$(o,!1,1,o.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Ge(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}kM.INSTANCE=new kM;class TM{constructor(){}isVisible(){return!1}setVisible(e){return e?kM.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,o,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}TM.INSTANCE=new TM;let N5=[""];function qY(r){if(r>=N5.length)for(let e=1;e<=r;e++)N5[e]=Xxe(e);return N5[r]}function Xxe(r){return new Array(r+1).join(" ")}class Qxe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=VE(e);const n=this.values,i=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=VE(e),t=VE(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=VE(e),t=VE(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=VE(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,o=0,s=0;for(;t<=n;)if(i=t+(n-t)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)t=i+1;else break;return new pse(i,e-s)}}class Jxe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new pse(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=MT(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let o=0;o<n;o++)this._indexBySum[i+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class pse{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class eDe{constructor(e,t,n,i,o,s,a,l,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new nDe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),o=n.length,s=this.createLineBreaksComputer(),a=new ML(ym.fromDecorations(i));for(let S=0;S<o;S++){const x=a.takeWhile(T=>T.lineNumber===S+1);s.addRequest(n[S],x,t?t[S]:null)}const l=s.finalize();let u=[],d=this.hiddenAreasDecorationIds.map(S=>this.model.getDecorationRange(S)).sort(le.compareRangesUsingStarts),h=1,p=0,_=-1,C=_+1<d.length?p+1:o+2;for(let S=0;S<o;S++){let x=S+1;x===C&&(_++,h=d[_].startLineNumber,p=d[_].endLineNumber,C=_+1<d.length?p+1:o+2);let T=x>=h&&x<=p,k=T5(l[S],!T);u[S]=k.getViewLineCount(),this.modelLineProjections[S]=k}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Jxe(u)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(p=>this.model.validateRange(p));let n=tDe(t),i=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(le.compareRangesUsingStarts);if(n.length===i.length){let p=!1;for(let _=0;_<n.length;_++)if(!n[_].equalsRange(i[_])){p=!0;break}if(!p)return!1}const o=n.map(p=>({range:p,options:pi.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);let s=n,a=1,l=0,u=-1,d=u+1<s.length?l+1:this.modelLineProjections.length+2,h=!1;for(let p=0;p<this.modelLineProjections.length;p++){let _=p+1;_===d&&(u++,a=s[u].startLineNumber,l=s[u].endLineNumber,d=u+1<s.length?l+1:this.modelLineProjections.length+2);let C=!1;if(_>=a&&_<=l?this.modelLineProjections[p].isVisible()&&(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!1),C=!0):(h=!0,this.modelLineProjections[p].isVisible()||(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!0),C=!0)),C){let S=this.modelLineProjections[p].getViewLineCount();this.projectedModelLineLineCounts.setValue(p,S)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const o=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(o&&s&&a&&l)return!1;const u=o&&s&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let d=null;if(u){d=[];for(let h=0,p=this.modelLineProjections.length;h<p;h++)d[h]=this.modelLineProjections[h].getLineBreakData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new oW(i,o)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible();let s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,l=[],u=[];for(let d=0,h=i.length;d<h;d++){let p=T5(i[d],!o);l.push(p);let _=p.getViewLineCount();a+=_,u[d]=_}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,u),new sW(s,s+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let i=t-1,o=this.modelLineProjections[i].getViewLineCount(),s=this.modelLineProjections[i].isVisible(),a=T5(n,s);this.modelLineProjections[i]=a;let l=this.modelLineProjections[i].getViewLineCount(),u=!1,d=0,h=-1,p=0,_=-1,C=0,S=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,C=h+1,S=C+(o-l)-1,u=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+o-1,p=h+1,_=p+(l-o)-1,u=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const x=d<=h?new hse(d,h):null,T=p<=_?new sW(p,_):null,k=C<=S?new oW(C,S):null;return[u,x,T,k]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(i.lineNumber,o.lineNumber,s.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),u=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:u.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new KY(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ge(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ge(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),o=new Array;let s=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const u=this.modelLineProjections[l-1];if(u.isVisible()){let d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:u.getViewLineCount();for(let p=d;p<h;p++)a.push(new KY(l,p))}if(!u.isVisible()&&s){const d=new Ge(l-1,this.model.getLineMaxColumn(l-1)+1),h=le.fromPositions(s,d);o.push(new GY(h,a)),a=[],s=null}else u.isVisible()&&!s&&(s=new Ge(l,1))}if(s){const l=le.fromPositions(s,this.getModelEndPositionOfViewLine(i));o.push(new GY(l,a))}return o}getViewLinesBracketGuides(e,t,n,i){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,u=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,i);for(const d of a.viewLines)if(d.isWrappedLineContinuation&&this.getMinColumnOfViewLine(d)===1)s.push([]);else{let h=u[d.modelLineNumber-l];h=h.map(p=>p.horizontalLine?new hL(p.visibleColumn,p.className,new G9(p.horizontalLine.top,this.convertModelPositionToViewPosition(d.modelLineNumber,p.horizontalLine.endColumn).column)):p),s.push(h)}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[],s=[],a=[];const l=n.lineNumber-1,u=i.lineNumber-1;let d=null;for(let C=l;C<=u;C++){const S=this.modelLineProjections[C];if(S.isVisible()){let x=S.getViewLineNumberOfModelPosition(0,C===l?n.column:1),T=S.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(C+1)),k=T-x+1,M=0;k>1&&S.getViewLineMinColumn(this.model,C+1,T)===1&&(M=x===0?1:2),s.push(k),a.push(M),d===null&&(d=new Ge(C+1,0))}else d!==null&&(o=o.concat(this.model.getLinesIndentGuides(d.lineNumber,C)),d=null)}d!==null&&(o=o.concat(this.model.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const h=t-e+1;let p=new Array(h),_=0;for(let C=0,S=o.length;C<S;C++){let x=o[C],T=Math.min(h-_,s[C]),k=a[C],M;k===2?M=0:k===1?M=1:M=T;for(let W=0;W<T;W++)W===M&&(x=0),p[_++]=x}return p}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,s=i.index,a=i.remainder,l=[];for(let u=s,d=this.model.getLineCount();u<d;u++){let h=this.modelLineProjections[u];if(!h.isVisible())continue;let p=u===s?a:0,_=h.getViewLineCount()-p,C=!1;o+_>t&&(C=!0,_=t-o+1);let S=p+_;if(h.getViewLinesData(this.model,u+1,p,S,o-e,n,l),o+=_,C)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,s=i.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,s),u=a.getViewLineMaxColumn(this.model,o+1,s);t<l&&(t=l),t>u&&(t=u);let d=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new Ge(o+1,d)).equals(n)?new Ge(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new le(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e);let i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Ge(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new le(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new Ge(e,t)),o=i.lineNumber,s=i.column;let a=o-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new Ge(1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(a);let d;return l?d=this.modelLineProjections[a].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(a+1),n):d=this.modelLineProjections[o-1].getViewPositionOfModelPosition(u,s,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return le.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new le(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new le(i.lineNumber,1,o.lineNumber,o.column),t,n);let s=[];const a=i.lineNumber-1,l=o.lineNumber-1;let u=null;for(let _=a;_<=l;_++)if(this.modelLineProjections[_].isVisible())u===null&&(u=new Ge(_+1,_===a?i.column:1));else if(u!==null){const S=this.model.getLineMaxColumn(_);s=s.concat(this.model.getDecorationsInRange(new le(u.lineNumber,u.column,_,S),t,n)),u=null}u!==null&&(s=s.concat(this.model.getDecorationsInRange(new le(u.lineNumber,u.column,o.lineNumber,o.column),t,n)),u=null),s.sort((_,C)=>{const S=le.compareRangesUsingStarts(_.range,C.range);return S===0?_.id<C.id?-1:_.id>C.id?1:0:S});let d=[],h=0,p=null;for(const _ of s){const C=_.id;p!==C&&(p=C,d[h++]=_)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function tDe(r){if(r.length===0)return[];const e=r.slice();e.sort(le.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let o=1,s=e.length;o<s;o++){let a=e[o];a.startLineNumber>i+1?(t.push(new le(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new le(n,1,i,1)),t}class KY{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class GY{constructor(e,t){this.modelRange=e,this.viewLines=t}}class nDe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class iDe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new rDe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new oW(t,n)}onModelLinesInserted(e,t,n,i){return new sW(t,n)}onModelLineChanged(e,t,n){return[!1,new hse(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let i=new Array(n);for(let o=0;o<n;o++)i[o]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new v$(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);let o=[];for(let s=e;s<=t;s++){let a=s-e;n[a]||(o[a]=null),o[a]=this.getViewLineData(s)}return o}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class rDe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class oDe{constructor(e,t,n,i,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,o=e.options;let s;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Ge(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new Ge(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);s=new le(a.lineNumber,a.column,l.lineNumber,l.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new cse(s,o),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,Oz(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber;let o=[],s=0,a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,u=t.length;l<u;l++){let d=t[l],h=d.options;if(!S$(this.model,d))continue;let p=this._getOrCreateViewModelDecoration(d),_=p.range;if(o[s++]=p,h.inlineClassName){let C=new uT(_,h.inlineClassName,h.inlineClassNameAffectsLetterSpacing?3:0),S=Math.max(n,_.startLineNumber),x=Math.min(i,_.endLineNumber);for(let T=S;T<=x;T++)a[T-n].push(C)}if(h.beforeContentClassName&&n<=_.startLineNumber&&_.startLineNumber<=i){let C=new uT(new le(_.startLineNumber,_.startColumn,_.startLineNumber,_.startColumn),h.beforeContentClassName,1);a[_.startLineNumber-n].push(C)}if(h.afterContentClassName&&n<=_.endLineNumber&&_.endLineNumber<=i){let C=new uT(new le(_.endLineNumber,_.endColumn,_.endLineNumber,_.endColumn),h.afterContentClassName,2);a[_.endLineNumber-n].push(C)}}return{decorations:o,inlineDecorations:a}}}function S$(r,e){return!(e.options.hideInCommentTokens&&sDe(r,e.range,n=>n===1))}function sDe(r,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=r.getLineTokens(n),o=n===e.startLineNumber,s=n===e.endLineNumber;let a=o?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(s&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}const aDe={ModesRegistry:"editor.modesRegistry"};class lDe{constructor(){this._onDidChangeLanguages=new Fe,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const jw=new lDe;vs.add(aDe.ModesRegistry,jw);const lD="plaintext",uDe=".txt";jw.registerLanguage({id:lD,extensions:[uDe],aliases:[E("plainText.alias","Plain Text"),"text"],mimetypes:[jg.text]});fr.register(lD,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);vs.as(JS.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1}}}]);class cDe extends ot{constructor(e,t,n,i,o,s){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new Wxe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new zg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new Xr(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new Xr(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new iDe(this.model);else{const a=this._configuration.options,l=a.get(43),u=a.get(124),d=a.get(131),h=a.get(123);this._lines=new eDe(this._editorId,this.model,i,o,l,this.model.getOptions().tabSize,u,d.wrappingColumn,h)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new _x(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Yxe(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new Rxe(a)),this._eventDispatcher.emitOutgoingEvent(new w$(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new oDe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(w2.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new Fxe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new le(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const i of n)this.model.tokenizeViewport(i.startLineNumber,i.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Axe(e)),this._eventDispatcher.emitOutgoingEvent(new y$(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Ixe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new kxe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new Mxe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let d=new Ge(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let i=!1;const o=this._configuration.options,s=o.get(43),a=o.get(124),l=o.get(131),u=o.get(123);if(this._lines.setWrappingSettings(s,a,l.wrappingColumn,u)&&(e.emitViewEvent(new WA),e.emitViewEvent(new VA),e.emitViewEvent(new HE(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new HE(null))),e.emitViewEvent(new Txe(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const d=this.coordinatesConverter.convertModelPositionToViewPosition(n),h=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:h+this._viewportStartLineDelta},1)}zg.shouldRecreate(t)&&(this.cursorConfig=new zg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,i=!1;const o=e.changes,s=e instanceof Vw?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const d of o)switch(d.changeType){case 4:{for(let h=0;h<d.detail.length;h++){const p=d.detail[h];let _=d.injectedTexts[h];_&&(_=_.filter(C=>!C.ownerId||C.ownerId===this._editorId)),a.addRequest(p,_,null)}break}case 2:{let h=null;d.injectedText&&(h=d.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(d.detail,h,null);break}}const l=a.finalize(),u=new ML(l);for(const d of o)switch(d.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new WA),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(s,d.fromLineNumber,d.toLineNumber);h!==null&&(t.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),n=!0;break}case 4:{const h=u.takeCount(d.detail.length),p=this._lines.onModelLinesInserted(s,d.fromLineNumber,d.toLineNumber,h);p!==null&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const h=u.dequeue(),[p,_,C,S]=this._lines.onModelLineChanged(s,d.lineNumber,h);i=p,_&&t.emitViewEvent(_),C&&(t.emitViewEvent(C),this.viewLayout.onLinesInserted(C.fromLineNumber,C.toLineNumber)),S&&(t.emitViewEvent(S),this.viewLayout.onLinesDeleted(S.fromLineNumber,S.toLineNumber));break}case 5:break}s!==null&&this._lines.acceptVersionId(s),this.viewLayout.onHeightMaybeChanged(),!n&&i&&(t.emitViewEvent(new VA),t.emitViewEvent(new HE(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,i=e.ranges.length;n<i;n++){const o=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new Ge(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Ge(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new Pxe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Oxe),this.cursorConfig=new zg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new zg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new WA),t.emitViewEvent(new VA),t.emitViewEvent(new HE(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new zg(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new HE(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new WA),n.emitViewEvent(new VA),n.emitViewEvent(new HE(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new zY)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(130),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),o=Math.max(1,i.completelyVisibleStartLineNumber-n),s=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new le(o,this.getLineMinColumn(o),s,this.getLineMaxColumn(s)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let i=[],o=0,s=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,u=t.endColumn;for(let d=0,h=n.length;d<h;d++){const p=n[d].startLineNumber,_=n[d].endLineNumber;_<s||p>l||(s<p&&(i[o++]=new le(s,a,p-1,this.model.getLineMaxColumn(p-1))),s=_+1,a=1)}return(s<l||s===l&&a<u)&&(i[o++]=new le(s,a,l,u)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new le(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new le(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new Ge(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let i=this.coordinatesConverter.convertViewPositionToModelPosition(new Ge(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new le(i.lineNumber,i.column,i.lineNumber,i.column),1);const o=this.viewLayout.getVerticalOffsetForLineNumber(e),s=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=s-o}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=sc(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Iv(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),s=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return s.inlineDecorations&&(l=[...l,...s.inlineDecorations.map(u=>u.toInlineDecoration(t))]),new Oh(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,i,s.tokens,l,o,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let i=this._lines.getViewLinesData(e,t,n);return new ixe(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,Oz(this._configuration.options)),n=new dDe;for(const i of t){const o=i.options,s=o.overviewRuler;if(!s)continue;const a=s.position;if(a===0)continue;const l=s.getColor(e),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,o.zIndex,u,d,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const s=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(s)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(le.compareRangesUsingStarts);let o=!1,s=!1;for(const l of e)l.isEmpty()?o=!0:s=!0;if(!s){if(!t)return"";const l=e.map(d=>d.startLineNumber);let u="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(u+=this.model.getLineContent(l[d])+i);return u}if(o&&t){let l=[],u=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==u&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),u=h}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===lD||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new le(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(43),s=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===nu.fontFamily;let u;return l?u=nu.fontFamily:(u=o.fontFamily,u=u.replace(/"/g,"'"),/[,']/.test(u)||/[+ ]/.test(u)&&(u=`'${u}'`),u=`${u}, ${nu.fontFamily}`),{mode:n,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${u};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,s)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=this.getTabSize();let l="";for(let u=n;u<=o;u++){const d=this.model.getLineTokens(u),h=d.getLineContent(),p=u===n?i-1:0,_=u===o?s-1:h.length;h===""?l+="<br>":l+=zxe(h,d.inflate(),t,p,_,a,Ol)}return l}_getColorMap(){let e=es.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=je.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Hxe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,o){this._executeCursorEdit(s=>this._cursor.compositionType(s,e,t,n,i,o))}paste(e,t,n,i){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new le(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new qO(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new le(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new qO(e,n,null,0,!0,0)))}revealRange(e,t,n,i,o){this._withViewEventsCollector(s=>s.emitViewEvent(new qO(e,n,null,i,t,o)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Bxe),this._eventDispatcher.emitOutgoingEvent(new zY))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class dDe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,o){const s=this._asMap[e];if(s){const a=s.data,l=a[a.length-3],u=a[a.length-1];if(l===o&&u+1>=n){i>u&&(a[a.length-1]=i);return}a.push(o,n,i)}else{const a=new dse(e,t,[o,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}class iN{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var rN;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(rN||(rN={}));(function(r){const e="error",t="warning",n="warn",i="info",o="ignore";function s(l){return l?Ok(e,l)?r.Error:Ok(t,l)||Ok(n,l)?r.Warning:Ok(i,l)?r.Info:r.Ignore:r.Ignore}r.fromValue=s;function a(l){switch(l){case r.Error:return e;case r.Warning:return t;case r.Info:return i;default:return o}}r.toString=a})(rN||(rN={}));const os=rN,As=ar("notificationService");class hDe{}const Uc=ar("accessibilityService"),E2=new _n("accessibilityModeEnabled",!1);class hT{constructor(e,t,n,i,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&i>this.injectionOffsets[o];o++)i<this.injectionOffsets[o]+this.injectionOptions[o].content.length?i=this.injectionOffsets[o]:i-=this.injectionOptions[o].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,o=0,s=0;for(;n<=i;){o=n+(i-n)/2|0;const l=this.breakOffsets[o];if(s=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=s)i=o-1;else if(e>l)n=o+1;else break;else if(e<s)i=o-1;else if(e>=l)n=o+1;else break}let a=e-s;return o>0&&(a+=this.wrappedTextIndentLength),new HA(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new HA(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new HA(e+1,this.getMinOutputOffset(e+1))}return new HA(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInInputWithInjections+n.length?n.offsetInInputWithInjections+n.length:n.offsetInInputWithInjections;if(t===1){let s=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)s+=this.injectionOptions[a+1].content.length,a++;return s}let i=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)i-=this.injectionOptions[o-1].content.length,o++;return i}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let o=0;o<t.length;o++){const s=n[o].content.length,a=t[o]+i,l=t[o]+i+s;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:s};i+=s}}}}class HA{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Ge(e+this.outputLineIndex,this.outputOffset+1)}}class E${constructor(e,t){this.classifier=new fDe(e,t)}static create(e){return new E$(e.get(119),e.get(118))}createLineBreaksComputer(e,t,n,i){const o=[],s=[],a=[];return{addRequest:(l,u,d)=>{o.push(l),s.push(u),a.push(d)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let u=[];for(let d=0,h=o.length;d<h;d++){const p=s[d],_=a[d];_&&!_.injectionOptions&&!p?u[d]=gDe(this.classifier,_,o[d],t,n,l,i):u[d]=pDe(this.classifier,o[d],p,t,n,l,i)}return aW.length=0,lW.length=0,u}}}}class fDe extends oD{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let aW=[],lW=[];function gDe(r,e,t,n,i,o,s){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,u=e.breakOffsetsVisibleColumn,d=mse(t,n,i,o,s),h=i-d;let p=aW,_=lW,C=0,S=0,x=0,T=i;const k=l.length;let M=0;if(M>=0){let W=Math.abs(u[M]-T);for(;M+1<k;){const F=Math.abs(u[M+1]-T);if(F>=W)break;W=F,M++}}for(;M<k;){let W=M<0?0:l[M],F=M<0?0:u[M];S>W&&(W=S,F=x);let Q=0,z=0,$=0,G=0;if(F<=T){let I=F,D=W===0?0:t.charCodeAt(W-1),O=W===0?0:r.get(D),V=!0;for(let j=W;j<a;j++){const ne=j,re=t.charCodeAt(j);let se,ie;if(Ca(re)?(j++,se=0,ie=2):(se=r.get(re),ie=fT(re,I,n,o)),ne>S&&uW(D,O,re,se)&&(Q=ne,z=I),I+=ie,I>T){ne>S?($=ne,G=I-ie):($=j+1,G=I),I-z>h&&(Q=0),V=!1;break}D=re,O=se}if(V){C>0&&(p[C]=l[l.length-1],_[C]=u[l.length-1],C++);break}}if(Q===0){let I=F,D=t.charCodeAt(W),O=r.get(D),V=!1;for(let j=W-1;j>=S;j--){const ne=j+1,re=t.charCodeAt(j);if(re===9){V=!0;break}let se,ie;if(lx(re)?(j--,se=0,ie=2):(se=r.get(re),ie=Pv(re)?o:1),I<=T){if($===0&&($=ne,G=I),I<=T-h)break;if(uW(re,se,D,O)){Q=ne,z=I;break}}I-=ie,D=re,O=se}if(Q!==0){const j=h-(G-z);if(j<=n){const ne=t.charCodeAt($);let re;Ca(ne)?re=2:re=fT(ne,G,n,o),j-re<0&&(Q=0)}}if(V){M--;continue}}if(Q===0&&(Q=$,z=G),Q<=S){const I=t.charCodeAt(S);Ca(I)?(Q=S+2,z=x+2):(Q=S+1,z=x+fT(I,x,n,o))}for(S=Q,p[C]=Q,x=z,_[C]=z,C++,T=z+h;M<0||M<k&&u[M]<z;)M++;let Y=Math.abs(u[M]-T);for(;M+1<k;){const I=Math.abs(u[M+1]-T);if(I>=Y)break;Y=I,M++}}return C===0?null:(p.length=C,_.length=C,aW=e.breakOffsets,lW=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=_,e.wrappedTextIndentLength=d,e)}function pDe(r,e,t,n,i,o,s){const a=ym.applyInjectedText(e,t);let l,u;if(t&&t.length>0?(l=t.map(z=>z.options),u=t.map(z=>z.column-1)):(l=null,u=null),i===-1)return l?new hT(u,l,[a.length],[],0):null;const d=a.length;if(d<=1)return l?new hT(u,l,[a.length],[],0):null;const h=mse(a,n,i,o,s),p=i-h;let _=[],C=[],S=0,x=0,T=0,k=i,M=a.charCodeAt(0),W=r.get(M),F=fT(M,0,n,o),Q=1;Ca(M)&&(F+=1,M=a.charCodeAt(1),W=r.get(M),Q++);for(let z=Q;z<d;z++){const $=z,G=a.charCodeAt(z);let Y,I;Ca(G)?(z++,Y=0,I=2):(Y=r.get(G),I=fT(G,F,n,o)),uW(M,W,G,Y)&&(x=$,T=F),F+=I,F>k&&((x===0||F-T>p)&&(x=$,T=F-I),_[S]=x,C[S]=T,S++,k=T+p,x=0),M=G,W=Y}return S===0&&(!t||t.length===0)?null:(_[S]=d,C[S]=F,new hT(u,l,_,C,h))}function fT(r,e,t,n){return r===9?t-e%t:Pv(r)||r<32?n:1}function YY(r,e){return e-r%e}function uW(r,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function mse(r,e,t,n,i){let o=0;if(i!==0){const s=sc(r);if(s!==-1){for(let l=0;l<s;l++){const u=r.charCodeAt(l)===9?YY(o,e):1;o+=u}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const u=YY(o,e);o+=u}o+n>t&&(o=0)}}return o}var A5;const O5=(A5=window.trustedTypes)===null||A5===void 0?void 0:A5.createPolicy("domLineBreaksComputer",{createHTML:r=>r});class L${static create(){return new L$}constructor(){}createLineBreaksComputer(e,t,n,i){let o=[],s=[];return{addRequest:(a,l,u)=>{o.push(a),s.push(l)},finalize:()=>mDe(o,e,t,n,i,s)}}}function mDe(r,e,t,n,i,o){var s;function a($){const G=o[$];if(G){const Y=ym.applyInjectedText(r[$],G),I=G.map(O=>O.options),D=G.map(O=>O.column-1);return new hT(D,I,[Y.length],[],0)}else return null}if(n===-1){const $=[];for(let G=0,Y=r.length;G<Y;G++)$[G]=a(G);return $}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(i===3?2:i===2?1:0)),h=Math.ceil(e.spaceWidth*d),p=document.createElement("div");ac.applyFontInfoSlow(p,e);const _=cS(1e4),C=[],S=[],x=[],T=[],k=[];for(let $=0;$<r.length;$++){const G=ym.applyInjectedText(r[$],o[$]);let Y=0,I=0,D=l;if(i!==0)if(Y=sc(G),Y===-1)Y=0;else{for(let ne=0;ne<Y;ne++){const re=G.charCodeAt(ne)===9?t-I%t:1;I+=re}const j=Math.ceil(e.spaceWidth*I);j+e.typicalFullwidthCharacterWidth>l?(Y=0,I=0):D=l-j}const O=G.substr(Y),V=_De(O,I,t,D,_,h);C[$]=Y,S[$]=I,x[$]=O,T[$]=V[0],k[$]=V[1]}const M=_.build(),W=(s=O5==null?void 0:O5.createHTML(M))!==null&&s!==void 0?s:M;p.innerHTML=W,p.style.position="absolute",p.style.top="10000",p.style.wordWrap="break-word",document.body.appendChild(p);let F=document.createRange();const Q=Array.prototype.slice.call(p.children,0);let z=[];for(let $=0;$<r.length;$++){const G=Q[$],Y=vDe(F,G,x[$],T[$]);if(Y===null){z[$]=a($);continue}const I=C[$],D=S[$]+d,O=k[$],V=[];for(let se=0,ie=Y.length;se<ie;se++)V[se]=O[Y[se]];if(I!==0)for(let se=0,ie=Y.length;se<ie;se++)Y[se]+=I;let j,ne;const re=o[$];re?(j=re.map(se=>se.options),ne=re.map(se=>se.column-1)):(j=null,ne=null),z[$]=new hT(ne,j,Y,V,D)}return document.body.removeChild(p),z}function _De(r,e,t,n,i,o){if(o!==0){let p=String(o);i.appendASCIIString('<div style="text-indent: -'),i.appendASCIIString(p),i.appendASCIIString("px; padding-left: "),i.appendASCIIString(p),i.appendASCIIString("px; box-sizing: border-box; width:")}else i.appendASCIIString('<div style="width:');i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const s=r.length;let a=e,l=0,u=[],d=[],h=0<s?r.charCodeAt(0):0;i.appendASCIIString("<span>");for(let p=0;p<s;p++){p!==0&&p%16384===0&&i.appendASCIIString("</span><span>"),u[p]=l,d[p]=a;const _=h;h=p+1<s?r.charCodeAt(p+1):0;let C=1,S=1;switch(_){case 9:C=t-a%t,S=C;for(let x=1;x<=C;x++)x<C?i.write1(160):i.appendASCII(32);break;case 32:h===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Pv(_)&&S++,_<32?i.write1(9216+_):i.write1(_)}l+=C,a+=S}return i.appendASCIIString("</span>"),u[r.length]=l,d[r.length]=a,i.appendASCIIString("</div>"),[u,d]}function vDe(r,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),o=[];try{cW(r,i,n,0,null,t.length-1,null,o)}catch(s){return console.log(s),null}return o.length===0?null:(o.push(t.length),o)}function cW(r,e,t,n,i,o,s,a){if(n===o||(i=i||R5(r,e,t[n],t[n+1]),s=s||R5(r,e,t[o],t[o+1]),Math.abs(i[0].top-s[0].top)<=.1))return;if(n+1===o){a.push(o);return}const l=n+(o-n)/2|0,u=R5(r,e,t[l],t[l+1]);cW(r,e,t,n,i,l,u,a),cW(r,e,t,l,u,o,s,a)}function R5(r,e,t,n){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[n/16384|0].firstChild,n%16384),r.getClientRects()}var bDe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let CDe=0,yDe=class{constructor(e,t,n,i,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=o}dispose(){nr(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},oN=class KO extends ot{constructor(e,t,n,i,o,s,a,l,u,d){super(),this._onDidDispose=this._register(new Fe),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Fe),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Fe),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Fe),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Fe),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Fe),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new Fe),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Fe),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Fe),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Fe),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Fe),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Fe),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new ZY),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new ZY),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Fe),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Fe),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Fe),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Fe),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Fe),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Fe),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Fe),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Fe),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Fe),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Fe),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new Fe),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Fe),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Fe),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Fe),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Fe),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Fe),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Fe),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Fe),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Fe),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Fe),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const h=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=h.overflowWidgetsDomNode,delete h.overflowWidgetsDomNode,this._id=++CDe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(h,d)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const C=this._configuration.options;if(_.hasChanged(130)){const S=C.get(130);this._onDidLayoutChange.fire(S)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=u,this._codeEditorService=o,this._commandService=s,this._themeService=l,this._register(new wDe(this,this._contextKeyService)),this._register(new SDe(this,this._contextKeyService)),this._instantiationService=i.createChild(new iN([Jn,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new EDe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=RL.getEditorContributions();for(const _ of p){if(this._contributions[_.id]){ti(new Error(`Cannot have two contributions with the same id ${_.id}`));continue}try{const C=this._instantiationService.createInstance(_.ctor,this);this._contributions[_.id]=C}catch(C){ti(C)}}RL.getEditorActions().forEach(_=>{if(this._actions[_.id]){ti(new Error(`Cannot have two actions with the same id ${_.id}`));return}const C=new fse(_.id,_.label,_.alias,Sd(_.precondition),()=>this._instantiationService.invokeFunction(S=>Promise.resolve(_.runEditorCommand(S,this,null))),this._contextKeyService);this._actions[C.id]=C}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new ac(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return S2.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?er.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const o={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const i=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}getTopForLineNumber(e){return this._modelData?KO._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?KO._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>le.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return ho.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!Ge.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!le.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",n,s,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new le(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!Ge.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new le(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=ln.isISelection(e),n=le.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const i={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(i)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new ln(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new le(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!le.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(le.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,o=e.length;i<o;i++)if(!ln.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const o of t){const s=this._contributions[o];typeof s.saveViewState=="function"&&(e[o]=s.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,l=o.length;a<l;a++){const u=o[a],d=this._contributions[u];typeof d.restoreViewState=="function"&&d.restoreViewState(i[u])}const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=n;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=n;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=n;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=n;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,ti);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,o){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,o,e)}_paste(e,t,n,i,o){if(!this._modelData||t.length===0)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,i,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new le(s.lineNumber,s.column,a.lineNumber,a.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=RL.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(i.runEditorCommand(o,this,n)).then(void 0,ti)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let i;return n?Array.isArray(n)?i=()=>n:i=n:i=()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Oz(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(130),o=KO._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:o,left:s,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){ac.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new cDe(this._id,this._configuration,e,L$.create(),E$.create(this._configuration.options),s=>Rv(s));t.push(e.onDidChangeDecorations(s=>this._onDidChangeModelDecorations.fire(s))),t.push(e.onDidChangeLanguage(s=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(s)})),t.push(e.onDidChangeLanguageConfiguration(s=>this._onDidChangeModelLanguageConfiguration.fire(s))),t.push(e.onDidChangeContent(s=>this._onDidChangeModelContent.fire(s))),t.push(e.onDidChangeOptions(s=>this._onDidChangeModelOptions.fire(s))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(s=>{switch(s.kind){case 0:this._onDidContentSizeChange.fire(s);break;case 1:this._editorTextFocus.setValue(s.hasFocus);break;case 2:this._onDidScrollChange.fire(s);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{s.reachedMaxCursorCount&&this._notificationService.warn(E("cursors.maximum","The number of cursors has been limited to {0}.",_x.MAX_CURSOR_COUNT));const a=[];for(let d=0,h=s.selections.length;d<h;d++)a[d]=s.selections[d].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:s.reason,source:s.source};this._onDidChangeCursorPosition.fire(l);const u={selection:s.selections[0],secondarySelections:s.selections.slice(1),modelVersionId:s.modelVersionId,oldSelections:s.oldSelections,oldModelVersionId:s.oldModelVersionId,source:s.source,reason:s.reason};this._onDidChangeCursorSelection.fire(u);break}}}));const[i,o]=this._createView(n);if(o){this._domElement.appendChild(i.domNode.domNode);let s=Object.keys(this._contentWidgets);for(let a=0,l=s.length;a<l;a++){const u=s[a];i.addContentWidget(this._contentWidgets[u])}s=Object.keys(this._overlayWidgets);for(let a=0,l=s.length;a<l;a++){const u=s[a];i.addOverlayWidget(this._overlayWidgets[u])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new yDe(e,n,i,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,s,a,l)=>{this._paste("keyboard",o,s,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,s,a,l)=>{this._compositionType("keyboard",o,s,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,s,a,l)=>{const u={text:o,pasteOnNewLine:s,multicursorText:a,mode:l};this._commandService.executeCommand("paste",u)},type:o=>{const s={text:o};this._commandService.executeCommand("type",s)},compositionType:(o,s,a,l)=>{if(a||l){const u={text:o,replacePrevCharCnt:s,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",u)}else{const u={text:o,replaceCharCnt:s};this._commandService.executeCommand("replacePreviousChar",u)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new I4(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new xxe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};oN=bDe([Gy(3,xi),Gy(4,vr),Gy(5,Go),Gy(6,Jn),Gy(7,Ho),Gy(8,As),Gy(9,Uc)],oN);class ZY extends ot{constructor(){super(),this._onDidChangeToTrue=this._register(new Fe),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Fe),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class wDe extends ot{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Le.editorSimpleInput.bindTo(t),this._editorFocus=Le.focus.bindTo(t),this._textInputFocus=Le.textInputFocus.bindTo(t),this._editorTextFocus=Le.editorTextFocus.bindTo(t),this._editorTabMovesFocus=Le.tabMovesFocus.bindTo(t),this._editorReadonly=Le.readOnly.bindTo(t),this._inDiffEditor=Le.inDiffEditor.bindTo(t),this._editorColumnSelection=Le.columnSelection.bindTo(t),this._hasMultipleSelections=Le.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Le.hasNonEmptySelection.bindTo(t),this._canUndo=Le.canUndo.bindTo(t),this._canRedo=Le.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class SDe extends ot{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=Le.languageId.bindTo(t),this._hasCompletionItemProvider=Le.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Le.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Le.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Le.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Le.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Le.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Le.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Le.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Le.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Le.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Le.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Le.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Le.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Le.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Le.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Le.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Le.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Le.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=Le.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(em.onDidChange(n)),this._register(Nv.onDidChange(n)),this._register(xb.onDidChange(n)),this._register(HT.onDidChange(n)),this._register(aM.onDidChange(n)),this._register(lM.onDidChange(n)),this._register(uM.onDidChange(n)),this._register(VT.onDidChange(n)),this._register(cx.onDidChange(n)),this._register(Xg.onDidChange(n)),this._register(rM.onDidChange(n)),this._register(oM.onDidChange(n)),this._register(aT.onDidChange(n)),this._register(tm.onDidChange(n)),this._register(Ww.onDidChange(n)),this._register(lC.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(em.has(e)),this._hasCodeActionsProvider.set(Nv.has(e)),this._hasCodeLensProvider.set(xb.has(e)),this._hasDefinitionProvider.set(HT.has(e)),this._hasDeclarationProvider.set(aM.has(e)),this._hasImplementationProvider.set(lM.has(e)),this._hasTypeDefinitionProvider.set(uM.has(e)),this._hasHoverProvider.set(VT.has(e)),this._hasDocumentHighlightProvider.set(cx.has(e)),this._hasDocumentSymbolProvider.set(Xg.has(e)),this._hasReferenceProvider.set(rM.has(e)),this._hasRenameProvider.set(oM.has(e)),this._hasSignatureHelpProvider.set(Ww.has(e)),this._hasInlayHintsProvider.set(lC.has(e)),this._hasDocumentFormattingProvider.set(aT.has(e)||tm.has(e)),this._hasDocumentSelectionFormattingProvider.set(tm.has(e)),this._hasMultipleDocumentFormattingProvider.set(aT.all(e).length+tm.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(tm.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Si.walkThroughSnippet)})}}class EDe extends ot{constructor(e){super(),this._onChange=this._register(new Fe),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(ox(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const LDe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),xDe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function M5(r){return LDe+encodeURIComponent(r.toString())+xDe}const DDe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),IDe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function kDe(r){return DDe+encodeURIComponent(r.toString())+IDe}mo((r,e)=>{const t=r.getColor(Qre);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=r.getColor(nT);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${M5(n)}") repeat-x bottom left; }`);const i=r.getColor($1e);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const o=r.getColor(u4);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);const s=r.getColor(Bb);s&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${M5(s)}") repeat-x bottom left; }`);const a=r.getColor(j1e);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=r.getColor(Wz);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const u=r.getColor(gm);u&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${M5(u)}") repeat-x bottom left; }`);const d=r.getColor(q1e);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);const h=r.getColor(G1e);h&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${h}; }`);const p=r.getColor(K1e);p&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${kDe(p)}") no-repeat bottom left; }`);const _=r.getColor(SEe);_&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${_.rgba.a}; }`);const C=r.getColor(wEe);C&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${C}; }`);const S=r.getColor(p2)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${S}}`)});class Hr{constructor(e,t,n){const i=o=>this.emitter.fire(o);this.emitter=new Fe({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function XY(r){return r.preventDefault(),r.stopPropagation(),r}var uD=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};let TDe=!1;var NM;(function(r){r.North="north",r.South="south",r.East="east",r.West="west"})(NM||(NM={}));let NDe=4;const ADe=new Fe;let ODe=300;const RDe=new Fe;class x${constructor(){this.disposables=new Nt}get onPointerMove(){return this.disposables.add(new Hr(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Hr(window,"mouseup")).event}dispose(){this.disposables.dispose()}}uD([ca],x$.prototype,"onPointerMove",null);uD([ca],x$.prototype,"onPointerUp",null);class D${constructor(e){this.el=e,this.disposables=new Nt}get onPointerMove(){return this.disposables.add(new Hr(this.el,co.Change)).event}get onPointerUp(){return this.disposables.add(new Hr(this.el,co.End)).event}dispose(){this.disposables.dispose()}}uD([ca],D$.prototype,"onPointerMove",null);uD([ca],D$.prototype,"onPointerUp",null);class AM{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}uD([ca],AM.prototype,"onPointerMove",null);uD([ca],AM.prototype,"onPointerUp",null);class eu extends ot{constructor(e,t,n){super(),this.hoverDelay=ODe,this.hoverDelayer=this._register(new Kb(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Fe),this._onDidStart=this._register(new Fe),this._onDidChange=this._register(new Fe),this._onDidReset=this._register(new Fe),this._onDidEnd=this._register(new Fe),this.orthogonalStartSashDisposables=this._register(new Nt),this.orthogonalStartDragHandleDisposables=this._register(new Nt),this.orthogonalEndSashDisposables=this._register(new Nt),this.orthogonalEndDragHandleDisposables=this._register(new Nt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ft(e,Lt(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ji&&this.el.classList.add("mac");const i=this._register(new Hr(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new x$),this));const o=this._register(new Hr(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const s=this._register(new Hr(this.el,"mouseenter")).event;this._register(s(()=>eu.onMouseEnter(this)));const a=this._register(new Hr(this.el,"mouseleave")).event;this._register(a(()=>eu.onMouseLeave(this))),this._register(Or.addTarget(this.el));const l=Sn.map(this._register(new Hr(this.el,co.Start)).event,h=>{var p;return Object.assign(Object.assign({},h),{target:(p=h.initialTarget)!==null&&p!==void 0?p:null})});this._register(l(h=>this.onPointerStart(h,new D$(this.el)),this));const u=this._register(new Hr(this.el,co.Tap)).event,d=Sn.map(Sn.filter(Sn.debounce(u,(h,p)=>{var _;return{event:p,count:((_=h==null?void 0:h.count)!==null&&_!==void 0?_:0)+1}},250),({count:h})=>h===2),({event:h})=>{var p;return Object.assign(Object.assign({},h),{target:(p=h.initialTarget)!==null&&p!==void 0?p:null})});this._register(d(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=NDe,this._register(ADe.event(h=>{this.size=h,this.layout()}))),this._register(RDe.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",TDe),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=ft(this.el,Lt(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Hi(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Hr(this._orthogonalStartDragHandle,"mouseenter")).event(()=>eu.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Hr(this._orthogonalStartDragHandle,"mouseleave")).event(()=>eu.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=ft(this.el,Lt(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Hi(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Hr(this._orthogonalEndDragHandle,"mouseenter")).event(()=>eu.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Hr(this._orthogonalEndDragHandle,"mouseleave")).event(()=>eu.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){xr.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const C=this.getOrthogonalSash(e);C&&(n=!0,e.__orthogonalSashEvent=!0,C.onPointerStart(e,new AM(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new AM(t))),!this.state)return;const i=D0e("iframe");for(const C of i)C.style.pointerEvents="none";const o=e.pageX,s=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const u=Bf(this.el),d=()=>{let C="";n?C="all-scroll":this.orientation===1?this.state===1?C="s-resize":this.state===2?C="n-resize":C=ji?"row-resize":"ns-resize":this.state===1?C="e-resize":this.state===2?C="w-resize":C=ji?"col-resize":"ew-resize",u.textContent=`* { cursor: ${C} !important; }`},h=new Nt;d(),n||this.onDidEnablementChange.event(d,null,h);const p=C=>{xr.stop(C,!1);const S={startX:o,currentX:C.pageX,startY:s,currentY:C.pageY,altKey:a};this._onDidChange.fire(S)},_=C=>{xr.stop(C,!1),this.el.removeChild(u),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const S of i)S.style.pointerEvents="auto"};t.onPointerMove(p,null,h),t.onPointerUp(_,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&eu.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&eu.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){eu.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const I$=ar("IEditorCancelService"),_se=new _n("cancellableOperation",!1,E("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));ZC(I$,class{constructor(){this._tokens=new WeakMap}add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(i=>{const o=_se.bindTo(i.get(Jn)),s=new kh;return{key:o,tokens:s}}),this._tokens.set(r,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(r){const e=this._tokens.get(r);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class MDe extends Ou{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(I$).add(e,this))}dispose(){this._unregister(),super.dispose()}}Mt(new class extends Fl{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:_se})}runEditorCommand(r,e){r.get(I$).cancel(e)}});let vse=class dW{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?Nf("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof dW))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new dW(e,this.flags))}};class sN extends MDe{constructor(e,t,n,i){super(e,i),this._listener=new Nt,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!n||!le.containsPosition(n,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!n||!le.containsRange(n,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class k$ extends Ou{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class MC{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}}return new MC(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const bse={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:jg.text,TERMINALS:"Terminals"};class PDe{constructor(e){this.data=e}update(){}getData(){return this.data}}const mb={CurrentDragAndDropData:void 0};class lv extends ot{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Of&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new sx)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Or.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Id&&this._register(kt(e,In.DRAG_START,i=>{var o;return(o=i.dataTransfer)===null||o===void 0?void 0:o.setData(bse.TEXT,this._action.label)}))),this._register(kt(t,co.Tap,i=>this.onClick(i,!0))),this._register(kt(t,In.MOUSE_DOWN,i=>{n||xr.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),ji&&this._register(kt(t,In.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(kt(t,In.CLICK,i=>{xr.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(kt(t,In.DBLCLICK,i=>{xr.stop(i,!0)})),[In.MOUSE_UP,In.MOUSE_OUT].forEach(i=>{this._register(kt(t,i,o=>{xr.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var n;xr.stop(e,!0);const i=xh(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class aN extends lv{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=ft(this.element,Lt("a.action-label"))),this.label&&(this._action.id===ep.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(ft(this.element,Lt("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=E({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var FDe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Wv extends ot{constructor(e,t={}){var n,i,o,s,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Fe),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Fe({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Fe),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Fe),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(s=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&s!==void 0?s:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new sx,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._register(this._actionRunner.onBeforeRun(h=>this._onBeforeRun.fire(h))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let u,d;switch(this._orientation){case 0:u=[15],d=[17];break;case 1:u=[16],d=[18],this.domNode.className+=" vertical";break}this._register(kt(this.domNode,In.KEY_DOWN,h=>{const p=new Oo(h);let _=!0;const C=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;u&&(p.equals(u[0])||p.equals(u[1]))?_=this.focusPrevious():d&&(p.equals(d[0])||p.equals(d[1]))?_=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?_=this.focusFirst():p.equals(13)?_=this.focusLast():p.equals(2)&&C instanceof lv&&C.trapsArrowNavigation?_=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:_=!1,_&&(p.preventDefault(),p.stopPropagation())})),this._register(kt(this.domNode,In.KEY_UP,h=>{const p=new Oo(h);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(ox(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(NL()===this.domNode||!Pb(NL(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof lv&&n.isEnabled());t instanceof lv&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof lv&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Pb(NL(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=iS(t.index)?t.index:null;n.forEach(o=>{const s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(kt(s,In.CONTEXT_MENU,l=>{xr.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new aN(this.context,o,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof lv&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(s,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,o.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){nr(this.viewItems),this.viewItems=[],this._actionIds=[],ya(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let s=!0;VR(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&VR(o.isEnabled)&&!o.isEnabled()&&(s=!1),s?(n||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof lv){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return FDe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){nr(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const BDe={IconContribution:"base.contributions.icons"};class WDe{constructor(){this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:E("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:E("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Nc.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;So.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of i.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${So.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of i.filter(s=>!So.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}const pS=new WDe;vs.add(BDe.IconContribution,pS);function gl(r,e,t,n){return pS.registerIcon(r,e,t,n)}function VDe(){return pS}function HDe(){for(const r of WR.all)pS.registerIcon(r.id,r.definition,r.description);WR.onDidRegister(r=>pS.registerIcon(r.id,r.definition,r.description))}HDe();const Cse="vscode://schemas/icons";let yse=vs.as(o4.JSONContribution);yse.registerSchema(Cse,pS.getIconSchema());const QY=new Xr(()=>yse.notifySchemaChanged(Cse),200);pS.onDidChange(()=>{QY.isScheduled()||QY.schedule()});const wse=gl("widget-close",Ae.close,E("widgetClose","Icon for the close action in widgets."));var UDe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zDe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},$De=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},P5;const UA=3;class mk{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class F5{constructor(e){this.entries=e}}const jDe=gl("diff-review-insert",Ae.add,E("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),qDe=gl("diff-review-remove",Ae.remove,E("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),KDe=gl("diff-review-close",Ae.close,E("diffReviewCloseIcon","Icon for 'Close' in diff review."));let OM=class ow extends ot{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=tr(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=tr(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Wv(this.actionBarContainer.domNode)),this._actionBar.push(new Of("diffreview.close",E("label.close","Close"),"close-diff-review "+So.asClassName(KDe),!0,()=>$De(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=tr(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=tr(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new y2(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(za(this.domNode.domNode,"click",n=>{n.preventDefault();let i=Gie(n.target,"diff-review-row");i&&this._goToRow(i)})),this._register(za(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Ge(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Ge(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Ge(e,1)),this._diffEditor.revealPosition(new Ge(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:ow._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let i=[],o=0;for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.originalStartLineNumber,_=h.originalEndLineNumber,C=h.modifiedStartLineNumber,S=h.modifiedEndLineNumber;let x=[],T=0;{const k=_===0?p:p-1,M=S===0?C:C-1;let W=1,F=1;if(u>0){const $=e[u-1];$.originalEndLineNumber===0?W=$.originalStartLineNumber+1:W=$.originalEndLineNumber+1,$.modifiedEndLineNumber===0?F=$.modifiedStartLineNumber+1:F=$.modifiedEndLineNumber+1}let Q=k-UA+1,z=M-UA+1;if(Q<W){const $=W-Q;Q=Q+$,z=z+$}if(z<F){const $=F-z;Q=Q+$,z=z+$}x[T++]=new mk(Q,k,z,M)}_!==0&&(x[T++]=new mk(p,_,0,0)),S!==0&&(x[T++]=new mk(0,0,C,S));{const k=_===0?p+1:_+1,M=S===0?C+1:S+1;let W=t,F=n;if(u+1<d){const $=e[u+1];$.originalEndLineNumber===0?W=$.originalStartLineNumber:W=$.originalStartLineNumber-1,$.modifiedEndLineNumber===0?F=$.modifiedStartLineNumber:F=$.modifiedStartLineNumber-1}let Q=k+UA-1,z=M+UA-1;if(Q>W){const $=W-Q;Q=Q+$,z=z+$}if(z>F){const $=F-z;Q=Q+$,z=z+$}x[T++]=new mk(k,Q,M,z)}i[o++]=new F5(x)}let s=i[0].entries,a=[],l=0;for(let u=1,d=i.length;u<d;u++){const h=i[u].entries,p=s[s.length-1],_=h[0];if(p.getType()===0&&_.getType()===0&&_.originalLineStart<=p.originalLineEnd){s[s.length-1]=new mk(p.originalLineStart,_.originalLineEnd,p.modifiedLineStart,_.modifiedLineEnd),s=s.concat(h.slice(1));continue}a[l++]=new F5(s),s=h}return a[l++]=new F5(s),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const o=this._diffs[n].entries,s=o[o.length-1].modifiedLineEnd;if(t<=s)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),o=n.getOptions(),s=i.getOptions();if(!this._isVisible||!n||!i){ya(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let u=document.createElement("div");u.className="diff-review-table",u.setAttribute("role","list"),u.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),ac.applyFontInfoSlow(u,t.get(43));let d=0,h=0,p=0,_=0;for(let z=0,$=l.length;z<$;z++){const G=l[z],Y=G.originalLineStart,I=G.originalLineEnd,D=G.modifiedLineStart,O=G.modifiedLineEnd;Y!==0&&(d===0||Y<d)&&(d=Y),I!==0&&(h===0||I>h)&&(h=I),D!==0&&(p===0||D<p)&&(p=D),O!==0&&(_===0||O>_)&&(_=O)}let C=document.createElement("div");C.className="diff-review-row";let S=document.createElement("div");S.className="diff-review-cell diff-review-summary";const x=h-d+1,T=_-p+1;S.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${x} +${p},${T} @@`)),C.setAttribute("data-line",String(p));const k=z=>z===0?E("no_lines_changed","no lines changed"):z===1?E("one_line_changed","1 line changed"):E("more_lines_changed","{0} lines changed",z),M=k(x),W=k(T);C.setAttribute("aria-label",E({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,M,p,W)),C.appendChild(S),C.setAttribute("role","listitem"),u.appendChild(C);const F=t.get(58);let Q=p;for(let z=0,$=l.length;z<$;z++){const G=l[z];ow._renderSection(u,G,Q,F,this._width,e,n,o,t,i,s,this._modeService.languageIdCodec),G.modifiedLineStart!==0&&(Q=G.modifiedLineEnd)}ya(this._content.domNode),this._content.domNode.appendChild(u),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,o,s,a,l,u,d,h,p){const _=t.getType();let C="diff-review-row",S="";const x="diff-review-spacer";let T=null;switch(_){case 1:C="diff-review-row line-insert",S=" char-insert",T=jDe;break;case 2:C="diff-review-row line-delete",S=" char-delete",T=qDe;break}const k=t.originalLineStart,M=t.originalLineEnd,W=t.modifiedLineStart,F=t.modifiedLineEnd,Q=Math.max(F-W,M-k),z=s.get(130),$=z.glyphMarginWidth+z.lineNumbersWidth,G=u.get(130),Y=10+G.glyphMarginWidth+G.lineNumbersWidth;for(let I=0;I<=Q;I++){const D=k===0?0:k+I,O=W===0?0:W+I,V=document.createElement("div");V.style.minWidth=o+"px",V.className=C,V.setAttribute("role","listitem"),O!==0&&(n=O),V.setAttribute("data-line",String(n));let j=document.createElement("div");j.className="diff-review-cell",j.style.height=`${i}px`,V.appendChild(j);const ne=document.createElement("span");ne.style.width=$+"px",ne.style.minWidth=$+"px",ne.className="diff-review-line-number"+S,D!==0?ne.appendChild(document.createTextNode(String(D))):ne.innerText="",j.appendChild(ne);const re=document.createElement("span");re.style.width=Y+"px",re.style.minWidth=Y+"px",re.style.paddingRight="10px",re.className="diff-review-line-number"+S,O!==0?re.appendChild(document.createTextNode(String(O))):re.innerText="",j.appendChild(re);const se=document.createElement("span");if(se.className=x,T){const te=document.createElement("span");te.className=So.asClassName(T),te.innerText="",se.appendChild(te)}else se.innerText="";j.appendChild(se);let ie;if(O!==0){let te=this._renderLine(d,u,h.tabSize,O,p);ow._ttPolicy&&(te=ow._ttPolicy.createHTML(te)),j.insertAdjacentHTML("beforeend",te),ie=d.getLineContent(O)}else{let te=this._renderLine(a,s,l.tabSize,D,p);ow._ttPolicy&&(te=ow._ttPolicy.createHTML(te)),j.insertAdjacentHTML("beforeend",te),ie=a.getLineContent(D)}ie.length===0&&(ie=E("blankLine","blank"));let A="";switch(_){case 0:D===O?A=E({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",ie,D):A=E("equalLine","{0} original line {1} modified line {2}",ie,D,O);break;case 1:A=E("insertLine","+ {0} modified line {1}",ie,O);break;case 2:A=E("deleteLine","- {0} original line {1}",ie,D);break}V.setAttribute("aria-label",A),e.appendChild(V)}}static _renderLine(e,t,n,i,o){const s=e.getLineContent(i),a=t.get(43),l=Ua.createEmpty(s,o),u=Oh.isBasicASCII(s,e.mightContainNonBasicASCII()),d=Oh.containsRTL(s,u,e.mightContainRTL());return p4(new tE(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,s,!1,u,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==Dh.OFF,null)).html}};OM._ttPolicy=(P5=window.trustedTypes)===null||P5===void 0?void 0:P5.createPolicy("diffReview",{createHTML:r=>r});OM=UDe([zDe(1,Bl)],OM);mo((r,e)=>{const t=r.getColor(joe);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=r.getColor(rD);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class GDe extends gn{constructor(){super({id:"editor.action.diffReview.next",label:E("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:Xt.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Sse(e);n&&n.diffReviewNext()}}class YDe extends gn{constructor(){super({id:"editor.action.diffReview.prev",label:E("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:Xt.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Sse(e);n&&n.diffReviewPrev()}}function Sse(r){const e=r.get(vr),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,o=t.length;i<o;i++){const s=t[i];if(s.getModifiedEditor().getId()===n.getId()||s.getOriginalEditor().getId()===n.getId())return s}return null}Wt(GDe);Wt(YDe);const ZDe="editorWorkerService",Fh=ar(ZDe),t1=ar("contextViewService"),XC=ar("contextMenuService");var B5=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class XDe extends ot{constructor(e,t,n,i,o,s){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=o,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Ae.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const u=[],d=i.modifiedEndLineNumber===0;u.push(new Of("diff.clipboard.copyDeletedContent",d?i.originalEndLineNumber>i.modifiedStartLineNumber?E("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):E("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?E("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):E("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>B5(this,void 0,void 0,function*(){const S=new le(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),x=i.originalModel.getValueInRange(S);yield this._clipboardService.writeText(x)})));let h=0,p;i.originalEndLineNumber>i.modifiedStartLineNumber&&(p=new Of("diff.clipboard.copyDeletedLineContent",d?E("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):E("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>B5(this,void 0,void 0,function*(){const S=i.originalModel.getLineContent(i.originalStartLineNumber+h);if(S===""){const x=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(x===0?`
`:`\r
`)}else yield this._clipboardService.writeText(S)})),u.push(p)),n.getOption(80)||u.push(new Of("diff.inline.revertChange",E("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>B5(this,void 0,void 0,function*(){const S=new le(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),x=i.originalModel.getValueInRange(S);if(i.modifiedEndLineNumber===0){const T=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new le(i.modifiedStartLineNumber,T,i.modifiedStartLineNumber,T),text:l+x}])}else{const T=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new le(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,T),text:x}])}})));const C=(S,x)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:S,y:x}),getActions:()=>(p&&(p.label=d?E("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+h):E("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+h)),u),autoSelectFirstItem:!0})};this._register(za(this._diffActions,"mousedown",S=>{const{top:x,height:T}=tu(this._diffActions);let k=Math.floor(a/3);S.preventDefault(),C(S.posx,x+T+k)})),this._register(n.onMouseMove(S=>{S.target.type===8||S.target.type===5?S.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,S.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(S=>{S.event.rightButton&&(S.target.type===8||S.target.type===5)&&S.target.detail.viewZoneId===this._viewZoneId&&(S.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,S.event.browserEvent.y,a),C(S.event.posx,S.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=tu(e),o=t-i,s=Math.floor(o/n),a=s*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let u=0;u<this.diff.viewLineCounts.length;u++)if(l+=this.diff.viewLineCounts[u],s<l)return u}return s}}const QC=ar("clipboardService");class iE{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}iE.None=Object.freeze({report(){}});const n1=ar("editorProgressService");var QDe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lb=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},W5;class JY{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,i){const o=i?MC.capture(e):null;e.changeViewZones(s=>{var a;for(const l of this._zones)s.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,u=n.zones.length;l<u;l++){const d=n.zones[l];d.suppressMouseDown=!0;const h=s.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,n.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new XDe(h,d.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),o&&o.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let JDe=0;const eIe=gl("diff-insert",Ae.add,E("diffInsertIcon","Line decoration for inserts in the diff editor.")),Ese=gl("diff-remove",Ae.remove,E("diffRemoveIcon","Line decoration for removals in the diff editor.")),eZ=(W5=window.trustedTypes)===null||W5===void 0?void 0:W5.createPolicy("diffEditorWidget",{createHTML:r=>r});let PC=class Xl extends ot{constructor(e,t,n,i,o,s,a,l,u,d,h,p){super(),this._editorProgressService=p,this._onDidDispose=this._register(new Fe),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Fe),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Fe),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=l,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=a.createChild(new iN([Jn,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=u,this._notificationService=d,this._id=++JDe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=iZ(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Xr(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Xl._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=tr(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(za(this._overviewDomElement,"mousedown",C=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(C)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new JY(h,i),this._modifiedEditorState=new JY(h,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Ore(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(OM,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Ib(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new nZ(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(u.onDidColorThemeChange(C=>{this._strategy&&this._strategy.applyColors(C)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Xl._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const _=RL.getDiffEditorContributions();for(const C of _)try{this._register(a.createInstance(C.ctor,this))}catch(S){ti(S)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=KR(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Xl.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Xl.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createInnerEditor(e,t,n,i){return e.createInstance(oN,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return S2.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=iZ(e,this._options),n=rIe(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators,o=this._isVisible&&(n.maxComputationTime||n.maxFileSize);i?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Ib(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new nZ(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Xl._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Xl.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Xl.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Xl.ONE_OVERVIEW_WIDTH,right:n+Xl.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Xl.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Xl.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,o=s=>{const a=s.getValueLength();return i===0||a<=i};if(!o(e)||!o(t)){(!Xl._equals(e.uri,this._lastOriginalWarning)||!Xl._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(E("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=s,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Dm.revealHorizontalRightPadding.defaultValue+Xl.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Xl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Xl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Xl.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?Xl.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),o=Math.max(0,i-2*0),s=n>0?o/n:0,a=Math.max(0,Math.floor(e.height*s)),l=Math.floor(t*s);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,o=n.length-1;for(;i<o;){const s=Math.floor((i+o)/2),a=t(n[s]),l=s+1<=o?t(n[s+1]):1073741824;e<a?o=s-1:e>=l?i=s+1:(i=s,o=s)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=o?i+Math.min(a,s):i+s-o+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=s?n+Math.min(a,o):n+o-s+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};PC.ONE_OVERVIEW_WIDTH=15;PC.ENTIRE_DIFF_OVERVIEW_WIDTH=30;PC.UPDATE_DIFF_DECORATIONS_DELAY=200;PC=QDe([lb(3,QC),lb(4,Fh),lb(5,Jn),lb(6,xi),lb(7,vr),lb(8,Ho),lb(9,As),lb(10,XC),lb(11,n1)],PC);class Lse extends ot{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(eoe)||z9).transparent(2),n=(e.getColor(toe)||$9).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,o){o=o.sort((u,d)=>u.afterLineNumber-d.afterLineNumber),i=i.sort((u,d)=>u.afterLineNumber-d.afterLineNumber);const s=this._getViewZones(e,i,o,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:s.modified}}}}class tZ{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Dw{constructor(e,t,n,i,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=o}static _getViewLineCount(e,t,n){const i=e.getModel(),o=e._getViewModel();if(i&&o){const s=lN(i,o,t,n);return s.endLineNumber-s.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(131).wrappingColumn!==-1,i=this._modifiedEditor.getOption(131).wrappingColumn!==-1,o=n||i,s=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,u={original:[],modified:[]};let d=0,h=0,p=0,_=0,C=0,S=0;const x=(Q,z)=>Q.afterLineNumber-z.afterLineNumber,T=(Q,z)=>{if(z.domNode===null&&Q.length>0){const $=Q[Q.length-1];if($.afterLineNumber===z.afterLineNumber&&$.domNode===null){$.heightInLines+=z.heightInLines;return}}Q.push(z)},k=new tZ(this._modifiedForeignVZ),M=new tZ(this._originalForeignVZ);let W=1,F=1;for(let Q=0,z=this._lineChanges.length;Q<=z;Q++){const $=Q<z?this._lineChanges[Q]:null;$!==null?(p=$.originalStartLineNumber+($.originalEndLineNumber>0?-1:0),_=$.modifiedStartLineNumber+($.modifiedEndLineNumber>0?-1:0),h=$.originalEndLineNumber>0?Dw._getViewLineCount(this._originalEditor,$.originalStartLineNumber,$.originalEndLineNumber):0,d=$.modifiedEndLineNumber>0?Dw._getViewLineCount(this._modifiedEditor,$.modifiedStartLineNumber,$.modifiedEndLineNumber):0,C=Math.max($.originalStartLineNumber,$.originalEndLineNumber),S=Math.max($.modifiedStartLineNumber,$.modifiedEndLineNumber)):(p+=1e7+h,_+=1e7+d,C=p,S=_);let G=[],Y=[];if(o){let O;$?$.originalEndLineNumber>0?O=$.originalStartLineNumber-W:O=$.modifiedStartLineNumber-F:O=s.getLineCount()-W;for(let V=0;V<O;V++){const j=W+V,ne=F+V,re=a.getModelLineViewLineCount(j),se=l.getModelLineViewLineCount(ne);re<se?G.push({afterLineNumber:j,heightInLines:se-re,domNode:null,marginDomNode:null}):re>se&&Y.push({afterLineNumber:ne,heightInLines:re-se,domNode:null,marginDomNode:null})}$&&(W=($.originalEndLineNumber>0?$.originalEndLineNumber:$.originalStartLineNumber)+1,F=($.modifiedEndLineNumber>0?$.modifiedEndLineNumber:$.modifiedStartLineNumber)+1)}for(;k.current&&k.current.afterLineNumber<=S;){let O;k.current.afterLineNumber<=_?O=p-_+k.current.afterLineNumber:O=C;let V=null;$&&$.modifiedStartLineNumber<=k.current.afterLineNumber&&k.current.afterLineNumber<=$.modifiedEndLineNumber&&(V=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),G.push({afterLineNumber:O,heightInLines:k.current.height/t,domNode:null,marginDomNode:V}),k.advance()}for(;M.current&&M.current.afterLineNumber<=C;){let O;M.current.afterLineNumber<=p?O=_-p+M.current.afterLineNumber:O=S,Y.push({afterLineNumber:O,heightInLines:M.current.height/e,domNode:null}),M.advance()}if($!==null&&jL($)){const O=this._produceOriginalFromDiff($,h,d);O&&G.push(O)}if($!==null&&qL($)){const O=this._produceModifiedFromDiff($,h,d);O&&Y.push(O)}let I=0,D=0;for(G=G.sort(x),Y=Y.sort(x);I<G.length&&D<Y.length;){const O=G[I],V=Y[D],j=O.afterLineNumber-p,ne=V.afterLineNumber-_;j<ne?(T(u.original,O),I++):ne<j?(T(u.modified,V),D++):O.shouldNotShrink?(T(u.original,O),I++):V.shouldNotShrink?(T(u.modified,V),D++):O.heightInLines>=V.heightInLines?(O.heightInLines-=V.heightInLines,D++):(V.heightInLines-=O.heightInLines,I++)}for(;I<G.length;)T(u.original,G[I]),I++;for(;D<Y.length;)T(u.modified,Y[D]),D++}return{original:Dw._ensureDomNodes(u.original),modified:Dw._ensureDomNodes(u.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=xse()),t))}}function Sb(r,e,t,n,i){return{range:new le(r,e,t,n),options:i}}const Ic={charDelete:pi.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:pi.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:pi.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:pi.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:pi.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:pi.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+So.asClassName(eIe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:pi.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:pi.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+So.asClassName(Ese),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:pi.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class Ib extends Lse{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new eu(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?PC.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const o=Math.floor(.5*n);return i=this._disableSash?o:i||o,n>Ib.MINIMUM_EDITOR_WIDTH*2?(i<Ib.MINIMUM_EDITOR_WIDTH&&(i=Ib.MINIMUM_EDITOR_WIDTH),i>n-Ib.MINIMUM_EDITOR_WIDTH&&(i=n-Ib.MINIMUM_EDITOR_WIDTH)):i=o,this._sashPosition!==i&&(this._sashPosition=i,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?PC.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new tIe(e,t,n,i,o).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=this._dataSource.getOriginalEditor(),o=String(this._removeColor),s={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(qL(u)){s.decorations.push({range:new le(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:n?Ic.lineDeleteWithSign:Ic.lineDelete}),(!jL(u)||!u.charChanges)&&s.decorations.push(Sb(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824,Ic.charDeleteWholeLine));const d=lN(a,l,u.originalStartLineNumber,u.originalEndLineNumber);if(s.overviewZones.push(new eN(d.startLineNumber,d.endLineNumber,o)),u.charChanges){for(const h of u.charChanges)if(qL(h))if(t)for(let p=h.originalStartLineNumber;p<=h.originalEndLineNumber;p++){let _,C;p===h.originalStartLineNumber?_=h.originalStartColumn:_=a.getLineFirstNonWhitespaceColumn(p),p===h.originalEndLineNumber?C=h.originalEndColumn:C=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(Sb(p,_,p,C,Ic.charDelete))}else s.decorations.push(Sb(h.originalStartLineNumber,h.originalStartColumn,h.originalEndLineNumber,h.originalEndColumn,Ic.charDelete))}}return s}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(jL(u)){s.decorations.push({range:new le(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?Ic.lineInsertWithSign:Ic.lineInsert}),(!qL(u)||!u.charChanges)&&s.decorations.push(Sb(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,Ic.charInsertWholeLine));const d=lN(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(s.overviewZones.push(new eN(d.startLineNumber,d.endLineNumber,o)),u.charChanges){for(const h of u.charChanges)if(jL(h))if(t)for(let p=h.modifiedStartLineNumber;p<=h.modifiedEndLineNumber;p++){let _,C;p===h.modifiedStartLineNumber?_=h.modifiedStartColumn:_=a.getLineFirstNonWhitespaceColumn(p),p===h.modifiedEndLineNumber?C=h.modifiedEndColumn:C=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(Sb(p,_,p,C,Ic.charInsert))}else s.decorations.push(Sb(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,Ic.charInsert))}}return s}}Ib.MINIMUM_EDITOR_WIDTH=100;class tIe extends Dw{constructor(e,t,n,i,o){super(e,t,n,i,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class nZ extends Lse{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const o=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new nIe(e,t,n,o,s,i).getViewZones()}_getOriginalEditorDecorations(e,t,n){const i=String(this._removeColor),o={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),a=s.getModel(),l=s._getViewModel();for(const u of e)if(qL(u)){o.decorations.push({range:new le(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:Ic.lineDeleteMargin});const d=lN(a,l,u.originalStartLineNumber,u.originalEndLineNumber);o.overviewZones.push(new eN(d.startLineNumber,d.endLineNumber,i))}return o}_getModifiedEditorDecorations(e,t,n){const i=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=i.getModel(),l=i._getViewModel();for(const u of e)if(jL(u)){s.decorations.push({range:new le(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:n?Ic.lineInsertWithSign:Ic.lineInsert});const d=lN(a,l,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(s.overviewZones.push(new eN(d.startLineNumber,d.endLineNumber,o)),u.charChanges){for(const h of u.charChanges)if(jL(h))if(t)for(let p=h.modifiedStartLineNumber;p<=h.modifiedEndLineNumber;p++){let _,C;p===h.modifiedStartLineNumber?_=h.modifiedStartColumn:_=a.getLineFirstNonWhitespaceColumn(p),p===h.modifiedEndLineNumber?C=h.modifiedEndColumn:C=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(Sb(p,_,p,C,Ic.charInsert))}else s.decorations.push(Sb(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,Ic.charInsert))}else s.decorations.push(Sb(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,Ic.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class nIe extends Dw{constructor(e,t,n,i,o,s){super(e,t,n,i,o),this._originalModel=i.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${$w}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(43),o=t.get(29),s=i.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),u=this._originalModel.mightContainRTL(),d=t.get(58),p=t.get(130).decorationsWidth,_=t.get(104),C=t.get(87),S=t.get(82),x=t.get(44),T=this._lineBreaksComputer.finalize();let k=0;for(let M=0;M<this._pendingLineChange.length;M++){const W=this._pendingLineChange[M],F=this._pendingViewZones[M],Q=F.domNode;ac.applyFontInfoSlow(Q,i);const z=F.marginDomNode;ac.applyFontInfoSlow(z,i);const $=[];if(W.charChanges)for(const ne of W.charChanges)qL(ne)&&$.push(new uT(new le(ne.originalStartLineNumber,ne.originalStartColumn,ne.originalEndLineNumber,ne.originalEndColumn),"char-delete",0));const G=$.length>0,Y=cS(1e4);let I=0,D=0,O=null;for(let ne=W.originalStartLineNumber;ne<=W.originalEndLineNumber;ne++){const re=ne-W.originalStartLineNumber,se=this._originalModel.getLineTokens(ne),ie=se.getLineContent(),A=T[k++],te=Th.filter($,ne,1,ie.length+1);if(A){let _e=0;for(const Me of A.breakOffsets){const He=se.sliceAndInflate(_e,Me,0),st=ie.substring(_e,Me);I=Math.max(I,this._renderOriginalLine(D++,st,He,Th.extractWrapped(te,_e,Me),G,l,u,i,o,d,p,_,C,S,x,n,Y,z)),_e=Me}for(O||(O=[]);O.length<re;)O[O.length]=1;O[re]=A.breakOffsets.length,F.heightInLines+=A.breakOffsets.length-1;const de=document.createElement("div");de.className="line-delete",e.original.push({afterLineNumber:ne,afterColumn:0,heightInLines:A.breakOffsets.length-1,domNode:xse(),marginDomNode:de})}else I=Math.max(I,this._renderOriginalLine(D++,ie,se,te,G,l,u,i,o,d,p,_,C,S,x,n,Y,z))}I+=a;const V=Y.build(),j=eZ?eZ.createHTML(V):V;if(Q.innerHTML=j,F.minWidthInPx=I*s,O){const ne=W.originalEndLineNumber-W.originalStartLineNumber;for(;O.length<=ne;)O[O.length]=1}F.diff.viewLineCounts=O}e.original.sort((M,W)=>M.afterLineNumber-W.afterLineNumber)}_renderOriginalLine(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S,x,T,k){T.appendASCIIString('<div class="view-line'),o||T.appendASCIIString(" char-delete"),T.appendASCIIString('" style="top:'),T.appendASCIIString(String(e*d)),T.appendASCIIString('px;width:1000000px;">');const M=Oh.isBasicASCII(t,s),W=Oh.containsRTL(t,M,a),F=g4(new tE(l.isMonospace&&!u,l.canUseHalfwidthRightwardsArrow,t,!1,M,W,0,n,i,x,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,p,_,C,S!==Dh.OFF,null),T);if(T.appendASCIIString("</div>"),this._renderIndicators){const Q=document.createElement("div");Q.className=`delete-sign ${So.asClassName(Ese)}`,Q.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),k.appendChild(Q)}return F.characterMapping.getAbsoluteOffset(F.characterMapping.length)}}function iIe(r,e){return Tc(r,e,["off","on","inherit"])}function jL(r){return r.modifiedEndLineNumber>0}function qL(r){return r.originalEndLineNumber>0}function xse(){const r=document.createElement("div");return r.className="diagonal-fill",r}function lN(r,e,t,n){const i=r.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new le(t,r.getLineMinColumn(t),n,r.getLineMaxColumn(n)))}function iZ(r,e){return{enableSplitViewResizing:Pn(r.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Pn(r.renderSideBySide,e.renderSideBySide),maxComputationTime:P9(r.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:P9(r.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Pn(r.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Pn(r.renderIndicators,e.renderIndicators),originalEditable:Pn(r.originalEditable,e.originalEditable),diffCodeLens:Pn(r.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Pn(r.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:iIe(r.diffWordWrap,e.diffWordWrap)}}function rIe(r,e){return{enableSplitViewResizing:r.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:r.renderSideBySide!==e.renderSideBySide,maxComputationTime:r.maxComputationTime!==e.maxComputationTime,maxFileSize:r.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:r.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:r.renderIndicators!==e.renderIndicators,originalEditable:r.originalEditable!==e.originalEditable,diffCodeLens:r.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:r.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:r.diffWordWrap!==e.diffWordWrap}}mo((r,e)=>{const t=r.getColor(eoe);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=r.getColor(toe);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const i=r.getColor(bCe);i&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${r.type==="hc"?"dashed":"solid"} ${i}; }`);const o=r.getColor(CCe);o&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${r.type==="hc"?"dashed":"solid"} ${o}; }`);const s=r.getColor(rD);s&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${s}; }`);const a=r.getColor(yCe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=r.getColor(FL);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const u=r.getColor(BL);u&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${u};
			}
		`);const d=r.getColor(WL);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${d};
			}
		`);const h=r.getColor(wCe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${h} 12.5%,
			#0000 12.5%, #0000 50%,
			${h} 50%, ${h} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});function Vv(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===S2.ICodeEditor:!1}function Dse(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===S2.IDiffEditor:!1}function Ise(r){return Vv(r)?r:Dse(r)?r.getModifiedEditor():null}const T$=ar("IWorkspaceEditService");function oIe(r){return Oc(r)&&(!!r.newUri||!!r.oldUri)}function sIe(r){return Oc(r)&&qn.isUri(r.resource)&&Oc(r.edit)}class N4{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(sIe(t))return new kse(t.resource,t.edit,t.modelVersionId,t.metadata);if(oIe(t))return new aIe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class kse extends N4{constructor(e,t,n,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}}class aIe extends N4{constructor(e,t,n,i){super(i),this.oldResource=e,this.newResource=t,this.options=n}}class ss{static insert(e,t){return{range:new le(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Lf{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?kSe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Cb(this.contents),n=Cb(this.overrides),i=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const s of o.overrides){const[a]=n.filter(l=>Rf(l.identifiers,s.identifiers));a?(this.mergeContents(a.contents,s.contents),a.keys.push(...s.keys),a.keys=oS(a.keys)):n.push(Cb(s))}for(const s of o.keys)i.indexOf(s)===-1&&i.push(s)}return new Lf(t,i,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const i of oS([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[i],s=t[i];s&&(typeof o=="object"&&typeof s=="object"?(o=Cb(o),this.mergeContents(o,s)):o=s),n[i]=o}return new Lf(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Oc(e[n])&&Oc(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Cb(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?kbe(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=o=>{o&&(n?this.mergeContents(n,o):n=Cb(o))};for(const o of this.overrides)Rf(o.identifiers,[e])?t=o.contents:o.identifiers.includes(e)&&i(o.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),a$(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&ISe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class lIe extends Lf{constructor(e={}){const t=vs.as(JS.Configuration).getConfigurationProperties(),n=Object.keys(t),i=Object.create(null),o=[];for(const s in t){const a=e[s],l=a!==void 0?a:t[s].default;a$(i,s,l,u=>console.error(`Conflict in default settings: ${u}`))}for(const s of Object.keys(i))PT.test(s)&&o.push({identifiers:Mre(s),keys:Object.keys(i[s]),contents:Foe(i[s],a=>console.error(`Conflict in default settings file: ${a}`))});super(i,n,o)}}class A4{constructor(e,t,n=new Lf,i=new Lf,o=new Tu,s=new Lf,a=new Tu,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=i,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Tu,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new Lf,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const o=this._memoryConfigurationByResource.get(e);o&&(n=n.merge(o))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),i=this.parseConfigurationModel(e.workspace),o=e.folders.reduce((s,a)=>(s.set(qn.revive(a[0]),this.parseConfigurationModel(a[1])),s),new Tu);return new A4(t,n,new Lf,i,o,new Lf,new Tu,!1)}static parseConfigurationModel(e){return new Lf(e.contents,e.keys,e.overrides).freeze()}}class uIe{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>o.add(l))),this.affectedKeys=[...o.values()];const s=new Lf;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=A4.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!np(i,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Foe({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}const cIe=/^(cursor|delete)/;class dIe extends ot{constructor(e,t,n,i,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=o,this._onDidUpdateKeybindings=this._register(new Fe),this._currentChord=null,this._currentChordChecker=new h2,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=vL.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new uc,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Sn.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return null;const o=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,s,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(E("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=vL.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=vL.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=n.getParts();return this._ignoreSingleModifiers=new vL(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,s=null;if(n){const[d]=e.getSingleModifierDispatchParts();o=d,s=d}else[o]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),u=this._getResolver().resolve(a,s,o);return this._logService.trace("KeybindingService#dispatch",l,u==null?void 0:u.commandId),u&&u.enterChord?(i=!0,this._enterChordMode(o,l),i):(this._currentChord&&(!u||!u.commandId)&&(this._notificationService.status(E("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),u&&u.commandId&&(u.bubble||(i=!0),typeof u.commandArgs>"u"?this._commandService.executeCommand(u.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(u.commandId,u.commandArgs).then(void 0,d=>this._notificationService.warn(d)),cIe.test(u.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:u.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class vL{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}vL.EMPTY=new vL(null);class KL{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let i=0,o=e.length;i<o;i++){const s=e[i].command;s&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=KL.combine(e,t);for(let i=0,o=this._keybindings.length;i<o;i++){let s=this._keybindings[i];s.keypressParts.length!==0&&(s.when&&s.when.type===0||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(e,t,n,i,o){return!(e.command!==i||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||o&&(!e.when||!sbe(o,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const i of t){if(!i.command||i.command.length===0||i.command.charAt(0)!=="-"){n.push(i);continue}const o=i.command.substr(1),s=i.keypressParts[0],a=i.keypressParts[1],l=i.when;for(let u=e.length-1;u>=0;u--)this._isTargetedForRemoval(e[u],s,a,o,l)&&e.splice(u,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.command===t.command)continue;const s=o.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&o.keypressParts[1]!==t.keypressParts[1]||KL.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:hre(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=s.length;a<l;a++){let u=s[a];u.keypressParts[1]===n&&i.push(u)}}else{const s=this._map.get(n);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=s}let o=this._findCommand(e,i);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${rZ(o.when)}, source: ${oZ(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${o.command}, when: ${rZ(o.when)}, source: ${oZ(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n];if(KL.contextMatchesRules(e,i.when))return i}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function rZ(r){return r?`${r.serialize()}`:"no when condition"}function oZ(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}class sZ{constructor(e,t,n,i,o,s,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?hW(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=hW(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}}function hW(r){let e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(!i)return e;e.push(i)}return e}class N${constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=n(a);if(l===null)return null;i[o]=gIe(a,l,this.modifierLabels[e])}return i.join(" ")}}const A$=new N$({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:E({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:E({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:E({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:E({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:E({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:E({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:E({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:E({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),hIe=new N$({ctrlKey:E({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:E({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:E({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:E({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:E({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:E({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:E({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:E({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:E({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:E({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:E({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:E({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),fIe=new N$({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function gIe(r,e,t){if(e===null)return"";const n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class pIe extends Wve{constructor(e,t){if(super(),t.length===0)throw hm("parts");this._os=e,this._parts=t}getLabel(){return A$.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return hIe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:fIe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new Bve(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class uN extends pIe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return ww.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ww.toString(e.keyCode)}_getElectronAccelerator(e){return ww.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return uN.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ww.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=cz[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof eS)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new eS(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=hW(e.map(i=>this._resolveSimpleUserBinding(i)));return n.length>0?[new uN(new AR(n),t)]:[]}}const Tse=ar("contextService");class mIe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var Ks;(function(r){r.noSelection=E("noSelection","No selection"),r.singleSelectionRange=E("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),r.singleSelection=E("singleSelection","Line {0}, Column {1}"),r.multiSelectionRange=E("multiSelectionRange","{0} selections ({1} characters selected)"),r.multiSelection=E("multiSelection","{0} selections"),r.emergencyConfOn=E("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),r.openingDocs=E("openingDocs","Now opening the Editor Accessibility documentation page."),r.readonlyDiffEditor=E("readonlyDiffEditor"," in a read-only pane of a diff editor."),r.editableDiffEditor=E("editableDiffEditor"," in a pane of a diff editor."),r.readonlyEditor=E("readonlyEditor"," in a read-only code editor"),r.editableEditor=E("editableEditor"," in a code editor"),r.changeConfigToOnMac=E("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),r.changeConfigToOnWinLinux=E("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),r.auto_on=E("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),r.auto_off=E("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),r.tabFocusModeOnMsg=E("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),r.tabFocusModeOnMsgNoKb=E("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),r.tabFocusModeOffMsg=E("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),r.tabFocusModeOffMsgNoKb=E("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),r.openDocMac=E("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),r.openDocWinLinux=E("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),r.outroMsg=E("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),r.showAccessibilityHelpAction=E("showAccessibilityHelpAction","Show Accessibility Help")})(Ks||(Ks={}));var fW;(function(r){r.inspectTokensAction=E("inspectTokens","Developer: Inspect Tokens")})(fW||(fW={}));var RM;(function(r){r.gotoLineActionLabel=E("gotoLineActionLabel","Go to Line/Column...")})(RM||(RM={}));var gW;(function(r){r.helpQuickAccessActionLabel=E("helpQuickAccess","Show all Quick Access Providers")})(gW||(gW={}));var cN;(function(r){r.quickCommandActionLabel=E("quickCommandActionLabel","Command Palette"),r.quickCommandHelp=E("quickCommandActionHelp","Show And Run Commands")})(cN||(cN={}));var dN;(function(r){r.quickOutlineActionLabel=E("quickOutlineActionLabel","Go to Symbol..."),r.quickOutlineByCategoryActionLabel=E("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(dN||(dN={}));var MM;(function(r){r.editorViewAccessibleLabel=E("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=E("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(MM||(MM={}));var pW;(function(r){r.toggleHighContrast=E("toggleHighContrast","Toggle High Contrast Theme")})(pW||(pW={}));var mW;(function(r){r.bulkEditServiceSummary=E("bulkEditServiceSummary","Made {0} edits in {1} files")})(mW||(mW={}));var Nse=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ase=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Ose=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class _Ie{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Fe}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function vIe(r,e,t){return Vv(r)?e(r):t(r)}let PM=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=vIe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new Lve(new _Ie(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};PM=Nse([Ase(0,ua)],PM);class O4{show(){return O4.NULL_PROGRESS_RUNNER}showWhile(e,t){return Ose(this,void 0,void 0,function*(){yield e})}}O4.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class bIe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}class R4{info(e){return this.notify({severity:os.Info,message:e})}warn(e){return this.notify({severity:os.Warning,message:e})}error(e){return this.notify({severity:os.Error,message:e})}notify(e){switch(e.severity){case os.Error:console.error(e.message);break;case os.Warning:console.warn(e.message);break;default:console.log(e.message);break}return R4.NO_OP}status(e,t){return ot.None}}R4.NO_OP=new hDe;class CIe{constructor(e){this._onWillExecuteCommand=new Fe,this._onDidExecuteCommand=new Fe,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Yi.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}}class Rse extends dIe{constructor(e,t,n,i,o,s){super(e,t,n,i,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(kt(s,In.KEY_DOWN,a=>{const l=new Oo(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(kt(window,In.KEY_UP,a=>{const l=new Oo(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,i){const o=C9(t,xf),s=new Nt;return o&&(this._dynamicKeybindings.push({keybinding:o.parts,command:e,when:i,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(Hi(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),s.add(Yi.registerCommand(e,n)),this.updateResolver({source:1}),s}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Rl.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new KL(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],i=0;for(const o of e){const s=o.when||void 0,a=o.keybinding;if(!a)n[i++]=new sZ(void 0,o.command,o.commandArgs,s,t,null,!1);else{const l=uN.resolveUserBinding(a,xf);for(const u of l)n[i++]=new sZ(u,o.command,o.commandArgs,s,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new eS(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new uN(t,xf)}}function aZ(r){return r&&typeof r=="object"&&(!r.overrideIdentifier||typeof r.overrideIdentifier=="string")&&(!r.resource||r.resource instanceof qn)}class Mse{constructor(){this._onDidChangeConfiguration=new Fe,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new A4(new lIe,new Lf)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=aZ(e)?e:aZ(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const i of e){const[o,s]=i;this.getValue(o)!==s&&(this._configuration.updateValue(o,s),n.push(o))}if(n.length>0){const i=new uIe({keys:n,overrides:[]},t,this._configuration);i.source=7,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}}class yIe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Fe,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const o=(Ge.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)}}let _W=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Pc||ji?`
`:`\r
`}};_W=Nse([Ase(0,Jr)],_W);class wIe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class M4{constructor(){const e=qn.from({scheme:M4.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new mIe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}M4.SCHEME="inmemory";function FM(r,e,t){if(!e||!(r instanceof Mse))return;let n=[];Object.keys(e).forEach(i=>{M1e(i)&&n.push([`editor.${i}`,e[i]]),t&&P1e(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&r.updateValues(n)}class SIe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Ose(this,void 0,void 0,function*(){const n=new Map;for(let s of e){if(!(s instanceof kse))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(s.resource);if(!a)throw new Error("bad edit - model not found");if(typeof s.versionId=="number"&&a.getVersionId()!==s.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(ss.replaceMove(le.lift(s.textEdit.range),s.textEdit.text))}let i=0,o=0;for(const[s,a]of n)s.pushStackElement(),s.pushEditOperations([],a,()=>[]),s.pushStackElement(),o+=1,i+=a.length;return{ariaSummary:Nf(mW.bulkEditServiceSummary,i,o)}})}}class EIe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class Pse{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Sn.None}get dimension(){return this._dimension||(this._dimension=jP(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}class LIe{constructor(){this._neverEmitter=new Fe,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}const JC=ar("themeService"),Ro=ar("keybindingService");class xIe extends ot{constructor(){super(),this._onCodeEditorAdd=this._register(new Fe),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Fe),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Fe),this._onDiffEditorRemove=this._register(new Fe),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const i=e.toString();let o;this._modelProperties.has(i)?o=this._modelProperties.get(i):(o=new Map,this._modelProperties.set(i,o)),o.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var DIe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},IIe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let vW=class extends xIe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._globalStyleSheet=e||null,this._themeService=t}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}};vW=DIe([IIe(1,Ho)],vW);var kIe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let BM=class extends vW{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===Si.http||o===Si.https)return Jie(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const o={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};BM=kIe([lZ(1,Jn),lZ(2,Ho)],BM);var O$=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},No=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let TIe=0,uZ=!1;function NIe(r){if(!r){if(uZ)return;uZ=!0}T0e(r||document.body)}let WM=class extends oN{constructor(e,t,n,i,o,s,a,l,u,d){const h=Object.assign({},t);h.ariaLabel=h.ariaLabel||MM.editorViewAccessibleLabel,h.ariaLabel=h.ariaLabel+";"+MM.accessibilityHelpMessage,super(e,h,{},n,i,o,s,l,u,d),a instanceof Rse?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,NIe(h.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let i="DYNAMIC_"+ ++TIe,o=Xt.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,o),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ot.None;const t=e.id,n=e.label,i=Xt.and(Xt.equals("editorId",this.getId()),Xt.deserialize(e.precondition)),o=e.keybindings,s=Xt.and(i,Xt.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,u=(_,...C)=>Promise.resolve(e.run(this,...C)),d=new Nt,h=this.getId()+":"+t;if(d.add(Yi.registerCommand(h,u)),a){let _={command:{id:h,title:n},when:i,group:a,order:l};d.add(Au.appendMenuItem(wn.EditorContext,_))}if(Array.isArray(o))for(const _ of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,_,u,s));let p=new fse(h,n,n,i,u,this._contextKeyService);return this._actions[t]=p,d.add(Hi(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof BM)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};WM=O$([No(2,xi),No(3,vr),No(4,Go),No(5,Jn),No(6,Ro),No(7,Ho),No(8,As),No(9,Uc)],WM);let hN=class extends WM{constructor(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S){const x=Object.assign({},t);FM(p,x,!1);const T=d.registerEditorContainer(e);typeof x.theme=="string"&&d.setTheme(x.theme),typeof x.autoDetectHighContrast<"u"&&d.setAutoDetectHighContrast(!!x.autoDetectHighContrast);let k=x.model;delete x.model,super(e,x,i,o,s,a,l,d,h,_),this._contextViewService=u,this._configurationService=p,this._standaloneThemeService=d,this._register(n),this._register(T);let M;if(typeof k>"u"?(M=Fse(C,S,x.value||"",x.language||jg.text,void 0),this._ownsModel=!0):(M=k,this._ownsModel=!1),this._attachModel(M),M){let W={oldModelUrl:null,newModelUrl:M.uri};this._onDidChangeModel.fire(W)}}dispose(){super.dispose()}updateOptions(e){FM(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};hN=O$([No(3,xi),No(4,vr),No(5,Go),No(6,Jn),No(7,Ro),No(8,t1),No(9,JC),No(10,As),No(11,Jr),No(12,Uc),No(13,ua),No(14,Bl)],hN);let bW=class extends PC{constructor(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S){const x=Object.assign({},t);FM(p,x,!0);const T=d.registerEditorContainer(e);typeof x.theme=="string"&&d.setTheme(x.theme),typeof x.autoDetectHighContrast<"u"&&d.setAutoDetectHighContrast(!!x.autoDetectHighContrast),super(e,x,{},S,l,o,i,u,d,h,_,C),this._contextViewService=a,this._configurationService=p,this._standaloneThemeService=d,this._register(n),this._register(T),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){FM(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(WM,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};bW=O$([No(3,xi),No(4,Jn),No(5,Ro),No(6,t1),No(7,Fh),No(8,vr),No(9,JC),No(10,As),No(11,Jr),No(12,XC),No(13,n1),No(14,QC)],bW);function Fse(r,e,t,n,i){if(t=t||"",!n){const o=t.indexOf(`
`);let s=t;return o!==-1&&(s=t.substring(0,o)),cZ(r,t,e.createByFilepathOrFirstLine(i||null,s),i)}return cZ(r,t,e.create(n),i)}function cZ(r,e,t,n){return r.createModel(e,t,n)}const AIe="$initialize";let dZ=!1;function CW(r){Jx&&(dZ||(dZ=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}class OIe{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}class hZ{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}class RIe{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}class MIe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class PIe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class FIe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,o)=>{this._pendingReplies[n]={resolve:i,reject:o},this._send(new OIe(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new Fe({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new RIe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new PIe(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new hZ(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=rG(i.detail)),this._send(new hZ(this._workerId,t,void 0,rG(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new MIe(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class BIe extends ot{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",u=>{this._protocol.handleMessage(u)},u=>{i&&i(u)})),this._protocol=new FIe({sendMessage:(u,d)=>{this._worker.postMessage(u,d)},handleMessage:(u,d)=>{if(typeof n[u]!="function")return Promise.reject(new Error("Missing method "+u+" on main thread host."));try{return Promise.resolve(n[u].apply(n,d))}catch(h){return Promise.reject(h)}},handleEvent:(u,d)=>{if(Wse(u)){const h=n[u].call(n,d);if(typeof h!="function")throw new Error(`Missing dynamic event ${u} on main thread host.`);return h}if(Bse(u)){const h=n[u];if(typeof h!="function")throw new Error(`Missing event ${u} on main thread host.`);return h}throw new Error(`Malformed event name ${u}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof ms.require<"u"&&typeof ms.require.getConfig=="function"?o=ms.require.getConfig():typeof ms.requirejs<"u"&&(o=ms.requirejs.s.contexts._.config);const s=bz(n);this._onModuleLoaded=this._protocol.sendMessage(AIe,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,s]);const a=(u,d)=>this._request(u,d),l=(u,d)=>this._protocol.listen(u,d);this._lazyProxy=new Promise((u,d)=>{i=d,this._onModuleLoaded.then(h=>{u(WIe(h,a,l))},h=>{d(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}function Bse(r){return r[0]==="o"&&r[1]==="n"&&sv(r.charCodeAt(2))}function Wse(r){return/^onDynamic/.test(r)&&sv(r.charCodeAt(9))}function WIe(r,e,t){const n=s=>function(){const a=Array.prototype.slice.call(arguments,0);return e(s,a)},i=s=>function(a){return t(s,a)};let o={};for(const s of r){if(Wse(s)){o[s]=i(s);continue}if(Bse(s)){o[s]=t(s,void 0);continue}o[s]=n(s)}return o}var V5;const fZ=(V5=window.trustedTypes)===null||V5===void 0?void 0:V5.createPolicy("defaultWorkerFactory",{createScriptURL:r=>r});function VIe(r,e){if(ms.MonacoEnvironment){if(typeof ms.MonacoEnvironment.getWorker=="function")return ms.MonacoEnvironment.getWorker(r,e);if(typeof ms.MonacoEnvironment.getWorkerUrl=="function"){const t=ms.MonacoEnvironment.getWorkerUrl(r,e);return new Worker(fZ?fZ.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function HIe(r){return typeof r.then=="function"}class UIe{constructor(e,t,n,i,o){this.id=t;const s=VIe("workerMain.js",n);HIe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class P4{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let i=++P4.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new UIe(e,i,this._label||"anonymous"+i,t,o=>{CW(o),this._webWorkerFailedBeforeError=o,n(o)})}}P4.LAST_WORKER_ID=0;class Q1{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class gZ{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function zIe(r,e,t){return new pv(new gZ(r),new gZ(e)).ComputeDiff(t).changes}class UE{static Assert(e,t){if(!e)throw new Error(t)}}class zE{static Copy(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}static Copy2(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}}class pZ{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Q1(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class pv{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,o,s]=pv._getElements(e),[a,l,u]=pv._getElements(t);this._hasStrings=s&&u,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(pv._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=Jz(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=pv._getStrictElement(this._originalSequence,e),i=pv._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){const s=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(UE.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new Q1(e,0,n,i-n+1)]):e<=t?(UE.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Q1(e,t-e+1,n,0)]):(UE.Assert(e===t+1,"originalStart should only be one more than originalEnd"),UE.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,s,a,o),u=s[0],d=a[0];if(l!==null)return l;if(!o[0]){const h=this.ComputeDiffRecursive(e,u,n,d,o);let p=[];return o[0]?p=[new Q1(u+1,t-(u+1)+1,d+1,i-(d+1)+1)]:p=this.ComputeDiffRecursive(u+1,t,d+1,i,o),this.ConcatenateChanges(h,p)}return[new Q1(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,s,a,l,u,d,h,p,_,C,S,x,T,k){let M=null,W=null,F=new pZ,Q=t,z=n,$=_[0]-x[0]-i,G=-1073741824,Y=this.m_forwardHistory.length-1;do{const I=$+e;I===Q||I<z&&u[I-1]<u[I+1]?(h=u[I+1],C=h-$-i,h<G&&F.MarkNextChange(),G=h,F.AddModifiedElement(h+1,C),$=I+1-e):(h=u[I-1]+1,C=h-$-i,h<G&&F.MarkNextChange(),G=h-1,F.AddOriginalElement(h,C+1),$=I-1-e),Y>=0&&(u=this.m_forwardHistory[Y],e=u[0],Q=1,z=u.length-1)}while(--Y>=-1);if(M=F.getReverseChanges(),k[0]){let I=_[0]+1,D=x[0]+1;if(M!==null&&M.length>0){const O=M[M.length-1];I=Math.max(I,O.getOriginalEnd()),D=Math.max(D,O.getModifiedEnd())}W=[new Q1(I,p-I+1,D,S-D+1)]}else{F=new pZ,Q=s,z=a,$=_[0]-x[0]-l,G=1073741824,Y=T?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const I=$+o;I===Q||I<z&&d[I-1]>=d[I+1]?(h=d[I+1]-1,C=h-$-l,h>G&&F.MarkNextChange(),G=h+1,F.AddOriginalElement(h+1,C+1),$=I+1-o):(h=d[I-1],C=h-$-l,h>G&&F.MarkNextChange(),G=h,F.AddModifiedElement(h+1,C+1),$=I-1-o),Y>=0&&(d=this.m_reverseHistory[Y],o=d[0],Q=1,z=d.length-1)}while(--Y>=-1);W=F.getChanges()}return this.ConcatenateChanges(M,W)}ComputeRecursionPoint(e,t,n,i,o,s,a){let l=0,u=0,d=0,h=0,p=0,_=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const C=t-e+(i-n),S=C+1,x=new Int32Array(S),T=new Int32Array(S),k=i-n,M=t-e,W=e-n,F=t-i,z=(M-k)%2===0;x[k]=e,T[M]=t,a[0]=!1;for(let $=1;$<=C/2+1;$++){let G=0,Y=0;d=this.ClipDiagonalBound(k-$,$,k,S),h=this.ClipDiagonalBound(k+$,$,k,S);for(let D=d;D<=h;D+=2){D===d||D<h&&x[D-1]<x[D+1]?l=x[D+1]:l=x[D-1]+1,u=l-(D-k)-W;const O=l;for(;l<t&&u<i&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(x[D]=l,l+u>G+Y&&(G=l,Y=u),!z&&Math.abs(D-M)<=$-1&&l>=T[D])return o[0]=l,s[0]=u,O<=T[D]&&1447>0&&$<=1447+1?this.WALKTRACE(k,d,h,W,M,p,_,F,x,T,l,t,o,u,i,s,z,a):null}const I=(G-e+(Y-n)-$)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(G,I))return a[0]=!0,o[0]=G,s[0]=Y,I>0&&1447>0&&$<=1447+1?this.WALKTRACE(k,d,h,W,M,p,_,F,x,T,l,t,o,u,i,s,z,a):(e++,n++,[new Q1(e,t-e+1,n,i-n+1)]);p=this.ClipDiagonalBound(M-$,$,M,S),_=this.ClipDiagonalBound(M+$,$,M,S);for(let D=p;D<=_;D+=2){D===p||D<_&&T[D-1]>=T[D+1]?l=T[D+1]-1:l=T[D-1],u=l-(D-M)-F;const O=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(T[D]=l,z&&Math.abs(D-k)<=$&&l<=x[D])return o[0]=l,s[0]=u,O>=x[D]&&1447>0&&$<=1447+1?this.WALKTRACE(k,d,h,W,M,p,_,F,x,T,l,t,o,u,i,s,z,a):null}if($<=1447){let D=new Int32Array(h-d+2);D[0]=k-d+1,zE.Copy2(x,d,D,1,h-d+1),this.m_forwardHistory.push(D),D=new Int32Array(_-p+2),D[0]=M-p+1,zE.Copy2(T,p,D,1,_-p+1),this.m_reverseHistory.push(D)}}return this.WALKTRACE(k,d,h,W,M,p,_,F,x,T,l,t,o,u,i,s,z,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const u=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!u)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,o=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}const s=n.originalLength>0,a=n.modifiedLength>0;let l=0,u=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const p=n.originalStart-h,_=n.modifiedStart-h;if(p<i||_<o||s&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||a&&!this.ModifiedElementsAreEqual(_,_+n.modifiedLength))break;const S=(p===i&&_===o?5:0)+this._boundaryScore(p,n.originalLength,_,n.modifiedLength);S>u&&(u=S,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],o=e[t],s=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,u=l-a,d=i.modifiedStart,h=o.modifiedStart+o.modifiedLength,p=h-d;if(s<5&&u<20&&p<20){const _=this._findBetterContiguousSequence(a,u,d,p,s);if(_){const[C,S]=_;(C!==i.originalStart+i.originalLength||S!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=C-i.originalStart,i.modifiedLength=S-i.modifiedStart,o.originalStart=C+s,o.modifiedStart=S+s,o.originalLength=l-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;const s=e+t-o+1,a=n+i-o+1;let l=0,u=0,d=0;for(let h=e;h<s;h++)for(let p=n;p<a;p++){const _=this._contiguousSequenceScore(h,p,o);_>0&&_>l&&(l=_,u=h,d=p)}return l>0?[u,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return zE.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],zE.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return zE.Copy(e,0,i,0,e.length),zE.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(UE.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),UE.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let o=e.originalLength;const s=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Q1(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const o=n,s=i-n-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=s%2===0;return a===l?i-1:i-2}}}const $Ie=3;function Vse(r,e,t,n){return new pv(r,e,t).ComputeDiff(n)}class mZ{constructor(e){const t=[],n=[];for(let i=0,o=e.length;i<o;i++)t[i]=yW(e[i],1),n[i]=wW(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],o=[],s=[];let a=0;for(let l=t;l<=n;l++){const u=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:u.length+1;for(let p=d;p<h;p++)i[a]=u.charCodeAt(p-1),o[a]=l+1,s[a]=p,a++}return new jIe(i,o,s)}}class jIe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class fN{constructor(e,t,n,i,o,s,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=o,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let i,o,s,a,l,u,d,h;return e.originalLength===0?(i=0,o=0,s=0,a=0):(i=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,u=0,d=0,h=0):(l=n.getStartLineNumber(e.modifiedStart),u=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new fN(i,o,s,a,l,u,d,h)}}function qIe(r){if(r.length<=1)return r;const e=[r[0]];let t=e[0];for(let n=1,i=r.length;n<i;n++){const o=r[n],s=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(s,a)<$Ie?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class gT{constructor(e,t,n,i,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=o}static createFromDiffResult(e,t,n,i,o,s,a){let l,u,d,h,p;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,u=0):(l=n.getStartLineNumber(t.originalStart),u=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,h=0):(d=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const _=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),C=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let S=Vse(_,C,o,!0).changes;a&&(S=qIe(S)),p=[];for(let x=0,T=S.length;x<T;x++)p.push(fN.createFromDiffChange(S[x],_,C))}return new gT(l,u,d,h,p)}}class KIe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new mZ(e),this.modified=new mZ(t),this.continueLineDiff=_Z(n.maxComputationTime),this.continueCharDiff=_Z(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=Vse(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,u=t.length;l<u;l++)a.push(gT.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let o=0,s=0;for(let a=-1,l=t.length;a<l;a++){const u=a+1<l?t[a+1]:null,d=u?u.originalStart:this.originalLines.length,h=u?u.modifiedStart:this.modifiedLines.length;for(;o<d&&s<h;){const p=this.originalLines[o],_=this.modifiedLines[s];if(p!==_){{let C=yW(p,1),S=yW(_,1);for(;C>1&&S>1;){const x=p.charCodeAt(C-2),T=_.charCodeAt(S-2);if(x!==T)break;C--,S--}(C>1||S>1)&&this._pushTrimWhitespaceCharChange(i,o+1,1,C,s+1,1,S)}{let C=wW(p,1),S=wW(_,1);const x=p.length+1,T=_.length+1;for(;C<x&&S<T;){const k=p.charCodeAt(C-1),M=p.charCodeAt(S-1);if(k!==M)break;C++,S++}(C<x||S<T)&&this._pushTrimWhitespaceCharChange(i,o+1,C,x,s+1,S,T)}}o++,s++}u&&(i.push(gT.createFromDiffResult(this.shouldIgnoreTrimWhitespace,u,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=u.originalLength,s+=u.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,o,s,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,o,s,a))return;let l;this.shouldComputeCharChanges&&(l=[new fN(t,n,t,i,o,s,o,a)]),e.push(new gT(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,o,s,a){const l=e.length;if(l===0)return!1;const u=e[l-1];return u.originalEndLineNumber===0||u.modifiedEndLineNumber===0?!1:u.originalEndLineNumber+1===t&&u.modifiedEndLineNumber+1===o?(u.originalEndLineNumber=t,u.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&u.charChanges&&u.charChanges.push(new fN(t,n,t,i,o,s,o,a)),!0):!1}}function yW(r,e){const t=sc(r);return t===-1?e:t+1}function wW(r,e){const t=Iv(r);return t===-1?e:t+2}function _Z(r){if(r===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<r}class GIe{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Ge(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Qxe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=Mv(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}class YIe{constructor(e,t,n){const i=new Uint8Array(e*t);for(let o=0,s=e*t;o<s;o++)i[o]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class ZIe{constructor(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++){let[a,l,u]=e[o];l>t&&(t=l),a>n&&(n=a),u>n&&(n=u)}t++,n++;let i=new YIe(n,t,0);for(let o=0,s=e.length;o<s;o++){let[a,l,u]=e[o];i.set(a,l,u)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let H5=null;function XIe(){return H5===null&&(H5=new ZIe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),H5}let _k=null;function QIe(){if(_k===null){_k=new oD(0);const r=` 	<>'"`;for(let t=0;t<r.length;t++)_k.set(r.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)_k.set(e.charCodeAt(t),2)}return _k}class VM{static _createLink(e,t,n,i,o){let s=o-1;do{const a=t.charCodeAt(s);if(e.get(a)!==2)break;s--}while(s>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(s);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&s--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:s+2},url:t.substring(i,s+1)}}static computeLinks(e,t=XIe()){const n=QIe();let i=[];for(let o=1,s=e.getLineCount();o<=s;o++){const a=e.getLineContent(o),l=a.length;let u=0,d=0,h=0,p=1,_=!1,C=!1,S=!1,x=!1;for(;u<l;){let T=!1;const k=a.charCodeAt(u);if(p===13){let M;switch(k){case 40:_=!0,M=0;break;case 41:M=_?0:1;break;case 91:S=!0,C=!0,M=0;break;case 93:S=!1,M=C?0:1;break;case 123:x=!0,M=0;break;case 125:M=x?0:1;break;case 39:M=h===34||h===96?0:1;break;case 34:M=h===39||h===96?0:1;break;case 96:M=h===39||h===34?0:1;break;case 42:M=h===42?1:0;break;case 124:M=h===124?1:0;break;case 32:M=S?0:1;break;default:M=n.get(k)}M===1&&(i.push(VM._createLink(n,a,o,d,u)),T=!0)}else if(p===12){let M;k===91?(C=!0,M=0):M=n.get(k),M===1?T=!0:p=13}else p=t.nextState(p,k),p===0&&(T=!0);T&&(p=1,_=!1,C=!1,x=!1,d=u+1,h=k),u++}p===13&&i.push(VM._createLink(n,a,o,d,l))}return i}}function JIe(r){return!r||typeof r.getLineCount!="function"||typeof r.getLineContent!="function"?[]:VM.computeLinks(r)}class SW{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,o){if(e&&t){let s=this.doNavigateValueSet(t,o);if(s)return{range:e,value:s}}if(n&&i){let s=this.doNavigateValueSet(i,o);if(s)return{range:n,value:s}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),i=Number(e),o=parseFloat(e);return!isNaN(i)&&!isNaN(o)&&i===o?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let o=0,s=e.length;i===null&&o<s;o++)i=this.valueSetReplace(e[o],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}SW.INSTANCE=new SW;var EW;(function(r){r[r.Unknown=0]="Unknown",r[r.Disabled=1]="Disabled",r[r.Enabled=2]="Enabled"})(EW||(EW={}));var LW;(function(r){r[r.KeepWhitespace=1]="KeepWhitespace",r[r.InsertAsSnippet=4]="InsertAsSnippet"})(LW||(LW={}));var xW;(function(r){r[r.Method=0]="Method",r[r.Function=1]="Function",r[r.Constructor=2]="Constructor",r[r.Field=3]="Field",r[r.Variable=4]="Variable",r[r.Class=5]="Class",r[r.Struct=6]="Struct",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Event=10]="Event",r[r.Operator=11]="Operator",r[r.Unit=12]="Unit",r[r.Value=13]="Value",r[r.Constant=14]="Constant",r[r.Enum=15]="Enum",r[r.EnumMember=16]="EnumMember",r[r.Keyword=17]="Keyword",r[r.Text=18]="Text",r[r.Color=19]="Color",r[r.File=20]="File",r[r.Reference=21]="Reference",r[r.Customcolor=22]="Customcolor",r[r.Folder=23]="Folder",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue",r[r.Snippet=27]="Snippet"})(xW||(xW={}));var DW;(function(r){r[r.Deprecated=1]="Deprecated"})(DW||(DW={}));var IW;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(IW||(IW={}));var kW;(function(r){r[r.EXACT=0]="EXACT",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(kW||(kW={}));var TW;(function(r){r[r.NotSet=0]="NotSet",r[r.ContentFlush=1]="ContentFlush",r[r.RecoverFromMarkers=2]="RecoverFromMarkers",r[r.Explicit=3]="Explicit",r[r.Paste=4]="Paste",r[r.Undo=5]="Undo",r[r.Redo=6]="Redo"})(TW||(TW={}));var NW;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(NW||(NW={}));var AW;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(AW||(AW={}));var OW;(function(r){r[r.None=0]="None",r[r.Keep=1]="Keep",r[r.Brackets=2]="Brackets",r[r.Advanced=3]="Advanced",r[r.Full=4]="Full"})(OW||(OW={}));var RW;(function(r){r[r.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",r[r.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",r[r.accessibilitySupport=2]="accessibilitySupport",r[r.accessibilityPageSize=3]="accessibilityPageSize",r[r.ariaLabel=4]="ariaLabel",r[r.autoClosingBrackets=5]="autoClosingBrackets",r[r.autoClosingDelete=6]="autoClosingDelete",r[r.autoClosingOvertype=7]="autoClosingOvertype",r[r.autoClosingQuotes=8]="autoClosingQuotes",r[r.autoIndent=9]="autoIndent",r[r.automaticLayout=10]="automaticLayout",r[r.autoSurround=11]="autoSurround",r[r.bracketPairColorization=12]="bracketPairColorization",r[r.guides=13]="guides",r[r.codeLens=14]="codeLens",r[r.codeLensFontFamily=15]="codeLensFontFamily",r[r.codeLensFontSize=16]="codeLensFontSize",r[r.colorDecorators=17]="colorDecorators",r[r.columnSelection=18]="columnSelection",r[r.comments=19]="comments",r[r.contextmenu=20]="contextmenu",r[r.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",r[r.cursorBlinking=22]="cursorBlinking",r[r.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",r[r.cursorStyle=24]="cursorStyle",r[r.cursorSurroundingLines=25]="cursorSurroundingLines",r[r.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",r[r.cursorWidth=27]="cursorWidth",r[r.disableLayerHinting=28]="disableLayerHinting",r[r.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",r[r.domReadOnly=30]="domReadOnly",r[r.dragAndDrop=31]="dragAndDrop",r[r.emptySelectionClipboard=32]="emptySelectionClipboard",r[r.extraEditorClassName=33]="extraEditorClassName",r[r.fastScrollSensitivity=34]="fastScrollSensitivity",r[r.find=35]="find",r[r.fixedOverflowWidgets=36]="fixedOverflowWidgets",r[r.folding=37]="folding",r[r.foldingStrategy=38]="foldingStrategy",r[r.foldingHighlight=39]="foldingHighlight",r[r.foldingImportsByDefault=40]="foldingImportsByDefault",r[r.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",r[r.fontFamily=42]="fontFamily",r[r.fontInfo=43]="fontInfo",r[r.fontLigatures=44]="fontLigatures",r[r.fontSize=45]="fontSize",r[r.fontWeight=46]="fontWeight",r[r.formatOnPaste=47]="formatOnPaste",r[r.formatOnType=48]="formatOnType",r[r.glyphMargin=49]="glyphMargin",r[r.gotoLocation=50]="gotoLocation",r[r.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",r[r.hover=52]="hover",r[r.inDiffEditor=53]="inDiffEditor",r[r.inlineSuggest=54]="inlineSuggest",r[r.letterSpacing=55]="letterSpacing",r[r.lightbulb=56]="lightbulb",r[r.lineDecorationsWidth=57]="lineDecorationsWidth",r[r.lineHeight=58]="lineHeight",r[r.lineNumbers=59]="lineNumbers",r[r.lineNumbersMinChars=60]="lineNumbersMinChars",r[r.linkedEditing=61]="linkedEditing",r[r.links=62]="links",r[r.matchBrackets=63]="matchBrackets",r[r.minimap=64]="minimap",r[r.mouseStyle=65]="mouseStyle",r[r.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",r[r.mouseWheelZoom=67]="mouseWheelZoom",r[r.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",r[r.multiCursorModifier=69]="multiCursorModifier",r[r.multiCursorPaste=70]="multiCursorPaste",r[r.occurrencesHighlight=71]="occurrencesHighlight",r[r.overviewRulerBorder=72]="overviewRulerBorder",r[r.overviewRulerLanes=73]="overviewRulerLanes",r[r.padding=74]="padding",r[r.parameterHints=75]="parameterHints",r[r.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",r[r.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",r[r.quickSuggestions=78]="quickSuggestions",r[r.quickSuggestionsDelay=79]="quickSuggestionsDelay",r[r.readOnly=80]="readOnly",r[r.renameOnType=81]="renameOnType",r[r.renderControlCharacters=82]="renderControlCharacters",r[r.renderFinalNewline=83]="renderFinalNewline",r[r.renderLineHighlight=84]="renderLineHighlight",r[r.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",r[r.renderValidationDecorations=86]="renderValidationDecorations",r[r.renderWhitespace=87]="renderWhitespace",r[r.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",r[r.roundedSelection=89]="roundedSelection",r[r.rulers=90]="rulers",r[r.scrollbar=91]="scrollbar",r[r.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",r[r.scrollBeyondLastLine=93]="scrollBeyondLastLine",r[r.scrollPredominantAxis=94]="scrollPredominantAxis",r[r.selectionClipboard=95]="selectionClipboard",r[r.selectionHighlight=96]="selectionHighlight",r[r.selectOnLineNumbers=97]="selectOnLineNumbers",r[r.showFoldingControls=98]="showFoldingControls",r[r.showUnused=99]="showUnused",r[r.snippetSuggestions=100]="snippetSuggestions",r[r.smartSelect=101]="smartSelect",r[r.smoothScrolling=102]="smoothScrolling",r[r.stickyTabStops=103]="stickyTabStops",r[r.stopRenderingLineAfter=104]="stopRenderingLineAfter",r[r.suggest=105]="suggest",r[r.suggestFontSize=106]="suggestFontSize",r[r.suggestLineHeight=107]="suggestLineHeight",r[r.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",r[r.suggestSelection=109]="suggestSelection",r[r.tabCompletion=110]="tabCompletion",r[r.tabIndex=111]="tabIndex",r[r.unicodeHighlighting=112]="unicodeHighlighting",r[r.unusualLineTerminators=113]="unusualLineTerminators",r[r.useShadowDOM=114]="useShadowDOM",r[r.useTabStops=115]="useTabStops",r[r.wordSeparators=116]="wordSeparators",r[r.wordWrap=117]="wordWrap",r[r.wordWrapBreakAfterCharacters=118]="wordWrapBreakAfterCharacters",r[r.wordWrapBreakBeforeCharacters=119]="wordWrapBreakBeforeCharacters",r[r.wordWrapColumn=120]="wordWrapColumn",r[r.wordWrapOverride1=121]="wordWrapOverride1",r[r.wordWrapOverride2=122]="wordWrapOverride2",r[r.wrappingIndent=123]="wrappingIndent",r[r.wrappingStrategy=124]="wrappingStrategy",r[r.showDeprecated=125]="showDeprecated",r[r.inlayHints=126]="inlayHints",r[r.editorClassName=127]="editorClassName",r[r.pixelRatio=128]="pixelRatio",r[r.tabFocusMode=129]="tabFocusMode",r[r.layoutInfo=130]="layoutInfo",r[r.wrappingInfo=131]="wrappingInfo"})(RW||(RW={}));var MW;(function(r){r[r.TextDefined=0]="TextDefined",r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(MW||(MW={}));var PW;(function(r){r[r.LF=0]="LF",r[r.CRLF=1]="CRLF"})(PW||(PW={}));var FW;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(FW||(FW={}));var BW;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(BW||(BW={}));var WW;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(WW||(WW={}));var VW;(function(r){r[r.DependsOnKbLayout=-1]="DependsOnKbLayout",r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.Digit0=21]="Digit0",r[r.Digit1=22]="Digit1",r[r.Digit2=23]="Digit2",r[r.Digit3=24]="Digit3",r[r.Digit4=25]="Digit4",r[r.Digit5=26]="Digit5",r[r.Digit6=27]="Digit6",r[r.Digit7=28]="Digit7",r[r.Digit8=29]="Digit8",r[r.Digit9=30]="Digit9",r[r.KeyA=31]="KeyA",r[r.KeyB=32]="KeyB",r[r.KeyC=33]="KeyC",r[r.KeyD=34]="KeyD",r[r.KeyE=35]="KeyE",r[r.KeyF=36]="KeyF",r[r.KeyG=37]="KeyG",r[r.KeyH=38]="KeyH",r[r.KeyI=39]="KeyI",r[r.KeyJ=40]="KeyJ",r[r.KeyK=41]="KeyK",r[r.KeyL=42]="KeyL",r[r.KeyM=43]="KeyM",r[r.KeyN=44]="KeyN",r[r.KeyO=45]="KeyO",r[r.KeyP=46]="KeyP",r[r.KeyQ=47]="KeyQ",r[r.KeyR=48]="KeyR",r[r.KeyS=49]="KeyS",r[r.KeyT=50]="KeyT",r[r.KeyU=51]="KeyU",r[r.KeyV=52]="KeyV",r[r.KeyW=53]="KeyW",r[r.KeyX=54]="KeyX",r[r.KeyY=55]="KeyY",r[r.KeyZ=56]="KeyZ",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.Semicolon=80]="Semicolon",r[r.Equal=81]="Equal",r[r.Comma=82]="Comma",r[r.Minus=83]="Minus",r[r.Period=84]="Period",r[r.Slash=85]="Slash",r[r.Backquote=86]="Backquote",r[r.BracketLeft=87]="BracketLeft",r[r.Backslash=88]="Backslash",r[r.BracketRight=89]="BracketRight",r[r.Quote=90]="Quote",r[r.OEM_8=91]="OEM_8",r[r.IntlBackslash=92]="IntlBackslash",r[r.Numpad0=93]="Numpad0",r[r.Numpad1=94]="Numpad1",r[r.Numpad2=95]="Numpad2",r[r.Numpad3=96]="Numpad3",r[r.Numpad4=97]="Numpad4",r[r.Numpad5=98]="Numpad5",r[r.Numpad6=99]="Numpad6",r[r.Numpad7=100]="Numpad7",r[r.Numpad8=101]="Numpad8",r[r.Numpad9=102]="Numpad9",r[r.NumpadMultiply=103]="NumpadMultiply",r[r.NumpadAdd=104]="NumpadAdd",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NumpadSubtract=106]="NumpadSubtract",r[r.NumpadDecimal=107]="NumpadDecimal",r[r.NumpadDivide=108]="NumpadDivide",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.AudioVolumeMute=112]="AudioVolumeMute",r[r.AudioVolumeUp=113]="AudioVolumeUp",r[r.AudioVolumeDown=114]="AudioVolumeDown",r[r.BrowserSearch=115]="BrowserSearch",r[r.BrowserHome=116]="BrowserHome",r[r.BrowserBack=117]="BrowserBack",r[r.BrowserForward=118]="BrowserForward",r[r.MediaTrackNext=119]="MediaTrackNext",r[r.MediaTrackPrevious=120]="MediaTrackPrevious",r[r.MediaStop=121]="MediaStop",r[r.MediaPlayPause=122]="MediaPlayPause",r[r.LaunchMediaPlayer=123]="LaunchMediaPlayer",r[r.LaunchMail=124]="LaunchMail",r[r.LaunchApp2=125]="LaunchApp2",r[r.MAX_VALUE=126]="MAX_VALUE"})(VW||(VW={}));var HW;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(HW||(HW={}));var UW;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(UW||(UW={}));var zW;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(zW||(zW={}));var $W;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.TEXTAREA=1]="TEXTAREA",r[r.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",r[r.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",r[r.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",r[r.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",r[r.CONTENT_TEXT=6]="CONTENT_TEXT",r[r.CONTENT_EMPTY=7]="CONTENT_EMPTY",r[r.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",r[r.CONTENT_WIDGET=9]="CONTENT_WIDGET",r[r.OVERVIEW_RULER=10]="OVERVIEW_RULER",r[r.SCROLLBAR=11]="SCROLLBAR",r[r.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",r[r.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})($W||($W={}));var jW;(function(r){r[r.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",r[r.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",r[r.TOP_CENTER=2]="TOP_CENTER"})(jW||(jW={}));var qW;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(qW||(qW={}));var KW;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval",r[r.Custom=4]="Custom"})(KW||(KW={}));var GW;(function(r){r[r.None=0]="None",r[r.Text=1]="Text",r[r.Blocks=2]="Blocks"})(GW||(GW={}));var YW;(function(r){r[r.Smooth=0]="Smooth",r[r.Immediate=1]="Immediate"})(YW||(YW={}));var ZW;(function(r){r[r.Auto=1]="Auto",r[r.Hidden=2]="Hidden",r[r.Visible=3]="Visible"})(ZW||(ZW={}));var XW;(function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"})(XW||(XW={}));var QW;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(QW||(QW={}));var JW;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(JW||(JW={}));var eV;(function(r){r[r.Deprecated=1]="Deprecated"})(eV||(eV={}));var tV;(function(r){r[r.Hidden=0]="Hidden",r[r.Blink=1]="Blink",r[r.Smooth=2]="Smooth",r[r.Phase=3]="Phase",r[r.Expand=4]="Expand",r[r.Solid=5]="Solid"})(tV||(tV={}));var nV;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(nV||(nV={}));var iV;(function(r){r[r.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",r[r.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",r[r.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",r[r.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(iV||(iV={}));var rV;(function(r){r[r.None=0]="None",r[r.Same=1]="Same",r[r.Indent=2]="Indent",r[r.DeepIndent=3]="DeepIndent"})(rV||(rV={}));let L2=class{static chord(e,t){return _s(e,t)}};L2.CtrlCmd=2048;L2.Shift=1024;L2.Alt=512;L2.WinCtrl=256;function Hse(){return{editor:void 0,languages:void 0,CancellationTokenSource:Ou,Emitter:Fe,KeyCode:VW,KeyMod:L2,Position:Ge,Range:le,Selection:ln,SelectionDirection:XW,MarkerSeverity:HW,MarkerTag:UW,Uri:qn,Token:C4}}class R${static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),s=new vZ(t),a=s.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${eke(Array.from(a))}`,"g");const u=new gL(null,l),d=[];let h=!1,p,_=0,C=0,S=0;e:for(let x=i,T=o;x<=T;x++){const k=e.getLineContent(x),M=k.length;u.reset(0);do if(p=u.next(k),p){let W=p.index,F=p.index+p[0].length;if(W>0){const $=k.charCodeAt(W-1);Ca($)&&W--}if(F+1<M){const $=k.charCodeAt(F-1);Ca($)&&F++}const Q=k.substring(W,F),z=s.shouldHighlightNonBasicASCII(Q);if(z!==0){z===3?_++:z===2?C++:z===1?S++:ire();const $=1e3;if(d.length>=$){h=!0;break e}d.push(new le(x,W+1,x,F+1))}}while(p)}return{ranges:d,hasMore:h,ambiguousCharacterCount:_,invisibleCharacterCount:C,nonBasicAsciiCharacterCount:S}}static computeUnicodeHighlightReason(e,t){switch(new vZ(t).shouldHighlightNonBasicASCII(e)){case 0:return null;case 2:return{kind:1};case 3:const o=Gp.getPrimaryConfusable(e.codePointAt(0));return{kind:0,confusableWith:String.fromCodePoint(o)};case 1:return{kind:2}}}}function eke(r,e){return`[${Vf(r.map(n=>String.fromCodePoint(n)).join(""))}]`}class vZ{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints)}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Fb.codePoints)e.add(t);if(this.options.ambiguousCharacters)for(const t of Gp.getPrimaryConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e){const t=e.codePointAt(0);return this.allowedCodePoints.has(t)?0:this.options.nonBasicASCII?1:this.options.invisibleCharacters&&!(e===" "||e===`
`||e==="	")&&Fb.isInvisibleCharacter(t)?2:this.options.ambiguousCharacters&&Gp.isAmbiguous(t)?3:0}}var Yy=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class tke extends GIe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=ZR(e.column,YR(t),this._lines[e.lineNumber-1],0);return n?new le(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,o="",s=0,a=[];return{*[Symbol.iterator](){for(;;)if(s<a.length){const l=o.substring(a[s].start,a[s].end);s+=1,yield l}else if(i<t.length)o=t[i],a=n(o,e),s=0,i+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],i=this._wordenize(n,t),o=[];for(const s of i)o.push({word:n.substring(s.start,s.end),startColumn:s.start+1,endColumn:s.end+1});return o}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,o=[];o.push(this._lines[n].substring(e.startColumn-1));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Ge.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{let o=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>o&&(n=o,i=!0)}return i?{lineNumber:t,column:n}:e}}class mS{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new tke(qn.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return Yy(this,void 0,void 0,function*(){const i=this._getModel(e);return i?R$.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return Yy(this,void 0,void 0,function*(){const o=this._getModel(e),s=this._getModel(t);if(!o||!s)return null;const a=o.getLinesContent(),l=s.getLinesContent(),d=new KIe(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),h=d.changes.length>0?!1:this._modelsAreIdentical(o,s);return{quitEarly:d.quitEarly,identical:h,changes:d.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let o=1;o<=n;o++){const s=e.getLineContent(o),a=t.getLineContent(o);if(s!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Yy(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let o;t=t.slice(0).sort((s,a)=>{if(s.range&&a.range)return le.compareRangesUsingStarts(s.range,a.range);let l=s.range?0:1,u=a.range?0:1;return l-u});for(let{range:s,text:a,eol:l}of t){if(typeof l=="number"&&(o=l),le.isEmpty(s)&&!a)continue;const u=n.getValueInRange(s);if(a=a.replace(/\r\n|\n|\r/g,n.eol),u===a)continue;if(Math.max(a.length,u.length)>mS._diffLimit){i.push({range:s,text:a});continue}const d=zIe(u,a,!1),h=n.offsetAt(le.lift(s).getStartPosition());for(const p of d){const _=n.positionAt(h+p.originalStart),C=n.positionAt(h+p.originalStart+p.originalLength),S={text:a.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:_.lineNumber,startColumn:_.column,endLineNumber:C.lineNumber,endColumn:C.column}};n.getValueInRange(S.range)!==S.text&&i.push(S)}}return typeof o=="number"&&i.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return Yy(this,void 0,void 0,function*(){let t=this._getModel(e);return t?JIe(t):null})}textualSuggest(e,t,n,i){return Yy(this,void 0,void 0,function*(){const o=new Ov(!0),s=new RegExp(n,i),a=new Set;e:for(let l of e){const u=this._getModel(l);if(u){for(let d of u.words(s))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>mS._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,n,i){return Yy(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return Object.create(null);const s=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let u=o.getLineWords(l,s);for(const d of u){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,n,i,o){return Yy(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return null;let a=new RegExp(i,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=s.getValueInRange(t),u=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!u)return null;let d=s.getValueInRange(u);return SW.INSTANCE.navigateValueSet(t,l,u,d,n)})}loadForeignModule(e,t,n){let s={host:V0e(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(bz(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}mS._diffLimit=1e5;mS._suggestionsLimit=1e4;typeof importScripts=="function"&&(ms.monaco=Hse());const M$=ar("textResourceConfigurationService"),Use=ar("textResourcePropertiesService");var nke=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},U5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},oV=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const bZ=60*1e3,CZ=5*60*1e3;function gw(r,e){let t=r.getModel(e);return!(!t||t.isTooLargeForSyncing())}let sV=class extends ot{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new rke(this._modelService)),this._logService=n,this._register(UT.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(i,o)=>gw(this._modelService,i.uri)?this._workerManager.withWorker().then(s=>s.computeLinks(i.uri)).then(s=>s&&{links:s}):Promise.resolve({links:[]})})),this._register(em.register("*",new ike(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return gw(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(Ed(t)){if(!gw(this._modelService,e))return Promise.resolve(t);const n=Ov.create(!0),i=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,xC(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return gw(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return gw(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};sV=nke([U5(0,ua),U5(1,M$),U5(2,Qv)],sV);class ike{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return oV(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")gw(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())gw(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const o=fr.getWordDefinition(e.getLanguageId()),s=e.getWordAtPosition(t),a=s?new le(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):le.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(i,s==null?void 0:s.word,o);if(d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}}let rke=class extends ot{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new h2).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(CZ/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>CZ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new zse(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}};class oke extends ot{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let i=new h2;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(bZ/2)),this._register(i)}}dispose(){for(let e in this._syncedModels)nr(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>bZ&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const o=new Nt;o.add(n.onDidChangeContent(s=>{this._proxy.acceptModelChanged(i.toString(),s)})),o.add(n.onWillDispose(()=>{this._stopModelSync(i)})),o.add(Hi(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=o}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],nr(t)}}class yZ{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class z5{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class zse extends ot{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new P4(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new BIe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new z5(this)))}catch(e){CW(e),this._worker=new yZ(new mS(new z5(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(CW(e),this._worker=new yZ(new mS(new z5(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new oke(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return oV(this,void 0,void 0,function*(){return this._disposed?Promise.reject(GS()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return oV(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),o=n.source,s=q3(n);return i.textualSuggest(e.map(a=>a.toString()),t,o,s)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);let o=fr.getWordDefinition(i.getLanguageId()),s=o.source,a=q3(o);return n.computeWordRanges(e.toString(),t,s,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{let o=this._modelService.getModel(e);if(!o)return null;let s=fr.getWordDefinition(o.getLanguageId()),a=s.source,l=q3(s);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}const Zy=Object.prototype.hasOwnProperty;class ske{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(RC,0),this._register(lD,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||RC}}class gN extends ot{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Fe),this.onDidChange=this._onDidChange.event,gN.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new ske,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(jw.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){gN.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},dLe();const e=jw.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),vs.as(JS.Configuration).registerOverrideIdentifiers(jw.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Zy.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)OA({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)OA({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)OA({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);j0e(l)||OA({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){ti(l)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);let s=o!==null&&o.length>0;if(!(s&&o[0]===null)){let a=(s?o[0]:null)||n;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return Zy.call(this._mimeTypesMap,e)?!0:Zy.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return Zy.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>Zy.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>Zy.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===RC?RC:Zy.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=hLe(e,t);return this.extractModeIds(n.join(","))}}gN.instanceCount=0;class wZ{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new Fe({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class pN extends ot{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Fe),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new Fe({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,pN.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new gN(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){pN.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return R9(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return R9(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new wZ(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new wZ(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||RC;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||RC;this._onDidEncounterLanguage.fire(t)}}}pN.instanceCount=0;var ake=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$5=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let aV=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._modeService=n,this._logService=i,this._hashTable=new Eb,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const i=this._modeService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,i);let s;if(o)s=o.metadata,this._logService.getLevel()===rm.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Nu.getForeground(s)}, fontStyle ${Nu.getFontStyle(s).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let u=t;for(let h=0;u>0&&h<this._legend.tokenModifiers.length;h++)u&1&&l.push(this._legend.tokenModifiers[h]),u=u>>1;u>0&&this._logService.getLevel()===rm.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")s=2147483647;else{if(s=0,typeof d.italic<"u"){const h=(d.italic?1:0)<<11;s|=h|1}if(typeof d.bold<"u"){const h=(d.bold?2:0)<<11;s|=h|2}if(typeof d.underline<"u"){const h=(d.underline?4:0)<<11;s|=h|4}if(d.foreground){const h=d.foreground<<14;s|=h|8}s===0&&(s=2147483647)}}else this._logService.getLevel()===rm.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),s=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,s),this._logService.getLevel()===rm.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Nu.getForeground(s)}, fontStyle ${Nu.getFontStyle(s).toString(2)}`)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};aV=ake([$5(1,Ho),$5(2,Bl),$5(3,Qv)],aV);function $se(r,e,t){const n=r.data,i=r.data.length/5|0,o=Math.max(Math.ceil(i/1024),400),s=[];let a=0,l=1,u=0;for(;a<i;){const d=a;let h=Math.min(d+o,i);if(h<i){let M=h;for(;M-1>d&&n[5*M]===0;)M--;if(M-1===d){let W=h;for(;W+1<i&&n[5*W]===0;)W++;h=W}else h=M}let p=new Uint32Array((h-d)*4),_=0,C=0,S=0,x=0,T=0;for(;a<h;){const M=5*a,W=n[M],F=n[M+1],Q=l+W|0,z=W===0?u+F|0:F,$=n[M+2],G=n[M+3],Y=n[M+4],I=e.getMetadata(G,Y,t);I!==2147483647&&(C===0&&(C=Q),S===Q&&T>z&&(e.warnOverlappingSemanticTokens(Q,z+1),x<z?p[_-4+2]=z:_-=4),p[_]=Q-C,p[_+1]=z,p[_+2]=z+$,p[_+3]=I,_+=4,S=Q,x=z,T=z+$),l=Q,u=z,a++}_!==p.length&&(p=p.subarray(0,_));const k=new hM(C,new dM(p));s.push(k)}return s}class lke{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}class Eb{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Eb._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Eb._SIZES.length?2/3*this._currentLength:0),this._elements=[],Eb._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let o=this._elements[i];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===n)return o;o=o.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=Eb._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Eb._SIZES.length?2/3*this._currentLength:0),this._elements=[],Eb._nullOutEntries(this._elements,this._currentLength);for(const s of o){let a=s;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new lke(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Eb._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function uke(r){for(let e=0,t=r.length;e<t;e+=4){const n=r[e+0],i=r[e+1],o=r[e+2],s=r[e+3];r[e+0]=s,r[e+1]=o,r[e+2]=i,r[e+3]=n}}function cke(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return xie()||uke(e),f4.wrap(e)}function jse(r){const e=new Uint32Array(dke(r));let t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(const n of r.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return cke(e)}function dke(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(const t of r.deltas)t.data&&(e+=t.data.length)}return e}var FC=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function F4(r){return r&&!!r.data}function qse(r){return r&&Array.isArray(r.edits)}class hke{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function Kse(r){return hx.has(r)}function fke(r){const e=hx.orderedGroups(r);return e.length>0?e[0]:[]}function Gse(r,e,t,n){return FC(this,void 0,void 0,function*(){const i=fke(r),o=yield Promise.all(i.map(s=>FC(this,void 0,void 0,function*(){let a,l=null;try{a=yield s.provideDocumentSemanticTokens(r,s===e?t:null,n)}catch(u){l=u,a=null}return(!a||!F4(a)&&!qse(a))&&(a=null),new hke(s,a,l)})));for(const s of o){if(s.error)throw s.error;if(s.tokens)return s}return o.length>0?o[0]:null})}function gke(r){const e=hx.orderedGroups(r);return e.length>0?e[0]:null}class pke{constructor(e,t){this.provider=e,this.tokens=t}}function mke(r){return b4.has(r)}function Yse(r){const e=b4.orderedGroups(r);return e.length>0?e[0]:[]}function P$(r,e,t){return FC(this,void 0,void 0,function*(){const n=Yse(r),i=yield Promise.all(n.map(o=>FC(this,void 0,void 0,function*(){let s;try{s=yield o.provideDocumentRangeSemanticTokens(r,e,t)}catch(a){Pl(a),s=null}return(!s||!F4(s))&&(s=null),new pke(o,s)})));for(const o of i)if(o.tokens)return o;return i.length>0?i[0]:null})}Yi.registerCommand("_provideDocumentSemanticTokensLegend",(r,...e)=>FC(void 0,void 0,void 0,function*(){const[t]=e;jr(t instanceof qn);const n=r.get(ua).getModel(t);if(!n)return;const i=gke(n);return i?i[0].getLegend():r.get(Go).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Yi.registerCommand("_provideDocumentSemanticTokens",(r,...e)=>FC(void 0,void 0,void 0,function*(){const[t]=e;jr(t instanceof qn);const n=r.get(ua).getModel(t);if(!n)return;if(!Kse(n))return r.get(Go).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const i=yield Gse(n,null,null,Oi.None);if(!i)return;const{provider:o,tokens:s}=i;if(!s||!F4(s))return;const a=jse({id:0,type:"full",data:s.data});return s.resultId&&o.releaseDocumentSemanticTokens(s.resultId),a}));Yi.registerCommand("_provideDocumentRangeSemanticTokensLegend",(r,...e)=>FC(void 0,void 0,void 0,function*(){const[t,n]=e;jr(t instanceof qn);const i=r.get(ua).getModel(t);if(!i)return;const o=Yse(i);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!n||!le.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const s=yield P$(i,le.lift(n),Oi.None);if(s)return s.provider.getLegend()}));Yi.registerCommand("_provideDocumentRangeSemanticTokens",(r,...e)=>FC(void 0,void 0,void 0,function*(){const[t,n]=e;jr(t instanceof qn),jr(le.isIRange(n));const i=r.get(ua).getModel(t);if(!i)return;const o=yield P$(i,le.lift(n),Oi.None);if(!(!o||!o.tokens))return jse({id:0,type:"full",data:o.tokens.data})}));var _ke=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Xy=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function j1(r){return r.toString()}function SZ(r){const e=new _4,t=r.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class vke{constructor(e,t,n){this._modelEventListeners=new Nt,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const bke=Pc||ji?1:2;class Cke{constructor(e,t,n,i,o,s,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=o,this.sha1=s,this.versionId=a,this.alternativeVersionId=l}}let HM=class Bk extends ot{constructor(e,t,n,i,o,s,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onModelAdded=this._register(new Fe),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Fe),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Fe),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new wke(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new yke(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let i=Du.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const _=parseInt(e.editor.tabSize,10);isNaN(_)||(i=_),i<1&&(i=1)}let o=i;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const _=parseInt(e.editor.indentSize,10);isNaN(_)||(o=_),o<1&&(o=1)}let s=Du.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=bke;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let u=Du.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(u=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=Du.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=Du.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let p=Du.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(p={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:i,indentSize:o,insertSpaces:s,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:u,largeFileOptimizations:h,bracketPairColorizationOptions:p}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:xf===3||xf===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),s=this._getEOL(t,e);i=Bk._readModelOptions({editor:o,eol:s},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const o=t[n],s=this._models[o],a=s.model.getLanguageId(),l=s.model.uri,u=e[a+l],d=this.getCreationOptions(a,l,s.model.isForSimpleWidget);Bk._setModelOptionsForModel(s.model,d,u)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&np(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(j1(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(j1(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(j1(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const o=this.getCreationOptions(t,n,i),s=new Td(e,o,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(j1(n))){const u=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=SZ(s)===u.sha1;if(h||u.sharesUndoRedoStack){for(const p of d.past)yb(p)&&p.matchesResource(n)&&p.setModel(s);for(const p of d.future)yb(p)&&p.matchesResource(n)&&p.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,p=>yb(p)&&p.matchesResource(n)),h&&(s._overwriteVersionId(u.versionId),s._overwriteAlternativeVersionId(u.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(u.initialUndoRedoSnapshot))}else u.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(u.initialUndoRedoSnapshot)}const a=j1(s.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new vke(s,u=>this._onWillDispose(u),(u,d)=>this._onDidChangeLanguage(u,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let o;return t?(o=this._createModelData(e,t.languageId,n,i),this.setMode(o.model,t)):o=this._createModelData(e,lD,n,i),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;const n=this._models[j1(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push(this._models[o].model)}return e}getModel(e){const t=j1(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Si.file||e.scheme===Si.vscodeRemote||e.scheme===Si.userData||e.scheme===Si.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=j1(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,s=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const u of l.past)yb(u)&&u.matchesResource(e.uri)&&(o=!0,s+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of l.future)yb(u)&&u.matchesResource(e.uri)&&(o=!0,s+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=Bk.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!i&&s>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-s),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>yb(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new Cke(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,s,SZ(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);Bk._setModelOptionsForModel(e,s,o),this._onModelModeChanged.fire({model:e,oldModeId:n})}};HM.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;HM=_ke([Xy(0,Jr),Xy(1,Use),Xy(2,Ho),Xy(3,Qv),Xy(4,C2),Xy(5,Bl),Xy(6,b2)],HM);const F$="editor.semanticHighlighting";function lV(r,e,t){var n;const i=(n=t.getValue(F$,{overrideIdentifier:r.getLanguageId(),resource:r.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}class yke extends ot{constructor(e,t,n,i){super(),this._watchers=Object.create(null),this._semanticStyling=i;const o=l=>{this._watchers[l.uri.toString()]=new Iw(l,t,this._semanticStyling)},s=(l,u)=>{u.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const u=this._watchers[l.uri.toString()];lV(l,t,n)?u||o(l):u&&s(l,u)}};this._register(e.onModelAdded(l=>{lV(l,t,n)&&o(l)})),this._register(e.onModelRemoved(l=>{const u=this._watchers[l.uri.toString()];u&&s(l,u)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(F$)&&a()})),this._register(t.onDidColorThemeChange(a))}}class wke extends ot{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new aV(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class Ske{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class Iw extends ot{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new Xr(()=>this._fetchDocumentSemanticTokensNow(),Iw.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const i=()=>{nr(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const o of hx.all(e))typeof o.onDidChange=="function"&&this._documentProvidersChangeListeners.push(o.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};i(),this._register(hx.onDidChange(()=>{i(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(o=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Kse(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Ou,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=Gse(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const o=[],s=this._model.onDidChangeContent(a=>{o.push(a)});i.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:l,tokens:u}=a,d=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,u||null,d,o)}},a=>{a&&(Zv(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||ti(a),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}_setDocumentSemanticTokens(e,t,n,i){const o=this._currentDocumentResponse,s=()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),s();return}if(qse(t)){if(!o){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const p of t.edits)a+=(p.data?p.data.length:0)-p.deleteCount;const l=o.data,u=new Uint32Array(l.length+a);let d=l.length,h=u.length;for(let p=t.edits.length-1;p>=0;p--){const _=t.edits[p],C=d-(_.start+_.deleteCount);C>0&&(Iw._copy(l,d-C,u,h-C,C),h-=C),_.data&&(Iw._copy(_.data,0,u,h-_.data.length,_.data.length),h-=_.data.length),d=_.start}d>0&&Iw._copy(l,0,u,0,d),t={resultId:t.resultId,data:u}}}if(F4(t)){this._currentDocumentResponse=new Ske(e,t.resultId,t.data);const a=$se(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const u of a)for(const d of l.changes)u.applyEdit(d.range,d.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);s()}}Iw.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class Eke{constructor(e,t,n,i,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=o}}function Lke(r){if(!r||!Array.isArray(r))return[];let e=[],t=0;for(let n=0,i=r.length;n<i;n++){let o=r[n],s=-1;if(typeof o.fontStyle=="string"){s=0;let u=o.fontStyle.split(" ");for(let d=0,h=u.length;d<h;d++)switch(u[d]){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new Eke(o.token||"",n,s,a,l)}return e}function xke(r,e){r.sort((d,h)=>{let p=Nke(d.token,h.token);return p!==0?p:d.index-h.index});let t=0,n="000000",i="ffffff";for(;r.length>=1&&r[0].token==="";){let d=r.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}let o=new Ike;for(let d of e)o.getId(d);let s=o.getId(n),a=o.getId(i),l=new B$(t,s,a),u=new W$(l);for(let d=0,h=r.length;d<h;d++){let p=r[d];u.insert(p.token,p.fontStyle,o.getId(p.foreground),o.getId(p.background))}return new Zse(o,u)}const Dke=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class Ike{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(Dke);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=je.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class Zse{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(Lke(e),t)}static createFromParsedTokenTheme(e,t){return xke(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let i=this._match(t),o=Tke(t);n=(i.metadata|o<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const kke=/\b(comment|string|regex|regexp)\b/;function Tke(r){let e=r.match(kke);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function Nke(r,e){return r<e?-1:r>e?1:0}class B${constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new B$(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class W${constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));let o=this._children.get(n);return typeof o<"u"?o.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}let o=e.indexOf("."),s,a;o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(s);typeof l>"u"&&(l=new W$(this._mainRule.clone()),this._children.set(s,l)),l.insert(a,t,n,i)}}function Ake(r){let e=[];for(let t=1,n=r.length;t<n;t++){let i=r[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const Oke={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Mf]:"#FFFFFE",[p2]:"#000000",[Vz]:"#E5EBF1",[E4]:"#D3D3D3",[L4]:"#939393",[Hz]:"#ADD6FF4D"}},Rke={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Mf]:"#1E1E1E",[p2]:"#D4D4D4",[Vz]:"#3A3D41",[E4]:"#404040",[L4]:"#707070",[Hz]:"#ADD6FF26"}},Mke={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Mf]:"#000000",[p2]:"#FFFFFF",[E4]:"#FFFFFF",[L4]:"#FFFFFF"}};function Pke(){const r=new Fe,e=VDe();return e.onDidChange(()=>r.fire()),{onDidChange:r.event,getCSS(){const t={},n=o=>{let s=o.defaults;for(;So.isThemeIcon(s);){const l=e.getIcon(s.id);if(!l)return;s=l.defaults}const a=s.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${o.id}:before { content: '${s.fontCharacter}'; font-family: ${gG(a)}; }`}return`.codicon-${o.id}:before { content: '${s.fontCharacter}'; }`},i=[];for(let o of e.getIcons()){const s=n(o);s&&i.push(s)}for(let o in t){const a=t[o].definition.src.map(l=>`${nS(l.location)} format('${l.format}')`).join(", ");i.push(`@font-face { src: ${a}; font-family: ${gG(o)}; font-display: block; }`)}return i.join(`
`)}}}const kw="vs",UM="vs-dark",GL="hc-black",Xse=vs.as(Hre.ColorContribution),Fke=vs.as(fre.ThemingContribution);class Qse{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(GO(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,je.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=uV(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,je.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Xse.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case kw:return tp.LIGHT;case GL:return tp.HIGH_CONTRAST;default:return tp.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let o=uV(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const o={token:""};n&&(o.foreground=n),i&&(o.background=i),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Zse.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=Nu.getForeground(o),a=Nu.getFontStyle(o);return{foreground:s,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function GO(r){return r===kw||r===UM||r===GL}function uV(r){switch(r){case kw:return Oke;case UM:return Rke;case GL:return Mke}}function j5(r){let e=uV(r);return new Qse(r,e)}class Bke extends ot{constructor(){super(),this._onColorThemeChange=this._register(new Fe),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(kw,j5(kw)),this._knownThemes.set(UM,j5(UM)),this._knownThemes.set(GL,j5(GL));const e=Pke();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(kw),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),k0e("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return qP(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Bf(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),ot.None}_registerShadowDomContainer(e){const t=Bf(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!GO(t.base)&&!GO(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Qse(e,t)),GO(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(kw),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(GL):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:s=>{t[s]||(e.push(s),t[s]=!0)}};Fke.getThemingParticipants().forEach(s=>s(this._theme,n,this._environment));const i=[];for(const s of Xse.getColors()){const a=this._theme.getColor(s.id,!0);a&&i.push(`${Vre(s.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(Ake(o)),this._themeCSS=e.join(`
`),this._updateCSS(),es.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var Wke=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Vke=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const pT="data-keybinding-context";let V$=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class vx extends V${constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}vx.INSTANCE=new vx;class mN extends V${constructor(e,t,n){super(e,null),this._configurationService=t,this._values=UL.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===6){const o=Array.from(Zi.map(this._values,([s])=>s));this._values.clear(),n.fire(new LZ(o))}else{const o=[];for(const s of i.affectedKeys){const a=`config.${s}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...Zi.map(l,([u])=>u)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}n.fire(new LZ(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(mN._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(mN._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}mN._keyPrefix="config.";class Hke{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class EZ{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class LZ{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class Uke{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class Jse{constructor(e){this._onDidChangeContext=new TR({merge:t=>new Uke(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Hke(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new zke(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return KL.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new EZ(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new EZ(e))}getContext(e){return this._isDisposed?vx.INSTANCE:this.getContextValuesContainer($ke(e))}}let cV=class extends Jse{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Nt,this._lastContextId=0;const t=new mN(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?vx.INSTANCE:this._contexts.get(e)||vx.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new V$(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};cV=Wke([Vke(0,Jr)],cV);class zke extends Jse{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new lc,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(pT)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(pT,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(pT),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?vx.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function $ke(r){for(;r;){if(r.hasAttribute(pT)){const e=r.getAttribute(pT);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}Yi.registerCommand(abe,function(r,e,t){r.get(Jn).createKey(String(e),t)});Yi.registerCommand({id:"getContextKeyInfo",handler(){return[..._n.all()].sort((r,e)=>r.key.localeCompare(e.key))},description:{description:E("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Yi.registerCommand("_generateContextKeyInfo",function(){const r=[],e=new Set;for(let t of _n.all())e.has(t.key)||(e.add(t.key),r.push(t));r.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(r,void 0,2))});function xZ(r){let e=r.definition;for(;e instanceof Ae;)e=e.definition;return`.codicon-${r.id}:before { content: '${e.fontCharacter}'; }`}var Jl;(function(r){function e(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,s.start),l=Math.min(o.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}r.intersect=e;function t(o){return o.end-o.start<=0}r.isEmpty=t;function n(o,s){return!t(e(o,s))}r.intersects=n;function i(o,s){const a=[],l={start:o.start,end:Math.min(s.start,o.end)},u={start:Math.max(s.end,o.start),end:o.end};return t(l)||a.push(l),t(u)||a.push(u),a}r.relativeComplement=i})(Jl||(Jl={}));var uC;(function(r){r[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN"})(uC||(uC={}));function bL(r,e,t){const n=t.mode===uC.ALIGN?t.offset:t.offset+t.size,i=t.mode===uC.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=r-n?n:e<=i?i-e:Math.max(r-e,0):e<=i?i-e:e<=r-n?n:0}class bx extends ot{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=ot.None,this.toDisposeOnSetContainer=ot.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Lt(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,kc(this.view),this.setContainer(e,t),this._register(Hi(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Lt(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=jke,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Lt("slot"))}else this.container.appendChild(this.view);const i=new Nt;bx.BUBBLE_UP_EVENTS.forEach(o=>{i.add(za(this.container,o,s=>{this.onDOMEvent(s,!1)}))}),bx.BUBBLE_DOWN_EVENTS.forEach(o=>{i.add(za(this.container,o,s=>{this.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){this.isVisible()&&this.hide(),ya(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Lh(this.view),this.toDisposeOnClean=e.render(this.view)||ot.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Av&&$P.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(Xie(e)){let h=tu(e);t={top:h.top,left:h.left,width:h.width,height:h.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Bg(this.view),i=D9(this.view),o=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,u;if(a===0){const h={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},p={offset:t.left,size:t.width,position:s===0?0:1,mode:uC.ALIGN};l=bL(window.innerHeight,i,h)+window.pageYOffset,Jl.intersects({start:l,end:l+i},{start:h.offset,end:h.offset+h.size})&&(p.mode=uC.AVOID),u=bL(window.innerWidth,n,p)}else{const h={offset:t.left,size:t.width,position:s===0?0:1},p={offset:t.top,size:t.height,position:o===0?0:1,mode:uC.ALIGN};u=bL(window.innerWidth,n,h),Jl.intersects({start:u,end:u+n},{start:h.offset,end:h.offset+h.size})&&(p.mode=uC.AVOID),l=bL(window.innerHeight,i,p)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(s===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=tu(this.container);this.view.style.top=`${l-(this.useFixedPosition?tu(this.view).top:d.top)}px`,this.view.style.left=`${u-(this.useFixedPosition?tu(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),kc(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Pb(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}bx.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];bx.BUBBLE_DOWN_EVENTS=["click"];let jke=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function H$(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){const o=r[n](e,t);if(o)return o}return null}}const B4=qke.bind(void 0,!0);function qke(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=Sz(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function eae(r,e){const t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function Kke(r,e){return dV(r.toLowerCase(),e.toLowerCase(),0,0)}function dV(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=dV(r,e,t+1,n+1))?$$({start:n,end:n+1},i):null}return dV(r,e,t,n+1)}function U$(r){return 97<=r&&r<=122}function W4(r){return 65<=r&&r<=90}function z$(r){return 48<=r&&r<=57}function tae(r){return r===32||r===9||r===10||r===13}const nae=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>nae.add(r.charCodeAt(0)));function zM(r){return tae(r)||nae.has(r)}function Gke(r,e){return r===e||zM(r)&&zM(e)}function iae(r){return U$(r)||W4(r)||z$(r)}function $$(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function rae(r,e){for(let t=e;t<r.length;t++){const n=r.charCodeAt(t);if(W4(n)||z$(n)||t>0&&!iae(r.charCodeAt(t-1)))return t}return r.length}function hV(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=hV(r,e,t+1,n+1);!i&&(o=rae(e,o))<e.length;)i=hV(r,e,t+1,o),o++;return i===null?null:$$({start:n,end:n+1},i)}}function Yke(r){let e=0,t=0,n=0,i=0,o=0;for(let d=0;d<r.length;d++)o=r.charCodeAt(d),W4(o)&&e++,U$(o)&&t++,iae(o)&&n++,z$(o)&&i++;const s=e/r.length,a=t/r.length,l=n/r.length,u=i/r.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:u}}function Zke(r){const{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function Xke(r){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function Qke(r){let e=0,t=0,n=0,i=0;for(let o=0;o<r.length;o++)n=r.charCodeAt(o),W4(n)&&e++,U$(n)&&t++,tae(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function oae(r,e){if(!e||(e=e.trim(),e.length===0)||!Qke(r)||e.length>60)return null;const t=Yke(e);if(!Xke(t)){if(!Zke(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=hV(r,e,0,i))===null;)i=rae(e,i+1);return n}function Jke(r,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(r=r.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=fV(r,e,0,i,t))===null;)i=sae(e,i+1);return n}function fV(r,e,t,n,i){if(t===r.length)return[];if(n===e.length)return null;if(Gke(r.charCodeAt(t),e.charCodeAt(n))){let o=null,s=n+1;if(o=fV(r,e,t+1,n+1,i),!i)for(;!o&&(s=sae(e,s))<e.length;)o=fV(r,e,t+1,s,i),s++;return o===null?null:$$({start:n,end:n+1},o)}else return null}function sae(r,e){for(let t=e;t<r.length;t++)if(zM(r.charCodeAt(t))||t>0&&zM(r.charCodeAt(t-1)))return t;return r.length}const eTe=H$(B4,oae,eae),tTe=H$(B4,oae,Kke),DZ=new YC(1e4);function IZ(r,e,t=!1){if(typeof r!="string"||typeof e!="string")return null;let n=DZ.get(r);n||(n=new RegExp(z0e(r),"i"),DZ.set(r,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?tTe(r,e):eTe(r,e)}function nTe(r,e,t,n,i,o){const s=Math.min(13,r.length);for(;t<s;t++){const a=Cx(r,e,t,n,i,o,!1);if(a)return a}return[0,o]}function V4(r){if(typeof r>"u")return[];const e=[],t=r[1];for(let n=r.length-1;n>1;n--){const i=r[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}const cC=128;function j$(){const r=[],e=[];for(let t=0;t<=cC;t++)e[t]=0;for(let t=0;t<=cC;t++)r.push(e.slice(0));return r}function aae(r){const e=[];for(let t=0;t<=r;t++)e[t]=0;return e}const lae=aae(2*cC),gV=aae(2*cC),ub=j$(),Qy=j$(),zA=j$();function $A(r,e){if(e<0||e>=r.length)return!1;const t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!zR(t)}}function kZ(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function YO(r,e,t){return e[r]!==t[r]}function iTe(r,e,t,n,i,o,s=!1){for(;e<t&&i<o;)r[e]===n[i]&&(s&&(lae[e]=i),e+=1),i+=1;return e===t}var mm;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(mm||(mm={}));function Cx(r,e,t,n,i,o,s){const a=r.length>cC?cC:r.length,l=n.length>cC?cC:n.length;if(t>=a||o>=l||a-t>l-o||!iTe(e,t,a,i,o,l,!0))return;rTe(a,l,t,o,e,i);let u=1,d=1,h=t,p=o;const _=[!1];for(u=1,h=t;h<a;u++,h++){const k=lae[h],M=gV[h],W=h+1<a?gV[h+1]:l;for(d=k-o+1,p=k;p<W;d++,p++){let F=Number.MIN_SAFE_INTEGER,Q=!1;p<=M&&(F=oTe(r,e,h,t,n,i,p,l,o,ub[u-1][d-1]===0,_));let z=0;F!==Number.MAX_SAFE_INTEGER&&(Q=!0,z=F+Qy[u-1][d-1]);const $=p>k,G=$?Qy[u][d-1]+(ub[u][d-1]>0?-5:0):0,Y=p>k+1&&ub[u][d-1]>0,I=Y?Qy[u][d-2]+(ub[u][d-2]>0?-5:0):0;if(Y&&(!$||I>=G)&&(!Q||I>=z))Qy[u][d]=I,zA[u][d]=3,ub[u][d]=0;else if($&&(!Q||G>=z))Qy[u][d]=G,zA[u][d]=2,ub[u][d]=0;else if(Q)Qy[u][d]=z,zA[u][d]=1,ub[u][d]=ub[u-1][d-1]+1;else throw new Error("not possible")}}if(!_[0]&&!s)return;u--,d--;const C=[Qy[u][d],o];let S=0,x=0;for(;u>=1;){let k=d;do{const M=zA[u][k];if(M===3)k=k-2;else if(M===2)k=k-1;else break}while(k>=1);S>1&&e[t+u-1]===i[o+d-1]&&!YO(k+o-1,n,i)&&S+1>ub[u][k]&&(k=d),k===d?S++:S=1,x||(x=k),u--,d=k-1,C.push(d)}l===a&&(C[0]+=2);const T=x-a;return C[0]-=T,C}function rTe(r,e,t,n,i,o){let s=r-1,a=e-1;for(;s>=t&&a>=n;)i[s]===o[a]&&(gV[s]=a,s--),a--}function oTe(r,e,t,n,i,o,s,a,l,u,d){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let h=1,p=!1;return s===t-n?h=r[t]===i[s]?7:5:YO(s,i,o)&&(s===0||!YO(s-1,i,o))?(h=r[t]===i[s]?7:5,p=!0):$A(o,s)&&(s===0||!$A(o,s-1))?h=5:($A(o,s-1)||kZ(o,s-1))&&(h=5,p=!0),h>1&&t===n&&(d[0]=!0),p||(p=YO(s,i,o)||$A(o,s-1)||kZ(o,s-1)),t===n?s>l&&(h-=p?3:5):u?h+=p?2:0:h+=p?0:1,s+1===a&&(h-=p?3:5),h}function sTe(r,e,t,n,i,o,s){return aTe(r,e,t,n,i,o,!0,s)}function aTe(r,e,t,n,i,o,s,a){let l=Cx(r,e,t,n,i,o,a);if(l&&!s)return l;if(r.length>=3){const u=Math.min(7,r.length-1);for(let d=t+1;d<u;d++){const h=lTe(r,d);if(h){const p=Cx(h,h.toLowerCase(),t,n,i,o,a);p&&(p[0]-=3,(!l||p[0]>l[0])&&(l=p))}}}return l}function lTe(r,e){if(e+1>=r.length)return;const t=r[e],n=r[e+1];if(t!==n)return r.slice(0,e)+n+t+r.slice(e+2)}const mT="$(",q$=new RegExp(`\\$\\(${Nc.iconNameExpression}(?:${Nc.iconModifierExpression})?\\)`,"g"),uTe=new RegExp(Nc.iconNameCharacter),cTe=new RegExp(`(\\\\)?${q$.source}`,"g");function dTe(r){return r.replace(cTe,(e,t)=>t?e:`\\${e}`)}const hTe=new RegExp(`\\\\${q$.source}`,"g");function fTe(r){return r.replace(hTe,e=>`\\${e}`)}const gTe=new RegExp(`(\\s)?(\\\\)?${q$.source}(\\s)?`,"g");function K$(r){return r.indexOf(mT)===-1?r:r.replace(gTe,(e,t,n,i)=>n?e:t||i||"")}function jA(r){const e=r.indexOf(mT);return e===-1?{text:r}:pTe(r,e)}function pTe(r,e){const t=[];let n="";function i(p){if(p){n+=p;for(const _ of p)t.push(a)}}let o=-1,s="",a=0,l,u,d=e;const h=r.length;for(i(r.substr(0,e));d<h;){if(l=r[d],u=r[d+1],l===mT[0]&&u===mT[1])o=d,i(s),s=mT,d++;else if(l===")"&&o!==-1){const p=d-o+1;a+=p,o=-1,s=""}else o!==-1?uTe.test(l)?s+=l:(i(s),o=-1,s=""):i(l);d++}return i(s),{text:n,iconOffsets:t}}function qA(r,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return IZ(r,n,t);const o=yz(n," "),s=n.length-o.length,a=IZ(r,o,t);if(a)for(const l of a){const u=i[l.start+s]+s;l.start+=u,l.end+=u}return a}const pV=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,q5=/(&amp;)?(&amp;)([^\s&])/g;var $M;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})($M||($M={}));let uae=class ZO extends Wv{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ji||Pc?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Nt),this._register(Or.addTarget(i)),kt(i,In.KEY_DOWN,a=>{new Oo(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(kt(i,In.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){xr.stop(a,!0);const u=this.mnemonics.get(l);if(u.length===1&&(u[0]instanceof TZ&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(a)),u.length>1){const d=u.shift();d&&d.container&&(this.focusItemByElement(d.container),u.push(d)),this.mnemonics.set(l,u)}}})),Pc&&this._register(kt(i,In.KEY_DOWN,a=>{const l=new Oo(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),xr.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),xr.stop(a,!0))})),this._register(kt(this.domNode,In.MOUSE_OUT,a=>{let l=a.relatedTarget;Pb(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(kt(this.actionsList,In.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Pb(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(l),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Or.addTarget(this.actionsList)),this._register(kt(this.actionsList,co.Tap,a=>{let l=a.initialTarget;if(!(!l||!Pb(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(l),u!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new y2(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const s=this.scrollableElement.getDomNode();s.style.position="",this._register(kt(i,co.Change,a=>{xr.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(kt(s,In.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof K5)).forEach((a,l,u)=>{a.updatePositionInSet(l+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(qP(e)?this.styleSheet=Bf(e):(ZO.globalStyleSheet||(ZO.globalStyleSheet=Bf()),this.styleSheet=ZO.globalStyleSheet)),this.styleSheet.textContent=_Te(t)}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",s=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=o,this.domNode.style.color=n,this.domNode.style.backgroundColor=i,t.style.boxShadow=s,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof mV||a instanceof K5)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ep)return new K5(t.context,e,{icon:!0});if(e instanceof KP){const i=new TZ(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const o=i.getMnemonic();if(o&&i.isEnabled()){let s=[];this.mnemonics.has(o)&&(s=this.mnemonics.get(o)),s.push(i),this.mnemonics.set(o,s)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const s=t.getKeyBinding(e);if(s){const a=s.getLabel();a&&(i.keybinding=a)}}const o=new mV(t.context,e,i);if(t.enableMnemonics){const s=o.getMnemonic();if(s&&o.isEnabled()){let a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}}};class mV extends lv{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let i=this.getAction().label;if(i){let o=pV.exec(i);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Xr(()=>{this.element&&(this._register(kt(this.element,In.MOUSE_UP,i=>{if(xr.stop(i,!0),Id){if(new Tf(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(kt(this.element,In.CONTEXT_MENU,i=>{xr.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ft(this.element,Lt("a.action-menu-item")),this._action.id===ep.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ft(this.item,Lt("span.menu-item-check"+Ae.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=ft(this.item,Lt("span.action-label")),this.options.label&&this.options.keybinding&&(ft(this.item,Lt("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){ya(this.label);let e=K$(this.getAction().label);if(e){const t=mTe(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=pV.exec(e);if(n){e=Cz(e),q5.lastIndex=0;let i=q5.exec(e);for(;i&&i[1];)i=q5.exec(e);const o=s=>s.replace(/&amp;&amp;/g,"&amp;");i?this.label.append(yz(o(e.substr(0,i.index))," "),Lt("u",{"aria-hidden":"true"},i[3]),ore(o(e.substr(i.index+i[0].length))," ")):this.label.innerText=o(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=E({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=i)}style(e){this.menuStyle=e,this.applyStyle()}}class TZ extends mV{constructor(e,t,n,i){super(e,e,i),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new Nt),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:$M.Right,this.showScheduler=new Xr(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Xr(()=>{this.element&&!Pb(NL(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ft(this.item,Lt("span.submenu-indicator"+Ae.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(kt(this.element,In.KEY_UP,t=>{let n=new Oo(t);(n.equals(17)||n.equals(3))&&(xr.stop(t,!0),this.createSubmenu(!0))})),this._register(kt(this.element,In.KEY_DOWN,t=>{let n=new Oo(t);NL()===this.item&&(n.equals(17)||n.equals(3))&&xr.stop(t,!0)})),this._register(kt(this.element,In.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(kt(this.element,In.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(kt(this.element,In.FOCUS_OUT,t=>{this.element&&!Pb(NL(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){xr.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const o={top:0,left:0};return o.left=bL(e.width,t.width,{position:i===$M.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=bL(e.height,t.height,{position:0,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ft(this.element,Lt("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new uae(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new GP],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),o={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new fo(window.innerWidth,window.innerHeight),fo.lift(s),o,this.expandDirection);this.submenuContainer.style.left=`${l-s.left}px`,this.submenuContainer.style.top=`${a-s.top}px`,this.submenuDisposables.add(kt(this.submenuContainer,In.KEY_UP,u=>{new Oo(u).equals(15)&&(xr.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(kt(this.submenuContainer,In.KEY_DOWN,u=>{new Oo(u).equals(15)&&xr.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class K5 extends aN{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function mTe(r){const e=pV,t=e.exec(r);if(!t)return r;const n=!t[1];return r.replace(e,n?"$2$3":"").trim()}function _Te(r){let e=`
.monaco-menu {
	font-size: 13px;

}

${xZ(Ae.menuSelection)}
${xZ(Ae.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
`;const t=r.scrollbarShadow;t&&(e+=`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=r.scrollbarSliderBackground;n&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=r.scrollbarSliderHoverBackground;i&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const o=r.scrollbarSliderActiveBackground;return o&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`),e}function Zp(r,e){const t=Object.create(null);for(let n in e){const i=e[n];i&&(t[n]=gb(i,r))}return t}function G$(r,e,t){function n(){const i=Zp(r.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return n(),r.onDidColorThemeChange(n)}function vTe(r,e,t){return G$(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||eT,badgeForeground:(t==null?void 0:t.badgeForeground)||tT,badgeBorder:Ns},r)}function _S(r,e,t){return G$(e,Object.assign(Object.assign({},H4),t||{}),r)}const H4={listFocusBackground:SCe,listFocusForeground:ECe,listFocusOutline:LCe,listActiveSelectionBackground:Fw,listActiveSelectionForeground:bC,listActiveSelectionIconForeground:PO,listFocusAndSelectionBackground:Fw,listFocusAndSelectionForeground:bC,listInactiveSelectionBackground:xCe,listInactiveSelectionIconForeground:ICe,listInactiveSelectionForeground:DCe,listInactiveFocusBackground:kCe,listInactiveFocusOutline:TCe,listHoverBackground:NCe,listHoverForeground:ACe,listDropBackground:OCe,listSelectionOutline:Bc,listHoverOutline:Bc,listFilterWidgetBackground:RCe,listFilterWidgetOutline:MCe,listFilterWidgetNoMatchesOutline:PCe,listMatchesShadow:NC,treeIndentGuidesStroke:FCe,tableColumnsBorder:BCe,tableOddRowsBackgroundColor:WCe},bTe={shadowColor:NC,borderColor:UCe,foregroundColor:zCe,backgroundColor:$Ce,selectionForegroundColor:jCe,selectionBackgroundColor:qCe,selectionBorderColor:KCe,separatorColor:GCe,scrollbarShadow:rD,scrollbarSliderBackground:FL,scrollbarSliderHoverBackground:BL,scrollbarSliderActiveBackground:WL};function CTe(r,e,t){return G$(e,Object.assign(Object.assign({},bTe),t),r)}class yTe{constructor(e,t,n,i,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,i=Xie(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{let s=e.getMenuClassName?e.getMenuClassName():"";s&&(o.className+=" "+s),this.options.blockMouse&&(this.block=o.appendChild(Lt(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",kt(this.block,In.MOUSE_DOWN,u=>u.stopPropagation()));const a=new Nt,l=e.actionRunner||new sx;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new uae(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)}),a.add(CTe(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(kt(window,In.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(kt(window,In.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;let d=new Tf(u),h=d.target;if(!d.rightButton){for(;h;){if(h===o)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),gC(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!Zv(e.error)&&this.notificationService.error(e.error)}}var wTe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vk=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let _V=class extends ot{constructor(e,t,n,i,o){super(),this._onDidShowContextMenu=new Fe,this._onDidHideContextMenu=new Fe,this.contextMenuHandler=new yTe(n,e,t,i,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),Sw.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};_V=wTe([vk(0,Xv),vk(1,As),vk(2,t1),vk(3,Ro),vk(4,Ho)],_V);const x2=ar("layoutService");var STe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ETe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let vV=class extends ot{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=ot.None,this.container=e.container,this.contextView=this._register(new bx(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const i=Hi(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};vV=STe([ETe(0,x2)],vV);const D2=ar("dialogService");let LTe=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class xTe{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new LTe(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(let[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(i,t);if(o)return o;t.delete(n)}}}class NZ extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class jM{constructor(e=new iN,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(xi,this)}createChild(e){return new jM(e,this._strict,this)}invokeFunction(e,...t){let n=qg.traceInvocation(e),i=!1;try{return e({get:s=>{if(i)throw wve("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof eC?(n=qg.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=qg.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){let i=im.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of i){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);o.push(l)}let s=i.length>0?i[0].index:t.length;if(t.length!==s){console.warn(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return new e(...t,...o)}_setServiceInstance(e,t){if(this._services.get(e)instanceof eC)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof eC?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new xTe(a=>a.id.toString());let o=0;const s=[{id:e,desc:t,_trace:n}];for(;s.length;){const a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new NZ(i);for(let l of im.getServiceDependencies(a.desc.ctor)){let u=this._getServiceInstanceOrDescriptor(l.id);if(!u&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),u instanceof eC){const d={id:l.id,desc:u,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,d),s.push(d)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new NZ(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof eC){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,o){if(this._services.get(e)instanceof eC)return this._createServiceInstance(t,n,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const o=new kL(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let l=o.value,u=l[a];return typeof u!="function"||(u=u.bind(l),s[a]=u),u},set(s,a,l){return o.value[a]=l,!0}})}else return this._createInstance(e,t,i)}}class qg{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return qg._None}static traceCreation(e){return qg._None}branch(e,t){let n=new qg(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;qg._totals+=e;let t=!1;function n(o,s){let a=[],l=new Array(o+1).join("	");for(const[u,d,h]of s._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${u}`);let p=n(o+1,h);p&&a.push(p)}else a.push(`${l}uses -> ${u}`);return a.join(`
`)}let i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${qg._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}qg._None=new class extends qg{constructor(){super(-1,null)}stop(){}branch(){return this}};qg._totals=0;const I2=ar("labelService");class DTe{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}class Jy extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function AZ(r,e){const t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;const i=Jl.intersect(r,n.range);Jl.isEmpty(i)||t.push({range:i,size:n.size})}return t}function bV({start:r,end:e},t){return{start:r+t,end:e+t}}function ITe(r){const e=[];let t=null;for(let n of r){const i=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:s},e.push(t)}return e}function kTe(...r){return ITe(r.reduce((e,t)=>e.concat(t),[]))}class OZ{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,o=AZ({start:0,end:e},this.groups),s=AZ({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:bV(l.range,i),size:l.size})),a=n.map((l,u)=>({range:{start:e+u,end:e+u+1},size:l.size}));this.groups=kTe(o,a,s),this._size=this.groups.reduce((l,u)=>l+u.size*(u.range.end-u.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const o=i.range.end-i.range.start,s=n+o*i.size;if(e<s)return t+Math.floor((e-n)/i.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const o=i.range.end-i.range.start,s=n+o;if(e<s)return t+(e-n)*i.size;t+=o*i.size,n=s}return-1}}function TTe(r){try{r.parentElement&&r.parentElement.removeChild(r)}catch{}}class NTe{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=Lt(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),TTe(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var rE=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};const K_={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class k2{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ATe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class OTe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function RTe(r,e){return Array.isArray(r)&&Array.isArray(e)?Rf(r,e):r===e}class MTe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Im{constructor(e,t,n,i=K_){if(this.virtualDelegate=t,this.domId=`list_id_${++Im.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Kb(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ot.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ot.None,this.onDragLeaveTimeout=ot.None,this.disposables=new Nt,this._onDidChangeContentHeight=new Fe,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new OZ;for(const s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new NTe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=q_(i,s=>s.horizontalScrolling,K_.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new MTe(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",q_(i,s=>s.transformOptimization,K_.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Or.addTarget(this.rowsContainer)),this.scrollable=new k4(q_(i,s=>s.smoothScrolling,!1)?125:0,s=>Rv(s)),this.scrollableElement=this.disposables.add(new m$(this.rowsContainer,{alwaysConsumeMouseWheel:q_(i,s=>s.alwaysConsumeMouseWheel,K_.alwaysConsumeMouseWheel),horizontal:1,vertical:q_(i,s=>s.verticalScrollMode,K_.verticalScrollMode),useShadows:q_(i,s=>s.useShadows,K_.useShadows),mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(kt(this.rowsContainer,co.Change,s=>this.onTouchChange(s))),this.disposables.add(kt(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(kt(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(kt(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(kt(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(kt(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=q_(i,s=>s.setRowLineHeight,K_.setRowLineHeight),this.setRowHeight=q_(i,s=>s.setRowHeight,K_.setRowHeight),this.supportDynamicHeights=q_(i,s=>s.supportDynamicHeights,K_.supportDynamicHeights),this.dnd=q_(i,s=>s.dnd,K_.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:$3(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=Jl.intersect(i,o),a=new Map;for(let Q=s.start;Q<s.end;Q++){const z=this.items[Q];if(z.dragStartDisposable.dispose(),z.row){let $=a.get(z.templateId);$||($=[],a.set(z.templateId,$));const G=this.renderers.get(z.templateId);G&&G.disposeElement&&G.disposeElement(z.element,Q,z.row.templateData,z.size),$.push(z.row)}z.row=null}const l={start:e+t,end:this.items.length},u=Jl.intersect(l,i),d=Jl.relativeComplement(l,i),h=n.map(Q=>({id:String(this.itemId++),element:Q,templateId:this.virtualDelegate.getTemplateId(Q),size:this.virtualDelegate.getHeight(Q),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(Q),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ot.None}));let p;e===0&&t>=this.items.length?(this.rangeMap=new OZ,this.rangeMap.splice(0,0,h),p=this.items,this.items=h):(this.rangeMap.splice(e,t,h),p=this.items.splice(e,t,...h));const _=n.length-t,C=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),S=bV(u,_),x=Jl.intersect(C,S);for(let Q=x.start;Q<x.end;Q++)this.updateItemInDOM(this.items[Q],Q);const T=Jl.relativeComplement(S,C);for(const Q of T)for(let z=Q.start;z<Q.end;z++)this.removeItemFromDOM(z);const k=d.map(Q=>bV(Q,_)),W=[{start:e,end:e+n.length},...k].map(Q=>Jl.intersect(C,Q)),F=this.getNextToLastElement(W);for(const Q of W)for(let z=Q.start;z<Q.end;z++){const $=this.items[z],G=a.get($.templateId),Y=G==null?void 0:G.pop();this.insertItemInDOM(z,F,Y)}for(const Q of a.values())for(const z of Q)this.cache.release(z);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),p.map(Q=>Q.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Rv(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:y0e(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:$3(this.domNode)})}render(e,t,n,i,o,s=!1){const a=this.getRenderRange(t,n),l=Jl.relativeComplement(a,e),u=Jl.relativeComplement(e,a),d=this.getNextToLastElement(l);if(s){const h=Jl.intersect(e,a);for(let p=h.start;p<h.end;p++)this.updateItemInDOM(this.items[p],p)}for(const h of l)for(let p=h.start;p<h.end;p++)this.insertItemInDOM(p,d);for(const h of u)for(let p=h.start;p<h.end;p++)this.removeItemFromDOM(p);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n??this.cache.alloc(i.templateId));const o=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",o);const s=this.accessibilityProvider.isChecked(i.element);typeof s<"u"&&i.row.domNode.setAttribute("aria-checked",String(!!s)),i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a&&a.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=kt(i.row.domNode,"dragstart",u=>this.onDragStart(i.element,l,u))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Id?"-moz-fit-content":"fit-content",e.width=$3(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Sn.map(this.disposables.add(new Hr(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Sn.map(this.disposables.add(new Hr(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Sn.filter(Sn.map(this.disposables.add(new Hr(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Sn.map(this.disposables.add(new Hr(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Sn.any(Sn.map(this.disposables.add(new Hr(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Sn.map(this.disposables.add(new Hr(this.domNode,co.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Sn.map(this.disposables.add(new Hr(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Sn.map(this.disposables.add(new Hr(this.rowsContainer,co.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(bse.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i,n)),typeof o>"u"&&(o=String(i.length));const s=Lt(".monaco-drag-image");s.textContent=o,document.body.appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>document.body.removeChild(s),0)}this.currentDragData=new k2(i),mb.CurrentDragAndDropData=new ATe(i),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),mb.CurrentDragAndDropData&&mb.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(mb.CurrentDragAndDropData)this.currentDragData=mb.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new OTe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=oS(n).filter(i=>i>=-1&&i<this.length).sort((i,o)=>i-o),n=n[0]===-1?[-1]:n,RTe(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Hi(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const i of n){const o=this.items[i];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Hi(()=>{for(const i of n){const o=this.items[i];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=tS(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,mb.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,mb.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ot.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Kie(this.domNode).top;this.dragOverAnimationDisposable=I0e(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=tS(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let o,s;e===this.elementTop(i.start)?(o=i.start,s=0):i.end-i.start>1&&(o=i.start+1,s=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let u=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,u=u||h!==0}if(!u){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Jl.relativeComplement(i,l);for(const p of d)for(let _=p.start;_<p.end;_++)this.items[_].row&&this.removeItemFromDOM(_);const h=Jl.relativeComplement(l,i);for(const p of h)for(let _=p.start;_<p.end;_++){const C=_+1,S=C<this.items.length?this.items[C].row:null,x=S?S.domNode:null;this.insertItemInDOM(_,x)}for(let p=l.start;p<l.end;p++)this.items[p].row&&this.updateItemInDOM(this.items[p],p);if(typeof o=="number"){const p=this.scrollable.getFutureScrollPosition().scrollTop-e,_=this.elementTop(o)-s+p;this.setScrollTop(_,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){const a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let s=t.row.domNode.offsetHeight;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-n}const i=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);const o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,i.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,i.templateData,void 0)),t.size=i.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(i.domNode),this.cache.release(i),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),nr(this.disposables)}}Im.InstanceCount=0;rE([ca],Im.prototype,"onMouseClick",null);rE([ca],Im.prototype,"onMouseDblClick",null);rE([ca],Im.prototype,"onMouseMiddleClick",null);rE([ca],Im.prototype,"onMouseDown",null);rE([ca],Im.prototype,"onContextMenu",null);rE([ca],Im.prototype,"onTouchStart",null);rE([ca],Im.prototype,"onTap",null);var oE=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},RZ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class PTe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){const o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let qM=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Fe,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new PTe(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const o=n.length-t,s=e+t,a=[...this.sortedIndexes.filter(u=>u<e),...n.map((u,d)=>u?d+e:-1).filter(u=>u!==-1),...this.sortedIndexes.filter(u=>u>=s).map(u=>u+o)],l=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const u=(i=this.sortedIndexes.find(d=>d>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(u,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(PZ),t)}_set(e,t,n){const i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const s=CV(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return Nz(this.sortedIndexes,e,PZ)>=0}dispose(){nr(this._onChange)}};oE([ca],qM.prototype,"renderer",null);class FTe extends qM{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class G5{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(s=>this.identityProvider.getId(this.view.element(s)).toString()),o=n.map(s=>i.indexOf(this.identityProvider.getId(s).toString())>-1);this.trait.splice(e,t,o)}}function BC(r){return r.tagName==="INPUT"||r.tagName==="TEXTAREA"}function CL(r){return r.classList.contains("monaco-editor")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:CL(r.parentElement)}class cae{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Nt,this.multipleSelectionDisposables=new Nt,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(ji?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Sn.chain(this.disposables.add(new Hr(this.view.domNode,"keydown")).event).filter(e=>!BC(e.target)).map(e=>new Oo(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(ji?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(rc(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}oE([ca],cae.prototype,"onKeyDown",null);var yL;(function(r){r[r.Idle=0]="Idle",r[r.Typing=1]="Typing"})(yL||(yL={}));const dae=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=93&&r.keyCode<=102||r.keyCode>=80&&r.keyCode<=90}};class BTe{constructor(e,t,n,i){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=i,this.enabled=!1,this.state=yL.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Nt,this.disposables=new Nt,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Sn.chain(this.enabledDisposables.add(new Hr(this.view.domNode,"keydown")).event).filter(i=>!BC(i.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(i=>new Oo(i)).filter(i=>this.delegate.mightProducePrintableCharacter(i)).forEach(i=>i.preventDefault()).map(i=>i.browserEvent.key).event,t=Sn.debounce(e,()=>null,800);Sn.reduce(Sn.any(e,t),(i,o)=>o===null?null:(i||"")+o)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Tl(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=yL.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===yL.Idle?1:0;this.state=yL.Typing;for(let o=0;o<this.list.length;o++){const s=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(typeof l>"u"||B4(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class WTe{constructor(e,t){this.list=e,this.view=t,this.disposables=new Nt,Sn.chain(this.disposables.add(new Hr(t.domNode,"keydown")).event).filter(i=>!BC(i.target)).map(i=>new Oo(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const o=window.getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function hae(r){return ji?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function fae(r){return r.browserEvent.shiftKey}function VTe(r){return r instanceof MouseEvent&&r.button===2}const MZ={isSelectionSingleChangeEvent:hae,isSelectionRangeChangeEvent:fae};class gae{constructor(e){this.list=e,this.disposables=new Nt,this._onPointer=new Fe,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||MZ),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Or.addTarget(e.getHTMLElement()))),Sn.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||MZ))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){CL(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(CL(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||BC(e.browserEvent.target)||CL(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),VTe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(BC(e.browserEvent.target)||CL(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const d=this.list.getFocus()[0];n=d??t,this.list.setAnchor(n)}const i=Math.min(n,t),o=Math.max(n,t),s=rc(i,o+1),a=this.list.getSelection(),l=zTe(CV(a,[n]),n);if(l.length===0)return;const u=CV(s,$Te(a,l));this.list.setSelection(u,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),o=i.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class pae{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):ji||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const HTe={listFocusBackground:je.fromHex("#7FB0D0"),listActiveSelectionBackground:je.fromHex("#0E639C"),listActiveSelectionForeground:je.fromHex("#FFFFFF"),listActiveSelectionIconForeground:je.fromHex("#FFFFFF"),listFocusAndSelectionBackground:je.fromHex("#094771"),listFocusAndSelectionForeground:je.fromHex("#FFFFFF"),listInactiveSelectionBackground:je.fromHex("#3F3F46"),listInactiveSelectionIconForeground:je.fromHex("#FFFFFF"),listHoverBackground:je.fromHex("#2A2D2E"),listDropBackground:je.fromHex("#383B3D"),treeIndentGuidesStroke:je.fromHex("#a9a9a9"),tableColumnsBorder:je.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:je.fromHex("#cccccc").transparent(.04)},UTe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function zTe(r,e){const t=r.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function CV(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function $Te(r,e){const t=[];let n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}const PZ=(r,e)=>r-e;class jTe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(const s of this.renderers)s.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){let o=0;for(const s of this.renderers)s.disposeElement&&s.disposeElement(e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class qTe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.setAttribute("aria-level",`${o}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class KTe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var o,s;(s=(o=this.dnd).onDragLeave)===null||s===void 0||s.call(o,e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}class t0{constructor(e,t,n,i,o=UTe){var s;this.user=e,this._options=o,this.focus=new qM("focused"),this.anchor=new qM("anchor"),this.eventBufferer=new oz,this._ariaLabel="",this.disposables=new Nt,this._onDidDispose=new Fe,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(s=this._options.accessibilityProvider)===null||s===void 0?void 0:s.getWidgetRole():"list";this.selection=new FTe(a!=="listbox"),e0(o,HTe,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(l.push(new qTe(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new jTe(d.templateId,[...l,d]));const u=Object.assign(Object.assign({},o),{dnd:o.dnd&&new KTe(this,o.dnd)});if(this.view=new Im(t,n,i,u),this.view.domNode.setAttribute("role",a),o.styleController)this.styleController=o.styleController(this.view.domId);else{const d=Bf(this.view.domNode);this.styleController=new pae(d,this.view.domId)}if(this.spliceable=new DTe([new G5(this.focus,this.view,o.identityProvider),new G5(this.selection,this.view,o.identityProvider),new G5(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new WTe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new cae(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const d=o.keyboardNavigationDelegate||dae;this.typeLabelController=new BTe(this,this.view,o.keyboardNavigationLabelProvider,d),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Sn.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Sn.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Sn.chain(this.disposables.add(new Hr(this.view.domNode,"keydown")).event).map(o=>new Oo(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(XY).filter(()=>!1).event,n=Sn.chain(this.disposables.add(new Hr(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(o=>new Oo(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(XY).map(({browserEvent:o})=>{const s=this.getFocus(),a=s.length?s[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,u=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:u,browserEvent:o}}).event,i=Sn.chain(this.view.onContextMenu).filter(o=>!e).map(({element:o,index:s,browserEvent:a})=>({element:o,index:s,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Sn.any(t,n,i)}get onKeyDown(){return this.disposables.add(new Hr(this.view.domNode,"keydown")).event}get onDidFocus(){return Sn.signal(this.disposables.add(new Hr(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new gae(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Jy(this.user,`Invalid start index: ${e}`);if(t<0)throw new Jy(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new Jy(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Jy(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return R9(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new Jy(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,i);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);s>-1&&this.setFocus([s],n)}focusNextPage(e,t){return RZ(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.view.element(n),o=this.getFocusedElements()[0];if(o!==i){const s=this.findPreviousIndex(n,!1,t);s>-1&&o!==this.view.element(s)?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();this.view.setScrollTop(s+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==s&&(this.setFocus([]),yield xC(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return RZ(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const o=this.view.element(n),s=this.getFocusedElements()[0];if(s!==o){const a=this.findNextIndex(n,!1,t);a>-1&&s!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield xC(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Jy(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(iS(t)){const s=o-this.view.renderHeight;this.view.setScrollTop(s*Hg(t,0,1)+i)}else{const s=i+o,a=n+this.view.renderHeight;i<n&&s>=a||(i<n||s>=a&&o>=this.view.renderHeight?this.view.setScrollTop(i):s>=a&&this.view.setScrollTop(s-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Jy(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),i=this.view.elementHeight(e);if(n<t||n+i>t+this.view.renderHeight)return null;const o=i-this.view.renderHeight;return Math.abs((t-n)/o)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}oE([ca],t0.prototype,"onDidChangeFocus",null);oE([ca],t0.prototype,"onDidChangeSelection",null);oE([ca],t0.prototype,"onContextMenu",null);oE([ca],t0.prototype,"onKeyDown",null);oE([ca],t0.prototype,"onDidFocus",null);class GTe{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ot.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,i);const s=new Ou,a=o.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class YTe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function ZTe(r,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new YTe(r,e.accessibilityProvider)})}class XTe{constructor(e,t,n,i,o={}){const s=()=>this.model,a=i.map(l=>new GTe(l,s));this.list=new t0(e,t,n,a,ZTe(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Sn.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Sn.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Sn.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,rc(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const QTe={separatorBorder:je.transparent};class mae{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=Hg(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class JTe extends mae{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class eNe extends mae{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var _b;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(_b||(_b={}));var KM;(function(r){r.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}r.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}r.Invisible=t})(KM||(KM={}));class _ae extends ot{constructor(e,t={}){var n,i,o,s,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=_b.Idle,this._onDidSashChange=this._register(new Fe),this._onDidSashReset=this._register(new Fe),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ft(this.el,Lt(".sash-container")),this.viewContainer=Lt(".split-view-container"),this.scrollable=new k4(125,Rv),this.scrollableElement=this._register(new m$(this.viewContainer,{vertical:this.orientation===0?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),ft(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||QTe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,u)=>{const d=wd(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},h=l.view;this.doAddView(h,d,u,!0)}),this.contentSize=this.viewItems.reduce((l,u)=>l+u.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const o=this.viewItems[i];o.size=Hg(Math.round(this.proportions[i]*e),o.minimumSize,o.maximumSize)}else{const i=rc(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),o=gC(kt(document.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),kt(document.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{const u=this.viewItems.map(C=>C.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const S=this.viewItems[i];d=(S.minimumSize-S.size)/2,h=(S.maximumSize-S.size)/2}else{const S=this.viewItems[i+1];d=(S.size-S.maximumSize)/2,h=(S.size-S.minimumSize)/2}let p,_;if(!l){const C=rc(i,-1),S=rc(i+1,this.viewItems.length),x=C.reduce(($,G)=>$+(this.viewItems[G].minimumSize-u[G]),0),T=C.reduce(($,G)=>$+(this.viewItems[G].viewMaximumSize-u[G]),0),k=S.length===0?Number.POSITIVE_INFINITY:S.reduce(($,G)=>$+(u[G]-this.viewItems[G].minimumSize),0),M=S.length===0?Number.NEGATIVE_INFINITY:S.reduce(($,G)=>$+(u[G]-this.viewItems[G].viewMaximumSize),0),W=Math.max(x,M),F=Math.min(k,T),Q=this.findFirstSnapIndex(C),z=this.findFirstSnapIndex(S);if(typeof Q=="number"){const $=this.viewItems[Q],G=Math.floor($.viewMinimumSize/2);p={index:Q,limitDelta:$.visible?W-G:W+G,size:$.size}}if(typeof z=="number"){const $=this.viewItems[z],G=Math.floor($.viewMinimumSize/2);_={index:z,limitDelta:$.visible?F+G:F-G,size:$.size}}}this.sashDragState={start:a,current:a,index:i,sizes:u,minDelta:d,maxDelta:h,alt:l,snapBefore:p,snapAfter:_,disposable:o}};s(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:o,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:u}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,i,void 0,void 0,s,a,l,u);if(o){const p=t===this.sashItems.length-1,_=this.viewItems.map(M=>M.size),C=p?t:t+1,S=this.viewItems[C],x=S.size-S.maximumSize,T=S.size-S.minimumSize,k=p?t-1:t+1;this.resize(k,-h,_,void 0,void 0,x,T)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Hg(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==_b.Idle)throw new Error("Cant modify splitview");if(this.state=_b.Busy,e<0||e>=this.viewItems.length)return;const n=rc(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=Hg(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(i,o),this.state=_b.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Hg(n,a.minimumSize,a.maximumSize);const i=rc(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==_b.Idle)throw new Error("Cant modify splitview");this.state=_b.Busy;const o=Lt(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const s=e.onDidChange(p=>this.onViewChange(d,p)),a=Hi(()=>this.viewContainer.removeChild(o)),l=gC(s,a);let u;typeof t=="number"?u=t:t.type==="split"?u=this.getViewSize(t.index)/2:t.type==="invisible"?u={cachedVisibleSize:t.cachedVisibleSize}:u=e.minimumSize;const d=this.orientation===0?new JTe(o,e,u,l):new eNe(o,e,u,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){let p={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const _=this.orientation===0?new eu(this.sashContainer,{getHorizontalSashTop:$=>this.getSashPosition($),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:1})):new eu(this.sashContainer,{getVerticalSashLeft:$=>this.getSashPosition($),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:0})),C=this.orientation===0?$=>({sash:_,start:$.startY,current:$.currentY,alt:$.altKey}):$=>({sash:_,start:$.startX,current:$.currentX,alt:$.altKey}),x=Sn.map(_.onDidStart,C)(this.onSashStart,this),k=Sn.map(_.onDidChange,C)(this.onSashChange,this),W=Sn.map(_.onDidEnd,()=>this.sashItems.findIndex($=>$.sash===_))(this.onSashEnd,this),F=_.onDidReset(()=>{const $=this.sashItems.findIndex(O=>O.sash===_),G=rc($,-1),Y=rc($+1,this.viewItems.length),I=this.findFirstSnapIndex(G),D=this.findFirstSnapIndex(Y);typeof I=="number"&&!this.viewItems[I].visible||typeof D=="number"&&!this.viewItems[D].visible||this._onDidSashReset.fire($)}),Q=gC(x,k,W,F,_),z={sash:_,disposable:Q};this.sashItems.splice(n-1,0,z)}o.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),this.state=_b.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,u){if(e<0||e>=this.viewItems.length)return 0;const d=rc(e,-1),h=rc(e+1,this.viewItems.length);if(o)for(const z of o)K3(d,z),K3(h,z);if(i)for(const z of i)bA(d,z),bA(h,z);const p=d.map(z=>this.viewItems[z]),_=d.map(z=>n[z]),C=h.map(z=>this.viewItems[z]),S=h.map(z=>n[z]),x=d.reduce((z,$)=>z+(this.viewItems[$].minimumSize-n[$]),0),T=d.reduce((z,$)=>z+(this.viewItems[$].maximumSize-n[$]),0),k=h.length===0?Number.POSITIVE_INFINITY:h.reduce((z,$)=>z+(n[$]-this.viewItems[$].minimumSize),0),M=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((z,$)=>z+(n[$]-this.viewItems[$].maximumSize),0),W=Math.max(x,M,s),F=Math.min(k,T,a);let Q=!1;if(l){const z=this.viewItems[l.index],$=t>=l.limitDelta;Q=$!==z.visible,z.setVisible($,l.size)}if(!Q&&u){const z=this.viewItems[u.index],$=t<u.limitDelta;Q=$!==z.visible,z.setVisible($,u.size)}if(Q)return this.resize(e,t,n,i,o,s,a);t=Hg(t,W,F);for(let z=0,$=t;z<p.length;z++){const G=p[z],Y=Hg(_[z]+$,G.minimumSize,G.maximumSize),I=Y-_[z];$-=I,G.size=Y}for(let z=0,$=t;z<C.length;z++){const G=C[z],Y=Hg(S[z]-$,G.minimumSize,G.maximumSize),I=Y-S[z];$+=I,G.size=Y}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=rc(this.viewItems.length-1,-1),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);for(const a of s)K3(i,a);for(const a of o)bA(i,a);typeof e=="number"&&bA(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],u=Hg(l.size+n,l.minimumSize,l.maximumSize),d=u-l.size;n-=d,l.size=u}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const o=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const s=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:u}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&s[l+1]),p=!(n[l]&&o[l+1]);if(h&&p){const _=rc(l,-1),C=rc(l+1,this.viewItems.length),S=this.findFirstSnapIndex(_),x=this.findFirstSnapIndex(C),T=typeof S=="number"&&!this.viewItems[S].visible,k=typeof x=="number"&&!this.viewItems[x].visible;T&&o[l]&&(a>0||this.startSnappingEnabled)?u.state=1:k&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?u.state=2:u.state=0}else h&&!p?u.state=1:!h&&p?u.state=2:u.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class T2{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=T2.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const s=i.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}renderTemplate(e){const t=ft(e,Lt(".monaco-table-tr")),n=[],i=[];for(let s=0;s<this.columns.length;s++){const a=this.renderers[s],l=ft(t,Lt(".monaco-table-td",{"data-col-index":s}));l.style.width=`${this.getColumnSize(s)}px`,n.push(l),i.push(a.renderTemplate(l))}const o={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(o),o}renderElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],i)}}disposeElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const s=this.renderers[o];if(s.disposeElement){const l=this.columns[o].project(e);s.disposeElement(l,t,n.cellTemplateData[o],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);ya(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}T2.TemplateId="row";function tNe(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return T2.TemplateId}}}class nNe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new Fe,this.onDidLayout=this._onDidLayout.event,this.element=Lt(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Sn.None}layout(e){this._onDidLayout.fire([this.index,e])}}class U4{constructor(e,t,n,i,o,s){this.virtualDelegate=n,this.domId=`table_id_${++U4.InstanceCount}`,this.disposables=new Nt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ft(t,Lt(`.monaco-table.${this.domId}`));const a=i.map((d,h)=>new nNe(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new _ae(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const u=new T2(i,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new t0(e,this.domNode,tNe(n),[u],s)),Sn.any(...a.map(d=>d.onDidLayout))(([d,h])=>u.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=i.reduce((_,C)=>_+C.weight,0),p=i[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,p)},null,this.disposables),this.styleElement=Bf(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}U4.InstanceCount=0;var _T;(function(r){r[r.Unknown=0]="Unknown",r[r.Twistie=1]="Twistie",r[r.Element=2]="Element"})(_T||(_T={}));class kf extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class Y${constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function Z$(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function _N(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function Y5(r){return typeof r.collapsible=="boolean"}class iNe{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new oz,this._onDidChangeCollapseState=new Fe,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Fe,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Fe,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Zi.empty(),i={}){if(e.length===0)throw new kf(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,o,s){var a;i===void 0&&(i=Zi.empty()),s===void 0&&(s=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,o);const u=[...i],d=t[t.length-1],h=new pv({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...u,...l.children.slice(d+n)].map(x=>e.getId(x.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,u,o);const p=t.slice(0,-1),_=(x,T,k)=>{if(s>0)for(let M=0;M<k;M++)x--,T--,this.spliceSmart(e,[...p,x,0],Number.MAX_SAFE_INTEGER,u[T].children,o,s-1)};let C=Math.min(l.children.length,d+n),S=u.length;for(const x of h.changes.sort((T,k)=>k.originalStart-T.originalStart))_(C,S,C-(x.originalStart+x.originalLength)),C=x.originalStart,S=x.modifiedStart-d,this.spliceSimple([...p,C],x.originalLength,Zi.slice(u,S,S+x.modifiedLength),o);_(C,S,C)}spliceSimple(e,t,n=Zi.empty(),{onDidCreateNode:i,onDidDeleteNode:o,diffIdentityProvider:s}){const{parentNode:a,listIndex:l,revealed:u,visible:d}=this.getParentNodeWithListIndex(e),h=[],p=Zi.map(n,z=>this.createTreeNode(z,a,a.visible?1:0,u,h,i)),_=e[e.length-1],C=a.children.length>0;let S=0;for(let z=_;z>=0&&z<a.children.length;z--){const $=a.children[z];if($.visible){S=$.visibleChildIndex;break}}const x=[];let T=0,k=0;for(const z of p)x.push(z),k+=z.renderNodeCount,z.visible&&(z.visibleChildIndex=S+T++);const M=vG(a.children,_,t,x);s?a.lastDiffIds?vG(a.lastDiffIds,_,t,x.map(z=>s.getId(z.element).toString())):a.lastDiffIds=a.children.map(z=>s.getId(z.element).toString()):a.lastDiffIds=void 0;let W=0;for(const z of M)z.visible&&W++;if(W!==0)for(let z=_+x.length;z<a.children.length;z++){const $=a.children[z];$.visible&&($.visibleChildIndex-=W)}if(a.visibleChildrenCount+=T-W,u&&d){const z=M.reduce(($,G)=>$+(G.visible?G.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,k-z),this.list.splice(l,z,h)}if(M.length>0&&o){const z=$=>{o($),$.children.forEach(z)};M.forEach(z)}const F=a.children.length>0;C!==F&&this.setCollapsible(e.slice(0,-1),F),this._onDidSplice.fire({insertedNodes:x,deletedNodes:M});let Q=a;for(;Q;){if(Q.visibility===2){this.refilter();break}Q=Q.parent}}rerender(e){if(e.length===0)throw new kf(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,i,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!Y5(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,i){const o=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!o)return o;const s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=s-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(Y5(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!Y5(t)&&t.recursive)for(const o of e.children)i=this._setNodeCollapseState(o,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,i,o,s){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&o.push(a);const u=e.children||Zi.empty(),d=i&&l!==0&&!a.collapsed,h=Zi.map(u,C=>this.createTreeNode(C,a,l,d,o,s));let p=0,_=1;for(const C of h)a.children.push(C),_+=C.renderNodeCount,C.visible&&(C.visibleChildIndex=p++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=p,a.visible=l===2?p>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=_):(a.renderNodeCount=0,i&&o.pop()),s&&s(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const u of e.children)a=this._updateNodeAfterFilterChange(u,o,n,i&&!e.collapsed)||a,u.visible&&(u.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):Z$(n)?(e.filterData=n.data,_N(n.visibility)):(e.filterData=void 0,_N(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new kf(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new kf(this.user,"Invalid tree location");const a=t.children[s];return{node:a,listIndex:n,revealed:i,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,o=!0){const[s,...a]=e;if(s<0||s>t.children.length)throw new kf(this.user,"Invalid tree location");for(let l=0;l<s;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],n+1,i,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Lbe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class rNe extends k2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function Z5(r){return r instanceof k2?new rNe(r):r}class oNe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ot.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(Z5(e),t)}onDragOver(e,t,n,i,o=!0){const s=this.dnd.onDragOver(Z5(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return s;if(a&&typeof s!="boolean"&&s.autoExpand&&(this.autoExpandDisposable=tS(()=>{const p=this.modelProvider(),_=p.getNodeLocation(t);p.isCollapsed(_)&&p.setCollapsed(_,!1),this.autoExpandNode=void 0},500)),typeof s=="boolean"||!s.accept||typeof s.bubble>"u"||s.feedback){if(!o){const p=typeof s=="boolean"?s:s.accept,_=typeof s=="boolean"?void 0:s.effect;return{accept:p,effect:_,feedback:[n]}}return s}if(s.bubble===1){const p=this.modelProvider(),_=p.getNodeLocation(t),C=p.getParentNodeLocation(_),S=p.getNode(C),x=C&&p.getListIndex(C);return this.onDragOver(e,S,x,i,!1)}const l=this.modelProvider(),u=l.getNodeLocation(t),d=l.getListIndex(u),h=l.getListRenderCount(u);return Object.assign(Object.assign({},s),{feedback:rc(d,d+h)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(Z5(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function sNe(r,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new oNe(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=r(),i=n.getNodeLocation(t),o=n.getParentNodeLocation(i);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class X${constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var vN;(function(r){r.None="none",r.OnHover="onHover",r.Always="always"})(vN||(vN={}));class aNe{constructor(e,t=[]){this._elements=t,this.onDidChange=Sn.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class bN{constructor(e,t,n,i,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=bN.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new D1e,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ot.None,this.disposables=new Nt,this.templateId=e.templateId,this.updateOptions(o),Sn.map(n,s=>s.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=Hg(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==vN.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Nt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ft(e,Lt(".monaco-tl-row")),n=ft(t,Lt(".monaco-tl-indent")),i=ft(t,Lt(".monaco-tl-twistie")),o=ft(t,Lt(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:i,indentGuidesDisposable:ot.None,templateData:s}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const o=bN.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${o}px`,n.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...Ae.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...Ae.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(ya(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Nt,i=this.modelProvider();let o=e;for(;;){const s=i.getNodeLocation(o),a=i.getParentNodeLocation(s);if(!a)break;const l=i.getNode(a),u=Lt(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&u.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(u):t.indent.insertBefore(u,t.indent.firstElementChild),this.renderedIndentGuides.add(l,u),n.add(Hi(()=>this.renderedIndentGuides.delete(l,u))),o=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const o=n.getNodeLocation(i);try{const s=n.getParentNodeLocation(o);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):s&&t.add(n.getNode(s))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),nr(this.disposables)}}bN.DefaultIndent=8;class lNe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Nt,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const o=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return o;let s;if(typeof o=="boolean"?s=o?1:0:Z$(o)?s=_N(o.visibility):s=o,s===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:mm.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),i=Array.isArray(n)?n:[n];for(const o of i){const s=o&&o.toString();if(typeof s>"u")return{data:mm.Default,visibility:!0};const a=Cx(this._pattern,this._lowercasePattern,0,s,s.toLowerCase(),0,!0);if(a)return this._matchCount++,i.length===1?{data:a,visibility:!0}:{data:{label:s,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:mm.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){nr(this.disposables)}}class uNe{constructor(e,t,n,i,o){this.tree=e,this.view=n,this.filter=i,this.keyboardNavigationDelegate=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new Fe,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new Fe,this.enabledDisposables=new Nt,this.disposables=new Nt,this.domNode=Lt(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(kt(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=ft(n.getHTMLElement(),Lt(".monaco-list-type-filter-message")),this.labelDomNode=ft(this.domNode,Lt("span.label"));const s=ft(this.domNode,Lt(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=ft(s,Lt("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(kt(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=ft(s,Lt("button.clear"+Ae.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=E("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Hr(this.view.getHTMLElement(),"keydown")),t=Sn.chain(e.event).filter(i=>!BC(i.target)||i.target===this.filterOnTypeDomNode).filter(i=>i.key!=="Dead"&&!/^Media/.test(i.key)).map(i=>new Oo(i)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(i=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(i)&&!(i.keyCode===18||i.keyCode===16||i.keyCode===15||i.keyCode===17)||(this.pattern.length>0||this.triggered)&&(i.keyCode===9||i.keyCode===1)&&!i.altKey&&!i.ctrlKey&&!i.metaKey||i.keyCode===1&&(ji?i.altKey&&!i.metaKey:i.ctrlKey)&&!i.shiftKey).forEach(i=>{i.stopPropagation(),i.preventDefault()}).event,n=this.enabledDisposables.add(new Hr(this.clearDomNode,"click"));Sn.chain(Sn.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(ji?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,i=>!mm.isDefault(i.filterData));const n=this.tree.getFocus();if(n.length>0){const i=n[0];this.tree.getRelativeTop(i)===null&&this.tree.reveal(i,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=tu(e),n=e.clientWidth,i=n/2,o=this.domNode.clientWidth,s=new Nt;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-o-6}px`;break}},u=h=>{h.preventDefault();const p=h.clientX-t;h.dataTransfer&&(h.dataTransfer.dropEffect="none"),p<i?a="nw":a="ne",l()},d=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",nr(s)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),s.add(Hi(()=>this.domNode.classList.remove("dragging"))),s.add(kt(document,"dragover",h=>u(h))),s.add(kt(this.domNode,"dragend",()=>d())),mb.CurrentDragAndDropData=new PDe("vscode-ui"),s.add(Hi(()=>mb.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...Ae.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(...Ae.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=E("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...Ae.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(...Ae.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=E("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=E("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=E("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!mm.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),nr(this.disposables)}}function FZ(r){let e=_T.Unknown;return dG(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=_T.Twistie:dG(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=_T.Element),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function XO(r,e){e(r),r.children.forEach(t=>XO(t,e))}class X5{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&Rf(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),u=d=>l.delete(d);t.forEach(d=>XO(d,u)),this.set([...l.values()]);return}const n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>XO(l,i));const o=new Map,s=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>XO(l,s));const a=[];for(const l of this.nodes){const u=this.identityProvider.getId(l.element).toString();if(!n.has(u))a.push(l);else{const h=o.get(u);h&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class cNe extends gae{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(BC(e.browserEvent.target)||CL(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const s=this.tree.model,a=s.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),s.setCollapsed(a,void 0,l),o&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class dNe extends t0{constructor(e,t,n,i,o,s,a,l){super(e,t,n,i,l),this.focusTrait=o,this.selectionTrait=s,this.anchorTrait=a}createMouseController(e){return new cNe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],o=[];let s;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(s=e+l)}),i.length>0&&super.setFocus(oS([...super.getFocus(),...i])),o.length>0&&super.setSelection(oS([...super.getSelection(),...o])),typeof s=="number"&&super.setAnchor(s)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class vae{constructor(e,t,n,i,o={}){this._options=o,this.eventBufferer=new oz,this.disposables=new Nt,this._onWillRefilter=new Fe,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Fe;const s=new X$(n),a=new aG,l=new aG,u=new aNe(l.event);this.renderers=i.map(p=>new bN(p,()=>this.model,a.event,u,o));for(let p of this.renderers)this.disposables.add(p);let d;o.keyboardNavigationLabelProvider&&(d=new lNe(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:d}),this.disposables.add(d)),this.focus=new X5(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new X5(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new X5(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new dNe(e,t,s,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},sNe(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),a.input=this.model.onDidChangeCollapseState;const h=Sn.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})});if(h(()=>null,null,this.disposables),l.input=Sn.chain(Sn.any(h,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const _ of this.focus.getNodes())p.add(_);for(const _ of this.selection.getNodes())p.add(_);return[...p.values()]}).event,o.keyboardSupport!==!1){const p=Sn.chain(this.view.onKeyDown).filter(_=>!BC(_.target)).map(_=>new Oo(_));p.filter(_=>_.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(_=>_.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(_=>_.keyCode===10).on(this.onSpace,this,this.disposables)}if(o.keyboardNavigationLabelProvider){const p=o.keyboardNavigationDelegate||dae;this.typeFilterController=new uNe(this,this.model,this.view,d,p),this.focusNavigationFilter=_=>this.typeFilterController.shouldAllowFocus(_),this.disposables.add(this.typeFilterController)}this.styleElement=Bf(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===vN.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Sn.map(this.view.onMouseDblClick,FZ)}get onPointer(){return Sn.map(this.view.onPointer,FZ)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Sn.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===vN.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(i,t,!0)}focusNext(e=1,t=!1,n,i=this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const s=this.model.getParentNodeLocation(i);if(!s)return;const a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}dispose(){nr(this.disposables),this.view.dispose()}}class Q${constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new iNe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,o){return n.sorter.compare(i.element,o.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Zi.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=Zi.empty(),n){const i=new Set,o=new Set,s=l=>{var u;if(l.element===null)return;const d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();o.add(h),this.nodesByIdentity.set(h,d)}(u=n.onDidCreateNode)===null||u===void 0||u.call(n,d)},a=l=>{var u;if(l.element===null)return;const d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const h=this.identityProvider.getId(d.element).toString();o.has(h)||this.nodesByIdentity.delete(h)}(u=n.onDidDeleteNode)===null||u===void 0||u.call(n,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:a}))}preserveCollapseState(e=Zi.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Zi.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new kf(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new kf(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new kf(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new kf(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function QO(r){const e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:Zi.map(Zi.from(r.children),QO),collapsible:r.collapsible,collapsed:r.collapsed}}function JO(r){const e=[r.element],t=r.incompressible||!1;let n,i;for(;[i,n]=Zi.consume(Zi.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:Zi.map(Zi.concat(i,n),JO),collapsible:r.collapsible,collapsed:r.collapsed}}function yV(r,e=0){let t;return e<r.element.elements.length-1?t=[yV(r,e+1)]:t=Zi.map(Zi.from(r.children),n=>yV(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function BZ(r){return yV(r,0)}function bae(r,e,t){return r.element===e?Object.assign(Object.assign({},r),{children:t}):Object.assign(Object.assign({},r),{children:Zi.map(Zi.from(r.children),n=>bae(n,e,t))})}const hNe=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}});class fNe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new Q$(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Zi.empty(),n){const i=n.diffIdentityProvider&&hNe(n.diffIdentityProvider);if(e===null){const _=Zi.map(t,this.enabled?JO:QO);this._setChildren(null,_,{diffIdentityProvider:i,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),u=BZ(s),d=bae(u,e,t),h=(this.enabled?JO:QO)(d),p=l.children.map(_=>_===s?h:_);this._setChildren(l.element,p,{diffIdentityProvider:i,diffDepth:s.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=Zi.map(n,BZ),o=Zi.map(i,e?JO:QO);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,o=a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},s=a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:s}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new kf(this.user,`Tree element not found: ${e}`);return t}}const gNe=r=>r[r.length-1];class J${constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new J$(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function pNe(r,e){return{splice(t,n,i){e.splice(t,n,i.map(o=>r.map(o)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function mNe(r,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}})}class _Ne{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||gNe;const i=o=>this.elementMapper(o.elements);this.nodeMapper=new Y$(o=>new J$(i,o)),this.model=new fNe(e,pNe(this.nodeMapper,t),mNe(i,n))}get onDidSplice(){return Sn.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Sn.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Sn.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Zi.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var vNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};class ej extends vae{constructor(e,t,n,i,o={}){super(e,t,n,i,o)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Zi.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new Q$(e,t,n)}}class Cae{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}vNe([ca],Cae.prototype,"compressedTreeNodeProvider",null);function bNe(r,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class yae extends ej{constructor(e,t,n,i,o={}){const s=()=>this,a=i.map(l=>new Cae(s,l));super(e,t,n,a,bNe(s,o))}setChildren(e,t=Zi.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new _Ne(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var q1=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function Q5(r){return Object.assign(Object.assign({},r),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function wV(r,e){return e.parent?e.parent===r?!0:wV(r,e.parent):!1}function CNe(r,e){return r===e||wV(r,e)||wV(e,r)}class tj{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new tj(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class yNe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ae.treeItemLoading.classNamesArray),!0):(t.classList.remove(...Ae.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function WZ(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function VZ(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}class wNe extends k2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function J5(r){return r instanceof k2?new wNe(r):r}class SNe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(J5(e),t)}onDragOver(e,t,n,i,o=!0){return this.dnd.onDragOver(J5(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(J5(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function wae(r){return r&&Object.assign(Object.assign({},r),{collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new SNe(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:r.accessibilityProvider&&Object.assign(Object.assign({},r.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=r.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))}),filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},r.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick>"u"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:r.additionalScrollHeight})}function SV(r,e){e(r),r.children.forEach(t=>SV(t,e))}class Sae{constructor(e,t,n,i,o,s={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Fe,this._onDidChangeNodeSlowState=new Fe,this.nodeMapper=new Y$(a=>new tj(a)),this.disposables=new Nt,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,n,i,s),this.root=Q5({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Sn.map(this.tree.onDidChangeFocus,WZ)}get onDidChangeSelection(){return Sn.map(this.tree.onDidChangeSelection,WZ)}get onMouseDblClick(){return Sn.map(this.tree.onMouseDblClick,VZ)}get onPointer(){return Sn.map(this.tree.onPointer,VZ)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,o){const s=new X$(n),a=i.map(u=>new yNe(u,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=wae(o)||{};return new ej(e,t,s,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return q1(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,o){return q1(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new kf(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Sn.toPromise(this._onDidRender.event));const s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,i,o),n)try{this.tree.rerender(s)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return q1(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new kf(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Sn.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Sn.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Sn.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new kf(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return q1(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return q1(this,void 0,void 0,function*(){let i;return this.subTreeRefreshPromises.forEach((o,s)=>{!i&&CNe(s,e)&&(i=o.then(()=>this.refreshNode(e,t,n)))}),i||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return q1(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(o=>i=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,n);e.stale=!1,yield S9.settled(o.map(s=>this.doRefreshSubTree(s,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return q1(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(Zi.empty());else{const o=xC(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},s=>null),i=this.doGetChildren(e).finally(()=>o.cancel())}try{const o=yield i;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Zv(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=fl(()=>q1(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(ti))}setChildren(e,t,n,i){const o=[...t];if(e.children.length===0&&o.length===0)return[];const s=new Map,a=new Map;for(const d of e.children)if(s.set(d.element,d),this.identityProvider){const h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}const l=[],u=o.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const S=Q5({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(S.collapsedByDefault=!1,l.push(S)),S}const p=this.identityProvider.getId(d).toString(),_=a.get(p);if(_){const S=_.node;return s.delete(S.element),this.nodes.delete(S.element),this.nodes.set(d,S),S.element=d,S.hasChildren=h,n?_.collapsed?(S.children.forEach(x=>SV(x,T=>this.nodes.delete(T.element))),S.children.splice(0,S.children.length),S.stale=!0):l.push(S):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(S.collapsedByDefault=!1,l.push(S)),S}const C=Q5({element:d,parent:e,id:p,hasChildren:h});return i&&i.viewState.focus&&i.viewState.focus.indexOf(p)>-1&&i.focus.push(C),i&&i.viewState.selection&&i.viewState.selection.indexOf(p)>-1&&i.selection.push(C),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(p)>-1?l.push(C):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(C.collapsedByDefault=!1,l.push(C)),C});for(const d of s.values())SV(d,h=>this.nodes.delete(h.element));for(const d of u)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...u),e!==this.root&&this.autoExpandSingleChildren&&u.length===1&&l.length===0&&(u[0].collapsedByDefault=!1,l.push(u[0])),l}render(e,t,n){const i=e.children.map(s=>this.asTreeElement(s,t)),o=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}});this.tree.setChildren(e===this.root?null:e,i,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Zi.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class nj{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new nj(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class ENe{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ae.treeItemLoading.classNamesArray),!0):(t.classList.remove(...Ae.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=nr(this.disposables)}}function LNe(r){const e=r&&wae(r);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class xNe extends Sae{constructor(e,t,n,i,o,s,a={}){super(e,t,n,o,s,a),this.compressionDelegate=i,this.compressibleNodeMapper=new Y$(l=>new nj(l)),this.filter=a.filter}createTree(e,t,n,i,o){const s=new X$(n),a=i.map(u=>new ENe(u,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=LNe(o)||{};return new yae(e,t,s,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),i=p=>{const _=new Set;for(const C of p){const S=this.tree.getCompressedTreeNode(C===this.root?null:C);if(S.element)for(const x of S.element.elements)_.add(n(x.element))}return _},o=i(this.tree.getSelection()),s=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const u=this.getFocus();let d=!1;const h=p=>{const _=p.element;if(_)for(let C=0;C<_.elements.length;C++){const S=n(_.elements[C].element),x=_.elements[_.elements.length-1].element;o.has(S)&&a.indexOf(x)===-1&&(a.push(x),l=!0),s.has(S)&&u.indexOf(x)===-1&&(u.push(x),d=!0)}p.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(u)}processChildren(e){return this.filter&&(e=Zi.filter(e,t=>{const n=this.filter.filter(t,1),i=DNe(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}function DNe(r){return typeof r=="boolean"?r?1:0:Z$(r)?_N(r.visibility):_N(r)}class INe extends vae{constructor(e,t,n,i,o,s={}){super(e,t,n,i,s),this.user=e,this.dataSource=o,this.identityProvider=s.identityProvider}createModel(e,t,n){return new Q$(e,t,n)}}const z4=new _n("isWindows",Ol,E("isWindows","Whether the operating system is Windows")),kNe="inputFocus";var n0=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Li=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const qf=ar("listService");let EV=class{constructor(e){this._themeService=e,this.disposables=new Nt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new pae(Bf(),"");this.disposables.add(_S(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),gC(e.onDidFocus(()=>this.setLastFocusedList(e)),Hi(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};EV=n0([Li(0,Ho)],EV);const Eae=new _n("listFocus",!0),$4=new _n("listSupportsMultiselect",!0),Lae=Xt.and(Eae,Xt.not(kNe)),ij=new _n("listHasSelectionOrFocus",!1),rj=new _n("listDoubleSelection",!1),oj=new _n("listMultiSelection",!1),j4=new _n("listSelectionNavigation",!1),TNe=new _n("treeElementCanCollapse",!1),NNe=new _n("treeElementHasParent",!1),ANe=new _n("treeElementCanExpand",!1),ONe=new _n("treeElementHasChild",!1),xae="listAutomaticKeyboardNavigation";function q4(r,e){const t=r.createScoped(e.getHTMLElement());return Eae.bindTo(t),t}const sE="workbench.list.multiSelectModifier",LV="workbench.list.openMode",Pf="workbench.list.horizontalScrolling",GM="workbench.list.keyboardNavigation",sj="workbench.list.automaticKeyboardNavigation",CN="workbench.tree.indent",YM="workbench.tree.renderIndentGuides",wm="workbench.list.smoothScrolling",Hv="workbench.list.mouseWheelScrollSensitivity",Uv="workbench.list.fastScrollSensitivity",ZM="workbench.tree.expandMode";function zv(r){return r.getValue(sE)==="alt"}class RNe extends ot{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=zv(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(sE)&&(this.useAltAsMultipleSelectionModifier=zv(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:hae(e)}isSelectionRangeChangeEvent(e){return fae(e)}}function K4(r,e,t){var n;const i=new Nt;return[Object.assign(Object.assign({},r),{keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return t.mightProducePrintableCharacter(s)}},smoothScrolling:!!e.getValue(wm),mouseWheelScrollSensitivity:e.getValue(Hv),fastScrollSensitivity:e.getValue(Uv),multipleSelectionController:(n=r.multipleSelectionController)!==null&&n!==void 0?n:i.add(new RNe(e))}),i]}let xV=class extends t0{constructor(e,t,n,i,o,s,a,l,u,d){const h=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!u.getValue(Pf),[p,_]=K4(o,u,d);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Zp(l.getColorTheme(),H4)),p),{horizontalScrolling:h})),this.disposables.add(_),this.contextKeyService=q4(s,this),this.themeService=l,this.listSupportsMultiSelect=$4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),j4.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=ij.bindTo(this.contextKeyService),this.listDoubleSelection=rj.bindTo(this.contextKeyService),this.listMultiSelection=oj.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=zv(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const S=this.getSelection(),x=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(S.length>0||x.length>0),this.listMultiSelection.set(S.length>1),this.listDoubleSelection.set(S.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const S=this.getSelection(),x=this.getFocus();this.listHasSelectionOrFocus.set(S.length>0||x.length>0)})),this.disposables.add(u.onDidChangeConfiguration(S=>{S.affectsConfiguration(sE)&&(this._useAltAsMultipleSelectionModifier=zv(u));let x={};if(S.affectsConfiguration(Pf)&&this.horizontalScrolling===void 0){const T=!!u.getValue(Pf);x=Object.assign(Object.assign({},x),{horizontalScrolling:T})}if(S.affectsConfiguration(wm)){const T=!!u.getValue(wm);x=Object.assign(Object.assign({},x),{smoothScrolling:T})}if(S.affectsConfiguration(Hv)){const T=u.getValue(Hv);x=Object.assign(Object.assign({},x),{mouseWheelScrollSensitivity:T})}if(S.affectsConfiguration(Uv)){const T=u.getValue(Uv);x=Object.assign(Object.assign({},x),{fastScrollSensitivity:T})}Object.keys(x).length>0&&this.updateOptions(x)})),this.navigator=new Dae(this,Object.assign({configurationService:u},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_S(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};xV=n0([Li(5,Jn),Li(6,qf),Li(7,Ho),Li(8,Jr),Li(9,Ro)],xV);let HZ=class extends XTe{constructor(e,t,n,i,o,s,a,l,u,d){const h=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!u.getValue(Pf),[p,_]=K4(o,u,d);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Zp(l.getColorTheme(),H4)),p),{horizontalScrolling:h})),this.disposables=new Nt,this.disposables.add(_),this.contextKeyService=q4(s,this),this.themeService=l,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=$4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),j4.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=zv(u),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(_S(this,l,o.overrideStyles)),this.disposables.add(u.onDidChangeConfiguration(S=>{S.affectsConfiguration(sE)&&(this._useAltAsMultipleSelectionModifier=zv(u));let x={};if(S.affectsConfiguration(Pf)&&this.horizontalScrolling===void 0){const T=!!u.getValue(Pf);x=Object.assign(Object.assign({},x),{horizontalScrolling:T})}if(S.affectsConfiguration(wm)){const T=!!u.getValue(wm);x=Object.assign(Object.assign({},x),{smoothScrolling:T})}if(S.affectsConfiguration(Hv)){const T=u.getValue(Hv);x=Object.assign(Object.assign({},x),{mouseWheelScrollSensitivity:T})}if(S.affectsConfiguration(Uv)){const T=u.getValue(Uv);x=Object.assign(Object.assign({},x),{fastScrollSensitivity:T})}Object.keys(x).length>0&&this.updateOptions(x)})),this.navigator=new Dae(this,Object.assign({configurationService:u},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_S(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};HZ=n0([Li(5,Jn),Li(6,qf),Li(7,Ho),Li(8,Jr),Li(9,Ro)],HZ);let UZ=class extends U4{constructor(e,t,n,i,o,s,a,l,u,d,h){const p=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!d.getValue(Pf),[_,C]=K4(s,d,h);super(e,t,n,i,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Zp(u.getColorTheme(),H4)),_),{horizontalScrolling:p})),this.disposables.add(C),this.contextKeyService=q4(a,this),this.themeService=u,this.listSupportsMultiSelect=$4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),j4.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=ij.bindTo(this.contextKeyService),this.listDoubleSelection=rj.bindTo(this.contextKeyService),this.listMultiSelection=oj.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=zv(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const x=this.getSelection(),T=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(x.length>0||T.length>0),this.listMultiSelection.set(x.length>1),this.listDoubleSelection.set(x.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const x=this.getSelection(),T=this.getFocus();this.listHasSelectionOrFocus.set(x.length>0||T.length>0)})),this.disposables.add(d.onDidChangeConfiguration(x=>{x.affectsConfiguration(sE)&&(this._useAltAsMultipleSelectionModifier=zv(d));let T={};if(x.affectsConfiguration(Pf)&&this.horizontalScrolling===void 0){const k=!!d.getValue(Pf);T=Object.assign(Object.assign({},T),{horizontalScrolling:k})}if(x.affectsConfiguration(wm)){const k=!!d.getValue(wm);T=Object.assign(Object.assign({},T),{smoothScrolling:k})}if(x.affectsConfiguration(Hv)){const k=d.getValue(Hv);T=Object.assign(Object.assign({},T),{mouseWheelScrollSensitivity:k})}if(x.affectsConfiguration(Uv)){const k=d.getValue(Uv);T=Object.assign(Object.assign({},T),{fastScrollSensitivity:k})}Object.keys(T).length>0&&this.updateOptions(T)})),this.navigator=new MNe(this,Object.assign({configurationService:d},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=_S(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};UZ=n0([Li(6,Jn),Li(7,qf),Li(8,Ho),Li(9,Jr),Li(10,Ro)],UZ);class aj extends ot{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new Fe),this.onDidOpen=this._onDidOpen.event,this._register(Sn.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(LV))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(LV))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,o=!1;this._open(this.getSelectedElement(),n,i,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,o=!0,s=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,s=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}_open(e,t,n,i,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:o})}}class Dae extends aj{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class MNe extends aj{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class PNe extends aj{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function FNe(r,e){let t=!1;return n=>{if(t)return t=!1,!1;const i=e.softDispatch(n,r);return i&&i.enterChord?(t=!0,!1):(t=!1,!0)}}let zZ=class extends ej{constructor(e,t,n,i,o,s,a,l,u,d,h){const{options:p,getAutomaticKeyboardNavigation:_,disposable:C}=N2(t,o,s,u,d,h);super(e,t,n,i,p),this.disposables.add(C),this.internals=new vS(this,o,_,o.overrideStyles,s,a,l,u,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};zZ=n0([Li(5,Jn),Li(6,qf),Li(7,Ho),Li(8,Jr),Li(9,Ro),Li(10,Uc)],zZ);let $Z=class extends yae{constructor(e,t,n,i,o,s,a,l,u,d,h){const{options:p,getAutomaticKeyboardNavigation:_,disposable:C}=N2(t,o,s,u,d,h);super(e,t,n,i,p),this.disposables.add(C),this.internals=new vS(this,o,_,o.overrideStyles,s,a,l,u,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};$Z=n0([Li(5,Jn),Li(6,qf),Li(7,Ho),Li(8,Jr),Li(9,Ro),Li(10,Uc)],$Z);let jZ=class extends INe{constructor(e,t,n,i,o,s,a,l,u,d,h,p){const{options:_,getAutomaticKeyboardNavigation:C,disposable:S}=N2(t,s,a,d,h,p);super(e,t,n,i,o,_),this.disposables.add(S),this.internals=new vS(this,s,C,s.overrideStyles,a,l,u,d,p),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};jZ=n0([Li(6,Jn),Li(7,qf),Li(8,Ho),Li(9,Jr),Li(10,Ro),Li(11,Uc)],jZ);let DV=class extends Sae{constructor(e,t,n,i,o,s,a,l,u,d,h,p){const{options:_,getAutomaticKeyboardNavigation:C,disposable:S}=N2(t,s,a,d,h,p);super(e,t,n,i,o,_),this.disposables.add(S),this.internals=new vS(this,s,C,s.overrideStyles,a,l,u,d,p),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};DV=n0([Li(6,Jn),Li(7,qf),Li(8,Ho),Li(9,Jr),Li(10,Ro),Li(11,Uc)],DV);let qZ=class extends xNe{constructor(e,t,n,i,o,s,a,l,u,d,h,p,_){const{options:C,getAutomaticKeyboardNavigation:S,disposable:x}=N2(t,a,l,h,p,_);super(e,t,n,i,o,s,C),this.disposables.add(x),this.internals=new vS(this,a,S,a.overrideStyles,l,u,d,h,_),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};qZ=n0([Li(7,Jn),Li(8,qf),Li(9,Ho),Li(10,Jr),Li(11,Ro),Li(12,Uc)],qZ);function N2(r,e,t,n,i,o){var s;const a=()=>{let C=!!t.getContextKeyValue(xae);return C&&(C=!!n.getValue(sj)),C},l=o.isScreenReaderOptimized(),u=e.simpleKeyboardNavigation||l?"simple":n.getValue(GM),d=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(Pf),[h,p]=K4(e,n,i),_=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:p,options:Object.assign(Object.assign({keyboardSupport:!1},h),{indent:typeof n.getValue(CN)=="number"?n.getValue(CN):void 0,renderIndentGuides:n.getValue(YM),smoothScrolling:!!n.getValue(wm),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:u==="simple",filterOnType:u==="filter",horizontalScrolling:d,keyboardNavigationEventFilter:FNe(r,i),additionalScrollHeight:_,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(s=e.expandOnlyOnTwistieClick)!==null&&s!==void 0?s:n.getValue(ZM)==="doubleClick"})}}let vS=class{constructor(e,t,n,i,o,s,a,l,u){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=q4(o,e),this.listSupportsMultiSelect=$4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),j4.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=ij.bindTo(this.contextKeyService),this.hasDoubleSelection=rj.bindTo(this.contextKeyService),this.hasMultiSelection=oj.bindTo(this.contextKeyService),this.treeElementCanCollapse=TNe.bindTo(this.contextKeyService),this.treeElementHasParent=NNe.bindTo(this.contextKeyService),this.treeElementCanExpand=ANe.bindTo(this.contextKeyService),this.treeElementHasChild=ONe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=zv(l);const h=new Set;h.add(xae);const p=()=>{const S=u.isScreenReaderOptimized()?"simple":l.getValue(GM);e.updateOptions({simpleKeyboardNavigation:S==="simple",filterOnType:S==="filter"})};this.updateStyleOverrides(i);const _=()=>{const C=e.getFocus()[0];if(!C)return;const S=e.getNode(C);this.treeElementCanCollapse.set(S.collapsible&&!S.collapsed),this.treeElementHasParent.set(!!e.getParentElement(C)),this.treeElementCanExpand.set(S.collapsible&&S.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(C))};this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{const C=e.getSelection(),S=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(C.length>0||S.length>0),this.hasMultiSelection.set(C.length>1),this.hasDoubleSelection.set(C.length===2)})}),e.onDidChangeFocus(()=>{const C=e.getSelection(),S=e.getFocus();this.hasSelectionOrFocus.set(C.length>0||S.length>0),_()}),e.onDidChangeCollapseState(_),e.onDidChangeModel(_),l.onDidChangeConfiguration(C=>{let S={};if(C.affectsConfiguration(sE)&&(this._useAltAsMultipleSelectionModifier=zv(l)),C.affectsConfiguration(CN)){const x=l.getValue(CN);S=Object.assign(Object.assign({},S),{indent:x})}if(C.affectsConfiguration(YM)){const x=l.getValue(YM);S=Object.assign(Object.assign({},S),{renderIndentGuides:x})}if(C.affectsConfiguration(wm)){const x=!!l.getValue(wm);S=Object.assign(Object.assign({},S),{smoothScrolling:x})}if(C.affectsConfiguration(GM)&&p(),C.affectsConfiguration(sj)&&(S=Object.assign(Object.assign({},S),{automaticKeyboardNavigation:n()})),C.affectsConfiguration(Pf)&&t.horizontalScrolling===void 0){const x=!!l.getValue(Pf);S=Object.assign(Object.assign({},S),{horizontalScrolling:x})}if(C.affectsConfiguration(ZM)&&t.expandOnlyOnTwistieClick===void 0&&(S=Object.assign(Object.assign({},S),{expandOnlyOnTwistieClick:l.getValue(ZM)==="doubleClick"})),C.affectsConfiguration(Hv)){const x=l.getValue(Hv);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:x})}if(C.affectsConfiguration(Uv)){const x=l.getValue(Uv);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:x})}Object.keys(S).length>0&&e.updateOptions(S)}),this.contextKeyService.onDidChangeContext(C=>{C.affectsSome(h)&&e.updateOptions({automaticKeyboardNavigation:n()})}),u.onDidChangeScreenReaderOptimized(()=>p())),this.navigator=new PNe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){nr(this.styler),this.styler=e?_S(this.tree,this.themeService,e):ot.None}dispose(){this.disposables=nr(this.disposables),nr(this.styler),this.styler=void 0}};vS=n0([Li(4,Jn),Li(5,qf),Li(6,Ho),Li(7,Jr),Li(8,Uc)],vS);const BNe=vs.as(JS.Configuration);BNe.registerConfiguration({id:"workbench",order:7,title:E("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[sE]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[E("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),E("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:E({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[LV]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:E({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Pf]:{type:"boolean",default:!1,description:E("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[CN]:{type:"number",default:8,minimum:0,maximum:40,description:E("tree indent setting","Controls tree indentation in pixels.")},[YM]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:E("render tree indent guides","Controls whether the tree should render indent guides.")},[wm]:{type:"boolean",default:!1,description:E("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Hv]:{type:"number",default:1,description:E("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Uv]:{type:"number",default:5,description:E("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[GM]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[E("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),E("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),E("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:E("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[sj]:{type:"boolean",default:!0,markdownDescription:E("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[ZM]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:E("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Ko;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(Ko||(Ko={}));(function(r){function e(s,a){return a-s}r.compare=e;const t=Object.create(null);t[r.Error]=E("sev.error","Error"),t[r.Warning]=E("sev.warning","Warning"),t[r.Info]=E("sev.info","Info");function n(s){return t[s]||""}r.toString=n;function i(s){switch(s){case os.Error:return r.Error;case os.Warning:return r.Warning;case os.Info:return r.Info;case os.Ignore:return r.Hint}}r.fromSeverity=i;function o(s){switch(s){case r.Error:return os.Error;case r.Warning:return os.Warning;case r.Info:return os.Info;case r.Hint:return os.Ignore}}r.toSeverity=o})(Ko||(Ko={}));var XM;(function(r){const e="";function t(i){return n(i,!0)}r.makeKey=t;function n(i,o){let s=[e];return i.source?s.push(i.source.replace("","\\")):s.push(e),i.code?typeof i.code=="string"?s.push(i.code.replace("","\\")):s.push(i.code.value.replace("","\\")):s.push(e),i.severity!==void 0&&i.severity!==null?s.push(Ko.toString(i.severity)):s.push(e),i.message&&o?s.push(i.message.replace("","\\")):s.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(e),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(e),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(e),s.push(e),s.join("")}r.makeKeyOptionalMessage=n})(XM||(XM={}));const A2=ar("markerService");class WNe{constructor(){this._byResource=new Tu,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let o=this._byOwner.get(t);o||(o=new Tu,this._byOwner.set(t,o)),o.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,i=!1,o=this._byResource.get(e);o&&(n=o.delete(t));let s=this._byOwner.get(t);if(s&&(i=s.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,o;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Zi.empty():qn.isUri(e)?(o=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:Zi.empty():Zi.map(Zi.concat(...this._byOwner.values()),s=>s[1])}}class VNe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Tu,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Si.inMemory||e.scheme===Si.walkThrough||e.scheme===Si.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Ko.Error?t.errors+=1:n===Ko.Warning?t.warnings+=1:n===Ko.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class pw{constructor(){this._onMarkerChanged=new Rve({delay:0,merge:pw._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new WNe,this._stats=new VNe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(Dre(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const o of n){const s=pw._toMarker(e,t,o);s&&i.push(s)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:o,message:s,source:a,startLineNumber:l,startColumn:u,endLineNumber:d,endColumn:h,relatedInformation:p,tags:_}=n;if(s)return l=l>0?l:1,u=u>0?u:1,d=d>=l?d:l,h=h>0?h:u,{resource:t,owner:e,code:i,severity:o,message:s,source:a,startLineNumber:l,startColumn:u,endLineNumber:d,endColumn:h,relatedInformation:p,tags:_}}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:o}=e;if((!o||o<0)&&(o=-1),t&&n){const s=this._data.get(n,t);if(s){const a=[];for(const l of s)if(pw._accept(l,i)){const u=a.push(l);if(o>0&&u===o)break}return a}else return[]}else if(!t&&!n){const s=[];for(let a of this._data.values())for(let l of a)if(pw._accept(l,i)){const u=s.push(l);if(o>0&&u===o)return s}return s}else{const s=this._data.values(n??t),a=[];for(const l of s)for(const u of l)if(pw._accept(u,i)){const d=a.push(u);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Tu;for(let n of e)for(let i of n)t.set(i,!0);return Array.from(t.keys())}}var Wk=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},wL;(function(r){r[r.None=0]="None",r[r.Initialized=1]="Initialized",r[r.Closed=2]="Closed"})(wL||(wL={}));class yN extends ot{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Fe),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=wL.None,this.cache=new Map,this.flushDelayer=new Gve(yN.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,o)=>this.accept(o,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===wL.Closed)return;let n=!1;xh(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return xh(n)?t:n}getBoolean(e,t){const n=this.get(e);return xh(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return xh(n)?t:parseInt(n,10)}set(e,t){return Wk(this,void 0,void 0,function*(){if(this.state===wL.Closed)return;if(xh(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return Wk(this,void 0,void 0,function*(){if(!(this.state===wL.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return Wk(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return Wk(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}yN.DEFAULT_FLUSH_DELAY=100;class KZ{constructor(){this.onDidChangeItemsExternal=Sn.None,this.items=new Map}updateItems(e){return Wk(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const KA="__$__targetStorageMarker",i0=ar("storageService");var QM;(function(r){r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN"})(QM||(QM={}));class G4 extends ot{constructor(e={flushInterval:G4.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new TR),this._onDidChangeTarget=this._register(new TR),this._onWillSaveState=this._register(new Fe),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===KA?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(xh(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,i),(o=this.getStorage(n))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,o;const s=this.getKeyTargets(t);typeof n=="number"?s[e]!==n&&(s[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(KA,JSON.stringify(s))):typeof s[e]=="number"&&(delete s[e],(o=this.getStorage(t))===null||o===void 0||o.set(KA,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(KA,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}G4.DEFAULT_FLUSH_INTERVAL=60*1e3;class HNe extends G4{constructor(){super(),this.globalStorage=this._register(new yN(new KZ)),this.workspaceStorage=this._register(new yN(new KZ)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var Iae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eR=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let IV=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new kV(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};IV=Iae([eR(0,Go)],IV);let kV=class sL{constructor(e,t,n,i,o){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=i,this._menuService=o,this._disposables=new Nt,this._menuGroups=[],this._contextKeys=new Set,this._build();const s=new Xr(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(s),this._disposables.add(Au.onDidChangeMenu(u=>{u.has(e)&&s.schedule()}));const a=this._disposables.add(new Nt),l=()=>{const u=new Xr(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(u),a.add(i.onDidChangeContext(d=>{d.affectsSome(this._contextKeys)&&u.schedule()}))};this._onDidChange=new Fe({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Au.getMenuItems(this._id);let t;e.sort(sL._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(sL._fillInKbExprKeys(e.when,this._contextKeys),Rk(e)){if(e.command.precondition&&sL._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;sL._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Au.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[i,o]=n,s=[];for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Rk(a)?new TC(a.command,a.alt,e,this._contextKeyService,this._commandService):new Tz(a,this._menuService,this._contextKeyService,e);s.push(l)}s.length>0&&t.push([i,s])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;let a=n.localeCompare(i);if(a!==0)return a}let o=e.order||0,s=t.order||0;return o<s?-1:o>s?1:sL._compareTitles(Rk(e)?e.command.title:e.title,Rk(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}};kV=Iae([eR(2,Go),eR(3,Jn),eR(4,XS)],kV);var UNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},GZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class zNe extends ot{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Hi(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let o=0;o<i.length;o++)this._markersData.set(i[o],e[o]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}let TV=class extends ot{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Fe),this._markerDecorations=new Tu,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new zNe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Si.inMemory||e.uri.scheme===Si.internal||e.uri.scheme===Si.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=le.lift(t);return t.severity===Ko.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,i,o,s;switch(e.severity){case Ko.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Ko.Warning:t="squiggly-warning",n=Vo(kEe),i=20,s={color:Vo(QCe),position:Ld.Inline};break;case Ko.Info:t="squiggly-info",n=Vo(TEe),i=10;break;case Ko.Error:default:t="squiggly-error",n=Vo(IEe),i=30,s={color:Vo(XCe),position:Ld.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:kd.Right},minimap:s,zIndex:i,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};TV=UNe([GZ(0,ua),GZ(1,A2)],TV);var $Ne=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},YZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let NV=class extends ot{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Fe,this._accessibilityModeEnabledContext=E2.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};NV=$Ne([YZ(0,Jn),YZ(1,Jr)],NV);var GA=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class jNe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return GA(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const n=document.activeElement,i=document.body.appendChild(Lt("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return GA(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return GA(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return GA(this,void 0,void 0,function*(){this.findText=e})}}var qNe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZZ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},YA=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function ZA(r){return r.scheme===Si.file?r.fsPath:r.path}let kae=0;class XA{constructor(e,t,n,i,o,s,a){this.id=++kae,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class XZ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class QZ{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);let n=[];return e.length>0&&n.push(E({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(E({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class KNe{constructor(e,t,n,i,o,s,a){this.id=++kae,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new QZ),this.removedResources.has(t)||this.removedResources.set(t,new XZ(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new QZ),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new XZ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Tae{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new Hoe(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const u=this._past[a];n&&(i>=t||u.id!==e.elements[i])&&(n=!1,o=0),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,s=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),s!==-1&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class eB{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Nae=new Tae("","");Nae.locked=!0;let JM=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=fx.None,n=gv.None){if(e.type===0){const i=ZA(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new XA(e,i,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,o=[],s=[];for(const a of e.resources){const l=ZA(a),u=this.getUriComparisonKey(a);i.has(u)||(i.add(u),o.push(l),s.push(u))}o.length===1?this._pushElement(new XA(e,o[0],s[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new KNe(e,o,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],o=e.strResources[t];let s;this._editStacks.has(o)?s=this._editStacks.get(o):(s=new Tae(i,o),this._editStacks.set(o,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const s=ZA(o.resource),a=this.getUriComparisonKey(o.resource),l=new XA(o,s,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const s=ZA(o.resource),a=this.getUriComparisonKey(o.resource),l=new XA(o,s,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new Hoe(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.sourceId===e&&(!t||s.sourceOrder>t.sourceOrder)&&(t=s,n=i)}return[t,n]}canUndo(e){if(e instanceof gv){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){ti(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,o){const s=this._acquireLocks(n);let a;try{a=t()}catch(l){return s(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(s(),i.dispose(),o()),l=>(s(),i.dispose(),this._onError(l,e))):(s(),i.dispose(),o())}_invokeWorkspacePrepare(e){return YA(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return ot.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ot.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ot.None);const n=e.actual.prepareUndoRedo();return n?iz(n)?t(n):n.then(i=>t(i)):t(ot.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Nae);return new eB(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new QA(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new QA}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,E({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,E({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,E({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndUndo(e,t,null,E({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,E({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,i,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return YA(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(os.Info,E("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[E({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),E("nok","Undo this File"),E("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const s=this._checkWorkspaceUndo(e,t,n,!0);if(s)return o.dispose(),s.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,o,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=E({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new eB([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.groupId===e&&(!t||s.groupOrder>t.groupOrder)&&(t=s,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof gv){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),o=i.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,n)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,n):this._resourceUndo(i,o,n)}finally{}}_confirmAndContinueUndo(e,t,n){return YA(this,void 0,void 0,function*(){if((yield this._dialogService.show(os.Info,E("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[E("confirmDifferentSource.yes","Yes"),E("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.sourceId===e&&(!t||s.sourceOrder<t.sourceOrder)&&(t=s,n=i)}return[t,n]}canRedo(e){if(e instanceof gv){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new QA(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new QA}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,E({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,E({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,E({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndRedo(e,t,null,E({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,E({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return YA(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(s){return this._onError(s,t)}const o=this._checkWorkspaceRedo(e,t,n,!0);if(o)return i.dispose(),o.returnValue;for(const s of n.editStacks)s.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=E({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new eB([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.groupId===e&&(!t||s.groupOrder<t.groupOrder)&&(t=s,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof gv){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,o]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&o)return this._redo(o)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};JM=qNe([ZZ(0,D2),ZZ(1,As)],JM);class QA{constructor(e){this.returnValue=e}}ZC(C2,JM);const GNe=new RegExp(`(\\\\)?\\$\\((${Nc.iconNameExpression}(?:${Nc.iconModifierExpression})?)\\)`,"g");function qw(r){const e=new Array;let t,n=0,i=0;for(;(t=GNe.exec(r))!==null;){i=t.index||0,e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;const[,o,s]=t;e.push(o?`$(${s})`:YNe({id:s}))}return n<r.length&&e.push(r.substring(n)),e}function YNe(r){const e=Lt("span");return e.classList.add(...Nc.asClassNameArray(r)),e}const ZNe={buttonBackground:je.fromHex("#0E639C"),buttonHoverBackground:je.fromHex("#006BB3"),buttonForeground:je.white};class JZ extends ot{constructor(e,t){super(),this._onDidClick=this._register(new Fe),this.options=t||Object.create(null),e0(this.options,ZNe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Or.addTarget(this._element)),[In.CLICK,co.Tap].forEach(n=>{this._register(kt(this._element,n,i=>{if(!this.enabled){xr.stop(i);return}this._onDidClick.fire(i)}))}),this._register(kt(this._element,In.KEY_DOWN,n=>{const i=new Oo(n);let o=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),o=!0):i.equals(9)&&(this._element.blur(),o=!0),o&&xr.stop(i,!0)})),this._register(kt(this._element,In.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(kt(this._element,In.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(ox(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?IC(this._element,...qw(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const XNe={badgeBackground:je.fromHex("#4D4D4D"),badgeForeground:je.fromHex("#FFFFFF")};class AV{constructor(e,t){this.count=0,this.options=t||Object.create(null),e0(this.options,XNe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=ft(e,Lt(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Nf(this.countFormat,this.count),this.element.title=Nf(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const eX="done",tX="active",tB="infinite",nX="discrete",QNe={progressBarBackground:je.fromHex("#0E70C0")};class JNe extends ot{constructor(e,t){super(),this.options=t||Object.create(null),e0(this.options,QNe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new Xr(()=>Lh(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(tX,tB,nX),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(eX),this.element.classList.contains(tB)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(nX,eX),this.element.classList.add(tX,tB),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class lj{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Aae=new lj("id#");const nB={},e2e=new lj("quick-input-button-icon-");function OV(r){if(!r)return;let e;const t=r.dark.toString();return nB[t]?e=nB[t]:(e=e2e.nextId(),I9(`.${e}`,`background-image: ${nS(r.light||r.dark)}`),I9(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${nS(r.dark)}`),nB[t]=e),e}const t2e={ctrlCmd:!1,alt:!1};var wN;(function(r){r[r.Blur=1]="Blur",r[r.Gesture=2]="Gesture",r[r.Other=3]="Other"})(wN||(wN={}));var qp;(function(r){r[r.NONE=0]="NONE",r[r.FIRST=1]="FIRST",r[r.SECOND=2]="SECOND",r[r.LAST=3]="LAST"})(qp||(qp={}));function n2e(r,e={}){const t=uj(e);return t.textContent=r,t}function Oae(r,e={}){const t=uj(e);return Rae(t,r2e(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function uj(r){const e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}class i2e{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Rae(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");o.href="#",t.disposables.add(za(o,"click",s=>{t.callback(String(e.index),s)})),i=o}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(o=>{Rae(i,o,t,n)})}function r2e(r,e){const t={type:1,children:[]};let n=0,i=t;const o=[],s=new i2e(r);for(;!s.eos();){let a=s.next();const l=a==="\\"&&RV(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&o2e(a,e)&&a===s.peek()){s.advance(),i.type===2&&(i=o.pop());const u=RV(a,e);if(i.type===u||i.type===5&&u===6)i=o.pop();else{const d={type:u,children:[]};u===5&&(d.index=n,n++),i.children.push(d),o.push(i),i=d}}else if(a===`
`)i.type===2&&(i=o.pop()),i.children.push({type:8});else if(i.type!==2){const u={type:2,content:a};i.children.push(u),o.push(i),i=u}else i.content+=a}return i.type===2&&(i=o.pop()),t}function o2e(r,e){return RV(r,e)!==0}function RV(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class s2e{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class a2e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new s2e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const bk=Lt,l2e={inputBackground:je.fromHex("#3C3C3C"),inputForeground:je.fromHex("#CCCCCC"),inputValidationInfoBorder:je.fromHex("#55AAFF"),inputValidationInfoBackground:je.fromHex("#063B49"),inputValidationWarningBorder:je.fromHex("#B89500"),inputValidationWarningBackground:je.fromHex("#352A05"),inputValidationErrorBorder:je.fromHex("#BE1100"),inputValidationErrorBackground:je.fromHex("#5A1D1D")};class Mae extends Ph{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Fe),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Fe),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),e0(this.options,l2e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ft(e,bk(".monaco-inputbox.idle"));let o=this.options.flexibleHeight?"textarea":"input",s=ft(this.element,bk(".ibwrapper"));if(this.input=ft(s,bk(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ft(s,bk("div.mirror")),this.mirror.innerText="",this.scrollableElement=new p$(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ft(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(u=>this.input.scrollTop=u.scrollTop));const a=this._register(new Hr(document,"selectionchange")),l=Sn.filter(a.event,()=>{const u=document.getSelection();return(u==null?void 0:u.anchorNode)===s});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Wv(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:D9(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Bg(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Bg(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=ft(i,bk(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?Oae(this.message.content,o):n2e(this.message.content,o);s.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background?a.background.toString():"",s.style.color=a.foreground?a.foreground.toString():"",s.style.border=a.border?`1px solid ${a.border}`:"",ft(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=E("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=E("alertWarningMessage","Warning: {0}",this.message.content):n=E("alertInfoMessage","Info: {0}",this.message.content),Tl(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=D9(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,o=t.value;n!==null&&i!==null&&(this.value=o.substr(0,n)+e+o.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class Pae extends Mae{constructor(e,t,n){const i=E({key:"history.inputbox.hint",comment:["Text will be prefixed with  plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or  ${i}`,s=` ( ${i})`;super(e,t,n),this.history=new a2e(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?o:s,u=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=u:this.setPlaceHolder(u)}};this.observer=new MutationObserver((l,u)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=u=>{if(this.placeholder.endsWith(u)){const d=this.placeholder.slice(0,this.placeholder.length-u.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(s)||l(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,PR(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,PR(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const u2e=Lt;class c2e extends ot{constructor(e){super(),this.parent=e,this.onKeyDown=t=>kt(this.inputBox.inputElement,In.KEY_DOWN,n=>{t(new Oo(n))}),this.onMouseDown=t=>kt(this.inputBox.inputElement,In.MOUSE_DOWN,n=>{t(new Tf(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=ft(this.parent,u2e(".quick-input-box")),this.inputBox=this._register(new Mae(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===os.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===os.Info?1:e===os.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===os.Info?1:e===os.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class bS{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=ft(e,Lt("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=bS.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&np(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const s=this.text.substring(t,n.start);e.push(Lt("span",void 0,...this.supportIcons?qw(s):[s])),t=n.end}const i=this.text.substring(n.start,n.end),o=Lt("span.highlight",void 0,...this.supportIcons?qw(i):[i]);n.extraClasses&&o.classList.add(...n.extraClasses),e.push(o),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(Lt("span",void 0,...this.supportIcons?qw(n):[n]))}IC(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(o,s)=>{i=o===`\r
`?-1:0,s+=n;for(const a of t)a.end<=s||(a.start>=s&&(a.start+=i),a.end>=s&&(a.end+=i));return n+=i,""})}}class Zb{constructor(e="",t=!1){var n,i,o;if(this.value=e,typeof this.value!="string")throw hm("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=d2e(this.supportThemeIcons?dTe(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function SN(r){return Fae(r)?!r.value:Array.isArray(r)?r.every(SN):!0}function Fae(r){return r instanceof Zb?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function d2e(r){return r.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function iB(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function h2e(r){const e=[],t=r.split("|").map(i=>i.trim());r=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),u=isFinite(parseInt(s));l&&e.push(`width="${a}"`),u&&e.push(`height="${s}"`)}return{href:r,dimensions:e}}var MV=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function f2e(r,e){Wf(e)?r.title=e:e!=null&&e.markdownNotSupportedFallback?r.title=e.markdownNotSupportedFallback:r.removeAttribute("title")}class g2e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return MV(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let i;if(e===void 0||Wf(e)||e instanceof HTMLElement)i=e;else if(!VR(e.markdown))i=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(E("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Ou;const o=this._cancellationTokenSource.token;if(i=yield e.markdown(o),this.isDisposed||o.isCancellationRequested)return}this.show(i,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const i={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(i,t)}n==null||n.dispose()}hasContent(e){return e?Fae(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function p2e(r,e,t){let n,i;const o=(d,h)=>{var p;d&&(i==null||i.dispose(),i=void 0),h&&(n==null||n.dispose(),n=void 0),(p=r.onDidHideHover)===null||p===void 0||p.call(r)},s=(d,h,p)=>new uc(()=>MV(this,void 0,void 0,function*(){(!i||i.isDisposed)&&(i=new g2e(r,p||e,d>0),yield i.update(t,h))}),d),a=()=>{if(n)return;const d=new Nt,h=C=>o(!1,C.fromElement===e);d.add(kt(e,In.MOUSE_LEAVE,h,!0));const p=()=>o(!0,!0);d.add(kt(e,In.MOUSE_DOWN,p,!0));const _={targetElements:[e],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){const C=S=>_.x=S.x+10;d.add(kt(e,In.MOUSE_MOVE,C,!0))}d.add(s(r.delay,!1,_)),n=d},l=kt(e,In.MOUSE_OVER,a,!0);return{show:d=>{o(!1,!0),s(0,d)},hide:()=>{o(!0,!0)},update:d=>MV(this,void 0,void 0,function*(){t=d,yield i==null?void 0:i.update(t)}),dispose:()=>{l.dispose(),o(!0,!0)}}}class rB{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class eP extends ot{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new rB(ft(e,Lt(".monaco-icon-label")))),this.labelContainer=ft(this.domNode.element,Lt(".monaco-icon-label-container"));const n=ft(this.labelContainer,Lt("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new rB(ft(this.labelContainer,Lt("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new v2e(n,!!t.supportIcons):this.nameNode=new m2e(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new bS(ft(this.descriptionContainer.element,Lt("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new rB(ft(this.descriptionContainer.element,Lt("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof bS?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)f2e(e,t);else{const i=p2e(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class m2e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&np(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ft(this.container,Lt("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;ft(this.container,Lt("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&ft(this.container,Lt("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function _2e(r,e,t){if(!t)return;let n=0;return r.map(i=>{const o={start:n,end:n+i.length},s=t.map(a=>Jl.intersect(o,a)).filter(a=>!Jl.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=o.end+e.length,s})}class v2e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&np(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new bS(ft(this.container,Lt("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",i=_2e(e,n,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const s=e[o],a=i?i[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,u=Lt("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new bS(ft(this.container,u),{supportIcons:this.supportIcons}).set(s,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&ft(u,Lt("span.label-separator",void 0,n))}}}}const JA=Lt;class cj{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=ft(e,JA(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&cj.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(ft(this.domNode,JA("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){ya(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=A$.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!(n!=null&&n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!(n!=null&&n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,!!(n!=null&&n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!(n!=null&&n.metaKey),i.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,i){ft(e,this.createKeyElement(t,n?".highlight":"")),i&&ft(e,JA("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){ft(e,this.createKeyElement(E("unbound","Unbound")))}createKeyElement(e,t=""){const n=JA("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&np(e.firstPart,t.firstPart)&&np(e.chordPart,t.chordPart)}}const iX=new kL(()=>{const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});function b2e(r,e,t=!1){const n=r||"",i=e||"",o=iX.value.collator.compare(n,i);return iX.value.collatorIsNumeric&&o===0&&n!==i?n<i?-1:1:o}function C2e(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),o=y2e(r,e,t);if(o)return o;const s=n.endsWith(t),a=i.endsWith(t);if(s!==a)return s?-1:1;const l=b2e(n,i);return l!==0?l:n.localeCompare(i)}function y2e(r,e,t){const n=r.toLowerCase(),i=e.toLowerCase(),o=n.startsWith(t),s=i.startsWith(t);if(o!==s)return o?-1:1;if(o&&s){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}var Bae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},w2e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const ev=Lt;class S2e{constructor(e){this.hidden=!1,this._onChecked=new Fe,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class O2{get templateId(){return O2.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=ft(e,ev(".quick-input-list-entry"));const n=ft(t.entry,ev("label.quick-input-list-label"));t.toDisposeTemplate.push(za(n,In.CLICK,u=>{t.checkbox.offsetParent||u.preventDefault()})),t.checkbox=ft(n,ev("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(za(t.checkbox,In.CHANGE,u=>{t.element.checked=t.checkbox.checked}));const i=ft(n,ev(".quick-input-list-rows")),o=ft(i,ev(".quick-input-list-row")),s=ft(i,ev(".quick-input-list-row"));t.label=new eP(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=ft(o,ev(".quick-input-list-entry-keybinding"));t.keybinding=new cj(a,xf);const l=ft(s,ev(".quick-input-list-label-meta"));return t.detail=new eP(l,{supportHighlights:!0,supportIcons:!0}),t.separator=ft(t.entry,ev(".quick-input-list-separator")),t.actionBar=new Wv(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=nr(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(u=>n.checkbox.checked=u));const{labelHighlights:i,descriptionHighlights:o,detailHighlights:s}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:s,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((u,d)=>{let h=u.iconClass||(u.iconPath?OV(u.iconPath):void 0);u.alwaysVisible&&(h=h?`${h} always-visible`:"always-visible");const p=new Of(`id-${d}`,"",h,!0,()=>w2e(this,void 0,void 0,function*(){e.fireButtonTriggered({button:u,item:e.item})}));return p.tooltip=u.tooltip||"",p}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=nr(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=nr(e.toDisposeElement),e.toDisposeTemplate=nr(e.toDisposeTemplate)}}O2.ID="listelement";class E2e{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return O2.ID}}var ks;(function(r){r[r.First=1]="First",r[r.Second=2]="Second",r[r.Last=3]="Last",r[r.Next=4]="Next",r[r.Previous=5]="Previous",r[r.NextPage=6]="NextPage",r[r.PreviousPage=7]="PreviousPage"})(ks||(ks={}));class dj{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Fe,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Fe,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Fe,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Fe,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Fe,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Fe,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Fe,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=ft(this.parent,ev(".quick-input-list"));const i=new E2e,o=new x2e;this.list=n.createList("QuickInput",this.container,i,[new O2],{identityProvider:{getId:s=>s.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(s=>{const a=new Oo(s);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(ji?s.metaKey:s.ctrlKey)&&this.list.setFocus(rc(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const u=this.list.getFocus();u.length===1&&u[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(s=>{s.browserEvent.button!==2&&s.browserEvent.preventDefault()})),this.disposables.push(kt(this.container,In.CLICK,s=>{(s.x||s.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(s=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(s=>{typeof s.index=="number"&&(s.browserEvent.preventDefault(),this.list.setSelection([s.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Sn.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Sn.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=nr(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,i,o)=>{var s,a,l;if(i.type!=="separator"){const u=o&&e[o-1],d=i.label&&i.label.replace(/\r?\n/g," "),h=i.meta&&i.meta.replace(/\r?\n/g," "),p=i.description&&i.description.replace(/\r?\n/g," "),_=i.detail&&i.detail.replace(/\r?\n/g," "),C=i.ariaLabel||[d,p,_].map(S=>M0e(S)).filter(S=>!!S).join(", ");n.push(new S2e({index:o,item:i,saneLabel:d,saneMeta:h,saneAriaLabel:C,saneDescription:p,saneDetail:_,labelHighlights:(s=i.highlights)===null||s===void 0?void 0:s.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:u&&u.type==="separator"?u:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,o)=>(n.set(i.item,o),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===ks.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=ks.First),e===ks.Previous&&this.list.getFocus()[0]===0&&(e=ks.Last),e===ks.Second&&this.list.length<2&&(e=ks.First),e){case ks.First:this.list.focusFirst();break;case ks.Second:this.list.focusNth(1);break;case ks.Last:this.list.focusLast();break;case ks.Next:this.list.focusNext();break;case ks.Previous:this.list.focusPrevious();break;case ks.NextPage:this.list.focusNextPage();break;case ks.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const i=n.index&&this.inputElements[n.index-1];n.separator=i&&i.type==="separator"?i:void 0});else{let n;this.elements.forEach(i=>{const o=this.matchOnLabel?Sd(qA(e,jA(i.saneLabel))):void 0,s=this.matchOnDescription?Sd(qA(e,jA(i.saneDescription||""))):void 0,a=this.matchOnDetail?Sd(qA(e,jA(i.saneDetail||""))):void 0,l=this.matchOnMeta?Sd(qA(e,jA(i.saneMeta||""))):void 0;if(o||s||a||l?(i.labelHighlights=o,i.descriptionHighlights=s,i.detailHighlights=a,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item.alwaysShow),i.separator=void 0,!this.sortByLabel){const u=i.index&&this.inputElements[i.index-1];n=u&&u.type==="separator"?u:n,n&&!i.hidden&&(i.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((i,o)=>L2e(i,o,n))}return this.elementsToIndexes=t.reduce((n,i,o)=>(n.set(i.item,o),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=nr(this.elementDisposables),this.disposables=nr(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}Bae([ca],dj.prototype,"onDidChangeFocus",null);Bae([ca],dj.prototype,"onDidChangeSelection",null);function L2e(r,e,t){const n=r.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:C2e(r.saneLabel,e.saneLabel,t)}class x2e{getWidgetAriaLabel(){return E("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var rX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const yh=Lt,PV={iconClass:Ae.quickInputBack.classNames,tooltip:E("quickInput.back","Back"),handle:-1};class Y4 extends ot{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=Y4.noPromptMessage,this._severity=os.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Fe),this.onDidHideEmitter=this._register(new Fe),this.onDisposeEmitter=this._register(new Fe),this.visibleDisposables=this._register(new Nt),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Av;this._ignoreFocusOut=e&&!Av,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=wN.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new uc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(s=>s===PV);this.ui.leftActionBar.push(i.map((s,a)=>{const l=new Of(`id-${a}`,"",s.iconClass||OV(s.iconPath),!0,()=>rX(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter(s=>s!==PV);this.ui.rightActionBar.push(o.map((s,a)=>{const l=new Of(`id-${a}`,"",s.iconClass||OV(s.iconPath),!0,()=>rX(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,IC(this.ui.message,...qw(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?E("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==os.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}Y4.noPromptMessage=E("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class EN extends Y4{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Fe),this.onWillAcceptEmitter=this._register(new Fe),this.onDidAcceptEmitter=this._register(new Fe),this.onDidCustomEmitter=this._register(new Fe),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?qp.NONE:qp.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Fe),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Fe),this.onDidTriggerItemButtonEmitter=this._register(new Fe),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?t2e:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(ks.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(ks.Next),this.canSelectMany&&this.ui.list.domFocus(),xr.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(ks.Previous):this.ui.list.focus(ks.Last),this.canSelectMany&&this.ui.list.domFocus(),xr.stop(e,!0);break;case 12:this.ui.list.focus(ks.NextPage),this.canSelectMany&&this.ui.list.domFocus(),xr.stop(e,!0);break;case 11:this.ui.list.focus(ks.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),xr.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ks.First),xr.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ks.Last),xr.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Rf(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Rf(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Rf(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return kt(this.ui.container,In.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Oo(e),n=t.keyCode;this._quickNavigate.keybindings.some(s=>{const[a,l]=s.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const i=this.ariaLabel||this.placeholder||EN.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case qp.NONE:this._itemActivation=qp.FIRST;break;case qp.SECOND:this.ui.list.focus(ks.Second),this._itemActivation=qp.FIRST;break;case qp.LAST:this.ui.list.focus(ks.Last),this._itemActivation=qp.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(ks.First)),this.keepScrollPosition&&(this.scrollTop=e)}}EN.DEFAULT_ARIA_LABEL=E("quickInputBox.ariaLabel","Type to narrow down results.");class Z4 extends ot{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Fe),this.onDidCustomEmitter=this._register(new Fe),this.onDidTriggerButtonEmitter=this._register(new Fe),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Fe),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Fe),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(kt(window,In.KEY_DOWN,e,!0)),this._register(kt(window,In.KEY_UP,e,!0)),this._register(kt(window,In.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=ft(this.parentElement,yh(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Bf(e),n=ft(e,yh(".quick-input-titlebar")),i=this._register(new Wv(n));i.domNode.classList.add("quick-input-left-action-bar");const o=ft(n,yh(".quick-input-title")),s=this._register(new Wv(n));s.domNode.classList.add("quick-input-right-action-bar");const a=ft(e,yh(".quick-input-description")),l=ft(e,yh(".quick-input-header")),u=ft(l,yh("input.quick-input-check-all"));u.type="checkbox",this._register(za(u,In.CHANGE,Y=>{const I=u.checked;z.setAllVisibleChecked(I)})),this._register(kt(u,In.CLICK,Y=>{(Y.x||Y.y)&&_.setFocus()}));const d=ft(l,yh(".quick-input-description")),h=ft(l,yh(".quick-input-and-message")),p=ft(h,yh(".quick-input-filter")),_=this._register(new c2e(p));_.setAttribute("aria-describedby",`${this.idPrefix}message`);const C=ft(p,yh(".quick-input-visible-count"));C.setAttribute("aria-live","polite"),C.setAttribute("aria-atomic","true");const S=new AV(C,{countFormat:E({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),x=ft(p,yh(".quick-input-count"));x.setAttribute("aria-live","polite");const T=new AV(x,{countFormat:E({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),k=ft(l,yh(".quick-input-action")),M=new JZ(k);M.label=E("ok","OK"),this._register(M.onDidClick(Y=>{this.onDidAcceptEmitter.fire()}));const W=ft(l,yh(".quick-input-action")),F=new JZ(W);F.label=E("custom","Custom"),this._register(F.onDidClick(Y=>{this.onDidCustomEmitter.fire()}));const Q=ft(h,yh(`#${this.idPrefix}message.quick-input-message`)),z=this._register(new dj(e,this.idPrefix+"list",this.options));this._register(z.onChangedAllVisibleChecked(Y=>{u.checked=Y})),this._register(z.onChangedVisibleCount(Y=>{S.setCount(Y)})),this._register(z.onChangedCheckedCount(Y=>{T.setCount(Y)})),this._register(z.onLeave(()=>{setTimeout(()=>{_.setFocus(),this.controller instanceof EN&&this.controller.canSelectMany&&z.clearFocus()},0)})),this._register(z.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const $=new JNe(e);$.getContainer().classList.add("quick-input-progress");const G=ox(e);return this._register(G),this._register(kt(e,In.FOCUS,Y=>{this.previousFocusElement=Y.relatedTarget instanceof HTMLElement?Y.relatedTarget:void 0},!0)),this._register(G.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(wN.Blur),this.previousFocusElement=void 0})),this._register(kt(e,In.FOCUS,Y=>{_.setFocus()})),this._register(kt(e,In.KEY_DOWN,Y=>{const I=new Oo(Y);switch(I.keyCode){case 3:xr.stop(Y,!0),this.onDidAcceptEmitter.fire();break;case 9:xr.stop(Y,!0),this.hide(wN.Gesture);break;case 2:if(!I.altKey&&!I.ctrlKey&&!I.metaKey){const D=[".action-label.codicon"];e.classList.contains("show-checkboxes")?D.push("input"):D.push("input[type=text]"),this.getUI().list.isDisplayed()&&D.push(".monaco-list");const O=e.querySelectorAll(D.join(", "));I.shiftKey&&I.target===O[0]?(xr.stop(Y,!0),O[O.length-1].focus()):!I.shiftKey&&I.target===O[O.length-1]&&(xr.stop(Y,!0),O[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:o,description1:a,description2:d,rightActionBar:s,checkAll:u,filterContainer:p,inputBox:_,visibleCountContainer:C,visibleCount:S,countContainer:x,count:T,okContainer:k,ok:M,message:Q,customButtonContainer:W,customButton:F,list:z,progressBar:$,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:Y=>this.show(Y),hide:()=>this.hide(),setVisibilities:Y=>this.setVisibilities(Y),setComboboxAccessibility:Y=>this.setComboboxAccessibility(Y),setEnabled:Y=>this.setEnabled(Y),setContextKey:Y=>this.options.setContextKey(Y)},this.updateStyles(),this.ui}pick(e,t={},n=Oi.None){return new Promise((i,o)=>{let s=d=>{s=i,t.onKeyMods&&t.onKeyMods(a.keyMods),i(d)};if(n.isCancellationRequested){s(void 0);return}const a=this.createQuickPick();let l;const u=[a,a.onDidAccept(()=>{if(a.canSelectMany)s(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(s(d),a.hide())}}),a.onDidChangeActive(d=>{const h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const h=d[0];h&&(s(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const h=a.items.indexOf(d.item);if(h!==-1){const p=a.items.slice(),_=p.splice(h,1),C=a.activeItems.filter(x=>x!==_[0]),S=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=p,C&&(a.activeItems=C),a.keepScrollPosition=S}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{nr(u),s(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(p=>p.type!=="separator"&&p.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new EN(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(os.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),IC(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();PV.tooltip=i?E("quickInput.backWithKeybinding","Back ({0})",i):E("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=Sd(o.parentElement);o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Z4.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));const a=s.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}Z4.MAX_WIDTH=600;var FV;(function(r){r[r.PRESERVE=0]="PRESERVE",r[r.LAST=1]="LAST"})(FV||(FV={}));const ey={Quickaccess:"workbench.contributions.quickaccess"};let D2e=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Hi(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return tD([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};vs.add(ey.Quickaccess,new D2e);const Kf=ar("quickInputService");var I2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},oX=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let BV=class extends ot{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=vs.as(ey.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[o,s]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&s&&l===s){e!==s.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,s,n);return}if(s&&!(n!=null&&n.preserveValue)){let _;if(a&&l&&l!==s){const C=a.value.substr(l.prefix.length);C&&(_=`${s.prefix}${C}`)}if(!_){const C=o==null?void 0:o.defaultFilterValue;C===FV.LAST?_=this.lastAcceptedPickerValues.get(s):typeof C=="string"&&(_=`${s.prefix}${C}`)}typeof _=="string"&&(e=_)}const u=new Nt,d=u.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,s,n),d.placeholder=s==null?void 0:s.placeholder,d.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(d.itemActivation=(i=n==null?void 0:n.itemActivation)!==null&&i!==void 0?i:qp.SECOND),d.contextKey=s==null?void 0:s.contextKey,d.filterValue=_=>_.substring(s?s.prefix.length:0),s!=null&&s.placeholder&&(d.ariaLabel=s==null?void 0:s.placeholder);let h;t&&(h=new Rie,u.add(qb(d.onWillAccept)(_=>{_.veto(),d.hide()}))),u.add(this.registerPickerListeners(d,o,s,e));const p=u.add(new Ou);if(o&&u.add(o.provide(d,p.token)),qb(d.onDidHide)(()=>{d.selectedItems.length===0&&p.cancel(),u.dispose(),h==null||h.complete(d.selectedItems.slice(0))}),d.show(),t)return h==null?void 0:h.p}adjustValueSelection(e,t,n){var i;let o;n!=null&&n.preserveValue?o=[e.value.length,e.value.length]:o=[(i=t==null?void 0:t.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,n,i){const o=new Nt,s=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return o.add(Hi(()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):s.value=a})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};BV=I2e([oX(0,Kf),oX(1,xi)],BV);var k2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ck=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let tP=class extends cbe{constructor(e,t,n,i,o){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(BV))),this._quickAccess}createController(e=this.layoutService,t){var n,i;const o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,u,d,h)=>this.instantiationService.createInstance(xV,a,l,u,d,h),styles:this.computeStyles()},s=this._register(new Z4(Object.assign(Object.assign({},o),t)));return s.layout(e.dimension,(i=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&i!==void 0?i:0),this._register(e.onDidLayout(a=>{var l,u;return s.layout(a,(u=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&u!==void 0?u:0)})),this._register(s.onShow(()=>this.resetContextKeys())),this._register(s.onHide(()=>this.resetContextKeys())),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new _n(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Oi.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Zp(this.theme,{quickInputBackground:LG,quickInputForeground:Z1e,quickInputTitleBackground:X1e,contrastBorder:Ns,widgetShadow:NC})),inputBox:Zp(this.theme,{inputForeground:Fz,inputBackground:Pz,inputBorder:Bz,inputValidationInfoBackground:zre,inputValidationInfoForeground:$re,inputValidationInfoBorder:jre,inputValidationWarningBackground:qre,inputValidationWarningForeground:Kre,inputValidationWarningBorder:Gre,inputValidationErrorBackground:Yre,inputValidationErrorForeground:Zre,inputValidationErrorBorder:Xre}),countBadge:Zp(this.theme,{badgeBackground:eT,badgeForeground:tT,badgeBorder:Ns}),button:Zp(this.theme,{buttonForeground:H1e,buttonBackground:H9,buttonHoverBackground:U1e,buttonBorder:Ns}),progressBar:Zp(this.theme,{progressBarBackground:z1e}),keybindingLabel:Zp(this.theme,{keybindingLabelBackground:eCe,keybindingLabelForeground:tCe,keybindingLabelBorder:nCe,keybindingLabelBottomBorder:iCe,keybindingLabelShadow:NC}),list:Zp(this.theme,{listBackground:LG,listInactiveFocusForeground:VCe,listInactiveSelectionIconForeground:HCe,listInactiveFocusBackground:FO,listFocusOutline:Bc,listInactiveFocusOutline:Bc,pickerGroupBorder:J1e,pickerGroupForeground:Q1e})}}};tP=k2e([Ck(0,xi),Ck(1,Jn),Ck(2,Ho),Ck(3,Uc),Ck(4,x2)],tP);var Wae=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mw=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let WV=class extends tP{constructor(e,t,n,i,o,s){super(t,n,i,o,s),this.host=void 0;const a=yx.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};WV=Wae([mw(1,xi),mw(2,Jn),mw(3,Ho),mw(4,Uc),mw(5,x2)],WV);let VV=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(WV,e);this.mapEditorToService.set(e,t),qb(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Oi.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};VV=Wae([mw(0,xi),mw(1,vr)],VV);class yx{constructor(e){this.editor=e,this.widget=new X4(this.editor)}static get(e){return e.getContribution(yx.ID)}dispose(){this.widget.dispose()}}yx.ID="editor.controller.quickInput";class X4{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return X4.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}X4.ID="editor.contrib.quickInputWidget";br(yx.ID,yx);const Vae=ar("workspaceTrustManagementService");var pr;(function(r){const e=new iN;class t{constructor(l,u){this._serviceId=l,this._factory=u,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}r.LazyStaticService=t;let n=[];function i(a,l){let u=new t(a,l);return n.push(u),u}function o(a){let l=new iN;for(const[d,h]of TSe())l.set(d,h);for(let d in a)a.hasOwnProperty(d)&&l.set(ar(d),a[d]);n.forEach(d=>l.set(d.id,d.get(a)));let u=new jM(l,!0);return l.set(xi,u),[l,u]}r.init=o,r.instantiationService=i(xi,()=>new jM(e,!0));const s=new Mse;r.configurationService=i(Jr,()=>s),r.resourceConfigurationService=i(M$,()=>new yIe(s)),r.resourcePropertiesService=i(Use,()=>new _W(s)),r.contextService=i(Tse,()=>new M4),r.labelService=i(I2,()=>new EIe),r.telemetryService=i(Xv,()=>new wIe),r.dialogService=i(D2,()=>new bIe),r.notificationService=i(As,()=>new R4),r.markerService=i(A2,()=>new pw),r.modeService=i(Bl,a=>new pN),r.standaloneThemeService=i(JC,()=>new Bke),r.logService=i(Qv,()=>new mbe(new pbe)),r.undoRedoService=i(C2,a=>new JM(r.dialogService.get(a),r.notificationService.get(a))),r.languageConfigurationService=i(b2,a=>new pM(r.configurationService.get(a),r.modeService.get(a))),r.modelService=i(ua,a=>new HM(r.configurationService.get(a),r.resourcePropertiesService.get(a),r.standaloneThemeService.get(a),r.logService.get(a),r.undoRedoService.get(a),r.modeService.get(a),r.languageConfigurationService.get(a))),r.markerDecorationsService=i(vz,a=>new TV(r.modelService.get(a),r.markerService.get(a))),r.contextKeyService=i(Jn,a=>new cV(r.configurationService.get(a))),r.codeEditorService=i(vr,a=>new BM(null,r.contextKeyService.get(a),r.standaloneThemeService.get(a))),r.editorProgressService=i(n1,()=>new O4),r.storageService=i(i0,()=>new HNe),r.editorWorkerService=i(Fh,a=>new sV(r.modelService.get(a),r.resourceConfigurationService.get(a),r.logService.get(a)))})(pr||(pr={}));class Hae extends ot{constructor(e,t){super();const[n,i]=pr.init(t);this._serviceCollection=n,this._instantiationService=i;const o=this.get(Jr),s=this.get(As),a=this.get(Xv),l=this.get(Ho),u=this.get(Qv),d=this.get(Jn);let h=(x,T)=>{let k=null;return t&&(k=t[x.toString()]),k||(k=T()),this._serviceCollection.set(x,k),k};h(Uc,()=>new NV(d,o)),h(qf,()=>new EV(l));let p=h(Go,()=>new CIe(this._instantiationService)),_=h(Ro,()=>this._register(new Rse(d,p,a,s,u,e))),C=h(x2,()=>new Pse(pr.codeEditorService.get(vr),e));h(Kf,()=>new VV(i,pr.codeEditorService.get(vr)));let S=h(t1,()=>this._register(new vV(C)));h(QC,()=>new jNe),h(XC,()=>{const x=new _V(a,s,S,_,l);return x.configure({blockMouse:!1}),this._register(x)}),h(XS,()=>new IV(p)),h(T$,()=>new SIe(pr.modelService.get(ua))),h(Vae,()=>new LIe)}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}var sX=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Nd=ar("openerService"),T2e=Object.freeze({_serviceBrand:void 0,registerOpener(){return ot.None},registerValidator(){return ot.None},registerExternalUriResolver(){return ot.None},setDefaultExternalOpener(){},registerExternalOpener(){return ot.None},open(){return sX(this,void 0,void 0,function*(){return!1})},resolveExternalUri(r){return sX(this,void 0,void 0,function*(){return{resolved:r,dispose(){}}})}});function Uae(r,e){return qn.isUri(r)?Ok(r.scheme,e):Sz(r,e+":")}function aX(r,...e){return e.some(t=>Uae(r,t))}function HV(r){let e=JSON.parse(r);return e=UV(e),e}function UV(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return qn.revive(r);case 2:return new RegExp(r.source,r.flags)}if(r instanceof f4||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=UV(r[t],e+1);else for(const t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=UV(r[t],e+1))}return r}var nP;(function(r){r[r.API=0]="API",r[r.USER=1]="USER"})(nP||(nP={}));var hj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},iP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},_w=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let zV=class{constructor(e){this._commandService=e}open(e,t){return _w(this,void 0,void 0,function*(){if(!Uae(e,Si.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=qn.parse(e));let n=[];try{n=HV(decodeURIComponent(e.query))}catch{try{n=HV(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};zV=hj([iP(0,Go)],zV);let $V=class{constructor(e){this._editorService=e}open(e,t){return _w(this,void 0,void 0,function*(){typeof e=="string"&&(e=qn.parse(e));let n;const i=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return i&&(n={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1},e=e.with({fragment:""})),e.scheme===Si.file&&(e=twe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?nP.USER:nP.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};$V=hj([iP(0,vr)],$V);let rP=class{constructor(e,t){this._openers=new kh,this._validators=new kh,this._resolvers=new kh,this._resolvedUriTargets=new Tu(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new kh,this._defaultExternalOpener={openExternal:n=>_w(this,void 0,void 0,function*(){return aX(n,Si.http,Si.https)?Jie(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>_w(this,void 0,void 0,function*(){return i!=null&&i.openExternal||aX(n,Si.mailto,Si.http,Si.https,Si.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new zV(t)),this._openers.push(new $V(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return _w(this,void 0,void 0,function*(){const i=typeof e=="string"?qn.parse(e):e,o=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const s of this._validators)if(!(yield s.shouldOpen(o)))return!1;for(const s of this._openers)if(yield s.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return _w(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return _w(this,void 0,void 0,function*(){const n=typeof e=="string"?qn.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let o;if(typeof e=="string"&&n.toString()===i.toString()?o=e:o=encodeURI(i.toString(!0)),t!=null&&t.allowContributedOpeners){const s=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:n,preferredOpenerId:s},Oi.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:n},Oi.None)})}dispose(){this._validators.clear()}};rP=hj([iP(0,vr),iP(1,Go)],rP);var N2e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},A2e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let $v=class{constructor(){this.simpleEditorModelResolverService=null}initWorkspace(e){this._container=e,this._services=this.createStandaloneServices()}get container(){return this._container}get services(){return this._services}get commandService(){return this.services.get(Go)}mergeEditorServices(e){if(e){const t=this.services;for(const n in e)n&&t.get(n)&&e[n]&&t.set(n,e[n])}}create(e,t,n){const i=this.services;this.mergeEditorServices(n),i.has(Fc)||(this.simpleEditorModelResolverService=new PM(pr.modelService.get()),i.set(Fc,this.simpleEditorModelResolverService));const o=new hN(e,t,i,i.get(xi),i.get(vr),i.get(Go),i.get(Jn),i.get(Ro),i.get(t1),i.get(JC),i.get(As),i.get(Jr),i.get(Uc),i.get(ua),i.get(Bl));return this.simpleEditorModelResolverService&&this.simpleEditorModelResolverService.setEditor(o),o}createStandaloneServices(){const e=new Hae(this.container),t=e.get(xi);e.has(Nd)||e.set(Nd,new rP(e.get(vr),e.get(Go)));const n=t.createInstance(tP),i=new Pse(pr.codeEditorService.get(vr),this.container);return e.set(x2,i),e.set(Kf,n),e}};$v=N2e([Ur(),A2e("design:paramtypes",[])],$v);const O2e=`${PP}-monaco-editor`;class fj extends De.PureComponent{constructor(e){super(e),this.monacoService=yt.resolve($v)}componentDidMount(){var e;const{options:t={},override:n,editorInstanceRef:i}=this.props;this.monacoInstance||(this.monacoInstance=(e=this.monacoService)===null||e===void 0?void 0:e.create(this.monacoDom,t,n),i==null||i(this.monacoInstance))}componentDidUpdate(e){const{onChangeEditorProps:t}=this.props;!Ao.isEqual(e,this.props)&&(t==null||t(e,this.props))}render(){const{style:e}=this.props;let t={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return t=e?Object.assign(t,e):t,me.createElement("div",{style:t,className:O2e,ref:n=>{this.monacoDom=n}})}}const R2=Ri("scrollBar"),R2e=Gt(R2,"wrapper"),gj=Gt(R2,"container"),zae=Gt(R2,"shadow"),Q4=Gt(R2,"track"),M2e=Gt(R2,"thumb"),P2e=li(gj,"horizontal"),F2e=li(gj,"vertical"),B2e=li(Q4,"hidden"),W2e=li(Q4,"vertical"),V2e=li(Q4,"horizontal"),H2e=li(zae,"hidden");var wx;(function(r){r.vertical="vertical",r.horizontal="horizontal"})(wx||(wx={}));function zp(r){return r===wx.vertical}function $E(r,e){const t=zp(r)?"height":"width";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}function eO(r,e){const t=zp(r)?"top":"left";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}const cD=De.forwardRef(function({children:r,style:e,trackStyle:t,className:n,isShowShadow:i=!1,inactiveHidden:o=!0,direction:s=wx.vertical,onScroll:a,onScrollStart:l,onScrollEnd:u},d){const[h,p]=De.useState(.1),[_,C]=De.useState(!0),[S,x]=De.useState(!1),[T,k]=De.useState(!1),M=De.useRef(null),W=De.useRef(null),F=De.useRef(null),Q=De.useRef(null),z=De.useRef({y:0,startOffset:0}),$=()=>{var te;return((te=W.current)===null||te===void 0?void 0:te[$E(s,"scroll")])||0},G=()=>{var te;return((te=M.current)===null||te===void 0?void 0:te[$E(s,"client")])||0},Y=()=>{var te;return((te=M.current)===null||te===void 0?void 0:te[eO(s,"scroll")])||0},I=()=>{var te;return((te=F.current)===null||te===void 0?void 0:te.getBoundingClientRect()[$E(s)])||0},D=()=>{var te;return((te=Q.current)===null||te===void 0?void 0:te.getBoundingClientRect()[$E(s)])||0},O=()=>{var te;return((te=Q.current)===null||te===void 0?void 0:te[eO(s,"offset")])||0};De.useImperativeHandle(d,()=>{var te;return{scrollTo:_e=>{if(V()&&typeof _e=="number"){const de=_e/$()*I();ne(_e),j(de)}},scrollHeight:((te=M.current)===null||te===void 0?void 0:te.scrollHeight)||0}}),De.useEffect(()=>{const te=new ResizeObserver(_e=>{for(const de of _e){const He=de.contentRect[$E(s)],st=$();let Dt=He/st;Number.isNaN(Dt)&&(Dt=1);const Rt=Y(),lt=Rt/st*I();ne(Rt),j(lt),p(Dt>1?1:Dt)}});return te.observe(M.current),()=>{te.disconnect()}},[]),De.useEffect(()=>{const te=new ResizeObserver(_e=>{for(const de of _e){const Me=$(),st=G()/Me;p(st>1?1:st)}});return te.observe(W.current),()=>{te.disconnect()}},[]),De.useEffect(()=>{var te;let _e=0;function de(Me){if(!V())return;Me.preventDefault();const He=Y();_e?window.clearTimeout(_e):(l==null||l({scrollTop:He},Me),x(!0)),_e=window.setTimeout(()=>{u==null||u({scrollTop:He},Me),_e=0,x(!1)},150);const Dt=5*(Me[zp(s)?"deltaY":"deltaX"]/10),Rt=He/this[zp(s)?"scrollHeight":"scrollWidth"]*I();j(Rt),ne(He+Dt),a==null||a({scrollTop:He},Me)}return(te=M.current)===null||te===void 0||te.addEventListener("wheel",de),()=>{var Me;(Me=M.current)===null||Me===void 0||Me.removeEventListener("wheel",de)}},[]);const V=()=>$()>G(),j=te=>{const _e=I(),de=D();requestAnimationFrame(()=>{const Me=eO(s);te<=0?Q.current.style[Me]="0px":te>=_e-de?Q.current.style[Me]=`${_e-de}px`:Q.current.style[Me]=`${te}px`})},ne=te=>{requestAnimationFrame(()=>{var _e,de,Me;const He=eO(s);te<=0?((_e=M.current)===null||_e===void 0||_e.scrollTo({[He]:0}),C(!0)):te>=$()-I()?((de=M.current)===null||de===void 0||de.scrollTo({[He]:$()}),C(!1)):((Me=M.current)===null||Me===void 0||Me.scrollTo({[He]:te}),C(!1))})},re=te=>{if(te.stopPropagation(),!V())return;const{y:_e,height:de,x:Me,width:He}=te.target.getBoundingClientRect(),Dt=D()/2,Rt=$(),xt=te[zp(s)?"clientY":"clientX"]-(zp(s)?_e:Me)-Dt,zt=xt/(zp(s)?de:He);l==null||l({scrollTop:Y()},te),ne(Rt*zt),j(xt),a==null||a({scrollTop:Y()},te),u==null||u({scrollTop:Y()},te)},se=De.useCallback(te=>{const de=te[zp(s)?"clientY":"clientX"]-z.current.y,Me=z.current.startOffset,He=I(),st=Me+de,Dt=st/He,Rt=$();ne(Rt*Dt),j(st),a==null||a({scrollTop:Y()},te)},[]),ie=te=>{V()&&(x(!0),l==null||l({scrollTop:Y()},te),z.current={y:te[zp(s)?"clientY":"clientX"],startOffset:O()},document.body.style.userSelect="none",window.addEventListener("mouseup",_e=>{_e.stopPropagation(),_e.preventDefault(),x(!1),u==null||u({scrollTop:Y()},_e),document.body.style.removeProperty("user-select"),window.removeEventListener("mousemove",se)},{once:!0}),window.addEventListener("mousemove",se,{passive:!1}))},A=De.useMemo(()=>{const te=$(),_e=G();return te<=_e?!0:!S&&!T},[S,T]);return me.createElement("div",{className:oi(R2e,n),ref:M,style:e,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1)},i&&me.createElement("div",{className:oi(zae,_&&H2e)}),me.createElement("div",{className:oi(gj,zp(s)?F2e:P2e),ref:W},r),me.createElement("div",{className:oi(Q4,zp(s)?W2e:V2e,o&&A&&B2e),ref:F,onClick:re,style:t},me.createElement("div",{className:M2e,style:{[$E(s)]:`calc(100% * ${h})`},ref:Q,onClick:te=>te.stopPropagation(),onMouseDown:ie})))}),r0=Ri("search"),lX=Gt(r0,"input"),U2e=Gt(r0,"group"),z2e=Gt(r0,"toolbar"),$ae=Gt(r0,"replace"),$2e=Gt(r0,"target"),j2e=Gt($ae,"button"),q2e=Gt(r0,"base"),K2e=Gt(r0,"info"),G2e=Gt(r0,"warning"),Y2e=Gt(r0,"error");var YL;(function(r){r.info="info",r.warning="warning",r.error="error"})(YL||(YL={}));function tR(r){const{className:e,placeholder:t,toolbarData:n=[],onChange:i,value:o,info:s}=r,[a,l]=De.useState(!1),u=De.useRef(null),d=(x,T)=>{var k,M;(k=u.current)===null||k===void 0||k.focus(),(M=r.onToolbarClick)===null||M===void 0||M.call(r,T)},h=x=>{switch(x){case YL.info:return K2e;case YL.warning:return G2e;case YL.error:return Y2e;default:return""}},p=()=>{l(!0)},_=()=>{l(!1)},C=x=>{if(u.current){u.current.style.height="24px";const k=u.current.scrollHeight/24,M=5;k>M?u.current.style.height=`${24*M}px`:u.current.style.height=`${u.current.scrollHeight}px`}i==null||i(x.target.value||"")},S=x=>{x.keyCode===13&&(i==null||i(x.target.value||""),x.preventDefault())};return me.createElement("div",{className:e},me.createElement("textarea",{ref:u,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",className:oi((s==null?void 0:s.text)&&h((s==null?void 0:s.type)||"")),value:o||"",placeholder:t,title:t,onKeyDown:S,onFocus:p,onBlur:_,onChange:C}),(s==null?void 0:s.text)&&a&&me.createElement("div",{className:oi(q2e,h(s.type))},s.text),me.createElement(s2,{className:z2e,data:n,onClick:d}))}function Z2e({children:r}){return me.createElement("div",{className:U2e},r)}tR.Group=Z2e;function jae(r){const{className:e="",style:t,placeholders:n=[],validationInfo:i,addons:o=[],values:s=[],onAddonClick:a,onButtonClick:l,onChange:u,onSearch:d}=r,[h="Search",p="Replace"]=n,[_,C]=o,[S,x]=s,[T,k]=De.useState(!1),M=()=>{k(!T),l==null||l(!T),d==null||d([S,x])},W=($,G)=>{if(u){const Y=G==="search"?[$,x]:[S,$];u(Y),d==null||d(Y)}},F=$=>{a==null||a($),d==null||d([S,x])},z=(()=>{if(i)return typeof i=="string"?{type:YL.info,text:i}:i})();return me.createElement("div",{style:t,className:oi(r0,e)},me.createElement(go,{className:j2e,type:T?"chevron-down":"chevron-right",onClick:M}),me.createElement(tR.Group,null,me.createElement(tR,{value:S,className:oi(lX,$2e),info:z,placeholder:h,onChange:$=>W($,"search"),toolbarData:_,onToolbarClick:F}),T&&me.createElement(tR,{value:x,className:oi(lX,$ae),placeholder:p,onChange:$=>W($,"replace"),toolbarData:C,onToolbarClick:F})))}var X2e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Q2e={isOpen:!1,option:{name:"",value:"",description:""}},ty=Ri("select"),J2e=Gt(ty,"container"),eAe=Gt(ty,"options"),uX=Gt(ty,"descriptor"),tAe=Gt(ty,"input"),cX=li(ty,"active"),nAe=Gt(ty,"arrow");class LN extends De.PureComponent{constructor(e){super(e),this.handleOnClickOption=t=>{const n=t.target,i=nA(n,"data-value"),o=nA(n,"data-name"),s=nA(n,"data-desc");if(o){const a={value:i,name:o,description:s};this.setState({option:a},()=>{var l,u;(u=(l=this.props).onSelect)===null||u===void 0||u.call(l,t,a),this.contextView.hide()})}},this.handleOnHoverOption=t=>{const n=t.target,i=nA(n,"data-desc"),o=this.contextView.view.querySelector("."+uX);if(o){const s=i||"None";o.innerHTML=s,o.setAttribute("title",s)}},this.handleOnClickSelect=t=>{const n=this.selectElm.current,{children:i}=this.props;if(n){const o=n==null?void 0:n.getBoundingClientRect();o.y=o.y+o.height,this.setState({isOpen:!0}),this.contextView.show(o,()=>me.createElement("div",{style:{width:o.width},className:oi(J2e,cX),onMouseOver:this.handleOnHoverOption},me.createElement("div",{className:eAe},n2(i,{onClick:this.handleOnClickOption})),me.createElement("div",{className:uX},"None")))}},this.contextView=Gx({shadowOutline:!1}),this.state=this.getDefaultState(this.props),this.selectElm=me.createRef(),this.selectInput=me.createRef()}static getDerivedStateFromProps(e,t){return e.value!==t.value?{option:LN.getSelectOption(e)}:null}componentDidMount(){this.contextView.onHide(()=>{this.state.isOpen&&this.setState({isOpen:!1})})}componentWillUnmount(){this.contextView.dispose()}static getSelectOption(e){let t={};const n=e.value||e.defaultValue,i=De.Children.toArray(e.children);for(const o of i)if(De.isValidElement(o)){const s=o.props;if(s.value&&s.value===n){t=Object.assign(Object.assign({},s),{name:s.name||s.children});break}}return t}getDefaultState(e){return Object.assign(Object.assign({},Q2e),{option:Object.assign({},LN.getSelectOption(e))})}render(){const{option:e,isOpen:t}=this.state,n=this.props,{className:i,placeholder:o,onSelect:s}=n,a=X2e(n,["className","placeholder","onSelect"]),u=oi(ty,i,t?cX:"");return me.createElement("div",Object.assign({ref:this.selectElm,className:u},a),me.createElement("input",{onClick:this.handleOnClickSelect,ref:this.selectInput,autoComplete:"off",placeholder:o,className:tAe,value:e.name,readOnly:!0}),me.createElement("span",{className:nAe},me.createElement(go,{type:"chevron-down"})))}}var iAe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const qae=Gt(ty,"option"),rAe=li(qae,"disabled");function Kae(r){const{className:e,value:t,title:n,name:i,description:o,disabled:s,children:a,onClick:l}=r,u=iAe(r,["className","value","title","name","description","disabled","children","onClick"]),d=oi(qae,e,s?rAe:""),h=p=>{s||l==null||l(p)};return me.createElement("div",Object.assign({className:d,title:n,"data-name":i||a,"data-value":t,"data-desc":o,onClick:h},u),a)}var tO={exports:{}},dX;function oAe(){return dX||(dX=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0});function t(z){return typeof z=="object"&&!("toString"in z)?Object.prototype.toString.call(z).slice(8,-1):z}var n=typeof Sv=="object"&&!0;function i(z,$){if(!z)throw n?new Error("Invariant failed"):new Error($())}e.invariant=i;var o=Object.prototype.hasOwnProperty,s=Array.prototype.splice,a=Object.prototype.toString;function l(z){return a.call(z).slice(8,-1)}var u=Object.assign||function(z,$){return d($).forEach(function(G){o.call($,G)&&(z[G]=$[G])}),z},d=typeof Object.getOwnPropertySymbols=="function"?function(z){return Object.keys(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.keys(z)};function h(z){return Array.isArray(z)?u(z.constructor(z.length),z):l(z)==="Map"?new Map(z):l(z)==="Set"?new Set(z):z&&typeof z=="object"?u(Object.create(Object.getPrototypeOf(z)),z):z}var p=function(){function z(){this.commands=u({},_),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function($,G){return $===G},this.update.newContext=function(){return new z().update}}return Object.defineProperty(z.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function($){this.update.isEquals=$},enumerable:!0,configurable:!0}),z.prototype.extend=function($,G){this.commands[$]=G},z.prototype.update=function($,G){var Y=this,I=typeof G=="function"?{$apply:G}:G;Array.isArray($)&&Array.isArray(I)||i(!Array.isArray(I),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),i(typeof I=="object"&&I!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(Y.commands).join(", ")+".")});var D=$;return d(I).forEach(function(O){if(o.call(Y.commands,O)){var V=$===D;D=Y.commands[O](I[O],D,I,$),V&&Y.isEquals(D,$)&&(D=$)}else{var j=l($)==="Map"?Y.update($.get(O),I[O]):Y.update($[O],I[O]),ne=l(D)==="Map"?D.get(O):D[O];(!Y.isEquals(j,ne)||typeof j>"u"&&!o.call($,O))&&(D===$&&(D=h($)),l(D)==="Map"?D.set(O,j):D[O]=j)}}),D},z}();e.Context=p;var _={$push:function(z,$,G){return S($,G,"$push"),z.length?$.concat(z):$},$unshift:function(z,$,G){return S($,G,"$unshift"),z.length?z.concat($):$},$splice:function(z,$,G,Y){return T($,G),z.forEach(function(I){k(I),$===Y&&I.length&&($=h(Y)),s.apply($,I)}),$},$set:function(z,$,G){return W(G),z},$toggle:function(z,$){x(z,"$toggle");var G=z.length?h($):$;return z.forEach(function(Y){G[Y]=!$[Y]}),G},$unset:function(z,$,G,Y){return x(z,"$unset"),z.forEach(function(I){Object.hasOwnProperty.call($,I)&&($===Y&&($=h(Y)),delete $[I])}),$},$add:function(z,$,G,Y){return Q($,"$add"),x(z,"$add"),l($)==="Map"?z.forEach(function(I){var D=I[0],O=I[1];$===Y&&$.get(D)!==O&&($=h(Y)),$.set(D,O)}):z.forEach(function(I){$===Y&&!$.has(I)&&($=h(Y)),$.add(I)}),$},$remove:function(z,$,G,Y){return Q($,"$remove"),x(z,"$remove"),z.forEach(function(I){$===Y&&$.has(I)&&($=h(Y)),$.delete(I)}),$},$merge:function(z,$,G,Y){return F($,z),d(z).forEach(function(I){z[I]!==$[I]&&($===Y&&($=h(Y)),$[I]=z[I])}),$},$apply:function(z,$){return M(z),z($)}},C=new p;e.isEquals=C.update.isEquals,e.extend=C.extend,e.default=C.update,e.default.default=r.exports=u(e.default,e);function S(z,$,G){i(Array.isArray(z),function(){return"update(): expected target of "+t(G)+" to be an array; got "+t(z)+"."}),x($[G],G)}function x(z,$){i(Array.isArray(z),function(){return"update(): expected spec of "+t($)+" to be an array; got "+t(z)+". Did you forget to wrap your parameter in an array?"})}function T(z,$){i(Array.isArray(z),function(){return"Expected $splice target to be an array; got "+t(z)}),k($.$splice)}function k(z){i(Array.isArray(z),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(z)+". Did you forget to wrap your parameters in an array?"})}function M(z){i(typeof z=="function",function(){return"update(): expected spec of $apply to be a function; got "+t(z)+"."})}function W(z){i(Object.keys(z).length===1,function(){return"Cannot have more than one key in an object with $set"})}function F(z,$){i($&&typeof $=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t($)}),i(z&&typeof z=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t(z)})}function Q(z,$){var G=l(z);i(G==="Map"||G==="Set",function(){return"update(): "+t($)+" expects a target of type Set or Map; got "+t(G)})}}(tO,tO.exports)),tO.exports}var sAe=oAe();const aAe=xm(sAe),Gae=De.createContext({dragDropManager:void 0});function Rg(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var hX=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),oB=function(){return Math.random().toString(36).substring(7).split("").join(".")},fX={INIT:"@@redux/INIT"+oB(),REPLACE:"@@redux/REPLACE"+oB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+oB()}};function lAe(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function Yae(r,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Rg(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Rg(1));return t(Yae)(r,e)}if(typeof r!="function")throw new Error(Rg(2));var i=r,o=e,s=[],a=s,l=!1;function u(){a===s&&(a=s.slice())}function d(){if(l)throw new Error(Rg(3));return o}function h(S){if(typeof S!="function")throw new Error(Rg(4));if(l)throw new Error(Rg(5));var x=!0;return u(),a.push(S),function(){if(x){if(l)throw new Error(Rg(6));x=!1,u();var k=a.indexOf(S);a.splice(k,1),s=null}}}function p(S){if(!lAe(S))throw new Error(Rg(7));if(typeof S.type>"u")throw new Error(Rg(8));if(l)throw new Error(Rg(9));try{l=!0,o=i(o,S)}finally{l=!1}for(var x=s=a,T=0;T<x.length;T++){var k=x[T];k()}return S}function _(S){if(typeof S!="function")throw new Error(Rg(10));i=S,p({type:fX.REPLACE})}function C(){var S,x=h;return S={subscribe:function(k){if(typeof k!="object"||k===null)throw new Error(Rg(11));function M(){k.next&&k.next(d())}M();var W=x(M);return{unsubscribe:W}}},S[hX]=function(){return this},S}return p({type:fX.INIT}),n={dispatch:p,subscribe:h,getState:d,replaceReducer:_},n[hX]=C,n}function gr(r,e,...t){if(uAe()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return t[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function uAe(){return typeof Sv<"u"&&!0}function cAe(r,e,t){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:t||null,r)}function dAe(r,e){return r.filter(t=>t!==e)}function Zae(r){return typeof r=="object"}function hAe(r,e){const t=new Map,n=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};r.forEach(n),e.forEach(n);const i=[];return t.forEach((o,s)=>{o===1&&i.push(s)}),i}function fAe(r,e){return r.filter(t=>e.indexOf(t)>-1)}const pj="dnd-core/INIT_COORDS",J4="dnd-core/BEGIN_DRAG",mj="dnd-core/PUBLISH_DRAG_SOURCE",eF="dnd-core/HOVER",tF="dnd-core/DROP",nF="dnd-core/END_DRAG";function gX(r,e){return{type:pj,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const gAe={type:pj,payload:{clientOffset:null,sourceClientOffset:null}};function pAe(r){return function(t=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:s}=n,a=r.getMonitor(),l=r.getRegistry();r.dispatch(gX(o)),mAe(t,a,l);const u=bAe(t,a);if(u==null){r.dispatch(gAe);return}let d=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");_Ae(s),d=s(u)}r.dispatch(gX(o,d));const p=l.getSource(u).beginDrag(a,u);if(p==null)return;vAe(p),l.pinSource(u);const _=l.getSourceType(u);return{type:J4,payload:{itemType:_,item:p,sourceId:u,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function mAe(r,e,t){gr(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(n){gr(t.getSource(n),"Expected sourceIds to be registered.")})}function _Ae(r){gr(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function vAe(r){gr(Zae(r),"Item must be an object.")}function bAe(r,e){let t=null;for(let n=r.length-1;n>=0;n--)if(e.canDragSource(r[n])){t=r[n];break}return t}function CAe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yAe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){CAe(r,i,t[i])})}return r}function wAe(r){return function(t={}){const n=r.getMonitor(),i=r.getRegistry();SAe(n),xAe(n).forEach((s,a)=>{const l=EAe(s,a,i,n),u={type:tF,payload:{dropResult:yAe({},t,l)}};r.dispatch(u)})}}function SAe(r){gr(r.isDragging(),"Cannot call drop while not dragging."),gr(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function EAe(r,e,t,n){const i=t.getTarget(r);let o=i?i.drop(n,r):void 0;return LAe(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function LAe(r){gr(typeof r>"u"||Zae(r),"Drop result must either be an object or undefined.")}function xAe(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function DAe(r){return function(){const t=r.getMonitor(),n=r.getRegistry();IAe(t);const i=t.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(t,i),n.unpinSource()),{type:nF}}}function IAe(r){gr(r.isDragging(),"Cannot call endDrag while not dragging.")}function jV(r,e){return e===null?r===null:Array.isArray(r)?r.some(t=>t===e):r===e}function kAe(r){return function(t,{clientOffset:n}={}){TAe(t);const i=t.slice(0),o=r.getMonitor(),s=r.getRegistry(),a=o.getItemType();return AAe(i,s,a),NAe(i,o,s),OAe(i,o,s),{type:eF,payload:{targetIds:i,clientOffset:n||null}}}}function TAe(r){gr(Array.isArray(r),"Expected targetIds to be an array.")}function NAe(r,e,t){gr(e.isDragging(),"Cannot call hover while not dragging."),gr(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<r.length;n++){const i=r[n];gr(r.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(i);gr(o,"Expected targetIds to be registered.")}}function AAe(r,e,t){for(let n=r.length-1;n>=0;n--){const i=r[n],o=e.getTargetType(i);jV(o,t)||r.splice(n,1)}}function OAe(r,e,t){r.forEach(function(n){t.getTarget(n).hover(e,n)})}function RAe(r){return function(){if(r.getMonitor().isDragging())return{type:mj}}}function MAe(r){return{beginDrag:pAe(r),publishDragSource:RAe(r),hover:kAe(r),drop:wAe(r),endDrag:DAe(r)}}class PAe{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(o){return(...s)=>{const a=o.apply(e,s);typeof a<"u"&&t(a)}}const i=MAe(this);return Object.keys(i).reduce((o,s)=>{const a=i[s];return o[s]=n(a),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function FAe(r,e){return{x:r.x+e.x,y:r.y+e.y}}function Xae(r,e){return{x:r.x-e.x,y:r.y-e.y}}function BAe(r){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=r;return!e||!t||!n?null:Xae(FAe(e,n),t)}function WAe(r){const{clientOffset:e,initialClientOffset:t}=r;return!e||!t?null:Xae(e,t)}const vT=[],_j=[];vT.__IS_NONE__=!0;_j.__IS_ALL__=!0;function VAe(r,e){return r===vT?!1:r===_j||typeof e>"u"?!0:fAe(e,r).length>0}class HAe{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;gr(typeof e=="function","listener must be a function."),gr(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const s=this.store.getState(),a=s.stateId;try{a===i||a===i+1&&!VAe(s.dirtyHandlerIds,n)||e()}finally{i=a}};return this.store.subscribe(o)}subscribeToOffsetChange(e){gr(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return gr(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(gr(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return jV(n,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(gr(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!jV(i,o))return!1;const s=this.getTargetIds();if(!s.length)return!1;const a=s.indexOf(e);return n?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return BAe(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return WAe(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const pX=typeof cm<"u"?cm:self,Qae=pX.MutationObserver||pX.WebKitMutationObserver;function Jae(r){return function(){const t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),r()}}}function UAe(r){let e=1;const t=new Qae(r),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const zAe=typeof Qae=="function"?UAe:Jae;class $Ae{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=zAe(this.flush),this.requestErrorThrow=Jae(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class jAe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class qAe{create(e){const t=this.freeTasks,n=t.length?t.pop():new jAe(this.onError,i=>t[t.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const ele=new $Ae,KAe=new qAe(ele.registerPendingError);function GAe(r){ele.enqueueTask(KAe.create(r))}const vj="dnd-core/ADD_SOURCE",bj="dnd-core/ADD_TARGET",Cj="dnd-core/REMOVE_SOURCE",iF="dnd-core/REMOVE_TARGET";function YAe(r){return{type:vj,payload:{sourceId:r}}}function ZAe(r){return{type:bj,payload:{targetId:r}}}function XAe(r){return{type:Cj,payload:{sourceId:r}}}function QAe(r){return{type:iF,payload:{targetId:r}}}function JAe(r){gr(typeof r.canDrag=="function","Expected canDrag to be a function."),gr(typeof r.beginDrag=="function","Expected beginDrag to be a function."),gr(typeof r.endDrag=="function","Expected endDrag to be a function.")}function eOe(r){gr(typeof r.canDrop=="function","Expected canDrop to be a function."),gr(typeof r.hover=="function","Expected hover to be a function."),gr(typeof r.drop=="function","Expected beginDrag to be a function.")}function qV(r,e){if(e&&Array.isArray(r)){r.forEach(t=>qV(t,!1));return}gr(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var $g;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})($g||($g={}));let tOe=0;function nOe(){return tOe++}function iOe(r){const e=nOe().toString();switch(r){case $g.SOURCE:return`S${e}`;case $g.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function mX(r){switch(r[0]){case"S":return $g.SOURCE;case"T":return $g.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function _X(r,e){const t=r.entries();let n=!1;do{const{done:i,value:[,o]}=t.next();if(o===e)return!0;n=!!i}while(!n);return!1}class rOe{addSource(e,t){qV(e),JAe(t);const n=this.addHandler($g.SOURCE,e,t);return this.store.dispatch(YAe(n)),n}addTarget(e,t){qV(e,!0),eOe(t);const n=this.addHandler($g.TARGET,e,t);return this.store.dispatch(ZAe(n)),n}containsHandler(e){return _X(this.dragSources,e)||_X(this.dropTargets,e)}getSource(e,t=!1){return gr(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return gr(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return gr(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return gr(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return mX(e)===$g.SOURCE}isTargetId(e){return mX(e)===$g.TARGET}removeSource(e){gr(this.getSource(e),"Expected an existing source."),this.store.dispatch(XAe(e)),GAe(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){gr(this.getTarget(e),"Expected an existing target."),this.store.dispatch(QAe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);gr(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){gr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const i=iOe(e);return this.types.set(i,t),e===$g.SOURCE?this.dragSources.set(i,n):e===$g.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const oOe=(r,e)=>r===e;function sOe(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function aOe(r,e,t=oOe){if(r.length!==e.length)return!1;for(let n=0;n<r.length;++n)if(!t(r[n],e[n]))return!1;return!0}function lOe(r=vT,e){switch(e.type){case eF:break;case vj:case bj:case iF:case Cj:return vT;case J4:case mj:case nF:case tF:default:return _j}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,i=hAe(t,n);if(!(i.length>0||!aOe(t,n)))return vT;const s=n[n.length-1],a=t[t.length-1];return s!==a&&(s&&i.push(s),a&&i.push(a)),i}function uOe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cOe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){uOe(r,i,t[i])})}return r}const vX={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function dOe(r=vX,e){const{payload:t}=e;switch(e.type){case pj:case J4:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case eF:return sOe(r.clientOffset,t.clientOffset)?r:cOe({},r,{clientOffset:t.clientOffset});case nF:case tF:return vX;default:return r}}function hOe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jE(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){hOe(r,i,t[i])})}return r}const fOe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function gOe(r=fOe,e){const{payload:t}=e;switch(e.type){case J4:return jE({},r,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case mj:return jE({},r,{isSourcePublic:!0});case eF:return jE({},r,{targetIds:t.targetIds});case iF:return r.targetIds.indexOf(t.targetId)===-1?r:jE({},r,{targetIds:dAe(r.targetIds,t.targetId)});case tF:return jE({},r,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case nF:return jE({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function pOe(r=0,e){switch(e.type){case vj:case bj:return r+1;case Cj:case iF:return r-1;default:return r}}function mOe(r=0){return r+1}function _Oe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vOe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){_Oe(r,i,t[i])})}return r}function bOe(r={},e){return{dirtyHandlerIds:lOe(r.dirtyHandlerIds,{type:e.type,payload:vOe({},e.payload,{prevTargetIds:cAe(r,"dragOperation.targetIds",[])})}),dragOffset:dOe(r.dragOffset,e),refCount:pOe(r.refCount,e),dragOperation:gOe(r.dragOperation,e),stateId:mOe(r.stateId)}}function COe(r,e=void 0,t={},n=!1){const i=yOe(n),o=new HAe(i,new rOe(i)),s=new PAe(i,o),a=r(s,e,t);return s.receiveBackend(a),s}function yOe(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Yae(bOe,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function wOe(r,e){if(r==null)return{};var t=SOe(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function SOe(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}let bX=0;const nR=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var EOe=De.memo(function(e){var{children:t}=e,n=wOe(e,["children"]);const[i,o]=LOe(n);return De.useEffect(()=>{if(o){const s=tle();return++bX,()=>{--bX===0&&(s[nR]=null)}}},[]),Ug.jsx(Gae.Provider,{value:i,children:t})});function LOe(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=xOe(r.backend,r.context,r.options,r.debugMode),t=!r.context;return[e,t]}function xOe(r,e=tle(),t,n){const i=e;return i[nR]||(i[nR]={dragDropManager:COe(r,e,t,n)}),i[nR]}function tle(){return typeof cm<"u"?cm:window}var sB,CX;function DOe(){return CX||(CX=1,sB=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!r(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),sB}var IOe=DOe();const kOe=xm(IOe),CS=typeof window<"u"?De.useLayoutEffect:De.useEffect;function TOe(r,e,t){const[n,i]=De.useState(()=>e(r)),o=De.useCallback(()=>{const s=e(r);kOe(n,s)||(i(s),t&&t())},[n,r,t]);return CS(o),[n,o]}function NOe(r,e,t){const[n,i]=TOe(r,e,t);return CS(function(){const s=r.getHandlerId();if(s!=null)return r.subscribeToStateChange(i,{handlerIds:[s]})},[r,i]),n}function nle(r,e,t){return NOe(e,r||(()=>({})),()=>t.reconnect())}function ile(r,e){const t=[...e||[]];return e==null&&typeof r!="function"&&t.push(r),De.useMemo(()=>typeof r=="function"?r():r,t)}function AOe(r){return De.useMemo(()=>r.hooks.dragSource(),[r])}function OOe(r){return De.useMemo(()=>r.hooks.dragPreview(),[r])}let aB=!1,lB=!1;class ROe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){gr(!aB,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return aB=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{aB=!1}}isDragging(){if(!this.sourceId)return!1;gr(!lB,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return lB=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{lB=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let uB=!1;class MOe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;gr(!uB,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return uB=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{uB=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function POe(r,e,t){const n=t.getRegistry(),i=n.addTarget(r,e);return[i,()=>n.removeTarget(i)]}function FOe(r,e,t){const n=t.getRegistry(),i=n.addSource(r,e);return[i,()=>n.removeSource(i)]}function KV(r,e,t,n){let i=t?t.call(n,r,e):void 0;if(i!==void 0)return!!i;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const o=Object.keys(r),s=Object.keys(e);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<o.length;l++){const u=o[l];if(!a(u))return!1;const d=r[u],h=e[u];if(i=t?t.call(n,d,h,u):void 0,i===!1||i===void 0&&d!==h)return!1}return!0}function GV(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function BOe(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function WOe(r){return(e=null,t=null)=>{if(!De.isValidElement(e)){const o=e;return r(o,t),o}const n=e;return BOe(n),VOe(n,t?o=>r(o,t):r)}}function rle(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const i=WOe(n);e[t]=()=>i}}),e}function yX(r,e){typeof r=="function"?r(e):r.current=e}function VOe(r,e){const t=r.ref;return gr(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?De.cloneElement(r,{ref:n=>{yX(t,n),yX(e,n)}}):De.cloneElement(r,{ref:e})}class HOe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!KV(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!KV(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=rle({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,GV(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,GV(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class UOe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!KV(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=rle({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,GV(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function dD(){const{dragDropManager:r}=De.useContext(Gae);return gr(r!=null,"Expected drag drop context"),r}function zOe(r,e){const t=dD(),n=De.useMemo(()=>new HOe(t.getBackend()),[t]);return CS(()=>(n.dragSourceOptions=r||null,n.reconnect(),()=>n.disconnectDragSource()),[n,r]),CS(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function $Oe(){const r=dD();return De.useMemo(()=>new ROe(r),[r])}class jOe{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,i=this.monitor,{isDragging:o}=n;return o?o(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:i}=e;i&&i(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function qOe(r,e,t){const n=De.useMemo(()=>new jOe(r,e,t),[e,t]);return De.useEffect(()=>{n.spec=r},[r]),n}function KOe(r){return De.useMemo(()=>{const e=r.type;return gr(e!=null,"spec.type must be defined"),e},[r])}function GOe(r,e,t){const n=dD(),i=qOe(r,e,t),o=KOe(r);CS(function(){if(o!=null){const[a,l]=FOe(o,i,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),l}},[n,e,t,i,o])}function YOe(r,e){const t=ile(r,e);gr(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=$Oe(),i=zOe(t.options,t.previewOptions);return GOe(t,n,i),[nle(t.collect,n,i),AOe(i),OOe(i)]}function ZOe(r){return De.useMemo(()=>r.hooks.dropTarget(),[r])}function XOe(r){const e=dD(),t=De.useMemo(()=>new UOe(e.getBackend()),[e]);return CS(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function QOe(){const r=dD();return De.useMemo(()=>new MOe(r),[r])}function JOe(r){const{accept:e}=r;return De.useMemo(()=>(gr(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class eRe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function tRe(r,e){const t=De.useMemo(()=>new eRe(r,e),[e]);return De.useEffect(()=>{t.spec=r},[r]),t}function nRe(r,e,t){const n=dD(),i=tRe(r,e),o=JOe(r);CS(function(){const[a,l]=POe(o,i,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),l},[n,e,i,t,o.map(s=>s.toString()).join("|")])}function iRe(r,e){const t=ile(r,e),n=QOe(),i=XOe(t.options);return nRe(t,n,i),[nle(t.collect,n,i),ZOe(i)]}function ole(r){let e=null;return()=>(e==null&&(e=r()),e)}function rRe(r,e){return r.filter(t=>t!==e)}function oRe(r,e){const t=new Set,n=o=>t.add(o);r.forEach(n),e.forEach(n);const i=[];return t.forEach(o=>i.push(o)),i}class sRe{enter(e){const t=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=oRe(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=rRe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class aRe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(t[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const sle="__NATIVE_FILE__",ale="__NATIVE_URL__",lle="__NATIVE_TEXT__",ule="__NATIVE_HTML__",wX=Object.freeze(Object.defineProperty({__proto__:null,FILE:sle,HTML:ule,TEXT:lle,URL:ale},Symbol.toStringTag,{value:"Module"}));function cB(r,e,t){const n=e.reduce((i,o)=>i||r.getData(o),"");return n??t}const YV={[sle]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[ule]:{exposeProperties:{html:(r,e)=>cB(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[ale]:{exposeProperties:{urls:(r,e)=>cB(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[lle]:{exposeProperties:{text:(r,e)=>cB(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function lRe(r,e){const t=YV[r];if(!t)throw new Error(`native type ${r} has no configuration`);const n=new aRe(t);return n.loadDataTransfer(e),n}function dB(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(YV).filter(t=>{const n=YV[t];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const uRe=ole(()=>/firefox/i.test(navigator.userAgent)),cle=ole(()=>!!window.safari);class SX{interpolate(e){const{xs:t,ys:n,c1s:i,c2s:o,c3s:s}=this;let a=t.length-1;if(e===t[a])return n[a];let l=0,u=s.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));const _=t[d];if(_<e)l=d+1;else if(_>e)u=d-1;else return n[d]}a=Math.max(0,u);const h=e-t[a],p=h*h;return n[a]+i[a]*h+o[a]*p+s[a]*h*p}constructor(e,t){const{length:n}=e,i=[];for(let _=0;_<n;_++)i.push(_);i.sort((_,C)=>e[_]<e[C]?-1:1);const o=[],s=[];let a,l;for(let _=0;_<n-1;_++)a=e[_+1]-e[_],l=t[_+1]-t[_],o.push(a),s.push(l/a);const u=[s[0]];for(let _=0;_<o.length-1;_++){const C=s[_],S=s[_+1];if(C*S<=0)u.push(0);else{a=o[_];const x=o[_+1],T=a+x;u.push(3*T/((T+x)/C+(T+a)/S))}}u.push(s[s.length-1]);const d=[],h=[];let p;for(let _=0;_<u.length-1;_++){p=s[_];const C=u[_],S=1/o[_],x=C+u[_+1]-p-p;d.push((p-C-x)*S),h.push(x*S*S)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=d,this.c3s=h}}const cRe=1;function dle(r){const e=r.nodeType===cRe?r:r.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function nO(r){return{x:r.clientX,y:r.clientY}}function dRe(r){var e;return r.nodeName==="IMG"&&(uRe()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function hRe(r,e,t,n){let i=r?e.width:t,o=r?e.height:n;return cle()&&r&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function fRe(r,e,t,n,i){const o=dRe(e),a=dle(o?r:e),l={x:t.x-a.x,y:t.y-a.y},{offsetWidth:u,offsetHeight:d}=r,{anchorX:h,anchorY:p}=n,{dragPreviewWidth:_,dragPreviewHeight:C}=hRe(o,e,u,d),S=()=>{let Q=new SX([0,.5,1],[l.y,l.y/d*C,l.y+C-d]).interpolate(p);return cle()&&o&&(Q+=(window.devicePixelRatio-1)*C),Q},x=()=>new SX([0,.5,1],[l.x,l.x/u*_,l.x+_-u]).interpolate(h),{offsetX:T,offsetY:k}=i,M=T===0||T,W=k===0||k;return{x:M?T:x(),y:W?k:S()}}class gRe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function pRe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function EX(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){pRe(r,i,t[i])})}return r}class mRe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const i=s=>this.handleDragStart(s,e),o=s=>this.handleSelectStart(s);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=s=>this.handleDragEnter(s,e),i=s=>this.handleDragOver(s,e),o=s=>this.handleDrop(s,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",i),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return EX({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return EX({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(wX).some(t=>wX[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=lRe(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&dle(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const s=nO(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:a}=i,l=dB(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),p=this.sourcePreviewNodes.get(d)||h;if(p){const{anchorX:_,anchorY:C,offsetX:S,offsetY:x}=this.getCurrentSourcePreviewNodeOptions(),M=fRe(h,p,s,{anchorX:_,anchorY:C},{offsetX:S,offsetY:x});a.setDragImage(p,M.x,M.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=dB(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:nO(i)}),o.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=nO(i),this.scheduleHover(o),(o||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else dB(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:nO(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new gRe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new sRe(this.isNodeInDocument)}}const _Re=function(e,t,n){return new mRe(e,t,n)},vRe=({onClick:r,classNames:e="",renderStatus:t})=>{const[n,i]=De.useState(!1),o=()=>{i(!0)},s=()=>{i(!1)};return me.createElement("div",{role:"button",className:e,onClick:r,onMouseOver:o,onMouseOut:s},t==null?void 0:t(n))};var bRe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const CRe=Ri("tab"),rF=Gt(CRe,"item"),ZV=li(rF,"active"),yRe=Gt(rF,"label"),wRe=Gt(rF,"extra");function hle(r){var{tab:e,active:t}=r,n=bRe(r,["tab","active"]);const{name:i,closable:o,id:s,icon:a,status:l}=e,{onCloseTab:u,onSelectTab:d,onContextMenu:h,onDrag:p}=n,_=De.useRef(null),C=M=>{M.preventDefault(),h==null||h(M,e)},[,S]=YOe({collect:M=>({isDragging:M.isDragging()}),type:"DND_NODE",item:e}),[,x]=iRe({accept:"DND_NODE",hover(M,W){if(!_.current)return;const F=_.current,Q=F==null?void 0:F.getBoundingClientRect(),z=(Q.right-Q.left)/2,G=W.getClientOffset().x-Q.left,Y={hoverMiddleX:z,hoverClientX:G};p==null||p(M,e,Y)}});S(x(_));const T=M=>typeof M=="string"?me.createElement(go,{type:M}):M,k=(M,W)=>{if(M&&!W){if(typeof M=="function")return M(e);switch(M){case"edited":return me.createElement(go,{type:"primitive-dot"});default:return me.createElement(go,{type:"close"})}}return me.createElement(go,{type:"close"})};return me.createElement("div",{ref:_,className:oi(rF,{[ZV]:t}),onClick:M=>d==null?void 0:d(s),onContextMenu:C},a&&me.createElement("span",{className:yRe},T(a)),i,(typeof o>"u"||o)&&me.createElement(vRe,{classNames:wRe,onClick:M=>{M.stopPropagation(),u==null||u(s)},renderStatus:M=>k(l,M)}))}const XV=Ri("tabs"),SRe=Gt(XV,"header");function yj(r){var e;const{role:t,activeTab:n,className:i,data:o=[],type:s="line",style:a,onMoveTab:l,onCloseTab:u,onSelectTab:d,onContextMenu:h}=r,p=De.useRef(null),_=De.useRef(null),C=De.useCallback((x,T)=>{const k=o[x];l==null||l(aAe(o,{$splice:[[x,1],[T,0,k]]}))},[o]),S=(x,T,k)=>{const M=o.indexOf(x),W=o.indexOf(T),{hoverClientX:F,hoverMiddleX:Q}=k;M!==W&&(M<W&&F<Q||M>W&&F>Q||C==null||C(M,W))};return De.useEffect(()=>{var x,T;const k=(x=p.current)===null||x===void 0?void 0:x.querySelector(`.${ZV}`);if(k){const M=((T=p.current)===null||T===void 0?void 0:T.clientWidth)||0,W=k.offsetLeft;W>M&&setTimeout(()=>{var F;(F=_.current)===null||F===void 0||F.scrollTo(W+k.clientWidth)},0)}},[(e=p.current)===null||e===void 0?void 0:e.querySelector(`.${ZV}`)]),me.createElement(EOe,{backend:_Re,context:window},me.createElement("div",{style:a,className:oi(XV,li(XV,s),i),role:t,ref:p},me.createElement(cD,{className:SRe,direction:wx.horizontal,ref:_,trackStyle:{height:3}},o.map((x,T)=>me.createElement(hle,{key:x.id,active:n===x.id,tab:x,onDrag:S,onCloseTab:u,onContextMenu:h,onSelectTab:d})))))}const wj=Ri("tree"),M2=Gt(wj,"treenode"),ERe=li(M2,"active"),LRe=li(M2,"open"),xRe=li(M2,"close"),fle=Gt(wj,"indent"),DRe=Gt(fle,"guide"),IRe=Gt(M2,"title"),kRe=8,TRe=({data:r,indent:e,className:t,name:n,renderIcon:i,renderTitle:o,draggable:s,onContextMenu:a,onClick:l,onNodeDragStart:u,onNodeDragEnter:d,onNodeDragOver:h,onNodeDrop:p,onNodeDragEnd:_})=>{const C=r.id,S=De.useRef(null),x=Q=>{Q.stopPropagation(),u==null||u(Q,r);try{Q.dataTransfer.setData("text/plain","")}catch{}},T=Q=>{Q.preventDefault(),Q.stopPropagation(),d==null||d(Q,r)},k=Q=>{Q.preventDefault(),Q.stopPropagation(),h==null||h(Q,r)},M=Q=>{Q.preventDefault(),Q.stopPropagation(),p==null||p(Q,r)},W=Q=>{Q.stopPropagation(),_==null||_(Q,r)},F=`${e?e+"_":""}${r.id}`;return me.createElement("div",{ref:S,key:`${C}-${e}`,tabIndex:0,"data-indent":e,"data-key":C,"data-id":`mo_treeNode_${F}`,className:t,title:n,draggable:s,onContextMenu:a,onClick:l,onDragStart:x,onDragOver:k,onDragEnter:T,onDragEnd:W,onDrop:M},me.createElement("div",{className:fle,style:{width:kRe*e}},new Array(e).fill("").map((Q,z)=>me.createElement("div",{key:z,className:DRe}))),i(),me.createElement("span",{className:IRe},o()))};var hB,LX;function NRe(){if(LX)return hB;LX=1;function r(){this.__data__=[],this.size=0}return hB=r,hB}var fB,xX;function Sj(){if(xX)return fB;xX=1;function r(e,t){return e===t||e!==e&&t!==t}return fB=r,fB}var gB,DX;function oF(){if(DX)return gB;DX=1;var r=Sj();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return gB=e,gB}var pB,IX;function ARe(){if(IX)return pB;IX=1;var r=oF(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,s=r(o,i);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return pB=n,pB}var mB,kX;function ORe(){if(kX)return mB;kX=1;var r=oF();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return mB=e,mB}var _B,TX;function RRe(){if(TX)return _B;TX=1;var r=oF();function e(t){return r(this.__data__,t)>-1}return _B=e,_B}var vB,NX;function MRe(){if(NX)return vB;NX=1;var r=oF();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return vB=e,vB}var bB,AX;function sF(){if(AX)return bB;AX=1;var r=NRe(),e=ARe(),t=ORe(),n=RRe(),i=MRe();function o(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,bB=o,bB}var CB,OX;function PRe(){if(OX)return CB;OX=1;var r=sF();function e(){this.__data__=new r,this.size=0}return CB=e,CB}var yB,RX;function FRe(){if(RX)return yB;RX=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return yB=r,yB}var wB,MX;function BRe(){if(MX)return wB;MX=1;function r(e){return this.__data__.get(e)}return wB=r,wB}var SB,PX;function WRe(){if(PX)return SB;PX=1;function r(e){return this.__data__.has(e)}return SB=r,SB}var EB,FX;function gle(){if(FX)return EB;FX=1;var r=typeof ku=="object"&&ku&&ku.Object===Object&&ku;return EB=r,EB}var LB,BX;function o0(){if(BX)return LB;BX=1;var r=gle(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return LB=t,LB}var xB,WX;function P2(){if(WX)return xB;WX=1;var r=o0(),e=r.Symbol;return xB=e,xB}var DB,VX;function VRe(){if(VX)return DB;VX=1;var r=P2(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(s){var a=t.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var d=n.call(s);return u&&(a?s[i]=l:delete s[i]),d}return DB=o,DB}var IB,HX;function HRe(){if(HX)return IB;HX=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return IB=t,IB}var kB,UX;function F2(){if(UX)return kB;UX=1;var r=P2(),e=VRe(),t=HRe(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function s(a){return a==null?a===void 0?i:n:o&&o in Object(a)?e(a):t(a)}return kB=s,kB}var TB,zX;function aE(){if(zX)return TB;zX=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return TB=r,TB}var NB,$X;function ple(){if($X)return NB;$X=1;var r=F2(),e=aE(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var l=r(a);return l==n||l==i||l==t||l==o}return NB=s,NB}var AB,jX;function URe(){if(jX)return AB;jX=1;var r=o0(),e=r["__core-js_shared__"];return AB=e,AB}var OB,qX;function zRe(){if(qX)return OB;qX=1;var r=URe(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return OB=t,OB}var RB,KX;function mle(){if(KX)return RB;KX=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return RB=t,RB}var MB,GX;function $Re(){if(GX)return MB;GX=1;var r=ple(),e=zRe(),t=aE(),n=mle(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,l=s.toString,u=a.hasOwnProperty,d=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!t(p)||e(p))return!1;var _=r(p)?d:o;return _.test(n(p))}return MB=h,MB}var PB,YX;function jRe(){if(YX)return PB;YX=1;function r(e,t){return e==null?void 0:e[t]}return PB=r,PB}var FB,ZX;function lE(){if(ZX)return FB;ZX=1;var r=$Re(),e=jRe();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return FB=t,FB}var BB,XX;function Ej(){if(XX)return BB;XX=1;var r=lE(),e=o0(),t=r(e,"Map");return BB=t,BB}var WB,QX;function aF(){if(QX)return WB;QX=1;var r=lE(),e=r(Object,"create");return WB=e,WB}var VB,JX;function qRe(){if(JX)return VB;JX=1;var r=aF();function e(){this.__data__=r?r(null):{},this.size=0}return VB=e,VB}var HB,eQ;function KRe(){if(eQ)return HB;eQ=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return HB=r,HB}var UB,tQ;function GRe(){if(tQ)return UB;tQ=1;var r=aF(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var s=this.__data__;if(r){var a=s[o];return a===e?void 0:a}return n.call(s,o)?s[o]:void 0}return UB=i,UB}var zB,nQ;function YRe(){if(nQ)return zB;nQ=1;var r=aF(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return zB=n,zB}var $B,iQ;function ZRe(){if(iQ)return $B;iQ=1;var r=aF(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return $B=t,$B}var jB,rQ;function XRe(){if(rQ)return jB;rQ=1;var r=qRe(),e=KRe(),t=GRe(),n=YRe(),i=ZRe();function o(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,jB=o,jB}var qB,oQ;function QRe(){if(oQ)return qB;oQ=1;var r=XRe(),e=sF(),t=Ej();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return qB=n,qB}var KB,sQ;function JRe(){if(sQ)return KB;sQ=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return KB=r,KB}var GB,aQ;function lF(){if(aQ)return GB;aQ=1;var r=JRe();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return GB=e,GB}var YB,lQ;function eMe(){if(lQ)return YB;lQ=1;var r=lF();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return YB=e,YB}var ZB,uQ;function tMe(){if(uQ)return ZB;uQ=1;var r=lF();function e(t){return r(this,t).get(t)}return ZB=e,ZB}var XB,cQ;function nMe(){if(cQ)return XB;cQ=1;var r=lF();function e(t){return r(this,t).has(t)}return XB=e,XB}var QB,dQ;function iMe(){if(dQ)return QB;dQ=1;var r=lF();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return QB=e,QB}var JB,hQ;function Lj(){if(hQ)return JB;hQ=1;var r=QRe(),e=eMe(),t=tMe(),n=nMe(),i=iMe();function o(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var u=s[a];this.set(u[0],u[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,JB=o,JB}var e8,fQ;function rMe(){if(fQ)return e8;fQ=1;var r=sF(),e=Ej(),t=Lj(),n=200;function i(o,s){var a=this.__data__;if(a instanceof r){var l=a.__data__;if(!e||l.length<n-1)return l.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(o,s),this.size=a.size,this}return e8=i,e8}var t8,gQ;function xj(){if(gQ)return t8;gQ=1;var r=sF(),e=PRe(),t=FRe(),n=BRe(),i=WRe(),o=rMe();function s(a){var l=this.__data__=new r(a);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=o,t8=s,t8}var n8,pQ;function oMe(){if(pQ)return n8;pQ=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return n8=r,n8}var i8,mQ;function sMe(){if(mQ)return i8;mQ=1;var r=lE(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return i8=e,i8}var r8,_Q;function _le(){if(_Q)return r8;_Q=1;var r=sMe();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return r8=e,r8}var o8,vQ;function Dj(){if(vQ)return o8;vQ=1;var r=_le(),e=Sj(),t=Object.prototype,n=t.hasOwnProperty;function i(o,s,a){var l=o[s];(!(n.call(o,s)&&e(l,a))||a===void 0&&!(s in o))&&r(o,s,a)}return o8=i,o8}var s8,bQ;function uF(){if(bQ)return s8;bQ=1;var r=Dj(),e=_le();function t(n,i,o,s){var a=!o;o||(o={});for(var l=-1,u=i.length;++l<u;){var d=i[l],h=s?s(o[d],n[d],d,o,n):void 0;h===void 0&&(h=n[d]),a?e(o,d,h):r(o,d,h)}return o}return s8=t,s8}var a8,CQ;function aMe(){if(CQ)return a8;CQ=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return a8=r,a8}var l8,yQ;function uE(){if(yQ)return l8;yQ=1;function r(e){return e!=null&&typeof e=="object"}return l8=r,l8}var u8,wQ;function lMe(){if(wQ)return u8;wQ=1;var r=F2(),e=uE(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return u8=n,u8}var c8,SQ;function vle(){if(SQ)return c8;SQ=1;var r=lMe(),e=uE(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,o=r(function(){return arguments}())?r:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return c8=o,c8}var d8,EQ;function i1(){if(EQ)return d8;EQ=1;var r=Array.isArray;return d8=r,d8}var Vk={exports:{}},h8,LQ;function uMe(){if(LQ)return h8;LQ=1;function r(){return!1}return h8=r,h8}Vk.exports;var xQ;function Ij(){return xQ||(xQ=1,function(r,e){var t=o0(),n=uMe(),i=e&&!e.nodeType&&e,o=i&&!0&&r&&!r.nodeType&&r,s=o&&o.exports===i,a=s?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||n;r.exports=u}(Vk,Vk.exports)),Vk.exports}var f8,DQ;function kj(){if(DQ)return f8;DQ=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return f8=t,f8}var g8,IQ;function Tj(){if(IQ)return g8;IQ=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return g8=e,g8}var p8,kQ;function cMe(){if(kQ)return p8;kQ=1;var r=F2(),e=Tj(),t=uE(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",_="[object Set]",C="[object String]",S="[object WeakMap]",x="[object ArrayBuffer]",T="[object DataView]",k="[object Float32Array]",M="[object Float64Array]",W="[object Int8Array]",F="[object Int16Array]",Q="[object Int32Array]",z="[object Uint8Array]",$="[object Uint8ClampedArray]",G="[object Uint16Array]",Y="[object Uint32Array]",I={};I[k]=I[M]=I[W]=I[F]=I[Q]=I[z]=I[$]=I[G]=I[Y]=!0,I[n]=I[i]=I[x]=I[o]=I[T]=I[s]=I[a]=I[l]=I[u]=I[d]=I[h]=I[p]=I[_]=I[C]=I[S]=!1;function D(O){return t(O)&&e(O.length)&&!!I[r(O)]}return p8=D,p8}var m8,TQ;function Nj(){if(TQ)return m8;TQ=1;function r(e){return function(t){return e(t)}}return m8=r,m8}var Hk={exports:{}};Hk.exports;var NQ;function Aj(){return NQ||(NQ=1,function(r,e){var t=gle(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,s=o&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();r.exports=a}(Hk,Hk.exports)),Hk.exports}var _8,AQ;function ble(){if(AQ)return _8;AQ=1;var r=cMe(),e=Nj(),t=Aj(),n=t&&t.isTypedArray,i=n?e(n):r;return _8=i,_8}var v8,OQ;function Cle(){if(OQ)return v8;OQ=1;var r=aMe(),e=vle(),t=i1(),n=Ij(),i=kj(),o=ble(),s=Object.prototype,a=s.hasOwnProperty;function l(u,d){var h=t(u),p=!h&&e(u),_=!h&&!p&&n(u),C=!h&&!p&&!_&&o(u),S=h||p||_||C,x=S?r(u.length,String):[],T=x.length;for(var k in u)(d||a.call(u,k))&&!(S&&(k=="length"||_&&(k=="offset"||k=="parent")||C&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,T)))&&x.push(k);return x}return v8=l,v8}var b8,RQ;function Oj(){if(RQ)return b8;RQ=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return b8=e,b8}var C8,MQ;function yle(){if(MQ)return C8;MQ=1;function r(e,t){return function(n){return e(t(n))}}return C8=r,C8}var y8,PQ;function dMe(){if(PQ)return y8;PQ=1;var r=yle(),e=r(Object.keys,Object);return y8=e,y8}var w8,FQ;function hMe(){if(FQ)return w8;FQ=1;var r=Oj(),e=dMe(),t=Object.prototype,n=t.hasOwnProperty;function i(o){if(!r(o))return e(o);var s=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&s.push(a);return s}return w8=i,w8}var S8,BQ;function wle(){if(BQ)return S8;BQ=1;var r=ple(),e=Tj();function t(n){return n!=null&&e(n.length)&&!r(n)}return S8=t,S8}var E8,WQ;function cF(){if(WQ)return E8;WQ=1;var r=Cle(),e=hMe(),t=wle();function n(i){return t(i)?r(i):e(i)}return E8=n,E8}var L8,VQ;function fMe(){if(VQ)return L8;VQ=1;var r=uF(),e=cF();function t(n,i){return n&&r(i,e(i),n)}return L8=t,L8}var x8,HQ;function gMe(){if(HQ)return x8;HQ=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return x8=r,x8}var D8,UQ;function pMe(){if(UQ)return D8;UQ=1;var r=aE(),e=Oj(),t=gMe(),n=Object.prototype,i=n.hasOwnProperty;function o(s){if(!r(s))return t(s);var a=e(s),l=[];for(var u in s)u=="constructor"&&(a||!i.call(s,u))||l.push(u);return l}return D8=o,D8}var I8,zQ;function Rj(){if(zQ)return I8;zQ=1;var r=Cle(),e=pMe(),t=wle();function n(i){return t(i)?r(i,!0):e(i)}return I8=n,I8}var k8,$Q;function mMe(){if($Q)return k8;$Q=1;var r=uF(),e=Rj();function t(n,i){return n&&r(i,e(i),n)}return k8=t,k8}var Uk={exports:{}};Uk.exports;var jQ;function _Me(){return jQ||(jQ=1,function(r,e){var t=o0(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var h=u.length,p=a?a(h):new u.constructor(h);return u.copy(p),p}r.exports=l}(Uk,Uk.exports)),Uk.exports}var T8,qQ;function vMe(){if(qQ)return T8;qQ=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return T8=r,T8}var N8,KQ;function bMe(){if(KQ)return N8;KQ=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=0,s=[];++n<i;){var a=e[n];t(a,n,e)&&(s[o++]=a)}return s}return N8=r,N8}var A8,GQ;function Sle(){if(GQ)return A8;GQ=1;function r(){return[]}return A8=r,A8}var O8,YQ;function Mj(){if(YQ)return O8;YQ=1;var r=bMe(),e=Sle(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(s){return s==null?[]:(s=Object(s),r(i(s),function(a){return n.call(s,a)}))}:e;return O8=o,O8}var R8,ZQ;function CMe(){if(ZQ)return R8;ZQ=1;var r=uF(),e=Mj();function t(n,i){return r(n,e(n),i)}return R8=t,R8}var M8,XQ;function Ele(){if(XQ)return M8;XQ=1;function r(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}return M8=r,M8}var P8,QQ;function Lle(){if(QQ)return P8;QQ=1;var r=yle(),e=r(Object.getPrototypeOf,Object);return P8=e,P8}var F8,JQ;function xle(){if(JQ)return F8;JQ=1;var r=Ele(),e=Lle(),t=Mj(),n=Sle(),i=Object.getOwnPropertySymbols,o=i?function(s){for(var a=[];s;)r(a,t(s)),s=e(s);return a}:n;return F8=o,F8}var B8,eJ;function yMe(){if(eJ)return B8;eJ=1;var r=uF(),e=xle();function t(n,i){return r(n,e(n),i)}return B8=t,B8}var W8,tJ;function Dle(){if(tJ)return W8;tJ=1;var r=Ele(),e=i1();function t(n,i,o){var s=i(n);return e(n)?s:r(s,o(n))}return W8=t,W8}var V8,nJ;function Ile(){if(nJ)return V8;nJ=1;var r=Dle(),e=Mj(),t=cF();function n(i){return r(i,t,e)}return V8=n,V8}var H8,iJ;function kle(){if(iJ)return H8;iJ=1;var r=Dle(),e=xle(),t=Rj();function n(i){return r(i,t,e)}return H8=n,H8}var U8,rJ;function wMe(){if(rJ)return U8;rJ=1;var r=lE(),e=o0(),t=r(e,"DataView");return U8=t,U8}var z8,oJ;function SMe(){if(oJ)return z8;oJ=1;var r=lE(),e=o0(),t=r(e,"Promise");return z8=t,z8}var $8,sJ;function EMe(){if(sJ)return $8;sJ=1;var r=lE(),e=o0(),t=r(e,"Set");return $8=t,$8}var j8,aJ;function LMe(){if(aJ)return j8;aJ=1;var r=lE(),e=o0(),t=r(e,"WeakMap");return j8=t,j8}var q8,lJ;function dF(){if(lJ)return q8;lJ=1;var r=wMe(),e=Ej(),t=SMe(),n=EMe(),i=LMe(),o=F2(),s=mle(),a="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",_=s(r),C=s(e),S=s(t),x=s(n),T=s(i),k=o;return(r&&k(new r(new ArrayBuffer(1)))!=p||e&&k(new e)!=a||t&&k(t.resolve())!=u||n&&k(new n)!=d||i&&k(new i)!=h)&&(k=function(M){var W=o(M),F=W==l?M.constructor:void 0,Q=F?s(F):"";if(Q)switch(Q){case _:return p;case C:return a;case S:return u;case x:return d;case T:return h}return W}),q8=k,q8}var K8,uJ;function xMe(){if(uJ)return K8;uJ=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return K8=t,K8}var G8,cJ;function Tle(){if(cJ)return G8;cJ=1;var r=o0(),e=r.Uint8Array;return G8=e,G8}var Y8,dJ;function Pj(){if(dJ)return Y8;dJ=1;var r=Tle();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return Y8=e,Y8}var Z8,hJ;function DMe(){if(hJ)return Z8;hJ=1;var r=Pj();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Z8=e,Z8}var X8,fJ;function IMe(){if(fJ)return X8;fJ=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return X8=e,X8}var Q8,gJ;function kMe(){if(gJ)return Q8;gJ=1;var r=P2(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return Q8=n,Q8}var J8,pJ;function TMe(){if(pJ)return J8;pJ=1;var r=Pj();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return J8=e,J8}var e7,mJ;function NMe(){if(mJ)return e7;mJ=1;var r=Pj(),e=DMe(),t=IMe(),n=kMe(),i=TMe(),o="[object Boolean]",s="[object Date]",a="[object Map]",l="[object Number]",u="[object RegExp]",d="[object Set]",h="[object String]",p="[object Symbol]",_="[object ArrayBuffer]",C="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",T="[object Int8Array]",k="[object Int16Array]",M="[object Int32Array]",W="[object Uint8Array]",F="[object Uint8ClampedArray]",Q="[object Uint16Array]",z="[object Uint32Array]";function $(G,Y,I){var D=G.constructor;switch(Y){case _:return r(G);case o:case s:return new D(+G);case C:return e(G,I);case S:case x:case T:case k:case M:case W:case F:case Q:case z:return i(G,I);case a:return new D;case l:case h:return new D(G);case u:return t(G);case d:return new D;case p:return n(G)}}return e7=$,e7}var t7,_J;function AMe(){if(_J)return t7;_J=1;var r=aE(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}}();return t7=t,t7}var n7,vJ;function OMe(){if(vJ)return n7;vJ=1;var r=AMe(),e=Lle(),t=Oj();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return n7=n,n7}var i7,bJ;function RMe(){if(bJ)return i7;bJ=1;var r=dF(),e=uE(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return i7=n,i7}var r7,CJ;function MMe(){if(CJ)return r7;CJ=1;var r=RMe(),e=Nj(),t=Aj(),n=t&&t.isMap,i=n?e(n):r;return r7=i,r7}var o7,yJ;function PMe(){if(yJ)return o7;yJ=1;var r=dF(),e=uE(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return o7=n,o7}var s7,wJ;function FMe(){if(wJ)return s7;wJ=1;var r=PMe(),e=Nj(),t=Aj(),n=t&&t.isSet,i=n?e(n):r;return s7=i,s7}var a7,SJ;function BMe(){if(SJ)return a7;SJ=1;var r=xj(),e=oMe(),t=Dj(),n=fMe(),i=mMe(),o=_Me(),s=vMe(),a=CMe(),l=yMe(),u=Ile(),d=kle(),h=dF(),p=xMe(),_=NMe(),C=OMe(),S=i1(),x=Ij(),T=MMe(),k=aE(),M=FMe(),W=cF(),F=Rj(),Q=1,z=2,$=4,G="[object Arguments]",Y="[object Array]",I="[object Boolean]",D="[object Date]",O="[object Error]",V="[object Function]",j="[object GeneratorFunction]",ne="[object Map]",re="[object Number]",se="[object Object]",ie="[object RegExp]",A="[object Set]",te="[object String]",_e="[object Symbol]",de="[object WeakMap]",Me="[object ArrayBuffer]",He="[object DataView]",st="[object Float32Array]",Dt="[object Float64Array]",Rt="[object Int8Array]",lt="[object Int16Array]",xt="[object Int32Array]",zt="[object Uint8Array]",wt="[object Uint8ClampedArray]",dn="[object Uint16Array]",sn="[object Uint32Array]",Pt={};Pt[G]=Pt[Y]=Pt[Me]=Pt[He]=Pt[I]=Pt[D]=Pt[st]=Pt[Dt]=Pt[Rt]=Pt[lt]=Pt[xt]=Pt[ne]=Pt[re]=Pt[se]=Pt[ie]=Pt[A]=Pt[te]=Pt[_e]=Pt[zt]=Pt[wt]=Pt[dn]=Pt[sn]=!0,Pt[O]=Pt[V]=Pt[de]=!1;function ei(xn,un,Ft,Bt,Tt,mt){var Qt,fn=un&Q,We=un&z,dt=un&$;if(Ft&&(Qt=Tt?Ft(xn,Bt,Tt,mt):Ft(xn)),Qt!==void 0)return Qt;if(!k(xn))return xn;var oe=S(xn);if(oe){if(Qt=p(xn),!fn)return s(xn,Qt)}else{var U=h(xn),X=U==V||U==j;if(x(xn))return o(xn,fn);if(U==se||U==G||X&&!Tt){if(Qt=We||X?{}:C(xn),!fn)return We?l(xn,i(Qt,xn)):a(xn,n(Qt,xn))}else{if(!Pt[U])return Tt?xn:{};Qt=_(xn,U,fn)}}mt||(mt=new r);var we=mt.get(xn);if(we)return we;mt.set(xn,Qt),M(xn)?xn.forEach(function(ze){Qt.add(ei(ze,un,Ft,ze,xn,mt))}):T(xn)&&xn.forEach(function(ze,bt){Qt.set(bt,ei(ze,un,Ft,bt,xn,mt))});var Te=dt?We?d:u:We?F:W,qe=oe?void 0:Te(xn);return e(qe||xn,function(ze,bt){qe&&(bt=ze,ze=xn[bt]),t(Qt,bt,ei(ze,un,Ft,bt,xn,mt))}),Qt}return a7=ei,a7}var l7,EJ;function WMe(){if(EJ)return l7;EJ=1;var r=BMe(),e=1,t=4;function n(i){return r(i,e|t)}return l7=n,l7}var VMe=WMe();const _m=xm(VMe);class iR{constructor(e){this.hashMap=new Map,this.count=0,this.getHashMap=t=>this.hashMap.get(t.toString())||null,this.removeHashMap=t=>{var n;const i=this.hashMap.get(t.toString());i&&(this.hashMap.delete(t.toString()),!((n=i.children)===null||n===void 0)&&n.length&&i.children.forEach(o=>{this.removeHashMap(o)}))},this.getNode=t=>{const n=this.getHashMap(t);return(n==null?void 0:n.node)||null},this.removeNode=t=>{var n,i;const o=this.getHashMap(t);if(o){const{node:s,parent:a}=o;if(!a)return Ai.error("You're going to remove a root node"),null;const l=this.getHashMap(a),u=l==null?void 0:l.node;if(u)return(n=u.children)===null||n===void 0||n.splice(u.children.indexOf(s),1),(i=l.children)===null||i===void 0||i.splice(l.children.indexOf(t.toString()),1),this.removeHashMap(t),this.updateChildren(l.children),s}return null},this.updateNode=(t,n)=>{const i=this.getNode(t);return i?(Object.assign(i,n),i):null},this.insertNode=(t,n,i)=>{const o=this.getHashMap(n);if(o){const s=o.node,a=this.generate(t);if(a.parent=n.toString(),s.children=s.children||[],o.children=o.children||[],s.children.splice(i,0,t),o.children.splice(i,0,a.id),this.updateChildren(o.children),o.parent){const l=this.getHashMap(o.parent);l&&this.updateChildren(l.children)}return a}return null},this.insertBefore=(t,n)=>{const i=this.getHashMap(n);if(i){const o=i.parent;if(!o)return Ai.error("You're going to insert a obj before the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a)}}return null},this.insertAfter=(t,n)=>{const i=this.getHashMap(n);if(i){const o=i.parent;if(!o)return Ai.error("You're going to insert a obj after the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a+1)}}return null},this.prepend=(t,n)=>this.insertNode(t,n,0),this.append=(t,n)=>{const i=this.getHashMap(n);return i?(i.children=i.children||[],this.insertNode(t,n,i.children.length)):null},this.obj=_m(e),this.count=1,this.generate(this.obj)}addMap(e,t){if(this.hashMap.has(e)){Ai.error(`There is already a data whose key is ${e} in hashMap`);return}else this.hashMap.set(e,t),this.count+=1}generateChildren(e,t){const n=[];e.forEach(i=>{var o;const s={id:i.id.toString(),node:i};t.id&&(s.parent=t.id),this.addMap(i.id.toString(),s),n.push(i.id.toString()),!((o=i.children)===null||o===void 0)&&o.length&&this.generateChildren(i.children,s)}),t.children=n,n.forEach((i,o)=>{const s=this.hashMap.get(i);o>0&&(s.prev=n[o-1]),o<n.length-1&&(s.next=n[o+1])})}generate(e){var t;const n=e.id.toString(),i={id:n,node:e};return this.addMap(n,i),!((t=e.children)===null||t===void 0)&&t.length&&this.generateChildren(e.children,i),i}updateChildren(e=[]){e.forEach((t,n)=>{const i=this.getHashMap(t);i&&(i.prev=i.next=void 0,n>0&&(i.prev=e[n-1]),n<e.length-1&&(i.next=e[n+1]))})}}const hF=({className:r,data:e=[],draggable:t=!1,loadedKeys:n,expandKeys:i,activeKey:o,onExpand:s,onDropTree:a,onRightClick:l,renderTitle:u,onSelect:d,onLoadData:h,onTreeClick:p})=>{const[_,C]=De.useState([]),[S,x]=De.useState(null),[T,k]=De.useState([]),M=De.useRef(),W=De.useRef({x:0,y:0,dragNode:null,flattenTree:null}),F=De.useRef(null),Q=de=>!(!h||n!=null&&n.includes(de)),z=de=>{const Me=de.id.toString();Q(Me)&&(k(He=>{const st=He.concat();return st.push(Me),st}),h(de).finally(()=>{k(He=>{const st=He.concat(),Dt=st.indexOf(Me);return st.splice(Dt,1),st})}))},$=(de,Me)=>{const He=(i||_).concat(),st=He.findIndex(Dt=>Dt===de);st>-1?He.splice(st,1):He.push(de),s?s(He.concat(),Me):C(He.concat())},G=(de,Me)=>{Me.stopPropagation();const He=de.id.toString();x(He),de.isLeaf||(z(de),$(He,de)),d==null||d(de)},Y=(de,Me,He,st)=>Me?de||null:st?me.createElement(go,{type:"loading~spin"}):me.createElement(go,{type:He?"chevron-down":"chevron-right"}),I=(de,Me)=>{de.stopPropagation(),l==null||l(de,Me)},D=De.useCallback(de=>{ie(de,null,!0),window.removeEventListener("dragend",D)},[]),O=(de,Me)=>{W.current={x:de.clientX,y:de.clientY,dragNode:Me,flattenTree:new iR({id:Number.MAX_SAFE_INTEGER,children:e})};const He=Me.id.toString(),st=(i||_).indexOf(He);if(st>-1){const Dt=_.concat();Dt.splice(st,1),s?s(Dt,Me):C(Dt)}window.addEventListener("dragend",D)},V=Ao.debounce((de,Me)=>{const He=Me.id.toString(),st=(i||_).includes(He),Rt=W.current.dragNode.id.toString(),lt=He===Rt;!Me.isLeaf&&!lt&&!st&&!Q(He)&&$(He,Me)},300),j=de=>{const Me=de.id.toString(),He=document.querySelector(`div[data-key="${Me}"]`);let st=He;for(;st;){st.classList.contains("drag-over")||st.classList.add("drag-over");const Dt=st.nextElementSibling;(Dt==null?void 0:Dt.dataset.indent)===He.dataset.indent?st=null:st=Dt}},ne=()=>{var de;(de=F.current)===null||de===void 0||de.querySelectorAll(".drag-over").forEach(Me=>{Me.classList.remove("drag-over")})},re=de=>{var Me,He;const st=W.current.flattenTree,Dt=(Me=st.getHashMap(de.id))===null||Me===void 0?void 0:Me.parent;return(He=st.getHashMap(Dt))===null||He===void 0?void 0:He.node},se=(de,Me)=>{const He=Me.isLeaf?re(Me):Me;He!==M.current&&(ne(),M.current=He,j(He))},ie=(de,Me,He=!1)=>{ne(),M.current=void 0,W.current={x:0,y:0,dragNode:null,flattenTree:null}},A=(de,Me)=>{if(Me.isLeaf){const He=re(Me),st=re(W.current.dragNode),Dt=(He.key||He.id).toString(),Rt=(st.key||st.id).toString();if(Dt===Rt){W.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(W.current.dragNode,He)}else{const He=re(W.current.dragNode),st=(He.key||He.id).toString(),Dt=Me.id.toString(),lt=W.current.dragNode.id.toString();if(st===Dt||lt===Dt){W.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(W.current.dragNode,Me)}W.current={x:0,y:0,dragNode:null,flattenTree:null}},te=(de,Me)=>de.map((He,st)=>{const Dt=He.id.toString(),Rt=(i||_).includes(Dt),lt=T.includes(Dt),xt=S===Dt,zt=(u==null?void 0:u(He,st,!!He.isLeaf))||He.name,wt=typeof He.icon=="string"?me.createElement(go,{type:He.icon}):He.icon,dn=me.createElement(TRe,{key:`${Dt}-${Me}`,draggable:t,data:He,name:typeof zt=="string"?zt:void 0,indent:Me,className:oi(M2,xt&&ERe,Rt?LRe:xRe),renderIcon:()=>Y(wt,!!He.isLeaf,Rt,lt),renderTitle:()=>zt,onContextMenu:Pt=>I(Pt,He),onClick:Pt=>G(He,Pt),onNodeDragStart:t?O:void 0,onNodeDragEnter:t?V:void 0,onNodeDragOver:t?se:void 0,onNodeDragEnd:t?ie:void 0,onNodeDrop:t?A:void 0}),sn=Rt&&!lt&&te(He.children||[],Me+1);return[dn,sn]}),_e=()=>{x(null),p==null||p()};return De.useLayoutEffect(()=>{var de,Me;const He=[];for(e.forEach(st=>{He.push({paths:[st],data:st})});He.length;){const{paths:st,data:Dt}=He.pop();if((de=Dt.children)===null||de===void 0?void 0:de.find(lt=>lt.isEditable)){const lt=st.map(zt=>(z(zt),zt.id.toString())),xt=Array.from(new Set([...lt,...i||_]));s?s(xt,Dt):C(xt);break}else{const lt=((Me=Dt.children)===null||Me===void 0?void 0:Me.map(xt=>({paths:[...st,xt],data:xt})))||[];He.push(...lt)}}},[e]),De.useEffect(()=>{o&&x(o.toString())},[o]),me.createElement("div",{role:"tree",ref:F,draggable:t,onClick:_e,className:oi(wj,r)},te(e,0))};var HMe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const zk=r=>{const{visible:e=!0,children:t,className:n,style:i={}}=r,o=HMe(r,["visible","children","className","style"]);return me.createElement("div",Object.assign({className:n,style:Object.assign({display:e?void 0:"none"},i)},o),t)},UMe=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:s2,Breadcrumb:aie,Button:Qw,Checkbox:wme,Collapse:cie,get DirectionKind(){return wx},Display:zk,DropDown:QU,Icon:go,Input:JU,Item:Cve,List:mve,Menu:Rc,MenuItem:Cne,get MenuMode(){return LC},Modal:u2,MonacoEditor:fj,Option:Kae,Pane:Rb,Scrollbar:cD,Search:jae,Select:LN,SplitPane:IT,SubMenu:wne,Tab:hle,Tabs:yj,Toolbar:a2,Tooltip:jU,TreeView:hF,useContextMenu:BP,useContextView:Gx,useContextViewEle:i2},Symbol.toStringTag,{value:"Module"}));var $f;(function(r){r[r.EditorCore=0]="EditorCore",r[r.EditorContrib=100]="EditorContrib",r[r.WorkbenchContrib=200]="WorkbenchContrib",r[r.BuiltinExtension=300]="BuiltinExtension",r[r.ExternalExtension=400]="ExternalExtension"})($f||($f={}));const Nle={View:{value:E("view","View"),original:"View"},Help:{value:E("help","Help"),original:"Help"},Preferences:{value:E("preferences","Preferences"),original:"Preferences"},Developer:{value:E({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}};var zMe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class op{constructor(e){this.desc=e}}function $Me(r){const e=new Nt,t=new r,n=t.desc,{f1:i,menu:o,keybinding:s,description:a}=n,l=zMe(n,["f1","menu","keybinding","description"]);if(e.add(Yi.registerCommand({id:l.id,handler:(u,...d)=>t.run(u,...d),description:a})),Array.isArray(o)?e.add(Au.appendMenuItems(o.map(u=>({id:u.id,item:Object.assign({command:l},u)})))):o&&e.add(Au.appendMenuItem(o.id,Object.assign({command:l},o))),i&&(e.add(Au.appendMenuItem(wn.CommandPalette,{command:l,when:l.precondition})),e.add(Au.addCommand(l))),Array.isArray(s))for(const u of s)Rl.registerKeybindingRule(Object.assign(Object.assign({},u),{id:l.id,when:l.precondition?Xt.and(l.precondition,u.when):u.when}));else s&&Rl.registerKeybindingRule(Object.assign(Object.assign({},s),{id:l.id,when:l.precondition?Xt.and(l.precondition,s.when):s.when}));return e}const jMe=Object.freeze(Object.defineProperty({__proto__:null,Action2:op,KeyChord:_s,get KeybindingWeight(){return $f}},Symbol.toStringTag,{value:"Module"})),qMe="ko-KR",KMe="",GMe={"molecule.welcome":"Molecule   ",menubar:" ","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":" ","menu.newFile":" ","menu.newFolder":" ","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":" ","menu.selection":"","menu.selectAll":" ","menu.copyLineUp":"  ","menu.view":"","menu.commandPalette":" ","menu.openView":" ","menu.appearance":"","menu.showMenuBar":"  ","menu.showSideBar":"  ","menu.showSideBar.label":"    ","menu.showStatusBar":"  ","menu.showActivityBar":"  ","menu.hideActivityBar":"  ","menu.showPanel":" ","menu.showPanel.title":" ","menu.defaultProjectName":"  ","menu.run":"","menu.runTask":" ","menu.help":"","menu.about":"","menu.menuBarHorizontal":"   ","menu.menuBarVertical":"   ","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":" ","sidebar.explore.openEditor.group":"${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"  ","sidebar.explore.collapseFolders":"   ","sidebar.explore.toggleVertical":" ","sidebar.explore.saveAll":" ","sidebar.explore.actionDesc":"    ...","sidebar.explore.outlineMore":"  ...","toolbar.refresh":" ","toolbar.clearAll":" ","toolbar.collapseAll":" ","search.matchCase":"/ ","search.matchWholeWord":"  ","search.useRegularExpression":" ","search.preserveCase":"/ ","search.replaceAll":" ","panel.output.title":"","panel.toolbox.closePanel":" ","panel.toolbox.maximize":"  ","panel.toolbox.restoreSize":"  ","panel.problems.title":"","panel.problems.empty":"    .","notification.title":"","notification.title.no":"  .","editor.closeToRight":"   ","editor.closeToLeft":"   ","editor.closeAll":" ","editor.closeSaved":"  ","editor.closeOthers":"  ","editor.close":"","editor.actions.splitRight":" ","editor.showOpenEditors":"   ","contextmenu.rename":" ","contextmenu.delete":"","contextmenu.newFile":" ","contextmenu.newFolder":" ","contextmenu.removeFolder":" ","contextmenu.openToTheSide":" ","contextmenu.addFolderToSpace":"   ...","contextmenu.findInSpace":"  ...","contextmenu.download":"..."},YMe={id:qMe,name:KMe,source:GMe},ZMe="zh-CN",XMe="",QMe={"molecule.welcome":"!",menubar:"","menu.file":"","menu.settings":"","menu.account":"","menu.colorTheme":"","menu.newFile":"","menu.newFolder":"","menu.open":"","menu.edit":"","menu.undo":"","menu.redo":"","menu.selection":"","menu.selectAll":"","menu.copyLineUp":"","menu.view":"","menu.commandPalette":"","menu.openView":"","menu.appearance":"","menu.showMenuBar":"","menu.showAuxiliaryBar":"","menu.showSideBar":"","menu.showSideBar.label":"","menu.showStatusBar":"","menu.showActivityBar":"","menu.hideActivityBar":"","menu.showPanel":"","menu.showPanel.title":"","menu.defaultProjectName":"","menu.run":"","menu.runTask":"","menu.help":"","menu.about":"","menu.menuBarHorizontal":"","menu.menuBarVertical":"","sidebar.explore.folders":"","sidebar.explore.title":"","sidebar.explore.openEditor":"","sidebar.explore.openEditor.group":" ${i} ","sidebar.explore.outline":"","sidebar.search.title":"","sidebar.replace.placement":"","sidebar.explore.refresh":"","sidebar.explore.collapseFolders":"","sidebar.explore.toggleVertical":"","sidebar.explore.saveAll":"","sidebar.explore.actionDesc":"...","sidebar.explore.outlineMore":"...","toolbar.refresh":"","toolbar.clearAll":"","toolbar.collapseAll":"","search.matchCase":"","search.matchWholeWord":"","search.useRegularExpression":"","search.preserveCase":"","search.replaceAll":"","panel.output.title":"","panel.problems.title":"","panel.problems.empty":"","panel.toolbox.closePanel":"","panel.toolbox.maximize":"","panel.toolbox.restoreSize":"","notification.title":"","notification.title.no":"","notification.locale.title":", ","notification.locale.description":"","notification.locale.button":"","editor.closeToRight":"","editor.closeToLeft":"","editor.closeAll":"","editor.closeOthers":"","editor.closeSaved":"","editor.close":"","editor.actions.splitRight":"","editor.showOpenEditors":"","contextmenu.rename":"","contextmenu.delete":"","contextmenu.newFile":"","contextmenu.newFolder":"","contextmenu.removeFolder":"","contextmenu.openToTheSide":"","contextmenu.addFolderToSpace":"...","contextmenu.findInSpace":"...","contextmenu.download":"..."},JMe={id:ZMe,name:XMe,source:QMe},ePe="en",tPe="English",nPe={"molecule.welcome":"Welcome to Molecule",menubar:"Menu Bar","menu.file":"File","menu.settings":"Settings","menu.account":"Account","menu.colorTheme":"Color Theme","menu.newFile":"New File","menu.newFolder":"New Folder","menu.open":"Open","menu.edit":"Edit","menu.undo":"Undo","menu.redo":"Redo","menu.selection":"Selection","menu.selectAll":"Select All","menu.copyLineUp":"Copy Line Up","menu.view":"View","menu.commandPalette":"Command Palette","menu.openView":"Open View","menu.appearance":"Appearance","menu.showMenuBar":"Show Menu Bar","menu.showAuxiliaryBar":"Show Auxiliary Bar","menu.showSideBar":"Show Side Bar","menu.showSideBar.label":"Toggle Side Bar Visibility","menu.showStatusBar":"Show Status Bar","menu.showActivityBar":"Show Activity Bar","menu.hideActivityBar":"Hide Activity Bar","menu.showPanel":"Show Panel","menu.showPanel.title":"Toggle Panel","menu.defaultProjectName":"Default Project Name","menu.run":"Run","menu.runTask":"Run Task","menu.help":"Help","menu.about":"About","menu.menuBarHorizontal":"Menu Bar Horizontal Mode","menu.menuBarVertical":"Menu Bar Vertical Mode","sidebar.explore.folders":"Folders","sidebar.explore.title":"Explorer","sidebar.explore.openEditor":"Open Editors","sidebar.explore.openEditor.group":"Group ${i}","sidebar.explore.outline":"Outline","sidebar.search.title":"Search","sidebar.replace.placement":"Replace","sidebar.explore.refresh":"Refresh Explorer","sidebar.explore.collapseFolders":"Collapse Folders in Explorer","sidebar.explore.toggleVertical":"Toggle Vertical","sidebar.explore.saveAll":"Save All","sidebar.explore.actionDesc":"View and More Actions...","sidebar.explore.outlineMore":"More Actions...","toolbar.refresh":"Refresh","toolbar.clearAll":"Clear all","toolbar.collapseAll":"Collapse all","search.matchCase":"Match Case","search.matchWholeWord":"Match Whole Word","search.useRegularExpression":"Use Regular Expression","search.preserveCase":"Preserve Case","search.replaceAll":"Replace All","panel.output.title":"output","panel.toolbox.closePanel":"Close Panel","panel.toolbox.maximize":"Maximize Panel Size","panel.toolbox.restoreSize":"Restore Panel Size","panel.problems.title":"Problems","panel.problems.empty":"No problems have been detected in the workspace.","notification.title":"Notifications","notification.title.no":"No new notifications","notification.locale.title":"A reload is required for the change in display language to take effect.","notification.locale.description":"Press the confirm button to reload and change the display language.","notification.locale.button":"Confirm Reload","editor.closeToRight":"Close To Right","editor.closeToLeft":"Close To Left","editor.closeAll":"Close All","editor.closeSaved":"Close Saved","editor.closeOthers":"Close Others","editor.close":"Close","editor.actions.splitRight":"Split Editor Right","editor.showOpenEditors":"Show Opened Editors","contextmenu.rename":"Rename","contextmenu.delete":"Delete","contextmenu.newFile":"New File","contextmenu.newFolder":"New Folder","contextmenu.removeFolder":"Remove Folder","contextmenu.openToTheSide":"Open to the Side","contextmenu.addFolderToSpace":"Add Folder to Workspace...","contextmenu.findInSpace":"Find in Workspace...","contextmenu.download":"Download..."},iPe={id:ePe,name:tPe,source:nPe};var QV;(function(r){r.Theme="Themes",r.Normal="normal",r.Settings="settings",r.Locals="locales",r.Menus="menus",r.Workbench="workbench"})(QV||(QV={}));var Sx;(function(r){r.Languages="languages",r.Commands="commands",r.Configuration="configuration",r.Grammar="grammars",r.Themes="themes",r.IconTheme="iconThemes"})(Sx||(Sx={}));const rPe=YMe,oPe=JMe,Ale=iPe,Ole=[oPe,Ale,rPe],sPe={id:"ExtendsLocales",name:"Extends locales",contributes:{[Sx.Languages]:Ole},activate(){},dispose(){}},aPe=Ale.id;Ole.find(r=>r.id===aPe);var oP;(function(r){r.OnChange="localization.onchange"})(oP||(oP={}));var lPe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uPe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},JV;const eH=`${PP}.localeId`;let Sm=JV=class extends Vc{constructor(){super(),this.state={},this._locales=new Map}reset(){localStorage.removeItem(eH),this._current=void 0,this._locales.clear()}getLocales(){return Array.from(this._locales.values())}initialize(e,t){this.addLocales(e),this._locales.get(t)?this._current=this._locales.get(t):Ai.error(`Cannot initialize the locale with ${t}`)}getCurrentLocale(){return this._current&&Object.assign({},this._current)}getLocale(e){if(e)return this._locales.get(e)}removeLocale(e){const t=this._locales.get(e);if(t!==void 0){if(this._locales.size===1){Ai.error("You can't remove this Locale because there must have one locale at least");return}return this._current&&this._current.id===t.id&&(this._current=this._locales.values().next().value),this._locales.delete(e),t}}setCurrentLocale(e){if(this._current&&this._current.id===e)return!0;const t=this._locales.get(e);return t?(this.emit(oP.OnChange,this._current,t),this._current=t,localStorage.setItem(eH,t.id),!0):!1}transformLocaleData(e){const t=Object.assign({},e);if(e.source instanceof Map||(t.source=new Map(Object.entries(e.source))),t.inherit){const n=this._locales.get(t.inherit);n&&(t.source=new Map([...n.source,...t.source]))}return t}addLocales(e){if(e.length>0){const t=this._locales;e.forEach(n=>{const i=n.id;t.has(i)||t.set(i,this.transformLocaleData(n))})}}onChange(e){this.subscribe(oP.OnChange,e)}localize(e,t="",...n){let i=t;return this._current&&(i=this._current.source.get(e)||t),n.length&&n.forEach(o=>{i=i.replace(JV.LOCALIZE_REPLACED_WORD,o)}),i}};Sm.LOCALIZE_REPLACED_WORD="${i}";Sm=JV=lPe([Ur(),uPe("design:paramtypes",[])],Sm);function Kt(r,e,...t){return yt.resolve(Sm).localize(r,e,...t)}class HZe extends me.PureComponent{constructor(e){super(e),this.state={localeId:""},this.getValue=()=>{const{sourceKey:t,defaultValue:n=""}=this.props;return this.localeService?this.localeService.localize(t,n):n}}componentDidMount(){var e;this.update((e=this.localeService.getCurrentLocale())===null||e===void 0?void 0:e.id),this.localeService.onChange((t,n)=>{this.update(n.id)})}update(e){this.setState({localeId:e})}get localeService(){return yt.resolve(Sm)}render(){return this.getValue()}}var Ys;(function(r){r.OnCloseTab="editor.closeTab",r.OnCloseAll="editor.closeAll",r.OnCloseOther="editor.closeOther",r.OnCloseToLeft="editor.closeToLeft",r.OnCloseToRight="editor.closeToRight",r.OnMoveTab="editor.moveTab",r.OpenTab="editor.openTab",r.OnSelectTab="editor.selectTab",r.OnUpdateTab="editor.updateTab",r.onActionsClick="editor.actionsClick",r.OnSplitEditorRight="editor.splitEditorRight"})(Ys||(Ys={}));class Rle{constructor(e,t,n,i,o=[],s=[],a){this.id=e,this.data=i,this.menu=s,this.actions=o,this.tab=t,this.activeTab=n,this.editorInstance=a}}class Mle{constructor(e=null,t=[],n,i={}){this.current=e,this.groups=t,this.entry=n,this.editorOptions=i}}const cPe="modulepreload",dPe=function(r){return"/monaco-sql-languages/"+r},LJ={},vn=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=dPe(o),o in LJ)return;LJ[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":cPe,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};const hPe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class fPe extends ot{constructor(e,t={}){super(),this._onDidUpdate=this._register(new Fe),this._editor=e,this._options=e0(t,hPe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new le(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new le(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new le(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>le.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,o=this.ranges.length;i<o&&!t;i++){let s=this.ranges[i].range;n.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(RO(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}function gPe(r,e){return new pPe(r,e)}class pPe extends zse{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?bz(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=(a,l)=>e.fmr(a,l),o=(a,l)=>function(){const u=Array.prototype.slice.call(arguments,0);return l(a,u)};let s={};for(const a of n)s[a]=o(a,i);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function mPe(r){return Array.isArray(r)}function _Pe(r){return!mPe(r)}function Ple(r){return typeof r=="string"}function xJ(r){return!Ple(r)}function aL(r){return!r}function yC(r,e){return r.ignoreCase&&e?e.toLowerCase():e}function DJ(r){return r.replace(/[&<>'"_]/g,"-")}function vPe(r,e){console.log(`${r.languageId}: ${e}`)}function lo(r,e){return new Error(`${r.languageId}: ${e}`)}function iC(r,e,t,n,i){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let s=null;return e.replace(o,function(a,l,u,d,h,p,_,C,S){return aL(u)?aL(d)?!aL(h)&&h<n.length?yC(r,n[h]):!aL(_)&&r&&typeof r[_]=="string"?r[_]:(s===null&&(s=i.split("."),s.unshift(i)),!aL(p)&&p<s.length?yC(r,s[p]):""):yC(r,t):"$"})}function iO(r,e){let t=e;for(;t&&t.length>0;){const n=r.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function bPe(r,e){let t=e;for(;t&&t.length>0;){if(r.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}const Fle=5;class xN{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new ZL(e,t);let n=ZL.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new ZL(e,t),this._entries[n]=i,i)}}xN._INSTANCE=new xN(Fle);class ZL{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return ZL._equals(this,e)}push(e){return xN.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return xN.create(this.parent,e)}}class bT{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new bT(this.languageId,this.state)}}class rC{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new CT(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new CT(e,t);let n=ZL.getStackElementId(e),i=this._entries[n];return i||(i=new CT(e,null),this._entries[n]=i,i)}}rC._INSTANCE=new rC(Fle);class CT{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:rC.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof CT)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class CPe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new C4(e,t,this._languageId)))}nestedModeTokenize(e,t,n,i){const o=n.languageId,s=n.state,a=es.get(o);if(!a)return this.enterMode(i,o),this.emit(i,""),s;let l=a.tokenize(e,t,s,i);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new r$(this._tokens,e)}}class sP{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let i=e!==null?e.length:0,o=t.length,s=n!==null?n.length:0;if(i===0&&o===0&&s===0)return new Uint32Array(0);if(i===0&&o===0)return n;if(o===0&&s===0)return e;let a=new Uint32Array(i+o+s);e!==null&&a.set(e);for(let l=0;l<o;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+o),a}nestedModeTokenize(e,t,n,i){const o=n.languageId,s=n.state,a=es.get(o);if(!a)return this.enterMode(i,o),this.emit(i,""),s;let l=a.tokenize2(e,t,s,i);return this._prependTokens=sP._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new y4(sP._merge(this._prependTokens,this._tokens,null),e)}}class fF{constructor(e,t,n,i){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=es.onDidChange(s=>{if(o)return;let a=!1;for(let l=0,u=s.changedLanguages.length;l<u;l++){let d=s.changedLanguages[l];if(this._embeddedModes[d]){a=!0;break}}a&&(o=!0,es.fire([this._languageId]),o=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=es.get(t);if(n){if(n instanceof fF){const o=n.getLoadStatus();o.loaded===!1&&e.push(o.promise)}continue}const i=es.getPromise(t);i&&e.push(i)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=xN.create(null,this._lexer.start);return rC.create(e,null)}tokenize(e,t,n,i){let o=new CPe,s=this._tokenize(e,t,n,i,o);return o.finalize(s)}tokenize2(e,t,n,i){let o=new sP(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i,o);return o.finalize(s)}_tokenize(e,t,n,i,o){return n.embeddedModeData?this._nestedTokenize(e,t,n,i,o):this._myTokenize(e,t,n,i,o)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=iO(this._lexer,t.stack.state),!n))throw lo(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,o=!1;for(const s of n){if(!xJ(s.action)||s.action.nextEmbedded!=="@pop")continue;o=!0;let a=s.regex,l=s.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}let u=e.search(a);u===-1||u!==0&&s.matchOnlyAtLineStart||(i===-1||u<i)&&(i=u)}if(!o)throw lo(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,o){let s=this._findLeavingNestedModeOffset(e,n);if(s===-1){let u=o.nestedModeTokenize(e,t,n.embeddedModeData,i);return rC.create(n.stack,new bT(n.embeddedModeData.languageId,u))}let a=e.substring(0,s);a.length>0&&o.nestedModeTokenize(a,!1,n.embeddedModeData,i);let l=e.substring(s);return this._myTokenize(l,t,n,i+s,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,o){o.enterMode(i,this._languageId);const s=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let u=n.embeddedModeData,d=n.stack,h=0,p=null,_=!0;for(;_||h<l;){const C=h,S=d.depth,x=p?p.groups.length:0,T=d.state;let k=null,M=null,W=null,F=null,Q=null;if(p){k=p.matches;const G=p.groups.shift();M=G.matched,W=G.action,F=p.rule,p.groups.length===0&&(p=null)}else{if(!_&&h>=l)break;_=!1;let G=this._lexer.tokenizer[T];if(!G&&(G=iO(this._lexer,T),!G))throw lo(this._lexer,"tokenizer state is not defined: "+T);let Y=a.substr(h);for(const I of G)if((h===0||!I.matchOnlyAtLineStart)&&(k=Y.match(I.regex),k)){M=k[0],W=I.action;break}}if(k||(k=[""],M=""),W||(h<l&&(k=[a.charAt(h)],M=k[0]),W=this._lexer.defaultToken),M===null)break;for(h+=M.length;_Pe(W)&&xJ(W)&&W.test;)W=W.test(M,k,T,h===l);let z=null;if(typeof W=="string"||Array.isArray(W))z=W;else if(W.group)z=W.group;else if(W.token!==null&&W.token!==void 0){if(W.tokenSubst?z=iC(this._lexer,W.token,M,k,T):z=W.token,W.nextEmbedded)if(W.nextEmbedded==="@pop"){if(!u)throw lo(this._lexer,"cannot pop embedded mode if not inside one");u=null}else{if(u)throw lo(this._lexer,"cannot enter embedded mode from within an embedded mode");Q=iC(this._lexer,W.nextEmbedded,M,k,T)}if(W.goBack&&(h=Math.max(0,h-W.goBack)),W.switchTo&&typeof W.switchTo=="string"){let G=iC(this._lexer,W.switchTo,M,k,T);if(G[0]==="@"&&(G=G.substr(1)),iO(this._lexer,G))d=d.switchTo(G);else throw lo(this._lexer,"trying to switch to a state '"+G+"' that is undefined in rule: "+this._safeRuleName(F))}else{if(W.transform&&typeof W.transform=="function")throw lo(this._lexer,"action.transform not supported");if(W.next)if(W.next==="@push"){if(d.depth>=this._lexer.maxStack)throw lo(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(T)}else if(W.next==="@pop"){if(d.depth<=1)throw lo(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(F));d=d.pop()}else if(W.next==="@popall")d=d.popall();else{let G=iC(this._lexer,W.next,M,k,T);if(G[0]==="@"&&(G=G.substr(1)),iO(this._lexer,G))d=d.push(G);else throw lo(this._lexer,"trying to set a next state '"+G+"' that is undefined in rule: "+this._safeRuleName(F))}}W.log&&typeof W.log=="string"&&vPe(this._lexer,this._lexer.languageId+": "+iC(this._lexer,W.log,M,k,T))}if(z===null)throw lo(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(F));const $=G=>{let Y=this._modeService.getModeIdForLanguageName(G);Y&&(G=Y);const I=this._getNestedEmbeddedModeData(G);if(h<l){const D=e.substr(h);return this._nestedTokenize(D,t,rC.create(d,I),i+h,o)}else return rC.create(d,I)};if(Array.isArray(z)){if(p&&p.groups.length>0)throw lo(this._lexer,"groups cannot be nested: "+this._safeRuleName(F));if(k.length!==z.length+1)throw lo(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(F));let G=0;for(let Y=1;Y<k.length;Y++)G+=k[Y].length;if(G!==M.length)throw lo(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(F));p={rule:F,matches:k,groups:[]};for(let Y=0;Y<z.length;Y++)p.groups[Y]={action:z[Y],matched:k[Y+1]};h-=M.length;continue}else{if(z==="@rematch"&&(h-=M.length,M="",k=null,z="",Q!==null))return $(Q);if(M.length===0){if(l===0||S!==d.depth||T!==d.state||(p?p.groups.length:0)!==x)continue;throw lo(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(F))}let G=null;if(Ple(z)&&z.indexOf("@brackets")===0){let Y=z.substr(9),I=yPe(this._lexer,M);if(!I)throw lo(this._lexer,"@brackets token returned but no bracket defined as: "+M);G=DJ(I.token+Y)}else{let Y=z===""?"":z+this._lexer.tokenPostfix;G=DJ(Y)}C<s&&o.emit(C+i,G)}if(Q!==null)return $(Q)}return rC.create(d,u)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=es.get(t);if(n)return new bT(t,n.getInitialState())}return new bT(t||RC,_2)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function yPe(r,e){if(!e)return null;e=yC(r,e);let t=r.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function wPe(r,e,t,n){return new fF(r,e,t,n)}var u7;const c7=(u7=window.trustedTypes)===null||u7===void 0?void 0:u7.createPolicy("standaloneColorizer",{createHTML:r=>r});class Fj{static colorizeElement(e,t,n,i){i=i||{};let o=i.theme||"vs",s=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(o);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+o;let l=u=>{var d;const h=(d=c7==null?void 0:c7.createHTML(u))!==null&&d!==void 0?d:u;n.innerHTML=h};return this.colorize(t,a||"",s,i).then(l,u=>console.error(u))}static colorize(e,t,n,i){const o=e.languageIdCodec;let s=4;i&&typeof i.tabSize=="number"&&(s=i.tabSize),xz(t)&&(t=t.substr(1));let a=Mv(t),l=e.getModeId(n);if(!l)return Promise.resolve(IJ(a,s,o));e.triggerMode(l);const u=es.get(l);if(u)return d7(a,s,u,o);const d=es.getPromise(l);return d?new Promise((h,p)=>{d.then(_=>{d7(a,s,_,o).then(h,p)},p)}):new Promise((h,p)=>{let _=null,C=null;const S=()=>{_&&(_.dispose(),_=null),C&&(C.dispose(),C=null);const x=es.get(l);if(x){d7(a,s,x,o).then(h,p);return}h(IJ(a,s,o))};C=new uc,C.cancelAndSet(S,500),_=es.onDidChange(x=>{x.changedLanguages.indexOf(l)>=0&&S()})})}static colorizeLine(e,t,n,i,o=4){const s=Oh.isBasicASCII(e,t),a=Oh.containsRTL(e,s,n);return p4(new tE(!1,!0,e,!1,s,a,0,i,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let i=e.getLineContent(t);e.forceTokenization(t);let s=e.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,n)}}function d7(r,e,t,n){return new Promise((i,o)=>{const s=()=>{const a=SPe(r,e,t,n);if(t instanceof fF){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(s,o);return}}i(a)};s()})}function IJ(r,e,t){let n=[];const o=new Uint32Array(2);o[0]=0,o[1]=16793600;for(let s=0,a=r.length;s<a;s++){let l=r[s];o[0]=l.length;const u=new Ua(o,l,t),d=Oh.isBasicASCII(l,!0),h=Oh.containsRTL(l,d,!0);let p=p4(new tE(!1,!0,l,!1,d,h,0,u,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>")}return n.join("")}function SPe(r,e,t,n){let i=[],o=t.getInitialState();for(let s=0,a=r.length;s<a;s++){let l=r[s],u=t.tokenize2(l,!0,o,0);Ua.convertToEndOffset(u.tokens,l.length);let d=new Ua(u.tokens,l,n);const h=Oh.isBasicASCII(l,!0),p=Oh.containsRTL(l,h,!0);let _=p4(new tE(!1,!0,l,!1,h,p,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(_.html),i.push("<br/>"),o=u.endState}return i.join("")}function Ble(r,e,t){let n=new Hae(r,e),i=null;n.has(Fc)||(i=new PM(pr.modelService.get()),n.set(Fc,i)),n.has(Nd)||n.set(Nd,new rP(n.get(vr),n.get(Go)));let o=t(n);return i&&i.setEditor(o),o}function EPe(r,e,t){return Ble(r,t||{},n=>new hN(r,e,n,n.get(xi),n.get(vr),n.get(Go),n.get(Jn),n.get(Ro),n.get(t1),n.get(JC),n.get(As),n.get(Jr),n.get(Uc),n.get(ua),n.get(Bl)))}function LPe(r){return pr.codeEditorService.get().onCodeEditorAdd(e=>{r(e)})}function xPe(r,e,t){return Ble(r,t||{},n=>new bW(r,e,n,n.get(xi),n.get(Jn),n.get(Ro),n.get(t1),n.get(Fh),n.get(vr),n.get(JC),n.get(As),n.get(Jr),n.get(XC),n.get(n1),n.get(QC)))}function DPe(r,e){return new fPe(r,e)}function IPe(r,e,t){return Fse(pr.modelService.get(),pr.modeService.get(),r,e,t)}function kPe(r,e){pr.modelService.get().setMode(r,pr.modeService.get().create(e))}function TPe(r,e,t){r&&pr.markerService.get().changeOne(e,r.uri,t)}function NPe(r){return pr.markerService.get().read(r)}function APe(r){return pr.markerService.get().onMarkerChanged(r)}function OPe(r){return pr.modelService.get().getModel(r)}function RPe(){return pr.modelService.get().getModels()}function MPe(r){return pr.modelService.get().onModelAdded(r)}function PPe(r){return pr.modelService.get().onModelRemoved(r)}function FPe(r){return pr.modelService.get().onModelModeChanged(e=>{r({model:e.model,oldLanguage:e.oldModeId})})}function BPe(r){return gPe(pr.modelService.get(),r)}function WPe(r,e){const t=pr.standaloneThemeService.get();return t.registerEditorContainer(r),Fj.colorizeElement(t,pr.modeService.get(),r,e)}function VPe(r,e,t){return pr.standaloneThemeService.get().registerEditorContainer(document.body),Fj.colorize(pr.modeService.get(),r,e,t)}function HPe(r,e,t=4){return pr.standaloneThemeService.get().registerEditorContainer(document.body),Fj.colorizeModelLine(r,e,t)}function UPe(r){let e=es.get(r);return e||{getInitialState:()=>_2,tokenize:(t,n,i,o)=>Roe(r,t,i,o)}}function zPe(r,e){pr.modeService.get().triggerMode(e);let n=UPe(e),i=Mv(r),o=[],s=n.getInitialState();for(let a=0,l=i.length;a<l;a++){let u=i[a],d=n.tokenize(u,!0,s,0);o[a]=d.tokens,s=d.endState}return o}function $Pe(r,e){pr.standaloneThemeService.get().defineTheme(r,e)}function jPe(r){pr.standaloneThemeService.get().setTheme(r)}function qPe(){F1e()}function KPe(r,e){return Yi.registerCommand({id:r,handler:e})}function GPe(){return{create:EPe,onDidCreateEditor:LPe,createDiffEditor:xPe,createDiffNavigator:DPe,createModel:IPe,setModelLanguage:kPe,setModelMarkers:TPe,getModelMarkers:NPe,onDidChangeMarkers:APe,getModels:RPe,getModel:OPe,onDidCreateModel:MPe,onWillDisposeModel:PPe,onDidChangeModelLanguage:FPe,createWebWorker:BPe,colorizeElement:WPe,colorize:VPe,colorizeModelLine:HPe,tokenize:zPe,defineTheme:$Pe,setTheme:jPe,remeasureFonts:qPe,registerCommand:KPe,AccessibilitySupport:EW,ContentWidgetPositionPreference:kW,CursorChangeReason:TW,DefaultEndOfLine:NW,EditorAutoIndentStrategy:OW,EditorOption:RW,EndOfLinePreference:MW,EndOfLineSequence:PW,MinimapPosition:zW,MouseTargetType:$W,OverlayWidgetPositionPreference:jW,OverviewRulerLane:qW,RenderLineNumbersType:KW,RenderMinimap:GW,ScrollbarVisibility:ZW,ScrollType:YW,TextEditorCursorBlinkingStyle:tV,TextEditorCursorStyle:nV,TrackedRangeStickiness:iV,WrappingIndent:rV,ConfigurationChangedEvent:Nre,BareFontInfo:Rw,FontInfo:F9,TextModelResolvedOptions:BO,FindMatch:BT,ApplyUpdateResult:Jk,EditorType:S2,EditorOptions:Dm}}function YPe(r,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!r(t))return!1;return!0}function rO(r,e){return typeof r=="boolean"?r:e}function kJ(r,e){return typeof r=="string"?r:e}function ZPe(r){const e={};for(const t of r)e[t]=!0;return e}function TJ(r,e=!1){e&&(r=r.map(function(n){return n.toLowerCase()}));const t=ZPe(r);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function tH(r,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,s){n=!0;let a="";if(typeof r[s]=="string")a=r[s];else if(r[s]&&r[s]instanceof RegExp)a=r[s].source;else throw r[s]===void 0?lo(r,"language definition does not contain attribute '"+s+"', used at: "+e):lo(r,"attribute reference '"+s+"' must be a string, used at: "+e);return aL(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let i=(r.ignoreCase?"i":"")+(r.unicode?"u":"");return new RegExp(e,i)}function XPe(r,e,t,n){if(n<0)return r;if(n<e.length)return e[n];if(n>=100){n=n-100;let i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}function QPe(r,e,t,n){let i=-1,o=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(i=parseInt(s[3]),s[2]&&(i=i+100)),o=s[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],l=s[2]));let u;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let d=TJ(l.split("|"),r.ignoreCase);u=function(h){return a==="~"?d(h):!d(h)}}else if(a==="@"||a==="!@"){let d=r[l];if(!d)throw lo(r,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!YPe(function(p){return typeof p=="string"},d))throw lo(r,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let h=TJ(d,r.ignoreCase);u=function(p){return a==="@"?h(p):!h(p)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let d=tH(r,"^"+l+"$");u=function(h){return a==="~"?d.test(h):!d.test(h)}}else u=function(d,h,p,_){return tH(r,"^"+iC(r,l,h,p,_)+"$").test(d)};else if(l.indexOf("$")<0){let d=yC(r,l);u=function(h){return a==="=="?h===d:h!==d}}else{let d=yC(r,l);u=function(h,p,_,C,S){let x=iC(r,d,p,_,C);return a==="=="?h===x:h!==x}}return i===-1?{name:t,value:n,test:function(d,h,p,_){return u(d,d,h,p,_)}}:{name:t,value:n,test:function(d,h,p,_){let C=XPe(d,h,p,i);return u(C||"",d,h,p,_)}}}function nH(r,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw lo(r,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw lo(r,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw lo(r,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!bPe(r,iC(r,i,"",[],""))))throw lo(r,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,r.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let i=0,o=t.length;i<o;i++)n[i]=nH(r,e,t[i]);return{group:n}}else if(t.cases){let n=[];for(let o in t.cases)if(t.cases.hasOwnProperty(o)){const s=nH(r,e,t.cases[o]);o==="@default"||o==="@"||o===""?n.push({test:void 0,value:s,name:o}):o==="@eos"?n.push({test:function(a,l,u,d){return d},value:s,name:o}):n.push(QPe(r,e,o,s))}const i=r.defaultToken;return{test:function(o,s,a,l){for(const u of n)if(!u.test||u.test(o,s,a,l))return u.value;return i}}}else throw lo(r,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class JPe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw lo(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=tH(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=nH(e,this.name,t)}}function e4e(r,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=r,t.includeLF=rO(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=rO(e.ignoreCase,!1),t.unicode=rO(e.unicode,!1),t.tokenPostfix=kJ(e.tokenPostfix,"."+t.languageId),t.defaultToken=kJ(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=r,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(s,a,l){for(const u of l){let d=u.include;if(d){if(typeof d!="string")throw lo(t,"an 'include' attribute must be a string at: "+s);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw lo(t,"include target '"+d+"' is not defined at: "+s);i(s+"."+d,a,e.tokenizer[d])}else{const h=new JPe(s);if(Array.isArray(u)&&u.length>=1&&u.length<=3)if(h.setRegex(n,u[0]),u.length>=3)if(typeof u[1]=="string")h.setAction(n,{token:u[1],next:u[2]});else if(typeof u[1]=="object"){const p=u[1];p.next=u[2],h.setAction(n,p)}else throw lo(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+s);else h.setAction(n,u[1]);else{if(!u.regex)throw lo(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+s);u.name&&typeof u.name=="string"&&(h.name=u.name),u.matchOnlyAtStart&&(h.matchOnlyAtLineStart=rO(u.matchOnlyAtLineStart,!1)),h.setRegex(n,u.regex),h.setAction(n,u.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw lo(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let s in e.tokenizer)if(e.tokenizer.hasOwnProperty(s)){t.start||(t.start=s);const a=e.tokenizer[s];t.tokenizer[s]=new Array,i("tokenizer."+s,t.tokenizer[s],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw lo(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let o=[];for(let s of e.brackets){let a=s;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw lo(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:yC(t,a.open),close:yC(t,a.close)});else throw lo(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function t4e(r){jw.registerLanguage(r)}function n4e(){let r=[];return r=r.concat(jw.getLanguages()),r}function i4e(r){return pr.modeService.get().languageIdCodec.encodeLanguageId(r)}function r4e(r,e){let t=pr.modeService.get().onDidEncounterLanguage(n=>{n===r&&(t.dispose(),e())});return t}function o4e(r,e){const t=pr.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set configuration for unknown language ${r}`);return fr.register(t,e,100)}class s4e{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,i){if(typeof this._actual.tokenize=="function")return DN.adaptTokenize(this._languageId,this._actual,e,n,i);throw new Error("Not supported!")}tokenize2(e,t,n){let i=this._actual.tokenizeEncoded(e,n);return new y4(i.tokens,i.endState)}}class DN{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let i=[],o=0;for(let s=0,a=e.length;s<a;s++){const l=e[s];let u=l.startIndex;s===0?u=0:u<o&&(u=o),i[s]=new C4(u+n,l.scopes,t),o=u}return i}static adaptTokenize(e,t,n,i,o){let s=t.tokenize(n,i),a=DN._toClassicTokens(s.tokens,e,o),l;return s.endState.equals(i)?l=i:l=s.endState,new r$(a,l)}tokenize(e,t,n,i){return DN.adaptTokenize(this._languageId,this._actual,e,n,i)}_toBinaryTokens(e,t,n){const i=e.encodeLanguageId(this._languageId),o=this._standaloneThemeService.getColorTheme().tokenTheme;let s=[],a=0,l=0;for(let d=0,h=t.length;d<h;d++){const p=t[d],_=o.match(i,p.scopes);if(a>0&&s[a-1]===_)continue;let C=p.startIndex;d===0?C=0:C<l&&(C=l),s[a++]=C+n,s[a++]=_,l=C}let u=new Uint32Array(a);for(let d=0;d<a;d++)u[d]=s[d];return u}tokenize2(e,t,n,i){let o=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._modeService.languageIdCodec,o.tokens,i),a;return o.endState.equals(n)?a=n:a=o.endState,new y4(s,a)}}function a4e(r){return"tokenizeEncoded"in r}function Wle(r){return r&&typeof r.then=="function"}function l4e(r){if(r){const e=[null];for(let t=1,n=r.length;t<n;t++)e[t]=je.fromHex(r[t]);pr.standaloneThemeService.get().setColorMapOverride(e)}else pr.standaloneThemeService.get().setColorMapOverride(null)}function u4e(r,e){const t=pr.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${r}`);const n=i=>a4e(i)?new s4e(t,i):new DN(t,i,pr.modeService.get(),pr.standaloneThemeService.get());return Wle(e)?es.registerPromise(r,e.then(i=>n(i))):es.register(r,n(e))}function c4e(r,e){const t=n=>wPe(pr.modeService.get(),pr.standaloneThemeService.get(),r,e4e(r,n));return Wle(e)?es.registerPromise(r,e.then(n=>t(n))):es.register(r,t(e))}function d4e(r,e){return rM.register(r,e)}function h4e(r,e){return oM.register(r,e)}function f4e(r,e){return Ww.register(r,e)}function g4e(r,e){return VT.register(r,{provideHover:(t,n,i)=>{let o=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,i)).then(s=>{if(s)return!s.range&&o&&(s.range=new le(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn)),s.range||(s.range=new le(n.lineNumber,n.column,n.lineNumber,n.column)),s})}})}function p4e(r,e){return Xg.register(r,e)}function m4e(r,e){return cx.register(r,e)}function _4e(r,e){return sM.register(r,e)}function v4e(r,e){return HT.register(r,e)}function b4e(r,e){return lM.register(r,e)}function C4e(r,e){return uM.register(r,e)}function y4e(r,e){return xb.register(r,e)}function w4e(r,e,t){return Nv.register(r,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,i,o,s)=>{let a=pr.markerService.get().read({resource:n.uri}).filter(l=>le.areIntersectingOrTouching(l,i));return e.provideCodeActions(n,i,{markers:a,only:o.only},s)},resolveCodeAction:e.resolveCodeAction})}function S4e(r,e){return aT.register(r,e)}function E4e(r,e){return tm.register(r,e)}function L4e(r,e){return cM.register(r,e)}function x4e(r,e){return UT.register(r,e)}function D4e(r,e){return em.register(r,e)}function I4e(r,e){return dx.register(r,e)}function k4e(r,e){return Q9.register(r,e)}function T4e(r,e){return aM.register(r,e)}function N4e(r,e){return v4.register(r,e)}function A4e(r,e){return hx.register(r,e)}function O4e(r,e){return b4.register(r,e)}function R4e(r,e){return t$.register(r,e)}function M4e(r,e){return lC.register(r,e)}function P4e(){return{register:t4e,getLanguages:n4e,onLanguage:r4e,getEncodedLanguageId:i4e,setLanguageConfiguration:o4e,setColorMap:l4e,setTokensProvider:u4e,setMonarchTokensProvider:c4e,registerReferenceProvider:d4e,registerRenameProvider:h4e,registerCompletionItemProvider:D4e,registerSignatureHelpProvider:f4e,registerHoverProvider:g4e,registerDocumentSymbolProvider:p4e,registerDocumentHighlightProvider:m4e,registerLinkedEditingRangeProvider:_4e,registerDefinitionProvider:v4e,registerImplementationProvider:b4e,registerTypeDefinitionProvider:C4e,registerCodeLensProvider:y4e,registerCodeActionProvider:w4e,registerDocumentFormattingEditProvider:S4e,registerDocumentRangeFormattingEditProvider:E4e,registerOnTypeFormattingEditProvider:L4e,registerLinkProvider:x4e,registerColorProvider:I4e,registerFoldingRangeProvider:k4e,registerDeclarationProvider:T4e,registerSelectionRangeProvider:N4e,registerDocumentSemanticTokensProvider:A4e,registerDocumentRangeSemanticTokensProvider:O4e,registerInlineCompletionsProvider:R4e,registerInlayHintsProvider:M4e,DocumentHighlightKind:AW,CompletionItemKind:xW,CompletionItemTag:DW,CompletionItemInsertTextRule:LW,SymbolKind:JW,SymbolTag:eV,IndentAction:FW,CompletionTriggerKind:IW,SignatureHelpTriggerKind:QW,InlayHintKind:BW,InlineCompletionTriggerKind:WW,FoldingRangeKind:Cm}}class Ex{static _handleEolEdits(e,t){let n,i=[];for(let o of t)typeof o.eol=="number"&&(n=o.eol),o.range&&typeof o.text=="string"&&i.push(o);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=Ex._handleEolEdits(e,t);i.length===1&&Ex._isFullModelReplaceEdit(e,i[0])?e.executeEdits("formatEditsCommand",i.map(o=>ss.replace(le.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",i.map(o=>ss.replaceMove(le.lift(o.range),o.text))),n&&e.pushUndoStop()}}class h7{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var Em=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function Bj(r){if(r=r.filter(i=>i.range),!r.length)return;let{range:e}=r[0];for(let i=1;i<r.length;i++)e=le.plusRange(e,r[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?r.length===1?Tl(E("hint11","Made 1 formatting edit on line {0}",t)):Tl(E("hintn1","Made {0} formatting edits on line {1}",r.length,t)):r.length===1?Tl(E("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):Tl(E("hintnn","Made {0} formatting edits between lines {1} and {2}",r.length,t,n))}function Vle(r){const e=[],t=new Set,n=aT.ordered(r);for(const o of n)e.push(o),o.extensionId&&t.add(h7.toKey(o.extensionId));const i=tm.ordered(r);for(const o of i){if(o.extensionId){if(t.has(h7.toKey(o.extensionId)))continue;t.add(h7.toKey(o.extensionId))}e.push({displayName:o.displayName,extensionId:o.extensionId,provideDocumentFormattingEdits(s,a,l){return o.provideDocumentRangeFormattingEdits(s,s.getFullModelRange(),a,l)}})}return e}class yS{static setFormatterSelector(e){return{dispose:yS._selectors.unshift(e)}}static select(e,t,n){return Em(this,void 0,void 0,function*(){if(e.length===0)return;const i=Zi.first(yS._selectors);if(i)return yield i(e,t,n)})}}yS._selectors=new kh;function Hle(r,e,t,n,i,o){return Em(this,void 0,void 0,function*(){const s=r.get(xi),a=Vv(e)?e.getModel():e,l=tm.ordered(a),u=yield yS.select(l,a,n);u&&(i.report(u),yield s.invokeFunction(F4e,u,e,t,o))})}function F4e(r,e,t,n,i){return Em(this,void 0,void 0,function*(){const o=r.get(Fh);let s,a;Vv(t)?(s=t.getModel(),a=new sN(t,5,void 0,i)):(s=t,a=new k$(t,i));let l=[],u=0;for(let C of Az(n).sort(le.compareRangesUsingStarts))u>0&&le.areIntersectingOrTouching(l[u-1],C)?l[u-1]=le.fromPositions(l[u-1].getStartPosition(),C.getEndPosition()):u=l.push(C);const d=C=>Em(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(s,C,s.getFormattingOptions(),a.token))||[]}),h=(C,S)=>{if(!C.length||!S.length)return!1;const x=C.reduce((T,k)=>le.plusRange(T,k.range),C[0].range);if(!S.some(T=>le.intersectRanges(x,T.range)))return!1;for(let T of C)for(let k of S)if(le.intersectRanges(T.range,k.range))return!0;return!1},p=[],_=[];try{for(let C of l){if(a.token.isCancellationRequested)return!0;_.push(yield d(C))}for(let C=0;C<l.length;++C)for(let S=C+1;S<l.length;++S){if(a.token.isCancellationRequested)return!0;if(h(_[C],_[S])){const x=le.plusRange(l[C],l[S]),T=yield d(x);l.splice(S,1),l.splice(C,1),l.push(x),_.splice(S,1),_.splice(C,1),_.push(T),C=0,S=0}}for(let C of _){if(a.token.isCancellationRequested)return!0;const S=yield o.computeMoreMinimalEdits(s.uri,C);S&&p.push(...S)}}finally{a.dispose()}if(p.length===0)return!1;if(Vv(t))Ex.execute(t,p,!0),Bj(p),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:C}]=p,S=new ln(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn);s.pushEditOperations([S],p.map(x=>({text:x.text,range:le.lift(x.range),forceMoveMarkers:!0})),x=>{for(const{range:T}of x)if(le.areIntersectingOrTouching(T,S))return[new ln(T.startLineNumber,T.startColumn,T.endLineNumber,T.endColumn)];return null})}return!0})}function B4e(r,e,t,n,i){return Em(this,void 0,void 0,function*(){const o=r.get(xi),s=Vv(e)?e.getModel():e,a=Vle(s),l=yield yS.select(a,s,t);l&&(n.report(l),yield o.invokeFunction(W4e,l,e,t,i))})}function W4e(r,e,t,n,i){return Em(this,void 0,void 0,function*(){const o=r.get(Fh);let s,a;Vv(t)?(s=t.getModel(),a=new sN(t,5,void 0,i)):(s=t,a=new k$(t,i));let l;try{const u=yield e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(l=yield o.computeMoreMinimalEdits(s.uri,u),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(Vv(t))Ex.execute(t,l,n!==2),n!==2&&(Bj(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:u}]=l,d=new ln(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);s.pushEditOperations([d],l.map(h=>({text:h.text,range:le.lift(h.range),forceMoveMarkers:!0})),h=>{for(const{range:p}of h)if(le.areIntersectingOrTouching(p,d))return[new ln(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn)];return null})}return!0})}function V4e(r,e,t,n,i){return Em(this,void 0,void 0,function*(){const o=tm.ordered(e);for(const s of o){let a=yield Promise.resolve(s.provideDocumentRangeFormattingEdits(e,t,n,i)).catch(Pl);if(Ed(a))return yield r.computeMoreMinimalEdits(e.uri,a)}})}function H4e(r,e,t,n){return Em(this,void 0,void 0,function*(){const i=Vle(e);for(const o of i){let s=yield Promise.resolve(o.provideDocumentFormattingEdits(e,t,n)).catch(Pl);if(Ed(s))return yield r.computeMoreMinimalEdits(e.uri,s)}})}function Ule(r,e,t,n,i){const o=cM.ordered(e);return o.length===0||o[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(o[0].provideOnTypeFormattingEdits(e,t,n,i,Oi.None)).catch(Pl).then(s=>r.computeMoreMinimalEdits(e.uri,s))}Yi.registerCommand("_executeFormatRangeProvider",function(r,...e){return Em(this,void 0,void 0,function*(){const[t,n,i]=e;jr(qn.isUri(t)),jr(le.isIRange(n));const o=r.get(Fc),s=r.get(Fh),a=yield o.createModelReference(t);try{return V4e(s,a.object.textEditorModel,le.lift(n),i,Oi.None)}finally{a.dispose()}})});Yi.registerCommand("_executeFormatDocumentProvider",function(r,...e){return Em(this,void 0,void 0,function*(){const[t,n]=e;jr(qn.isUri(t));const i=r.get(Fc),o=r.get(Fh),s=yield i.createModelReference(t);try{return H4e(o,s.object.textEditorModel,n,Oi.None)}finally{s.dispose()}})});Yi.registerCommand("_executeFormatOnTypeProvider",function(r,...e){return Em(this,void 0,void 0,function*(){const[t,n,i,o]=e;jr(qn.isUri(t)),jr(Ge.isIPosition(n)),jr(typeof i=="string");const s=r.get(Fc),a=r.get(Fh),l=yield s.createModelReference(t);try{return Ule(a,l.object.textEditorModel,Ge.lift(n),i,o)}finally{l.dispose()}})});var f7;Dm.wrappingIndent.defaultValue=0;Dm.glyphMargin.defaultValue=!1;Dm.autoIndent.defaultValue=3;Dm.overviewRulerLanes.defaultValue=2;yS.setFormatterSelector((r,e,t)=>Promise.resolve(r[0]));const cc=Hse();cc.editor=GPe();cc.languages=P4e();const U4e=cc.CancellationTokenSource,zle=cc.Emitter,Xn=cc.KeyCode,Wc=cc.KeyMod,z4e=cc.Position,$4e=cc.Range,j4e=cc.Selection,q4e=cc.SelectionDirection,K4e=cc.MarkerSeverity,G4e=cc.MarkerTag,Lx=cc.Uri,Y4e=cc.Token,xd=cc.editor,Qg=cc.languages;(!((f7=ms.MonacoEnvironment)===null||f7===void 0)&&f7.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=cc);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const B2=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:U4e,Emitter:zle,KeyCode:Xn,KeyMod:Wc,MarkerSeverity:K4e,MarkerTag:G4e,Position:z4e,Range:$4e,Selection:j4e,SelectionDirection:q4e,Token:Y4e,Uri:Lx,editor:xd,languages:Qg},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var $le=Object.defineProperty,Z4e=Object.getOwnPropertyDescriptor,X4e=Object.getOwnPropertyNames,Q4e=Object.prototype.hasOwnProperty,J4e=r=>$le(r,"__esModule",{value:!0}),eFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of X4e(e))!Q4e.call(r,n)&&n!=="default"&&$le(r,n,{get:()=>e[n],enumerable:!(t=Z4e(e,n))||t.enumerable});return r},tFe="4.4.4",wS={};J4e(wS);eFe(wS,B2);var iH;(function(r){r[r.None=0]="None",r[r.CommonJS=1]="CommonJS",r[r.AMD=2]="AMD",r[r.UMD=3]="UMD",r[r.System=4]="System",r[r.ES2015=5]="ES2015",r[r.ESNext=99]="ESNext"})(iH||(iH={}));var rH;(function(r){r[r.None=0]="None",r[r.Preserve=1]="Preserve",r[r.React=2]="React",r[r.ReactNative=3]="ReactNative",r[r.ReactJSX=4]="ReactJSX",r[r.ReactJSXDev=5]="ReactJSXDev"})(rH||(rH={}));var oH;(function(r){r[r.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",r[r.LineFeed=1]="LineFeed"})(oH||(oH={}));var sH;(function(r){r[r.ES3=0]="ES3",r[r.ES5=1]="ES5",r[r.ES2015=2]="ES2015",r[r.ES2016=3]="ES2016",r[r.ES2017=4]="ES2017",r[r.ES2018=5]="ES2018",r[r.ES2019=6]="ES2019",r[r.ES2020=7]="ES2020",r[r.ESNext=99]="ESNext",r[r.JSON=100]="JSON",r[r.Latest=99]="Latest"})(sH||(sH={}));var aH;(function(r){r[r.Classic=1]="Classic",r[r.NodeJs=2]="NodeJs"})(aH||(aH={}));var jle=class{constructor(e,t,n,i){this._onDidChange=new wS.Emitter,this._onDidExtraLibsChange=new wS.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(i),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[n]&&(i=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(i=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let o=this._extraLibs[n];o&&o.version===i&&(delete this._extraLibs[n],this._removedExtraLibs[n]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=t.content;let o=1;this._removedExtraLibs[n]&&(o=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:i,version:o}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},nFe=tFe,qle=new jle({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),Kle=new jle({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),iFe=()=>gF().then(r=>r.getTypeScriptWorker()),rFe=()=>gF().then(r=>r.getJavaScriptWorker());wS.languages.typescript={ModuleKind:iH,JsxEmit:rH,NewLineKind:oH,ScriptTarget:sH,ModuleResolutionKind:aH,typescriptVersion:nFe,typescriptDefaults:qle,javascriptDefaults:Kle,getTypeScriptWorker:iFe,getJavaScriptWorker:rFe};function gF(){return vn(()=>import("./tsMode-b9c7805f.js"),[])}wS.languages.onLanguage("typescript",()=>gF().then(r=>r.setupTypeScript(qle)));wS.languages.onLanguage("javascript",()=>gF().then(r=>r.setupJavaScript(Kle)));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Gle=Object.defineProperty,oFe=Object.getOwnPropertyDescriptor,sFe=Object.getOwnPropertyNames,aFe=Object.prototype.hasOwnProperty,lFe=r=>Gle(r,"__esModule",{value:!0}),uFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sFe(e))!aFe.call(r,n)&&n!=="default"&&Gle(r,n,{get:()=>e[n],enumerable:!(t=oFe(e,n))||t.enumerable});return r},cE={};lFe(cE);uFe(cE,B2);var Wj=class{constructor(e,t,n){this._onDidChange=new cE.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},Vj={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},Hj={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Yle=new Wj("css",Vj,Hj),Zle=new Wj("scss",Vj,Hj),Xle=new Wj("less",Vj,Hj);cE.languages.css={cssDefaults:Yle,lessDefaults:Xle,scssDefaults:Zle};function Uj(){return vn(()=>import("./cssMode-38ee28fc.js"),[])}cE.languages.onLanguage("less",()=>{Uj().then(r=>r.setupMode(Xle))});cE.languages.onLanguage("scss",()=>{Uj().then(r=>r.setupMode(Zle))});cE.languages.onLanguage("css",()=>{Uj().then(r=>r.setupMode(Yle))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Qle=Object.defineProperty,cFe=Object.getOwnPropertyDescriptor,dFe=Object.getOwnPropertyNames,hFe=Object.prototype.hasOwnProperty,fFe=r=>Qle(r,"__esModule",{value:!0}),gFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of dFe(e))!hFe.call(r,n)&&n!=="default"&&Qle(r,n,{get:()=>e[n],enumerable:!(t=cFe(e,n))||t.enumerable});return r},hD={};fFe(hD);gFe(hD,B2);var pFe=class{constructor(e,t,n){this._onDidChange=new hD.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},mFe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},_Fe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Jle=new pFe("json",mFe,_Fe);hD.languages.json={jsonDefaults:Jle};function vFe(){return vn(()=>import("./jsonMode-eccb1212.js"),[])}hD.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});hD.languages.onLanguage("json",()=>{vFe().then(r=>r.setupMode(Jle))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var eue=Object.defineProperty,bFe=Object.getOwnPropertyDescriptor,CFe=Object.getOwnPropertyNames,yFe=Object.prototype.hasOwnProperty,wFe=r=>eue(r,"__esModule",{value:!0}),SFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of CFe(e))!yFe.call(r,n)&&n!=="default"&&eue(r,n,{get:()=>e[n],enumerable:!(t=bFe(e,n))||t.enumerable});return r},W2={};wFe(W2);SFe(W2,B2);var EFe=class{constructor(e,t,n){this._onDidChange=new W2.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},LFe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},pF={format:LFe,suggest:{},data:{useDefaultDataProvider:!0}};function mF(r){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:r===yT,documentFormattingEdits:r===yT,documentRangeFormattingEdits:r===yT}}var yT="html",NJ="handlebars",AJ="razor",tue=_F(yT,pF,mF(yT)),xFe=tue.defaults,nue=_F(NJ,pF,mF(NJ)),DFe=nue.defaults,iue=_F(AJ,pF,mF(AJ)),IFe=iue.defaults;W2.languages.html={htmlDefaults:xFe,razorDefaults:IFe,handlebarDefaults:DFe,htmlLanguageService:tue,handlebarLanguageService:nue,razorLanguageService:iue,registerHTMLLanguageService:_F};function kFe(){return vn(()=>import("./htmlMode-f1987758.js"),[])}function _F(r,e=pF,t=mF(r)){const n=new EFe(r,e,t);let i;const o=W2.languages.onLanguage(r,async()=>{i=(await kFe()).setupMode(n)});return{defaults:n,dispose(){o.dispose(),i==null||i.dispose(),i=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var rue=Object.defineProperty,TFe=Object.getOwnPropertyDescriptor,NFe=Object.getOwnPropertyNames,AFe=Object.prototype.hasOwnProperty,OFe=r=>rue(r,"__esModule",{value:!0}),RFe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of NFe(e))!AFe.call(r,n)&&n!=="default"&&rue(r,n,{get:()=>e[n],enumerable:!(t=TFe(e,n))||t.enumerable});return r},SL={};OFe(SL);RFe(SL,B2);var oue={},g7={},sue=class{static getOrCreate(e){return g7[e]||(g7[e]=new sue(e)),g7[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,oue[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function On(r){const e=r.id;oue[e]=r,SL.languages.register(r);const t=sue.getOrCreate(e);SL.languages.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),SL.languages.onLanguage(e,()=>{t.load().then(n=>{SL.languages.setLanguageConfiguration(e,n.conf)})})}On({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>vn(()=>import("./abap-c25c4b29.js"),[])});On({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>vn(()=>import("./apex-90b58cb1.js"),[])});On({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>vn(()=>import("./azcli-c8384527.js"),[])});On({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>vn(()=>import("./bat-dd03db3a.js"),[])});On({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>vn(()=>import("./bicep-b5110554.js"),[])});On({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>vn(()=>import("./cameligo-3323522b.js"),[])});On({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>vn(()=>import("./clojure-d45fb7b6.js"),[])});On({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>vn(()=>import("./coffee-912c6d0d.js"),[])});On({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>vn(()=>import("./cpp-30cc099a.js"),[])});On({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>vn(()=>import("./cpp-30cc099a.js"),[])});On({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>vn(()=>import("./csharp-0553c8db.js"),[])});On({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>vn(()=>import("./csp-dbe8a1fa.js"),[])});On({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>vn(()=>import("./css-64c40e4a.js"),[])});On({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>vn(()=>import("./dart-4b7e6961.js"),[])});On({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>vn(()=>import("./dockerfile-1b41f08d.js"),[])});On({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>vn(()=>import("./ecl-eaf29bcc.js"),[])});On({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>vn(()=>import("./elixir-4f68332f.js"),[])});On({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>vn(()=>import("./flow9-6536bbb8.js"),[])});On({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>vn(()=>import("./fsharp-d4a13be8.js"),[])});On({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>vn(()=>import("./go-514c6bed.js"),[])});On({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>vn(()=>import("./graphql-dcd71327.js"),[])});On({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>vn(()=>import("./handlebars-074cad53.js"),[])});On({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>vn(()=>import("./hcl-69c09a16.js"),[])});On({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>vn(()=>import("./html-4ef6f60e.js"),[])});On({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>vn(()=>import("./ini-ddcf22bb.js"),[])});On({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>vn(()=>import("./java-7b3bef9f.js"),[])});On({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>vn(()=>import("./javascript-44d7823d.js"),["assets/javascript-44d7823d.js","assets/typescript-feb1e017.js"])});On({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>vn(()=>import("./julia-d49177e7.js"),[])});On({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>vn(()=>import("./kotlin-12177a5b.js"),[])});On({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>vn(()=>import("./less-dd974dd5.js"),[])});On({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>vn(()=>import("./lexon-7236519e.js"),[])});On({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>vn(()=>import("./lua-de05fd08.js"),[])});On({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>vn(()=>import("./liquid-1b62c42c.js"),[])});On({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>vn(()=>import("./m3-ceb8ffc4.js"),[])});On({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>vn(()=>import("./markdown-6a6346da.js"),[])});On({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>vn(()=>import("./mips-6fb0802a.js"),[])});On({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>vn(()=>import("./msdax-bf1578ea.js"),[])});On({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>vn(()=>import("./mysql-4cfd205e.js"),[])});On({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>vn(()=>import("./objective-c-fadd4d71.js"),[])});On({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>vn(()=>import("./pascal-4479a90f.js"),[])});On({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>vn(()=>import("./pascaligo-7d1a5852.js"),[])});On({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>vn(()=>import("./perl-4a4b182f.js"),[])});On({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>vn(()=>import("./pgsql-e04cad37.js"),[])});On({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>vn(()=>import("./php-f332f715.js"),[])});On({id:"pla",extensions:[".pla"],loader:()=>vn(()=>import("./pla-649d56b2.js"),[])});On({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>vn(()=>import("./postiats-52f8c4e6.js"),[])});On({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>vn(()=>import("./powerquery-ee00e87c.js"),[])});On({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>vn(()=>import("./powershell-d33e9d1b.js"),[])});On({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>vn(()=>import("./protobuf-16b10ef3.js"),[])});On({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>vn(()=>import("./pug-768921d2.js"),[])});On({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>vn(()=>import("./python-901556b5.js"),[])});On({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>vn(()=>import("./qsharp-c7533acc.js"),[])});On({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>vn(()=>import("./r-d1be5f1d.js"),[])});On({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>vn(()=>import("./razor-4c00ec3b.js"),[])});On({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>vn(()=>import("./redis-bd6165ff.js"),[])});On({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>vn(()=>import("./redshift-c705624d.js"),[])});On({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>vn(()=>import("./restructuredtext-947094fa.js"),[])});On({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>vn(()=>import("./ruby-1816fcd8.js"),[])});On({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>vn(()=>import("./rust-c4db2e19.js"),[])});On({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>vn(()=>import("./sb-adba4cc1.js"),[])});On({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>vn(()=>import("./scala-af9b4756.js"),[])});On({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>vn(()=>import("./scheme-812b9ffd.js"),[])});On({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>vn(()=>import("./scss-b21c6880.js"),[])});On({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>vn(()=>import("./shell-a62a83b7.js"),[])});On({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>vn(()=>import("./solidity-9a528bff.js"),[])});On({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>vn(()=>import("./sophia-dc39a193.js"),[])});On({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>vn(()=>import("./sparql-658eb489.js"),[])});On({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>vn(()=>import("./sql-233b53ac.js"),[])});On({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>vn(()=>import("./st-27efd63b.js"),[])});On({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>vn(()=>import("./swift-a2a125fe.js"),[])});On({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>vn(()=>import("./systemverilog-8bcc1c37.js"),[])});On({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>vn(()=>import("./systemverilog-8bcc1c37.js"),[])});On({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>vn(()=>import("./tcl-5c798828.js"),[])});On({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>vn(()=>import("./twig-5245532a.js"),[])});On({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>vn(()=>import("./typescript-feb1e017.js"),[])});On({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>vn(()=>import("./vb-818b3fb1.js"),[])});On({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>vn(()=>import("./xml-55f77418.js"),[])});On({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>vn(()=>import("./yaml-eee3d8e3.js"),[])});var MFe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},PFe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},vF=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const bF=new _n("selectionAnchorSet",!1);let Xb=class aue{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=bF.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(aue.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:ln.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Zb().appendText(E("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),Tl(E("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(ln.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Xb.ID="editor.contrib.selectionAnchorController";Xb=MFe([PFe(1,Jn)],Xb);class FFe extends gn{constructor(){super({id:"editor.action.setSelectionAnchor",label:E("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2080),weight:100}})}run(e,t){return vF(this,void 0,void 0,function*(){Xb.get(t).setSelectionAnchor()})}}class BFe extends gn{constructor(){super({id:"editor.action.goToSelectionAnchor",label:E("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:bF})}run(e,t){return vF(this,void 0,void 0,function*(){Xb.get(t).goToSelectionAnchor()})}}class WFe extends gn{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:E("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:bF,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2089),weight:100}})}run(e,t){return vF(this,void 0,void 0,function*(){Xb.get(t).selectFromAnchorToCursor()})}}class VFe extends gn{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:E("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:bF,kbOpts:{kbExpr:Le.editorTextFocus,primary:9,weight:100}})}run(e,t){return vF(this,void 0,void 0,function*(){Xb.get(t).cancelSelectionAnchor()})}}br(Xb.ID,Xb);Wt(FFe);Wt(BFe);Wt(WFe);Wt(VFe);const HFe=Be("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},E("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class UFe extends gn{constructor(){super({id:"editor.action.jumpToBracket",label:E("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=vm.get(t);n&&n.jumpToBracket()}}class zFe extends gn{constructor(){super({id:"editor.action.selectToBracket",label:E("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const i=vm.get(t);if(!i)return;let o=!0;n&&n.selectBrackets===!1&&(o=!1),i.selectToBracket(o)}}class $Fe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class vm extends ot{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new Xr(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(vm.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),o=e.bracketPairs.matchBracket(i);let s=null;if(o)o[0].containsPosition(i)?s=o[1].getStartPosition():o[1].containsPosition(i)&&(s=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)s=a[0].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(s=l.range.getStartPosition())}}return s?new ln(s.lineNumber,s.column,s.lineNumber,s.column):new ln(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const o=i.getStartPosition();let s=t.bracketPairs.matchBracket(o);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(o),!s)){const u=t.bracketPairs.findNextBracket(o);u&&u.range&&(s=t.bracketPairs.matchBracket(u.range.getStartPosition()))}let a=null,l=null;if(s){s.sort(le.compareRangesUsingStarts);const[u,d]=s;if(a=e?u.getStartPosition():u.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){const h=a;a=l,l=h}}a&&l&&n.push(new ln(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);let o=[],s=0;for(let h=0,p=e.length;h<p;h++){let _=e[h];_.isEmpty()&&(o[s++]=_.getStartPosition())}o.length>1&&o.sort(Ge.compare);let a=[],l=0,u=0,d=i.length;for(let h=0,p=o.length;h<p;h++){let _=o[h];for(;u<d&&i[u].position.isBefore(_);)u++;if(u<d&&i[u].position.equals(_))a[l++]=i[u];else{let C=t.bracketPairs.matchBracket(_),S=vm._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!C&&this._matchBrackets==="always"&&(C=t.bracketPairs.findEnclosingBrackets(_,20),S=vm._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new $Fe(_,C,S)}}this._lastBracketsData=a,this._lastVersionId=n}}vm.ID="editor.contrib.bracketMatchingController";vm._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=pi.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Vo(HFe),position:kd.Center}});vm._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=pi.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});br(vm.ID,vm);Wt(zFe);Wt(UFe);mo((r,e)=>{const t=r.getColor(vEe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=r.getColor(qoe);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Au.appendMenuItem(wn.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:E({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class jFe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(n)))if(this._isMovingLeft){const s=new le(n,i-1,n,i),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new le(n,o,n,o),a)}else{const s=new le(n,o,n,o+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new le(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new ln(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new ln(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class lue extends gn{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],i=t.getSelections();for(const o of i)n.push(new jFe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class qFe extends lue{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:E("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:Le.writable})}}class KFe extends lue{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:E("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:Le.writable})}}Wt(qFe);Wt(KFe);class GFe extends gn{constructor(){super({id:"editor.action.transposeLetters",label:E("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),i=[],o=t.getSelections();for(let s of o){if(!s.isEmpty())continue;let a=s.startLineNumber,l=s.startColumn,u=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&u===2))continue;let d=l===u?s.getPosition():dr.rightPosition(n,s.getPosition().lineNumber,s.getPosition().column),h=dr.leftPosition(n,d),p=dr.leftPosition(n,h),_=n.getValueInRange(le.fromPositions(p,h)),C=n.getValueInRange(le.fromPositions(h,d)),S=le.fromPositions(p,d);i.push(new Il(S,C+_))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}Wt(GFe);var YFe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const SS="9_cutcopypaste",ZFe=fm||document.queryCommandSupported("cut"),uue=fm||document.queryCommandSupported("copy"),XFe=typeof navigator.clipboard>"u"||Id?document.queryCommandSupported("paste"):!0;function zj(r){return r.register(),r}const QFe=ZFe?zj(new eD({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:fm?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:wn.MenubarEditMenu,group:"2_ccp",title:E({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:wn.EditorContext,group:SS,title:E("actions.clipboard.cutLabel","Cut"),when:Le.writable,order:1},{menuId:wn.CommandPalette,group:"",title:E("actions.clipboard.cutLabel","Cut"),order:1},{menuId:wn.SimpleEditorContext,group:SS,title:E("actions.clipboard.cutLabel","Cut"),when:Le.writable,order:1}]})):void 0,JFe=uue?zj(new eD({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:fm?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:wn.MenubarEditMenu,group:"2_ccp",title:E({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:wn.EditorContext,group:SS,title:E("actions.clipboard.copyLabel","Copy"),order:2},{menuId:wn.CommandPalette,group:"",title:E("actions.clipboard.copyLabel","Copy"),order:1},{menuId:wn.SimpleEditorContext,group:SS,title:E("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Au.appendMenuItem(wn.MenubarEditMenu,{submenu:wn.MenubarCopy,title:{value:E("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Au.appendMenuItem(wn.EditorContext,{submenu:wn.EditorContextCopy,title:{value:E("copy as","Copy As"),original:"Copy As"},group:SS,order:3});const p7=XFe?zj(new eD({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:fm?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:wn.MenubarEditMenu,group:"2_ccp",title:E({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:wn.EditorContext,group:SS,title:E("actions.clipboard.pasteLabel","Paste"),when:Le.writable,order:4},{menuId:wn.CommandPalette,group:"",title:E("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:wn.SimpleEditorContext,group:SS,title:E("actions.clipboard.pasteLabel","Paste"),when:Le.writable,order:4}]})):void 0;class e3e extends gn{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:E("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(tW.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),tW.forceCopyWithSyntaxHighlighting=!1)}}function cue(r,e){r&&(r.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(vr).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const o=i.getOption(32),s=i.getSelection();return s&&s.isEmpty()&&!o||document.execCommand(e),!0}return!1}),r.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}cue(QFe,"cut");cue(JFe,"copy");p7&&(p7.addImplementation(1e4,"code-editor",(r,e)=>{const t=r.get(vr),n=r.get(QC),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&Jx?(()=>YFe(void 0,void 0,void 0,function*(){const s=yield n.readText();if(s!==""){const a=GT.INSTANCE.get(s);let l=!1,u=null,d=null;a&&(l=i.getOption(32)&&!!a.isFromEmptySelection,u=typeof a.multicursorText<"u"?a.multicursorText:null,d=a.mode),i.trigger("keyboard","paste",{text:s,pasteOnNewLine:l,multicursorText:u,mode:d})}}))():!0:!1}),p7.addImplementation(0,"generic-dom",(r,e)=>(document.execCommand("paste"),!0)));uue&&Wt(e3e);class aP{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}class Vi{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Vi.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Vi(this.value+Vi.sep+e)}}Vi.sep=".";Vi.None=new Vi("@@none@@");Vi.Empty=new Vi("");Vi.QuickFix=new Vi("quickfix");Vi.Refactor=new Vi("refactor");Vi.Source=new Vi("source");Vi.SourceOrganizeImports=Vi.Source.append("organizeImports");Vi.SourceFixAll=Vi.Source.append("fixAll");function t3e(r,e){return!(r.include&&!r.include.intersects(e)||r.excludes&&r.excludes.some(t=>due(e,t,r.include))||!r.includeSourceActions&&Vi.Source.contains(e))}function n3e(r,e){const t=e.kind?new Vi(e.kind):void 0;return!(r.include&&(!t||!r.include.contains(t))||r.excludes&&t&&r.excludes.some(n=>due(t,n,r.include))||!r.includeSourceActions&&t&&Vi.Source.contains(t)||r.onlyIncludePreferredActions&&!e.isPreferred)}function due(r,e,t){return!(!e.contains(r)||t&&e.contains(t))}class mv{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new mv(t.kind,t.apply,!1):new mv(mv.getKindFromUser(e,t.kind),mv.getApplyFromUser(e,t.apply),mv.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Vi(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var $j=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const hue="editor.action.codeAction",fue="editor.action.refactor",gue="editor.action.sourceAction",jj="editor.action.organizeImports",qj="editor.action.fixAll";class pue{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return $j(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Pl(i)}n&&(this.action.edit=n.edit)}return this})}}class Kj extends ot{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(Kj.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Ed(e.diagnostics)?Ed(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Ed(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Vi.QuickFix.contains(new Vi(e.kind))&&!!e.isPreferred)}}const OJ={actions:[],documentation:void 0};function Gj(r,e,t,n,i){var o;const s=t.filter||{},a={only:(o=s.include)===null||o===void 0?void 0:o.value,trigger:t.type},l=new k$(r,i),u=i3e(r,s),d=new Nt,h=u.map(_=>$j(this,void 0,void 0,function*(){try{n.report(_);const C=yield _.provideCodeActions(r,e,a,l.token);if(C&&d.add(C),l.token.isCancellationRequested)return OJ;const S=((C==null?void 0:C.actions)||[]).filter(T=>T&&n3e(s,T)),x=r3e(_,S,s.include);return{actions:S.map(T=>new pue(T,_)),documentation:x}}catch(C){if(Zv(C))throw C;return Pl(C),OJ}})),p=Nv.onDidChange(()=>{const _=Nv.all(r);Rf(_,u)||l.cancel()});return Promise.all(h).then(_=>{const C=Ire(_.map(x=>x.actions)),S=tD(_.map(x=>x.documentation));return new Kj(C,S,d)}).finally(()=>{p.dispose(),l.dispose()})}function i3e(r,e){return Nv.all(r).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>t3e(e,new Vi(n))):!0)}function r3e(r,e,t){if(!r.documentation)return;const n=r.documentation.map(i=>({kind:new Vi(i.kind),command:i.command}));if(t){let i;for(const o of n)o.kind.contains(t)&&(i?i.kind.contains(o.kind)&&(i=o):i=o);if(i)return i==null?void 0:i.command}for(const i of e)if(i.kind){for(const o of n)if(o.kind.contains(new Vi(i.kind)))return o.command}}Yi.registerCommand("_executeCodeActionProvider",function(r,e,t,n,i){return $j(this,void 0,void 0,function*(){if(!(e instanceof qn))throw hm();const o=r.get(ua).getModel(e);if(!o)throw hm();const s=ln.isISelection(t)?ln.liftSelection(t):le.isIRange(t)?o.validateRange(t):void 0;if(!s)throw hm();const a=typeof n=="string"?new Vi(n):void 0,l=yield Gj(o,s,{type:1,filter:{includeSourceActions:!0,include:a}},iE.None,Oi.None),u=[],d=Math.min(l.validActions.length,typeof i=="number"?i:0);for(let h=0;h<d;h++)u.push(l.validActions[h].resolve(Oi.None));try{return yield Promise.all(u),l.validActions.map(h=>h.action)}finally{setTimeout(()=>l.dispose(),100)}})});var o3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},s3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Rh=class lH{constructor(e,t){this._messageWidget=new lc,this._messageListeners=new Nt,this._editor=e,this._visible=lH.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(lH.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Tl(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new RJ(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new uc(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new le(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(RJ.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(E("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Rh.ID="editor.contrib.messageController";Rh.MESSAGE_VISIBLE=new _n("messageVisible",!1,E("messageVisible","Whether the editor is currently showing an inline message"));Rh=o3e([s3e(1,Jn)],Rh);const a3e=Fl.bindToContribution(Rh.get);Mt(new a3e({id:"leaveEditorMessage",precondition:Rh.MESSAGE_VISIBLE,handler:r=>r.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let RJ=class{constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");s.classList.add("message"),s.textContent=i,this._domNode.appendChild(s);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};br(Rh.ID,Rh);var l3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},MJ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},u3e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class PJ extends Of{constructor(e,t){super(e.command?e.command.id:e.title,c3e(e.title),void 0,!e.disabled,t),this.action=e}}function c3e(r){return r.replace(/\r\n|\r|\n/g," ")}let uH=class extends ot{constructor(e,t,n,i){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new lc),this._keybindingResolver=new CF({getKeybindings:()=>i.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,i){return u3e(this,void 0,void 0,function*(){const o=i.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,GS();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,o,t.documentation),a=Ge.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),u=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:u?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:d=>d instanceof PJ?l(d.action):void 0})})}getMenuActions(e,t,n){var i,o;const s=d=>new PJ(d.action,()=>this._delegate.onSelectCodeAction(d)),a=t.map(s),l=[...n],u=this._editor.getModel();if(u&&a.length)for(const d of Nv.all(u))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(o=(i=e.filter)===null||i===void 0?void 0:i.include)===null||o===void 0?void 0:o.value},t.map(h=>h.action)));return l.length&&a.push(new ep,...l.map(d=>s(new pue({title:d.title,command:d},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=tu(this._editor.getDomNode()),i=n.left+t.left,o=n.top+t.top+t.height;return{x:i,y:o}}};uH=l3e([MJ(2,XC),MJ(3,Ro)],uH);class CF{constructor(e){this._keybindingProvider=e}getResolver(){const e=new aP(()=>this._keybindingProvider.getKeybindings().filter(t=>CF.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===jj?n={kind:Vi.SourceOrganizeImports.value}:t.command===qj&&(n={kind:Vi.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},mv.fromUser(n,{kind:Vi.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Vi(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,o)=>i?i.kind.contains(o.kind)?o:i:o,void 0)}}CF.codeActionCommands=[fue,hue,gue,jj,qj];var d3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},h3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wT;(function(r){r.Hidden={type:0};class e{constructor(n,i,o,s){this.actions=n,this.trigger=i,this.editorPosition=o,this.widgetPosition=s,this.type=1}}r.Showing=e})(wT||(wT={}));let lP=class mue extends ot{constructor(e,t,n,i){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=i,this._onClick=this._register(new Fe),this.onClick=this._onClick.event,this._state=wT.Hidden,this._domNode=document.createElement("div"),this._domNode.className=Ae.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),Or.ignoreTarget(this._domNode),this._register(g0e(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();const{top:s,height:a}=tu(this._domNode),l=this._editor.getOption(58);let u=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(u+=l),this._onClick.fire({x:o.posx,y:s+a+u,actions:this.state.actions,trigger:this.state.trigger})})),this._register(kt(this._domNode,"mouseenter",o=>{if((o.buttons&1)!==1)return;this.hide();const s=new eE;s.startMonitoring(o.target,o.buttons,iD,()=>{},()=>{s.dispose()})})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(56).enabled)return this.hide();const o=this._editor.getModel();if(!o)return this.hide();const{lineNumber:s,column:a}=o.validatePosition(n),l=o.getOptions().tabSize,u=i.get(43),d=o.getLineContent(s),h=Td.computeIndentLevel(d,l),p=u.spaceWidth*h>22,_=S=>S>2&&this._editor.getTopForLineNumber(S)===this._editor.getTopForLineNumber(S-1);let C=s;if(!p){if(s>1&&!_(s-1))C-=1;else if(!_(s+1))C+=1;else if(a*u.spaceWidth<22)return this.hide()}this.state=new wT.Showing(e,t,n,{position:{lineNumber:C,column:1},preference:mue._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=wT.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...Ae.lightBulb.classNamesArray),this._domNode.classList.add(...Ae.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=E("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...Ae.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...Ae.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=E("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=E("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};lP._posPref=[0];lP=d3e([h3e(3,Ro)],lP);mo((r,e)=>{var t;const n=(t=r.getColor(Mf))===null||t===void 0?void 0:t.transparent(.7),i=r.getColor(_Ce);i&&e.addRule(`
		.monaco-editor .contentWidgets ${Ae.lightBulb.cssSelector} {
			color: ${i};
			background-color: ${n};
		}`);const o=r.getColor(vCe);o&&e.addRule(`
		.monaco-editor .contentWidgets ${Ae.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${n};
		}`)});var f3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},g3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},m7=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},p3e=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},m3e=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},rR;let cH=class extends ot{constructor(e,t,n,i,o){super(),this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new lc),rR.set(this,!1),this._codeActionWidget=new aP(()=>this._register(o.createInstance(uH,this._editor,{onSelectCodeAction:s=>m7(this,void 0,void 0,function*(){this.delegate.applyCodeAction(s,!0)})}))),this._lightBulbWidget=new aP(()=>{const s=this._register(o.createInstance(lP,this._editor,t,n));return this._register(s.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),s})}dispose(){p3e(this,rR,!0,"f"),super.dispose()}update(e){var t,n,i;return m7(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let o;try{o=yield e.actions}catch(s){ti(s);return}if(!m3e(this,rR,"f"))if(this._lightBulbWidget.getValue().update(o,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,o);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{o.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,o);if(l&&l.action.disabled){Rh.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),o.dispose();return}}}const s=!!(!((i=e.trigger.filter)===null||i===void 0)&&i.include);if(e.trigger.context&&(!o.allActions.length||!s&&!o.validActions.length)){Rh.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=o,o.dispose();return}this._activeCodeActions.value=o,this._codeActionWidget.getValue().show(e.trigger,o,e.position,{includeDisabledActions:s})}else this._codeActionWidget.getValue().isVisible?o.dispose():this._activeCodeActions.value=o})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,i){return m7(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,i)})}};rR=new WeakMap;cH=f3e([g3e(4,xi)],cH);var _7=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_3e=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},lL;const _ue=new _n("supportedCodeAction","");class v3e extends ot{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new uc),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>voe(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const i=t.validateRange(n);if(le.intersectRanges(i,e))return le.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:o}=n.getPosition(),s=t.getLineContent(i);if(s.length===0)return;if(o===1){if(/\s/.test(s[0]))return}else if(o===t.getLineMaxColumn(i)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[o-2])&&/\s/.test(s[o-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const i=this._getRangeOfMarker(t),o=i?i.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:o};return this._signalChange(s),s}}var vw;(function(r){r.Empty={type:0};class e{constructor(n,i,o,s){this.trigger=n,this.rangeOrSelection=i,this.position=o,this._cancellablePromise=s,this.type=1,this.actions=s.catch(a=>{if(Zv(a))return b3e;throw a})}cancel(){this._cancellablePromise.cancel()}}r.Triggered=e})(vw||(vw={}));const b3e={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class C3e extends ot{constructor(e,t,n,i){super(),this._editor=e,this._markerService=t,this._progressService=i,this._codeActionOracle=this._register(new lc),this._state=vw.Empty,this._onDidChangeState=this._register(new Fe),this.onDidChangeState=this._onDidChangeState.event,lL.set(this,!1),this._supportedCodeActions=_ue.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(Nv.onDidChange(()=>this._update())),this._update()}dispose(){_7(this,lL,"f")||(_3e(this,lL,!0,"f"),super.dispose(),this.setState(vw.Empty,!0))}_update(){if(_7(this,lL,"f"))return;this._codeActionOracle.value=void 0,this.setState(vw.Empty);const e=this._editor.getModel();if(e&&Nv.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of Nv.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new v3e(this._editor,this._markerService,n=>{var i;if(!n){this.setState(vw.Empty);return}const o=fl(s=>Gj(e,n.selection,n.trigger,iE.None,s));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(o,250)),this.setState(new vw.Triggered(n.trigger,n.selection,n.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!_7(this,lL,"f")&&this._onDidChangeState.fire(e))}}lL=new WeakMap;var y3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},oO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},vue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function V2(r){return Xt.regex(_ue.keys()[0],new RegExp("(\\s|^)"+Vf(r.value)+"\\b"))}const Yj={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:E("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:E("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[E("args.schema.apply.first","Always apply the first returned code action."),E("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),E("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:E("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let ES=class bue extends ot{constructor(e,t,n,i,o){super(),this._instantiationService=o,this._editor=e,this._model=this._register(new C3e(this._editor,t,n,i)),this._register(this._model.onDidChangeState(s=>this.update(s))),this._ui=new aP(()=>this._register(new cH(e,fD.Id,H2.Id,{applyCodeAction:(s,a)=>vue(this,void 0,void 0,function*(){try{yield this._applyCodeAction(s)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(bue.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Rh.get(this._editor).closeMessage();const i=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:i}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(w3e,e,this._editor)}};ES.ID="editor.contrib.quickFixController";ES=y3e([oO(1,A2),oO(2,Jn),oO(3,n1),oO(4,xi)],ES);function w3e(r,e,t){return vue(this,void 0,void 0,function*(){const n=r.get(T$),i=r.get(Go),o=r.get(Xv),s=r.get(As);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Oi.None),e.action.edit&&(yield n.apply(N4.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield i.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=S3e(a);s.error(typeof l=="string"?l:E("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function S3e(r){return typeof r=="string"?r:r instanceof Error&&typeof r.message=="string"?r.message:void 0}function dE(r,e,t,n){if(r.hasModel()){const i=ES.get(r);i&&i.manualTriggerAtCurrentPosition(e,t,n)}}class fD extends gn{constructor(){super({id:fD.Id,label:E("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Xt.and(Le.writable,Le.hasCodeActionsProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:2132,weight:100}})}run(e,t){return dE(t,E("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}fD.Id="editor.action.quickFix";class E3e extends Fl{constructor(){super({id:hue,precondition:Xt.and(Le.writable,Le.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:Yj}]}})}runEditorCommand(e,t,n){const i=mv.fromUser(n,{kind:Vi.Empty,apply:"ifSingle"});return dE(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?E("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):E("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?E("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):E("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class L3e extends gn{constructor(){super({id:fue,label:E("refactor.label","Refactor..."),alias:"Refactor...",precondition:Xt.and(Le.writable,Le.hasCodeActionsProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Xt.and(Le.writable,V2(Vi.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:Yj}]}})}run(e,t,n){const i=mv.fromUser(n,{kind:Vi.Refactor,apply:"never"});return dE(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?E("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):E("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?E("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):E("editor.action.refactor.noneMessage","No refactorings available"),{include:Vi.Refactor.contains(i.kind)?i.kind:Vi.None,onlyIncludePreferredActions:i.preferred},i.apply)}}class x3e extends gn{constructor(){super({id:gue,label:E("source.label","Source Action..."),alias:"Source Action...",precondition:Xt.and(Le.writable,Le.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Xt.and(Le.writable,V2(Vi.Source))},description:{description:"Source Action...",args:[{name:"args",schema:Yj}]}})}run(e,t,n){const i=mv.fromUser(n,{kind:Vi.Source,apply:"never"});return dE(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?E("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):E("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?E("editor.action.source.noneMessage.preferred","No preferred source actions available"):E("editor.action.source.noneMessage","No source actions available"),{include:Vi.Source.contains(i.kind)?i.kind:Vi.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class D3e extends gn{constructor(){super({id:jj,label:E("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Xt.and(Le.writable,V2(Vi.SourceOrganizeImports)),kbOpts:{kbExpr:Le.editorTextFocus,primary:1581,weight:100}})}run(e,t){return dE(t,E("editor.action.organize.noneMessage","No organize imports action available"),{include:Vi.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class I3e extends gn{constructor(){super({id:qj,label:E("fixAll.label","Fix All"),alias:"Fix All",precondition:Xt.and(Le.writable,V2(Vi.SourceFixAll))})}run(e,t){return dE(t,E("fixAll.noneMessage","No fix all action available"),{include:Vi.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class H2 extends gn{constructor(){super({id:H2.Id,label:E("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Xt.and(Le.writable,V2(Vi.QuickFix)),kbOpts:{kbExpr:Le.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return dE(t,E("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Vi.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}H2.Id="editor.action.autoFix";br(ES.ID,ES);Wt(fD);Wt(L3e);Wt(x3e);Wt(D3e);Wt(H2);Wt(I3e);Mt(new E3e);var FJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class dH{constructor(){this.lenses=[],this._disposables=new Nt}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function Cue(r,e){return FJ(this,void 0,void 0,function*(){const t=xb.ordered(r),n=new Map,i=new dH,o=t.map((s,a)=>FJ(this,void 0,void 0,function*(){n.set(s,a);try{const l=yield Promise.resolve(s.provideCodeLenses(r,e));l&&i.add(l,s)}catch(l){Pl(l)}}));return yield Promise.all(o),i.lenses=i.lenses.sort((s,a)=>s.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:s.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:n.get(s.provider)<n.get(a.provider)?-1:n.get(s.provider)>n.get(a.provider)?1:s.symbol.range.startColumn<a.symbol.range.startColumn?-1:s.symbol.range.startColumn>a.symbol.range.startColumn?1:0),i})}Yi.registerCommand("_executeCodeLensProvider",function(r,...e){let[t,n]=e;jr(qn.isUri(t)),jr(typeof n=="number"||!n);const i=r.get(ua).getModel(t);if(!i)throw hm();const o=[],s=new Nt;return Cue(i,Oi.None).then(a=>{s.add(a);let l=[];for(const u of a.lenses)n==null||u.symbol.command?o.push(u.symbol):n-- >0&&u.provider.resolveCodeLens&&l.push(Promise.resolve(u.provider.resolveCodeLens(i,u.symbol,Oi.None)).then(d=>o.push(d||u.symbol)));return Promise.all(l)}).then(()=>o).finally(()=>{setTimeout(()=>s.dispose(),100)})});var k3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},T3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const yue=ar("ICodeLensCache");class BJ{constructor(e,t){this.lineCount=e,this.data=t}}let hH=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new YC(20,.75);const t="codelens/cache";TT(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),qb(e.onWillSaveState)(o=>{o.reason===QM.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(s=>{var a;return{range:s.symbol.range,command:s.symbol.command&&{id:"",title:(a=s.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new dH;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const o=new BJ(e.getLineCount(),i);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const o of n.data.lenses)i.add(o.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],o=[];for(const a of i.lines)o.push({range:new le(a,1,a,11)});const s=new dH;s.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(n,new BJ(i.lineCount,s))}}catch{}}};hH=k3e([T3e(0,i0)],hH);ZC(yue,hH);class N3e{constructor(e,t,n){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class yF{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${yF._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],i=!1;for(let o=0;o<e.length;o++){const s=e[o];if(s&&(i=!0,s.command)){const a=qw(s.command.title.trim());s.command.id?(n.push(Lt("a",{id:String(o),title:s.command.tooltip},...a)),this._commands.set(String(o),s.command)):n.push(Lt("span",{title:s.command.tooltip},...a)),o+1<e.length&&n.push(Lt("span",void 0,"|"))}}i?(IC(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):IC(this._domNode,Lt("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}yF._idPool=0;class v7{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}class WJ{constructor(e,t,n,i,o,s,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l,u=[];this._data.forEach((d,h)=>{d.symbol.command&&u.push(d.symbol),i.addDecoration({range:d.symbol.range,options:pi.EMPTY},p=>this._decorationIds[h]=p),l?l=le.plusRange(l,d.symbol.range):l=le.lift(d.symbol.range)}),this._viewZone=new N3e(l.startLineNumber-1,s,a),this._viewZoneId=o.addZone(this._viewZone),u.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(u,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new yF(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&le.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:pi.EMPTY},o=>this._decorationIds[i]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var A3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},b7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},O3e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let xx=class{constructor(e,t,n,i){this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=i,this._disposables=new Nt,this._localToDispose=new Nt,this._lenses=[],this._getCodeLensModelDelays=new nM(xb,250,2500),this._oldCodeLensModels=new Nt,this._resolveCodeLensesDelays=new nM(xb,250,2500),this._resolveCodeLensesScheduler=new Xr(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(16)||o.hasChanged(15))&&this._updateLensStyle(),o.hasChanged(14)&&this._onModelChange()})),this._disposables.add(xb.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+xoe(this._editor.getId()).toString(16),this._styleElement=Bf(qP(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),i=this._editor.getOption(43),o=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${s}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${nu.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(s,i.fontFeatureSettings),this._editor.changeViewZones(l=>{for(let u of this._lenses)u.updateHeight(e,l)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!xb.has(e)){t&&this._localToDispose.add(tS(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of xb.all(e))if(typeof i.onDidChange=="function"){let o=i.onDidChange(()=>n.schedule());this._localToDispose.add(o)}const n=new Xr(()=>{var i;const o=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=fl(s=>Cue(e,s)),this._getCodeLensModelPromise.then(s=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=s,this._codeLensCache.put(e,s);const a=this._getCodeLensModelDelays.update(e,Date.now()-o);n.delay=a,this._renderCodeLensSymbols(s),this._resolveCodeLensesInViewportSoon()},ti)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(n),this._localToDispose.add(Hi(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(o=>{let s=[],a=-1;this._lenses.forEach(u=>{!u.isValid()||a===u.getLineNumber()?s.push(u):(u.update(o),a=u.getLineNumber())});let l=new v7;s.forEach(u=>{u.dispose(l,o),this._lenses.splice(this._lenses.indexOf(u),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Hi(()=>{if(this._editor.getModel()){const i=MC.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(s=>{this._disposeAllLenses(o,s)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let o=i.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const s of this._lenses){let a=s.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new v7;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],i;for(let a of e.lenses){let l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}const o=MC.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const u=new v7;let d=0,h=0;for(;h<n.length&&d<this._lenses.length;){let p=n[h][0].symbol.range.startLineNumber,_=this._lenses[d].getLineNumber();_<p?(this._lenses[d].dispose(u,l),this._lenses.splice(d,1)):_===p?(this._lenses[d].updateCodeLensSymbols(n[h],u),h++,d++):(this._lenses.splice(d,0,new WJ(n[h],this._editor,this._styleClassName,u,l,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(u,l),this._lenses.splice(d,1);for(;h<n.length;)this._lenses.push(new WJ(n[h],this._editor,this._styleClassName,u,l,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;u.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const o=Date.now(),s=fl(a=>{const l=n.map((u,d)=>{const h=new Array(u.length),p=u.map((_,C)=>!_.symbol.command&&typeof _.provider.resolveCodeLens=="function"?Promise.resolve(_.provider.resolveCodeLens(t,_.symbol,a)).then(S=>{h[C]=S},Pl):(h[C]=_.symbol,Promise.resolve(void 0)));return Promise.all(p).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDelays.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{ti(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};xx.ID="css.editor.codeLens";xx=A3e([b7(1,Go),b7(2,As),b7(3,yue)],xx);br(xx.ID,xx);Wt(class extends gn{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:Le.hasCodeLensProvider,label:E("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return O3e(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Kf),i=e.get(Go),o=e.get(As),s=t.getSelection().positionLineNumber,a=t.getContribution(xx.ID),l=[];for(let d of a.getLenses())if(d.getLineNumber()===s)for(let h of d.getItems()){const{command:p}=h.symbol;p&&l.push({label:p.title,command:p})}if(l.length===0)return;const u=yield n.pick(l,{canPickMany:!1});if(u)try{yield i.executeCommand(u.command.id,...u.command.arguments||[])}catch(d){o.error(d)}})}});function R3e(r,e){const t=[],i=dx.ordered(r).reverse().map(o=>Promise.resolve(o.provideDocumentColors(r,e)).then(s=>{if(Array.isArray(s))for(let a of s)t.push({colorInfo:a,provider:o})}));return Promise.all(i).then(()=>t)}function VJ(r,e,t,n){return Promise.resolve(t.provideColorPresentations(r,e,n))}Yi.registerCommand("_executeDocumentColorProvider",function(r,...e){const[t]=e;if(!(t instanceof qn))throw hm();const n=r.get(ua).getModel(t);if(!n)throw hm();const i=[],s=dx.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,Oi.None)).then(l=>{if(Array.isArray(l))for(let u of l)i.push({range:u.range,color:[u.color.red,u.color.green,u.color.blue,u.color.alpha]})}));return Promise.all(s).then(()=>i)});Yi.registerCommand("_executeColorPresentationProvider",function(r,...e){const[t,n]=e,{uri:i,range:o}=n;if(!(i instanceof qn)||!Array.isArray(t)||t.length!==4||!le.isIRange(o))throw hm();const[s,a,l,u]=t,d=r.get(ua).getModel(i);if(!d)throw hm();const h={range:o,color:{red:s,green:a,blue:l,alpha:u}},p=[],C=dx.ordered(d).reverse().map(S=>Promise.resolve(S.provideColorPresentations(d,h,Oi.None)).then(x=>{Array.isArray(x)&&p.push(...x)}));return Promise.all(C).then(()=>p)});var M3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},P3e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const F3e=500;let LS=class wue extends ot{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new Nt),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new uoe(this._editor),this._colorDecorationClassRefs=this._register(new Nt),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(dx.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!dx.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new uc,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},wue.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=fl(e=>{const t=this._editor.getModel();return t?R3e(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},ti)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:pi.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,i)=>this._colorDatas.set(n,e[i]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<F3e;n++){const{red:i,green:o,blue:s,alpha:a}=e[n].colorInfo.color,l=new sr(Math.round(i*255),Math.round(o*255),Math.round(s*255),a);let u=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`;const d=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:rbe,inlineClassName:`${d.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(le.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};LS.ID="editor.contrib.colorDetector";LS.RECOMPUTE_TIME=1e3;LS=M3e([P3e(1,Jr)],LS);br(LS.ID,LS);function fH(r,e){return!!r[e]}class C7{constructor(e,t){this.target=e.target,this.hasTriggerModifier=fH(e.event,t.triggerModifier),this.hasSideBySideModifier=fH(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class HJ{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=fH(e,t.triggerModifier)}}class sO{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function UJ(r){return r==="altKey"?ji?new sO(57,"metaKey",6,"altKey"):new sO(5,"ctrlKey",6,"altKey"):ji?new sO(6,"altKey",57,"metaKey"):new sO(6,"altKey",5,"ctrlKey")}class Sue extends ot{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Fe),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Fe),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Fe),this.onCancel=this._onCancel.event,this._editor=e,this._opts=UJ(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=UJ(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new C7(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new C7(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new C7(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new HJ(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new HJ(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var B3e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ew=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let xS=class extends oN{constructor(e,t,n,i,o,s,a,l,u,d){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},i,o,s,a,l,u,d),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(h=>this._onParentConfigurationChanged(h)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){e0(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};xS=B3e([ew(3,xi),ew(4,vr),ew(5,Go),ew(6,Jn),ew(7,Ho),ew(8,As),ew(9,Uc)],xS);const zJ=new je(new sr(0,122,204)),W3e={showArrow:!0,showFrame:!0,className:"",frameColor:zJ,arrowColor:zJ,keepEditorSelection:!1},V3e="vs.editor.contrib.zoneWidget";class H3e{constructor(e,t,n,i,o,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=o,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class U3e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class wF{constructor(e){this._editor=e,this._ruleName=wF._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),hG(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){hG(this._ruleName),I9(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:le.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}wF._IdGenerator=new lj(".arrow-decoration-");class z3e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Nt,this.container=null,this._isShowing=!1,this.editor=e,this.options=Cb(t),e0(this.options,W3e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new wF(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=le.isIRange(e)?le.lift(e):le.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:pi.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),o=this._getWidth(i);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(i)+"px";const s=document.createElement("div");s.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let u=0,d=0;if(this._arrow&&this.options.showArrow&&(u=Math.round(a/3),this._arrow.height=u,this._arrow.show(n)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(_=>{this._viewZone&&_.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new H3e(s,n.lineNumber,n.column,t,C=>this._onViewZoneTop(C),C=>this._onViewZoneHeight(C)),this._viewZone.id=_.addZone(this._viewZone),this._overlayWidget=new U3e(V3e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const _=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=_+"px",this.container.style.borderBottomWidth=_+"px"}let h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=u+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,o),this.options.keepEditorSelection||this.editor.setSelection(e);const p=this.editor.getModel();if(p){const _=e.endLineNumber+1;_<=p.getLineCount()?this.revealLine(_,!1):this.revealLine(p.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new eu(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),i=n<0?Math.ceil(n):Math.floor(n),o=e.heightInLines+i;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class $3e extends sx{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Fe),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ft(e,Lt(".monaco-dropdown")),this._label=ft(this._element,Lt(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(const o of[In.CLICK,In.MOUSE_DOWN,co.Tap])this._register(kt(this.element,o,s=>xr.stop(s,!0)));for(const o of[In.MOUSE_DOWN,co.Tap])this._register(kt(this._label,o,s=>{s instanceof MouseEvent&&s.detail>1||(this.visible?this.hide():this.show())}));this._register(kt(this._label,In.KEY_UP,o=>{const s=new Oo(o);(s.equals(3)||s.equals(10))&&(xr.stop(o,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(Or.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class j3e extends $3e{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Eue extends lv{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new Fe),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=ft(o,Lt("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new j3e(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var s;(s=this.element)===null||s===void 0||s.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var Zj=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uv=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Lue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function q3e(r,e,t,n,i,o,s){const a=r.getActions(e);return G3e(a,t,!1,typeof n=="string"?u=>u===n:n,i,o,s),K3e(a)}function K3e(r){const e=new Nt;for(const[,t]of r)for(const n of t)e.add(n);return e}function G3e(r,e,t,n=a=>a==="navigation",i=Number.MAX_SAFE_INTEGER,o=()=>!1,s=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const u=new Set;for(const[d,h]of r){let p;n(d)?(p=a,p.length>0&&s&&p.push(new ep)):(p=l,p.length>0&&p.push(new ep));for(let _ of h){t&&(_=_ instanceof TC&&_.alt?_.alt:_);const C=p.push(_);_ instanceof KP&&u.add({group:d,action:_,index:C-1})}}for(const{group:d,action:h,index:p}of u){const _=n(d)?a:l,C=h.actions;(C.length<=1||_.length+C.length-2<=i)&&o(h,d,_.length)&&_.splice(p,1,...C)}if(a!==l&&a.length>i){const d=a.splice(i,a.length-i);l.unshift(...d,new ep)}}let Dx=class extends aN{constructor(e,t,n,i,o){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new lc),this._altKey=Sw.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return Lue(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(Ol||Pc)&&this._altKey.keyStatus.shiftKey;const i=()=>{const o=t&&n;o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{n=o.altKey||(Ol||Pc)&&o.shiftKey,i()})),this._register(kt(e,"mouseleave",o=>{t=!1,i()})),this._register(kt(e,"mouseenter",o=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let i=t?E("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=s&&s.getLabel(),l=a?E("titleAndKb","{0} ({1})",o,a):o;i+=`
[${A$.modifierLabels[xf].altKey}] ${l}`}this.label.title=i}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:i}=this;if(!n||!i)return;const o=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(o)if(So.isThemeIcon(o)){const s=So.asClassNameArray(o);i.classList.add(...s),this._itemClassDispose.value=Hi(()=>{i.classList.remove(...s)})}else o.light&&i.style.setProperty("--menu-entry-icon-light",nS(o.light)),o.dark&&i.style.setProperty("--menu-entry-icon-dark",nS(o.dark)),i.classList.add("icon"),this._itemClassDispose.value=Hi(()=>{i.classList.remove("icon"),i.style.removeProperty("--menu-entry-icon-light"),i.style.removeProperty("--menu-entry-icon-dark")})}};Dx=Zj([uv(2,Ro),uv(3,As),uv(4,Jn)],Dx);let gH=class extends Eue{constructor(e,t,n){var i,o;const s=Object.assign({},t??Object.create(null),{menuAsChild:(i=t==null?void 0:t.menuAsChild)!==null&&i!==void 0?i:!1,classNames:(o=t==null?void 0:t.classNames)!==null&&o!==void 0?o:So.isThemeIcon(e.item.icon)?So.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,s)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!So.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",nS(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",nS(t.dark)))}}};gH=Zj([uv(2,XC)],gH);let pH=class extends lv{constructor(e,t,n,i,o,s,a,l){var u,d,h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=o,this._menuService=s,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let p,_=l.get(this._storageKey,1);_&&(p=e.actions.find(S=>_===S.id)),p||(p=e.actions[0]),this._defaultAction=this._instaService.createInstance(Dx,p,void 0);const C=Object.assign({},t??Object.create(null),{menuAsChild:(u=t==null?void 0:t.menuAsChild)!==null&&u!==void 0?u:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(h=t==null?void 0:t.actionRunner)!==null&&h!==void 0?h:new sx});this._dropdown=new Eue(e,e.actions,this._contextMenuService,C),this._dropdown.actionRunner.onDidRun(S=>{S.action instanceof TC&&this.update(S.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Dx,e,void 0),this._defaultAction.actionRunner=new class extends sx{runAction(t,n){return Lue(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(L0e(this._container,Lt(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Lt(".action-container");this._defaultAction.render(ft(this._container,t)),this._register(kt(t,In.KEY_DOWN,i=>{const o=new Oo(i);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const n=Lt(".dropdown-action-container");this._dropdown.render(ft(this._container,n)),this._register(kt(n,In.KEY_DOWN,i=>{var o;const s=new Oo(i);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};pH=Zj([uv(2,Ro),uv(3,As),uv(4,XC),uv(5,XS),uv(6,xi),uv(7,i0)],pH);function Y3e(r,e,t){return e instanceof TC?r.createInstance(Dx,e,void 0):e instanceof Tz?e.item.rememberDefaultAction?r.createInstance(pH,e,t):r.createInstance(gH,e,t):void 0}var xue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Due=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Iue=ar("IPeekViewService");ZC(Iue,class{constructor(){this._widgets=new Map}addExclusiveWidget(r,e){const t=this._widgets.get(r);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const i=this._widgets.get(r);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(r))};this._widgets.set(r,{widget:e,listener:e.onDidClose(n)})}});var Ad;(function(r){r.inPeekEditor=new _n("inReferenceSearchEditor",!0,E("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),r.notInPeekEditor=r.inPeekEditor.toNegated()})(Ad||(Ad={}));let IN=class{constructor(e,t){e instanceof xS&&Ad.inPeekEditor.bindTo(t)}dispose(){}};IN.ID="editor.contrib.referenceController";IN=xue([Due(1,Jn)],IN);br(IN.ID,IN);function Z3e(r){let e=r.get(vr).getFocusedCodeEditor();return e instanceof xS?e.getParentEditor():e}const X3e={headerBackgroundColor:je.white,primaryHeadingColor:je.fromHex("#333333"),secondaryHeadingColor:je.fromHex("#6c6c6cb3")};let uP=class extends z3e{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new Fe,this.onDidClose=this._onDidClose.event,e0(this.options,X3e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Lt(".head"),this._bodyElement=Lt(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=Lt(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),za(n,"click",s=>this._onTitleClick(s))),ft(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=Lt("span.filename"),this._secondaryHeading=Lt("span.dirname"),this._metaHeading=Lt("span.meta"),ft(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=Lt(".peekview-actions");ft(this._headElement,i);const o=this._getActionBarOptions();this._actionbarWidget=new Wv(i,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Of("peekview.close",E("label.close","Close"),Ae.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Y3e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:ya(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Lh(this._metaHeading)):kc(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};uP=xue([Due(2,xi)],uP);const Q3e=Be("peekViewTitle.background",{dark:Qr(gm,.1),light:Qr(gm,.1),hc:null},E("peekViewTitleBackground","Background color of the peek view title area.")),kue=Be("peekViewTitleLabel.foreground",{dark:je.white,light:je.black,hc:je.white},E("peekViewTitleForeground","Color of the peek view title.")),Tue=Be("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},E("peekViewTitleInfoForeground","Color of the peek view title info.")),J3e=Be("peekView.border",{dark:gm,light:gm,hc:Ns},E("peekViewBorder","Color of the peek view borders and arrow.")),e5e=Be("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:je.black},E("peekViewResultsBackground","Background color of the peek view result list."));var t5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class WC{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=Aae.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?E({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Uf(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):E("aria.oneReference","symbol in {0} on line {1} at column {2}",Uf(this.uri),this.range.startLineNumber,this.range.startColumn)}}class n5e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:o,endLineNumber:s,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:o-t}),u=new le(i,l.startColumn,i,o),d=new le(s,a,s,1073741824),h=n.getValueInRange(u).replace(/^\s+/,""),p=n.getValueInRange(e),_=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+p+_,highlight:{start:h.length,end:h.length+p.length}}}}class kN{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Tu}dispose(){nr(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?E("aria.fileReferences.1","1 symbol in {0}, full path {1}",Uf(this.uri),this.uri.fsPath):E("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Uf(this.uri),this.uri.fsPath)}resolve(e){return t5e(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new n5e(n))}catch(n){ti(n)}return this})}}class Dd{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Fe,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Dd._compareReferences);let i;for(let o of e)if((!i||!Ru.isEqual(i.uri,o.uri,!0))&&(i=new kN(this,o.uri),this.groups.push(i)),i.children.length===0||Dd._compareReferences(o,i.children[i.children.length-1])!==0){const s=new WC(n===o,i,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),i.children.push(s)}}dispose(){nr(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Dd(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?E("aria.result.0","No results found"):this.references.length===1?E("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?E("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):E("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.length,s=n.parent.groups.length;return s===1||t&&i+1<o||!t&&i>0?(t?i=(i+1)%o:i=(i+o-1)%o,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%s,n.parent.groups[i].children[0]):(i=(i+s-1)%s,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,o)=>({idx:o,prefixLen:ax(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,o)=>i.prefixLen>o.prefixLen?-1:i.prefixLen<o.prefixLen?1:i.offsetDist<o.offsetDist?-1:i.offsetDist>o.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&le.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ru.compare(e.uri,t.uri)||le.compareRangesUsingStarts(e.range,t.range)}}function Nue(r){if(!r)return;typeof r=="string"&&(r=qn.file(r));const e=Uf(r)||(r.scheme===Si.file?r.fsPath:r.path);return Ol&&Xye(e)?mH(e):e}function mH(r,e){return _oe(r,e)?r.charAt(0).toUpperCase()+r.slice(1):r}var SF=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},TN=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let _H=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Dd||e instanceof kN}getChildren(e){if(e instanceof Dd)return e.groups;if(e instanceof kN)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};_H=SF([TN(0,Fc)],_H);class i5e{getHeight(){return 23}getTemplateId(e){return e instanceof kN?NN.id:U2.id}}let vH=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof WC){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return Uf(e.uri)}};vH=SF([TN(0,Ro)],vH);class r5e{getId(e){return e instanceof WC?e.id:e.uri}}let bH=class extends ot{constructor(e,t,n){super(),this._uriLabel=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new eP(i,{supportHighlights:!0})),this.badge=new AV(ft(i,Lt(".count"))),this._register(vTe(this.badge,n)),e.appendChild(i)}set(e,t){let n=Kz(e.uri);this.file.setLabel(Nue(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(E("referencesCount","{0} references",i)):this.badge.setTitleFormat(E("referenceCount","{0} reference",i))}};bH=SF([TN(1,I2),TN(2,Ho)],bH);let NN=class Aue{constructor(e){this._instantiationService=e,this.templateId=Aue.id}renderTemplate(e){return this._instantiationService.createInstance(bH,e)}renderElement(e,t,n){n.set(e.element,V4(e.filterData))}disposeTemplate(e){e.dispose()}};NN.id="FileReferencesRenderer";NN=SF([TN(0,xi)],NN);class o5e{constructor(e){this.label=new bS(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${Uf(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:s}=i;t&&!mm.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,V4(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[s]))}}}class U2{constructor(){this.templateId=U2.id}renderTemplate(e){return new o5e(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}U2.id="OneReferenceRenderer";class s5e{getWidgetAriaLabel(){return E("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var a5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cb=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},$J=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class EF{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Nt,this._callOnModelChange=new Nt,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let o=0,s=e.children.length;o<s;o++){let a=e.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:EF.DecorationOptions}),n.push(o))}const i=this._editor.deltaDecorations([],t);for(let o=0;o<i.length;o++)this._decorations.set(i[o],e.children[n[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,i]of this._decorations){const o=t.getDecorationRange(n);if(!o)continue;let s=!1;if(!le.equalsRange(o,i.range)){if(le.spansMultipleLines(o))s=!0;else{const a=i.range.endColumn-i.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(s=!0)}s?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=o}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}EF.DecorationOptions=pi.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class l5e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class u5e extends DV{}let CH=class extends uP{constructor(e,t,n,i,o,s,a,l,u,d,h,p){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=o,this._instantiationService=s,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=u,this._keybindingService=d,this._modeService=h,this._languageConfigurationService=p,this._disposeOnNewModel=new Nt,this._callOnDispose=new Nt,this._onDidSelectReference=new Fe,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new fo(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),nr(this._preview),nr(this._previewNotAvailableMessage),nr(this._tree),nr(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(J3e)||je.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Q3e)||je.transparent,primaryHeadingColor:e.getColor(kue),secondaryHeadingColor:e.getColor(Tue)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ft(e,Lt("div.messages")),kc(this._messageContainer),this._splitView=new _ae(e,{orientation:1}),this._previewContainer=ft(e,Lt("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(xS,this._previewContainer,t,this.editor),kc(this._previewContainer),this._previewNotAvailableMessage=new Td(E("missingPreviewMessage","no preview available"),Td.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=ft(e,Lt("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new s5e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(vH),identityProvider:new r5e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:e5e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(za(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(u5e,"ReferencesWidget",this._treeContainer,new i5e,[this._instantiationService.createInstance(NN),this._instantiationService.createInstance(U2)],this._instantiationService.createInstance(_H),n),this._splitView.addView({onDidChange:Sn.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},KM.Distribute),this._splitView.addView({onDidChange:Sn.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},KM.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let i=(o,s)=>{o instanceof WC&&(s==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:s,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?i(o.element,"side"):o.editorOptions.pinned?i(o.element,"goto"):i(o.element,"show")}),kc(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new fo(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=E("noResults","No results"),Lh(this._messageContainer),Promise.resolve(void 0)):(kc(this._messageContainer),this._decorationsManager=new EF(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Lh(this._treeContainer),Lh(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof WC)return e;if(e instanceof kN&&e.children.length>0)return e.children[0]}revealReference(e){return $J(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return $J(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Si.inMemory?this.setTitle(boe(e.uri),this._uriLabel.getUriLabel(Kz(e.uri))):this.setTitle(E("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}nr(this._previewModelReference);const o=i.object;if(o){const s=this._preview.getModel()===o.textEditorModel?0:1,a=le.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,s)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}};CH=a5e([cb(3,Ho),cb(4,Fc),cb(5,xi),cb(6,Iue),cb(7,I2),cb(8,C2),cb(9,Ro),cb(10,Bl),cb(11,b2)],CH);var c5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},jJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const hE=new _n("referenceSearchVisible",!1,E("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let VC=class yH{constructor(e,t,n,i,o,s,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=o,this._instantiationService=s,this._storageService=a,this._configurationService=l,this._disposables=new Nt,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=hE.bindTo(n)}static get(e){return e.getContribution(yH.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",s=l5e.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(CH,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(E("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:u,kind:d}=l;if(u)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(u,!1,!1);break;case"side":this.openReference(u,!0,!1);break;case"goto":n?this._gotoReference(u):this.openReference(u,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var u;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(u=this._model)===null||u===void 0||u.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(E("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let d=this._editor.getModel().uri,h=new Ge(e.startLineNumber,e.startColumn),p=this._model.nearestReference(d,h);if(p)return this._widget.setSelection(p).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return jJ(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i),o?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()})}revealReference(e){return jJ(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=le.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var i;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const o=yH.get(n),s=this._model.clone();this.closeWidget(),n.focus(),o.toggleWidget(t,fl(a=>Promise.resolve(s)),(i=this._peekMode)!==null&&i!==void 0?i:!1)}},n=>{this._ignoreModelChangeEvent=!1,ti(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:o}=e;this._editorService.openCodeEditor({resource:i,options:{selection:o,pinned:n}},this._editor,t)}};VC.ID="editor.contrib.referencesController";VC=c5e([qE(2,Jn),qE(3,vr),qE(4,As),qE(5,xi),qE(6,i0),qE(7,Jr)],VC);function fE(r,e){const t=Z3e(r);if(!t)return;let n=VC.get(t);n&&e(n)}Rl.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:_s(2089,60),when:Xt.or(hE,Ad.inPeekEditor),handler(r){fE(r,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Rl.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:Xt.or(hE,Ad.inPeekEditor),handler(r){fE(r,e=>{e.goToNextOrPreviousReference(!0)})}});Rl.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:Xt.or(hE,Ad.inPeekEditor),handler(r){fE(r,e=>{e.goToNextOrPreviousReference(!1)})}});Yi.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Yi.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Yi.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Yi.registerCommand("closeReferenceSearch",r=>fE(r,e=>e.closeWidget()));Rl.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:Xt.and(Ad.inPeekEditor,Xt.not("config.editor.stablePeek"))});Rl.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:Xt.and(hE,Xt.not("config.editor.stablePeek"))});Rl.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Xt.and(hE,Lae),handler(r){var e;const n=(e=r.get(qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof WC&&fE(r,i=>i.revealReference(n[0]))}});Rl.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Xt.and(hE,Lae),handler(r){var e;const n=(e=r.get(qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof WC&&fE(r,i=>i.openReference(n[0],!0,!0))}});Yi.registerCommand("openReference",r=>{var e;const n=(e=r.get(qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof WC&&fE(r,i=>i.openReference(n[0],!1,!0))});var Oue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$k=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Xj=new _n("hasSymbols",!1,E("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),LF=ar("ISymbolNavigationService");let wH=class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=Xj.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new SH(this._editorService),i=n.onDidChange(o=>{if(this._ignoreEditorChange)return;const s=this._editorService.getActiveCodeEditor();if(!s)return;const a=s.getModel(),l=s.getPosition();if(!a||!l)return;let u=!1,d=!1;for(const h of t.references)if(voe(h.uri,a.uri))u=!0,d=d||le.containsPosition(h.range,l);else if(u)break;(!u||!d)&&this.reset()});this._currentState=gC(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:le.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?E("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):E("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};wH=Oue([$k(0,Jn),$k(1,vr),$k(2,As),$k(3,Ro)],wH);ZC(LF,wH,!0);Mt(new class extends Fl{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:Xj,kbOpts:{weight:100,primary:70}})}runEditorCommand(r,e){return r.get(LF).revealNext(e)}});Rl.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:Xj,primary:9,handler(r){r.get(LF).reset()}});let SH=class{constructor(e){this._listener=new Map,this._disposables=new Nt,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),nr(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,gC(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};SH=Oue([$k(0,vr)],SH);var Rue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function z2(r,e,t,n){const o=t.ordered(r).map(s=>Promise.resolve(n(s,r,e)).then(void 0,a=>{Pl(a)}));return Promise.all(o).then(s=>{const a=[];for(let l of s)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function Qj(r,e,t){return z2(r,e,HT,(n,i,o)=>n.provideDefinition(i,o,t))}function Mue(r,e,t){return z2(r,e,aM,(n,i,o)=>n.provideDeclaration(i,o,t))}function Pue(r,e,t){return z2(r,e,lM,(n,i,o)=>n.provideImplementation(i,o,t))}function Fue(r,e,t){return z2(r,e,uM,(n,i,o)=>n.provideTypeDefinition(i,o,t))}function xF(r,e,t,n){return z2(r,e,rM,(i,o,s)=>Rue(this,void 0,void 0,function*(){const a=yield i.provideReferences(o,s,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const l=yield i.provideReferences(o,s,{includeDeclaration:!1},n);return l&&l.length===1?l:a}))}function $2(r){return Rue(this,void 0,void 0,function*(){const e=yield r(),t=new Dd(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}Jv("_executeDefinitionProvider",(r,e)=>$2(()=>Qj(r,e,Oi.None)));Jv("_executeDeclarationProvider",(r,e)=>$2(()=>Mue(r,e,Oi.None)));Jv("_executeImplementationProvider",(r,e)=>$2(()=>Pue(r,e,Oi.None)));Jv("_executeTypeDefinitionProvider",(r,e)=>$2(()=>Fue(r,e,Oi.None)));Jv("_executeReferenceProvider",(r,e)=>$2(()=>xF(r,e,!1,Oi.None)));var ip=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},y7,w7,S7,E7,L7,x7,D7,I7;Au.appendMenuItem(wn.EditorContext,{submenu:wn.EditorContextPeek,title:E("peek.submenu","Peek"),group:"navigation",order:100});const Bue=new Set;function km(r){const e=new r;return yre(e),Bue.add(e.id),e}class gD extends gn{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(As),i=e.get(vr),o=e.get(n1),s=e.get(LF),a=t.getModel(),l=t.getPosition(),u=new sN(t,5),d=dz(this._getLocationModel(a,l,u.token),u.token).then(h=>ip(this,void 0,void 0,function*(){if(!h||u.token.isCancellationRequested)return;Tl(h.ariaMessage);let p;if(h.referenceAt(a.uri,l)){const C=this._getAlternativeCommand(t);C!==this.id&&Bue.has(C)&&(p=t.getAction(C))}const _=h.references.length;if(_===0){if(!this._configuration.muteMessage){const C=a.getWordAtPosition(l);Rh.get(t).showMessage(this._getNoResultFoundMessage(C),l)}}else if(_===1&&p)p.run();else return this._onResult(i,s,t,h)}),h=>{n.error(h)}).finally(()=>{u.dispose()});return o.showWhile(d,250),d}_onResult(e,t,n,i){return ip(this,void 0,void 0,function*(){const o=this._getGoToPreference(n);if(!(n instanceof xS)&&(this._configuration.openInPeek||o==="peek"&&i.references.length>1))this._openInPeek(n,i);else{const s=i.firstReference(),a=i.references.length>1&&o==="gotoAndPeek",l=yield this._openReference(n,e,s,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,i):i.dispose(),o==="goto"&&t.put(s)}})}_openReference(e,t,n,i,o){return ip(this,void 0,void 0,function*(){let s;if(oSe(n)&&(s=n.targetSelectionRange),s||(s=n.range),!s)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:le.collapseToStart(s),selectionRevealType:3}},e,i);if(a){if(o){const l=a.getModel(),u=a.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(u,[])},350)}return a}})}_openInPeek(e,t){let n=VC.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),fl(i=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class DF extends gD{_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield Qj(e,t,n),E("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?E("noResultWord","No definition found for '{0}'",e.word):E("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const Wue=Jx&&!lz?2118:70;km((y7=class EH extends DF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:EH.id,label:E("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:Xt.and(Le.hasDefinitionProvider,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:Wue,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Yi.registerCommandAlias("editor.action.goToDeclaration",EH.id)}},y7.id="editor.action.revealDefinition",y7));km((w7=class LH extends DF{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:LH.id,label:E("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:Xt.and(Le.hasDefinitionProvider,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,Wue),weight:100}}),Yi.registerCommandAlias("editor.action.openDeclarationToTheSide",LH.id)}},w7.id="editor.action.revealDefinitionAside",w7));km((S7=class xH extends DF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:xH.id,label:E("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:Xt.and(Le.hasDefinitionProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:wn.EditorContextPeek,group:"peek",order:2}}),Yi.registerCommandAlias("editor.action.previewDeclaration",xH.id)}},S7.id="editor.action.peekDefinition",S7));class Vue extends gD{_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield Mue(e,t,n),E("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?E("decl.noResultWord","No declaration found for '{0}'",e.word):E("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}km((E7=class Hue extends Vue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Hue.id,label:E("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:Xt.and(Le.hasDeclarationProvider,Le.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?E("decl.noResultWord","No declaration found for '{0}'",e.word):E("decl.generic.noResults","No declaration found")}},E7.id="editor.action.revealDeclaration",E7));km(class extends Vue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:E("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:Xt.and(Le.hasDeclarationProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wn.EditorContextPeek,group:"peek",order:3}})}});class Uue extends gD{_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield Fue(e,t,n),E("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?E("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):E("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}km((L7=class zue extends Uue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:zue.ID,label:E("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:Xt.and(Le.hasTypeDefinitionProvider,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},L7.ID="editor.action.goToTypeDefinition",L7));km((x7=class $ue extends Uue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:$ue.ID,label:E("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:Xt.and(Le.hasTypeDefinitionProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wn.EditorContextPeek,group:"peek",order:4}})}},x7.ID="editor.action.peekTypeDefinition",x7));class jue extends gD{_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield Pue(e,t,n),E("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?E("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):E("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}km((D7=class que extends jue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:que.ID,label:E("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:Xt.and(Le.hasImplementationProvider,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},D7.ID="editor.action.goToImplementation",D7));km((I7=class Kue extends jue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Kue.ID,label:E("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:Xt.and(Le.hasImplementationProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:wn.EditorContextPeek,group:"peek",order:5}})}},I7.ID="editor.action.peekImplementation",I7));class Gue extends gD{_getNoResultFoundMessage(e){return e?E("references.no","No references found for '{0}'",e.word):E("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}km(class extends Gue{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:E("goToReferences.label","Go to References"),alias:"Go to References",precondition:Xt.and(Le.hasReferenceProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Le.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield xF(e,t,!0,n),E("ref.title","References"))})}});km(class extends Gue{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:E("references.action.label","Peek References"),alias:"Peek References",precondition:Xt.and(Le.hasReferenceProvider,Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wn.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(yield xF(e,t,!1,n),E("ref.title","References"))})}});class d5e extends gD{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:E("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:Xt.and(Ad.notInPeekEditor,Le.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return ip(this,void 0,void 0,function*(){return new Dd(this._references,E("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&E("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Yi.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:qn},{name:"position",description:"The position at which to start",constraint:Ge.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(r,e,t,n,i,o,s)=>ip(void 0,void 0,void 0,function*(){jr(qn.isUri(e)),jr(Ge.isIPosition(t)),jr(Array.isArray(n)),jr(typeof i>"u"||typeof i=="string"),jr(typeof s>"u"||typeof s=="boolean");const a=r.get(vr),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Vv(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(u=>{const d=new class extends d5e{_getNoResultFoundMessage(h){return o||super._getNoResultFoundMessage(h)}}({muteMessage:!o,openInPeek:!!s,openToSide:!1},n,i);u.get(xi).invokeFunction(d.run.bind(d),l)})})});Yi.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:qn},{name:"position",description:"The position at which to start",constraint:Ge.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(r,e,t,n,i)=>ip(void 0,void 0,void 0,function*(){r.get(Go).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});Yi.registerCommand({id:"editor.action.findReferences",handler:(r,e,t)=>{jr(qn.isUri(e)),jr(Ge.isIPosition(t));const n=r.get(vr);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(i=>{if(!Vv(i)||!i.hasModel())return;const o=VC.get(i);if(!o)return;const s=fl(l=>xF(i.getModel(),Ge.lift(t),!1,l).then(u=>new Dd(u,E("ref.title","References")))),a=new le(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(a,s,!1))})}});Yi.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Au.appendMenuItems([{id:wn.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:E({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:wn.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:E({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:wn.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:E({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:wn.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:E({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:wn.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:E({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var h5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qJ=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let DS=class jk{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new Nt,this.toUnhookForKeyboard=new Nt,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let i=new Sue(e);this.toUnhook.add(i),this.toUnhook.add(i.onMouseMoveOrRelevantKeyDown(([o,s])=>{this.startFindDefinitionFromMouse(o,Sd(s))})),this.toUnhook.add(i.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},s=>{this.removeLinkDecorations(),ti(s)})})),this.toUnhook.add(i.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(jk.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let i=new vse(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=fl(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!i.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new le(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Zb().appendText(E("multipleResults","Click to show {0} definitions.",o.length)));else{let s=o[0];if(!s.uri)return;this.textModelResolverService.createModelReference(s.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:u}=s.range;if(u<1||u>l.getLineCount()){a.dispose();return}const d=this.getPreviewValue(l,u,s);let h;s.originSelectionRange?h=le.lift(s.originSelectionRange):h=new le(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const p=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(h,new Zb().appendCodeblock(p||"",d)),a.dispose()})}}).then(void 0,ti)}getPreviewValue(e,t,n){let i=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return i.endLineNumber-i.startLineNumber>=jk.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+jk.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<i;o++){let s=e.getLineFirstNonWhitespaceColumn(o);if(n===s)break}return new le(t,1,o+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+jk.MAX_SOURCE_PREVIEW_LINES),i=[];let o=!0,s=e.bracketPairs.findNextBracket(new Ge(t,1));for(;s!==null;){if(i.length===0)i.push(s);else{const d=i[i.length-1];if(d.open[0]===s.open[0]&&d.isOpen&&!s.isOpen?i.pop():i.push(s),i.length===0)if(o)o=!1;else return new le(t,1,s.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=s.range.endLineNumber,u=s.range.endColumn;if(a===s.range.endColumn&&(l++,u=1),l>n)return new le(t,1,n+1,1);s=e.bracketPairs.findNextBracket(new Ge(l,u))}return new le(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&HT.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?Qj(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new DF({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(Jn);return Ad.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};DS.ID="editor.contrib.gotodefinitionatposition";DS.MAX_SOURCE_PREVIEW_LINES=8;DS=h5e([qJ(1,Fc),qJ(2,Bl)],DS);br(DS.ID,DS);mo((r,e)=>{const t=r.getColor(Jre);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const aO=Lt;class Yue extends ot{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new y2(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class Jj extends ot{constructor(e,t,n){super(),this.actionContainer=ft(e,aO("div.action-container")),this.action=ft(this.actionContainer,aO("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ft(this.action,aO(`span.icon.${t.iconClass}`));const i=ft(this.action,aO("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(kt(this.actionContainer,In.MOUSE_DOWN,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new Jj(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class f5e{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new Fe,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Fe,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Fe,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const om=Lt;class g5e extends ot{constructor(e,t,n){super(),this.model=t,this.domNode=om(".colorpicker-header"),ft(e,this.domNode),this.pickedColorNode=ft(this.domNode,om(".picked-color"));const i=E("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const o=ft(this.domNode,om(".original-color"));o.style.backgroundColor=je.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(lS)||je.white,this._register(mo((s,a)=>{this.backgroundColor=s.getColor(lS)||je.white})),this._register(kt(this.pickedColorNode,In.CLICK,()=>this.model.selectNextColorPresentation())),this._register(kt(o,In.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=je.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=je.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(om(".codicon.codicon-color-mode"))}}class p5e extends ot{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=om(".colorpicker-body"),ft(e,this.domNode),this.saturationBox=new m5e(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new _5e(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new v5e(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new je(new xv(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new je(new xv(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new je(new xv(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class m5e extends ot{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Fe,this.onColorFlushed=this._onColorFlushed.event,this.domNode=om(".saturation-wrap"),ft(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",ft(this.domNode,this.canvas),this.selection=om(".saturation-selection"),ft(this.domNode,this.selection),this.layout(),this._register(gz(this.domNode,i=>this.onMouseDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new eE);const t=tu(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,iD,i=>this.onDidChangePosition(i.posx-t.left,i.posy-t.top),()=>null);const n=jie(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new je(new xv(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const o=n.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=je.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=o,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Zue extends ot{constructor(e,t){super(),this.model=t,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Fe,this.onColorFlushed=this._onColorFlushed.event,this.domNode=ft(e,om(".strip")),this.overlay=ft(this.domNode,om(".overlay")),this.slider=ft(this.domNode,om(".slider")),this.slider.style.top="0px",this._register(gz(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new eE),n=tu(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,iD,o=>this.onDidChangeTop(o.posy-n.top),()=>null);const i=jie(document,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class _5e extends Zue{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,o=new je(new sr(t,n,i,1)),s=new je(new sr(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class v5e extends Zue{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class b5e extends Ph{constructor(e,t,n,i){super(),this.model=t,this.pixelRatio=n,this._register(sz(()=>this.layout()));const o=om(".colorpicker-widget");e.appendChild(o);const s=new g5e(o,this.model,i);this.body=new p5e(o,this.model,this.pixelRatio),this._register(s),this._register(this.body)}layout(){this.body.layout()}}var C5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},y5e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},KJ=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class w5e{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let DH=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Ba.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return KJ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=LS.get(this._editor);for(const o of t){if(!i.isColorDecorationId(o.id))continue;const s=i.getColorData(o.range.getStartPosition());if(s)return[yield this._createColorHover(this._editor.getModel(),s.colorInfo,s.provider)]}return[]})}_createColorHover(e,t,n){return KJ(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:o,green:s,blue:a,alpha:l}=t.color,u=new sr(Math.round(o*255),Math.round(s*255),Math.round(a*255),l),d=new je(u),h=yield VJ(e,t,n,Oi.None),p=new f5e(d,[],0);return p.colorPresentations=h||[],p.guessColorPresentation(d,i),new w5e(this,le.lift(t.range),p,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return ot.None;const i=new Nt,o=e[0],s=this._editor.getModel(),a=o.model,l=i.add(new b5e(t,a,this._editor.getOption(128),this._themeService));let u=new le(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);const d=()=>{let p,_;if(a.presentation.textEdit){p=[a.presentation.textEdit],_=new le(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const C=this._editor.getModel()._setTrackedRange(null,_,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p),_=this._editor.getModel()._getTrackedRange(C)||_}else p=[{identifier:null,range:u,text:a.presentation.label,forceMoveMarkers:!1}],_=u.setEndPosition(u.endLineNumber,u.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p);a.presentation.additionalTextEdits&&(p=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",p),this._hover.hide()),this._editor.pushUndoStop(),u=_},h=p=>VJ(s,{range:u,color:{red:p.rgba.r/255,green:p.rgba.g/255,blue:p.rgba.b/255,alpha:p.rgba.a}},o.provider,Oi.None).then(_=>{a.colorPresentations=_||[]});return i.add(a.onColorFlushed(p=>{h(p).then(d)})),i.add(a.onDidChangeColor(h)),this._hover.setColorPicker(l),i}};DH=C5e([y5e(2,Ho)],DH);var S5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},E5e=globalThis&&globalThis.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof __values=="function"?__values(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,l){s=r[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}};class Xue{constructor(e,t,n,i,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new Xr(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new Xr(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new Xr(()=>this._showLoadingMessage(),0),this._asyncIterable=null,this._asyncIterableDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=i}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=Zve(e=>this._computer.computeAsync(e)),S5e(this,void 0,void 0,function*(){var e,t;try{try{for(var n=E5e(this._asyncIterable),i;i=yield n.next(),!i.done;){const o=i.value;o&&(this._computer.onResult([o],!1),this._onProgress())}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,this._withAsyncResult()}catch(o){this._onError(o)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncIterableDone?(this._state=0,this._onComplete()):(this._state=3,this._onProgress())}_showLoadingMessage(){this._state===3&&(this._state=4,this._onProgress())}_withAsyncResult(){(this._state===3||this._state===4)&&(this._state=0,this._onComplete())}_onComplete(){this._completeCallback(this._computer.getResult())}_onError(e){this._errorCallback?this._errorCallback(e):ti(e)}_onProgress(){this._state===4?this._progressCallback(this._computer.getResultWithLoadingMessage()):this._progressCallback(this._computer.getResult())}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._state=0}}class GJ{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class k7{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function L5e(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var x5e=Object.hasOwnProperty,YJ=Object.setPrototypeOf,D5e=Object.isFrozen,I5e=Object.getPrototypeOf,k5e=Object.getOwnPropertyDescriptor,Od=Object.freeze,Qb=Object.seal,T5e=Object.create,Que=typeof Reflect<"u"&&Reflect,cP=Que.apply,IH=Que.construct;cP||(cP=function(e,t,n){return e.apply(t,n)});Od||(Od=function(e){return e});Qb||(Qb=function(e){return e});IH||(IH=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(L5e(t))))});var N5e=Lm(Array.prototype.forEach),ZJ=Lm(Array.prototype.pop),yk=Lm(Array.prototype.push),sw=Lm(String.prototype.toLowerCase),XJ=Lm(String.prototype.match),K1=Lm(String.prototype.replace),A5e=Lm(String.prototype.indexOf),O5e=Lm(String.prototype.trim),db=Lm(RegExp.prototype.test),QJ=R5e(TypeError);function Lm(r){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return cP(r,e,n)}}function R5e(r){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return IH(r,t)}}function Ar(r,e){YJ&&YJ(r,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=sw(n);i!==n&&(D5e(e)||(e[t]=i),n=i)}r[n]=!0}return r}function tw(r){var e=T5e(null),t=void 0;for(t in r)cP(x5e,r,[t])&&(e[t]=r[t]);return e}function lO(r,e){for(;r!==null;){var t=k5e(r,e);if(t){if(t.get)return Lm(t.get);if(typeof t.value=="function")return Lm(t.value)}r=I5e(r)}function n(i){return console.warn("fallback value for",i),null}return n}var JJ=Od(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T7=Od(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N7=Od(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M5e=Od(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),A7=Od(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),P5e=Od(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eee=Od(["#text"]),tee=Od(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),O7=Od(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nee=Od(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uO=Od(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F5e=Qb(/\{\{[\s\S]*|[\s\S]*\}\}/gm),B5e=Qb(/<%[\s\S]*|[\s\S]*%>/gm),W5e=Qb(/^data-[\-\w.\u00B7-\uFFFF]/),V5e=Qb(/^aria-[\-\w]+$/),H5e=Qb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U5e=Qb(/^(?:\w+script|data):/i),z5e=Qb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function G_(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var $5e=function(){return typeof window>"u"?null:window},j5e=function(e,t){if((typeof e>"u"?"undefined":qk(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Jue(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$5e(),e=function(ue){return Jue(ue)};if(e.version="2.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;var t=r.document,n=r.document,i=r.DocumentFragment,o=r.HTMLTemplateElement,s=r.Node,a=r.Element,l=r.NodeFilter,u=r.NamedNodeMap,d=u===void 0?r.NamedNodeMap||r.MozNamedAttrMap:u,h=r.Text,p=r.Comment,_=r.DOMParser,C=r.trustedTypes,S=a.prototype,x=lO(S,"cloneNode"),T=lO(S,"nextSibling"),k=lO(S,"childNodes"),M=lO(S,"parentNode");if(typeof o=="function"){var W=n.createElement("template");W.content&&W.content.ownerDocument&&(n=W.content.ownerDocument)}var F=j5e(C,t),Q=F&&un?F.createHTML(""):"",z=n,$=z.implementation,G=z.createNodeIterator,Y=z.createDocumentFragment,I=z.getElementsByTagName,D=t.importNode,O={};try{O=tw(n).documentMode?n.documentMode:{}}catch{}var V={};e.isSupported=typeof M=="function"&&$&&typeof $.createHTMLDocument<"u"&&O!==9;var j=F5e,ne=B5e,re=W5e,se=V5e,ie=U5e,A=z5e,te=H5e,_e=null,de=Ar({},[].concat(G_(JJ),G_(T7),G_(N7),G_(A7),G_(eee))),Me=null,He=Ar({},[].concat(G_(tee),G_(O7),G_(nee),G_(uO))),st=null,Dt=null,Rt=!0,lt=!0,xt=!1,zt=!1,wt=!1,dn=!1,sn=!1,Pt=!1,ei=!1,xn=!0,un=!1,Ft=!0,Bt=!0,Tt=!1,mt={},Qt=null,fn=Ar({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),We=null,dt=Ar({},["audio","video","img","source","image","track"]),oe=null,U=Ar({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),X="http://www.w3.org/1998/Math/MathML",we="http://www.w3.org/2000/svg",Te="http://www.w3.org/1999/xhtml",qe=Te,ze=!1,bt=null,bn=n.createElement("form"),En=function(ue){bt&&bt===ue||((!ue||(typeof ue>"u"?"undefined":qk(ue))!=="object")&&(ue={}),ue=tw(ue),_e="ALLOWED_TAGS"in ue?Ar({},ue.ALLOWED_TAGS):de,Me="ALLOWED_ATTR"in ue?Ar({},ue.ALLOWED_ATTR):He,oe="ADD_URI_SAFE_ATTR"in ue?Ar(tw(U),ue.ADD_URI_SAFE_ATTR):U,We="ADD_DATA_URI_TAGS"in ue?Ar(tw(dt),ue.ADD_DATA_URI_TAGS):dt,Qt="FORBID_CONTENTS"in ue?Ar({},ue.FORBID_CONTENTS):fn,st="FORBID_TAGS"in ue?Ar({},ue.FORBID_TAGS):{},Dt="FORBID_ATTR"in ue?Ar({},ue.FORBID_ATTR):{},mt="USE_PROFILES"in ue?ue.USE_PROFILES:!1,Rt=ue.ALLOW_ARIA_ATTR!==!1,lt=ue.ALLOW_DATA_ATTR!==!1,xt=ue.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=ue.SAFE_FOR_TEMPLATES||!1,wt=ue.WHOLE_DOCUMENT||!1,Pt=ue.RETURN_DOM||!1,ei=ue.RETURN_DOM_FRAGMENT||!1,xn=ue.RETURN_DOM_IMPORT!==!1,un=ue.RETURN_TRUSTED_TYPE||!1,sn=ue.FORCE_BODY||!1,Ft=ue.SANITIZE_DOM!==!1,Bt=ue.KEEP_CONTENT!==!1,Tt=ue.IN_PLACE||!1,te=ue.ALLOWED_URI_REGEXP||te,qe=ue.NAMESPACE||Te,zt&&(lt=!1),ei&&(Pt=!0),mt&&(_e=Ar({},[].concat(G_(eee))),Me=[],mt.html===!0&&(Ar(_e,JJ),Ar(Me,tee)),mt.svg===!0&&(Ar(_e,T7),Ar(Me,O7),Ar(Me,uO)),mt.svgFilters===!0&&(Ar(_e,N7),Ar(Me,O7),Ar(Me,uO)),mt.mathMl===!0&&(Ar(_e,A7),Ar(Me,nee),Ar(Me,uO))),ue.ADD_TAGS&&(_e===de&&(_e=tw(_e)),Ar(_e,ue.ADD_TAGS)),ue.ADD_ATTR&&(Me===He&&(Me=tw(Me)),Ar(Me,ue.ADD_ATTR)),ue.ADD_URI_SAFE_ATTR&&Ar(oe,ue.ADD_URI_SAFE_ATTR),ue.FORBID_CONTENTS&&(Qt===fn&&(Qt=tw(Qt)),Ar(Qt,ue.FORBID_CONTENTS)),Bt&&(_e["#text"]=!0),wt&&Ar(_e,["html","head","body"]),_e.table&&(Ar(_e,["tbody"]),delete st.tbody),Od&&Od(ue),bt=ue)},nt=Ar({},["mi","mo","mn","ms","mtext"]),Mi=Ar({},["foreignobject","desc","title","annotation-xml"]),ni=Ar({},T7);Ar(ni,N7),Ar(ni,M5e);var bi=Ar({},A7);Ar(bi,P5e);var Qs=function(ue){var Oe=M(ue);(!Oe||!Oe.tagName)&&(Oe={namespaceURI:Te,tagName:"template"});var pt=sw(ue.tagName),at=sw(Oe.tagName);if(ue.namespaceURI===we)return Oe.namespaceURI===Te?pt==="svg":Oe.namespaceURI===X?pt==="svg"&&(at==="annotation-xml"||nt[at]):!!ni[pt];if(ue.namespaceURI===X)return Oe.namespaceURI===Te?pt==="math":Oe.namespaceURI===we?pt==="math"&&Mi[at]:!!bi[pt];if(ue.namespaceURI===Te){if(Oe.namespaceURI===we&&!Mi[at]||Oe.namespaceURI===X&&!nt[at])return!1;var Ut=Ar({},["title","style","font","a","script"]);return!bi[pt]&&(Ut[pt]||!ni[pt])}return!1},Vn=function(ue){yk(e.removed,{element:ue});try{ue.parentNode.removeChild(ue)}catch{try{ue.outerHTML=Q}catch{ue.remove()}}},Dr=function(ue,Oe){try{yk(e.removed,{attribute:Oe.getAttributeNode(ue),from:Oe})}catch{yk(e.removed,{attribute:null,from:Oe})}if(Oe.removeAttribute(ue),ue==="is"&&!Me[ue])if(Pt||ei)try{Vn(Oe)}catch{}else try{Oe.setAttribute(ue,"")}catch{}},ru=function(ue){var Oe=void 0,pt=void 0;if(sn)ue="<remove></remove>"+ue;else{var at=XJ(ue,/^[\r\n\t ]+/);pt=at&&at[0]}var Ut=F?F.createHTML(ue):ue;if(qe===Te)try{Oe=new _().parseFromString(Ut,"text/html")}catch{}if(!Oe||!Oe.documentElement){Oe=$.createDocument(qe,"template",null);try{Oe.documentElement.innerHTML=ze?"":Ut}catch{}}var kn=Oe.body||Oe.documentElement;return ue&&pt&&kn.insertBefore(n.createTextNode(pt),kn.childNodes[0]||null),qe===Te?I.call(Oe,wt?"html":"body")[0]:wt?Oe.documentElement:kn},lr=function(ue){return G.call(ue.ownerDocument||ue,ue,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Ct=function(ue){return ue instanceof h||ue instanceof p?!1:typeof ue.nodeName!="string"||typeof ue.textContent!="string"||typeof ue.removeChild!="function"||!(ue.attributes instanceof d)||typeof ue.removeAttribute!="function"||typeof ue.setAttribute!="function"||typeof ue.namespaceURI!="string"||typeof ue.insertBefore!="function"},as=function(ue){return(typeof s>"u"?"undefined":qk(s))==="object"?ue instanceof s:ue&&(typeof ue>"u"?"undefined":qk(ue))==="object"&&typeof ue.nodeType=="number"&&typeof ue.nodeName=="string"},et=function(ue,Oe,pt){V[ue]&&N5e(V[ue],function(at){at.call(e,Oe,pt,bt)})},Ye=function(ue){var Oe=void 0;if(et("beforeSanitizeElements",ue,null),Ct(ue)||XJ(ue.nodeName,/[\u0080-\uFFFF]/))return Vn(ue),!0;var pt=sw(ue.nodeName);if(et("uponSanitizeElement",ue,{tagName:pt,allowedTags:_e}),!as(ue.firstElementChild)&&(!as(ue.content)||!as(ue.content.firstElementChild))&&db(/<[/\w]/g,ue.innerHTML)&&db(/<[/\w]/g,ue.textContent)||pt==="select"&&db(/<template/i,ue.innerHTML))return Vn(ue),!0;if(!_e[pt]||st[pt]){if(Bt&&!Qt[pt]){var at=M(ue)||ue.parentNode,Ut=k(ue)||ue.childNodes;if(Ut&&at)for(var kn=Ut.length,R=kn-1;R>=0;--R)at.insertBefore(x(Ut[R],!0),T(ue))}return Vn(ue),!0}return ue instanceof a&&!Qs(ue)||(pt==="noscript"||pt==="noembed")&&db(/<\/no(script|embed)/i,ue.innerHTML)?(Vn(ue),!0):(zt&&ue.nodeType===3&&(Oe=ue.textContent,Oe=K1(Oe,j," "),Oe=K1(Oe,ne," "),ue.textContent!==Oe&&(yk(e.removed,{element:ue.cloneNode()}),ue.textContent=Oe)),et("afterSanitizeElements",ue,null),!1)},it=function(ue,Oe,pt){if(Ft&&(Oe==="id"||Oe==="name")&&(pt in n||pt in bn))return!1;if(!(lt&&!Dt[Oe]&&db(re,Oe))){if(!(Rt&&db(se,Oe))){if(!Me[Oe]||Dt[Oe])return!1;if(!oe[Oe]){if(!db(te,K1(pt,A,""))){if(!((Oe==="src"||Oe==="xlink:href"||Oe==="href")&&ue!=="script"&&A5e(pt,"data:")===0&&We[ue])){if(!(xt&&!db(ie,K1(pt,A,"")))){if(pt)return!1}}}}}}return!0},ve=function(ue){var Oe=void 0,pt=void 0,at=void 0,Ut=void 0;et("beforeSanitizeAttributes",ue,null);var kn=ue.attributes;if(kn){var R={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me};for(Ut=kn.length;Ut--;){Oe=kn[Ut];var K=Oe,ce=K.name,pe=K.namespaceURI;if(pt=O5e(Oe.value),at=sw(ce),R.attrName=at,R.attrValue=pt,R.keepAttr=!0,R.forceKeepAttr=void 0,et("uponSanitizeAttribute",ue,R),pt=R.attrValue,!R.forceKeepAttr&&(Dr(ce,ue),!!R.keepAttr)){if(db(/\/>/i,pt)){Dr(ce,ue);continue}zt&&(pt=K1(pt,j," "),pt=K1(pt,ne," "));var Ne=ue.nodeName.toLowerCase();if(it(Ne,at,pt))try{pe?ue.setAttributeNS(pe,ce,pt):ue.setAttribute(ce,pt),ZJ(e.removed)}catch{}}}et("afterSanitizeAttributes",ue,null)}},Ce=function Ie(ue){var Oe=void 0,pt=lr(ue);for(et("beforeSanitizeShadowDOM",ue,null);Oe=pt.nextNode();)et("uponSanitizeShadowNode",Oe,null),!Ye(Oe)&&(Oe.content instanceof i&&Ie(Oe.content),ve(Oe));et("afterSanitizeShadowDOM",ue,null)};return e.sanitize=function(Ie,ue){var Oe=void 0,pt=void 0,at=void 0,Ut=void 0,kn=void 0;if(ze=!Ie,ze&&(Ie="<!-->"),typeof Ie!="string"&&!as(Ie)){if(typeof Ie.toString!="function")throw QJ("toString is not a function");if(Ie=Ie.toString(),typeof Ie!="string")throw QJ("dirty is not a string, aborting")}if(!e.isSupported){if(qk(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof Ie=="string")return r.toStaticHTML(Ie);if(as(Ie))return r.toStaticHTML(Ie.outerHTML)}return Ie}if(dn||En(ue),e.removed=[],typeof Ie=="string"&&(Tt=!1),!Tt)if(Ie instanceof s)Oe=ru("<!---->"),pt=Oe.ownerDocument.importNode(Ie,!0),pt.nodeType===1&&pt.nodeName==="BODY"||pt.nodeName==="HTML"?Oe=pt:Oe.appendChild(pt);else{if(!Pt&&!zt&&!wt&&Ie.indexOf("<")===-1)return F&&un?F.createHTML(Ie):Ie;if(Oe=ru(Ie),!Oe)return Pt?null:Q}Oe&&sn&&Vn(Oe.firstChild);for(var R=lr(Tt?Ie:Oe);at=R.nextNode();)at.nodeType===3&&at===Ut||Ye(at)||(at.content instanceof i&&Ce(at.content),ve(at),Ut=at);if(Ut=null,Tt)return Ie;if(Pt){if(ei)for(kn=Y.call(Oe.ownerDocument);Oe.firstChild;)kn.appendChild(Oe.firstChild);else kn=Oe;return xn&&(kn=D.call(t,kn,!0)),kn}var K=wt?Oe.outerHTML:Oe.innerHTML;return zt&&(K=K1(K,j," "),K=K1(K,ne," ")),F&&un?F.createHTML(K):K},e.setConfig=function(Ie){En(Ie),dn=!0},e.clearConfig=function(){bt=null,dn=!1},e.isValidAttribute=function(Ie,ue,Oe){bt||En({});var pt=sw(Ie),at=sw(ue);return it(pt,at,Oe)},e.addHook=function(Ie,ue){typeof ue=="function"&&(V[Ie]=V[Ie]||[],yk(V[Ie],ue))},e.removeHook=function(Ie){V[Ie]&&ZJ(V[Ie])},e.removeHooks=function(Ie){V[Ie]&&(V[Ie]=[])},e.removeAllHooks=function(){V={}},e}var s0=Jue();s0.version;s0.isSupported;const q5e=s0.sanitize;s0.setConfig;s0.clearConfig;s0.isValidAttribute;const iee=s0.addHook,ree=s0.removeHook;s0.removeHooks;s0.removeAllHooks;let Tm;(function(){function r(e){Tm=e()}r.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof r=="function"&&r.amd?r(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(et,Ye){for(var it=0;it<Ye.length;it++){var ve=Ye[it];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(et,ve.key,ve)}}function t(et,Ye,it){return Ye&&e(et.prototype,Ye),it&&e(et,it),et}function n(et,Ye){if(et){if(typeof et=="string")return i(et,Ye);var it=Object.prototype.toString.call(et).slice(8,-1);if(it==="Object"&&et.constructor&&(it=et.constructor.name),it==="Map"||it==="Set")return Array.from(et);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return i(et,Ye)}}function i(et,Ye){(Ye==null||Ye>et.length)&&(Ye=et.length);for(var it=0,ve=new Array(Ye);it<Ye;it++)ve[it]=et[it];return ve}function o(et,Ye){var it=typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if(it)return(it=it.call(et)).next.bind(it);if(Array.isArray(et)||(it=n(et))||Ye&&et&&typeof et.length=="number"){it&&(et=it);var ve=0;return function(){return ve>=et.length?{done:!0}:{done:!1,value:et[ve++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(et){s.exports.defaults=et}s.exports={defaults:a(),getDefaults:a,changeDefaults:l};var u=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},C=function(Ye){return _[Ye]};function S(et,Ye){if(Ye){if(u.test(et))return et.replace(d,C)}else if(h.test(et))return et.replace(p,C);return et}var x=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function T(et){return et.replace(x,function(Ye,it){return it=it.toLowerCase(),it==="colon"?":":it.charAt(0)==="#"?it.charAt(1)==="x"?String.fromCharCode(parseInt(it.substring(2),16)):String.fromCharCode(+it.substring(1)):""})}var k=/(^|[^\[])\^/g;function M(et,Ye){et=et.source||et,Ye=Ye||"";var it={replace:function(Ce,Ie){return Ie=Ie.source||Ie,Ie=Ie.replace(k,"$1"),et=et.replace(Ce,Ie),it},getRegex:function(){return new RegExp(et,Ye)}};return it}var W=/[^\w:]/g,F=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Q(et,Ye,it){if(et){var ve;try{ve=decodeURIComponent(T(it)).replace(W,"").toLowerCase()}catch{return null}if(ve.indexOf("javascript:")===0||ve.indexOf("vbscript:")===0||ve.indexOf("data:")===0)return null}Ye&&!F.test(it)&&(it=I(Ye,it));try{it=encodeURI(it).replace(/%25/g,"%")}catch{return null}return it}var z={},$=/^[^:]+:\/*[^/]*$/,G=/^([^:]+:)[\s\S]*$/,Y=/^([^:]+:\/*[^/]*)[\s\S]*$/;function I(et,Ye){z[" "+et]||($.test(et)?z[" "+et]=et+"/":z[" "+et]=j(et,"/",!0)),et=z[" "+et];var it=et.indexOf(":")===-1;return Ye.substring(0,2)==="//"?it?Ye:et.replace(G,"$1")+Ye:Ye.charAt(0)==="/"?it?Ye:et.replace(Y,"$1")+Ye:et+Ye}var D={exec:function(){}};function O(et){for(var Ye=1,it,ve;Ye<arguments.length;Ye++){it=arguments[Ye];for(ve in it)Object.prototype.hasOwnProperty.call(it,ve)&&(et[ve]=it[ve])}return et}function V(et,Ye){var it=et.replace(/\|/g,function(Ie,ue,Oe){for(var pt=!1,at=ue;--at>=0&&Oe[at]==="\\";)pt=!pt;return pt?"|":" |"}),ve=it.split(/ \|/),Ce=0;if(ve[0].trim()||ve.shift(),ve[ve.length-1].trim()||ve.pop(),ve.length>Ye)ve.splice(Ye);else for(;ve.length<Ye;)ve.push("");for(;Ce<ve.length;Ce++)ve[Ce]=ve[Ce].trim().replace(/\\\|/g,"|");return ve}function j(et,Ye,it){var ve=et.length;if(ve===0)return"";for(var Ce=0;Ce<ve;){var Ie=et.charAt(ve-Ce-1);if(Ie===Ye&&!it)Ce++;else if(Ie!==Ye&&it)Ce++;else break}return et.substr(0,ve-Ce)}function ne(et,Ye){if(et.indexOf(Ye[1])===-1)return-1;for(var it=et.length,ve=0,Ce=0;Ce<it;Ce++)if(et[Ce]==="\\")Ce++;else if(et[Ce]===Ye[0])ve++;else if(et[Ce]===Ye[1]&&(ve--,ve<0))return Ce;return-1}function re(et){et&&et.sanitize&&!et.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function se(et,Ye){if(Ye<1)return"";for(var it="";Ye>1;)Ye&1&&(it+=et),Ye>>=1,et+=et;return it+et}var ie={escape:S,unescape:T,edit:M,cleanUrl:Q,resolveUrl:I,noopTest:D,merge:O,splitCells:V,rtrim:j,findClosingBracket:ne,checkSanitizeDeprecation:re,repeatString:se},A=s.exports.defaults,te=ie.rtrim,_e=ie.splitCells,de=ie.escape,Me=ie.findClosingBracket;function He(et,Ye,it,ve){var Ce=Ye.href,Ie=Ye.title?de(Ye.title):null,ue=et[1].replace(/\\([\[\]])/g,"$1");if(et[0].charAt(0)!=="!"){ve.state.inLink=!0;var Oe={type:"link",raw:it,href:Ce,title:Ie,text:ue,tokens:ve.inlineTokens(ue,[])};return ve.state.inLink=!1,Oe}else return{type:"image",raw:it,href:Ce,title:Ie,text:de(ue)}}function st(et,Ye){var it=et.match(/^(\s+)(?:```)/);if(it===null)return Ye;var ve=it[1];return Ye.split(`
`).map(function(Ce){var Ie=Ce.match(/^\s+/);if(Ie===null)return Ce;var ue=Ie[0];return ue.length>=ve.length?Ce.slice(ve.length):Ce}).join(`
`)}var Dt=function(){function et(it){this.options=it||A}var Ye=et.prototype;return Ye.space=function(ve){var Ce=this.rules.block.newline.exec(ve);if(Ce)return Ce[0].length>1?{type:"space",raw:Ce[0]}:{raw:`
`}},Ye.code=function(ve){var Ce=this.rules.block.code.exec(ve);if(Ce){var Ie=Ce[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:Ce[0],codeBlockStyle:"indented",text:this.options.pedantic?Ie:te(Ie,`
`)}}},Ye.fences=function(ve){var Ce=this.rules.block.fences.exec(ve);if(Ce){var Ie=Ce[0],ue=st(Ie,Ce[3]||"");return{type:"code",raw:Ie,lang:Ce[2]?Ce[2].trim():Ce[2],text:ue}}},Ye.heading=function(ve){var Ce=this.rules.block.heading.exec(ve);if(Ce){var Ie=Ce[2].trim();if(/#$/.test(Ie)){var ue=te(Ie,"#");(this.options.pedantic||!ue||/ $/.test(ue))&&(Ie=ue.trim())}var Oe={type:"heading",raw:Ce[0],depth:Ce[1].length,text:Ie,tokens:[]};return this.lexer.inline(Oe.text,Oe.tokens),Oe}},Ye.hr=function(ve){var Ce=this.rules.block.hr.exec(ve);if(Ce)return{type:"hr",raw:Ce[0]}},Ye.blockquote=function(ve){var Ce=this.rules.block.blockquote.exec(ve);if(Ce){var Ie=Ce[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:Ce[0],tokens:this.lexer.blockTokens(Ie,[]),text:Ie}}},Ye.list=function(ve){var Ce=this.rules.block.list.exec(ve);if(Ce){var Ie,ue,Oe,pt,at,Ut,kn,R,K,ce,pe=Ce[1].trim(),Ne=pe.length>1,Se={type:"list",raw:"",ordered:Ne,start:Ne?+pe.slice(0,-1):"",loose:!1,items:[]};pe=Ne?"\\d{1,9}\\"+pe.slice(-1):"\\"+pe,this.options.pedantic&&(pe=Ne?pe:"[*+-]");for(var Je=new RegExp("^( {0,3}"+pe+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");ve&&!(this.rules.block.hr.test(ve)||!(Ce=Je.exec(ve)));){K=Ce[2].split(`
`),this.options.pedantic?(pt=2,ce=K[0].trimLeft()):(pt=Ce[2].search(/[^ ]/),pt=Ce[1].length+(pt>4?1:pt),ce=K[0].slice(pt-Ce[1].length)),Ut=!1,Ie=Ce[0],!K[0]&&/^ *$/.test(K[1])&&(Ie=Ce[1]+K.slice(0,2).join(`
`)+`
`,Se.loose=!0,K=[]);var ht=new RegExp("^ {0,"+Math.min(3,pt-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(at=1;at<K.length;at++){if(R=K[at],this.options.pedantic&&(R=R.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ht.test(R)){Ie=Ce[1]+K.slice(0,at).join(`
`)+`
`;break}if(!Ut){R.trim()||(Ut=!0),R.search(/[^ ]/)>=pt?ce+=`
`+R.slice(pt):ce+=`
`+R;continue}if(R.search(/[^ ]/)>=pt||!R.trim()){ce+=`
`+R.slice(pt);continue}else{Ie=Ce[1]+K.slice(0,at).join(`
`)+`
`;break}}Se.loose||(kn?Se.loose=!0:/\n *\n *$/.test(Ie)&&(kn=!0)),this.options.gfm&&(ue=/^\[[ xX]\] /.exec(ce),ue&&(Oe=ue[0]!=="[ ] ",ce=ce.replace(/^\[[ xX]\] +/,""))),Se.items.push({type:"list_item",raw:Ie,task:!!ue,checked:Oe,loose:!1,text:ce}),Se.raw+=Ie,ve=ve.slice(Ie.length)}Se.items[Se.items.length-1].raw=Ie.trimRight(),Se.items[Se.items.length-1].text=ce.trimRight(),Se.raw=Se.raw.trimRight();var It=Se.items.length;for(at=0;at<It;at++)this.lexer.state.top=!1,Se.items[at].tokens=this.lexer.blockTokens(Se.items[at].text,[]),Se.items[at].tokens.some(function(Vt){return Vt.type==="space"})&&(Se.loose=!0,Se.items[at].loose=!0);return Se}},Ye.html=function(ve){var Ce=this.rules.block.html.exec(ve);if(Ce){var Ie={type:"html",raw:Ce[0],pre:!this.options.sanitizer&&(Ce[1]==="pre"||Ce[1]==="script"||Ce[1]==="style"),text:Ce[0]};return this.options.sanitize&&(Ie.type="paragraph",Ie.text=this.options.sanitizer?this.options.sanitizer(Ce[0]):de(Ce[0]),Ie.tokens=[],this.lexer.inline(Ie.text,Ie.tokens)),Ie}},Ye.def=function(ve){var Ce=this.rules.block.def.exec(ve);if(Ce){Ce[3]&&(Ce[3]=Ce[3].substring(1,Ce[3].length-1));var Ie=Ce[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:Ie,raw:Ce[0],href:Ce[2],title:Ce[3]}}},Ye.table=function(ve){var Ce=this.rules.block.table.exec(ve);if(Ce){var Ie={type:"table",header:_e(Ce[1]).map(function(kn){return{text:kn}}),align:Ce[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:Ce[3]?Ce[3].replace(/\n$/,"").split(`
`):[]};if(Ie.header.length===Ie.align.length){Ie.raw=Ce[0];var ue=Ie.align.length,Oe,pt,at,Ut;for(Oe=0;Oe<ue;Oe++)/^ *-+: *$/.test(Ie.align[Oe])?Ie.align[Oe]="right":/^ *:-+: *$/.test(Ie.align[Oe])?Ie.align[Oe]="center":/^ *:-+ *$/.test(Ie.align[Oe])?Ie.align[Oe]="left":Ie.align[Oe]=null;for(ue=Ie.rows.length,Oe=0;Oe<ue;Oe++)Ie.rows[Oe]=_e(Ie.rows[Oe],Ie.header.length).map(function(kn){return{text:kn}});for(ue=Ie.header.length,pt=0;pt<ue;pt++)Ie.header[pt].tokens=[],this.lexer.inlineTokens(Ie.header[pt].text,Ie.header[pt].tokens);for(ue=Ie.rows.length,pt=0;pt<ue;pt++)for(Ut=Ie.rows[pt],at=0;at<Ut.length;at++)Ut[at].tokens=[],this.lexer.inlineTokens(Ut[at].text,Ut[at].tokens);return Ie}}},Ye.lheading=function(ve){var Ce=this.rules.block.lheading.exec(ve);if(Ce){var Ie={type:"heading",raw:Ce[0],depth:Ce[2].charAt(0)==="="?1:2,text:Ce[1],tokens:[]};return this.lexer.inline(Ie.text,Ie.tokens),Ie}},Ye.paragraph=function(ve){var Ce=this.rules.block.paragraph.exec(ve);if(Ce){var Ie={type:"paragraph",raw:Ce[0],text:Ce[1].charAt(Ce[1].length-1)===`
`?Ce[1].slice(0,-1):Ce[1],tokens:[]};return this.lexer.inline(Ie.text,Ie.tokens),Ie}},Ye.text=function(ve){var Ce=this.rules.block.text.exec(ve);if(Ce){var Ie={type:"text",raw:Ce[0],text:Ce[0],tokens:[]};return this.lexer.inline(Ie.text,Ie.tokens),Ie}},Ye.escape=function(ve){var Ce=this.rules.inline.escape.exec(ve);if(Ce)return{type:"escape",raw:Ce[0],text:de(Ce[1])}},Ye.tag=function(ve){var Ce=this.rules.inline.tag.exec(ve);if(Ce)return!this.lexer.state.inLink&&/^<a /i.test(Ce[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(Ce[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(Ce[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Ce[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:Ce[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Ce[0]):de(Ce[0]):Ce[0]}},Ye.link=function(ve){var Ce=this.rules.inline.link.exec(ve);if(Ce){var Ie=Ce[2].trim();if(!this.options.pedantic&&/^</.test(Ie)){if(!/>$/.test(Ie))return;var ue=te(Ie.slice(0,-1),"\\");if((Ie.length-ue.length)%2===0)return}else{var Oe=Me(Ce[2],"()");if(Oe>-1){var pt=Ce[0].indexOf("!")===0?5:4,at=pt+Ce[1].length+Oe;Ce[2]=Ce[2].substring(0,Oe),Ce[0]=Ce[0].substring(0,at).trim(),Ce[3]=""}}var Ut=Ce[2],kn="";if(this.options.pedantic){var R=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ut);R&&(Ut=R[1],kn=R[3])}else kn=Ce[3]?Ce[3].slice(1,-1):"";return Ut=Ut.trim(),/^</.test(Ut)&&(this.options.pedantic&&!/>$/.test(Ie)?Ut=Ut.slice(1):Ut=Ut.slice(1,-1)),He(Ce,{href:Ut&&Ut.replace(this.rules.inline._escapes,"$1"),title:kn&&kn.replace(this.rules.inline._escapes,"$1")},Ce[0],this.lexer)}},Ye.reflink=function(ve,Ce){var Ie;if((Ie=this.rules.inline.reflink.exec(ve))||(Ie=this.rules.inline.nolink.exec(ve))){var ue=(Ie[2]||Ie[1]).replace(/\s+/g," ");if(ue=Ce[ue.toLowerCase()],!ue||!ue.href){var Oe=Ie[0].charAt(0);return{type:"text",raw:Oe,text:Oe}}return He(Ie,ue,Ie[0],this.lexer)}},Ye.emStrong=function(ve,Ce,Ie){Ie===void 0&&(Ie="");var ue=this.rules.inline.emStrong.lDelim.exec(ve);if(ue&&!(ue[3]&&Ie.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Oe=ue[1]||ue[2]||"";if(!Oe||Oe&&(Ie===""||this.rules.inline.punctuation.exec(Ie))){var pt=ue[0].length-1,at,Ut,kn=pt,R=0,K=ue[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(K.lastIndex=0,Ce=Ce.slice(-1*ve.length+pt);(ue=K.exec(Ce))!=null;)if(at=ue[1]||ue[2]||ue[3]||ue[4]||ue[5]||ue[6],!!at){if(Ut=at.length,ue[3]||ue[4]){kn+=Ut;continue}else if((ue[5]||ue[6])&&pt%3&&!((pt+Ut)%3)){R+=Ut;continue}if(kn-=Ut,!(kn>0)){if(Ut=Math.min(Ut,Ut+kn+R),Math.min(pt,Ut)%2){var ce=ve.slice(1,pt+ue.index+Ut);return{type:"em",raw:ve.slice(0,pt+ue.index+Ut+1),text:ce,tokens:this.lexer.inlineTokens(ce,[])}}var pe=ve.slice(2,pt+ue.index+Ut-1);return{type:"strong",raw:ve.slice(0,pt+ue.index+Ut+1),text:pe,tokens:this.lexer.inlineTokens(pe,[])}}}}}},Ye.codespan=function(ve){var Ce=this.rules.inline.code.exec(ve);if(Ce){var Ie=Ce[2].replace(/\n/g," "),ue=/[^ ]/.test(Ie),Oe=/^ /.test(Ie)&&/ $/.test(Ie);return ue&&Oe&&(Ie=Ie.substring(1,Ie.length-1)),Ie=de(Ie,!0),{type:"codespan",raw:Ce[0],text:Ie}}},Ye.br=function(ve){var Ce=this.rules.inline.br.exec(ve);if(Ce)return{type:"br",raw:Ce[0]}},Ye.del=function(ve){var Ce=this.rules.inline.del.exec(ve);if(Ce)return{type:"del",raw:Ce[0],text:Ce[2],tokens:this.lexer.inlineTokens(Ce[2],[])}},Ye.autolink=function(ve,Ce){var Ie=this.rules.inline.autolink.exec(ve);if(Ie){var ue,Oe;return Ie[2]==="@"?(ue=de(this.options.mangle?Ce(Ie[1]):Ie[1]),Oe="mailto:"+ue):(ue=de(Ie[1]),Oe=ue),{type:"link",raw:Ie[0],text:ue,href:Oe,tokens:[{type:"text",raw:ue,text:ue}]}}},Ye.url=function(ve,Ce){var Ie;if(Ie=this.rules.inline.url.exec(ve)){var ue,Oe;if(Ie[2]==="@")ue=de(this.options.mangle?Ce(Ie[0]):Ie[0]),Oe="mailto:"+ue;else{var pt;do pt=Ie[0],Ie[0]=this.rules.inline._backpedal.exec(Ie[0])[0];while(pt!==Ie[0]);ue=de(Ie[0]),Ie[1]==="www."?Oe="http://"+ue:Oe=ue}return{type:"link",raw:Ie[0],text:ue,href:Oe,tokens:[{type:"text",raw:ue,text:ue}]}}},Ye.inlineText=function(ve,Ce){var Ie=this.rules.inline.text.exec(ve);if(Ie){var ue;return this.lexer.state.inRawBlock?ue=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Ie[0]):de(Ie[0]):Ie[0]:ue=de(this.options.smartypants?Ce(Ie[0]):Ie[0]),{type:"text",raw:Ie[0],text:ue}}},et}(),Rt=ie.noopTest,lt=ie.edit,xt=ie.merge,zt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Rt,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};zt._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,zt._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,zt.def=lt(zt.def).replace("label",zt._label).replace("title",zt._title).getRegex(),zt.bullet=/(?:[*+-]|\d{1,9}[.)])/,zt.listItemStart=lt(/^( *)(bull) */).replace("bull",zt.bullet).getRegex(),zt.list=lt(zt.list).replace(/bull/g,zt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+zt.def.source+")").getRegex(),zt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,zt.html=lt(zt.html,"i").replace("comment",zt._comment).replace("tag",zt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zt.paragraph=lt(zt._paragraph).replace("hr",zt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zt._tag).getRegex(),zt.blockquote=lt(zt.blockquote).replace("paragraph",zt.paragraph).getRegex(),zt.normal=xt({},zt),zt.gfm=xt({},zt.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),zt.gfm.table=lt(zt.gfm.table).replace("hr",zt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zt._tag).getRegex(),zt.pedantic=xt({},zt.normal,{html:lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rt,paragraph:lt(zt.normal._paragraph).replace("hr",zt.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var wt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Rt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Rt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};wt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",wt.punctuation=lt(wt.punctuation).replace(/punctuation/g,wt._punctuation).getRegex(),wt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,wt.escapedEmSt=/\\\*|\\_/g,wt._comment=lt(zt._comment).replace("(?:-->|$)","-->").getRegex(),wt.emStrong.lDelim=lt(wt.emStrong.lDelim).replace(/punct/g,wt._punctuation).getRegex(),wt.emStrong.rDelimAst=lt(wt.emStrong.rDelimAst,"g").replace(/punct/g,wt._punctuation).getRegex(),wt.emStrong.rDelimUnd=lt(wt.emStrong.rDelimUnd,"g").replace(/punct/g,wt._punctuation).getRegex(),wt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,wt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,wt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,wt.autolink=lt(wt.autolink).replace("scheme",wt._scheme).replace("email",wt._email).getRegex(),wt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,wt.tag=lt(wt.tag).replace("comment",wt._comment).replace("attribute",wt._attribute).getRegex(),wt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,wt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,wt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,wt.link=lt(wt.link).replace("label",wt._label).replace("href",wt._href).replace("title",wt._title).getRegex(),wt.reflink=lt(wt.reflink).replace("label",wt._label).getRegex(),wt.reflinkSearch=lt(wt.reflinkSearch,"g").replace("reflink",wt.reflink).replace("nolink",wt.nolink).getRegex(),wt.normal=xt({},wt),wt.pedantic=xt({},wt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:lt(/^!?\[(label)\]\((.*?)\)/).replace("label",wt._label).getRegex(),reflink:lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wt._label).getRegex()}),wt.gfm=xt({},wt.normal,{escape:lt(wt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),wt.gfm.url=lt(wt.gfm.url,"i").replace("email",wt.gfm._extended_email).getRegex(),wt.breaks=xt({},wt.gfm,{br:lt(wt.br).replace("{2,}","*").getRegex(),text:lt(wt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var dn={block:zt,inline:wt},sn=Dt,Pt=s.exports.defaults,ei=dn.block,xn=dn.inline,un=ie.repeatString;function Ft(et){return et.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Bt(et){var Ye="",it,ve,Ce=et.length;for(it=0;it<Ce;it++)ve=et.charCodeAt(it),Math.random()>.5&&(ve="x"+ve.toString(16)),Ye+="&#"+ve+";";return Ye}var Tt=function(){function et(it){this.tokens=[],this.tokens.links=Object.create(null),this.options=it||Pt,this.options.tokenizer=this.options.tokenizer||new sn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var ve={block:ei.normal,inline:xn.normal};this.options.pedantic?(ve.block=ei.pedantic,ve.inline=xn.pedantic):this.options.gfm&&(ve.block=ei.gfm,this.options.breaks?ve.inline=xn.breaks:ve.inline=xn.gfm),this.tokenizer.rules=ve}et.lex=function(ve,Ce){var Ie=new et(Ce);return Ie.lex(ve)},et.lexInline=function(ve,Ce){var Ie=new et(Ce);return Ie.inlineTokens(ve)};var Ye=et.prototype;return Ye.lex=function(ve){ve=ve.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(ve,this.tokens);for(var Ce;Ce=this.inlineQueue.shift();)this.inlineTokens(Ce.src,Ce.tokens);return this.tokens},Ye.blockTokens=function(ve,Ce){var Ie=this;Ce===void 0&&(Ce=[]),this.options.pedantic&&(ve=ve.replace(/^ +$/gm,""));for(var ue,Oe,pt,at;ve;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(kn){return(ue=kn.call({lexer:Ie},ve,Ce))?(ve=ve.substring(ue.raw.length),Ce.push(ue),!0):!1}))){if(ue=this.tokenizer.space(ve)){ve=ve.substring(ue.raw.length),ue.type&&Ce.push(ue);continue}if(ue=this.tokenizer.code(ve)){ve=ve.substring(ue.raw.length),Oe=Ce[Ce.length-1],Oe&&(Oe.type==="paragraph"||Oe.type==="text")?(Oe.raw+=`
`+ue.raw,Oe.text+=`
`+ue.text,this.inlineQueue[this.inlineQueue.length-1].src=Oe.text):Ce.push(ue);continue}if(ue=this.tokenizer.fences(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.heading(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.hr(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.blockquote(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.list(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.html(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.def(ve)){ve=ve.substring(ue.raw.length),Oe=Ce[Ce.length-1],Oe&&(Oe.type==="paragraph"||Oe.type==="text")?(Oe.raw+=`
`+ue.raw,Oe.text+=`
`+ue.raw,this.inlineQueue[this.inlineQueue.length-1].src=Oe.text):this.tokens.links[ue.tag]||(this.tokens.links[ue.tag]={href:ue.href,title:ue.title});continue}if(ue=this.tokenizer.table(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.lheading(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(pt=ve,this.options.extensions&&this.options.extensions.startBlock&&function(){var kn=1/0,R=ve.slice(1),K=void 0;Ie.options.extensions.startBlock.forEach(function(ce){K=ce.call({lexer:this},R),typeof K=="number"&&K>=0&&(kn=Math.min(kn,K))}),kn<1/0&&kn>=0&&(pt=ve.substring(0,kn+1))}(),this.state.top&&(ue=this.tokenizer.paragraph(pt))){Oe=Ce[Ce.length-1],at&&Oe.type==="paragraph"?(Oe.raw+=`
`+ue.raw,Oe.text+=`
`+ue.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Oe.text):Ce.push(ue),at=pt.length!==ve.length,ve=ve.substring(ue.raw.length);continue}if(ue=this.tokenizer.text(ve)){ve=ve.substring(ue.raw.length),Oe=Ce[Ce.length-1],Oe&&Oe.type==="text"?(Oe.raw+=`
`+ue.raw,Oe.text+=`
`+ue.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Oe.text):Ce.push(ue);continue}if(ve){var Ut="Infinite loop on byte: "+ve.charCodeAt(0);if(this.options.silent){console.error(Ut);break}else throw new Error(Ut)}}return this.state.top=!0,Ce},Ye.inline=function(ve,Ce){this.inlineQueue.push({src:ve,tokens:Ce})},Ye.inlineTokens=function(ve,Ce){var Ie=this;Ce===void 0&&(Ce=[]);var ue,Oe,pt,at=ve,Ut,kn,R;if(this.tokens.links){var K=Object.keys(this.tokens.links);if(K.length>0)for(;(Ut=this.tokenizer.rules.inline.reflinkSearch.exec(at))!=null;)K.includes(Ut[0].slice(Ut[0].lastIndexOf("[")+1,-1))&&(at=at.slice(0,Ut.index)+"["+un("a",Ut[0].length-2)+"]"+at.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ut=this.tokenizer.rules.inline.blockSkip.exec(at))!=null;)at=at.slice(0,Ut.index)+"["+un("a",Ut[0].length-2)+"]"+at.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ut=this.tokenizer.rules.inline.escapedEmSt.exec(at))!=null;)at=at.slice(0,Ut.index)+"++"+at.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;ve;)if(kn||(R=""),kn=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(pe){return(ue=pe.call({lexer:Ie},ve,Ce))?(ve=ve.substring(ue.raw.length),Ce.push(ue),!0):!1}))){if(ue=this.tokenizer.escape(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.tag(ve)){ve=ve.substring(ue.raw.length),Oe=Ce[Ce.length-1],Oe&&ue.type==="text"&&Oe.type==="text"?(Oe.raw+=ue.raw,Oe.text+=ue.text):Ce.push(ue);continue}if(ue=this.tokenizer.link(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.reflink(ve,this.tokens.links)){ve=ve.substring(ue.raw.length),Oe=Ce[Ce.length-1],Oe&&ue.type==="text"&&Oe.type==="text"?(Oe.raw+=ue.raw,Oe.text+=ue.text):Ce.push(ue);continue}if(ue=this.tokenizer.emStrong(ve,at,R)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.codespan(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.br(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.del(ve)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(ue=this.tokenizer.autolink(ve,Bt)){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(!this.state.inLink&&(ue=this.tokenizer.url(ve,Bt))){ve=ve.substring(ue.raw.length),Ce.push(ue);continue}if(pt=ve,this.options.extensions&&this.options.extensions.startInline&&function(){var pe=1/0,Ne=ve.slice(1),Se=void 0;Ie.options.extensions.startInline.forEach(function(Je){Se=Je.call({lexer:this},Ne),typeof Se=="number"&&Se>=0&&(pe=Math.min(pe,Se))}),pe<1/0&&pe>=0&&(pt=ve.substring(0,pe+1))}(),ue=this.tokenizer.inlineText(pt,Ft)){ve=ve.substring(ue.raw.length),ue.raw.slice(-1)!=="_"&&(R=ue.raw.slice(-1)),kn=!0,Oe=Ce[Ce.length-1],Oe&&Oe.type==="text"?(Oe.raw+=ue.raw,Oe.text+=ue.text):Ce.push(ue);continue}if(ve){var ce="Infinite loop on byte: "+ve.charCodeAt(0);if(this.options.silent){console.error(ce);break}else throw new Error(ce)}}return Ce},t(et,null,[{key:"rules",get:function(){return{block:ei,inline:xn}}}]),et}(),mt=s.exports.defaults,Qt=ie.cleanUrl,fn=ie.escape,We=function(){function et(it){this.options=it||mt}var Ye=et.prototype;return Ye.code=function(ve,Ce,Ie){var ue=(Ce||"").match(/\S*/)[0];if(this.options.highlight){var Oe=this.options.highlight(ve,ue);Oe!=null&&Oe!==ve&&(Ie=!0,ve=Oe)}return ve=ve.replace(/\n$/,"")+`
`,ue?'<pre><code class="'+this.options.langPrefix+fn(ue,!0)+'">'+(Ie?ve:fn(ve,!0))+`</code></pre>
`:"<pre><code>"+(Ie?ve:fn(ve,!0))+`</code></pre>
`},Ye.blockquote=function(ve){return`<blockquote>
`+ve+`</blockquote>
`},Ye.html=function(ve){return ve},Ye.heading=function(ve,Ce,Ie,ue){return this.options.headerIds?"<h"+Ce+' id="'+this.options.headerPrefix+ue.slug(Ie)+'">'+ve+"</h"+Ce+`>
`:"<h"+Ce+">"+ve+"</h"+Ce+`>
`},Ye.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Ye.list=function(ve,Ce,Ie){var ue=Ce?"ol":"ul",Oe=Ce&&Ie!==1?' start="'+Ie+'"':"";return"<"+ue+Oe+`>
`+ve+"</"+ue+`>
`},Ye.listitem=function(ve){return"<li>"+ve+`</li>
`},Ye.checkbox=function(ve){return"<input "+(ve?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ye.paragraph=function(ve){return"<p>"+ve+`</p>
`},Ye.table=function(ve,Ce){return Ce&&(Ce="<tbody>"+Ce+"</tbody>"),`<table>
<thead>
`+ve+`</thead>
`+Ce+`</table>
`},Ye.tablerow=function(ve){return`<tr>
`+ve+`</tr>
`},Ye.tablecell=function(ve,Ce){var Ie=Ce.header?"th":"td",ue=Ce.align?"<"+Ie+' align="'+Ce.align+'">':"<"+Ie+">";return ue+ve+"</"+Ie+`>
`},Ye.strong=function(ve){return"<strong>"+ve+"</strong>"},Ye.em=function(ve){return"<em>"+ve+"</em>"},Ye.codespan=function(ve){return"<code>"+ve+"</code>"},Ye.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ye.del=function(ve){return"<del>"+ve+"</del>"},Ye.link=function(ve,Ce,Ie){if(ve=Qt(this.options.sanitize,this.options.baseUrl,ve),ve===null)return Ie;var ue='<a href="'+fn(ve)+'"';return Ce&&(ue+=' title="'+Ce+'"'),ue+=">"+Ie+"</a>",ue},Ye.image=function(ve,Ce,Ie){if(ve=Qt(this.options.sanitize,this.options.baseUrl,ve),ve===null)return Ie;var ue='<img src="'+ve+'" alt="'+Ie+'"';return Ce&&(ue+=' title="'+Ce+'"'),ue+=this.options.xhtml?"/>":">",ue},Ye.text=function(ve){return ve},et}(),dt=function(){function et(){}var Ye=et.prototype;return Ye.strong=function(ve){return ve},Ye.em=function(ve){return ve},Ye.codespan=function(ve){return ve},Ye.del=function(ve){return ve},Ye.html=function(ve){return ve},Ye.text=function(ve){return ve},Ye.link=function(ve,Ce,Ie){return""+Ie},Ye.image=function(ve,Ce,Ie){return""+Ie},Ye.br=function(){return""},et}(),oe=function(){function et(){this.seen={}}var Ye=et.prototype;return Ye.serialize=function(ve){return ve.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ye.getNextSafeSlug=function(ve,Ce){var Ie=ve,ue=0;if(this.seen.hasOwnProperty(Ie)){ue=this.seen[ve];do ue++,Ie=ve+"-"+ue;while(this.seen.hasOwnProperty(Ie))}return Ce||(this.seen[ve]=ue,this.seen[Ie]=0),Ie},Ye.slug=function(ve,Ce){Ce===void 0&&(Ce={});var Ie=this.serialize(ve);return this.getNextSafeSlug(Ie,Ce.dryrun)},et}(),U=We,X=dt,we=oe,Te=s.exports.defaults,qe=ie.unescape,ze=function(){function et(it){this.options=it||Te,this.options.renderer=this.options.renderer||new U,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new X,this.slugger=new we}et.parse=function(ve,Ce){var Ie=new et(Ce);return Ie.parse(ve)},et.parseInline=function(ve,Ce){var Ie=new et(Ce);return Ie.parseInline(ve)};var Ye=et.prototype;return Ye.parse=function(ve,Ce){Ce===void 0&&(Ce=!0);var Ie="",ue,Oe,pt,at,Ut,kn,R,K,ce,pe,Ne,Se,Je,ht,It,Vt,pn,tn,mn,Jt=ve.length;for(ue=0;ue<Jt;ue++){if(pe=ve[ue],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[pe.type]&&(mn=this.options.extensions.renderers[pe.type].call({parser:this},pe),mn!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(pe.type))){Ie+=mn||"";continue}switch(pe.type){case"space":continue;case"hr":{Ie+=this.renderer.hr();continue}case"heading":{Ie+=this.renderer.heading(this.parseInline(pe.tokens),pe.depth,qe(this.parseInline(pe.tokens,this.textRenderer)),this.slugger);continue}case"code":{Ie+=this.renderer.code(pe.text,pe.lang,pe.escaped);continue}case"table":{for(K="",R="",at=pe.header.length,Oe=0;Oe<at;Oe++)R+=this.renderer.tablecell(this.parseInline(pe.header[Oe].tokens),{header:!0,align:pe.align[Oe]});for(K+=this.renderer.tablerow(R),ce="",at=pe.rows.length,Oe=0;Oe<at;Oe++){for(kn=pe.rows[Oe],R="",Ut=kn.length,pt=0;pt<Ut;pt++)R+=this.renderer.tablecell(this.parseInline(kn[pt].tokens),{header:!1,align:pe.align[pt]});ce+=this.renderer.tablerow(R)}Ie+=this.renderer.table(K,ce);continue}case"blockquote":{ce=this.parse(pe.tokens),Ie+=this.renderer.blockquote(ce);continue}case"list":{for(Ne=pe.ordered,Se=pe.start,Je=pe.loose,at=pe.items.length,ce="",Oe=0;Oe<at;Oe++)It=pe.items[Oe],Vt=It.checked,pn=It.task,ht="",It.task&&(tn=this.renderer.checkbox(Vt),Je?It.tokens.length>0&&It.tokens[0].type==="paragraph"?(It.tokens[0].text=tn+" "+It.tokens[0].text,It.tokens[0].tokens&&It.tokens[0].tokens.length>0&&It.tokens[0].tokens[0].type==="text"&&(It.tokens[0].tokens[0].text=tn+" "+It.tokens[0].tokens[0].text)):It.tokens.unshift({type:"text",text:tn}):ht+=tn),ht+=this.parse(It.tokens,Je),ce+=this.renderer.listitem(ht,pn,Vt);Ie+=this.renderer.list(ce,Ne,Se);continue}case"html":{Ie+=this.renderer.html(pe.text);continue}case"paragraph":{Ie+=this.renderer.paragraph(this.parseInline(pe.tokens));continue}case"text":{for(ce=pe.tokens?this.parseInline(pe.tokens):pe.text;ue+1<Jt&&ve[ue+1].type==="text";)pe=ve[++ue],ce+=`
`+(pe.tokens?this.parseInline(pe.tokens):pe.text);Ie+=Ce?this.renderer.paragraph(ce):ce;continue}default:{var qi='Token with "'+pe.type+'" type was not found.';if(this.options.silent){console.error(qi);return}else throw new Error(qi)}}}return Ie},Ye.parseInline=function(ve,Ce){Ce=Ce||this.renderer;var Ie="",ue,Oe,pt,at=ve.length;for(ue=0;ue<at;ue++){if(Oe=ve[ue],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Oe.type]&&(pt=this.options.extensions.renderers[Oe.type].call({parser:this},Oe),pt!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Oe.type))){Ie+=pt||"";continue}switch(Oe.type){case"escape":{Ie+=Ce.text(Oe.text);break}case"html":{Ie+=Ce.html(Oe.text);break}case"link":{Ie+=Ce.link(Oe.href,Oe.title,this.parseInline(Oe.tokens,Ce));break}case"image":{Ie+=Ce.image(Oe.href,Oe.title,Oe.text);break}case"strong":{Ie+=Ce.strong(this.parseInline(Oe.tokens,Ce));break}case"em":{Ie+=Ce.em(this.parseInline(Oe.tokens,Ce));break}case"codespan":{Ie+=Ce.codespan(Oe.text);break}case"br":{Ie+=Ce.br();break}case"del":{Ie+=Ce.del(this.parseInline(Oe.tokens,Ce));break}case"text":{Ie+=Ce.text(Oe.text);break}default:{var Ut='Token with "'+Oe.type+'" type was not found.';if(this.options.silent){console.error(Ut);return}else throw new Error(Ut)}}}return Ie},et}(),bt=Tt,bn=ze,En=Dt,nt=We,Mi=dt,ni=oe,bi=ie.merge,Qs=ie.checkSanitizeDeprecation,Vn=ie.escape,Dr=s.exports.getDefaults,ru=s.exports.changeDefaults,lr=s.exports.defaults;function Ct(et,Ye,it){if(typeof et>"u"||et===null)throw new Error("marked(): input parameter is undefined or null");if(typeof et!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(et)+", string expected");if(typeof Ye=="function"&&(it=Ye,Ye=null),Ye=bi({},Ct.defaults,Ye||{}),Qs(Ye),it){var ve=Ye.highlight,Ce;try{Ce=bt.lex(et,Ye)}catch(pt){return it(pt)}var Ie=function(at){var Ut;if(!at)try{Ye.walkTokens&&Ct.walkTokens(Ce,Ye.walkTokens),Ut=bn.parse(Ce,Ye)}catch(kn){at=kn}return Ye.highlight=ve,at?it(at):it(null,Ut)};if(!ve||ve.length<3||(delete Ye.highlight,!Ce.length))return Ie();var ue=0;Ct.walkTokens(Ce,function(pt){pt.type==="code"&&(ue++,setTimeout(function(){ve(pt.text,pt.lang,function(at,Ut){if(at)return Ie(at);Ut!=null&&Ut!==pt.text&&(pt.text=Ut,pt.escaped=!0),ue--,ue===0&&Ie()})},0))}),ue===0&&Ie();return}try{var Oe=bt.lex(et,Ye);return Ye.walkTokens&&Ct.walkTokens(Oe,Ye.walkTokens),bn.parse(Oe,Ye)}catch(pt){if(pt.message+=`
Please report this to https://github.com/markedjs/marked.`,Ye.silent)return"<p>An error occurred:</p><pre>"+Vn(pt.message+"",!0)+"</pre>";throw pt}}Ct.options=Ct.setOptions=function(et){return bi(Ct.defaults,et),ru(Ct.defaults),Ct},Ct.getDefaults=Dr,Ct.defaults=lr,Ct.use=function(){for(var et=this,Ye=arguments.length,it=new Array(Ye),ve=0;ve<Ye;ve++)it[ve]=arguments[ve];var Ce=bi.apply(void 0,[{}].concat(it)),Ie=Ct.defaults.extensions||{renderers:{},childTokens:{}},ue;it.forEach(function(Oe){if(Oe.extensions&&(ue=!0,Oe.extensions.forEach(function(at){if(!at.name)throw new Error("extension name required");if(at.renderer){var Ut=Ie.renderers?Ie.renderers[at.name]:null;Ut?Ie.renderers[at.name]=function(){for(var kn=arguments.length,R=new Array(kn),K=0;K<kn;K++)R[K]=arguments[K];var ce=at.renderer.apply(this,R);return ce===!1&&(ce=Ut.apply(this,R)),ce}:Ie.renderers[at.name]=at.renderer}if(at.tokenizer){if(!at.level||at.level!=="block"&&at.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Ie[at.level]?Ie[at.level].unshift(at.tokenizer):Ie[at.level]=[at.tokenizer],at.start&&(at.level==="block"?Ie.startBlock?Ie.startBlock.push(at.start):Ie.startBlock=[at.start]:at.level==="inline"&&(Ie.startInline?Ie.startInline.push(at.start):Ie.startInline=[at.start]))}at.childTokens&&(Ie.childTokens[at.name]=at.childTokens)})),Oe.renderer&&function(){var at=Ct.defaults.renderer||new nt,Ut=function(K){var ce=at[K];at[K]=function(){for(var pe=arguments.length,Ne=new Array(pe),Se=0;Se<pe;Se++)Ne[Se]=arguments[Se];var Je=Oe.renderer[K].apply(at,Ne);return Je===!1&&(Je=ce.apply(at,Ne)),Je}};for(var kn in Oe.renderer)Ut(kn);Ce.renderer=at}(),Oe.tokenizer&&function(){var at=Ct.defaults.tokenizer||new En,Ut=function(K){var ce=at[K];at[K]=function(){for(var pe=arguments.length,Ne=new Array(pe),Se=0;Se<pe;Se++)Ne[Se]=arguments[Se];var Je=Oe.tokenizer[K].apply(at,Ne);return Je===!1&&(Je=ce.apply(at,Ne)),Je}};for(var kn in Oe.tokenizer)Ut(kn);Ce.tokenizer=at}(),Oe.walkTokens){var pt=Ct.defaults.walkTokens;Ce.walkTokens=function(at){Oe.walkTokens.call(et,at),pt&&pt(at)}}ue&&(Ce.extensions=Ie),Ct.setOptions(Ce)})},Ct.walkTokens=function(et,Ye){for(var it=function(){var ue=Ce.value;switch(Ye(ue),ue.type){case"table":{for(var Oe=o(ue.header),pt;!(pt=Oe()).done;){var at=pt.value;Ct.walkTokens(at.tokens,Ye)}for(var Ut=o(ue.rows),kn;!(kn=Ut()).done;)for(var R=kn.value,K=o(R),ce;!(ce=K()).done;){var pe=ce.value;Ct.walkTokens(pe.tokens,Ye)}break}case"list":{Ct.walkTokens(ue.items,Ye);break}default:Ct.defaults.extensions&&Ct.defaults.extensions.childTokens&&Ct.defaults.extensions.childTokens[ue.type]?Ct.defaults.extensions.childTokens[ue.type].forEach(function(Ne){Ct.walkTokens(ue[Ne],Ye)}):ue.tokens&&Ct.walkTokens(ue.tokens,Ye)}},ve=o(et),Ce;!(Ce=ve()).done;)it()},Ct.parseInline=function(et,Ye){if(typeof et>"u"||et===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof et!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(et)+", string expected");Ye=bi({},Ct.defaults,Ye||{}),Qs(Ye);try{var it=bt.lexInline(et,Ye);return Ye.walkTokens&&Ct.walkTokens(it,Ye.walkTokens),bn.parseInline(it,Ye)}catch(ve){if(ve.message+=`
Please report this to https://github.com/markedjs/marked.`,Ye.silent)return"<p>An error occurred:</p><pre>"+Vn(ve.message+"",!0)+"</pre>";throw ve}},Ct.Parser=bn,Ct.parser=bn.parse,Ct.Renderer=nt,Ct.TextRenderer=Mi,Ct.Lexer=bt,Ct.lexer=bt.lex,Ct.Tokenizer=En,Ct.Slugger=ni,Ct.parse=Ct;var as=Ct;return as})})();Tm||exports;(Tm||exports).Parser;(Tm||exports).parser;var K5e=(Tm||exports).Renderer;(Tm||exports).TextRenderer;(Tm||exports).Lexer;(Tm||exports).lexer;(Tm||exports).Tokenizer;(Tm||exports).Slugger;var G5e=(Tm||exports).parse;function Y5e(r,e={},t={}){var n;const i=new Nt;let o=!1;const s=i.add(new Ou),a=uj(e),l=function(T){let k;try{k=HV(decodeURIComponent(T))}catch{}return k?(k=Tbe(k,M=>{if(r.uris&&r.uris[M])return qn.revive(r.uris[M])}),encodeURIComponent(JSON.stringify(k))):T},u=function(T,k){const M=r.uris&&r.uris[T];let W=qn.revive(M);return k?T.startsWith(Si.data+":")?T:(W||(W=qn.parse(T)),Uie.asBrowserUri(W).toString(!0)):!W||qn.parse(T).toString()===W.toString()?T:(W.query&&(W=W.with({query:l(W.query)})),W.toString())};let d;const h=new Promise(T=>d=T),p=new K5e;if(p.image=(T,k,M)=>{let W=[],F=[];return T&&({href:T,dimensions:W}=h2e(T),F.push(`src="${T}"`)),M&&F.push(`alt="${M}"`),k&&F.push(`title="${k}"`),W.length&&(F=F.concat(W)),"<img "+F.join(" ")+">"},p.link=(T,k,M)=>(T===M&&(M=iB(M)),T=u(T,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(T)||(T=WG(e.baseUrl,T).toString())),k=iB(k),T=iB(T),!T||T.match(/^data:|javascript:/i)||T.match(/^command:/i)&&!r.isTrusted||T.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?M:(T=T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${T}" title="${k||T}">${M}</a>`)),p.paragraph=T=>`<p>${T}</p>`,e.codeBlockRenderer&&(p.code=(T,k)=>{const M=e.codeBlockRenderer(k,T),W=Aae.nextId();return dz(Promise.all([M,h]),s.token).then(F=>{var Q;if(!o&&F){const z=a.querySelector(`div[data-code="${W}"]`);z&&IC(z,F[0]),(Q=e.asyncRenderCallback)===null||Q===void 0||Q.call(e)}}).catch(()=>{}),`<div class="code" data-code="${W}">${Cz(T)}</div>`}),e.actionHandler){const T=e.actionHandler.disposables.add(new Hr(a,"click")),k=e.actionHandler.disposables.add(new Hr(a,"auxclick"));e.actionHandler.disposables.add(Sn.any(T.event,k.event)(M=>{const W=new Tf(M);if(!W.leftButton&&!W.middleButton)return;let F=W.target;if(!(F.tagName!=="A"&&(F=F.parentElement,!F||F.tagName!=="A")))try{const Q=F.dataset.href;Q&&e.actionHandler.callback(Q,W)}catch(Q){ti(Q)}finally{W.preventDefault()}}))}r.supportHtml||(t.sanitizer=T=>(r.isTrusted?T.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?T:"",t.sanitize=!0,t.silent=!0),t.renderer=p;let _=(n=r.value)!==null&&n!==void 0?n:"";_.length>1e5&&(_=`${_.substr(0,1e5)}`),r.supportThemeIcons&&(_=fTe(_));let C=G5e(_,t);r.supportThemeIcons&&(C=qw(C).map(k=>typeof k=="string"?k:k.outerHTML).join(""));const x=new DOMParser().parseFromString(oee(r,C),"text/html");if(x.body.querySelectorAll("img").forEach(T=>{if(T.src){let k=u(T.src,!0);try{const M=qn.parse(k);e.baseUrl&&M.scheme===Si.file&&(k=WG(e.baseUrl,k).toString())}catch{}T.src=k}}),a.innerHTML=oee(r,x.body.innerHTML),d(),e.asyncRenderCallback)for(const T of a.getElementsByTagName("img")){const k=i.add(kt(T,"load",()=>{k.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,s.cancel(),i.dispose()}}}function oee(r,e){const{config:t,allowedSchemes:n}=Z5e(r);iee("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}});const i=document.createElement("a");iee("afterSanitizeAttributes",o=>{for(const s of["href","src"])o.hasAttribute(s)&&(i.href=o.getAttribute(s),n.includes(i.protocol.replace(/:$/,""))||o.removeAttribute(s))});try{return q5e(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{ree("uponSanitizeAttribute"),ree("afterSanitizeAttributes")}}function Z5e(r){const e=[Si.http,Si.https,Si.mailto,Si.data,Si.file,Si.vscodeFileResource,Si.vscodeRemote,Si.vscodeRemoteResource];return r.isTrusted&&e.push(Si.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var X5e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},see=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Q5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},R7;let Jb=class ece{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new Fe,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new Nt;return{element:i.add(Y5e(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n)).element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,i)=>Q5e(this,void 0,void 0,function*(){var o,s,a,l;let u;n?u=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(u=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),u||(u="plaintext"),this._modeService.triggerMode(u);const d=(s=yield es.getPromise(u))!==null&&s!==void 0?s:void 0,h=document.createElement("span");if(h.innerHTML=(l=(a=ece._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(i,this._modeService.languageIdCodec,d))!==null&&l!==void 0?l:gse(i,this._modeService.languageIdCodec,d),this._options.editor){const p=this._options.editor.getOption(43);ac.applyFontInfoSlow(h,p)}else this._options.codeBlockFontFamily&&(h.style.fontFamily=this._options.codeBlockFontFamily);return h}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(ti),disposables:t}}}};Jb._ttpTokenizer=(R7=window.trustedTypes)===null||R7===void 0?void 0:R7.createPolicy("tokenizeToString",{createHTML(r,e,t){return gse(r,e,t)}});Jb=X5e([see(1,Bl),see(2,Nd)],Jb);var J5e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class eBe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function tBe(r,e,t,n,i){return J5e(this,void 0,void 0,function*(){try{const o=yield Promise.resolve(r.provideHover(t,n,i));if(o&&iBe(o))return new eBe(r,o,e)}catch(o){Pl(o)}})}function tce(r,e,t){const i=VT.ordered(r).map((o,s)=>tBe(o,s,r,e,t));return Ba.fromPromises(i).coalesce()}function nBe(r,e,t){return tce(r,e,t).map(n=>n.hover).toPromise()}Jv("_executeHoverProvider",(r,e)=>nBe(r,e,Oi.None));function iBe(r){const e=typeof r.range<"u",t=typeof r.contents<"u"&&r.contents&&r.contents.length>0;return e&&t}var rBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},M7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const aee=Lt;class Kk{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let kH=class{constructor(e,t,n,i,o){this._editor=e,this._hover=t,this._modeService=n,this._openerService=i,this._configurationService=o}createLoadingMessage(e){return new Kk(this,e.range,[new Zb().appendText(E("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),s=[];let a=1e3;const l=n.getLineLength(i),u=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:u});typeof d=="number"&&l>=d&&s.push(new Kk(this,e.range,[{value:E("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const h of t){const p=h.range.startLineNumber===i?h.range.startColumn:1,_=h.range.endLineNumber===i?h.range.endColumn:o,C=h.options.hoverMessage;if(!C||SN(C))continue;const S=new le(e.range.startLineNumber,p,e.range.startLineNumber,_);s.push(new Kk(this,S,Az(C),a++))}return s}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Ba.EMPTY;const i=this._editor.getModel();if(!VT.has(i))return Ba.EMPTY;const o=new Ge(e.range.startLineNumber,e.range.startColumn);return tce(i,o,n).filter(s=>!SN(s.hover.contents)).map(s=>{const a=s.hover.range?le.lift(s.hover.range):e.range;return new Kk(this,a,s.hover.contents,s.ordinal)})}renderHoverParts(e,t,n){return nce(e,t,this._editor,this._hover,this._modeService,this._openerService)}};kH=rBe([M7(2,Bl),M7(3,Nd),M7(4,Jr)],kH);function nce(r,e,t,n,i,o){r.sort((a,l)=>a.ordinal-l.ordinal);const s=new Nt;for(const a of r)for(const l of a.contents){if(SN(l))continue;const u=aee("div.hover-row.markdown-hover"),d=ft(u,aee("div.hover-contents")),h=s.add(new Jb({editor:t},i,o));s.add(h.onDidRenderAsync(()=>{d.className="hover-contents code-hover-contents",n.onContentsChanged()}));const p=s.add(h.render(l));d.appendChild(p.element),e.appendChild(u)}return s}var ice=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dP=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class lee{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let TH=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new Fe,this.onDidChange=this._onDidChange.event,this._dispoables=new Nt,this._markers=[],this._nextIdx=-1,qn.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),o=(a,l)=>{let u=OT(a.resource.toString(),l.resource.toString());return i==="position"?u=le.compareRangesUsingStarts(a,l)||Ko.compare(a.severity,l.severity):u=Ko.compare(a.severity,l.severity)||le.compareRangesUsingStarts(a,l),u},s=()=>{this._markers=this._markerService.read({resource:qn.isUri(e)?e:void 0,severities:Ko.Error|Ko.Warning|Ko.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};s(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(s(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new lee(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,o=this._markers.findIndex(s=>s.resource.toString()===e.uri.toString());o<0&&(o=Nz(this._markers,{resource:e.uri},(s,a)=>OT(s.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let s=o;s<this._markers.length;s++){let a=le.lift(this._markers[s]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new le(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=s,i=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(le.containsPosition(this._markers[n],t))return new lee(this._markers[n],n+1,this._markers.length)}}};TH=ice([dP(1,A2),dP(2,Jr)],TH);const rce=ar("IMarkerNavigationService");let NH=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new kh}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new TH(e,this._markerService,this._configService)}};NH=ice([dP(0,A2),dP(1,Jr)],NH);ZC(rce,NH,!0);var AH;(function(r){function e(t){switch(t){case os.Ignore:return"severity-ignore "+Ae.info.classNames;case os.Info:return Ae.info.classNames;case os.Warning:return Ae.warning.classNames;case os.Error:return Ae.error.classNames;default:return""}}r.className=e})(AH||(AH={}));mo((r,e)=>{const t=r.getColor(oye);if(t){const o=Ae.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}const n=r.getColor(sye);if(n){const o=Ae.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${n};
			}
		`)}const i=r.getColor(aye);if(i){const o=Ae.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${i};
			}
		`)}});var oBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class sBe{constructor(e,t,n,i,o){this._openerService=i,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Nt,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(za(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new p$(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){nr(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:o}=e;let s=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?s+=o.length:s+=o.value.length);const a=Mv(n);this._lines=a.length,this._longestLineLength=0;for(const p of a)this._longestLineLength=Math.max(p.length+s,this._longestLineLength);ya(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const p of a)l=document.createElement("div"),l.innerText=p,p===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const p=document.createElement("span");if(p.classList.add("details"),l.appendChild(p),t){const _=document.createElement("span");_.innerText=t,_.classList.add("source"),p.appendChild(_)}if(o)if(typeof o=="string"){const _=document.createElement("span");_.innerText=`(${o})`,_.classList.add("code"),p.appendChild(_)}else{this._codeLink=Lt("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=C=>{this._openerService.open(o.target,{allowCommands:!0}),C.preventDefault(),C.stopPropagation()};const _=ft(this._codeLink,Lt("span"));_.innerText=o.value,p.appendChild(this._codeLink)}}if(ya(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Ed(i)){const p=this._relatedBlock.appendChild(document.createElement("div"));p.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const _ of i){let C=document.createElement("div"),S=document.createElement("a");S.classList.add("filename"),S.innerText=`${Nue(_.resource)}(${_.startLineNumber}, ${_.startColumn}): `,S.title=this._labelService.getUriLabel(_.resource),this._relatedDiagnostics.set(S,_);let x=document.createElement("span");x.innerText=_.message,C.appendChild(S),C.appendChild(x),this._lines+=1,p.appendChild(C)}}const u=this._editor.getOption(43),d=Math.ceil(u.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=u.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ko.Error:t=E("Error","Error");break;case Ko.Warning:t=E("Warning","Warning");break;case Ko.Info:t=E("Info","Info");break;case Ko.Hint:t=E("Hint","Hint");break}let n=E("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}let Ix=class oce extends uP{constructor(e,t,n,i,o,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new Nt,this._onDidSelectRelatedInformation=new Fe,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ko.Warning,this._backgroundColor=je.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(cBe);let t=OH,n=aBe;this._severity===Ko.Warning?(t=RH,n=lBe):this._severity===Ko.Info&&(t=MH,n=uBe);const i=e.getColor(t),o=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:o,primaryHeadingColor:e.getColor(kue),secondaryHeadingColor:e.getColor(Tue)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(oce.TitleMenu,this._contextKeyService);q3e(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=ft(e,Lt(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new sBe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let i=le.lift(e);const o=this.editor.getPosition();let s=o&&i.containsPosition(o)?o:i.getStartPosition();super.show(s,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?E("problems","{0} of {1} problems",t,n):E("change","{0} of {1} problem",t,n);this.setTitle(Uf(a.uri),l)}this._icon.className=`codicon ${AH.className(Ko.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};Ix.TitleMenu=new wn("gotoErrorTitleMenu");Ix=oBe([KE(1,Ho),KE(2,Nd),KE(3,XS),KE(4,xi),KE(5,Jn),KE(6,I2)],Ix);let uee=FT(nT,Qre),cee=FT(Bb,u4),dee=FT(gm,Wz);const OH=Be("editorMarkerNavigationError.background",{dark:uee,light:uee,hc:Ns},E("editorMarkerNavigationError","Editor marker navigation widget error color.")),aBe=Be("editorMarkerNavigationError.headerBackground",{dark:Qr(OH,.1),light:Qr(OH,.1),hc:null},E("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),RH=Be("editorMarkerNavigationWarning.background",{dark:cee,light:cee,hc:Ns},E("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),lBe=Be("editorMarkerNavigationWarning.headerBackground",{dark:Qr(RH,.1),light:Qr(RH,.1),hc:"#0C141F"},E("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),MH=Be("editorMarkerNavigationInfo.background",{dark:dee,light:dee,hc:Ns},E("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),uBe=Be("editorMarkerNavigationInfo.headerBackground",{dark:Qr(MH,.1),light:Qr(MH,.1),hc:null},E("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),cBe=Be("editorMarkerNavigation.background",{dark:Mf,light:Mf,hc:Mf},E("editorMarkerNavigationBackground","Editor marker navigation widget background."));var dBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},sce=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let HC=class oR{constructor(e,t,n,i,o){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=o,this._sessionDispoables=new Nt,this._editor=e,this._widgetVisible=ace.bindTo(this._contextKeyService)}static get(e){return e.getContribution(oR.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Ix,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,o,s;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!le.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,n.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:le.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Ge(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return sce(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const i=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);i&&(oR.get(i).close(),oR.get(i).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};HC.ID="editor.contrib.markerController";HC=dBe([cO(1,rce),cO(2,Jn),cO(3,vr),cO(4,xi)],HC);class IF extends gn{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return sce(this,void 0,void 0,function*(){t.hasModel()&&HC.get(t).nagivate(this._next,this._multiFile)})}}class Vb extends IF{constructor(){super(!0,!1,{id:Vb.ID,label:Vb.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:578,weight:100},menuOpts:{menuId:Ix.TitleMenu,title:Vb.LABEL,icon:gl("marker-navigation-next",Ae.arrowDown,E("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Vb.ID="editor.action.marker.next";Vb.LABEL=E("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class kx extends IF{constructor(){super(!1,!1,{id:kx.ID,label:kx.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:1602,weight:100},menuOpts:{menuId:Ix.TitleMenu,title:Vb.LABEL,icon:gl("marker-navigation-previous",Ae.arrowUp,E("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}kx.ID="editor.action.marker.prev";kx.LABEL=E("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class hBe extends IF{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:E("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:66,weight:100},menuOpts:{menuId:wn.MenubarGoMenu,title:E({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class fBe extends IF{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:E("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:1090,weight:100},menuOpts:{menuId:wn.MenubarGoMenu,title:E({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}br(HC.ID,HC);Wt(Vb);Wt(kx);Wt(hBe);Wt(fBe);const ace=new _n("markersNavigationVisible",!1),gBe=Fl.bindToContribution(HC.get);Mt(new gBe({id:"closeMarkersNavigation",precondition:ace,handler:r=>r.close(),kbOpts:{weight:100+50,kbExpr:Le.focus,primary:9,secondary:[1033]}}));var pBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Mg=Lt;class mBe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const fee={type:1,filter:{include:Vi.QuickFix}};let PH=class{constructor(e,t,n,i){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=i,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),s=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,u=a.range.endLineNumber===i?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const h=new le(e.range.startLineNumber,l,e.range.startLineNumber,u);s.push(new mBe(this,h,d))}return s}renderHoverParts(e,t,n){if(!e.length)return ot.None;const i=new Nt;e.forEach(s=>t.appendChild(this.renderMarkerHover(s,i)));const o=e.length===1?e[0]:e.sort((s,a)=>Ko.compare(s.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(o,n,i),i}renderMarkerHover(e,t){const n=Mg("div.hover-row"),i=ft(n,Mg("div.marker.hover-contents")),{source:o,message:s,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const u=ft(i,Mg("span"));if(u.style.whiteSpace="pre-wrap",u.innerText=s,o||a)if(a&&typeof a!="string"){const d=Mg("span");if(o){const C=ft(d,Mg("span"));C.innerText=o}const h=ft(d,Mg("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(kt(h,"click",C=>{this._openerService.open(a.target,{allowCommands:!0}),C.preventDefault(),C.stopPropagation()}));const p=ft(h,Mg("span"));p.innerText=a.value;const _=ft(i,d);_.style.opacity="0.6",_.style.paddingLeft="6px"}else{const d=ft(i,Mg("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(Ed(l))for(const{message:d,resource:h,startLineNumber:p,startColumn:_}of l){const C=ft(i,Mg("div"));C.style.marginTop="8px";const S=ft(C,Mg("a"));S.innerText=`${Uf(h)}(${p}, ${_}): `,S.style.cursor="pointer",t.add(kt(S,"click",T=>{T.stopPropagation(),T.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:p,startColumn:_}}}).catch(ti)}));const x=ft(C,Mg("span"));x.innerText=d,this._editor.applyFontInfo(x)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===Ko.Error||e.marker.severity===Ko.Warning||e.marker.severity===Ko.Info)&&t.addAction({label:E("view problem","View Problem"),commandId:Vb.ID,run:()=>{this._hover.hide(),HC.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const i=t.append(Mg("div"));this.recentMarkerCodeActionsInfo&&(XM.makeKey(this.recentMarkerCodeActionsInfo.marker)===XM.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=E("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?ot.None:n.add(tS(()=>i.textContent=E("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const s=this.getCodeActions(e.marker);n.add(Hi(()=>s.cancel())),s.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=E("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(Hi(()=>{l||a.dispose()})),t.addAction({label:E("quick fixes","Quick Fix..."),commandId:fD.Id,run:u=>{l=!0;const d=ES.get(this._editor),h=tu(u);this._hover.hide(),d.showCodeActions(fee,a,{x:h.left+6,y:h.top+h.height+6})}})},ti)}}getCodeActions(e){return fl(t=>Gj(this._editor.getModel(),new le(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),fee,iE.None,t))}};PH=pBe([hee(2,vz),hee(3,Nd)],PH);mo((r,e)=>{const t=r.getColor(a4);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=r.getColor(l4);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const lce="editor.action.inlineSuggest.commit";class uce{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return vBe(n,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class _Be{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function vBe(r,e){const t=new _Be(r),n=e.map(i=>{const o=le.lift(i.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:i.text}});n.sort((i,o)=>o.startOffset-i.startOffset);for(const i of n)r=r.substring(0,i.startOffset)+i.text+r.substring(i.endOffset);return r}class gee{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class cce extends ot{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function bBe(r,e){return r===e?!0:!r||!e?!1:r.range.equalsRange(e.range)&&r.text===e.text&&r.command===e.command}function dce(r,e,t,n,i=0){if(r.range.startLineNumber!==r.range.endLineNumber)return;const o=e.getLineContent(r.range.startLineNumber),s=Vr(o).length;if(r.range.startColumn-1<=s){const _=Vr(r.text).length,C=o.substring(r.range.startColumn-1,s),S=le.fromPositions(r.range.getStartPosition().delta(0,C.length),r.range.getEndPosition()),x=r.text.startsWith(C)?r.text.substring(C.length):r.text.substring(_);r={range:S,text:x,command:r.command}}const l=e.getValueInRange(r.range),u=CBe(l,r.text);if(!u)return;const d=r.range.startLineNumber,h=new Array;if(t==="prefix"){const _=u.filter(C=>C.originalLength===0);if(_.length>1||_.length===1&&_[0].originalStart!==l.length)return}const p=r.text.length-i;for(const _ of u){const C=r.range.startColumn+_.originalStart+_.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===r.range.startLineNumber&&C<n.column||_.originalLength>0)return;if(_.modifiedLength===0)continue;const S=_.modifiedStart+_.modifiedLength,x=Math.max(_.modifiedStart,Math.min(S,p)),T=r.text.substring(_.modifiedStart,x),k=r.text.substring(x,Math.max(_.modifiedStart,S));if(T.length>0){const M=Mv(T);h.push(new gee(C,M,!1))}if(k.length>0){const M=Mv(k);h.push(new gee(C,M,!0))}}return new uce(d,h,0)}let Y_;function CBe(r,e){if((Y_==null?void 0:Y_.originalValue)===r&&(Y_==null?void 0:Y_.newValue)===e)return Y_==null?void 0:Y_.changes;{const t=yBe(r,e);return Y_={originalValue:r,newValue:e,changes:t},t}}function yBe(r,e){if(r.length>5e3||e.length>5e3)return;function t(l){let u=0;for(let d=0,h=l.length;d<h;d++){const p=l.charCodeAt(d);p>u&&(u=p)}return u}const n=Math.max(t(r),t(e));function i(l){if(l<0)throw new Error("unexpected");return n+l+1}function o(l){let u=0,d=0;const h=new Int32Array(l.length);for(let p=0,_=l.length;p<_;p++){const C=d*100+u;l[p]==="("?(h[p]=i(2*C),u++):l[p]===")"?(h[p]=i(2*C+1),u===1&&d++,u=Math.max(u-1,0)):h[p]=l.charCodeAt(p)}return h}const s=o(r),a=o(e);return new pv({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}var wBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SBe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Lb=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let FH=class extends ot{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new lc),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(i=>{new Set([$L.Tab.id,$L.DeleteLeft.id,$L.DeleteRight.id,lce,"acceptSelectedSuggestion"]).has(i.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(i=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Hi(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(If.Automatic))}trigger(e){if(this.completionSession.value){e===If.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new EBe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Lb(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};FH=wBe([SBe(2,Go)],FH);class EBe extends cce{constructor(e,t,n,i,o,s){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=o,this.initialTriggerKind=s,this.minReservedLineCount=0,this.updateOperation=this._register(new lc),this.updateSoon=this._register(new Xr(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=If.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const u=l.sourceProvider;u.handleItemDidShow&&u.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(Hi(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(t$.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return Lb(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return Lb(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Lb(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===If.Explicit?yield this.updateOperation.value.promise:yield this.update(If.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==If.Explicit&&(yield this.update(If.Explicit))})}hasMultipleInlineCompletions(){var e;return Lb(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?dce(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return Lb(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=fl(o=>Lb(this,void 0,void 0,function*(){let s;try{s=yield fce(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},o)}catch(a){ti(a);return}o.isCancellationRequested||(this.cache.setValue(this.editor,s,e),this.onDidChangeEmitter.fire())})),i=new hce(n,e);this.updateOperation.value=i,yield n,this.updateOperation.value===i&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[ss.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Pl):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class hce{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class LBe extends ot{constructor(e,t,n,i){super(),this.triggerKind=i;const o=e.deltaDecorations([],t.items.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._register(Hi(()=>{e.deltaDecorations(o,[])})),this.completions=t.items.map((s,a)=>new xBe(s,o[a])),this._register(e.onDidChangeModelContent(()=>{let s=!1;const a=e.getModel();for(const l of this.completions){const u=a.getDecorationRange(l.decorationId);if(!u){ti(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(u)||(s=!0,l.synchronizedRange=u)}s&&n()})),this._register(t)}}class xBe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function DBe(r,e){const t=e.getWordAtPosition(r),n=e.getLineMaxColumn(r.lineNumber);return t?new le(r.lineNumber,t.startColumn,r.lineNumber,n):le.fromPositions(r,r.with(void 0,n))}function fce(r,e,t,n=Oi.None){return Lb(this,void 0,void 0,function*(){const i=DBe(r,e),o=t$.all(e),s=yield Promise.all(o.map(l=>Lb(this,void 0,void 0,function*(){const u=yield l.provideInlineCompletions(e,r,t,n);return{completions:u,provider:l,dispose:()=>{u&&l.freeInlineCompletions(u)}}}))),a=new Map;for(const l of s){const u=l.completions;if(u)for(const d of u.items.map(h=>({text:h.text,range:h.range?le.lift(h.range):i,command:h.command,sourceProvider:l.provider,sourceInlineCompletions:u,sourceInlineCompletion:h})))d.range.startLineNumber===d.range.endLineNumber&&a.set(JSON.stringify({text:d.text,range:d.range}),d)}return{items:[...a.values()],dispose:()=>{for(const l of s)l.dispose()}}})}function hP(r,e){if(!e)return e;const t=r.getValueInRange(e.range),n=ax(t,e.text),i=r.getOffsetAt(e.range.getStartPosition())+n,o=r.getPositionAt(i),s=t.substr(n),a=HR(s,e.text),l=r.getPositionAt(Math.max(i,r.getOffsetAt(e.range.getEndPosition())-a));return{range:le.fromPositions(o,l),text:e.text.substr(n,e.text.length-n-a)}}class Wg{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),i;if(i=Wg._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Wg.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Wg.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Wg.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Wg.isVariableCharacter(n)||Wg.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Wg._table[n]>"u"&&!Wg.isDigitCharacter(n)&&!Wg.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}Wg._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class pD{constructor(){this._children=[]}appendChild(e){return e instanceof Cd&&this._children[this._children.length-1]instanceof Cd?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...t),n._children=o,function s(a,l){for(const u of a)u.parent=l,s(u.children,u)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof kF)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Cd extends pD{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Cd(this.value)}}class gce extends pD{}class Kg extends gce{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof j2?this._children[0]:void 0}clone(){let e=new Kg(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class j2 extends pD{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Cd&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new j2;return this.options.forEach(e.appendChild,e),e}}class eq extends pD{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof Xp&&!!o.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof Xp){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){let e=new eq;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Xp extends pD{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new Xp(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class AN extends gce{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Cd(t)],!0):!1}clone(){const e=new AN(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function pee(r,e){const t=[...r];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class kF extends pD{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Kg&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return pee([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Kg&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof AN&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new kF;return this._children=this.children.map(t=>t.clone()),e}walk(e){pee(this.children,e)}}class TF{constructor(){this._scanner=new Wg,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const i=new kF;for(;this._parse(i););const o=new Map,s=[];let a=0;i.walk(l=>(l instanceof Kg&&(a+=1,l.isFinalTabstop?o.set(0,void 0):!o.has(l.index)&&l.children.length>0?o.set(l.index,l.children):s.push(l)),!0));for(const l of s){const u=o.get(l.index);if(u){const d=new Kg(l.index);d.transform=l.transform;for(const h of u)d.appendChild(h.clone());i.replace(l,[d])}}return n||(n=a>0&&t),!o.has(0)&&n&&i.appendChild(new Kg(0)),i}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Cd(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Kg(Number(t)):new AN(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const o=new Kg(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Cd("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const s=new j2;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new Cd(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const o=new AN(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Cd("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new eq,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Cd(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Xp(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Xp(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Xp(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Xp(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Xp(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Xp(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Xp(Number(i),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Cd(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const ll=new Uint8Array(16),ic=[];for(let r=0;r<256;r++)ic.push(r.toString(16).padStart(2,"0"));let BH;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?BH=crypto.getRandomValues.bind(crypto):BH=function(r){for(let e=0;e<r.length;e++)r[e]=Math.floor(Math.random()*256);return r};function IBe(){BH(ll),ll[6]=ll[6]&15|64,ll[8]=ll[8]&63|128;let r=0,e="";return e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e+="-",e+=ic[ll[r++]],e+=ic[ll[r++]],e+="-",e+=ic[ll[r++]],e+=ic[ll[r++]],e+="-",e+=ic[ll[r++]],e+=ic[ll[r++]],e+="-",e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e+=ic[ll[r++]],e}const mee="code-workspace";function _ee(r){const e=r;return typeof(e==null?void 0:e.id)=="string"&&qn.isUri(e.uri)}function kBe(r){if(r.configuration)return{id:r.id,configPath:r.configuration};if(r.folders.length===1)return{id:r.id,uri:r.folders[0].uri}}class TBe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class NBe{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,i=o.multiline)}if(n&&i&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),s=Vr(o,0,this._selection.startColumn-1);let a=s;e.snippet.walk(u=>u===e?!1:(u instanceof Cd&&(a=Vr(Mv(u.value).pop())),!0));const l=ax(a,s);n=n.replace(/(\r\n|\r|\n)(.*)/g,(u,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class ABe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Aw(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Aw(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return Fie(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(Kz(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class OBe{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!rre(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class RBe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=fr.getComments(n);if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}}class Dv{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Dv.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Dv.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Dv.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Dv.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Dv.dayNames=[E("Sunday","Sunday"),E("Monday","Monday"),E("Tuesday","Tuesday"),E("Wednesday","Wednesday"),E("Thursday","Thursday"),E("Friday","Friday"),E("Saturday","Saturday")];Dv.dayNamesShort=[E("SundayShort","Sun"),E("MondayShort","Mon"),E("TuesdayShort","Tue"),E("WednesdayShort","Wed"),E("ThursdayShort","Thu"),E("FridayShort","Fri"),E("SaturdayShort","Sat")];Dv.monthNames=[E("January","January"),E("February","February"),E("March","March"),E("April","April"),E("May","May"),E("June","June"),E("July","July"),E("August","August"),E("September","September"),E("October","October"),E("November","November"),E("December","December")];Dv.monthNamesShort=[E("JanuaryShort","Jan"),E("FebruaryShort","Feb"),E("MarchShort","Mar"),E("AprilShort","Apr"),E("MayShort","May"),E("JuneShort","Jun"),E("JulyShort","Jul"),E("AugustShort","Aug"),E("SeptemberShort","Sep"),E("OctoberShort","Oct"),E("NovemberShort","Nov"),E("DecemberShort","Dec")];class MBe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=kBe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(_ee(e))return Aw(e.uri.path);let t=Aw(e.configPath.path);return t.endsWith(mee)&&(t=t.substr(0,t.length-mee.length-1)),t}_resoveWorkspacePath(e){if(_ee(e))return mH(e.uri.fsPath);let t=Aw(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?mH(n):"/"}}class PBe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return IBe()}}class Vg{constructor(e,t,n,i){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=i,this._nestingLevel=1,this._placeholderGroups=_G(t.placeholders,Kg.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),o=this._snippet.fullLen(n),s=le.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+o)),a=n.isFinalTabstop?Vg._decor.inactiveFinal:Vg._decor.inactive,l=t.addDecoration(s,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let i=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const s=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(s),l=this._editor.getModel().getValueInRange(a),u=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<u.length;d++)u[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+u[d]);i.push(ss.replace(a,u.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const o=new Set,s=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),u=this._editor.getModel().getDecorationRange(l);s.push(new ln(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?Vg._decor.activeFinal:Vg._decor.active),o.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(d);i.changeDecorationOptions(h,d.isFinalTabstop?Vg._decor.activeFinal:Vg._decor.active),o.add(d)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?Vg._decor.inactiveFinal:Vg._decor.inactive);return s});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Kg){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const o=this._placeholderDecorations.get(i),s=this._editor.getModel().getDecorationRange(o);if(!s){e.delete(i.index);break}n.push(s)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(!o._placeholderDecorations);const s=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(s+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,o._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of o._snippet.placeholders){const u=o._snippet.offset(l),d=o._snippet.fullLen(l),h=le.fromPositions(t.getPositionAt(o._offset+u),t.getPositionAt(o._offset+u+d)),p=n.addDecoration(h,Vg._decor.inactive);this._placeholderDecorations.set(l,p)}}this._placeholderGroups=_G(this._snippet.placeholders,Kg.compareByIndex)})}}Vg._decor={active:pi.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:pi.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:pi.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:pi.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const vee={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class rv{constructor(e,t,n=vee){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,i,o){const s=e.getLineContent(t.lineNumber),a=Vr(s,0,t.column-1);let l;return n.walk(u=>{if(!(u instanceof Cd)||u.parent instanceof j2)return!0;const d=u.value.split(/\r\n|\r|\n/);if(i){const p=n.offset(u);if(p===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??n.toString();let _=l.charCodeAt(p-1);(_===10||_===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let _=1;_<d.length;_++)d[_]=e.normalizeIndentation(a+d[_])}const h=d.join(e.getEOL());return h!==u.value&&(u.parent.replace(u,[new Cd(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:o,positionColumn:s}=t,a=s-n,l=s+i,u=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=ln.createWithDirection(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,i,o,s,a,l){const u=[],d=[];if(!e.hasModel())return{edits:u,snippets:d};const h=e.getModel(),p=e.invokeWithinContext(W=>W.get(Tse)),_=e.invokeWithinContext(W=>new ABe(W.get(I2),h)),C=()=>a;let S=0,x=h.getValueInRange(rv.adjustSelection(h,e.getSelection(),n,0)),T=h.getValueInRange(rv.adjustSelection(h,e.getSelection(),0,i)),k=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const M=e.getSelections().map((W,F)=>({selection:W,idx:F})).sort((W,F)=>le.compareRangesUsingStarts(W.selection,F.selection));for(const{selection:W,idx:F}of M){let Q=rv.adjustSelection(h,W,n,0),z=rv.adjustSelection(h,W,0,i);x!==h.getValueInRange(Q)&&(Q=W),T!==h.getValueInRange(z)&&(z=W);const $=W.setStartPosition(Q.startLineNumber,Q.startColumn).setEndPosition(z.endLineNumber,z.endColumn),G=new TF().parse(t,!0,o),Y=$.getStartPosition(),I=rv.adjustWhitespace(h,Y,G,s||F>0&&k!==h.getLineFirstNonWhitespaceColumn(W.positionLineNumber),!0);G.resolveVariables(new TBe([_,new OBe(C,F,M.length,e.getOption(70)==="spread"),new NBe(h,W,F,l),new RBe(h,W),new Dv,new MBe(p),new PBe]));const D=h.getOffsetAt(Y)+S;S+=G.toString().length-h.getValueLengthInRange($),u[F]=ss.replace($,G.toString()),u[F].identifier={major:F,minor:0},d[F]=new Vg(e,G,D,I)}return{edits:u,snippets:d}}dispose(){nr(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=rv.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(i=>!!i.identifier).map(i=>ln.fromPositions(i.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=vee){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=rv.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,o=>{for(const s of this._snippets)s.merge(i);return console.assert(i.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):o.filter(s=>!!s.identifier).map(s=>ln.fromPositions(s.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[o,s]of i){s.sort(le.compareRangesUsingStarts);for(const a of e)if(s[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,s)=>{o.push(...i.get(s))})}e.sort(le.compareRangesUsingStarts);for(let[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(le.compareRangesUsingStarts);for(let o=0;o<i.length;o++)if(!i[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}}var ST=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Wi={Visible:new _n("suggestWidgetVisible",!1,E("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new _n("suggestWidgetDetailsVisible",!1,E("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new _n("suggestWidgetMultipleSuggestions",!1,E("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new _n("suggestionMakesTextEdit",!0,E("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new _n("acceptSuggestionOnEnter",!0,E("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new _n("suggestionHasInsertAndReplaceRange",!1,E("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new _n("suggestionInsertMode",void 0,{type:"string",description:E("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new _n("suggestionCanResolve",!1,E("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},UC=new wn("suggestWidgetStatusBar");class FBe{constructor(e,t,n,i){this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=mm.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),le.isIRange(t.range)?(this.editStart=new Ge(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Ge(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Ge(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||le.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Ge(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Ge(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Ge(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||le.spansMultipleLines(t.range.insert)||le.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return ST(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{Zv(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class fP{constructor(e=2,t=new Set,n=new Set,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=i}}fP.default=new fP;let BBe;function WBe(){return BBe}class VBe{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}function pce(r,e,t=fP.default,n={triggerKind:0},i=Oi.None){return ST(this,void 0,void 0,function*(){const o=new Ov(!0);e=e.clone();const s=r.getWordAtPosition(e),a=s?new le(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn):le.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},u=[],d=new Nt,h=[];let p=!1;const _=(S,x,T)=>{var k,M,W;if(x){for(let F of x.suggestions)if(!t.kindFilter.has(F.kind)){if(!t.showDeprecated&&(!((k=F==null?void 0:F.tags)===null||k===void 0)&&k.includes(1)))continue;F.range||(F.range=l),F.sortText||(F.sortText=typeof F.label=="string"?F.label:F.label.label),!p&&F.insertTextRules&&F.insertTextRules&4&&(p=TF.guessNeedsClipboard(F.insertText)),u.push(new FBe(e,F,x,S))}iz(x)&&d.add(x),h.push({providerName:(M=S._debugDisplayName)!==null&&M!==void 0?M:"unkown_provider",elapsedProvider:(W=x.duration)!==null&&W!==void 0?W:-1,elapsedOverall:T.elapsed()})}},C=(()=>ST(this,void 0,void 0,function*(){}))();for(let S of em.orderedGroups(r)){let x=u.length;if(yield Promise.all(S.map(T=>ST(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(T)))try{const k=new Ov(!0),M=yield T.provideCompletionItems(r,e,n,i);_(T,M,k)}catch(k){Pl(k)}}))),x!==u.length||i.isCancellationRequested)break}return yield C,i.isCancellationRequested?(d.dispose(),Promise.reject(GS())):new VBe(u.sort(mce(t.snippetSortOrder)),p,{entries:h,elapsed:o.elapsed()},d)})}function tq(r,e){if(r.sortTextLow&&e.sortTextLow){if(r.sortTextLow<e.sortTextLow)return-1;if(r.sortTextLow>e.sortTextLow)return 1}return r.completion.label<e.completion.label?-1:r.completion.label>e.completion.label?1:r.completion.kind-e.completion.kind}function HBe(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return tq(r,e)}function UBe(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return tq(r,e)}const NF=new Map;NF.set(0,HBe);NF.set(2,UBe);NF.set(1,tq);function mce(r){return NF.get(r)}Yi.registerCommand("_executeCompletionItemProvider",(r,...e)=>ST(void 0,void 0,void 0,function*(){const[t,n,i,o]=e;jr(qn.isUri(t)),jr(Ge.isIPosition(n)),jr(typeof i=="string"||!i),jr(typeof o=="number"||!o);const s=yield r.get(Fc).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],u=yield pce(s.object.textEditorModel,Ge.lift(n),void 0,{triggerCharacter:i,triggerKind:i?1:0});for(const d of u.items)l.length<(o??0)&&l.push(d.resolve(Oi.None)),a.incomplete=a.incomplete||d.container.incomplete,a.suggestions.push(d.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{s.dispose()}}));const WH=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};em.register("*",WH);function zBe(r,e){setTimeout(()=>{WH.onlyOnceSuggestions.push(...e),r.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(WH))},0)}var $Be=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Cee={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Ml=class Gk{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new Nt,this._modelVersionId=-1,this._inSnippet=Gk.InSnippetMode.bindTo(n),this._hasNextTabstop=Gk.HasNextTabstop.bindTo(n),this._hasPrevTabstop=Gk.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(Gk.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Cee:Object.assign(Object.assign({},Cee),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new rv(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>ln.fromPositions(n.getStartPosition())));const[t]=e.options;zBe(this._editor,e.options.map((n,i)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(i+1),range:le.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Ml.ID="snippetController2";Ml.InSnippetMode=new _n("inSnippetMode",!1,E("inSnippetMode","Whether the editor in current in snippet mode"));Ml.HasNextTabstop=new _n("hasNextTabstop",!1,E("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Ml.HasPrevTabstop=new _n("hasPrevTabstop",!1,E("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Ml=$Be([bee(1,Qv),bee(2,Jn)],Ml);br(Ml.ID,Ml);const AF=Fl.bindToContribution(Ml.get);Mt(new AF({id:"jumpToNextSnippetPlaceholder",precondition:Xt.and(Ml.InSnippetMode,Ml.HasNextTabstop),handler:r=>r.next(),kbOpts:{weight:100+30,kbExpr:Le.editorTextFocus,primary:2}}));Mt(new AF({id:"jumpToPrevSnippetPlaceholder",precondition:Xt.and(Ml.InSnippetMode,Ml.HasPrevTabstop),handler:r=>r.prev(),kbOpts:{weight:100+30,kbExpr:Le.editorTextFocus,primary:1026}}));Mt(new AF({id:"leaveSnippet",precondition:Ml.InSnippetMode,handler:r=>r.cancel(!0),kbOpts:{weight:100+30,kbExpr:Le.editorTextFocus,primary:9,secondary:[1033]}}));Mt(new AF({id:"acceptSnippet",precondition:Ml.InSnippetMode,handler:r=>r.finish()}));var jBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class nq{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let i=n[0].score[0];for(let o=0;o<n.length;o++){const{score:s,completion:a}=n[o];if(s[0]!==i)break;if(a.preselect)return o}return 0}}class _ce extends nq{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class qBe extends nq{constructor(){super("recentlyUsed"),this._cache=new YC(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);let o=n[0].score[0],s=-1,a=-1,l=-1;for(let u=0;u<n.length&&n[u].score[0]===o;u++){const d=`${e.getLanguageId()}/${n[u].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[u].completion.kind&&h.insertText===n[u].completion.insertText&&(l=h.touch,a=u),n[u].completion.preselect&&s===-1)return s=u}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:Aoe(i.type),this._cache.set(n,i);this._seq=this._cache.size}}class KBe extends nq{constructor(){super("recentlyUsedByPrefix"),this._trie=UL.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${i}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);let o=`${e.getLanguageId()}/${i}`,s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(let a=0;a<n.length;a++){let{kind:l,insertText:u}=n[a].completion;if(l===s.type&&u===s.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Aoe(n.type),this._trie.set(t,n)}}}let ON=class sR{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Nt,this._persistSoon=new Xr(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===QM.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const o=sR._strategyCtors.get(i)||_ce;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${sR._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${sR._storagePrefix}/${this._strategy.name}`,n,t,1)}}};ON._strategyCtors=new Map([["recentlyUsedByPrefix",KBe],["recentlyUsed",qBe],["first",_ce]]);ON._storagePrefix="suggest/memories";ON=jBe([yee(0,i0),yee(1,Jr)],ON);const vce=ar("ISuggestMemories");ZC(vce,ON,!0);var GBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},YBe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let RN=class bce{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=bce.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),o=n.getWordAtPosition(i.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===i.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};RN.AtEnd=new _n("atEndOfWord",!1);RN=GBe([YBe(1,Jn)],RN);var ZBe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XBe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let IS=class aR{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=aR.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(aR._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits););return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=aR._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};IS.OtherSuggestions=new _n("hasOtherSuggestions",!1);IS=ZBe([XBe(1,Jn)],IS);class QBe{constructor(e,t,n){this._disposables=new Nt,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()){const o=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!Ed(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new fL;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var JBe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Eh{provideSelectionRanges(e,t){return JBe(this,void 0,void 0,function*(){const n=[];for(const i of t){const o=[];n.push(o);const s=new Map;yield new Promise(a=>Eh._bracketsRightYield(a,0,e,i,s)),yield new Promise(a=>Eh._bracketsLeftYield(a,0,e,i,s,o))}return n})}static _bracketsRightYield(e,t,n,i,o){const s=new Map,a=Date.now();for(;;){if(t>=Eh._maxRounds){e();break}if(!i){e();break}let l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>Eh._maxDuration){setTimeout(()=>Eh._bracketsRightYield(e,t+1,n,i,o));break}const d=l.close[0];if(l.isOpen){let h=s.has(d)?s.get(d):0;s.set(d,h+1)}else{let h=s.has(d)?s.get(d):0;if(h-=1,s.set(d,Math.max(0,h)),h<0){let p=o.get(d);p||(p=new kh,o.set(d,p)),p.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,o,s){const a=new Map,l=Date.now();for(;;){if(t>=Eh._maxRounds&&o.size===0){e();break}if(!i){e();break}let u=n.bracketPairs.findPrevBracket(i);if(!u){e();break}if(Date.now()-l>Eh._maxDuration){setTimeout(()=>Eh._bracketsLeftYield(e,t+1,n,i,o,s));break}const h=u.close[0];if(u.isOpen){let p=a.has(h)?a.get(h):0;if(p-=1,a.set(h,Math.max(0,p)),p<0){let _=o.get(h);if(_){let C=_.shift();_.size===0&&o.delete(h);const S=le.fromPositions(u.range.getEndPosition(),C.getStartPosition()),x=le.fromPositions(u.range.getStartPosition(),C.getEndPosition());s.push({range:S}),s.push({range:x}),Eh._addBracketLeading(n,x,s)}}}else{let p=a.has(h)?a.get(h):0;a.set(h,p+1)}i=u.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);o!==0&&o!==t.startColumn&&(n.push({range:le.fromPositions(new Ge(i,o),t.getEndPosition())}),n.push({range:le.fromPositions(new Ge(i,1),t.getEndPosition())}));const s=i-1;if(s>0){const a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(n.push({range:le.fromPositions(new Ge(s,a),t.getEndPosition())}),n.push({range:le.fromPositions(new Ge(s,1),t.getEndPosition())}))}}}Eh._maxDuration=30;Eh._maxRounds=2;var e8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class cv{static create(e,t){return e8e(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return cv.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return cv.None;const[o]=yield new Eh().provideSelectionRanges(n,[i]);if(o.length===0)return cv.None;const s=yield e.computeWordRanges(n.uri,o[0].range);if(!s)return cv.None;const a=n.getWordUntilPosition(i);return delete s[a.word],new class extends cv{distance(l,u){if(!i.equals(t.getPosition()))return 0;if(u.kind===17)return 2<<20;let d=typeof u.label=="string"?u.label:u.label.label,h=s[d];if(Dre(h))return 2<<20;let p=Nz(h,le.fromPositions(l),le.compareRangesUsingStarts),_=p>=0?h[p]:h[Math.max(0,~p-1)],C=o.length;for(const S of o){if(!le.containsRange(S.range,_))break;C-=1}return C}}})}}cv.None=new class extends cv{distance(){return 0}};class bw{constructor(e,t,n,i,o,s,a){this.clipboardText=a,this._snippetCompareFn=bw._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=o,this._refilterKind=1,this._lineContext=n,s==="top"?this._snippetCompareFn=bw._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=bw._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",o="";const s=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||s.length>2e3?Cx:sTe;for(let u=0;u<s.length;u++){const d=s[u];if(d.isInvalid)continue;this._providerInfo.set(d.provider,!!d.container.incomplete);const h=d.position.column-d.editStart.column,p=h+n-(d.position.column-this._column);if(i.length!==p&&(i=p===0?"":t.slice(-p),o=i.toLowerCase()),d.word=i,p===0)d.score=mm.Default;else{let _=0;for(;_<h;){const C=i.charCodeAt(_);if(C===32||C===9)_+=1;else break}if(_>=p)d.score=mm.Default;else if(typeof d.completion.filterText=="string"){let C=l(i,o,_,d.completion.filterText,d.filterTextLow,0,!1);if(!C)continue;N9(d.completion.filterText,d.textLabel)===0?d.score=C:(d.score=nTe(i,o,_,d.textLabel,d.labelLow,0),d.score[0]=C[0])}else{let C=l(i,o,_,d.textLabel,d.labelLow,0,!1);if(!C)continue;d.score=C}}d.idx=u,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?O9(e.length-.85,e,(u,d)=>u-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return bw._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return bw._compareCompletionItems(e,t)}}var t8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},GE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},n8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class YE{constructor(e,t,n,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}}function i8e(r,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function r8e(r,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let VH=class Cce{constructor(e,t,n,i,o,s,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=o,this._contextKeyService=s,this._configurationService=a,this._toDispose=new Nt,this._quickSuggestDelay=10,this._triggerCharacterListener=new Nt,this._triggerQuickSuggest=new uc,this._state=0,this._completionDisposables=new Nt,this._onDidCancel=new Fe,this._onDidTrigger=new Fe,this._onDidSuggest=new Fe,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new ln(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(em.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{this._onCursorChange(u)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){nr(this._triggerCharacterListener),nr([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of em.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let o=e.get(i);o||(o=new Set,o.add(WBe()),e.set(i,o)),o.add(n)}const t=n=>{if(!r8e(this._editor,this._contextKeyService,this._configurationService)||YE.shouldAutoTrigger(this._editor))return;if(!n){const s=this._editor.getPosition();n=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let i="";lx(n.charCodeAt(n.length-1))?Ca(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const o=e.get(i);if(o){const s=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:i},!!this._completionModel,o,s)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!em.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Ml.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!YE.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const i=e.getLineTokens(t.lineNumber),o=i.getStandardTokenType(i.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&o===0||n.comments&&o===1||n.strings&&o===2))return}i8e(this._editor,this._contextKeyService,this._configurationService)&&em.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new YE(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,i){var o;if(!this._editor.hasModel())return;const s=this._editor.getModel(),a=e.auto,l=new YE(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let u={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Ou;const d=this._editor.getOption(100);let h=1;switch(d){case"top":h=0;break;case"bottom":h=2;break}const{itemKind:p,showDeprecated:_}=Cce._createSuggestFilter(this._editor),C=cv.create(this._editorWorkerService,this._editor),S=pce(s,this._editor.getPosition(),new fP(h,p,n,_),u,this._requestToken.token);Promise.all([S,C]).then(([x,T])=>n8e(this,void 0,void 0,function*(){var k;if((k=this._requestToken)===null||k===void 0||k.dispose(),!this._editor.hasModel())return;let M=i==null?void 0:i.clipboardText;if(!M&&x.needsClipboard&&(M=yield this._clipboardService.readText()),this._state===0)return;const W=this._editor.getModel();let F=x.items;if(i){const z=mce(h);F=F.concat(i.items).sort(z)}const Q=new YE(W,this._editor.getPosition(),a,e.shy);this._completionModel=new bw(F,this._context.column,{leadingLineContent:Q.leadingLineContent,characterCountDelta:Q.column-this._context.column},T,this._editor.getOption(105),this._editor.getOption(100),M),this._completionDisposables.add(x.disposable),this._onNewContext(Q),this._reportDurationsTelemetry(x.durations)})).catch(ti)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const i=e.getOption(105);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Vr(e.leadingLineContent)!==Vr(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(em.all(this._editor.getModel()));for(let i of this._completionModel.allProvider)t.delete(i);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(YE.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};VH=t8e([GE(1,Fh),GE(2,QC),GE(3,Xv),GE(4,Qv),GE(5,Jn),GE(6,Jr)],VH);class OF{constructor(e,t){this._disposables=new Nt,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),i=n.length;let o=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const s=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(s.getValueLengthInRange(l)>OF._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}OF._maxSelectionLength=51200;var o8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},P7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class iq extends Dx{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=E("ddd","{0} ({1})",this._action.label,iq.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"")}}let HH=class{constructor(e,t,n,i){this._menuService=n,this._contextKeyService=i,this._menuDisposables=new Nt,this.element=ft(e,Lt(".suggest-status-bar"));const o=s=>s instanceof TC?t.createInstance(iq,s,void 0):void 0;this._leftActions=new Wv(this.element,{actionViewItemProvider:o}),this._rightActions=new Wv(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(UC,this._contextKeyService),t=()=>{const n=[],i=[];for(let[o,s]of e.getActions())o==="left"?n.push(...s):i.push(...s);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};HH=o8e([P7(1,xi),P7(2,XS),P7(3,Jn)],HH);const s8e=Be("symbolIcon.arrayForeground",{dark:An,light:An,hc:An},E("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),a8e=Be("symbolIcon.booleanForeground",{dark:An,light:An,hc:An},E("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),l8e=Be("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},E("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),u8e=Be("symbolIcon.colorForeground",{dark:An,light:An,hc:An},E("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),c8e=Be("symbolIcon.constantForeground",{dark:An,light:An,hc:An},E("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),d8e=Be("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},E("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),h8e=Be("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},E("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),f8e=Be("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},E("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),g8e=Be("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},E("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),p8e=Be("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},E("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),m8e=Be("symbolIcon.fileForeground",{dark:An,light:An,hc:An},E("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_8e=Be("symbolIcon.folderForeground",{dark:An,light:An,hc:An},E("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),v8e=Be("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},E("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b8e=Be("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},E("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C8e=Be("symbolIcon.keyForeground",{dark:An,light:An,hc:An},E("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),y8e=Be("symbolIcon.keywordForeground",{dark:An,light:An,hc:An},E("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),w8e=Be("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},E("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),S8e=Be("symbolIcon.moduleForeground",{dark:An,light:An,hc:An},E("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E8e=Be("symbolIcon.namespaceForeground",{dark:An,light:An,hc:An},E("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L8e=Be("symbolIcon.nullForeground",{dark:An,light:An,hc:An},E("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x8e=Be("symbolIcon.numberForeground",{dark:An,light:An,hc:An},E("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D8e=Be("symbolIcon.objectForeground",{dark:An,light:An,hc:An},E("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I8e=Be("symbolIcon.operatorForeground",{dark:An,light:An,hc:An},E("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k8e=Be("symbolIcon.packageForeground",{dark:An,light:An,hc:An},E("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T8e=Be("symbolIcon.propertyForeground",{dark:An,light:An,hc:An},E("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N8e=Be("symbolIcon.referenceForeground",{dark:An,light:An,hc:An},E("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),A8e=Be("symbolIcon.snippetForeground",{dark:An,light:An,hc:An},E("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),O8e=Be("symbolIcon.stringForeground",{dark:An,light:An,hc:An},E("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R8e=Be("symbolIcon.structForeground",{dark:An,light:An,hc:An},E("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M8e=Be("symbolIcon.textForeground",{dark:An,light:An,hc:An},E("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),P8e=Be("symbolIcon.typeParameterForeground",{dark:An,light:An,hc:An},E("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F8e=Be("symbolIcon.unitForeground",{dark:An,light:An,hc:An},E("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B8e=Be("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},E("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));mo((r,e)=>{const t=r.getColor(s8e);t&&e.addRule(`${Ae.symbolArray.cssSelector} { color: ${t}; }`);const n=r.getColor(a8e);n&&e.addRule(`${Ae.symbolBoolean.cssSelector} { color: ${n}; }`);const i=r.getColor(l8e);i&&e.addRule(`${Ae.symbolClass.cssSelector} { color: ${i}; }`);const o=r.getColor(w8e);o&&e.addRule(`${Ae.symbolMethod.cssSelector} { color: ${o}; }`);const s=r.getColor(u8e);s&&e.addRule(`${Ae.symbolColor.cssSelector} { color: ${s}; }`);const a=r.getColor(c8e);a&&e.addRule(`${Ae.symbolConstant.cssSelector} { color: ${a}; }`);const l=r.getColor(d8e);l&&e.addRule(`${Ae.symbolConstructor.cssSelector} { color: ${l}; }`);const u=r.getColor(h8e);u&&e.addRule(`
			${Ae.symbolValue.cssSelector},${Ae.symbolEnum.cssSelector} { color: ${u}; }`);const d=r.getColor(f8e);d&&e.addRule(`${Ae.symbolEnumMember.cssSelector} { color: ${d}; }`);const h=r.getColor(g8e);h&&e.addRule(`${Ae.symbolEvent.cssSelector} { color: ${h}; }`);const p=r.getColor(p8e);p&&e.addRule(`${Ae.symbolField.cssSelector} { color: ${p}; }`);const _=r.getColor(m8e);_&&e.addRule(`${Ae.symbolFile.cssSelector} { color: ${_}; }`);const C=r.getColor(_8e);C&&e.addRule(`${Ae.symbolFolder.cssSelector} { color: ${C}; }`);const S=r.getColor(v8e);S&&e.addRule(`${Ae.symbolFunction.cssSelector} { color: ${S}; }`);const x=r.getColor(b8e);x&&e.addRule(`${Ae.symbolInterface.cssSelector} { color: ${x}; }`);const T=r.getColor(C8e);T&&e.addRule(`${Ae.symbolKey.cssSelector} { color: ${T}; }`);const k=r.getColor(y8e);k&&e.addRule(`${Ae.symbolKeyword.cssSelector} { color: ${k}; }`);const M=r.getColor(S8e);M&&e.addRule(`${Ae.symbolModule.cssSelector} { color: ${M}; }`);const W=r.getColor(E8e);W&&e.addRule(`${Ae.symbolNamespace.cssSelector} { color: ${W}; }`);const F=r.getColor(L8e);F&&e.addRule(`${Ae.symbolNull.cssSelector} { color: ${F}; }`);const Q=r.getColor(x8e);Q&&e.addRule(`${Ae.symbolNumber.cssSelector} { color: ${Q}; }`);const z=r.getColor(D8e);z&&e.addRule(`${Ae.symbolObject.cssSelector} { color: ${z}; }`);const $=r.getColor(I8e);$&&e.addRule(`${Ae.symbolOperator.cssSelector} { color: ${$}; }`);const G=r.getColor(k8e);G&&e.addRule(`${Ae.symbolPackage.cssSelector} { color: ${G}; }`);const Y=r.getColor(T8e);Y&&e.addRule(`${Ae.symbolProperty.cssSelector} { color: ${Y}; }`);const I=r.getColor(N8e);I&&e.addRule(`${Ae.symbolReference.cssSelector} { color: ${I}; }`);const D=r.getColor(A8e);D&&e.addRule(`${Ae.symbolSnippet.cssSelector} { color: ${D}; }`);const O=r.getColor(O8e);O&&e.addRule(`${Ae.symbolString.cssSelector} { color: ${O}; }`);const V=r.getColor(R8e);V&&e.addRule(`${Ae.symbolStruct.cssSelector} { color: ${V}; }`);const j=r.getColor(M8e);j&&e.addRule(`${Ae.symbolText.cssSelector} { color: ${j}; }`);const ne=r.getColor(P8e);ne&&e.addRule(`${Ae.symbolTypeParameter.cssSelector} { color: ${ne}; }`);const re=r.getColor(F8e);re&&e.addRule(`${Ae.symbolUnit.cssSelector} { color: ${re}; }`);const se=r.getColor(B8e);se&&e.addRule(`${Ae.symbolVariable.cssSelector} { color: ${se}; }`)});class yce{constructor(){this._onDidWillResize=new Fe,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Fe,this.onDidResize=this._onDidResize.event,this._sashListener=new Nt,this._size=new fo(0,0),this._minSize=new fo(0,0),this._maxSize=new fo(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new eu(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new eu(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new eu(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:NM.North}),this._southSash=new eu(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:NM.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Sn.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Sn.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Sn.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Sn.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:o,width:s}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(i,Math.min(s,t));const a=new fo(t,e);fo.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var W8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},V8e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};function rq(r){return!!r&&!!(r.completion.documentation||r.completion.detail&&r.completion.detail!==r.completion.label)}let UH=class{constructor(e,t){this._editor=e,this._onDidClose=new Fe,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Fe,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Nt,this._renderDisposeable=new Nt,this._borderWidth=1,this._size=new fo(330,0),this.domNode=Lt(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Jb,{editor:e}),this._body=Lt(".body"),this._scrollbar=new y2(this._body,{}),ft(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ft(this._body,Lt(".header")),this._close=ft(this._header,Lt("span"+Ae.close.cssSelector)),this._close.title=E("details.close","Close"),this._type=ft(this._header,Lt("p.type")),this._docs=ft(this._body,Lt("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(Zg?nu.fontFamily:null),i=e.get(106)||t.fontSize,o=e.get(107)||t.lineHeight,s=t.fontWeight,a=`${i}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/i}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=E("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:o,documentation:s}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,s=new Zb().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!rq(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){const a=o.length>1e5?`${o.substr(0,1e5)}`:o;this._type.textContent=a,this._type.title=a,Lh(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else ya(this._type),this._type.title="",kc(this._type),this.domNode.classList.add("no-type");if(ya(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),ya(this._docs);const a=this._markdownRenderer.render(s);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new fo(e,t);fo.equals(n,this._size)||(this._size=n,C0e(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};UH=W8e([V8e(1,xi)],UH);class H8e{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Nt,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new yce,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,o=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(s=i.width-a.dimension.width,l=!0),a.north&&(o=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+o,left:n.left+s})}a.done&&(n=void 0,i=void 0,o=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const o=jP(document.body),s=this.widget.getLayoutInfo(),a=new fo(220,2*s.lineHeight),l=e.top,u=function(){const M=o.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),W=-s.borderWidth+e.left+e.width,F=new fo(M,o.height-e.top-s.borderHeight-s.verticalPadding),Q=F.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:l,left:W,fit:M-t.width,maxSizeTop:F,maxSizeBottom:Q,minSize:a.with(Math.min(M,a.width))}}(),d=function(){const M=e.left-s.borderWidth-s.horizontalPadding,W=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),F=new fo(M,o.height-e.top-s.borderHeight-s.verticalPadding),Q=F.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:l,left:W,fit:M-t.width,maxSizeTop:F,maxSizeBottom:Q,minSize:a.with(Math.min(M,a.width))}}(),h=function(){const M=e.left,W=-s.borderWidth+e.top+e.height,F=new fo(e.width-s.borderHeight,o.height-e.top-e.height-s.verticalPadding);return{top:W,left:M,fit:F.height-t.height,maxSizeBottom:F,maxSizeTop:F,minSize:a.with(F.width)}}(),p=[u,d,h],_=(i=p.find(M=>M.fit>=0))!==null&&i!==void 0?i:p.sort((M,W)=>W.fit-M.fit)[0],C=e.top+e.height-s.borderHeight;let S,x=t.height;const T=Math.max(_.maxSizeTop.height,_.maxSizeBottom.height);x>T&&(x=T);let k;n?x<=_.maxSizeTop.height?(S=!0,k=_.maxSizeTop):(S=!1,k=_.maxSizeBottom):x<=_.maxSizeBottom.height?(S=!1,k=_.maxSizeBottom):(S=!0,k=_.maxSizeTop),this._applyTopLeft({left:_.left,top:S?_.top:C-x}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!S,_===u,S,_!==u),this._resizable.minSize=_.minSize,this._resizable.maxSize=k,this._resizable.layout(x,Math.min(k.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Ob;(function(r){r[r.FILE=0]="FILE",r[r.FOLDER=1]="FOLDER",r[r.ROOT_FOLDER=2]="ROOT_FOLDER"})(Ob||(Ob={}));function dO(r,e,t,n){const i=n===Ob.ROOT_FOLDER?["rootfolder-icon"]:n===Ob.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===Si.data?o=AC.parseMetaData(t).get(AC.META_DATA_LABEL):o=wee(boe(t).toLowerCase()),n===Ob.FOLDER)i.push(`${o}-name-folder-icon`);else{if(o){if(i.push(`${o}-name-file-icon`),o.length<=255){const a=o.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const s=U8e(r,e,t);s&&i.push(`${wee(s)}-lang-file-icon`)}}return i}function U8e(r,e,t){if(!t)return null;let n=null;if(t.scheme===Si.data){const o=AC.parseMetaData(t).get(AC.META_DATA_MIME);o&&(n=e.getModeId(o))}else{const i=r.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==lD?n:e.getModeIdByFilepathOrFirstLine(t)}function wee(r){return r.replace(/[\11\12\14\15\40]/g,"/")}var z8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},F7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wk;function wce(r){return`suggest-aria-id:${r}`}const $8e=gl("suggest-more-info",Ae.chevronRight,E("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),j8e=new(wk=class lR{extract(e,t){if(e.textLabel.match(lR._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(lR._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=lR._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},wk._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,wk._regexStrict=new RegExp(`^${wk._regexRelaxed.source}$`,"i"),wk);let zH=class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=i,this._onDidToggleDetails=new Fe,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Nt,t.root=e,t.root.classList.add("show-file-icons"),t.icon=ft(e,Lt(".icon")),t.colorspan=ft(t.icon,Lt("span.colorspan"));const n=ft(e,Lt(".contents")),i=ft(n,Lt(".main"));t.iconContainer=ft(i,Lt(".icon-label.codicon")),t.left=ft(i,Lt("span.left")),t.right=ft(i,Lt("span.right")),t.iconLabel=new eP(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=ft(t.left,Lt("span.signature-label")),t.qualifierLabel=ft(t.left,Lt("span.qualifier-label")),t.detailsLabel=ft(t.right,Lt("span.details-label")),t.readMore=ft(t.right,Lt("span.readMore"+So.asCSSSelector($8e))),t.readMore.title=E("readMore","Read More");const o=()=>{const s=this._editor.getOptions(),a=s.get(43),l=a.getMassagedFontFamily(Zg?nu.fontFamily:null),u=a.fontFeatureSettings,d=s.get(106)||a.fontSize,h=s.get(107)||a.lineHeight,p=a.fontWeight,_=`${d}px`,C=`${h}px`;t.root.style.fontSize=_,t.root.style.fontWeight=p,i.style.fontFamily=l,i.style.fontFeatureSettings=u,i.style.lineHeight=C,t.icon.style.height=C,t.icon.style.width=C,t.readMore.style.height=C,t.readMore.style.width=C};return o(),t.disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(106)||s.hasChanged(107))&&o()})),t}renderElement(e,t,n){const{completion:i}=e;n.root.id=wce(t),n.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:V4(e.score)};let s=[];if(i.kind===19&&j8e.extract(e,s))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=s[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=dO(this._modelService,this._modeService,qn.from({scheme:"fake",path:e.textLabel}),Ob.FILE),l=dO(this._modelService,this._modeService,qn.from({scheme:"fake",path:i.detail}),Ob.FILE);o.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=Ire([dO(this._modelService,this._modeService,qn.from({scheme:"fake",path:e.textLabel}),Ob.FOLDER),dO(this._modelService,this._modeService,qn.from({scheme:"fake",path:i.detail}),Ob.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...rSe(i.kind).split(" ")));i.tags&&i.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=B7(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=B7(i.label.detail||""),n.detailsLabel.textContent=B7(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Lh(n.detailsLabel):kc(n.detailsLabel),rq(e)?(n.right.classList.add("can-expand-details"),Lh(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),kc(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};zH=z8e([F7(1,ua),F7(2,Bl),F7(3,Ho)],zH);function B7(r){return r.replace(/\r\n|\r|\n/g,"")}var q8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},K8e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const G8e=Be("editorSuggestWidget.selectedBackground",{dark:FO,light:FO,hc:FO},E("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));class Y8e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof xS}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(fo.is(n))return fo.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let MN=class $H{constructor(e,t,n,i,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new uc,this._disposables=new Nt,this._onDidSelect=new Fe,this._onDidFocus=new Fe,this._onDidHide=new Fe,this._onDidShow=new Fe,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Fe,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new yce,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Z8e(this,e),this._persistedSize=new Y8e(t,e);class s{constructor(_,C,S=!1,x=!1){this.persistedSize=_,this.currentSize=C,this.persistHeight=S,this.persistWidth=x}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(p=>{var _,C,S,x;if(this._resize(p.dimension.width,p.dimension.height),a&&(a.persistHeight=a.persistHeight||!!p.north||!!p.south,a.persistWidth=a.persistWidth||!!p.east||!!p.west),!!p.done){if(a){const{itemHeight:T,defaultSize:k}=this.getLayoutInfo(),M=Math.round(T/2);let{width:W,height:F}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-F)<=M)&&(F=(C=(_=a.persistedSize)===null||_===void 0?void 0:_.height)!==null&&C!==void 0?C:k.height),(!a.persistWidth||Math.abs(a.currentSize.width-W)<=M)&&(W=(x=(S=a.persistedSize)===null||S===void 0?void 0:S.width)!==null&&x!==void 0?x:k.width),this._persistedSize.store(new fo(W,F))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ft(this.element.domNode,Lt(".message")),this._listElement=ft(this.element.domNode,Lt(".tree"));const l=o.createInstance(UH,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new H8e(l,this.editor);const u=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);u();const d=o.createInstance(zH,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new t0("SuggestWidget",this._listElement,{getHeight:p=>this.getLayoutInfo().itemHeight,getTemplateId:p=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:p=>{if(p.isResolved&&this._isDetailsVisible()){const{documentation:_,detail:C}=p.completion,S=Nf("{0}{1}",C||"",_?typeof _=="string"?_:_.value:"");return E("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p.textLabel,S)}else return p.textLabel},getWidgetAriaLabel:()=>E("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=o.createInstance(HH,this.element.domNode);const h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);h(),this._disposables.add(_S(this._list,i,{listInactiveFocusBackground:G8e,listInactiveFocusOutline:Bc})),this._disposables.add(i.onDidColorThemeChange(p=>this._onThemeChange(p))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onTap(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onDidChangeSelection(p=>this._onListSelection(p))),this._disposables.add(this._list.onDidChangeFocus(p=>this._onListFocus(p))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(p=>{p.hasChanged(105)&&(h(),u())})),this._ctxSuggestWidgetVisible=Wi.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Wi.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Wi.MultipleSuggestions.bindTo(n),this._disposables.add(za(this._details.widget.domNode,"keydown",p=>{this._onDetailsKeydown.fire(p)})),this._disposables.add(this.editor.onMouseDown(p=>this._onEditorMouseDown(p)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=fl(o=>K8e(this,void 0,void 0,function*(){const s=tS(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);o.onCancellationRequested(()=>s.dispose());const a=yield n.resolve(o);return s.dispose(),a})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:wce(i)}))}).catch(ti)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:kc(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=$H.LOADING_MESSAGE,kc(this._listElement,this._status.element),Lh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=$H.NO_SUGGESTIONS_MESSAGE,kc(this._listElement,this._status.element),Lh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:kc(this._messageElement),Lh(this._listElement,this._status.element),this._show();break;case 4:kc(this._messageElement),Lh(this._listElement,this._status.element),this._show();break;case 5:kc(this._messageElement),Lh(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=tS(()=>this._setState(1),t)))}showSuggestions(e,t,n,i){var o,s;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(s=this._currentSuggestionDetails)===null||s===void 0||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(rq(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const o=jP(document.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,l=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new fo(l,a),this._contentWidget.setPreference(2);else{const u=o.width-s.borderHeight-2*s.horizontalPadding;l>u&&(l=u);const d=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:l,h=s.statusBarHeight+this._list.contentHeight+s.borderHeight,p=s.itemHeight+s.statusBarHeight,_=tu(this.editor.getDomNode()),C=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),S=_.top+C.top+C.height,x=Math.min(o.height-S-s.verticalPadding,h),T=_.top+C.top-s.verticalPadding,k=Math.min(T,h);let M=Math.min(Math.max(k,x)+s.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<p&&(a=p),a>M&&(a=M);const W=150;a>x||this._forceRenderingAbove&&T>W?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),M=k):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),M=x),this.element.preferredSize=new fo(d,s.defaultSize.height),this.element.maxSize=new fo(u,M),this.element.minSize=new fo(220,p),this._cappedHeight=a===h?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(43),t=Hg(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,o=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new fo(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};MN.LOADING_MESSAGE=E("suggestWidget.loading","Loading...");MN.NO_SUGGESTIONS_MESSAGE=E("suggestWidget.noSuggestions","No suggestions.");MN=q8e([hO(1,i0),hO(2,Jn),hO(3,Ho),hO(4,xi)],MN);class Z8e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new fo(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var X8e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class Q8e{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),o=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:le.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Jg=class Sce{constructor(e,t,n,i,o,s,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=o,this._logService=s,this._telemetryService=a,this._lineSuffix=new lc,this._toDispose=new Nt,this._selectors=new J8e(h=>h.priority),this._telemetryGate=0,this.editor=e,this.model=o.createInstance(VH,this.editor);const l=Wi.InsertMode.bindTo(i);l.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new kL(()=>{const h=this._instantiationService.createInstance(MN,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(x=>this._insertSuggestion(x,0),this));const p=new QBe(this.editor,h,x=>this._insertSuggestion(x,2));this._toDispose.add(p),this._toDispose.add(this.model.onDidSuggest(x=>{x.completionModel.items.length===0&&p.reset()}));const _=Wi.MakesTextEdit.bindTo(this._contextKeyService),C=Wi.HasInsertAndReplaceRange.bindTo(this._contextKeyService),S=Wi.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Hi(()=>{_.reset(),C.reset(),S.reset()})),this._toDispose.add(h.onDidFocus(({item:x})=>{const T=this.editor.getPosition(),k=x.editStart.column,M=T.column;let W=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!x.completion.additionalTextEdits&&!(x.completion.insertTextRules&4)&&M-k===x.completion.insertText.length&&(W=this.editor.getModel().getValueInRange({startLineNumber:T.lineNumber,startColumn:k,endLineNumber:T.lineNumber,endColumn:M})!==x.completion.insertText),_.set(W),C.set(!Ge.equals(x.editInsertEnd,x.editReplaceEnd)),S.set(!!x.provider.resolveCompletionItem||!!x.completion.documentation||x.completion.detail!==x.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(x=>{if(x.toKeybinding().equals(new eS(!0,!1,!1,!1,33))||ji&&x.toKeybinding().equals(new eS(!1,!1,!1,!0,33))){x.stopPropagation();return}x.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new kL(()=>this._toDispose.add(new OF(this.editor,this.model)))),this._alternatives=this._toDispose.add(new kL(()=>this._toDispose.add(new IS(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(RN,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new Q8e(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(!h.shy){let p=-1;for(const _ of this._selectors.itemsOrderedByPriorityDesc)if(p=_.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),p!==-1)break;p===-1&&(p=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items)),this.widget.value.showSuggestions(h.completionModel,p,h.isFrozen,h.auto)}})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let u=Wi.AcceptSuggestionsOnEnter.bindTo(i),d=()=>{const h=this.editor.getOption(1);u.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}static get(e){return e.getContribution(Sce.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),i=n.getAlternativeVersionId(),{item:o}=e,s=[],a=new Ou;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(o,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){const d=MC.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(h=>ss.replace(le.lift(h.range),h.text))),d.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){const d=new Ov(!0);let h;const p=n.onDidChangeContent(x=>{if(x.isFlush){a.cancel(),p.dispose();return}for(let T of x.changes){const k=le.getEndPosition(T.range);(!h||Ge.isBefore(k,h))&&(h=k)}});let _=t;t|=2;let C=!1,S=this.editor.onWillType(()=>{S.dispose(),C=!0,_&2||this.editor.pushUndoStop()});s.push(o.resolve(a.token).then(()=>{if(!o.completion.additionalTextEdits||a.token.isCancellationRequested||h&&o.completion.additionalTextEdits.some(T=>Ge.isBefore(h,le.getStartPosition(T.range))))return!1;C&&this.editor.pushUndoStop();const x=MC.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(T=>ss.replace(le.lift(T.range),T.text))),x.restoreRelativeVerticalPositionOfCursor(this.editor),(C||!(_&2))&&this.editor.pushUndoStop(),!0}).then(x=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",d.elapsed(),x),p.dispose(),S.dispose()}))}let{insertText:u}=o.completion;o.completion.insertTextRules&4||(u=TF.escape(u)),Ml.get(this.editor).insert(u,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===q2.id?this.model.trigger({auto:!0,shy:!1},!0):(s.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(ti)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,d=>{for(a.cancel();n.canUndo();){i!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(d,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(s).finally(()=>{this._reportSuggestionAcceptedTelemetry(n,e),this.model.clear(),a.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const i=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:i,basenameHash:xoe(Uf(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:Jye(e.uri)})}getOverwriteInfo(e,t){jr(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+s,overwriteAfter:o+a}}_alertCompletionItem(e){if(Ed(e.completion.additionalTextEdits)){let t=E("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Tl(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},i=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const s=this.editor.getPosition(),a=o.editStart.column,l=s.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:l})!==o.completion.insertText};Sn.once(this.model.onDidTrigger)(o=>{let s=[];Sn.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{nr(s),n()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(nr(s),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),u=a.items[l];if(!i(u)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:u,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Jg.ID="editor.contrib.suggestController";Jg=X8e([ZE(1,vce),ZE(2,Go),ZE(3,Jn),ZE(4,xi),ZE(5,Qv),ZE(6,Xv)],Jg);class J8e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class q2 extends gn{constructor(){super({id:q2.id,label:E("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Xt.and(Le.writable,Le.hasCompletionItemProvider),kbOpts:{kbExpr:Le.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=Jg.get(t);if(!i)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),i.triggerSuggest(void 0,o)}}q2.id="editor.action.triggerSuggest";br(Jg.ID,Jg);Wt(q2);const Gf=100+90,Pd=Fl.bindToContribution(Jg.get);Mt(new Pd({id:"acceptSelectedSuggestion",precondition:Wi.Visible,handler(r){r.acceptSelectedSuggestion(!0,!1)}}));Rl.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Xt.and(Wi.Visible,Le.textInputFocus),primary:2,weight:Gf});Rl.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Xt.and(Wi.Visible,Le.textInputFocus,Wi.AcceptSuggestionsOnEnter,Wi.MakesTextEdit),primary:3,weight:Gf});Au.appendMenuItem(UC,{command:{id:"acceptSelectedSuggestion",title:E("accept.insert","Insert")},group:"left",order:1,when:Wi.HasInsertAndReplaceRange.toNegated()});Au.appendMenuItem(UC,{command:{id:"acceptSelectedSuggestion",title:E("accept.insert","Insert")},group:"left",order:1,when:Xt.and(Wi.HasInsertAndReplaceRange,Wi.InsertMode.isEqualTo("insert"))});Au.appendMenuItem(UC,{command:{id:"acceptSelectedSuggestion",title:E("accept.replace","Replace")},group:"left",order:1,when:Xt.and(Wi.HasInsertAndReplaceRange,Wi.InsertMode.isEqualTo("replace"))});Mt(new Pd({id:"acceptAlternativeSelectedSuggestion",precondition:Xt.and(Wi.Visible,Le.textInputFocus),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:1027,secondary:[1026]},handler(r){r.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:UC,group:"left",order:2,when:Xt.and(Wi.HasInsertAndReplaceRange,Wi.InsertMode.isEqualTo("insert")),title:E("accept.replace","Replace")},{menuId:UC,group:"left",order:2,when:Xt.and(Wi.HasInsertAndReplaceRange,Wi.InsertMode.isEqualTo("replace")),title:E("accept.insert","Insert")}]}));Yi.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Mt(new Pd({id:"hideSuggestWidget",precondition:Wi.Visible,handler:r=>r.cancelSuggestWidget(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:9,secondary:[1033]}}));Mt(new Pd({id:"selectNextSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectNextSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Mt(new Pd({id:"selectNextPageSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectNextPageSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:12,secondary:[2060]}}));Mt(new Pd({id:"selectLastSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectLastSuggestion()}));Mt(new Pd({id:"selectPrevSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectPrevSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Mt(new Pd({id:"selectPrevPageSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectPrevPageSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:11,secondary:[2059]}}));Mt(new Pd({id:"selectFirstSuggestion",precondition:Xt.and(Wi.Visible,Wi.MultipleSuggestions),handler:r=>r.selectFirstSuggestion()}));Mt(new Pd({id:"toggleSuggestionDetails",precondition:Wi.Visible,handler:r=>r.toggleSuggestionDetails(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:UC,group:"right",order:1,when:Xt.and(Wi.DetailsVisible,Wi.CanResolve),title:E("detail.more","show less")},{menuId:UC,group:"right",order:1,when:Xt.and(Wi.DetailsVisible.toNegated(),Wi.CanResolve),title:E("detail.less","show more")}]}));Mt(new Pd({id:"toggleExplainMode",precondition:Wi.Visible,handler:r=>r.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));Mt(new Pd({id:"toggleSuggestionFocus",precondition:Wi.Visible,handler:r=>r.toggleSuggestionFocus(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:2570,mac:{primary:778}}}));Mt(new Pd({id:"insertBestCompletion",precondition:Xt.and(Le.textInputFocus,Xt.equals("config.editor.tabCompletion","on"),RN.AtEnd,Wi.Visible.toNegated(),IS.OtherSuggestions.toNegated(),Ml.InSnippetMode.toNegated()),handler:(r,e)=>{r.triggerSuggestAndAcceptBest(Oc(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Gf,primary:2}}));Mt(new Pd({id:"insertNextSuggestion",precondition:Xt.and(Le.textInputFocus,Xt.equals("config.editor.tabCompletion","on"),IS.OtherSuggestions,Wi.Visible.toNegated(),Ml.InSnippetMode.toNegated()),handler:r=>r.acceptNextSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:2}}));Mt(new Pd({id:"insertPrevSuggestion",precondition:Xt.and(Le.textInputFocus,Xt.equals("config.editor.tabCompletion","on"),IS.OtherSuggestions,Wi.Visible.toNegated(),Ml.InSnippetMode.toNegated()),handler:r=>r.acceptPrevSuggestion(),kbOpts:{weight:Gf,kbExpr:Le.textInputFocus,primary:1026}}));Wt(class extends gn{constructor(){super({id:"editor.action.resetSuggestSize",label:E("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(r,e){Jg.get(e).resetWidgetSize()}});function e7e(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}function t7e(r,e){return(t,n)=>e(r(t),r(n))}function n7e(){return(r,e)=>r-e}function i7e(r,e){let t;for(const n of r)(t===void 0||e(n,t)>0)&&(t=n);return t}class r7e extends ot{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new Xr(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Jg.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(s,a,l)=>{const u=this.editor.getModel(),d=hP(u,this.suggestControllerPreselector());if(!d)return-1;const h=Ge.lift(a),p=l.map((C,S)=>{const x=See(n,h,C,this.isShiftKeyPressed),T=hP(u,x==null?void 0:x.normalizedInlineCompletion);if(!T)return;const k=o7e(d.range,T.range)&&d.text.startsWith(T.text);return{index:S,valid:k,prefixLength:T.text.length,suggestItem:C}}).filter(C=>C&&C.valid),_=i7e(p,t7e(C=>C.prefixLength,n7e()));return _?_.index:-1}}));let i=!1;const o=()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Sn.once(n.model.onDidTrigger)(s=>{o()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;s7e(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Jg.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return See(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Jg.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Jg.get(this.editor);e&&e.forceRenderingAbove()}}function o7e(r,e){return e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&(e.endLineNumber<r.endLineNumber||e.endLineNumber===r.endLineNumber&&e.endColumn<=r.endColumn)}function s7e(r,e){return r===e?!0:!r||!e?!1:r.completionItemKind===e.completionItemKind&&r.isSnippetText===e.isSnippetText&&bBe(r.normalizedInlineCompletion,e.normalizedInlineCompletion)}function See(r,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:le.fromPositions(e,e),text:""}};let{insertText:i}=t.completion,o=!1;if(t.completion.insertTextRules&4){const a=new TF().parse(i),l=r.editor.getModel();if(a.children.length>100)return;rv.adjustWhitespace(l,e,a,!0,!0),i=a.toString(),o=!0}const s=r.getOverwriteInfo(t,n);return{isSnippetText:o,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:i,range:le.fromPositions(e.delta(0,-s.overwriteBefore),e.delta(0,Math.max(s.overwriteAfter,0)))}}}var Eee=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class a7e extends cce{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new r7e(this.editor,()=>{var n,i;return(i=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||i===void 0?void 0:i.toLiveInlineCompletion()})),this.updateOperation=this._register(new lc),this.updateCacheSoon=this._register(new Xr(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const i=this.ghostText;i&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,l7e(i.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Hi(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return Eee(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),i=fl(s=>Eee(this,void 0,void 0,function*(){let a;try{a=yield fce(n,this.editor.getModel(),{triggerKind:If.Automatic,selectedSuggestionInfo:t},s)}catch(l){ti(l);return}s.isCancellationRequested||(this.cache.setValue(this.editor,a,If.Automatic),this.onDidChangeEmitter.fire())})),o=new hce(i,If.Automatic);this.updateOperation.value=o,yield i,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),o=hP(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),s=this.suggestionInlineCompletionSource.state,a=hP(this.editor.getModel(),(n=s==null?void 0:s.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),l=o&&a&&o.text.startsWith(a.text)&&o.range.equalsRange(a.range);if(!i&&!l)return;const u=l?o:a||o,d=l?u.text.length-a.text.length:0;return this.toGhostText(u,d)}toGhostText(e,t){const n=this.editor.getOptions().get(105).previewMode;return e?dce(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new uce(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}function l7e(r){return r.reduce((e,t)=>e+t,0)}var u7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},c7e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},d7e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class h7e extends ot{constructor(){super(...arguments),this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new lc)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?e7e(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let jH=class extends h7e{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new f7e),this.suggestWidgetAdapterModel=this._register(new a7e(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new FH(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new Ge(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(If.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return d7e(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};jH=u7e([c7e(1,Go)],jH);class f7e extends ot{constructor(){super(...arguments),this.onDidChangeEmitter=new Fe,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new lc)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new LBe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var g7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Lee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},W7;const xee=(W7=window.trustedTypes)===null||W7===void 0?void 0:W7.createPolicy("editorGhostText",{createHTML:r=>r});let qH=class extends ot{constructor(e,t,n,i){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(p7e,this.editor)),this.additionalLinesWidget=this._register(new m7e(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(104)||o.hasChanged(87)||o.hasChanged(82)||o.hasChanged(44)||o.hasChanged(43)||o.hasChanged(58))&&this.update()})),this._register(Hi(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,i=new Array;function o(u,d){if(i.length>0){const h=i[i.length-1];d&&h.decorations.push(new Th(h.content.length+1,h.content.length+1+u[0].length,d,0)),h.content+=u[0],u=u.slice(1)}for(const h of u)i.push({content:h,decorations:d?[new Th(1,h.length+1,d,0)]:[]})}const s=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const u of t.parts){let d=u.lines;a===void 0?(n.push({column:u.column,text:d[0],preview:u.preview}),d=d.slice(1)):o([s.substring(l,u.column-1)],void 0),d.length>0&&(o(d,"ghost-text"),a===void 0&&u.column<=s.length&&(a=u.column)),l=u.column-1}a!==void 0&&o([s.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:s.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),t.parts.some(u=>u.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new Ge(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const i=this.editor.getOption(43),o=document.createElement("div");o.className="suggest-preview-additional-widget",ac.applyFontInfoSlow(o,i);const s=document.createElement("span");s.className="content-spacer",s.append(t),o.append(s);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("  "),o.append(a);const l=new Nt,u=document.createElement("div");return u.className="button suggest-preview-text",u.append(`+${n} lines`),l.add(za(u,"mousedown",d=>{var h;(h=this.model)===null||h===void 0||h.setExpanded(!0),d.preventDefault(),this.editor.focus()})),o.append(u),new v7e(this.editor,e,o,l)}};qH=g7e([Lee(2,xi),Lee(3,Bl)],qH);class p7e{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Nt}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const o=new Array;n&&o.push({range:le.fromPositions(new Ge(e,n.column),new Ge(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(s=>({range:le.fromPositions(new Ge(e,s.column)),options:{description:"ghost-text",after:{content:s.text,inlineClassName:s.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(o))}}class m7e{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:o}=i.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");_7e(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function _7e(r,e,t,n,i){const o=n.get(29),s=n.get(104),a="none",l=n.get(82),u=n.get(44),d=n.get(43),h=n.get(58),p=cS(1e4);p.appendASCIIString('<div class="suggest-preview-text">');for(let S=0,x=t.length;S<x;S++){const T=t[S],k=T.content;p.appendASCIIString('<div class="view-line'),p.appendASCIIString('" style="top:'),p.appendASCIIString(String(S*h)),p.appendASCIIString('px;width:1000000px;">');const M=Lz(k),W=YP(k),F=Ua.createEmpty(k,i);g4(new tE(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,k,!1,M,W,0,F,T.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,s,a,l,u!==Dh.OFF,null),p),p.appendASCIIString("</div>")}p.appendASCIIString("</div>"),ac.applyFontInfoSlow(r,d);const _=p.build(),C=xee?xee.createHTML(_):_;r.innerHTML=C}class v7e extends ot{constructor(e,t,n,i){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(Hi(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}mo((r,e)=>{const t=r.getColor(LEe);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=r.getColor(xEe);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const i=r.getColor(EEe);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var Ece=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KH=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},RF=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let $a=class Lce extends ot{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new lc),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Lce.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(GH,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return RF(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};$a.inlineSuggestionVisible=new _n("inlineSuggestionVisible",!1,E("inlineSuggestionVisible","Whether an inline suggestion is visible"));$a.inlineSuggestionHasIndentation=new _n("inlineSuggestionHasIndentation",!1,E("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));$a.inlineSuggestionHasIndentationLessThanTabSize=new _n("inlineSuggestionHasIndentationLessThanTabSize",!0,E("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));$a.ID="editor.contrib.ghostTextController";$a=Ece([KH(1,xi)],$a);class b7e{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=$a.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=$a.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=$a.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let GH=class extends ot{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new b7e(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(jH,this.editor)),this.widget=this._register(this.instantiationService.createInstance(qH,this.editor,this.model)),this._register(Hi(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:o,lines:s}=i.parts[0],a=s[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(o<=l){let d=sc(a);d===-1&&(d=a.length-1),t=d>0;const h=this.editor.getModel().getOptions().tabSize;n=ho.visibleColumnFromColumn(a,d+1,h)<h}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};GH=Ece([KH(1,xi),KH(2,Jn)],GH);const xce=Fl.bindToContribution($a.get),PN=new xce({id:lce,precondition:$a.inlineSuggestionVisible,handler(r){r.commit(),r.editor.focus()}});Mt(PN);Rl.registerKeybindingRule({primary:2,weight:200,id:PN.id,when:Xt.and(PN.precondition,Le.tabMovesFocus.toNegated(),$a.inlineSuggestionHasIndentationLessThanTabSize)});Mt(new xce({id:"editor.action.inlineSuggest.hide",precondition:$a.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(r){r.hide()}}));class Tx extends gn{constructor(){super({id:Tx.ID,label:E("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Xt.and(Le.writable,$a.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return RF(this,void 0,void 0,function*(){const n=$a.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}Tx.ID="editor.action.inlineSuggest.showNext";class Nx extends gn{constructor(){super({id:Nx.ID,label:E("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Xt.and(Le.writable,$a.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return RF(this,void 0,void 0,function*(){const n=$a.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}Nx.ID="editor.action.inlineSuggest.showPrevious";class C7e extends gn{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:E("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:Le.writable})}run(e,t){return RF(this,void 0,void 0,function*(){const n=$a.get(t);n&&n.trigger()})}}br($a.ID,$a);Wt(C7e);Wt(Tx);Wt(Nx);var y7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XE=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};class w7e{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let YH=class{constructor(e,t,n,i,o,s,a,l){this._editor=e,this._hover=t,this._commandService=n,this._menuService=i,this._contextKeyService=o,this._modeService=s,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=$a.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new k7(1e3,this,le.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new k7(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new k7(1e3,this,e.target.range):null}computeSync(e,t){const n=$a.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new w7e(this,e.range,n)]:[]}renderHoverParts(e,t,n){const i=new Nt,o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,i);const s=i.add(this._menuService.createMenu(wn.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:E("showNextInlineSuggestion","Next"),commandId:Tx.ID,run:()=>this._commandService.executeCommand(Tx.ID)}),l=n.addAction({label:E("showPreviousInlineSuggestion","Previous"),commandId:Nx.ID,run:()=>this._commandService.executeCommand(Nx.ID)});n.addAction({label:E("acceptInlineSuggestion","Accept"),commandId:PN.id,run:()=>this._commandService.executeCommand(PN.id)});const u=[a,l];for(const d of u)d.setEnabled(!1);o.hasMultipleSuggestions().then(d=>{for(const h of u)h.setEnabled(d)});for(const[d,h]of s.getActions())for(const p of h)p instanceof TC&&n.addAction({label:p.label,commandId:p.item.id,run:()=>this._commandService.executeCommand(p.item.id)});return i}renderScreenReaderText(e,t,n){var i,o;const s=Lt,a=s("div.hover-row.markdown-hover"),l=ft(a,s("div.hover-contents")),u=n.add(new Jb({editor:this._editor},this._modeService,this._openerService)),d=p=>{n.add(u.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const _=E("inlineSuggestionFollows","Suggestion:"),C=n.add(u.render(new Zb().appendText(_).appendCodeblock("text",p)));l.replaceChildren(C.element)},h=(o=(i=e.controller.activeModel)===null||i===void 0?void 0:i.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(h){const p=this._editor.getModel().getLineContent(h.lineNumber);d(h.renderForScreenReader(p))}t.appendChild(a)}};YH=y7e([XE(2,Go),XE(3,XS),XE(4,Jn),XE(5,Bl),XE(6,Nd),XE(7,Uc)],YH);var S7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},E7e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let ZH=class extends ot{constructor(e,t,n={},i){var o;super(),this._link=t,this._enabled=!0,this.el=ft(e,Lt("a.monaco-link",{tabIndex:(o=t.tabIndex)!==null&&o!==void 0?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const s=this._register(new Hr(this.el,"click")),a=this._register(new Hr(this.el,"keypress")),l=Sn.chain(a.event).map(h=>new Oo(h)).filter(h=>h.keyCode===3).event,u=this._register(new Hr(this.el,co.Tap)).event;this._register(Or.addTarget(this.el));const d=Sn.any(s.event,l,u);this._register(d(h=>{this.enabled&&(xr.stop(h,!0),n!=null&&n.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};ZH=S7e([E7e(3,Nd)],ZH);mo((r,e)=>{const t=r.getColor(a4);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=r.getColor(l4);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var Dce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ice=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const L7e=26;let XH=class extends ot{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(QH))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,L7e)}};XH=Dce([Ice(1,xi)],XH);let QH=class extends ot{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Jb,{}),this.element=Lt("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=Lt("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){ya(this.element)}show(e){ya(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=ft(this.element,Lt("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(Lt(`div${So.asCSSSelector(e.icon)}`));const i=ft(this.element,Lt("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=ft(this.element,Lt("div.message-actions-container")),e.actions)for(const s of e.actions)this._register(this.instantiationService.createInstance(ZH,this.messageActionsContainer,Object.assign(Object.assign({},s),{tabIndex:-1}),{}));const o=ft(this.element,Lt("div.action-container"));this.actionBar=this._register(new Wv(o)),this.actionBar.push(this._register(new Of("banner.close","Close Banner",So.asClassName(wse),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};QH=Dce([Ice(0,xi)],QH);var oq=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},sm=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const x7e=gl("extensions-warning-message",Ae.warning,E("warningIcon","Icon shown with a warning message in the extensions editor."));let Ax=class extends ot{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const s=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=s)a={message:E("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new vD};else if(o.ambiguousCharacterCount>=s)a={message:E("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new mD};else if(o.invisibleCharacterCount>=s)a={message:E("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new _D};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:x7e,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(XH,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(112),this._register(n.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(112)&&(this._options=e.getOption(112),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=D7e(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new JH(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new I7e(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};Ax.ID="editor.contrib.unicodeHighlighter";Ax=oq([XL(1,Fh),XL(2,Vae),XL(3,xi)],Ax);function D7e(r,e){var t;return{nonBasicASCII:e.nonBasicASCII===tv?!r:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===tv?!r:e.includeComments,allowedCharacters:(t=e.allowedCharacters)!==null&&t!==void 0?t:{}}}let JH=class extends ot{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new Xr(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:this._options.includeComments?pP:gP});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e);if(!S$(t,{range:n,options:this._options.includeComments?pP:gP,id:e,ownerId:0}))return null;const i=t.getValueInRange(n);return{reason:kce(i,this._options)}}};JH=oq([XL(3,Fh)],JH);class I7e extends ot{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new Xr(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const o=R$.computeUnicodeHighlights(this._model,this._options,i);for(const s of o.ranges)n.ranges.push(s);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||o.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:this._options.includeComments?pP:gP});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),i=t.getValueInRange(n);return S$(t,{range:n,options:this._options.includeComments?pP:gP,id:e,ownerId:0})?{reason:kce(i,this._options)}:null}}let eU=class{constructor(e,t,n,i){this._editor=e,this._hover=t,this._modeService=n,this._openerService=i}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(Ax.ID),o=[];let s=300;for(const a of t){let h=function(T){let k=`\`U+${T.toString(16).padStart(4,"0")}\``;return Fb.isInvisibleCharacter(T)||(k+=` "${`${k7e(T)}`}"`),k};const l=i.getDecorationInfo(a.id);if(!l)continue;const d=n.getValueInRange(a.range).codePointAt(0),p=h(d);let _;switch(l.reason.kind){case 0:_=E("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",p,h(l.reason.confusableWith.codePointAt(0)));break;case 1:_=E("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",p);break;case 2:_=E("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",p);break}const C={codePoint:d,reason:l.reason.kind},S=E("unicodeHighlight.adjustSettings","Adjust settings"),x=[{value:`${_} [${S}](command:${K2.ID}?${encodeURIComponent(JSON.stringify(C))})`,isTrusted:!0}];o.push(new Kk(this,a.range,x,s++))}return o}renderHoverParts(e,t,n){return nce(e,t,this._editor,this._hover,this._modeService,this._openerService)}};eU=oq([XL(2,Bl),XL(3,Nd)],eU);function k7e(r){return r===96?"`` ` ``":"`"+String.fromCodePoint(r)+"`"}function kce(r,e){return R$.computeUnicodeHighlightReason(r,e)}const gP=pi.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Vo(ZCe),position:kd.Center},minimap:{color:Vo(tye),position:Ld.Inline},hideInCommentTokens:!0}),pP=pi.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Vo(c4),position:kd.Center},minimap:{color:Vo($z),position:Ld.Inline}});class mD extends gn{constructor(){super({id:mD.ID,label:E("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=E("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return sm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(Jr);i&&this.runAction(i)})}runAction(e){return sm(this,void 0,void 0,function*(){yield e.updateValue(hv.ambiguousCharacters,!1,1)})}}mD.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class _D extends gn{constructor(){super({id:_D.ID,label:E("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=E("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return sm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(Jr);i&&this.runAction(i)})}runAction(e){return sm(this,void 0,void 0,function*(){yield e.updateValue(hv.invisibleCharacters,!1,1)})}}_D.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class vD extends gn{constructor(){super({id:vD.ID,label:E("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=E("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return sm(this,void 0,void 0,function*(){let i=e==null?void 0:e.get(Jr);i&&this.runAction(i)})}runAction(e){return sm(this,void 0,void 0,function*(){yield e.updateValue(hv.nonBasicASCII,!1,1)})}}vD.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class K2 extends gn{constructor(){super({id:K2.ID,label:E("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return sm(this,void 0,void 0,function*(){const{codePoint:i,reason:o}=n,s=String.fromCodePoint(i),a=e.get(Kf),l=e.get(Jr);function u(p){return Fb.isInvisibleCharacter(p)?E("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",`U+${p.toString(16)}`):E("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`U+${p.toString(16)} "${s}"`)}const d=[{label:u(i),run:()=>T7e(l,[i])}];if(o===0){const p=new mD;d.push({label:p.label,run:()=>sm(this,void 0,void 0,function*(){return p.runAction(l)})})}else if(o===1){const p=new _D;d.push({label:p.label,run:()=>sm(this,void 0,void 0,function*(){return p.runAction(l)})})}else if(o===2){const p=new vD;d.push({label:p.label,run:()=>sm(this,void 0,void 0,function*(){return p.runAction(l)})})}else N7e(o);const h=yield a.pick(d,{title:E("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});h&&(yield h.run())})}}K2.ID="editor.action.unicodeHighlight.showExcludeOptions";function T7e(r,e){return sm(this,void 0,void 0,function*(){const t=r.getValue(hv.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield r.updateValue(hv.allowedCharacters,n,1)})}function N7e(r){throw new Error(`Unexpected value: ${r}`)}Wt(mD);Wt(_D);Wt(vD);Wt(K2);br(Ax.ID,Ax);var Tce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uR=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Dee=Lt;let tU=class extends ot{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Dee("div.hover-row.status-bar"),this.actionsElement=ft(this.hoverElement,Dee("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(Jj.render(this.actionsElement,e,n))}append(e){const t=ft(this.actionsElement,e);return this._hasContent=!0,t}};tU=Tce([uR(0,Ro)],tU);class mP{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),i=t.range.startLineNumber,o=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(s=>{if(s.options.isWholeLine)return!0;const a=s.range.startLineNumber===i?s.range.startColumn:1,l=s.range.endLineNumber===i?s.range.endColumn:o;if(s.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Ba.EMPTY;const n=mP._getLineDecorations(this._editor,t);return Ba.merge(this._participants.map(i=>this._computeAsync(i,n,t,e)))}_computeAsync(e,t,n,i){return e.computeAsync?e.computeAsync(n,t,i):Ba.EMPTY}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=mP._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return tD(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let dC=class nU extends Ph{constructor(e,t,n,i,o){super(),this._hoverVisibleKey=t,this._keybindingService=i,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[n.createInstance(DH,e,this),n.createInstance(kH,e,this),n.createInstance(YH,e,this),n.createInstance(eU,e,this),n.createInstance(PH,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new Yue),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,s=>{s.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._messagesAreComplete=!1,this._lastAnchor=null,this._computer=new mP(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new Xue(this._computer,s=>this._withResult(s,!0),null,s=>this._withResult(s,!1),this._editor.getOption(52).delay),this._register(za(this.getDomNode(),In.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(za(this.getDomNode(),In.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(es.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return nU.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&typeof i.horizontalDistanceToText=="number"&&i.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const i of this._participants)if(typeof i.suggestHoverAnchor=="function"){const o=i.suggestHoverAnchor(e);o&&n.push(o)}if(this._shouldShowAt(e)&&e.target.range){const o=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new le(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new GJ(0,o))}return n.length===0?!1:(n.sort((i,o)=>o.priority-i.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Wi.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new GJ(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const i=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(i.length===0)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._messagesAreComplete=t,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,i=t[0].range,o=null,s=document.createDocumentFragment();const a=new Nt,l=new Map;for(const d of t)n=Math.min(n,d.range.startColumn),i=le.plusRange(i,d.range),d.forceShowAtRange&&(o=d.range),l.has(d.owner)||l.set(d.owner,[]),l.get(d.owner).push(d);const u=a.add(new tU(this._keybindingService));for(const d of this._participants)if(l.has(d)){const h=l.get(d);a.add(d.renderHoverParts(h,s,u))}u.hasContent&&s.appendChild(u.hoverElement),this._renderDisposable=a,s.hasChildNodes()&&(o?this._showAt(o.getStartPosition(),o,this._shouldFocus):this._showAt(new Ge(e.range.startLineNumber,n),i,this._shouldFocus),this._updateContents(s)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,i?[{range:i,options:nU._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};dC.ID="editor.contrib.modesContentHoverWidget";dC._DECORATION_OPTIONS=pi.register({description:"content-hover-highlight",className:"hoverHighlight"});dC=Tce([uR(2,xi),uR(3,Ro),uR(4,Jn)],dC);const Iee=Lt;class A7e{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=i=>({value:i}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const o=i.options.glyphMarginHoverMessage;!o||SN(o)||n.push(...Az(o).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class Tw extends Ph{constructor(e,t,n=T2e){super(),this._renderDisposeables=this._register(new Nt),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new Yue),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Jb({editor:this._editor},t,n)),this._computer=new A7e(this._editor),this._hoverOperation=new Xue(this._computer,i=>this._withResult(i),void 0,i=>this._withResult(i),300),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Tw.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),o=this._editor.getOption(58),s=this._hover.containerDomNode.clientHeight,a=n-i-(s-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const o=Iee("div.hover-row.markdown-hover"),s=ft(o,Iee("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));s.appendChild(a.element),n.appendChild(o)}this._updateContents(n),this._showAt(e)}}Tw.ID="editor.contrib.modesGlyphHoverWidget";var O7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fO=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let zC=class Nce{constructor(e,t,n,i,o){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=i,this._toUnhook=new Nt,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=Le.hoverVisible.bindTo(o)}static get(e){return e.getContribution(Nce.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===dC.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===Tw.ID||(t!==12&&e.target.detail!==Tw.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,i,o,s;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===dC.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===dC.ID&&(!((i=this._contentWidget)===null||i===void 0)&&i.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===Tw.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a===2&&e.target.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._glyphWidget||(this._glyphWidget=new Tw(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(dC,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};zC.ID="editor.contrib.hover";zC=O7e([fO(1,xi),fO(2,Nd),fO(3,Bl),fO(4,Jn)],zC);class R7e extends gn{constructor(){super({id:"editor.action.showHover",label:E({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=zC.get(t);if(!n)return;const i=t.getPosition(),o=new le(i.lineNumber,i.column,i.lineNumber,i.column),s=t.getOption(2)===2;n.showContentHover(o,1,s)}}class M7e extends gn{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:E({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=zC.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const o=new le(i.lineNumber,i.column,i.lineNumber,i.column);DS.get(t).startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(o,1,!0)})}}br(zC.ID,zC);Wt(R7e);Wt(M7e);mo((r,e)=>{const t=r.getColor(dCe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=r.getColor(lS);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const i=r.getColor(zz);i&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`));const o=r.getColor(a4);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);const s=r.getColor(l4);s&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=r.getColor(Uz);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=r.getColor(hCe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const u=r.getColor(Ure);u&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${u}; }`)});class iU extends ot{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))||!e.target.range)return;const o=this._editor.getContribution(zC.ID);if(!o.isColorPickerVisible()){const s=new le(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);o.showContentHover(s,0,!1)}}}iU.ID="editor.contrib.colorContribution";br(iU.ID,iU);class hC{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,o=e.length;if(n+i>o)return!1;for(let s=0;s<i;s++){const a=e.charCodeAt(n+s),l=t.charCodeAt(s);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,o,s){const a=e.startLineNumber,l=e.startColumn,u=e.endLineNumber,d=e.endColumn,h=o.getLineContent(a),p=o.getLineContent(u);let _=h.lastIndexOf(t,l-1+t.length),C=p.indexOf(n,d-1-n.length);if(_!==-1&&C!==-1)if(a===u)h.substring(_+t.length,C).indexOf(n)>=0&&(_=-1,C=-1);else{const x=h.substring(_+t.length),T=p.substring(0,C);(x.indexOf(n)>=0||T.indexOf(n)>=0)&&(_=-1,C=-1)}let S;_!==-1&&C!==-1?(i&&_+t.length<h.length&&h.charCodeAt(_+t.length)===32&&(t=t+" "),i&&C>0&&p.charCodeAt(C-1)===32&&(n=" "+n,C-=1),S=hC._createRemoveBlockCommentOperations(new le(a,_+t.length+1,u,C+1),t,n)):(S=hC._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=S.length===1?n:null);for(const x of S)s.addTrackedEditOperation(x.range,x.text)}static _createRemoveBlockCommentOperations(e,t,n){let i=[];return le.isEmpty(e)?i.push(ss.delete(new le(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(ss.delete(new le(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(ss.delete(new le(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){let o=[];return le.isEmpty(e)?o.push(ss.replace(new le(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(o.push(ss.insert(new Ge(e.startLineNumber,e.startColumn),t+(i?" ":""))),o.push(ss.insert(new Ge(e.endLineNumber,e.endColumn),(i?" ":"")+n))),o}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(n);const o=e.getLanguageIdAtPosition(n,i),s=fr.getComments(o);!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],o=n[1];return new ln(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const i=n[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new ln(i.endLineNumber,i.endColumn+o,i.endLineNumber,i.endColumn+o)}}}class vb{constructor(e,t,n,i,o,s){this._selection=e,this._tabSize=t,this._type=n,this._insertSpace=i,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,n){e.tokenizeIfCheap(t);const i=e.getLanguageIdAtPosition(t,1),o=fr.getComments(i),s=o?o.lineCommentToken:null;if(!s)return null;let a=[];for(let l=0,u=n-t+1;l<u;l++)a[l]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,n,i,o,s,a){let l=!0,u;e===0?u=!0:e===1?u=!1:u=!0;for(let d=0,h=i.length;d<h;d++){const p=i[d],_=o+d;if(_===o&&a){p.ignore=!0;continue}const C=n.getLineContent(_),S=sc(C);if(S===-1){p.ignore=s,p.commentStrOffset=C.length;continue}if(l=!1,p.ignore=!1,p.commentStrOffset=S,u&&!hC._haystackHasNeedleAtOffset(C,p.commentStr,S)&&(e===0?u=!1:e===1||(p.ignore=!0)),u&&t){const x=S+p.commentStrLength;x<C.length&&C.charCodeAt(x)===32&&(p.commentStrLength+=1)}}if(e===0&&l){u=!1;for(let d=0,h=i.length;d<h;d++)i[d].ignore=!1}return{supported:!0,shouldRemoveComments:u,lines:i}}static _gatherPreflightData(e,t,n,i,o,s,a){const l=vb._gatherPreflightCommentStrings(n,i,o);return l===null?{supported:!1}:vb._analyzeLines(e,t,n,l,i,s,a)}_executeLineComments(e,t,n,i){let o;n.shouldRemoveComments?o=vb._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(vb._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const s=new Ge(i.positionLineNumber,i.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),le.isEmpty(o[a].range)&&le.getStartPosition(o[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let o=t.startLineNumber,s=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(o).lastIndexOf(n,a-1),u=e.getLineContent(s).indexOf(i,t.endColumn-1-n.length);return l!==-1&&u===-1&&(u=e.getLineContent(o).indexOf(i,l+n.length),s=o),l===-1&&u!==-1&&(l=e.getLineContent(s).lastIndexOf(n,u),o=s),t.isEmpty()&&(l===-1||u===-1)&&(l=e.getLineContent(o).indexOf(n),l!==-1&&(u=e.getLineContent(o).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+n.length)===32&&(n+=" "),u!==-1&&e.getLineContent(s).charCodeAt(u-1)===32&&(i=" "+i,u-=1),l!==-1&&u!==-1?hC._createRemoveBlockCommentOperations(new le(o,l+n.length+1,s,u+1),n,i):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let i=e.getLanguageIdAtPosition(n.startLineNumber,1),o=fr.getComments(i);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const s=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,s,a);if(!l){if(n.isEmpty()){const u=e.getLineContent(n.startLineNumber);let d=sc(u);d===-1&&(d=u.length),l=hC._createAddBlockCommentOperations(new le(n.startLineNumber,d+1,n.startLineNumber,u.length+1),s,a,this._insertSpace)}else l=hC._createAddBlockCommentOperations(new le(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),s,a,this._insertSpace);l.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(n);for(const u of l)t.addEditOperation(u.range,u.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new le(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=vb._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new ln(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let i=0,o=e.length;i<o;i++){const s=e[i];s.ignore||n.push(ss.delete(new le(t+i,s.commentStrOffset+1,t+i,s.commentStrOffset+s.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const i=this._insertSpace?" ":"";for(let o=0,s=e.length;o<s;o++){const a=e[o];a.ignore||n.push(ss.insert(new Ge(t+o,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let o=1073741824,s,a;for(let l=0,u=t.length;l<u;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(let p=0,_=t[l].commentStrOffset;h<o&&p<_;p++)h=vb.nextVisibleColumn(h,i,d.charCodeAt(p)===9,1);h<o&&(o=h)}o=Math.floor(o/i)*i;for(let l=0,u=t.length;l<u;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(s=0,a=t[l].commentStrOffset;h<o&&s<a;s++)h=vb.nextVisibleColumn(h,i,d.charCodeAt(s)===9,1);h>o?t[l].commentStrOffset=s-1:t[l].commentStrOffset=s}}}class sq extends gn{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],o=n.getOptions(),s=t.getOption(19),a=t.getSelections().map((u,d)=>({selection:u,index:d,ignoreFirstLine:!1}));a.sort((u,d)=>le.compareRangesUsingStarts(u.selection,d.selection));let l=a[0];for(let u=1;u<a.length;u++){const d=a[u];l.selection.endLineNumber===d.selection.startLineNumber&&(l.index<d.index?d.ignoreFirstLine=!0:(l.ignoreFirstLine=!0,l=d))}for(const u of a)i.push(new vb(u.selection,o.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,u.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class P7e extends sq{constructor(){super(0,{id:"editor.action.commentLine",label:E("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:wn.MenubarEditMenu,group:"5_insert",title:E({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class F7e extends sq{constructor(){super(1,{id:"editor.action.addCommentLine",label:E("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2081),weight:100}})}}class B7e extends sq{constructor(){super(2,{id:"editor.action.removeCommentLine",label:E("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2099),weight:100}})}}class W7e extends gn{constructor(){super({id:"editor.action.blockComment",label:E("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:wn.MenubarEditMenu,group:"5_insert",title:E({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const n=t.getOption(19),i=[],o=t.getSelections();for(const s of o)i.push(new hC(s,n.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}Wt(P7e);Wt(F7e);Wt(B7e);Wt(W7e);var V7e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Sk=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Ox=class Ace{constructor(e,t,n,i,o,s){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=o,this._menuService=s,this._toDispose=new Nt,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const l=this._contextViewService.getContextViewElement(),u=a.srcElement;u.shadowRoot&&DC(l)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(Ace.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?wn.SimpleEditorContext:wn.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),o=i.getActions({arg:e.uri});i.dispose();for(let s of o){const[,a]=s;let l=0;for(const u of a)if(u instanceof Tz){const d=this._getMenuActions(e,u.item.submenu);d.length>0&&(n.push(new KP(u.id,u.label,d)),l++)}else n.push(u),l++;l&&n.push(new ep)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=tu(this._editor.getDomNode()),a=s.left+o.left,l=s.top+o.top+o.height;t={x:a,y:l}}const i=this._editor.getOption(114)&&!Av;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{const s=this._keybindingFor(o);if(s)return new aN(o,o,{label:!0,keybinding:s.getLabel(),isMenu:!0});const a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new aN(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};Ox.ID="editor.contrib.contextmenu";Ox=V7e([Sk(1,XC),Sk(2,t1),Sk(3,Jn),Sk(4,Ro),Sk(5,XS)],Ox);class H7e extends gn{constructor(){super({id:"editor.action.showContextMenu",label:E("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:1092,weight:100}})}run(e,t){Ox.get(t).showContextMenu()}}br(Ox.ID,Ox);Wt(H7e);class V7{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}class H7{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class kS extends ot{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new V7(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new H7(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(kS.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new H7(new V7(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new H7(new V7(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}kS.ID="editor.contrib.cursorUndoRedoController";class U7e extends gn{constructor(){super({id:"cursorUndo",label:E("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:2099,weight:100}})}run(e,t,n){kS.get(t).cursorUndo()}}class z7e extends gn{constructor(){super({id:"cursorRedo",label:E("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){kS.get(t).cursorRedo()}}br(kS.ID,kS);Wt(U7e);Wt(z7e);class $7e{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new le(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new ln(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new ln(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new ln(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new ln(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new ln(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function QE(r){return ji?r.altKey:r.ctrlKey}class Hb extends ot{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(QE(e)&&(this._modifierPressed=!0),this._mouseDown&&QE(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(QE(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Hb.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let i=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}QE(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new Ge(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let i=this._editor.getSelection();if(i){const{selectionStartLineNumber:o,selectionStartColumn:s}=i;n=[new ln(o,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new ln(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(QE(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Hb.ID,new $7e(this._dragSelection,t,QE(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new le(e.lineNumber,e.column,e.lineNumber,e.column),options:Hb._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}Hb.ID="editor.contrib.dragAndDrop";Hb.TRIGGER_KEY_VALUE=ji?6:5;Hb._DECORATION_OPTIONS=pi.register({description:"dnd-target",className:"dnd-target"});br(Hb.ID,Hb);class xu{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===xu._FIND_MATCH_DECORATION||i===xu._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,o=this._decorations.length;i<o;i++){let s=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(s)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,xu._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,xu._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){let s=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);o=new le(o.startLineNumber,o.startColumn,s,a)}this._rangeHighlightDecorationId=i.addDecoration(o,xu._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=xu._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){i=xu._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),u=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/u));let h=e[0].range.startLineNumber,p=e[0].range.endLineNumber;for(let _=1,C=e.length;_<C;_++){const S=e[_].range;p+d>=S.startLineNumber?S.endLineNumber>p&&(p=S.endLineNumber):(o.push({range:new le(h,1,p,1),options:xu._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=S.startLineNumber,p=S.endLineNumber)}o.push({range:new le(h,1,p,1),options:xu._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,l=e.length;a<l;a++)s[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,xu._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}xu._CURRENT_FIND_MATCH_DECORATION=pi.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Vo(c4),position:kd.Center},minimap:{color:Vo($z),position:Ld.Inline}});xu._FIND_MATCH_DECORATION=pi.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Vo(c4),position:kd.Center},minimap:{color:Vo($z),position:Ld.Inline}});xu._FIND_MATCH_NO_OVERVIEW_DECORATION=pi.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});xu._FIND_MATCH_ONLY_OVERVIEW_DECORATION=pi.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Vo(c4),position:kd.Center}});xu._RANGE_HIGHLIGHT_DECORATION=pi.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});xu._FIND_SCOPE_DECORATION=pi.register({description:"find-scope",className:"findScope",isWholeLine:!0});class j7e{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let s=0;s<this._ranges.length;s++)n.push({range:this._ranges[s],text:this._replaceStrings[s]});n.sort((s,a)=>le.compareRangesUsingStarts(s.range,a.range));let i=[],o=n[0];for(let s=1;s<n.length;s++)o.range.endLineNumber===n[s].range.startLineNumber&&o.range.endColumn===n[s].range.startColumn?(o.range=o.range.plusRange(n[s].range),o.text=o.text+n[s].text):(i.push(o),o=n[s]);i.push(o);for(const s of i)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Oce(r,e){if(r&&r[0]!==""){const t=kee(r,e,"-"),n=kee(r,e,"_");return t&&!n?Tee(r,e,"-"):!t&&n?Tee(r,e,"_"):r[0].toUpperCase()===r[0]?e.toUpperCase():r[0].toLowerCase()===r[0]?e.toLowerCase():J0e(r[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):r[0][0].toUpperCase()!==r[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function kee(r,e,t){return r[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&r[0].split(t).length===e.split(t).length}function Tee(r,e,t){const n=e.split(t),i=r[0].split(t);let o="";return n.forEach((s,a)=>{o+=Oce([i[a]],s)+t}),o.slice(0,-1)}class Nee{constructor(e){this.staticValue=e,this.kind=0}}class q7e{constructor(e){this.pieces=e,this.kind=1}}class Rx{constructor(e){!e||e.length===0?this._state=new Nee(""):e.length===1&&e[0].staticValue!==null?this._state=new Nee(e[0].staticValue):this._state=new q7e(e)}static fromStaticValue(e){return new Rx([Kw.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Oce(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,o=this._state.pieces.length;i<o;i++){let s=this._state.pieces[i];if(s.staticValue!==null){n+=s.staticValue;continue}let a=Rx._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let l=[],u=s.caseOps.length,d=0;for(let h=0,p=a.length;h<p;h++){if(d>=u){l.push(a.slice(h));break}switch(s.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class Kw{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new Kw(e,-1,null)}static caseOps(e,t){return new Kw(null,e,t)}}class K7e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Kw.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Kw.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Kw.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Rx(this._result)}}function G7e(r){if(!r||r.length===0)return new Rx(null);let e=[],t=new K7e(r);for(let n=0,i=r.length;n<i;n++){let o=r.charCodeAt(n);if(o===92){if(n++,n>=i)break;let s=r.charCodeAt(n);switch(s){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(s));break}continue}if(o===36){if(n++,n>=i)break;let s=r.charCodeAt(n);if(s===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(s===48||s===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(n+1<i){let l=r.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const gE=new _n("findWidgetVisible",!1),MF=new _n("findInputFocussed",!1),aq=new _n("replaceInputFocussed",!1),gO={primary:545,mac:{primary:2593}},pO={primary:565,mac:{primary:2613}},mO={primary:560,mac:{primary:2608}},_O={primary:554,mac:{primary:2602}},vO={primary:558,mac:{primary:2606}},uo={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},fC=19999,Y7e=240;class ET{constructor(e,t){this._toDispose=new Nt,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new uc,this._decorations=new xu(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Xr(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,nr(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Y7e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new le(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let i=this._findMatches(n,!1,fC);this._decorations.set(i,n);const o=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(o);if(s===0&&i.length>0){const a=xre(i.map(l=>l.range),l=>le.compareRangesUsingStarts(l,o)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,o=this._editor.getModel();return t||i===1?(n===1?n=o.getLineCount():n--,i=o.getLineMaxColumn(n)):i--,new Ge(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<fC){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),i=ET._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());let{lineNumber:o,column:s}=e,a=this._editor.getModel(),l=new Ge(o,s),u=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(u&&u.range.isEmpty()&&u.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),u=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),!!u){if(!t&&!i.containsRange(u.range))return this._moveToPrevMatch(u.range.getStartPosition(),!0);this._setCurrentFindMatch(u.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,o=this._editor.getModel();return t||i===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,i=1):i++,new Ge(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<fC){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),s=ET._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:l}=e,u=this._editor.getModel(),d=new Ge(a,l),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),h?!i&&!s.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?G7e(this._state.replaceString):Rx.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let i=e.buildReplaceString(n.matches,this._state.preserveCase),o=new Il(t,i);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new Ge(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(o=>ET._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=fC?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new rw(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),o=i.getValue(1),s=i.getFullModelRange(),a=this._getReplacePattern();let l;const u=this._state.preserveCase;a.hasReplacementPatterns||u?l=o.replace(n,function(){return a.buildReplaceString(arguments,u)}):l=o.replace(n,a.buildReplaceString(null,u));let d=new g$(s,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let s=0,a=n.length;s<a;s++)i[s]=t.buildReplaceString(n[s].matches,this._state.preserveCase);let o=new j7e(this._editor.getSelection(),n.map(s=>s.range),i);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(o=>new ln(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),i=this._editor.getSelection();for(let o=0,s=n.length;o<s;o++)if(n[o].equalsRange(i)){n=[i].concat(n.slice(0,o)).concat(n.slice(o+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const Z7e={inputActiveOptionBorder:je.fromHex("#007ACC00"),inputActiveOptionForeground:je.fromHex("#FFFFFF"),inputActiveOptionBackground:je.fromHex("#0E639C50")};class G2 extends Ph{constructor(e){super(),this._onChange=this._register(new Fe),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Fe),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},Z7e),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Nc.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const X7e=E("caseDescription","Match Case"),Q7e=E("wordsDescription","Match Whole Word"),J7e=E("regexDescription","Use Regular Expression");class Rce extends G2{constructor(e){super({icon:Ae.caseSensitive,title:X7e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Mce extends G2{constructor(e){super({icon:Ae.wholeWord,title:Q7e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Pce extends G2{constructor(e){super({icon:Ae.regex,title:J7e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class PF extends Ph{constructor(e,t,n,i){super(),this._hideSoon=this._register(new Xr(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=i.getColorTheme().getColor(B9),s=i.getColorTheme().getColor(V9),a=i.getColorTheme().getColor(W9);this.caseSensitive=this._register(new Rce({appendTitle:this._keybindingLabelFor(uo.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Mce({appendTitle:this._keybindingLabelFor(uo.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Pce({appendTitle:this._keybindingLabelFor(uo.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let u=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,u=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,u=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,u=!0),!this._state.isRevealed&&u&&this._revealTemporarily()})),this._register(pz(this._domNode,l=>this._onMouseOut())),this._register(kt(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(i.getColorTheme()),this._register(i.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return PF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(B9),inputActiveOptionForeground:e.getColor(V9),inputActiveOptionBackground:e.getColor(W9)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}PF.ID="editor.contrib.findOptionsWidget";mo((r,e)=>{const t=r.getColor(pm);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=r.getColor(Wb);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const i=r.getColor(NC);i&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${i}; }`);const o=r.getColor(Ns);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function bO(r,e){return r===1?!0:r===2?!1:e}class e6e extends ot{constructor(){super(),this._onFindReplaceStateChange=this._register(new Fe),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return bO(this._isRegexOverride,this._isRegex)}get wholeWord(){return bO(this._wholeWordOverride,this._wholeWord)}get matchCase(){return bO(this._matchCaseOverride,this._matchCase)}get preserveCase(){return bO(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,o=!0),typeof n<"u"&&(le.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;let o={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const a=this.isRegex,l=this.wholeWord,u=this.matchCase,d=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(h=>{var p;return(p=this._searchScope)===null||p===void 0?void 0:p.some(_=>!le.equalsRange(_,h))})||(this._searchScope=e.searchScope,o.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,o.isRegex=!0),l!==this.wholeWord&&(s=!0,o.wholeWord=!0),u!==this.matchCase&&(s=!0,o.matchCase=!0),d!==this.preserveCase&&(s=!0,o.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=fC}}const t6e=E("defaultLabel","input");class n6e extends Ph{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new Fe),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Fe),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Fe),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Fe),this._onKeyUp=this._register(new Fe),this._onCaseSensitiveKeyDown=this._register(new Fe),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Fe),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||t6e,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const o=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",a=i.appendRegexLabel||"",l=i.history||[],u=!!i.flexibleHeight,d=!!i.flexibleWidth,h=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Pae(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:i.showHistoryHint,flexibleHeight:u,flexibleWidth:d,flexibleMaxHeight:h})),this.regex=this._register(new Pce({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(C=>{this._onRegexKeyDown.fire(C)})),this.wholeWords=this._register(new Mce({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Rce({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(C=>{this._onCaseSensitiveKeyDown.fire(C)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let p=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,C=>{if(C.equals(15)||C.equals(17)||C.equals(9)){let S=p.indexOf(document.activeElement);if(S>=0){let x=-1;C.equals(17)?x=(S+1)%p.length:C.equals(15)&&(S===0?x=p.length-1:x=S-1),C.equals(9)?(p[S].blur(),this.inputBox.focus()):x>=0&&p[x].focus(),xr.stop(C,!0)}}});let _=document.createElement("div");_.className="controls",_.style.display=this._showOptionButtons?"block":"none",_.appendChild(this.caseSensitive.domNode),_.appendChild(this.wholeWords.domNode),_.appendChild(this.regex.domNode),this.domNode.appendChild(_),e&&e.appendChild(this.domNode),this._register(kt(this.inputBox.inputElement,"compositionstart",C=>{this.imeSessionInProgress=!0})),this._register(kt(this.inputBox.inputElement,"compositionend",C=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,C=>this._onKeyDown.fire(C)),this.onkeyup(this.inputBox.inputElement,C=>this._onKeyUp.fire(C)),this.oninput(this.inputBox.inputElement,C=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,C=>this._onMouseDown.fire(C))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const i6e=E("defaultLabel","input"),r6e=E("label.preserveCaseCheckbox","Preserve Case");class o6e extends G2{constructor(e){super({icon:Ae.preserveCase,title:r6e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class s6e extends Ph{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Fe),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Fe),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Fe),this._onInput=this._register(new Fe),this._onKeyUp=this._register(new Fe),this._onPreserveCaseKeyDown=this._register(new Fe),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||i6e,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const o=i.appendPreserveCaseLabel||"",s=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Pae(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:s,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:u})),this.preserveCase=this._register(new o6e({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(p=>{this._onPreserveCaseKeyDown.fire(p)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let d=[this.preserveCase.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let _=d.indexOf(document.activeElement);if(_>=0){let C=-1;p.equals(17)?C=(_+1)%d.length:p.equals(15)&&(_===0?C=d.length-1:C=_-1),p.equals(9)?(d[_].blur(),this.inputBox.focus()):C>=0&&d[C].focus(),xr.stop(p,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Fce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Bce=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const FN="historyNavigationWidget",Wce="historyNavigationForwardsEnabled",Vce="historyNavigationBackwardsEnabled";function a6e(r,e,t){new _n(t,e).bindTo(r)}function l6e(r,e){return r.createScoped(e.target)}function Hce(r,e){return r.getContext(document.activeElement).getValue(e)}function Uce(r,e){const t=l6e(r,e);a6e(t,e,FN);const n=new _n(Wce,!0).bindTo(t),i=new _n(Vce,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:i}}let rU=class extends n6e{constructor(e,t,n,i,o=!1){super(e,t,o,n),this._register(Uce(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};rU=Fce([Bce(3,Jn)],rU);let oU=class extends s6e{constructor(e,t,n,i,o=!1){super(e,t,o,n),this._register(Uce(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};oU=Fce([Bce(3,Jn)],oU);Rl.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Xt.and(Xt.has(FN),Xt.equals(Vce,!0),Wi.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:r=>{const e=Hce(r.get(Jn),FN);e&&e.historyNavigator.showPreviousValue()}});Rl.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Xt.and(Xt.has(FN),Xt.equals(Wce,!0),Wi.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:r=>{const e=Hce(r.get(Jn),FN);e&&e.historyNavigator.showNextValue()}});function Aee(r){var e,t;return((e=r.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=r.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var u6e=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const c6e=gl("find-selection",Ae.selection,E("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Oee=gl("find-collapsed",Ae.chevronRight,E("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Ree=gl("find-expanded",Ae.chevronDown,E("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),d6e=gl("find-replace",Ae.replace,E("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),h6e=gl("find-replace-all",Ae.replaceAll,E("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),f6e=gl("find-previous-match",Ae.arrowUp,E("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),g6e=gl("find-next-match",Ae.arrowDown,E("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),p6e=E("label.find","Find"),m6e=E("placeholder.find","Find"),_6e=E("label.previousMatchButton","Previous Match"),v6e=E("label.nextMatchButton","Next Match"),b6e=E("label.toggleSelectionFind","Find in Selection"),C6e=E("label.closeButton","Close"),y6e=E("label.replace","Replace"),w6e=E("placeholder.replace","Replace"),S6e=E("label.replaceButton","Replace"),E6e=E("label.replaceAllButton","Replace All"),L6e=E("label.toggleReplaceButton","Toggle Replace"),x6e=E("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",fC),D6e=E("label.matchesLocation","{0} of {1}"),Mee=E("label.noResults","No results"),Z_=419,I6e=275,k6e=I6e-54;let Ek=69;const T6e=33,Pee="ctrlEnterReplaceAll.windows.donotask",Fee=ji?256:2048;class U7{constructor(e){this.afterLineNumber=e,this.heightInPx=T6e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Bee(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){r.stopPropagation();return}}function Wee(r,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){r.stopPropagation();return}}class FF extends Ph{constructor(e,t,n,i,o,s,a,l,u){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=o,this._contextKeyService=s,this._storageService=l,this._notificationService=u,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Pee,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Kb(500),this._register(Hi(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(130)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(35)){const h=this._codeEditor.getOption(35).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new U7(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>u6e(this,void 0,void 0,function*(){if(this._isVisible){let d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=MF.bindTo(s),this._findFocusTracker=this._register(ox(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=aq.bindTo(s),this._replaceFocusTracker=this._register(ox(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new U7(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return FF.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Bg(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,ti)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Ek+"px",this._state.matchesCount>=fC?this._matchesCount.title=x6e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=fC&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=Nf(D6e,n,t)}else e=Mee;this._matchesCount.appendChild(document.createTextNode(e)),Tl(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Ek=Math.max(Ek,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Mee)return n===""?E("ariaSearchNoResultEmpty","{0} found",e):E("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=E("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${i}`:i}return E("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=tu(n),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=i.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=Kie(this._domNode).left;s>l&&(t=!1);const u=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(u?u.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new U7(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===n.heightInPx)return;let s=o-n.heightInPx;n.heightInPx=o,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;n.heightInPx=o,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(B9),inputActiveOptionBackground:e.getColor(W9),inputActiveOptionForeground:e.getColor(V9),inputBackground:e.getColor(Pz),inputForeground:e.getColor(Fz),inputBorder:e.getColor(Bz),inputValidationInfoBackground:e.getColor(zre),inputValidationInfoForeground:e.getColor($re),inputValidationInfoBorder:e.getColor(jre),inputValidationWarningBackground:e.getColor(qre),inputValidationWarningForeground:e.getColor(Kre),inputValidationWarningBorder:e.getColor(Gre),inputValidationErrorBackground:e.getColor(Yre),inputValidationErrorForeground:e.getColor(Zre),inputValidationErrorBorder:e.getColor(Xre)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!fz(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let o=!1,s=!1,a=!1;if(this._resized&&Bg(this._domNode)>Z_){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=Bg(this._findInput.domNode);return}if(Z_+28+i>=n&&(s=!0),Z_+28+i-Ek>=n&&(a=!0),Z_+28+i-Ek>=n+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",s),!a&&!o&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Bg(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!le.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Fee|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Bee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Wee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Fee|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Ol&&fm&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(E("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Pee,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Bee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Wee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new rU(null,this._contextViewProvider,{width:k6e,label:p6e,placeholder:m6e,appendCaseSensitiveLabel:this._keybindingLabelFor(uo.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(uo.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(uo.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Aee(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Pc&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new JE({label:_6e+this._keybindingLabelFor(uo.PreviousMatchFindAction),icon:f6e,onTrigger:()=>{this._codeEditor.getAction(uo.PreviousMatchFindAction).run().then(void 0,ti)}})),this._nextBtn=this._register(new JE({label:v6e+this._keybindingLabelFor(uo.NextMatchFindAction),icon:g6e,onTrigger:()=>{this._codeEditor.getAction(uo.NextMatchFindAction).run().then(void 0,ti)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new G2({icon:c6e,title:b6e+this._keybindingLabelFor(uo.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new JE({label:C6e+this._keybindingLabelFor(uo.CloseFindWidgetCommand),icon:wse,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new oU(null,void 0,{label:y6e,placeholder:w6e,appendPreserveCaseLabel:this._keybindingLabelFor(uo.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Aee(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new JE({label:S6e+this._keybindingLabelFor(uo.ReplaceOneAction),icon:d6e,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new JE({label:E6e+this._keybindingLabelFor(uo.ReplaceAllAction),icon:h6e,onTrigger:()=>{this._controller.replaceAll()}}));let o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new JE({label:L6e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Bg(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Z_}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(o),this._resizeSash=new eu(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Z_;this._register(this._resizeSash.onDidStart(()=>{a=Bg(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let u=a+l.startX-l.currentX;if(u<Z_)return;const d=parseFloat(_z(this._domNode).maxWidth)||0;u>d||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Bg(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=Bg(this._domNode);if(l<Z_)return;let u=Z_;if(!this._resized||l===Z_){const d=this._codeEditor.getLayoutInfo();u=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Bg(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}FF.ID="editor.contrib.findWidget";class JE extends Ph{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+So.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...So.asClassNameArray(Oee)),this._domNode.classList.add(...So.asClassNameArray(Ree))):(this._domNode.classList.remove(...So.asClassNameArray(Ree)),this._domNode.classList.add(...So.asClassNameArray(Oee)))}}mo((r,e)=>{const t=(C,S)=>{S&&e.addRule(`.monaco-editor ${C} { background-color: ${S}; }`)};t(".findMatch",r.getColor(U9)),t(".currentFindMatch",r.getColor(sCe)),t(".findScope",r.getColor(aCe));const n=r.getColor(pm);t(".find-widget",n);const i=r.getColor(NC);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const o=r.getColor(uCe);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=r.getColor(lCe);s&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${s}; padding: 1px; box-sizing: border-box; }`);const a=r.getColor(cCe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; }`);const l=r.getColor(Ns);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const u=r.getColor(Wb);u&&e.addRule(`.monaco-editor .find-widget { color: ${u}; }`);const d=r.getColor(V1e);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);const h=r.getColor(Y1e);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{const C=r.getColor(MO);C&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${C}; }`)}const p=r.getColor(YCe);p&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${p} !important;
		}
	`);const _=r.getColor(aS);_&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${_}; }`)});var zce=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ov=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},TS=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const N6e=524288;function sU(r,e="single",t=!1){if(!r.hasModel())return null;const n=r.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=r.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(r.getModel().getValueLengthInRange(n)<N6e)return r.getModel().getValueInRange(n)}return null}let Rd=class $ce extends ot{constructor(e,t,n,i){super(),this._editor=e,this._findWidgetVisible=gE.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new Kb(500),this._state=this._register(new e6e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution($ce.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!MF.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Vf(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return TS(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let i=sU(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Vf(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let i=sU(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let i=this._editor.getSelections();i.some(o=>!o.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new ET(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return TS(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Rd.ID="editor.contrib.findController";Rd=zce([ov(1,Jn),ov(2,i0),ov(3,QC)],Rd);let aU=class extends Rd{constructor(e,t,n,i,o,s,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=i,this._themeService=o,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return TS(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":o=!!i&&i.startLineNumber!==i.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||o,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new FF(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new PF(this._editor,this._state,this._keybindingService,this._themeService))}};aU=zce([ov(1,t1),ov(2,Jn),ov(3,Ro),ov(4,Ho),ov(5,As),ov(6,i0),ov(7,QC)],aU);const A6e=Cre(new bre({id:uo.StartFindAction,label:E("startFindAction","Find"),alias:"Find",precondition:Xt.or(Le.focus,Xt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:wn.MenubarEditMenu,group:"3_find",title:E({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));A6e.addImplementation(0,(r,e,t)=>{const n=Rd.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const O6e={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:E("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:E("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:E("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:E("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class R6e extends gn{constructor(){super({id:uo.StartFindWithArgs,label:E("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:O6e})}run(e,t,n){return TS(this,void 0,void 0,function*(){let i=Rd.get(t);if(i){const o=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(35).loop},o),i.setGlobalBufferTerm(i.getState().searchString)}})}}class M6e extends gn{constructor(){super({id:uo.StartFindWithSelection,label:E("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return TS(this,void 0,void 0,function*(){let n=Rd.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class jce extends gn{run(e,t){return TS(this,void 0,void 0,function*(){let n=Rd.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class P6e extends jce{constructor(){super({id:uo.NextMatchFindAction,label:E("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:Le.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Xt.and(Le.focus,MF),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class F6e extends jce{constructor(){super({id:uo.PreviousMatchFindAction,label:E("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:Le.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Xt.and(Le.focus,MF),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class qce extends gn{run(e,t){return TS(this,void 0,void 0,function*(){let n=Rd.get(t);if(!n)return;const i=t.getOption(35).seedSearchStringFromSelection==="selection";let o=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(o=sU(t,"single",i)),o&&n.setSearchString(o),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class B6e extends qce{constructor(){super({id:uo.NextSelectionMatchFindAction,label:E("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class W6e extends qce{constructor(){super({id:uo.PreviousSelectionMatchFindAction,label:E("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const V6e=Cre(new bre({id:uo.StartFindReplaceAction,label:E("startReplace","Replace"),alias:"Replace",precondition:Xt.or(Le.focus,Xt.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:wn.MenubarEditMenu,group:"3_find",title:E({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));V6e.addImplementation(0,(r,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Rd.get(e);if(!n)return!1;const i=e.getSelection(),o=n.isFindInputFocused(),s=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!o,a=o||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});br(Rd.ID,aU);Wt(R6e);Wt(M6e);Wt(P6e);Wt(F6e);Wt(B6e);Wt(W6e);const Nm=Fl.bindToContribution(Rd.get);Mt(new Nm({id:uo.CloseFindWidgetCommand,precondition:gE,handler:r=>r.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:Xt.and(Le.focus,Xt.not("isComposing")),primary:9,secondary:[1033]}}));Mt(new Nm({id:uo.ToggleCaseSensitiveCommand,precondition:void 0,handler:r=>r.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:gO.primary,mac:gO.mac,win:gO.win,linux:gO.linux}}));Mt(new Nm({id:uo.ToggleWholeWordCommand,precondition:void 0,handler:r=>r.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:pO.primary,mac:pO.mac,win:pO.win,linux:pO.linux}}));Mt(new Nm({id:uo.ToggleRegexCommand,precondition:void 0,handler:r=>r.toggleRegex(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:mO.primary,mac:mO.mac,win:mO.win,linux:mO.linux}}));Mt(new Nm({id:uo.ToggleSearchScopeCommand,precondition:void 0,handler:r=>r.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:_O.primary,mac:_O.mac,win:_O.win,linux:_O.linux}}));Mt(new Nm({id:uo.TogglePreserveCaseCommand,precondition:void 0,handler:r=>r.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:vO.primary,mac:vO.mac,win:vO.win,linux:vO.linux}}));Mt(new Nm({id:uo.ReplaceOneAction,precondition:gE,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:3094}}));Mt(new Nm({id:uo.ReplaceOneAction,precondition:gE,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:Xt.and(Le.focus,aq),primary:3}}));Mt(new Nm({id:uo.ReplaceAllAction,precondition:gE,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:2563}}));Mt(new Nm({id:uo.ReplaceAllAction,precondition:gE,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:Xt.and(Le.focus,aq),primary:void 0,mac:{primary:2051}}}));Mt(new Nm({id:uo.SelectAllMatchesAction,precondition:gE,handler:r=>r.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:Le.focus,primary:515}}));const Vee=65535,kb=16777215,Hee=4278190080;class BN{constructor(e,t,n){if(e.length!==t.length||e.length>Vee)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>kb||s>kb)throw new Error("startLineNumber or endLineNumber must not exceed "+kb);for(;e.length>0&&!t(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&kb}getEndLineNumber(e){return this._endIndexes[e]&kb}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,i=e%32,o=this._collapseStates[n];t?this._collapseStates[n]=o|1<<i:this._collapseStates[n]=o&~(1<<i)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new H6e(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Hee)>>>24)+((this._endIndexes[e]&Hee)>>>16);return t===Vee?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class H6e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class U6e{constructor(e,t){this._updateEventEmitter=new Fe,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new BN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,o=-1,s=-1;const a=l=>{for(;i<l;){const u=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);u<=o&&n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,u<=s)),d&&u>s&&(s=u),i++}};for(let l of e){let u=l.regionIndex,d=this._editorDecorationIds[u];if(d&&!t[d]){t[d]=!0,a(u);let h=!this._regions.isCollapsed(u);this._regions.setCollapsed(u,h),o=Math.max(o,this._regions.getEndLineNumber(u))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],i=(h,p)=>{for(let _ of t)if(h<_&&_<=p)return!0;return!1},o=-1,s=(h,p)=>{const _=e.getStartLineNumber(h),C=e.getEndLineNumber(h);p||(p=e.isCollapsed(h)),p&&i(_,C)&&(p=!1),e.setCollapsed(h,p);const S=this._textModel.getLineMaxColumn(_),x={startLineNumber:_,startColumn:Math.max(S-1,1),endLineNumber:_,endColumn:S};n.push({range:x,options:this._decorationProvider.getDecorationOption(p,C<=o)}),p&&C>o&&(o=C)},a=0,l=()=>{for(;a<this._regions.length;){let h=this._regions.isCollapsed(a);if(a++,h)return a-1}return-1},u=0,d=l();for(;d!==-1&&u<e.length;){let h=this._textModel.getDecorationRange(this._editorDecorationIds[d]);if(h){let p=h.startLineNumber;if(h.startColumn===Math.max(h.endColumn-1,1)&&this._textModel.getLineMaxColumn(p)===h.endColumn)for(;u<e.length;){let _=e.getStartLineNumber(u);if(p>=_)s(u,p===_),u++;else break}}d=l()}for(;u<e.length;)s(u,!1),u++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let i=n.startLineNumber,o=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let i=this.getRegionAtLine(n.startLineNumber);i&&!i.isCollapsed&&t.push(i)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let i=this._regions.findRange(e),o=1;for(;i>=0;){let s=this._regions.toRegion(i);(!t||t(s,o))&&n.push(s),o++,i=s.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const s=[];for(let a=i,l=this._regions.length;a<l;a++){let u=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;s.length>0&&!u.containedBy(s[s.length-1]);)s.pop();s.push(u),t(u,s.length)&&n.push(u)}else break}}else for(let s=i,a=this._regions.length;s<a;s++){let l=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<o)(!t||t(l))&&n.push(l);else break}return n}}function z6e(r,e,t){let n=[];for(let i of t){let o=r.getRegionAtLine(i);if(o){const s=!o.isCollapsed;if(n.push(o),e>1){let a=r.getRegionsInside(o,(l,u)=>l.isCollapsed!==s&&u<e);n.push(...a)}}}r.toggleCollapseState(n)}function bD(r,e,t=Number.MAX_VALUE,n){let i=[];if(n&&n.length>0)for(let o of n){let s=r.getRegionAtLine(o);if(s&&(s.isCollapsed!==e&&i.push(s),t>1)){let a=r.getRegionsInside(s,(l,u)=>l.isCollapsed!==e&&u<t);i.push(...a)}}else{let o=r.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);i.push(...o)}r.toggleCollapseState(i)}function Kce(r,e,t,n){let i=[];for(let o of n){let s=r.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...s)}r.toggleCollapseState(i)}function $6e(r,e,t){let n=[];for(let i of t){let o=r.getAllRegionsAtLine(i,s=>s.isCollapsed!==e);o.length>0&&n.push(o[0])}r.toggleCollapseState(n)}function j6e(r,e,t,n){let i=(s,a)=>a===e&&s.isCollapsed!==t&&!n.some(l=>s.containsLine(l)),o=r.getRegionsInside(null,i);r.toggleCollapseState(o)}function Gce(r,e,t){let n=[];for(let s of t)n.push(r.getAllRegionsAtLine(s,void 0)[0]);let i=s=>n.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,o=r.getRegionsInside(null,i);r.toggleCollapseState(o)}function lq(r,e,t){let n=r.textModel,i=r.regions,o=[];for(let s=i.length-1;s>=0;s--)if(t!==i.isCollapsed(s)){let a=i.getStartLineNumber(s);e.test(n.getLineContent(a))&&o.push(i.toRegion(s))}r.toggleCollapseState(o)}function uq(r,e,t){let n=r.regions,i=[];for(let o=n.length-1;o>=0;o--)t!==n.isCollapsed(o)&&e===n.getType(o)&&i.push(n.toRegion(o));r.toggleCollapseState(i)}function q6e(r,e){let t=null,n=e.getRegionAtLine(r);if(n!==null&&(t=n.startLineNumber,r===t)){let i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}function K6e(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){if(r!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<r)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function G6e(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){let n=t.parentIndex,i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>r)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class Y6e{constructor(e){this._updateEventEmitter=new Fe,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||dS(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,i=0,o=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,u=a.getEndLineNumber(n);o<=l&&u<=s||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===u?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new le(l,1,u,1))),o=l,s=u)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new le(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Uee(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,i=null,o=s=>((!i||!Z6e(s,i))&&(i=Uee(this._hiddenRanges,s)),i?i.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let l=e[s],u=o(l.startLineNumber);u&&(l=l.setStartPosition(u,n.getLineMaxColumn(u)),t=!0);let d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[s]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function Z6e(r,e){return r>=e.startLineNumber&&r<=e.endLineNumber}function Uee(r,e){let t=xre(r,n=>e<n.startLineNumber)-1;return t>=0&&r[t].endLineNumber>=e?r[t]:null}const X6e=5e3,Q6e="indent";class J6e{constructor(e){this.editorModel=e,this.id=Q6e}dispose(){}compute(e){let t=fr.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(t9e(this.editorModel,n,i))}}let e9e=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>kb||t>kb)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)t[o]=this._startIndexes[i],n[o]=this._endIndexes[i];return new BN(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const i=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let u=this._startIndexes[a],d=e.getLineContent(u),h=Td.computeIndentLevel(d,i);(h<n||h===n&&t++<this._foldingRangesLimit)&&(o[l]=u,s[l]=this._endIndexes[a],l++)}return new BN(o,s)}}};function t9e(r,e,t,n=X6e){const i=r.getOptions().tabSize;let o=new e9e(n),s;t&&(s=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=r.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let u=r.getLineCount();u>0;u--){let d=r.getLineContent(u),h=Td.computeIndentLevel(d,i),p=a[a.length-1];if(h===-1){e&&(p.endAbove=u);continue}let _;if(s&&(_=d.match(s)))if(_[1]){let C=a.length-1;for(;C>0&&a[C].indent!==-2;)C--;if(C>0){a.length=C+1,p=a[C],o.insertFirst(u,p.line,h),p.line=u,p.indent=h,p.endAbove=u;continue}}else{a.push({indent:-2,endAbove:u,line:u});continue}if(p.indent>h){do a.pop(),p=a[a.length-1];while(p.indent>h);let C=p.endAbove-1;C-u>=1&&o.insertFirst(u,C,h)}p.indent===h?p.endAbove=u:a.push({indent:h,endAbove:u,line:u})}return o.toIndentRanges(r)}const n9e=5e3,i9e={},Yce="syntax";class r9e{constructor(e,t,n,i=n9e){this.editorModel=e,this.providers=t,this.limit=i,this.id=Yce;for(const o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new Nt),this.disposables.add(o.onDidChange(n)))}compute(e){return o9e(this.providers,this.editorModel,e).then(t=>t?Zce(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function o9e(r,e,t){let n=null,i=r.map((o,s)=>Promise.resolve(o.provideFoldingRanges(e,i9e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let u of a)u.start>0&&u.end>u.start&&u.end<=l&&n.push({start:u.start,end:u.end,rank:s,kind:u.kind})}},Pl));return Promise.all(i).then(o=>n)}class s9e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>kb||t>kb)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=i,this._types[o]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new BN(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let a=this._nestingLevelCounts[s];if(a){if(a+e>this._foldingRangesLimit){t=s;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),i=new Uint32Array(this._foldingRangesLimit),o=[];for(let s=0,a=0;s<this._length;s++){let l=this._nestingLevels[s];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[s],i[a]=this._endIndexes[s],o[a]=this._types[s],a++)}return new BN(n,i,o)}}}function Zce(r,e){let t=r.sort((s,a)=>{let l=s.start-a.start;return l===0&&(l=s.rank-a.rank),l}),n=new s9e(e),i,o=[];for(let s of t)if(!i)i=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else if(s.start>i.start)if(s.end<=i.end)o.push(i),i=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else{if(s.start>i.end){do i=o.pop();while(i&&s.start>i.end);i&&o.push(i),i=s}n.add(s.start,s.end,s.kind&&s.kind.value,o.length)}return n.toIndentRanges()}const Xce="init";class a9e{constructor(e,t,n,i){if(this.editorModel=e,this.id=Xce,t.length){let o=s=>({range:{startLineNumber:s.startLineNumber,startColumn:0,endLineNumber:s.endLineNumber,endColumn:e.getLineLength(s.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(n,i)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let i=this.editorModel.getDecorationRange(n);i&&t.push({start:i.startLineNumber,end:i.endLineNumber,rank:1})}return Promise.resolve(Zce(t,Number.MAX_VALUE))}}const cq=gl("folding-expanded",Ae.chevronDown,E("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),dq=gl("folding-collapsed",Ae.chevronRight,E("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class Gg{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?Gg.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?Gg.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Gg.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?Gg.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Gg.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}Gg.COLLAPSED_VISUAL_DECORATION=pi.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:So.asClassName(dq)});Gg.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=pi.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:So.asClassName(dq)});Gg.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=pi.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:So.asClassName(cq)});Gg.EXPANDED_VISUAL_DECORATION=pi.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+So.asClassName(cq)});Gg.HIDDEN_RANGE_DECORATION=pi.register({description:"folding-hidden-range-decoration",stickiness:1});var l9e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},u9e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const dc=new _n("foldingEnabled",!1);let Mx=class Qce extends ot{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new Nt),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Gg(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=dc.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(i=>{if(i.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),i.hasChanged(98)||i.hasChanged(39)){const o=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=o.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=o.get(39),this.triggerFoldingModelChanged()}i.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),i.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),i.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(Qce.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===Yce||e.provider===Xce)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const i=this.getFoldingModel();i&&i.then(o=>{if(o){this._restoringViewState=!0;try{o.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,ti)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new U6e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new Y6e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Kb(200),this.cursorChangedScheduler=new Xr(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(Q9.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new J6e(e),this._useFoldingProviders&&this.foldingModel){let t=Q9.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new a9e(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new r9e(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=fl(i=>t.compute(i));return n.then(i=>{if(i&&n===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=i.setCollapsedAllOfType(Cm.Imports.value,!0);l&&(o=MC.capture(this.editor),this._currentModelHasFoldedImports=l)}let s=this.editor.getSelections(),a=s?s.map(l=>l.startLineNumber):[];e.update(i,a),o&&o.restore(this.editor)}return e})}).then(void 0,e=>(ti(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let i=[];for(let o of n){let s=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&i.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,ti)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const i=e.target.detail,o=e.target.element.offsetLeft;if(i.offsetX-o<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,o=e.target.range;if(!(!o||o.startLineNumber!==n)){if(i){if(e.target.type!==4)return}else{let s=this.editor.getModel();if(!s||o.startColumn!==s.getLineMaxColumn(n))return}t.then(s=>{if(s){let a=s.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(i||l){let u=e.event.altKey,d=[];if(u){let h=_=>!_.containedBy(a)&&!a.containedBy(_),p=s.getRegionsInside(null,h);for(const _ of p)_.isCollapsed&&d.push(_);d.length===0&&(d=p)}else{let h=e.event.middleButton||e.event.shiftKey;if(h)for(const p of s.getRegionsInside(a))p.isCollapsed===l&&d.push(p);(l||!h||d.length===0)&&d.push(a)}s.toggleCollapseState(d),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,ti)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Mx.ID="editor.contrib.folding";Mx=l9e([u9e(1,Jn)],Mx);class zc extends gn{runEditorCommand(e,t,n){let i=Mx.get(t);if(!i)return;let o=i.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(s=>{if(s){this.invoke(i,s,t,n);const a=t.getSelection();a&&i.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function Jce(r){if(!wd(r)){if(!Oc(r))return!1;const e=r;if(!wd(e.levels)&&!iS(e.levels)||!wd(e.direction)&&!Wf(e.direction)||!wd(e.selectionLines)&&(!tre(e.selectionLines)||!e.selectionLines.every(iS)))return!1}return!0}class c9e extends zc{constructor(){super({id:"editor.unfold",label:E("unfoldAction.label","Unfold"),alias:"Unfold",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Jce,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let o=i&&i.levels||1,s=this.getLineNumbers(i,n);i&&i.direction==="up"?Kce(t,!1,o,s):bD(t,!1,o,s)}}class d9e extends zc{constructor(){super({id:"editor.unfoldRecursively",label:E("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2137),weight:100}})}invoke(e,t,n,i){bD(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class h9e extends zc{constructor(){super({id:"editor.fold",label:E("foldAction.label","Fold"),alias:"Fold",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Jce,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let o=this.getLineNumbers(i,n);const s=i&&i.levels,a=i&&i.direction;typeof s!="number"&&typeof a!="string"?$6e(t,!0,o):a==="up"?Kce(t,!0,s||1,o):bD(t,!0,s||1,o)}}class f9e extends zc{constructor(){super({id:"editor.toggleFold",label:E("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2090),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);z6e(t,1,i)}}class g9e extends zc{constructor(){super({id:"editor.foldRecursively",label:E("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2135),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);bD(t,!0,Number.MAX_VALUE,i)}}class p9e extends zc{constructor(){super({id:"editor.foldAllBlockComments",label:E("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())uq(t,Cm.Comment.value,!0);else{const i=n.getModel();if(!i)return;const o=fr.getComments(i.getLanguageId());if(o&&o.blockCommentStartToken){let s=new RegExp("^\\s*"+Vf(o.blockCommentStartToken));lq(t,s,!0)}}}}class m9e extends zc{constructor(){super({id:"editor.foldAllMarkerRegions",label:E("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())uq(t,Cm.Region.value,!0);else{const i=n.getModel();if(!i)return;const o=fr.getFoldingRules(i.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);lq(t,s,!0)}}}}class _9e extends zc{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:E("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())uq(t,Cm.Region.value,!1);else{const i=n.getModel();if(!i)return;const o=fr.getFoldingRules(i.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);lq(t,s,!1)}}}}class v9e extends zc{constructor(){super({id:"editor.foldAllExcept",label:E("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2131),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);Gce(t,!0,i)}}class b9e extends zc{constructor(){super({id:"editor.unfoldAllExcept",label:E("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2129),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);Gce(t,!1,i)}}class C9e extends zc{constructor(){super({id:"editor.foldAll",label:E("foldAllAction.label","Fold All"),alias:"Fold All",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2069),weight:100}})}invoke(e,t,n){bD(t,!0)}}class y9e extends zc{constructor(){super({id:"editor.unfoldAll",label:E("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2088),weight:100}})}invoke(e,t,n){bD(t,!1)}}class NS extends zc{getFoldingLevel(){return parseInt(this.id.substr(NS.ID_PREFIX.length))}invoke(e,t,n){j6e(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}NS.ID_PREFIX="editor.foldLevel";NS.ID=r=>NS.ID_PREFIX+r;class w9e extends zc{constructor(){super({id:"editor.gotoParentFold",label:E("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=q6e(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class S9e extends zc{constructor(){super({id:"editor.gotoPreviousFold",label:E("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=K6e(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class E9e extends zc{constructor(){super({id:"editor.gotoNextFold",label:E("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=G6e(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}br(Mx.ID,Mx);Wt(c9e);Wt(d9e);Wt(h9e);Wt(g9e);Wt(C9e);Wt(y9e);Wt(p9e);Wt(m9e);Wt(_9e);Wt(v9e);Wt(b9e);Wt(f9e);Wt(w9e);Wt(S9e);Wt(E9e);for(let r=1;r<=7;r++)yre(new NS({id:NS.ID(r),label:E("foldLevelAction.label","Fold Level {0}",r),alias:`Fold Level ${r}`,precondition:dc,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2048|21+r),weight:100}}));const L9e=Be("editor.foldBackground",{light:Qr(vC,.3),dark:Qr(vC,.3),hc:null},E("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),x9e=Be("editorGutter.foldingControlForeground",{dark:Y3,light:Y3,hc:Y3},E("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));mo((r,e)=>{const t=r.getColor(L9e);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=r.getColor(x9e);n&&e.addRule(`
		.monaco-editor .cldr${So.asCSSSelector(cq)},
		.monaco-editor .cldr${So.asCSSSelector(dq)} {
			color: ${n} !important;
		}
		`)});class D9e extends gn{constructor(){super({id:"editor.action.fontZoomIn",label:E("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Gb.setZoomLevel(Gb.getZoomLevel()+1)}}class I9e extends gn{constructor(){super({id:"editor.action.fontZoomOut",label:E("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Gb.setZoomLevel(Gb.getZoomLevel()-1)}}class k9e extends gn{constructor(){super({id:"editor.action.fontZoomReset",label:E("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Gb.setZoomLevel(0)}}Wt(D9e);Wt(I9e);Wt(k9e);var ede=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tde=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},hq=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let WN=class{constructor(e,t){this._workerService=t,this._callOnDispose=new Nt,this._callOnModel=new Nt,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(cM.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=cM.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new fL;for(let i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(i=>{let o=i.charCodeAt(i.length-1);n.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition();let i=!1;const o=this._editor.onDidChangeModelContent(s=>{if(s.isFlush){i=!0,o.dispose();return}for(let a=0,l=s.changes.length;a<l;a++)if(s.changes[a].range.endLineNumber<=n.lineNumber){i=!0,o.dispose();return}});Ule(this._workerService,t,n,e,t.getFormattingOptions()).then(s=>{o.dispose(),!i&&Ed(s)&&(Ex.execute(this._editor,s,!0),Bj(s))},s=>{throw o.dispose(),s})}};WN.ID="editor.contrib.autoFormat";WN=ede([tde(1,Fh)],WN);let VN=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new Nt,this._callOnModel=new Nt,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(tm.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&tm.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Hle,this.editor,e,2,iE.None,Oi.None).catch(ti))}};VN.ID="editor.contrib.formatOnPaste";VN=ede([tde(1,xi)],VN);class T9e extends gn{constructor(){super({id:"editor.action.formatDocument",label:E("formatDocument.label","Format Document"),alias:"Format Document",precondition:Xt.and(Le.notInCompositeEditor,Le.writable,Le.hasDocumentFormattingProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return hq(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(xi);yield e.get(n1).showWhile(n.invokeFunction(B4e,t,1,iE.None,Oi.None),250)}})}}class N9e extends gn{constructor(){super({id:"editor.action.formatSelection",label:E("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:Xt.and(Le.writable,Le.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2084),weight:100},contextMenuOpts:{when:Le.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return hq(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(xi),i=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new le(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(n1).showWhile(n.invokeFunction(Hle,t,o,1,iE.None,Oi.None),250)})}}br(WN.ID,WN);br(VN.ID,VN);Wt(T9e);Wt(N9e);Yi.registerCommand("editor.action.format",r=>hq(void 0,void 0,void 0,function*(){const e=r.get(vr).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=r.get(Go);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));class EL{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let o=0;t.children.get(i)!==void 0;o++)i=`${n}_${o}`;return i}static empty(e){return e.children.size===0}}class zee extends EL{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class A9e extends EL{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}class oc extends EL{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let n=this._keys.for(e,!0),i=oc._requests.get(n);if(!i){let o=new Ou;i={promiseCnt:0,source:o,promise:oc._create(e,o.token),model:void 0},oc._requests.set(n,i);const s=Date.now();i.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return i.model?Promise.resolve(i.model):(i.promiseCnt+=1,t.onCancellationRequested(()=>{--i.promiseCnt===0&&(i.source.cancel(),oc._requests.delete(n))}),new Promise((o,s)=>{i.promise.then(a=>{i.model=a,o(a)},a=>{oc._requests.delete(n),s(a)})}))}static _create(e,t){const n=new Ou(t),i=new oc(e.uri),o=Xg.ordered(e),s=o.map((l,u)=>{var d;let h=EL.findId(`provider_${u}`,i),p=new A9e(h,i,(d=l.displayName)!==null&&d!==void 0?d:"Unknown Outline Provider",u);return Promise.resolve(l.provideDocumentSymbols(e,n.token)).then(_=>{for(const C of _||[])oc._makeOutlineElement(C,p);return p},_=>(Pl(_),p)).then(_=>{EL.empty(_)?_.remove():i._groups.set(h,_)})}),a=Xg.onDidChange(()=>{const l=Xg.ordered(e);Rf(l,o)||n.cancel()});return Promise.all(s).then(()=>n.token.isCancellationRequested&&!t.isCancellationRequested?oc._create(e,t):i._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let n=EL.findId(e,t),i=new zee(n,t,e);if(e.children)for(const o of e.children)oc._makeOutlineElement(o,i);t.children.set(i.id,i)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Zi.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof zee?e.push(t.symbol):e.push(...Zi.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>le.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return oc._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>le.compareRangesUsingStarts(n.range,i.range))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&oc._flattenDocumentSymbols(e,i.children,i.name)}}oc._requestDurations=new nM(Xg,350);oc._requests=new YC(9,.75);oc._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(r,e){return`${r.id}/${e?r.getVersionId():""}/${this._hash(Xg.all(r))}`}_hash(r){let e="";for(const t of r){let n=this._data.get(t);typeof n>"u"&&(n=this._counter++,this._data.set(t,n)),e+=n}return e}};var nde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function $ee(r,e,t){return nde(this,void 0,void 0,function*(){const n=yield oc.create(r,t);return e?n.asListOfDocumentSymbols():n.getTopLevelSymbols()})}Yi.registerCommand("_executeDocumentSymbolProvider",function(r,...e){return nde(this,void 0,void 0,function*(){const[t]=e;jr(qn.isUri(t));const n=r.get(ua).getModel(t);if(n)return $ee(n,!1,Oi.None);const i=yield r.get(Fc).createModelReference(t);try{return yield $ee(i.object.textEditorModel,!1,Oi.None)}finally{i.dispose()}})});function _d(r,e){let t=0;for(let n=0;n<r.length;n++)r.charAt(n)==="	"?t+=e:t++;return t}function LT(r,e,t){r=r<0?0:r;let n="";if(!t){let i=Math.floor(r/e);r=r%e;for(let o=0;o<i;o++)n+="	"}for(let i=0;i<r;i++)n+=" ";return n}function ide(r,e,t,n){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return[];const i=fr.getIndentationRules(r.getLanguageId());if(!i)return[];for(t=Math.min(t,r.getLineCount());e<=t&&i.unIndentedLinePattern;){let S=r.getLineContent(e);if(!i.unIndentedLinePattern.test(S))break;e++}if(e>t-1)return[];const{tabSize:o,indentSize:s,insertSpaces:a}=r.getOptions(),l=(S,x)=>(x=x||1,Ih.shiftIndent(S,S.length+x,o,s,a)),u=(S,x)=>(x=x||1,Ih.unshiftIndent(S,S.length+x,o,s,a));let d=[],h,p=r.getLineContent(e),_=p;if(n!=null){h=n;let S=Vr(p);_=h+p.substring(S.length),i.decreaseIndentPattern&&i.decreaseIndentPattern.test(_)&&(h=u(h),_=h+p.substring(S.length)),p!==_&&d.push(ss.replaceMove(new ln(e,1,e,S.length+1),Td.normalizeIndentation(h,s,a)))}else h=Vr(p);let C=h;i.increaseIndentPattern&&i.increaseIndentPattern.test(_)?(C=l(C),h=l(h)):i.indentNextLinePattern&&i.indentNextLinePattern.test(_)&&(C=l(C)),e++;for(let S=e;S<=t;S++){let x=r.getLineContent(S),T=Vr(x),k=C+x.substring(T.length);i.decreaseIndentPattern&&i.decreaseIndentPattern.test(k)&&(C=u(C),h=u(h)),T!==C&&d.push(ss.replaceMove(new ln(S,1,S,T.length+1),Td.normalizeIndentation(C,s,a))),!(i.unIndentedLinePattern&&i.unIndentedLinePattern.test(x))&&(i.increaseIndentPattern&&i.increaseIndentPattern.test(k)?(h=l(h),C=h):i.indentNextLinePattern&&i.indentNextLinePattern.test(k)?C=l(C):C=h)}return d}class BF extends gn{constructor(){super({id:BF.ID,label:E("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:Le.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),o=t.getSelection();if(!o)return;const s=new P9e(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}BF.ID="editor.action.indentationToSpaces";class WF extends gn{constructor(){super({id:WF.ID,label:E("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:Le.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),o=t.getSelection();if(!o)return;const s=new F9e(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}WF.ID="editor.action.indentationToTabs";class rde extends gn{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(Kf),i=e.get(ua);let o=t.getModel();if(!o)return;const s=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(u=>({id:u.toString(),label:u.toString(),description:u===s.tabSize?E("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:E({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(u=>{u&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(u.label,10),insertSpaces:this.insertSpaces})})},50)}}class VF extends rde{constructor(){super(!1,{id:VF.ID,label:E("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}VF.ID="editor.action.indentUsingTabs";class HF extends rde{constructor(){super(!0,{id:HF.ID,label:E("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}HF.ID="editor.action.indentUsingSpaces";class UF extends gn{constructor(){super({id:UF.ID,label:E("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(ua);let i=t.getModel();if(!i)return;const o=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(o.insertSpaces,o.tabSize)}}UF.ID="editor.action.detectIndentation";class O9e extends gn{constructor(){super({id:"editor.action.reindentlines",label:E("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:Le.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=ide(n,1,n.getLineCount());i.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,i),t.pushUndoStop())}}class R9e extends gn{constructor(){super({id:"editor.action.reindentselectedlines",label:E("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:Le.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=t.getSelections();if(i===null)return;let o=[];for(let s of i){let a=s.startLineNumber,l=s.endLineNumber;if(a!==l&&s.endColumn===1&&l--,a===1){if(a===l)continue}else a--;let u=ide(n,a,l);o.push(...u)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class M9e{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let i of this._edits)t.addEditOperation(le.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class lU{constructor(e){this.callOnDispose=new Nt,this.callOnModel=new Nt,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:o,indentSize:s,insertSpaces:a}=n.getOptions();let l=[],u={shiftIndent:_=>Ih.shiftIndent(_,_.length+1,o,s,a),unshiftIndent:_=>Ih.unshiftIndent(_,_.length+1,o,s,a)},d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(n,d)){d++;continue}break}if(d>e.endLineNumber)return;let h=n.getLineContent(d);if(!/\S/.test(h.substring(0,e.startColumn-1))){const _=fr.getGoodIndentForLine(i,n,n.getLanguageId(),d,u);if(_!==null){let C=Vr(h),S=_d(_,o),x=_d(C,o);if(S!==x){let T=LT(S,o,a);l.push({range:new le(d,1,d,C.length+1),text:T}),h=T+h.substr(C.length)}else{let T=fr.getIndentMetadata(n,d);if(T===0||T===8)return}}}const p=d;for(;d<e.endLineNumber;){if(!/\S/.test(n.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){let _={getLineTokens:S=>n.getLineTokens(S),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(S,x)=>n.getLanguageIdAtPosition(S,x),getLineContent:S=>S===p?h:n.getLineContent(S)},C=fr.getGoodIndentForLine(i,_,n.getLanguageId(),d+1,u);if(C!==null){let S=_d(C,o),x=_d(Vr(n.getLineContent(d+1)),o);if(S!==x){let T=S-x;for(let k=d+1;k<=e.endLineNumber;k++){let M=n.getLineContent(k),W=Vr(M),Q=_d(W,o)+T,z=LT(Q,o,a);z!==W&&l.push({range:new le(k,1,k,W.length+1),text:z})}}}}if(l.length>0){this.editor.pushUndoStop();let _=new M9e(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",_),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let i=e.getLineTokens(t);if(i.getCount()>0){let o=i.findTokenIndexAtOffset(n);if(o>=0&&i.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}lU.ID="editor.contrib.autoIndentOnPaste";function ode(r,e,t,n){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let i="";for(let s=0;s<t;s++)i+=" ";let o=new RegExp(i,"gi");for(let s=1,a=r.getLineCount();s<=a;s++){let l=r.getLineFirstNonWhitespaceColumn(s);if(l===0&&(l=r.getLineMaxColumn(s)),l===1)continue;const u=new le(s,1,s,l),d=r.getValueInRange(u),h=n?d.replace(/\t/ig,i):d.replace(o,"	");e.addEditOperation(u,h)}}class P9e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ode(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class F9e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ode(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}br(lU.ID,lU);Wt(BF);Wt(WF);Wt(VF);Wt(HF);Wt(UF);Wt(O9e);Wt(R9e);var _P=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const B9e=1500;class sde{constructor(){this._data=new Tu}push(e,t){const n=this._data.get(e.uri);n===void 0?this._data.set(e.uri,new Set([t])):n.add(t)}pop(e,t){const n=this._data.get(e.uri);n&&(n.delete(t),n.size===0&&this._data.delete(e.uri))}has(e,t){var n;return!!(!((n=this._data.get(e.uri))===null||n===void 0)&&n.has(t))}}function ade(r,e,t,n){return _P(this,void 0,void 0,function*(){const i=[],s=lC.ordered(r).reverse().map(a=>e.map(l=>_P(this,void 0,void 0,function*(){try{t.push(r,a);const u=yield a.provideInlayHints(r,l,n);u!=null&&u.length&&i.push(u.filter(d=>l.containsPosition(d.position)))}catch(u){Pl(u)}finally{t.pop(r,a)}})));return yield Promise.all(s.flat()),i.flat().sort((a,l)=>Ge.compare(a.position,l.position))})}class vP{constructor(){this._entries=new YC(50)}get(e){const t=vP._key(e);return this._entries.get(t)}set(e,t){const n=vP._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}class Px{constructor(e){this._editor=e,this._decorationOwnerId=++Px._decorationOwnerIdPool,this._disposables=new Nt,this._sessionDisposables=new Nt,this._getInlayHintsDelays=new nM(lC,25,500),this._cache=new vP,this._decorationsMetadata=new Map,this._ruleFactory=new uoe(this._editor),this._disposables.add(lC.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(t=>{t.hasChanged(126)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(126).enabled)return;const e=this._editor.getModel();if(!e||!lC.has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const n=new sde,i=new Xr(()=>_P(this,void 0,void 0,function*(){const s=Date.now(),a=new Ou;this._sessionDisposables.add(Hi(()=>a.dispose(!0)));const l=this._getHintsRanges(),u=yield ade(e,l,n,a.token);i.delay=this._getInlayHintsDelays.update(e,Date.now()-s),!a.token.isCancellationRequested&&(this._updateHintsDecorators(l,u),this._cache.set(e,Array.from(this._decorationsMetadata.values()).map(d=>d.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(i),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>i.schedule())),this._sessionDisposables.add(this._editor.onDidScrollChange(()=>i.schedule())),i.schedule();const o=new Nt;this._sessionDisposables.add(o);for(const s of lC.all(e))typeof s.onDidChangeInlayHints=="function"&&o.add(s.onDidChangeInlayHints(()=>{n.has(e,s)||i.schedule()}))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const o of n.sort(le.compareRangesUsingStarts)){const s=t.validateRange(new le(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));i.length===0||!le.areIntersectingOrTouching(i[i.length-1],s)?i.push(s):i[i.length-1]=le.plusRange(i[i.length-1],s)}return i}_updateHintsDecorators(e,t){const{fontSize:n,fontFamily:i}=this._getLayoutInfo(),o=this._editor.getModel(),s=[],a="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,i);for(const d of t){const{text:h,position:p,whitespaceBefore:_,whitespaceAfter:C}=d,S=_?n/3|0:0,x=C?n/3|0:0;let T,k;d.kind===iM.Parameter?(T=Vo(mCe),k=Vo(pCe)):d.kind===iM.Type?(T=Vo(gCe),k=Vo(fCe)):(T=Vo(Pw),k=Vo(Mw));const M=this._ruleFactory.createClassNameRef({fontSize:`${n}px`,margin:`0px ${x}px 0px ${S}px`,fontFamily:`var(${a}), ${nu.fontFamily}`,padding:`1px ${Math.max(1,n/4)|0}px`,borderRadius:`${n/4|0}px`,verticalAlign:"middle",backgroundColor:T,color:k});let W="before",F=le.fromPositions(p),Q=o.getWordAtPosition(p),z=!1;if(Q&&(Q.endColumn===p.column?(W="after",z=!0,F=jee(Q,p.lineNumber)):Q.startColumn===p.column&&(z=!0,F=jee(Q,p.lineNumber))),s.push({decoration:{range:F,options:{[W]:{content:W9e(h),inlineClassNameAffectsLetterSpacing:!0,inlineClassName:M.className},description:"InlayHint",showIfCollapsed:!z,stickiness:0}},classNameRef:M}),s.length>B9e)break}const l=[];for(const d of e)for(const{id:h}of o.getDecorationsInRange(d,this._decorationOwnerId,!0)){const p=this._decorationsMetadata.get(h);p&&(l.push(h),p.classNameRef.dispose(),this._decorationsMetadata.delete(h))}const u=o.deltaDecorations(l,s.map(d=>d.decoration),this._decorationOwnerId);for(let d=0;d<u.length;d++)this._decorationsMetadata.set(u[d],{hint:t[d],classNameRef:s[d].classNameRef})}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(45);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const i=e.fontFamily||this._editor.getOption(42);return{fontSize:n,fontFamily:i}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}}Px.ID="editor.contrib.InlayHints";Px._decorationOwnerIdPool=0;function jee(r,e){return new le(e,r.startColumn,e,r.endColumn)}function W9e(r){const e="";return r.replace(/[ \t]/g,e)}br(Px.ID,Px);Yi.registerCommand("_executeInlayHintProvider",(r,...e)=>_P(void 0,void 0,void 0,function*(){const[t,n]=e;jr(qn.isUri(t)),jr(le.isIRange(n));const i=yield r.get(Fc).createModelReference(t);try{return yield ade(i.object.textEditorModel,[le.lift(n)],new sde,Oi.None)}finally{i.dispose()}}));class V9e{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new ln(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new ln(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var H9e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},U9e=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let $C=class uU{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(uU.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let o=n;if(o.startLineNumber!==o.endLineNumber)return;const s=new vse(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=fl(l=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!s.validate(this.editor))return;let u=le.lift(l.range),d=l.range,h=l.value.length-(o.endColumn-o.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},h>1&&(o=new ln(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+h-1));const p=new V9e(u,o,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:d,options:uU.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=xC(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(ti)}).catch(ti)):Promise.resolve(void 0)}};$C.ID="editor.contrib.inPlaceReplaceController";$C.DECORATION=pi.register({description:"in-place-replace",className:"valueSetReplacement"});$C=H9e([U9e(1,Fh)],$C);class z9e extends gn{constructor(){super({id:"editor.action.inPlaceReplace.up",label:E("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=$C.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class $9e extends gn{constructor(){super({id:"editor.action.inPlaceReplace.down",label:E("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=$C.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}br($C.ID,$C);Wt(z9e);Wt($9e);mo((r,e)=>{const t=r.getColor(qoe);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class j9e extends gn{constructor(){super({id:"expandLineSelection",label:E("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:Le.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,ul.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}Wt(j9e);class q9e{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=K9e(e,this._cursors);for(let i=0,o=n.length;i<o;i++){let s=n[i];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function K9e(r,e){e.sort((s,a)=>s.lineNumber===a.lineNumber?s.column-a.column:s.lineNumber-a.lineNumber);for(let s=e.length-2;s>=0;s--)e[s].lineNumber===e[s+1].lineNumber&&e.splice(s,1);let t=[],n=0,i=0,o=e.length;for(let s=1,a=r.getLineCount();s<=a;s++){let l=r.getLineContent(s),u=l.length+1,d=0;if(i<o&&e[i].lineNumber===s&&(d=e[i].column,i++,d===u)||l.length===0)continue;let h=Iv(l),p=0;if(h===-1)p=1;else if(h!==l.length-1)p=h+2;else continue;p=Math.max(d,p),t[n++]=ss.delete(new le(s,p,s,u))}return t}class lde{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let i=[];for(let s=n.startLineNumber;s<=n.endLineNumber;s++)i.push(e.getLineContent(s));const o=i.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new le(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new le(n.startLineNumber,1,n.startLineNumber,1),o+`
`):t.addEditOperation(new le(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,o=n.startColumn,s=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),n=ln.createWithDirection(i,o,s,a,this._selectionDirection)}return n}}class G9e{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:a}=e.getOptions();let l=this.buildIndentConverter(o,s,a),u={getLineTokens:d=>e.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,h)=>e.getLanguageIdAtPosition(d,h),getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){let d=i.startLineNumber,h=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new le(1,1,1,1),null):(t.addEditOperation(new le(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new le(h,1,h,e.getLineMaxColumn(h)),null)),i=new ln(h,1,h,1)}else{let d,h;if(this._isMovingDown){d=i.endLineNumber+1,h=e.getLineContent(d),t.addEditOperation(new le(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let p=h;if(this.shouldAutoIndent(e,i)){let _=this.matchEnterRule(e,l,o,d,i.startLineNumber-1);if(_!==null){let S=Vr(e.getLineContent(d)),x=_+_d(S,o);p=LT(x,o,a)+this.trimLeft(h)}else{u.getLineContent=x=>x===i.startLineNumber?e.getLineContent(d):e.getLineContent(x);let S=fr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(d,1),i.startLineNumber,l);if(S!==null){let x=Vr(e.getLineContent(d)),T=_d(S,o),k=_d(x,o);T!==k&&(p=LT(T,o,a)+this.trimLeft(h))}}t.addEditOperation(new le(i.startLineNumber,1,i.startLineNumber,1),p+`
`);let C=this.matchEnterRuleMovingDown(e,l,o,i.startLineNumber,d,p);if(C!==null)C!==0&&this.getIndentEditsOfMovingBlock(e,t,i,o,a,C);else{u.getLineContent=x=>x===i.startLineNumber?p:x>=i.startLineNumber+1&&x<=i.endLineNumber+1?e.getLineContent(x-1):e.getLineContent(x);let S=fr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(d,1),i.startLineNumber+1,l);if(S!==null){const x=Vr(e.getLineContent(i.startLineNumber)),T=_d(S,o),k=_d(x,o);if(T!==k){const M=T-k;this.getIndentEditsOfMovingBlock(e,t,i,o,a,M)}}}}else t.addEditOperation(new le(i.startLineNumber,1,i.startLineNumber,1),p+`
`)}else if(d=i.startLineNumber-1,h=e.getLineContent(d),t.addEditOperation(new le(d,1,d+1,1),null),t.addEditOperation(new le(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+h),this.shouldAutoIndent(e,i)){u.getLineContent=_=>_===d?e.getLineContent(i.startLineNumber):e.getLineContent(_);let p=this.matchEnterRule(e,l,o,i.startLineNumber,i.startLineNumber-2);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,i,o,a,p);else{let _=fr.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(i.startLineNumber,1),d,l);if(_!==null){let C=Vr(e.getLineContent(i.startLineNumber)),S=_d(_,o),x=_d(C,o);if(S!==x){let T=S-x;this.getIndentEditsOfMovingBlock(e,t,i,o,a,T)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Ih.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Ih.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,o){if(o){let s=o.indentation;o.indentAction===Ts.None||o.indentAction===Ts.Indent?s=o.indentation+o.appendText:o.indentAction===Ts.IndentOutdent?s=o.indentation:o.indentAction===Ts.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);let a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(s))>=0){let l=Vr(e.getLineContent(i)),u=Vr(s),d=fr.getIndentMetadata(e,i);d!==null&&d&2&&(u=t.unshiftIndent(u));let h=_d(u,n),p=_d(l,n);return h-p}}return null}matchEnterRuleMovingDown(e,t,n,i,o,s){if(Iv(s)>=0){let a=e.getLineMaxColumn(o),l=fr.getEnterAction(this._autoIndent,e,new le(o,a,o,a));return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){let d=e.getLineContent(a);if(Iv(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),u=fr.getEnterAction(this._autoIndent,e,new le(a,l,a,l));return this.parseEnterResult(e,t,n,i,u)}}matchEnterRule(e,t,n,i,o,s){let a=o;for(;a>=1;){let d;if(a===o&&s!==void 0?d=s:d=e.getLineContent(a),Iv(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),u=fr.getEnterAction(this._autoIndent,e,new le(a,l,a,l));return this.parseEnterResult(e,t,n,i,u)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||fr.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,i,o,s){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let l=e.getLineContent(a),u=Vr(l),h=_d(u,i)+s,p=LT(h,i,o);p!==u&&(t.addEditOperation(new le(a,1,a,u.length+1),p),a===n.endLineNumber&&n.endColumn<=u.length+1&&p===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}class wC{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return wC._COLLATOR||(wC._COLLATOR=new Intl.Collator),wC._COLLATOR}getEditOperations(e,t){let n=Y9e(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let i=ude(e,t,n);if(!i)return!1;for(let o=0,s=i.before.length;o<s;o++)if(i.before[o]!==i.after[o])return!0;return!1}}wC._COLLATOR=null;function ude(r,e,t){let n=e.startLineNumber,i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;let o=[];for(let a=n;a<=i;a++)o.push(r.getLineContent(a));let s=o.slice(0);return s.sort(wC.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:n,endLineNumber:i,before:o,after:s}}function Y9e(r,e,t){let n=ude(r,e,t);return n?ss.replace(new le(n.startLineNumber,1,n.endLineNumber,r.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class cde extends gn{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));n.sort((s,a)=>le.compareRangesUsingStarts(s.selection,a.selection));let i=n[0];for(let s=1;s<n.length;s++){const a=n[s];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const o=[];for(const s of n)o.push(new lde(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Z9e extends cde{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:E("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"2_line",title:E({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class X9e extends cde{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:E("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"2_line",title:E({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class Q9e extends gn{constructor(){super({id:"editor.action.duplicateSelection",label:E("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:Le.writable,menuOpts:{menuId:wn.MenubarSelectionMenu,group:"2_line",title:E({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())i.push(new lde(a,!0));else{const l=new ln(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new ELe(l,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class dde extends gn{constructor(e,t){super(t),this.down=e}run(e,t){let n=[],i=t.getSelections()||[];const o=t.getOption(9);for(const s of i)n.push(new G9e(s,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class J9e extends dde{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:E("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"2_line",title:E({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class eWe extends dde{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:E("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"2_line",title:E({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class hde extends gn{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const o of n)if(!wC.canRun(t.getModel(),o,this.descending))return;let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=new wC(n[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class tWe extends hde{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:E("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:Le.writable})}}class nWe extends hde{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:E("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:Le.writable})}}class iWe extends gn{constructor(){super({id:"editor.action.removeDuplicateLines",label:E("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:Le.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let i=[],o=[],s=0;for(let a of t.getSelections()){let l=new Set,u=[];for(let _=a.startLineNumber;_<=a.endLineNumber;_++){let C=n.getLineContent(_);l.has(C)||(u.push(C),l.add(C))}let d=new ln(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-s,p=new ln(h,1,h+u.length-1,u[u.length-1].length);i.push(ss.replace(d,u.join(`
`))),o.push(p),s+=a.endLineNumber-a.startLineNumber+1-u.length}t.pushUndoStop(),t.executeEdits(this.id,i,o),t.pushUndoStop()}}class zF extends gn{constructor(){super({id:zF.ID,label:E("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:_s(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new Ge(a.positionLineNumber,a.positionColumn)));let o=t.getSelection();if(o===null)return;let s=new q9e(o,i);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}zF.ID="editor.action.trimTrailingWhitespace";class rWe extends gn{constructor(){super({id:"editor.action.deleteLines",label:E("lines.delete","Delete Line"),alias:"Delete Line",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let o=0,s=[],a=[];for(let l=0,u=n.length;l<u;l++){const d=n[l];let h=d.startLineNumber,p=d.endLineNumber,_=1,C=i.getLineMaxColumn(p);p<i.getLineCount()?(p+=1,C=1):h>1&&(h-=1,_=i.getLineMaxColumn(h)),s.push(ss.replace(new ln(h,_,p,C),"")),a.push(new ln(h-o,d.positionColumn,h-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(o=>{let s=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(s-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:s,positionColumn:o.positionColumn}});t.sort((o,s)=>o.startLineNumber===s.startLineNumber?o.endLineNumber-s.endLineNumber:o.startLineNumber-s.startLineNumber);let n=[],i=t[0];for(let o=1;o<t.length;o++)i.endLineNumber+1>=t[o].startLineNumber?i.endLineNumber=t[o].endLineNumber:(n.push(i),i=t[o]);return n.push(i),n}}class oWe extends gn{constructor(){super({id:"editor.action.indentLines",label:E("lines.indent","Indent Line"),alias:"Indent Line",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,qo.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class sWe extends gn{constructor(){super({id:"editor.action.outdentLines",label:E("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:2135,weight:100}})}run(e,t){$L.Outdent.runEditorCommand(e,t,null)}}class aWe extends gn{constructor(){super({id:"editor.action.insertLineBefore",label:E("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,qo.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class lWe extends gn{constructor(){super({id:"editor.action.insertLineAfter",label:E("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,qo.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class fde extends gn{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let i=this._getRangesToDelete(t),o=[];for(let l=0,u=i.length-1;l<u;l++){let d=i[l],h=i[l+1];le.intersectRanges(d,h)===null?o.push(d):i[l+1]=le.plusRange(d,h)}o.push(i[i.length-1]);let s=this._getEndCursorState(n,o),a=o.map(l=>ss.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}}class uWe extends fde{constructor(){super({id:"deleteAllLeft",label:E("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,i=[],o=0;return t.forEach(s=>{let a;if(s.endColumn===1&&o>0){let l=s.startLineNumber-o;a=new ln(l,s.startColumn,l,s.startColumn)}else a=new ln(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);o+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,i=e.getModel();return i===null?[]:(n.sort(le.compareRangesUsingStarts),n=n.map(o=>{if(o.isEmpty())if(o.startColumn===1){let s=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:i.getLineContent(s).length+1;return new le(s,a,o.startLineNumber,1)}else return new le(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new le(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),n)}}class cWe extends fde{constructor(){super({id:"deleteAllRight",label:E("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,i=[];for(let o=0,s=t.length,a=0;o<s;o++){let l=t[o],u=new ln(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=u:i.push(u)}return n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let i=n.map(o=>{if(o.isEmpty()){const s=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===s?new le(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new le(o.startLineNumber,o.startColumn,o.startLineNumber,s)}return o});return i.sort(le.compareRangesUsingStarts),i}}class dWe extends gn{constructor(){super({id:"editor.action.joinLines",label:E("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:Le.writable,kbOpts:{kbExpr:Le.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(le.compareRangesUsingStarts);let o=[],s=n.reduce((p,_)=>p.isEmpty()?p.endLineNumber===_.startLineNumber?(i.equalsSelection(p)&&(i=_),_):_.startLineNumber>p.endLineNumber+1?(o.push(p),_):new ln(p.startLineNumber,p.startColumn,_.endLineNumber,_.endColumn):_.startLineNumber>p.endLineNumber?(o.push(p),_):new ln(p.startLineNumber,p.startColumn,_.endLineNumber,_.endColumn));o.push(s);let a=t.getModel();if(a===null)return;let l=[],u=[],d=i,h=0;for(let p=0,_=o.length;p<_;p++){let C=o[p],S=C.startLineNumber,x=1,T=0,k,M,W=a.getLineContent(C.endLineNumber).length-C.endColumn;if(C.isEmpty()||C.startLineNumber===C.endLineNumber){let z=C.getStartPosition();z.lineNumber<a.getLineCount()?(k=S+1,M=a.getLineMaxColumn(k)):(k=z.lineNumber,M=a.getLineMaxColumn(z.lineNumber))}else k=C.endLineNumber,M=a.getLineMaxColumn(k);let F=a.getLineContent(S);for(let z=S+1;z<=k;z++){let $=a.getLineContent(z),G=a.getLineFirstNonWhitespaceColumn(z);if(G>=1){let Y=!0;F===""&&(Y=!1),Y&&(F.charAt(F.length-1)===" "||F.charAt(F.length-1)==="	")&&(Y=!1,F=F.replace(/[\s\uFEFF\xA0]+$/g," "));let I=$.substr(G-1);F+=(Y?" ":"")+I,Y?T=I.length+1:T=I.length}else T=0}let Q=new le(S,x,k,M);if(!Q.isEmpty()){let z;C.isEmpty()?(l.push(ss.replace(Q,F)),z=new ln(Q.startLineNumber-h,F.length-T+1,S-h,F.length-T+1)):C.startLineNumber===C.endLineNumber?(l.push(ss.replace(Q,F)),z=new ln(C.startLineNumber-h,C.startColumn,C.endLineNumber-h,C.endColumn)):(l.push(ss.replace(Q,F)),z=new ln(C.startLineNumber-h,C.startColumn,C.startLineNumber-h,F.length-W)),le.intersectRanges(Q,i)!==null?d=z:u.push(z)}h+=Q.endLineNumber-Q.startLineNumber}u.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,u),t.pushUndoStop()}}class hWe extends gn{constructor(){super({id:"editor.action.transpose",label:E("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:Le.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getModel();if(i===null)return;let o=[];for(let s=0,a=n.length;s<a;s++){let l=n[s];if(!l.isEmpty())continue;let u=l.getStartPosition(),d=i.getLineMaxColumn(u.lineNumber);if(u.column>=d){if(u.lineNumber===i.getLineCount())continue;let h=new le(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),p=i.getValueInRange(h).split("").reverse().join("");o.push(new Il(new ln(u.lineNumber,Math.max(1,u.column-1),u.lineNumber+1,1),p))}else{let h=new le(u.lineNumber,Math.max(1,u.column-1),u.lineNumber,u.column+1),p=i.getValueInRange(h).split("").reverse().join("");o.push(new g$(h,p,new ln(u.lineNumber,u.column+1,u.lineNumber,u.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class $F extends gn{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const o=t.getOption(116),s=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),u=t.getConfiguredWordAtPosition(l);if(!u)continue;const d=new le(l.lineNumber,u.startColumn,l.lineNumber,u.endColumn),h=i.getValueInRange(d);s.push(ss.replace(d,this._modifyText(h,o)))}else{const l=i.getValueInRange(a);s.push(ss.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class fWe extends $F{constructor(){super({id:"editor.action.transformToUppercase",label:E("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:Le.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class gWe extends $F{constructor(){super({id:"editor.action.transformToLowercase",label:E("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:Le.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class fq{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class HN extends $F{constructor(){super({id:"editor.action.transformToTitlecase",label:E("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:Le.writable})}_modifyText(e,t){const n=HN.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}HN.titleBoundary=new fq("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class SC extends $F{constructor(){super({id:"editor.action.transformToSnakecase",label:E("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:Le.writable})}_modifyText(e,t){const n=SC.caseBoundary.get(),i=SC.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}SC.caseBoundary=new fq("(\\p{Ll})(\\p{Lu})","gmu");SC.singleLetters=new fq("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");Wt(Z9e);Wt(X9e);Wt(Q9e);Wt(J9e);Wt(eWe);Wt(tWe);Wt(nWe);Wt(iWe);Wt(zF);Wt(rWe);Wt(oWe);Wt(sWe);Wt(aWe);Wt(lWe);Wt(uWe);Wt(cWe);Wt(dWe);Wt(hWe);Wt(fWe);Wt(gWe);SC.caseBoundary.isSupported()&&SC.singleLetters.isSupported()&&Wt(SC);HN.titleBoundary.isSupported()&&Wt(HN);var pWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mWe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},cU=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const gde=new _n("LinkedEditingInputVisible",!1),pde="linked-editing-decoration";let jC=class dU extends ot{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new Nt),this._editor=e,this._enabled=!1,this._visibleContextKey=gde.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Nt),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(n=>{(n.hasChanged(61)||n.hasChanged(81))&&this.reinitialize(!1)})),this._register(sM.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(dU.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&sM.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._languageWordPattern=fr.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=fr.getWordDefinition(t.getLanguageId())}));const i=new Kb(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),this._debounceDuration)},s=new Kb(0),a=l=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const u=t.getDecorationRange(this._currentDecorations[0]);if(u&&l.changes.every(d=>u.intersectRanges(d.range))){a(this._currentDecorations);return}}o()})),this._localToDispose.add({dispose:()=>{i.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const s=i.match(this._currentWordPattern);if((s?s[0].length:0)!==i.length)return this.clearRanges()}let o=[];for(let s=1,a=e.length;s<a;s++){const l=t.getDecorationRange(e[s]);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:i});else{let u=t.getValueInRange(l),d=i,h=l.startColumn,p=l.endColumn;const _=ax(u,d);h+=_,u=u.substr(_),d=d.substr(_);const C=HR(u,d);p-=C,u=u.substr(0,u.length-C),d=d.substr(0,d.length-C),(h!==p||d.length!==0)&&o.push({range:new le(l.startLineNumber,h,l.endLineNumber,p),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return cU(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const s=n.getDecorationRange(this._currentDecorations[0]);if(s&&s.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const o=fl(s=>cU(this,void 0,void 0,function*(){try{const a=yield mde(n,t,s);if(o!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let u=!1;for(let h=0,p=l.length;h<p;h++)if(le.containsPosition(l[h],t)){if(u=!0,h!==0){const _=l[h];l.splice(h,1),l.unshift(_)}break}if(!u){this.clearRanges();return}const d=l.map(h=>({range:h,options:dU.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,d)}catch(a){Zv(a)||ti(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}};jC.ID="editor.contrib.linkedEditing";jC.DECORATION=pi.register({description:"linked-editing",stickiness:0,className:pde});jC=pWe([mWe(1,Jn)],jC);class _We extends gn{constructor(){super({id:"editor.action.linkedEditing",label:E("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Xt.and(Le.writable,Le.hasRenameProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(vr),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return qn.isUri(i)&&Ge.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},ti):super.runCommand(e,t)}run(e,t){const n=jC.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const vWe=Fl.bindToContribution(jC.get);Mt(new vWe({id:"cancelLinkedEditingInput",precondition:gde,handler:r=>r.clearRanges(),kbOpts:{kbExpr:Le.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function mde(r,e,t){const n=sM.ordered(r);return Oie(n.map(i=>()=>cU(this,void 0,void 0,function*(){try{return yield i.provideLinkedEditingRanges(r,e,t)}catch(o){Pl(o);return}})),i=>!!i&&Ed(i==null?void 0:i.ranges))}const bWe=Be("editor.linkedEditingBackground",{dark:je.fromHex("#f00").transparent(.3),light:je.fromHex("#f00").transparent(.3),hc:je.fromHex("#f00").transparent(.3)},E("editorLinkedEditingBackground","Background color when the editor auto renames on type."));mo((r,e)=>{const t=r.getColor(bWe);t&&e.addRule(`.monaco-editor .${pde} { background: ${t}; border-left-color: ${t}; }`)});Jv("_executeLinkedEditingProvider",(r,e)=>mde(r,e,Oi.None));br(jC.ID,jC);Wt(_We);var _de=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class CWe{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return _de(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class bP{constructor(e){this._disposables=new Nt;let t=[];for(const[n,i]of e){const o=n.links.map(s=>new CWe(s,i));t=bP._union(t,o),iz(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],i,o,s,a;for(i=0,s=0,o=e.length,a=t.length;i<o&&s<a;){const l=e[i],u=t[s];if(le.areIntersectingOrTouching(l.range,u.range)){i++;continue}le.compareRangesUsingStarts(l.range,u.range)<0?(n.push(l),i++):(n.push(u),s++)}for(;i<o;i++)n.push(e[i]);for(;s<a;s++)n.push(t[s]);return n}}function vde(r,e){const t=[],n=UT.ordered(r).reverse().map((i,o)=>Promise.resolve(i.provideLinks(r,e)).then(s=>{s&&(t[o]=[s,i])},Pl));return Promise.all(n).then(()=>{const i=new bP(tD(t));return e.isCancellationRequested?(i.dispose(),new bP([])):i})}Yi.registerCommand("_executeLinkProvider",(r,...e)=>_de(void 0,void 0,void 0,function*(){let[t,n]=e;jr(t instanceof qn),typeof n!="number"&&(n=0);const i=r.get(ua).getModel(t);if(!i)return[];const o=yield vde(i,Oi.None);if(!o)return[];for(let a=0;a<Math.min(n,o.links.length);a++)yield o.links[a].resolve(Oi.None);const s=o.links.slice(0);return o.dispose(),s}));var yWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},wWe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};function SWe(r,e){const t=r.url&&/^command:/i.test(r.url.toString()),n=r.tooltip?r.tooltip:t?E("links.navigate.executeCmd","Execute command"):E("links.navigate.follow","Follow link"),i=e?ji?E("links.navigate.kb.meta.mac","cmd + click"):E("links.navigate.kb.meta","ctrl + click"):ji?E("links.navigate.kb.alt.mac","option + click"):E("links.navigate.kb.alt","alt + click");if(r.url){let o="";if(/^command:/i.test(r.url.toString())){const a=r.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=` "${E("tooltip.explanation","Execute command {0}",l)}"`}}return new Zb("",!0).appendMarkdown(`[${n}](${r.url.toString(!0).replace(/ /g,"%20")}${o}) (${i})`)}else return new Zb().appendText(`${n} (${i})`)}const Kee={general:pi.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:pi.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class QL{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:QL._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?Kee.active:Kee.general);return i.hoverMessage=SWe(e,t),i}activate(e,t){e.changeDecorationOptions(this.decorationId,QL._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,QL._getOptions(this.link,t,!1))}}let AS=class hU{constructor(e,t,n){this.listenersToRemove=new Nt,this.editor=e,this.openerService=t,this.notificationService=n;let i=new Sue(e);this.listenersToRemove.add(i),this.listenersToRemove.add(i.onMouseMoveOrRelevantKeyDown(([o,s])=>{this._onEditorMouseMove(o,s)})),this.listenersToRemove.add(i.onExecute(o=>{this.onEditorMouseUp(o)})),this.listenersToRemove.add(i.onCancel(o=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(o=>{const s=e.getOption(62);this.enabled!==s&&(this.enabled=s,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(o=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(o=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(o=>this.onModelModeChanged())),this.listenersToRemove.add(UT.onDidChange(o=>this.onModelModeChanged())),this.timeout=new uc,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(hU.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),hU.RECOMPUTE_TIME)}beginCompute(){return wWe(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(UT.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=fl(t=>vde(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){ti(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(69)==="altKey";let n=[],i=Object.keys(this.currentOccurrences);for(let a=0,l=i.length;a<l;a++){let u=i[a],d=this.currentOccurrences[u];n.push(d.decorationId)}let o=[];if(e)for(const a of e)o.push(QL.decoration(a,t));let s=this.editor.deltaDecorations(n,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,l=s.length;a<l;a++){let u=new QL(e[a],s[a]);this.currentOccurrences[u.decorationId]=u}}_onEditorMouseMove(e,t){const n=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(o=>{i.activate(o,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(Oi.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const s=this.editor.getModel().uri;if(s.scheme===Si.file&&o.startsWith(`${Si.file}:`)){const a=qn.parse(o);if(a.scheme===Si.file){const l=WO(a);let u=null;l.startsWith("/./")?u=`.${l.substr(1)}`:l.startsWith("//./")&&(u=`.${l.substr(2)}`),u&&(o=ewe(s,u))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},o=>{const s=o instanceof Error?o.message:o;s==="invalid"?this.notificationService.warn(E("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):s==="missing"?this.notificationService.warn(E("missing.url","Failed to open this link because its target is missing.")):ti(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};AS.ID="editor.linkDetector";AS.RECOMPUTE_TIME=1e3;AS=yWe([qee(1,Nd),qee(2,As)],AS);class EWe extends gn{constructor(){super({id:"editor.action.openLink",label:E("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=AS.get(t);if(!n||!t.hasModel())return;let i=t.getSelections();for(let o of i){let s=n.getLinkOccurrence(o.getEndPosition());s&&n.openLinkOccurrence(s,!1)}}}br(AS.ID,AS);Wt(EWe);mo((r,e)=>{const t=r.getColor(Jre);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function CD(r,e){const t=e.filter(n=>!r.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),i=t.length===1?E("cursorAdded","Cursor added: {0}",n):E("cursorsAdded","Cursors added: {0}",n);PR(i)}}class LWe extends gn{constructor(){super({id:"editor.action.insertCursorAbove",label:E("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,ul.addCursorUp(o,s,i)),o.revealTopMostCursor(n.source),CD(s,o.getCursorStates())}}class xWe extends gn{constructor(){super({id:"editor.action.insertCursorBelow",label:E("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,ul.addCursorDown(o,s,i)),o.revealBottomMostCursor(n.source),CD(s,o.getCursorStates())}}class DWe extends gn{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:E("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){let o=t.getLineMaxColumn(i);n.push(new ln(i,o,i,o))}e.endColumn>1&&n.push(new ln(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates();let a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),CD(s,o.getCursorStates())}}class IWe extends gn{constructor(){super({id:"editor.action.addCursorsToBottom",label:E("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount();let o=[];for(let l=n[0].startLineNumber;l<=i;l++)o.push(new ln(l,n[0].startColumn,l,n[0].endColumn));const s=t._getViewModel(),a=s.getCursorStates();o.length>0&&t.setSelections(o),CD(a,s.getCursorStates())}}class kWe extends gn{constructor(){super({id:"editor.action.addCursorsToTop",label:E("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new ln(a,n[0].startColumn,a,n[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();i.length>0&&t.setSelections(i),CD(s,o.getCursorStates())}}class CO{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class UN{constructor(e,t,n,i,o,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=o,this.matchCase=s,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new UN(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,o,s;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,o=!0,s=!0):(o=n.wholeWord,s=n.matchCase);const l=e.getSelection();let u,d=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;u=h.word,d=new ln(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else u=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new UN(e,t,i,u,o,s,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new CO(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new CO(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new ln(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new CO(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new CO(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new ln(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}class OS extends ot{constructor(e){super(),this._sessionDispose=this._register(new Nt),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(OS.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=UN.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new ln(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!bde(this._editor.getModel(),t,i)){const s=this._editor.getModel();let a=[];for(let l=0,u=t.length;l<u;l++)a[l]=this._expandEmptyToWord(s,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const i=n.searchScope;let o=[];t.forEach(s=>{i.forEach(a=>{s.range.endLineNumber<=a.endLineNumber&&s.range.startLineNumber>=a.startLineNumber&&o.push(s)})}),t=o}if(t.length>0){const i=this._editor.getSelection();for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a.range.intersectRanges(i)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new ln(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}OS.ID="editor.contrib.multiCursorController";class yD extends gn{run(e,t){const n=OS.get(t);if(!n)return;const i=Rd.get(t);if(!i)return;const o=t._getViewModel();if(o){const s=o.getCursorStates();this._run(n,i),CD(s,o.getCursorStates())}}}class TWe extends yD{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:E("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:2082,weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class NWe extends yD{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:E("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class AWe extends yD{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:E("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:_s(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class OWe extends yD{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:E("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class RWe extends yD{constructor(){super({id:"editor.action.selectHighlights",label:E("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:3114,weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"3_multi",title:E({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class MWe extends yD{constructor(){super({id:"editor.action.changeAll",label:E("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Xt.and(Le.writable,Le.editorTextFocus),kbOpts:{kbExpr:Le.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class PWe{constructor(e,t,n,i,o){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(le.compareRangesUsingStarts)),this._cachedFindMatches}}class Ub extends ot{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new Xr(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Rd.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Ub._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const o=OS.get(n);if(!o)return null;const s=Rd.get(n);if(!s)return null;let a=o.getSession(s);if(!a){const d=n.getSelections();if(d.length>1){const p=s.getState().matchCase;if(!bde(n.getModel(),d,p))return null}a=UN.create(n,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=s.getState(),u=l.matchCase;if(l.isRevealed){let d=l.searchString;u||(d=d.toLowerCase());let h=a.searchText;if(u||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new PWe(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(116):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(le.compareRangesUsingStarts);const o=[];for(let l=0,u=0,d=n.length,h=i.length;l<d;){const p=n[l];if(u>=h)o.push(p),l++;else{const _=le.compareRangesUsingStarts(p,i[u]);_<0?((i[u].isEmpty()||!le.areIntersecting(p,i[u]))&&o.push(p),l++):(_>0||l++,u++)}}const s=cx.has(t)&&this.editor.getOption(71),a=o.map(l=>({range:l,options:s?Ub._SELECTION_HIGHLIGHT:Ub._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Ub.ID="editor.contrib.selectionHighlighter";Ub._SELECTION_HIGHLIGHT_OVERVIEW=pi.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Vo(d4),position:Ld.Inline},overviewRuler:{color:Vo(noe),position:kd.Center}});Ub._SELECTION_HIGHLIGHT=pi.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function bde(r,e,t){const n=Gee(r,e[0],!t);for(let i=1,o=e.length;i<o;i++){const s=e[i];if(s.isEmpty())return!1;const a=Gee(r,s,!t);if(n!==a)return!1}return!0}function Gee(r,e,t){const n=r.getValueInRange(e);return t?n.toLowerCase():n}br(OS.ID,OS);br(Ub.ID,Ub);Wt(LWe);Wt(xWe);Wt(DWe);Wt(TWe);Wt(NWe);Wt(AWe);Wt(OWe);Wt(RWe);Wt(MWe);Wt(IWe);Wt(kWe);var Cde=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const RS={Visible:new _n("parameterHintsVisible",!1),MultipleSignatures:new _n("parameterHintsMultipleSignatures",!1)};function yde(r,e,t,n){return Cde(this,void 0,void 0,function*(){const i=Ww.ordered(r);for(const o of i)try{const s=yield o.provideSignatureHelp(r,e,n,t);if(s)return s}catch(s){Pl(s)}})}Yi.registerCommand("_executeSignatureHelpProvider",(r,...e)=>Cde(void 0,void 0,void 0,function*(){const[t,n,i]=e;jr(qn.isUri(t)),jr(Ge.isIPosition(n)),jr(typeof i=="string"||!i);const o=yield r.get(Fc).createModelReference(t);try{const s=yield yde(o.object.textEditorModel,Ge.lift(n),{triggerKind:Tv.Invoke,isRetrigger:!1,triggerCharacter:i},Oi.None);return s?(setTimeout(()=>s.dispose(),0),s.value):void 0}finally{o.dispose()}}));var FWe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},tC;(function(r){r.Default={type:0};class e{constructor(i,o){this.request=i,this.previouslyActiveHints=o,this.type=2}}r.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}r.Active=t})(tC||(tC={}));class jF extends ot{constructor(e,t=jF.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Fe),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=tC.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new lc),this.triggerChars=new fL,this.retriggerChars=new fL,this.triggerId=0,this.editor=e,this.throttledDelayer=new Kb(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(Ww.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=tC.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!Ww.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(ti)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(75).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(75).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new tC.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return FWe(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(BWe);this._pendingTriggers=[];const o={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const s=this.editor.getModel(),a=this.editor.getPosition();this.state=new tC.Pending(fl(l=>yde(s,a,o,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new tC.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=tC.Default),ti(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new fL,this.retriggerChars=new fL;const e=this.editor.getModel();if(e)for(const t of Ww.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Tv.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Tv.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Tv.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}jF.DEFAULT_DELAY=120;function BWe(r,e){switch(e.triggerKind){case Tv.Invoke:return e;case Tv.ContentChange:return r;case Tv.TriggerCharacter:default:return e}}var WWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},z7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const wh=Lt,VWe=gl("parameter-hints-next",Ae.chevronDown,E("parameterHintsNextIcon","Icon for show next parameter hint.")),HWe=gl("parameter-hints-previous",Ae.chevronUp,E("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let CP=class wde extends ot{constructor(e,t,n,i){super(),this.editor=e,this.renderDisposeables=this._register(new Nt),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Jb({editor:e},i,n)),this.model=this._register(new jF(e)),this.keyVisible=RS.Visible.bindTo(t),this.keyMultipleSignatures=RS.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(o=>{o?(this.show(),this.render(o)):this.hide()}))}createParameterHintDOMNodes(){const e=wh(".editor-widget.parameter-hints-widget"),t=ft(e,wh(".phwrapper"));t.tabIndex=-1;const n=ft(t,wh(".controls")),i=ft(n,wh(".button"+So.asCSSSelector(HWe))),o=ft(n,wh(".overloads")),s=ft(n,wh(".button"+So.asCSSSelector(VWe)));this._register(kt(i,"click",p=>{xr.stop(p),this.previous()})),this._register(kt(s,"click",p=>{xr.stop(p),this.next()}));const a=wh(".body"),l=new y2(a,{});this._register(l),t.appendChild(l.getDomNode());const u=ft(a,wh(".signature")),d=ft(a,wh(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:u,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(p=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=()=>{if(!this.domNodes)return;const p=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${p.fontSize}px`,this.domNodes.element.style.lineHeight=`${p.lineHeight/p.fontSize}`};h(),this._register(Sn.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(p=>p.hasChanged(43)).on(h,null)),this._register(this.editor.onDidLayoutChange(p=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const o=ft(this.domNodes.signature,wh(".code")),s=this.editor.getOption(43);o.style.fontSize=`${s.fontSize}px`,o.style.fontFamily=s.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,i,l);else{const h=ft(o,wh("span"));h.textContent=i.label}const u=i.parameters[l];if(u!=null&&u.documentation){const h=wh("span.documentation");if(typeof u.documentation=="string")h.textContent=u.documentation;else{const p=this.renderMarkdownDocs(u.documentation);h.appendChild(p.element)}ft(this.domNodes.docs,wh("p",{},h))}if(i.documentation!==void 0)if(typeof i.documentation=="string")ft(this.domNodes.docs,wh("p",{},i.documentation));else{const h=this.renderMarkdownDocs(i.documentation);ft(this.domNodes.docs,h.element)}const d=this.hasDocs(i,u);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,u){let h="";const p=i.parameters[l];Array.isArray(p.label)?h=i.label.substring(p.label[0],p.label[1]):h=p.label,p.documentation&&(h+=typeof p.documentation=="string"?`, ${p.documentation}`:`, ${p.documentation.value}`),i.documentation&&(h+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==h&&(Tl(E("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&_A(t.documentation).length>0||t&&typeof t.documentation=="object"&&_A(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&_A(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&_A(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,o]=this.getParameterLabelOffsets(t,n),s=document.createElement("span");s.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),ft(e,s,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Vf(n.label)}(?=\\W|$)`,"g");i.test(e.label);const o=i.lastIndex-n.label.length;return o>=0?[o,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return wde.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};CP.ID="editor.widget.parameterHintsWidget";CP=WWe([z7(1,Jn),z7(2,Nd),z7(3,Bl)],CP);const UWe=Be("editorHoverWidget.highlightForeground",{dark:X3,light:X3,hc:X3},E("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));mo((r,e)=>{const t=r.getColor(zz);if(t){const u=r.type===tp.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${u}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=r.getColor(lS);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const i=r.getColor(a4);i&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${i}; }`);const o=r.getColor(l4);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);const s=r.getColor(Uz);s&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);const a=r.getColor(Ure);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=r.getColor(UWe);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var zWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$We=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let MS=class Sde extends ot{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(CP,this.editor))}static get(e){return e.getContribution(Sde.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};MS.ID="editor.controller.parameterHints";MS=zWe([$We(1,xi)],MS);class jWe extends gn{constructor(){super({id:"editor.action.triggerParameterHints",label:E("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:Le.hasSignatureHelpProvider,kbOpts:{kbExpr:Le.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=MS.get(t);n&&n.trigger({triggerKind:Tv.Invoke})}}br(MS.ID,MS);Wt(jWe);const gq=100+75,pq=Fl.bindToContribution(MS.get);Mt(new pq({id:"closeParameterHints",precondition:RS.Visible,handler:r=>r.cancel(),kbOpts:{weight:gq,kbExpr:Le.focus,primary:9,secondary:[1033]}}));Mt(new pq({id:"showPrevParameterHint",precondition:Xt.and(RS.Visible,RS.MultipleSignatures),handler:r=>r.previous(),kbOpts:{weight:gq,kbExpr:Le.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Mt(new pq({id:"showNextParameterHint",precondition:Xt.and(RS.Visible,RS.MultipleSignatures),handler:r=>r.next(),kbOpts:{weight:gq,kbExpr:Le.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var qWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const qF=new _n("renameInputVisible",!1,E("renameInputVisible","Whether the rename input widget is visible"));let fU=class{constructor(e,t,n,i,o){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new Nt,this.allowEditorOverflow=!0,this._visibleContextKey=qF.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",E("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[i,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=E({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(o))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,i,o;if(!this._input||!this._domNode)return;const s=e.getColor(NC);this._domNode.style.backgroundColor=String((t=e.getColor(pm))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=s?` 0 0 8px 2px ${s}`:"",this._domNode.style.color=String((n=e.getColor(Fz))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(Pz))!==null&&i!==void 0?i:"");const a=e.getColor(Bz);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a==null?void 0:a.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,i,o,s){this._domNode.classList.toggle("preview",o),this._position=new Ge(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Nt;return new Promise(l=>{this._currentCancelInput=u=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(u),!0),this._currentAcceptInput=u=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:o&&u})},s.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};fU=qWe([$7(2,Ho),$7(3,Ro),$7(4,Jn)],fU);var KWe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},Gw=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class mq{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=oM.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Gw(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let o=yield i.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}const n=this.model.getWordAtPosition(this.position);return n?{range:new le(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:le.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Gw(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return Gw(this,void 0,void 0,function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:n.join(`
`)};const s=yield o.provideRenameEdits(this.model,this.position,e,i);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(s.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(E("no result","No result.")),i);return s})}}function GWe(r,e,t){return Gw(this,void 0,void 0,function*(){const n=new mq(r,e),i=yield n.resolveRenameLocation(Oi.None);return i!=null&&i.rejectReason?{edits:[],rejectReason:i.rejectReason}:n.provideRenameEdits(t,Oi.None)})}let PS=class Ede{constructor(e,t,n,i,o,s,a){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=o,this._logService=s,this._configService=a,this._dispoableStore=new Nt,this._cts=new Ou,this._renameInputField=this._dispoableStore.add(new kL(()=>this._dispoableStore.add(this._instaService.createInstance(fU,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Ede.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return Gw(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new mq(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new sN(this.editor,5);let n;try{const d=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(d,250),n=yield d}catch(d){Rh.get(this.editor).showMessage(d||E("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!n)return;if(n.rejectReason){Rh.get(this.editor).showMessage(n.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new sN(this.editor,5,n.range);let i=this.editor.getSelection(),o=0,s=n.text.length;!le.isEmpty(i)&&!le.spansMultipleLines(i)&&le.containsRange(n.range,i)&&(o=Math.max(0,i.startColumn-n.range.startColumn),s=Math.min(n.range.endColumn,i.endColumn)-n.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),l=yield this._renameInputField.value.getInput(n.range,n.text,o,s,a,this._cts.token);if(typeof l=="boolean"){l&&this.editor.focus();return}this.editor.focus();const u=dz(t.provideRenameEdits(l.newName,this._cts.token),this._cts.token).then(d=>Gw(this,void 0,void 0,function*(){if(!(!d||!this.editor.hasModel())){if(d.rejectReason){this._notificationService.info(d.rejectReason);return}this.editor.setSelection(le.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(N4.convert(d),{editor:this.editor,showPreview:l.wantsPreview,label:E("label","Renaming '{0}'",n==null?void 0:n.text),quotableLabel:E("quotableLabel","Renaming {0}",n==null?void 0:n.text)}).then(h=>{h.ariaSummary&&Tl(E("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",n.text,l.newName,h.ariaSummary))}).catch(h=>{this._notificationService.error(E("rename.failedApply","Rename failed to apply edits")),this._logService.error(h)})}}),d=>{this._notificationService.error(E("rename.failed","Rename failed to compute edits")),this._logService.error(d)});return this._progressService.showWhile(u,250),u})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};PS.ID="editor.contrib.renameController";PS=KWe([eL(1,xi),eL(2,As),eL(3,T$),eL(4,n1),eL(5,Qv),eL(6,M$)],PS);class YWe extends gn{constructor(){super({id:"editor.action.rename",label:E("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Xt.and(Le.writable,Le.hasRenameProvider),kbOpts:{kbExpr:Le.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(vr),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return qn.isUri(i)&&Ge.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},ti):super.runCommand(e,t)}run(e,t){const n=PS.get(t);return n?n.run():Promise.resolve()}}br(PS.ID,PS);Wt(YWe);const _q=Fl.bindToContribution(PS.get);Mt(new _q({id:"acceptRenameInput",precondition:qF,handler:r=>r.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:Le.focus,primary:3}}));Mt(new _q({id:"acceptRenameInputWithPreview",precondition:Xt.and(qF,Xt.has("config.editor.rename.enablePreview")),handler:r=>r.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:Le.focus,primary:1024+3}}));Mt(new _q({id:"cancelRenameInput",precondition:qF,handler:r=>r.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:Le.focus,primary:9,secondary:[1033]}}));Jv("_executeDocumentRenameProvider",function(r,e,...t){const[n]=t;return jr(typeof n=="string"),GWe(r,e,n)});Jv("_executePrepareRename",function(r,e){return Gw(this,void 0,void 0,function*(){const n=yield new mq(r,e).resolveRenameLocation(Oi.None);if(n!=null&&n.rejectReason)throw new Error(n.rejectReason);return n})});vs.as(JS.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:E("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class ZWe{provideSelectionRanges(e,t){const n=[];for(const i of t){const o=[];n.push(o),this._addInWordRanges(o,e,i),this._addWordRanges(o,e,i),this._addWhitespaceLine(o,e,i),o.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;let{word:o,startColumn:s}=i,a=n.column-s,l=a,u=a,d=0;for(;l>=0;l--){let h=o.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(sC(h)&&sv(d))break;d=h}for(l+=1;u<o.length;u++){let h=o.charCodeAt(u);if(sv(h)&&sC(d))break;if(h===95||h===45)break;d=h}l<u&&e.push({range:new le(n.lineNumber,s+l,n.lineNumber,s+u)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new le(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new le(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var vq=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class bq{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new bq(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}class Fx{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(Fx.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return vq(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(!v4.has(n)||(this._state||(yield xde(n,t.map(o=>o.getPosition()),this._editor.getOption(101),Oi.None).then(o=>{var s;if(!(!Ed(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!Rf(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new bq(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(o=>o.mov(e));const i=this._state.map(o=>ln.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}}Fx.ID="editor.contrib.smartSelectController";class Lde extends gn{constructor(e,t){super(t),this._forward=e}run(e,t){return vq(this,void 0,void 0,function*(){let n=Fx.get(t);n&&(yield n.run(this._forward))})}}class XWe extends Lde{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:E("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"1_basic",title:E({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Yi.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class QWe extends Lde{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:E("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:Le.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:wn.MenubarSelectionMenu,group:"1_basic",title:E({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}br(Fx.ID,Fx);Wt(XWe);Wt(QWe);v4.register("*",new ZWe);function xde(r,e,t,n){return vq(this,void 0,void 0,function*(){const i=v4.all(r);i.length===1&&i.unshift(new Eh);let o=[],s=[];for(const a of i)o.push(Promise.resolve(a.provideSelectionRanges(r,e,n)).then(l=>{if(Ed(l)&&l.length===e.length)for(let u=0;u<e.length;u++){s[u]||(s[u]=[]);for(const d of l[u])le.isIRange(d.range)&&le.containsPosition(d.range,e[u])&&s[u].push(le.lift(d.range))}},Pl));return yield Promise.all(o),s.map(a=>{if(a.length===0)return[];a.sort((h,p)=>Ge.isBefore(h.getStartPosition(),p.getStartPosition())?1:Ge.isBefore(p.getStartPosition(),h.getStartPosition())||Ge.isBefore(h.getEndPosition(),p.getEndPosition())?-1:Ge.isBefore(p.getEndPosition(),h.getEndPosition())?1:0);let l=[],u;for(const h of a)(!u||le.containsRange(h,u)&&!le.equalsRange(h,u))&&(l.push(h),u=h);if(!t.selectLeadingAndTrailingWhitespace)return l;let d=[l[0]];for(let h=1;h<l.length;h++){const p=l[h-1],_=l[h];if(_.startLineNumber!==p.startLineNumber||_.endLineNumber!==p.endLineNumber){const C=new le(p.startLineNumber,r.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,r.getLineLastNonWhitespaceColumn(p.endLineNumber));C.containsRange(p)&&!C.equalsRange(p)&&_.containsRange(C)&&!_.equalsRange(C)&&d.push(C);const S=new le(p.startLineNumber,1,p.endLineNumber,r.getLineMaxColumn(p.endLineNumber));S.containsRange(p)&&!S.equalsRange(C)&&_.containsRange(S)&&!_.equalsRange(S)&&d.push(S)}d.push(_)}return d})})}_be("_executeSelectionRangeProvider",function(r,...e){const[t]=e;return xde(r,t,{selectLeadingAndTrailingWhitespace:!0},Oi.None)});class JWe extends gn{constructor(){super({id:"editor.action.forceRetokenize",label:E("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const i=new Ov(!0);n.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}Wt(JWe);class Bx extends gn{constructor(){super({id:Bx.ID,label:E({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!QR.getTabFocusMode();QR.setTabFocusMode(i),Tl(i?E("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):E("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}Bx.ID="editor.action.toggleTabFocusMode";Wt(Bx);var eVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Yee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},tVe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Dde="ignoreUnusualLineTerminators";function nVe(r,e,t){r.setModelProperty(e.uri,Dde,t)}function iVe(r,e){return r.getModelProperty(e.uri,Dde)}let zN=class extends ot{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return tVe(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||iVe(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:E("unusualLineTerminators.title","Unusual Line Terminators"),message:E("unusualLineTerminators.message","Detected unusual line terminators"),detail:E("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Uf(e.uri)),primaryButton:E("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:E("unusualLineTerminators.ignore","Ignore")})).confirmed){nVe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};zN.ID="editor.contrib.unusualLineTerminatorsDetector";zN=eVe([Yee(1,D2),Yee(2,vr)],zN);br(zN.ID,zN);var rVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},j7=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let $N=class extends ot{constructor(e,t,n,i){super(),this._modelService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._tokenizeViewport=new Xr(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(o=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(b4.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration(F$)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!lV(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!mke(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=fl(o=>Promise.resolve(P$(e,t,o)));return i.then(o=>{if(!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:s,tokens:a}=o,l=this._modelService.getSemanticTokensProviderStyling(s);e.setPartialSemanticTokens(t,$se(a,l,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}};$N.ID="editor.contrib.viewportSemanticTokens";$N=rVe([j7(1,ua),j7(2,Ho),j7(3,Jr)],$N);br($N.ID,$N);var oVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sVe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const aVe=Be("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},E("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),lVe=Be("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},E("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),uVe=Be("editor.wordHighlightBorder",{light:null,dark:null,hc:Bc},E("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),cVe=Be("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:Bc},E("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),dVe=Be("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},E("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),hVe=Be("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},E("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),KF=new _n("hasWordHighlights",!1);function Ide(r,e,t){const n=cx.ordered(r);return Oie(n.map(i=>()=>Promise.resolve(i.provideDocumentHighlights(r,e,t)).then(void 0,Pl)),Ed)}class kde{constructor(e,t,n){this._wordRange=this._getCurrentWordRange(e,t),this.result=fl(i=>this._compute(e,t,n,i))}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new le(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,o=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let u=0,d=n.length;!l&&u<d;u++){let h=e.getDecorationRange(n[u]);h&&h.startLineNumber===i&&h.startColumn<=o&&h.endColumn>=s&&(l=!0)}return l}cancel(){this.result.cancel()}}class fVe extends kde{_compute(e,t,n,i){return Ide(e,t.getPosition(),i).then(o=>o||[])}}class gVe extends kde{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return xC(250,i).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:WT.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}function pVe(r,e,t){return cx.has(r)?new fVe(r,e,t):new gVe(r,e,t)}Jv("_executeDocumentHighlights",(r,e)=>Ide(r,e,Oi.None));class wD{constructor(e,t){this.toUnhook=new Nt,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=KF.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{let i=this.editor.getOption(71);this.occurrencesHighlight!==i&&(this.occurrencesHighlight=i,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return tD(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(le.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(i.startLineNumber);Tl(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(i.startLineNumber);Tl(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let s=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=pVe(this.model,this.editor.getSelection(),this.editor.getOption(116)),this.workerRequest.result.then(a=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},ti)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:wD._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===WT.Write?this._WRITE_OPTIONS:e===WT.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}wD._WRITE_OPTIONS=pi.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Vo(hVe),position:kd.Center},minimap:{color:Vo(d4),position:Ld.Inline}});wD._TEXT_OPTIONS=pi.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Vo(noe),position:kd.Center},minimap:{color:Vo(d4),position:Ld.Inline}});wD._REGULAR_OPTIONS=pi.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Vo(dVe),position:kd.Center},minimap:{color:Vo(d4),position:Ld.Inline}});let FS=class Tde extends ot{constructor(e,t){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new wD(e,t))};this._register(e.onDidChangeModel(i=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(Tde.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};FS.ID="editor.contrib.wordHighlighter";FS=oVe([sVe(1,Jn)],FS);class Nde extends gn{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=FS.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class mVe extends Nde{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:E("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:KF,kbOpts:{kbExpr:Le.editorTextFocus,primary:65,weight:100}})}}class _Ve extends Nde{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:E("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:KF,kbOpts:{kbExpr:Le.editorTextFocus,primary:1089,weight:100}})}}class vVe extends gn{constructor(){super({id:"editor.action.wordHighlight.trigger",label:E("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:KF.toNegated(),kbOpts:{kbExpr:Le.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=FS.get(t);i&&i.restoreViewState(!0)}}br(FS.ID,FS);Wt(mVe);Wt(_Ve);Wt(vVe);mo((r,e)=>{const t=r.getColor(Hz);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=r.getColor(aVe);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const i=r.getColor(lVe);i&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${i}; }`);const o=r.getColor(oCe);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=r.getColor(uVe);s&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${r.type==="hc"?"dashed":"solid"} ${s}; box-sizing: border-box; }`);const a=r.getColor(cVe);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class GF extends Fl{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=zf(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(l=>{const u=new Ge(l.positionLineNumber,l.positionColumn),d=this._move(i,o,u,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Ni.fromModelSelection(l))),a.length===1){const l=new Ge(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new ln(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new ln(t.lineNumber,t.column,t.lineNumber,t.column)}}class ny extends GF{_move(e,t,n,i){return er.moveWordLeft(e,t,n,i)}}class iy extends GF{_move(e,t,n,i){return er.moveWordRight(e,t,n,i)}}class bVe extends ny{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class CVe extends ny{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class yVe extends ny{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Xt.and(Le.textInputFocus,(e=Xt.and(E2,z4))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class wVe extends ny{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class SVe extends ny{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class EVe extends ny{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Xt.and(Le.textInputFocus,(e=Xt.and(E2,z4))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class LVe extends ny{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(zf(Dm.wordSeparators.defaultValue),t,n,i)}}class xVe extends ny{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(zf(Dm.wordSeparators.defaultValue),t,n,i)}}class DVe extends iy{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class IVe extends iy{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Xt.and(Le.textInputFocus,(e=Xt.and(E2,z4))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class kVe extends iy{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class TVe extends iy{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class NVe extends iy{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Xt.and(Le.textInputFocus,(e=Xt.and(E2,z4))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class AVe extends iy{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class OVe extends iy{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(zf(Dm.wordSeparators.defaultValue),t,n,i)}}class RVe extends iy{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(zf(Dm.wordSeparators.defaultValue),t,n,i)}}class YF extends Fl{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=zf(t.getOption(116)),o=t.getModel(),s=t.getSelections(),a=t.getOption(5),l=t.getOption(8),u=fr.getAutoClosingPairs(o.getLanguageId()),d=t._getViewModel(),h=s.map(p=>{const _=this._delete({wordSeparators:i,model:o,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:l,autoClosingPairs:u,autoClosedCharacters:d.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Il(_,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class Cq extends YF{_delete(e,t){let n=er.deleteWordLeft(e,t);return n||new le(1,1,1,1)}}class yq extends YF{_delete(e,t){let n=er.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new le(i,o,i,o)}}class MVe extends Cq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:Le.writable})}}class PVe extends Cq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:Le.writable})}}class FVe extends Cq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class BVe extends yq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:Le.writable})}}class WVe extends yq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:Le.writable})}}class VVe extends yq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class HVe extends gn{constructor(){super({id:"deleteInsideWord",precondition:Le.writable,label:E("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=zf(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(l=>{const u=er.deleteInsideWord(i,o,l);return new Il(u,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Mt(new bVe);Mt(new CVe);Mt(new yVe);Mt(new wVe);Mt(new SVe);Mt(new EVe);Mt(new DVe);Mt(new IVe);Mt(new kVe);Mt(new TVe);Mt(new NVe);Mt(new AVe);Mt(new LVe);Mt(new xVe);Mt(new OVe);Mt(new RVe);Mt(new MVe);Mt(new PVe);Mt(new FVe);Mt(new BVe);Mt(new WVe);Mt(new VVe);Wt(HVe);class UVe extends YF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=D4.deleteWordPartLeft(e);return n||new le(1,1,1,1)}}class zVe extends YF{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:Le.writable,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=D4.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new le(i,o,i,o)}}class Ade extends GF{_move(e,t,n,i){return D4.moveWordPartLeft(e,t,n)}}class $Ve extends Ade{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Yi.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class jVe extends Ade{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Yi.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Ode extends GF{_move(e,t,n,i){return D4.moveWordPartRight(e,t,n)}}class qVe extends Ode{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class KVe extends Ode{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:Le.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Mt(new UVe);Mt(new zVe);Mt(new $Ve);Mt(new jVe);Mt(new qVe);Mt(new KVe);var Rde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cR=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};const Mde=new _n("accessibilityHelpWidgetVisible",!1);let BS=class Pde extends ot{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(Wx,this._editor))}static get(e){return e.getContribution(Pde.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};BS.ID="editor.contrib.accessibilityHelpController";BS=Rde([cR(1,xi)],BS);function GVe(r,e){return!r||r.length===0?Ks.noSelection:r.length===1?e?Nf(Ks.singleSelectionRange,r[0].positionLineNumber,r[0].positionColumn,e):Nf(Ks.singleSelection,r[0].positionLineNumber,r[0].positionColumn):e?Nf(Ks.multiSelectionRange,r.length,e):r.length>0?Nf(Ks.multiSelection,r.length):""}let Wx=class dR extends Ph{constructor(e,t,n,i){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=Mde.bindTo(this._contextKeyService),this._domNode=tr(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=tr(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(za(this._contentDomNode.domNode,"keydown",o=>{if(this._isVisible&&(o.equals(2083)&&(Tl(Ks.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),ya(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),o.preventDefault(),o.stopPropagation()),o.equals(2086))){Tl(Ks.openingDocs);let s=this._editor.getRawOptions().accessibilityHelpUrl;typeof s>"u"&&(s="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(qn.parse(s)),o.preventDefault(),o.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return dR.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let i=this._keybindingService.lookupKeybinding(e);return i?Nf(t,i.getAriaLabel()):Nf(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=GVe(t,n);e.get(53)?e.get(80)?i+=Ks.readonlyDiffEditor:i+=Ks.editableDiffEditor:e.get(80)?i+=Ks.readonlyEditor:i+=Ks.editableEditor;const o=ji?Ks.changeConfigToOnMac:Ks.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+o;break;case 2:i+=`

 - `+Ks.auto_on;break;case 1:i+=`

 - `+Ks.auto_off,i+=" "+o;break}e.get(129)?i+=`

 - `+this._descriptionForCommand(Bx.ID,Ks.tabFocusModeOnMsg,Ks.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(Bx.ID,Ks.tabFocusModeOffMsg,Ks.tabFocusModeOffMsgNoKb);const s=ji?Ks.openDocMac:Ks.openDocWinLinux;i+=`

 - `+s,i+=`

`+Ks.outroMsg,this._contentDomNode.domNode.appendChild(Oae(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,ya(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(dR.WIDTH,e.width-40)),n=Math.max(5,Math.min(dR.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let i=Math.round((e.height-n)/2);this._domNode.setTop(i);let o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}};Wx.ID="editor.contrib.accessibilityHelpWidget";Wx.WIDTH=500;Wx.HEIGHT=300;Wx=Rde([cR(1,Jn),cR(2,Ro),cR(3,Nd)],Wx);class YVe extends gn{constructor(){super({id:"editor.action.showAccessibilityHelp",label:Ks.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=BS.get(t);n&&n.show()}}br(BS.ID,BS);Wt(YVe);const ZVe=Fl.bindToContribution(BS.get);Mt(new ZVe({id:"closeAccessibilityHelp",precondition:Mde,handler:r=>r.hide(),kbOpts:{weight:100+100,kbExpr:Le.focus,primary:9,secondary:[1033]}}));mo((r,e)=>{const t=r.getColor(pm);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=r.getColor(Wb);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const i=r.getColor(NC);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${i}; }`);const o=r.getColor(Ns);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${o}; }`)});class gU extends ot{constructor(e){super(),this.editor=e,this.widget=null,Av&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new ZF(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}gU.ID="editor.contrib.iPadShowKeyboard";class ZF extends ot{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(kt(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(kt(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return ZF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}ZF.ID="editor.contrib.ShowKeyboardWidget";br(gU.ID,gU);var XVe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Zee=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let Vx=class Fde extends ot{constructor(e,t,n){super(),this._editor=e,this._modeService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(es.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}static get(e){return e.getContribution(Fde.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new XF(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};Vx.ID="editor.contrib.inspectTokens";Vx=XVe([Zee(1,JC),Zee(2,Bl)],Vx);class QVe extends gn{constructor(){super({id:"editor.action.inspectTokens",label:fW.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=Vx.get(t);n&&n.launch()}}function JVe(r){let e="";for(let t=0,n=r.length;t<n;t++){let i=r.charCodeAt(t);switch(i){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(i)}}return e}function eHe(r,e){const t=es.get(e);if(t)return t;const n=r.encodeLanguageId(e);return{getInitialState:()=>_2,tokenize:(i,o,s,a)=>Roe(e,i,s,a),tokenize2:(i,o,s,a)=>o$(n,i,s,a)}}class XF extends ot{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=eHe(this._modeService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return XF._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let l=t.tokens1.length-1;l>=0;l--){let u=t.tokens1[l];if(e.column-1>=u.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}let o=this._model.getLineContent(e.lineNumber),s="";if(n<t.tokens1.length){let l=t.tokens1[n].offset,u=n+1<t.tokens1.length?t.tokens1[n+1].offset:o.length;s=o.substring(l,u)}IC(this._domNode,Lt("h2.tm-token",void 0,JVe(s),Lt("span.tm-token-length",void 0,`${s.length} ${s.length===1?"char":"chars"}`))),ft(this._domNode,Lt("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;ft(this._domNode,Lt("table.tm-metadata-table",void 0,Lt("tbody",void 0,Lt("tr",void 0,Lt("td.tm-metadata-key",void 0,"language"),Lt("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),Lt("tr",void 0,Lt("td.tm-metadata-key",void 0,"token type"),Lt("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),Lt("tr",void 0,Lt("td.tm-metadata-key",void 0,"font style"),Lt("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),Lt("tr",void 0,Lt("td.tm-metadata-key",void 0,"foreground"),Lt("td.tm-metadata-value",void 0,`${a?je.Format.CSS.formatHex(a.foreground):"-?-"}`)),Lt("tr",void 0,Lt("td.tm-metadata-key",void 0,"background"),Lt("td.tm-metadata-value",void 0,`${a?je.Format.CSS.formatHex(a.background):"-?-"}`))))),ft(this._domNode,Lt("hr.tokens-inspect-separator")),n<t.tokens1.length&&ft(this._domNode,Lt("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=es.getColorMap(),n=Nu.getLanguageId(e),i=Nu.getTokenType(e),o=Nu.getFontStyle(e),s=Nu.getForeground(e),a=Nu.getBackground(e);return{languageId:this._modeService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:o,foreground:t[s],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),i=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}XF._ID="editor.contrib.inspectTokensWidget";br(Vx.ID,Vx);Wt(QVe);mo((r,e)=>{const t=r.getColor(zz);if(t){let o=r.type===tp.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${o}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=r.getColor(lS);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const i=r.getColor(Uz);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${i}; }`)});var tHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},nHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let yP=class hR{constructor(e){this.quickInputService=e,this.registry=vs.as(ey.Quickaccess)}provide(e){const t=new Nt;t.add(e.onDidAccept(()=>{const[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(o=>{const s=this.registry.getQuickAccessProvider(o.substr(hR.PREFIX.length));s&&s.prefix&&s.prefix!==hR.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:i}=this.getQuickAccessProviders();return e.items=n.length===0||i.length===0?[...n.length===0?i:n]:[{label:E("globalCommands","global commands"),type:"separator"},...i,{label:E("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((i,o)=>i.prefix.localeCompare(o.prefix)))if(n.prefix!==hR.PREFIX)for(const i of n.helpEntries){const o=i.prefix||n.prefix,s=o||"";(i.needsEditor?t:e).push({prefix:o,label:s,ariaLabel:E("helpPickAriaLabel","{0}, {1}",s,i.description),description:i.description})}return{editorProviders:t,globalProviders:e}}};yP.PREFIX="?";yP=tHe([nHe(0,Kf)],yP);vs.as(ey.Quickaccess).registerQuickAccessProvider({ctor:yP,prefix:"",helpEntries:[{description:gW.helpQuickAccessActionLabel,needsEditor:!0}]});class Bde{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new Nt;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=i.add(new lc);return o.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new Nt,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const o={editor:i},s=Ise(i);if(s){let a=Sd(i.saveViewState());n.add(s.onDidChangeCursorPosition(()=>{a=Sd(i.saveViewState())})),o.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(qb(t.onCancellationRequested)(()=>{var l;return(l=o.restoreViewState)===null||l===void 0?void 0:l.call(o)}))}n.add(Hi(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(o,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return Dse(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Vo(DEe),position:kd.Full}}}],[s,a]=n.deltaDecorations(i,o);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class QF extends Bde{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=E("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,ot.None}provideWithTextEditor(e,t,n){const i=e.editor,o=new Nt;o.add(t.onDidAccept(l=>{const[u]=t.selectedItems;if(u){if(!this.isValidLineNumber(i,u.lineNumber))return;this.gotoLocation(e,{range:this.toRange(u.lineNumber,u.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const s=()=>{const l=this.parsePosition(i,t.value.trim().substr(QF.PREFIX.length)),u=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:u}],t.ariaLabel=u,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)};s(),o.add(t.onDidChangeValue(()=>s()));const a=Ise(i);return a&&a.getOptions().get(59).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(Hi(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?E("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):E("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?E("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,o):E("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const o={lineNumber:t,column:n};return i.validatePosition(o).equals(o)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}QF.PREFIX=":";var iHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let jN=class extends QF{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Sn.None}get activeTextEditorControl(){return Sd(this.editorService.getFocusedCodeEditor())}};jN=iHe([rHe(0,vr)],jN);vs.as(ey.Quickaccess).registerQuickAccessProvider({ctor:jN,prefix:jN.PREFIX,helpEntries:[{description:RM.gotoLineActionLabel,needsEditor:!0}]});let oHe=class extends gn{constructor(){super({id:"editor.action.gotoLine",label:RM.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Kf).quickAccess.show(jN.PREFIX)}};Wt(oHe);const Wde=[void 0,[]];function q7(r,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?sHe(r,i.values,t,n):Vde(r,e,t,n)}function sHe(r,e,t,n){let i=0;const o=[];for(const s of e){const[a,l]=Vde(r,s,t,n);if(typeof a!="number")return Wde;i+=a,o.push(...l)}return[i,aHe(o)]}function Vde(r,e,t,n){const i=Cx(e.original,e.originalLowercase,t,r,r.toLowerCase(),n,!0);return i?[i[0],V4(i)]:Wde}function aHe(r){const e=r.sort((i,o)=>i.start-o.start),t=[];let n;for(const i of e)!n||!lHe(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}function lHe(r,e){return!(r.end<e.start||e.end<r.start)}function Xee(r){return r.startsWith('"')&&r.endsWith('"')}const Hde=" ";function pU(r){typeof r!="string"&&(r="");const e=r.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=Qee(r),o=t.indexOf(Ow)>=0,s=Xee(r);let a;const l=r.split(Hde);if(l.length>1)for(const u of l){const d=Xee(u),{pathNormalized:h,normalized:p,normalizedLowercase:_}=Qee(u);p&&(a||(a=[]),a.push({original:u,originalLowercase:u.toLowerCase(),pathNormalized:h,normalized:p,normalizedLowercase:_,expectContiguousMatch:d}))}return{original:r,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:o,expectContiguousMatch:s}}function Qee(r){let e;Ol?e=r.replace(/\//g,Ow):e=r.replace(/\\/g,Ow);const t=$0e(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function Jee(r){return Array.isArray(r)?pU(r.map(e=>e.original).join(Hde)):pU(r.original)}var Lk=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class Ff extends Bde{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,E("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),ot.None}provideWithTextEditor(e,t,n){const i=e.editor,o=this.getModel(i);return o?Xg.has(o)?this.doProvideWithEditorSymbols(e,o,t,n):this.doProvideWithoutEditorSymbols(e,o,t,n):ot.None}doProvideWithoutEditorSymbols(e,t,n,i){const o=new Nt;return this.provideLabelPick(n,E("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),Lk(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,o))||i.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,n,i))}),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return Lk(this,void 0,void 0,function*(){if(Xg.has(e))return!0;const n=new Rie,i=t.add(Xg.onDidChange(()=>{Xg.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(Hi(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){const o=e.editor,s=new Nt;s.add(n.onDidAccept(h=>{const[p]=n.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:n.keyMods,preserveFocus:h.inBackground}),h.inBackground||n.hide())})),s.add(n.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,i);let l;const u=()=>Lk(this,void 0,void 0,function*(){l==null||l.dispose(!0),n.busy=!1,l=new Ou(i),n.busy=!0;try{const h=pU(n.value.substr(Ff.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(a,h,void 0,l.token);if(i.isCancellationRequested)return;p.length>0?n.items=p:h.original.length>0?this.provideLabelPick(n,E("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,E("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}});s.add(n.onDidChangeValue(()=>u())),u();let d=!0;return s.add(n.onDidChangeActive(()=>{const[h]=n.activeItems;if(h&&h.range){if(d){d=!1;return}o.revealRangeInCenter(h.range.selection,0),this.addDecorations(o,h.range.decoration)}})),s}doGetSymbolPicks(e,t,n,i){return Lk(this,void 0,void 0,function*(){const o=yield e;if(i.isCancellationRequested)return[];const s=t.original.indexOf(Ff.SCOPE_PREFIX)===0,a=s?1:0;let l,u;t.values&&t.values.length>1?(l=Jee(t.values[0]),u=Jee(t.values.slice(1))):l=t;const d=[];for(let _=0;_<o.length;_++){const C=o[_],S=U0e(C.name),x=`$(symbol-${X9.toString(C.kind)||"property"}) ${S}`,T=x.length-S.length;let k=C.containerName;n!=null&&n.extraContainerLabel&&(k?k=`${n.extraContainerLabel}  ${k}`:k=n.extraContainerLabel);let M,W,F,Q;if(t.original.length>a){let $=!1;if(l!==t&&([M,W]=q7(x,Object.assign(Object.assign({},t),{values:void 0}),a,T),typeof M=="number"&&($=!0)),typeof M!="number"&&([M,W]=q7(x,l,a,T),typeof M!="number"))continue;if(!$&&u){if(k&&u.original.length>0&&([F,Q]=q7(k,u)),typeof F!="number")continue;typeof M=="number"&&(M+=F)}}const z=C.tags&&C.tags.indexOf(1)>=0;d.push({index:_,kind:C.kind,score:M,label:x,ariaLabel:S,description:k,highlights:z?void 0:{label:W,description:Q},range:{selection:le.collapseToStart(C.selectionRange),decoration:C.range},strikethrough:z,buttons:(()=>{var $,G;const Y=!(($=this.options)===null||$===void 0)&&$.openSideBySideDirection?(G=this.options)===null||G===void 0?void 0:G.openSideBySideDirection():void 0;if(Y)return[{iconClass:Y==="right"?Ae.splitHorizontal.classNames:Ae.splitVertical.classNames,tooltip:Y==="right"?E("openToSide","Open to the Side"):E("openToBottom","Open to the Bottom")}]})()})}const h=d.sort((_,C)=>s?this.compareByKindAndScore(_,C):this.compareByScore(_,C));let p=[];if(s){let x=function(){C&&typeof _=="number"&&S>0&&(C.label=Nf(G7[_]||K7,S))},_,C,S=0;for(const T of h)_!==T.kind?(x(),_=T.kind,S=1,C={type:"separator"},p.push(C)):S++,p.push(T);x()}else h.length>0&&(p=[{label:E("symbols","symbols ({0})",d.length),type:"separator"},...h]);return p})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=G7[e.kind]||K7,i=G7[t.kind]||K7,o=n.localeCompare(i);return o===0?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return Lk(this,void 0,void 0,function*(){const n=yield oc.create(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}}Ff.PREFIX="@";Ff.SCOPE_PREFIX=":";Ff.PREFIX_BY_CATEGORY=`${Ff.PREFIX}${Ff.SCOPE_PREFIX}`;const K7=E("property","properties ({0})"),G7={[5]:E("method","methods ({0})"),[11]:E("function","functions ({0})"),[8]:E("_constructor","constructors ({0})"),[12]:E("variable","variables ({0})"),[4]:E("class","classes ({0})"),[22]:E("struct","structs ({0})"),[23]:E("event","events ({0})"),[24]:E("operator","operators ({0})"),[10]:E("interface","interfaces ({0})"),[2]:E("namespace","namespaces ({0})"),[3]:E("package","packages ({0})"),[25]:E("typeParameter","type parameters ({0})"),[1]:E("modules","modules ({0})"),[6]:E("property","properties ({0})"),[9]:E("enum","enumerations ({0})"),[21]:E("enumMember","enumeration members ({0})"),[14]:E("string","strings ({0})"),[0]:E("file","files ({0})"),[17]:E("array","arrays ({0})"),[15]:E("number","numbers ({0})"),[16]:E("boolean","booleans ({0})"),[18]:E("object","objects ({0})"),[19]:E("key","keys ({0})"),[7]:E("field","fields ({0})"),[13]:E("constant","constants ({0})")};var uHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cHe=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let mU=class extends Ff{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Sn.None}get activeTextEditorControl(){return Sd(this.editorService.getFocusedCodeEditor())}};mU=uHe([cHe(0,vr)],mU);vs.as(ey.Quickaccess).registerQuickAccessProvider({ctor:mU,prefix:Ff.PREFIX,helpEntries:[{description:dN.quickOutlineActionLabel,prefix:Ff.PREFIX,needsEditor:!0},{description:dN.quickOutlineByCategoryActionLabel,prefix:Ff.PREFIX_BY_CATEGORY,needsEditor:!0}]});let dHe=class extends gn{constructor(){super({id:"editor.action.quickOutline",label:dN.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:Le.hasDocumentSymbolProvider,kbOpts:{kbExpr:Le.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Kf).quickAccess.show(Ff.PREFIX)}};Wt(dHe);function Y7(r,e){return e&&(r.stack||r.stacktrace)?E("stackTrace.format","{0}: {1}",tte(r),ete(r.stack)||ete(r.stacktrace)):tte(r)}function ete(r){return Array.isArray(r)?r.join(`
`):r}function tte(r){return typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?E("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||E("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Ude(r=null,e=!1){if(!r)return E("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=tD(r),n=Ude(t[0],e);return t.length>1?E("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Wf(r))return r;if(r.detail){const t=r.detail;if(t.error)return Y7(t.error,e);if(t.exception)return Y7(t.exception,e)}return r.stack?Y7(r,e):r.message?r.message:E("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var yO=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})},Nw;(function(r){r[r.NO_ACTION=0]="NO_ACTION",r[r.CLOSE_PICKER=1]="CLOSE_PICKER",r[r.REFRESH_PICKER=2]="REFRESH_PICKER",r[r.REMOVE_ITEM=3]="REMOVE_ITEM"})(Nw||(Nw={}));function Z7(r){const e=r;return Array.isArray(e.items)}function hHe(r){const e=r;return!!e.picks&&e.additionalPicks instanceof Promise}class JF extends ot{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const i=new Nt;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const s=i.add(new lc),a=()=>yO(this,void 0,void 0,function*(){const l=s.value=new Nt;o==null||o.dispose(!0),e.busy=!1,o=new Ou(t);const u=o.token,d=e.value.substr(this.prefix.length).trim(),h=this._getPicks(d,l,u),p=(_,C)=>{var S;let x,T;if(Z7(_)?(x=_.items,T=_.active):x=_,x.length===0){if(C)return!1;d.length>0&&(!((S=this.options)===null||S===void 0)&&S.noResultsPick)&&(x=[this.options.noResultsPick])}return e.items=x,T&&(e.activeItems=[T]),!0};if(h!==null)if(hHe(h)){let _=!1,C=!1;yield Promise.all([(()=>yO(this,void 0,void 0,function*(){yield xC(JF.FAST_PICKS_RACE_DELAY),!u.isCancellationRequested&&(C||(_=p(h.picks,!0)))}))(),(()=>yO(this,void 0,void 0,function*(){e.busy=!0;try{const S=yield h.additionalPicks;if(u.isCancellationRequested)return;let x,T;Z7(h.picks)?(x=h.picks.items,T=h.picks.active):x=h.picks;let k,M;if(Z7(S)?(k=S.items,M=S.active):k=S,k.length>0||!_){let W;if(!T&&!M){const F=e.activeItems[0];F&&x.indexOf(F)!==-1&&(W=F)}p({items:[...x,...k],active:T||M||W})}}finally{u.isCancellationRequested||(e.busy=!1),C=!0}}))()])}else if(!(h instanceof Promise))p(h);else{e.busy=!0;try{const _=yield h;if(u.isCancellationRequested)return;p(_)}finally{u.isCancellationRequested||(e.busy=!1)}}});return i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(l=>{const[u]=e.selectedItems;typeof(u==null?void 0:u.accept)=="function"&&(l.inBackground||e.hide(),u.accept(e.keyMods,l))})),i.add(e.onDidTriggerItemButton(({button:l,item:u})=>yO(this,void 0,void 0,function*(){var d,h;if(typeof u.trigger=="function"){const p=(h=(d=u.buttons)===null||d===void 0?void 0:d.indexOf(l))!==null&&h!==void 0?h:-1;if(p>=0){const _=u.trigger(p,e.keyMods),C=typeof _=="number"?_:yield _;if(t.isCancellationRequested)return;switch(C){case Nw.NO_ACTION:break;case Nw.CLOSE_PICKER:e.hide();break;case Nw.REFRESH_PICKER:a();break;case Nw.REMOVE_ITEM:const S=e.items.indexOf(u);if(S!==-1){const x=e.items.slice(),T=x.splice(S,1),k=e.activeItems.filter(W=>W!==T[0]),M=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=x,k&&(e.activeItems=k),e.keepScrollPosition=M}break}}}}))),i}}JF.FAST_PICKS_RACE_DELAY=200;var zde=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Cw=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},nte=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let qN=class fR extends JF{constructor(e,t,n,i,o,s){super(fR.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=o,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(WS)),this.options=e}_getPicks(e,t,n){return nte(this,void 0,void 0,function*(){const i=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const o=[];for(const u of i){const d=Sd(fR.WORD_FILTER(e,u.label)),h=u.commandAlias?Sd(fR.WORD_FILTER(e,u.commandAlias)):void 0;d||h?(u.highlights={label:d,detail:this.options.showAlias?h:void 0},o.push(u)):e===u.commandId&&o.push(u)}const s=new Map;for(const u of o){const d=s.get(u.label);d?(u.description=u.commandId,d.description=d.commandId):s.set(u.label,u)}o.sort((u,d)=>{const h=this.commandsHistory.peek(u.commandId),p=this.commandsHistory.peek(d.commandId);return h&&p?h>p?-1:1:h?-1:p?1:u.label.localeCompare(d.label)});const a=[];let l=!1;for(let u=0;u<o.length;u++){const d=o[u],h=this.keybindingService.lookupKeybinding(d.commandId),p=h?E("commandPickAriaLabelWithKeybinding","{0}, {1}",d.label,h.getAriaLabel()):d.label;u===0&&this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:E("recentlyUsed","recently used")}),l=!0),u!==0&&l&&!this.commandsHistory.peek(d.commandId)&&(a.push({type:"separator",label:E("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},d),{ariaLabel:p,detail:this.options.showAlias&&d.commandAlias!==d.label?d.commandAlias:void 0,keybinding:h,accept:()=>nte(this,void 0,void 0,function*(){this.commandsHistory.push(d.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"quick open"});try{yield this.commandService.executeCommand(d.commandId)}catch(_){Zv(_)||this.dialogService.show(os.Error,E("canNotRun","Command '{0}' resulted in an error ({1})",d.label,Ude(_)))}})}))}return a})}};qN.PREFIX=">";qN.WORD_FILTER=H$(B4,Jke,eae);qN=zde([Cw(1,xi),Cw(2,Ro),Cw(3,Go),Cw(4,Xv),Cw(5,D2)],qN);let WS=class Ma extends ot{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Ma.getConfiguredCommandHistoryLength(this.configurationService),Ma.cache&&Ma.cache.limit!==this.configuredCommandsHistoryLength&&(Ma.cache.limit=this.configuredCommandsHistoryLength,Ma.saveState(this.storageService))}load(){const e=this.storageService.get(Ma.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Ma.cache=new YC(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((o,s)=>o.value-s.value),i.forEach(o=>n.set(o.key,o.value))}Ma.counter=this.storageService.getNumber(Ma.PREF_KEY_COUNTER,0,Ma.counter)}push(e){Ma.cache&&(Ma.cache.set(e,Ma.counter++),Ma.saveState(this.storageService))}peek(e){var t;return(t=Ma.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Ma.cache)return;const t={usesLRU:!0,entries:[]};Ma.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(Ma.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Ma.PREF_KEY_COUNTER,Ma.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const o=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof o=="number"?o:Ma.DEFAULT_COMMANDS_HISTORY_LENGTH}};WS.DEFAULT_COMMANDS_HISTORY_LENGTH=50;WS.PREF_KEY_CACHE="commandPalette.mru.cache";WS.PREF_KEY_COUNTER="commandPalette.mru.counter";WS.counter=1;WS=zde([Cw(0,i0),Cw(1,Jr)],WS);class $de extends qN{constructor(e,t,n,i,o,s){super(e,t,n,i,o,s)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:K$(n.label)||n.id});return t}}var fHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}},gHe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};let KN=class extends $de{constructor(e,t,n,i,o,s){super({showAlias:!1},e,n,i,o,s),this.codeEditorService=t}get activeTextEditorControl(){return Sd(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return gHe(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};KN=fHe([tL(0,xi),tL(1,vr),tL(2,Ro),tL(3,Go),tL(4,Xv),tL(5,D2)],KN);vs.as(ey.Quickaccess).registerQuickAccessProvider({ctor:KN,prefix:KN.PREFIX,helpEntries:[{description:cN.quickCommandHelp,needsEditor:!0}]});class pHe extends gn{constructor(){super({id:"editor.action.quickCommand",label:cN.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:Le.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Kf).quickAccess.show(KN.PREFIX)}}Wt(pHe);var mHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},nL=globalThis&&globalThis.__param||function(r,e){return function(t,n){e(t,n,r)}};let _U=class extends VC{constructor(e,t,n,i,o,s,a){super(!0,e,t,n,i,o,s,a)}};_U=mHe([nL(1,Jn),nL(2,vr),nL(3,As),nL(4,xi),nL(5,i0),nL(6,Jr)],_U);br(VC.ID,_U);class _He extends gn{constructor(){super({id:"editor.action.toggleHighContrast",label:pW.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(JC);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}Wt(_He);var JL;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(JL||(JL={}));var ex;(function(r){r.dark="dark",r.light="light"})(ex||(ex={}));var GN;(function(r){r.onChange="colorTheme.onChange"})(GN||(GN={}));const vHe={workbenchBackground:"#F3F3F3",foreground:"#616161",errorForeground:"#A1260D",descriptionForeground:"#717171","icon.foreground":"#424242",focusBorder:"#0090F1","widget.shadow":"#A8A8A8","textSeparator.foreground":"#0000002e","textLink.foreground":"#006AB1","textLink.activeForeground":"#006AB1","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#dcdcdc66","input.background":je.white,"input.foreground":"#616161","input.border":"#616161","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":je.fromHex("#007ACC").transparent(.3),"input.placeholderForeground":je.fromHex("#616161").transparent(.5),"dropdown.background":je.white,"dropdown.border":je.white,"checkbox.background":je.white,"checkbox.border":je.white,"button.background":"#007ACC","button.foreground":je.white,"badge.background":"#C4C4C4","badge.foreground":"#333","scrollbar.shadow":"#DDDDDD","scrollbarSlider.background":je.fromHex("#646464").transparent(.4),"scrollbarSlider.hoverBackground":je.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":je.fromHex("#000000").transparent(.6),"progressBar.background":je.fromHex("#0E70C0"),"editorError.background":"#E51400","editorWarning.foreground":"#E51400","editorInfo.foreground":"#E9A700","editorHint.foreground":"#6c6c6c","editor.background":"#fffffe","editor.foreground":"#333333","editor.selectionBackground":"#ADD6FF","editor.findMatchBackground":"#A8AC94","list.dropBackground":"#E4E6F1","list.hoverBackground":"#F0F0F0","list.activeSelectionBackground":"#0074E8","list.activeSelectionForeground":je.white,"menu.foreground":"#616161","menu.background":je.white,"menu.separatorBackground":"#888888","panel.background":je.white,"panel.border":"rgba(128, 128, 128, 0.35)","panelTitle.activeForeground":"rgb(66, 66, 66)","panelTitle.activeBorder":"rgb(66, 66, 66)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},bHe={workbenchBackground:"#252526",foreground:"#CCCCCC","widget.shadow":"#000000",errorForeground:"#F48771",descriptionForeground:je.fromHex("#CCCCCC").transparent(.7),"icon.foreground":"#C5C5C5",focusBorder:"#007FD4","textSeparator.foreground":"#ffffff2e","textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#0a0a0a66","input.background":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":je.fromHex("#0E639C").transparent(.5),"input.placeholderForeground":je.fromHex("#616161").transparent(.5),"dropdown.background":"#3C3C3C","dropdown.foreground":"#F0F0F0","dropdown.border":"#CECECE","checkbox.border":"#CECECE","button.background":"#0E639C","button.foreground":je.white,"badge.background":"#4D4D4D","badge.foreground":je.white,"scrollbar.shadow":"#000000","scrollbarSlider.background":je.fromHex("#797979").transparent(.4),"scrollbarSlider.hoverBackground":je.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":je.fromHex("#BFBFBF").transparent(.4),"progressBar.background":je.fromHex("#0E70C0"),"editorError.background":"#F48771","editorWarning.foreground":"#CCA700","editorInfo.foreground":"#75BEFF","editorHint.foreground":je.fromHex("#eeeeee").transparent(.7),"editor.background":"#1E1E1E","editor.foreground":"#BBBBBB","editor.selectionBackground":"#264F78","editor.selectionForeground":"#000000","list.dropBackground":"#37373D","list.hoverBackground":"#2A2D2E","list.activeSelectionBackground":"#37373D","list.activeSelectionForeground":je.white,"menu.foreground":"#F0F0F0","menu.background":"#3C3C3C","menu.separatorBackground":"#BBBBBB","panel.background":"rgb(30, 30, 30)","panel.border":"#3C3C3C","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},CHe={workbenchBackground:"#000000",foreground:"#FFFFFF",errorForeground:"#F48771",descriptionForeground:je.fromHex("#FFFFFF").transparent(.7),"icon.foreground":"#FFFFFF",focusBorder:"#F38518",contrastBorder:"#6FC3DF",contrastActiveBorder:"#F38518","textSeparator.foreground":je.black,"textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.border":je.white,"textCodeBlock.background":je.black,"input.background":je.black,"input.foreground":"#FFFFFF","input.border":"#6FC3DF","inputOption.activeBorder":"#6FC3DF","input.placeholderForeground":je.fromHex("#616161").transparent(.7),"dropdown.background":je.black,"dropdown.listBackground":je.black,"dropdown.foreground":je.white,"dropdown.border":"#6FC3DF","checkbox.border":"#6FC3DF","button.foreground":je.white,"badge.background":je.black,"badge.foreground":je.white,"scrollbarSlider.background":je.fromHex("#6FC3DF").transparent(.6),"scrollbarSlider.hoverBackground":je.fromHex("#6FC3DF").transparent(.8),"scrollbarSlider.activeBackground":"#6FC3DF","progressBar.background":"#6FC3DF","editorError.border":je.fromHex("#E47777").transparent(.8),"editorWarning.border":je.fromHex("#FFCC00").transparent(.8),"editorInfo.border":je.fromHex("#FFCC00").transparent(.8),"editorHint.border":je.fromHex("#eeeeee").transparent(.8),"editor.background":je.black,"editor.foreground":je.white,"editor.selectionForeground":"#000000","menu.foreground":je.white,"menu.background":je.black,"menu.separatorBackground":"#6FC3DF","panel.border":"#6FC3DF","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"};function yHe(r){switch(r.uiTheme){case"vs-dark":return Object.assign({},bHe);case"vs":return Object.assign({},vHe);default:return Object.assign({},CHe)}}function wHe(r){let e="";for(const t in r)if(t){const n=r[t];if(n){const i=t.replace(".","-");e+=`--${i}: ${n}; 
`}}return`
        :root {
            ${e}
        }
    `}function SHe(r){const e=Ao.cloneDeep(r);return[["minimap.background","editor.background"],["minimapSlider.background","scrollbarSlider.background"],["minimapSlider.hoverBackground","scrollbarSlider.hoverBackground"],["minimapSlider.activeBackground","scrollbarSlider.activeBackground"],["panel.background","workbenchBackground"],["sash.hoverBorder","focusBorder"],["button.background","textLink.foreground"],["menu.selectionBackground","button.background"],["button.hoverBackground","button.background",n=>je.fromHex(n).lighten(.2)]].forEach(([n,i,o])=>{!e[n]&&e[i]&&(o?e[n]=o(e[i]):e[n]=e[i])}),e}function EHe(r){const e=yHe(r),t=SHe(Object.assign(e,r.colors)),n={};for(const a in t)if(a){const l=t[a];l&&typeof l=="object"?n[a]=l.toString():typeof l=="string"&&(n[a]=l)}const i=r.tokenColors,o=[],s=(a,l)=>{const u=o.findIndex(d=>d.token===a);u>=0?Object.assign(o[u],Object.assign({},l.settings)):a&&o.push(Object.assign({token:a},l.settings))};return i==null||i.forEach(a=>{Array.isArray(a.scope)?a.scope.forEach(l=>s(l,a)):s(a.scope,a)}),{base:r.uiTheme,rules:o,inherit:!0,colors:n}}var LHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};const Yk={id:"Default Dark+",name:"Default Dark+",label:"Default Dark+",uiTheme:"vs-dark"},gR=Ri("customize-theme");let VS=class extends Kx{constructor(){super(),this.colorThemes=[Yk],this.colorTheme=Yk,this.colorTheme&&this.setTheme(this.colorTheme.id)}addThemes(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.getThemeById(n.id)?(Ai.warn(`There has ${n.name} already in theme, it'll update this theme otherwise please don't add the duplicated theme`),this.updateTheme(n)):this.colorThemes.push(Object.assign({},n))})}updateTheme(e){e.id||Ai.error("Update the theme failed!  The 'id' is required in the theme data.");const t=this.colorThemes.findIndex(rr(e.id));t>-1?(Object.assign(this.colorThemes[t],e),this.colorThemes[t].id===this.getColorTheme().id&&this.reload()):Ai.error(`Update the theme failed! There is no theme found via '${e.id}'`)}getThemeById(e){const t=this.colorThemes.find(rr(e));return t?Object.assign({},t):void 0}getColorTheme(){return Object.assign({},this.colorTheme)}setTheme(e){const t=this.getColorTheme(),n=this.getThemeById(e);if(n){this.colorTheme=Object.assign({},n);const i=EHe(n),o=wHe(i.colors);Xfe(o,gR),xd.defineTheme(gR,i),xd.setTheme(gR);const s=this.getColorThemeMode();this.emit(GN.onChange,t,Object.assign({},this.colorTheme),s)}else Ai.error("Can't get the theme by id:"+e)}getThemes(){return this.colorThemes}reload(){this.setTheme(this.getColorTheme().id)}reset(){this.colorThemes=[Yk],this.setTheme(Yk.id)}getColorThemeMode(){const{colors:e,type:t}=this.colorTheme;if(t===JL.DARK||t===JL.HIGH_CONTRAST)return ex.dark;if(t===JL.LIGHT)return ex.light;const n=(e==null?void 0:e["editor.background"])||(e==null?void 0:e["tab.activeBackground"])||(e==null?void 0:e["molecule.welcomeBackground"]);return n?Yfe(n):ex.dark}onChange(e){this.subscribe(GN.onChange,e)}};VS=LHe([Ur(),xHe("design:paramtypes",[])],VS);var HS;(function(r){r.OnClick="activityBar.onClick",r.OnChange="activityBar.onChange",r.DataChanged="activityBar.data",r.ReRender="activityBar.reRender"})(HS||(HS={}));class jde{constructor(e=[],t=[],n=""){this.data=e,this.contextMenu=t,this.selected=n}}class qde{constructor(e=[],t=""){this.panes=e,this.current=t}}var DHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},IHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let jv=class extends Vc{constructor(){super(),this.state=yt.resolve(qde)}getPane(e){const{panes:t}=this.state;return t.find(rr(e))}get(e){const t=this.getPane(e);return t?_m(t):void 0}add(e,t=!1){if(this.getPane(e.id)){Ai.error(`There already has a pane which id is ${e.id}, if you want to modify it, please use the update method`);return}const i=this.state.panes.concat();i.push(_m(e)),t&&this.setState({current:e.id}),this.setState({panes:i})}update(e){const{panes:t}=this.state,n=this.getPane(e.id);if(!n){Ai.error(`There is no pane found via the ${e.id} id`);return}Object.assign(n,e),this.setState({panes:_m(t)})}remove(e){var t,n;const{panes:i,current:o}=this.state,s=i.findIndex(rr(e));if(s===-1){Ai.error(`There is no pane found via the ${e} id`);return}if(e===o){const a=((t=i[s+1])===null||t===void 0?void 0:t.id)||((n=i[s-1])===null||n===void 0?void 0:n.id)||"";this.setActive(a)}i.splice(s,1),this.setState({panes:i.concat()})}setActive(e){if(!e)this.setState({current:""});else{if(!this.getPane(e)){Ai.error(`There is no pane found via the ${e} id`);return}this.setState({current:e})}}reset(){this.setState({panes:[],current:""})}};jv=DHe([Ur(),IHe("design:paramtypes",[])],jv);var kHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},THe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let qv=class extends Vc{constructor(){super(),this.state=yt.resolve(jde),this.sidebarService=yt.resolve(jv)}setActive(e){this.setState({selected:e})}reset(){this.setState({data:[],selected:"",contextMenu:[]})}add(e,t=!1){let n=[...this.state.data];Array.isArray(e)?n=n==null?void 0:n.concat(e):(n==null||n.push(e),t&&this.setActive(e.id)),n.sort((i,o)=>{const s=i.sortIndex||Number.MAX_SAFE_INTEGER,a=o.sortIndex||Number.MAX_SAFE_INTEGER;return s-a}),this.setState({data:n})}getRemoveList(e,t){return t.reduce((n,i,o)=>{const s=i.id.toString();return Array.isArray(e)&&e.includes(s)||e===s?n.concat(o):n},[])}remove(e){const{data:t}=this.state;let n=[...t];const i=this.getRemoveList(e,n);i.length?(n=n.filter((o,s)=>!i.includes(s)),this.setState({data:n})):Ai.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}toggleBar(e){const{data:t=[],selected:n}=this.state,i=t.concat(),o=i.findIndex(rr(e)),s=i[o];if(s){if(s.hidden=!s.hidden,e===n){const a=(o+1)%i.length;this.setActive(i[a].id),this.sidebarService.setActive(i[a].id)}this.setState({data:i})}else Ai.error("Toggle activity bar failed, please check your id")}toggleContextMenuChecked(e){const{contextMenu:t=[]}=this.state,n=t.concat(),i=n.find(rr(e));i?(i.icon=i.icon==="check"?"":"check",this.setState({contextMenu:n})):Ai.error(`Toggle the contextmenu failed, can not found any menu by id ${e}`)}addContextMenu(e){let t=[...this.state.contextMenu];Array.isArray(e)?t=t==null?void 0:t.concat(e):t==null||t.push(e),this.setState({contextMenu:t})}removeContextMenu(e){const{contextMenu:t}=this.state;let n=[...t];const i=this.getRemoveList(e,n);i.length?(n=n.filter((o,s)=>!i.includes(s)),this.setState({contextMenu:n})):Ai.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}onClick(e){this.subscribe(HS.OnClick,e)}onChange(e){this.subscribe(HS.OnChange,e)}};qv=kHe([Ur(),THe("design:paramtypes",[])],qv);var YN;(function(r){r.onTabClick="AuxiliaryBar.onClick"})(YN||(YN={}));class vU{constructor(e="default",t=[],n,i){this.mode="default",this.data=[],this.mode=e,this.children=i,this.data=t,this.current=n}}var zb;(function(r){r.left="left",r.right="right"})(zb||(zb={}));var ZN;(function(r){r.onClick="statusBar.onClick",r.DataChanged="statusBar.data"})(ZN||(ZN={}));class Kde{constructor(e=[],t=[],n=[]){this.leftItems=[],this.rightItems=[],this.leftItems=e,this.rightItems=t,this.contextMenu=n}}var US;(function(r){r.onSelect="menuBar.onSelect",r.onChangeMode="menuBar.onChangeMode"})(US||(US={}));class Gde{constructor(e=[]){this.data=e}}var Yg;(function(r){r.onClick="explorer.onClick",r.onPanelToolbarClick="explorer.onPanelToolbarClick",r.onCollapseChange="explorer.onCollapseChange",r.onRemovePanel="explorer.onRemovePanel",r.onCollapseAllFolders="explorer.onCollapseAllFolders"})(Yg||(Yg={}));class Yde{constructor(e=[],t,n){this.data=e,this.headerToolBar=t,this.activePanelKeys=n}}var Iu;(function(r){r.File="File",r.Folder="Folder",r.RootFolder="RootFolder"})(Iu||(Iu={}));var Gs;(function(r){r.onSelectFile="folderTree.onSelectFile",r.onDelete="folderTree.onDelete",r.onRename="folderTree.onRename",r.onUpdateFileName="folderTree.onUpdateFileName",r.onRightClick="folderTree.onRightClick",r.onContextMenuClick="folderTree.onContextMenuClick",r.onCreate="folderTree.onCreate",r.onLoadData="folderTree.onLoadData",r.onDrop="folderTree.onDrop",r.onExpandKeys="folderTree.onExpandKeys"})(Gs||(Gs={}));class NHe{constructor(e){this.fileType=Iu.File;const{id:t,name:n="",location:i="",fileType:o=Iu.File,children:s=[],icon:a="",isEditable:l=!1,content:u="",isLeaf:d=!0,data:h}=e;this.fileType=o,this.isEditable=l,this.name=n,this.id=t,this.location=i,this.children=s,this.icon=a,this.content=u,this.data=h,this.isLeaf=d}}class Zde{constructor(e={contextMenu:[],current:null,folderPanelContextMenu:[],data:[],expandKeys:[]},t=!1,n){this.folderTree=e,this.entry=n,this.autoSort=t}}var aa;(function(r){r.onClose="editorTree.close",r.onSelect="editorTree.select",r.onCloseOthers="editorTree.closeOthers",r.onCloseSaved="editorTree.closeSaved",r.onCloseAll="editorTree.closeAll",r.onSaveAll="editorTree.saveAll",r.onSplitEditorLayout="editorTree.splitEditorLayout",r.onToolbarClick="editorTree.toolbarClick",r.onContextMenu="editorTree.contextMenuClick"})(aa||(aa={}));let AHe=class{constructor(){}};var am;(function(r){r.onChange="search.onChange",r.onSearch="search.onSearch",r.onReplaceAll="search.onReplaceAll",r.onResultClick="search.onResultClick"})(am||(am={}));class Xde{constructor(e=[],t=[],n=[],i=[],o="",s="",a=!1,l=!1,u=!1,d=!1,h=!1,p={type:"info",text:""}){this.result=[],this.value="",this.replaceValue="",this.replaceMode=!1,this.isRegex=!1,this.isCaseSensitive=!1,this.isWholeWords=!1,this.preserveCase=!1,this.validationInfo={type:"info",text:""},this.headerToolBar=e,this.searchAddons=t,this.replaceAddons=n,this.value=o,this.replaceValue=s,this.replaceMode=a,this.isCaseSensitive=l,this.isWholeWords=u,this.isRegex=d,this.preserveCase=h,this.result=i,this.validationInfo=p}}var $b;(function(r){r.onTabChange="panel.onTabChange",r.onToolbarClick="panel.onToolbarClick",r.onTabClose="panel.onTabClose"})($b||($b={}));class Qde{constructor(e=null,t=[],n=[]){this.hidden=!1,this.maximize=!1,this.current=e,this.data=t,this.toolbox=n}}var XN;(function(r){r.OnChange="settings.onchange"})(XN||(XN={}));class Jde{constructor(e,t,n){this.colorTheme=e,this.editor=t,this.locale=n}}var wP;(function(r){r[r.Read=1]="Read",r[r.WaitRead=2]="WaitRead"})(wP||(wP={}));class ehe{constructor(e="",t="",n=[],i=1,o=!1,s=[],a){this.id=e,this.name=t,this.sortIndex=i,this.render=a,this.showNotifications=o,this.data=n,this.actionBar=s}}var bm;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(bm||(bm={}));var QN;(function(r){r.onSelect="problems.onSelect"})(QN||(QN={}));class the{constructor(e="",t="",n=[],i=!1){this.id=e,this.name=t,this.show=i,this.data=n}}const nhe={[Xn.Unknown]:"",[Xn.Backspace]:"",[Xn.Tab]:"",[Xn.Enter]:"",[Xn.PageUp]:"",[Xn.PageDown]:"",[Xn.Digit0]:"0",[Xn.Digit1]:"1",[Xn.Digit2]:"2",[Xn.Digit3]:"3",[Xn.Digit4]:"4",[Xn.Digit5]:"5",[Xn.Digit6]:"6",[Xn.Digit7]:"7",[Xn.Digit8]:"8",[Xn.Digit9]:"9",[Xn.KeyA]:"A",[Xn.KeyB]:"B",[Xn.KeyC]:"C",[Xn.KeyD]:"D",[Xn.KeyE]:"E",[Xn.KeyF]:"F",[Xn.KeyG]:"G",[Xn.KeyH]:"H",[Xn.KeyI]:"I",[Xn.KeyJ]:"J",[Xn.KeyK]:"K",[Xn.KeyL]:"L",[Xn.KeyM]:"M",[Xn.KeyN]:"N",[Xn.KeyO]:"O",[Xn.KeyP]:"P",[Xn.KeyQ]:"Q",[Xn.KeyR]:"R",[Xn.KeyS]:"S",[Xn.KeyT]:"T",[Xn.KeyU]:"U",[Xn.KeyV]:"V",[Xn.KeyW]:"W",[Xn.KeyX]:"X",[Xn.KeyY]:"Y",[Xn.KeyZ]:"Z",[Xn.Semicolon]:";",[Xn.Equal]:"+",[Xn.Comma]:",",[Xn.Minus]:"-",[Xn.Period]:".",[Xn.Slash]:"/",[Xn.Backquote]:"~",[Xn.BracketLeft]:"[",[Xn.Backslash]:"\\",[Xn.BracketRight]:"]",[Xn.Quote]:'"'},OHe=Object.freeze(Object.defineProperty({__proto__:null,get ActivityBarEvent(){return HS},ActivityBarModel:jde,get AuxiliaryEventKind(){return YN},AuxiliaryModel:vU,get ColorScheme(){return JL},get ColorThemeEvent(){return GN},get ColorThemeMode(){return ex},get EditorEvent(){return Ys},EditorGroupModel:Rle,EditorModel:Mle,EditorTree:AHe,get EditorTreeEvent(){return aa},get ExplorerEvent(){return Yg},get FileTypes(){return Iu},get Float(){return zb},get FolderTreeEvent(){return Gs},get IContributeType(){return Sx},IExplorerModel:Yde,get IExtensionType(){return QV},IFolderTreeModel:Zde,KeyCodeString:nhe,get MarkerSeverity(){return bm},get MenuBarEvent(){return US},MenuBarModel:Gde,NotificationModel:ehe,get NotificationStatus(){return wP},get PanelEvent(){return $b},PanelModel:Qde,get ProblemsEvent(){return QN},ProblemsModel:the,get SearchEvent(){return am},SearchModel:Xde,get SettingsEvent(){return XN},SettingsModel:Jde,SidebarModel:qde,get StatusBarEvent(){return ZN},StatusBarModel:Kde,TreeNodeModel:NHe},Symbol.toStringTag,{value:"Module"}));var RHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},MHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Hx=class extends Vc{constructor(){super(),this.getCurrentTab=()=>{const{current:e,data:t}=this.getState();return t==null?void 0:t.find(i=>i.key===e)},this.addAuxiliaryBar=e=>{const t=Array.isArray(e)?e:[e];this.setState({data:this.state.data.concat(t)})},this.setActive=e=>{this.setState({current:e})},this.setChildren=e=>{this.setState({children:e})},this.setMode=e=>{if(typeof e=="string")return this.setState({mode:e}),e;const t=e(this.state.mode);return this.setState({mode:t}),t},this.reset=()=>{this.setState(yt.resolve(vU))},this.state=yt.resolve(vU)}onTabClick(e){this.subscribe(YN.onTabClick,e)}};Hx=RHe([Ur(),MHe("design:paramtypes",[])],Hx);var PHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},FHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let qC=class extends Vc{constructor(){super(),this.sperator="-",this.setMenus=e=>{this.setState({data:Ao.cloneDeep(e)})},this.onSelect=e=>{this.subscribe(US.onSelect,e)},this.state=yt.resolve(Gde)}getReferenceMenu(e){const{data:t}=this.state,n=t.map((o,s)=>({source:o,path:`${s}`}));let i;for(;n.length;){const{source:o,path:s}=n.shift();o.id===e?i={source:o,path:s}:n.push(...(o.data||[]).map((a,l)=>({source:a,path:`${s}${this.sperator}${l}`})))}return i}getMenuById(e){const t=this.getReferenceMenu(e);return t&&Ao.cloneDeep(t.source)}append(e,t){const{data:n}=this.state,i=this.getReferenceMenu(t);if(!i){Ai.error(`There is no menu found by ${t}`);return}const{source:o}=i;Array.isArray(o.data)?o.data.push(e):o.data=[e];const s=Ao.cloneDeep(n);this.setState({data:s})}remove(e){const{data:t}=this.state,n=this.getReferenceMenu(e);if(!n){Ai.error(`There is no menu found by ${e}`);return}const{path:i}=n,o=i.split(this.sperator);o.length=o.length-1;const s=o.reduce((l,u)=>{const{data:d}=l;return d[u]},{data:t}),a=s.data.findIndex(l=>l.id===e);s.data.splice(a,1),this.setState({data:Ao.cloneDeep(t)})}update(e,t={}){const{data:n}=this.state,i=this.getReferenceMenu(e);if(!i){Ai.error(`There is no menu found by ${e}`);return}const o=i.source;Object.assign(o,t);const s=Ao.cloneDeep(n);this.setState({data:s})}reset(){this.setState({data:[]})}};qC=PHe([Ur(),FHe("design:paramtypes",[])],qC);var BHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},WHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let e1=class extends Vc{constructor(){super(),this.state=yt.resolve(Yde)}setExpandedPanels(e){this.setState({activePanelKeys:e})}toggleIcon(e){return e==="check"?"":"check"}getAction(e){var t;const{headerToolBar:n}=this.state,i=(t=n==null?void 0:n.contextMenu)===null||t===void 0?void 0:t.find(rr(e));return i&&_m(i)}updatePanel(e){if(!e.id){Ai.error("Must provide id property in update data");return}const t=this.state.data.concat(),n=t.find(rr(e.id));if(!n){Ai.error(`There is no panel found in state whose id is ${e.id}`);return}Object.assign(n,e),this.setState({data:t}),this.updateAction({id:e.id.toString(),name:e.name,title:e.title,sortIndex:e.sortIndex})}updateAction(e){var t;if(!e.id){Ai.error("Must provide id property in action data");return}const{headerToolBar:n}=this.state;if(!n){Ai.error("Molecule can' update the action, because there is no headerToolBar in Explorer");return}const i=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=i.find(rr(e.id));if(!o){Ai.error(`There is no action found in actions whose id is ${e.id}`);return}Object.assign(o,e),this.setState({headerToolBar:Object.assign(Object.assign({},n),{contextMenu:i})})}addPanel(e){const t=Array.isArray(e)?e:[e],n=[...this.state.data],i=[];t.forEach(o=>{n.findIndex(rr(o.id))!==-1?Ai.error(`There is already a panel whose id is ${o.id}`):(n.push(_m(o)),i.push({id:o.id.toString(),name:o.name,title:o.name,icon:"check",sortIndex:o.sortIndex}))}),n.sort(({sortIndex:o=0},{sortIndex:s=0})=>s-o),this.setState({data:n}),this.addAction(i)}addAction(e){var t;const n=Array.isArray(e)?e:[e],{headerToolBar:i}=this.state;if(!i){Ai.error("Molecule can't add the action, because there is no headerToolBar in Explorer");return}const o=((t=i.contextMenu)===null||t===void 0?void 0:t.concat())||[];n.forEach(a=>{o.findIndex(rr(a.id))!==-1?Ai.error(`There is already an action whose id is ${a.id}`):o.push(a)}),o.sort(({sortIndex:a=0},{sortIndex:l=0})=>l-a);const s=Object.assign(Object.assign({},i),{contextMenu:o});this.setState({headerToolBar:s})}removePanel(e){const{data:t}=this.state,n=[...t],i=n.findIndex(rr(e));i>-1&&n.splice(i,1),this.setState({data:n}),this.removeAction(e)}removeAction(e){const{headerToolBar:t}=this.state;if(!t){Ai.error("Molecule can' remove the action, because there is no headerToolBar in Explorer");return}const n=t.contextMenu||[],i=n==null?void 0:n.findIndex(rr(e));i>-1&&n.splice(i,1);const o=Object.assign(Object.assign({},t),{contextMenu:n});this.setState({headerToolBar:o})}togglePanel(e){const{data:t}=this.state,n=t.concat(),i=n.find(rr(e));i&&(i.hidden=!i.hidden,this.setState({data:n}),this.toggleHeaderBar(e))}toggleHeaderBar(e){var t;const{headerToolBar:n}=this.state;if(!n){Ai.error("Molecule can' toggle the header bar, because there is no headerToolBar in Explorer");return}const i=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=i.find(rr(e));if(o){o.icon=this.toggleIcon(o.icon);const s=Object.assign(Object.assign({},n),{contextMenu:i});this.setState({headerToolBar:s})}}reset(){this.setState({data:[],headerToolBar:void 0})}onClick(e){this.subscribe(Yg.onClick,e)}onRemovePanel(e){this.subscribe(Yg.onRemovePanel,e)}onCollapseAllFolders(e){this.subscribe(Yg.onCollapseAllFolders,e)}onPanelToolbarClick(e){this.subscribe(Yg.onPanelToolbarClick,e)}};e1=BHe([Ur(),WHe("design:paramtypes",[])],e1);const wq="molecule",ihe="activityBar",Y2="sidebar",VHe="explorer",ite="statusBar",HHe="folderTree",UHe="editorTree";var SP;(function(r){r.left="left",r.right="right"})(SP||(SP={}));var Ac;(function(r){r.horizontal="horizontal",r.vertical="vertical"})(Ac||(Ac={}));var EP;(function(r){r.OnWorkbenchDidMount="workbench.didMount"})(EP||(EP={}));class zHe{constructor(e=[300,"auto",300],t=["auto","150px"],n=[],i={hidden:!1},o={hidden:!0},s={hidden:!1,panelMaximized:!1},a={hidden:!1},l={hidden:!1,position:SP.left},u={hidden:!1,mode:Ac.vertical},d=Ac.vertical){this.splitPanePos=e,this.horizontalSplitPanePos=t,this.groupSplitPos=n,this.activityBar=i,this.auxiliaryBar=o,this.panel=s,this.statusBar=a,this.sidebar=l,this.menuBar=u,this.editorGroupDirection=d}}var $He=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Mh=class extends Vc{constructor(){super(),this.state=yt.resolve(zHe)}onWorkbenchDidMount(e){this.subscribe(EP.OnWorkbenchDidMount,e)}get container(){return this._container=document.getElementById(wq)||document.body,this._container}toggleMenuBarVisibility(){const{menuBar:e}=this.state,t=e.hidden;return this.setState({menuBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}togglePanelVisibility(){const{panel:e}=this.state,t=e.hidden;return this.setState({panel:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleSidebarVisibility(){const{sidebar:e}=this.state,t=e.hidden;return this.setState({sidebar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleActivityBarVisibility(){const{activityBar:e}=this.state,t=e.hidden;return this.setState({activityBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleStatusBarVisibility(){const{statusBar:e}=this.state,t=e.hidden;return this.setState({statusBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}setSideBarPosition(e){const{sidebar:t}=this.state,{position:n}=t;n!==e&&this.setState({sidebar:{position:e,hidden:!1}})}togglePanelMaximized(){const e=this.state.panel;return this.setState({panel:Object.assign(Object.assign({},e),{panelMaximized:!e.panelMaximized})}),!e.panelMaximized}setPaneSize(e){this.setState({splitPanePos:e})}setHorizontalPaneSize(e){this.setState({horizontalSplitPanePos:e})}setGroupSplitSize(e){this.setState({groupSplitPos:e})}setMenuBarMode(e){const{menuBar:t}=this.state,{mode:n}=t;n!==e&&(this.setState({menuBar:Object.assign(Object.assign({},t),{mode:e,hidden:!1})}),this.emit(US.onChangeMode,e))}getMenuBarMode(){const{menuBar:e}=this.state;return e.mode}setEditorGroupDirection(e){typeof e=="function"?this.setState({editorGroupDirection:e(this.state.editorGroupDirection)}):this.setState({editorGroupDirection:e})}setAuxiliaryBar(e){if(typeof e=="boolean")return this.setState({auxiliaryBar:{hidden:e}}),e;const t=e(this.state.auxiliaryBar.hidden);return this.setState({auxiliaryBar:{hidden:t}}),t}reset(){this.setState({splitPanePos:["300px","auto"],horizontalSplitPanePos:["70%","auto"],activityBar:{hidden:!1},panel:{hidden:!1,panelMaximized:!1},statusBar:{hidden:!1},sidebar:{hidden:!1,position:SP.left},menuBar:{hidden:!1,mode:Ac.vertical}})}};Mh=$He([Ur(),jHe("design:paramtypes",[])],Mh);var qHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Md=class extends Vc{constructor(){super(),this.defaultActions=[],this.defaultMenus=[],this.updateActions=(e,t)=>{var n;const{current:i,groups:o}=this.getState();if(!i)return;const s=(o==null?void 0:o.concat())||[],a=s.find(rr(t||i.id));if(a){const l=((n=a.actions)===null||n===void 0?void 0:n.concat())||[];l.forEach(u=>{const d=e.find(h=>h.id===u.id);d&&Object.assign(u,d)}),a.actions=l,this.setState({current:a.id===i.id?a:i,groups:s})}},this.state=yt.resolve(Mle),this.explorerService=yt.resolve(e1),this.layoutService=yt.resolve(Mh)}updateEditorOptions(e){var t;const n=Object.assign({},this.state.editorOptions,e);this.setState({editorOptions:n}),(t=this.editorInstance)===null||t===void 0||t.updateOptions(n)}getDefaultActions(){return Ao.cloneDeep(this.defaultActions)}getDefaultMenus(){return Ao.cloneDeep(this.defaultMenus)}disposeModel(e){(Array.isArray(e)?e:[e]).forEach(n=>{var i;(i=xd.getModel(Lx.parse(n.id.toString())))===null||i===void 0||i.dispose()})}isOpened(e,t){return(t||this.state.groups||[]).some(i=>this.getTabById(e,i.id))}setDefaultActions(e){this.defaultActions=e}setDefaultMenus(e){this.defaultMenus=e}setEntry(e){this.setState({entry:e})}getTabById(e,t){var n;const i=this.getGroupById(t);if(i)return(n=i.data)===null||n===void 0?void 0:n.find(rr(e))}get editorInstance(){var e;return(e=this.state.current)===null||e===void 0?void 0:e.editorInstance}updateTab(e,t){var n,i,o;let s;const a=(n=e==null?void 0:e.data)===null||n===void 0?void 0:n.value;if(t){const l=this.getGroupById(t);if(!((i=l==null?void 0:l.data)===null||i===void 0)&&i.length){const u=l.data.find(rr(e.id));u&&(s=Object.assign(u,e)),l.activeTab===e.id&&(Ao.isString(a)&&!(u!=null&&u.renderPane)&&this.setGroupEditorValue(l,a),s=Object.assign(l.tab,e)),this.updateGroup(t,l),t===((o=this.state.current)===null||o===void 0?void 0:o.id)&&this.updateCurrentGroup(l)}}else{const{groups:l=[],current:u}=this.state;l.forEach(d=>{const h=this.getTabById(e.id,d.id);h&&(s=Object.assign(h,e)),d.activeTab===e.id&&(Ao.isString(a)&&!(h!=null&&h.renderPane)&&this.setGroupEditorValue(d,a),s=Object.assign(d.tab,e))}),(u==null?void 0:u.activeTab)===e.id&&(s=Object.assign(u.tab,e)),this.setState({current:u&&Object.assign({},u),groups:[...l]})}return s}setGroupEditorValue(e,t){var n;const i=(n=e.editorInstance)===null||n===void 0?void 0:n.getModel();if(!i)return;(i==null?void 0:i.getValue())!==t&&(i==null||i.setValue(t))}closeTab(e,t){const n=this.getGroupIndexById(t);if(n===-1)return;const{groups:i=[]}=this.state,o=[...i],s=o[n],a=s.data.findIndex(rr(e)),l=Ao.cloneDeep(s.data[a]);if(a!==-1){if(s.data.length===1&&a===0){const u=o[n+1]||o[n-1];o.splice(n,1),this.setState({groups:o,current:(o==null?void 0:o.length)===0?void 0:u},()=>{!this.isOpened(e)&&this.disposeModel(l),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(o.length?new Array(o.length+1).fill("auto"):[]);return}if(e===s.activeTab){const u=s.data[a+1]||s.data[a-1];s.tab=Object.assign({},u),s.activeTab=u==null?void 0:u.id}s.data.splice(a,1),o[n]=s,this.setState({current:s,groups:o},()=>{!this.isOpened(e)&&this.disposeModel(l),this.explorerService.forceUpdate()})}}closeOther(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,o=[...i],s=e.id,l=o[n].data,u=l.filter(rr(s)),d=Ao.cloneDeep(l.filter(h=>h.id!==s&&!this.isOpened(h.id,o.filter(p=>p.id!==t))));this.updateGroup(t,{data:u}),this.setActive(t,s),this.disposeModel(d),this.explorerService.forceUpdate()}closeToRight(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,o=[...i],s=e.id,l=o[n].data,u=l.findIndex(rr(s));if(u<=-1)return;const d=l==null?void 0:l.slice(0,u+1),h=Ao.cloneDeep(l==null?void 0:l.slice(u+1).filter(p=>!this.isOpened(p.id,o.filter(_=>_.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,s),this.disposeModel(h||[]),this.explorerService.forceUpdate()}closeToLeft(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:i=[]}=this.state,o=[...i],s=e.id,l=o[n].data,u=l.findIndex(rr(s));if(u<=-1)return;const d=l==null?void 0:l.slice(u,l.length),h=Ao.cloneDeep(l==null?void 0:l.slice(0,u).filter(p=>!this.isOpened(p.id,o.filter(_=>_.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,s),this.disposeModel(h||[]),this.explorerService.forceUpdate()}getGroupById(e){const{groups:t}=this.state;return t.find(rr(e))}getGroupIndexById(e){const{groups:t}=this.state;return t.findIndex(rr(e))}getGroupIdByTab(e){const{groups:t=[]}=this.state;return this.isOpened(e,t)?t.find(o=>this.getTabById(e,o.id)).id:null}setActive(e,t){const{groups:n=[]}=this.state,i=this.getGroupIndexById(e);if(i>-1){const o=[...n],s=o[i],a=this.getTabById(t,s.id);if(a){const l=Object.assign({},s);l.tab=Object.assign({},a),l.activeTab=t,o[i]=l,this.setState({current:l,groups:o})}}}updateGroup(e,t){const{groups:n=[]}=this.state,i=[...n],o=this.getGroupIndexById(e);if(o>-1){const s=Object.assign({},i[o],t);i[o]=s,this.setState({groups:i})}}updateCurrentGroup(e){const{current:t}=this.state,n=Object.assign({},t,e);this.setState({current:n})}open(e,t){const{current:n,groups:i=[]}=this.state;let o=n;if(t&&(o=this.getGroupById(t)),o){const{id:s}=e,a=o==null?void 0:o.data.find(rr(s));if(a&&s===(o==null?void 0:o.activeTab))return;const l=this.getGroupIndexById(o.id),u=i[l];a||o.data.push(e),o.tab=e,o.activeTab=s,i[l]=Object.assign(Object.assign({},u),{tab:e,activeTab:s})}else o=new Rle(i.length+1,e,e.id,[e],this.defaultActions,this.defaultMenus),i.push(o);this.emit(Ys.OpenTab,e),this.setState({current:o,groups:[...i]}),this.explorerService.forceUpdate()}onOpenTab(e){this.subscribe(Ys.OpenTab,e)}closeAll(e){var t;const{current:n,groups:i=[]}=this.state,o=this.getGroupIndexById(e);if(o>-1){const s=[...i];let a=n;const l=s.splice(o,1),u=Ao.cloneDeep(((t=l[0].data)===null||t===void 0?void 0:t.filter(d=>!this.isOpened(d.id,s)))||[]);n&&n.id===e&&(a=i[o+1]||i[o-1]),this.setState({groups:s,current:a},()=>{this.disposeModel(u),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(s.length?new Array(s.length+1).fill("auto"):[])}}cloneGroup(e){const{current:t,groups:n=[]}=this.state,i=Object.assign({},e?this.getGroupById(e):t),o=pne(),s=Object.assign({},i.tab);return i.data=[s],i.tab=s,i.activeTab=s.id,i.id=o,this.setState({current:i,groups:[...n,i]}),i}onUpdateTab(e){this.subscribe(Ys.OnUpdateTab,e)}onMoveTab(e){this.subscribe(Ys.OnMoveTab,e)}onSelectTab(e){this.subscribe(Ys.OnSelectTab,e)}onCloseAll(e){this.subscribe(Ys.OnCloseAll,e)}onCloseTab(e){this.subscribe(Ys.OnCloseTab,e)}onCloseOther(e){this.subscribe(Ys.OnCloseOther,e)}onCloseToLeft(e){this.subscribe(Ys.OnCloseToLeft,e)}onCloseToRight(e){this.subscribe(Ys.OnCloseToRight,e)}onActionsClick(e){this.subscribe(Ys.onActionsClick,e)}};Md=qHe([Ur(),KHe("design:paramtypes",[])],Md);var GHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},YHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Kv=class extends Vc{constructor(){super(),this.state=yt.resolve(Kde)}getItem(e,t){const{rightItems:n,leftItems:i}=this.state;if(!t){let a=i.findIndex(rr(e.id));return a>-1?{index:a,item:i[a],source:"leftItems"}:(a=n.findIndex(rr(e.id)),a>-1?{index:a,item:n[a],source:"rightItems"}:{index:-1,item:null,source:null})}const o=t===zb.left?i:n,s=o.findIndex(rr(e.id));return{index:s,item:o[s]||null,source:t===zb.left?"leftItems":"rightItems"}}add(e,t){if(this.getItem(e,t).item){Ai.error(`There is already a status whose id is ${e.id}, if you want to update it, please use the update method`);return}const i=t===zb.left?"leftItems":"rightItems",o=this.state[i].concat();o.push(e),this.setState({[i]:o})}update(e,t){const n=this.getItem(e,t);if(!n.source){Ai.error(`There is no status found whose id is ${e.id}`);return}const{index:i,item:o,source:s}=n,a=this.state[s].concat();a[i]=Object.assign({},o,e),this.setState({[s]:a})}getStatusBarItem(e,t){const n=this.getItem({id:e},t);return n.source?_m(n.item):n.item}remove(e,t){const n=this.getItem({id:e},t);if(!n.source){Ai.error(`There is no status item found whose id is ${e}`);return}const{index:i,source:o}=n,s=this.state[o].concat();s.splice(i,1),this.setState({[o]:s})}reset(){this.setState({rightItems:[],leftItems:[],contextMenu:[]})}onClick(e){this.subscribe(ZN.onClick,e)}};Kv=GHe([Ur(),YHe("design:paramtypes",[])],Kv);var ZHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XHe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},QHe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let Ux=class extends Vc{constructor(){super(),this.fileContextMenu=[],this.folderContextMenu=[],this.onDropTree=e=>{this.subscribe(Gs.onDrop,e)},this.onRightClick=e=>{this.subscribe(Gs.onRightClick,e)},this.onCreate=e=>{this.subscribe(Gs.onCreate,e)},this.onContextMenu=e=>{this.subscribe(Gs.onContextMenuClick,e)},this.onLoadData=e=>{this.subscribe(Gs.onLoadData,e)},this.onExpandKeys=e=>{this.subscribe(Gs.onExpandKeys,e)},this.state=yt.resolve(Zde),this.explorerService=yt.resolve(e1),this.builtinService=yt.resolve(wa)}isHiddenFile(e){var t;return!!(!((t=e.name)===null||t===void 0)&&t.startsWith("."))}sortTree(e){e.sort((t,n)=>{if(t.isLeaf!==n.isLeaf)return t.isLeaf>n.isLeaf?1:-1;if(t.name&&n.name){const i=Number(this.isHiddenFile(t)),o=Number(this.isHiddenFile(n));return i^o?i?-1:1:i&i?t.name.substring(1).localeCompare(n.name.substring(1)):t.name.localeCompare(n.name)}return t.isEditable?-1:1}),e.forEach(t=>this.sortTree(t.children||[]))}reset(){this.setState({folderTree:{contextMenu:[],current:null,folderPanelContextMenu:[],data:[]},entry:void 0})}getFileContextMenu(){return this.fileContextMenu}getParentNode(e){var t,n;const i=(n=(t=this.state.folderTree)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n[0];if(!i)return null;const o=new iR(i),s=o.getHashMap(e);return s&&s.parent?o.getNode(s.parent):null}setFileContextMenu(e){this.fileContextMenu=e}getFolderContextMenu(){return this.folderContextMenu}setFolderContextMenu(e){this.folderContextMenu=e}getExpandKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.expandKeys)||[]}setExpandKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{expandKeys:e})})}getLoadedKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.loadedKeys)||[]}setLoadedKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{loadedKeys:e})})}setCurrentFolderLocation(e,t){const n=e.children,{tree:i}=this.getCurrentRootFolderInfo(t),o=i.getHashMap(t);e.location=`${o.node.location}/${e.name}`,n!=null&&n.length&&n.forEach(s=>{s.location=`${e.location}/${s.name}`})}getRootFolderById(e){var t;const n=((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[];for(let i=0;i<n.length;i++){const o=n[i];if(new iR(o).getNode(e))return o}return null}addRootFolder(e){var t;const{folderTree:n,autoSort:i}=this.state;if(!((t=n==null?void 0:n.data)===null||t===void 0)&&t.length)return;i&&this.sortTree(e.children||[]),this.setState({folderTree:Object.assign(Object.assign({},n),{data:[e]})});const{SAMPLE_FOLDER_PANEL_ID:o}=this.builtinService.getConstants();this.explorerService.updatePanel({id:o,name:e.name||"Default Root Folder"})}getRootFolderIndex(e){var t;return(((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[]).findIndex(o=>o.id===e)}getCurrentRootFolderInfo(e){const t=this.getRootFolderById(e);if(!t)return{currentRootFolder:null,index:-1,tree:null};const n=this.getRootFolderIndex(t.id),i=new iR(t);return{currentRootFolder:t,index:n,tree:i}}getPosOfType(e,t){if(!t.length||e===Iu.Folder||e===Iu.RootFolder)return 0;const n=t.findIndex(i=>i.fileType===Iu.File);return n===-1?t.length:n}add(e,t){var n,i;const o=e.fileType==="RootFolder",{autoSort:s}=this.state;if(o){this.addRootFolder(e);return}if(!t&&t!==0)throw new Error("File node or folder node both need id");const a=((n=this.state.folderTree)===null||n===void 0?void 0:n.data)||[],{tree:l,index:u}=this.getCurrentRootFolderInfo(t);if(u<=-1){Ai.error("Please check id again, there is not folder tree");return}const d=l.getHashMap(t);if(d.node.fileType===Iu.File){e.location=((i=d.node.location)===null||i===void 0?void 0:i.replace(/[^\/]+$/,`${e.name}`))||"";const h=l.getNode(d.parent),p=this.getPosOfType(e.fileType,h.children||[]);l.insertNode(e,d.parent,p)}else{this.setCurrentFolderLocation(e,t);const h=this.getPosOfType(e.fileType,d.node.children||[]);l==null||l.insertNode(e,d.id,h)}a[u]=l.obj,s&&this.sortTree(a[u].children||[]),this.setState({folderTree:Object.assign(Object.assign({},this.state.folderTree),{data:_m(a)})})}remove(e){var t;const n=_m(this.getState().folderTree||{}),i=n.data||[],{tree:o,index:s}=this.getCurrentRootFolderInfo(e);if(!o||s===-1){Ai.error(`There is unable to find a tree node whose id is ${e}`);return}o.removeNode(e),s>-1&&(i[s]=o.obj),!((t=n.loadedKeys)===null||t===void 0)&&t.includes(e.toString())&&(n.loadedKeys=n.loadedKeys.filter(a=>a!==e.toString())),this.setState({folderTree:n})}update(e){const{id:t}=e,n=QHe(e,["id"]),{autoSort:i}=this.state;if(!t&&t!==0)throw new Error("Id is required in updating data");const o=_m(this.getState().folderTree||{}),s=o.data||[],{tree:a,index:l}=this.getCurrentRootFolderInfo(t);if(!a){Ai.error(`There is unable to find a tree node whose id is ${t}`);return}a.updateNode(t,n),l>-1&&(s[l]=a.obj,i&&this.sortTree(s[l].children||[])),this.setState({folderTree:o})}get(e){const{tree:t}=this.getCurrentRootFolderInfo(e);return t?t.getNode(e):null}setActive(e){const{folderTree:t}=this.state,n=typeof e>"u"?null:this.get(e);this.setState({folderTree:Object.assign(Object.assign({},t),{current:n})})}setEntry(e){this.setState({entry:e})}onRename(e){this.subscribe(Gs.onRename,e)}onRemove(e){this.subscribe(Gs.onDelete,e)}onUpdateFileName(e){this.subscribe(Gs.onUpdateFileName,e)}onSelectFile(e){this.subscribe(Gs.onSelectFile,e)}toggleAutoSort(){this.setState({autoSort:!this.state.autoSort})}};Ux=ZHe([Ur(),XHe("design:paramtypes",[])],Ux);var JHe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let LP=class extends Vc{constructor(){super(),this.editorService=yt.resolve(Md),this.state=this.editorService.getState()}onClose(e){this.subscribe(aa.onClose,e)}onCloseOthers(e){this.subscribe(aa.onCloseOthers,e)}onCloseSaved(e){this.subscribe(aa.onCloseSaved,e)}onSelect(e){this.subscribe(aa.onSelect,e)}onCloseAll(e){this.subscribe(aa.onCloseAll,e)}onSaveAll(e){this.subscribe(aa.onSaveAll,e)}onToolbarClick(e){this.subscribe(aa.onToolbarClick,e)}onLayout(e){this.subscribe(aa.onSplitEditorLayout,e)}onContextMenu(e){this.subscribe(aa.onContextMenu,e)}};LP=JHe([Ur(),eUe("design:paramtypes",[])],LP);const St={PANEL_PROBLEMS:"panel.problems.title",STATUS_PROBLEMS:"statusbar.problems.title",SAMPLE_FOLDER_PANEL_ID:"sidebar.explore.folders",EDITOR_PANEL_ID:"sidebar.explore.openEditor",OUTLINE_PANEL_ID:"sidebar.explore.outline",OUTLINE_PANEL_MORE_DESC:"sidebar.explore.outlineMore",EXPLORER_ACTIVITY_ITEM:"sidebar.explore.title",EXPLORER_ACTION_TITLE:"sidebar.explore.actionDesc",EXPLORER_TOGGLE_VERTICAL:"sidebar.explore.toggleVertical",EXPLORER_TOGGLE_SAVE_ALL:"sidebar.explore.saveALL",EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:"sidebar.explore.closeAllEditors",EXPLORER_TOGGLE_SAVE_GROUP:"sidebar.explore.saveGroup",EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:"sidebar.explore.closeGroupEditors",NEW_FILE_COMMAND_ID:"explorer.newFile",NEW_FOLDER_COMMAND_ID:"explorer.newFolder",COLLAPSE_COMMAND_ID:"explorer.collapse",RENAME_COMMAND_ID:"explorer.rename",REMOVE_COMMAND_ID:"explorer.remove",DELETE_COMMAND_ID:"explorer.delete",OPEN_TO_SIDE_COMMAND_ID:"explorer.openToSide",FIND_IN_WORKSPACE_ID:"filesExplorer.findInWorkspace",DOWNLOAD_COMMAND_ID:"explorer.download",EDITOR_MENU_CLOSE_TO_RIGHT:"editor.closeToRight",EDITOR_MENU_CLOSE_TO_LEFT:"editor.closeToLeft",EDITOR_MENU_CLOSE_ALL:"editor.closeAll",EDITOR_MENU_CLOSE_OTHERS:"editor.closeOthers",EDITOR_MENU_CLOSE_SAVED:"editor.closeSaved",EDITOR_MENU_CLOSE:"editor.close",EDITOR_MENU_SHOW_OPENEDITORS:"editor.showOpenEditors",EDITOR_MENU_SPILIT:"editor.split",SETTING_ID:"Setting",PROBLEM_MODEL_ID:"MO_PROBLEMS",PROBLEM_MODEL_NAME:"Problems",NOTIFICATION_CLEAR_ALL_ID:"ClearAll",NOTIFICATION_HIDE_ID:"HideNotifications",NOTIFICATION_MODEL_ID:"MO_NOTIFICATION",NOTIFICATION_MODEL_NAME:"Notification",STATUS_BAR_HIDE_ID:"hide",SEARCH_CASE_SENSITIVE_COMMAND_ID:"search.matchCase",SEARCH_WHOLE_WORD_COMMAND_ID:"search.matchWholeWord",SEARCH_REGULAR_EXPRESSION_COMMAND_ID:"search.useRegularExpression",SEARCH_PRESERVE_CASE_COMMAND_ID:"search.preserveCase",SEARCH_REPLACE_ALL_COMMAND_ID:"search.replaceAll",SEARCH_ACTIVITY_ITEM:"sidebar.search.title",SEARCH_TOOLBAR_REFRESH:"search.toolbar.refresh",SEARCH_TOOLBAR_CLEAR:"search.toolbar.clearAll",SEARCH_TOOLBAR_COLLAPSE:"search.toolbar.collapseAll",PANEL_TOOLBOX_CLOSE:"panel.toolbox.closePanel",PANEL_TOOLBOX_RESIZE:"panel.toolbox.maximize",PANEL_TOOLBOX_RESTORE_SIZE:"panel.toolbox.restoreSize",PANEL_OUTPUT:"panel.output.title",MENU_APPEARANCE_ID:"Appearance",MENU_FILE_OPEN:"openFile",MENU_QUICK_COMMAND:"editor.action.quickCommand",MENU_VIEW_MENUBAR:"workbench.action.showMenuBar",MENU_VIEW_AUXILIARY:"workbench.action.showAuxiliary",MENU_VIEW_ACTIVITYBAR:"workbench.action.showActivityBar",MENU_VIEW_STATUSBAR:"workbench.action.showStatusBar",MENU_VIEW_PANEL:"workbench.action.showPanel",ACTION_QUICK_COMMAND:"editor.action.quickCommand",ACTION_QUICK_SELECT_ALL:"editor.action.quickSelectAll",ACTION_QUICK_COPY_LINE_UP:"editor.action.copyLinesUpAction",ACTION_QUICK_UNDO:"editor.action.undo",ACTION_QUICK_REDO:"editor.action.redo",ACTION_QUICK_CREATE_FILE:"workbench.action.quickCreateFile",ACTION_QUICK_CREATE_FOLDER:"workbench.action.quickCreateFolder",ACTION_QUICK_ACCESS_SETTINGS:"workbench.action.quickAccessSettings",ACTION_SELECT_THEME:"workbench.action.selectTheme",ACTION_SELECT_LOCALE:"workbench.action.selectLocale",ACTIVITY_BAR_GLOBAL_SETTINGS:"global.menu.settings",ACTIVITY_BAR_GLOBAL_ACCOUNT:"global.menu.account",CONTEXT_MENU_MENU:"menubar",CONTEXT_MENU_EXPLORER:"sidebar.explore.title",CONTEXT_MENU_SEARCH:"sidebar.search.title",CONTEXT_MENU_HIDE:"menu.hideActivityBar",MENUBAR_MODE_HORIZONTAL:"menuBar.mode.horizontal",MENUBAR_MODE_VERTICAL:"menuBar.mode.vertical",MENUBAR_MENU_MODE_DIVIDER:"menuBar.modeDivider"},rte={builtInExplorerActivityItem:()=>({id:St.EXPLORER_ACTIVITY_ITEM,name:Kt(St.EXPLORER_ACTIVITY_ITEM,"Explore"),icon:"files",title:Kt(St.EXPLORER_ACTIVITY_ITEM,"Explore"),sortIndex:1}),builtInExplorerFolderPanel:()=>({id:St.SAMPLE_FOLDER_PANEL_ID,sortIndex:8,name:Kt("menu.defaultProjectName","No Open Folder"),toolbar:[{id:St.NEW_FILE_COMMAND_ID,title:Kt("menu.newFile","New File"),icon:"new-file"},{id:St.NEW_FOLDER_COMMAND_ID,title:Kt("menu.newFolder","New Folder"),icon:"new-folder"},{id:"refresh",title:Kt("sidebar.explore.refresh","Refresh Explorer"),icon:"refresh"},{id:St.COLLAPSE_COMMAND_ID,title:Kt("sidebar.explore.collapseFolders","Collapse Folders in Explorer"),icon:"collapse-all"}],config:{grow:2}}),builtInExplorerHeaderToolbar:()=>({id:St.EXPLORER_ACTION_TITLE,title:Kt(St.EXPLORER_ACTION_TITLE,"View and More Actions..."),icon:"ellipsis",contextMenu:[]}),builtInExplorerEditorPanel:()=>({id:St.EDITOR_PANEL_ID,sortIndex:9,name:Kt(St.EDITOR_PANEL_ID,"OPEN EDITORS"),toolbar:[{id:St.EXPLORER_TOGGLE_VERTICAL,title:Kt(St.EXPLORER_TOGGLE_VERTICAL,"Toggle Vertical"),icon:"editor-layout"},{id:St.EXPLORER_TOGGLE_SAVE_ALL,title:Kt(St.EXPLORER_TOGGLE_SAVE_ALL,"Save All"),icon:"save-all"},{id:St.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,title:Kt(St.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,"Close All Editors"),icon:"close-all"}],groupToolbar:[{id:St.EXPLORER_TOGGLE_SAVE_GROUP,title:Kt(St.EXPLORER_TOGGLE_SAVE_GROUP,"Save Group"),icon:"save-all"},{id:St.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,title:Kt(St.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,"Close Group Editors"),icon:"close-all"}],config:{grow:0}}),builtInExplorerOutlinePanel:()=>({id:"outline",name:Kt("sidebar.explore.outline","OUTLINE"),toolbar:[{id:"outline-collapse",title:Kt("toolbar.collapseAll","Collapse All"),icon:"collapse-all"},{id:"outline-more",title:Kt("sidebar.explore.outlineMore","More Actions..."),icon:"ellipsis"}]}),BuiltInEditorOptions:()=>({renderWhitespace:"none",tabSize:4,fontSize:12}),builtInEditorInitialActions:()=>[{id:St.EDITOR_MENU_SPILIT,name:"Split Editor Right",title:Kt("editor.actions.splitRight","Split Editor Right"),icon:"split-horizontal",place:"outer"},{id:St.EDITOR_MENU_SHOW_OPENEDITORS,name:"Show Opened Editors"},{id:St.EDITOR_MENU_CLOSE_ALL,name:Kt(St.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorInitialMenu:()=>[{id:St.EDITOR_MENU_CLOSE,name:Kt(St.EDITOR_MENU_CLOSE,"Close")},{id:St.EDITOR_MENU_CLOSE_OTHERS,name:Kt(St.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:St.EDITOR_MENU_CLOSE_TO_RIGHT,name:Kt(St.EDITOR_MENU_CLOSE_TO_RIGHT,"Close To Right")},{id:St.EDITOR_MENU_CLOSE_TO_LEFT,name:Kt(St.EDITOR_MENU_CLOSE_TO_LEFT,"Close To Left")},{id:St.EDITOR_MENU_CLOSE_ALL,name:Kt(St.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeHeaderContextMenu:()=>[{id:St.EDITOR_MENU_CLOSE_SAVED,name:Kt(St.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:St.EDITOR_MENU_CLOSE_ALL,name:Kt(St.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeContextMenu:()=>[{id:St.EDITOR_MENU_CLOSE,name:Kt(St.EDITOR_MENU_CLOSE,"Close")},{id:St.EDITOR_MENU_CLOSE_OTHERS,name:Kt(St.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:St.EDITOR_MENU_CLOSE_SAVED,name:Kt(St.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:St.EDITOR_MENU_CLOSE_ALL,name:Kt(St.EDITOR_MENU_CLOSE_ALL,"Close All")}],BuiltInSettingsTab:()=>({id:St.SETTING_ID,name:"settings.json",data:{language:"json",value:""}}),builtInStatusProblems:()=>({id:St.STATUS_PROBLEMS,sortIndex:1,data:{warnings:0,errors:0,infos:0},name:"Problems"}),builtInPanelProblems:()=>({id:St.PANEL_PROBLEMS,name:Kt(St.PANEL_PROBLEMS,"problems"),data:null,sortIndex:1,closable:!1}),NOTIFICATION_CLEAR_ALL:()=>({id:St.NOTIFICATION_CLEAR_ALL_ID,title:"Clear All Notifications",icon:"clear-all"}),NOTIFICATION_HIDE:()=>({id:St.NOTIFICATION_HIDE_ID,title:"Hide Notifications",icon:"chevron-down"}),builtInNotification:()=>({id:St.NOTIFICATION_MODEL_ID,name:St.NOTIFICATION_MODEL_NAME,sortIndex:1}),STATUS_EDITOR_INFO:()=>({id:"MoEditorInfo",sortIndex:2,data:{ln:0,col:0},name:"Go to Line/Column"}),CONTEXT_MENU_HIDE_STATUS_BAR:()=>({id:St.STATUS_BAR_HIDE_ID,name:"Hide Status Bar"}),builtInSearchActivityItem:()=>({id:St.SEARCH_ACTIVITY_ITEM,name:Kt(St.SEARCH_ACTIVITY_ITEM,"Search"),title:Kt(St.SEARCH_ACTIVITY_ITEM,"Search"),sortIndex:2,icon:"search"}),builtInHeaderToolbar:()=>[{id:St.SEARCH_TOOLBAR_REFRESH,title:Kt(St.SEARCH_TOOLBAR_REFRESH,"Refresh"),disabled:!0,icon:"refresh"},{id:St.SEARCH_TOOLBAR_CLEAR,disabled:!0,title:Kt(St.SEARCH_TOOLBAR_CLEAR,"Clear all"),icon:"clear-all"},{id:St.SEARCH_TOOLBAR_COLLAPSE,title:Kt(St.SEARCH_TOOLBAR_COLLAPSE,"Collapse all"),disabled:!0,icon:"collapse-all"}],builtInSearchAddons:()=>[{id:St.SEARCH_CASE_SENSITIVE_COMMAND_ID,title:Kt(St.SEARCH_CASE_SENSITIVE_COMMAND_ID,"Match Case"),disabled:!1,checked:!1,icon:"case-sensitive"},{id:St.SEARCH_WHOLE_WORD_COMMAND_ID,title:Kt(St.SEARCH_WHOLE_WORD_COMMAND_ID,"Match Whole Word"),disabled:!1,checked:!1,icon:"whole-word"},{id:St.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,disabled:!1,checked:!1,title:Kt(St.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,"Use Regular Expression"),icon:"regex"}],builtInReplaceAddons:()=>[{id:St.SEARCH_PRESERVE_CASE_COMMAND_ID,title:Kt(St.SEARCH_PRESERVE_CASE_COMMAND_ID,"Preserve Case"),disabled:!1,checked:!1,icon:"preserve-case"},{id:St.SEARCH_REPLACE_ALL_COMMAND_ID,title:Kt(St.SEARCH_REPLACE_ALL_COMMAND_ID,"Replace All"),disabled:!1,checked:!1,icon:"replace-all"}],builtInOutputPanel:()=>({id:St.PANEL_OUTPUT,name:Kt(St.PANEL_OUTPUT,"output"),data:"",sortIndex:2,closable:!1}),builtInPanelToolboxResize:()=>({id:St.PANEL_TOOLBOX_RESIZE,title:Kt(St.PANEL_TOOLBOX_RESIZE,"Maximize Panel Size"),icon:"chevron-up"}),builtInPanelToolboxReStore:()=>({id:St.PANEL_TOOLBOX_RESIZE,title:Kt(St.PANEL_TOOLBOX_RESTORE_SIZE,"Restore Panel Siz"),icon:"chevron-down"}),builtInPanelToolbox:()=>({id:St.PANEL_TOOLBOX_CLOSE,title:Kt(St.PANEL_TOOLBOX_CLOSE,"Close Panel"),icon:"close"}),builtInMenuBarData:()=>[{id:"File",name:Kt("menu.file","File"),data:[{id:St.ACTION_QUICK_CREATE_FILE,name:Kt("menu.newFile","New File")},{id:St.MENU_FILE_OPEN,name:Kt("menu.open","Open")}]},{id:"Edit",name:Kt("menu.edit","Edit"),data:[{id:St.ACTION_QUICK_UNDO,name:Kt("menu.undo","Undo")},{id:St.ACTION_QUICK_REDO,name:Kt("menu.redo","Redo")}]},{id:"Selection",name:Kt("menu.selection","Selection"),data:[{id:St.ACTION_QUICK_SELECT_ALL,name:Kt("menu.selectAll","Select All")},{id:St.ACTION_QUICK_COPY_LINE_UP,name:Kt("menu.copyLineUp","Copy Line Up")}]},{id:"View",name:Kt("menu.view","View"),data:[{id:St.MENU_QUICK_COMMAND,name:Kt("menu.commandPalette","Command Palette")},{id:"OpenView",name:Kt("menu.openView","Open View")},{id:St.MENU_APPEARANCE_ID,name:Kt("menu.appearance","Appearance"),data:[{icon:"check",id:St.MENU_VIEW_MENUBAR,name:Kt("menu.showMenuBar","Show Menu Bar")},{icon:"check",id:Y2,name:Kt("menu.showSideBar","Show Side Bar")},{id:St.MENU_VIEW_AUXILIARY,name:Kt("menu.showAuxiliaryBar","Show Auxiliary Bar")},{icon:"check",id:St.MENU_VIEW_STATUSBAR,name:Kt("menu.showStatusBar","Show Status Bar")},{icon:"check",id:St.MENU_VIEW_ACTIVITYBAR,name:Kt("menu.showActivityBar","Show Activity Bar")},{icon:"check",id:St.MENU_VIEW_PANEL,name:Kt("menu.showPanel","Show Panel")},{id:St.MENUBAR_MENU_MODE_DIVIDER,type:"divider"},{id:St.MENUBAR_MODE_HORIZONTAL,name:Kt("menu.menuBarHorizontal","Menu Bar Horizontal Mode")},{id:St.MENUBAR_MODE_VERTICAL,name:Kt("menu.menuBarVertical","Menu Bar Vertical Mode")}]}]},{id:"Run",name:Kt("menu.run","Run"),data:[{id:"RunTask",name:Kt("menu.runTask","Run Task")}]},{id:"Help",name:Kt("menu.help","Help"),data:[{id:"About",name:Kt("menu.about","About")}]}],quickAcessViewAction:()=>({id:St.ACTION_QUICK_COMMAND}),quickSelectColorThemeAction:()=>({id:St.ACTION_SELECT_THEME}),quickAccessSettingsAction:()=>({id:St.ACTION_QUICK_ACCESS_SETTINGS}),quickSelectLocaleAction:()=>({id:St.ACTION_SELECT_LOCALE}),quickTogglePanelAction:()=>({id:St.MENU_VIEW_PANEL}),quickSelectAllAction:()=>({id:St.ACTION_QUICK_SELECT_ALL}),quickCopyLineUpAction:()=>({id:St.ACTION_QUICK_COPY_LINE_UP}),quickUndoAction:()=>({id:St.ACTION_QUICK_UNDO}),quickRedoAction:()=>({id:St.ACTION_QUICK_REDO}),quickCreateFileAction:()=>({id:St.ACTION_QUICK_CREATE_FILE}),COMMON_CONTEXT_MENU:()=>[{id:St.RENAME_COMMAND_ID,name:Kt("contextmenu.rename","Rename")},{id:St.DELETE_COMMAND_ID,name:Kt("contextmenu.delete","Delete")}],BASE_CONTEXT_MENU:()=>[{id:St.NEW_FILE_COMMAND_ID,name:Kt("contextmenu.newFile","New File")},{id:St.NEW_FOLDER_COMMAND_ID,name:Kt("contextmenu.newFolder","New Folder")}],ROOT_FOLDER_CONTEXT_MENU:()=>[{id:St.REMOVE_COMMAND_ID,name:Kt("contextmenu.removeFolder","Remove Folder")}],FILE_CONTEXT_MENU:()=>[{id:St.OPEN_TO_SIDE_COMMAND_ID,name:Kt("contextmenu.openToTheSide","Open to the Side")}],FOLDER_PANEL_CONTEXT_MENU:()=>[{id:St.NEW_FOLDER_COMMAND_ID,name:Kt("contextmenu.addFolderToSpace","Add Folder to Workspace...")},{id:St.FIND_IN_WORKSPACE_ID,name:Kt("contextmenu.findInSpace","Find in Workspace...")},{id:St.DOWNLOAD_COMMAND_ID,name:Kt("contextmenu.download","Download...")}],activityBarData:()=>[{id:St.ACTIVITY_BAR_GLOBAL_ACCOUNT,name:Kt("menu.account","Account"),title:Kt("menu.account","Account"),icon:"account",type:"global"},{id:St.ACTIVITY_BAR_GLOBAL_SETTINGS,name:Kt("menu.settings","Settings"),title:Kt("menu.settings","Settings"),icon:"settings-gear",type:"global",contextMenu:[{id:St.ACTION_QUICK_COMMAND,name:Kt("menu.commandPalette","Command Palette")},{id:St.ACTION_QUICK_ACCESS_SETTINGS,name:Kt("menu.settings","Settings")},{id:St.ACTION_SELECT_THEME,name:Kt("menu.colorTheme","Color Theme")}]}],contextMenuData:()=>[{id:St.CONTEXT_MENU_MENU,name:Kt("menubar","Menu"),icon:"check"},{id:St.CONTEXT_MENU_EXPLORER,name:Kt("sidebar.explore.title","Explorer"),icon:"check"},{id:St.CONTEXT_MENU_SEARCH,name:Kt("sidebar.search.title","Search"),icon:"check"},{id:St.CONTEXT_MENU_HIDE,name:Kt("menu.hideActivityBar","Hide Activity Bar")}]};var tUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},nUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let wa=class{constructor(){this.builtinConstants=new Map,this.builtinModules=new Map,this.initialize()}initialize(){Object.keys(St).forEach(e=>{this.addConstant({id:e,value:St[e]})}),Object.keys(rte).forEach(e=>{this.addModules({id:e,module:rte[e]})})}addConstant(e){const t=e.id;this.builtinConstants.set(t,Object.assign(Object.assign({},e),{active:!0}))}addModules(e){const t=e.id;this.builtinModules.set(t,Object.assign(Object.assign({},e),{active:!0}))}getConstant(e){return this.builtinConstants.get(e)}getConstants(){const e={};return this.builtinConstants.forEach(t=>{t.active&&(e[t.id]=t.value)}),e}inactiveConstant(e){if(!this.builtinConstants.has(e))return Ai.error(`Can't find constant which is ${e}`),!1;const n=this.builtinConstants.get(e);return this.builtinConstants.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}inactiveModule(e){if(!this.builtinModules.has(e))return Ai.error(`Can't find module which is ${e}`),!1;const n=this.builtinModules.get(e);return this.builtinModules.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}getModule(e){const t=this.builtinModules.get(e);if(!t)return t;t.value||(t.value=t.module());const n=Object.assign({},t);return Reflect.deleteProperty(n,"module"),Ao.cloneDeep(n)}getModules(){const e={};return this.builtinModules.forEach(t=>{t.active&&(t.value||(t.value=t.module()),e[t.id]=Ao.cloneDeep(t.value))}),e}reset(){this.builtinModules.clear(),this.builtinConstants.clear(),this.initialize()}};wa=tUe([Ur(),nUe("design:paramtypes",[])],wa);var iUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let JN=class extends Vc{constructor(){super(),this.state=yt.resolve(Xde),this.builtinService=yt.resolve(wa)}setValidateInfo(e){this.setState({validationInfo:typeof e=="string"?{type:"info",text:e}:e})}setSearchValue(e){this.setState({value:e})}setReplaceValue(e){this.setState({replaceValue:e})}setResult(e){this.setState({result:e||[]})}toggleMode(e){this.setState({replaceMode:e})}toggleCaseSensitive(){const{isCaseSensitive:e}=this.state,{SEARCH_CASE_SENSITIVE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isCaseSensitive:!e}),this.updateStatus(t,!e))}toggleWholeWord(){const{isWholeWords:e}=this.state,{SEARCH_WHOLE_WORD_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isWholeWords:!e}),this.updateStatus(t,!e))}toggleRegex(){const{isRegex:e}=this.state,{SEARCH_REGULAR_EXPRESSION_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isRegex:!e}),this.updateStatus(t,!e))}togglePreserveCase(){const{preserveCase:e}=this.state,{SEARCH_PRESERVE_CASE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({preserveCase:!e}),this.updateStatus(t,!e))}updateStatus(e,t){const{replaceAddons:n=[],searchAddons:i=[]}=this.state,o=n.find(rr(e))||i.find(rr(e));o&&(o.checked=t,this.setState({replaceAddons:n.concat(),searchAddons:i.concat()}))}reset(){this.setState({headerToolBar:[],searchAddons:[],replaceAddons:[],result:[],value:"",replaceValue:"",replaceMode:!1,isRegex:!1,isCaseSensitive:!1,isWholeWords:!1,preserveCase:!1,validationInfo:{type:"info",text:""}})}onReplaceAll(e){this.subscribe(am.onReplaceAll,e)}onChange(e){this.subscribe(am.onChange,e)}onSearch(e){this.subscribe(am.onSearch,e)}onResultClick(e){this.subscribe(am.onResultClick,e)}};JN=iUe([Ur(),rUe("design:paramtypes",[])],JN);var X7,ote;function rhe(){if(ote)return X7;ote=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return X7=r,X7}var Q7,ste;function oUe(){if(ste)return Q7;ste=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return Q7=e,Q7}var J7,ate;function sUe(){if(ate)return J7;ate=1;function r(e){return this.__data__.has(e)}return J7=r,J7}var e6,lte;function aUe(){if(lte)return e6;lte=1;var r=Lj(),e=oUe(),t=sUe();function n(i){var o=-1,s=i==null?0:i.length;for(this.__data__=new r;++o<s;)this.add(i[o])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,e6=n,e6}var t6,ute;function lUe(){if(ute)return t6;ute=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return t6=r,t6}var n6,cte;function uUe(){if(cte)return n6;cte=1;function r(e,t){return e.has(t)}return n6=r,n6}var i6,dte;function ohe(){if(dte)return i6;dte=1;var r=aUe(),e=lUe(),t=uUe(),n=1,i=2;function o(s,a,l,u,d,h){var p=l&n,_=s.length,C=a.length;if(_!=C&&!(p&&C>_))return!1;var S=h.get(s),x=h.get(a);if(S&&x)return S==a&&x==s;var T=-1,k=!0,M=l&i?new r:void 0;for(h.set(s,a),h.set(a,s);++T<_;){var W=s[T],F=a[T];if(u)var Q=p?u(F,W,T,a,s,h):u(W,F,T,s,a,h);if(Q!==void 0){if(Q)continue;k=!1;break}if(M){if(!e(a,function(z,$){if(!t(M,$)&&(W===z||d(W,z,l,u,h)))return M.push($)})){k=!1;break}}else if(!(W===F||d(W,F,l,u,h))){k=!1;break}}return h.delete(s),h.delete(a),k}return i6=o,i6}var r6,hte;function cUe(){if(hte)return r6;hte=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,o){n[++t]=[o,i]}),n}return r6=r,r6}var o6,fte;function dUe(){if(fte)return o6;fte=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return o6=r,o6}var s6,gte;function hUe(){if(gte)return s6;gte=1;var r=P2(),e=Tle(),t=Sj(),n=ohe(),i=cUe(),o=dUe(),s=1,a=2,l="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Map]",p="[object Number]",_="[object RegExp]",C="[object Set]",S="[object String]",x="[object Symbol]",T="[object ArrayBuffer]",k="[object DataView]",M=r?r.prototype:void 0,W=M?M.valueOf:void 0;function F(Q,z,$,G,Y,I,D){switch($){case k:if(Q.byteLength!=z.byteLength||Q.byteOffset!=z.byteOffset)return!1;Q=Q.buffer,z=z.buffer;case T:return!(Q.byteLength!=z.byteLength||!I(new e(Q),new e(z)));case l:case u:case p:return t(+Q,+z);case d:return Q.name==z.name&&Q.message==z.message;case _:case S:return Q==z+"";case h:var O=i;case C:var V=G&s;if(O||(O=o),Q.size!=z.size&&!V)return!1;var j=D.get(Q);if(j)return j==z;G|=a,D.set(Q,z);var ne=n(O(Q),O(z),G,Y,I,D);return D.delete(Q),ne;case x:if(W)return W.call(Q)==W.call(z)}return!1}return s6=F,s6}var a6,pte;function fUe(){if(pte)return a6;pte=1;var r=Ile(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(o,s,a,l,u,d){var h=a&e,p=r(o),_=p.length,C=r(s),S=C.length;if(_!=S&&!h)return!1;for(var x=_;x--;){var T=p[x];if(!(h?T in s:n.call(s,T)))return!1}var k=d.get(o),M=d.get(s);if(k&&M)return k==s&&M==o;var W=!0;d.set(o,s),d.set(s,o);for(var F=h;++x<_;){T=p[x];var Q=o[T],z=s[T];if(l)var $=h?l(z,Q,T,s,o,d):l(Q,z,T,o,s,d);if(!($===void 0?Q===z||u(Q,z,a,l,d):$)){W=!1;break}F||(F=T=="constructor")}if(W&&!F){var G=o.constructor,Y=s.constructor;G!=Y&&"constructor"in o&&"constructor"in s&&!(typeof G=="function"&&G instanceof G&&typeof Y=="function"&&Y instanceof Y)&&(W=!1)}return d.delete(o),d.delete(s),W}return a6=i,a6}var l6,mte;function gUe(){if(mte)return l6;mte=1;var r=xj(),e=ohe(),t=hUe(),n=fUe(),i=dF(),o=i1(),s=Ij(),a=ble(),l=1,u="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype,_=p.hasOwnProperty;function C(S,x,T,k,M,W){var F=o(S),Q=o(x),z=F?d:i(S),$=Q?d:i(x);z=z==u?h:z,$=$==u?h:$;var G=z==h,Y=$==h,I=z==$;if(I&&s(S)){if(!s(x))return!1;F=!0,G=!1}if(I&&!G)return W||(W=new r),F||a(S)?e(S,x,T,k,M,W):t(S,x,z,T,k,M,W);if(!(T&l)){var D=G&&_.call(S,"__wrapped__"),O=Y&&_.call(x,"__wrapped__");if(D||O){var V=D?S.value():S,j=O?x.value():x;return W||(W=new r),M(V,j,T,k,W)}}return I?(W||(W=new r),n(S,x,T,k,M,W)):!1}return l6=C,l6}var u6,_te;function she(){if(_te)return u6;_te=1;var r=gUe(),e=uE();function t(n,i,o,s,a){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,o,s,t,a)}return u6=t,u6}var c6,vte;function pUe(){if(vte)return c6;vte=1;var r=xj(),e=she(),t=1,n=2;function i(o,s,a,l){var u=a.length,d=u,h=!l;if(o==null)return!d;for(o=Object(o);u--;){var p=a[u];if(h&&p[2]?p[1]!==o[p[0]]:!(p[0]in o))return!1}for(;++u<d;){p=a[u];var _=p[0],C=o[_],S=p[1];if(h&&p[2]){if(C===void 0&&!(_ in o))return!1}else{var x=new r;if(l)var T=l(C,S,_,o,s,x);if(!(T===void 0?e(S,C,t|n,l,x):T))return!1}}return!0}return c6=i,c6}var d6,bte;function ahe(){if(bte)return d6;bte=1;var r=aE();function e(t){return t===t&&!r(t)}return d6=e,d6}var h6,Cte;function mUe(){if(Cte)return h6;Cte=1;var r=ahe(),e=cF();function t(n){for(var i=e(n),o=i.length;o--;){var s=i[o],a=n[s];i[o]=[s,a,r(a)]}return i}return h6=t,h6}var f6,yte;function lhe(){if(yte)return f6;yte=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return f6=r,f6}var g6,wte;function _Ue(){if(wte)return g6;wte=1;var r=pUe(),e=mUe(),t=lhe();function n(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===i||r(s,i,o)}}return g6=n,g6}var p6,Ste;function Sq(){if(Ste)return p6;Ste=1;var r=F2(),e=uE(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return p6=n,p6}var m6,Ete;function Eq(){if(Ete)return m6;Ete=1;var r=i1(),e=Sq(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,s){if(r(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||s!=null&&o in Object(s)}return m6=i,m6}var _6,Lte;function vUe(){if(Lte)return _6;Lte=1;var r=Lj(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var s=arguments,a=i?i.apply(this,s):s[0],l=o.cache;if(l.has(a))return l.get(a);var u=n.apply(this,s);return o.cache=l.set(a,u)||l,u};return o.cache=new(t.Cache||r),o}return t.Cache=r,_6=t,_6}var v6,xte;function bUe(){if(xte)return v6;xte=1;var r=vUe(),e=500;function t(n){var i=r(n,function(s){return o.size===e&&o.clear(),s}),o=i.cache;return i}return v6=t,v6}var b6,Dte;function CUe(){if(Dte)return b6;Dte=1;var r=bUe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(s,a,l,u){o.push(l?u.replace(t,"$1"):a||s)}),o});return b6=n,b6}var C6,Ite;function yUe(){if(Ite)return C6;Ite=1;var r=P2(),e=rhe(),t=i1(),n=Sq(),i=1/0,o=r?r.prototype:void 0,s=o?o.toString:void 0;function a(l){if(typeof l=="string")return l;if(t(l))return e(l,a)+"";if(n(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return C6=a,C6}var y6,kte;function wUe(){if(kte)return y6;kte=1;var r=yUe();function e(t){return t==null?"":r(t)}return y6=e,y6}var w6,Tte;function e3(){if(Tte)return w6;Tte=1;var r=i1(),e=Eq(),t=CUe(),n=wUe();function i(o,s){return r(o)?o:e(o,s)?[o]:t(n(o))}return w6=i,w6}var S6,Nte;function Z2(){if(Nte)return S6;Nte=1;var r=Sq(),e=1/0;function t(n){if(typeof n=="string"||r(n))return n;var i=n+"";return i=="0"&&1/n==-e?"-0":i}return S6=t,S6}var E6,Ate;function Lq(){if(Ate)return E6;Ate=1;var r=e3(),e=Z2();function t(n,i){i=r(i,n);for(var o=0,s=i.length;n!=null&&o<s;)n=n[e(i[o++])];return o&&o==s?n:void 0}return E6=t,E6}var L6,Ote;function SUe(){if(Ote)return L6;Ote=1;var r=Lq();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return L6=e,L6}var x6,Rte;function EUe(){if(Rte)return x6;Rte=1;function r(e,t){return e!=null&&t in Object(e)}return x6=r,x6}var D6,Mte;function LUe(){if(Mte)return D6;Mte=1;var r=e3(),e=vle(),t=i1(),n=kj(),i=Tj(),o=Z2();function s(a,l,u){l=r(l,a);for(var d=-1,h=l.length,p=!1;++d<h;){var _=o(l[d]);if(!(p=a!=null&&u(a,_)))break;a=a[_]}return p||++d!=h?p:(h=a==null?0:a.length,!!h&&i(h)&&n(_,h)&&(t(a)||e(a)))}return D6=s,D6}var I6,Pte;function xUe(){if(Pte)return I6;Pte=1;var r=EUe(),e=LUe();function t(n,i){return n!=null&&e(n,i,r)}return I6=t,I6}var k6,Fte;function DUe(){if(Fte)return k6;Fte=1;var r=she(),e=SUe(),t=xUe(),n=Eq(),i=ahe(),o=lhe(),s=Z2(),a=1,l=2;function u(d,h){return n(d)&&i(h)?o(s(d),h):function(p){var _=e(p,d);return _===void 0&&_===h?t(p,d):r(h,_,a|l)}}return k6=u,k6}var T6,Bte;function IUe(){if(Bte)return T6;Bte=1;function r(e){return e}return T6=r,T6}var N6,Wte;function kUe(){if(Wte)return N6;Wte=1;function r(e){return function(t){return t==null?void 0:t[e]}}return N6=r,N6}var A6,Vte;function TUe(){if(Vte)return A6;Vte=1;var r=Lq();function e(t){return function(n){return r(n,t)}}return A6=e,A6}var O6,Hte;function NUe(){if(Hte)return O6;Hte=1;var r=kUe(),e=TUe(),t=Eq(),n=Z2();function i(o){return t(o)?r(n(o)):e(o)}return O6=i,O6}var R6,Ute;function AUe(){if(Ute)return R6;Ute=1;var r=_Ue(),e=DUe(),t=IUe(),n=i1(),i=NUe();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?n(s)?e(s[0],s[1]):r(s):i(s)}return R6=o,R6}var M6,zte;function OUe(){if(zte)return M6;zte=1;var r=Dj(),e=e3(),t=kj(),n=aE(),i=Z2();function o(s,a,l,u){if(!n(s))return s;a=e(a,s);for(var d=-1,h=a.length,p=h-1,_=s;_!=null&&++d<h;){var C=i(a[d]),S=l;if(C==="__proto__"||C==="constructor"||C==="prototype")return s;if(d!=p){var x=_[C];S=u?u(x,C,_):void 0,S===void 0&&(S=n(x)?x:t(a[d+1])?[]:{})}r(_,C,S),_=_[C]}return s}return M6=o,M6}var P6,$te;function RUe(){if($te)return P6;$te=1;var r=Lq(),e=OUe(),t=e3();function n(i,o,s){for(var a=-1,l=o.length,u={};++a<l;){var d=o[a],h=r(i,d);s(h,d)&&e(u,t(d,i),h)}return u}return P6=n,P6}var F6,jte;function MUe(){if(jte)return F6;jte=1;var r=rhe(),e=AUe(),t=RUe(),n=kle();function i(o,s){if(o==null)return{};var a=r(n(o),function(l){return[l]});return s=e(s),t(o,a,function(l,u){return s(l,u[0])})}return F6=i,F6}var PUe=MUe();const FUe=xm(PUe);var BUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},WUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let zS=class extends Vc{constructor(){super(),this.state=yt.resolve(Qde),this.layoutService=yt.resolve(Mh),this.builtinService=yt.resolve(wa)}updateOutputProperty(e){const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=FUe(e,i=>i!==void 0);return this.update(Object.assign(this.getPanel(t),n))}get outputEditorInstance(){var e;const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=(e=this.state.data)===null||e===void 0?void 0:e.find(rr(t));return n==null?void 0:n.outputEditorInstance}setActive(e){const t=this.getPanel(e);t?this.open(t):Ai.error(`There is no panel found in data via ${e}. If you want to open a brand-new panel, please use the open method`)}toggleMaximize(){const{PANEL_TOOLBOX_RESIZE:e}=this.builtinService.getConstants(),{builtInPanelToolboxResize:t,builtInPanelToolboxReStore:n}=this.builtinService.getModules(),{toolbox:i=[]}=this.state;if(t&&n){const o=i==null?void 0:i.findIndex(rr(e));if(i[o]){const a=this.layoutService.togglePanelMaximized();i[o]=a?n:t}}}open(e){const{data:t=[]}=this.state;let n=Ao.cloneDeep(e);const i=t.findIndex(rr(n.id));i>-1?n=t[i]:this.add(n),this.setState({current:n})}getPanel(e){const{data:t=[]}=this.state;return Ao.cloneDeepWith(t.find(rr(e)),n=>{if(n&&typeof n=="object"&&n instanceof hN)return n})}getOutputValue(){const{PANEL_OUTPUT:e=""}=this.builtinService.getConstants(),t=this.getPanel(e);return(t==null?void 0:t.data)||""}updateOutput(e){const{title:t,name:n,sortIndex:i,active:o,closable:s,editable:a}=e;return this.updateOutputProperty({title:t,name:n,sortIndex:i,active:o,closable:s,editable:a})}appendOutput(e){var t;const n=this.getOutputValue();this.updateOutputProperty({data:n+e}),(t=this.outputEditorInstance)===null||t===void 0||t.setValue(n+e)}cleanOutput(){var e;(e=this.outputEditorInstance)===null||e===void 0||e.setValue("")}add(e){let t=this.state.data||[];const n=Ao.cloneDeep(e);Array.isArray(n)?t=t.concat(n):t.push(n),this.setState({data:t})}update(e){const t=this.state.data||[],n=t==null?void 0:t.findIndex(rr(e.id));if(n!==void 0&&n>-1)return Object.assign(t[n],e),this.setState({data:[...t]}),t[n];Ai.error(`There is no panel found in data via the ${e.id}`)}remove(e){const{data:t}=this.state,n=t==null?void 0:t.findIndex(rr(e));if(n!==void 0&&n>-1){const i=(t==null?void 0:t.splice(n,1))||[];return this.setState({data:t}),i[0]}else{Ai.error(`There is no panel found in data via the ${e}`);return}}reset(){this.setState({data:[],current:null,toolbox:[]}),this.cleanOutput()}onTabChange(e){this.subscribe($b.onTabChange,e)}onToolbarClick(e){this.subscribe($b.onToolbarClick,e)}onTabClose(e){this.subscribe($b.onTabClose,e)}};zS=BUe([Ur(),WUe("design:paramtypes",[])],zS);var VUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},HUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let $S=class extends Kx{constructor(){super(),this.editorService=yt.resolve(Md),this.localeService=yt.resolve(Sm),this.colorThemeService=yt.resolve(VS),this.builtinService=yt.resolve(wa),this.settings=this.getBuiltInSettings()}getBuiltInSettings(){const e=this.editorService.getState().editorOptions,t=this.colorThemeService.getColorTheme(),n=this.localeService.getCurrentLocale();return new Jde(t.id,e,n==null?void 0:n.id)}getDefaultSettingsTab(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();return Object.assign({},e)}onChangeSettings(e){this.subscribe(XN.OnChange,e)}update(e){this.applySettings(e);const t=Ao.cloneDeep(this.settings);this.settings=RU(t,e)}append(e){this.update(e)}getSettings(){const e=this.getBuiltInSettings();return Object.assign({},this.settings,e)}applySettings(e){const t=this.settings,{colorTheme:n,locale:i,editor:o}=e;n&&n!==t.colorTheme&&this.colorThemeService.setTheme(n),i&&i!==t.locale&&this.localeService.setCurrentLocale(i),o&&!Ao.isEqual(o,t.editor)&&this.editorService.updateEditorOptions(o)}openSettingsInEditor(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();e&&(e.data.value=this.flatObject2JSONString(this.getSettings()),this.editorService.open(e))}normalizeFlatObject(e){try{const t=JSON.parse(e);return Gfe(t)}catch(t){throw new Error(`SettingsService.normalizeFlatJSONObject error: ${t}`)}}flatObject(e){return Kfe(e)}flatObject2JSONString(e){return this.toJSONString(this.flatObject(e))}toJSONString(e,t=4){try{return JSON.stringify(e,null,t)}catch(n){throw new Error(`SettingsService.toJSONString error: ${n}`)}}};$S=VUe([Ur(),HUe("design:paramtypes",[])],$S);var UUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let zx=class extends Vc{constructor(){super(),this.state=yt.resolve(ehe)}toggleNotification(){const e=Ao.cloneDeep(this.state);e.showNotifications=!this.state.showNotifications,this.setState(e)}update(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(rr(e.id));if(n>-1){const i=t[n];return t[n]=Object.assign(i,e),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]})),t[n]}else Ai.error("There is no notification be found, please check the id")}return null}remove(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(rr(e));n>-1?(t.splice(n,1),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]}))):Ai.error("There is no notification be found, please check the id")}else Ai.error("You can't remove notification because there is no notifications in data.")}add(e){const{data:t=[]}=this.state;if(e&&e.length){e.forEach(i=>{i.id===void 0&&(i.id=pne()),i.status=wP.WaitRead});const n=[...t,...e];return this.setState({data:n}),e}return null}clear(){this.setState({data:[]})}reset(){this.setState({id:"",name:"",data:[],sortIndex:1,showNotifications:!1,actionBar:[],render:void 0})}};zx=UUe([Ur(),zUe("design:paramtypes",[])],zx);var $Ue=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let e2=class extends Vc{constructor(){super(),this.getProblemsMarkers=e=>{let t=0,n=0,i=0;const o=s=>{s.forEach(a=>{switch(a.value.status){case bm.Info:i+=1;break;case bm.Error:n+=1;break;case bm.Warning:t+=1;break}a.children&&a.children.length&&o(a.children)})};return o(e),{warnings:t,errors:n,infos:i}},this.state=yt.resolve(the),this.statusBarService=yt.resolve(Kv),this.builtinService=yt.resolve(wa)}toggleProblems(){this.setState(Object.assign(Object.assign({},this.state),{show:!this.state.show}))}add(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(i=>{const o=n.findIndex(rr(i.id));o>-1?n.splice(o,1,i):n.push(i)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}update(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(i=>{const o=n.findIndex(rr(i.id));o>-1?n.splice(o,1,i):Ai.error(`Update problems failed, because there is no problem found via ${i.id}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}remove(e){const t=Array.isArray(e)?e:[e],{data:n=[]}=this.state;t.forEach(i=>{const o=n.findIndex(rr(i));o>-1?n.splice(o,1):Ai.error(`Remove problems failed, because there is no problem found via ${i}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}reset(){const{builtInStatusProblems:e}=this.builtinService.getModules();this.setState(Object.assign(Object.assign({},this.state),{data:[]})),e&&this.updateStatus(e)}onSelect(e){this.subscribe(QN.onSelect,e)}updateStatusBar(){const{data:e=[]}=this.state,t=this.getProblemsMarkers(e),{builtInStatusProblems:n}=this.builtinService.getModules();n&&this.updateStatus(Object.assign(n,{data:t}))}updateStatus(e){this.statusBarService.update(e)}};e2=$Ue([Ur(),jUe("design:paramtypes",[])],e2);const qUe={LoadExtensionFail:"Load Extension failed",NotFoundActivateMethod:"Not found activate function, the extension must export an activate function as entry."};var KUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},GUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let t2=class{constructor(){this.extensions=[],this._isLoaded=!1,this.colorThemeService=yt.resolve(VS),this.monacoService=yt.resolve($v),this.localeService=yt.resolve(Sm)}setLoaded(e){this._isLoaded=e!==void 0?e:!0}isLoaded(){return this._isLoaded}getExtension(e){return this.extensions.find(rr(e))}reset(){this.extensions=[]}getAllExtensions(){return this.extensions.concat()}add(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=e.filter(n=>{const i=this.extensions.find(rr(n.id));return i&&Ai.warn("Warning: Unable to load the existed Extension:"+n.id),!i});return t.length>0&&(this.extensions=this.extensions.concat(t)),t}load(e){try{const t=this.add(e);if(!t)return;this.activate(t)}catch(t){Ai.error(qUe.LoadExtensionFail,t)}}loadContributes(e){Object.keys(e).forEach(n=>{switch(n){case Sx.Themes:{const i=e[n];return i?this.colorThemeService.addThemes(i):void 0}case Sx.Languages:{const i=e[n];return i?this.localeService.addLocales(i):void 0}}})}registerAction(e){return $Me(e)}executeCommand(e,...t){this.monacoService.commandService.executeCommand(e,...t)}activate(e){if(e.length===0)return;const t=this;e==null||e.forEach((n,i)=>{!n||this.isInactive(n)||(n.activate&&n.activate(t),n.contributes&&this.loadContributes(n.contributes))})}dispose(e){var t;const n=this,i=this.extensions.findIndex(rr(e));if(i>-1){const o=this.extensions[i];(t=o.dispose)===null||t===void 0||t.call(o,n),this.extensions.splice(i,1)}}disposeAll(){this.extensions.forEach(e=>{var t;(t=e.dispose)===null||t===void 0||t.call(e,this)}),this.reset()}inactive(e){this._inactive=e}isInactive(e){return this._inactive&&typeof this._inactive=="function"?this._inactive(e):!1}splitLanguagesExts(e){const t=[],n=[];return e.forEach(i=>{var o;!((o=i.contributes)===null||o===void 0)&&o.languages?t.push(i):n.push(i)}),[t,n]}};t2=KUe([Ur(),GUe("design:paramtypes",[])],t2);var YUe=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZUe=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let xP=class extends Mu{constructor(){super(),this.editorStates=new Map,this.onClickContextMenu=(e,t,n)=>{const i=t==null?void 0:t.id,o=n==null?void 0:n.id,{current:s}=this.editorService.getState(),a=s==null?void 0:s.id,{EDITOR_MENU_CLOSE:l,EDITOR_MENU_CLOSE_OTHERS:u,EDITOR_MENU_CLOSE_ALL:d,EDITOR_MENU_CLOSE_TO_RIGHT:h,EDITOR_MENU_CLOSE_TO_LEFT:p}=this.builtinService.getConstants();switch(i){case l:{this.onCloseTab(o,a);break}case u:{this.onCloseOther(n,a);break}case d:{this.onCloseAll(a);break}case h:{this.onCloseToRight(n,a);break}case p:{this.onCloseToLeft(n,a);break}default:this.emit(Ys.onActionsClick,i,s)}},this.onCloseAll=e=>{this.emit(Ys.OnCloseAll,e)},this.onCloseTab=(e,t)=>{e&&t&&this.emit(Ys.OnCloseTab,e,t)},this.onCloseToRight=(e,t)=>{this.emit(Ys.OnCloseToRight,e,t)},this.onCloseToLeft=(e,t)=>{this.emit(Ys.OnCloseToLeft,e,t)},this.onCloseOther=(e,t)=>{this.emit(Ys.OnCloseOther,e,t)},this.onMoveTab=(e,t)=>{this.editorService.updateGroup(t,{data:e}),this.emit(Ys.OnMoveTab,e,t)},this.onSelectTab=(e,t)=>{this.editorService.setActive(t,e),this.emit(Ys.OnSelectTab,e,t)},this.onUpdateEditorIns=(e,t)=>{var n,i;if(!e)return;this.initEditorEvents(e,t),this.editorService.updateGroup(t,{editorInstance:e}),this.editorService.updateCurrentGroup({editorInstance:e});const{current:o}=this.editorService.getState(),s=o==null?void 0:o.tab;this.openTab(e,s.id.toString(),(n=s==null?void 0:s.data)===null||n===void 0?void 0:n.value,(i=s==null?void 0:s.data)===null||i===void 0?void 0:i.language)},this.onClickActions=e=>{const{current:t}=this.editorService.getState();if(!t)return;const{EDITOR_MENU_CLOSE_ALL:n,EDITOR_MENU_SHOW_OPENEDITORS:i,EDITOR_MENU_SPILIT:o}=this.builtinService.getConstants();switch(e.id){case n:{this.onCloseAll(t.id);break}case i:break;case o:{this.editorService.cloneGroup();const{groupSplitPos:s}=this.layoutService.getState();this.layoutService.setGroupSplitSize(new Array(s.length+1).fill("auto")),this.emit(Ys.OnSplitEditorRight);break}default:this.emit(Ys.onActionsClick,e.id,t)}},this.onPaneSizeChange=e=>{this.layoutService.setGroupSplitSize(e)},this.getViewState=e=>this.editorStates.get(e),this.onChangeEditorProps=(e,t)=>{const{path:n,options:i}=t;if((e==null?void 0:e.path)!==n){const{current:o}=this.editorService.getState(),s=o==null?void 0:o.editorInstance;this.editorStates.set(e.path,s==null?void 0:s.saveViewState()),this.openTab(s,n,i==null?void 0:i.value,i==null?void 0:i.language)}},this.editorService=yt.resolve(Md),this.layoutService=yt.resolve(Mh),this.statusBarService=yt.resolve(Kv),this.builtinService=yt.resolve(wa)}initView(){const{builtInEditorInitialActions:e,builtInEditorInitialMenu:t,BuiltInEditorOptions:n}=this.builtinService.getModules();if(!this.editorService.getDefaultActions().length){const s=e||[];this.editorService.setDefaultActions(s)}if(!this.editorService.getDefaultMenus().length){const s=t||[];this.editorService.setDefaultMenus(s)}this.editorService.setState({editorOptions:n||{}})}open(e,t){this.editorService.open(e,t)}initEditorEvents(e,t){e&&(e.onDidChangeModelContent(n=>{var i,o,s,a;const{current:l}=this.editorService.getState(),u=l==null?void 0:l.tab;if(!u)return;const d=(o=(i=l.editorInstance)===null||i===void 0?void 0:i.getModel())===null||o===void 0?void 0:o.uri,h=(s=e==null?void 0:e.getModel())===null||s===void 0?void 0:s.uri;if((d==null?void 0:d.path)!==(h==null?void 0:h.path))return;const p=(a=e.getModel())===null||a===void 0?void 0:a.getValue(),_=Object.assign(Object.assign({},u),{data:Object.assign(Object.assign({},u.data),{value:p})});this.editorService.updateTab(_,t),this.updateStatusBar(e),this.emit(Ys.OnUpdateTab,_)}),e.onDidFocusEditorText(()=>{const n=this.editorService.getGroupById(t);n!=null&&n.tab.id&&(this.editorService.setActive(t,n.tab.id),this.updateEditorLineColumnInfo(e))}),e.onDidChangeCursorSelection(()=>{this.updateEditorLineColumnInfo(e)}),e.onDidBlurEditorText(()=>{var n;const{current:i}=this.editorService.getState(),o=i==null?void 0:i.tab;if(o!=null&&o.id){const s=e==null?void 0:e.saveViewState();this.editorStates.set((n=o.id)===null||n===void 0?void 0:n.toString(),s)}}))}openTab(e,t,n,i){let o=xd.getModel(Lx.parse(t));o||(o=xd.createModel(n,i,Lx.parse(t))),e.setModel(o);const s=this.editorStates.get(t);s&&e.restoreViewState(s),e==null||e.focus()}updateStatusBar(e){}updateEditorLineColumnInfo(e){if(e){const t=e.getPosition(),{STATUS_EDITOR_INFO:n}=this.builtinService.getModules();n&&this.statusBarService.update(Object.assign(n,{data:{ln:t==null?void 0:t.lineNumber,col:t==null?void 0:t.column}}))}}};xP=YUe([Ur(),ZUe("design:paramtypes",[])],xP);const ry=Ri("editor"),XUe=Gt(ry,"group"),QUe=Gt(ry,"group-container"),JUe=Gt(ry,"group-header"),eze=Gt(ry,"group-tabs"),tze=Gt(ry,"group-actions"),bU=Gt(ry,"group-actions-item"),nze=li(bU,"disabled"),ize=Gt(ry,"group-breadcrumb"),qte=6;function rze(r){const e=[],t=[];return r.forEach(n=>{n.place==="outer"?e.push(n):t.push(n)}),e.length>qte&&e.splice(0,qte-e.length),[e,t]}function oze(r){const{actions:e=[],isActiveGroup:t,onClickActions:n}=r,[i,o]=rze(e),s=De.useRef(null),a=(d,h)=>{var p;n(h),(p=s.current)===null||p===void 0||p.dispose()},l=d=>{n(d)},u=o.length>0?me.createElement(Rc,{style:{width:200},data:o,onClick:a}):me.createElement("span",{style:{padding:15,fontSize:14}},"No more actions");return me.createElement("div",{className:tze},t&&i.map(d=>me.createElement(jU,{key:d.id,overlay:d.title},me.createElement("div",{onClick:()=>!d.disabled&&l(d),className:oi(bU,d.disabled&&nze)},d.icon?typeof d.icon=="string"?me.createElement(go,{type:d.icon}):d.icon:d.name))),!!o.length&&me.createElement(QU,{ref:s,placement:"bottom",className:bU,trigger:"click",title:"More Actions...",overlay:u},me.createElement(go,{type:"ellipsis"})))}const sze=De.memo(oze);function aze(r){const{breadcrumbs:e=[]}=r;return me.createElement("div",{className:ize},me.createElement(aie,{role:"breadcrumb",routes:e}))}const lze=De.memo(aze);function uhe(r){var e,t;const{id:n,data:i,tab:o,currentGroup:s,group:a,actions:l=[],menu:u=[],onMoveTab:d,onCloseTab:h,onClickContextMenu:p,onChangeEditorProps:_,onSelectTab:C,onClickActions:S,editorOptions:x,onUpdateEditorIns:T}=r,k=n===(s==null?void 0:s.id),M=Gx(),W=(F,Q)=>{const z=($,G)=>{p==null||p($,G,Q),M.hide()};M==null||M.show(yR(F),()=>me.createElement(Rc,{data:u,onClick:z}))};return De.useEffect(()=>function(){M==null||M.dispose()}),me.createElement("div",{className:XUe},me.createElement("div",{className:JUe},me.createElement("div",{className:eze},me.createElement(yj,{editable:!0,type:"card",data:i,onMoveTab:d,onSelectTab:C,onContextMenu:W,activeTab:k?o==null?void 0:o.id:"",onCloseTab:h})),me.createElement(sze,{isActiveGroup:k,actions:l,menu:u,onClickActions:S})),me.createElement(lze,{breadcrumbs:(o==null?void 0:o.breadcrumb)||[]}),me.createElement("div",{className:QUe},o!=null&&o.renderPane?typeof o.renderPane=="function"?o.renderPane(Object.assign({},o.data),o,a):o.renderPane:me.createElement(fj,{options:Object.assign(Object.assign({},x),{value:(e=o==null?void 0:o.data)===null||e===void 0?void 0:e.value,language:(t=o==null?void 0:o.data)===null||t===void 0?void 0:t.language,automaticLayout:!0}),path:o==null?void 0:o.id.toString(),editorInstanceRef:F=>{T==null||T(F,n)},onChangeEditorProps:(F,Q)=>{_==null||_(F,Q)}})))}const Kte=De.memo(uhe);function uze({className:r}){return me.createElement("span",{style:{fontSize:0}},me.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 120 120",className:r},me.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",opacity:"0.48"},me.createElement("g",{fill:"#A2A2A2",transform:"translate(-660 -152)"},me.createElement("g",{transform:"translate(660 152)"},me.createElement("path",{d:"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z"}))))))}const nm={_isMac:ane.Utils.isMacOs(),queryGlobalKeybinding:r=>{const n=Rl.getDefaultKeybindings().filter(i=>!i.when).filter(i=>i.command===r);return n.length?n[n.length-1].keybinding:null},convertSimpleKeybindingToString:(r=[])=>r.map(e=>{const t=[];return e.altKey&&t.push(nm._isMac?"":"Alt"),e.ctrlKey&&t.push(nm._isMac?"":"Ctrl"),e.metaKey&&t.push(nm._isMac?"":"Meta"),e.shiftKey&&t.push(nm._isMac?"":"Shift"),e.keyCode&&t.push(nhe[e.keyCode]||""),t.join(nm._isMac?"":"+")}).join(" ")},cze=()=>[{id:St.ACTION_QUICK_COMMAND,name:Kt("menu.commandPalette","Command Palette")},{id:St.ACTION_QUICK_ACCESS_SETTINGS,name:Kt("menu.settings","Settings")},{id:St.ACTION_SELECT_THEME,name:Kt("menu.colorTheme","Color Theme")}],dze=()=>{const[r,e]=De.useState([]);return De.useEffect(()=>{const t=cze().map(n=>{const i=nm.queryGlobalKeybinding(n.id);if(i!=null&&i.length){const o=nm.convertSimpleKeybindingToString(i);return Object.assign(Object.assign({},n),{keybindings:o})}return null}).filter(Boolean);e(t)},[]),r};function hze(){const r=dze();return me.createElement("div",{className:Ri("welcome")},me.createElement(uze,{className:"logo"}),me.createElement("h1",{className:"title"},"Molecule"),me.createElement("div",{className:"keybindings"},me.createElement("ul",null,r.map(e=>me.createElement("li",{className:"keys",key:e.id},me.createElement("span",null,e.name),me.createElement("span",null,e.keybindings.split("").join(" ")))))))}function xq(r){const{onClickContextMenu:e,onCloseTab:t,onMoveTab:n,onSelectTab:i,onChangeEditorProps:o,onClickActions:s,onUpdateEditorIns:a,onPaneSizeChange:l,editor:u,layout:d}=r,{groups:h=[],current:p,entry:_=me.createElement(hze,null),editorOptions:C}=u||{},{groupSplitPos:S,editorGroupDirection:x}=d||{},T=M=>({onMoveTab:W=>n==null?void 0:n(W,M),onCloseTab:W=>t==null?void 0:t(W,M),onSelectTab:W=>i==null?void 0:i(W,M),onClickActions:s,onUpdateEditorIns:a,onChangeEditorProps:o,onClickContextMenu:e}),k=()=>h.length===1?me.createElement(Kte,Object.assign({editorOptions:C,currentGroup:p,group:h[0]},h[0],T(h[0].id))):h.length>1?me.createElement(IT,{sizes:S,split:x,onChange:l},h.map((M,W)=>me.createElement(Rb,{key:`group-${W}${M.id}`,minSize:"220px"},me.createElement(Kte,Object.assign({editorOptions:C,currentGroup:p,group:M},M,T(M.id)))))):null;return me.createElement("div",{className:ry},p?k():_)}De.memo(xq);function che(r){const{data:e={ln:0,col:0}}=r;return me.createElement("span",null,`Ln ${e.ln}, Col ${e.col}`)}De.memo(che);const fze=yt.resolve(Md),gze=yt.resolve(Mh),pze=yt.resolve(xP),mze=Hc({editor:fze,layout:gze},xq,pze),SD=Ri("sidebar"),_ze=Gt(SD,"pane"),vze=Gt(SD,"header"),bze=Gt(SD,"title"),Cze=Gt(SD,"content"),yze=Gt(SD,"toolbar"),dhe=De.memo(function(e){return me.createElement("header",{className:vze},me.createElement("div",{className:bze},me.createElement("h2",null,e.title)),me.createElement("div",{className:yze},e.toolbar||null))});function hhe(r){return me.createElement("div",{className:Cze},r.children)}function fhe(r){const{panes:e=[],current:t}=r,n=e==null?void 0:e.map(i=>me.createElement("div",{key:i.id,"data-id":i.id,style:{visibility:i.id===t?"visible":"hidden",zIndex:i.id===t?1:-1},className:_ze},i.render?i.render():null));return me.createElement("div",{className:SD},n)}var wze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Sze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let DP=class extends Mu{constructor(){super(),this.onClick=e=>{console.log("onClick:",this.sidebarService)},this.sidebarService=yt.resolve(jv)}initView(){}};DP=wze([Ur(),Sze("design:paramtypes",[])],DP);const Eze=yt.resolve(jv),Lze=yt.resolve(DP),xze=Hc(Eze,fhe,Lze);function Dze({className:r}){return me.createElement("img",{className:r,src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA
B3RJTUUH5QwPAyYJr4pYHwAAF6hJREFUeNrtnXm0VMW1xn/79L19GhUTnBAxGNfTuKKJeSsOaBxw
QF5QURzRTODwUIw4RI1RHJ5RUROcgkHFRDEaNUEBjaISUZzBDPqSOORFo0EJkmeMaIQe7qn9/uju
03WGvn243O7Tr8Neq1f3Pd236qv9naratfeuOqKqrJPOFSdtAOukubKO4A6XdQR3uKwjuMNlHcEd
Ll1pA2iFyLOl8XjmXJAtgGfpzp6uu/N62rha0vZOXybJs8VxeHqPf6Hc3LfJuZ/T4XyYNr5mS+cP
0UZPBcrEGsAoKJ9idfGQtKG1QjqfYJWNCQxSUiYa3SRtaK2QzicYfRyjZVIVUAXEoM4TaSNrhXQ+
wca9AHGWoFqZfx0P0e/ovt3/nTa0VkjHG1kAAhke7xkBOpQus1j3dv+UNqaWtf1fgeB/Zen8Ifpf
XNYR3OHSlp4sgS6eL56H4WugWXDmMbD7At2Rj1PH9mDpi3jmKpQdUX0NuqboYV3PpI2rLt52nIPl
+dI1GHOmv35VQGSu7pk9PFVcv8hvjef8DjUb1NbWThFlFz0i+7s0sdWTthui5Td0Y/SUALkKeHqY
PMuwVMEZTkB1A1QAARUwJgs6KWW11ZW2Ixj4BEbdgGvRl9JmqSIzMri8nrZeZaIHp4qrF2k7gnUn
3kPkldoQKFUP1N8pdf8hXXSyqNx7odaLAaOL0sVVX9qOYABUjgP+VvM+yT9BJug+5FPFdVj2LkTu
8l2e5cDFfDZzZ6StsnrSlkYWgLzAxqwqHoAjLt3dj+nuLEsbk49tTs8eeLojGXlND+9qa5922xK8
TvpH+rQOliU9+6LekagMR3UIkAf+gsgCNHu3fom/pN2w/28id7EV+eKxqI5C2ArVHCrLUZageq9O
zPVppFijHiyLi59F9SaUvev/SIqITGeT7im6DYW0FdfuIg/j8m7hcpTJGM0CBA3Mih0iPIXjnKwn
Zl9do/KTEiyLe0ai5j5UN0xY9PMMzB6kn+cfaSuxXUXuYhD5/EMouwfIrL6q4vsE5EPgCJ3kPpa4
jiQEy5Li9ngsBh24Ri1QHmMP98sKXtrKbDeR2WT4qPAIysjaaoFeyKXq0fsIR3bTk7KvJKkn2TLJ
cOsakVu7C0fyTOnkdFXZpvJR4WSMjqwstcpSXhLWPvtZKNbL6EA8c2vSahr2YHmucBDwYGLgRoMg
lRXs7W6p0JOmPmV+4TMUdQvIvaRj+SBVLIvo4vX8MpSaZ85U3uPm3+p1tXUrB+tk96FGdTXuwSJH
J0YevgPLMpine0akoUgAeZ4Bcn9xLgX+iMoTmMI7Mqf09bTwAPBGfkSZ3EoCYJjcck+NmY+l1rPR
RLwkGKL1S71/Ta3SKtDw0ILpvYxmyor8hRgda3me1kf1RzK38JnUMOHsUeuRFQkPxeFrhuDcbCSR
ThMQLFvU/SrOMAiAqN6FWr+MZovKwTV81WHPZOlxRqWGyeiQgK7qkRqePW2ihUQ6TWJklaJKC7/U
AqDWMFIZrr2YMlomsroW9am8G0C9VelhohQY5ewhOtxRAsaWredkOm1MsPJOnesWKInOE0HL8B3S
EpXbI3Oa8He6c8kNx/4Wr6KPOHLjXtXvsfXM20mqauyqdGQhRncIgqj2CFuR9nW7pyg4zsJG1chC
BtOTH4ORL6C6GY58iJE3cJivX16LbInDu29kjm6Ep+cAGwK/x8n8px7G3/papMxmAKsKB6DsCToU
HA8174A8zo7uk7pTg96lstDXWUB/1ueITkPXRB5PhLXxMqm0C5gX/DstAiB0LXJdXtX9s9vXLX8h
g+kpXIrK8ahmov+vIM5zOHKWju5e3GdSQHiYgTq67xvOZBFdLC2chtEpKBvFLmWQZaAX6om523ot
68bCK6h+ti6xcXqwVyiZzK56evevGmJO5Ml6tngvqkckAhC+0zJyqO7rPhBb7oLSTnje/SBDI72/
FgsuF6aOh+iZOsad3leC1kZkNhvxcWE2sJ+fZVLvpi7//TMG5Y7To1gdW96NhUPw9P7a7+voL3Ct
SrLcp99yj0yCO5knK5c9GeXNQKMijQsBKbvVZtQl91G2wegvQYYGFSR2QyrlCajJYPiBzMuf0E+c
JRaZTZaP8w+gGiLXsjeiRtE43i/8RPxGBEUnuQ+AzKj9v1WW0WD5VK8JqLyJuom9g4kI1p14jy53
FCqv1RqgITA2OAFhJhn39FiFgaCFn6E6qLw+tRrjN8SqI3AnOzPkwcK2LeQXVuX/C2UP/6azbZHA
jUlYF0dyc+GkuuV+zj0dZWZ0RBT7RqnpR+Q1HEbpWbyXFHrilB3dnddZP7sbcC0ixVqPDTVM5C0c
+Yru756k+9RxTz5SHIfhi8G1abhCaoT7v9FyFmNJLmsSlRGROxmCyhk+FvuGDrhkbc+Tdd3T/5LZ
DIjV6T706Gm5kxDnK6i8FV37avXmLoJcywbubnqmu0YnE/Qpo0OeZlN6SmPADEcZArIaw1JEF/BJ
d1EjK1IeLszH6Oi6c27AoLB6b+1zkW53Ez2Ej5rAaRDrbYXTUL2+fEOH5t7asqsXKxhwnMN0UnZe
r/XMpJvVhX1QRqE6DGQAhuWILqE79wudzP/2CX+rU3YEHOYXV6GV1NiwdegrpqpMS7FIrUc7HKyH
N3a2rzXeHxceQHWMf6FuMCB0AwTUKj/Ub7qntlTRFWn91pX5bIYxbnzvtRQX6bWVH0iFZM18qiV4
lU/5dQbwVWwHv/dqtAdXPwutwRojaexNcmsGU9xwbCkoYFyFhnFj3JagFdyA5RzGaGL+JzpUtwZr
jLQ+L/rTLAfRSHqK7/0KXTdaM7CC7tHlLcGrLK+bRhPAaeEN/L+CaRHWGGk5wbo9RVRfjK4hQ+tf
u2dX9wHZyyfJ9tmrtYaIny+/Vf+EiFcvzl/sBwgEpFJGCpLOzgaR2bE91Y8nx/Ru/yUgzgt6FEtb
glUz90ZjsmESiYmB+5+LdMU7e1qi6j4tk54o7kCRI1CGA+W8aGUpKo+i3fP0oN4zKeUBBmIKb6C6
acSYguBwTVWhtkEmo/VY95GGOO9gfSiOQTkQNVujMhB4F3gJx5mj3+h+IVF7by7MxejYMrbKxUR+
eAVxfqCnxzt8AnXcyCA+zo/F8B8YhiGSQ3U54iwB7tNzsy+vMVGsaV704wylp3gdxpT9oBqzVoWV
CJdzoHu1xpsg5bLmFceiOgdFYq1p3w9NmeiqJSvOLD0me1xDrHfkT8BwGcjmkRum5pR5DEcm64Ts
a72WdRufopD/FYbBERKr+OLW7cgfWc8drhNZWbdscPje6rNQZwroJ+pHj5x7UfcMnbJmW3iS50X/
srQzxvwC2Dxyl4bJKAN8CMc9Wg+mbmBd5pVOxTPXo+oEFFRdU0rIZSnyIBn3CD2KYt0yZ5MhX5yJ
McdHco2rKg2OBh/iME5P6H1EkBmlXVDvIWDT2F4c/lvlTVxG6Sn1PU8yk/X4R/7noAfFLwttL6GC
yrs4mTE6pfvXSQlONAfL42yFZ+ajbB5w11X9xrYfubZmPQhTuL2esx1Ax3bfAJkDEXmjljMlwSG6
3GtXIc5FHOMe2hu5AKwqTMMzx5c3Z8eMIQHsALohntwnM0tf7K1YPaX7V2TYFZXHgj7yarnW30Zn
k3V36ZVcED5YfTvQC7lKwOEDm2N65svl+a2SEpwsXPho4TGM7h/vcap8sHudnaXgOBP0kO7bey3/
N3TzVnEcno5F+ALKYAwrEf0zxnkIN3uHHk7DpYb8JL8vKo/HDvW9OSLKo8OrDHI/r0c1TtKX6T0j
wBuHslcl38wDeQflCXB+qmd0/7ZhGd8rjUe9WY3jwSFHjwqILNSL3JH9QrA82rMvxitnD/Q2V9aL
54osZay7dW/zcX+J3J5/DhPaBlKVyHKM4PcGIDNBJ/V+M/YLTnC4Kv8mRof5V6pTE2Ed19GtI/vp
RY03pCXIyfKOKb9Xe2mlUvsVXs8Gh+5hzO1petqs3MGwMrkEh85IGM8mN/ydOabZOAG4qudLGIbV
1vc2BolOffY1/10SYU1AsIyoVUjQu2Ssz9U7KxLeA9Ts3bCetRWvNCJ2PRoOCBDzXS3nuPk4AejZ
OzCPB262kC7DS8jadyOS1NSYYKNDgxVWAdgVYvVsQte1UkazRbcIKoGg18nHQmjEsf/W9eRGBjUf
qgyNEBZ2fdYl3Cc7kU4TBBsqfuOAgVVnfghf80MtLRCvqgzr3c/nIp5QYt4HtACwMcHpTHrRX6Qt
/veJcCbJi14WcPb7xkDM3Gsrzx5iWpEX7YQcAPFDcO/kIqt0Qgs2pklmWdSZYc/HEj/1aYD8RA6P
BJvP9MlajjMEh5SY+QLrd7U8qiebrjSyT9bvqRJ/3X6V91Ytaj5OwHiLIn6DcCeq6q/mOArrP5FO
E8zBmbuDBYdMdhPTo30lKiBvcWRX0yM/ehxvozwTsErjLOe4nXx+IXJ3s3ECMGXAYoy8FdCfWvaL
f9NVdRzSf7knJ8LakGAd0/UkyoKa0mIMGAiZ8RZIlQtasQYGINM1pVZ/TMQnzpip4XyZLbItIVjB
IHph1Nq3AyzVH4d7N4As0Km5furBALgnIqyIzAcVtCEXJTXjwblHx2V/2gqlAegJXU8h8n1fMZZG
fdKrf/vXFVQ+xnG+msSL1W9YL8zdCdwT76K0e3ZFn7U88RU45sSk9STLiz6UtxFnNKrLAtZddF6o
gROZh2SPb5XCfDnJ/Q4qN9VfClX+9m0K5wMcxurkFJ7hsGHueIR50aWSNaUEDFZdRlfXaL1sQKKN
Z7Cm4cI5DEHz00COjQ/zCSDvY/RSjnWvt8yulovcVPo6nncFSm3nhK208q/mI5yhp6X3DAcB4aLC
6WAuRGWjWP8zjoLejeTO1ssb++QD5fcp4D+7sB0ih6M6HGQIalajLEWcBQzMPrA2G7z6VXmzyPHP
4kGgo4GtMWYgOCsw+iKZzFyd3P1i2hh9rJewIV7+EAyjUIaBlvOiySxB9D6d6v5Pn8ptl6MMBRxm
lU5GzWiMfojDj/W4XKItkqlhnk2WP60+E5UR4KxAZLqe3ziS1FKMbUPwbflZGMYDVKJQisqxemL2
Z2lji8ULwuX5BcBIa37vIdO1v07peiptfFVpi+OE5c7CdhjGBxPaVDA6NW1sdeXKwv745PoTfBem
57tpQ7OlLQimxLY16zZgQX5aFrXng0PoYduAO7HmB2jtzscG0h4EG/f3qJjIEkZ4ue4OxbQlk3kp
EM+F6rKr9cutXqQtCNYT+AuOTA16xySPo2ekja0u5vO6nke5PeC+FVaCfDttbLb0bZk0hyGsLhyK
VM6LVlYjLEVZwMbuYzq6b8cIyy2F0cDoyqmqd+rE3tNZG5Y3mwxv5/cGORDD1pTP21yByIuoztOz
c2+utQIvLR6N8UZAZgVkb9WL6VPkTKbjsqwwEs+MQpxhGAaALgdZguvev6brX7/cNXJ03MUgKFyK
YSJoNxD1ZAnvQOYC/Ubzc5t6xXp94WAM0zC6nY8zGGBQ4C66c+fqmek+LkDOLY1Hey5D2TKI1Xdf
lhCZSda9UK9Ys+OZk+dFzy5sR5EHUd2mcsXyYNl/V9+dWXwhO7HhkULNUNh1+al4el4kMR/iD0vN
ZMbqt/t+gk+fcc6km9fzM1GdEJ88QfDGFHkdlYP1OvePSetIlhc9l80o6IIyuXGbxgjmD5WzPibw
u8INLVfatcUL8PS8YAZKTMZEbXkzmB7zsFyRwtmVr+dvQJkQrz9Lz+LreBvQBXIOiZ8flczIWl24
GWRYMOSmQWJtZVL53tOJ8qNiyx5HJ9eWdkX1u4FdiDauyOk1foz1kyh39Zak3+9Yzy0ejjIxEIEL
hGMtvdpBf0+HUVh9c9J6GhIs95SG41VOa62XIWFnfNhKLGt3assU55nL8YwEwoP22ZmR+KvVBmN2
4vJiorOn1lYEBGOmBiJwsflkMXgBVMbKqaXhSepq3INL5quRCm0S/cfPhdaDtS0i23FLaeemK+06
hgD7B0aQKu6AnVD9Ljaf+6vNxgnA2aWdUd2uVzyBeDAx8feeRFiTDNH7R3tmaAisKrReDNbofk1X
mlfcB1PpveGztnx8oYSEiEJbgBNAdL/gvEt0+ohkoGgoL04SYU1C8JbR3hvTYyPgqH0vumXTleZp
DadtMduZin5GCgStVh/rQJlOwqfKrIUYb8uoB8zCFNFlzHZSkh3s0tjPa6QLNZZCCPXeagYHUfO+
+m5a4E92pAsvfPNZRPsn5YQ2cgEBf/L7LcCq0hWcQuxRxv+RpUPbWPR1mkmklsZgdFlwuJDgHRYM
DoReUjXz/9p0pZlqHb1Y0IEebpHrL0ecvF7M+03Hqvw1urys4vJ/Q+yI6OuURDpNcqT/s7UKbYWE
nRzE9N6qoWWa/wh0Mc9E9vIEjh60FGq/7JRfT59rOk4Ah2cCy8sw2ZEVSZz+eTZZVY3E6M/jc42t
90iqbOC377J97ulm60zPcd9And8G15JWjwjs6wlkKdrTTWuSCzbMPQ28G2us1tuDbRO/Blgb50Uf
7z4MlTs7PGyEt4TEARO5pGUhP+HCiNWsElzGqf2d2obYn8m4s1oBUy+mB5xLAj00fM5WnLFaI/c5
vanxITSQ1JPlOCdgZGVk2IidIyywIo+wiXtLK5QGoOe585HMrYGh18epoffA90UM4/XiBsdD9Kfs
6d6COI/EEhjeJqD2NVkJTuIzs5PlRU/IvoboWMT5IFBh2Btkf4an6HKPaWUyOQDbZichzpyoW9Uy
Dv3T8wCVPMZ8TS/LNd9OsHV6FB7ruceAPBXrHbQ7Sk2n5Rzum5OHUZOfF31ibhFduqv/QInAlzYQ
yaNcSXduZG/HBzVRcUUucI9E5ByQlYFdeYEN6oDya7oye+llA2a3GieAXslKdsyNBLkSU3l8fcCG
oEauyEIcZ1e9MbdoTeroW8B/Zs+eGO9I0OGYynnRsBRYgOPeoyf3Lb4q1xQ+Q/lpnB+yfu4hnbR2
j6aVK9iYUuFoDAeiVsBfeRGROVziLrAnnD7V8e3Sv2PMXhizgk8MeFAvpk/PY5JJDMWsPgZkFDAM
rQT8HZagcq/e3LcRpn3SZq/JH4+RmzDaXRlWl9OVGaVnZ/+QNra6mM/KT8FwKZVnGKD8CSe3r16T
bgKBLW2RkyXT2AyPGyxyARmCZ25MG1tdzOcUP4fyXcDyf+u2mPz308ZmS1sQjBZ2Ru3DE6qOB3Zr
27RZo3ug6sRkX+yVNjRb2oPgjLM8egIdILzXtmmznnWOdCDwoqmdDR0n7UHwt7pfQpyFUR+3XJ02
tLryb+6j4LwcE89tK8xtQbCCIu5hoNNBXgf9LY5zCue5baWsAObJFOh29wOZBfImqotRxun0AW21
l6ptrOimNfD84vY4Wj4v2shAVFaAvsiA3Hy9ON1Hvbek/Z1KsFxQ2g31pmHYI/asR6SAyA9Zz720
k4nuSIJlSuF0jF4NlaB4vfztssP8DRxnjF6VfTVt3E3RRacRLOcXJqFmRmwudN1jhWU5mtulnRwU
/SVtYWT1l8hFxR2AH9QNtUXirn48dgiavzNt/M2QjiKYHm8qxnRFemogwGBnT9hpSLqPnFU4MO0m
9Ld0DMFyPhtj5KDIDobwoZ7ho3mr1xTo0fFpt6O/pT3dgH0RLe6HaiY454bi1ZGEvIjxdUDazehv
6ZgeDN6w4A6Z8AGeWHlZ1vXq53LPHiSXsEHaLelP6RyCjeSC/mxrKA4My4Rys6xrRuEjcmk3pT+l
g4boyg54tQ0su7fGDdehIRpKTOPvaTelP6WDerCzOJAnFt4fHH7uYHiLSDmb8YW1zfBoN+kYgnVa
9hWQVwPDsp+0Zi+TQmmpwSzRe9NuR39LxxBcFr0ksj85PN/aa+Gg/JVN3Zlpt6C/pbMIvnrAzxHm
RreQQuz+5loqrUGdiX1NmGtn6SiCFZTMgK+jUj4N3e61sQn7CioeKt/UGe5DaeNvhnQUwQD6fT5m
h9wB4EwDqexUsHsv9l6kP5OR0TrDvSlt3M2SjosmBRo3Ob81MB6jBwJbgwxEWYHqizgyh81y97R0
u0oaOuhkgtdJBw7R6yQo6wjucFlHcIfLOoI7XNYR3OHyf7iqrvn/gHCwAAAAJXRFWHRkYXRlOmNy
ZWF0ZQAyMDIxLTEyLTE0VDE5OjM4OjA5KzA4OjAwmXMYFgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy
MS0xMi0xNFQxOTozODowOSswODowMOguoKoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAA
ABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADI2UxuiZQAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24A
MTIwdAQi7wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMTIw6QvDmQAAACB0RVh0c29mdHdh
cmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBh
Z2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMjBNp8myAAAAF3RFWHRUaHVt
Yjo6SW1hZ2U6OldpZHRoADEyMN5Wme8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/
slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYzOTQ4MTg4ObVTMPUAAAASdEVYdFRodW1iOjpTaXpl
ADc2MjBCQiI6F3sAAABGdEVYdFRodW1iOjpVUkkAZmlsZTovLy9hcHAvdG1wL2ltYWdlbGMvaW1n
dmlldzJfOV8xNjM4ODQ4MDI1NDI2MTE4Ml8zOF9bMF0TNSl1AAAAAElFTkSuQmCC`})}const Ize=Ri("menuBar"),pR=li(Ize,"horizontal"),ghe=Gt(pR,"logo"),kze=Gt(ghe,"content");function Tze(r){const{data:e,onClick:t,logo:n}=r,i=De.useRef(null),[o,s]=De.useState(!1),a=d=>{var h;const _=d.target.closest("li"),C=(h=_==null?void 0:_.parentElement)===null||h===void 0?void 0:h.parentElement;return!!C&&C.classList.contains(pR)};De.useEffect(()=>{const d=document.getElementsByClassName(pR)[0],h=_=>{var C,S;const x=a(_),T=_.target;if(x)o&&((S=(C=i.current)===null||C===void 0?void 0:C.dispose)===null||S===void 0||S.call(C)),setTimeout(()=>s(!o));else{const k=T.closest("li"),M=k&&d.contains(k)&&!(k!=null&&k.dataset.submenu);(!k||M)&&s(!1)}},p=_=>{if(!o)return;const C=_.target;d.contains(C)||s(!1)};return document.addEventListener("click",p),d==null||d.addEventListener("click",h),()=>{document.removeEventListener("click",p),d==null||d.removeEventListener("click",h)}},[o]);const l=o?"hover":"click",u=(d,h)=>{t==null||t(d,h),i.current.dispose()};return me.createElement("div",{className:pR},me.createElement("div",{className:ghe},n||me.createElement(Dze,{className:kze})),me.createElement(Rc,{ref:i,role:"menu",mode:LC.Horizontal,trigger:l,onClick:u,style:{width:"100%"},data:e}))}const phe=Ri("menuBar"),Nze=Gt(phe,"action");function mhe(r){const{data:e,mode:t=Ac.vertical,onClick:n,updateFocusinEle:i,logo:o}=r,s=De.useRef(null),a=(h=[])=>{const p=h.concat(),_=[...p];for(;_.length;){const C=_.pop();if(C)if(C!=null&&C.data)_.push(...C.data);else{const S=nm.queryGlobalKeybinding(C.id)||[];S.length&&(C.keybinding=nm.convertSimpleKeybindingToString(S))}}return p},l=(h,p)=>{n==null||n(h,p),s.current.dispose()},u=me.createElement(Rc,{role:"menu",onClick:l,style:{width:200},data:a(e)}),d=De.useCallback(h=>{i==null||i(h.target)},[]);return De.useEffect(()=>(document.body.addEventListener("focusin",d),()=>{document.body.removeEventListener("focusin",d)}),[]),t===Ac.horizontal?me.createElement(Tze,{data:a(e),onClick:n,logo:o}):me.createElement("div",{className:phe},me.createElement(QU,{ref:s,trigger:"click",className:Nze,placement:"right",overlay:u},me.createElement(go,{type:"menu"})))}class lm extends op{constructor(){super({id:lm.ID,label:lm.LABEL,title:lm.LABEL,category:Nle.View,alias:"Toggle Side Bar",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:_s(Wc.CtrlCmd|Xn.KeyB)}}),this.layoutService=yt.resolve(Mh),this.activityBarService=yt.resolve(qv),this.menuBarService=yt.resolve(qC),this.sideBarService=yt.resolve(jv)}run(e,...t){const n=t[0],{selected:i}=this.activityBarService.getState(),o=this.layoutService.toggleSidebarVisibility(),s=n||this._preActivityBar;this.activityBarService.setActive(o?void 0:s),this.sideBarService.setActive(o?void 0:s),this.menuBarService.update(lm.ID,{icon:o?"":"check"}),o&&(this._preActivityBar=i)}}lm.ID=Y2;lm.LABEL=Kt("menu.showSideBar.label","Toggle Side Bar Visibility");class um extends op{constructor(){super({id:um.ID,label:um.LABEL,title:um.LABEL,category:Nle.View,alias:"Toggle Panel",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:_s(Wc.CtrlCmd|Xn.KeyJ)}}),this.layoutService=yt.resolve(Mh),this.menuBarService=yt.resolve(qC)}run(e){const t=this.layoutService.togglePanelVisibility();this.menuBarService.update(um.ID,{icon:t?"":"check"})}}um.ID=St.MENU_VIEW_PANEL;um.LABEL=Kt("menu.showPanel.title","Toggle Panel");var Aze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Oze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let $x=class extends Mu{constructor(){super(),this._focusinEle=null,this._automation={},this.updateFocusinEle=e=>{(e==null?void 0:e.id)!=wq&&(this._focusinEle=e)},this.onClick=(e,t)=>{var n,i;const o=t.id||"";this.emit(US.onSelect,o),(i=(n=this._automation)[o])===null||i===void 0||i.call(n),this.updateActivityBarContextMenu(o)},this.createFile=()=>{const{ACTION_QUICK_CREATE_FILE:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.undo=()=>{const{ACTION_QUICK_UNDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.redo=()=>{const{ACTION_QUICK_REDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.gotoQuickCommand=()=>{const{ACTION_QUICK_COMMAND:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateActivityBar=()=>{const e=this.layoutService.toggleActivityBarVisibility(),{MENU_VIEW_ACTIVITYBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.selectAll=()=>{const{ACTION_QUICK_SELECT_ALL:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.copyLineUp=()=>{const{ACTION_QUICK_COPY_LINE_UP:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateMenuBar=()=>{const e=this.layoutService.toggleMenuBarVisibility(),{MENU_VIEW_MENUBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateMenuBarMode=e=>{this.layoutService.setMenuBarMode(e)},this.updateMenuBarDataByMode=e=>{const{builtInMenuBarData:t}=this.builtinService.getModules(),{MENUBAR_MODE_HORIZONTAL:n,MENUBAR_MODE_VERTICAL:i,MENU_APPEARANCE_ID:o}=this.builtinService.getConstants();let s=n,a=i;e===Ac.vertical&&(s=i,a=n);const l=this.getMenuBarItem(t,a);this.menuBarService.remove(s),this.menuBarService.append(l,o)},this.getMenuBarItem=(e,t)=>{let n;for(n of e){if(n.id===t)return Object.assign({},n);if(Array.isArray(n.data)&&n.data.length>0){const i=this.getMenuBarItem(n.data,t);if(i)return i}}return null},this.updateStatusBar=()=>{const e=this.layoutService.toggleStatusBarVisibility(),{MENU_VIEW_STATUSBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateSideBar=()=>{this.monacoService.commandService.executeCommand(lm.ID)},this.updateAuxiliaryBar=()=>{const e=this.layoutService.setAuxiliaryBar(n=>!n),{MENU_VIEW_AUXILIARY:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updatePanel=()=>{this.monacoService.commandService.executeCommand(um.ID)},this.menuBarService=yt.resolve(qC),this.layoutService=yt.resolve(Mh),this.monacoService=yt.resolve($v),this.builtinService=yt.resolve(wa),this.activityBarService=yt.resolve(qv)}initView(){const{builtInMenuBarData:e}=this.builtinService.getModules(),{ACTION_QUICK_CREATE_FILE:t,ACTION_QUICK_UNDO:n,ACTION_QUICK_REDO:i,ACTION_QUICK_SELECT_ALL:o,ACTION_QUICK_COPY_LINE_UP:s,MENU_VIEW_ACTIVITYBAR:a,MENU_VIEW_AUXILIARY:l,MENU_VIEW_MENUBAR:u,MENU_VIEW_STATUSBAR:d,MENU_QUICK_COMMAND:h,MENU_VIEW_PANEL:p,MENUBAR_MODE_HORIZONTAL:_,MENUBAR_MODE_VERTICAL:C}=this.builtinService.getConstants();if(e){const S=this.layoutService.getMenuBarMode(),x=this.getMenuBarDataByMode(S,e);this.menuBarService.setMenus(x)}[[t,()=>this.createFile()],[n,()=>this.undo()],[i,()=>this.redo()],[o,()=>this.selectAll()],[s,()=>this.copyLineUp()],[a,()=>this.updateActivityBar()],[u,()=>this.updateMenuBar()],[d,()=>this.updateStatusBar()],[h,()=>this.gotoQuickCommand()],[Y2,()=>this.updateSideBar()],[l,()=>this.updateAuxiliaryBar()],[p,()=>this.updatePanel()],[_,()=>this.updateMenuBarMode(Ac.horizontal)],[C,()=>this.updateMenuBarMode(Ac.vertical)]].forEach(([S,x])=>{S&&(this._automation[S]=x)}),this.subscribe(US.onChangeMode,this.updateMenuBarDataByMode)}getFilteredMenuBarData(e,t){const n=[];return Array.isArray(e)&&e.forEach(i=>{if(t.includes(i.id))return;const o=Object.assign({},i);Array.isArray(i.data)&&i.data.length>0&&(o.data=this.getFilteredMenuBarData(i.data,t)),n.push(o)}),n}getMenuBarDataByMode(e,t){const{MENUBAR_MODE_VERTICAL:n,MENUBAR_MODE_HORIZONTAL:i}=this.builtinService.getConstants(),o=[];return e===Ac.horizontal?o.push(i):e===Ac.vertical&&o.push(n),this.getFilteredMenuBarData(t,o)}updateActivityBarContextMenu(e){const{MENU_VIEW_MENUBAR:t,CONTEXT_MENU_MENU:n}=this.builtinService.getConstants();n&&e===t&&this.activityBarService.toggleContextMenuChecked(n)}};$x=Aze([Ur(),Oze("design:paramtypes",[])],$x);const Rze=yt.resolve(qC),Mze=yt.resolve($x),Gte=Hc(Rze,mhe,Mze);class EC extends op{constructor(){super({id:EC.ID,label:EC.LABEL,title:EC.LABEL,alias:"Color Theme",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:_s(Wc.CtrlCmd|Xn.KeyK)}}),this.colorThemeService=yt.resolve(VS)}run(e){const t=e.get(Kf),n=this.colorThemeService.getThemes(),i=this.colorThemeService.getColorTheme(),o=[...Pze(n)];let s;const a=(l,u)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0;const d=l&&l.id!==void 0?l.id:i.id;this.colorThemeService.setTheme(d)},u?0:200)};return new Promise(l=>{let u=!1;const d=o.findIndex(p=>p.id===i.id),h=t.createQuickPick();h.items=o,h.placeholder=E("themes.selectTheme","Select Color Theme (Up/Down Keys to Preview)"),h.activeItems=[o[d]],h.canSelectMany=!1,h.onDidAccept(p=>{const _=h.activeItems[0];_&&a(_,!0),u=!0,h.hide(),l()}),h.onDidChangeActive(p=>a(p[0],!1)),h.onDidHide(()=>{u||(a(i,!0),l())}),h.show()})}}EC.ID=St.ACTION_SELECT_THEME;EC.LABEL=E("selectTheme.label","Color Theme");function Pze(r,e){const t=o=>({id:o.id,label:o.label,description:o.description}),n=(o,s)=>{var a;return(a=o.label)===null||a===void 0?void 0:a.localeCompare(s.label)},i=r.map(t).sort(n);return i.length>0&&e&&i.unshift({type:"separator",label:e}),i}const CU=vs.as(ey.Quickaccess);function Fze(r){Bze(r.prefix),CU.registerQuickAccessProvider(r)}function Bze(r){const e=CU.providers.findIndex(t=>t.prefix===r);e>-1&&CU.providers.splice(e,1)}var Wze=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};class _v extends $de{constructor(){super({showAlias:!1,noResultsPick:{label:E("noCommandResults","No matching commands"),commandId:""}},_v.services.get(xi),_v.services.get(Ro),_v.services.get(Go),_v.services.get(Xv),_v.services.get(As)),this.editorService=yt.resolve(Md)}get activeTextEditorControl(){var e;return(e=this.editorService)===null||e===void 0?void 0:e.editorInstance}static get services(){return yt.resolve($v).services}getCommandPicks(e,t){return Wze(this,void 0,void 0,function*(){return t.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks(e)].map(n=>Object.assign(Object.assign({},n),{buttons:[{iconClass:"codicon codicon-gear",tooltip:E("configure keybinding","Configure Keybinding")}],trigger:()=>Nw.CLOSE_PICKER}))})}getGlobalCommandPicks(e){var t;const n=[],i=Au.getMenuItems(wn.CommandPalette);for(const o of i){let s=(typeof o.command.title=="string"?o.command.title:o.command.title.value)||o.command.id;const a=typeof o.command.category=="string"?o.command.category:(t=o.command.category)===null||t===void 0?void 0:t.value;a&&(s=E("commandWithCategory","{0}: {1}",a,s));const l=typeof o.command.title!="string"?o.command.title.original:void 0,u=a&&o.command.category&&typeof o.command.category!="string"?o.command.category.original:void 0,d=l&&a?u?`${u}: ${l}`:`${a}: ${l}`:l;n.push({commandId:o.command.id,commandAlias:d,label:K$(s)})}return n}}_v.PREFIX=">";Fze({ctor:_v,prefix:_v.PREFIX,placeholder:E("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:E("commandsQuickAccess","Show and Run Commands"),needsEditor:!1}]});class X2 extends op{constructor(){super({id:X2.ID,label:cN.quickCommandActionLabel,alias:"Command Palette",title:{value:E("showTriggerActions","Command Palette"),original:"Command Palette"},f1:!1,keybinding:{weight:$f.WorkbenchContrib,when:void 0,primary:Wc.CtrlCmd|Wc.Shift|Xn.KeyP,secondary:[Xn.F1]}})}run(e){e.get(Kf).quickAccess.show(_v.PREFIX)}}X2.ID=St.ACTION_QUICK_COMMAND;var Vze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Hze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let IP=class extends Mu{constructor(){super(),this.onClick=(e,t)=>{this.emit(HS.OnClick,e,t)},this.onChange=(e,t)=>{this.emit(HS.OnChange,e,t)},this.onSelectColorTheme=()=>{this.monacoService.commandService.executeCommand(EC.ID)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{ACTION_QUICK_COMMAND:i="",ACTION_QUICK_ACCESS_SETTINGS:o="",ACTION_SELECT_THEME:s="",CONTEXT_MENU_MENU:a="",CONTEXT_MENU_EXPLORER:l="",CONTEXT_MENU_SEARCH:u="",CONTEXT_MENU_HIDE:d}=this.builtinService.getConstants();switch(n){case a:{this.menuBarController.updateMenuBar(),this.activityBarService.toggleContextMenuChecked(n);break}case l:case u:{this.activityBarService.toggleBar(n),this.activityBarService.toggleContextMenuChecked(n);break}case d:{this.menuBarController.updateActivityBar();break}case i:{this.gotoQuickCommand();break}case o:{this.settingsService.openSettingsInEditor();break}case s:{this.onSelectColorTheme();break}}},this.activityBarService=yt.resolve(qv),this.settingsService=yt.resolve($S),this.monacoService=yt.resolve($v),this.menuBarController=yt.resolve($x),this.builtinService=yt.resolve(wa)}initView(){const{activityBarData:e,contextMenuData:t}=this.builtinService.getModules();e&&this.activityBarService.add(e),t&&this.activityBarService.addContextMenu(t)}gotoQuickCommand(){this.monacoService.commandService.executeCommand(X2.ID)}};IP=Vze([Ur(),Hze("design:paramtypes",[])],IP);var Uze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let kP=class extends Mu{constructor(){super(),this.initView=()=>{},this.onClick=e=>{this.auxiliaryService.setActive(this.auxiliaryService.getState().current===e?void 0:e),this.emit(YN.onTabClick,e)},this.auxiliaryService=yt.resolve(Hx)}};kP=Uze([Ur(),zze("design:paramtypes",[])],kP);const Q2=Ri("notification"),$ze=Gt(Q2,"header"),jze=Gt(Q2,"body"),qze=Gt(Q2,"item"),Kze=li(Q2,"close");function _he(r){const{data:e=[],actionBar:t=[],showNotifications:n,onActionBarClick:i,onCloseNotification:o}=r,a=e.length>0?Kt("notification.title","notifications"):Kt("notification.title.no","no new notifications"),l=n?"block":"none";return me.createElement("div",{className:oi(Q2,gne),style:{display:l}},me.createElement("header",{className:$ze},me.createElement("span",null,a),me.createElement(s2,{data:t,onClick:i})),me.createElement("div",{className:jze},e.map(u=>me.createElement("div",{className:qze,key:u.id},me.createElement(go,{title:"Clear Notification",onClick:()=>o==null?void 0:o(u),className:Kze,type:"close"}),typeof u.render=="function"?u.render(u):u.value))))}De.memo(_he);const vhe=Ri("bell"),Gze=li(vhe,"active");function Yze(r){const{data:e=[],onClick:t,showNotifications:n,id:i,actionBar:o,onActionBarClick:s,onCloseNotification:a}=r,l=De.useRef(),d=e.length>0?"bell-dot":"bell";return De.useEffect(()=>{const h=DL(`.${Ri("workbench")}`);h&&(l.current=l.current||document.createElement("div"),h.appendChild(l.current),CR(me.createElement(_he,{id:i,data:e,actionBar:o,showNotifications:n,onActionBarClick:s,onCloseNotification:a}),l.current))},[i,e,o,n,s,a]),me.createElement(go,{className:oi(vhe,n&&Gze),onClick:t,type:d})}const Zze=De.memo(Yze);var Xze=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Qze=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let yU=class extends Mu{constructor(){super(),this.onCloseNotification=e=>{this.notificationService.remove(e.id)},this.onClick=(e,t)=>{this.toggleNotifications()},this.onActionBarClick=(e,t)=>{const n=t.id,{NOTIFICATION_CLEAR_ALL_ID:i,NOTIFICATION_HIDE_ID:o}=this.builtinService.getConstants();n===i?this.notificationService.clear():n===o&&this.toggleNotifications()},this.notificationService=yt.resolve(zx),this.statusBarService=yt.resolve(Kv),this.builtinService=yt.resolve(wa)}toggleNotifications(){this.notificationService.toggleNotification()}initView(){const{builtInNotification:e,NOTIFICATION_CLEAR_ALL:t,NOTIFICATION_HIDE:n}=this.builtinService.getModules();if(e){const i=Hc(this.notificationService,Zze),o=Object.assign(Object.assign({},e),{actionBar:[t,n].filter(Boolean),render:()=>me.createElement(i,{onClick:this.onClick,onActionBarClick:this.onActionBarClick,onCloseNotification:this.onCloseNotification})});this.notificationService.setState(Object.assign({},o)),this.statusBarService.add(o,zb.right)}}};yU=Xze([Ur(),Qze("design:paramtypes",[])],yU);const Jze=Ri("output");function e$e(r){const{id:e,data:t="",onUpdateEditorIns:n}=r;return me.createElement("div",{className:Jze},me.createElement(fj,{key:e,options:{value:t,readOnly:!0,lineDecorationsWidth:0,lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0},editorInstanceRef:i=>{n==null||n(i)}}))}var t$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},n$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let TP=class extends Mu{constructor(){super(),this.onTabChange=e=>{e&&this.panelService.setActive(e),this.emit($b.onTabChange,e)},this.onClose=e=>{e&&this.emit($b.onTabClose,e)},this.onToolbarClick=(e,t)=>{const{PANEL_TOOLBOX_CLOSE:n,PANEL_TOOLBOX_RESIZE:i}=this.builtinService.getConstants();t.id===n?this.monacoService.commandService.executeCommand(um.ID):t.id===i&&this.panelService.toggleMaximize(),this.emit($b.onToolbarClick,e,t)},this.panelService=yt.resolve(zS),this.monacoService=yt.resolve($v),this.builtinService=yt.resolve(wa)}initView(){const{builtInOutputPanel:e,builtInPanelToolbox:t,builtInPanelToolboxResize:n}=this.builtinService.getModules();if(e){const o=e;o.renderPane=s=>me.createElement(e$e,Object.assign({onUpdateEditorIns:a=>{s.outputEditorInstance=a}},s)),this.panelService.add(o),this.panelService.setActive(o.id)}const i=[n,t].filter(Boolean);this.panelService.setState({toolbox:i})}};TP=t$e([Ur(),n$e("design:paramtypes",[])],TP);function i$e(r){const{data:e={errors:0,warnings:0,infos:0}}=r;return me.createElement(me.Fragment,null,me.createElement(go,{type:"error"}),` ${e.errors} `,me.createElement(go,{type:"warning"}),` ${e.warnings} `,me.createElement(go,{type:"info"}),` ${e.infos}`)}const r$e=me.memo(i$e),bhe=Ri("problems"),Dq=Gt(bhe,"treeview"),Che=Gt(Dq,"treeNode"),o$e=Gt(Che,"badge"),yhe=Gt(Dq,"treeLeaf"),Yte=Gt(yhe,"subInfo");function s$e(r){const{data:e,onSelect:t}=r;if(!(e!=null&&e.length))return me.createElement("div",{style:{margin:"0 18px",userSelect:"none"}},Kt("panel.problems.empty","No problems have been detected in the workspace."));const n=i=>{switch(i){case bm.Error:return me.createElement(go,{type:"error"});case bm.Warning:return me.createElement(go,{type:"warning"});case bm.Info:return me.createElement(go,{type:"info"});default:return""}};return me.createElement(cD,null,me.createElement("div",{className:bhe},me.createElement(hF,{className:Dq,data:e,renderTitle:({children:i,name:o,value:s},a,l)=>l?me.createElement("span",{className:yhe},n(s.status),me.createElement("span",null,s.message),me.createElement("span",{className:Yte},s.code),me.createElement("span",{className:Yte},"[",s.startLineNumber,","," ",s.startColumn,"]")):me.createElement("span",{className:Che},s.code,me.createElement("span",{className:o$e},i==null?void 0:i.length)),onSelect:t,onRightClick:i=>i.preventDefault()})))}const a$e=De.memo(s$e);var l$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},u$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let wU=class extends Mu{constructor(){super(),this.onClick=(e,t)=>{this.showHideProblems()},this.onSelect=e=>{this.emit(QN.onSelect,e)},this.panelService=yt.resolve(zS),this.statusBarService=yt.resolve(Kv),this.monacoService=yt.resolve($v),this.layoutService=yt.resolve(Mh),this.problemsService=yt.resolve(e2),this.builtinService=yt.resolve(wa)}showHideProblems(){const{panel:e}=this.layoutService.getState(),{current:t}=this.panelService.getState(),{builtInPanelProblems:n}=this.builtinService.getModules();n&&((e.hidden||(t==null?void 0:t.id)===n.id)&&this.monacoService.commandService.executeCommand(um.ID),this.panelService.open(n))}initView(){const{builtInStatusProblems:e,builtInPanelProblems:t}=this.builtinService.getModules();if(e&&(e.render=o=>me.createElement(r$e,Object.assign({},o)),e.onClick=this.onClick,this.statusBarService.add(e,zb.left)),t){const o=Hc(this.problemsService,a$e),s=t;s.renderPane=()=>me.createElement(o,{onSelect:this.onSelect}),this.panelService.add(s),this.panelService.setActive(s.id)}const{PROBLEM_MODEL_ID:n,PROBLEM_MODEL_NAME:i}=this.builtinService.getConstants();this.problemsService.setState({id:n,name:i})}};wU=l$e([Ur(),u$e("design:paramtypes",[])],wU);function whe({locale:r}){const e=De.useRef(null),t=()=>{window.location.reload()};return De.useEffect(()=>{var n;(n=e.current)===null||n===void 0||n.focus()},[]),me.createElement("div",{style:{lineHeight:"1.5"}},me.createElement("div",{style:{direction:"ltr",width:440,whiteSpace:"normal",textAlign:"left"}},me.createElement("p",{style:{fontWeight:"bold"}},Kt("notification.locale.title","")),me.createElement("p",null,Kt("notification.locale.description",""))),me.createElement("div",{style:{marginBottom:2}},me.createElement(Qw,{ref:e,style:{width:150,margin:"0 0 0 auto"},onClick:t},Kt("notification.locale.button",""))))}me.memo(whe);var c$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},d$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let SU=class extends Mu{constructor(){super(),this.onChangeSettings=Ao.debounce(e=>{this.settingsService.update(e),this.emit(XN.OnChange,e)},600),this.editorService=yt.resolve(Md),this.settingsService=yt.resolve($S),this.localeService=yt.resolve(Sm),this.notificationService=yt.resolve(zx),this.builtinService=yt.resolve(wa)}initView(){const{SETTING_ID:e}=this.builtinService.getConstants();this.editorService.onUpdateTab(t=>{var n;if(t.id===e){const i=this.settingsService.normalizeFlatObject(((n=t.data)===null||n===void 0?void 0:n.value)||"");this.onChangeSettings(i)}}),this.localeService.onChange((t,n)=>{this.notifyLocaleChanged(t,n)})}notifyLocaleChanged(e,t){const{SETTING_ID:n}=this.builtinService.getConstants(),i={id:n,value:t,render(o){return me.createElement(whe,{key:t.id,locale:t.name})}};this.notificationService.getState().showNotifications||this.notificationService.toggleNotification(),this.notificationService.add([i])}};SU=c$e([Ur(),d$e("design:paramtypes",[])],SU);var h$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},f$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let NP=class extends Mu{constructor(){super(),this.onClick=(e,t)=>{this.emit(ZN.onClick,e,t)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{STATUS_BAR_HIDE_ID:i}=this.builtinService.getConstants();switch(n){case i:this.menuBarController.updateStatusBar();break}},this.menuBarController=yt.resolve($x),this.statusBarService=yt.resolve(Kv),this.builtinService=yt.resolve(wa)}initView(){const{STATUS_EDITOR_INFO:e,CONTEXT_MENU_HIDE_STATUS_BAR:t}=this.builtinService.getModules(),n=Ao.cloneDeep(this.statusBarService.getState().rightItems),i=Ao.cloneDeep(this.statusBarService.getState().contextMenu||[]);e&&n.push(Object.assign(Object.assign({},e),{render:o=>me.createElement(che,Object.assign({},o))})),t&&i.push(t),this.statusBarService.setState({rightItems:n,contextMenu:i})}};NP=h$e([Ur(),f$e("design:paramtypes",[])],NP);var g$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},p$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let AP=class extends Mu{constructor(){super(),this.onPaneSizeChange=e=>{this.layoutService.setPaneSize(e)},this.onHorizontalPaneSizeChange=e=>{this.layoutService.setHorizontalPaneSize(e)},this.onWorkbenchDidMount=()=>{this.layoutService.emit(EP.OnWorkbenchDidMount)},this.layoutService=yt.resolve(Mh)}initView(){}};AP=g$e([Ur(),p$e("design:paramtypes",[])],AP);const m$e=Ri(Y2),_$e=Ri(VHe,m$e),OP=Ri(HHe),v$e=li(OP,"input"),b$e=li(OP,"editable"),J2=Ri(UHe),t3=Gt(J2,"item"),C$e=Gt(J2,"group"),y$e=Gt(t3,"fileName"),w$e=Gt(t3,"filePath"),Zte=li(t3,"active"),S$e=Gt(J2,"close"),E$e=Gt(J2,"file"),L$e=r=>{const{activePanelKeys:e,data:t=[],headerToolBar:n,onClick:i,onActionsContextMenuClick:o,onCollapseChange:s,onToolbarClick:a}=r;return me.createElement("div",{className:_$e},me.createElement(dhe,{title:Kt("sidebar.explore.title","Explorer"),toolbar:me.createElement(a2,{data:[n],onClick:i,onContextMenuClick:o})}),me.createElement(hhe,null,me.createElement(cie,{data:t,activePanelKeys:e,onCollapseChange:s,onToolbarClick:a})))};var x$e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const D$e=r=>{const e=[...r];let t=!1;for(;e.length;){const n=e.pop();if(n!=null&&n.isEditable){t=!0;break}else e.push(...(n==null?void 0:n.children)||[])}return t},I$e=me.forwardRef((r,e)=>{const t=De.useRef(null);return De.useLayoutEffect(()=>{if(t.current){const n=(r.defaultValue||"").lastIndexOf(".");t.current.selectionStart=0,t.current.selectionEnd=n>0?n:(r.defaultValue||"").length}},[]),me.createElement("input",Object.assign({},r,{ref:t}))}),k$e=r=>{var e;const{folderTree:t={},entry:n,panel:i,onUpdateFileName:o,onSelectFile:s,onDropTree:a,onClickContextMenu:l,onRightClick:u,onLoadData:d,createTreeNode:h,onExpandKeys:p}=r,_=x$e(r,["folderTree","entry","panel","onUpdateFileName","onSelectFile","onDropTree","onClickContextMenu","onRightClick","onLoadData","createTreeNode","onExpandKeys"]),{data:C=[],folderPanelContextMenu:S=[],expandKeys:x,loadedKeys:T,current:k}=t,M=De.useRef(null),W=De.useRef(),F=i2(),Q=D$e(C),z=(ie,A)=>{var te;l==null||l(A),(te=W.current)===null||te===void 0||te.hide()},$=()=>BP({anchor:DL(`.${OP}`),render:()=>me.createElement(Rc,{role:"menu",onClick:z,data:S})}),G=(ie,A)=>{l==null||l(ie,A),F==null||F.hide()},Y=(ie,A)=>{if(ie.target.nodeName!=="INPUT"){ie.preventDefault();const te=(u==null?void 0:u(A))||[];te.length&&(F==null||F.show(yR(ie),()=>me.createElement(Rc,{role:"menu",onClick:(_e,de)=>G(de,A),data:te})))}},I=(ie,A)=>{const te=ie.value;o==null||o(Object.assign(Object.assign({},A),{name:te}))},D=(ie,A)=>{I(ie.target,A)},O=(ie,A)=>{(ie.keyCode===13||ie.keyCode===27)&&I(ie.target,A)},V=ie=>{const{isEditable:A,name:te}=ie;return A?me.createElement(I$e,{role:"input",className:v$e,type:"text",defaultValue:te,ref:M,onKeyDown:_e=>O(_e,ie),autoComplete:"off",autoFocus:!0,onBlur:_e=>D(_e,ie),onClick:_e=>_e.stopPropagation()}):te},j=()=>{s==null||s()},ne=(ie,A)=>{a==null||a(ie,A)},re=()=>{h==null||h("RootFolder")};De.useEffect(()=>(S.length>0&&(W.current=$()),()=>{var ie;(ie=W.current)===null||ie===void 0||ie.dispose()}),[C.length]);const se=me.createElement("div",{"data-content":i.id},n?me.createElement(me.Fragment,null,n):me.createElement("div",{style:{padding:"10px 5px"}},"you have not yet opened a folder",me.createElement(Qw,{onClick:re},"Add Folder")));return C.length?me.createElement(cD,{isShowShadow:!0},me.createElement("div",{"data-content":i.id,style:{height:"100%"}},me.createElement(hF,Object.assign({activeKey:k==null?void 0:k.id,expandKeys:x,loadedKeys:T,data:((e=C[0])===null||e===void 0?void 0:e.children)||[],className:oi(OP,Q&&b$e),draggable:!Q,onDropTree:ne,onSelect:s,onTreeClick:j,onRightClick:Y,renderTitle:V,onLoadData:d,onExpand:p},_)))):se},T$e=De.memo(k$e);var N$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},A$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let jx=class extends Mu{constructor(){super(),this.getContextMenu=e=>{var t;const n=_m(((t=this.folderTreeService.getState().folderTree)===null||t===void 0?void 0:t.contextMenu)||[]),i=this.folderTreeService.getFileContextMenu(),o=this.folderTreeService.getFolderContextMenu(),{ROOT_FOLDER_CONTEXT_MENU:s}=this.builtinService.getModules();switch(e.fileType){case Iu.File:{n.unshift(...i);break}case Iu.Folder:{n.unshift(...o);break}case Iu.RootFolder:return o.concat(s||[])}return n},this.createTreeNode=(e,t)=>{var n;if(typeof t>"u"){const i=this.folderTreeService.getState(),{data:o,current:s}=(i==null?void 0:i.folderTree)||{},a=typeof(s==null?void 0:s.id)>"u"?(n=o==null?void 0:o[0])===null||n===void 0?void 0:n.id:s==null?void 0:s.id;this.emit(Gs.onCreate,e,a)}else this.emit(Gs.onCreate,e,t)},this.onClickContextMenu=(e,t)=>{const n=e.id,{RENAME_COMMAND_ID:i,DELETE_COMMAND_ID:o,NEW_FILE_COMMAND_ID:s,NEW_FOLDER_COMMAND_ID:a,OPEN_TO_SIDE_COMMAND_ID:l}=this.builtinService.getConstants();switch(n){case i:{const{id:u}=t;this.onRename(u);break}case o:{const{id:u}=t;this.onDelete(u);break}case s:{const{id:u}=t;this.createTreeNode(Iu.File,u);break}case a:{const{id:u}=t;this.createTreeNode(Iu.Folder,u);break}case l:{this.onSelectFile(t);break}default:this.onContextMenuClick(e,t)}},this.onRightClick=e=>{const t=this.getContextMenu(e);return this.emit(Gs.onRightClick,e,t),t},this.onDropTree=(e,t)=>{this.emit(Gs.onDrop,e,t)},this.onUpdateFileName=e=>{this.emit(Gs.onUpdateFileName,e)},this.onSelectFile=e=>{this.folderTreeService.setActive(e==null?void 0:e.id),e&&!e.isEditable&&e.fileType===Iu.File&&this.emit(Gs.onSelectFile,e)},this.onContextMenuClick=(e,t)=>{this.emit(Gs.onContextMenuClick,e,t)},this.onRename=e=>{this.emit(Gs.onRename,e)},this.onDelete=e=>{this.emit(Gs.onDelete,e)},this.onLoadData=e=>this.count(Gs.onLoadData)?(this.folderTreeService.setLoadedKeys([...this.folderTreeService.getLoadedKeys(),e.id.toString()]),new Promise((n,i)=>{const o=s=>{this.folderTreeService.update(s),n()};this.emit(Gs.onLoadData,e,o)})):Promise.resolve(),this.onExpandKeys=e=>{this.emit(Gs.onExpandKeys,e)},this.folderTreeService=yt.resolve(Ux),this.builtinService=yt.resolve(wa)}initView(){const{FILE_CONTEXT_MENU:e,BASE_CONTEXT_MENU:t,COMMON_CONTEXT_MENU:n,FOLDER_PANEL_CONTEXT_MENU:i}=this.builtinService.getModules();e&&this.folderTreeService.setFileContextMenu(e),t&&this.folderTreeService.setFolderContextMenu(t),this.folderTreeService.setState({folderTree:{contextMenu:n||[],current:null,folderPanelContextMenu:i||[],data:[],expandKeys:[]}})}};jx=N$e([Ur(),A$e("design:paramtypes",[])],jx);const O$e=r=>{var e;const{current:t,groups:n,groupToolbar:i,contextMenu:o=[],headerContextMenu:s,panel:a,onSelect:l,onSaveGroup:u,onContextMenu:d,onCloseGroup:h,onClose:p,onToolbarClick:_}=r,C=De.useRef(null),S=De.useRef(null);if(De.useLayoutEffect(()=>{var $,G,Y;if(((($=S.current)===null||$===void 0?void 0:$.scrollHeight)||0)>LO-hb){const D=(G=C.current)===null||G===void 0?void 0:G.querySelector(`.${Zte}`);if(D){const O=D.offsetTop;(Y=S.current)===null||Y===void 0||Y.scrollTo(O)}}},[(t==null?void 0:t.id)&&((e=t.tab)===null||e===void 0?void 0:e.id)]),!n||!n.length)return null;const x=Gx(),T=($,G)=>{p==null||p(G.id,$.id)},k=($,G)=>{var Y;($.id!==(t==null?void 0:t.id)||G.id!==((Y=t==null?void 0:t.tab)===null||Y===void 0?void 0:Y.id))&&(l==null||l(G.id,$.id))},M=($,G,Y)=>{x.hide(),d==null||d($,G.id,Y)},W=($,G,Y)=>{$.preventDefault(),x.show(yR($),()=>me.createElement(Rc,{role:"menu",onClick:(I,D)=>M(D,G,Y),data:o}))},F=($,G)=>{$.preventDefault();const Y=s||o;x.show(yR($),()=>me.createElement(Rc,{role:"menu",onClick:(I,D)=>M(D,G),data:Y}))},Q=($,G)=>{var Y;const{target:I}=$,D=(Y=G.data)===null||Y===void 0?void 0:Y[0];I.nextElementSibling&&D&&(l==null||l(D.id,G.id),I.nextElementSibling.focus())},z=($,G,Y)=>{switch($.stopPropagation(),G.id){case St.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:h==null||h(Y.id);break;case St.EXPLORER_TOGGLE_SAVE_GROUP:u==null||u(Y.id);break;default:_==null||_(G,Y.id);break}};return me.createElement(cD,{ref:S,isShowShadow:!0},me.createElement("div",{className:J2,ref:C,"data-content":a.id},n.map(($,G)=>{var Y;return me.createElement(me.Fragment,{key:G},n.length!==1&&me.createElement("div",{className:C$e,onClick:I=>Q(I,$),onContextMenu:I=>F(I,$),key:G},Kt("sidebar.explore.openEditor.group","Group",(G+1).toString()),i&&me.createElement(a2,{data:i,onClick:(I,D)=>z(I,D,$)})),(Y=$.data)===null||Y===void 0?void 0:Y.map(I=>{var D,O,V,j,ne;const re=$.id===(t==null?void 0:t.id)&&I.id===((D=t==null?void 0:t.tab)===null||D===void 0?void 0:D.id);return me.createElement("div",{title:((O=I.data)===null||O===void 0?void 0:O.path)&&`${(V=I.data)===null||V===void 0?void 0:V.path}/${I.name}`,className:oi(t3,re&&Zte),tabIndex:0,key:`${G}_${I.id}`,onClick:()=>k($,I),onContextMenu:se=>W(se,$,I)},me.createElement(go,{className:S$e,onClick:()=>T($,I),type:"close"}),me.createElement(go,{className:E$e,type:((j=I.data)===null||j===void 0?void 0:j.icon)||I.icon}),me.createElement("span",{className:y$e},I.name),me.createElement("span",{className:w$e},(ne=I.data)===null||ne===void 0?void 0:ne.path))}))})))},R$e=yt.resolve(Ux),M$e=yt.resolve(jx),P$e=Hc(R$e,T$e,M$e);var F$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},B$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let EU=class extends Mu{constructor(){super(),this.onClick=(e,t)=>{this.emit(Yg.onClick,e,t)},this.onActionsContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id;n&&this.explorerService.togglePanel(n)},this.onCollapseChange=e=>{this.emit(Yg.onCollapseChange,e)},this.onToolbarClick=(e,t)=>{var n,i,o,s;const a=e.id,{NEW_FILE_COMMAND_ID:l,NEW_FOLDER_COMMAND_ID:u,REMOVE_COMMAND_ID:d,COLLAPSE_COMMAND_ID:h,EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:p,EXPLORER_TOGGLE_SAVE_ALL:_,EXPLORER_TOGGLE_VERTICAL:C}=this.builtinService.getConstants();switch(a){case l:{(i=(n=this.folderTreeController).createTreeNode)===null||i===void 0||i.call(n,Iu.File);break}case u:{(s=(o=this.folderTreeController).createTreeNode)===null||s===void 0||s.call(o,Iu.Folder);break}case d:{this.emit(Yg.onRemovePanel,t);break}case h:{this.emit(Yg.onCollapseAllFolders);break}case p:{this.emit(aa.onCloseAll);break}case _:{this.emit(aa.onSaveAll);break}case C:{this.emit(aa.onSplitEditorLayout);break}default:this.emit(Yg.onPanelToolbarClick,t,a)}},this.renderFolderTree=e=>me.createElement(P$e,{panel:e}),this.activityBarService=yt.resolve(qv),this.sidebarService=yt.resolve(jv),this.explorerService=yt.resolve(e1),this.folderTreeController=yt.resolve(jx),this.builtinService=yt.resolve(wa)}initView(){const e={onClick:this.onClick,onCollapseChange:this.onCollapseChange,onActionsContextMenuClick:this.onActionsContextMenuClick,onToolbarClick:this.onToolbarClick},t=Hc(this.explorerService,L$e),n=this.builtinService.getConstants().EXPLORER_ACTIVITY_ITEM;if(!n)return;const i={id:n,title:"EXPLORER",render(){return me.createElement(t,Object.assign({},e))}},{builtInExplorerActivityItem:o,builtInExplorerFolderPanel:s,builtInExplorerHeaderToolbar:a}=this.builtinService.getModules();a&&this.explorerService.setState({headerToolBar:a}),o&&s&&(this.activityBarService.add(o,!0),this.sidebarService.add(i,!0),this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:this.renderFolderTree})))}};EU=F$e([Ur(),B$e("design:paramtypes",[])],EU);var W$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},V$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},H$e=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};let LU=class extends Mu{constructor(){super(),this.onContextMenu=(e,t,n)=>{const{EDITOR_MENU_CLOSE:i,EDITOR_MENU_CLOSE_OTHERS:o,EDITOR_MENU_CLOSE_SAVED:s,EDITOR_MENU_CLOSE_ALL:a}=this.builtinService.getConstants();switch(e.id){case i:this.onClose(n==null?void 0:n.id,t);break;case o:this.emit(aa.onCloseOthers,n,t);break;case s:this.emit(aa.onCloseSaved,t);break;case a:this.emit(aa.onCloseAll,t);break;default:this.emit(aa.onContextMenu,e,n,t);break}},this.onClose=(e,t)=>{this.emit(aa.onClose,e,t)},this.onSelect=(e,t)=>{this.emit(aa.onSelect,e,t)},this.onCloseGroup=e=>{this.emit(aa.onCloseAll,e)},this.onSaveGroup=e=>{this.emit(aa.onSaveAll,e)},this.onToolbarClick=(e,t)=>{this.emit(aa.onToolbarClick,e,t)},this.editService=yt.resolve(Md),this.explorerService=yt.resolve(e1),this.builtinService=yt.resolve(wa)}initView(){const e=Hc(this.editService,O$e),{builtInExplorerEditorPanel:t,builtInEditorTreeContextMenu:n,builtInEditorTreeHeaderContextMenu:i}=this.builtinService.getModules();if(t){const{groupToolbar:o}=t,s=H$e(t,["groupToolbar"]),a=n||[],l=i||[];this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:u=>me.createElement(e,{panel:u,contextMenu:a,headerContextMenu:l,groupToolbar:o,onClose:this.onClose,onSelect:this.onSelect,onCloseGroup:this.onCloseGroup,onSaveGroup:this.onSaveGroup,onContextMenu:this.onContextMenu,onToolbarClick:this.onToolbarClick})}))}}};LU=W$e([Ur(),V$e("design:paramtypes",[])],LU);var U$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},z$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let xU=class extends Mu{constructor(){super(),this.onClick=e=>{},this.explorerService=yt.resolve(e1),this.builtinService=yt.resolve(wa)}initView(){const{builtInExplorerOutlinePanel:e}=this.builtinService.getModules();e&&this.explorerService.addPanel(e)}};xU=U$e([Ur(),z$e("design:paramtypes",[])],xU);const $$e=li(Gt(Ri("search"),"treeNode"),"empty"),j$e=li(Gt(Ri("search"),"treeNode"),"match"),q$e=li(Gt(Ri("search"),"treeNode"),"delete"),K$e=li(Gt(Ri("search"),"treeNode"),"replace"),G$e=Gt(Ri("search"),"tree"),Y$e=r=>{const{data:e=[],onSelect:t,renderTitle:n}=r;return me.createElement(hF,{draggable:!1,className:G$e,data:e,renderTitle:n,onSelect:t,onRightClick:i=>i.preventDefault()})},Z$e=De.memo(Y$e),X$e=({value:r="",replaceValue:e,searchAddons:t,replaceAddons:n,validationInfo:i,headerToolBar:o,result:s,toggleAddon:a,onResultClick:l,validateValue:u,setValidateInfo:d,onSearch:h,getSearchIndex:p,setSearchValue:_,setReplaceValue:C,onChange:S,toggleMode:x})=>{const T=(z,$)=>{console.log("onClick:",z,$)},k=(z=[])=>{const[$,G]=z;_==null||_($),C==null||C(G),S==null||S($||"",G||"")},M=z=>{x==null||x(z)},W=(z,$,G)=>{const{name:Y=""}=z;if(!G)return Y;const I=p?p(Y,r):-1,D=Y.substr(0,I),O=Y.substr(I,r.length),V=Y.substr(I+r.length);return I>-1?me.createElement("span",null,D,me.createElement("span",{className:oi(j$e,e&&q$e)},O),e&&me.createElement("span",{className:K$e},e),V):Y},F=(z=[])=>{const[$,G]=z;u==null||u($||"",Y=>{Y?d==null||d({type:"error",text:Y.message}):h==null||h($||"",G||"")})},Q=z=>{z.isLeaf&&(l==null||l(z,s))};return me.createElement("div",{className:Ri("search-pane","sidebar")},me.createElement(dhe,{title:Kt("sidebar.search.title","Search"),toolbar:me.createElement(a2,{data:o||[],onClick:T})}),me.createElement(hhe,null,me.createElement(jae,{values:[r,e],addons:[t,n],validationInfo:i,onChange:k,onSearch:F,onAddonClick:a,onButtonClick:M}),r&&s.length===0?me.createElement("div",{className:$$e},""):me.createElement(Z$e,{data:s,renderTitle:W,onSelect:Q})))};var Q$e=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},J$e=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let DU=class extends Mu{constructor(){super(),this.validateValue=(e,t)=>{const{isRegex:n}=this.searchService.getState();if(n)try{return new RegExp(e),t()}catch(i){if(i instanceof Error)return t(i)}return t()},this.getSearchIndex=(e,t="")=>{let n=-1;const{isCaseSensitive:i,isWholeWords:o,isRegex:s}=this.searchService.getState(),a=i,l=o,u=i&&o,d=!i&&!o;try{if(s)a&&(n=e.search(new RegExp(t))),l&&(n=e.search(new RegExp("\\b"+t+"\\b","i"))),u&&(n=e.search(new RegExp("\\b"+t+"\\b"))),d&&(n=e.toLowerCase().search(new RegExp(t,"i")));else{if(a&&(n=e.indexOf(t)),l){const h=new RegExp("\\b"+(t==null?void 0:t.toLowerCase())+"\\b");n=e.toLowerCase().search(h)}u&&(n=e.search(new RegExp("\\b"+t+"\\b"))),d&&(n=e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))}}catch(h){console.error(h)}return n},this.setValidateInfo=e=>{this.searchService.setValidateInfo(e)},this.setSearchValue=e=>{this.searchService.setSearchValue(e)},this.setReplaceValue=e=>{this.searchService.setReplaceValue(e)},this.toggleAddon=e=>{const t=e==null?void 0:e.id,{SEARCH_CASE_SENSITIVE_COMMAND_ID:n,SEARCH_WHOLE_WORD_COMMAND_ID:i,SEARCH_REGULAR_EXPRESSION_COMMAND_ID:o,SEARCH_PRESERVE_CASE_COMMAND_ID:s,SEARCH_REPLACE_ALL_COMMAND_ID:a}=this.builtinService.getConstants();switch(t){case n:{this.searchService.toggleCaseSensitive();break}case i:{this.searchService.toggleWholeWord();break}case o:{this.searchService.toggleRegex();break}case s:{this.searchService.togglePreserveCase();break}case a:{this.emit(am.onReplaceAll);break}default:console.log("no addon")}},this.toggleMode=e=>{this.searchService.toggleMode(e)},this.onChange=(e="",t="")=>{this.emit(am.onChange,e,t)},this.onSearch=(e="",t="")=>{const{isRegex:n,isCaseSensitive:i,isWholeWords:o,preserveCase:s}=this.searchService.getState();this.emit(am.onSearch,e,t,{isRegex:n,isCaseSensitive:i,isWholeWords:o,preserveCase:s})},this.onResultClick=(e,t)=>{this.emit(am.onResultClick,e,t)},this.activityBarService=yt.resolve(qv),this.sidebarService=yt.resolve(jv),this.searchService=yt.resolve(JN),this.builtinService=yt.resolve(wa)}initView(){const{builtInSearchActivityItem:e,builtInHeaderToolbar:t,builtInSearchAddons:n,builtInReplaceAddons:i}=this.builtinService.getModules();if(e){const o=Hc(this.searchService,X$e,this),s={id:e.id,title:"SEARCH",render(){return me.createElement(o,null)}};this.searchService.setState({headerToolBar:t||[],searchAddons:n||[],replaceAddons:i||[]}),this.sidebarService.add(s),this.activityBarService.add(e)}}};DU=Q$e([Ur(),J$e("design:paramtypes",[])],DU);class Yw extends op{constructor(){super({id:Yw.ID,label:Yw.LABEL,title:Yw.LABEL,alias:"Open Settings (JSON)",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:_s(Wc.CtrlCmd|Xn.Comma)}}),this.settingsService=yt.resolve($S)}run(e){this.settingsService.openSettingsInEditor()}}Yw.ID=St.ACTION_QUICK_ACCESS_SETTINGS;Yw.LABEL=E("quickAccessSettings.label","Open Settings (JSON)");class Zw extends op{constructor(){super({id:Zw.ID,label:Zw.LABEL,title:Zw.LABEL,alias:"Select Display Language",precondition:void 0,f1:!0,keybinding:{when:void 0,primary:Wc.CtrlCmd|Wc.Shift|Xn.KeyL}})}get localeService(){return yt.resolve(Sm)}run(e){const t=e.get(Kf),n=this.localeService.getLocales(),i=this.localeService.getCurrentLocale(),o=n.map(l=>({id:l.id,label:l.name,description:l.description}));let s;const a=(l,u)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0,l&&l.id&&this.localeService.setCurrentLocale(l.id)},u?0:200)};return new Promise(l=>{let u=!1;const d=o.findIndex(p=>p.id===(i==null?void 0:i.id)),h=t.createQuickPick();h.items=o,h.placeholder=Kt("locale.select","Select Display Language (Up/Down Keys to Preview)"),h.activeItems=[o[d]],h.canSelectMany=!1,h.onDidAccept(p=>{const _=h.activeItems[0];_&&a(_,!0),u=!0,h.hide(),l()}),h.onDidHide(()=>{u||(a(i,!0),l())}),h.show()})}}Zw.ID=St.ACTION_SELECT_LOCALE;Zw.LABEL=Kt("select.locale","Select Display Language");class vv extends op{constructor(){super({id:vv.ID,alias:vv.DESC,title:{value:vv.LABEL,original:vv.DESC},f1:!0,label:vv.LABEL,keybinding:{weight:$f.BuiltinExtension,when:void 0,primary:Wc.CtrlCmd|Xn.KeyA}}),this.editorService=yt.resolve(Md)}selectEditorAll(){const e=this.editorService.editorInstance;e&&(e.focus(),e.setSelection(e.getModel().getFullModelRange()))}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;i&&this.isTextdom(i)&&!i.className.includes("monaco")?i.select():this.selectEditorAll()}}vv.ID=St.ACTION_QUICK_SELECT_ALL;vv.DESC="Select All";vv.LABEL=Kt("menu.selectAll","Select All");class bv extends op{constructor(){super({id:bv.ID,title:{value:bv.LABEL,original:bv.DESC},label:bv.LABEL,alias:bv.DESC,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:Wc.Alt|Wc.Shift|Xn.PageUp}}),this.editorService=yt.resolve(Md)}run(){var e;(e=this.editorService.editorInstance)===null||e===void 0||e.getAction(St.ACTION_QUICK_COPY_LINE_UP).run()}}bv.ID=St.ACTION_QUICK_COPY_LINE_UP;bv.LABEL=Kt("menu.copyLineUp","Copy Line Up");bv.DESC="Copy Line Up";class Cv extends op{constructor(){super({id:Cv.ID,title:{value:Cv.LABEL,original:Cv.DESC},label:Cv.LABEL,alias:Cv.DESC,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:Wc.CtrlCmd|Xn.KeyZ}}),this.editorService=yt.resolve(Md)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;if(i&&this.isTextdom(i)&&!i.className.includes("monaco"))document.execCommand("undo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),xd.getModel(Lx.parse(a.id.toString())).undo()}}}}}Cv.ID=St.ACTION_QUICK_UNDO;Cv.LABEL=Kt("menu.undo","Undo");Cv.DESC="Undo";class yv extends op{constructor(){super({id:yv.ID,title:{value:yv.LABEL,original:yv.DESC},label:yv.LABEL,alias:yv.DESC,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:Wc.CtrlCmd|Wc.Shift|Xn.KeyZ}}),this.editorService=yt.resolve(Md)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const i=t[0]||document.activeElement;if(i&&this.isTextdom(i)&&!i.className.includes("monaco"))document.execCommand("redo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),xd.getModel(Lx.parse(a.id.toString())).redo()}}}}}yv.ID=St.ACTION_QUICK_REDO;yv.LABEL=Kt("menu.redo","Redo");yv.DESC="Redo";class wv extends op{constructor(){super({id:wv.ID,title:{value:wv.LABEL,original:wv.DESC},label:wv.LABEL,alias:wv.DESC,f1:!0,keybinding:{when:void 0,weight:$f.WorkbenchContrib,primary:Wc.CtrlCmd|Xn.KeyN}}),this.folderTreeController=yt.resolve(jx)}run(){var e,t;(t=(e=this.folderTreeController).createTreeNode)===null||t===void 0||t.call(e,Iu.File)}}wv.ID=St.ACTION_QUICK_CREATE_FILE;wv.LABEL=Kt("menu.newFile","New File");wv.DESC="New File";var eje=globalThis&&globalThis.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tje=globalThis&&globalThis.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let IU=class extends Mu{constructor(){super(),this.extensionService=yt.resolve(t2),this.builtinService=yt.resolve(wa)}initView(){const{quickAcessViewAction:e,quickSelectColorThemeAction:t,quickAccessSettingsAction:n,quickSelectLocaleAction:i,quickTogglePanelAction:o,quickSelectAllAction:s,quickCopyLineUpAction:a,quickUndoAction:l,quickRedoAction:u,quickCreateFileAction:d}=this.builtinService.getModules();[[e,X2],[t,EC],[n,Yw],[i,Zw],[Y2,lm],[o,um],[s,vv],[a,bv],[l,Cv],[u,yv],[d,wv]].forEach(([h,p])=>{h&&this.extensionService.registerAction(p)})}};IU=eje([Ur(),tje("design:paramtypes",[])],IU);const pE=Ri(ihe),nje=Gt(pE,"container"),ije=Gt(pE,"normal"),rje=Gt(pE,"global"),n3=Gt(pE,"item"),oje=li(n3,"checked"),sje=li(n3,"disabled"),aje=Gt(pE,"label"),lje=Gt(pE,"indicator");function She(r){const{checked:e=!1,disabled:t=!1,title:n="",data:i={},render:o,icon:s,id:a,onClick:l,contextMenu:u=[],className:d,onContextMenuClick:h}=r,_=i2({render:()=>me.createElement(Rc,{onClick:C,role:"menu",data:u.map(T=>{if(T.id){const k=nm.queryGlobalKeybinding(T.id.toString());k&&(T.keybinding=nm.convertSimpleKeybindingToString(k))}return T})})}),C=(T,k)=>{h==null||h(T,k),_==null||_.hide()},S=function(T){l&&l(r.id,r),u.length>0&&(_==null||_.show({x:T.pageX,y:T.pageY}))},x=me.createElement(go,{type:s,className:aje,title:n},(o==null?void 0:o())||null);return me.createElement("li",{id:a.toString(),onClick:S,className:oi(d,n3,e?oje:"",t?sje:""),"data-id":i.id},x,e?me.createElement("div",{className:lje}):null)}function Ehe(r){const{data:e=[],contextMenu:t=[],selected:n,onClick:i,onChange:o,onContextMenuClick:s}=r,a=(S,x)=>{i&&i(S,x),o&&x.type!=="global"&&o(n,S)},l=e.filter(S=>S.type!=="global"&&!S.hidden),u=e.filter(S=>S.type==="global"&&!S.hidden),d=(S,x)=>me.createElement(She,Object.assign({key:S.id},S,{onContextMenuClick:s,onClick:a,"data-index":x,checked:n===S.id})),p=i2({render:()=>me.createElement(Rc,{role:"menu",onClick:_,data:t})}),_=De.useCallback((S,x)=>{s==null||s(S,x),p==null||p.hide()},[t]),C=S=>{if(S.preventDefault(),S.stopPropagation(),!p)return;const T=document.elementsFromPoint(S.pageX,S.pageY).find(k=>k.classList.contains(n3));if(T){const k=T.getBoundingClientRect(),M=t.concat(),W=t.find(F=>F.id===(T==null?void 0:T.id));W&&M.unshift({id:T.id,icon:"check",name:W.name},{type:"divider"}),p.show({x:k.x+k.width/2,y:k.y+k.height},()=>me.createElement(Rc,{role:"menu",onClick:_,data:M}))}else p.show({x:S.pageX,y:S.pageY})};return me.createElement("div",{className:pE,onContextMenu:C,id:ihe},me.createElement("div",{className:nje},me.createElement(cD,{className:ije},me.createElement("ul",null,l.map(d))),me.createElement("ul",{className:rje},u.map(d))))}const uje=yt.resolve(qv),cje=yt.resolve(IP),dje=Hc(uje,Ehe,cje),i3=Ri("statusBar"),hje=Gt(i3,"left-items"),fje=Gt(i3,"right-items"),gje=Gt(i3,"item");function pje(r,e){return r.sortIndex!==void 0&&e.sortIndex!==void 0?r.sortIndex-e.sortIndex:0}var mje=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};function Lhe(r){const{className:e,onClick:t,id:n,name:i,data:o,render:s,style:a,role:l,title:u}=r,d=mje(r,["className","onClick","id","name","data","render","style","role","title"]),h=oi(gje,e),p={onClick:function(C){t==null||t(C,r)}},_=Xw(d);return me.createElement("div",Object.assign({className:h,style:a,role:l,title:u,id:n.toString()},_),me.createElement("a",Object.assign({tabIndex:-1,title:i},p),s?s(r):i))}function xhe(r){const{leftItems:e=[],contextMenu:t=[],onContextMenuClick:n,onClick:i,rightItems:o=[]}=r;let s;const a=De.useCallback((d,h)=>{n==null||n(d,h),s==null||s.dispose()},[t]),l=()=>me.createElement(Rc,{role:"menu",onClick:a,data:t});De.useEffect(()=>(t.length>0&&(s=BP({anchor:DL(`#${ite}`),render:l})),function(){s==null||s.dispose()}));const u=d=>d.sort(pje).map(h=>me.createElement(Lhe,Object.assign({key:h.id},h,{onClick:OU(h.onClick,i)})));return me.createElement("div",{className:i3,id:ite},me.createElement("div",{className:hje},u(e)),me.createElement("div",{className:fje},u(o)))}const _je=yt.resolve(Kv),vje=yt.resolve(NP),bje=Hc(_je,xhe,vje),r3=Ri("panel"),Cje=Gt(r3,"header"),yje=Gt(r3,"toolbar"),wje=Gt(r3,"container");function Dhe(r){var e;const{data:t,current:n,toolbox:i,onTabChange:o,onToolbarClick:s,onClose:a}=r;let l=i||[];n&&n.toolbox&&(l=n.toolbox.concat(l));const u=typeof(n==null?void 0:n.renderPane)=="function"?(e=n==null?void 0:n.renderPane)===null||e===void 0?void 0:e.call(n,n):n==null?void 0:n.renderPane,d=t==null?void 0:t.sort((h,p)=>h.sortIndex&&p.sortIndex?h.sortIndex-p.sortIndex:0);return me.createElement("div",{className:r3},me.createElement("div",{className:Cje},me.createElement(yj,{activeTab:n==null?void 0:n.id,data:d,onSelectTab:o,onCloseTab:a}),me.createElement(s2,{className:yje,data:l,onClick:s})),me.createElement("div",{className:wje,tabIndex:0},u))}const Sje=yt.resolve(zS),Eje=yt.resolve(TP),Lje=Hc(Sje,Dhe,Eje),Ihe=Ri("auxiliaryBar"),xje=Gt(Ihe,"container"),khe=Gt(Ihe,"tabs"),The=Gt(khe,"tab"),Dje=li(The,"active");function Ije({children:r}){return me.createElement("div",{className:xje},r)}function kje({mode:r,data:e,current:t,onClick:n}){return r==="default"?null:me.createElement("ul",{className:khe},e==null?void 0:e.map(i=>me.createElement("li",{key:i.key,className:oi(The,t===i.key&&Dje),onClick:()=>n==null?void 0:n(i.key)},i.title)))}const Nhe=yt.resolve(Hx),Tje=yt.resolve(kP),Nje=Hc(Nhe,Ije),Aje=Hc(Nhe,kje,Tje),Oje=Ri("mainBench"),o3=Ri("workbench"),Rje=Ri("compositeBar"),Mje=oi(PP,lne()),Pje=li(o3,"with-horizontal-menuBar"),Fje=li(o3,"with-hidden-statusBar"),Bje=Gt(o3,"display-activityBar"),Wje=yt.resolve(AP),Vje=yt.resolve(Mh);function Ahe(r){const{activityBar:e,auxiliaryBar:t,menuBar:n,panel:i,sidebar:o,statusBar:s,onPaneSizeChange:a,onWorkbenchDidMount:l,onHorizontalPaneSizeChange:u,splitPanePos:d,horizontalSplitPanePos:h}=r,p=()=>i.hidden?["100%",0]:i.panelMaximized?[0,"100%"]:h,_=()=>!o.hidden&&!t.hidden?d:o.hidden?t.hidden?[0,"100%",0]:[0,"auto",d[2]]:[d[0],"auto",0],C=()=>!o.hidden&&!t.hidden?!0:o.hidden?t.hidden?!1:[!1,!0]:[!0,!1],S=F=>{const Q=[];Q[0]=o.hidden?Number(d[0]):F[0],Q[2]=t.hidden?Number(d[2]):F[2],Q[1]=F.reduce((z,$)=>z+$,0)-Q[0]-Q[2],a==null||a(Q)},x=!n.hidden&&n.mode===Ac.vertical,T=!n.hidden&&n.mode===Ac.horizontal,k=T?Pje:null,M=s.hidden?Fje:null,W=oi(o3,k,M);return De.useEffect(()=>{l==null||l()},[]),me.createElement("div",{id:wq,className:Mje,tabIndex:0},me.createElement("div",{className:W},me.createElement(zk,{visible:T},me.createElement(Gte,{mode:Ac.horizontal})),me.createElement("div",{className:Oje},me.createElement("div",{className:Rje},me.createElement(zk,{visible:x},me.createElement(Gte,{mode:Ac.vertical})),me.createElement(zk,{visible:!e.hidden,className:Bje},me.createElement(dje,null))),me.createElement(IT,{sizes:_(),split:"vertical",showSashes:C(),onChange:S},me.createElement(Rb,{minSize:170,maxSize:"80%"},me.createElement(xze,null)),me.createElement(IT,{sizes:p(),showSashes:!i.hidden&&!i.panelMaximized,allowResize:[!0,!1],split:"horizontal",onChange:u},me.createElement(Rb,{minSize:"10%",maxSize:"80%"},me.createElement(mze,null)),me.createElement(Lje,null)),me.createElement(Rb,{minSize:100,maxSize:"80%"},me.createElement(Nje,null))),me.createElement(Aje,null))),me.createElement(zk,{visible:!s.hidden},me.createElement(bje,null)))}const Hje=Hc(Vje,Ahe,Wje),Uje=yt.resolve(Sm),zje=yt.resolve(Mh),$je=yt.resolve(qv),jje=yt.resolve(Hx),qje=yt.resolve(e1),Kje=yt.resolve(Ux),Gje=yt.resolve(LP),Yje=yt.resolve(JN),Zje=yt.resolve(jv),Xje=yt.resolve(qC),Qje=yt.resolve(Md),Jje=yt.resolve(Kv),eqe=yt.resolve(zS),tqe=yt.resolve(zx),nqe=yt.resolve(e2),iqe=yt.resolve(VS),rqe=yt.resolve($S),oqe=yt.resolve(wa),sqe=yt.resolve(t2),aqe=yt.resolve($v),jn=Object.freeze(Object.defineProperty({__proto__:null,ActivityBar:Ehe,ActivityBarItem:She,get ActivityBarService(){return qv},get AuxiliaryBarService(){return Hx},BuiltInColorTheme:Yk,get BuiltinService(){return wa},get ColorThemeService(){return VS},DEFAULT_THEME_CLASS_NAME:gR,Editor:xq,EditorGroup:uhe,get EditorService(){return Md},get EditorTreeService(){return LP},get ExplorerService(){return e1},get ExtensionService(){return t2},get FolderTreeService(){return Ux},get LayoutService(){return Mh},get LocaleService(){return Sm},MenuBar:mhe,get MenuBarService(){return qC},get NotificationService(){return zx},Panel:Dhe,get PanelService(){return zS},get ProblemsService(){return e2},get SearchService(){return JN},get SettingsService(){return $S},Sidebar:fhe,get SidebarService(){return jv},StatusBar:xhe,get StatusBarService(){return Kv},StatusItem:Lhe,Workbench:Ahe,activityBar:$je,auxiliaryBar:jje,builtin:oqe,colorTheme:iqe,component:UMe,editor:Qje,editorTree:Gje,event:Rfe,explorer:qje,extension:sqe,folderTree:Kje,i18n:Uje,layout:zje,localize:Kt,menuBar:Xje,model:OHe,monaco:jMe,monacoService:aqe,notification:tqe,panel:eqe,problems:nqe,react:Pfe,search:Yje,settings:rqe,sidebar:Zje,statusBar:Jje},Symbol.toStringTag,{value:"Module"})),lqe={id:"ExtendsFolderTree",name:"Extends FolderTree",activate(){jn.folderTree.onRename(r=>{jn.folderTree.update({id:r,isEditable:!0})}),jn.folderTree.onUpdateFileName(r=>{const{id:e,name:t,location:n}=r;if(t){const i=(n==null?void 0:n.split("/"))||[];i[i.length-1]=t;const o=i.join("/");jn.folderTree.update(Object.assign(Object.assign({},r),{id:e,location:o,isEditable:!1}));const s=jn.editor.getGroupIdByTab(e.toString());if(!!s||s===0){const l=jn.editor.getTabById(e.toString(),s),u={id:e.toString(),name:t},d=l==null?void 0:l.data;d&&d.path&&(u.data=Object.assign(Object.assign({},d),{path:o})),jn.editor.updateTab(u)}}else{const i=jn.folderTree.get(e);i!=null&&i.name?jn.folderTree.update({id:e,isEditable:!1}):jn.folderTree.remove(e)}}),jn.folderTree.onExpandKeys(r=>{jn.folderTree.setExpandKeys(r)})},dispose(){}},uqe={id:"ExtendsActivityBar",name:"Extend The Default ActivityBar",activate(r){jn.activityBar.onChange((e,t)=>{if(t!==e){jn.activityBar.setActive(t),jn.sidebar.setActive(t);const{sidebar:n}=jn.layout.getState();n.hidden&&r.executeCommand(lm.ID,t)}else r.executeCommand(lm.ID,t)})},dispose(){}},cqe={id:"ExtendsPanel",name:"Extends Panel",activate(r){jn.panel.onTabClose(e=>{const{data:t=[],current:n}=jn.panel.getState();if((n==null?void 0:n.id)===e){const i=t.findIndex(a=>a.id===e),o=i===t.length-1?t.length-2:i+1,s=t[o];s&&jn.panel.open(s)}jn.panel.remove(e)})},dispose(){}},dqe=function(r){jn.explorer.removePanel(r.id)},hqe={id:"ExtendsExplorer",name:"Extends Explorer",activate(){jn.explorer.onRemovePanel(dqe)},dispose(){}},fqe={id:"ExtendsEditorTree",name:"Extends Editor Tree",dispose(){},activate(){jn.editorTree.onSelect((r,e)=>{jn.editor.setActive(e,r)}),jn.editorTree.onClose((r,e)=>{jn.editor.closeTab(r,e)}),jn.editorTree.onCloseOthers((r,e)=>{jn.editor.closeOther(r,e)}),jn.editorTree.onCloseAll(r=>{if(r)jn.editor.closeAll(r);else{const{groups:e}=jn.editor.getState();e==null||e.forEach(t=>{jn.editor.closeAll(t.id)})}})}},gqe="theme-defaults",pqe="%displayName%",mqe="%description%",_qe=["Themes"],vqe="1.0.0",bqe="vscode",Cqe="MIT",yqe={vscode:"*"},wqe={themes:[{id:"Default Dark+",label:"Dark+ (default dark)",uiTheme:"vs-dark",path:"./themes/dark_plus.json"},{id:"Default Light+",label:"Light+ (default light)",uiTheme:"vs",path:"./themes/light_plus.json"},{id:"Visual Studio Dark",label:"Dark (Visual Studio)",uiTheme:"vs-dark",path:"./themes/dark_vs.json"},{id:"Visual Studio Light",label:"Light (Visual Studio)",uiTheme:"vs",path:"./themes/light_vs.json"},{id:"Default High Contrast",label:"High Contrast",uiTheme:"hc-black",path:"./themes/hc_black.json"}],iconThemes:[{id:"vs-minimal",label:"Minimal (Visual Studio Code)",path:"./fileicons/vs_minimal-icon-theme.json"}]},Sqe={name:gqe,displayName:pqe,description:mqe,categories:_qe,version:vqe,publisher:bqe,license:Cqe,engines:yqe,contributes:wqe},Eqe="vscode://schemas/color-theme",Lqe="Dark Default Colors",xqe={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#1E1E1E","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroupHeader.tabsBackground":"#252526","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","icon.foreground":"#C5C5C5","input.placeholderForeground":"#A6A6A6","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#094771","list.dropBackground":"#383B3D","list.focusOutline":"#007FD4","list.hoverBackground":"#2A2D2E","list.inactiveSelectionBackground":"#37373D","menu.background":"#252526","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.separatorBackground":"#BBBBBB","minimapSlider.activeBackground":"#bfbfbf66","minimapSlider.background":"#79797980","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#393939","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#e7e7e799","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","sash.hoverBorder":"#007FD4","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","sideBarTitle.foreground":"#BBBBBB","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#1E1E1E","tab.activeForeground":"#fff","tab.border":"#252526","tab.inactiveBackground":"#2d2d2d","tab.inactiveForeground":"#ffffff80","tree.indentGuidesStroke":"#585858"},Dqe=!0,Iqe={$schema:Eqe,name:Lqe,colors:xqe,semanticHighlighting:Dqe},kqe="vscode://schemas/color-theme",Tqe="Light Default Colors",Nqe={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#FFFFFF","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","icon.foreground":"#424242","input.placeholderForeground":"#767676","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#0060C0","list.focusOutline":"#0090F1","list.hoverBackground":"#E8E8E8","list.inactiveSelectionBackground":"#E4E6F1","menu.selectionBackground":"#0060C0","menu.separatorBackground":"#888888","minimapSlider.activeBackground":"#00000099","minimapSlider.background":"#64646480","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#fff","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242bf","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#BF8803","sash.hoverBorder":"#0090F1","searchEditor.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#61616130","sideBarTitle.foreground":"#6F6F6F","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#fffffe","tab.activeForeground":"#333333","tab.border":"#f3f3f3","tab.inactiveBackground":"#ececec","tab.inactiveForeground":"#333333b3","tree.indentGuidesStroke":"#a9a9a9"},Aqe=!0,Oqe={$schema:kqe,name:Tqe,colors:Nqe,semanticHighlighting:Aqe},Rqe="vscode://schemas/color-theme",Mqe="High Contrast Default Colors",Pqe={"editor.background":"#000000","editor.foreground":"#FFFFFF","editorIndentGuide.activeBackground":"#FFFFFF","editorIndentGuide.background":"#FFFFFF","sash.hoverBorder":"#F38518","sideBarTitle.foreground":"#FFFFFF","statusBarItem.remoteBackground":"#00000000","tree.indentGuidesStroke":"#a9a9a9"},Fqe=[{settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#7ca668"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#b46695"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold"}},{scope:"markup.heading",settings:{foreground:"#6796e6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{name:"brackets of XML/HTML tags",scope:["punctuation.definition.tag"],settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#ffffff"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#d4d4d4"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:"support.function.git-rebase",settings:{foreground:"#d4d4d4"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"coloring of the TS this",scope:"variable.language.this",settings:{foreground:"#569cd6"}}],Bqe=!0,Wqe={$schema:Rqe,name:Mqe,colors:Pqe,settings:Fqe,semanticHighlighting:Bqe},Vqe="vscode://schemas/color-theme",Hqe="Dark+ (default dark)",Uqe="./dark_vs.json",zqe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#51B6C4"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}],$qe={$schema:Vqe,name:Hqe,include:Uqe,tokenColors:zqe},jqe="vscode://schemas/color-theme",qqe="Dark (Visual Studio)",Kqe="./dark_defaults.json",Gqe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}}],Yqe={$schema:jqe,name:qqe,include:Kqe,tokenColors:Gqe},Zqe="vscode://schemas/color-theme",Xqe="Light+ (default light)",Qqe="./light_vs.json",Jqe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#267f99"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#001080"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#328267"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#ff0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#ff0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}}],eKe={$schema:Zqe,name:Xqe,include:Qqe,tokenColors:Jqe},tKe="vscode://schemas/color-theme",nKe="Light (Visual Studio)",iKe="./light_defaults.json",rKe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#008000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#098658"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}}],oKe={$schema:tKe,name:nKe,include:iKe,tokenColors:rKe},sKe="vscode://schemas/color-theme",aKe="Dark High Contrast",lKe="./hc_black_defaults.json",uKe={"editor.selectionBackground":"#FFFFFF","selection.background":"#008000","statusBarItem.remoteBackground":"#00000000"},cKe=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.name.scope-resolution","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"HC Search Editor context line override",scope:"meta.resultLinePrefix.contextLinePrefix.search",settings:{foreground:"#CBEDCB"}}],dKe={$schema:sKe,name:aKe,include:lKe,colors:uKe,tokenColors:cKe};var B6;const Ohe=Sqe,Rhe=Iqe,Mhe=Oqe,hKe=Wqe,Phe=$qe;Object.assign(Phe,Rhe);const Fhe=Yqe;Object.assign(Fhe,Rhe);const Bhe=eKe;Object.assign(Bhe,Mhe);const Whe=oKe;Object.assign(Whe,Mhe);const Vhe=dKe;Object.assign(Vhe,hKe);const a0=((B6=Ohe.contributes)===null||B6===void 0?void 0:B6.themes)||[],fKe=a0[0],gKe=a0[1],pKe=a0[2],mKe=a0[3],_Ke=a0[4];a0[0]=Object.assign({},fKe,Phe);a0[1]=Object.assign({},gKe,Bhe);a0[2]=Object.assign({},pKe,Fhe);a0[3]=Object.assign({},mKe,Whe);a0[4]=Object.assign({},_Ke,Vhe);const vKe="theme-monokai",bKe="%displayName%",CKe="%description%",yKe="1.0.0",wKe="vscode",SKe="MIT",EKe={vscode:"*"},LKe={themes:[{id:"Monokai",label:"Monokai",uiTheme:"vs-dark",path:"./themes/monokai-color-theme.json"}]},xKe={name:vKe,displayName:bKe,description:CKe,version:yKe,publisher:wKe,license:SKe,engines:EKe,contributes:LKe},DKe="dark",IKe={"dropdown.background":"#414339","list.activeSelectionBackground":"#75715E","quickInput.list.focusBackground":"#414339","dropdown.listBackground":"#1e1f1c","list.inactiveSelectionBackground":"#414339","list.hoverBackground":"#3e3d32","list.dropBackground":"#414339","list.highlightForeground":"#f8f8f2","button.background":"#75715E","editor.background":"#272822","editor.foreground":"#f8f8f2","selection.background":"#ccccc7","editor.selectionHighlightBackground":"#575b6180","editor.selectionBackground":"#878b9180","minimap.selectionHighlight":"#878b9180","minimap.background":"#272822","editor.wordHighlightBackground":"#4a4a7680","editor.wordHighlightStrongBackground":"#6a6a9680","editor.lineHighlightBackground":"#3e3d32","editorLineNumber.activeForeground":"#c2c2bf","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#464741","editorIndentGuide.background":"#464741","editorIndentGuide.activeBackground":"#767771","editorGroupHeader.tabsBackground":"#1e1f1c","editorGroup.dropBackground":"#41433980","tab.inactiveBackground":"#34352f","tab.border":"#1e1f1c","tab.inactiveForeground":"#ccccc7","tab.lastPinnedBorder":"#414339","widget.shadow":"#00000098","progressBar.background":"#75715E","badge.background":"#75715E","badge.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","panelTitle.activeForeground":"#f8f8f2","panelTitle.activeBorder":"#75715E","panelTitle.inactiveForeground":"#75715E","panel.border":"#414339","settings.focusedRowBackground":"#4143395A","titleBar.activeBackground":"#1e1f1c","statusBar.background":"#414339","statusBar.noFolderBackground":"#414339","statusBar.debuggingBackground":"#75715E","statusBarItem.remoteBackground":"#AC6218","activityBar.background":"#272822","activityBar.foreground":"#f8f8f2","sideBar.background":"#1e1f1c","sideBarSectionHeader.background":"#272822","menu.background":"#1e1f1c","menu.foreground":"#cccccc","pickerGroup.foreground":"#75715E","input.background":"#414339","inputOption.activeBorder":"#75715E",focusBorder:"#75715E","editorWidget.background":"#1e1f1c","debugToolBar.background":"#1e1f1c","diffEditor.insertedTextBackground":"#4b661680","diffEditor.removedTextBackground":"#90274A70","inputValidation.errorBackground":"#90274A","inputValidation.errorBorder":"#f92672","inputValidation.warningBackground":"#848528","inputValidation.warningBorder":"#e2e22e","inputValidation.infoBackground":"#546190","inputValidation.infoBorder":"#819aff","editorHoverWidget.background":"#414339","editorHoverWidget.border":"#75715E","editorSuggestWidget.background":"#272822","editorSuggestWidget.border":"#75715E","editorGroup.border":"#34352f","peekView.border":"#75715E","peekViewEditor.background":"#272822","peekViewResult.background":"#1e1f1c","peekViewTitle.background":"#1e1f1c","peekViewResult.selectionBackground":"#414339","peekViewResult.matchHighlightBackground":"#75715E","peekViewEditor.matchHighlightBackground":"#75715E","terminal.ansiBlack":"#333333","terminal.ansiRed":"#C4265E","terminal.ansiGreen":"#86B42B","terminal.ansiYellow":"#B3B42B","terminal.ansiBlue":"#6A7EC8","terminal.ansiMagenta":"#8C6BC8","terminal.ansiCyan":"#56ADBC","terminal.ansiWhite":"#e3e3dd","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightRed":"#f92672","terminal.ansiBrightGreen":"#A6E22E","terminal.ansiBrightYellow":"#e2e22e","terminal.ansiBrightBlue":"#819aff","terminal.ansiBrightMagenta":"#AE81FF","terminal.ansiBrightCyan":"#66D9EF","terminal.ansiBrightWhite":"#f8f8f2"},kKe=[{settings:{foreground:"#F8F8F2"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#F8F8F2"}},{name:"Comment",scope:"comment",settings:{foreground:"#88846f"}},{name:"String",scope:"string",settings:{foreground:"#E6DB74"}},{name:"Template Definition",scope:["punctuation.definition.template-expression","punctuation.section.embedded"],settings:{foreground:"#F92672"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#F8F8F2"}},{name:"Number",scope:"constant.numeric",settings:{foreground:"#AE81FF"}},{name:"Built-in constant",scope:"constant.language",settings:{foreground:"#AE81FF"}},{name:"User-defined constant",scope:"constant.character, constant.other",settings:{foreground:"#AE81FF"}},{name:"Variable",scope:"variable",settings:{fontStyle:"",foreground:"#F8F8F2"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#F92672"}},{name:"Storage",scope:"storage",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Storage type",scope:"storage.type",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Class name",scope:"entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution",settings:{fontStyle:"underline",foreground:"#A6E22E"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#A6E22E"}},{name:"Function name",scope:"entity.name.function",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Function argument",scope:"variable.parameter",settings:{fontStyle:"italic",foreground:"#FD971F"}},{name:"Tag name",scope:"entity.name.tag",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Library function",scope:"support.function",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library constant",scope:"support.constant",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library class/type",scope:"support.type, support.class",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Library variable",scope:"support.other.variable",settings:{fontStyle:""}},{name:"Invalid",scope:"invalid",settings:{fontStyle:"",foreground:"#F44747"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#F44747"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"constant.numeric.line-number.find-in-files - match",settings:{foreground:"#AE81FFA0"}},{scope:"entity.name.filename.find-in-files",settings:{foreground:"#E6DB74"}},{name:"Markup Quote",scope:"markup.quote",settings:{foreground:"#F92672"}},{name:"Markup Lists",scope:"markup.list",settings:{foreground:"#E6DB74"}},{name:"Markup Styling",scope:"markup.bold, markup.italic",settings:{foreground:"#66D9EF"}},{name:"Markup Inline",scope:"markup.inline.raw",settings:{fontStyle:"",foreground:"#FD971F"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#A6E22E"}},{name:"Markup Setext Header",scope:"markup.heading.setext",settings:{foreground:"#A6E22E",fontStyle:"bold"}},{name:"Markup Headings",scope:"markup.heading.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Quote",scope:"markup.quote.markdown",settings:{fontStyle:"italic",foreground:"#75715E"}},{name:"Markdown Bold",scope:"markup.bold.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Link Title/Description",scope:"string.other.link.title.markdown,string.other.link.description.markdown",settings:{foreground:"#AE81FF"}},{name:"Markdown Underline Link/Image",scope:"markup.underline.link.markdown,markup.underline.link.image.markdown",settings:{foreground:"#E6DB74"}},{name:"Markdown Emphasis",scope:"markup.italic.markdown",settings:{fontStyle:"italic"}},{name:"Markdown Punctuation Definition Link",scope:"markup.list.unnumbered.markdown, markup.list.numbered.markdown",settings:{foreground:"#f8f8f2"}},{name:"Markdown List Punctuation",scope:["punctuation.definition.list.begin.markdown"],settings:{foreground:"#A6E22E"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#FD971F"}}],TKe=!0,NKe={type:DKe,colors:IKe,tokenColors:kKe,semanticHighlighting:TKe};var W6;const Hhe=xKe,AKe=NKe,Uhe=((W6=Hhe.contributes)===null||W6===void 0?void 0:W6.themes)||[],OKe=Uhe[0];Uhe[0]=Object.assign({},OKe,AKe);const RKe="material-palenight-theme",MKe="whizkydee",PKe="Olaolu Olawuyi <mrolaolu@gmail.com> (http://twitter.com/mrolaolu)",FKe="Palenight Theme",BKe="2.0.1",WKe="An elegant and juicy material-inspired theme for Visual Studio Code.",VKe={color:"#31364A",theme:"dark"},HKe="icon.png",UKe=["material theme","palenight","material","purple","dark"],zKe={url:"https://github.com/whizkydee/vscode-palenight-theme",type:"git"},$Ke={url:"https://github.com/whizkydee/vscode-palenight-theme/issues"},jKe="MIT",qKe={vscode:"^1.12.0"},KKe={start:"nodemon --exec vsce package",build:"nodemon --watch src src"},GKe=["Themes","Other"],YKe={themes:[{id:"Palenight Mild Contrast",label:"Palenight (Mild Contrast)",uiTheme:"vs-dark",path:"./themes/palenight-mild-contrast.json"}]},ZKe={nodemon:"^1.12.1",vsce:"^1.31.0"},XKe={publisherDisplayName:"Olaolu Olawuyi"},QKe={name:RKe,publisher:MKe,author:PKe,displayName:FKe,version:BKe,description:WKe,galleryBanner:VKe,icon:HKe,keywords:UKe,repository:zKe,bugs:$Ke,license:jKe,engines:qKe,scripts:KKe,categories:GKe,contributes:YKe,devDependencies:ZKe,__metadata:XKe},JKe="Palenight (Mild Contrast)",eGe="Olaolu Olawuyi",tGe=["Olaolu Olawuyi <mrolaolu@gmail.com>"],nGe="dark",iGe="palenight-mild-contrast",rGe={contrastActiveBorder:null,contrastBorder:"#2C2F40",focusBorder:"#2C2F40",foreground:"#ffffff","widget.shadow":"#232635","selection.background":"#3C435E",descriptionForeground:null,errorForeground:"#EF5350","button.background":"#7e57c2cc","button.foreground":"#ffffffcc","button.hoverBackground":"#7e57c2","dropdown.background":"#292D3E","dropdown.border":"#7e57c2","dropdown.foreground":"#ffffffcc","input.background":"#414863","input.border":"#7e57c2","input.foreground":"#ffffffcc","input.placeholderForeground":"#ffffffcc","inputOption.activeBorder":"#ffffffcc","inputValidation.errorBackground":"#ef5350f2","inputValidation.errorBorder":"#EF5350","inputValidation.infoBackground":"#64b5f6f2","inputValidation.infoBorder":"#64B5F6","inputValidation.warningBackground":"#ffca28f2","inputValidation.warningBorder":"#FFCA28","scrollbar.shadow":"#292D3E00","scrollbarSlider.activeBackground":"#694CA4cc","scrollbarSlider.background":"#694CA466","scrollbarSlider.hoverBackground":"#694CA4cc","badge.background":"#7e57c2","badge.foreground":"#ffffff","progress.background":"#7e57c2","list.activeSelectionBackground":"#7e57c2","list.activeSelectionForeground":"#ffffff","list.dropBackground":"#2E3245","list.focusBackground":"#0000002e","list.focusForeground":"#ffffff","list.highlightForeground":"#ffffff","list.hoverBackground":"#0000001a","list.hoverForeground":"#ffffff","list.inactiveSelectionBackground":"#929ac90d","list.inactiveSelectionForeground":"#929ac9","activityBar.background":"#242839","activityBar.dropBackground":"#7e57c2e3","activityBar.foreground":"#eeffff","activityBar.border":"#2E3243","activityBarBadge.background":"#7e57c2","activityBarBadge.foreground":"#ffffff","sideBar.background":"#25293A","sideBar.foreground":"#6C739A","sideBar.border":"#2C2F40","sideBarTitle.foreground":"#eeffff","sideBarSectionHeader.background":"#25293A","sideBarSectionHeader.foreground":"#eeffff","editorGroup.background":"#32374C","editorGroup.border":"#2E3245","editorGroup.dropBackground":"#7e57c273","editorGroupHeader.noTabsBackground":"#32374C","editorGroupHeader.tabsBackground":"#31364a","editorGroupHeader.tabsBorder":"#2C3041","tab.activeBackground":"#25293A","tab.activeForeground":"#eeffff","tab.border":"#272B3B","tab.activeBorder":"#2C3041","tab.unfocusedActiveBorder":"#2C3041","tab.inactiveBackground":"#31364A","tab.inactiveForeground":"#929ac9","tab.unfocusedActiveForeground":null,"tab.unfocusedInactiveForeground":null,"editor.background":"#292D3E","editor.foreground":"#BFC7D5","editorLineNumber.foreground":"#4c5374","editorLineNumber.activeForeground":"#eeffff","editorCursor.foreground":"#7e57c2","editorCursor.background":null,"editor.selectionBackground":"#7580B850","editor.selectionHighlightBackground":"#383D51","editor.inactiveSelectionBackground":"#7e57c25a","editor.wordHighlightBackground":"#32374D","editor.wordHighlightStrongBackground":"#2E3250","editor.findMatchBackground":"#7e57c25a","editor.findMatchHighlightBackground":"#2E3248","editor.findRangeHighlightBackground":null,"editor.hoverHighlightBackground":"#7e57c25a","editor.lineHighlightBackground":"#0003","editor.lineHighlightBorder":null,"editorLink.activeForeground":null,"editor.rangeHighlightBackground":"#7e57c25a","editorWhitespace.foreground":null,"editorIndentGuide.background":"#4E557980","editorRuler.foreground":null,"editorCodeLens.foreground":"#FFCA28","editorBracketMatch.background":null,"editorBracketMatch.border":null,"editorOverviewRuler.currentContentForeground":"#7e57c2","editorOverviewRuler.incomingContentForeground":"#7e57c2","editorOverviewRuler.commonContentForeground":"#7e57c2","editorError.foreground":"#EF5350","editorError.border":null,"editorWarning.foreground":"#FFCA28","editorWarning.border":null,"editorGutter.background":null,"editorGutter.modifiedBackground":"#e2b93d","editorGutter.addedBackground":"#9CCC65","editorGutter.deletedBackground":"#EF5350","diffEditor.insertedTextBackground":"#99b76d23","diffEditor.removedTextBackground":"#ef535033","editorWidget.background":"#31364a","editorWidget.border":null,"editorSuggestWidget.background":"#2C3043","editorSuggestWidget.border":"#2B2F40","editorSuggestWidget.foreground":"#bfc7d5","editorSuggestWidget.highlightForeground":"#ffffff","editorSuggestWidget.selectedBackground":"#7e57c2","editorHoverWidget.background":"#292D3E","editorHoverWidget.border":"#7e57c2","debugExceptionWidget.background":"#292D3E","debugExceptionWidget.border":"#7e57c2","editorMarkerNavigation.background":"#31364a","editorMarkerNavigationError.background":"#EF5350","editorMarkerNavigationWarning.background":"#FFCA28","peekView.border":"#7e57c2","peekViewEditor.background":"#232635","peekViewEditor.matchHighlightBackground":"#7e57c25a","peekViewResult.background":"#2E3245","peekViewResult.fileForeground":"#eeffff","peekViewResult.lineForeground":"#eeffff","peekViewResult.matchHighlightBackground":"#7e57c25a","peekViewResult.selectionBackground":"#2E3250","peekViewResult.selectionForeground":"#eeffff","peekViewTitle.background":"#292D3E","peekViewTitleDescription.foreground":"#697098","peekViewTitleLabel.foreground":"#eeffff","merge.currentHeaderBackground":"#7e57c25a","merge.currentContentBackground":null,"merge.incomingHeaderBackground":"#7e57c25a","merge.incomingContentBackground":null,"merge.border":null,"panel.background":"#25293A","panel.border":"#2C2F40","panelTitle.activeBorder":"#7e57c2","panelTitle.activeForeground":"#eeffff","panelTitle.inactiveForeground":"#bfc7d580","statusBar.background":"#25293A","statusBar.foreground":"#676E95","statusBar.border":"#2C3041","statusBar.debuggingBackground":"#202431","statusBar.debuggingForeground":null,"statusBar.debuggingBorder":"#1F2330","statusBar.noFolderForeground":null,"statusBar.noFolderBackground":"#292D3E","statusBar.noFolderBorder":"#25293A","statusBarItem.activeBackground":"#202431","statusBarItem.hoverBackground":"#202431","statusBarItem.prominentBackground":"#202431","statusBarItem.prominentHoverBackground":"#202431","titleBar.activeBackground":"#25293A","titleBar.activeForeground":"#eeefff","titleBar.border":"#2C3041","titleBar.inactiveBackground":"#30364c","titleBar.inactiveForeground":null,"notifications.background":"#292D3E","notifications.foreground":"#ffffffcc","notificationLink.foreground":"#80CBC4","extensionButton.prominentForeground":"#ffffffcc","extensionButton.prominentBackground":"#7e57c2cc","extensionButton.prominentHoverBackground":"#7e57c2","pickerGroup.foreground":"#d1aaff","pickerGroup.border":"#2E3245","terminal.ansiWhite":"#ffffff","terminal.ansiBlack":"#676E95","terminal.ansiBlue":"#82AAFF","terminal.ansiCyan":"#89DDFF","terminal.ansiGreen":"#a9c77d","terminal.ansiMagenta":"#C792EA","terminal.ansiRed":"#ff5572","terminal.ansiYellow":"#FFCB6B","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightBlack":"#676E95","terminal.ansiBrightBlue":"#82AAFF","terminal.ansiBrightCyan":"#89DDFF","terminal.ansiBrightGreen":"#C3E88D","terminal.ansiBrightMagenta":"#C792EA","terminal.ansiBrightRed":"#ff5572","terminal.ansiBrightYellow":"#FFCB6B","debugToolBar.background":"#292D3E","welcomePage.buttonBackground":null,"welcomePage.buttonHoverBackground":null,"walkThrough.embeddedEditorBackground":"#232635","gitDecoration.modifiedResourceForeground":"#e2c08de6","gitDecoration.deletedResourceForeground":"#EF535090","gitDecoration.untrackedResourceForeground":"#a9c77dff","gitDecoration.ignoredResourceForeground":"#69709890","gitDecoration.conflictingResourceForeground":"#FFEB95CC","editorActiveLineNumber.foreground":"#eeffff","breadcrumb.foreground":"#6c739a","breadcrumb.focusForeground":"#bfc7d5","breadcrumb.activeSelectionForeground":"#eeffff","breadcrumbPicker.background":"#292D3E"},oGe=[{name:"Global settings",settings:{background:"#292D3E",foreground:"#bfc7d5"}},{name:"Comment",scope:"comment",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"String",scope:"string",settings:{foreground:"#C3E88D"}},{name:"String Quoted",scope:"string.quoted",settings:{foreground:"#C3E88D"}},{name:"String Unquoted",scope:"string.unquoted",settings:{foreground:"#bfc7d5"}},{name:"Support Constant Math",scope:"support.constant.math",settings:{foreground:"#ffcb6b"}},{name:"Number",scope:["constant.numeric","constant.character.numeric"],settings:{foreground:"#F78C6C"}},{name:"Built-in constant",scope:["constant.language","punctuation.definition.constant","variable.other.constant"],settings:{foreground:"#82AAFF"}},{name:"User-defined constant",scope:["constant.character","constant.other"],settings:{foreground:"#82AAFF"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#F78C6C"}},{name:"RegExp String",scope:["string.regexp","string.regexp keyword.other"],settings:{foreground:"#80CBC4"}},{name:"Comma in functions",scope:"meta.function punctuation.separator.comma",settings:{foreground:"#eeffff"}},{name:"Variable",scope:"variable",settings:{foreground:"#ffcb6b"}},{name:"Keyword",scope:["punctuation.accessor","keyword"],settings:{foreground:"#c792ea"}},{name:"Storage",scope:["storage","storage.type","meta.var.expr storage.type","storage.type.property.js","storage.type.property.ts","storage.type.property.tsx","meta.class meta.method.declaration meta.var.expr storage.type.js"],settings:{foreground:"#c792ea"}},{name:"Class name",scope:["entity.name.class","meta.class entity.name.type.class"],settings:{foreground:"#ffcb6b"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{foreground:"#a9c77d"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Function Parameters",scope:"variable.parameter",settings:{foreground:"#7986E7"}},{name:"Meta Tag",scope:["punctuation.definition.tag","meta.tag"],settings:{foreground:"#89DDFF"}},{name:"HTML Tag names",scope:["entity.name.tag support.class.component","meta.tag.other.html","meta.tag.other.js","meta.tag.other.tsx","entity.name.tag.tsx","entity.name.tag.js","entity.name.tag","meta.tag.js","meta.tag.tsx","meta.tag.html"],settings:{foreground:"#ff5572"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{foreground:"#ffcb6b"}},{name:"Entity Name Tag Custom",scope:"entity.name.tag.custom",settings:{foreground:"#ffcb6b"}},{name:"Library (function & constant)",scope:["support.function","support.constant"],settings:{foreground:"#82AAFF"}},{name:"Support Constant Property Value meta",scope:"support.constant.meta.property-value",settings:{foreground:"#89DDFF"}},{name:"Library class/type",scope:["support.type","support.class"],settings:{foreground:"#ffcb6b"}},{name:"Support Variable DOM",scope:"support.variable.dom",settings:{foreground:"#ffcb6b"}},{name:"Invalid",scope:"invalid",settings:{background:"#ff2c83",foreground:"#ffffff"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#ffffff",background:"#d3423e"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Relational",scope:"keyword.operator.relational",settings:{foreground:"#c792ea"}},{name:"Keyword Operator Assignment",scope:"keyword.operator.assignment",settings:{foreground:"#c792ea"}},{name:"Double-Slashed Comment",scope:"comment.line.double-slash",settings:{foreground:"#697098"}},{name:"Object",scope:"object",settings:{foreground:"#cdebf7"}},{name:"Null",scope:"constant.language.null",settings:{foreground:"#ff5874"}},{name:"Meta Brace",scope:"meta.brace",settings:{foreground:"#bfc7d5"}},{name:"Meta Delimiter Period",scope:"meta.delimiter.period",settings:{foreground:"#c792ea"}},{name:"Punctuation Definition String",scope:"punctuation.definition.string",settings:{foreground:"#d9f5dd"}},{name:"Boolean",scope:"constant.language.boolean",settings:{foreground:"#ff5874"}},{name:"Object Comma",scope:"object.comma",settings:{foreground:"#ffffff"}},{name:"Variable Parameter Function",scope:"variable.parameter.function",settings:{foreground:"#89DDFF"}},{name:"Support Type Property Name & entity name tags",scope:["support.type.vendored.property-name","support.constant.vendored.property-value","support.type.property-name","meta.property-list entity.name.tag"],settings:{foreground:"#80CBC4"}},{name:"Entity Name tag reference in stylesheets",scope:"meta.property-list entity.name.tag.reference",settings:{foreground:"#ff5572"}},{name:"Constant Other Color RGB Value Punctuation Definition Constant",scope:"constant.other.color.rgb-value punctuation.definition.constant",settings:{foreground:"#F78C6C"}},{name:"Constant Other Color",scope:"constant.other.color",settings:{foreground:"#FFEB95"}},{name:"Keyword Other Unit",scope:"keyword.other.unit",settings:{foreground:"#FFEB95"}},{name:"Meta Selector",scope:"meta.selector",settings:{foreground:"#c792ea"}},{name:"Entity Other Attribute Name Id",scope:"entity.other.attribute-name.id",settings:{foreground:"#FAD430"}},{name:"Meta Property Name",scope:"meta.property-name",settings:{foreground:"#80CBC4"}},{name:"Doctypes",scope:["entity.name.tag.doctype","meta.tag.sgml.doctype"],settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Punctuation Definition Parameters",scope:"punctuation.definition.parameters",settings:{foreground:"#d9f5dd"}},{name:"Keyword Control Operator",scope:"keyword.control.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Logical",scope:"keyword.operator.logical",settings:{foreground:"#c792ea"}},{name:"Variable Instances",scope:["variable.instance","variable.other.instance","variable.reaedwrite.instance","variable.other.readwrite.instance"],settings:{foreground:"#ff5572"}},{name:"Variable Property Other",scope:["variable.other.property","variable.other.object.property"],settings:{foreground:"#89DDFF"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Keyword Operator Comparison",scope:"keyword.operator.comparison",settings:{foreground:"#c792ea"}},{name:"Support Constant, `new` keyword, Special Method Keyword",scope:["support.constant","keyword.other.special-method","keyword.other.new"],settings:{foreground:"#89DDFF"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#89DDFF"}},{name:"Invalid Broken",scope:"invalid.broken",settings:{foreground:"#020e14",background:"#F78C6C"}},{name:"Invalid Unimplemented",scope:"invalid.unimplemented",settings:{background:"#8BD649",foreground:"#ffffff"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#ffffff",background:"#ec5f67"}},{name:"Language Variable",scope:"variable.language",settings:{foreground:"#ff5572"}},{name:"Support Variable Property",scope:"support.variable.property",settings:{foreground:"#89DDFF"}},{name:"Variable Function",scope:"variable.function",settings:{foreground:"#82AAFF"}},{name:"Variable Interpolation",scope:"variable.interpolation",settings:{foreground:"#ec5f67"}},{name:"Meta Function Call",scope:"meta.function-call",settings:{foreground:"#82AAFF"}},{name:"Punctuation Section Embedded",scope:"punctuation.section.embedded",settings:{foreground:"#d3423e"}},{name:"Punctuation Tweaks",scope:["punctuation.terminator.expression","punctuation.definition.arguments","punctuation.definition.array","punctuation.section.array","meta.array"],settings:{foreground:"#bfc7d5"}},{name:"More Punctuation Tweaks",scope:["punctuation.definition.list.begin","punctuation.definition.list.end","punctuation.separator.arguments","punctuation.definition.list"],settings:{foreground:"#d9f5dd"}},{name:"Template Strings",scope:"string.template meta.template.expression",settings:{foreground:"#d3423e"}},{name:"Backtics(``) in Template Strings",scope:"string.template punctuation.definition.string",settings:{foreground:"#bfc7d5"}},{name:"Italics",scope:"italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Bold",scope:"bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Quote",scope:"quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Raw Code",scope:"raw",settings:{foreground:"#80CBC4"}},{name:"CoffeScript Variable Assignment",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"CoffeScript Parameter Function",scope:"variable.parameter.function.coffee",settings:{foreground:"#bfc7d5"}},{name:"CoffeeScript Assignments",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"C# Readwrite Variables",scope:"variable.other.readwrite.cs",settings:{foreground:"#bfc7d5"}},{name:"C# Classes & Storage types",scope:["entity.name.type.class.cs","storage.type.cs"],settings:{foreground:"#82AAFF"}},{name:"C# Namespaces",scope:"entity.name.type.namespace.cs",settings:{foreground:"#B2CCD6"}},{name:"Tag names in Stylesheets",scope:["entity.name.tag.css","entity.name.tag.less","entity.name.tag.custom.css"],settings:{foreground:"#ff5572"}},{name:"Wildcard(*) selector in Stylesheets",scope:["entity.name.tag.wildcard.css","entity.name.tag.wildcard.less","entity.name.tag.wildcard.scss","entity.name.tag.wildcard.sass"],settings:{foreground:"#ff5572"}},{name:"(C|SC|SA|LE)SS property value unit",scope:["keyword.other.unit.css","constant.length.units.css","keyword.other.unit.less","constant.length.units.less","keyword.other.unit.scss","constant.length.units.scss","keyword.other.unit.sass","constant.length.units.sass"],settings:{foreground:"#FFEB95"}},{name:"Attribute Name for CSS",scope:"meta.attribute-selector.css entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"punctuations in styled components",scope:["source.js source.css meta.property-list","source.js source.css punctuation.section","source.js source.css punctuation.terminator.rule","source.js source.css punctuation.definition.entity.end.bracket","source.js source.css punctuation.definition.entity.begin.bracket","source.js source.css punctuation.separator.key-value","source.js source.css punctuation.definition.attribute-selector","source.js source.css meta.property-list","source.js source.css meta.property-list punctuation.separator.comma","source.ts source.css punctuation.section","source.ts source.css punctuation.terminator.rule","source.ts source.css punctuation.definition.entity.end.bracket","source.ts source.css punctuation.definition.entity.begin.bracket","source.ts source.css punctuation.separator.key-value","source.ts source.css punctuation.definition.attribute-selector","source.ts source.css meta.property-list","source.ts source.css meta.property-list punctuation.separator.comma"],settings:{foreground:"#bfc7d5"}},{name:"Elixir Classes",scope:["source.elixir support.type.elixir","source.elixir meta.module.elixir entity.name.class.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir Functions",scope:"source.elixir entity.name.function",settings:{foreground:"#ffcb6b"}},{name:"Elixir Constants",scope:["source.elixir constant.other.symbol.elixir","source.elixir constant.other.keywords.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir String Punctuations",scope:"source.elixir punctuation.definition.string",settings:{foreground:"#a9c77d"}},{name:"Elixir",scope:["source.elixir variable.other.readwrite.module.elixir","source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir"],settings:{foreground:"#ffcb6b"}},{name:"Elixir Binary Punctuations",scope:"source.elixir .punctuation.binary.elixir",settings:{foreground:"#c792ea"}},{name:"Go Function Calls",scope:"source.go meta.function-call.go",settings:{foreground:"#DDDDDD"}},{name:"GraphQL Variables",scope:"variable.qraphql",settings:{foreground:"#bfc7d5"}},{name:"ID Attribute Name in HTML",scope:"entity.other.attribute-name.id.html",settings:{foreground:"#ffcb6b"}},{name:"HTML Punctuation Definition Tag",scope:"punctuation.definition.tag.html",settings:{foreground:"#89DDFF"}},{name:"HTML Doctype",scope:"meta.tag.sgml.doctype.html",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"JavaScript Classes",scope:"meta.class entity.name.type.class.js",settings:{foreground:"#ffcb8b"}},{name:"JavaScript Method Declaration e.g. `constructor`",scope:"meta.method.declaration storage.type.js",settings:{foreground:"#82AAFF",fontStyle:"normal"}},{name:"JavaScript Terminator",scope:"terminator.js",settings:{foreground:"#bfc7d5"}},{name:"JavaScript Meta Punctuation Definition",scope:"meta.js punctuation.definition.js",settings:{foreground:"#bfc7d5"}},{name:"Entity Names in Code Documentations",scope:["entity.name.type.instance.jsdoc","entity.name.type.instance.phpdoc"],settings:{foreground:"#eeffff"}},{name:"Other Variables in Code Documentations",scope:["variable.other.jsdoc","variable.other.phpdoc"],settings:{foreground:"#78ccf0"}},{name:"JavaScript module imports and exports",scope:["variable.other.meta.import.js","meta.import.js variable.other","variable.other.meta.export.js","meta.export.js variable.other"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variable Parameter Function",scope:"variable.parameter.function.js",settings:{foreground:"#7986E7"}},{name:"JavaScript Variable Other ReadWrite",scope:"variable.other.readwrite.js",settings:{foreground:"#bfc7d5"}},{name:"Text nested in React tags",scope:["meta.jsx.children","meta.jsx.children.js","meta.jsx.children.tsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript[React] Variable Other Object",scope:["variable.other.object.js","variable.other.object.jsx","meta.object-literal.key.js","meta.object-literal.key.jsx","variable.object.property.js","variable.object.property.jsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variables",scope:["variable.js","variable.other.js"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Entity Name Type",scope:["entity.name.type.js","entity.name.type.module.js"],settings:{foreground:"#ffcb8b"}},{name:"JavaScript Support Classes",scope:"support.class.js",settings:{foreground:"#bfc7d5"}},{name:"JSON Property Names",scope:"support.type.property-name.json",settings:{foreground:"#C3E88D",fontStyle:"normal"}},{name:"JSON Support Constants",scope:"support.constant.json",settings:{foreground:"#ffcb6b"}},{name:"JSON Property values (string)",scope:"meta.structure.dictionary.value.json string.quoted.double",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Strings in JSON values",scope:"string.quoted.double.json punctuation.definition.string.json",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Specific JSON Property values like null",scope:"meta.structure.dictionary.json meta.structure.dictionary.value constant.language",settings:{foreground:"#ff5874"}},{name:"Ruby Variables",scope:"variable.other.ruby",settings:{foreground:"#bfc7d5"}},{name:"Ruby Hashkeys",scope:"constant.language.symbol.hashkey.ruby",settings:{foreground:"#89DDFF"}},{name:"LESS Tag names",scope:"entity.name.tag.less",settings:{foreground:"#ff5572"}},{name:"Attribute Name for LESS",scope:"meta.attribute-selector.less entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#82b1ff"}},{name:"Markup Italics",scope:"markup.italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Markup Bold",scope:"markup.bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Markup Quote + others",scope:"markup.quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Markup Raw Code + others",scope:"markup.inline.raw",settings:{foreground:"#80CBC4"}},{name:"Markup Links",scope:["markup.underline.link","markup.underline.link.image"],settings:{foreground:"#ff869a"}},{name:"Markup Attributes",scope:["markup.meta.attribute-list"],settings:{foreground:"#a9c77d"}},{name:"Markup Admonitions",scope:"markup.admonition",settings:{fontStyle:"bold"}},{name:"Markup Lists",scope:"markup.list.bullet",settings:{foreground:"#D9F5DD"}},{name:"Markup Superscript and Subscript",scope:["markup.superscript","markup.subscript"],settings:{fontStyle:"italic"}},{name:"Markdown Link Title and Description",scope:["string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:"#bfc7d5"}},{name:"Markdown Punctuation",scope:["punctuation.definition.string.markdown","punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","meta.link.inline.markdown punctuation.definition.string"],settings:{foreground:"#82b1ff"}},{name:"Markdown MetaData Punctuation",scope:["punctuation.definition.metadata.markdown"],settings:{foreground:"#ff5572"}},{name:"Markdown List Punctuation",scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:"#82b1ff"}},{name:"Asciidoc Function",scope:"entity.name.function.asciidoc",settings:{foreground:"#F78C6C"}},{name:"PHP Variables",scope:"variable.other.php",settings:{foreground:"#bec5d4"}},{name:"Support Classes in PHP",scope:"support.class.php",settings:{foreground:"#ffcb8b"}},{name:"Punctuations in PHP function calls",scope:"meta.function-call.php punctuation",settings:{foreground:"#bfc7d5"}},{name:"PHP Global Variables",scope:"variable.other.global.php",settings:{foreground:"#ffcb6b"}},{name:"Declaration Punctuation in PHP Global Variables",scope:"variable.other.global.php punctuation.definition.variable",settings:{foreground:"#ffcb6b"}},{name:"Language Constants in Python",scope:"constant.language.python",settings:{foreground:"#ff5874"}},{name:"Python Function Parameter and Arguments",scope:["variable.parameter.function.python","meta.function-call.arguments.python"],settings:{foreground:"#7986E7"}},{name:"Python Function Call",scope:["meta.function-call.python","meta.function-call.generic.python"],settings:{foreground:"#B2CCD6"}},{name:"Punctuations in Python",scope:"punctuation.python",settings:{foreground:"#bfc7d5"}},{name:"Decorator Functions in Python",scope:"entity.name.function.decorator.python",settings:{foreground:"#ffcb6b"}},{name:"Python Language Variable",scope:"source.python variable.language.special",settings:{foreground:"#8EACE3"}},{name:"SCSS Variable",scope:["variable.scss","variable.sass","variable.parameter.url.scss","variable.parameter.url.sass"],settings:{foreground:"#DDDDDD"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#82AAFF"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#bec5d4"}},{name:"Attribute Name for SASS",scope:["meta.attribute-selector.scss entity.other.attribute-name.attribute","meta.attribute-selector.sass entity.other.attribute-name.attribute"],settings:{foreground:"#F78C6C"}},{name:"Tag names in SASS",scope:["entity.name.tag.scss","entity.name.tag.sass"],settings:{foreground:"#ff5572"}},{name:"TypeScript[React] Variables and Object Properties",scope:["variable.other.readwrite.alias.ts","variable.other.readwrite.alias.tsx","variable.other.readwrite.ts","variable.other.readwrite.tsx","variable.other.object.ts","variable.other.object.tsx","variable.object.property.ts","variable.object.property.tsx","variable.other.ts","variable.other.tsx","variable.tsx","variable.ts"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Entity Name Types",scope:["entity.name.type.ts","entity.name.type.tsx"],settings:{foreground:"#78ccf0"}},{name:"TypeScript[React] Node Classes",scope:["support.class.node.ts","support.class.node.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Entity Name Types as Parameters",scope:["meta.type.parameters.ts entity.name.type","meta.type.parameters.tsx entity.name.type"],settings:{foreground:"#eeffff"}},{name:"TypeScript[React] Import/Export Punctuations",scope:["meta.import.ts punctuation.definition.block","meta.import.tsx punctuation.definition.block","meta.export.ts punctuation.definition.block","meta.export.tsx punctuation.definition.block"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Punctuation Decorators",scope:["meta.decorator punctuation.decorator.ts","meta.decorator punctuation.decorator.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Punctuation Decorators",scope:"meta.tag.js meta.jsx.children.tsx",settings:{foreground:"#82AAFF"}},{name:"YAML Entity Name Tags",scope:"entity.name.tag.yaml",settings:{foreground:"#89DDFF"}},{name:"handlebars variables",scope:"variable.parameter.handlebars",settings:{foreground:"#bec5d4"}},{name:"handlebars parameters",scope:"entity.other.attribute-name.handlebars variable.parameter.handlebars",settings:{foreground:"#ffcb6b"}},{name:"handlebars enitity attribute names",scope:"entity.other.attribute-name.handlebars",settings:{foreground:"#89DDFF"}},{name:"handlebars enitity attribute values",scope:"entity.other.attribute-value.handlebars variable.parameter.handlebars",settings:{foreground:"#7986E7"}},{name:"normalize font style of certain components",scope:["meta.tag.js meta.embedded.expression.js punctuation.section.embedded.begin.js","meta.tag.js meta.embedded.expression.js punctuation.section.embedded.end.js","meta.property-list.css meta.property-value.css variable.other.less","punctuation.section.embedded.begin.js.jsx","punctuation.section.embedded.end.js.jsx","meta.property-list.scss variable.scss","meta.property-list.sass variable.sass","keyword.operator.logical","keyword.operator.arithmetic","keyword.operator.bitwise","keyword.operator.increment","keyword.operator.ternary","keyword.operator.comparison","keyword.operator.assignment","keyword.operator.operator","keyword.operator.or.regexp","keyword.operator.expression.in","keyword.operator.type","punctuation.section.embedded.js","punctuation.definintion.string","punctuation"],settings:{fontStyle:"normal"}}],sGe={name:JKe,author:eGe,maintainers:tGe,type:nGe,semanticClass:iGe,colors:rGe,tokenColors:oGe};var V6;const zhe=QKe,aGe=sGe,$he=((V6=zhe.contributes)===null||V6===void 0?void 0:V6.themes)||[],lGe=$he[0];$he[0]=Object.assign({},lGe,aGe);const uGe="webstorm-intellij-darcula-theme",cGe="Webstorm IntelliJ Darcula Theme",dGe="A Darcula Theme designed by IntelliJ",hGe="1.1.1",fGe="xr0master",gGe="MIT",pGe="view.png",mGe={url:"https://github.com/xr0master/vscode-intellij-darcula-theme",type:"git"},_Ge={vscode:"^1.27.0"},vGe=["Themes"],bGe={themes:[{id:"Webstorm IntelliJ Darcula Theme",label:"Webstorm IntelliJ Darcula Theme",uiTheme:"vs-dark",path:"./themes/darcula-color-theme.json"}]},CGe={name:uGe,displayName:cGe,description:dGe,version:hGe,publisher:fGe,license:gGe,icon:pGe,repository:mGe,engines:_Ge,categories:vGe,contributes:bGe},yGe="Webstorm IntelliJ Darcula Theme",wGe="dark",SGe={"activityBar.background":"#3c3f41","activityBar.border":"#4b4b4b","activityBar.foreground":"#ffffff","activityBarBadge.background":"#cc7832","dropdown.background":"#3c3f41","dropdown.border":"#4b4b4b","dropdown.foreground":"#bababa","editor.background":"#2b2b2b","editor.foreground":"#a9b7c6","editor.inactiveSelectionBackground":"#3a3d41","editor.lineHighlightBackground":"#323232","editor.selectionHighlightBackground":"#415a41","editorIndentGuide.activeBackground":"#606060","editorIndentGuide.background":"#4b4b4b","editorLineNumber.activeForeground":"#999999","editorLineNumber.foreground":"#606366","input.background":"#3c3f41","input.border":"#4b4b4b","input.foreground":"#bababa","input.placeholderForeground":"#a6a6a6","list.dropBackground":"#373a3c","menu.background":"#3c3f41","menu.foreground":"#bababa","panel.background":"#3c3f41","panel.border":"#4b4b4b","panelTitle.activeBorder":"#bababa","panelTitle.activeForeground":"#bababa","panelTitle.inactiveForeground":"#888888","scrollbarSlider.activeBackground":"#707070","scrollbarSlider.background":"#505050","scrollbarSlider.hoverBackground":"#676767","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBar.background":"#3c3f41","sideBar.border":"#4b4b4b","sideBar.foreground":"#bababa","sideBarSectionHeader.foreground":"#bababa","sideBarTitle.foreground":"#bababa","statusBar.background":"#3c3f41","statusBar.border":"#4b4b4b","statusBar.foreground":"#bababa","tab.activeBackground":"#515658","tab.activeBorder":"#bababa","tab.activeForeground":"#bababa","tab.border":"#4b4b4b","tab.inactiveBackground":"#3c3e3f","tab.inactiveForeground":"#a1a1a1","terminal.ansiBlack":"#ffffff","terminal.ansiBlue":"#5394ec","terminal.ansiBrightBlue":"#7eaef1","terminal.ansiBrightCyan":"#6cdada","terminal.ansiBrightGreen":"#a8c023","terminal.ansiBrightMagenta":"#ff99ff","terminal.ansiBrightRed":"#ff8785","terminal.ansiBrightYellow":"#ffff00","terminal.ansiCyan":"#299999","terminal.ansiGreen":"#a8c023","terminal.ansiMagenta":"#ae8abe","terminal.ansiRed":"#ff6b68","terminal.ansiWhite":"#1f1f1f","terminal.ansiYellow":"#d6bf55","terminal.background":"#2b2b2b","terminal.border":"#4b4b4b","widget.shadow":"#1a1a1aaa"},EGe=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.instanceof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow keywords",scope:"keyword.control",settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{scope:"string",settings:{foreground:"#6A8759"}},{scope:"keyword - keyword.operator",settings:{foreground:"#CC7832"}},{scope:"keyword.control",settings:{foreground:"#CC7832"}},{scope:"storage",settings:{foreground:"#CC7832"}},{scope:"storage.type",settings:{foreground:"#CC7832"}},{scope:"constant.numeric",settings:{foreground:"#6897BB"}},{scope:"entity.name.type",settings:{foreground:"#CC7832"}},{scope:"entity.name.class",settings:{foreground:"#CC7832"}},{scope:"support.type",settings:{foreground:"#CC7832"}},{scope:"support.class",settings:{foreground:"#CC7832"}},{scope:"entity.name.function",settings:{foreground:"#FFC66D"}},{scope:"support.function",settings:{foreground:"#FFC66D"}},{scope:"variable",settings:{foreground:"#9876AA"}},{scope:"entity.name.variable",settings:{foreground:"#9876AA"}},{name:"Comments",scope:["comment","comment.block","comment.line"],settings:{foreground:"#808080",fontStyle:"italic"}},{scope:["punctuation.terminator.statement","punctuation.separator.comma","punctuation.separator.parameter","punctuation.separator.dictionary.key-value.json","punctuation.separator.dictionary.key-value.json.comments","punctuation.separator.dictionary.pair.json","punctuation.separator.dictionary.pair.json.comments","punctuation.separator.array.json","punctuation.separator.array.json.comments","constant.character.escape","keyword.control.anchor.regexp"],settings:{foreground:"#CC7832"}},{name:"Global keywords",scope:["constant.language","keyword.control","keyword.operator.expression","keyword.operator.new","keyword.other.debugger","support.type","storage.type","storage.modifier","variable.language.super","variable.language.this"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"String",scope:["punctuation.definition.string","string.regexp","constant.other.character-class"],settings:{foreground:"#6A8759"}},{name:"Comment Documentation",scope:["comment.block.documentation","entity.name.type.instance.jsdoc","variable.other.jsdoc"],settings:{foreground:"#6A8759"}},{name:"JsDocs",scope:"storage.type.class.jsdoc",settings:{foreground:"#6A8759",fontStyle:"italic bold underline"}},{name:"Main Text Color",scope:["punctuation.accessor","punctuation.separator.key-value","punctuation.definition.block","variable.other.readwrite","variable.other.constant","variable.parameter","variable.other.object","variable.language.arguments","support.variable","support.variable.object","support.class","keyword","keyword.operator.logical","keyword.operator.optional","keyword.operator.type.annotation","entity.name.type","entity.other.inherited-class","constant.language.import-export-all","storage.type.function.arrow","meta.function.expression","meta.object.member","meta.brace.round","meta.brace.square"],settings:{foreground:"#A9B7C6"}},{name:"Veriables",scope:["meta.function-call","meta.object.member","variable.other.property","variable.other.object.property","meta.object-literal.key","support.variable.property"],settings:{foreground:"#9876AA"}},{name:"Constants",scope:["variable.other.constant.property","variable.other.constant.object.property"],settings:{foreground:"#9876AA",fontStyle:"italic"}},{name:"JSON",scope:["support.type.property-name","support.type.property-name.json.comments","punctuation.support.type.property-name.end.json.comments","punctuation.support.type.property-name.begin.json.comments"],settings:{foreground:"#9876AA",fontStyle:""}},{name:"Regexp Blocks",scope:["punctuation.definition.group.regexp","punctuation.definition.character-class.regexp","punctuation.definition.group.no-capture.regexp","punctuation.definition.group.assertion.regexp","constant.other.character-class.regexp"],settings:{foreground:"#FFC66D"}},{name:"Regex set and etc",scope:["constant.regexp","keyword.operator.quantifier.regexp"],settings:{foreground:"#6897BB"}},{name:"XML/HTML tags",scope:["keyword.other.doctype.xml","entity.name.tag","support.class","punctuation.definition.tag"],settings:{foreground:"#E8BF6A"}},{name:"XML/HTML attribute name",scope:["variable.language.documentroot.xml","entity.other.attribute-name","support.variable.dom.js"],settings:{foreground:"#BABABA"}},{name:"XML/HTML embedded section",scope:["punctuation.section.embedded"],settings:{foreground:"#a9b7c6"}},{name:"HTML attribute value",scope:"text.html.basic string",settings:{foreground:"#A5C261"}},{name:"Constant characters",scope:"constant.character.entity",settings:{foreground:"#6D9CBE"}},{name:"YAML comments",scope:"comment.line.number-sign.yaml",settings:{foreground:"#629755",fontStyle:"italic"}},{name:"YAML key",scope:"entity.name.tag.yaml",settings:{foreground:"#CC7832"}},{name:"YAML block/text",scope:["source.yaml keyword.control","source.yaml constant.language","source.yaml storage.modifier.chomping-indicator","string.unquoted.plain.out.yaml","constant.numeric.integer.yaml"],settings:{foreground:"#A9B7C6",fontStyle:""}},{name:"YAML Anchor/Alias",scope:["entity.name.type.anchor.yaml","variable.other.alias.yaml"],settings:{foreground:"#E8BF6A"}},{name:"CSS/SCSS global key",scope:["keyword.other.important","keyword.other.default"],settings:{foreground:"#CC7832",fontStyle:""}},{name:"CSS atribute/selector",scope:["entity.other.attribute-name.css","entity.other.attribute-name.id.css","entity.other.attribute-name.class.css","entity.other.attribute-name.pseudo-element.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.class.mixin.css","support.function.url.css","constant.other.unicode-range.css","support.constant.language-range.css","punctuation.definition.entity.css"],settings:{foreground:"#E8BF6A"}},{name:"CSS URL",scope:"variable.parameter.url.css",settings:{foreground:"#287BDE"}},{name:"CSS property name",scope:["support.type.property-name.css","support.type.vendored.property-name"],settings:{foreground:"#BABABA",fontStyle:""}},{name:"CSS tag name",scope:["entity.name.tag.css"],settings:{foreground:"#CC7832"}},{name:"CSS terminator",scope:["punctuation.terminator.rule.css"],settings:{foreground:"#CC7832"}},{name:"CSS colon/braces and etc",scope:["keyword.other.unit.percentage.css","punctuation.section.function.end.bracket.round.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.property-list.begin.bracket.curly.css","punctuation.section.property-list.end.bracket.curly.css","punctuation.definition.entity.begin.bracket.square.css","punctuation.definition.entity.end.bracket.square.css"],settings:{foreground:"#A9B7C6"}},{name:"CSS property value",scope:["support.constant.font-name.css","support.constant.color.w3c-standard-color-name.css","support.constant.property-value.css","keyword.other.unit.px.css","keyword.other.unit.em.css"],settings:{foreground:"#A5C261"}},{name:"CSS hex color",scope:"constant.other.color.rgb-value.hex.css",settings:{foreground:"#6897BB"}},{name:"CSS comma",scope:"punctuation.separator.list.comma.css",settings:{foreground:"#CC7832"}},{name:"Sass/SCSS variable",scope:"variable.scss",settings:{foreground:"#6D9CBE"}},{name:"Markdown",scope:["entity.name.section.markdown","punctuation.definition.heading"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"Markdown link",scope:"markup.underline.link",settings:{foreground:"#6D9CBE",fontStyle:"italic"}}],LGe={name:yGe,type:wGe,colors:SGe,tokenColors:EGe};var H6;const jhe=CGe,xGe=LGe,qhe=((H6=jhe.contributes)===null||H6===void 0?void 0:H6.themes)||[],DGe=qhe[0];qhe[0]=Object.assign({},DGe,xGe);const IGe="github-plus-theme",kGe="GitHub Plus Theme",TGe="A GitHub inspired color theme for VSCode code and interface!",NGe="1.4.2",AGe="thenikso",OGe="icon.png",RGe={type:"git",url:"https://github.com/thenikso/github-plus-theme"},MGe={url:"https://github.com/thenikso/github-plus-theme/issues"},PGe={vscode:"^1.16.0"},FGe=["Themes"],BGe={themes:[{id:"GitHub Plus",label:"GitHub Plus",uiTheme:"vs",path:"./themes/github-plus-theme.json"}]},WGe={publish:"vsce publish"},VGe={id:"d0db9e58-8cdf-49c5-87bf-02f037e10bb0",publisherDisplayName:"thenikso",publisherId:"e748af4a-d17d-4c3b-a7e1-2592de9a7e09"},HGe={name:IGe,displayName:kGe,description:TGe,version:NGe,publisher:AGe,icon:OGe,repository:RGe,bugs:MGe,engines:PGe,categories:FGe,contributes:BGe,scripts:WGe,__metadata:VGe},UGe="light",zGe={focusBorder:"#fafbfc","inputOption.activeBorder":"#e36209","editor.background":"#ffffff","editor.foreground":"#24292e","editor.lineHighlightBackground":"#fffbdd","editorIndentGuide.background":"#eeeeee","editorLineNumber.foreground":"#cccccc","editorBracketMatch.background":"#f1f8ff","editorBracketMatch.border":"#c8e1ff","titleBar.activeBackground":"#fafbfc","titleBar.border":"#e1e4e8","statusBar.foreground":"#24292e","statusBar.noFolderForeground":"#24292e","statusBar.background":"#fafbfc","statusBar.noFolderBackground":"#fafbfc","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#fafbfc","statusBar.debuggingForeground":"#24292e","activityBar.background":"#24292e","activityBar.foreground":"#fafbfc","activityBarBadge.background":"#54a3ff","sideBar.background":"#fafbfc","sideBar.foreground":"#586069","sideBar.border":"#e1e4e8","sideBarTitle.foreground":"#24292e","sideBarSectionHeader.background":"#F1F2F3","sideBarSectionHeader.foreground":"#24292e","notification.background":"#54a3ff","editorGroupHeader.tabsBackground":"#fafbfc","editorGroupHeader.tabsBorder":"#e1e4e8","tab.activeBackground":"#ffffff","tab.activeBorder":"#e36209","tab.inactiveBackground":"#fafbfc","tab.border":"#e1e4e8","tab.inactiveForeground":"#586069","scrollbar.shadow":"#00000000","quickInputList.focusBackground":"#e7e6e5","quickInputList.focusForeground":"#24292e","list.focusOutline":"#ffffff","list.highlightForeground":"#0066BF","list.focusHighlightForeground":"#0066BF","terminal.background":"#ffffff","terminal.foreground":"#333333","terminal.ansiBlack":"#414141","terminal.ansiRed":"#D73A49","terminal.ansiGreen":"#90D259","terminal.ansiYellow":"#F7C400","terminal.ansiBlue":"#005CC5","terminal.ansiMagenta":"#FF73FD","terminal.ansiCyan":"#0BC7D7","terminal.ansiWhite":"#BFBFBF","terminal.ansiBrightBlack":"#989898","terminal.ansiBrightRed":"#FA6F71","terminal.ansiBrightGreen":"#35D61C","terminal.ansiBrightYellow":"#FFCA39","terminal.ansiBrightBlue":"#1C23D6","terminal.ansiBrightMagenta":"#FF00FF","terminal.ansiBrightCyan":"#3CD7E7","terminal.ansiBrightWhite":"#E0E0E0","terminalCursor.foreground":"#363636"},$Ge=[{settings:{foreground:"#24292eff",background:"#ffffffff"}},{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:"#24292eff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:"#005cc5"}},{scope:["comment","markup.fenced_code","markup.inline"],settings:{foreground:"#6a737d"}},{scope:"string",settings:{foreground:"#032f62"}},{scope:["constant.numeric","constant.language","variable.language.this","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:"#005cc5"}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression","support.constant.property-value.css"],settings:{foreground:"#d73a49"}},{scope:"variable.parameter.function",settings:{foreground:"#E27F2D"}},{scope:["entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:"#6f42c1"}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","keyword.other.template"],settings:{foreground:"#22863a"}},{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:["token.error-token","invalid"],settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}},{scope:"markup.inserted",settings:{foreground:"#22863a"}},{scope:"markup.deleted",settings:{foreground:"#d73a49"}},{scope:"markup.changed",settings:{foreground:"#005cc5"}},{scope:"meta.diff.header",settings:{foreground:"#6a737d"}},{scope:["constant.numeric.css","support.function.misc.css","constant.other.color.rgb-value.hex.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.function.end.bracket.round.css"],settings:{foreground:"#353535"}}],jGe={type:UGe,colors:zGe,tokenColors:$Ge};var U6;const Khe=HGe,qGe=jGe,Ghe=((U6=Khe.contributes)===null||U6===void 0?void 0:U6.themes)||[],KGe=Ghe[0];Ghe[0]=Object.assign({},KGe,qGe);const GGe={id:"ExtendsEditor",name:"Extends Editor",dispose(){},activate(){jn.editor.onCloseTab((r,e)=>{r!==void 0&&e!==void 0&&jn.editor.closeTab(r,e)}),jn.editor.onCloseAll(r=>{r!==void 0&&jn.editor.closeAll(r)}),jn.editor.onCloseOther((r,e)=>{r&&e!==void 0&&jn.editor.closeOther(r,e)}),jn.editor.onCloseToLeft((r,e)=>{r&&e!==void 0&&jn.editor.closeToLeft(r,e)}),jn.editor.onCloseToRight((r,e)=>{r&&e!==void 0&&jn.editor.closeToRight(r,e)})}},YGe=[cqe,GGe,uqe,hqe,fqe,sPe,Ohe,Hhe,zhe,jhe,Khe,lqe];var LL;(function(r){r.beforeInit="before.init",r.beforeLoad="before.load"})(LL||(LL={}));class ZGe extends Kx{constructor(e){super(),this._config={extensions:YGe.concat(),defaultLocale:"en"},this.rendered=!1,this.initialLocaleService=t=>{const n=t.reduce((i,o)=>{var s;const a=((s=o.contributes)===null||s===void 0?void 0:s.languages)||[];return i.concat(a)},[]);jn.i18n.initialize(n,localStorage.getItem(eH)||this._config.defaultLocale)},this.getConfig=()=>Object.assign({},this._config),this.render=t=>{if(!this.rendered){this.emit(LL.beforeInit);const[n,i]=jn.extension.splitLanguagesExts(this._config.extensions);this.initialLocaleService(n);const o=[IP,kP,xP,EU,LU,IU,jx,AP,$x,yU,xU,TP,wU,DU,SU,DP,NP];jn.layout.onWorkbenchDidMount(()=>{this.rendered||(jn.monacoService.initWorkspace(jn.layout.container),Object.keys(o).forEach(s=>{var a;const l=o[s],u=yt.resolve(l);(a=u.initView)===null||a===void 0||a.call(u)}),this.emit(LL.beforeLoad),jn.extension.load(i),this.rendered=!0)})}return t},this.onBeforeInit=t=>{this.subscribe(LL.beforeInit,t)},this.onBeforeLoad=t=>{this.subscribe(LL.beforeLoad,t)},e.defaultLocale&&(this._config.defaultLocale=e.defaultLocale),Array.isArray(e.extensions)&&this._config.extensions.push(...e.extensions)}}var kU;(function(r){let e=null;function t(i){return e||(e=new ZGe(i),e)}r.create=t;function n(){e=null}r.clearInstance=n})(kU||(kU={}));function XGe(r){return kU.create(r)}function Xte(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var z6={exports:{}},mR={exports:{}};const Yhe=ofe(mfe);mR.exports;var Qte;function QGe(){return Qte||(Qte=1,function(r){(function(e,t){function n(I,D){if(!I)throw new Error(D||"Assertion failed")}function i(I,D){I.super_=D;var O=function(){};O.prototype=D.prototype,I.prototype=new O,I.prototype.constructor=I}function o(I,D,O){if(o.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(O=D,D=10),this._init(I||0,D||10,O||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Yhe.Buffer}catch{}o.isBN=function(D){return D instanceof o?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===o.wordSize&&Array.isArray(D.words)},o.max=function(D,O){return D.cmp(O)>0?D:O},o.min=function(D,O){return D.cmp(O)<0?D:O},o.prototype._init=function(D,O,V){if(typeof D=="number")return this._initNumber(D,O,V);if(typeof D=="object")return this._initArray(D,O,V);O==="hex"&&(O=16),n(O===(O|0)&&O>=2&&O<=36),D=D.toString().replace(/\s+/g,"");var j=0;D[0]==="-"&&(j++,this.negative=1),j<D.length&&(O===16?this._parseHex(D,j,V):(this._parseBase(D,O,j),V==="le"&&this._initArray(this.toArray(),O,V)))},o.prototype._initNumber=function(D,O,V){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),O,V)},o.prototype._initArray=function(D,O,V){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var ne,re,se=0;if(V==="be")for(j=D.length-1,ne=0;j>=0;j-=3)re=D[j]|D[j-1]<<8|D[j-2]<<16,this.words[ne]|=re<<se&67108863,this.words[ne+1]=re>>>26-se&67108863,se+=24,se>=26&&(se-=26,ne++);else if(V==="le")for(j=0,ne=0;j<D.length;j+=3)re=D[j]|D[j+1]<<8|D[j+2]<<16,this.words[ne]|=re<<se&67108863,this.words[ne+1]=re>>>26-se&67108863,se+=24,se>=26&&(se-=26,ne++);return this.strip()};function a(I,D){var O=I.charCodeAt(D);return O>=65&&O<=70?O-55:O>=97&&O<=102?O-87:O-48&15}function l(I,D,O){var V=a(I,O);return O-1>=D&&(V|=a(I,O-1)<<4),V}o.prototype._parseHex=function(D,O,V){this.length=Math.ceil((D.length-O)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var ne=0,re=0,se;if(V==="be")for(j=D.length-1;j>=O;j-=2)se=l(D,O,j)<<ne,this.words[re]|=se&67108863,ne>=18?(ne-=18,re+=1,this.words[re]|=se>>>26):ne+=8;else{var ie=D.length-O;for(j=ie%2===0?O+1:O;j<D.length;j+=2)se=l(D,O,j)<<ne,this.words[re]|=se&67108863,ne>=18?(ne-=18,re+=1,this.words[re]|=se>>>26):ne+=8}this.strip()};function u(I,D,O,V){for(var j=0,ne=Math.min(I.length,O),re=D;re<ne;re++){var se=I.charCodeAt(re)-48;j*=V,se>=49?j+=se-49+10:se>=17?j+=se-17+10:j+=se}return j}o.prototype._parseBase=function(D,O,V){this.words=[0],this.length=1;for(var j=0,ne=1;ne<=67108863;ne*=O)j++;j--,ne=ne/O|0;for(var re=D.length-V,se=re%j,ie=Math.min(re,re-se)+V,A=0,te=V;te<ie;te+=j)A=u(D,te,te+j,O),this.imuln(ne),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A);if(se!==0){var _e=1;for(A=u(D,te,D.length,O),te=0;te<se;te++)_e*=O;this.imuln(_e),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A)}this.strip()},o.prototype.copy=function(D){D.words=new Array(this.length);for(var O=0;O<this.length;O++)D.words[O]=this.words[O];D.length=this.length,D.negative=this.negative,D.red=this.red},o.prototype.clone=function(){var D=new o(null);return this.copy(D),D},o.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(D,O){D=D||10,O=O|0||1;var V;if(D===16||D==="hex"){V="";for(var j=0,ne=0,re=0;re<this.length;re++){var se=this.words[re],ie=((se<<j|ne)&16777215).toString(16);ne=se>>>24-j&16777215,ne!==0||re!==this.length-1?V=d[6-ie.length]+ie+V:V=ie+V,j+=2,j>=26&&(j-=26,re--)}for(ne!==0&&(V=ne.toString(16)+V);V.length%O!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(D===(D|0)&&D>=2&&D<=36){var A=h[D],te=p[D];V="";var _e=this.clone();for(_e.negative=0;!_e.isZero();){var de=_e.modn(te).toString(D);_e=_e.idivn(te),_e.isZero()?V=de+V:V=d[A-de.length]+de+V}for(this.isZero()&&(V="0"+V);V.length%O!==0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(D,O){return n(typeof s<"u"),this.toArrayLike(s,D,O)},o.prototype.toArray=function(D,O){return this.toArrayLike(Array,D,O)},o.prototype.toArrayLike=function(D,O,V){var j=this.byteLength(),ne=V||Math.max(1,j);n(j<=ne,"byte array longer than desired length"),n(ne>0,"Requested array length <= 0"),this.strip();var re=O==="le",se=new D(ne),ie,A,te=this.clone();if(re){for(A=0;!te.isZero();A++)ie=te.andln(255),te.iushrn(8),se[A]=ie;for(;A<ne;A++)se[A]=0}else{for(A=0;A<ne-j;A++)se[A]=0;for(A=0;!te.isZero();A++)ie=te.andln(255),te.iushrn(8),se[ne-A-1]=ie}return se},Math.clz32?o.prototype._countBits=function(D){return 32-Math.clz32(D)}:o.prototype._countBits=function(D){var O=D,V=0;return O>=4096&&(V+=13,O>>>=13),O>=64&&(V+=7,O>>>=7),O>=8&&(V+=4,O>>>=4),O>=2&&(V+=2,O>>>=2),V+O},o.prototype._zeroBits=function(D){if(D===0)return 26;var O=D,V=0;return O&8191||(V+=13,O>>>=13),O&127||(V+=7,O>>>=7),O&15||(V+=4,O>>>=4),O&3||(V+=2,O>>>=2),O&1||V++,V},o.prototype.bitLength=function(){var D=this.words[this.length-1],O=this._countBits(D);return(this.length-1)*26+O};function _(I){for(var D=new Array(I.bitLength()),O=0;O<D.length;O++){var V=O/26|0,j=O%26;D[O]=(I.words[V]&1<<j)>>>j}return D}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,O=0;O<this.length;O++){var V=this._zeroBits(this.words[O]);if(D+=V,V!==26)break}return D},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},o.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var O=0;O<D.length;O++)this.words[O]=this.words[O]|D.words[O];return this.strip()},o.prototype.ior=function(D){return n((this.negative|D.negative)===0),this.iuor(D)},o.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},o.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},o.prototype.iuand=function(D){var O;this.length>D.length?O=D:O=this;for(var V=0;V<O.length;V++)this.words[V]=this.words[V]&D.words[V];return this.length=O.length,this.strip()},o.prototype.iand=function(D){return n((this.negative|D.negative)===0),this.iuand(D)},o.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},o.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},o.prototype.iuxor=function(D){var O,V;this.length>D.length?(O=this,V=D):(O=D,V=this);for(var j=0;j<V.length;j++)this.words[j]=O.words[j]^V.words[j];if(this!==O)for(;j<O.length;j++)this.words[j]=O.words[j];return this.length=O.length,this.strip()},o.prototype.ixor=function(D){return n((this.negative|D.negative)===0),this.iuxor(D)},o.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},o.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},o.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var O=Math.ceil(D/26)|0,V=D%26;this._expand(O),V>0&&O--;for(var j=0;j<O;j++)this.words[j]=~this.words[j]&67108863;return V>0&&(this.words[j]=~this.words[j]&67108863>>26-V),this.strip()},o.prototype.notn=function(D){return this.clone().inotn(D)},o.prototype.setn=function(D,O){n(typeof D=="number"&&D>=0);var V=D/26|0,j=D%26;return this._expand(V+1),O?this.words[V]=this.words[V]|1<<j:this.words[V]=this.words[V]&~(1<<j),this.strip()},o.prototype.iadd=function(D){var O;if(this.negative!==0&&D.negative===0)return this.negative=0,O=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,O=this.isub(D),D.negative=1,O._normSign();var V,j;this.length>D.length?(V=this,j=D):(V=D,j=this);for(var ne=0,re=0;re<j.length;re++)O=(V.words[re]|0)+(j.words[re]|0)+ne,this.words[re]=O&67108863,ne=O>>>26;for(;ne!==0&&re<V.length;re++)O=(V.words[re]|0)+ne,this.words[re]=O&67108863,ne=O>>>26;if(this.length=V.length,ne!==0)this.words[this.length]=ne,this.length++;else if(V!==this)for(;re<V.length;re++)this.words[re]=V.words[re];return this},o.prototype.add=function(D){var O;return D.negative!==0&&this.negative===0?(D.negative=0,O=this.sub(D),D.negative^=1,O):D.negative===0&&this.negative!==0?(this.negative=0,O=D.sub(this),this.negative=1,O):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},o.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var O=this.iadd(D);return D.negative=1,O._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var V=this.cmp(D);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var j,ne;V>0?(j=this,ne=D):(j=D,ne=this);for(var re=0,se=0;se<ne.length;se++)O=(j.words[se]|0)-(ne.words[se]|0)+re,re=O>>26,this.words[se]=O&67108863;for(;re!==0&&se<j.length;se++)O=(j.words[se]|0)+re,re=O>>26,this.words[se]=O&67108863;if(re===0&&se<j.length&&j!==this)for(;se<j.length;se++)this.words[se]=j.words[se];return this.length=Math.max(this.length,se),j!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(D){return this.clone().isub(D)};function C(I,D,O){O.negative=D.negative^I.negative;var V=I.length+D.length|0;O.length=V,V=V-1|0;var j=I.words[0]|0,ne=D.words[0]|0,re=j*ne,se=re&67108863,ie=re/67108864|0;O.words[0]=se;for(var A=1;A<V;A++){for(var te=ie>>>26,_e=ie&67108863,de=Math.min(A,D.length-1),Me=Math.max(0,A-I.length+1);Me<=de;Me++){var He=A-Me|0;j=I.words[He]|0,ne=D.words[Me]|0,re=j*ne+_e,te+=re/67108864|0,_e=re&67108863}O.words[A]=_e|0,ie=te|0}return ie!==0?O.words[A]=ie|0:O.length--,O.strip()}var S=function(D,O,V){var j=D.words,ne=O.words,re=V.words,se=0,ie,A,te,_e=j[0]|0,de=_e&8191,Me=_e>>>13,He=j[1]|0,st=He&8191,Dt=He>>>13,Rt=j[2]|0,lt=Rt&8191,xt=Rt>>>13,zt=j[3]|0,wt=zt&8191,dn=zt>>>13,sn=j[4]|0,Pt=sn&8191,ei=sn>>>13,xn=j[5]|0,un=xn&8191,Ft=xn>>>13,Bt=j[6]|0,Tt=Bt&8191,mt=Bt>>>13,Qt=j[7]|0,fn=Qt&8191,We=Qt>>>13,dt=j[8]|0,oe=dt&8191,U=dt>>>13,X=j[9]|0,we=X&8191,Te=X>>>13,qe=ne[0]|0,ze=qe&8191,bt=qe>>>13,bn=ne[1]|0,En=bn&8191,nt=bn>>>13,Mi=ne[2]|0,ni=Mi&8191,bi=Mi>>>13,Qs=ne[3]|0,Vn=Qs&8191,Dr=Qs>>>13,ru=ne[4]|0,lr=ru&8191,Ct=ru>>>13,as=ne[5]|0,et=as&8191,Ye=as>>>13,it=ne[6]|0,ve=it&8191,Ce=it>>>13,Ie=ne[7]|0,ue=Ie&8191,Oe=Ie>>>13,pt=ne[8]|0,at=pt&8191,Ut=pt>>>13,kn=ne[9]|0,R=kn&8191,K=kn>>>13;V.negative=D.negative^O.negative,V.length=19,ie=Math.imul(de,ze),A=Math.imul(de,bt),A=A+Math.imul(Me,ze)|0,te=Math.imul(Me,bt);var ce=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(ce>>>26)|0,ce&=67108863,ie=Math.imul(st,ze),A=Math.imul(st,bt),A=A+Math.imul(Dt,ze)|0,te=Math.imul(Dt,bt),ie=ie+Math.imul(de,En)|0,A=A+Math.imul(de,nt)|0,A=A+Math.imul(Me,En)|0,te=te+Math.imul(Me,nt)|0;var pe=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(pe>>>26)|0,pe&=67108863,ie=Math.imul(lt,ze),A=Math.imul(lt,bt),A=A+Math.imul(xt,ze)|0,te=Math.imul(xt,bt),ie=ie+Math.imul(st,En)|0,A=A+Math.imul(st,nt)|0,A=A+Math.imul(Dt,En)|0,te=te+Math.imul(Dt,nt)|0,ie=ie+Math.imul(de,ni)|0,A=A+Math.imul(de,bi)|0,A=A+Math.imul(Me,ni)|0,te=te+Math.imul(Me,bi)|0;var Ne=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,ie=Math.imul(wt,ze),A=Math.imul(wt,bt),A=A+Math.imul(dn,ze)|0,te=Math.imul(dn,bt),ie=ie+Math.imul(lt,En)|0,A=A+Math.imul(lt,nt)|0,A=A+Math.imul(xt,En)|0,te=te+Math.imul(xt,nt)|0,ie=ie+Math.imul(st,ni)|0,A=A+Math.imul(st,bi)|0,A=A+Math.imul(Dt,ni)|0,te=te+Math.imul(Dt,bi)|0,ie=ie+Math.imul(de,Vn)|0,A=A+Math.imul(de,Dr)|0,A=A+Math.imul(Me,Vn)|0,te=te+Math.imul(Me,Dr)|0;var Se=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Se>>>26)|0,Se&=67108863,ie=Math.imul(Pt,ze),A=Math.imul(Pt,bt),A=A+Math.imul(ei,ze)|0,te=Math.imul(ei,bt),ie=ie+Math.imul(wt,En)|0,A=A+Math.imul(wt,nt)|0,A=A+Math.imul(dn,En)|0,te=te+Math.imul(dn,nt)|0,ie=ie+Math.imul(lt,ni)|0,A=A+Math.imul(lt,bi)|0,A=A+Math.imul(xt,ni)|0,te=te+Math.imul(xt,bi)|0,ie=ie+Math.imul(st,Vn)|0,A=A+Math.imul(st,Dr)|0,A=A+Math.imul(Dt,Vn)|0,te=te+Math.imul(Dt,Dr)|0,ie=ie+Math.imul(de,lr)|0,A=A+Math.imul(de,Ct)|0,A=A+Math.imul(Me,lr)|0,te=te+Math.imul(Me,Ct)|0;var Je=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Je>>>26)|0,Je&=67108863,ie=Math.imul(un,ze),A=Math.imul(un,bt),A=A+Math.imul(Ft,ze)|0,te=Math.imul(Ft,bt),ie=ie+Math.imul(Pt,En)|0,A=A+Math.imul(Pt,nt)|0,A=A+Math.imul(ei,En)|0,te=te+Math.imul(ei,nt)|0,ie=ie+Math.imul(wt,ni)|0,A=A+Math.imul(wt,bi)|0,A=A+Math.imul(dn,ni)|0,te=te+Math.imul(dn,bi)|0,ie=ie+Math.imul(lt,Vn)|0,A=A+Math.imul(lt,Dr)|0,A=A+Math.imul(xt,Vn)|0,te=te+Math.imul(xt,Dr)|0,ie=ie+Math.imul(st,lr)|0,A=A+Math.imul(st,Ct)|0,A=A+Math.imul(Dt,lr)|0,te=te+Math.imul(Dt,Ct)|0,ie=ie+Math.imul(de,et)|0,A=A+Math.imul(de,Ye)|0,A=A+Math.imul(Me,et)|0,te=te+Math.imul(Me,Ye)|0;var ht=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(ht>>>26)|0,ht&=67108863,ie=Math.imul(Tt,ze),A=Math.imul(Tt,bt),A=A+Math.imul(mt,ze)|0,te=Math.imul(mt,bt),ie=ie+Math.imul(un,En)|0,A=A+Math.imul(un,nt)|0,A=A+Math.imul(Ft,En)|0,te=te+Math.imul(Ft,nt)|0,ie=ie+Math.imul(Pt,ni)|0,A=A+Math.imul(Pt,bi)|0,A=A+Math.imul(ei,ni)|0,te=te+Math.imul(ei,bi)|0,ie=ie+Math.imul(wt,Vn)|0,A=A+Math.imul(wt,Dr)|0,A=A+Math.imul(dn,Vn)|0,te=te+Math.imul(dn,Dr)|0,ie=ie+Math.imul(lt,lr)|0,A=A+Math.imul(lt,Ct)|0,A=A+Math.imul(xt,lr)|0,te=te+Math.imul(xt,Ct)|0,ie=ie+Math.imul(st,et)|0,A=A+Math.imul(st,Ye)|0,A=A+Math.imul(Dt,et)|0,te=te+Math.imul(Dt,Ye)|0,ie=ie+Math.imul(de,ve)|0,A=A+Math.imul(de,Ce)|0,A=A+Math.imul(Me,ve)|0,te=te+Math.imul(Me,Ce)|0;var It=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(It>>>26)|0,It&=67108863,ie=Math.imul(fn,ze),A=Math.imul(fn,bt),A=A+Math.imul(We,ze)|0,te=Math.imul(We,bt),ie=ie+Math.imul(Tt,En)|0,A=A+Math.imul(Tt,nt)|0,A=A+Math.imul(mt,En)|0,te=te+Math.imul(mt,nt)|0,ie=ie+Math.imul(un,ni)|0,A=A+Math.imul(un,bi)|0,A=A+Math.imul(Ft,ni)|0,te=te+Math.imul(Ft,bi)|0,ie=ie+Math.imul(Pt,Vn)|0,A=A+Math.imul(Pt,Dr)|0,A=A+Math.imul(ei,Vn)|0,te=te+Math.imul(ei,Dr)|0,ie=ie+Math.imul(wt,lr)|0,A=A+Math.imul(wt,Ct)|0,A=A+Math.imul(dn,lr)|0,te=te+Math.imul(dn,Ct)|0,ie=ie+Math.imul(lt,et)|0,A=A+Math.imul(lt,Ye)|0,A=A+Math.imul(xt,et)|0,te=te+Math.imul(xt,Ye)|0,ie=ie+Math.imul(st,ve)|0,A=A+Math.imul(st,Ce)|0,A=A+Math.imul(Dt,ve)|0,te=te+Math.imul(Dt,Ce)|0,ie=ie+Math.imul(de,ue)|0,A=A+Math.imul(de,Oe)|0,A=A+Math.imul(Me,ue)|0,te=te+Math.imul(Me,Oe)|0;var Vt=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,ie=Math.imul(oe,ze),A=Math.imul(oe,bt),A=A+Math.imul(U,ze)|0,te=Math.imul(U,bt),ie=ie+Math.imul(fn,En)|0,A=A+Math.imul(fn,nt)|0,A=A+Math.imul(We,En)|0,te=te+Math.imul(We,nt)|0,ie=ie+Math.imul(Tt,ni)|0,A=A+Math.imul(Tt,bi)|0,A=A+Math.imul(mt,ni)|0,te=te+Math.imul(mt,bi)|0,ie=ie+Math.imul(un,Vn)|0,A=A+Math.imul(un,Dr)|0,A=A+Math.imul(Ft,Vn)|0,te=te+Math.imul(Ft,Dr)|0,ie=ie+Math.imul(Pt,lr)|0,A=A+Math.imul(Pt,Ct)|0,A=A+Math.imul(ei,lr)|0,te=te+Math.imul(ei,Ct)|0,ie=ie+Math.imul(wt,et)|0,A=A+Math.imul(wt,Ye)|0,A=A+Math.imul(dn,et)|0,te=te+Math.imul(dn,Ye)|0,ie=ie+Math.imul(lt,ve)|0,A=A+Math.imul(lt,Ce)|0,A=A+Math.imul(xt,ve)|0,te=te+Math.imul(xt,Ce)|0,ie=ie+Math.imul(st,ue)|0,A=A+Math.imul(st,Oe)|0,A=A+Math.imul(Dt,ue)|0,te=te+Math.imul(Dt,Oe)|0,ie=ie+Math.imul(de,at)|0,A=A+Math.imul(de,Ut)|0,A=A+Math.imul(Me,at)|0,te=te+Math.imul(Me,Ut)|0;var pn=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(pn>>>26)|0,pn&=67108863,ie=Math.imul(we,ze),A=Math.imul(we,bt),A=A+Math.imul(Te,ze)|0,te=Math.imul(Te,bt),ie=ie+Math.imul(oe,En)|0,A=A+Math.imul(oe,nt)|0,A=A+Math.imul(U,En)|0,te=te+Math.imul(U,nt)|0,ie=ie+Math.imul(fn,ni)|0,A=A+Math.imul(fn,bi)|0,A=A+Math.imul(We,ni)|0,te=te+Math.imul(We,bi)|0,ie=ie+Math.imul(Tt,Vn)|0,A=A+Math.imul(Tt,Dr)|0,A=A+Math.imul(mt,Vn)|0,te=te+Math.imul(mt,Dr)|0,ie=ie+Math.imul(un,lr)|0,A=A+Math.imul(un,Ct)|0,A=A+Math.imul(Ft,lr)|0,te=te+Math.imul(Ft,Ct)|0,ie=ie+Math.imul(Pt,et)|0,A=A+Math.imul(Pt,Ye)|0,A=A+Math.imul(ei,et)|0,te=te+Math.imul(ei,Ye)|0,ie=ie+Math.imul(wt,ve)|0,A=A+Math.imul(wt,Ce)|0,A=A+Math.imul(dn,ve)|0,te=te+Math.imul(dn,Ce)|0,ie=ie+Math.imul(lt,ue)|0,A=A+Math.imul(lt,Oe)|0,A=A+Math.imul(xt,ue)|0,te=te+Math.imul(xt,Oe)|0,ie=ie+Math.imul(st,at)|0,A=A+Math.imul(st,Ut)|0,A=A+Math.imul(Dt,at)|0,te=te+Math.imul(Dt,Ut)|0,ie=ie+Math.imul(de,R)|0,A=A+Math.imul(de,K)|0,A=A+Math.imul(Me,R)|0,te=te+Math.imul(Me,K)|0;var tn=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(tn>>>26)|0,tn&=67108863,ie=Math.imul(we,En),A=Math.imul(we,nt),A=A+Math.imul(Te,En)|0,te=Math.imul(Te,nt),ie=ie+Math.imul(oe,ni)|0,A=A+Math.imul(oe,bi)|0,A=A+Math.imul(U,ni)|0,te=te+Math.imul(U,bi)|0,ie=ie+Math.imul(fn,Vn)|0,A=A+Math.imul(fn,Dr)|0,A=A+Math.imul(We,Vn)|0,te=te+Math.imul(We,Dr)|0,ie=ie+Math.imul(Tt,lr)|0,A=A+Math.imul(Tt,Ct)|0,A=A+Math.imul(mt,lr)|0,te=te+Math.imul(mt,Ct)|0,ie=ie+Math.imul(un,et)|0,A=A+Math.imul(un,Ye)|0,A=A+Math.imul(Ft,et)|0,te=te+Math.imul(Ft,Ye)|0,ie=ie+Math.imul(Pt,ve)|0,A=A+Math.imul(Pt,Ce)|0,A=A+Math.imul(ei,ve)|0,te=te+Math.imul(ei,Ce)|0,ie=ie+Math.imul(wt,ue)|0,A=A+Math.imul(wt,Oe)|0,A=A+Math.imul(dn,ue)|0,te=te+Math.imul(dn,Oe)|0,ie=ie+Math.imul(lt,at)|0,A=A+Math.imul(lt,Ut)|0,A=A+Math.imul(xt,at)|0,te=te+Math.imul(xt,Ut)|0,ie=ie+Math.imul(st,R)|0,A=A+Math.imul(st,K)|0,A=A+Math.imul(Dt,R)|0,te=te+Math.imul(Dt,K)|0;var mn=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(mn>>>26)|0,mn&=67108863,ie=Math.imul(we,ni),A=Math.imul(we,bi),A=A+Math.imul(Te,ni)|0,te=Math.imul(Te,bi),ie=ie+Math.imul(oe,Vn)|0,A=A+Math.imul(oe,Dr)|0,A=A+Math.imul(U,Vn)|0,te=te+Math.imul(U,Dr)|0,ie=ie+Math.imul(fn,lr)|0,A=A+Math.imul(fn,Ct)|0,A=A+Math.imul(We,lr)|0,te=te+Math.imul(We,Ct)|0,ie=ie+Math.imul(Tt,et)|0,A=A+Math.imul(Tt,Ye)|0,A=A+Math.imul(mt,et)|0,te=te+Math.imul(mt,Ye)|0,ie=ie+Math.imul(un,ve)|0,A=A+Math.imul(un,Ce)|0,A=A+Math.imul(Ft,ve)|0,te=te+Math.imul(Ft,Ce)|0,ie=ie+Math.imul(Pt,ue)|0,A=A+Math.imul(Pt,Oe)|0,A=A+Math.imul(ei,ue)|0,te=te+Math.imul(ei,Oe)|0,ie=ie+Math.imul(wt,at)|0,A=A+Math.imul(wt,Ut)|0,A=A+Math.imul(dn,at)|0,te=te+Math.imul(dn,Ut)|0,ie=ie+Math.imul(lt,R)|0,A=A+Math.imul(lt,K)|0,A=A+Math.imul(xt,R)|0,te=te+Math.imul(xt,K)|0;var Jt=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ie=Math.imul(we,Vn),A=Math.imul(we,Dr),A=A+Math.imul(Te,Vn)|0,te=Math.imul(Te,Dr),ie=ie+Math.imul(oe,lr)|0,A=A+Math.imul(oe,Ct)|0,A=A+Math.imul(U,lr)|0,te=te+Math.imul(U,Ct)|0,ie=ie+Math.imul(fn,et)|0,A=A+Math.imul(fn,Ye)|0,A=A+Math.imul(We,et)|0,te=te+Math.imul(We,Ye)|0,ie=ie+Math.imul(Tt,ve)|0,A=A+Math.imul(Tt,Ce)|0,A=A+Math.imul(mt,ve)|0,te=te+Math.imul(mt,Ce)|0,ie=ie+Math.imul(un,ue)|0,A=A+Math.imul(un,Oe)|0,A=A+Math.imul(Ft,ue)|0,te=te+Math.imul(Ft,Oe)|0,ie=ie+Math.imul(Pt,at)|0,A=A+Math.imul(Pt,Ut)|0,A=A+Math.imul(ei,at)|0,te=te+Math.imul(ei,Ut)|0,ie=ie+Math.imul(wt,R)|0,A=A+Math.imul(wt,K)|0,A=A+Math.imul(dn,R)|0,te=te+Math.imul(dn,K)|0;var qi=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(qi>>>26)|0,qi&=67108863,ie=Math.imul(we,lr),A=Math.imul(we,Ct),A=A+Math.imul(Te,lr)|0,te=Math.imul(Te,Ct),ie=ie+Math.imul(oe,et)|0,A=A+Math.imul(oe,Ye)|0,A=A+Math.imul(U,et)|0,te=te+Math.imul(U,Ye)|0,ie=ie+Math.imul(fn,ve)|0,A=A+Math.imul(fn,Ce)|0,A=A+Math.imul(We,ve)|0,te=te+Math.imul(We,Ce)|0,ie=ie+Math.imul(Tt,ue)|0,A=A+Math.imul(Tt,Oe)|0,A=A+Math.imul(mt,ue)|0,te=te+Math.imul(mt,Oe)|0,ie=ie+Math.imul(un,at)|0,A=A+Math.imul(un,Ut)|0,A=A+Math.imul(Ft,at)|0,te=te+Math.imul(Ft,Ut)|0,ie=ie+Math.imul(Pt,R)|0,A=A+Math.imul(Pt,K)|0,A=A+Math.imul(ei,R)|0,te=te+Math.imul(ei,K)|0;var Ci=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,ie=Math.imul(we,et),A=Math.imul(we,Ye),A=A+Math.imul(Te,et)|0,te=Math.imul(Te,Ye),ie=ie+Math.imul(oe,ve)|0,A=A+Math.imul(oe,Ce)|0,A=A+Math.imul(U,ve)|0,te=te+Math.imul(U,Ce)|0,ie=ie+Math.imul(fn,ue)|0,A=A+Math.imul(fn,Oe)|0,A=A+Math.imul(We,ue)|0,te=te+Math.imul(We,Oe)|0,ie=ie+Math.imul(Tt,at)|0,A=A+Math.imul(Tt,Ut)|0,A=A+Math.imul(mt,at)|0,te=te+Math.imul(mt,Ut)|0,ie=ie+Math.imul(un,R)|0,A=A+Math.imul(un,K)|0,A=A+Math.imul(Ft,R)|0,te=te+Math.imul(Ft,K)|0;var Rr=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,ie=Math.imul(we,ve),A=Math.imul(we,Ce),A=A+Math.imul(Te,ve)|0,te=Math.imul(Te,Ce),ie=ie+Math.imul(oe,ue)|0,A=A+Math.imul(oe,Oe)|0,A=A+Math.imul(U,ue)|0,te=te+Math.imul(U,Oe)|0,ie=ie+Math.imul(fn,at)|0,A=A+Math.imul(fn,Ut)|0,A=A+Math.imul(We,at)|0,te=te+Math.imul(We,Ut)|0,ie=ie+Math.imul(Tt,R)|0,A=A+Math.imul(Tt,K)|0,A=A+Math.imul(mt,R)|0,te=te+Math.imul(mt,K)|0;var Er=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Er>>>26)|0,Er&=67108863,ie=Math.imul(we,ue),A=Math.imul(we,Oe),A=A+Math.imul(Te,ue)|0,te=Math.imul(Te,Oe),ie=ie+Math.imul(oe,at)|0,A=A+Math.imul(oe,Ut)|0,A=A+Math.imul(U,at)|0,te=te+Math.imul(U,Ut)|0,ie=ie+Math.imul(fn,R)|0,A=A+Math.imul(fn,K)|0,A=A+Math.imul(We,R)|0,te=te+Math.imul(We,K)|0;var da=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(da>>>26)|0,da&=67108863,ie=Math.imul(we,at),A=Math.imul(we,Ut),A=A+Math.imul(Te,at)|0,te=Math.imul(Te,Ut),ie=ie+Math.imul(oe,R)|0,A=A+Math.imul(oe,K)|0,A=A+Math.imul(U,R)|0,te=te+Math.imul(U,K)|0;var Cs=(se+ie|0)+((A&8191)<<13)|0;se=(te+(A>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,ie=Math.imul(we,R),A=Math.imul(we,K),A=A+Math.imul(Te,R)|0,te=Math.imul(Te,K);var ap=(se+ie|0)+((A&8191)<<13)|0;return se=(te+(A>>>13)|0)+(ap>>>26)|0,ap&=67108863,re[0]=ce,re[1]=pe,re[2]=Ne,re[3]=Se,re[4]=Je,re[5]=ht,re[6]=It,re[7]=Vt,re[8]=pn,re[9]=tn,re[10]=mn,re[11]=Jt,re[12]=qi,re[13]=Ci,re[14]=Rr,re[15]=Er,re[16]=da,re[17]=Cs,re[18]=ap,se!==0&&(re[19]=se,V.length++),V};Math.imul||(S=C);function x(I,D,O){O.negative=D.negative^I.negative,O.length=I.length+D.length;for(var V=0,j=0,ne=0;ne<O.length-1;ne++){var re=j;j=0;for(var se=V&67108863,ie=Math.min(ne,D.length-1),A=Math.max(0,ne-I.length+1);A<=ie;A++){var te=ne-A,_e=I.words[te]|0,de=D.words[A]|0,Me=_e*de,He=Me&67108863;re=re+(Me/67108864|0)|0,He=He+se|0,se=He&67108863,re=re+(He>>>26)|0,j+=re>>>26,re&=67108863}O.words[ne]=se,V=re,re=j}return V!==0?O.words[ne]=V:O.length--,O.strip()}function T(I,D,O){var V=new k;return V.mulp(I,D,O)}o.prototype.mulTo=function(D,O){var V,j=this.length+D.length;return this.length===10&&D.length===10?V=S(this,D,O):j<63?V=C(this,D,O):j<1024?V=x(this,D,O):V=T(this,D,O),V};function k(I,D){this.x=I,this.y=D}k.prototype.makeRBT=function(D){for(var O=new Array(D),V=o.prototype._countBits(D)-1,j=0;j<D;j++)O[j]=this.revBin(j,V,D);return O},k.prototype.revBin=function(D,O,V){if(D===0||D===V-1)return D;for(var j=0,ne=0;ne<O;ne++)j|=(D&1)<<O-ne-1,D>>=1;return j},k.prototype.permute=function(D,O,V,j,ne,re){for(var se=0;se<re;se++)j[se]=O[D[se]],ne[se]=V[D[se]]},k.prototype.transform=function(D,O,V,j,ne,re){this.permute(re,D,O,V,j,ne);for(var se=1;se<ne;se<<=1)for(var ie=se<<1,A=Math.cos(2*Math.PI/ie),te=Math.sin(2*Math.PI/ie),_e=0;_e<ne;_e+=ie)for(var de=A,Me=te,He=0;He<se;He++){var st=V[_e+He],Dt=j[_e+He],Rt=V[_e+He+se],lt=j[_e+He+se],xt=de*Rt-Me*lt;lt=de*lt+Me*Rt,Rt=xt,V[_e+He]=st+Rt,j[_e+He]=Dt+lt,V[_e+He+se]=st-Rt,j[_e+He+se]=Dt-lt,He!==ie&&(xt=A*de-te*Me,Me=A*Me+te*de,de=xt)}},k.prototype.guessLen13b=function(D,O){var V=Math.max(O,D)|1,j=V&1,ne=0;for(V=V/2|0;V;V=V>>>1)ne++;return 1<<ne+1+j},k.prototype.conjugate=function(D,O,V){if(!(V<=1))for(var j=0;j<V/2;j++){var ne=D[j];D[j]=D[V-j-1],D[V-j-1]=ne,ne=O[j],O[j]=-O[V-j-1],O[V-j-1]=-ne}},k.prototype.normalize13b=function(D,O){for(var V=0,j=0;j<O/2;j++){var ne=Math.round(D[2*j+1]/O)*8192+Math.round(D[2*j]/O)+V;D[j]=ne&67108863,ne<67108864?V=0:V=ne/67108864|0}return D},k.prototype.convert13b=function(D,O,V,j){for(var ne=0,re=0;re<O;re++)ne=ne+(D[re]|0),V[2*re]=ne&8191,ne=ne>>>13,V[2*re+1]=ne&8191,ne=ne>>>13;for(re=2*O;re<j;++re)V[re]=0;n(ne===0),n((ne&-8192)===0)},k.prototype.stub=function(D){for(var O=new Array(D),V=0;V<D;V++)O[V]=0;return O},k.prototype.mulp=function(D,O,V){var j=2*this.guessLen13b(D.length,O.length),ne=this.makeRBT(j),re=this.stub(j),se=new Array(j),ie=new Array(j),A=new Array(j),te=new Array(j),_e=new Array(j),de=new Array(j),Me=V.words;Me.length=j,this.convert13b(D.words,D.length,se,j),this.convert13b(O.words,O.length,te,j),this.transform(se,re,ie,A,j,ne),this.transform(te,re,_e,de,j,ne);for(var He=0;He<j;He++){var st=ie[He]*_e[He]-A[He]*de[He];A[He]=ie[He]*de[He]+A[He]*_e[He],ie[He]=st}return this.conjugate(ie,A,j),this.transform(ie,A,Me,re,j,ne),this.conjugate(Me,re,j),this.normalize13b(Me,j),V.negative=D.negative^O.negative,V.length=D.length+O.length,V.strip()},o.prototype.mul=function(D){var O=new o(null);return O.words=new Array(this.length+D.length),this.mulTo(D,O)},o.prototype.mulf=function(D){var O=new o(null);return O.words=new Array(this.length+D.length),T(this,D,O)},o.prototype.imul=function(D){return this.clone().mulTo(D,this)},o.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var O=0,V=0;V<this.length;V++){var j=(this.words[V]|0)*D,ne=(j&67108863)+(O&67108863);O>>=26,O+=j/67108864|0,O+=ne>>>26,this.words[V]=ne&67108863}return O!==0&&(this.words[V]=O,this.length++),this},o.prototype.muln=function(D){return this.clone().imuln(D)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(D){var O=_(D);if(O.length===0)return new o(1);for(var V=this,j=0;j<O.length&&O[j]===0;j++,V=V.sqr());if(++j<O.length)for(var ne=V.sqr();j<O.length;j++,ne=ne.sqr())O[j]!==0&&(V=V.mul(ne));return V},o.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var O=D%26,V=(D-O)/26,j=67108863>>>26-O<<26-O,ne;if(O!==0){var re=0;for(ne=0;ne<this.length;ne++){var se=this.words[ne]&j,ie=(this.words[ne]|0)-se<<O;this.words[ne]=ie|re,re=se>>>26-O}re&&(this.words[ne]=re,this.length++)}if(V!==0){for(ne=this.length-1;ne>=0;ne--)this.words[ne+V]=this.words[ne];for(ne=0;ne<V;ne++)this.words[ne]=0;this.length+=V}return this.strip()},o.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},o.prototype.iushrn=function(D,O,V){n(typeof D=="number"&&D>=0);var j;O?j=(O-O%26)/26:j=0;var ne=D%26,re=Math.min((D-ne)/26,this.length),se=67108863^67108863>>>ne<<ne,ie=V;if(j-=re,j=Math.max(0,j),ie){for(var A=0;A<re;A++)ie.words[A]=this.words[A];ie.length=re}if(re!==0)if(this.length>re)for(this.length-=re,A=0;A<this.length;A++)this.words[A]=this.words[A+re];else this.words[0]=0,this.length=1;var te=0;for(A=this.length-1;A>=0&&(te!==0||A>=j);A--){var _e=this.words[A]|0;this.words[A]=te<<26-ne|_e>>>ne,te=_e&se}return ie&&te!==0&&(ie.words[ie.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(D,O,V){return n(this.negative===0),this.iushrn(D,O,V)},o.prototype.shln=function(D){return this.clone().ishln(D)},o.prototype.ushln=function(D){return this.clone().iushln(D)},o.prototype.shrn=function(D){return this.clone().ishrn(D)},o.prototype.ushrn=function(D){return this.clone().iushrn(D)},o.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var O=D%26,V=(D-O)/26,j=1<<O;if(this.length<=V)return!1;var ne=this.words[V];return!!(ne&j)},o.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var O=D%26,V=(D-O)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(O!==0&&V++,this.length=Math.min(V,this.length),O!==0){var j=67108863^67108863>>>O<<O;this.words[this.length-1]&=j}return this.strip()},o.prototype.maskn=function(D){return this.clone().imaskn(D)},o.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},o.prototype._iaddn=function(D){this.words[0]+=D;for(var O=0;O<this.length&&this.words[O]>=67108864;O++)this.words[O]-=67108864,O===this.length-1?this.words[O+1]=1:this.words[O+1]++;return this.length=Math.max(this.length,O+1),this},o.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var O=0;O<this.length&&this.words[O]<0;O++)this.words[O]+=67108864,this.words[O+1]-=1;return this.strip()},o.prototype.addn=function(D){return this.clone().iaddn(D)},o.prototype.subn=function(D){return this.clone().isubn(D)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(D,O,V){var j=D.length+V,ne;this._expand(j);var re,se=0;for(ne=0;ne<D.length;ne++){re=(this.words[ne+V]|0)+se;var ie=(D.words[ne]|0)*O;re-=ie&67108863,se=(re>>26)-(ie/67108864|0),this.words[ne+V]=re&67108863}for(;ne<this.length-V;ne++)re=(this.words[ne+V]|0)+se,se=re>>26,this.words[ne+V]=re&67108863;if(se===0)return this.strip();for(n(se===-1),se=0,ne=0;ne<this.length;ne++)re=-(this.words[ne]|0)+se,se=re>>26,this.words[ne]=re&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(D,O){var V=this.length-D.length,j=this.clone(),ne=D,re=ne.words[ne.length-1]|0,se=this._countBits(re);V=26-se,V!==0&&(ne=ne.ushln(V),j.iushln(V),re=ne.words[ne.length-1]|0);var ie=j.length-ne.length,A;if(O!=="mod"){A=new o(null),A.length=ie+1,A.words=new Array(A.length);for(var te=0;te<A.length;te++)A.words[te]=0}var _e=j.clone()._ishlnsubmul(ne,1,ie);_e.negative===0&&(j=_e,A&&(A.words[ie]=1));for(var de=ie-1;de>=0;de--){var Me=(j.words[ne.length+de]|0)*67108864+(j.words[ne.length+de-1]|0);for(Me=Math.min(Me/re|0,67108863),j._ishlnsubmul(ne,Me,de);j.negative!==0;)Me--,j.negative=0,j._ishlnsubmul(ne,1,de),j.isZero()||(j.negative^=1);A&&(A.words[de]=Me)}return A&&A.strip(),j.strip(),O!=="div"&&V!==0&&j.iushrn(V),{div:A||null,mod:j}},o.prototype.divmod=function(D,O,V){if(n(!D.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var j,ne,re;return this.negative!==0&&D.negative===0?(re=this.neg().divmod(D,O),O!=="mod"&&(j=re.div.neg()),O!=="div"&&(ne=re.mod.neg(),V&&ne.negative!==0&&ne.iadd(D)),{div:j,mod:ne}):this.negative===0&&D.negative!==0?(re=this.divmod(D.neg(),O),O!=="mod"&&(j=re.div.neg()),{div:j,mod:re.mod}):this.negative&D.negative?(re=this.neg().divmod(D.neg(),O),O!=="div"&&(ne=re.mod.neg(),V&&ne.negative!==0&&ne.isub(D)),{div:re.div,mod:ne}):D.length>this.length||this.cmp(D)<0?{div:new o(0),mod:this}:D.length===1?O==="div"?{div:this.divn(D.words[0]),mod:null}:O==="mod"?{div:null,mod:new o(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new o(this.modn(D.words[0]))}:this._wordDiv(D,O)},o.prototype.div=function(D){return this.divmod(D,"div",!1).div},o.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},o.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},o.prototype.divRound=function(D){var O=this.divmod(D);if(O.mod.isZero())return O.div;var V=O.div.negative!==0?O.mod.isub(D):O.mod,j=D.ushrn(1),ne=D.andln(1),re=V.cmp(j);return re<0||ne===1&&re===0?O.div:O.div.negative!==0?O.div.isubn(1):O.div.iaddn(1)},o.prototype.modn=function(D){n(D<=67108863);for(var O=(1<<26)%D,V=0,j=this.length-1;j>=0;j--)V=(O*V+(this.words[j]|0))%D;return V},o.prototype.idivn=function(D){n(D<=67108863);for(var O=0,V=this.length-1;V>=0;V--){var j=(this.words[V]|0)+O*67108864;this.words[V]=j/D|0,O=j%D}return this.strip()},o.prototype.divn=function(D){return this.clone().idivn(D)},o.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var O=this,V=D.clone();O.negative!==0?O=O.umod(D):O=O.clone();for(var j=new o(1),ne=new o(0),re=new o(0),se=new o(1),ie=0;O.isEven()&&V.isEven();)O.iushrn(1),V.iushrn(1),++ie;for(var A=V.clone(),te=O.clone();!O.isZero();){for(var _e=0,de=1;!(O.words[0]&de)&&_e<26;++_e,de<<=1);if(_e>0)for(O.iushrn(_e);_e-- >0;)(j.isOdd()||ne.isOdd())&&(j.iadd(A),ne.isub(te)),j.iushrn(1),ne.iushrn(1);for(var Me=0,He=1;!(V.words[0]&He)&&Me<26;++Me,He<<=1);if(Me>0)for(V.iushrn(Me);Me-- >0;)(re.isOdd()||se.isOdd())&&(re.iadd(A),se.isub(te)),re.iushrn(1),se.iushrn(1);O.cmp(V)>=0?(O.isub(V),j.isub(re),ne.isub(se)):(V.isub(O),re.isub(j),se.isub(ne))}return{a:re,b:se,gcd:V.iushln(ie)}},o.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var O=this,V=D.clone();O.negative!==0?O=O.umod(D):O=O.clone();for(var j=new o(1),ne=new o(0),re=V.clone();O.cmpn(1)>0&&V.cmpn(1)>0;){for(var se=0,ie=1;!(O.words[0]&ie)&&se<26;++se,ie<<=1);if(se>0)for(O.iushrn(se);se-- >0;)j.isOdd()&&j.iadd(re),j.iushrn(1);for(var A=0,te=1;!(V.words[0]&te)&&A<26;++A,te<<=1);if(A>0)for(V.iushrn(A);A-- >0;)ne.isOdd()&&ne.iadd(re),ne.iushrn(1);O.cmp(V)>=0?(O.isub(V),j.isub(ne)):(V.isub(O),ne.isub(j))}var _e;return O.cmpn(1)===0?_e=j:_e=ne,_e.cmpn(0)<0&&_e.iadd(D),_e},o.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var O=this.clone(),V=D.clone();O.negative=0,V.negative=0;for(var j=0;O.isEven()&&V.isEven();j++)O.iushrn(1),V.iushrn(1);do{for(;O.isEven();)O.iushrn(1);for(;V.isEven();)V.iushrn(1);var ne=O.cmp(V);if(ne<0){var re=O;O=V,V=re}else if(ne===0||V.cmpn(1)===0)break;O.isub(V)}while(!0);return V.iushln(j)},o.prototype.invm=function(D){return this.egcd(D).a.umod(D)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(D){return this.words[0]&D},o.prototype.bincn=function(D){n(typeof D=="number");var O=D%26,V=(D-O)/26,j=1<<O;if(this.length<=V)return this._expand(V+1),this.words[V]|=j,this;for(var ne=j,re=V;ne!==0&&re<this.length;re++){var se=this.words[re]|0;se+=ne,ne=se>>>26,se&=67108863,this.words[re]=se}return ne!==0&&(this.words[re]=ne,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(D){var O=D<0;if(this.negative!==0&&!O)return-1;if(this.negative===0&&O)return 1;this.strip();var V;if(this.length>1)V=1;else{O&&(D=-D),n(D<=67108863,"Number is too big");var j=this.words[0]|0;V=j===D?0:j<D?-1:1}return this.negative!==0?-V|0:V},o.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var O=this.ucmp(D);return this.negative!==0?-O|0:O},o.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var O=0,V=this.length-1;V>=0;V--){var j=this.words[V]|0,ne=D.words[V]|0;if(j!==ne){j<ne?O=-1:j>ne&&(O=1);break}}return O},o.prototype.gtn=function(D){return this.cmpn(D)===1},o.prototype.gt=function(D){return this.cmp(D)===1},o.prototype.gten=function(D){return this.cmpn(D)>=0},o.prototype.gte=function(D){return this.cmp(D)>=0},o.prototype.ltn=function(D){return this.cmpn(D)===-1},o.prototype.lt=function(D){return this.cmp(D)===-1},o.prototype.lten=function(D){return this.cmpn(D)<=0},o.prototype.lte=function(D){return this.cmp(D)<=0},o.prototype.eqn=function(D){return this.cmpn(D)===0},o.prototype.eq=function(D){return this.cmp(D)===0},o.red=function(D){return new G(D)},o.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(D){return this.red=D,this},o.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},o.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},o.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},o.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},o.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},o.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},o.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},o.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var M={k256:null,p224:null,p192:null,p25519:null};function W(I,D){this.name=I,this.p=new o(D,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var D=new o(null);return D.words=new Array(Math.ceil(this.n/13)),D},W.prototype.ireduce=function(D){var O=D,V;do this.split(O,this.tmp),O=this.imulK(O),O=O.iadd(this.tmp),V=O.bitLength();while(V>this.n);var j=V<this.n?-1:O.ucmp(this.p);return j===0?(O.words[0]=0,O.length=1):j>0?O.isub(this.p):O.strip!==void 0?O.strip():O._strip(),O},W.prototype.split=function(D,O){D.iushrn(this.n,0,O)},W.prototype.imulK=function(D){return D.imul(this.k)};function F(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,W),F.prototype.split=function(D,O){for(var V=4194303,j=Math.min(D.length,9),ne=0;ne<j;ne++)O.words[ne]=D.words[ne];if(O.length=j,D.length<=9){D.words[0]=0,D.length=1;return}var re=D.words[9];for(O.words[O.length++]=re&V,ne=10;ne<D.length;ne++){var se=D.words[ne]|0;D.words[ne-10]=(se&V)<<4|re>>>22,re=se}re>>>=22,D.words[ne-10]=re,re===0&&D.length>10?D.length-=10:D.length-=9},F.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var O=0,V=0;V<D.length;V++){var j=D.words[V]|0;O+=j*977,D.words[V]=O&67108863,O=j*64+(O/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function Q(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Q,W);function z(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(z,W);function $(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,W),$.prototype.imulK=function(D){for(var O=0,V=0;V<D.length;V++){var j=(D.words[V]|0)*19+O,ne=j&67108863;j>>>=26,D.words[V]=ne,O=j}return O!==0&&(D.words[D.length++]=O),D},o._prime=function(D){if(M[D])return M[D];var O;if(D==="k256")O=new F;else if(D==="p224")O=new Q;else if(D==="p192")O=new z;else if(D==="p25519")O=new $;else throw new Error("Unknown prime "+D);return M[D]=O,O};function G(I){if(typeof I=="string"){var D=o._prime(I);this.m=D.p,this.prime=D}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}G.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},G.prototype._verify2=function(D,O){n((D.negative|O.negative)===0,"red works only with positives"),n(D.red&&D.red===O.red,"red works only with red numbers")},G.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},G.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},G.prototype.add=function(D,O){this._verify2(D,O);var V=D.add(O);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},G.prototype.iadd=function(D,O){this._verify2(D,O);var V=D.iadd(O);return V.cmp(this.m)>=0&&V.isub(this.m),V},G.prototype.sub=function(D,O){this._verify2(D,O);var V=D.sub(O);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},G.prototype.isub=function(D,O){this._verify2(D,O);var V=D.isub(O);return V.cmpn(0)<0&&V.iadd(this.m),V},G.prototype.shl=function(D,O){return this._verify1(D),this.imod(D.ushln(O))},G.prototype.imul=function(D,O){return this._verify2(D,O),this.imod(D.imul(O))},G.prototype.mul=function(D,O){return this._verify2(D,O),this.imod(D.mul(O))},G.prototype.isqr=function(D){return this.imul(D,D.clone())},G.prototype.sqr=function(D){return this.mul(D,D)},G.prototype.sqrt=function(D){if(D.isZero())return D.clone();var O=this.m.andln(3);if(n(O%2===1),O===3){var V=this.m.add(new o(1)).iushrn(2);return this.pow(D,V)}for(var j=this.m.subn(1),ne=0;!j.isZero()&&j.andln(1)===0;)ne++,j.iushrn(1);n(!j.isZero());var re=new o(1).toRed(this),se=re.redNeg(),ie=this.m.subn(1).iushrn(1),A=this.m.bitLength();for(A=new o(2*A*A).toRed(this);this.pow(A,ie).cmp(se)!==0;)A.redIAdd(se);for(var te=this.pow(A,j),_e=this.pow(D,j.addn(1).iushrn(1)),de=this.pow(D,j),Me=ne;de.cmp(re)!==0;){for(var He=de,st=0;He.cmp(re)!==0;st++)He=He.redSqr();n(st<Me);var Dt=this.pow(te,new o(1).iushln(Me-st-1));_e=_e.redMul(Dt),te=Dt.redSqr(),de=de.redMul(te),Me=st}return _e},G.prototype.invm=function(D){var O=D._invmp(this.m);return O.negative!==0?(O.negative=0,this.imod(O).redNeg()):this.imod(O)},G.prototype.pow=function(D,O){if(O.isZero())return new o(1).toRed(this);if(O.cmpn(1)===0)return D.clone();var V=4,j=new Array(1<<V);j[0]=new o(1).toRed(this),j[1]=D;for(var ne=2;ne<j.length;ne++)j[ne]=this.mul(j[ne-1],D);var re=j[0],se=0,ie=0,A=O.bitLength()%26;for(A===0&&(A=26),ne=O.length-1;ne>=0;ne--){for(var te=O.words[ne],_e=A-1;_e>=0;_e--){var de=te>>_e&1;if(re!==j[0]&&(re=this.sqr(re)),de===0&&se===0){ie=0;continue}se<<=1,se|=de,ie++,!(ie!==V&&(ne!==0||_e!==0))&&(re=this.mul(re,j[se]),ie=0,se=0)}A=26}return re},G.prototype.convertTo=function(D){var O=D.umod(this.m);return O===D?O.clone():O},G.prototype.convertFrom=function(D){var O=D.clone();return O.red=null,O},o.mont=function(D){return new Y(D)};function Y(I){G.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Y,G),Y.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},Y.prototype.convertFrom=function(D){var O=this.imod(D.mul(this.rinv));return O.red=null,O},Y.prototype.imul=function(D,O){if(D.isZero()||O.isZero())return D.words[0]=0,D.length=1,D;var V=D.imul(O),j=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=V.isub(j).iushrn(this.shift),re=ne;return ne.cmp(this.m)>=0?re=ne.isub(this.m):ne.cmpn(0)<0&&(re=ne.iadd(this.m)),re._forceRed(this)},Y.prototype.mul=function(D,O){if(D.isZero()||O.isZero())return new o(0)._forceRed(this);var V=D.mul(O),j=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ne=V.isub(j).iushrn(this.shift),re=ne;return ne.cmp(this.m)>=0?re=ne.isub(this.m):ne.cmpn(0)<0&&(re=ne.iadd(this.m)),re._forceRed(this)},Y.prototype.invm=function(D){var O=this.imod(D._invmp(this.m).mul(this.r2));return O._forceRed(this)}})(r,ku)}(mR)),mR.exports}/**@license
 * LIPS is Pretty Simple - simple scheme like lisp in JavaScript
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * includes:
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 */var Jte;function JGe(){return Jte||(Jte=1,function(r){(function(e,t){r.exports?r.exports=t(e,QGe()):e.lips=t(e,e.BN)})(typeof ku<"u"?ku:window,function(e,t,n){function i(R,K){var ce=!1,pe=!0,Ne=R.document,Se=Ne.documentElement,Je=Ne.addEventListener,ht=Je?"addEventListener":"attachEvent",It=Je?"removeEventListener":"detachEvent",Vt=Je?"":"on",pn=function(mn){mn.type=="readystatechange"&&Ne.readyState!="complete"||((mn.type=="load"?R:Ne)[It](Vt+mn.type,pn,!1),!ce&&(ce=!0)&&K.call(R,mn.type||mn))},tn=function(){try{Se.doScroll("left")}catch{setTimeout(tn,50);return}pn("poll")};if(Ne.readyState=="complete")K.call(R,"lazy");else{if(!Je&&Se.doScroll){try{pe=!R.frameElement}catch{}pe&&tn()}Ne[ht](Vt+"DOMContentLoaded",pn,!1),Ne[ht](Vt+"readystatechange",pn,!1),R[ht](Vt+"load",pn,!1)}}e.fetch||(e.fetch=function(R,K){return K=K||{},new Promise((ce,pe)=>{let Ne=new XMLHttpRequest;Ne.open(K.method||"get",R,!0);for(let Je in K.headers)Ne.setRequestHeader(Je,K.headers[Je]);Ne.withCredentials=K.credentials=="include",Ne.onload=()=>{ce(Se())},Ne.onerror=pe,Ne.send(K.body||null);function Se(){let Je=[],ht=[],It={},Vt;return Ne.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(pn,tn,mn)=>{Je.push(tn=tn.toLowerCase()),ht.push([tn,mn]),Vt=It[tn],It[tn]=Vt?`${Vt},${mn}`:mn}),{ok:(Ne.status/100|0)==2,status:Ne.status,statusText:Ne.statusText,url:Ne.responseURL,clone:Se,text:()=>Promise.resolve(Ne.responseText),json:()=>Promise.resolve(Ne.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([Ne.response])),headers:{keys:()=>Je,entries:()=>ht,get:pn=>It[pn.toLowerCase()],has:pn=>pn.toLowerCase()in It}}}})});var o=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,s=/^[-+]?[0-9]+([eE][-+]?[0-9]+)?$/,a=/^([-+]?((\.[0-9]+|[0-9]+\.[0-9]+)([eE][-+]?[0-9]+)?)|[0-9]+\.)$/;function l(R){function K(pe){if(pe.match(/^['"]/)){if(pe==='""'||pe==="''")return"";var Ne=pe[0],Se=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+Ne,"g");pe=pe.replace(Se,"$1")}return JSON.parse('"'+pe.replace(/\n/g,"\\n")+'"')}var ce=R.match(o);return ce?new RegExp(ce[1],ce[2]):R.match(/['"]/)?K(R):R.match(s)?nt(parseFloat(R)):R.match(a)?nt(parseFloat(R),!0):R==="nil"?_e:R==="true"?!0:R==="false"?!1:new A(R)}function u(R){return!(["(",")"].includes(R)||R.match(o)||R.match(/['"]/)||R.match(s)||R.match(a)||["nil","true","false"].includes(R))}var d=/("(?:\\[\S\s]|[^"])*"|\/(?! )[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|\(|\)|$)|;.*)/g,h=/"(?:\\[\S\s]|[^"])*"/g;function p(){var R=Object.keys(T).map(C).join("|");return new RegExp(`("(?:\\\\[\\S\\s]|[^"])*"|\\/(?! )[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|\\(|\\)|$)|\\(|\\)|'|"(?:\\\\[\\S\\s]|[^"])+|\\n|(?:\\\\[\\S\\s]|[^"])*"|;.*|(?:[-+]?(?:(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)[0-9]|\\.{2,}|${R}|[^(\\s)]+)`,"gim")}function _(R,K=1){return R[R.length-K]}function C(R){if(typeof R=="string"){var K=/([-\\^$[\]()+{}?*.|])/g;return R.replace(K,"\\$1")}}function S(R){var K=p();R=R.replace(/\n\r|\r/g,`
`);var ce=0,pe=0,Ne=[],Se=[],Je=0;return R.split(d).filter(Boolean).forEach(function(ht){if(ht.match(d)){if(Je=0,Se.length){var It=_(Se);if(It.token.match(/\n/)){var Vt=It.token.split(`
`).pop();Je+=Vt.length}else Je+=It.token.length;Je+=It.col}var pn={col:Je,line:pe,token:ht,offset:ce};Ne.push(pn),Se.push(pn),ce+=ht.length,Je+=ht.length,pe+=(ht.match(`
`)||[]).length;return}ht.split(K).filter(Boolean).forEach(function(tn){var mn={col:Je,line:pe,token:tn,offset:ce};Je+=tn.length,ce+=tn.length,Ne.push(mn),Se.push(mn),tn===`
`&&(++pe,Se=[],Je=0)})}),Ne}function x(R,K){return K?S(R):S(R).map(function(ce){return ce.token.trim()}).filter(function(ce){return ce&&!ce.match(/^;/)})}var T={"'":new A("quote"),"`":new A("quasiquote"),",@":new A("unquote-splicing"),",":new A("unquote")};function k(R){typeof R=="string"&&(R=x(R));var K=[],ce=[],pe=null,Ne=Object.keys(T),Se=Ne.map(mn=>T[mn].name),Je=0,ht=!1,It=[],Vt=[],pn=0;function tn(){var mn=K[K.length-1];mn instanceof Array&&mn[0]instanceof A&&Se.includes(mn[0].name)&&K.length>1&&!mn[0].literal&&(K.pop(),K[K.length-1].length===1&&K[K.length-1][0]instanceof A?K[K.length-1].push(mn):K[K.length-1]instanceof de?K[K.length-1].cdr instanceof de?K[K.length-1]=new de(K[K.length-1],de.fromArray(mn)):K[K.length-1].cdr=de.fromArray(mn):K[K.length-1].push(mn))}if(R.forEach(function(mn){var Jt=K[K.length-1];if(Ne.indexOf(mn)!==-1)pn++,pe=mn,K.push([T[pe]]),pe||(Vt=[]),Vt.push(pe);else if(pe&&(It.push(Vt),Vt=[]),mn==="(")ht=!0,Je++,K.push([]),pe=null,pn=0;else if(mn==="."&&!ht)K[K.length-1]=de.fromArray(Jt);else if(mn===")"){if(Je--,!K.length)throw new Error("Unbalanced parenthesis");if(K.length===1)ce.push(K.pop());else if(K.length>1){var qi=K.pop();if(Jt=K[K.length-1],Jt instanceof Array?Jt.push(qi):Jt instanceof de&&Jt.append(de.fromArray(qi)),It.length)for(Vt=It.pop();Vt.length;)tn(),Vt.pop();else tn()}Je===0&&K.length&&ce.push(K.pop())}else{ht=!1;var Ci=l(mn);if(pe){for(;pn--;)K[K.length-1].push(Ci),Ci=K.pop();It.pop(),pn=0,pe=!1}else Ci instanceof A&&Se.includes(Ci.name)&&(Ci.literal=!0);if(Jt=K[K.length-1],Jt instanceof de)for(var Rr=Jt;;)if(Rr.cdr===_e){Ci instanceof Array?Rr.cdr=de.fromArray(Ci):Rr.cdr=Ci;break}else Rr=Rr.cdr;else K.length?Jt.push(Ci):ce.push(Ci)}}),!R.filter(mn=>mn.match(/^[()]$/)).length&&K.length&&(ce=ce.concat(K),K=[]),K.length)throw new Error("Unbalanced parenthesis 2");return ce.map(mn=>mn instanceof Array?de.fromArray(mn):mn)}function M(R,K=pe=>pe,ce=null){if(sn(R)){var pe=R.then(K);return ce===null?pe:pe.catch(ce)}return K(R)}function W(R,K){if(K instanceof RegExp)return ce=>String(ce).match(K);if(typeof K!="function")throw new Error(`${R} argument need to be a function or RegExp`);return K}function F(R,K,ce){return K&&(ce?R.__doc__=K:R.__doc__=Q(K)),R}function Q(R){return R.split(`
`).map(K=>K.trim()).join(`
`)}function z(R,K=1){var ce=R.length;if(K<=0)throw Error(`previousSexp: Invlaid argument sexp = ${K}`);e:for(;K--&&ce>=0;){for(var pe=1;pe>0;){var Ne=R[--ce];if(!Ne)break e;Ne==="("||Ne.token==="("?pe--:(Ne===")"||Ne.token===")")&&pe++}ce--}return R.slice(ce+1)}function $(R){if(!R||!R.length)return 0;var K=R.length;if(R[K-1].token===`
`)return 0;for(;--K;)if(R[K].token===`
`){var ce=(R[K+1]||{}).token;if(ce)return ce.length}return 0}function G(R,K){return ce(R,K)===K.length;function ce(pe,Ne){function Se(){return ht>0&&Vt>0&&pe[ht-1]===Ne[Vt-1]&&pe[ht+1]===Ne[Vt]}function Je(){return pe[ht]===Symbol.for("symbol")&&!u(Ne[Vt])}for(var ht=0,It={},Vt=0;Vt<Ne.length;++Vt){if(typeof pe[ht]>"u")return Vt;if(Ne[Vt].trim()){if(pe[ht]instanceof D){if(pe[ht].flag==="+"){for(var pn;Vt<Ne.length&&(pn=ce(pe[ht].pattern,Ne.slice(Vt)),pn!==-1);)Vt+=pn;if(pn===-1&&Ne[Vt]&&!pe[ht+1])return-1;ht++,Vt-=1;continue}else if(pe[ht].flag==="?"){pn=ce(pe[ht].pattern,Ne.slice(Vt)),pn===-1?Vt-=2:ht++;continue}}if(pe[ht]instanceof RegExp){if(!Ne[Vt].match(pe[ht]))return-1}else if(typeof pe[ht]=="string"){if(pe[ht]!==Ne[Vt])return-1}else if(typeof pe[ht]=="symbol"){if(pe[ht]===Symbol.for("*")){if(It[ht]=It[ht]||0,Ne[Vt]==="("?It[ht]++:Ne[Vt]===")"&&It[ht]--,Se())Vt-=1;else if(typeof pe[ht+1]<"u"&&It[ht]===0&&pe[ht+1]!==Ne[Vt+1]||It[ht]>0)continue}else if(Je())return-1}else if(pe[ht]instanceof Array){var tn=ce(pe[ht],Ne.slice(Vt));if(tn===-1||tn+Vt>Ne.length)return-1;Vt+=tn-1,ht++;continue}else return-1;ht++}}return pe.length!==ht?-1:Ne.length}}function Y(R){this._code=R.replace(/\r/g,"")}Y.defaults={offset:0,indent:2,specials:[/^define/,"lambda","let","let*"]},Y.match=G,Y.prototype._options=function(K){var ce=Y.defaults;if(typeof K>"u")return Object.assign({},ce);var pe=K&&K.specials||[];return Object.assign({},ce,K,{specials:ce.specials.concat(pe)})},Y.prototype.indent=function(K){var ce=x(this._code,!0);return this._indent(ce,K)},Y.matchSpecial=function(R,K){var ce=K.specials;if(ce.indexOf(R)!==-1)return!0;var pe=ce.filter(Ne=>Ne instanceof RegExp);for(let Ne of pe)if(R.match(Ne))return!0;return!1},Y.prototype._indent=function(K,ce){var pe=this._options(ce),Ne=$(K),Se=z(K);if(Se&&Se.length){if(Se[0].line>0&&(pe.offset=0),Se.toString()===K.toString()&&pt(Se))return pe.offset+Se[0].col;if(Se.length===1)return pe.offset+Se[0].col+1;if(Y.matchSpecial(Se[1].token,pe))return pe.offset+Se[0].col+pe.indent;if(Se[0].line<Se[1].line)return pe.offset+Se[0].col+1;if(Se.length>3&&Se[1].line===Se[3].line)return Se[1].token==="("?pe.offset+Se[1].col:pe.offset+Se[3].col;if(Se[0].line===Se[1].line)return pe.offset+pe.indent+Se[0].col;for(var Je=Se.slice(2),ht=0;ht<Je.length;++ht){var It=Je[ht];if(It.token.trim())return It.col}}else return 0;return Ne+pe.indent};function I(R){this.pattern=R}I.prototype.match=function(R){return R.match(this.pattern)};function D(R,K){this.pattern=R,this.flag=K}Y.Pattern=D,Y.Ahead=I;const O=new I(/[^)]/),V=Symbol.for("*"),j=new D(["(",V,")"],"+"),ne=new D([Symbol.for("symbol")],"?"),re=new D(["(",Symbol.for("symbol"),V,")"],"+");Y.rules=[[["(","begin"],1],[["(","begin",j],1,O],[["(",/^let\*?$/,ne,"(",re,")"],1],[["(",/^let\*?$/,ne,"(",re],2,O],[["(",/^let\*?$/,ne,["(",re,")"],j],1,O],[[/(?!lambda)/,"(",V,")"],1,O],[["(","if",/[^()]/],1],[["(","if",/[^()]/,V],1],[["(","if",["(",V,")"]],1],[["(","if",["(",V,")"],/[^()]/],1],[["(","if",["(",V,")"],["(",V,")"]],1,O],[["(",/^(define|lambda)/,["(",V,")"],h],1],[["(",/^(define|lambda)/,"(",V,")"],1],[["(",/^(define|lambda)/,["(",V,")"],h,j],1,O],[["(",/^(define|lambda)/,["(",V,")"],j],1,O]],Y.prototype.break=function(){var R=this._code.replace(/\n[ \t]*/g,`
 `);const K=It=>It.token.match(h)?It.token:It.token.replace(/\s+/," ");var ce=x(R,!0).map(K).filter(It=>It!==`
`);const{rules:pe}=Y;for(let It=0;It<ce.length;++It)if(ce[It].trim()){var Ne=ce.slice(0,It),Se={};pe.map(Vt=>Vt[1]).forEach(Vt=>{Se[Vt]||(Se[Vt]=z(Ne,Vt))});for(let[Vt,pn,tn]of pe){var Je=G(Vt,Se[pn].filter(mn=>mn.trim())),ht=ce.slice(It).find(mn=>mn.trim());if(Je&&(tn instanceof I&&tn.match(ht)||!tn)){ce.splice(It,0,`
`),It++;continue}}}return this._code=ce.join(""),this},Y.prototype._spaces=function(R){return new Array(R+1).join(" ")},Y.prototype.format=function(K){for(var ce=this._code.replace(/[ \t]*\n[ \t]*/g,`
 `),pe=x(ce,!0),Ne=this._options(K),Se=0,Je=0,ht=0;ht<pe.length;++ht){var It=pe[ht];if(It.token===`
`&&(Se=this._indent(pe.slice(0,ht),Ne),Je+=Se,pe[ht+1])){pe[ht+1].token=this._spaces(Se),Se--,Je--;for(var Vt=ht+2;Vt<pe.length;++Vt)if(pe[Vt].offset+=Je,pe[Vt].col+=Se,pe[Vt].token===`
`){ht=Vt-1;break}}}return pe.map(pn=>{if(pn.token.match(h)&&pn.token.match(/\n/)){var tn=new Array(pn.col+1).join(" "),mn=pn.token.split(`
`);pn.token=[mn[0]].concat(mn.slice(1).map(Jt=>tn+Jt)).join(`
`)}return pn.token}).join("")};function se(R,K){var ce=Object.prototype.toString,pe="[object Array]",Ne=[],Se=K&&R||R.slice(),Je;if(!R.length)return Ne;Je=Se.pop();do ce.call(Je)===pe?Se.push.apply(Se,Je):Ne.push(Je);while(Se.length&&(Je=Se.pop())!==n);return Ne.reverse(),Ne}function ie(R){return typeof R=="symbol"||typeof R=="object"&&Object.prototype.toString.call(R)==="[object Symbol]"}function A(R){if(typeof this<"u"&&this.constructor!==A||typeof this>"u")return new A(R);this.name=R}A.is=function(R,K){return R instanceof A&&(typeof K=="string"&&R.name===K||K instanceof RegExp&&K.test(R.name))},A.prototype.toJSON=A.prototype.toString=function(){return ie(this.name)?this.name.toString().replace(/^Symbol\(([^)]+)\)/,"$1"):this.name};function te(){}te.prototype.toString=function(){return"()"};var _e=new te;function de(R,K){if(typeof this<"u"&&this.constructor!==de||typeof this>"u")return new de(R,K);this.car=R,this.cdr=K}function Me(){return new de(n,_e)}function He(R,K){return function(pe){if(Ct(R,pe,["pair","nil"]),pe instanceof de&&pe.isEmptyList())return[];for(var Ne=[],Se=pe;Se instanceof de;){if(Se.haveCycles("cdr"))break;var Je=Se.car;K&&Je instanceof de&&(Je=this.get(R).call(this,Je)),Ne.push(Je),Se=Se.cdr}return Ne}}de.prototype.flatten=function(){return de.fromArray(se(this.toArray()))},de.prototype.length=function(){if(lt(this))return 0;for(var R=0,K=this;!(!K||K===_e||!(K instanceof de)||K.haveCycles("cdr"));)R++,K=K.cdr;return R},de.prototype.clone=function(){var R=new Map;function K(ce){if(ce instanceof de){if(R.has(ce))return R.get(ce);var pe=new de;return R.set(ce,pe),pe.car=K(ce.car),pe.cdr=K(ce.cdr),pe.cycles=ce.cycles,pe}return ce}return K(this)},de.prototype.toArray=function(){if(this.isEmptyList())return[];var R=[];return this.car instanceof de?R.push(this.car.toArray()):R.push(this.car),this.cdr instanceof de&&(R=R.concat(this.cdr.toArray())),R},de.prototype.isEmptyList=function(){return typeof this.car>"u"&&this.cdr===_e},de.fromArray=function(R){if(R instanceof de)return R;if(R.length&&!(R instanceof Array)&&(R=[...R]),R.length===0)return Me();var K;return R[0]instanceof Array?K=de.fromArray(R[0]):K=R[0],R.length===1?new de(K,_e):new de(K,de.fromArray(R.slice(1)))},de.prototype.toObject=function(){for(var R=this,K={};R instanceof de&&R.car instanceof de;){var ce=R.car,pe=ce.car;pe instanceof A&&(pe=pe.name);var Ne=ce.cdr;Ne instanceof de&&(Ne=Ne.toObject()),Ne instanceof nt&&(Ne=Ne.valueOf()),K[pe]=Ne,R=R.cdr}return K},de.fromPairs=function(R){return R.reduce((K,ce)=>new de(new de(new A(ce[0]),ce[1]),K),_e)},de.fromObject=function(R){var K=Object.keys(R).map(ce=>[ce,R[ce]]);return de.fromPairs(K)},de.prototype.reduce=function(R){for(var K=this,ce=_e;K!==_e;)ce=R(ce,K.car),K=K.cdr;return ce},de.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var R=this,K=_e;R!==_e;){var ce=R.cdr;R.cdr=K,K=R,R=ce}return K},de.prototype.transform=function(R){function K(ce){if(ce instanceof de){if(ce.replace)return delete ce.replace,ce;var pe=R(ce.car);pe instanceof de&&(pe=K(pe));var Ne=R(ce.cdr);return Ne instanceof de&&(Ne=K(Ne)),new de(pe,Ne)}return ce}return K(this)},de.prototype.map=function(R){return typeof this.car<"u"?new de(R(this.car),lt(this.cdr)?_e:this.cdr.map(R)):_e};function st(R){if(typeof R=="function")return"<#function "+(R.name||"anonymous")+">";if(typeof R=="string")return JSON.stringify(R).replace(/\\n/g,`
`);if(sn(R))return"<#Promise>";if(R instanceof A||R instanceof nt||R instanceof RegExp||R instanceof de||R===_e)return R.toString();if(R instanceof Array)return R.map(st);if(typeof R=="object"){if(R===null)return"null";var K=R.constructor.name;return K==="Object"?JSON.stringify(R):"<#object("+R.constructor.name+")>"}else if(typeof R<"u")return R}de.prototype.markCycles=function(){return Dt(this),this},de.prototype.haveCycles=function(R=null){return R?!!(this.cycles&&this.cycles[R]):this.haveCycles("car")||this.haveCycles("cdr")};function Dt(R){var K=[],ce=[];function pe(Se){if(Se instanceof de&&K.includes(Se))return ce.includes(Se)||ce.push(Se),`#${ce.length-1}#`}function Ne(Se){if(Se instanceof de){K.push(Se);var Je={},ht=pe(Se.car),It=pe(Se.cdr);ht?Je.car=ht:Ne(Se.car),It?Je.cdr=It:Ne(Se.cdr),ht||It?Se.cycles=Je:Se.cycles&&delete Se.cycles}}Ne(R)}de.prototype.toString=function(){var R=["("];if(this.car!==n){var K;if(this.cycles&&this.cycles.car?K=this.cycles.car:K=st(this.car),K!==n&&R.push(K),this.cdr instanceof de)if(this.cycles&&this.cycles.cdr)R.push(" . "),R.push(this.cycles.cdr);else{var ce;this.cycles&&this.cycles.cdr&&(ce=this.cycles.cdr);var pe=this.cdr.toString(ce).replace(/^\(|\)$/g,"");R.push(" "),R.push(pe)}else typeof this.cdr<"u"&&this.cdr!==_e&&(R=R.concat([" . ",st(this.cdr)]))}return R.push(")"),R.join("")},de.prototype.set=function(R,K){this[R]=K,K instanceof de&&this.markCycles()},de.prototype.append=function(R){if(R instanceof Array)return this.append(de.fromArray(R));var K=this;if(K.car===n)R instanceof de?(this.car=R.car,this.cdr=R.cdr):this.car=R;else if(R!==_e){for(;K instanceof de&&K.cdr!==_e;)K=K.cdr;K.cdr=R}return this};function Rt(R,K){return R instanceof nt&&K instanceof nt?R.cmp(K)===0:typeof R=="number"||typeof K=="number"?nt(R).cmp(nt(K)):R instanceof A&&K instanceof A?R.name===K.name:R===K}function lt(R){return R instanceof de&&R.isEmptyList()||R===_e}function xt(R,K,ce){if(typeof this<"u"&&this.constructor!==xt||typeof this>"u")return new xt(R,K);Ct("Macro",R,"string",1),Ct("Macro",K,"function",2),ce&&(this.__doc__=Q(ce)),this.name=R,this.fn=K}xt.defmacro=function(R,K,ce){var pe=new xt(R,K,ce);return pe.defmacro=!0,pe},xt.prototype.invoke=function(R,{env:K,dynamic_scope:ce,error:pe},Ne){var Se={dynamic_scope:ce,error:pe,macro_expand:Ne},Je=this.fn.call(K,R,Se,this.name);return Ne?bi(Je):Je},xt.prototype.toString=function(){return"#<Macro "+this.name+">"};var zt="define-macro";function wt(R){return async function(K,ce){var pe=ce.env=this;async function Ne(Je){if(Je instanceof de&&Je.car instanceof A)try{var ht=pe.get(Je.car);if(ht instanceof xt&&ht.defmacro){var It=await ht.invoke(Je.cdr,ce,!0);if(It instanceof de)return It}}catch{}var Vt=Je.car;Vt instanceof de&&(Vt=await Ne(Vt));var pn=Je.cdr;pn instanceof de&&(pn=await Ne(pn));var tn=new de(Vt,pn);return tn}var Se=K;if(R)return bi((await Ne(K)).car);for(;Se=await Ne(K),K.toString()!==Se.toString();)K=Se;return bi(Se.car)}}function dn(R){return typeof R>"u"||R===_e||R===null}function sn(R){return R instanceof Promise||R&&typeof R<"u"&&typeof R.then=="function"}function Pt(R,K,...ce){let pe=function(...Ne){const Se=[...pe.__bind.args,...Ne];return pe.__bind.fn.apply(K,Se)};return Ft(pe,"name",R.name),Ft(pe,"__bound__",!0),R.__doc__&&(pe.__doc__=R.__doc__),R.__code__&&(pe.__code__=R.__code__),pe.__bind={args:R.__bind?R.__bind.args.concat(ce):ce,fn:R.__bind?R.__bind.fn:R},pe.toString=function(){return pe.__bind.fn.toString()},pe.apply=function(Ne,Se){return pe.__bind.fn.apply(Ne,Se)},pe.call=function(Ne,...Se){return pe.__bind.fn.call(Ne,...Se)},pe.bind=function(Ne,...Se){return Pt(pe,Ne,...Se)},mt(pe,pe.__bind.fn.length)}function ei(R){return typeof R=="function"&&R.__bind?R.__bind.fn:R}var xn=["name","length","caller","callee","arguments","prototype"];function un(R){return!xn.includes(R)}function Ft(R,K,ce){Object.defineProperty(R,Symbol.for(K),{get:()=>ce,set:()=>{},configurable:!1,enumerable:!1})}function Bt(R,K){const ce=R.bind(K);return Object.getOwnPropertyNames(R).filter(un).forEach(Ne=>{ce[Ne]=R[Ne]}),Ft(ce,"__bound__",!0),Qt(R)&&Ft(ce,"__native__",!0),ce}function Tt(R){if(typeof R=="fuction")return R.__bound__=!1,R.__bound__===!0}function mt(R,K){try{return Object.defineProperty(R,"length",{get:function(){return K}}),R}catch{var ce=new Array(K).fill(0).map((Se,Je)=>"a"+Je).join(","),pe=new Function("f",`return function(${ce}) {
                return f.apply(this, arguments);
            };`);return pe(R)}}function Qt(R){var K=Symbol.for("__native__");return typeof R=="function"&&R.toString().match(/\{\s*\[native code\]\s*\}/)&&(R.name.match(/^bound /)&&R[K]===!0||!R.name.match(/^bound /)&&!R[K])}function fn(R){var K="let"+(R?"*":"");return xt.defmacro(K,function(ce,pe){var{dynamic_scope:Ne,error:Se,macro_expand:Je}=pe,ht;if(ce.car instanceof A){if(!(ce.cdr.car instanceof de))throw new Error("let require list of pairs");var It=ce.cdr.car.map(mn=>mn.car);return ht=ce.cdr.car.map(mn=>mn.cdr.car),de.fromArray([A("let*"),[[ce.car,de(A("lambda"),de(It,ce.cdr.cdr))]],de(ce.car,ht)])}else if(Je)return;var Vt=this;ht=this.get("list->array")(ce.car);var pn=Vt.inherit("let"),tn=0;return function mn(){var Jt=ht[tn++];function qi(Er){if(sn(Er))return Er.then(qi);typeof Er>"u"?pn.set(Jt.car,_e):pn.set(Jt.car,Er)}if(Ne&&(Ne=R?pn:Vt),Jt){var Rr=Ce(Jt.cdr.car,{env:R?pn:Vt,dynamic_scope:Ne,error:Se});return M(qi(Rr),mn)}else{var Ci=new de(new A("begin"),ce.cdr);return Ce(Ci,{env:pn,dynamic_scope:Ne,error:Se})}}()})}function We(R,K){return new xt(R,function(ce,{dynamic_scope:pe,error:Ne}={}){var Se=this;pe&&(pe=this);for(var Je=ce,ht=[];Je instanceof de&&!lt(Je);)ht.push(Ce(Je.car,{env:Se,dynamic_scope:pe,error:Ne})),Je=Je.cdr;var It=ht.filter(sn).length;return It?Promise.all(ht).then(K.bind(this)):K.call(this,ht)})}function dt(R,...K){return K.forEach(ce=>{Ct("",ce,"number")}),R(...K)}function oe(...R){return R.forEach((K,ce)=>{Ct("pipe",K,"function",ce+1)}),function(...K){return R.reduce((ce,pe)=>[pe(...ce)],K)[0]}}function U(...R){return R.forEach((K,ce)=>{Ct("compose",K,"function",ce+1)}),oe(...R.reverse())}function X(R,K){var ce=this;return function pe(Ne,Se,...Je){return Ct(R,Ne,"function"),Je.some(ht=>lt(ht)||dn(ht))?typeof Se=="number"?nt(Se):Se:K.call(ce,pe,Ne,Se,...Je)}}function we(R,K){return bn(R+1,bt(dt,K))}var Te=bt(we,1),qe=bt(we,2);function ze(R){return function(...K){if(K.length)return K.reduce(qe(R))}}function bt(R,...K){Ct("curry",R,"function");var ce=R.length;return function(){var pe=K.slice();function Ne(...Se){return pe=pe.concat(Se),pe.length>=ce?R.apply(this,pe):Ne}return Ne.apply(this,arguments)}}function bn(R,K){return Ct("limit",K,"function",2),function(...ce){return K(...ce.slice(0,R))}}var En=F(function(K,...ce){typeof K=="function"&&K.__bind&&(K=K.__bind.fn);for(let Se of ce){var pe=Se instanceof A?Se.name:Se,Ne=K[pe];typeof Ne=="function"&&(Ne=Bt(Ne,K)),K=Ne}return Ne},`(. obj . args)
        (get obj . args)

        Function use object as based and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, you can't
        pass it as argument`);function nt(R,K){if(typeof this<"u"&&this.constructor!==nt||typeof this>"u")return new nt(R,K===!0?!0:n);if(R instanceof nt)return nt(R.value,R.float);if(!nt.isNumber(R))throw new Error(`You can't create LNumber from ${et(R)}`);R===null&&(R=0),nt.isFloat(R)?this.value=R:K?(this.value=R,this.float=!0):typeof BigInt<"u"?typeof R!="bigint"?this.value=BigInt(R):this.value=R:typeof t<"u"&&!(R instanceof t)?this.value=new t(R):this.value=R}nt.isFloat=function(K){return Number(K)===K&&K%1!==0},nt.isNumber=function(R){return R instanceof nt||!Number.isNaN(R)&&nt.isNative(R)||nt.isBN(R)},nt.isNative=function(R){return typeof R=="bigint"||typeof R=="number"},nt.isBN=function(R){return typeof t<"u"&&R instanceof t},nt.prototype.toString=nt.prototype.toJSON=function(){return this.value.toString()},nt.prototype.isBigNumber=function(){return typeof this.value=="bigint"||typeof t<"u"&&!(this.value instanceof t)},["floor","ceil","round"].forEach(R=>{nt.prototype[R]=function(){return this.float||nt.isFloat(this.value)?nt(Math[R](this.value)):nt(this.value)}}),nt.prototype.valueOf=function(){if(nt.isNative(this.value))return Number(this.value);if(nt.isBN(this.value))return this.value.toNumber()},nt.prototype.coerce=function(R){R===null&&(R=0);var K;return R instanceof nt?K=R.value:K=R,nt.isFloat(K)||(typeof this.value=="bigint"&&typeof K!="bigint"?K=BigInt(K):typeof t<"u"&&this.value instanceof t&&!K instanceof t&&(K=new t(K))),nt(K)},nt.prototype.isFloat=function(){return!!(nt.isFloat(this.value)||this.float)},nt.prototype.op=function(R,K){var ce={"*":function(Se,Je){return Se*Je},"+":function(Se,Je){return Se+Je},"-":function(Se,Je){return Se-Je},"/":function(Se,Je){return Se/Je},"%":function(Se,Je){return Se%Je},"|":function(Se,Je){return Se|Je},"&":function(Se,Je){return Se&Je},"~":function(Se){return~Se},">>":function(Se,Je){return Se>>Je},"<<":function(Se,Je){return Se<<Je}};if(nt.isFloat(K)||K instanceof nt&&K.isFloat()||this.isFloat()){var pe=K instanceof nt?K.valueOf():K;return nt(ce[R](this.valueOf(),pe),!0)}if(K=this.coerce(K),nt.isNative(K.value)&&nt.isNative(this.value))return nt(ce[R](this.value,K.value));if(nt.isBN(this.value)&&nt.isBN(K.value)){var Ne={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};return R=Ne[R],nt(this.value.clone()[R](K,pe))}};var Mi={"+":"add","-":"sub","*":"mul","/":"div","%":"mod","|":"or","&":"and","~":"neg","<<":"shl",">>":"shr"};Object.keys(Mi).forEach(R=>{nt.prototype[Mi[R]]=function(K){return this.op(R,K)}}),nt.prototype.sqrt=function(){var R;return nt.isNative(this.value)?R=Math.sqrt(this.value):nt.isBN(this.value)&&(R=this.value.sqrt()),new nt(R)},nt.prototype.pow=function(R){if(R=this.coerce(R),nt.isNative(this.value))try{var K=new Function("a,b","return a**b;");R.value=K(this.value,R.value)}catch{throw new Error("Power operator not supported")}else nt.isBN(this.value)?R.value=this.value.pow(R.value):R.value=Math.pow(this.value,R.value);return R},nt.prototype.neg=function(){var R=this.value;return nt.isNative(R)?R=-R:nt.isBN(R)&&(R=R.neg()),new nt(R)},nt.prototype.abs=function(){var R=this.value;return nt.isNative(this.value)?R<0&&(R=-R):nt.isBN(R)&&R.iabs(),new nt(R)},nt.prototype.isOdd=function(){if(nt.isNative(this.value))return this.isBigNumber()?this.value%BigInt(2)===BigInt(1):this.value%2===1;if(nt.isBN(this.value))return this.value.isOdd()},nt.prototype.isEven=function(){return!this.isOdd()},nt.prototype.cmp=function(R){if(R=this.coerce(R),nt.isNative(this.value))return this.value<R.value?-1:this.value===R.value?0:1;if(nt.isBN(this.value))return this.value.cmp(R.value)};function ni(R,K,ce){arguments.length===1&&(typeof arguments[0]=="object"?(R=arguments[0],this.parent=null):typeof arguments[0]=="string"&&(R={},K={},ce=arguments[0])),this.env=R,this.parent=K,this.name=ce||"anonymous"}ni.prototype.inherit=function(R,K={}){return typeof R=="object"&&(K=R),(!R||typeof R=="object")&&(R="child of "+(this.name||"unknown")),new ni(K||{},this,R)},ni.prototype.get=function(R,K={}){const{weak:ce,context:pe=this,throwError:Ne=!0}=K;var Se,Je=!1;if(R instanceof A?R.name in this.env&&(Se=this.env[R.name],Je=!0):typeof R=="string"&&typeof this.env[R]<"u"&&(Se=this.env[R],Je=!0),Je)return nt.isNumber(Se)?nt(Se):Se instanceof de?Se.markCycles():typeof Se=="function"&&Tt(Se)?ce?Pt(Se,pe):Bt(Se,pe):Se;if(this.parent instanceof ni)return this.parent.get(R,{weak:ce,context:pe,throwError:Ne});var ht;if(R instanceof A?ht=R.name:typeof R=="string"&&(ht=R),ht){var It=typeof e[ht];if(It==="function")return Qt(e[ht])?Bt(e[ht],e):e[ht];if(It!=="undefined")return e[ht]}if(Ne)throw ht=(ht.name||ht).toString(),new Error("Unbound variable `"+ht+"'")},ni.prototype.set=function(R,K){nt.isNumber(K)&&(K=nt(K)),R instanceof A&&(R=R.name),this.env[R]=K},ni.prototype.has=function(R){return typeof this.env[R]<"u"},ni.prototype.ref=function(R){for(var K=this;K;){if(K.has(R))return K;K=K.parent}},ni.prototype.parents=function(){for(var R=this,K=[];R;)K.unshift(R),R=R.parent;return K};function bi(R){return sn(R)?R.then(bi):((R instanceof de||R instanceof A)&&(R.data=!0),R)}var Qs=function(){var R=0;return function(K=null){return K!==null?new A(Symbol(`#:${K}`)):(R++,new A(Symbol(`#:g${R}`)))}}(),Vn=new ni({nil:_e,undefined:n,true:!0,false:!1,NaN:NaN,stdout:{write:function(...R){console.log(...R)}},stdin:{read:function(){return new Promise(R=>{R(prompt(""))})}},help:F(new xt("help",function(R,{dynamic_scope:K,error:ce}){var pe;if(R.car instanceof A)pe=R.car;else if(R.car instanceof de&&R.car.car instanceof A)pe=R.car.car;else{var Ne=this;K&&(K=this);var Se=Ce(R.car,{env:Ne,error:ce,dynamic_scope:K});if(Se&&Se.__doc__)return Se.__doc__}return this.get(pe).__doc__}),`(help object)

             Macro returns documentation for function or macros including parser
             macros but only if called with parser macro symbol like (help \`).
             For normal functions and macros you can save the function in variable.`),cons:F(function(R,K){return lt(K)&&(K=_e),new de(R,K)},`(cons left right)

            Function return new Pair out of two arguments.`),car:F(function(R){return R===_e||(Ct("car",R,"pair"),lt(R))?_e:R.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:F(function(R){return R===_e||(Ct("cdr",R,"pair"),lt(R))?_e:R.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":F(new xt("set!",function(R,{dynamic_scope:K,error:ce}={}){K&&(K=this);var pe=Ce(R.cdr.car,{env:this,dynamic_scope:K,error:ce});pe=Ye(pe);var Ne;function Se(pn,tn){return sn(pn)?pn.then(mn=>Se(mn,tn)):sn(tn)?tn.then(mn=>Se(pn,mn)):(It[pn]=tn,tn)}if(R.car instanceof de&&A.is(R.car.car,".")){var Je=R.car.cdr.car,ht=R.car.cdr.cdr.car,It=Ce(Je,{env:this,dynamic_scope:K,error:ce}),Vt=Ce(ht,{env:this,dynamic_scope:K,error:ce});return Se(Vt,pe)}if(!(R.car instanceof A))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");return Ne=this.ref(R.car.name),Ne||(Ne=this),M(pe,pn=>{Ne.set(R.car,pn)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"set-car!":F(function(R,K){Ct("set-car!",R,"pair"),R.car=K},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":F(function(R,K){Ct("set-cdr!",R,"pair"),R.cdr=K},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":F(function(R){return typeof R>"u"||lt(R)},`(empty? object)

            Function return true if value is undfined empty list.`),assoc:F(function(R,K){if(R instanceof de&&!(K instanceof de))throw new Error("First argument to assoc ned to be a key");Ct("assoc",K,"pair");for(var ce=K;!(!(ce instanceof de)||this.get("empty?")(ce));){var pe=ce.car.car;if(Rt(pe,R))return ce.car;ce.haveCycles("cdr")||(ce=ce.cdr)}return _e},`(assoc key alist)

            Function search Alist (list of pairs) until it find the one that
            have head set equal to key, and return found pair.`),gensym:F(Qs,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),"require.resolve":F(function(R){var K=require.resolve(R);return K},`(require.resolve path)

           Return path relative the current module.`),require:F(function(R){return Xte(R)},`(require module)

            Function to be used inside Node.js to import the module.`),load:F(function(R){Ct("load",R,"string");var K=this;return K.name==="__frame__"&&(K=K.parent),typeof this.get("global",{throwError:!1})<"u"?new Promise((ce,pe)=>{Yhe.readFile(R,function(Ne,Se){Ne?pe(Ne):Ie(Se.toString(),K).then(()=>{ce()})})}):e.fetch(R).then(ce=>ce.text()).then(ce=>Ie(ce,K)).then(()=>{})},`(load filename)

            Function fetch the file and evaluate its content as LIPS code.`),while:F(new xt("while",function(R,{dynamic_scope:K,error:ce}){var pe=this,Ne=new de(new A("begin"),R.cdr),Se;return K&&(K=pe),function Je(){var ht=Ce(R.car,{env:pe,dynamic_scope:K,error:ce});function It(Vt){return Vt&&!dn(Vt)&&!lt(Vt)?(Se=Ce(Ne,{env:pe,dynamic_scope:K,error:ce}),sn(Se)?Se.then(pn=>(Se=pn,Je())):Je()):Se}return M(ht,It)}()}),`(while cond . body)

            Macro that create a loop, it exectue body untill cond expression is false`),if:F(new xt("if",function(R,{dynamic_scope:K,error:ce}){K&&(K=this);var pe=this,Ne=Je=>(Ct("if",Je,"boolean"),Je?Ce(R.cdr.car,{env:pe,dynamic_scope:K,error:ce}):Ce(R.cdr.cdr.car,{env:pe,dynamic_scope:K,error:ce})),Se=Ce(R.car,{env:pe,dynamic_scope:K,error:ce});return M(Se,Ne)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let*":F(fn(!0),`(let* ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),let:F(fn(!1),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":F(We("begin*",function(R){return R.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:F(new xt("begin",function(R,K){var ce=Object.assign({},K),pe=this.get("list->array")(R);ce.dynamic_scope&&(ce.dynamic_scope=this),ce.env=this;var Ne;return function Se(){if(pe.length){var Je=pe.shift(),ht=Ce(Je,ce);return M(ht,It=>(Ne=It,Se()))}else return Ne}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new xt("ignore",function(R,{dynamic_scope:K,error:ce}){var pe={env:this,error:ce};K&&(pe.dynamic_scope=this),Ce(new de(new A("begin"),R),pe)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:F(xt.defmacro("define",function(R,K){var ce=this;if(R.car instanceof de&&R.car.car instanceof A){var pe=new de(new A("define"),new de(R.car.car,new de(new de(new A("lambda"),new de(R.car.cdr,R.cdr)))));return pe}else if(K.macro_expand)return;K.dynamic_scope&&(K.dynamic_scope=this),K.env=ce;var Ne=R.cdr.car;Ne instanceof de?Ne=Ce(Ne,K):Ne instanceof A&&(Ne=ce.get(Ne)),R.car instanceof A&&M(Ne,Se=>{ce.set(R.car,Se)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":F(function(R,K,ce){var pe=typeof R;if(dn(R)||pe!=="object"&&pe!=="function"){var Ne=lr("set-obj!",et(R),["object","function"]);throw new Error(Ne)}ei(R)[K]=ce},`(set-obj! obj key value)

            Function set property of JavaScript object`),"current-environment":F(function(){return this},`(current-environment)

            Function return current environement.`),eval:F(function(R,K){if(Ct("eval",R,["symbol","pair","array"]),K=K||this,R instanceof A)return K.get(R);if(R instanceof de)return Ce(R,{env:K,error:pe=>{if(this.get("error")(pe.message),pe.code){var Ne=pe.code.map((Se,Je)=>`[${Je+1}]: ${Se}`).join(`
`);this.get("error")(Ne)}}});if(R instanceof Array){var ce=this.get("eval");return R.reduce((pe,Ne)=>ce(Ne,K))}},`(eval list)

            Function evalute LIPS code as list structure.`),lambda:new xt("lambda",function(R,{dynamic_scope:K,error:ce}={}){var pe=this,Ne;R.cdr instanceof de&&typeof R.cdr.car=="string"&&R.cdr.cdr!==_e&&(Ne=Q(R.cdr.car));function Se(...ht){var It;K&&this instanceof ni?It=this:It=pe,It=It.inherit("lambda");var Vt=R.car,pn=0,tn;if(typeof this<"u"&&It.set("this",this),this instanceof ni)It.set("arguments",this.get("arguments")),It.set("parent.frame",this.get("parent.frame"));else{var mn=ht.slice();mn.callee=Se,mn.env=It,It.set("parent.frame",function(){return _e}),It.set("arguments",mn)}if(Vt instanceof A||!lt(Vt))for(;;){if(Vt.car!==_e)if(Vt instanceof A){tn=de.fromArray(ht.slice(pn)),It.env[Vt.name]=tn;break}else typeof ht[pn]>"u"?tn=_e:tn=ht[pn],It.env[Vt.car.name]=tn;if(Vt.cdr===_e)break;pn++,Vt=Vt.cdr}K&&(K=It);var Jt=Ne?R.cdr.cdr:R.cdr,qi=new de(new A("begin"),Jt);return Ce(qi,{env:It,dynamic_scope:K,error:ce})}var Je=R.car instanceof de?R.car.length():null;return Se.__code__=new de(new A("lambda"),R),R.car instanceof de?F(mt(Se,Je),Ne,!0):F(Se,Ne,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new xt("macroexpand",wt()),"macroexpand-1":new xt("macroexpand-1",wt(!0)),"define-macro":F(new xt(zt,function(R,{dynamic_scope:K,error:ce}){if(R.car instanceof de&&R.car.car instanceof A){var pe=R.car.car.name,Ne;typeof R.cdr.car=="string"&&R.cdr.cdr!==_e&&(Ne=R.cdr.car),this.env[pe]=xt.defmacro(pe,function(Se){for(var Je=new ni({},this,"defmacro"),ht=R.car.cdr,It=Se;ht!==_e;){if(ht instanceof A){Je.env[ht.name]=It;break}else ht.car!==_e&&(It===_e?Je.env[ht.car.name]=_e:(It.car instanceof de&&(It.car.data=!0),Je.env[ht.car.name]=It.car));if(ht.cdr===_e)break;It!==_e&&(It=It.cdr),ht=ht.cdr}K&&(K=Je);var Vt={env:Je,dynamic_scope:K,error:ce};if(R.cdr instanceof de){var pn=Ne?R.cdr.cdr:R.cdr,tn=pn.reduce(function(mn,Jt){return Ce(Jt,Vt)});return M(tn,function(mn){return typeof mn=="object"&&delete mn.data,mn})}},Ne),this.env[pe].__code__=new de(new A("define-macro"),R)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),quote:F(new xt("quote",function(R){return bi(R.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":F(function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:F(function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:xt.defmacro("quasiquote",function(R,K){var{dynamic_scope:ce,error:pe}=K,Ne=this;ce&&(ce=Ne);function Se(Jt){return Jt instanceof de}function Je(Jt,qi,Ci=Se){if(Jt instanceof de&&!lt(Jt)){var Rr=Jt.car,Er=Jt.cdr;return Ci(Rr)&&(Rr=qi(Rr)),Ci(Er)&&(Er=qi(Er)),sn(Rr)||sn(Er)?Promise.all([Rr,Er]).then(([da,Cs])=>new de(da,Cs)):new de(Rr,Er)}return Jt}function ht(Jt,qi){if(Jt instanceof de){if(lt(Jt)&&qi===_e)return _e;Jt.append(qi)}else Jt=new de(Jt,qi);return Jt}function It(Jt,qi,Ci){if(qi<Ci)return new de(new de(Jt.car.car,pn(Jt.car.cdr,qi,Ci)),_e);var Rr=Ce(Jt.car.cdr.car,{env:Ne,dynamic_scope:ce,error:pe});return M(Rr,function(Er){if(!(Er instanceof de)){if(Jt.cdr!==_e){const Cs="You can't splice atom inside list";throw new Error(Cs)}return Er}Vt.has(Er)?Er=Er.clone():Vt.add(Er);const da=pn(Jt.cdr,0,1);return da===_e&&Er===_e?n:M(da,Cs=>ht(Er,Cs))})}var Vt=new Set;function pn(Jt,qi,Ci){if(Jt instanceof de&&!lt(Jt)){if(A.is(Jt.car.car,"unquote-splicing"))return It(Jt,qi+1,Ci);if(A.is(Jt.car,"quasiquote")){var Rr=pn(Jt.cdr,qi,Ci+1);return new de(Jt.car,Rr)}if(A.is(Jt.car.car,"unquote")){if(qi+2===Ci&&Jt.car.cdr instanceof de&&Jt.car.cdr.car instanceof de&&A.is(Jt.car.cdr.car.car,"unquote-splicing"))return new de(new A("unquote"),It(Jt.car.cdr,qi+2,Ci));if(Jt.car.cdr instanceof de&&Jt.car.cdr.cdr!==_e&&!(Jt.car.cdr.car instanceof de))return Jt.car.cdr}if(A.is(Jt.car,"quote"))return new de(Jt.car,pn(Jt.cdr,qi,Ci));if(A.is(Jt.car,"unquote")){if(qi++,qi<Ci)return new de(new A("unquote"),pn(Jt.cdr,qi,Ci));if(qi>Ci)throw new Error("You can't call `unquote` outside of quasiquote");return Jt.cdr instanceof de?Jt.cdr.cdr!==_e?Jt.cdr.car instanceof de?M(pn(Jt.cdr.cdr,qi,Ci),function(Er){var da=Ce(Jt.cdr.car,{env:Ne,dynamic_scope:ce,error:pe});return new de(da,Er)}):Jt.cdr:Ce(Jt.cdr.car,{env:Ne,dynamic_scope:ce,error:pe}):Jt.cdr}return Je(Jt,Er=>pn(Er,qi,Ci))}return Jt}function tn(Jt){Jt instanceof de&&(delete Jt.data,Jt.haveCycles("car")||tn(Jt.car),Jt.haveCycles("cdr")||tn(Jt.cdr))}var mn=pn(R.car,0,1);return M(mn,Jt=>(tn(Jt),bi(Jt)))},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:F(function(R){return Ct("clone",R,"pair"),R.clone()},`(clone list)

            Function return clone of the list.`),append:F(function(R,K){return Ct("append",R,"pair"),this.get("append!")(R.clone(),K)},`(append list item)

            Function will create new list with value appended to the end. It return
            New list.`),"append!":F(function(R,K){return Ct("append!",R,"pair"),dn(K)||lt(K)?R:R.append(K)},`(append! name expression)

             Destructive version of append, it modify the list in place. It return
             original list.`),reverse:F(function(R){if(Ct("reverse",R,["array","pair"]),R instanceof de){var K=this.get("list->array")(R).reverse();return this.get("array->list")(K)}else{if(R instanceof Array)return R.reverse();throw new Error(lr("reverse",et(R),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:F(function(R,K){if(Ct("nth",R,"number"),Ct("nth",K,["array","pair"]),K instanceof de){for(var ce=K,pe=0;pe<R;){if(!ce.cdr||ce.cdr===_e||ce.haveCycles("cdr"))return _e;ce=ce.cdr,pe++}return ce.car}else{if(K instanceof Array)return K[R];throw new Error(lr("nth",et(K),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:F(function(...R){return de.fromArray(R)},`(list . args)

            Function create new list out of its arguments.`),substring:F(function(R,K,ce){return Ct("substring",R,"string"),Ct("substring",K,"number"),Ct("substring",ce,["number","undefined"]),R.substring(K.valueOf(),ce&&ce.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:F(function(...R){return R.forEach((K,ce)=>Ct("concat",K,"string",ce+1)),R.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:F(function(R,K){return Ct("join",R,"string"),Ct("join",K,"pair"),this.get("list->array")(K).join(R)},`(join separator list)

            Function return string by joining elements of the list`),split:F(function(R,K){return Ct("split",R,["regex","string"]),Ct("split",K,"string"),this.get("array->list")(K.split(R))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:F(function(R,K,ce){return Ct("replace",R,["regex","string"]),Ct("replace",K,["string","function"]),Ct("replace",ce,"string"),ce.replace(R,K)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:F(function(R,K){Ct("match",R,["regex","string"]),Ct("match",K,"string");var ce=K.match(R);return ce?this.get("array->list")(ce):_e},`(match pattern string)

            function return match object from JavaScript as list.`),search:F(function(R,K){return Ct("search",R,["regex","string"]),Ct("search",K,"string"),K.search(R)},`(search pattern string)

            Function return first found index of the pattern inside a string`),string:F(function R(K,ce){if(typeof jQuery<"u"&&K instanceof jQuery.fn.init)return"<#jQuery("+K.length+")>";if(K instanceof nt)return K.value.toString();if(typeof K>"u")return"<#undefined>";if(typeof K=="function")return Qt(K)?"<#function(native)>":"<#function>";if(K instanceof RegExp)return K.toString();if(K===_e)return"nil";if(K instanceof Array)return"["+K.map(Se=>R(Se,!0)).join(", ")+"]";if(K===null||typeof K=="string"&&ce)return JSON.stringify(K).replace(/\\n/g,`
`);if(K instanceof de||K instanceof A)return K.toString();if(e.HTMLElement&&K instanceof e.HTMLElement)return`<#HTMLElement(${K.tagName.toLowerCase()})>`;if(typeof K=="object"){var pe=K.constructor,Ne;return typeof pe.__className=="string"?Ne=pe.__className:et(K)==="instance"?Ne="instance":Ne=pe.name,Ne!==""?"<#"+Ne+">":"<#Object>"}return typeof K!="string"?K.toString():K},`(string obj)

            Function return string LIPS representation of an object as string.`),env:F(function(R){R=R||this;var K=Object.keys(R.env),ce;return K.length?ce=de.fromArray(K):ce=_e,R.parent!==n?this.get("env").call(this,R.parent).append(ce):ce},`(env obj)

            Function return list values (functions and variables) inside environment.`),new:F(function(R,...K){var ce=new(ei(R))(...K);return Object.defineProperty(ce,"__instance__",{enumerable:!1,get:()=>!0,set:()=>{},configurable:!1}),ce},`(new obj . args)

            Function create new JavaScript instance of an object.`),"unset!":F(function(R){Ct("unset!",R,"symbol"),delete this.env[R.name]},`(unset! name)

            Function delete specified name from environment.`),"remove-special!":F(function(R){Ct("remove-special!",R,"string"),delete T[R]},"(remove-special! symbol)\n\n            Function remove special symbol from parser. Added by `add-special!`"),"add-special!":F(function(R,K){Ct("remove-special!",R,"string",1),Ct("remove-special!",K,"symbol",2),kn.specials[R]=K},"(add-special! symbol name)\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! '#)` will allow to use `#(1 2 3)` and it will be\n            transformed into (# (1 2 3)) so you can write # macro that will process\n            the list. It's main purpose to to allow to use `define-symbol-macro`"),get:En,".":En,unbind:F(ei,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:F(et,`(type object)

             Function return type of an object as string.`),instanceof:F(function(R,K){return K instanceof R},`(instanceof type obj)

            Function check of object is instance of object.`),"macro?":F(function(R){return R instanceof xt},`(macro? expression)

            Function check if value is a macro.`),"function?":F(function(R){return typeof R=="function"},`(function? expression)

            Function check if value is a function.`),"real?":F(function(R){return et(R)!=="number"?!1:R instanceof nt?R.isFloat():nt.isFloat(R)},`(real? number)

            Function check if value is real number.`),"number?":F(nt.isNumber,`(number? expression)

             Function check if value is a number`),"string?":F(function(R){return typeof R=="string"},`(string? expression)

            Function check if value is a string.`),"pair?":F(function(R){return R instanceof de},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":F(function(R){return R instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":F(function(R){return dn(R)||R instanceof de&&R.isEmptyList()},`(null? expression)

            Function check if value is nulish.`),"boolean?":F(function(R){return typeof R=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":F(function(R){return R instanceof A},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":F(function(R){return R instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":F(function(R){return R!==_e&&R!==null&&!(R instanceof nt)&&typeof R=="object"&&!(R instanceof Array)},`(object? expression)

            Function check if value is an object.`),read:F(function R(K){return typeof K=="string"?k(x(K))[0]:this.get("stdin").read().then(ce=>R.call(this,ce))},`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:F(function(R){R instanceof de?(R=new kn.Formatter(R.toString()).break().format(),this.get("stdout").write(R)):this.get("display").call(this,R)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:F(function(){throw new Error("Function print was removed in version 0.20.0 use display insided")},`(print . args)

            defunct function, we keep it to show proper error when used.`),display:F(function(...R){this.get("stdout").write(...R.map(K=>this.get("string")(K,typeof K=="string")))},`(display . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code)`),error:F(function(...R){this.get("display").apply(this,R)},`(error . args)

            Display error message.`),flatten:F(function(R){return Ct("flatten",R,"pair"),R.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":F(function(R){return Ct("array->list",R,"array"),de.fromArray(R)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":F(He("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":F(He("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:F(function(R,K){return Ct("call",R,"function",1),Ct("call",K,"pair",2),R(...this.get("list->array")(K))},`(apply fn list)

            Function that call function with list of arguments.`),length:F(function(R){if(!R)return nt(0);if(R instanceof de)return nt(R.length());if("length"in R)return nt(R.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),try:F(new xt("try",function(R,{dynamic_scope:K,error:ce}){return new Promise(pe=>{var Ne={env:this,error:Je=>{var ht=this.inherit("try");ht.set(R.cdr.car.cdr.car.car,Je);var It={env:ht,error:ce};K&&(It.dynamic_scope=this),M(Ce(new de(new A("begin"),R.cdr.car.cdr.cdr),It),function(Vt){pe(Vt)})}};K&&(Ne.dynamic_scope=this);var Se=Ce(R.car,Ne);sn(Se)?Se.catch(Ne.error).then(pe):pe(Se)})}),"(try expr (catch (e) code)"),find:F(function R(K,ce){if(Ct("find",K,["regex","function"]),Ct("find",ce,"pair"),dn(ce))return _e;var pe=W("find",K);return M(pe(ce.car),function(Ne){return Ne&&Ne!==_e?ce.car:R(K,ce.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":F(function(R,...K){Ct("for-each",R,"function"),K.forEach((pe,Ne)=>{Ct("for-each",pe,["pair","nil"],Ne+1)});var ce=this.get("map").call(this,R,...K);if(sn(ce))return ce.then(()=>{})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:F(function R(K,...ce){if(Ct("map",K,"function"),ce.forEach((Se,Je)=>{Ct("map",Se,["pair","nil"],Je+1)}),ce.some(Se=>Se===_e))return _e;if(ce.some(lt))return Me();var pe=ce.map(Se=>Se.car),Ne=this;return pe.callee=K,Ne.set("arguments",pe),M(K.call(Ne,...pe),Se=>M(R.call(this,K,...ce.map(Je=>Je.cdr)),Je=>new de(Se,Je)))},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),some:F(function R(K,ce){return Ct("some",K,"function"),Ct("some",ce,["pair","nil"]),dn(ce)?!1:M(K(ce.car),pe=>pe||R(K,ce.cdr))},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If it don't find the value it will return false`),fold:F(X("fold",function(R,K,ce,...pe){if(Ct("fold",K,"function"),pe.forEach((Se,Je)=>{Ct("fold",Se,["pair","nil"],Je+1)}),pe.some(lt))return ce;const Ne=R.call(this,K,ce,...pe.map(Se=>Se.cdr));return M(Ne,Se=>K(...pe.map(Je=>Je.car),Se))}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements on the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist`),pluck:F(function(...R){return function(K){if(R=R.map(pe=>pe instanceof A?pe.name:pe),R.length===0)return _e;if(R.length===1){const[pe]=R;return K[pe]}var ce={};return R.forEach(pe=>{ce[pe]=K[pe]}),ce}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:F(X("reduce",function(R,K,ce,...pe){return Ct("reduce",K,"function"),pe.forEach((Ne,Se)=>{Ct("reduce",Ne,["pair","nil"],Se+1)}),pe.some(lt)?ce:M(K(...pe.map(Ne=>Ne.car),ce),Ne=>R.call(this,K,Ne,...pe.map(Se=>Se.cdr)))}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist`),filter:F(function(R,K){Ct("filter",R,["regex","function"]),Ct("filter",K,["pair","nil"]);var ce=this.get("list->array")(K),pe=[],Ne=W("filter",R);return function Se(Je){function ht(Vt){return Vt&&Vt!==_e&&pe.push(It),Se(++Je)}if(Je===ce.length)return de.fromArray(pe);var It=ce[Je];return M(Ne(It,Je),ht)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),range:F(function(R){return Ct("range",R,"number"),R instanceof nt&&(R=R.valueOf()),de.fromArray(new Array(R).fill(0).map((K,ce)=>nt(ce)))},`(range n)

            Function return list of n numbers from 0 to n - 1`),compose:F(U,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:F(oe,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:F(bt,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),odd:F(Te(function(R){return nt(R).isOdd()}),`(odd number)
             Function check if number os odd.`),even:F(Te(function(R){return nt(R).isEvent()}),`(even number)

             Function check if number is even.`),"*":F(ze(function(R,K){return nt(R).mul(K)}),`(* . numbers)

             Multiplicate all numbers passed as arguments. If single value is passed
              it will return that value.`),"+":F(ze(function(R,K){return nt(R).add(K)}),`(+ . numbers)

             Sum all numbers passed as arguments. If single value is passed it will
             return that value.`),"-":F(function(...R){if(R.length===1)return nt(R[0]).neg();if(R.length)return R.reduce(qe(function(K,ce){return nt(K).sub(ce)}))},`(- . numbers)
            (- number)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":F(ze(function(R,K){return nt(R).div(K)}),`(/ . numbers)

             Divide number passed as arguments one by one. If single argument
             is passed it will return that value.`),abs:F(Te(function(R){return nt(R).abs()}),`(abs number)

             Function create absolute value from number.`),sqrt:F(Te(function(R){return Math.sqrt(R)}),`(sqrt number)

             Function return square root of the number.`),"**":F(qe(function(R,K){return nt(R).pow(K)}),`(** a b)

            Function calculate number a to to the power of b. It can throw
            exception when ** native operator is not supported.`),"1+":F(Te(function(R){return nt(R).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":F(Te(function(R){return nt(R).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"++":F(new xt("++",function(R){Ct("++",R.car,"symbol");var K=this.get(R.car),ce=nt(K).add(1);return this.set(R.car,ce),ce}),`(++ variable)

             Macro that work only on variables and increment the value by one.`),"--":F(new xt("--",function(R){Ct("--",R.car,"symbol");var K=this.get(R.car),ce=nt(K).sub(1);return this.set(R.car,ce),ce}),`(-- variable)

             Macro that decrement the value it work only on symbols`),"%":F(ze(function(R,K){return nt(R).mod(K)}),`(% . numbers)

             Function use modulo operation on each of the numbers. It return
             single number.`),"==":F(function(R,K){return nt(R).cmp(K)===0},`(== a b)

            Function compare two numbers and check if they are equal.`),">":F(function(R,K){return nt(R).cmp(K)===1},`(> a b)

            Function compare two numbers and check if first argument is greater
            than the second one`),"<":F(function(R,K){return nt(R).cmp(K)===-1},`(< a b)

            Function compare two numbers and check if first argument is less
            than the second one`),"<=":F(function(R,K){return[0,-1].includes(nt(R).cmp(K))},`(<= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),">=":F(function(R,K){return[0,1].includes(nt(R).cmp(K))},`(>= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),"eq?":F(Rt,`(eq? a b)

             Function compare two values if they are identical.`),or:F(new xt("or",function(R,{dynamic_scope:K,error:ce}){var pe=this.get("list->array")(R),Ne=this;K&&(K=Ne);var Se;return function Je(){function ht(pn){return Se=pn,Se||Je()}var It=pe.shift();if(typeof It>"u")return Se||!1;var Vt=Ce(It,{env:Ne,dynamic_scope:K,error:ce});return M(Vt,ht)}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:F(new xt("and",function(R,{dynamic_scope:K,error:ce}={}){var pe=this.get("list->array")(R),Ne=this;if(K&&(K=Ne),!pe.length)return!0;var Se;return function Je(){function ht(pn){return Se=pn,Se?Je():!1}var It=pe.shift();if(typeof It>"u")return Se||!1;var Vt=Ce(It,{env:Ne,dynamic_scope:K,error:ce});return M(Vt,ht)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":F(function(R,K){return nt(R).or(K)},`(& a b)

            Function calculate or bit operation.`),"&":F(function(R,K){return nt(R).and(K)},`(& a b)

            Function calculate and bit operation.`),"~":F(function(R){return nt(R).neg()},`(~ number)

            Function negate the value.`),">>":F(function(R,K){return nt(R).shr(K)},`(>> a b)

            Function right shit the value a by value b.`),"<<":F(function(R,K){return nt(R).shl(K)},`(<< a b)

            Function left shit the value a by value b.`),not:F(function(R){return lt(R)?!0:!R},`(not object)

            Function return negation of the argument.`),"->":F(function(R,K,...ce){return R[K](...ce)},`(-> obj name . args)

            Function get function from object and call it with arguments.`)},n,"global");["floor","round","ceil"].forEach(R=>{Vn.set(R,F(function(K){if(Ct(R,K,"number"),K instanceof nt)return K[R]()},`(${R} number)

            Function calculate ${R} of a number.`))});function Dr(R){if(R.length===1)return R[0];for(var K=[],ce=Dr(R.slice(1)),pe=0;pe<ce.length;pe++)for(var Ne=0;Ne<R[0].length;Ne++)K.push(R[0][Ne]+ce[pe]);return K}function ru(R,K,ce){for(var pe=[],Ne=K;Ne<=ce;++Ne){for(var Se=[],Je=0;Je<Ne;++Je)Se.push(R);pe=pe.concat(Dr(Se))}return pe}ru(["d","a"],2,5).forEach(R=>{const K=R.split(""),ce=K.slice().reverse(),pe=K.map(Se=>`(c${Se}r`).join(" ")+" arg"+")".repeat(K.length),Ne="c"+R+"r";Vn.set(Ne,F(function(Se){return ce.reduce(function(Je,ht){return Je===_e?_e:(Ct(Ne,Je,"pair"),ht==="a"?Je.car:Je.cdr)},Se)},`(${Ne} arg)

            Function calculate ${pe}`))}),typeof ku<"u"?(Vn.set("global",ku),Vn.set("require.resolve",F(function(R){return require.resolve(R)},`(require.resolve path)

           Return path relative the current module.`)),Vn.set("require",F(function(R){return Xte(R)},`(require module)

            Function to be used inside Node.js to import the module.`))):typeof window<"u"&&Vn.set("window",window);function lr(R,K,ce,pe=null){let Ne=R?` in function \`${R}\``:"";if(pe!==null&&(Ne+=` argument ${pe}`),ce instanceof Array){const Se=ce[ce.length-1];ce=ce.slice(0,-1).join(", ")+" or "+Se}return`Expecting ${ce} got ${K}${Ne}`}function Ct(R,K,ce,pe=null){const Ne=et(K);var Se=!1;if(ce instanceof Array&&ce.includes(Ne)&&(Se=!0),!Se&&Ne!==ce)throw new Error(lr(R,Ne,ce,pe))}function as(R){var K=typeof R;return["string","function"].includes(K)||R instanceof nt||R instanceof RegExp}function et(R){var K={pair:de,symbol:A,macro:xt,array:Array,native_symbol:Symbol};if(R===_e)return"nil";if(R===null)return"null";for(let[ce,pe]of Object.entries(K))if(R instanceof pe)return ce;return R instanceof nt?"number":R instanceof RegExp?"regex":typeof R=="object"?R.__instance__&&(R.__instance__=!1,R.__instance__)?"instance":R.constructor.name:typeof R}function Ye(R){var K=[];if(ce(R),K.length)return Ne(R);return R;function ce(Se){sn(Se)?K.push(Se):Se instanceof de?(Se.haveCycles("car")||ce(Se.car),Se.haveCycles("cdr")||ce(Se.cdr)):Se instanceof Array&&Se.forEach(ce)}async function pe(Se){var Je=new de(Se.haveCycles("car")?Se.car:await Ne(Se.car),Se.haveCycles("cdr")?Se.cdr:await Ne(Se.cdr));return Se.data&&(Je.data=!0),Je}function Ne(Se){return Se instanceof Array?Promise.all(Se.map(Ne)):Se instanceof de&&K.length?pe(Se):Se}}function it(R,{env:K,dynamic_scope:ce,error:pe}){var Ne=[],Se=R;for(Dt(Se);Se instanceof de&&!lt(Se);){var Je=Ce(Se.car,{env:K,dynamic_scope:ce,error:pe});if(ce&&(Je=M(Je,ht=>typeof ht=="function"&&Qt(ht)?ht.bind(ce):ht)),Ne.push(Je),Se.haveCycles("cdr"))break;Se=Se.cdr}return Ye(Ne)}function ve(R,K,ce){var pe=R.invoke(K,ce);return M(Ye(pe),function(Se){return Se&&Se.data||!Se||as(Se)?Se:bi(Ce(Se,ce))})}function Ce(R,{env:K,dynamic_scope:ce,error:pe=()=>{}}={}){try{ce===!0?K=ce=K||Vn:K===!0?K=ce=Vn:K=K||Vn;var Ne={env:K,dynamic_scope:ce,error:pe},Se;if(dn(R))return R;if(lt(R))return Me();if(R instanceof A)return K.get(R,{weak:!0});var Je=R.car,ht=R.cdr;if(Je instanceof de){if(Se=Ye(Ce(Je,Ne)),sn(Se))return Se.then(tn=>Ce(new de(tn,R.cdr),Ne));if(typeof Se!="function")throw new Error(et(Se)+" "+K.get("string")(Se)+" is not a function while evaluating "+R.toString())}if(Je instanceof A){if(Se=K.get(Je,{weak:!0}),Se instanceof xt){var It=ve(Se,ht,Ne);return M(It,tn=>tn instanceof de?tn.markCycles():tn)}else if(typeof Se!="function"){if(Se){var Vt=`${et(Se)} \`${Se}' is not a function`;throw new Error(Vt)}throw new Error(`Unknown function \`${Je.name}'`)}}else typeof Je=="function"&&(Se=Je);if(typeof Se=="function"){var pn=it(ht,Ne);return M(pn,function(tn){var mn=(ce||K).inherit("__frame__");mn.set("parent.frame",function(Ci=1){if(Ci===0)return mn;if(!(mn.parent instanceof ni))return _e;var Rr=mn.parent.get("parent.frame",{throwError:!1});return typeof Rr=="function"?Rr(Ci-1):_e});var Jt=tn.slice();Jt.callee=Se,mn.set("arguments",Jt);var qi=Ye(Se.apply(mn,tn));return M(qi,Ci=>Ci instanceof de?bi(Ci.markCycles()):Ci,pe)})}else if(R instanceof A){if(Se=K.get(R),Se==="undefined")throw new Error("Unbound variable `"+R.name+"'");return Se}else{if(R instanceof de)throw Se=Je&&Je.toString(),new Error(`${et(Je)} ${Se} is not a function`);return R}}catch(tn){pe&&pe(tn,R)}}async function Ie(R,K,ce){ce===!0?K=ce=K||Vn:K===!0?K=ce=Vn:K=K||Vn;for(var pe=k(R),Ne=[];;){var Se=pe.shift();if(Se){var Je=await Ce(Se,{env:K,dynamic_scope:ce,error:(ht,It)=>{throw It&&(ht.code instanceof Array||(ht.code=[]),ht.code.push(It.toString())),ht}});Ne.push(Je)}else return Ne}}function ue(R){return function(K){return K?(K.token||K).match(R):!1}}var Oe=ue(/[()]/);function pt(R){var K=typeof R=="string"?x(R):R,ce=K.filter(Oe),pe=ce.filter(Se=>(Se.token||Se)===")"),Ne=ce.filter(Se=>(Se.token||Se)==="(");return pe.length===Ne.length}de.unDry=function(R){return new de(R.car,R.cdr)},de.prototype.toDry=function(){return{value:{car:this.car,cdr:this.cdr}}},te.prototype.toDry=function(){return{value:null}},te.unDry=function(){return _e},A.prototype.toDry=function(){return{value:{name:this.name}}},A.unDry=function(R){return new A(R.name)};function at(R){console.error(R.message||R),R.code&&console.error(R.code.map((K,ce)=>`[${ce+1}]: ${K}`))}function Ut(){var R="text/x-lips";if(window.document){var K=Array.from(document.querySelectorAll("script"));return function ce(){var pe=K.shift();if(pe){var Ne=pe.getAttribute("type");if(Ne===R){var Se=pe.getAttribute("src");return Se?e.fetch(Se).then(Je=>Je.text()).then(Ie).then(ce).catch(Je=>{at(Je),ce()}):Ie(pe.innerHTML).then(ce).catch(Je=>{at(Je),ce()})}else Ne&&Ne.match(/lips|lisp/)&&console.warn("Expecting "+R+" found "+Ne);return ce()}}()}}typeof window<"u"&&i(window,Ut),I.__className="Ahead",D.__className="Pattern",Y.__className="Formatter",xt.__className="Macro",ni.__className="Environment";var kn={version:"{{VER}}",exec:Ie,parse:k,tokenize:x,evaluate:Ce,Environment:ni,global_environment:Vn,globalEnvironment:Vn,env:Vn,balanced_parenthesis:pt,balancedParenthesis:pt,Macro:xt,quote:bi,Pair:de,Formatter:Y,specials:T,nil:_e,resolvePromises:Ye,LSymbol:A,LNumber:nt};return Vn.set("lips",kn),kn})}(z6)),z6.exports}var eYe=JGe();const tYe=xm(eYe),RP="FlinkSQL",Zhe={id:"fixedTab",name:RP,data:{value:"",language:RP.toLowerCase()}},Xhe={id:"fixedStatusItem",name:RP,sortIndex:3},nYe=["FlinkSQL","SparkSQL","HiveSQL","MySQL","PgSQL","SQL","TrinoSQL"];var Qhe=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(h){s(h)}}function l(d){try{u(n.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((n=n.apply(r,e||[])).next())})};const Jhe={},$6={};class s3{static getOrCreate(e){return $6[e]||($6[e]=new s3(e)),$6[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Jhe[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}function oy(r){return Qhe(this,void 0,void 0,function*(){yield s3.getOrCreate(r).load()})}function sy(r){const e=r.id;Jhe[e]=r,Qg.register(r);const t=s3.getOrCreate(e);Qg.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),Qg.onLanguage(e,()=>Qhe(this,void 0,void 0,function*(){const n=yield t.load();Qg.setLanguageConfiguration(e,n.conf)}))}class efe{constructor(e,t,n,i){this._onDidChange=new zle,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n),this._completionService=i}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}get completionService(){return this._completionService}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}const tfe={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},nfe={validate:!0},iYe=2*60*1e3;class rYe{constructor(e){this._defaults=e,this._worker=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>iYe&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=xd.createWebWorker({moduleId:this._defaults.languageId,label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){let t;return this._getClient().then(n=>{t=n}).then(n=>{var i;return(i=this._worker)===null||i===void 0?void 0:i.withSyncedResources(e)}).then(n=>t)}}class oYe{constructor(){this.worker=new Map}valid(e,t){return this.getClientWorker(e)(t).then(i=>i.valid(t))}parserTreeToString(e,t){return this.getClientWorker(e)(t).then(i=>i.parserTreeToString(t))}getClientWorker(e){let t=this.worker.get(e);if(!t){const n=new rYe(this.getLanguageServiceDefault(e)),i=(...o)=>n.getLanguageServiceWorker(...o);return this.worker.set(e,i),i}return t}getLanguageServiceDefault(e){return new efe(e,nfe,tfe)}}function sYe(r,e,t){let n=null;return(...i)=>{n&&clearTimeout(n),t&&!n&&(r==null||r(...i)),n=setTimeout(()=>{clearTimeout(n),n=null,r==null||r(...i)},e)}}class aYe extends me.Component{constructor(t){super(t);H1(this,"_language",RP);H1(this,"languageService");H1(this,"onClick",(t,n)=>{console.log("onClick:",t,n)});H1(this,"onChangeLanguage",(t,n)=>{n&&n.value&&(this._language=n.value,this.updateLanguage(n.value))});H1(this,"analyseProblems",sYe(t=>{const n=t.data.value;this.languageService.valid(this.language,n).then(i=>{jn.problems.reset();const o=this.convertMsgToProblemItem(t,n,i);jn.problems.add(o)})},200));H1(this,"convertMsgToProblemItem",(t,n,i=[])=>{const o=t.id,s=`${t.name||""}`,a={id:o,name:s,isLeaf:!1,value:{code:s,message:"",startLineNumber:0,startColumn:1,endLineNumber:0,endColumn:1,status:bm.Hint},children:[]};return a.children=i.map((l,u)=>({id:`${o}-${u}`,name:l.code||"",isLeaf:!0,value:{code:l.code,message:l.message,startLineNumber:Number(l.startLine),startColumn:Number(l.startCol),endLineNumber:Number(l.endLine),endColumn:Number(l.endCol),status:bm.Error},children:[]})),a});H1(this,"parse",()=>{this.setupOutputLanguage();const t=jn.editor.editorInstance.getValue();jn.panel.cleanOutput(),this.languageService.parserTreeToString(this.language,t).then(n=>{const i=n==null?void 0:n.replace(/(\(|\))/g,`$1
`),s=new tYe.Formatter(i).format({indent:2,offset:2}),a=jn.panel.getPanel(jn.builtin.getConstants().PANEL_OUTPUT??"")??{};jn.panel.update({...a,data:s}),jn.panel.appendOutput("")})});this.languageService=new oYe}componentDidMount(){jn.editor.onUpdateTab(this.analyseProblems),xd.setTheme("sql-dark")}get language(){return this._language.toLowerCase()}updateLanguage(t){var l;const n=this.language,i=Object.assign(Zhe,{name:t,data:{language:n,value:""}}),o=((l=jn.editor.getState().current)==null?void 0:l.id)||-1;jn.editor.updateTab(i,o);const s=jn.editor.editorInstance.getModel();s&&xd.setModelLanguage(s,n);const a=Object.assign(Xhe,{name:t,sortIndex:3});this.analyseProblems(i),jn.statusBar.update(a)}async setupOutputLanguage(){var n;const t=await((n=jn.panel.outputEditorInstance)==null?void 0:n.getModel());t&&xd.setModelLanguage(t,"clojure")}renderColorThemes(){const t=nYe.map(n=>Ug.jsx(Kae,{value:n,children:n},n));return Ug.jsx(LN,{style:{margin:"10px 4px 20px 4px"},defaultValue:this._language,onSelect:this.onChangeLanguage,children:t})}render(){return Ug.jsx("div",{children:Ug.jsxs("div",{style:{margin:"20px 20px"},children:[Ug.jsxs("h1",{style:{fontSize:20,textTransform:"uppercase"},children:["Select a language:"," "]}),this.renderColorThemes(),Ug.jsx(Qw,{onClick:this.parse,children:"Parse"})]})})}}const lYe={id:"ExtendWorkbench",name:"ExtendWorkbench",activate(){const r={id:"ParserSidebar",title:"Sidebar",render(){return Ug.jsx(aYe,{})}};jn.sidebar.add(r),jn.sidebar.setState({current:r.id});const e={id:"OnlineParser",icon:"beaker",title:"SQL Languages Online Parse"},t={id:"GotoGithub",icon:"github",title:"Go To Github"};jn.activityBar.remove("sidebar.explore.title"),jn.activityBar.remove("sidebar.search.title"),jn.activityBar.add([e,t]),jn.activityBar.setState({selected:e.id}),jn.activityBar.onClick(n=>{n===t.id&&(window.location.href="https://github.com/DTStack/monaco-sql-languages")}),jn.editor.open(Zhe),jn.statusBar.add(Xhe,zb.right)},dispose(){}},Bn={BINARY:"binary",BINARY_ESCAPE:"binary.escape",COMMENT:"comment",COMMENT_QUOTE:"comment.quote",DELIMITER:"delimiter",DELIMITER_CURLY:"delimiter.curly",DELIMITER_PAREN:"delimiter.paren",DELIMITER_SQUARE:"delimiter.square",IDENTIFIER:"identifier",IDENTIFIER_QUOTE:"identifier.quote",KEYWORD:"keyword",KEYWORD_SCOPE:"keyword.scope",NUMBER:"number",NUMBER_FLOAT:"number.float",NUMBER_BINARY:"number.binary",NUMBER_OCTAL:"number.octal",NUMBER_HEX:"number.hex",OPERATOR:"operators",OPERATOR_KEYWORD:"operators.keyword",OPERATOR_SYMBOL:"operators.symbol",PREDEFINED:"predefined",STRING:"string",STRING_ESCAPE:"string.escape",TYPE:"type",VARIABLE:"variable",WHITE:"white"},Wn=r=>r+".sql";var po;(function(r){r.FLINK="flinksql",r.HIVE="hivesql",r.MYSQL="mysql",r.PG="pgsql",r.PL="plsql",r.SPARK="sparksql",r.SQL="sql",r.TRINO="trinosql"})(po||(po={}));var uYe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const j6=new Map,ene=new Map,tne=new Map;function sp(r){if(typeof r!="object")return;const e=cYe(r),{languageId:t,completionService:n}=e,i=uYe(e,["languageId","completionService"]),o=new efe(t,nfe,Object.assign({},tfe,i),n);function s(){vn(()=>import("./setupLanguageMode-7c83ea19.js"),[]).then(a=>{var l;j6.has(t)&&((l=j6.get(t))===null||l===void 0||l.dispose());const u=a.setupLanguageMode(o);return j6.set(t,u),u})}ene.get(t)?s():Qg.onLanguage(t,()=>{s(),ene.set(t,!0)})}function cYe(r){let e=Object.assign({},r);const t=r.languageId,n=tne.get(t);return n&&(e=Object.assign({},n,e)),[po.MYSQL,po.PG,po.PL,po.SQL].includes(t)&&(e.completionItems=!1),tne.set(t,e),e}sy({id:po.FLINK,extensions:[".flinksql"],aliases:["FlinkSQL","flink","Flink"],loader:()=>vn(()=>import("./flinksql-ee3fe69a.js"),[])});oy(po.FLINK);sp({languageId:po.FLINK,completionItems:!0,diagnostics:!0});sy({id:po.SPARK,extensions:[".sparksql"],aliases:["SparkSQL","spark","Spark"],loader:()=>vn(()=>import("./sparksql-e442486a.js"),[])});oy(po.SPARK);sp({languageId:po.SPARK,completionItems:!0,diagnostics:!0});sy({id:po.HIVE,extensions:[".hivesql"],aliases:["HiveSQL","hive","Hive"],loader:()=>vn(()=>import("./hivesql-fdbf11fe.js"),[])});oy(po.HIVE);sp({languageId:po.HIVE,completionItems:!0,diagnostics:!0});sy({id:po.TRINO,extensions:[],aliases:["TrinoSQL","trino","Trino","prestosql","PrestoSQL","presto","Presto"],loader:()=>vn(()=>import("./trinosql-2f74ddc6.js"),[])});oy(po.TRINO);sp({languageId:po.TRINO,completionItems:!0,diagnostics:!0});sy({id:po.SQL,extensions:[".sql"],aliases:["SQL"],loader:()=>vn(()=>import("./sql-0ab86888.js"),[])});oy(po.SQL);sp({languageId:po.SQL,completionItems:!1,diagnostics:!0});sy({id:po.MYSQL,extensions:[],aliases:["MySQL"],loader:()=>vn(()=>import("./mysql-c0744188.js"),[])});oy(po.MYSQL);sp({languageId:po.MYSQL,completionItems:!1,diagnostics:!0});sy({id:po.PL,extensions:[],aliases:["PLSQL"],loader:()=>vn(()=>import("./plsql-0ab86888.js"),[])});oy(po.PL);sp({languageId:po.PL,completionItems:!1,diagnostics:!0});sy({id:po.PG,extensions:[],aliases:["PgSQL","postgresql","PostgreSQL"],loader:()=>vn(()=>import("./pgsql-c0744188.js"),[])});oy(po.PG);sp({languageId:po.PG,completionItems:!1,diagnostics:!0});function dYe(){return new Worker("/monaco-sql-languages/assets/editor.worker-02ed7af5.js")}function hYe(){return new Worker("/monaco-sql-languages/assets/flinksql.worker-3a31563a.js")}function fYe(){return new Worker("/monaco-sql-languages/assets/sparksql.worker-d191cf40.js")}function gYe(){return new Worker("/monaco-sql-languages/assets/hivesql.worker-a778061b.js")}function pYe(){return new Worker("/monaco-sql-languages/assets/pgsql.worker-5cc07b83.js")}function mYe(){return new Worker("/monaco-sql-languages/assets/mysql.worker-bb2974ff.js")}function _Ye(){return new Worker("/monaco-sql-languages/assets/plsql.worker-4d1431aa.js")}function vYe(){return new Worker("/monaco-sql-languages/assets/trinosql.worker-8306ce3e.js")}self.MonacoEnvironment={getWorker(r,e){return e==="flinksql"?new hYe:e==="hivesql"?new gYe:e==="sparksql"?new fYe:e==="pgsql"?new pYe:e==="plsql"?new _Ye:e==="mysql"||e==="sql"?new mYe:e==="trinosql"?new vYe:new dYe}};const bYe={base:"vs",inherit:!0,rules:[{token:Wn(Bn.BINARY),foreground:"098658"},{token:Wn(Bn.BINARY_ESCAPE),foreground:"098658"},{token:Wn(Bn.COMMENT),foreground:"008000"},{token:Wn(Bn.COMMENT_QUOTE),foreground:"008000"},{token:Wn(Bn.DELIMITER),foreground:"000000"},{token:Wn(Bn.DELIMITER_CURLY),foreground:"319331"},{token:Wn(Bn.DELIMITER_PAREN),foreground:"0431fa"},{token:Wn(Bn.DELIMITER_SQUARE),foreground:"0431fa"},{token:Wn(Bn.IDENTIFIER),foreground:"001080"},{token:Wn(Bn.IDENTIFIER_QUOTE),foreground:"001080"},{token:Wn(Bn.KEYWORD),foreground:"0000ff"},{token:Wn(Bn.KEYWORD_SCOPE),foreground:"af00db"},{token:Wn(Bn.NUMBER),foreground:"098658"},{token:Wn(Bn.NUMBER_FLOAT),foreground:"098658"},{token:Wn(Bn.NUMBER_BINARY),foreground:"098658"},{token:Wn(Bn.NUMBER_OCTAL),foreground:"098658"},{token:Wn(Bn.NUMBER_HEX),foreground:"098658"},{token:Wn(Bn.OPERATOR),foreground:"000000"},{token:Wn(Bn.OPERATOR_KEYWORD),foreground:"0000ff"},{token:Wn(Bn.OPERATOR_SYMBOL),foreground:"000000"},{token:Wn(Bn.PREDEFINED),foreground:"795e26"},{token:Wn(Bn.STRING),foreground:"a31515"},{token:Wn(Bn.STRING_ESCAPE),foreground:"a31515"},{token:Wn(Bn.TYPE),foreground:"267f99"},{token:Wn(Bn.VARIABLE),foreground:"4fc1ff"}],colors:{}},CYe={base:"vs-dark",inherit:!0,rules:[{token:Wn(Bn.BINARY),foreground:"b5cea8"},{token:Wn(Bn.BINARY_ESCAPE),foreground:"b5cea8"},{token:Wn(Bn.COMMENT),foreground:"6a9955"},{token:Wn(Bn.COMMENT_QUOTE),foreground:"6a9955"},{token:Wn(Bn.DELIMITER),foreground:"d4d4d4"},{token:Wn(Bn.DELIMITER_CURLY),foreground:"da70d6"},{token:Wn(Bn.DELIMITER_PAREN),foreground:"ffd700"},{token:Wn(Bn.DELIMITER_SQUARE),foreground:"ffd700"},{token:Wn(Bn.IDENTIFIER),foreground:"9cdcfe"},{token:Wn(Bn.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Wn(Bn.KEYWORD),foreground:"569cd6"},{token:Wn(Bn.KEYWORD_SCOPE),foreground:"c586c0"},{token:Wn(Bn.NUMBER),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_FLOAT),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_BINARY),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_OCTAL),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_HEX),foreground:"b5cea8"},{token:Wn(Bn.OPERATOR),foreground:"d4d4d4"},{token:Wn(Bn.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Wn(Bn.OPERATOR_SYMBOL),foreground:"d4d4d4"},{token:Wn(Bn.PREDEFINED),foreground:"dcdcaa"},{token:Wn(Bn.STRING),foreground:"ce9178"},{token:Wn(Bn.STRING_ESCAPE),foreground:"ce9178"},{token:Wn(Bn.TYPE),foreground:"4ec9b0"},{token:Wn(Bn.VARIABLE),foreground:"4fc1ff"}],colors:{}},yYe={base:"hc-black",inherit:!0,rules:[{token:Wn(Bn.BINARY),foreground:"b5cea8"},{token:Wn(Bn.BINARY_ESCAPE),foreground:"b5cea8"},{token:Wn(Bn.COMMENT),foreground:"7ca668"},{token:Wn(Bn.COMMENT_QUOTE),foreground:"7ca668"},{token:Wn(Bn.DELIMITER),foreground:"ffffff"},{token:Wn(Bn.DELIMITER_CURLY),foreground:"da70d6"},{token:Wn(Bn.DELIMITER_PAREN),foreground:"ffd700"},{token:Wn(Bn.DELIMITER_SQUARE),foreground:"ffd700"},{token:Wn(Bn.IDENTIFIER),foreground:"9cdcfe"},{token:Wn(Bn.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Wn(Bn.KEYWORD),foreground:"569cd6"},{token:Wn(Bn.KEYWORD_SCOPE),foreground:"c586c0"},{token:Wn(Bn.NUMBER),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_FLOAT),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_BINARY),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_OCTAL),foreground:"b5cea8"},{token:Wn(Bn.NUMBER_HEX),foreground:"b5cea8"},{token:Wn(Bn.OPERATOR),foreground:"ffffff"},{token:Wn(Bn.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Wn(Bn.OPERATOR_SYMBOL),foreground:"ffffff"},{token:Wn(Bn.PREDEFINED),foreground:"dcdcaa"},{token:Wn(Bn.STRING),foreground:"ce9178"},{token:Wn(Bn.STRING_ESCAPE),foreground:"ce9178"},{token:Wn(Bn.TYPE),foreground:"4ec9b0"},{token:Wn(Bn.VARIABLE),foreground:"4fc1ff"}],colors:{}},Iq={lightThemeData:bYe,darkThemeData:CYe,hcBlackThemeData:yYe};var bb;(function(r){r.CATALOG="catalog",r.CATALOG_CREATE="catalogCreate",r.DATABASE="database",r.DATABASE_CREATE="databaseCreate",r.TABLE="table",r.TABLE_CREATE="tableCreate",r.VIEW="view",r.VIEW_CREATE="viewCreate",r.FUNCTION="function",r.FUNCTION_CREATE="functionCreate"})(bb||(bb={}));xd.defineTheme("sql-dark",Iq.darkThemeData);xd.defineTheme("sql-light",Iq.lightThemeData);xd.defineTheme("sql-hc",Iq.hcBlackThemeData);const wYe=["mock_catalog_1","mock_catalog_2","mock_catalog_3"],SYe=["mock_schema_1","mock_schema_2","mock_schema_3"],EYe=["mock_database_1","mock_database_2","mock_database_3"],LYe=["mock_table1","mock_table2","mock_table3"],xYe=["mock_view1","mock_view2","mock_view3"],DYe=["current_catalog_db1","current_catalog_db2","current_catalog_db3"],IYe=["current_catalog_schema1","current_catalog_schema2","current_catalog_schema3"],kYe=["current_db_table1","current_db_table2","current_db_table3"],TYe=["current_db_view1","current_db_view2","current_db_view3"],Gv=(r,e)=>{const t=r?r.replace(/sql/gi,"").toLocaleLowerCase():"";return t?`${t}_${e}`:e};function wO(r){const e=wYe.map(t=>({label:Gv(r,t),kind:Qg.CompletionItemKind.Field,detail:"catalog",sortText:"1"+Gv(r,t)}));return Promise.resolve(e)}function NYe(r,e){const n=(e?EYe:DYe).map(i=>({label:Gv(r,i),kind:Qg.CompletionItemKind.Field,detail:"database",sortText:"1"+Gv(r,i)}));return Promise.resolve(n)}function AYe(r,e){const n=(e?SYe:IYe).map(i=>({label:Gv(r,i),kind:Qg.CompletionItemKind.Field,detail:"schema",sortText:"1"+Gv(r,i)}));return Promise.resolve(n)}function q6(r,e,t){const i=(e&&t?LYe:kYe).map(o=>({label:Gv(r,o),kind:Qg.CompletionItemKind.Field,detail:"table",sortText:"1"+Gv(r,o)}));return Promise.resolve(i)}function K6(r,e,t){const i=(e&&t?xYe:TYe).map(o=>({label:Gv(r,o),kind:Qg.CompletionItemKind.Field,detail:"view",sortText:"1"+Gv(r,o)}));return Promise.resolve(i)}const OYe=r=>["flinksql","trinosql"].includes(r.toLowerCase()),RYe=r=>["trinosql","hivesql","sparksql"].includes(r),a3=async function(r,e,t,n){if(!n)return Promise.resolve([]);const i=r.getLanguageId(),o=OYe(i),s=RYe(i)?AYe:NYe,{keywords:a,syntax:l}=n,u=a.map(k=>({label:k,kind:Qg.CompletionItemKind.Keyword,detail:"",sortText:"2"+k}));let d=[],h=!1,p=!1,_=!1,C=!1,S=!1,x=!1,T=!1;for(let k=0;k<l.length;k++){const{syntaxContextType:M,wordRanges:W}=l[k],F=W.map(z=>z.text),Q=F.length;if((M===bb.CATALOG||M===bb.DATABASE_CREATE)&&!h&&Q<=1&&(d=d.concat(await wO(i)),h=!0),(M===bb.DATABASE||M===bb.TABLE_CREATE||M===bb.VIEW_CREATE)&&(!h&&o&&Q<=1&&(d=d.concat(await wO(i)),h=!0),!p&&Q<=1&&(d=d.concat(await s(i)),p=!0),!_&&o&&Q>=2&&Q<=3&&(d=d.concat(await s(i,F[0])),_=!0)),M===bb.TABLE)if(Q<=1){if(!h&&o){const z=await wO(i);d=d.concat(z),h=!0}p||(d=d.concat(await s(i)),p=!0),C||(d=d.concat(await q6(i)),C=!0)}else Q>=2&&Q<=3?(!_&&o&&(d=d.concat(await s(i,F[0])),_=!0),S||(d=d.concat(await q6(i,void 0,F[0])),S=!0)):Q>=4&&Q<=5&&(S||(d=d.concat(await q6(i,F[0],F[2])),S=!0));M===bb.VIEW&&(Q<=1?(!h&&o&&(d=d.concat(await wO(i)),h=!0),p||(d=d.concat(await s(i)),p=!0),x||(d=d.concat(await K6(i)),x=!0)):Q>=2&&Q<=3?(!_&&o&&(d=d.concat(await s(i,F[0])),_=!0),T||(d=d.concat(await K6(i,void 0,F[0])),T=!0)):Q>=4&&Q<=5&&(T||(d=d.concat(await K6(i,F[0],F[2])),T=!0)))}return[...d,...u]};sp({languageId:po.FLINK,completionService:a3});sp({languageId:po.SPARK,completionService:a3});sp({languageId:po.HIVE,completionService:a3});sp({languageId:po.TRINO,completionService:a3});function MYe(){const r=De.useRef(),[e,t]=De.useState();return De.useEffect(()=>{r.current||(r.current=XGe({extensions:[lYe]}),r.current&&t(()=>{var i;return(i=r.current)==null?void 0:i.render(Ug.jsx(Hje,{}))}))},[]),Ug.jsx("div",{children:e})}pfe.createRoot(document.getElementById("root")).render(Ug.jsx(me.StrictMode,{children:Ug.jsx(MYe,{})}));export{K4e as M,$4e as R,Bn as T,rYe as W,vn as _,sYe as d,xd as e,Qg as l,B2 as m};
